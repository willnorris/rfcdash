<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.107" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Identifier" content="urn:ietf:rfc:7021" />
<meta name="DC.Description.Abstract" content="NAT444 is an IPv4 extension technology being considered by Service\nProviders as a means to continue offering IPv4 service to customers\nwhile transitioning to IPv6. This technology adds an extra Carrier-\nGrade NAT (CGN) in the Service Provider network, often resulting in\ntwo NATs. CableLabs, Time Warner Cable, and Rogers Communications\nindependently tested the impacts of NAT444 on many popular Internet\nservices using a variety of test scenarios, network topologies, and\nvendor equipment. This document identifies areas where adding a second\nlayer of NAT disrupts the communication channel for common Internet\napplications. This document was updated to include the Dual-Stack Lite\n(DS-Lite) impacts also." />
<meta name="DC.Creator" content="Kuarsingh, Victor" />
<meta name="DC.Creator" content="Berg, John" />
<meta name="DC.Creator" content="Donley, Chris" />
<meta name="DC.Creator" content="Howard, Lee" />
<meta name="DC.Date.Issued" content="September, 2013" />
<meta name="DC.Title" content="Assessing the Impact of Carrier-Grade NAT on Network Applications" />

    <link rel="icon" href="http://tools.ietf.org/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="http://tools.ietf.org/images/rfc.png" type="image/png" />
    <title>RFC 7021 - Assessing the Impact of Carrier-Grade NAT on Network Applications</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgorange"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc7021.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc7021" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-donley-nat444-impacts" title="draft-donley-nat444-impacts">draft-donley-nat4...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7021" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc7021" title="Side-by-side diff">Diff2</a>]                 </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Independent Submission                                    C. Donley, Ed.
Request for Comments: 7021                                     CableLabs
Category: Informational                                        L. Howard
ISSN: 2070-1721                                        Time Warner Cable
                                                            V. Kuarsingh
                                                   Rogers Communications
                                                                 J. Berg
                                                               CableLabs
                                                                J. Doshi
                                                        Juniper Networks
                                                          September 2013


   <span class="h1">Assessing the Impact of Carrier-Grade NAT on Network Applications</span>

Abstract

   NAT444 is an IPv4 extension technology being considered by Service
   Providers as a means to continue offering IPv4 service to customers
   while transitioning to IPv6.  This technology adds an extra Carrier-
   Grade NAT (CGN) in the Service Provider network, often resulting in
   two NATs.  CableLabs, Time Warner Cable, and Rogers Communications
   independently tested the impacts of NAT444 on many popular Internet
   services using a variety of test scenarios, network topologies, and
   vendor equipment.  This document identifies areas where adding a
   second layer of NAT disrupts the communication channel for common
   Internet applications.  This document was updated to include the
   Dual-Stack Lite (DS-Lite) impacts also.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This is a contribution to the RFC Series, independently of any other
   RFC stream.  The RFC Editor has chosen to publish this document at
   its discretion and makes no statement about its value for
   implementation or deployment.  Documents approved for publication by
   the RFC Editor are not a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7021">http://www.rfc-editor.org/info/rfc7021</a>.







<span class="grey">Donley, et al.                Informational                     [Page 1]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="http://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.








































<span class="grey">Donley, et al.                Informational                     [Page 2]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Testing Scope  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
     <a href="#section-2.1">2.1</a>.  Test Cases . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
       2.1.1.  Case 1: Single Client, Single Home Network, Single
               Service Provider . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
       2.1.2.  Case 2: Two Clients, Single Home Network, Single
               Service Provider . . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
       2.1.3.  Case 3: Two Clients, Two Home Networks, Single
               Service Provider . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
       2.1.4.  Case 4: Two Clients, Two Home Networks, Two
               Service Providers Cross ISP  . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-2.2">2.2</a>.  General Test Environment . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-2.3">2.3</a>.  Test Metrics . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-2.4">2.4</a>.  Test Scenarios Executed  . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-2.5">2.5</a>.  General Test Methodologies . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-3">3</a>.  Observed CGN Impacts . . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
     <a href="#section-3.1">3.1</a>.  Dropped Services . . . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
     <a href="#section-3.2">3.2</a>.  Performance Impacted Services  . . . . . . . . . . . . . . <a href="#page-14">14</a>
     <a href="#section-3.3">3.3</a>.  Improvements since 2010  . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
     <a href="#section-3.4">3.4</a>.  Additional CGN Challenges  . . . . . . . . . . . . . . . . <a href="#page-16">16</a>
   <a href="#section-4">4</a>.  2011 Summary of Results  . . . . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-4.1">4.1</a>.  NAT444 . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-4.2">4.2</a>.  DS-Lite  . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
   <a href="#section-5">5</a>.  2010 Summary of Results  . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
     5.1.  Case 1: Single Client, Single Home Network, Single
           Service Provider . . . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
     5.2.  Case 2: Two Clients, Single Home Network, Single
           Service Provider . . . . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     5.3.  Case 3: Two Clients, Two Home Networks, Single Service
           Provider . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     5.4.  Case 4: Two Clients, Two Home Networks, Two Service
           Providers Cross ISP  . . . . . . . . . . . . . . . . . . . <a href="#page-25">25</a>
   <a href="#section-6">6</a>.  CGN Mitigation . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-25">25</a>
   <a href="#section-7">7</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-26">26</a>
   <a href="#section-8">8</a>.  Informative References . . . . . . . . . . . . . . . . . . . . <a href="#page-26">26</a>
   <a href="#appendix-A">Appendix A</a>.  Acknowledgements  . . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>













<span class="grey">Donley, et al.                Informational                     [Page 3]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>.  Introduction</span>

   IANA, APNIC, and RIPE NCC exhausted their IPv4 address space in 2011-
   2012.  Current projections suggest that ARIN may exhaust its free
   pool of IPv4 addresses in 2013.  IPv6 is the solution to the IPv4
   depletion problem; however, the transition to IPv6 will not be
   completed prior to IPv4 exhaustion.  NAT444 [<a href="#ref-NAT444" title="&quot;NAT444&quot;">NAT444</a>] and Dual-Stack
   Lite [<a href="rfc6333.html" title="&quot;Dual- Stack Lite Broadband Deployments Following IPv4 Exhaustion&quot;">RFC6333</a>] are transition mechanisms that will allow Service
   Providers to multiplex customers behind a single IPv4 address, which
   will allow many legacy devices and applications some IPv4
   connectivity.  While both NAT444 and Dual-Stack Lite provide basic
   IPv4 connectivity, they impact a number of advanced applications.
   This document describes suboptimal behaviors of NAT444 and DS-Lite
   found in our test environments.

   From July through August 2010, CableLabs, Time Warner Cable, and
   Rogers Communications tested the impact of NAT444 on common
   applications using Carrier-Grade NAT (CGN) devices.  This testing was
   focused on a wide array of real-time usage scenarios designed to
   evaluate the user experience over the public Internet using NAT444 in
   both single and dual ISP environments.  The purpose of this testing
   was to identify applications where the technology either breaks or
   significantly impacts the user experience.  The testing revealed that
   applications, such as video streaming, video gaming, and peer-to-peer
   file sharing, are impacted by NAT444.

   From June through October 2011, CableLabs conducted additional
   testing of CGN technologies, including both NAT444 and Dual-Stack
   Lite.  The testing focused on working with several vendors including
   A10, Alcatel-Lucent, and Juniper to optimize the performance of those
   applications that experienced negative impacts during earlier CGN
   testing and to expand the testing to DS-Lite.

   Applications that were tested included, but were not necessarily
   limited to, the following:

   1.  Video/Audio streaming, e.g., Silverlight-based applications,
       Netflix, YouTube, Pandora 2

   2.  Peer-to-peer applications, e.g., video gaming, uTorrent

   3.  Online gaming, e.g., Xbox

   4.  Large file transfers using File Transfer Protocol (FTP)

   5.  Session Initiation Protocol (SIP) calls via X-Lite, Skype





<span class="grey">Donley, et al.                Informational                     [Page 4]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   6.  Social Networking, e.g., Facebook, Webkinz

   7.  Video chat, e.g., Skype

   8.  Web conferencing

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>.  Testing Scope</span>

<span class="h3"><a class="selflink" name="section-2.1" href="#section-2.1">2.1</a>.  Test Cases</span>

   The diagrams below depict the general network architecture used for
   testing NAT444 and Dual-Stack Lite coexistence technologies at
   CableLabs.

<span class="h4"><a class="selflink" name="section-2.1.1" href="#section-2.1.1">2.1.1</a>.  Case 1: Single Client, Single Home Network, Single Service</span>
<span class="h4">        Provider</span>

                                  ^^^^^^^^
                                 (Internet)
                                  vvvvvvvv
                                     |
                                     |
                              +---------------+
                              |      CGN      |
                              +---------------+
                                   |
                              +---------------+
                              |      CMTS     |
                              +---------------+
                                    |
                              +---------------+
                              |      CM       |
                              +---------------+
                                    |
                             +-------------------------+
                             |      Home Router        |
                             +-------------------------+
                                    |
                             +---------------+
                             |      Client   |
                             +---------------+

   This is a typical case for a client accessing content on the
   Internet.  For this case, we focused on basic web browsing, voice and
   video chat, instant messaging, video streaming (using YouTube, Google
   Videos, etc.), torrent leeching and seeding, FTP, and gaming.





<span class="grey">Donley, et al.                Informational                     [Page 5]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-6" id="page-6" href="#page-6" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h4"><a class="selflink" name="section-2.1.2" href="#section-2.1.2">2.1.2</a>.  Case 2: Two Clients, Single Home Network, Single Service</span>
<span class="h4">        Provider</span>

                                  ^^^^^^^^
                                 (Internet)
                                  vvvvvvvv
                                    |
                                    |
                             +---------------+
                             |      CGN      |
                             +---------------+
                                    |
                             +---------------+
                             |      CMTS     |
                             +---------------+
                                   |
                             +---------------+
                             |      CM       |
                             +---------------+
                                   |
                            +-------------------------+
                            |      Home Router        |
                            +-------------------------+
                                   |                |
                     +---------------+   +---------------+
                     |      Client   |   |      Client   |
                     +---------------+   +---------------+

   This is similar to Case 1, except that two clients are behind the
   same Large-Scale NAT (LSN) and in the same home network.  This test
   case was conducted to observe any change in speed in basic web
   browsing and video streaming.



















<span class="grey">Donley, et al.                Informational                     [Page 6]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-7" id="page-7" href="#page-7" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h4"><a class="selflink" name="section-2.1.3" href="#section-2.1.3">2.1.3</a>.  Case 3: Two Clients, Two Home Networks, Single Service Provider</span>

                                 ^^^^^^^^
                                (Internet)
                                 vvvvvvvv
                                    |
                                    |
                             +---------------+
                             |      CGN      |
                             +---------------+
                                     |
                             +---------------+
                             |      CMTS     |
                             +---------------+
                                     |
           ----------------------------------------
                       |                     |
           +---------------+         +---------------+
           |      CM       |         |      CM       |
           +---------------+         +---------------+
                   |                     |
   +-------------------------+ +-------------------------+
   |      Home Router        | |      Home Router        |
   +-------------------------+ +-------------------------+
                   |                     |
     +---------------+         +---------------+
     |      Client   |         |      Client   |
     +---------------+         +---------------+

   In this scenario, the two clients are under the same LSN but behind
   two different gateways.  This simulates connectivity between two
   residential subscribers on the same ISP.  We tested peer-to-peer
   applications.


















<span class="grey">Donley, et al.                Informational                     [Page 7]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-8" id="page-8" href="#page-8" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h4"><a class="selflink" name="section-2.1.4" href="#section-2.1.4">2.1.4</a>.  Case 4: Two Clients, Two Home Networks, Two Service Providers</span>
<span class="h4">        Cross ISP</span>

            ^^^^^^^^                    ^^^^^^^^
           ( ISP A )                   ( ISP B  )
            Vvvvvvvv                    vvvvvvvv
             |                           |
           +---------------+         +---------------+
           |      LSN      |         |      LSN      |
           +---------------+         +---------------+
               |                         |
           +---------------+         +---------------+
           |      CMTS     |         |      CMTS     |
           +---------------+         +---------------+
              |                          |
           +---------------+         +---------------+
           |      CM       |         |      CM       |
           +---------------+         +---------------+
                 |                         |
   +-------------------------+ +-------------------------+
   |      Home Router        | |      Home Router        |
   +-------------------------+ +-------------------------+
                  |                        |
     +---------------+         +---------------+
     |      Client   |         |      Client   |
     +---------------+         +---------------+

   This test case is similar to Case 1 but with the addition of another
   identical ISP.  This topology allows us to test traffic between two
   residential customers connected across the Internet.  We focused on
   client-to-client applications such as IM and peer-to-peer.

<span class="h3"><a class="selflink" name="section-2.2" href="#section-2.2">2.2</a>.  General Test Environment</span>

   The lab environment was intended to emulate multiple Service Provider
   networks with a CGN deployed and with connectivity to the public IPv4
   or IPv6 Internet (as dictated by the coexistence technology under
   test).  This was accomplished by configuring a CGN behind multiple
   cable modem termination systems (CMTSs) and setting up multiple home
   networks for each ISP.  Testing involved sending traffic to and from
   the public Internet in both single and dual ISP environments, using
   both single and multiple home networks.  The following equipment was
   used for testing:

   o  CGN

   o  CMTS




<span class="grey">Donley, et al.                Informational                     [Page 8]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-9" id="page-9" href="#page-9" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   o  Cable Modem (CM)

   o  IP sniffer

   o  RF (radio frequency) sniffer

   o  Metrics tools (for network performance)

   o  CPE (Customer Premises Equipment) gateway devices

   o  Laptop or desktop computers (multiple OSs used)

   o  Gaming consoles

   o  iPad or tablet devices

   o  other Customer Edge (CE) equipment, e.g., Blu-ray players
      supporting miscellaneous applications

   One or more CPE gateway devices were configured in the home network.
   One or more host devices behind the gateways were also configured in
   order to test conditions, such as multiple users on multiple home
   networks in the CGN architecture, both in single and dual ISP
   environments.

   The scope of testing was honed down to the specific types of
   applications and network conditions that demonstrated a high
   probability of diminishing user experience based on prior testing.
   The following use cases were tested:

   1.   Video streaming over Netflix

   2.   Video streaming over YouTube

   3.   Video streaming over Joost

   4.   Online gaming with Xbox (one user)

   5.   Peer-to-peer gaming with Xbox (two users)

   6.   BitTorrent/uTorrent file seeding/leeching

   7.   Pandora Internet Radio

   8.   FTP server

   9.   Web conferencing GoToMeeting (GTM), WebEx




<span class="grey">Donley, et al.                Informational                     [Page 9]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-10" id="page-10" href="#page-10" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   10.  Social Networking -- Facebook, Webkinz (chat, YouTube, file
        transfer)

   11.  Internet Archive -- Video and Audio streaming; large file
        downloads

   12.  Video streaming using iClips

   13.  SIP Calls -- X-Lite, Skype, PJSIP

   14.  Microsoft Smooth Streaming (Silverlight)

   15.  Video chat -- Skype, ooVoo

   The following CPE devices were used for testing these applications on
   one or more home networks:

   1.  Windows 7, XP, and Vista-based laptops

   2.  Mac OS X laptop

   3.  iPad

   4.  Xbox gaming consoles

   5.  iPhone and Android smartphones

   6.  LG Blu-ray player (test applications such as Netflix, Vudu, etc.)

   7.  Home routers -- Netgear, Linksys, D-Link, Cisco, Apple

<span class="h3"><a class="selflink" name="section-2.3" href="#section-2.3">2.3</a>.  Test Metrics</span>

   Metrics data that were collected during the course of testing were
   related to throughput, latency, and jitter.  These metrics were
   evaluated under three conditions:

   1.  Initial finding on the CGN configuration used for testing

   2.  Retest of the same test scenario with the CGN removed from the
       network

   3.  Retest with a new configuration (optimized) on the CGN (when
       possible)

   In our testing, we found only slight differences with respect to
   latency or jitter when the CGN was in the network versus when it was
   not present in the network.  It should be noted that we did not



<span class="grey">Donley, et al.                Informational                    [Page 10]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-11" id="page-11" href="#page-11" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   conduct any performance testing and metrics gathered were limited to
   single session scenarios.  Also, bandwidth was not restricted on the
   Data Over Cable Service Interface Specification (DOCSIS) network.
   Simulated homes shared a single DOCSIS upstream and downstream
   channel. (In the following table, "us" stands for microsecond.)

   +---------+---------+---------+---------+-----------------+---------+
   | Case    | Avg     | Min     | Max     | [<a href="rfc4689.html" title="&quot;Terminology for Benchmarking Network-layer Traffic Control Mechanisms&quot;">RFC4689</a>]       | Max     |
   |         | Latency | Latency | Latency | Absolute Avg    | Jitter  |
   |         |         |         |         | Jitter          |         |
   +---------+---------+---------+---------+-----------------+---------+
   | With    | 240.32  | 233.77  | 428.40  | 1.86 us         | 191.22  |
   | CGN     | us      | us      | us      |                 | us      |
   +---------+---------+---------+---------+-----------------+---------+
   | Without | 211.88  | 190.39  | 402.69  | 0.07 us         | 176.16  |
   | CGN     | us      | us      | us      |                 | us      |
   +---------+---------+---------+---------+-----------------+---------+

                              CGN Performance

   Note: Performance testing as defined by CableLabs includes load
   testing, induction of impairments on the network, etc.  This type of
   testing was out of scope for CGN testing.

<span class="h3"><a class="selflink" name="section-2.4" href="#section-2.4">2.4</a>.  Test Scenarios Executed</span>

   The following test scenarios were executed using the aforementioned
   applications and test equipment:

   1.  Single ISP, Single Home Network, with Single User

   2.  Single ISP, Two Home Networks, with One User on Each Network

   3.  Dual ISPs, Single Home Network, with Single User on Each ISP

   4.  Dual ISPs, One Home Network, with One User connected to ISP-A;
       Two Home Networks, with One User on Each connected to ISP-B

   These test scenarios were executed for both NAT444 and DS-Lite
   technologies.

<span class="h3"><a class="selflink" name="section-2.5" href="#section-2.5">2.5</a>.  General Test Methodologies</span>

   The CGN was configured for the optimal setting for the specific test
   being executed for NAT444 or DS-Lite.  Individual vendors provided
   validation of the configuration used for the coexistence technology
   under test prior to the start of testing.  Some NAT444 testing used
   private [<a href="rfc1918.html" title="&quot;Address Allocation for Private Internets&quot;">RFC1918</a>] IPv4 space between the CGN and CPE router; other



<span class="grey">Donley, et al.                Informational                    [Page 11]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-12" id="page-12" href="#page-12" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   tests used public (non-[<a href="rfc1918.html" title="&quot;Address Allocation for Private Internets&quot;">RFC1918</a>]) IPv4 space between the CGN and CPE
   router.  With the exception of 6to4 [<a href="rfc3056.html" title="&quot;Connection of IPv6 Domains via IPv4 Clouds&quot;">RFC3056</a>] traffic, we observed no
   difference in test results whether private or public address space
   was used. 6to4 failed when public space was used between the CGN and
   the CPE router was public, but CPE routers did not initiate 6to4 when
   private space was used.

   CPE gateways and client devices were configured with IPv4 or IPv6
   addresses using DHCP or manual configuration, as required by each of
   the devices used in the test.

   All devices were brought to operational state.  Connectivity of CPE
   devices to provider network and public Internet was verified prior to
   the start of each test.

   IP sniffers and metrics tools were configured as required before
   starting tests.  IP capture and metrics data was collected for all
   failed test scenarios.  Sniffing was configured behind the home
   routers, north and south of the CMTS, and north and south of the CGN.

   The test technician executed test scenarios listed above, for single
   and dual ISP environments, testing multiple users on multiple home
   networks, using the applications described above where applicable to
   the each specific test scenario.  Results and checklists were
   compiled for all tests executed and for each combination of devices
   tested.

<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>.  Observed CGN Impacts</span>

   CGN testing revealed that basic services such as email and web
   browsing worked normally and as expected.  However, there were some
   service-affecting issues noted for applications that fall into two
   categories: dropped service and performance impacted service.  In
   addition, for some specific applications in which the performance was
   impacted, throughput, latency, and jitter measurements were taken.
   We observed that performance often differs from vendor to vendor and
   from test environment to test environment, and the results are
   somewhat difficult to predict.  So as to not become a comparison
   between different vendor implementations, these results are presented
   in summary form.  When issues were identified, we worked with the
   vendors involved to confirm the specific issues and explore
   workarounds.  Except where noted, impacts to NAT444 and DS-Lite were
   similar.

   In 2010 testing, we identified that IPv6 transition technologies such
   as 6to4 [<a href="rfc3056.html" title="&quot;Connection of IPv6 Domains via IPv4 Clouds&quot;">RFC3056</a>] and Teredo [<a href="rfc4380.html" title="&quot;Teredo: Tunneling IPv6 over UDP through Network Address Translations (NATs)&quot;">RFC4380</a>] fail outright or are subject
   to severe service degradation.  We did not repeat transition
   technology testing in 2011.



<span class="grey">Donley, et al.                Informational                    [Page 12]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-13" id="page-13" href="#page-13" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   Note: While email and web browsing operated as expected within our
   environment, there have been reports that anti-spam/anti-abuse
   measures limiting the number of connections from a single address can
   cause problems in a CGN environment by improperly interpreting
   address sharing as too many connections from a single device.  Care
   should be taken when deploying CGNs to mitigate the impact of address
   sharing when configuring anti-spam/anti-abuse measures.  See <a href="#section-3.4">Section</a>
   <a href="#section-3.4">3.4</a>.

<span class="h3"><a class="selflink" name="section-3.1" href="#section-3.1">3.1</a>.  Dropped Services</span>

   Several peer-to-peer applications, specifically peer-to-peer gaming
   using Xbox and peer-to-peer SIP calls using the PJSIP client, failed
   in both the NAT444 and Dual-Stack Lite environments.  Many CGN
   devices use "full cone" NAT so that once the CGN maps a port for
   outbound services, it will accept incoming connections to that port.
   However, some applications did not first send outgoing traffic and
   hence did not open an incoming port through the CGN.  Other
   applications try to open a particular fixed port through the CGN;
   while service will work for a single subscriber behind the CGN, it
   fails when multiple subscribers try to use that port.

   PJSIP and other SIP software worked when clients used a registration
   server to initiate calls, provided that the client inside the CGN
   initiated the traffic first and that only one SIP user was active
   behind a single IPv4 address at any given time.  However, in our
   testing, we observed that when making a direct client-to-client SIP
   call across two home networks on a single ISP, or when calling from a
   single home network across dual ISPs, calls could neither be
   initiated nor received.

   In the case of peer-to-peer gaming between two Xbox 360 users in
   different home networks on the same ISP, the game could not be
   connected between the two users.  Both users shared an outside IP
   address and tried to connect to the same port, causing a connection
   failure.  There are some interesting nuances to this problem.  In the
   case where two users are in the same home network and the scenario is
   through a single ISP, when the Xbox tries to register with the Xbox
   server, the server sees that both Xboxes are coming through the same
   public IP address and directs the devices to connect using their
   internal IP addresses.  So, the connection ultimately gets
   established directly between both Xboxes via the home gateway, rather
   than the Xbox server.  In the case where there are two Xbox users on
   two different home networks using a single ISP and the CGN is
   configured with only one public IPv4 address, this scenario will not
   work because the route between the two users cannot be determined.
   However, if the CGN is configured with two public NAT IP addresses,
   this scenario will work because now there is a unique IP address with



<span class="grey">Donley, et al.                Informational                    [Page 13]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-14" id="page-14" href="#page-14" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   which to communicate.  This is not an ideal solution, however,
   because it means that there is a one-to-one relationship between IP
   addresses in the public NAT and the number of Xbox users on each
   network.

   Update: in December 2011, Microsoft released an update for Xbox.
   While we did not conduct thorough testing using the new release,
   preliminary testing indicates that Xboxes that upgraded to the latest
   version can play head-to-head behind a CGN, at least for some games.

   Other peer-to-peer applications that were noted to fail were seeding
   sessions initiated on BitTorrent and uTorrent.  In our test, torrent
   seeding was initiated on a client inside the CGN.  Leeching was
   initiated using a client on the public Internet.  It was observed
   that direct peer-to-peer seeding did not work.  However, the torrent
   session typically redirected the leeching client to a proxy server,
   in which case the torrent session was set up successfully.
   Additionally, with the proxy in the network, re-seeding via
   additional leech clients worked as would be expected for a typical
   torrent session.  Finally, uTorrent tries to use Session Traversal
   Utilities for NAT (STUN) to identify its outside address.  In working
   with vendors, we learned that increasing the STUN timeout to 4
   minutes improved uTorrent seeding performance behind a CGN, resulting
   in the ability for the uTorrent client to open a port and
   successfully seed content.

   FTP sessions to servers located inside the home (e.g., behind two
   layers of NAT) failed.  When the CGN was bypassed and traffic only
   needed to flow through one layer of NAT, clients were able to
   connect.  Finally, multicast traffic was not forwarded through the
   CGN.

<span class="h3"><a class="selflink" name="section-3.2" href="#section-3.2">3.2</a>.  Performance Impacted Services</span>

   Large size file transfers and multiple video streaming sessions
   initiated on a single client on the same home network behind the CGN
   experienced reduced performance in our environment.  We measured
   these variations in user experience against a baseline IPv4
   environment where NAT is not deployed.

   In our testing, we tried large file transfers from several FTP sites,
   as well as downloading sizable audio and video files (750 MB to 1.4
   GB) from the Internet Archive.  We observed that when Dual-Stack Lite
   was implemented for some specific home router and client
   combinations, the transfer rate was markedly slower.  For example,
   PC1 using one operating system behind the same home router as PC2
   using a different operating system yielded a transfer rate of 120
   kbps for PC1, versus 250 kbps for PC2.  Our conclusion is that



<span class="grey">Donley, et al.                Informational                    [Page 14]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-15" id="page-15" href="#page-15" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   varying combinations of home routers and CE-client devices may result
   in a user experience that is less than what the user would expect for
   typical applications.  It is also difficult to predict which
   combinations of CPE routers and CE devices will produce a reduced
   experience for the user.  We did not analyze the root cause of the
   divergence in performance across CE devices, as this was beyond the
   scope of our testing.  However, as this issue was specific to Dual-
   Stack Lite, we suspect that it is related to the MTU.

   While video streaming sessions for a single user generally performed
   well, testing revealed that video streaming sessions such as
   Microsoft Smooth Streaming technology (i.e., Silverlight) or Netflix
   might also exhibit some service impacting behavior.  In particular,
   this was observed on one older, yet popular and well-known CPE router
   where the first session was severely degraded when a second session
   was initiated in the same home network.  Traffic from the first
   session ceased for 8 s once the second session was initiated.  While
   we are tempted to write this off as a problematic home router, its
   popularity suggests that home router interactions may cause issues in
   NAT444 deployments (newer routers that support DS-Lite were not
   observed to experience this condition).  Overall, longer buffering
   times for video sessions were noted for most client devices behind
   all types of home routers.  However, once the initial buffering was
   complete, the video streams were consistently smooth.  In addition,
   there were varying degrees as to how well multiple video sessions
   were displayed on various client devices across the CPE routers
   tested.  Some video playback devices performed better than others.

<span class="h3"><a class="selflink" name="section-3.3" href="#section-3.3">3.3</a>.  Improvements since 2010</span>

   Since CableLabs completed initial CGN testing in 2010, there have
   been quantifiable improvements in performance over CGN since that
   time.  These improvements may be categorized as follows:

   o  Content provider updates

   o  Application updates

   o  Improvements on the CGNs themselves

   In terms of content provider updates, we have noted improvements in
   the overall performance of streaming applications in the CGN
   environment.  Whereas applications such as streaming video were very
   problematic a year ago with regard to jitter and latency, our most
   recent testing revealed that there is less of an issue with these
   conditions, except in some cases when multiple video streaming





<span class="grey">Donley, et al.                Informational                    [Page 15]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-16" id="page-16" href="#page-16" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   sessions were initiated on the same client using specific types of
   home routers.  Applications such as MS Smooth Streaming appear to
   have addressed these issues to some degree.

   As far as application updates, use of STUN and/or proxy servers to
   offset some of the limitations of NAT and tunneling in the network
   are more evident as workarounds to the peer-to-peer issues.
   Applications appear to have incorporated other mechanisms for
   delivering content faster, even if buffering times are somewhat
   slower and the content is not rendered as quickly.

   CGN vendors have also upgraded their devices to mitigate several
   known issues with specific applications.  With regard to addressing
   peer-to-peer SIP call applications, port reservations appear to be a
   workaround to the problem.  However, this approach has limitations
   because there are limited numbers of users that can have port
   reservations at any given time.  For example, one CGN implementation
   allowed a port reservation to be made on port 5060 (default SIP
   port), but this was the only port that could be configured for the
   SIP client.  This means that only one user can be granted the port
   reservation.

<span class="h3"><a class="selflink" name="section-3.4" href="#section-3.4">3.4</a>.  Additional CGN Challenges</span>

   There are other challenges that arise when using shared IPv4 address
   space, as with NAT444.  Some of these challenges include:

   o  Loss of geolocation information - Often, translation zones will
      cross traditional geographic boundaries.  Since the source
      addresses of packets traversing an LSN are set to the external
      address of the LSN, it is difficult for external entities to
      associate IP/Port information to specific locations/areas.

   o  Lawful Intercept/Abuse Response - Due to the nature of NAT444
      address sharing, it will be hard to determine the customer/
      endpoint responsible for initiating a specific IPv4 flow based on
      source IP address alone.  Content providers, Service Providers,
      and law enforcement agencies will need to use new mechanisms
      (e.g., logging source port and timestamp in addition to source IP
      address) to potentially mitigate this new problem.  This may
      impact the timely response to various identification requests.
      See [<a href="rfc6269.html" title="&quot;Issues with IP Address Sharing&quot;">RFC6269</a>].

   o  Anti-spoofing - Multiplexing users behind a single IP address can
      lead to situations where traffic from that address triggers anti-
      spoofing/DDoS-protection mechanisms, resulting in unintentional
      loss of connectivity for some users.  We have received reports of




<span class="grey">Donley, et al.                Informational                    [Page 16]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-17" id="page-17" href="#page-17" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


      such anti-spoofing/DDoS mechanisms affecting email and web
      services in some instances, but did not experience them in our
      environment.

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>.  2011 Summary of Results</span>

<span class="h3"><a class="selflink" name="section-4.1" href="#section-4.1">4.1</a>.  NAT444</span>

 +---------------------+--------+--------+--------+----------+---------+
 | Test Scenario       | Single | Single | Dual   | Dual     | Notes   |
 | (per Test Plan)     | ISP,   | ISP,   | ISP,   | ISP, One |         |
 |                     | Single | Two    | One HN | HN+One   |         |
 |                     | HN,    | HN,    | with   | User on  |         |
 |                     | Single | Single | One    | ISP-A,   |         |
 |                     | User   | User   | User   | Two HN   |         |
 |                     |        | on     | on     | with One |         |
 |                     |        | Each   | Each   | User on  |         |
 |                     |        |        | ISP    | Each on  |         |
 |                     |        |        |        | ISP-B    |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Video streaming     | Pass   | Pass   | Pass   | Pass     | fails   |
 | over Netflix        |        |        |        |          | behind  |
 |                     |        |        |        |          | one     |
 |                     |        |        |        |          | router  |
 +---------------------+--------+--------+--------+----------+---------+
 | Video streaming     | Pass   | Pass   | Pass   | Pass     |         |
 | over YouTube        |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Video streaming     | Pass   | Pass   | Pass   | Pass     |         |
 | over Joost          |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Online gaming with  | Pass   | Pass   | Pass   | NT       |         |
 | one user            |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Peer-to-peer gaming | Pass   | Fail   | Pass   | NT       | fails   |
 | with two users      |        |        |        |          | when    |
 |                     |        |        |        |          | both    |
 |                     |        |        |        |          | users   |
 |                     |        |        |        |          | NAT to  |
 |                     |        |        |        |          | same    |
 |                     |        |        |        |          | address |
 +---------------------+--------+--------+--------+----------+---------+
 | BitTorrent/uTorrent | Fail   | Fail   | Fail   | Fail     |         |
 | file seeding        |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+






<span class="grey">Donley, et al.                Informational                    [Page 17]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-18" id="page-18" href="#page-18" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


 (continued)
 +---------------------+--------+--------+--------+----------+---------+
 | BitTorrent/uTorrent | Pass   | Pass   | Pass   | Pass     |         |
 | file leeching       |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Pandora Internet    | Pass   | Pass   | Pass   | Pass     |         |
 | Radio               |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | FTP server          | Pass   | Pass   | Pass   | Pass     |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Web conferencing    | Pass   | Pass   | Pass   | Pass     |         |
 | GTM                 |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Social Networking   | Pass   | Pass   | Pass   | Pass     |         |
 | Facebook            |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Social Networking   | Pass   | Pass   | Pass   | Pass     |         |
 | Webkinz             |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | X-Lite for SIP      | Pass   | Pass   | Pass   | Pass     |         |
 | calls with proxy    |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | X-Lite for SIP      | Fail   | Fail   | Fail   | Fail     |         |
 | calls no proxy      |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Skype text chat     | Pass   | Pass   | Pass   | Pass     |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Skype video chat    | Pass   | Pass   | Pass   | Pass     |         |
 +---------------------+--------+--------+--------+----------+---------+
 | ooVoo               | Pass   | Pass   | Pass   | Pass     |         |
 +---------------------+--------+--------+--------+----------+---------+
 | MS Smooth streaming | Pass   | Pass   | Pass   | Pass     |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Internet Archive    | Pass   | Pass   | Pass   | Pass     |         |
 | video streaming     |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Internet Archive    | Pass   | Pass   | Pass   | Pass     |         |
 | audio streaming     |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | Internet Archive    | Pass   | Pass   | Pass   | Pass     |         |
 | file download       |        |        |        |          |         |
 +---------------------+--------+--------+--------+----------+---------+
 | iClips              | Pass   | Pass   | Pass   | Pass     |         |
 +---------------------+--------+--------+--------+----------+---------+

                                  NAT444





<span class="grey">Donley, et al.                Informational                    [Page 18]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-19" id="page-19" href="#page-19" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h3"><a class="selflink" name="section-4.2" href="#section-4.2">4.2</a>.  DS-Lite</span>

  +--------------+---------+-----------+---------------+---------------+
  | Test         | DS-Lite | Duration  | Description   | General       |
  | Scenario     | Test    | of Test   | of Test       | Observations  |
  | (per Test    | Results | Performed | Execution     | and Notes     |
  | Plan)        |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Video        | Pass    | 15 min.   |               |               |
  | streaming    |         |           |               |               |
  | over Netflix |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Video        | Pass    | 10 min.   |               |               |
  | streaming    |         |           |               |               |
  | over YouTube |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Video        | Pass    | 10 min.   |               |               |
  | streaming    |         |           |               |               |
  | over Joost   |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Online       | Pass    | 15 min.   |               |               |
  | gaming with  |         |           |               |               |
  | one user     |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Peer-to-peer | Fail    | NA        | user inside   | Users inside  |
  | gaming with  |         |           | HN1 playing   | both HN are   |
  | two users    |         |           | game against  | not able to   |
  |              |         |           | user inside   | connect.  The |
  |              |         |           | HN2           | error shown   |
  |              |         |           |               | on console,   |
  |              |         |           |               | "The game     |
  |              |         |           |               | session is no |
  |              |         |           |               | longer        |
  |              |         |           |               | available"    |
  +--------------+---------+-----------+---------------+---------------+
  | BitTorrent   | Fail    | 12 min.   | user on the   |               |
  | or uTorrent  |         |           | Internet is   |               |
  | file seeding |         |           | able to       |               |
  |              |         |           | download file |               |
  |              |         |           | using proxy   |               |
  |              |         |           | server and    |               |
  |              |         |           | not           |               |
  |              |         |           | peer-to-peer  |               |
  +--------------+---------+-----------+---------------+---------------+







<span class="grey">Donley, et al.                Informational                    [Page 19]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-20" id="page-20" href="#page-20" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


  (continued)
  +--------------+---------+-----------+---------------+---------------+
  | BitTorrent   | Pass    | 10 min.   |               |               |
  | or uTorrent  |         |           |               |               |
  | file         |         |           |               |               |
  | leeching     |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Pandora      | Pass    | 10 min.   |               |               |
  | Internet     |         |           |               |               |
  | Radio        |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | FTP server   | Pass    | 700 Mb    |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Web          | Pass    | 10 min.   |               |               |
  | conferencing |         |           |               |               |
  | (GTM)        |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Social       | Pass    | NA        |               |               |
  | Networking   |         |           |               |               |
  | Facebook     |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Social       | Pass    | NA        |               |               |
  | Networking   |         |           |               |               |
  | Webkinz      |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | X-Lite for   | Pass    | 10 min.   |               |               |
  | SIP calls    |         |           |               |               |
  | with proxy   |         |           |               |               |
  | given        |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | X-Lite for   | Fail    | NA        |               |               |
  | SIP calls no |         |           |               |               |
  | proxy        |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Skype text   | Pass    | NA        |               |               |
  | chat         |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Skype video  | Pass    | 20 min.   |               |               |
  | chat         |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | ooVoo        | Pass    | 15 min.   |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | MS Smooth    | Pass    | 10 min.   |               |               |
  | streaming    |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+






<span class="grey">Donley, et al.                Informational                    [Page 20]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-21" id="page-21" href="#page-21" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


  (continued)
  +--------------+---------+-----------+---------------+---------------+
  | Internet     | Pass    | 10 min.   |               |               |
  | Archive      |         |           |               |               |
  | video        |         |           |               |               |
  | streaming    |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Internet     | Pass    | 5 min.    |               |               |
  | Archive      |         |           |               |               |
  | audio        |         |           |               |               |
  | streaming    |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | Internet     | Pass    | 80 Mb     |               |               |
  | Archive file |         |           |               |               |
  | download     |         |           |               |               |
  +--------------+---------+-----------+---------------+---------------+
  | iClips       | Pass    | 10 min.   |               |               |
  +--------------+---------+-----------+---------------+---------------+

                                  DS-Lite































<span class="grey">Donley, et al.                Informational                    [Page 21]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-22" id="page-22" href="#page-22" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>.  2010 Summary of Results</span>

   The tables below summarize results from the 2010 NAT444 testing at
   CableLabs, Time Warner Cable, and Rogers Communications.  They are
   included for comparison with 2011 results, documented above.

<span class="h3"><a class="selflink" name="section-5.1" href="#section-5.1">5.1</a>.  Case 1: Single Client, Single Home Network, Single Service</span>
<span class="h3">      Provider</span>

   +--------------+-------------+--------------------------------------+
   | Test Case    | Results     | Notes                                |
   +--------------+-------------+--------------------------------------+
   | Web browsing | pass        |                                      |
   +--------------+-------------+--------------------------------------+
   | Email        | pass        |                                      |
   +--------------+-------------+--------------------------------------+
   | FTP download | pass        | performance degraded on very large   |
   |              |             | downloads                            |
   +--------------+-------------+--------------------------------------+
   | BitTorrent   | pass        |                                      |
   | leeching     |             |                                      |
   +--------------+-------------+--------------------------------------+
   | BitTorrent   | fail        |                                      |
   | seeding      |             |                                      |
   +--------------+-------------+--------------------------------------+
   | Video        | pass        |                                      |
   | streaming    |             |                                      |
   +--------------+-------------+--------------------------------------+
   | Voice chat   | pass        |                                      |
   +--------------+-------------+--------------------------------------+
   | Netflix      | pass        |                                      |
   | streaming    |             |                                      |
   +--------------+-------------+--------------------------------------+
   | Instant      | pass        |                                      |
   | Messaging    |             |                                      |
   +--------------+-------------+--------------------------------------+
   | Ping         | pass        |                                      |
   +--------------+-------------+--------------------------------------+
   | Traceroute   | pass        |                                      |
   +--------------+-------------+--------------------------------------+
   | Remote       | pass        |                                      |
   | desktop      |             |                                      |
   +--------------+-------------+--------------------------------------+
   | VPN          | pass        |                                      |
   +--------------+-------------+--------------------------------------+
   | Xbox Live    | pass        |                                      |
   +--------------+-------------+--------------------------------------+




<span class="grey">Donley, et al.                Informational                    [Page 22]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-23" id="page-23" href="#page-23" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   (continued)
   +--------------+-------------+--------------------------------------+
   | Xbox online  | pass        | Blocked by some LSNs.                |
   +--------------+-------------+--------------------------------------+
   | Xbox network | fail        | Your NAT type is moderate.  For best |
   | test         |             | online experience you need an open   |
   |              |             | NAT configuration.  You should enable|
   |              |             | Universal Plug and Play (UPnP) on    |
   |              |             | the router.                          |
   +--------------+-------------+--------------------------------------+
   | Nintendo Wii | pass behind |                                      |
   |              | one LSN,    |                                      |
   |              | fail behind |                                      |
   |              | another     |                                      |
   +--------------+-------------+--------------------------------------+
   | PlayStation  | pass        |                                      |
   | 3            |             |                                      |
   +--------------+-------------+--------------------------------------+
   | Team         | fail        | pass behind one LSN, but performance |
   | Fortress 2   |             | degraded                             |
   +--------------+-------------+--------------------------------------+
   | StarCraft II | pass        |                                      |
   +--------------+-------------+--------------------------------------+
   | World of     | pass        |                                      |
   | Warcraft     |             |                                      |
   +--------------+-------------+--------------------------------------+
   | Call of Duty | pass        | performance degraded behind one LSN  |
   +--------------+-------------+--------------------------------------+
   | SlingCatcher | fail        |                                      |
   +--------------+-------------+--------------------------------------+
   | Netflix      | fail        | pass behind one LSN                  |
   | Party (Xbox) |             |                                      |
   +--------------+-------------+--------------------------------------+
   | Hulu         | pass        | performance degraded behind one LSN  |
   +--------------+-------------+--------------------------------------+
   | AIM File     | pass        | performance degraded                 |
   | Transfer     |             |                                      |
   +--------------+-------------+--------------------------------------+
   | Webcam       | fail        |                                      |
   +--------------+-------------+--------------------------------------+
   | 6to4         | fail        |                                      |
   +--------------+-------------+--------------------------------------+
   | Teredo       | fail        |                                      |
   +--------------+-------------+--------------------------------------+

                                  Case 1





<span class="grey">Donley, et al.                Informational                    [Page 23]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-24" id="page-24" href="#page-24" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h3"><a class="selflink" name="section-5.2" href="#section-5.2">5.2</a>.  Case 2: Two Clients, Single Home Network, Single Service Provider</span>

   +-----------------+---------+---------------------------------------+
   | Test Case       | Results | Notes                                 |
   +-----------------+---------+---------------------------------------+
   | BitTorrent      | pass    |                                       |
   | leeching        |         |                                       |
   +-----------------+---------+---------------------------------------+
   | BitTorrent      | fail    |                                       |
   | seeding         |         |                                       |
   +-----------------+---------+---------------------------------------+
   | Video streaming | fail    |                                       |
   +-----------------+---------+---------------------------------------+
   | Voice chat      | pass    |                                       |
   +-----------------+---------+---------------------------------------+
   | Netflix         | pass    | performance severely impacted,        |
   | streaming       |         | eventually failed                     |
   +-----------------+---------+---------------------------------------+
   | IM              | pass    |                                       |
   +-----------------+---------+---------------------------------------+
   | Limewire        | pass    |                                       |
   | leeching        |         |                                       |
   +-----------------+---------+---------------------------------------+
   | Limewire        | fail    |                                       |
   | seeding         |         |                                       |
   +-----------------+---------+---------------------------------------+

                                  Case 2

<span class="h3"><a class="selflink" name="section-5.3" href="#section-5.3">5.3</a>.  Case 3: Two Clients, Two Home Networks, Single Service Provider</span>

                  +-------------------+---------+-------+
                  | Test Case         | Results | Notes |
                  +-------------------+---------+-------+
                  | Limewire leeching | pass    |       |
                  +-------------------+---------+-------+
                  | Limewire seeding  | fail    |       |
                  +-------------------+---------+-------+
                  | uTorrent leeching | pass    |       |
                  +-------------------+---------+-------+
                  | uTorrent seeding  | fail    |       |
                  +-------------------+---------+-------+

                                  Case 3







<span class="grey">Donley, et al.                Informational                    [Page 24]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-25" id="page-25" href="#page-25" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h3"><a class="selflink" name="section-5.4" href="#section-5.4">5.4</a>.  Case 4: Two Clients, Two Home Networks, Two Service Providers</span>
<span class="h3">      Cross ISP</span>

                  +------------------+---------+-------+
                  | Test Case        | Results | Notes |
                  +------------------+---------+-------+
                  | Skype voice call | pass    |       |
                  +------------------+---------+-------+
                  | IM               | pass    |       |
                  +------------------+---------+-------+
                  | FTP              | fail    |       |
                  +------------------+---------+-------+
                  | Facebook chat    | pass    |       |
                  +------------------+---------+-------+
                  | Skype video      | pass    |       |
                  +------------------+---------+-------+

                                  Case 4

<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>.  CGN Mitigation</span>

   Our testing did not focus on mitigating the impact of Carrier-Grade
   NAT, as described above.  As such, mitigation is not the focus of
   this document.  However, there are several approaches that could
   lessen the impacts described above.

   +-----------------------+-------------------------------------------+
   | Challenge             | Potential Workaround(s)                   |
   +-----------------------+-------------------------------------------+
   | Peer-to-peer          | Use a proxy server; [<a href="rfc6887.html" title="&quot;Port Control Protocol (PCP)&quot;">RFC6887</a>]             |
   +-----------------------+-------------------------------------------+
   | Gaming                | [<a href="rfc6887.html" title="&quot;Port Control Protocol (PCP)&quot;">RFC6887</a>]                                 |
   +-----------------------+-------------------------------------------+
   | Negative impact to    | Deploy CGN close to the edge of the       |
   | geolocation services  | network; use regional IP and port         |
   |                       | assignments                               |
   +-----------------------+-------------------------------------------+
   | Logging requirements  | Deterministic Logging [<a href="#ref-DETERMINE" title="&quot;Deterministic Address Mapping to Reduce Logging in Carrier Grade NAT Deployments&quot;">DETERMINE</a>]; data   |
   | for lawful intercept  | compression [<a href="#ref-NAT-LOG" title="&quot;IPFIX Information Elements for logging NAT Events&quot;">NAT-LOG</a>]; bulk port logging  |
   +-----------------------+-------------------------------------------+

                              CGN Mitigation

   Other mitigation techniques that are currently being researched, such
   as [<a href="#ref-STATELESS" title="&quot;Stateless IPv4 Network Address Translation&quot;">STATELESS</a>], may also improve performance.






<span class="grey">Donley, et al.                Informational                    [Page 25]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-26" id="page-26" href="#page-26" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>.  Security Considerations</span>

   Security considerations are described in [<a href="rfc6264.html" title="&quot;An Incremental Carrier-Grade NAT (CGN) for IPv6 Transition&quot;">RFC6264</a>] and [<a href="rfc6269.html" title="&quot;Issues with IP Address Sharing&quot;">RFC6269</a>].

   In general, since a CGN device shares a single IPv4 address with
   multiple subscribers, CGN devices may provide an attractive target
   for denial-of-service attacks.  In addition, as described in
   [<a href="#ref-DETERMINE" title="&quot;Deterministic Address Mapping to Reduce Logging in Carrier Grade NAT Deployments&quot;">DETERMINE</a>], abuse attribution is more challenging with CGN and
   requires content providers to log IP address, source port, and time
   to correlate with Service Provider CGN logs.  Also, if a CGN public
   IP address is added to a blacklist (e.g., for SPAM) or if a server
   limits the number of connections per IP address, it could negatively
   impact legitimate users.

<span class="h2"><a class="selflink" name="section-8" href="#section-8">8</a>.  Informative References</span>

   [<a name="ref-DETERMINE" id="ref-DETERMINE">DETERMINE</a>]  Donley, C., Grundemann, C., Sarawat, V., Sundaresan, K.,
                and O. Vautrin, "Deterministic Address Mapping to Reduce
                Logging in Carrier Grade NAT Deployments", Work in
                Progress, July 2013.

   [<a name="ref-NAT-LOG" id="ref-NAT-LOG">NAT-LOG</a>]    Sivakumar, S. and R. Penno, "IPFIX Information Elements
                for logging NAT Events", Work in Progress, August 2013.

   [<a name="ref-NAT444" id="ref-NAT444">NAT444</a>]     Yamagata, I., Shirasaki, Y., Nakagawa, A., Yamaguchi,
                J., and H. Ashida, "NAT444", Work in Progress,
                July 2012.

   [<a name="ref-RFC1918" id="ref-RFC1918">RFC1918</a>]    Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G.,
                and E. Lear, "Address Allocation for Private Internets",
                <a href="http://tools.ietf.org/html/bcp5">BCP 5</a>, <a href="rfc1918.html">RFC 1918</a>, February 1996.

   [<a name="ref-RFC3056" id="ref-RFC3056">RFC3056</a>]    Carpenter, B. and K. Moore, "Connection of IPv6 Domains
                via IPv4 Clouds", <a href="rfc3056.html">RFC 3056</a>, February 2001.

   [<a name="ref-RFC4380" id="ref-RFC4380">RFC4380</a>]    Huitema, C., "Teredo: Tunneling IPv6 over UDP through
                Network Address Translations (NATs)", <a href="rfc4380.html">RFC 4380</a>,
                February 2006.

   [<a name="ref-RFC4689" id="ref-RFC4689">RFC4689</a>]    Poretsky, S., Perser, J., Erramilli, S., and S. Khurana,
                "Terminology for Benchmarking Network-layer Traffic
                Control Mechanisms", <a href="rfc4689.html">RFC 4689</a>, October 2006.

   [<a name="ref-RFC6264" id="ref-RFC6264">RFC6264</a>]    Jiang, S., Guo, D., and B. Carpenter, "An Incremental
                Carrier-Grade NAT (CGN) for IPv6 Transition", <a href="rfc6264.html">RFC 6264</a>,
                June 2011.





<span class="grey">Donley, et al.                Informational                    [Page 26]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-27" id="page-27" href="#page-27" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


   [<a name="ref-RFC6269" id="ref-RFC6269">RFC6269</a>]    Ford, M., Boucadair, M., Durand, A., Levis, P., and P.
                Roberts, "Issues with IP Address Sharing", <a href="rfc6269.html">RFC 6269</a>,
                June 2011.

   [<a name="ref-RFC6333" id="ref-RFC6333">RFC6333</a>]    Durand, A., Droms, R., Woodyatt, J., and Y. Lee, "Dual-
                Stack Lite Broadband Deployments Following IPv4
                Exhaustion", <a href="rfc6333.html">RFC 6333</a>, August 2011.

   [<a name="ref-RFC6887" id="ref-RFC6887">RFC6887</a>]    Wing, D., Cheshire, S., Boucadair, M., Penno, R., and P.
                Selkirk, "Port Control Protocol (PCP)", <a href="rfc6887.html">RFC 6887</a>,
                April 2013.

   [<a name="ref-STATELESS" id="ref-STATELESS">STATELESS</a>]  Tsou, T., Liu, W., Perreault, S., Penno, R., and M.
                Chen, "Stateless IPv4 Network Address Translation", Work
                in Progress, October 2012.




































<span class="grey">Donley, et al.                Informational                    [Page 27]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-28" id="page-28" href="#page-28" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


<span class="h2"><a class="selflink" name="appendix-A" href="#appendix-A">Appendix A</a>.  Acknowledgements</span>

   Thanks to the following people for their testing, guidance, and
   feedback:

      Paul Eldridge

      Abishek Chandrasekaran

      Vivek Ganti

      Joey Padden

      Lane Johnson

   Also, thanks to Noel Chiappa for his comments.



































<span class="grey">Donley, et al.                Informational                    [Page 28]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-29" id="page-29" href="#page-29" class="invisible"> </a>
<span class="grey"><a href="rfc7021.html">RFC 7021</a>                     NAT444 Impacts               September 2013</span>


Authors' Addresses

   Chris Donley (editor)
   CableLabs
   858 Coal Creek Circle
   Louisville, CO  80027
   USA

   EMail: c.donley@cablelabs.com


   Lee Howard
   Time Warner Cable
   13241 Woodland Park Rd
   Herndon, VA  20171
   USA

   EMail: william.howard@twcable.com


   Victor Kuarsingh
   Rogers Communications
   8200 Dixie Road
   Brampton, ON  L6T 0C1
   Canada

   EMail: victor@jvknet.com


   John Berg
   CableLabs
   858 Coal Creek Circle
   Louisville, CO  80027
   USA

   EMail: j.berg@cablelabs.com


   Jinesh Doshi
   Juniper Networks
   1194 N. Mathilda Ave
   Sunnyvale, CA  94089
   USA

   EMail: jineshd@juniper.net






Donley, et al.                Informational                    [Page 29]

</pre><br />
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>
</body>
<!-- Mirrored from tools.ietf.org/html/rfc7021 by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 19 Mar 2014 18:32:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
