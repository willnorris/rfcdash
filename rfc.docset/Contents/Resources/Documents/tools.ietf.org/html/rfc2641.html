<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.107" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:2641" name="DC.Identifier"/>
<meta content="The VlanHello protocol is part of the InterSwitch Message Protocol\n(ISMP) which provides interswitch communication between switches\nrunning Cabletron\x27s SecureFast VLAN (SFVLAN) product. Switches use\nthe VlanHello protocol to discover their neighboring switches and\nestablish the topology of the switch fabric. This memo provides\ninformation for the Internet community." name="DC.Description.Abstract"/>
<meta content="Hamilton, D." name="DC.Creator"/>
<meta content="Ruffen, D." name="DC.Creator"/>
<meta content="August, 1999" name="DC.Date.Issued"/>
<meta content="Cabletron\x27s VlanHello Protocol Specification Version 4" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 2641 - Cabletron\x27s VlanHello Protocol Specification Version 4</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc2641.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc2641" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-rfced-info-cabletron-hello" title="draft-rfced-info-cabletron-hello">draft-rfced-info-...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc2641" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc2641" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                           D. Hamilton
Request for Comments: 2641                                        D. Ruffen
Category: Informational                      Cabletron Systems Incorporated
                                                                August 1999


              <span class="h1">Cabletron's VlanHello Protocol Specification</span>
                               <span class="h1">Version 4</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

Abstract

   The VlanHello protocol is part of the InterSwitch Message Protocol
   (ISMP) which provides interswitch communication between switches
   running Cabletron's SecureFast VLAN (SFVLAN) product.  Switches use
   the VlanHello protocol to discover their neighboring switches and
   establish the topology of the switch fabric.

Table of Contents

   <a href="#section-1">1</a>. Introduction......................................  <a href="#page-2">2</a>
      <a href="#section-1.1">1.1</a> Data Conventions..............................  <a href="#page-2">2</a>
   <a href="#section-2">2</a>. VlanHello Protocol Operational Overview...........  <a href="#page-2">2</a>
      <a href="#section-2.1">2.1</a> Neighbor Discovery............................  <a href="#page-2">2</a>
      <a href="#section-2.2">2.2</a> Port States...................................  <a href="#page-3">3</a>
      <a href="#section-2.3">2.3</a> Topology Events...............................  <a href="#page-5">5</a>
      <a href="#section-2.4">2.4</a> Timers........................................  <a href="#page-9">9</a>
   <a href="#section-3">3</a>. InterSwitch Message Protocol......................  <a href="#page-9">9</a>
      <a href="#section-3.1">3.1</a> Frame Header.................................. <a href="#page-10">10</a>
      <a href="#section-3.2">3.2</a> ISMP Packet Header............................ <a href="#page-11">11</a>
      <a href="#section-3.3">3.3</a> ISMP Message Body............................. <a href="#page-12">12</a>
   <a href="#section-4">4</a>. Interswitch Keepalive Message..................... <a href="#page-13">13</a>
   <a href="#section-5">5</a>. Security Considerations........................... <a href="#page-16">16</a>
   <a href="#section-6">6</a>. References........................................ <a href="#page-16">16</a>
   <a href="#section-7">7</a>. Authors' Addresses................................ <a href="#page-16">16</a>
   <a href="#section-8">8</a>. Full Copyright Statement.......................... <a href="#page-17">17</a>






<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>. Introduction</span>

   This memo is being distributed to members of the Internet community
   in order to solicit reactions to the proposals contained herein.
   While the specification discussed here may not be directly relevant
   to the research problems of the Internet, it may be of interest to
   researchers and implementers.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1%20Data%20Conventions"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a> Data Conventions</span>

   The methods used in this memo to describe and picture data adhere to
   the standards of Internet Protocol documentation [<a href="rfc1700.html" title='"Assigned Numbers"'>RFC1700</a>], in
   particular:

      The convention in the documentation of Internet Protocols is to
      express numbers in decimal and to picture data in "big-endian"
      order.  That is, fields are described left to right, with the most
      significant octet on the left and the least significant octet on
      the right.

      The order of transmission of the header and data described in this
      document is resolved to the octet level.  Whenever a diagram shows
      a group of octets, the order of transmission of those octets is
      the normal order in which they are read in English.

      Whenever an octet represents a numeric quantity the left most bit
      in the diagram is the high order or most significant bit.  That
      is, the bit labeled 0 is the most significant bit.

      Similarly, whenever a multi-octet field represents a numeric
      quantity the left most bit of the whole field is the most
      significant bit.  When a multi-octet quantity is transmitted the
      most significant octet is transmitted first.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20VlanHello%20Protocol%20Operational%20Overview"></a><a class="selflink" href="#section-2" name="section-2">2</a>. VlanHello Protocol Operational Overview</span>

   Switches use the VlanHello protocol to detect their neighboring
   switches and establish the topology of the switch fabric.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1%20Neighbor%20Discovery"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a> Neighbor Discovery</span>

   At initialization, each switch sends an Interswitch Keepalive message
   out all local ports except those which have been preconfigured such
   that they cannot be Network ports (see <a href="#section-2.2">Section 2.2</a>).  Then, as each
   switch discovers its neighboring switches via incoming Interswitch
   Keepalive messages, it notifies its local topology services (see
   <a href="#section-2.3">Section 2.3</a>), which then build the topology tables for the switching
   fabric.



<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


   Each switch continues to send Interswitch Keepalive messages at
   regular intervals (currently 5 seconds).  If a switch has not heard
   from one of its neighbors for some predetermined interval (see
   <a href="#section-2.4">Section 2.4</a>), notification is sent to all interested services and the
   neighboring switch is removed from the topology table.

   Interswitch Keepalive messages are described in <a href="#section-4">Section 4</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2%20Port%20States"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a> Port States</span>

   Each port on a switch can be in one of several different states.
   These states are listed below.  Figure 1 shows how the port state
   changes within the VlanHello protocol.

   o  Unknown.  This is the default state of all ports at
      initialization.

   o  Network.  A port is deemed a Network port when the switch has
      received an Interswitch Keepalive message over the port from one
      of its neighbor switches.  A transition to this state triggers a
      Neighbor Found event, notifying the local topology servers that
      the interface is functioning and a 2-way conversation has been
      established with the neighbor.

      When the last switch is lost on a Network port, the state of the
      switch reverts to either Network Only (see next state) or to
      Unknown, and a Neighbor Lost event is triggered, notifying the
      local topology servers that the interface is no longer
      operational.

   o  Network Only.  Certain types of port interfaces are incapable of
      accessing user endstations and can only be used to access other
      switches.  Such ports are deemed Network Only ports.  If the last
      switch is lost from a port that has already been deemed a Network
      port, the VlanHello protocol checks the condition of the port
      interface.  If it is the type of interface that can only be used
      to access other switches, the state of the port is set to Network
      Only.  Otherwise, it reverts to Unknown.

   o  Standby.  A port is deemed a Standby port under the following
      conditions:










<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


      o  The neighbor switch on the port has a higher level of
         functionality and it has determined that the local switch is
         incompatible with that functionality.  In this circumstance,
         the MAC entry for the local switch in the Interswitch Keepalive
         message received from the neighbor contains an assigned status
         of Incompatible.

      o  The list of MAC entries in the Interswitch Keepalive message
         received from the neighbor switch does not contain an entry for
         the local switch.  In this circumstance, the local switch
         assumes that communication with its neighbor will be one-way
         only.

      The VlanHello protocol continues to listen for Interswitch
      Keepalive messages on a Standby port, but does not transmit any
      Interswitch Keepalive messages over the port.  If a message is
      received that removes the condition under which the port state was
      set to Standby, the state of the port is set to Network.

   o  Going to Access.  When any packet other than an Interswitch
      Keepalive message is received over an Unknown port, the state of
      the port is changed to Going to Access and a timer is activated.
      If the timer expires without an Interswitch Keepalive message
      being received over the port, the port state changes to Access.

   o  Access.  A port is deemed an Access port when any packet other
      than an Interswitch Keepalive message has been received over the
      port and the Going to Access timer has expired.  A port can also
      be administratively designated an Access "control" port, meaning
      the port is to remain an Access port, regardless of the type of
      messages that are received on it.  Interswitch Keepalive messages
      are not sent over Access control ports.

   Three other types of ports are recognized:  the host management port,
   host data port, and host control port. These ports are designated at
   initialization and are used to access the host CPU.  Interswitch
   Keepalive messages are not sent over these ports.














<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


                                 Packet in
                                     |
                                     V
                                +---------+
                Packet in       | Unknown |
                    |           +---------+
        G-A         V                |
       Timer  +----------+   no      V
        exp   | Going to |&lt;------[KA msg?]           Packet in
       &lt;------|  Access  |           |                   |
       |      +----------+       yes |                   V
       V             |               V     yes      +---------+
   +--------+        V            [1-way?]------+--&gt;| Standby |
   | Access |    [KA msg?]           |          ^   +---------+
   +--------+        |               | no       |        |
                     |               V       no |        V
                 yes |         [compatible?]----+    [KA msg?]
                     |               |                   |
                     |               | yes               | yes
                     |               V                   V
                     V          +---------+           [1-way?]
                     +---------&gt;| Network |&lt;--+          |
                                +---------+   ^          | no
                                     |        | yes      V
                           lost last |        +&lt;----[compatible?]
                            neighbor |
                                     V
                                 [network]
                                 [ only? ]
                                     |
         +--------------+     yes    |    no      +---------+
         | Network Only |&lt;-----------+-----------&gt;| Unknown |
         +--------------+                         +---------+


                     Figure 1:  Port State Machine

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3%20Topology%20Events"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a> Topology Events</span>

   When the VlanHello protocol discovers new information about the
   status of one of its network ports, it notifies its local topology
   service center so that the service center can build or modify the
   topology tables for the switch fabric.  This notification takes the
   form of a system event, described in a structure known as a topology
   relay structure.  These structures are linked in a first-in/first-out
   (FIFO) queue and processed by the topology servers in the order in
   which they were received.




<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


   A topology relay structure typically contains information from
   Interswitch Keepalive messages received on the specified port, as
   shown below.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                             Event                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   04 |                       Delta options mask                      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   08 |                      Current options mask                     |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   12 |                          Port number                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   16 |                                                               |
      +                Port neighbor switch identifier                +
      |                                                               |
      +                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                               |  Port neighbor IP address ... |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   28 | ... Port neighbor IP address  |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   Neighbor chassis MAC addr   +
   32 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   36 |                   Neighbor chassis IP address                 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   40 |                    Neighbor functional level                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   44 |                         Topology agent                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   48 |                           Next event                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      Event

         This 4-octet field contains the number of the event.
         Valid values are as follows:

            1   A new neighbor switch was discovered on the
                specified port.
            2   The neighbor switch has gained the feature(s)
                specified in the Delta options mask.
            3   The neighbor switch has lost the feature(s)
                specified in the Delta options mask.
            4   The neighbor switch has timed out and is presumed
                down.
            5   The specified port is down.



<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 6]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


            6   The neighbor switch has been previously seen on a
                different port.  The specified port is the
                previous port.
            7   The specified port is being reassigned to another
                topology agent.  Event is generated by the current
                (old) agent.
            8   The port is looped -- that is, the Keepalive
                message was generated by the receiving switch.
            9   The port is crossed -- that is, a Keepalive message
                was received on a port not owned by this topology
                agent.
            10  The neighbor switch's functional level has changed.
            11  The neighbor switch is running an incompatible
                version of the protocol.
            12  Two-way communication with the neighbor switch has
                been lost.
            13  The neighbor switch's Keepalive message sequence
                number has been reset, indicating the switch
                itself has been reset.

   Delta options mask

      This 4-octet field contains a bit map specifying the feature(s)
      gained or lost by the neighbor switch (events 2 and 3 only).
      Valid values are as specified for the next field, Current options
      mask.

   Current options mask

      This 4-octet field contains a bit map specifying the features of
      the neighbor switch.  Bit assignments are as follows:

         1       (unused)
         2       The switch is a VLAN switch.
         4       The switch has link state capability.
         8       The switch has loop-free flood path capability.
         16      The switch has resolve capability.
         32      (unused)
         64      The switch has tag-based flood capability.
         128     The switch has tap capability.
         256     The switch has message connection capability.
         512     The switch has redundant access capability.
         1024    The switch is an isolated switch.
         4096    The switch is an uplink. (SFVLAN V1.8 only)
         8192    The switch is an uplink to core. (SFVLAN V1.8 only)
         16384   The port is an uplink port. (SFVLAN V1.8 only)
         32768   The port is an uplink flood port. (SFVLAN V1.8 only)




<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 7]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


   Port number

      This 4-octet field contains the logical number of the local port
      for which the event was generated.

   Port neighbor switch identifier

      This 10-octet field contains the internal identifier of the
      neighbor switch discovered on the port.  The identifier consists
      of the 6-octet physical (MAC) address of the neighbor switch,
      followed by the 4-octet logical port number (local to the neighbor
      switch) on which the neighbor was discovered.

   Port neighbor IP address

      This 4-octet field contains the Internet Protocol (IP) address of
      the neighbor switch.

   Neighbor chassis MAC address

      This 6-octet field contains the physical (MAC) address of the
      chassis of the neighbor switch.

   Neighbor chassis IP address

      This 4-octet field contains the Internet Protocol (IP) address of
      the chassis of the neighbor switch.

   Neighbor functional level

      This 4-octet field contains the functional level of the neighbor
      switch, as determined by the version level of the SecureFast VLAN
      software under which this switch is operating.  Valid values are
      as follows:

      1  The switch is running a version of SFVLAN prior to Version 1.8.
      2  The switch is running SFVLAN Version 1.8 or greater.

   Topology agent

      This 4-octet field contains a pointer to the topology agent that
      generated the event.  The pointer here can reference any of the
      topology agents that send Interswitch Keepalive messages -- that
      is, any agent running the VlanHello protocol.







<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 8]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


   Next event

      This 4-octet field contains a pointer to the next event relay
      structure in the list.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.4%20Timers"></a><a class="selflink" href="#section-2.4" name="section-2.4">2.4</a> Timers</span>

   The VlanHello protocol uses three timers.

   o  Send Hello timer.  The Send Hello timer is used to control the
      interval at which Interswitch Keepalive messages are sent.

   o  Aging timer.  The Aging Timer is used to detect when communication
      with a neighboring switch has been lost.

   o  Going to Access timer.  The Going to Access timer is used to
      synchronize the transition of a port state to Access and prevent a
      port from being prematurely designation as an Access port during
      network initialization.  If an Unknown port receives any packet
      other than an Interswitch Keepalive message, the port state is set
      to Going To Access.  If the switch receives an Interswitch
      Keepalive message over that port before the timer expires, the
      port state is changed to Network. Otherwise, when the timer
      expires, the port state is changed to Access.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20InterSwitch%20Message%20Protocol"></a><a class="selflink" href="#section-3" name="section-3">3</a>. InterSwitch Message Protocol</span>

   The VlanHello protocol operates as part of the InterSwitch Message
   Protocol (ISMP) -- part of Cabletron's SecureFast VLAN (SFVLAN)
   product, as described in [<a href="#ref-IDsfvlan" title="&quot;Cabletron's SecureFast VLAN Operational Model&quot;">IDsfvlan</a>].  ISMP provides a consistent
   method of encapsulating and transmitting network control messages
   exchanged between SFVLAN switches.

   ISMP message packets are of variable length and have the following
   general structure:

   o  Frame header
   o  ISMP packet header
   o  ISMP message body












<span class="grey">Hamilton &amp; Ruffen            Informational                      [Page 9]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1%20Frame%20Header"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a> Frame Header</span>

   ISMP packets are encapsulated within an IEEE 802-compliant frame
   using a standard header as shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +      Destination address      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   04 |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+        Source address         +
   08 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   12 |             Type              |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   16 |                                                               |
      +                                                               +
      :                                                               :


   Destination address

      This 6-octet field contains the Media Access Control (MAC) address
      of the multicast channel over which all switches in the fabric
      receive ISMP packets.  The destination address fields of all ISMP
      packets contain a value of 01-00-1D-00-00-00.

   Source address

      This 6-octet field contains the physical (MAC) address of the
      switch originating the ISMP packet.

   Type

      This 2-octet field identifies the type of data carried within the
      frame.  The type field of ISMP packets contains the value 0x81FD.














<span class="grey">Hamilton &amp; Ruffen            Informational                     [Page 10]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2%20ISMP%20Packet%20Header"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a> ISMP Packet Header</span>

   The ISMP packet header consists of a variable number of octets, as
   shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |///////////////////////////////////////////////////////////////|
      ://////// Frame header /////////////////////////////////////////:
      +//////// (14 octets)  /////////+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   12 |///////////////////////////////|         ISMP Version          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   16 |       ISMP message type       |        Sequence number        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |  Code length  |                                               |
      +-+-+-+-+-+-+-+-+                                               +
      |                        Authentication code                    |
      :                                                               :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      :                                                               :


   Frame header

      This 14-octet field contains the frame header.

   ISMP Version

      This 2-octet field contains the version number of the InterSwitch
      Message Protocol to which this ISMP packet adheres.  The VlanHello
      protocol uses ISMP Version 3.0.

   ISMP message type

      This 2-octet field contains a value indicating which type of ISMP
      message is contained within the message body. VlanHello
      Interswitch Keepalive messages have a message type of 2.

   Sequence number

      This 2-octet field contains an internally generated sequence
      number used by the various protocol handlers for internal
      synchronization of messages.





<span class="grey">Hamilton &amp; Ruffen            Informational                     [Page 11]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


   Code length

      This 1-octet field contains the number of octets in the
      Authentication code field of the message.

   Authentication code

      This variable-length field contains an encoded value used for
      authentication of the ISMP message.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3%20ISMP%20Message%20Body"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a> ISMP Message Body</span>

   The ISMP message body is a variable-length field containing the
   actual data of the ISMP message.  The length and content of this
   field are determined by the value found in the message type field.

   The format of the VlanHello Interswitch Keepalive message is
   described in the next section.

































<span class="grey">Hamilton &amp; Ruffen            Informational                     [Page 12]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20Interswitch%20Keepalive%20Message"></a><a class="selflink" href="#section-4" name="section-4">4</a>. Interswitch Keepalive Message</span>

   The VlanHello Interswitch Keepalive message consists of a variable
   number of octets, as shown below:

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    00 |                                                               |
       +                          Frame header /                       +
       :                       ISMP packet header                      :
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     n |            Version            |      Switch IP address ...    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   n+4 |    ... Switch IP address      |                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   n+8 |                                                               |
       +                           Switch ID                           +
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  n+16 |                                                               |
       +      Chassis MAC address      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                               |      Chassis IP address ...   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  n+24 |   ... Chassis IP address      |          Switch type          |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  n+28 |                        Functional level                       |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  n+32 |                            Options                            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  n+36 |        Base MAC count         |                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
  n+40 |                                                               |
       :                        Base MAC entries                       :
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          n = 21 + length of the authentication code of the packet


   Frame header/ISMP packet header

      This variable-length field contains the frame header and the ISMP
      packet header.






<span class="grey">Hamilton &amp; Ruffen            Informational                     [Page 13]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


   Version

      This 2-octet field contains the version number of the VlanHello
      protocol to which this message adheres.  This document describes
      VlanHello Version 4.

   Switch IP address

      This 4-octet field contains the Internet Protocol (IP) address of
      the sending switch.

   Switch ID

      This 10-octet field contains the internal ISMP identifier of the
      sending switch.  The identifier is generated by the sending switch
      and consists of the 6-octet physical (MAC) address of the switch,
      followed by a 4-octet value containing the logical port number
      over which the switch sent the packet.

   Chassis MAC

      This 6-octet field contains the physical (MAC) address of the
      chassis of the sending switch.

   Chassis IP address

      This 4-octet field contains the Internet Protocol (IP) address of
      the switch chassis.

   Switch type

      This 2-octet field contains the type of the switch. Currently, the
      only value recognized here is as follows:

         2   The switch is an SFVLAN switch.

   Functional level

      This 4-octet field contains the functional level of the sending
      switch, as determined by the version level of the SecureFast VLAN
      software under which this switch is operating.  Valid values are
      as follows:

         1  The switch is running a version of SFVLAN prior to Version
            1.8.
         2  The switch is running SFVLAN Version 1.8 or greater.





<span class="grey">Hamilton &amp; Ruffen            Informational                     [Page 14]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


   Options

      This 4-octet field contains a bit map specifying the features of
      the switch.  Bit assignments are as follows:

         1       (unused)
         2       The switch is a VLAN switch.
         4       The switch has link state capability.
         8       The switch has loop-free flood path capability.
         16      The switch has resolve capability.
         32      (unused)
         64      The switch has tag-based flood capability.
         128     The switch has tap capability.
         256     The switch has message connection capability.
         512     The switch has redundant access capability.
         1024    The switch is an isolated switch.
         4096    The switch is an uplink. (SFVLAN V1.8 only)
         8192    The switch is an uplink to core. (SFVLAN V1.8 only)
         16384   The port is an uplink port. (SFVLAN V1.8 only)
         32768   The port is an uplink flood port. (SFVLAN V1.8 only)

   Base MAC count

      This 2-octet field contains the number of entries in the list of
      Base MAC entries.

   Base MAC entries

      This variable-length field contains a list of entries for all
      neighboring switches that the sending switch has previously
      discovered on the port over which the message was sent. The number
      of entries is found in the Base MAC count field.

      Each MAC entry is 10 octets long, structured as follows:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +      Switch MAC address       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                               |  Assigned neighbor state ...  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  ... Assigned neighbor state  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+







<span class="grey">Hamilton &amp; Ruffen            Informational                     [Page 15]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


   Switch MAC address

      This 6-octet field contains the base MAC address of the
      neighboring switch.

   Assigned neighbor state

      This 4-octet field contains the assigned state of the neighboring
      switch as perceived by the sending switch. Currently, the only
      value valid here is 3, indicating a state of Network

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20Security%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>. Security Considerations</span>

   Security concerns are not addressed in this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20References"></a><a class="selflink" href="#section-6" name="section-6">6</a>. References</span>

   [<a id="ref-RFC1700" name="ref-RFC1700">RFC1700</a>]   Reynolds, J. and  J. Postel, "Assigned Numbers", STD 2,
               <a href="rfc1700.html">RFC 1700</a>, October 1994.

   [<a id="ref-IDsfvlan" name="ref-IDsfvlan">IDsfvlan</a>]  Ruffen, D., Len, T. and J. Yanacek, "Cabletron's
               SecureFast VLAN Operational Model", <a href="rfc2643.html">RFC 2643</a>, August
               1999.

   [<a id="ref-IDvlsp" name="ref-IDvlsp">IDvlsp</a>]    Kane, L., "Cabletron's VLS Protocol Specification", <a href="rfc2642.html">RFC</a>
               <a href="rfc2642.html">2642</a>, August 1999.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20Authors%27%20Addresses"></a><a class="selflink" href="#section-7" name="section-7">7</a>. Authors' Addresses</span>

   Dave Hamilton
   Cabletron Systems, Inc.
   Post Office Box 5005
   Rochester, NH  03866-5005

   Phone:(603) 332-9400
   EMail:  daveh@ctron.com


   Dave Ruffen
   Cabletron Systems, Inc.
   Post Office Box 5005
   Rochester, NH  03866-5005

   Phone:(603) 332-9400
   EMail:  ruffen@ctron.com






<span class="grey">Hamilton &amp; Ruffen            Informational                     [Page 16]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc2641.html">RFC 2641</a>       Cabletron's VlanHello Protocol Version 4      August 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/17.%20%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-17" name="section-17">17</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Hamilton &amp; Ruffen            Informational                     [Page 17]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>


<meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

</body><!-- Mirrored from tools.ietf.org/html/rfc2641 by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 19 Mar 2014 18:46:00 GMT --><!-- Added by HTTrack --></html>