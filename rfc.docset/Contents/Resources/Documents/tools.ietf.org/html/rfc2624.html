<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.107" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:2624" name="DC.Identifier"/>
<meta content="This design considerations document is meant to present more detail\nthan the working group charter. Specifically, it presents the areas\nthat the working group will investigate and consider while developing\na protocol specification for NFS version 4. This memo provides\ninformation for the Internet community." name="DC.Description.Abstract"/>
<meta content="Spencer Shepler &lt;spencer.shepler@eng.sun.com&gt;" name="DC.Creator"/>
<meta content="June, 1999" name="DC.Date.Issued"/>
<meta content="NFS Version 4 Design Considerations" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 2624 - NFS Version 4 Design Considerations</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc2624.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc2624" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-ietf-nfsv4-designconsider" title="draft-ietf-nfsv4-designconsider">draft-ietf-nfsv4-...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc2624" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc2624" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                        S. Shepler
Request for Comments: 2624                       Sun Microsystems, Inc.
Category: Informational                                       June 1999


                  <span class="h1">NFS Version 4 Design Considerations</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

Abstract

   The main task of the NFS version 4 working group is to create a
   protocol definition for a distributed file system that focuses on the
   following items: improved access and good performance on the
   Internet, strong security with negotiation built into the protocol,
   better cross-platform interoperability, and designed for protocol
   extensions.  NFS version 4 will owe its general design to the
   previous versions of NFS.  It is expected, however, that many
   features will be quite different in NFS version 4 than previous
   versions to facilitate the goals of the working group and to address
   areas that NFS version 2 and 3 have not.

   This design considerations document is meant to present more detail
   than the working group charter.  Specifically, it presents the areas
   that the working group will investigate and consider while developing
   a protocol specification for NFS version 4.  Based on this
   investigation the working group will decide the features of the new
   protocol based on the cost and benefits within the specific feature
   areas.

Key Words

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a>.








<span class="grey">Shepler                      Informational                      [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


Table of Contents

   <a href="#section-1">1</a>.  NFS Version 4 Design Considerations . . . . . . . . . . . . . <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Ease of Implementation or Complexity of Protocol  . . . . . . <a href="#page-3">3</a>
   <a href="#section-2.1">2.1</a>.  Extensibility / layering  . . . . . . . . . . . . . . . . . <a href="#page-3">3</a>
   <a href="#section-2.2">2.2</a>.  Managed Extensions or Minor Versioning  . . . . . . . . . . <a href="#page-3">3</a>
   <a href="#section-2.3">2.3</a>.  Relationship with Older Versions of NFS . . . . . . . . . . <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  Reliable and Available  . . . . . . . . . . . . . . . . . . . <a href="#page-5">5</a>
   <a href="#section-4">4</a>.  Scalable Performance  . . . . . . . . . . . . . . . . . . . . <a href="#page-5">5</a>
   <a href="#section-4.1">4.1</a>.  Throughput and Latency via the Network  . . . . . . . . . . <a href="#page-6">6</a>
   <a href="#section-4.2">4.2</a>.  Client Caching  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-6">6</a>
   <a href="#section-4.3">4.3</a>.  Disconnected Client Operation . . . . . . . . . . . . . . . <a href="#page-7">7</a>
   <a href="#section-5">5</a>.  Interoperability  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-7">7</a>
   <a href="#section-5.1">5.1</a>.  Platform Specific Behavior  . . . . . . . . . . . . . . . . <a href="#page-8">8</a>
   <a href="#section-5.2">5.2</a>.  Additional or Extended Attributes . . . . . . . . . . . . . <a href="#page-8">8</a>
   <a href="#section-5.3">5.3</a>.  Access Control Lists  . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
   <a href="#section-6">6</a>.  RPC Mechanism and Security  . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
   <a href="#section-6.1">6.1</a>.  User identification . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
   <a href="#section-6.2">6.2</a>.  Security  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
   <a href="#section-6.2.1">6.2.1</a>.  Transport Independence  . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-6.2.2">6.2.2</a>.  Authentication  . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-6.2.3">6.2.3</a>.  Data Integrity  . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-6.2.4">6.2.4</a>.  Data Privacy  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
   <a href="#section-6.2.5">6.2.5</a>.  Security Negotiation  . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
   <a href="#section-6.3">6.3</a>.  Summary . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
   <a href="#section-7">7</a>.  Internet Accessibility  . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
   <a href="#section-7.1">7.1</a>.  Congestion Control and Transport Selection  . . . . . . .  <a href="#page-13">13</a>
   <a href="#section-7.2">7.2</a>.  Firewalls and Proxy Servers . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-7.3">7.3</a>.  Multiple RPCs and Latency . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-8">8</a>.  File locking / recovery . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
   <a href="#section-9">9</a>.  Internationalization  . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   <a href="#section-10">10</a>.  Security Considerations  . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
   <a href="#section-10.1">10.1</a>.  Denial of Service  . . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
   <a href="#section-11">11</a>.  Bibliography . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-18">18</a>
   <a href="#section-12">12</a>.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>
   <a href="#section-13">13</a>.  Author's Address . . . . . . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>
   <a href="#section-14">14</a>.  Full Copyright Statement . . . . . . . . . . . . . . . . .  <a href="#page-22">22</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20NFS%20Version%204%20Design%20Considerations"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  NFS Version 4 Design Considerations</span>

   As stated in the charter, the first deliverable for the NFS version 4
   working group is this design considerations document.  This document
   is to cover the "limitations and deficiencies of NFS version 3".
   This document will also be used as a mechanism to focus discussion
   and avenues of investigation as the definition of NFS version 4
   progresses.  Therefore, the contents of this document cover the
   general functional/feature areas that are anticipated for NFS version
   4.  Where appropriate, discussion of current NFS version 2 and 3



<span class="grey">Shepler                      Informational                      [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   practice will be presented along with other appropriate references to
   current distributed file system practice.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Ease%20of%20Implementation%20or%20Complexity%20of%20Protocol"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Ease of Implementation or Complexity of Protocol</span>

   One of the strengths of NFS has been the ability to implement a
   client or server with relative ease.  The eventual size of a basic
   implementation is relatively small.  The main reason for keeping NFS
   as simple as possible is that a simple protocol design can be
   described in a simple specification that promotes straightforward,
   interoperable implementations.  All protocols can run into problems
   when deployed on real networks, but simple protocols yield problems
   that are easier to diagnose and correct.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Extensibility%20%2F%20layering"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Extensibility / layering</span>

   With NFS' relative simplicity, the addition or layering of
   functionality has been easy to accomplish.  The addition of features
   like the client automount or autofs, client side disk caching and
   high availability servers are examples.  This type of extensibility
   is desirable in an environment where problem solutions do not require
   protocol revision.  This extensibility can also be helpful in the
   future where unforeseen problems or opportunities can be solved by
   layering functionality on an existing set of tools or protocol.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Managed%20Extensions%20or%20Minor%20Versioning"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Managed Extensions or Minor Versioning</span>

   For those cases where the NFS protocol is deficient or where a minor
   modification is the best solution for a problem, a minor version or a
   managed extension could be helpful.  There have been instances with
   NFS version 2 and 3 where small straightforward functional additions
   would have increased the overall value of the protocol immensely.
   For instance, the PATHCONF procedure that was added to version 2 of
   the MOUNT protocol would have been more appropriate for the NFS
   protocol. WebNFS [<a href="rfc2054.html">RFC2054</a>][RFC2055] overloading of the LOOKUP
   procedure for NFS versions 2 and 3 would have been more cleanly
   implemented in a new LOOKUP procedure.

   However, the perceived size and burden of using a change of RPC
   version number for the introduction of new functionality led to no or
   slow change.  It is possible that a new NFS protocol could allow for
   the rare instance where protocol extension within the RPC version
   number is the most prudent course and an RPC revision would be
   unnecessary or impractical.

   The areas of an NFS protocol which are most obviously volatile are
   new orthogonal procedures, new well-defined file or directory
   attributes and potentially new file types.  As an example, potential



<span class="grey">Shepler                      Informational                      [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   file types of the future could be a type such as "attribute" that
   represents a named file stream or a "dynamic" file type that
   generates dynamic data in response to a "query" procedure from the
   client.

   It is possible and highly desirable that these types of additions be
   done without changing the overall design model of NFS without
   significant effort or delay.

   A strong consideration should be given to a NFS protocol mechanism
   for the introduction of this type of new functionality.  This is
   obviously in contrast to using the standard RPC version mechanism to
   provide minor changes.  The process of using RPC version numbers to
   introduce new functionality brings with it a lot of history which may
   not technically prevent its use.  However, the historical issues
   involved will need to be addressed as part of the NFS version 4
   protocol work; this should increase the ability for current and
   future success of the protocol.

   As background, the RPC protocol described in [<a href="rfc1831.html">RFC1831</a>] uses a version
   number to describe the set of procedure calls, replies, and their
   semantics.  Any change in this set must be reflected in a new version
   number for the program.  An example of this was the
   MOUNTPROC_PATHCONF procedure added in version 2 of the MOUNT
   protocol.  Except for the addition of this new procedure, the
   protocol was unchanged.  Many thought this protocol revision was
   unnecessary, since the RPC protocol already allows certain procedures
   not be implemented and defines a PROC_UNAVAIL error.

   Another historical data-point from NFS version 2 and 3 is the support
   (or lack) of symbolic links.  Servers that cannot support this
   feature will simply reject calls to the SYMLINK and READLINK
   procedures.  Additionally, NFS version 4 may describe many file
   attributes which cannot be supported by the server or file systems on
   the server.  Therefore, the protocol must support a discovery
   mechanism that allows clients to determine which features of the
   protocol are supported by a server.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3.%20%20Relationship%20with%20Older%20Versions%20of%20NFS"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a>.  Relationship with Older Versions of NFS</span>

   NFS version 4 will be a self contained protocol in that it will not
   have any dependencies on the previous versions of NFS.  Stated
   another way, an NFS version 4 server or client will not require a
   NFSv2 or NFSv3 implementation be present for NFS version 4 to
   function as designed.  It should also be noted that having an NFS
   version 2 or 3 implementation present at the client or server will
   not enhance the functionality of an NFS version 4 implementation.




<span class="grey">Shepler                      Informational                      [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   In the case where an NFS client has a choice of using various NFS
   protocol versions (i.e. 2, 3 and 4), the underlying ONCRPC mechanisms
   will allow the client to appropriately choose an available version of
   the protocol at the NFS server.  The ONCRPC protocol contains the
   semantics and error returns for the case where an RPC server program
   does not support a particular version.  This mechanism is used by the
   NFS client to receive notification of an unavailable version and in
   conjunction with the error the client will also receive the range of
   versions (min to max) that are available.  Therefore, the ONCRPC
   mechanism can be used by implementors of both clients and servers to
   provide for the transitioning to or installation of NFS version 4
   services.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Reliable%20and%20Available"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Reliable and Available</span>

   Current NFS protocol design, while placing an emphasis on simple
   server design, has led to timely recovery from server and client
   failure.  This and other aspects to the design have provided a basis
   for layered technologies like high availability and clustered
   servers.  Providing a protocol design approach that lends itself to
   these types of reliability and availability features is very
   desirable.

   For the next version of NFS, consideration should be given to client
   side availability schemes such as client switching between or fail-
   over to available server replicas.  NFS currently requires that file
   handles be immutable; this requirement adds unnecessarily to the
   complexity of building fail-over configurations.  If possible, the
   protocol should allow for or ease the building of such layered
   solutions.

   For the next version of NFS, consideration should be given to schemes
   that support client switching between server replicas or highly
   available NFS servers that provide paths to data through multiple
   servers. For example: NFS currently requires that filehandles be
   unchanging for any instance of a file or directory. This requirement
   makes it more difficult for a client to switch from one server to
   another, since each server may construct filehandles differently.
   Protocol support could allow the client to handle a filehandle
   change.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Scalable%20Performance"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Scalable Performance</span>

   In designing and developing an NFS protocol from a performance
   viewpoint there are several different points to consider.  Each can
   play a significant role in perceived and real performance from the
   user's perspective.  The three main areas of interest are: throughput
   and latency via the network, server work load or scalability and



<span class="grey">Shepler                      Informational                      [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   client side caching.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Throughput%20and%20Latency%20via%20the%20Network"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Throughput and Latency via the Network</span>

   NFS currently has characteristics that provide good throughput for
   reading and writing file data. This is commonly achieved by the
   client's use of pipelining or windowing multiple RPC READ/WRITE
   requests to the server. The flexibility of the NFS and ONCRPC
   protocols allow for implementations to use this type of adaptation to
   provide efficient use of the network connection.

   However, the number of RPCs required to accomplish some tasks
   combined with high latency network environments may lead to sluggish
   single user or single client response.  The protocol should continue
   to provide good raw read and write throughput while addressing the
   issue of network latency.  This issue is discussed further in the
   section on Internet Accessibility.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Client%20Caching"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Client Caching</span>

   In an attempt to speed response time and to reduce network and server
   load, NFS clients have always cached directory and file data.

   However, this has usually been done as memory cache and in relatively
   recent history, local disk caching has been added.

   It is very desirable to have the NFS client cache directory and file
   data.  Other distributed file systems have shown that aggressive
   client side caching can be very visible to the end user in the form
   of decreasing overall response time.  For AFS and DCE/DFS, caching is
   accomplished by the utilization of server call backs to notify the
   client of potential cache invalidation.  CIFS and its opportunistic
   locks provide a similar call back mechanism.  Clients in both of
   these environments are able to cache data while avoiding interaction
   with the network and server.

   With these protocols it is also possible to cache or delay certain
   protocol requests at the client which further reduces the protocol
   traffic flowing between client and server.  In the case of CIFS, it
   is possible for a client to obtain an opportunistic lock for a file
   and subsequently process file lock requests completely at the client.
   If there are no conflicts with other clients for file data access,
   the server is never contacted for the file locking traffic generated
   by the user application. This behavior is not a protocol requirement
   but is allowed by the protocol as an implementation option to improve
   performance.





<span class="grey">Shepler                      Informational                      [Page 6]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   NFS versions 2 and 3 make no caching requirements.  Implementations
   typically implement close-to-open cache consistency which requires
   clients flush all changes to the server on each file close, and check
   for file changes on the server on each file open.  The consistency
   check required on each file open can generate a large amount of
   GETATTR traffic.  With this approach, there are windows when the
   client can still be acting with stale data between the open and close
   of a file.

   Client caching is increasingly important for Internet environments
   where throughput can be limited and response time can grow
   significantly. Therefore the NFS version 4 caching design will need
   to take into account the full spectrum of caching designs as
   exemplified by the current technologies of NFS, AFS, DCE/DFS, CIFS,
   etc. in determining an appropriate design.  This will need to be done
   while weighing the complexity of each possible approach with the need
   of the eventual users and operating environments into which NFS
   version 4 may be deployed.  Some of these considerations are:
   Internet accessibility, firewall traversal (call back availability),
   proxy caching, low-overhead or simple clients.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Disconnected%20Client%20Operation"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Disconnected Client Operation</span>

   An extension of client caching is the provision for disconnected
   operation at the client.  With the ability to cache directory and
   file data aggressively, a client could then provide service to the
   end user while disconnected from the server or network.

   While very desirable, disconnected operation has the potential to
   inflict itself upon the NFS protocol in an undesirable way as
   compared to traditional client caching.  Given the complexities of
   disconnected client operation and subsequent resolution of client
   data modification through various playback or data selection
   mechanisms, disconnected operation should not be a requirement for
   the NFS effort.  Even so, the NFS protocol should consider the
   potential layering of disconnected operation solutions on top of the
   NFS protocol (as with other server and client solutions).  The
   experiences with Coda, disconnected AFS and others should be helpful
   in this area. (see references)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Interoperability"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Interoperability</span>

   The NFS protocols are available for many different operating
   environments.  Even though this shows the protocol's ability to
   provide distributed file system service for more than a single
   operating system, the design of NFS is certainly Unix-centric.  The
   next NFS protocol needs to be more inclusive of platform or file
   system features beyond those of traditional Unix.



<span class="grey">Shepler                      Informational                      [Page 7]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Platform%20Specific%20Behavior"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Platform Specific Behavior</span>

   Because of Unix-centric origins, NFS version 2 and 3 protocol
   requirements have been difficult to implement in some environments.
   For example, persistent file handles (unique identifiers of file
   system objects), Unix uid/gid mappings, directory modification time,
   accurate file sizes, file/directory locking semantics (SHAREs, PC-
   style locking). In the design of NFS version 4, these areas and
   others not mentioned will need to be considered and, if possible,
   cross-platform solutions developed.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Additional%20or%20Extended%20Attributes"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Additional or Extended Attributes</span>

   NFS versions 2 and 3 do not provide for file or directory attributes
   beyond those that are found in the traditional Unix environment. For
   example the user identifier/owner of the file, a permission or access
   bitmap, time stamps for modification of the file or directory and
   file size to name a few.  While the current set of attributes has
   usually been sufficient, the file system's ability to manage
   additional information associated with a file or directory can be
   useful.

   There are many possibilities for additional attributes in the next
   version of NFS.  Some of these include: object creation timestamp,
   user identifier of file's creator, timestamp of last backup or
   archival bit, version number, file content type (MIME type),
   existence of data management involvement (i.e. DMAPI [<a href="#ref-XDSM">XDSM</a>]).

   This list is representative of the possibilities and is meant to show
   the need for an additional attribute set.  Enumerating the 'correct'
   set of attributes, however, is difficult.  This is one of the reasons
   for looking towards a minor versioning mechanism as a way to provide
   needed extensibility.  Another way to provide some extensibility is
   to support a generalized named attribute mechanism.  This mechanism
   would allow a client to name, store and retrieve arbitrary data and
   have it associated as an attribute of a file or directory.

   One difficulty in providing named attributes is determining if the
   protocol should specify the names for the attributes, their type or
   structure.  How will the protocol determine or allow for attributes
   that can be read but not written is another issue.  Yet another could
   be the side effects that these attributes have on the core set of
   file properties such as setting a size attribute to 0 and having
   associated file data deleted.

   As these brief examples show, this type of extended attribute
   mechanism brings with it a large set of issues that will need to be
   addressed in the protocol specification while keeping the overall



<span class="grey">Shepler                      Informational                      [Page 8]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   goal of simplicity in mind.

   There are operating environments that provide named or extended
   attribute mechanisms.  Digital Unix provides for the storage of
   extended attributes with some generalized format.  HPFS [<a href="#ref-HPFS">HPFS</a>] and
   NTFS [<a href="#ref-Nagar">Nagar</a>] also provide for named data associated with traditional
   files.  SGI's local file system, XFS, also provides for this type of
   name/value extended attributes. However, there does not seem to be a
   clear direction that can be taken from these or other environments.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Access%20Control%20Lists"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Access Control Lists</span>

   Access Control Lists (ACL) can be viewed as one specific type of
   extended attribute.  This attribute is a designation of user access
   to a file or directory.  Many vendors have created ancillary
   protocols to NFS to extend the server's ACL mechanism across the
   network.  Generally this has been done for homogeneous operating
   environments. Even though the server still interprets the ACL and has
   final control over access to a file system object, the client is able
   to manipulate the ACL via these additional protocols.  Other
   distributed file systems have also provided ACL support (DFS, AFS and
   CIFS).

   The basic factor driving the requirement for ACL support in all of
   these file systems has been the user's desire to grant and restrict
   access to file system data on a per user basis.  Based on the desire
   of the user and current distributed file system support, it seems to
   be a requirement that NFS provide this capability as well.

   Because many local and distributed file system ACL implementations
   have been done without a common architecture, the major issue is one
   of compatibility.  Although the POSIX draft, DCE/DFS [<a href="#ref-DCEACL">DCEACL</a>] and
   Windows NT ACLs have a similar structure in an array of Access
   Control Entries consisting of a type field, identity, and permission
   bits, the similarity ends there.  Each model defines its own variants
   of entry types, identifies users and groups differently, provides
   different kinds of permission bits, and describes different
   procedures for ACL creation, defaults, and evaluation.

   In the least it will be problematic to create a workable ACL
   mechanism that will encompass a reasonable set of functionality for
   all operating environments.  Even with the complicated nature of ACL
   support it is still worthwhile to work towards a solution that can at
   least provide basic functionality for the user.







<span class="grey">Shepler                      Informational                      [Page 9]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20RPC%20Mechanism%20and%20Security"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  RPC Mechanism and Security</span>

   NFS relies on the security mechanisms provided by the ONCRPC
   [<a href="rfc1831.html">RFC1831</a>] protocol.  Until the introduction of the ONCRPC RPCSEC_GSS
   security flavor [<a href="rfc2203.html">RFC2203</a>], NFS security was generally limited to none
   (AUTH_SYS) or DES (AUTH_DH).  The AUTH_DH security flavor was not
   successful in providing readily available security for NFS because of
   a lack of widespread implementation which precluded widespread
   deployment.  Also the Diffie-Hellman 192 bit public key modulus used
   for the AUTH_DH security flavor quickly became too small for
   reasonable security.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20User%20identification"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  User identification</span>

   NFS has been limited to the use of the Unix-centric user
   identification mechanism of numeric user id based on the available
   file system attributes and the use of the ONCRPC.  However, for NFS
   to move beyond the limits of large work groups, user identification
   should be string based and the definition of the user identifier
   should allow for integration into an external naming service or
   services.

   Internet scaling should also be considered for this as well.  The
   identification mechanism should take into account multiple naming
   domains and multiple naming mechanisms.  Flexibility is the key to a
   solution that can grow with the needs of the user and administrator.

   If NFS is to move among various naming and security services, it may
   be necessary to stay with a string based identification.  This would
   allow for servers and clients to translate between the external
   string representation to a local or internal numeric (or other
   identifier) which matches internal implementation needs.

   As an example, DFS uses a string based naming scheme but translates
   the name to a UUID (16 byte identifier) that is used for internal
   protocol representations. The DCE/DFS string name is a combination of
   cell (administrative domain) and user name.  As mentioned, NFS
   clients and servers map a Unix user name to a 32 bit user identifier
   that is then used for ONCRPC and NFS protocol fields requiring the
   user identifier.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Security"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Security</span>

   Because of the aforementioned problems, user authentication has been
   a major issue for ONCRPC and hence NFS.  To satisfy requirements of
   the IETF and to address concerns and requirements from users, NFS
   version 4 must provide for the use of acceptable security mechanisms.
   The various mechanisms currently available should be explored for



<span class="grey">Shepler                      Informational                     [Page 10]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   their appropriate use with NFS version 4 and ONCRPC.  Some of these
   mechanisms are: TLS [<a href="rfc2246.html">RFC2246</a>], SPKM [<a href="rfc2025.html">RFC2025</a>], KerberbosV5 [<a href="rfc1510.html">RFC1510</a>],
   IPSEC [<a href="rfc2401.html">RFC2401</a>].  Since ONCRPC is the basis for NFS client and server
   interaction, the RPCSEC_GSS [<a href="rfc2203.html">RFC2203</a>] framework should be strongly
   considered since it provides a method to employ mechanisms like SPKM
   and KerberosV5.  Before a security mechanism can be evaluated, the
   NFS environment and requirements must be discussed.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.1.%20%20Transport%20Independence"></a><a class="selflink" href="#section-6.2.1" name="section-6.2.1">6.2.1</a>.  Transport Independence</span>

   As mentioned later in this document in the section "Internet
   Accessibility", transport independence is an asset for NFS and ONCRPC
   and is a general requirement.  This allows for transport choice based
   on the target environment and specific application of NFS.  The most
   common transports in use with NFS are UDP and TCP.  This ability to
   choose transport should be maintained in combination with the user's
   choice of a security mechanism.  This implies that "mandatory to
   implement" security mechanisms for NFS should allow for both
   connection-less and connection-oriented transports.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.2.%20%20Authentication"></a><a class="selflink" href="#section-6.2.2" name="section-6.2.2">6.2.2</a>.  Authentication</span>

   As should be expected, strong authentication is a requirement for NFS
   version 4.  Each operation generated via ONCRPC contains user
   identification and authentication information.  It is common in NFS
   version 2 and 3 implementations to multiplex various users' requests
   over a single or few connections to the NFS server.  This allows for
   scalability in the number of clients systems.  Security mechanisms or
   frameworks should allow for this multiplexing of requests to sustain
   the implementation model that is available today.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.3.%20%20Data%20Integrity"></a><a class="selflink" href="#section-6.2.3" name="section-6.2.3">6.2.3</a>.  Data Integrity</span>

   Until the introduction of RPCSEC_GSS, the ability to provide data
   integrity over ONCRPC and to NFS was not available.  Since file and
   directory data is the essence of a distributed file service, the NFS
   protocol should provide to the users of the file service a reasonable
   level of data integrity.  The security mechanisms chosen must provide
   for NFS data protection with a cryptographically strong checksum.  As
   with other aspects within NFS version 4, the user or administrator
   should be able to choose whether data integrity is employed.  This
   will provide needed flexibility for a variety of NFS version 4
   solutions.








<span class="grey">Shepler                      Informational                     [Page 11]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.%20%20Data%20Privacy"></a><a class="selflink" href="#section-6.2.4" name="section-6.2.4">6.2.4</a>.  Data Privacy</span>

   Data privacy, while desirable, is not as important in all
   environments as authentication and integrity.  For example, in a LAN
   environment the performance overhead of data privacy may not be
   required to meet an organization's data protection policies.  It may
   also be the case that the performance of the distributed file system
   solution is more important than the data privacy of that solution.
   Even with these considerations, the user or administrator must have
   the choice of data privacy and therefore it must be included in NFS
   version 4.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.%20%20Security%20Negotiation"></a><a class="selflink" href="#section-6.2.5" name="section-6.2.5">6.2.5</a>.  Security Negotiation</span>

   With the ability to provide security mechanism choices to the user or
   administrator, NFS version 4 should offer reasonable flexibility for
   application of local security policies.  However, this presents the
   problem of negotiating the appropriate security mechanism between
   client and server.  It is unreasonable to require the client know the
   server's chosen mechanism before initial contact.  The issue is
   further complicated by an administrator who may choose more than one
   security mechanism for the various file system resources being shared
   by an NFS server.  These types of choices and policies require that
   NFS version 4 deal with negotiating the appropriate security
   mechanism based on mechanism availability and policy deployment at
   client and server.  This negotiation will need to take into account
   the possibility of a change in policy as an NFS client crosses
   certain file system boundaries at the server.  The security
   mechanisms required may change at these boundaries and therefore the
   negotiation must be included within the NFS protocol itself to be
   done properly (i.e. securely).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Summary"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Summary</span>

   Other distributed file system solutions such as AFS and DFS provide
   strong authentication mechanisms.  CIFS does provide authentication
   at initial server contact and a message signing option for subsequent
   interaction.  Recent NFS version 2 and 3 implementations, with the
   use of RPCSEC_GSS, provide strong authentication, integrity, and
   privacy.

   NFS version 4 must provide for strong authentication, integrity, and
   privacy.  This must be part of the protocol so that users have the
   choice to use strong security if their environment or policies
   warrant such use.






<span class="grey">Shepler                      Informational                     [Page 12]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   Based on the requirements presented, the ONCRPC RPCSEC_GSS security
   flavor seems to provide an appropriate framework for satisfying these
   requirements.  RPCSEC_GSS provides for authentication, integrity, and
   privacy.  The RPCSEC_GSS is also extensible in that it provides for
   both public and private key security mechanisms along with the
   ability to plug in various mechanisms in such a way that it does not
   significantly disrupt ONCRPC or NFS implementations.

   With RPCSEC_GSS' ability to support both public and private key
   mechanisms, NFS version 4 should consider "mandatory to implement"
   choices from both.  The intent is to provide a security solution that
   will flexibly scale to match the needs of end users.  Providing this
   range of solutions will allow for appropriate usage based on policy
   and available resources for deployment.  Note that, in the end, the
   user must have a choice and that choice may be to use all of the
   available mechanisms in NFS version 4 or none of them.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Internet%20Accessibility"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Internet Accessibility</span>

   Being a product of an IETF working group, the NFS protocol should not
   only be built upon IETF technologies where possible but should also
   work well within the broader Internet environment.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Congestion%20Control%20and%20Transport%20Selection"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Congestion Control and Transport Selection</span>

   As with any network protocol, congestion control is a major issue and
   the transport mechanisms that are chosen for NFS should take this
   into account.  Traditionally, implementations of NFS have been
   deployed using both UDP and TCP.  With the use of UDP, most
   implementations provide a rudimentary attempt control congestion with
   simple back-off algorithms and round trip timers.  While this may be
   sufficient in today's NFS deployments, as an Internet protocol NFS
   will need to ensure sufficient congestion control or management.

   With congestion control in mind, NFS must use TCP as a transport (via
   ONCRPC).  The UDP transport provides its own advantages in certain
   circumstances.  In today's NFS implementations, UDP has been shown to
   produce greater throughput as compared to similarly configured
   systems that use TCP.  This issue will need to be investigated such
   that a determination can be made as to whether the differences are
   within implementation details.  If UDP is supplied as an NFS
   transport mechanism, then the congestion controls issues will need
   resolution to make its use suitable.








<span class="grey">Shepler                      Informational                     [Page 13]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Firewalls%20and%20Proxy%20Servers"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Firewalls and Proxy Servers</span>

   NFS's protocol design should allow its use via Internet firewalls.
   The protocol should also allow for the use of file system proxy/cache
   servers.  Proxy servers can be very useful for scalability and other
   reasons.  The NFS protocol needs to address the need of proxy servers
   in a way that will deal with the issues of security, access control,
   content control, and cache content validation.  It is possible that
   these issues can be addressed by documenting the related issues of
   proxy server usage.  However, it is likely that the NFS protocol will
   need to support proxy servers directly through the NFS protocol.

   The protocol could allow a request to be sent to a proxy that
   contains the name of the target NFS server to which the request might
   be forwarded, or from which a response might be cached.  In any case,
   the NFS proxy server should be considered during protocol
   development.

   The problems encountered in making the NFS protocol work through
   firewalls are described in detail in [<a href="rfc2054.html">RFC2054</a>] and [<a href="rfc2055.html">RFC2055</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.3.%20%20Multiple%20RPCs%20and%20Latency"></a><a class="selflink" href="#section-7.3" name="section-7.3">7.3</a>.  Multiple RPCs and Latency</span>

   As an application at the NFS client performs simple file system
   operations, multiple NFS operations or RPCs may be executed to
   accomplish the work for the application.  While the NFS version 3
   protocol addressed some of this by returning file and directory
   attributes for most procedures, hence reducing follow up GETATTR
   requests, there is still room for improvement.  Reducing the number
   of RPCs will lead to a reduction of processing overhead on the server
   (transport and security processing) along with reducing the time
   spent at the client waiting for the server's individual responses.
   This issue is more prominent in environments with larger degrees of
   latency.

   The CIFS file access protocol supports 'batched requests' that allow
   multiple requests to be batched, therefore reducing the number of
   round trip messages between client and server.

   This same approach can be used by NFS to allow the grouping of
   multiple procedure calls together in a traditional RPC request.  Not
   only would this reduce protocol imposed latency but it would reduce
   transport and security processing overhead and could allow a client
   to complete more complex tasks by combining procedures.







<span class="grey">Shepler                      Informational                     [Page 14]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20File%20locking%20%2F%20recovery"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  File locking / recovery</span>

   NFS provided Unix file locking and DOS SHARE capability with the use
   of an ancillary protocol (Network Lock Manager / NLM).  The DOS SHARE
   mechanism is the DOS equivalent of file locking in that it provides
   the basis for sharing or exclusive access to file and directory data
   without risk of data corruption. The NLM protocol provides file
   locking and recovery of those locks in the event of client or server
   failure.  The NLM protocol requires that the server make call backs
   to the client for certain scenarios and therefore is not necessarily
   well suited for Internet firewall traversal.

   Available and correct file locking support for NFS version 2 and 3
   clients and servers has historically been problematic.  The
   availability of NLM support has traditionally been a problem and
   seems to be most related to the fact that NFS and NLM are two
   separate protocols.  It is easy to deliver an NFS client and server
   implementation and then add NLM support later.  This led to a general
   lack of NLM support early on in NFS' lifetime.  One of the reasons
   that NLM was delivered separately has been its relative complexity
   which has in turn led to poor implementations and testing
   difficulties.  Even in later implementations where reliability and
   performance had been increased to acceptable levels for NLM, users
   still chose to avoid the use of the protocol and its support.  The
   last issue with NLM is the presence of minor protocol design flaws
   that relate to high network load and recovery.

   Based on the experiences with NLM, locking support for NFS version 4
   should strive to meet or at least consider the following (in order of
   importance):

   o    Integration with the NFS protocol and ease of implementation.

   o    Interoperability between operating environments. The protocol
        should make a reasonable effort to support the locking semantics
        of both PC and Unix clients and servers. This will allow for
        greater integration of all environments.

   o    Scalable solutions - thousands of clients.  The server should
        not be required to maintain significant client file locking
        state between server instantiations.

   o    Internet capable (firewall traversal, latency sensitive).  The
        server should not be required to initiate TCP connections to
        clients.






<span class="grey">Shepler                      Informational                     [Page 15]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   o    Timely recovery in the event of client/server or network
        failure.  Server recovery should be rapid. The protocol should
        allow clients to detect the loss of a lock.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Internationalization"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Internationalization</span>

   NFS version 2 and 3 are currently limited in the character encoding
   of strings. In the NFS protocols, strings are used for file and
   directory names, and symbolic link contents. Although the XDR
   definition [<a href="rfc1832.html">RFC1832</a>] limits strings in the NFS protocol to 7-bit US-
   ASCII, common usage is to encode filenames in 8-bit ISO-Latin-1.
   However, there is no mechanism available to tag XDR character strings
   to indicate the character encoding used by the client or server.
   Obviously this limits NFS' usefulness in an environment with clients
   that may operate with various character sets.

   One approach to address this deficiency is to use the Unicode
   Standard [<a href="#ref-Unicode1">Unicode1</a>] as the means to exchange character strings for
   the NFS version 4 protocol. The Unicode Standard is a 16 bit encoding
   that supports full multilingual text. The Unicode Standard is code-
   for-code identical with International Standard ISO/IEC 10646-1:1993.
   "Information Technology -- Universal Multiple-Octet Coded Character
   Set (UCS)-Part 1: Architecture and Basic Multilingual Plane." Because
   Unicode is a 16 bit encoding, it may be more efficient for the NFS
   version 4 protocol to use an encoding for wire transfer that will be
   useful for a majority of usage.  One possible encoding is the UCS
   transformation format (UTF).  UTF-8 is an encoding method for UCS-4
   characters which allows for the direct encoding of US-ASCII
   characters but expands for the correct encoding of the full UCS-4 31
   bit definitions.  Currently, the UCS-4 and Unicode standards do not
   diverge.

   This Unicode/UTF-8 encoding can be used for places in the protocol
   that a traditional string representation is needed.  This includes
   file and directory names along with symlink contents.  This should
   also include other file and directory attributes that are eventually
   defined as strings.

   The Unicode standard is applicable to the well defined strings within
   the protocol. Dealing with file content is much more difficult. NFS
   has traditionally dealt with file data as an opaque byte stream. No
   other structure or content specification has been levied upon the
   file content. The main advantage to this approach is its flexibility.
   This byte stream can contain any data content and may be accessed in
   any sequential or random fashion. Unfortunately, it is left to the
   application or user to make the determination of file content and
   format. It is possible to construct a mechanism in the protocol that
   specifies file data type while maintaining the byte stream model for



<span class="grey">Shepler                      Informational                     [Page 16]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   data access.  However, this approach may be limiting in ways unclear
   to the designers of the NFS version 4 protocol. An expandable and
   adaptable approach is to use the previously discussed extended
   attributes as the mechanism to specify file content and format. The
   use of extended attributes allows for future definition and growth as
   various data types are created and allows for maintaining a simple
   file data model for the NFS protocol.

   It should be noted that as the Unicode standards are currently
   defined there is the possibility for minor inconsistencies when
   converting from local character representations to Unicode and then
   back again.  This should not be a problem with single client and
   server interaction but may become apparent with the interaction of
   two or more clients with separate conversion implementations.
   Therefore, as NFS version 4 progresses in its development, these
   types of Unicode issues need to be tracked and understood for their
   potential impact on client/server interaction. In any case, Unicode
   seems to be the best selection for NFS version 4 based on its
   standards background and apparent future direction.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Security%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Security Considerations</span>

   Two previous sections within this document deal with security issues.
   The section covering 'Access Control Lists' covers the mechanisms
   that need to be investigated for file system level control. The
   section that covers RPC security deals with individual user
   authentication along with data integrity and privacy issues. This
   section also covers negotiation of security mechanisms.  These
   sections should be consulted for additional discussion and detail.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Denial%20of%20Service"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Denial of Service</span>

   As with all services, the denial of service by either incorrect
   implementations or malicious agents is always a concern.  With the
   target of providing NFS version 4 for Internet use, it is all the
   more important that all aspects of the NFS version 4 protocol be
   reviewed for potential denial of service scenarios.  When found these
   potential problems should be mitigated as much as possible.













<span class="grey">Shepler                      Informational                     [Page 17]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Bibliography"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Bibliography</span>

   [<a id="ref-RFC1094" name="ref-RFC1094">RFC1094</a>]
   Sun Microsystems, Inc., "NFS: Network File System Protocol
   Specification", <a href="rfc1094.html">RFC 1094</a>, March 1989.
   <a href="http://www.ietf.org/rfc/rfc1094.txt">http://www.ietf.org/rfc/rfc1094.txt</a>

   [<a id="ref-RFC1510" name="ref-RFC1510">RFC1510</a>]
   Kohl, J. and C. Neuman, "The Kerberos Network Authentication
   Service (V5)", <a href="rfc1510.html">RFC 1510</a>, September 1993.
   <a href="http://www.ietf.org/rfc/rfc1510.txt">http://www.ietf.org/rfc/rfc1510.txt</a>

   [<a id="ref-RFC1813" name="ref-RFC1813">RFC1813</a>]
   Callaghan, B., Pawlowski, B. and P. Staubach, "NFS Version 3
   Protocol Specification", <a href="rfc1813.html">RFC 1813</a>, June 1995.
   <a href="http://www.ietf.org/rfc/rfc1813.txt">http://www.ietf.org/rfc/rfc1813.txt</a>

   [<a id="ref-RFC1831" name="ref-RFC1831">RFC1831</a>]
   Srinivasan, R., "RPC: Remote Procedure Call Protocol Specification
   Version 2", <a href="rfc1831.html">RFC 1831</a>, August 1995.
   <a href="http://www.ietf.org/rfc/rfc1831.txt">http://www.ietf.org/rfc/rfc1831.txt</a>

   [<a id="ref-RFC1832" name="ref-RFC1832">RFC1832</a>]
   Srinivasan, R., "XDR: External Data Representation Standard",
   <a href="rfc1832.html">RFC 1832</a>, August 1995.
   <a href="http://www.ietf.org/rfc/rfc1832.txt">http://www.ietf.org/rfc/rfc1832.txt</a>

   [<a id="ref-RFC1833" name="ref-RFC1833">RFC1833</a>]
   Srinivasan, R., "Binding Protocols for ONC RPC Version 2", <a href="rfc1833.html">RFC</a>
   <a href="rfc1833.html">1833</a>, August 1995.
   <a href="http://www.ietf.org/rfc/rfc1833.txt">http://www.ietf.org/rfc/rfc1833.txt</a>

   [<a id="ref-RFC2025" name="ref-RFC2025">RFC2025</a>]
   Adams, C., "The Simple Public-Key GSS-API Mechanism (SPKM)",
   <a href="rfc2025.html">RFC 2025</a>, October 1996.
   <a href="http://www.ietf.org/rfc/rfc2025.txt">http://www.ietf.org/rfc/rfc2025.txt</a>

   [<a id="ref-RFC2054" name="ref-RFC2054">RFC2054</a>]
   Callaghan, B., "WebNFS Client Specification", <a href="rfc2054.html">RFC 2054</a>, October
   1996.
   <a href="http://www.ietf.org/rfc/rfc2054.txt">http://www.ietf.org/rfc/rfc2054.txt</a>

   [<a id="ref-RFC2055" name="ref-RFC2055">RFC2055</a>]
   Callaghan, B., "WebNFS Server Specification", <a href="rfc2055.html">RFC 2055</a>, October
   1996.
   <a href="http://www.ietf.org/rfc/rfc2055.txt">http://www.ietf.org/rfc/rfc2055.txt</a>





<span class="grey">Shepler                      Informational                     [Page 18]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   [<a id="ref-RFC2078" name="ref-RFC2078">RFC2078</a>]
   Linn, J., "Generic Security Service Application Program Interface,
   Version 2", <a href="rfc2078.html">RFC 2078</a>, January 1997.
   <a href="http://www.ietf.org/rfc/rfc2078.txt">http://www.ietf.org/rfc/rfc2078.txt</a>

   [<a id="ref-RFC2152" name="ref-RFC2152">RFC2152</a>]
   Goldsmith, D., "UTF-7 A Mail-Safe Transformation Format of Unicode",
   <a href="rfc2152.html">RFC 2152</a>, May 1997.
   <a href="http://www.ietf.org/rfc/rfc2152.txt">http://www.ietf.org/rfc/rfc2152.txt</a>

   [<a id="ref-RFC2203" name="ref-RFC2203">RFC2203</a>]
   Eisler, M., Chiu, A. and L.  Ling, "RPCSEC_GSS Protocol
   Specification", <a href="rfc2203.html">RFC 2203</a>, August 1995.
   <a href="http://www.ietf.org/rfc/rfc2203.txt">http://www.ietf.org/rfc/rfc2203.txt</a>

   [<a id="ref-RFC2222" name="ref-RFC2222">RFC2222</a>]
   Myers, J., "Simple Authentication and Security Layer (SASL)",
   <a href="rfc2222.html">RFC 2222</a>, October 1997.
   <a href="http://www.ietf.org/rfc/rfc2222.txt">http://www.ietf.org/rfc/rfc2222.txt</a>

   [<a id="ref-RFC2279" name="ref-RFC2279">RFC2279</a>]
   Yergeau, F., "UTF-8, a transformation format of ISO 10646",
   <a href="rfc2279.html">RFC 2279</a>, January 1998.
   <a href="http://www.ietf.org/rfc/rfc2279.txt">http://www.ietf.org/rfc/rfc2279.txt</a>

   [<a id="ref-RFC2246" name="ref-RFC2246">RFC2246</a>]
   Dierks, T. and C. Allen, "The TLS Protocols Version 1.0", <a href="rfc2246.html">RFC 2246</a>,
   Certicom, January 1999.
   <a href="http://www.ietf.org/rfc/rfc2246.txt">http://www.ietf.org/rfc/rfc2246.txt</a>

   [<a id="ref-RFC2401" name="ref-RFC2401">RFC2401</a>]
   Kent, S. and R. Atkinson, "Security Architecture for the Internet
   Protocol", <a href="rfc2401.html">RFC 2401</a>, November 1998.
   <a href="http://www.ietf.org/rfc/rfc2401.txt">http://www.ietf.org/rfc/rfc2401.txt</a>

   [<a id="ref-DCEACL" name="ref-DCEACL">DCEACL</a>]
   The Open Group, Open Group Technical Standard, "DCE 1.1:
   Authentication and Security Services," Document Number C311, August
   1997. Provides a discussion of DEC ACL structure and semantics.

   [<a id="ref-HPFS" name="ref-HPFS">HPFS</a>]
   Les Bell and Associates Pty Ltd, "The HPFS FAQ,"
   <a href="http://www.lesbell.com.au/hpfsfaq.html">http://www.lesbell.com.au/hpfsfaq.html</a>

   [<a id="ref-Hutson" name="ref-Hutson">Hutson</a>]
   Huston, L.B., Honeyman, P., "Disconnected Operation for AFS," June
   1993. Proc. USENIX Symp. on Mobile and Location-Independent
   Computing, Cambridge, August 1993.



<span class="grey">Shepler                      Informational                     [Page 19]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   [<a id="ref-Kistler" name="ref-Kistler">Kistler</a>]
   Kistler, James J., Satyanarayanan, M., "Disconnected Operations in
   the Coda File System," ACM Trans. on Computer Systems, vol. 10, no.
   1, pp. 3-25, Feb. 1992.

   [<a id="ref-Mummert" name="ref-Mummert">Mummert</a>]
   Mummert, L. B., Ebling, M. R., Satyanarayanan, M., "Exploiting Weak
   Connectivity for Mobile File Access," Proc. of the 15th ACM Symp.
   on Operating Systems Principles Dec. 1995.

   [<a id="ref-Nagar" name="ref-Nagar">Nagar</a>]
   Nagar, R., "Windows NT File System Internals," ISBN 1565922492,
   O`Reilly &amp; Associates, Inc.

   [<a id="ref-Sandberg" name="ref-Sandberg">Sandberg</a>]
   Sandberg, R., D. Goldberg, S. Kleiman, D. Walsh, B.  Lyon, "Design
   and Implementation of the Sun Network Filesystem," USENIX
   Conference Proceedings, USENIX Association, Berkeley, CA, Summer
   1985.  The basic paper describing the SunOS implementation of the
   NFS version 2 protocol, and discusses the goals, protocol
   specification and trade-offs.

   [<a id="ref-Satyanarayanan1" name="ref-Satyanarayanan1">Satyanarayanan1</a>]
   Satyanarayanan, M., "Fundamental Challenges in Mobile Computing,"
   Proc. of the ACM Principles of Distributed Computing, 1995.

   [<a id="ref-Satyanarayanan2" name="ref-Satyanarayanan2">Satyanarayanan2</a>]
   Satyanarayanan, M., Kistler, J. J., Mummert L. B., Ebling M. R.,
   Kumar, P. , Lu,  Q., "Experience with disconnected operation in
   mobile computing environment," Proc. of the USENIX Symp. on Mobile
   and Location-Independent Computing, Jun. 1993.

   [<a id="ref-Unicode1" name="ref-Unicode1">Unicode1</a>]
   "Unicode Technical Report #8 - The Unicode Standard, Version 2.1",
   Unicode, Inc., The Unicode Consortium, P.O. Box 700519, San Jose,
   CA 95710-0519 USA, September 1998
   <a href="http://www.unicode.org/unicode/reports/tr8.html">http://www.unicode.org/unicode/reports/tr8.html</a>

   [<a id="ref-Unicode2" name="ref-Unicode2">Unicode2</a>]
   "Unsupported Scripts" Unicode, Inc., The Unicode Consortium, P.O.
   Box 700519, San Jose, CA 95710-0519 USA, October 1998
   <a href="http://www.unicode.org/unicode/standard/unsupported.html">http://www.unicode.org/unicode/standard/unsupported.html</a>

   [<a id="ref-XDSM" name="ref-XDSM">XDSM</a>]
   The Open Group, Open Group Technical Standard, "Systems Management:
   Data Storage Management (XDSM) API," ISBN 1-85912-190-X, January
   1997.




<span class="grey">Shepler                      Informational                     [Page 20]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


   [<a id="ref-XNFS" name="ref-XNFS">XNFS</a>]
   The Open Group, Protocols for Interworking: XNFS, Version 3W, The
   Open Group, 1010 El Camino Real Suite 380, Menlo Park, CA 94025,
   ISBN 1-85912-184-5, February 1998.
   HTML version available: <a href="http://www.opengroup.org/">http://www.opengroup.org</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Acknowledgments"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Acknowledgments</span>

   o    Brent Callaghan for content contributions.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Author%27s%20Address"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Author's Address</span>

   Address comments related to this memorandum to:

   spencer.shepler@eng.sun.com -or- nfsv4-wg@sunroof.eng.sun.com

   Spencer Shepler
   Sun Microsystems, Inc.
   7808 Moonflower Drive
   Austin, Texas 78750

   Phone: (512) 349-9376
   EMail: spencer.shepler@eng.sun.com




























<span class="grey">Shepler                      Informational                     [Page 21]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc2624.html">RFC 2624</a>              NFSv4 Design Considerations              June 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-14" name="section-14">14</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Shepler                      Informational                     [Page 22]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>


<meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

</body><!-- Mirrored from tools.ietf.org/html/rfc2624 by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 19 Mar 2014 18:45:56 GMT --><!-- Added by HTTrack --></html>