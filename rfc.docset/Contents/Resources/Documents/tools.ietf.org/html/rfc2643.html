<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.107" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:2643" name="DC.Identifier"/>
<meta content="Cabletron\x27s SecureFast VLAN (SFVLAN) product implements a\ndistributed connection-oriented switching protocol that provides fast\nforwarding of data packets at the MAC layer. The product uses the\nconcept of virtual LANs (VLANs) to determine the validity of call\nconnection requests and to scope the broadcast of certain flooded\nmessages. This memo provides information for the Internet community." name="DC.Description.Abstract"/>
<meta content="Dave Ruffen" name="DC.Creator"/>
<meta content="August, 1999" name="DC.Date.Issued"/>
<meta content="Cabletron\x27s SecureFast VLAN Operational Model" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 2643 - Cabletron\x27s SecureFast VLAN Operational Model</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc2643.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc2643" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-rfced-info-cabletron-vlan" title="draft-rfced-info-cabletron-vlan">draft-rfced-info-...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc2643" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc2643" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                          D. Ruffen
Request for Comments: 2643                                        T. Len
Category: Informational                                       J. Yanacek
                                          Cabletron Systems Incorporated
                                                             August 1999


             <span class="h1">Cabletron's SecureFast VLAN Operational Model</span>
                              <span class="h1">Version 1.8</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

Abstract

   Cabletron's SecureFast VLAN (SFVLAN) product implements a distributed
   connection-oriented switching protocol that provides fast forwarding
   of data packets at the MAC layer.  The product uses the concept of
   virtual LANs (VLANs) to determine the validity of call connection
   requests and to scope the broadcast of certain flooded messages.

Table of Contents

   <a href="#section-1">1</a>. Introduction.............................................  <a href="#page-3">3</a>
      <a href="#section-1.1">1.1</a> Data Conventions.....................................  <a href="#page-3">3</a>
      <a href="#section-1.2">1.2</a> Definitions of Commonly Used Terms...................  <a href="#page-4">4</a>
   <a href="#section-2">2</a>. SFVLAN Overview..........................................  <a href="#page-6">6</a>
      <a href="#section-2.1">2.1</a> Features.............................................  <a href="#page-7">7</a>
      <a href="#section-2.2">2.2</a> VLAN Principles......................................  <a href="#page-8">8</a>
          <a href="#section-2.2.1">2.2.1</a> Default, Base and Inherited VLANs..............  <a href="#page-8">8</a>
          <a href="#section-2.2.2">2.2.2</a> VLAN Configuration Modes.......................  <a href="#page-8">8</a>
                <a href="#section-2.2.2.1">2.2.2.1</a> Endstations............................  <a href="#page-8">8</a>
                <a href="#section-2.2.2.2">2.2.2.2</a> Ports..................................  <a href="#page-9">9</a>
                <a href="#section-2.2.2.3">2.2.2.3</a> Order of Precedence....................  <a href="#page-9">9</a>
          <a href="#section-2.2.3">2.2.3</a> Ports with Multiple VLAN Membership............ <a href="#page-10">10</a>
      <a href="#section-2.3">2.3</a> Tag/Length/Value Method of Addressing................ <a href="#page-10">10</a>
      <a href="#section-2.4">2.4</a> Architectural Overview............................... <a href="#page-11">11</a>
   <a href="#section-3">3</a>. Base Services............................................ <a href="#page-13">13</a>
   <a href="#section-4">4</a>. Call Processing.......................................... <a href="#page-14">14</a>
      <a href="#section-4.1">4.1</a> Directory Service Center............................. <a href="#page-14">14</a>
          <a href="#section-4.1.1">4.1.1</a> Local Add Server............................... <a href="#page-15">15</a>



<span class="grey">Ruffen, et al.               Informational                      [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


          <a href="#section-4.1.2">4.1.2</a> Inverse Resolve Server......................... <a href="#page-15">15</a>
          <a href="#section-4.1.3">4.1.3</a> Local Delete Server............................ <a href="#page-18">18</a>
      <a href="#section-4.2">4.2</a> Topology Service Center.............................. <a href="#page-18">18</a>
          <a href="#section-4.2.1">4.2.1</a> Neighbor Discovery Server...................... <a href="#page-18">18</a>
          <a href="#section-4.2.2">4.2.2</a> Spanning Tree Server........................... <a href="#page-18">18</a>
                4.2.2.1 Creating and Maintaining
                                   the Spanning Tree........... <a href="#page-19">19</a>
                <a href="#section-4.2.2.2">4.2.2.2</a> Remote Blocking........................ <a href="#page-19">19</a>
          <a href="#section-4.2.3">4.2.3</a> Link State Server.............................. <a href="#page-20">20</a>
      <a href="#section-4.3">4.3</a> Resolve Service Center............................... <a href="#page-21">21</a>
          <a href="#section-4.3.1">4.3.1</a> Table Server................................... <a href="#page-22">22</a>
          <a href="#section-4.3.2">4.3.2</a> Local Server................................... <a href="#page-22">22</a>
          <a href="#section-4.3.3">4.3.3</a> Subnet Server.................................. <a href="#page-22">22</a>
          <a href="#section-4.3.4">4.3.4</a> Interswitch Resolve Server..................... <a href="#page-22">22</a>
          <a href="#section-4.3.5">4.3.5</a> Unresolvable Server............................ <a href="#page-23">23</a>
          <a href="#section-4.3.6">4.3.6</a> Block Server................................... <a href="#page-23">23</a>
      <a href="#section-4.4">4.4</a> Policy Service Center................................ <a href="#page-24">24</a>
          <a href="#section-4.4.1">4.4.1</a> Unicast Rules Server........................... <a href="#page-24">24</a>
      <a href="#section-4.5">4.5</a> Connect Service Center............................... <a href="#page-25">25</a>
          <a href="#section-4.5.1">4.5.1</a> Local Server................................... <a href="#page-25">25</a>
          <a href="#section-4.5.2">4.5.2</a> Link State Server.............................. <a href="#page-25">25</a>
          <a href="#section-4.5.3">4.5.3</a> Directory Server............................... <a href="#page-26">26</a>
      <a href="#section-4.6">4.6</a> Filter Service Center................................ <a href="#page-26">26</a>
      <a href="#section-4.7">4.7</a> Path Service Center.................................. <a href="#page-26">26</a>
          <a href="#section-4.7.1">4.7.1</a> Link State Server.............................. <a href="#page-26">26</a>
          <a href="#section-4.7.2">4.7.2</a> Spanning Tree Server........................... <a href="#page-27">27</a>
      <a href="#section-4.8">4.8</a> Flood Service Center................................. <a href="#page-27">27</a>
          <a href="#section-4.8.1">4.8.1</a> Tag-Based Flood Server......................... <a href="#page-27">27</a>
   <a href="#section-5">5</a>. Monitoring Call Connections.............................. <a href="#page-27">27</a>
      <a href="#section-5.1">5.1</a> Definitions.......................................... <a href="#page-27">27</a>
      <a href="#section-5.2">5.2</a> Tapping a Connection................................. <a href="#page-28">28</a>
          <a href="#section-5.2.1">5.2.1</a> Types of Tap Connections....................... <a href="#page-28">28</a>
          5.2.2 Locating the Probe and Establishing
                                   the Tap Connection.......... <a href="#page-29">29</a>
          <a href="#section-5.2.3">5.2.3</a> Status Field................................... <a href="#page-30">30</a>
      <a href="#section-5.3">5.3</a> Untapping a Connection............................... <a href="#page-31">31</a>
   <a href="#section-6">6</a>. Interswitch Message Protocol (ISMP)...................... <a href="#page-32">32</a>
      <a href="#section-6.1">6.1</a> General Packet Structure............................. <a href="#page-32">32</a>
          <a href="#section-6.1.1">6.1.1</a> Frame Header................................... <a href="#page-32">32</a>
          <a href="#section-6.1.2">6.1.2</a> ISMP Packet Header............................. <a href="#page-33">33</a>
                <a href="#section-6.1.2.1">6.1.2.1</a> Version 2.............................. <a href="#page-33">33</a>
                <a href="#section-6.1.2.2">6.1.2.2</a> Version 3.............................. <a href="#page-34">34</a>
          <a href="#section-6.1.3">6.1.3</a> ISMP Message Body.............................. <a href="#page-35">35</a>
      <a href="#section-6.2">6.2</a> Interswitch BPDU Message............................. <a href="#page-35">35</a>
      <a href="#section-6.3">6.3</a> Interswitch Remote Blocking Message.................. <a href="#page-36">36</a>
      <a href="#section-6.4">6.4</a> Interswitch Resolve Message.......................... <a href="#page-37">37</a>
          <a href="#section-6.4.1">6.4.1</a> Prior to Version 1.8........................... <a href="#page-37">37</a>
          <a href="#section-6.4.2">6.4.2</a> Version 1.8.................................... <a href="#page-41">41</a>



<span class="grey">Ruffen, et al.               Informational                      [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


      <a href="#section-6.5">6.5</a> Interswitch New User Message......................... <a href="#page-46">46</a>
      <a href="#section-6.6">6.6</a> Interswitch Tag-Based Flood Message.................. <a href="#page-49">49</a>
          <a href="#section-6.6.1">6.6.1</a> Prior to Version 1.8........................... <a href="#page-49">49</a>
          <a href="#section-6.6.2">6.6.2</a> Version 1.8.................................... <a href="#page-52">52</a>
      <a href="#section-6.7">6.7</a> Interswitch Tap/Untap Message........................ <a href="#page-55">55</a>
   <a href="#section-7">7</a>. Security Considerations.................................. <a href="#page-58">58</a>
   <a href="#section-8">8</a>. References............................................... <a href="#page-58">58</a>
   <a href="#section-9">9</a>. Authors' Addresses....................................... <a href="#page-59">59</a>
   <a href="#section-10">10</a>. Full Copyright Statement................................ <a href="#page-60">60</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>. Introduction</span>

   This memo is being distributed to members of the Internet community
   in order to solicit reactions to the proposals contained herein.
   While the specification discussed here may not be directly relevant
   to the research problems of the Internet, it may be of interest to
   researchers and implementers.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1%20Data%20Conventions"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a> Data Conventions</span>

   The methods used in this memo to describe and picture data adhere to
   the standards of Internet Protocol documentation [<a href="rfc1700.html" title='"Assigned Numbers"'>RFC1700</a>].  In
   particular:

      The convention in the documentation of Internet Protocols is to
      express numbers in decimal and to picture data in "big-endian"
      order.  That is, fields are described left to right, with the most
      significant octet on the left and the least significant octet on
      the right.

      The order of transmission of the header and data described in this
      document is resolved to the octet level.  Whenever a diagram shows
      a group of octets, the order of transmission of those octets is
      the normal order in which they are read in English.

      Whenever an octet represents a numeric quantity the left most bit
      in the diagram is the high order or most significant bit.  That
      is, the bit labeled 0 is the most significant bit.













<span class="grey">Ruffen, et al.               Informational                      [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


      Similarly, whenever a multi-octet field represents a numeric
      quantity the left most bit of the whole field is the most
      significant bit.  When a multi-octet quantity is transmitted the
      most significant octet is transmitted first.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2%20Definitions%20of%20Commonly%20Used%20Terms"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a> Definitions of Commonly Used Terms</span>

   This section contains a collection of definitions for terms that have
   a specific meaning for the SFVLAN product and that are used
   throughout the text.

   Switch ID

      A 10-octet value that uniquely identifies an SFVLAN switch within
      the switch fabric.  The value consists of the 6-octet base MAC
      address of the switch, followed by 4 octets of zeroes.

   Network link

      The physical connection between two switches.  A network link is
      associated with a network interface (or port) of a switch.

   Network port

      An interface on a switch that attaches to another switch.

   Access port

      An interface on a switch that attaches to a user endstation.

   Port ID

      A 10-octet value that uniquely identifies an interface of a
      switch.  The value consists of the 6-octet base MAC address of the
      switch, followed by the 4-octet local port number of the
      interface.

   Neighboring switches

      Two switches attached to a common (network) link.

   Call connection

      A mapping of user traffic through a switch that correlates the
      source and destination address pair specified within the packet to
      an inport and outport pair on the switch.





<span class="grey">Ruffen, et al.               Informational                      [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Call connection path

      A set of 0 to 7 network links over which user traffic travels
      between the source and destination endstations.  Call connection
      paths are selected from a list of alternate equal cost paths
      calculated by the VLS protocol [<a href="#ref-IDvlsp" title="&quot;Cabletron's VLS Protocol Specification&quot;">IDvlsp</a>], and are chosen to load
      balance traffic across the fabric.

   Ingress switch

      The owner switch of the source endstation of a call connection.
      That is, the source endstation is attached to one of the local
      access ports of the switch.

   Egress switch

      The owner switch of the destination endstation of a call
      connection.  That is, the destination endstation is attached to
      one of the local access ports of the switch.

   Intermediate switches

      Any switch along the call connection path on which user traffic
      enters and leaves over network links.  Note that the following
      types of connections have no intermediate switches:

      -  Call connections between source and destination endstations
         that are attached to the same switch -- that is, the ingress
         switch is the same as the egress switch.  Note also that the
         path for this type of connection consists of 0 network links.

      -  Call connections where the ingress and egress switches are
         physical neighbors connected by a single network link.  The
         path for this type of connection consists of a single network
         link.

   InterSwitch Message protocol (ISMP)

      The protocol used for interswitch communication between SFVLAN
      switches.

   Undirected messages

      Messages that are (potentially) sent to all SFVLAN switches in the
      switch fabric -- that is, they are not directed to any particular
      switch.  ISMP messages with a message type of 5, 7 or 8 are
      undirected messages.




<span class="grey">Ruffen, et al.               Informational                      [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Switch flood path

      The path used to send undirected messages throughout the switch
      fabric.  The switch flood path is formed using a spanning tree
      algorithm that provides a single path through the switch fabric
      that guarantees loop-free delivery to every other SFVLAN switch in
      the fabric.

   Upstream Neighbor

      That switch attached to the inport of the switch flood path --
      that is, the switch from which undirected messages are received.
      Note that each switch receiving an undirected message has, at
      most, one upstream neighbor, and the originator of any undirected
      ISMP message has no upstream neighbors.

   Downstream Neighbors

      Those switches attached to all outports of the switch flood path
      except the port on which the undirected message was received.
      Note that for each undirected message some number of switches have
      no downstream neighbors.

   Virtual LAN (VLAN) identifier

      A VLAN is a logical grouping of ports and endstations such that
      all ports and endstations in the VLAN appear to be on the same
      physical (or extended) LAN segment even though they may be
      geographically separated.

      A VLAN identifier consists of a variable-length string of octets.
      The first octet in the string contains the number of octets in the
      remainder of the string -- the actual VLAN identifier value.  A
      VLAN identifier can be from 1 to 16 octets long.

   VLAN policy

      Each VLAN has an assigned policy value used to determine whether a
      particular call connection can be established. SFVLAN recognizes
      two policy values:  Open and Secure.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20SFVLAN%20Overview"></a><a class="selflink" href="#section-2" name="section-2">2</a>. SFVLAN Overview</span>

   Cabletron's SecureFast VLAN (SFVLAN) product implements a distributed
   connection-oriented switching protocol that provides fast forwarding
   of data packets at the MAC layer.





<span class="grey">Ruffen, et al.               Informational                      [Page 6]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1%20Features"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a> Features</span>

   Within a connection-oriented switching network, user traffic is
   routed through the switch fabric based on the source and destination
   address (SA/DA) pair found in the arriving packet. For each SA/DA
   pair encountered by a switch, a "connection" is programmed into the
   switch hardware.  This connection maps the SA/DA pair and the port on
   which the packet was received to a specific outport over which the
   packet is to be forwarded.  Thus, once a connection has been
   established, all packets with a particular SA/DA pair arriving on a
   particular inport are automatically forwarded by the switch hardware
   out the specified outport.

   A distributed switching environment requires that each switch be
   capable of processing all aspects of the call processing and
   switching functionality.  Thus, each switch must synchronize its
   various databases with all other switches in the fabric or be capable
   of querying other switches for information it does not have locally.

   SFVLAN accomplishes the above objectives by providing the following
   features:

   -  A virtual directory of the entire switch fabric.

   -  Call processing for IP, IPX and MAC protocols.

   -  Automatic call connection, based on VLAN policy.

   -  Automatic call rerouting around failed switches and links.

   In addition, SFVLAN optimizes traffic flow across the switch fabric
   by providing the following features:

   -  Broadcast interception and address resolution at the ingress port.

   -  Broadcast scoping, restricting the flooding of broadcast packets
      to only those ports that belong to the same VLAN as the packet
      source.

   -  A single loop-free path (spanning tree) used for the flooding of
      undirected interswitch control messages.  Only switches running
      the SFVLAN switching protocol are included in this spanning tree
      calculation -- that is, traditional bridges or routers configured
      for bridging are not included.

   -  Interception of both service and route advertisements with
      readvertisement sourced from the MAC address of the original
      advertiser.



<span class="grey">Ruffen, et al.               Informational                      [Page 7]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2%20VLAN%20Principles"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a> VLAN Principles</span>

   Each SFVLAN switch port, along with its attached endstations, belongs
   to one or more virtual LANs (VLANs).  A VLAN is a logical grouping of
   ports and endstations such that all ports and endstations in the VLAN
   appear to be on the same physical (or extended) LAN segment even
   though they may be geographically separated.

   VLAN assignments are used to determine the validity of call
   connection requests and to scope the broadcast of certain flooded
   messages.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.2.1%20Default%2C%20Base%20and%20Inherited%20VLANs"></a><a class="selflink" href="#section-2.2.1" name="section-2.2.1">2.2.1</a> Default, Base and Inherited VLANs</span>

   Each port is explicitly assigned to a default VLAN.  At start-up, the
   default VLAN to which all ports are assigned is the base VLAN -- a
   permanent, non-deletable VLAN to which all ports belong at all times.

   The network administrator can change the default VLAN of a port from
   the base VLAN to any other unique VLAN by using a management
   application known here as the VLAN Manager.  A port's default VLAN is
   persistent -- that is, it is preserved across a switch reset.

   When an endstation attaches to a port for the first time, it inherits
   the default VLAN of the port.  Using the VLAN Manager, the network
   administrator can reassign an endstation to another VLAN.

      Note:

         When all ports and all endstations belong to the base VLAN, the
         switch fabric behaves like an 802.1D bridging system.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.2.2%20VLAN%20Configuration%20Modes"></a><a class="selflink" href="#section-2.2.2" name="section-2.2.2">2.2.2</a> VLAN Configuration Modes</span>

   For both ports and endstations, there are a variety of VLAN
   configuration types, or modes.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/2.2.2.1%20Endstations"></a><a class="selflink" href="#section-2.2.2.1" name="section-2.2.2.1">2.2.2.1</a> Endstations</span>

   For endstations, there are two VLAN configuration modes: inherited
   and static.

   -  Inherited

      An inherited endstation becomes a member of its port's default
      VLAN.





<span class="grey">Ruffen, et al.               Informational                      [Page 8]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   -  Static

      A static port becomes a member of the VLAN to which it has been
      assigned by the VLAN Manager.

   The default configuration mode for an endstation is inherited.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/2.2.2.2%20Ports"></a><a class="selflink" href="#section-2.2.2.2" name="section-2.2.2.2">2.2.2.2</a> Ports</span>

   For ports, there are two VLAN configuration modes:  normal and
   locked.

   -  Normal

      All inherited endstations on a normal port become members of the
      port's default VLAN.  All static endstations are members of the
      VLAN to which they were mapped by the VLAN Manager.

      If the VLAN Manager reassigns the default VLAN of a normal port,
      the VLAN(s) for the attached endstations may or may not change,
      depending on the VLAN configuration mode of each endstation.  All
      inherited endstations will become members of the new default VLAN.
      All others will retain membership in their previously mapped
      VLANs.

   -  Locked

      All endstations attached to a locked port can be members only of
      the port's default VLAN.

      If the VLAN Manager reconfigures a normal port to be a locked
      port, all endstations attached to the port become members of the
      port's default VLAN, regardless of any previous VLAN membership.

   The default configuration mode for ports is normal.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/2.2.2.3%20Order%20of%20Precedence"></a><a class="selflink" href="#section-2.2.2.3" name="section-2.2.2.3">2.2.2.3</a> Order of Precedence</span>

   On a normal port, static VLAN membership prevails over inherited
   membership.

   On a locked port, default VLAN membership prevails over any static
   VLAN membership.

   If a statically assigned endstation moves from a locked port back to
   a normal port, the endstation's static VLAN membership must be
   preserved.




<span class="grey">Ruffen, et al.               Informational                      [Page 9]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.2.3%20Ports%20with%20Multiple%20VLAN%20Membership"></a><a class="selflink" href="#section-2.2.3" name="section-2.2.3">2.2.3</a> Ports with Multiple VLAN Membership</span>

   A port can belong to multiple VLANs, based on the VLAN membership of
   its attached endstations.

   For example, consider a port with three endstations, a default VLAN
   of "blue" and the following endstation VLAN assignments:

   -  One of the endstations is statically assigned to VLAN "red."
   -  Another endstation is statically assigned to VLAN "green."
   -  The third endstation inherits the default VLAN of "blue."

   In this instance, the port is explicitly a member of VLAN "blue." But
   note that it is also implicitly a member of VLAN "red" and VLAN
   "green."  Any tag-based flooding (<a href="#section-4.8">Section 4.8</a>) directed to any one of
   the three VLANs ("red," "green," or "blue") will be forwarded out the
   port.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3%20Tag%2FLength%2FValue%20Method%20of%20Addressing"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a> Tag/Length/Value Method of Addressing</span>

   Within most computer networks, the concept of "address" is somewhat
   elusive because different protocols can (and do) use different
   addressing schemes and formats.  For example, Ethernet (physical
   layer) addresses are six octets long, while IP (network layer)
   addresses are only four octets long.

   To distinguish between the various protocol-specific forms of
   addressing, many software modules within the SFVLAN product specify
   addresses in a format known as Tag/Length/Value (TLV). This format
   uses a variable-length construct as shown below:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                              Tag                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Value length  |                                               |
   +-+-+-+-+-+-+-+-+                                               +
   |                          Address value                        |
   :                                                               :
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Tag

      This 4-octet field specifies the type of address contained in the
      structure.  The following address types are currently supported:




<span class="grey">Ruffen, et al.               Informational                     [Page 10]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


         Tag name        Value    Address type

         aoMacDx         1        DX ethernet dst/src/type
         aoIpxSap        2        Sap
         aoIpxRIP        3        RIP
         aoInstYP        4        YP (YP name and version)
         aoInstUDP       5        UDP (Port #)
         aoIpxIpx        6        Ipx
         aoInetIP        7        IP (Net address)
         aoInetRPC       8        RPC (Program #)
         aoInetRIP       9        INET RIP
         aoMacDXMcast    10       Multicast unknown type
         aoAtDDP         11       AppleTalk DDP
         aoEmpty         12       (no address type specified)
         aoVlan          13       VLAN identifier
         aoHostName      14       Host name
         aoNetBiosName   15       NetBIOS name
         aoNBT           16       NetBIOS on TCP name
         aoInetIPMask    17       IP Subnet Mask
         aoIpxSap8022    18       Sap 8022 type service
         aoIpxSapSnap    19       Sap Snap type service
         aoIpxSapEnet    20       Sap Enet type service
         aoDHCPXID       21       DHCP Transaction ID
         aoIpMcastRx     22       IP class D receiver
         aoIpMcastTx     23       IP class D sender
         aoIpxRip8022    24       Ipx Rip 8022 type service
         aoIpxRipSnap    25       Ipx Rip type service
         aoIpxRipEnet    26       Ipx Rip Enet service
         aoATM           27       ATM
         aoATMELAN       28       ATM LAN Emulation Name

   Value length

      This 1-octet field contains the length of the value of the
      address.  The value here depends on the address type and actual
      value.

   Address value

      This variable-length field contains the value of the address. The
      length of this field is stored in the Value length field.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.4%20Architectural%20Overview"></a><a class="selflink" href="#section-2.4" name="section-2.4">2.4</a> Architectural Overview</span>

   The SFVLAN software executes in the switch CPU and consists of the
   following elements as shown in Figure 1:





<span class="grey">Ruffen, et al.               Informational                     [Page 11]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   -  The SFVLAN base services that handles traffic intercepted by the
      switch hardware.  The base services are described in <a href="#section-3">Section 3</a>.

   +------------------------------------------------------+
   |                                              +-----+ |
   |                         +------------+       |  I  | |
   |                         |  CALL TAP  &lt;--(8)--&gt;  N  | |
   |                         +------------+       |  T  | |
   |                                              |  E  | |
   |      +-----------+      +------------+       |  R  | |
   |      |   PATH    |      |  TOPOLOGY  |       |  S  | |
   |      |           |      |            |       |  W  | |
   |      | Lnk state &lt;------&gt;  Lnk state &lt;--(3)--&gt;  I  | | Flood path
   |      |           |      |            |       |  T  &lt;----(5,7,8)--&gt;
   |      | Span tree &lt;------&gt;  Span tree &lt;--(4)--&gt;  C  | |
   |      +--^--------+      |            |       |  H  | |
   |         |               |  Discovery &lt;--(2)--&gt;     | |
   |         |               +------------+       |  M  | |
   |         |                                    |  E  | |
   |  +------^--+            +--------+           |  S  | |
   |  | CONNECT &gt;---------+--&gt; FILTER |           |  S  | |
   |  +--^------+         |  +--------+           |  A  | |  specific
   |     |                |                       |  G  | | netwrk lnks
   |     |       +--------^-+     +-------+       |  E  &lt;----(2,3,4)--&gt;
   |     +-------&lt;  POLICY  |     | FLOOD &gt;--(7)--&gt;     | |
   |             +------^---+     +-^-----+       |  P  | |
   |                    |           |             |  R  | |
   | +-----------+    +-^-----------V-+           |  O  | |
   | | DIRECTORY &lt;----&gt;    RESOLVE    &lt;------(5)--&gt;  T  | |
   | +-----^-----+    +---^-----------+           |  O  | |
   |       |              |                       |  C  | |
   |       |    +---------^-----------+           |  O  | |
   |       +----&lt;    Base Services    |           |  L  | |
   |            +-----^---------------+           +-----+ |
   +------------------|-----------------------------------+
    Switch CPU        |
                      | Host control port
                +-----O----------------+
                |     ^ no cnx         |
      Layer 2   |     |                |
     ----------&gt;O-----+---------------&gt;O-----------&gt;
      SA/DA pr  |          known cnx   |
                +----------------------+
                 Switch hardware


                   Figure 1:  SFVLAN Architectural Overview




<span class="grey">Ruffen, et al.               Informational                     [Page 12]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   -  Eight call processing service centers that provide the essential
      services required to process call connections.  The call
      processing service centers are described in <a href="#section-4">Section 4</a>.

   -  A Call Tap module that supports the monitoring of call
      connections.  The Call Tap module is described in <a href="#section-5">Section 5</a>.

   -  The InterSwitch Message Protocol (ISMP) that provides a consistent
      method of encapsulating and transmitting control messages
      exchanged between SFVLAN switches.  (Note that ISMP is not a
      discrete software module.  Instead, its functionality is
      distributed among those service centers and software modules that
      need to communicate with other switches in the fabric.) The
      Interswitch Message Protocol and the formats of the individual
      interswitch messages are described in <a href="#section-6">Section 6</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20Base%20Services"></a><a class="selflink" href="#section-3" name="section-3">3</a>. Base Services</span>

   The SFVLAN base services act as the interface between the switch
   hardware and the SFVLAN service centers running on the switch CPU.
   This relationship is shown in Figure 2.  This figure is a replication
   of the bottom portion of Figure 1.


            |    Directory       Resolve                   |
            |        ^              ^                      |
            |        |              |                      |
            |        |    +---------^-----------+          |
            |        +----&lt;    Base Services    |          |
            |             +-----^---------------+          |
            +-------------------|--------------------------+
             Switch CPU         |
                                | Host control port
                          +-----O----------------+
                          |     ^ no cnx         |
                Layer 2   |     |                |
               ----------&gt;O-----+---------------&gt;O-----------&gt;
                SA/DA pr  |          known cnx   |
                          +----------------------+
                           Switch hardware


                        Figure 2:  Base Services








<span class="grey">Ruffen, et al.               Informational                     [Page 13]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   During normal operation of the switch, data packets arriving at
   any one of the local switch ports are examined in the switch
   hardware.  If the packet's source and destination address (SA/DA)
   pair match a known connection, the hardware simply forwards the
   packet out the outport specified by the connection.

   If the SA/DA pair do not match any known connection, the hardware
   diverts the packet to the host control port where it is picked up
   by the SFVLAN base services.  The base services generate a
   structure known as a state box that tracks the progress of the
   call connection request as the request moves through the call
   processing service centers.

   After creating the call's state box, the base services check to
   determine if the call is a duplicate of a call already being
   processed.  If not, a request is issued to the Directory Service
   Center (<a href="#section-4.1">Section 4.1</a>) to add the call's source address to the local
   Node and Alias Tables.  The base services then hand the call off to
   the Resolve Service Center (<a href="#section-4.3">Section 4.3</a>) for further processing.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20Call%20Processing"></a><a class="selflink" href="#section-4" name="section-4">4</a>. Call Processing</span>

   Call connection processing is handled by a set of eight service
   centers, each with one or more servers.  The servers within a
   service center are called in a particular sequence.  Each server
   records the results of its processing in the call connection
   request state box and passes the state box to the next server in
   the sequence.

   In the sections that follow, servers are listed in the order in
   which they are called.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1%20Directory%20Service%20Center"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a> Directory Service Center</span>

   The Directory Service Center is responsible for cataloging the MAC
   addresses and alias information for both local and remote
   endstations.  The information is stored in two tables -- the Node
   Table and the Alias Table.

   -  The Node Table contains the MAC addresses of endstations
      attached to the local switch.  It also contains a cache of
      remote endstations detected by the Resolve Service Center
      (<a href="#section-4.3">Section 4.3</a>).   Every entry in the Node Table has one or more
      corresponding entries in the Alias Table.







<span class="grey">Ruffen, et al.               Informational                     [Page 14]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   -  The Alias Table contains protocol alias information for each
      endstation.  An endstation alias can be a network address (such
      as an IP or IPX address), a VLAN identifier, or any other
      protocol identifier.  Since every endstation is a member of at
      least one VLAN (the default VLAN for the port), there is always
      at least one entry in the Alias Table for each entry in the
      Node Table.

      Note:

         The Node and Alias Tables must remain synchronized.
         That is, when an endstation's final alias is removed
         from the Alias Table, the endstation entry is removed
         from the Node Table.

   Note that the total collection of all Node Tables and Alias Tables
   across all switches is known as the "virtual" directory of the
   switch fabric.  The virtual directory contains address mappings of
   all known endstations in the fabric.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.1%20Local%20Add%20Server"></a><a class="selflink" href="#section-4.1.1" name="section-4.1.1">4.1.1</a> Local Add Server</span>

   The Directory Local Add server adds entries to the local Node or
   Alias Tables.  It is called by the base services (<a href="#section-3">Section 3</a>) to
   add a local endstation and by the Interswitch Resolve (<a href="#section-4.3.4">Section</a>
   <a href="#section-4.3.4">4.3.4</a>) server to add an endstation discovered on a remote switch.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.2%20Inverse%20Resolve%20Server"></a><a class="selflink" href="#section-4.1.2" name="section-4.1.2">4.1.2</a> Inverse Resolve Server</span>

   The Directory Inverse Resolve server is invoked when a new
   endstation has been discovered on the local switch (that is, when
   the Local Add server was successful in adding the endstation).
   The server provides two functions:

   -  It populates the Node and Alias Tables with local entries
      during switch initialization.

   -  It processes a new endstation discovered after the fabric
      topology has converged to a stable state.

   In both instances, the processing is identical.










<span class="grey">Ruffen, et al.               Informational                     [Page 15]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   When a new endstation is detected on one of the switch's local
   ports, the Inverse Resolve server sends an Interswitch New User
   request message (<a href="#section-6.5">Section 6.5</a>) over the switch flood path to all
   other switches in the fabric.  The purpose of the Interswitch New
   User request is two-fold:

   -  It informs the other switches of the new endstation address.
      Any entries for that endstation in the local databases of other
      switches should be dealt with appropriately.

   -  It requests information about any static VLAN(s) to which the
      endstation has been assigned.

   When a switch receives an Interswitch New User request message
   from one of its upstream neighbors, it first forwards the message
   to all its downstream neighbors.  No actual processing or VLAN
   resolution is attempted until the message reaches the end of the
   switch flood path and begins its trip back along the return path.
   This ensures that all switches in the fabric receive notification
   of the new user and have synchronized their databases.

   If a switch receives an Interswitch New User request message but
   has no downstream neighbors, it does the following:

   -  If the endstation was previously connected to one of the
      switch's local ports, the switch formulates an Interswitch New
      User Response message by loading the VLAN identifier(s) of the
      static VLAN(s) to which the endstation was assigned, along with
      its own MAC address.  (VLAN identifiers are stored in
      Tag/Length/Value (TLV) format.  See <a href="#section-2.3">Section 2.3</a>.)  The switch
      then sets the message status field to NewUserAck, and returns
      the message to its upstream (requesting) neighbor.

      Otherwise, the switch sets the status field to NewUserUnknown
      and returns the message to its upstream neighbor.

   -  The switch then deletes the endstation from its local database,
      as well as any entries associated with the endstation in its
      connection table.

   When a switch forwards an Interswitch New User request message to
   its downstream neighbors, it keeps track of the number of requests
   it has sent out and does not respond back to its upstream neighbor
   until all requests have been responded to.







<span class="grey">Ruffen, et al.               Informational                     [Page 16]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   -  As each response is received, the switch checks the status
      field of the message.  If the status is NewUserAck, the switch
      retains the information in that response.  When all requests
      have been responded to, the switch returns the NewUserAck
      response to its upstream neighbor.

   -  If all the Interswitch New User Request messages have been
      responded to with a status of NewUserUnknown, the switch checks
      to see if the endstation was previously connected to one of its
      local ports.  If so, the switch formulates an Interswitch New
      User Response message by loading the VLAN identifier(s) of the
      static VLAN(s) to which the endstation was assigned, along with
      its own MAC address.  The switch then sets the message status
      field to NewUserAck, and returns the message to its upstream
      (requesting) neighbor.

      Otherwise, the switch sets the status field to NewUserUnknown
      and returns the message to its upstream neighbor.

   -  The switch then deletes the endstation from its local database,
      as well as any entries associated with the endstation in its
      connection table.

   When the originating switch has received responses to all the
   Interswitch New User Request messages it has sent, it does the
   following:

   -  If it has received a response message with a status of
      NewUserAck, it loads the new VLAN information into its local
      database.

   -  If all responses have been received with a status of
      NewUserUnknown, the originating switch assumes that the
      endstation was not previously connected anywhere in the network
      and assigns it to a VLAN according to the VLAN membership rules
      and order of precedence.

   If any Interswitch New User Request message has not been responded
   to within a certain predetermined time (currently 5 seconds), the
   originating switch recalculates the switch flood path and resends
   the Interswitch New User Request message.










<span class="grey">Ruffen, et al.               Informational                     [Page 17]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.3%20Local%20Delete%20Server"></a><a class="selflink" href="#section-4.1.3" name="section-4.1.3">4.1.3</a> Local Delete Server</span>

   The Directory Local Delete server removes entries (both local and
   remote) from the local Node and Alias Tables.  It is invoked when
   an endstation, previously known to be attached to one switch, has
   been moved and discovered on another switch.

   Note also that remote entries are cached and are purged from the
   tables on a first-in/first-out basis as space is needed in the
   cache.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2%20Topology%20Service%20Center"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a> Topology Service Center</span>

   The Topology Service Center is responsible for maintaining three
   databases relating to the topology of the switch fabric:

   -  The topology table of SFVLAN switches that are physical
      neighbors to the local switch.

   -  The spanning tree that defines the loop-free switch flood path
      used for transmitting undirected interswitch messages.

   -  The directed graph that is used to calculate the best path(s)
      for call connections.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.1%20Neighbor%20Discovery%20Server"></a><a class="selflink" href="#section-4.2.1" name="section-4.2.1">4.2.1</a> Neighbor Discovery Server</span>

   The Topology Neighbor Discovery server uses Interswitch Keepalive
   messages to detect the switch's neighbors and establish the
   topology of the switching fabric.  Interswitch Keepalive messages
   are exchanged in accordance with Cabletron's VlanHello protocol,
   described in detail in [<a href="#ref-IDhello" title="&quot;Cabletron's VlanHello Protocol Specification&quot;">IDhello</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.2%20Spanning%20Tree%20Server"></a><a class="selflink" href="#section-4.2.2" name="section-4.2.2">4.2.2</a> Spanning Tree Server</span>

   The Topology Spanning Tree server is invoked by the Topology
   Neighbor Discovery server when a neighboring SFVLAN switch is
   either discovered or lost -- that is, when the operational status
   of a network link changes.

   The Spanning Tree server exchanges interswitch messages with
   neighboring SFVLAN switches to calculate the switch flood path
   over which undirected interswitch messages are sent.  There are
   two parts to this process:

   -  Creating and maintaining the spanning tree
   -  Remote blocking




<span class="grey">Ruffen, et al.               Informational                     [Page 18]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.2.2.1%20Creating%20and%20Maintaining%20the%20Spanning%20Tree"></a><a class="selflink" href="#section-4.2.2.1" name="section-4.2.2.1">4.2.2.1</a> Creating and Maintaining the Spanning Tree</span>

   In a network with redundant network links, a packet traveling between
   switches can potentially be caught in an infinite loop -- an
   intolerable situation in a networking environment.  However, it is
   possible to reduce a network topology to a single configuration
   (known as a spanning tree) such that there is, at most, one path
   between any two switches.

   Within the SFVLAN product, the spanning tree is created and
   maintained using the Spanning Tree Algorithm defined by the IEEE
   802.1d standard.

      Note:

         A detailed discussion of this algorithm is beyond the scope of
         this document.  See [<a href="#ref-IEEE">IEEE</a>] for more information.

   To implement the Spanning Tree Algorithm, SFVLAN switches exchange
   Interswitch BPDU messages (<a href="#section-6.2">Section 6.2</a>) containing encapsulated
   IEEE-compliant 802.2 Bridge Protocol Data Units (BPDUs).  There are
   two types of BPDUs:

   -  Configuration (CFG) BPDUs are exchanged during the switch
      discovery process, following the receipt of an Interswitch
      Keepalive message.  They are used to create the initial the
      spanning tree.

   -  Topology Change Notification (TCN) BPDUs are exchanged when
      changes in the network topology are detected.  They are used to
      redefine the spanning tree to reflect the current topology.

   See [<a href="#ref-IEEE">IEEE</a>] for detailed descriptions of these BPDUs.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.2.2.2%20Remote%20Blocking"></a><a class="selflink" href="#section-4.2.2.2" name="section-4.2.2.2">4.2.2.2</a> Remote Blocking</span>

   After the spanning tree has been computed, each network port on an
   SFVLAN switch will be in one of two states:

   -  Forwarding.  A port in the Forwarding state will be used to
      transmit all ISMP messages.










<span class="grey">Ruffen, et al.               Informational                     [Page 19]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   -  Blocking.  A port in the Blocking state will not be used to
      forward undirected ISMP messages.  Blocking the rebroadcast of
      these messages on selected ports prevents message duplication
      arising from multiple paths that exist in the network topology.
      Note that all other types of ISMP message will be transmitted.

      Note:

         The IEEE 802.1d standard specifies other port states used
         during the initial creation of the spanning tree. These states
         are not relevant to the discussion here.

   Note that although a port in the Blocking state will not forward
   undirected ISMP messages, it may still receive them.  Any such
   message received will ultimately be discarded, but at the cost of CPU
   time necessary to process the packet.

   To prevent the transmission of undirected messages to a port, the
   port's owner switch can set remote blocking on the link by sending an
   Interswitch Remote Blocking message (<a href="#section-6.3">Section 6.3</a>) out over the port.
   This notifies the switch on the other end of the link that undirected
   messages should not be sent over the link, regardless of the state of
   the sending port.

   Each SFVLAN switch sends an Interswitch Remote Blocking message out
   over all its blocked network ports every 5 seconds.  A flag within
   the message indicates whether remote blocking should be turned on or
   off over the link.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.3%20Link%20State%20Server"></a><a class="selflink" href="#section-4.2.3" name="section-4.2.3">4.2.3</a> Link State Server</span>

   The Topology Link State server is invoked by any process that detects
   a change in the state of the network links of the local switch.
   These changes include (but are not limited to) changes in operational
   or administrative status of the link, path "cost" or bandwidth.

   The Link State server runs Cabletron's Virtual LAN Link State (VLS)
   protocol which exchanges interswitch messages with neighboring SFVLAN
   switches to calculate the set of best paths between the local switch
   and all other switches in the fabric. (The VLS protocol is described
   in detail in [<a href="#ref-IDvlsp" title="&quot;Cabletron's VLS Protocol Specification&quot;">IDvlsp</a>].)

   The Link State server also notifies the Connect Service Center
   (<a href="#section-4.5">Section 4.5</a>) of any remote links that have failed, thereby
   necessitating potential tear-down of current connections.






<span class="grey">Ruffen, et al.               Informational                     [Page 20]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3%20Resolve%20Service%20Center"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a> Resolve Service Center</span>

   The Resolve Service Center is responsible for resolving the
   destination address of broadcast data packets (such as an IP ARP
   packet) to a unicast MAC address to be used in mapping the call
   connection.  To do this, the Resolve Service Center attempts to
   resolve such broadcast packets directly at the access port of the
   ingress switch.

   Address resolution is accomplished as follows:

   1) First, an attempt is made to resolve the address from the switch's
      local databases by calling the following servers:

      -  The Table server attempts to resolve the address from the
         Resolve Table (<a href="#section-4.3.1">Section 4.3.1</a>).

      -  Next, the Local server attempts to resolve the address from the
         Node and Alias Tables (<a href="#section-4.3.2">Section 4.3.2</a>).

      -  If the address is not found in these tables but is an IP
         address, the Resolve Subnet server (<a href="#section-4.3.3">Section 4.3.3</a>) is also
         called.

   2) If the address cannot be resolved locally, the Interswitch Resolve
      server (<a href="#section-4.3.4">Section 4.3.4</a>) is called to access the "virtual directory"
      by sending an Interswitch Resolve request message out over the
      switch flood path.

   3) If the address cannot be resolved either locally or via an
      Interswitch Resolve message -- that is, the destination endstation
      is unknown to any switch, perhaps because it has never transmitted
      a packet to its switch -- the following steps are taken:

      -  The Unresolvable server (<a href="#section-4.3.5">Section 4.3.5</a>) is called to record the
         unresolved packet.

      -  The Block server (<a href="#section-4.3.6">Section 4.3.6</a>) is called to determine whether
         the address should be added to the Block Table.

      -  The Flood Service Center (<a href="#section-4.8">Section 4.8</a>) is called to broadcast
         the packet to other SFVLAN switches using a tag-based flooding
         mechanism.








<span class="grey">Ruffen, et al.               Informational                     [Page 21]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.1%20Table%20Server"></a><a class="selflink" href="#section-4.3.1" name="section-4.3.1">4.3.1</a> Table Server</span>

   The Resolve Table server maintains the Resolve Table which contains a
   collection of addresses that might not be resolvable in the normal
   fashion.  This table typically contains such things as the addresses
   of "quiet" devices that do not send data packets or special mappings
   of IP addresses behind a router.  Entries can be added to or deleted
   from the Resolve Table via an external management application.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.2%20Local%20Server"></a><a class="selflink" href="#section-4.3.2" name="section-4.3.2">4.3.2</a> Local Server</span>

   The Resolve Local server checks the Node and Alias Tables maintained
   by the Directory Service Center (<a href="#section-4.1">Section 4.1</a>) to determine if it can
   resolve the address.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.3%20Subnet%20Server"></a><a class="selflink" href="#section-4.3.3" name="section-4.3.3">4.3.3</a> Subnet Server</span>

   If the address to be resolved is an IP address but cannot be resolved
   via the standard processing described above, the Resolve Subnet
   server applies the subnet mask to the IP address and then does a
   lookup in the Resolve Table.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.4%20Interswitch%20Resolve%20Server"></a><a class="selflink" href="#section-4.3.4" name="section-4.3.4">4.3.4</a> Interswitch Resolve Server</span>

   If the address cannot be resolved locally, the Interswitch Resolve
   server accesses the "virtual directory" by sending an Interswitch
   Resolve request message (<a href="#section-6.4">Section 6.4</a>) out over the switch flood path.
   The Interswitch Resolve request message contains the destination
   address as it was received within the packet, along with a list of
   requested addressing information.

   When a switch receives an Interswitch Resolve request message from
   one of its upstream neighbors, it checks to see if the destination
   endstation is connected to one of its local access ports.  If so, it
   formulates an Interswitch Resolve response message by filling in the
   requested address information, along with its own MAC address.  It
   then sets the message status field to ResolveAck, and returns the
   message to its upstream (requesting) neighbor.

   If the receiving switch cannot resolve the address, it forwards the
   Interswitch Resolve request message to its downstream neighbors.  If
   the switch has no downstream neighbors, it sets the message status
   field to Unknown, and returns the message to its upstream
   (requesting) neighbor.







<span class="grey">Ruffen, et al.               Informational                     [Page 22]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   When a switch forwards an Interswitch Resolve request message to its
   downstream neighbors, it keeps track of the number of requests it has
   sent out and received back.  It will only respond back to its
   upstream (requesting) neighbor when one of the following conditions
   occurs:

   -  It receives any response with a status of ResolveAck

   -  All downstream neighbors have responded with a status of Unknown

   Any Interswitch Resolve request message that is not responded to
   within a certain predetermined time (currently 5 seconds) is assumed
   to have a response status of Unknown.

   When the Interswitch Resolve server receives a successful Interswitch
   Resolve response message, it records the resolved address information
   in the remote cache of its local directory for use in resolving later
   packets for the same endstation.  Note that this process results in
   each switch building its own unique copy of the virtual directory
   containing only the endstation addresses in which it is interested.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.5%20Unresolvable%20Server"></a><a class="selflink" href="#section-4.3.5" name="section-4.3.5">4.3.5</a> Unresolvable Server</span>

   The Unresolvable server is called when a packet destination address
   cannot be resolved.  The server records the packet in a table that
   can then be examined to determine which endstations are generating
   unresolvable traffic.

   Also, if a particular destination is repeatedly seen to be
   unresolvable, the server calls the Block server (<a href="#section-4.3.6">Section 4.3.6</a>) to
   determine whether the address should be blocked.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.6%20Block%20Server"></a><a class="selflink" href="#section-4.3.6" name="section-4.3.6">4.3.6</a> Block Server</span>

   The Resolve Block server is called when a particular destination has
   been repeatedly seen to be unresolvable.  This typically happens
   when, unknown to the packet source, the destination endstation is
   either not currently available or no longer exists.

   If the Block server determines that the unresolved address has
   exceeded a configurable request threshold, the address is added to
   the server's Block Table.  Interswitch Resolve request messages for
   addresses listed in the Block Table are sent less frequently, thereby
   reducing the amount of Interswitch Resolve traffic throughout the
   fabric.






<span class="grey">Ruffen, et al.               Informational                     [Page 23]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   If an address listed in the Block Table is later successfully
   resolved by and Interswitch Resolve request message, the address is
   removed from the table.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4%20Policy%20Service%20Center"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a> Policy Service Center</span>

   Once the destination address of the call packet has been resolved,
   the Policy Service Center is called to determine the validity of the
   requested call connection based on the VLAN policy of the source and
   destination VLANs.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.4.1%20Unicast%20Rules%20Server"></a><a class="selflink" href="#section-4.4.1" name="section-4.4.1">4.4.1</a> Unicast Rules Server</span>

   The Policy Unicast Rules server recognizes two VLAN policy values:
   Open or Secure.  The default policy for all VLANs is Open.

   The policy value is used as follows when determining the validity of
   a requested call connection:

   -  If the VLAN policy of either the source or destination cannot be
      determined, the Filter Service Center is called to establish a
      filter (i.e., blocked) for the SA/DA pair.

   -  If the source and destination endstations belong to the same VLAN,
      then the connection is permitted regardless of the VLAN policy.

   -  If the source and destination endstations belong to different
      VLANs, but both VLANs are running with an Open policy, then the
      connection is permitted, providing cut-through switching between
      different VLAN(s).

   -  If the source and destination endstations belong to different
      VLANs and one or both of the VLANs are running with a Secure
      policy, then the Flood Service Center (<a href="#section-4.8">Section 4.8</a>) is called to
      broadcast the packet to other SFVLAN switches having ports or
      endstations that belong to the same VLAN as the packet source.

      Note that if any of the VLANs to which the source or destination
      belong has a Secure policy, then the policy used in the above
      algorithm is Secure.











<span class="grey">Ruffen, et al.               Informational                     [Page 24]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5%20Connect%20Service%20Center"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a> Connect Service Center</span>

   Once the Policy Service Center (<a href="#section-4.4">Section 4.4</a>) has determined that a
   requested call connection is valid, the Connect Service Center is
   called to set up the connection.  Note that connectivity between two
   endstations within the fabric is established on a switch-by-switch
   basis as the call progresses through the fabric toward its
   destination.  No synchronization is needed between switches to
   establish an end-to-end connection.

   The Connect Service Center maintains a Connection Table containing
   information for all connections currently active on the switch's
   local ports.

   Connections are removed from the Connection Table when one of the
   endstations is moved to a new switch (<a href="#section-4.1.2">Section 4.1.2</a>) or when the
   Topology Link State server (<a href="#section-4.2.3">Section 4.2.3</a>) notifies the Connect
   Service Center that a network link has failed.  Otherwise,
   connections are not automatically aged out or removed from the
   Connection Table until a certain percentage threshold (HiMark) of
   table capacity is reached and resources are needed.  At that point,
   some number of connections (typically 100) are aged out and removed
   at one time.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.5.1%20Local%20Server"></a><a class="selflink" href="#section-4.5.1" name="section-4.5.1">4.5.1</a> Local Server</span>

   If the destination endstation resides on the local switch, the
   Connect Local server establishes a connection between the source and
   destination ports.  Note that if the source and destination both
   reside on the same physical port, a filter connection is established
   by calling the Filter Service Center (<a href="#section-4.6">Section 4.6</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.5.2%20Link%20State%20Server"></a><a class="selflink" href="#section-4.5.2" name="section-4.5.2">4.5.2</a> Link State Server</span>

   The Connect Link State server is called if the destination endstation
   of the proposed connection does not reside on the local switch.

   The server executes a call to the Path Link State server (<a href="#section-4.7.1">Section</a>
   <a href="#section-4.7.1">4.7.1</a>) which returns up to three "best" paths of equal cost from the
   local switch to the destination switch.  If more than one path is
   returned, the server chooses a path that provides the best load
   balancing of user traffic across the fabric.









<span class="grey">Ruffen, et al.               Informational                     [Page 25]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.5.3%20Directory%20Server"></a><a class="selflink" href="#section-4.5.3" name="section-4.5.3">4.5.3</a> Directory Server</span>

   The Connect Directory server is called if the Connect Link State
   server is unable to provide a path for some reason.

   The server examines the local directory to determine on which switch
   the destination endstation resides.  If the port of access to the
   destination switch is known, then a connection is established using
   that port as the outport of the connection.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6%20Filter%20Service%20Center"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a> Filter Service Center</span>

   The Filter Service Center is responsible for establishing filtered
   connections.  This service center is called by the Connect Local
   server (<a href="#section-4.5.1">Section 4.5.1</a>) if the source and destination endstations
   reside on the same physical port, and by the Policy Service Center
   (<a href="#section-4.4">Section 4.4</a>) if the VLAN of either the source or destination is
   indeterminate.

   A filter connection is programmed in the switch hardware with no
   specified outport.  That is, the connection is programmed to discard
   any traffic for that SA/DA pair.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.7%20Path%20Service%20Center"></a><a class="selflink" href="#section-4.7" name="section-4.7">4.7</a> Path Service Center</span>

   The Path Service Center is responsible for determining the path from
   a source to a destination.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.7.1%20Link%20State%20Server"></a><a class="selflink" href="#section-4.7.1" name="section-4.7.1">4.7.1</a> Link State Server</span>

   The Path Link State server is called by the Connect Link State server
   (<a href="#section-4.5.2">Section 4.5.2</a>) to return up to three best paths of equal cost
   between a source and destination pair of endstations.  These best
   paths are calculated by the Topology Link State server (<a href="#section-4.2.3">Section</a>
   <a href="#section-4.2.3">4.2.3</a>).

   The Path Link State server is also called by the Connect Service
   Center to return a complete source-to-destination path consisting of
   a list of individual switch port names.  A switch port name consists
   of the switch base MAC address and a port instance relative to the
   switch.










<span class="grey">Ruffen, et al.               Informational                     [Page 26]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.7.2%20Spanning%20Tree%20Server"></a><a class="selflink" href="#section-4.7.2" name="section-4.7.2">4.7.2</a> Spanning Tree Server</span>

   The Path Spanning Tree server is called by any server needing to
   forward an undirected message out over the switch flood path.  The
   server returns a port mask indicating which local ports are currently
   enabled as outports of the switch flood path.  The switch flood path
   is calculated by the Topology Spanning Tree server (<a href="#section-4.2.2">Section 4.2.2</a>).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.8%20Flood%20Service%20Center"></a><a class="selflink" href="#section-4.8" name="section-4.8">4.8</a> Flood Service Center</span>

   If the Resolve Service Center (<a href="#section-4.3">Section 4.3</a>) is unable to resolve the
   destination address of a packet, it invokes the Flood Service Center
   to broadcast the unresolved packet.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.8.1%20Tag-Based%20Flood%20Server"></a><a class="selflink" href="#section-4.8.1" name="section-4.8.1">4.8.1</a> Tag-Based Flood Server</span>

   The Tag-Based Flood server encapsulates the unresolved packet into an
   Interswitch Tag-Based Flood message (<a href="#section-6.6">Section 6.6</a>), along with a list
   of Virtual LAN identifiers specifying those VLANs to which the source
   endstation belongs.  The message is then sent out over the switch
   flood path to all other switches in the fabric.

   When a switch receives an Interswitch Tag-Based Flood message, it
   examines the encapsulated header to determine the VLAN(s) to which
   the packet should be sent.  If any of the switch's local access ports
   belong to one or more of the specified VLANs, the switch strips off
   the tag-based header and forwards the original packet out the
   appropriate access port(s).

   The switch also forwards the entire encapsulated packet along the
   switch flood path to its downstream neighboring switches, if any.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20Monitoring%20Call%20Connections"></a><a class="selflink" href="#section-5" name="section-5">5</a>. Monitoring Call Connections</span>

   The SecureFast VLAN product permits monitoring of user traffic moving
   between two endstations by establishing a call tap on the connection
   between the two stations.  Traffic can be monitored in one or both
   directions along the connection path.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1%20Definitions"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a> Definitions</span>

   In addition to the terms defined in <a href="#section-1.2">Section 1.2</a>, the following terms
   are used in this description of the call tap process.








<span class="grey">Ruffen, et al.               Informational                     [Page 27]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Originating Switch

      The originating switch is the switch that requests the call tap.
      Any switch along a call connection path may request a tap on that
      call connection.

   Probe

      The tap probe is the device to receive a copy of the call
      connection data.  The probe is attached to a port on the probe
      switch.

   Probe Switch

      The probe switch (also known as the terminating switch) is the
      switch to which the probe is attached.  The probe switch can be
      anywhere in the topology.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2%20Tapping%20a%20Connection"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a> Tapping a Connection</span>

   A request to tap a call connection between two endstations can
   originate on any switch along the call connection path -- the ingress
   switch, the egress switch, or any of the intermediate switches.  The
   call connection must have already been established before a call tap
   request can be issued.  The probe device can be attached to any
   switch in the topology.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1%20Types%20of%20Tap%20Connections"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a> Types of Tap Connections</span>

   A call tap is enabled by setting up an auxiliary tap connection
   associated with the call being monitored.  Since the tap must
   originate on a switch somewhere along the call connection path, the
   tap connection path will pass through one or more of the switches
   along the call path.  However, since the probe switch can be anywhere
   in the switch fabric, the tap path and the call path may diverge at
   some point.

   Therefore, on each switch along the tap path, the tap connection is
   established in one of three ways:

   -  The existing call connection is used with no modification.

         When both the call path and tap path pass through the switch,
         and the inport and outports of both connections are identical,
         the switch uses the existing call connection to route the tap.

   -  The existing call connection is modified.




<span class="grey">Ruffen, et al.               Informational                     [Page 28]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


         When both the call path and tap path pass through the switch,
         but the call path outport is different from the tap path
         outport, the switch enables an extra outport in either one or
         both directions of the call connection, depending on the
         direction of the tap.  This happens under two conditions.

   -  If the switch is also the probe switch, an extra outport is
         enabled to the probe.

   -  If the switch is the point at which the call path and the tap path
         diverge, an extra outport is enabled to the downstream neighbor
         on that leg of the switch flood path on which the probe switch
         is located.

   -  A new connection is established.

         If the call path does not pass through the switch (because the
         tap path has diverged from the call path), a completely new
         connection is established for the tap.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2%20Locating%20the%20Probe%20and%20Establishing%20the%20Tap%20Connection"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a> Locating the Probe and Establishing the Tap Connection</span>

   To establish a call tap, the originating switch formats an
   Interswitch Tap request message (<a href="#section-6.7">Section 6.7</a>) and sends it out over
   the switch flood path to all other switches in the topology.

      Note:

         If the originating switch is also the probe switch, no
         Interswitch Tap request message is necessary.

   As the Interswitch Tap request message travels out along the switch
   flood path, each switch receiving the message checks to see if it is
   the probe switch and does the following:

   -  If the switch is the probe switch, it establishes the tap
      connection by either setting up a new connection or modifying the
      call connection, as appropriate (see <a href="#section-5.2.1">Section 5.2.1</a>).  It then
      reformats the Tap request message to be a Tap response message
      with a status indicating that the probe has been found, and sends
      the message back to its upstream neighbor.

   -  If the switch is not the probe switch, it forwards the Tap request
      message to all its downstream neighbors (if any).

   -  If the switch is not the probe switch and has no downstream
      neighbors, it reformats the Tap request message to be a Tap
      response message with a status indicating that the probe is not



<span class="grey">Ruffen, et al.               Informational                     [Page 29]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


      located on that leg of the switch flood path.   It then sends the
      response message back to its upstream neighbor.

      When a switch forwards an Interswitch Tap request message to its
      downstream neighbors, it keeps track of the number of requests it
      has sent out.

   -  If a response is received with a status indicating that the probe
      switch is located somewhere downstream, the switch establishes the
      appropriate type of tap connection (see <a href="#section-5.2.1">Section 5.2.1</a>).  It then
      formats a Tap response message with a status indicating that the
      probe has been found and passes the message to its upstream
      neighbor.

   -  If no responses are received with a status indicating that the
      probe switch is located downstream, the switch formats a Tap
      response message with a status indicating that the probe has not
      been found and passes the message to its upstream neighbor.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.3%20Status%20Field"></a><a class="selflink" href="#section-5.2.3" name="section-5.2.3">5.2.3</a> Status Field</span>

   The status field of the Interswitch Tap request/response message
   contains information about the state of the tap.  Some of these
   status values are transient and are merely used to track the progress
   of the tap request.  Other status values are stored in the tap table
   of each switch along the tap path for use when the tap is torn down.
   The possible status values are as follows:

   -  StatusUnassigned.  This is the initial status of the Interswitch
      Tap request message.

   -  OutportDecisionUnknown.  The tap request is still moving
      downstream along the switch flood path.  The probe switch had not
      yet been found.

   -  ProbeNotFound.  The probe switch is not located on this leg of the
      switch flood path.

   -  DisableOutport.  The probe switch is located on this leg of the
      switch flood path, and the switch has had to either modify the
      call connection or establish a new connection to implement the tap
      (see <a href="#section-5.2.1">Section 5.2.1</a>).  When the tap is torn down, the switch will
      have to disable any additional outports that have been enabled for
      the tap.

   -  KeepOutport.  The probe switch is located on this leg of the
      switch flood path, and the switch was able to route the tap over
      the existing call path (see <a href="#section-5.2.1">Section 5.2.1</a>).  Any ports used for



<span class="grey">Ruffen, et al.               Informational                     [Page 30]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


      the tap will remain enabled when the tap is torn down.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3%20Untapping%20a%20Connection"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a> Untapping a Connection</span>

   A request to untap a call connection must be issued on the tap
   originating switch -- that is, the same switch that issued the tap
   request.

   To untap a call connection, the originating switch sends an
   Interswitch Untap request message (<a href="#section-6.7">Section 6.7</a>) out over the switch
   flood path to all other switches in the topology.  The message is
   sent over the switch flood path, rather than the tap connection path,
   to ensure that all switches that know of the tap are properly
   notified, even if the switch topology has changed since the tap was
   established.

   When a switch receives an Interswitch Untap request message, it
   checks to see if it is handling a tap for the specified call
   connection.  If so, the switch disables the tap connection, as
   follows:

   -  If a new connection was added for the tap, the connection is
      deleted from the connection table.

   -  If additional outports were enabled on the call connection, they
      are disabled.

   The switch then forwards the Interswitch Untap request message to its
   downstream neighbor (if any).  If the switch has no downstream
   neighbors, it formats an untap response and sends the message back to
   its upstream neighbor.

   When a switch forwards an Interswitch Untap request message to its
   downstream neighbors, it keeps track of the number of requests it has
   sent out and does not respond back to its upstream neighbor until all
   untap requests have been responded to.  Once all responses have been
   received, the switch handles any final cleanup for the tap and then
   sends a single Interswitch Untap response message to its upstream
   neighbor.












<span class="grey">Ruffen, et al.               Informational                     [Page 31]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20Interswitch%20Message%20Protocol%20%28ISMP%29"></a><a class="selflink" href="#section-6" name="section-6">6</a>. Interswitch Message Protocol (ISMP)</span>

   The InterSwitch Message protocol (ISMP) provides a consistent method
   of encapsulating and transmitting messages exchanged between switches
   to create and maintain the databases and provide other control
   services and functionality required by the SFVLAN product.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1%20General%20Packet%20Structure"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a> General Packet Structure</span>

   ISMP packets are of variable length and have the following general
   structure:

   -  Frame header
   -  ISMP packet header
   -  ISMP message body

   Each of these packet segments is discussed separately in the
   following subsections.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.1%20Frame%20Header"></a><a class="selflink" href="#section-6.1.1" name="section-6.1.1">6.1.1</a> Frame Header</span>

   ISMP packets are encapsulated within an IEEE 802-compliant frame
   using a standard header as shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +      Destination address      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   04 |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+        Source address         +
   08 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   12 |             Type              |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   16 |                                                               |
      +                                                               +
      :                                                               :


   Destination address

      This 6-octet field contains the Media Access Control (MAC) address
      of the multicast channel over which all switches in the fabric
      receive ISMP packets.  Except where otherwise noted, this field






<span class="grey">Ruffen, et al.               Informational                     [Page 32]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


      contains the multicast address of the control channel over which
      all switches in the fabric receive ISMP packets -- a value of 01-
      00-1D-00-00-00.

   Source address

      Except where otherwise noted, this 6-octet field contains the
      physical (MAC) address of the switch originating the ISMP packet.

   Type

      This 2-octet field identifies the type of data carried within the
      frame.  Except where otherwise noted, the type field of ISMP
      packets contains the value 0x81FD.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.2%20ISMP%20Packet%20Header"></a><a class="selflink" href="#section-6.1.2" name="section-6.1.2">6.1.2</a> ISMP Packet Header</span>

   There are two versions of the ISMP packet header in use by the
   SecureFast VLAN product.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.1.2.1%20Version%202"></a><a class="selflink" href="#section-6.1.2.1" name="section-6.1.2.1">6.1.2.1</a> Version 2</span>

   The version 2 ISMP packet header consists of 6 octets, as shown
   below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |///////////////////////////////////////////////////////////////|
      ://////// Frame header /////////////////////////////////////////:
      +//////// (14 octets)  /////////+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   12 |///////////////////////////////|            Version            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   16 |       ISMP message type       |        Sequence number        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |                                                               |
      +                                                               +
      :                                                               :

   Frame header

      This 14-octet field contains the frame header (<a href="#section-6.1.1">Section 6.1.1</a>).









<span class="grey">Ruffen, et al.               Informational                     [Page 33]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-34" id="page-34" name="page-34"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Version

      This 2-octet field contains the version number of the InterSwitch
      Message Protocol to which this ISMP packet adheres. This document
      describes ISMP Version 2.0.

   ISMP message type

      This 2-octet field contains a value indicating which type of ISMP
      message is contained within the message body.  The following table
      lists each ISMP message, along with its message type and the
      section within this document that describes the message in detail:

         Message Name                       Type    Description

         Interswitch Link State message        3    See note below
         Interswitch BPDU message              4    <a href="#section-6.2">Section 6.2</a>
         Interswitch Remote Blocking message   4    <a href="#section-6.3">Section 6.3</a>
         Interswitch Resolve message           5    <a href="#section-6.4">Section 6.4</a>
         Interswitch New User message          5    <a href="#section-6.5">Section 6.5</a>
         Interswitch Tag-Based Flood message   7    <a href="#section-6.6">Section 6.6</a>
         Interswitch Tap/Untap message         8    <a href="#section-6.7">Section 6.7</a>

      Note:

         The Link State messages used by the VLS Protocol are not
         described in this document.  For a detailed description of
         these messages, see [<a href="#ref-IDvlsp" title="&quot;Cabletron's VLS Protocol Specification&quot;">IDvlsp</a>].

   Sequence number

      This 2-octet field contains an internally generated sequence
      number used by the various protocol handlers for internal
      synchronization of messages.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.1.2.2%20Version%203"></a><a class="selflink" href="#section-6.1.2.2" name="section-6.1.2.2">6.1.2.2</a> Version 3</span>

   The version 3 ISMP packet header is used only by the Interswitch
   Keepalive message.  That message is not described in this document.
   For a detailed description of the version 3 ISMP packet header, see
   [<a href="#ref-IDhello" title="&quot;Cabletron's VlanHello Protocol Specification&quot;">IDhello</a>].










<span class="grey">Ruffen, et al.               Informational                     [Page 34]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-35" id="page-35" name="page-35"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.3%20ISMP%20Message%20Body"></a><a class="selflink" href="#section-6.1.3" name="section-6.1.3">6.1.3</a> ISMP Message Body</span>

   The ISMP message body is a variable-length field containing the
   actual data of the ISMP message.  The length and content of this
   field are determined by the value found in the message type field.

   See the following sections for the exact format of each message type.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2%20Interswitch%20BPDU%20Message"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a> Interswitch BPDU Message</span>

   The Interswitch BPDU message consists of a variable number of octets,
   as shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +                         Frame header /                        +
      :                   ISMP packet header (type 4)                 :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |            Version            |            Opcode             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   24 |          Message flags        |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   28 |                                                               |
      :                          BPDU packet                          :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Frame header/ISMP packet header

      This 20-octet field contains the frame header and the ISMP packet
      header.

   Version

      This 2-octet field contains the version number of the message
      type.  This document describes ISMP message type 4, version 1.











<span class="grey">Ruffen, et al.               Informational                     [Page 35]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-36" id="page-36" name="page-36"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Opcode

      This 2-octet field contains the operation type of the message. For
      an Interswitch BPDU message, the value should be 1.

   Message flags

      This 2-octet field is currently unused.  It is reserved for future
      use.

   BPDU packet

      This variable-length field contains an IEEE-compliant 802.2 Bridge
      Protocol Data Unit.  See [<a href="#ref-IEEE">IEEE</a>] for a detailed description of the
      contents of this field.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3%20Interswitch%20Remote%20Blocking%20Message"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a> Interswitch Remote Blocking Message</span>

   The Interswitch Remote Blocking message consists of 30 octets, as
   shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +                         Frame header /                        +
      :                   ISMP packet header (type 4)                 :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |            Version            |           Opcode              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   24 |          Message flags        |        Blocking flag ...      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   28 |       ... Blocking flag       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Frame header/ISMP packet header

      This 20-octet field contains the frame header and the ISMP packet
      header.

   Version

      This 2-octet field contains the version number of the message
      type.  This document describes ISMP message type 4, version 1.





<span class="grey">Ruffen, et al.               Informational                     [Page 36]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-37" id="page-37" name="page-37"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Opcode

      This 2-octet field contains the operation type of the message.
      Valid values are as follows:

         2   Enable/disable remote blocking
         3   Acknowledge previously received Remote Blocking message

   Message flags

         This 2-octet field is currently unused.  It is reserved for
         future use.

   Blocking flag

         This 4-octet field contains a flag indicating the state of
         remote blocking on the link over which the message was
         received.  A value of 1 indicates remote blocking is on and no
         undirected ISMP messages should be sent over the link.  A value
         of 0 indicates remote blocking is off.  This flag is irrelevant
         if the operation type (Opcode) of the message has a value of 3.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4%20Interswitch%20Resolve%20Message"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a> Interswitch Resolve Message</span>

   There are two versions of the Interswitch Resolve message used by the
   SecureFast VLAN product.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.1%20Prior%20to%20Version%201.8"></a><a class="selflink" href="#section-6.4.1" name="section-6.4.1">6.4.1</a> Prior to Version 1.8</span>

   The Interswitch Resolve message used by SFVLAN prior to version 1.8
   consists of a variable number of octets, as shown below:




















<span class="grey">Ruffen, et al.               Informational                     [Page 37]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-38" id="page-38" name="page-38"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    00 |                                                               |
       +                         Frame header /                        +
       :                   ISMP packet header (type 5)                 :
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    20 |           Version             |            Opcode             |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    24 |            Status             |           Call Tag            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    28 |                                                               |
       +     Source MAC of packet      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    32 |                               |                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+     Originating switch MAC    +
    36 |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    40 |                                                               |
       +       Owner switch MAC        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    44 |                               |                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
    48 |                                                               |
       :                   Known destination address                   :
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     n |     Count     |                                               |
       +-+-+-+-+-+-+-+-+                                               +
   n+4 |                         Resolve list                          |
       :                                                               :
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          n = 46 + length of known address TLV

   In the following description of the message fields, the term
   "originating" switch refers to the switch that issued the original
   Interswitch Resolve request.  The term "owner" switch refers to that
   switch to which the destination endstation is attached.  And the term
   "responding" switch refers to either the "owner" switch or to a
   switch at the end of the switch flood path that does not own the
   endstation but issues an Interswitch Resolve response because it has
   no downstream neighbors.








<span class="grey">Ruffen, et al.               Informational                     [Page 38]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-39" id="page-39" name="page-39"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   With the exception of the resolve list (which has a different size
   and format in a Resolve response message), all fields of an
   Interswitch Resolve message are allocated by the originating switch,
   and unless otherwise noted below, are written by the originating
   switch.

   Frame header/ISMP packet header

      This 20-octet field contains the frame header and the ISMP packet
      header.

   Version

      This 2-octet field contains the version number of the message
      type.  This document describes ISMP message type 5, version 1.

   Opcode

      This 2-octet field contains the operation code of the message.
      Valid values are as follows:

         1    The message is a Resolve request.
         2    The message is a Resolve response.
         3    (unused in Resolve messages)
         4    (unused in Resolve messages)

      The originating switch writes a value of 1 to this field, while
      the responding switch writes a value of 2.

   Status

      This 2-octet field contains the status of a Resolve response
      message.  Valid values are as follows:

         0    The Resolve request succeeded (ResolveAck).
         1    (unused)
         2    The Resolve request failed (Unknown).

      This field is written by the responding switch.

   Call tag

      This 2-octet field contains the call tag of the endstation packet
      for which this Resolve request is issued.  The call tag is a 16-
      bit value (generated by the originating switch) that uniquely
      identifies the packet.





<span class="grey">Ruffen, et al.               Informational                     [Page 39]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-40" id="page-40" name="page-40"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Source MAC of packet

      This 6-octet field contains the physical (MAC) address of the
      endstation that originated the packet identified by the call tag.

   Originating switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch that issued the original Resolve request.

   Owner switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch to which the destination endstation is attached -- that is,
      the switch that was able to resolve the requested addressing
      information.  This field is written by the owner switch.

      If the status of the response is Unknown, this field is
      irrelevant.

   Known destination address

      This variable-length field contains the known attribute of the
      destination endstation address.  This address is stored in
      Tag/Length/Value format.  (See <a href="#section-2.3">Section 2.3</a>.)

   Count

      This 1-octet field contains the number of address attributes
      requested or returned.  This is the number of items in the resolve
      list.

   Resolve list

      This variable-length field contains a list of the address
      attributes either requested by the originating switch or returned
      by the owner switch.  Note that in a Resolve request message, this
      list contains only the tags of the requested address attributes
      (see <a href="#section-2.3">Section 2.3</a>).  On the other hand, a Resolve response message
      with a status of ResolveAck contains the full TLV of each resolved
      address attribute.  The number of entries in the list is specified
      in the count field.

      In an Interswitch Resolve response message, this field is
      irrelevant if the status of the response is Unknown.






<span class="grey">Ruffen, et al.               Informational                     [Page 40]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-41" id="page-41" name="page-41"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.2%20Version%201.8"></a><a class="selflink" href="#section-6.4.2" name="section-6.4.2">6.4.2</a> Version 1.8</span>

   The Interswitch Resolve message used by SFVLAN version 1.8 consists
   of a variable number of octets, as shown below:















































<span class="grey">Ruffen, et al.               Informational                     [Page 41]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-42" id="page-42" name="page-42"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +                         Frame header /                        +
      :                   ISMP packet header (type 5)                 :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |           Version             |            Opcode             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   24 |            Status             |           Call Tag            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   28 |                                                               |
      +     Source MAC of packet      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   32 |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+     Originating switch MAC    +
   36 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   40 |                                                               |
      +       Owner switch MAC        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   44 |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   48 |                                                               |
      :                   Known destination address                   :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    n |     Count     |                                               |
      +-+-+-+-+-+-+-+-+                                               +
  n+4 |                         Resolve list                          |
      :                                                               :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   n1 |                                                               |
      +    Actual dest switch MAC     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+     Downlink chassis MAC      +
 n1+8 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
n1+12 |                                                               |
      +      Actual chassis MAC       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
n1+20 |                                                               |
      +                          Domain name                          +
      :                                                               :
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
           n = 46 + length of known address TLV
           n1 = n + length of Resolve list



<span class="grey">Ruffen, et al.               Informational                     [Page 42]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-43" id="page-43" name="page-43"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   In the following description of the message fields, the term
   "originating" switch refers to the switch that issued the original
   Interswitch Resolve request.  The term "owner" switch refers to that
   switch to which the destination endstation is attached.  And the term
   "responding" switch refers to either the "owner" switch or to a
   switch at the end of the switch flood path that does not own the
   endstation but issues an Interswitch Resolve response because it has
   no downstream neighbors.

   With the exception of the resolve list (which has a different size
   and format in a Resolve response message) and the four fields
   following the resolve list, all fields of an Interswitch Resolve
   message are allocated by the originating switch, and unless otherwise
   noted below, are written by the originating switch.

   Frame header/ISMP packet header

      This 20-octet field contains the frame header and the ISMP packet
      header.

   Version

      This 2-octet field contains the version number of the message
      type.  This section describes version 3 of the Interswitch Resolve
      message.

   Opcode

      This 2-octet field contains the operation code of the message.
      Valid values are as follows:

         1    The message is a Resolve request.
         2    The message is a Resolve response.
         3    (unused in Resolve messages)
         4    (unused in Resolve messages)

      The originating switch writes a value of 1 to this field, while
      the responding switch writes a value of 2.













<span class="grey">Ruffen, et al.               Informational                     [Page 43]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-44" id="page-44" name="page-44"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Status

      This 2-octet field contains the status of a Resolve response
      message.  Valid values are as follows:

         0    The Resolve request succeeded (ResolveAck).
         1    (unused)
         2    The Resolve request failed (Unknown).

      This field is written by the responding switch.

   Call tag

      This 2-octet field contains the call tag of the endstation packet
      for which this Resolve request is issued.  The call tag is a 16-
      bit value (generated by the originating switch) that uniquely
      identifies the packet.

   Source MAC of packet

      This 6-octet field contains the physical (MAC) address of the
      endstation that originated the packet identified by the call tag.

   Originating switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch that issued the original Resolve request.

   Owner switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch to which the destination endstation is attached -- that is,
      the switch that was able to resolve the requested addressing
      information.  This field is written by the owner switch.

      If the status of the response is Unknown, this field is
      irrelevant.

   Known destination address

      This variable-length field contains the known attribute of the
      destination endstation address.  This address is stored in
      Tag/Length/Value format.








<span class="grey">Ruffen, et al.               Informational                     [Page 44]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-45" id="page-45" name="page-45"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Count

      This 1-octet field contains the number of address attributes
      requested or returned.  This is the number of items in the resolve
      list.

   Resolve list

      This variable-length field contains a list of the address
      attributes either requested by the originating switch or returned
      by the owner switch.  Note that in a Resolve request message, this
      list contains only the tags of the requested address attributes.
      On the other hand, a Resolve response message with a status of
      ResolveAck contains the full TLV of each resolved address
      attribute.  The number of entries in the list is specified in the
      count field.

      In an Interswitch Resolve response message, this field is
      irrelevant if the status of the response is Unknown.

   Actual destination switch MAC

      This 6-octet field contains the physical (MAC) address of the
      actual switch within the chassis to which the endstation is
      attached.  If the status of the response is Unknown, this field is
      irrelevant.

   Downlink chassis MAC

      This 6-octet field contains the physical (MAC) address of the
      downlink chassis.  If the status of the response is Unknown, this
      field is irrelevant.

   Actual chassis MAC

      This 6-octet field contains the physical (MAC) address of the
      uplink chassis.  If the status of the response is Unknown, this
      field is irrelevant.

   Domain name

      This 16-octet field contains the ASCII name of the domain.  If the
      status of the response is Unknown, this field is irrelevant.








<span class="grey">Ruffen, et al.               Informational                     [Page 45]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-46" id="page-46" name="page-46"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.5%20Interswitch%20New%20User%20Message"></a><a class="selflink" href="#section-6.5" name="section-6.5">6.5</a> Interswitch New User Message</span>

   The Interswitch New User message consists of a variable number of
   octets, as shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +                         Frame header /                        +
      :                   ISMP packet header (type 5)                 :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |           Version             |            Opcode             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   24 |            Status             |           Call Tag            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   28 |                                                               |
      +     Source MAC of packet      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   32 |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+     Originating switch MAC    +
   36 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   40 |                                                               |
      +   Previous owner switch MAC   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   44 |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   48 |                                                               :
      :                    MAC address of new user                    +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   70 |     Count     |                                               |
      +-+-+-+-+-+-+-+-+                                               +
   74 |                          Resolve list                         |
      :                                                               :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   In the following description of the message fields, the term
   "originating" switch refers to the switch that issued the original
   Interswitch New User request.  The term "previous owner" switch
   refers to that switch to which the endstation was previously
   attached.  And the term "responding" switch refers to either the
   "previous owner" switch or to a switch at the end of the switch flood
   path that did not own the endstation but issues an Interswitch New
   User response because it has no downstream neighbors.





<span class="grey">Ruffen, et al.               Informational                     [Page 46]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-47" id="page-47" name="page-47"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   With the exception of the resolve list, all fields of an Interswitch
   New User message are allocated by the originating switch, and unless
   otherwise noted below, are written by the originating switch.

   Frame header/ISMP packet header

      This 20-octet field contains the frame header and the ISMP packet
      header.

   Version

      This 2-octet field contains the version number of the message
      type.  This document describes ISMP message type 5, version 1.

   Opcode

      This 2-octet field contains the operation code of the message.
      Valid values are as follows:

         1    (unused in a New User message)
         2    (unused in a New User message)
         3    The message is a New User request.
         4    The message is a New User response.

      The originating switch writes a value of 3 to this field, while
      the responding switch writes a value of 4.

   Status

      This 2-octet field contains the status of a New User response
      message.  Valid values are as follows:

         0    VLAN resolution successful (NewUserAck)
         1    (unused)
         2    VLAN resolution unsuccessful (NewUserUnknown)

      This field is written by the responding switch.

   Call tag

      This 2-octet field contains the call tag of the endstation packet
      for which this New User request is issued.  The call tag is a 16-
      bit value (generated by the originating switch) that uniquely
      identifies the packet that caused the switch to identify the
      endstation as a new user.






<span class="grey">Ruffen, et al.               Informational                     [Page 47]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-48" id="page-48" name="page-48"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Source MAC of packet

      This 6-octet field contains the physical (MAC) address of the
      endstation that originated the packet identified by the call tag.

   Originating switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch that issued the original New User request.

   Previous owner switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch to which the endstation was previously attached -- that is,
      the switch that was able to resolve the VLAN information. This
      field is written by the previous owner switch.

      If the status of the response is Unknown, this field is
      irrelevant.

   MAC address of new user

      This 24-octet field contains the physical (MAC) address of the new
      user endstation, stored in Tag/Length/Value format.

   Count

      This 1-octet field contains the number of VLAN identifiers
      returned.  This is the number of items in the resolve list. This
      field is written by the previous owner switch.

      If the status of the response is Unknown, this field and the
      resolve list are irrelevant.

   Resolve list

      This variable-length field contains a list of the VLAN identifiers
      of all static VLANs to which the endstation belongs, stored in
      Tag/Length/Value format (see <a href="#section-2.3">Section 2.3</a>). The number of entries
      in the list is specified in the count field.  This list is written
      by the previous owner switch.

      If the status of the response is Unknown, this field is
      irrelevant.







<span class="grey">Ruffen, et al.               Informational                     [Page 48]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-49" id="page-49" name="page-49"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.6%20Interswitch%20Tag-Based%20Flood%20Message"></a><a class="selflink" href="#section-6.6" name="section-6.6">6.6</a> Interswitch Tag-Based Flood Message</span>

   There are two versions of the Interswitch Tag-Based Flood message
   used by the SecureFast VLAN product.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.6.1%20Prior%20to%20Version%201.8"></a><a class="selflink" href="#section-6.6.1" name="section-6.6.1">6.6.1</a> Prior to Version 1.8</span>

   The Interswitch Tag-Based Flood message used by SFVLAN prior to
   version 1.8 consists of a variable number of octets, as shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +                         Frame header /                        +
      :                   ISMP packet header (type 7)                 :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |           Version             |            Opcode             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   24 |            Status             |           Call Tag            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   28 |                                                               |
      +     Source MAC of packet      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   32 |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+     Originating switch MAC    +
   36 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   40 |     Count     |                                               |
      +-+-+-+-+-+-+-+-+                                               +
   44 |                           VLAN list                           |
      :                                                               :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    n |                                                               |
      +                                                               +
      :                        Original packet                        :
      +                                                               +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

         n = 41 + length of VLAN list









<span class="grey">Ruffen, et al.               Informational                     [Page 49]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-50" id="page-50" name="page-50"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Frame header/ISMP packet header

      This 20-octet field contains the frame header and the ISMP packet
      header.

   Version

      This 2-octet field contains the version number of the message
      type.  This document describes ISMP message type 7, version 1.

   Opcode

      This 2-octet field contains the operation code of the message. The
      value here should be 1, indicating the message is a flood request.

   Status

      This 2-octet field is currently unused.  It is reserved for future
      use.

   Call tag

      This 2-octet field contains the call tag of the endstation packet
      encapsulated within this tag-based flood message.  The call tag is
      a 16-bit value (generated by the originating switch) that uniquely
      identifies the packet.

   Source MAC of packet

      This 6-octet field contains the physical (MAC) address of the
      endstation that originated the packet identified by the call tag.

   Originating switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch that issued the original tag-based flooded message.

   Count

      This 1-octet field contains the number of VLAN identifiers
      included in the VLAN list.

   VLAN list

      This variable-length field contains a list of the VLAN identifiers
      of all VLANs to which the source endstation belongs.  Each entry
      in this list has the following format:




<span class="grey">Ruffen, et al.               Informational                     [Page 50]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-51" id="page-51" name="page-51"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Value length  |                                               |
      +-+-+-+-+-+-+-+-+                                               +
      |                        VLAN identifier value                  |
      :                                                               :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      The 1-octet value length field contains the length of the VLAN
      identifier.  VLAN identifiers can be from 1 to 16 characters long.

   Original packet

      This variable-length field contains the original packet as sent by
      the source endstation.


































<span class="grey">Ruffen, et al.               Informational                     [Page 51]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-52" id="page-52" name="page-52"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.6.2%20Version%201.8"></a><a class="selflink" href="#section-6.6.2" name="section-6.6.2">6.6.2</a> Version 1.8</span>

   The Interswitch Tag-Based Flood message used by SFVLAN version 1.8
   consists of a variable number of octets, as shown below:

      Note:

         SFVLAN version 1.8 also recognizes the Interswitch Tag-Based
         Flood message as described in <a href="#section-6.6.1">Section 6.6.1</a>.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +                         Frame header /                        +
      :                   ISMP packet header (type 7)                 :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |       VLAN identifier         |           Version             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   24 |           Opcode              |            Status             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   28 |          Call tag             |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+     Source MAC of packet      +
   32 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   36 |                                                               |
      +    Originating switch MAC     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   40 |                               |     Count     |               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
   44 |                                                               |
      :                           VLAN list                           :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    n |                                                               |
      +                                                               +
      :                        Original packet                        :
      +                                                               +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

            n = 41 + length of VLAN list


   Frame header/ISMP packet header

      This 20-octet field contains the frame header and the ISMP packet
      header.



<span class="grey">Ruffen, et al.               Informational                     [Page 52]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-53" id="page-53" name="page-53"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


      -  The frame header source address contains a value of 02-00-1D-
         00-xx-yy, where xx-yy is a value set by the VLAN Manager
         application to tag the frame header with the VLAN identifier.
         This value ranges from 2 to 4095.  For example, a value of 100
         would be set as 00-64.

      -  The frame header type field contains a value of 0x81FF.  Note
         that this differs from all other ISMP messages.

   VLAN identifier

      This 2-octet field contains the VLAN identifier of the packet
      source.

   Version

      This 2-octet field contains the version number of the message
      type.  This section describes version 2 of the Interswitch Tag-
      Based Flood message.

   Opcode

      This 2-octet field contains the operation code of the message.
      Valid values here are as follows:

      1  The message is a flood request.  The original packet is
         complete within this message.

      2  The message is a fragmented flood request.  The first portion
         of the original packet is contained in this message.

      3  The message is a fragmented flood request.  The second portion
         of the original packet is contained in this message.

   Status

      This 2-octet field is currently unused.  It is reserved for future
      use.

   Call tag

      This 2-octet field contains the call tag of the endstation packet
      encapsulated within this tag-based flood message.  The call tag is
      a 16-bit value (generated by the originating switch) that uniquely
      identifies the packet.






<span class="grey">Ruffen, et al.               Informational                     [Page 53]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-54" id="page-54" name="page-54"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Source MAC of packet

      This 6-octet field contains the physical (MAC) address of the
      endstation that originated the packet identified by the call tag.

   Originating switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch that issued the original tag-based flooded message.

   Count

      This 1-octet field contains the number of VLAN identifiers
      included in the VLAN list.

   VLAN list

      This variable-length field contains a list of the VLAN identifiers
      of all VLANs to which the source endstation belongs.  Each entry
      in this list has the following format:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Value length  |                                               |
      +-+-+-+-+-+-+-+-+                                               +
      |                        VLAN identifier value                  |
      :                                                               :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      The 1-octet value length field contains the length of the VLAN
      identifier.  VLAN identifiers can be from 1 to 16 characters long.

   Original packet

      This variable-length field contains the original packet as sent by
      the source endstation.













<span class="grey">Ruffen, et al.               Informational                     [Page 54]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-55" id="page-55" name="page-55"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.7%20Interswitch%20Tap%2FUntap%20Message"></a><a class="selflink" href="#section-6.7" name="section-6.7">6.7</a> Interswitch Tap/Untap Message</span>

   The Interswitch Tap/Untap message consists of a variable number of
   octets, as shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   00 |                                                               |
      +                         Frame header /                        +
      :                   ISMP packet header (type 8)                 :
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   20 |            Version            |            Opcode             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   24 |             Status            |          Error code           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   28 |           Header type         |         Header length         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   32 |            Direction          |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+       Probe switch MAC        +
   36 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   40 |                           Probe port                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   44 |                                                               |
      +                                                               +
   48 |                           (Reserved)                          |
      +                                                               +
   52 |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   56 |                                                               |
      +                                                               +
      |                             Header                            |
      +                                                               +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Frame header/ISMP packet header

      This 20-octet field contains the frame header and the ISMP packet
      header.

   Version

      This 2-octet field contains the version number of the message
      type.  This document describes ISMP message type 8, version 1.



<span class="grey">Ruffen, et al.               Informational                     [Page 55]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-56" id="page-56" name="page-56"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Opcode

      tet field contains the operation type of the message. ues are as
      follows:

         1  The message is a Tap request.
         2  The message is a Tap response.
         3  The message is an Untap request.
         4  The message is an Untap response.

   Status

      This 2-octet field contains the current status of the tap request.
      Valid values are as follows:

         1  Switch must disable outport on untap. (DisableOutport)
         2  Switch must keep outports on untap. (KeepOutport)
         3  Probe not found this leg of spanning tree. (ProbeNotFound)
         4  Still searching for probe switch. (OutportDecisionUnknown)
         5  Unassigned. (StatusUnassigned)
         6  (reserved)
         7  (reserved)
         8  (reserved)
         9  (reserved)

      See <a href="#section-5.2.3">Section 5.2.3</a> for details on the use of this field.

   Error code

      This 2-octet field contains the response message error code of the
      requested operation.  Valid values are as follows:

         1  Operation successful. (NoError)
         2  No response heard from downstream neighbor. (Timeout)
         3  Port does not exist on probe switch. (BadPort)
         4  Message invalid. (InvalidMessage)
         5  Version number invalid. (IncompatibleVersions)

   Header type

      This 2-octet field contains the type of information contained in
      the header field.  Currently, valid values are as follows:

      1  (reserved) 2  Header contains destination and source endstation
         MAC addresses.






<span class="grey">Ruffen, et al.               Informational                     [Page 56]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-57" id="page-57" name="page-57"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


   Header length

      This 2-octet field contains the length of the header field.
      Currently, this field always contains a value of 12.

   Direction

      This 2-octet field contains a value indicating the type of tap.
      Valid values are as follows:

      1  (reserved)
      2  Tap is bi-directional and data should be captured flowing in
         either direction over the connection.
      3  Tap is uni-directional and data should be captured only when it
         flows from the source to the destination.

   Probe switch MAC

      This 6-octet field contains the physical (MAC) address of the
      switch to which the probe is attached.

   Probe port

      This 4-octet field contains the logical port number (on the probe
      switch) to which the probe is attached.

   Reserved

      These 12 octets are reserved.

   Header

      This variable-length field contains the header that identifies the
      connection being tapped.  The length of the header is stored in
      the length field.

      Currently, this field is 12 octets long and contains the 6-octet
      physical address of the connection's destination endstation,
      followed by the 6-octet physical address of the connection's
      source endstation, as shown below:











<span class="grey">Ruffen, et al.               Informational                     [Page 57]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-58" id="page-58" name="page-58"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +    Destination MAC address    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                               |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+      Source MAC address       +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>. Security Considerations</span>

   Requested call connections are established or denied based on the
   VLAN policy of the source and destination addresses specified within
   the packet.  <a href="#section-4.4.1">Section 4.4.1</a> discusses this process in detail.


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>. References</span>

   [<a id="ref-RFC1700" name="ref-RFC1700">RFC1700</a>]   Reynolds, J. and J. Postel, "Assigned Numbers", STD 2,
               <a href="rfc1700.html">RFC 1700</a>, October 1994.

   [<a id="ref-IEEE" name="ref-IEEE">IEEE</a>]      "IEEE Standard 802.1d -- 1990"

   [<a id="ref-IDvlsp" name="ref-IDvlsp">IDvlsp</a>]    Kane, L., "Cabletron's VLS Protocol Specification", <a href="rfc2642.html">RFC</a>
               <a href="rfc2642.html">2642</a>, August 1999.

   [<a id="ref-IDhello" name="ref-IDhello">IDhello</a>]   Hamilton, D. and D. Ruffen, "Cabletron's VlanHello
               Protocol Specification", <a href="rfc2641.html">RFC 2641</a>, August 1999.





















<span class="grey">Ruffen, et al.               Informational                     [Page 58]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-59" id="page-59" name="page-59"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20Authors%27%20Addresses"></a><a class="selflink" href="#section-9" name="section-9">9</a>. Authors' Addresses</span>

   Dave Ruffen
   Cabletron Systems, Inc.
   Post Office Box 5005
   Rochester, NH  03866-5005

   Phone: (603) 332-9400
   EMail: ruffen@ctron.com


   Ted Len
   Cabletron Systems, Inc.
   Post Office Box 5005
   Rochester, NH  03866-5005

   Phone: (603) 332-9400
   EMail:  len@ctron.com


   Judy Yanacek
   Cabletron Systems, Inc.
   Post Office Box 5005
   Rochester, NH  03866-5005

   Phone: (603) 332-9400
   EMail:  jyanacek@ctron.com
























<span class="grey">Ruffen, et al.               Informational                     [Page 59]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-60" id="page-60" name="page-60"> </a>
<span class="grey"><a href="rfc2643.html">RFC 2643</a>     Cabletron's SecureFast VLAN Operational Model   August 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Ruffen, et al.               Informational                     [Page 60]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>


<meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

</body><!-- Mirrored from tools.ietf.org/html/rfc2643 by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 19 Mar 2014 18:46:00 GMT --><!-- Added by HTTrack --></html>