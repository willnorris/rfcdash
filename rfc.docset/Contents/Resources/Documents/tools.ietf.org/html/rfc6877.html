<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.107" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Relation.Replaces" content="draft-mawatari-v6ops-464xlat" />
<meta name="DC.Identifier" content="urn:ietf:rfc:6877" />
<meta name="DC.Date.Issued" content="April, 2013" />
<meta name="DC.Creator" content="Mawatari, Masataka" />
<meta name="DC.Creator" content="Byrne, Cameron" />
<meta name="DC.Creator" content="Kawashima, Masanobu" />
<meta name="DC.Description.Abstract" content="This document describes an architecture (464XLAT) for providing\nlimited IPv4 connectivity across an IPv6-only network by combining\nexisting and well-known stateful protocol translation (as described in\nRFC 6146) in the core and stateless protocol translation (as described\nin RFC 6145) at the edge. 464XLAT is a simple and scalable technique\nto quickly deploy limited IPv4 access service to IPv6-only edge\nnetworks without encapsulation." />
<meta name="DC.Title" content="464XLAT: Combination of Stateful and Stateless Translation" />

    <link rel="icon" href="http://tools.ietf.org/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="http://tools.ietf.org/images/rfc.png" type="image/png" />
    <title>RFC 6877 - 464XLAT: Combination of Stateful and Stateless Translation</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgorange"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc6877.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc6877" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-ietf-v6ops-464xlat" title="draft-ietf-v6ops-464xlat">draft-ietf-v6ops-...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6877" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc6877" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?option=rfc_search&amp;rfc_search=6877" title="IPR disclosures related to this document">IPR</a>]           </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Internet Engineering Task Force (IETF)                       M. Mawatari
Request for Comments: 6877                       Japan Internet Exchange
Category: Informational                                     M. Kawashima
ISSN: 2070-1721                                 NEC AccessTechnica, Ltd.
                                                                C. Byrne
                                                            T-Mobile USA
                                                              April 2013


       464XLAT: Combination of Stateful and Stateless Translation

Abstract

   This document describes an architecture (464XLAT) for providing
   limited IPv4 connectivity across an IPv6-only network by combining
   existing and well-known stateful protocol translation (as described
   in <a href="rfc6146.html">RFC 6146</a>) in the core and stateless protocol translation (as
   described in <a href="rfc6145.html">RFC 6145</a>) at the edge. 464XLAT is a simple and scalable
   technique to quickly deploy limited IPv4 access service to IPv6-only
   edge networks without encapsulation.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6877">http://www.rfc-editor.org/info/rfc6877</a>.















<span class="grey">Mawatari, et al.              Informational                     [Page 1]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="http://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in <a href="#section-4">Section 4</a>.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-3">3</a>.  Motivation and Uniqueness of 464XLAT . . . . . . . . . . . . .  <a href="#page-4">4</a>
   <a href="#section-4">4</a>.  Network Architecture . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-4.1">4.1</a>.  Wireline Network Architecture  . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-4.2">4.2</a>.  Wireless 3GPP Network Architecture . . . . . . . . . . . .  <a href="#page-5">5</a>
   <a href="#section-5">5</a>.  Applicability  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-5.1">5.1</a>.  Wireline Network Applicability . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-5.2">5.2</a>.  Wireless 3GPP Network Applicability  . . . . . . . . . . .  <a href="#page-7">7</a>
   <a href="#section-6">6</a>.  Implementation Considerations  . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-6.1">6.1</a>.  IPv6 Address Format  . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-6.2">6.2</a>.  IPv4/IPv6 Address Translation Chart  . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-6.3">6.3</a>.  IPv6 Prefix Handling . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-6.4">6.4</a>.  DNS Proxy Implementation . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-6.5">6.5</a>.  CLAT in a Gateway  . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-6.6">6.6</a>.  CLAT-to-CLAT Communications  . . . . . . . . . . . . . . . <a href="#page-10">10</a>
   <a href="#section-7">7</a>.  Deployment Considerations  . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-7.1">7.1</a>.  Traffic Engineering  . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-7.2">7.2</a>.  Traffic Treatment Scenarios  . . . . . . . . . . . . . . . <a href="#page-10">10</a>
   <a href="#section-8">8</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-9">9</a>.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-10">10</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-10.1">10.1</a>. Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-10.2">10.2</a>. Informative References . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#appendix-A">Appendix A</a>.  Examples of IPv4/IPv6 Address Translation . . . . . . <a href="#page-13">13</a>









<span class="grey">Mawatari, et al.              Informational                     [Page 2]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>.  Introduction</span>

   With the exhaustion of the unallocated IPv4 address pools, it will be
   difficult for many networks to assign IPv4 addresses to end users.

   This document describes an IPv4-over-IPv6 solution as one of the
   techniques for IPv4 service extension and encouragement of IPv6
   deployment. 464XLAT is not a one-for-one replacement of full IPv4
   functionality.  The 464XLAT architecture only supports IPv4 in the
   client-server model, where the server has a global IPv4 address.
   This means it is not fit for IPv4 peer-to-peer communication or
   inbound IPv4 connections. 464XLAT builds on IPv6 transport and
   includes full any-to-any IPv6 communication.

   The 464XLAT architecture described in this document uses IPv4/IPv6
   translation standardized in [<a href="rfc6145.html" title="&quot;IP/ICMP Translation Algorithm&quot;">RFC6145</a>] and [<a href="rfc6146.html" title="&quot;Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6146</a>].  It does not
   require DNS64 [<a href="rfc6147.html" title="&quot;DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6147</a>] since an IPv4 host may simply send IPv4
   packets, including packets to an IPv4 DNS server, that will be
   translated to IPv6 on the customer-side translator (CLAT) and back to
   IPv4 on the provider-side translator (PLAT).  464XLAT networks may
   use DNS64 [<a href="rfc6147.html" title="&quot;DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6147</a>] to enable single stateful translation [<a href="rfc6146.html" title="&quot;Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6146</a>]
   instead of 464XLAT double translation where possible.  The 464XLAT
   architecture encourages the IPv6 transition by making IPv4 services
   reachable across IPv6-only networks and providing IPv6 and IPv4
   connectivity to single-stack IPv4 or IPv6 servers and peers.

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>.  Terminology</span>

   PLAT:   PLAT is provider-side translator (XLAT) that complies with
           [<a href="rfc6146.html" title="&quot;Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6146</a>].  It translates N:1 global IPv6 addresses to global
           IPv4 addresses, and vice versa.

   CLAT:   CLAT is customer-side translator (XLAT) that complies with
           [<a href="rfc6145.html" title="&quot;IP/ICMP Translation Algorithm&quot;">RFC6145</a>].  It algorithmically translates 1:1 private IPv4
           addresses to global IPv6 addresses, and vice versa.  The CLAT
           function is applicable to a router or an end-node such as a
           mobile phone.  The CLAT should perform IP routing and
           forwarding to facilitate packets forwarding through the
           stateless translation even if it is an end-node.  The CLAT as
           a common home router or wireless Third Generation Partnership
           Project (3GPP) router is expected to perform gateway
           functions such as being a DHCP server and DNS proxy for local
           clients.  The CLAT uses different IPv6 prefixes for CLAT-side
           and PLAT-side IPv4 addresses and therefore does not comply
           with the sentence "Both IPv4-translatable IPv6 addresses and
           IPv4-converted IPv6 addresses SHOULD use the same prefix." in





<span class="grey">Mawatari, et al.              Informational                     [Page 3]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


           <a href="rfc6052.html#section-3.3">Section&nbsp;3.3 of [RFC6052]</a>.  The CLAT does not facilitate
           communications between a local IPv4-only node and an IPv6-
           only node on the Internet.

<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>.  Motivation and Uniqueness of 464XLAT</span>

   The list below describes the motivation for 464XLAT and its unique
   characteristics.

   o  464XLAT has minimal IPv4 resource requirements and maximum IPv4
      efficiency through statistical multiplexing.

   o  No new protocols are required; there is quick deployment.

   o  IPv6-only networks are simpler and therefore less expensive to
      operate than dual-stack networks.

   o  464XLAT has consistent native IP-based monitoring and traffic
      engineering.  Capacity-planning techniques can be applied without
      the indirection or obfuscation of a tunnel.

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>.  Network Architecture</span>

   Examples of 464XLAT architectures are shown in the figures in the
   following sections.

   Wireline Network Architecture can be used in situations where there
   are clients behind the CLAT, regardless of the type of access service
   -- for example, fiber to the home (FTTH), Data Over Cable Service
   Interface Specification (DOCSIS), or WiFi.

   Wireless 3GPP Network Architecture can be used in situations where a
   client terminates the wireless access network and possibly acts as a
   router with tethered clients.

<span class="h3"><a class="selflink" name="section-4.1" href="#section-4.1">4.1</a>.  Wireline Network Architecture</span>

   The private IPv4 host in this diagram can reach global IPv4 hosts via
   translation on both the CLAT and PLAT.  On the other hand, the IPv6
   host can reach other IPv6 hosts on the Internet directly without
   translation.  This means that the Customer Premises Equipment (CPE) /
   CLAT can not only have the function of a CLAT but also the function
   of an IPv6 native router for native IPv6 traffic.  In this diagram,
   the v4p host behind the CLAT has [<a href="rfc1918.html" title="&quot;Address Allocation for Private Internets&quot;">RFC1918</a>] addresses.







<span class="grey">Mawatari, et al.              Informational                     [Page 4]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


                                 +------+
                                 |  v6  |
                                 | host |
                                 +--+---+
                                    |
                                .---+---.
                               /         \
                              /   IPv6    \
                             |  Internet   |
                              \           /
                               `----+----'
                                    |
   +------+   |                 .---+---.                    .------.
   |  v6  +---+   +------+     /         \     +------+     /        \
   | host |   |   |      |    /   IPv6    \    |      |    /   IPv4   \
   +------+   +---+ CLAT +---+   Network   +---+ PLAT +---+  Internet  |
   +--------+ |   |      |    \           /    |      |    \           /
   | v4p/v6 +-+   +------+     `---------'     +------+     `----+----'
   |  host  | |                                                  |
   +--------+ |                                               +--+---+
   +------+   |                                               | v4g  |
   | v4p  +---+                                               | host |
   | host |   |                                               +------+
   +------+   |

          &lt;- v4p -&gt; XLAT &lt;--------- v6 --------&gt; XLAT &lt;- v4g -&gt;

     v6  : Global IPv6
     v4p : Private IPv4
     v4g : Global IPv4

                    Figure 1: Wireline Network Topology

<span class="h3"><a class="selflink" name="section-4.2" href="#section-4.2">4.2</a>.  Wireless 3GPP Network Architecture</span>

   The CLAT function on the User Equipment (UE) provides an [<a href="rfc1918.html" title="&quot;Address Allocation for Private Internets&quot;">RFC1918</a>]
   address and IPv4 default route to the local node's network stack.
   The applications on the UE can use the private IPv4 address for
   reaching global IPv4 hosts via translation on both the CLAT and the
   PLAT.  On the other hand, reaching IPv6 hosts (including hosts
   presented via DNS64 [<a href="rfc6147.html" title="&quot;DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6147</a>]) does not require the CLAT function on
   the UE.

   Presenting a private IPv4 network for tethering via NAT44 and
   stateless translation on the UE is also an application of the CLAT.






<span class="grey">Mawatari, et al.              Informational                     [Page 5]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-6" id="page-6" href="#page-6" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


                                  +------+
                                  |  v6  |
                                  | host |
                                  +--+---+
                                     |
                                 .---+---.
                                /         \
                               /   IPv6    \
                              |   Internet  |
                               \           /
      UE / Mobile Phone         `---------'
   +----------------------+          |
   | +----+    |          |      .---+---.                   .------.
   | | v6 +----+   +------+     /         \     +------+    /        \
   | +----+    |   |      |    / IPv6 PDP  \    |      |   /   IPv4   \
   |           +---+ CLAT +---+ Mobile Core +---+ PLAT +--+  Internet  |
   |           |   |      |    \    GGSN   /    |      |   \          /
   |           |   +------+     \         '     +------+    `----+---'
   | +-----+   |          |      `-------'                       |
   | | v4p +---+          |                                   +--+---+
   | +-----+   |          |                                   | v4g  |
   +----------------------+                                   | host |
                                                              +------+

           &lt;- v4p -&gt; XLAT &lt;--------- v6 --------&gt; XLAT &lt;- v4g -&gt;

     v6   : Global IPv6
     v4p  : Private IPv4
     v4g  : Global IPv4
     PDP  : Packet Data Protocol
     GGSN : Gateway GPRS Support Node

                 Figure 2: Wireless 3GPP Network Topology

<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>.  Applicability</span>

<span class="h3"><a class="selflink" name="section-5.1" href="#section-5.1">5.1</a>.  Wireline Network Applicability</span>

   When an Internet Service Provider (ISP) has IPv6 access service and
   provides 464XLAT, the ISP can provide outgoing IPv4 service to end
   users across an IPv6 access network.  The result is that edge network
   growth is no longer tightly coupled to the availability of scarce
   IPv4 addresses.

   If another ISP operates the PLAT, the edge ISP is only required to
   deploy an IPv6 access network.  All ISPs do not need IPv4 access
   networks.  They can migrate their access network to a simple and
   highly scalable IPv6-only environment.



<span class="grey">Mawatari, et al.              Informational                     [Page 6]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-7" id="page-7" href="#page-7" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


<span class="h3"><a class="selflink" name="section-5.2" href="#section-5.2">5.2</a>.  Wireless 3GPP Network Applicability</span>

   At the time of writing, in April 2013, the vast majority of mobile
   networks are compliant to Pre-Release 9 3GPP standards.  In Pre-
   Release 9 3GPP networks, Global System for Mobile Communications
   (GSM) and Universal Mobile Telecommunications System (UMTS) networks
   must signal and support both IPv4 and IPv6 Packet Data Protocol (PDP)
   attachments to access IPv4 and IPv6 network destinations [<a href="rfc6459.html" title="&quot;IPv6 in 3rd Generation Partnership Project (3GPP) Evolved Packet System (EPS)&quot;">RFC6459</a>].
   Since there are two PDPs required to support two address families,
   this is double the number of PDPs required to support the status quo
   of one address family, which is IPv4.

   For the cases of connecting to an IPv4 literal or IPv4 socket that
   require IPv4 connectivity, the CLAT function on the UE provides a
   private IPv4 address and IPv4 default route on the host for the
   applications to reference and bind to.  Connections sourced from the
   IPv4 interface are immediately routed to the CLAT function and passed
   to the IPv6-only mobile network, destined for the PLAT.  In summary,
   the UE performs the CLAT function that does a stateless translation
   [<a href="rfc6145.html" title="&quot;IP/ICMP Translation Algorithm&quot;">RFC6145</a>], but only when required by an IPv4-only scenario such as
   IPv4 literals or IPv4-only sockets.  The mobile network has a PLAT
   that does stateful translation [<a href="rfc6146.html" title="&quot;Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers&quot;">RFC6146</a>].

   464XLAT works with today's existing systems as much as possible.
   464XLAT is compatible with existing solutions for network-based deep
   packet inspection like 3GPP standardized Policy and Charging Control
   (PCC) [<a href="#ref-TS.23203" title="&quot;Policy and charging control architecture&quot;">TS.23203</a>].

<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>.  Implementation Considerations</span>

<span class="h3"><a class="selflink" name="section-6.1" href="#section-6.1">6.1</a>.  IPv6 Address Format</span>

   The IPv6 address format in 464XLAT is defined in <a href="rfc6052.html#section-2.2">Section&nbsp;2.2 of
   [RFC6052]</a>.

<span class="h3"><a class="selflink" name="section-6.2" href="#section-6.2">6.2</a>.  IPv4/IPv6 Address Translation Chart</span>

   This chart offers an explanation about address translation
   architecture using a combination of stateful translation at the PLAT
   and stateless translation at the CLAT.  The client on this chart is
   delegated an IPv6 prefix from a prefix delegation mechanism such as
   DHCPv6 Prefix Delegation (DHCPv6-PD) [<a href="rfc3633.html" title="&quot;IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6&quot;">RFC3633</a>]; therefore, it has a
   dedicated IPv6 prefix for translation.








<span class="grey">Mawatari, et al.              Informational                     [Page 7]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-8" id="page-8" href="#page-8" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


                                           Destination IPv4 address
                                          +----------------------------+
                                          | Global IPv4 address        |
                                          | assigned to IPv4 server    |
                               +--------+ +----------------------------+
                               |  IPv4  |  Source IPv4 address
                               | server | +----------------------------+
                               +--------+ | Global IPv4 address        |
                                   ^      | assigned to IPv4 PLAT pool |
                                   |      +----------------------------+
                               +--------+
                               |  PLAT  | Stateful XLATE(IPv4:IPv6=1:n)
                               +--------+
                                   ^
                                   |
                              (IPv6 cloud)
         Destination IPv6 address
        +--------------------------------------------------------------+
        | IPv4-embedded IPv6 address                                   |
        | defined in <a href="rfc6052.html#section-2.2">Section&nbsp;2.2 of RFC 6052</a>                           |
        +--------------------------------------------------------------+
         Source IPv6 address
        +--------------------------------------------------------------+
        | IPv4-embedded IPv6 address                                   |
        | defined in <a href="rfc6052.html#section-2.2">Section&nbsp;2.2 of RFC 6052</a>                           |
        +--------------------------------------------------------------+
                              (IPv6 cloud)
                                   ^
                                   |
                               +--------+
                               |  CLAT  | Stateless XLATE(IPv4:IPv6=1:1)
                               +--------+
                                   ^       Destination IPv4 address
                                   |      +----------------------------+
                               +--------+ | Global IPv4 address        |
                               |  IPv4  | | assigned to IPv4 server    |
                               | client | +----------------------------+
                               +--------+  Source IPv4 address
                                          +----------------------------+
                                          | Private IPv4 address       |
                                          | assigned to IPv4 client    |
                                          +----------------------------+

          Figure 3: Case of Enabling Only Stateless XLATE on CLAT







<span class="grey">Mawatari, et al.              Informational                     [Page 8]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-9" id="page-9" href="#page-9" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


<span class="h3"><a class="selflink" name="section-6.3" href="#section-6.3">6.3</a>.  IPv6 Prefix Handling</span>

   There are two relevant IPv6 prefixes that the CLAT must be aware of.

   First, CLAT must know its own IPv6 prefixes.  The CLAT should acquire
   a /64 for the uplink interface, a /64 for all downlink interfaces,
   and a dedicated /64 prefix for the purpose of sending and receiving
   statelessly translated packets.  When a dedicated /64 prefix is not
   available for translation from DHCPv6-PD [<a href="rfc3633.html" title="&quot;IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6&quot;">RFC3633</a>], the CLAT may
   perform NAT44 for all IPv4 LAN packets so that all the LAN-originated
   IPv4 packets appear from a single IPv4 address and are then
   statelessly translated to one interface IPv6 address that is claimed
   by the CLAT via the Neighbor Discovery Protocol (NDP) and defended
   with Duplicate Address Detection (DAD).

   Second, the CLAT must discover the PLAT-side translation IPv6 prefix
   used as a destination of the PLAT.  The CLAT will use this prefix as
   the destination of all translation packets that require stateful
   translation to the IPv4 Internet.  It may discover the PLAT-side
   translation prefix using [<a href="#ref-Discovery-Heuristic">Discovery-Heuristic</a>].  In the future, some
   other mechanisms, such as a new DHCPv6 option, will possibly be
   defined to communicate the PLAT-side translation prefix.

<span class="h3"><a class="selflink" name="section-6.4" href="#section-6.4">6.4</a>.  DNS Proxy Implementation</span>

   The CLAT should implement a DNS proxy as defined in [<a href="rfc5625.html" title="&quot;DNS Proxy Implementation Guidelines&quot;">RFC5625</a>].  The
   case of an IPv4-only node behind the CLAT querying an IPv4 DNS server
   is undesirable since it requires both stateful and stateless
   translation for each DNS lookup.  The CLAT should set itself as the
   DNS server via DHCP or other means and should proxy DNS queries for
   IPv4 and IPv6 LAN clients.  Using the CLAT-enabled home router or UE
   as a DNS proxy is a normal consumer gateway function and simplifies
   the traffic flow so that only IPv6 native queries are made across the
   access network.  DNS queries from the client that are not sent to the
   DNS proxy on the CLAT must be allowed and are translated and
   forwarded just like any other IP traffic.

<span class="h3"><a class="selflink" name="section-6.5" href="#section-6.5">6.5</a>.  CLAT in a Gateway</span>

   The CLAT feature can be implemented in a common home router or mobile
   phone that has a tethering feature.  Routers with a CLAT feature
   should also provide common router services such as DHCP of [<a href="rfc1918.html" title="&quot;Address Allocation for Private Internets&quot;">RFC1918</a>]
   addresses, DHCPv6, NDP with Router Advertisement, and DNS service.








<span class="grey">Mawatari, et al.              Informational                     [Page 9]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-10" id="page-10" href="#page-10" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


<span class="h3"><a class="selflink" name="section-6.6" href="#section-6.6">6.6</a>.  CLAT-to-CLAT Communications</span>

   464XLAT is a hub and spoke architecture focused on enabling IPv4-only
   services over IPv6-only networks.  Interactive Connectivity
   Establishment (ICE) [<a href="rfc5245.html" title="&quot;Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols&quot;">RFC5245</a>] may be used to support peer-to-peer
   communication within a 464XLAT network.

<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>.  Deployment Considerations</span>

<span class="h3"><a class="selflink" name="section-7.1" href="#section-7.1">7.1</a>.  Traffic Engineering</span>

   Even if the ISP for end users is different from the PLAT provider
   (e.g., another ISP), it can implement traffic engineering
   independently from the PLAT provider.  Detailed reasons are below:

   1.  The ISP for end users can figure out the IPv4 destination address
       from the translated IPv6 packet header, so it can implement
       traffic engineering based on the IPv4 destination address (e.g.,
       traffic monitoring for each IPv4 destination address, packet
       filtering for each IPv4 destination address, etc.).  The
       tunneling methods do not have such an advantage, without any deep
       packet inspection for processing the inner IPv4 packet of the
       tunnel packet.

   2.  If the ISP for end users can assign an IPv6 prefix greater than
       /64 to each subscriber, this 464XLAT architecture can separate
       the IPv6 prefix for native IPv6 packets and the XLAT prefixes for
       IPv4/IPv6 translation packets.  Accordingly, it can identify the
       type of packets ("native IPv6 packets" and "IPv4/IPv6 translation
       packets") and implement traffic engineering based on the IPv6
       prefix.

<span class="h3"><a class="selflink" name="section-7.2" href="#section-7.2">7.2</a>.  Traffic Treatment Scenarios</span>

   The below table outlines how different permutations of connectivity
   are treated in the 464XLAT architecture.

   Note: 464XLAT double translation treatment will be stateless when a
   dedicated /64 is available for translation on the CLAT.  Otherwise,
   the CLAT will have both stateful and stateless since it requires
   NAT44 from the LAN to a single IPv4 address and then stateless
   translation to a single IPv6 address.









<span class="grey">Mawatari, et al.              Informational                    [Page 10]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-11" id="page-11" href="#page-11" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


        +--------+-------------+-----------------------+-------------+
        | Server | Application |   Traffic Treatment   | Location of |
        |        | and Host    |                       | Translation |
        +--------+-------------+-----------------------+-------------+
        |  IPv6  |    IPv6     |    End-to-End IPv6    |    None     |
        +--------+-------------+-----------------------+-------------+
        |  IPv4  |    IPv6     | Stateful Translation  |    PLAT     |
        +--------+-------------+-----------------------+-------------+
        |  IPv4  |    IPv4     |        464XLAT        |  PLAT/CLAT  |
        +--------+-------------+-----------------------+-------------+

                        Traffic Treatment Scenarios

<span class="h2"><a class="selflink" name="section-8" href="#section-8">8</a>.  Security Considerations</span>

   To implement a PLAT, see the security considerations presented in
   <a href="rfc6146.html#section-5">Section&nbsp;5 of [RFC6146]</a>.

   To implement a CLAT, see the security considerations presented in
   <a href="rfc6145.html#section-7">Section&nbsp;7 of [RFC6145]</a>.  The CLAT may comply with [<a href="rfc6092.html" title="&quot;Recommended Simple Security Capabilities in Customer Premises Equipment (CPE) for Providing Residential IPv6 Internet Service&quot;">RFC6092</a>].

<span class="h2"><a class="selflink" name="section-9" href="#section-9">9</a>.  Acknowledgements</span>

   The authors would like to thank JPIX NOC members, JPIX 464XLAT trial
   service members, Seiichi Kawamura, Dan Drown, Brian Carpenter, Rajiv
   Asati, Washam Fan, Behcet Sarikaya, Jan Zorz, Tatsuya Oishi, Lorenzo
   Colitti, Erik Kline, Ole Troan, Maoke Chen, Gang Chen, Tom Petch,
   Jouni Korhonen, Bjoern A. Zeeb, Hemant Singh, Vizdal Ales, Mark ZZZ
   Smith, Mikael Abrahamsson, Tore Anderson, Teemu Savolainen, Alexandru
   Petrescu, Gert Doering, Victor Kuarsingh, Ray Hunter, James Woodyatt,
   Tom Taylor, and Remi Despres for their helpful comments.  We also
   would like to thank Fred Baker and Joel Jaeggli for their support.

<span class="h2"><a class="selflink" name="section-10" href="#section-10">10</a>.  References</span>

<span class="h3"><a class="selflink" name="section-10.1" href="#section-10.1">10.1</a>.  Normative References</span>

   [<a name="ref-RFC6052" id="ref-RFC6052">RFC6052</a>]  Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and X.
              Li, "IPv6 Addressing of IPv4/IPv6 Translators", <a href="rfc6052.html">RFC 6052</a>,
              October 2010.

   [<a name="ref-RFC6145" id="ref-RFC6145">RFC6145</a>]  Li, X., Bao, C., and F. Baker, "IP/ICMP Translation
              Algorithm", <a href="rfc6145.html">RFC 6145</a>, April 2011.

   [<a name="ref-RFC6146" id="ref-RFC6146">RFC6146</a>]  Bagnulo, M., Matthews, P., and I. van Beijnum, "Stateful
              NAT64: Network Address and Protocol Translation from IPv6
              Clients to IPv4 Servers", <a href="rfc6146.html">RFC 6146</a>, April 2011.




<span class="grey">Mawatari, et al.              Informational                    [Page 11]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-12" id="page-12" href="#page-12" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


<span class="h3"><a class="selflink" name="section-10.2" href="#section-10.2">10.2</a>.  Informative References</span>

   [<a name="ref-Discovery-Heuristic" id="ref-Discovery-Heuristic">Discovery-Heuristic</a>]
              Savolainen, T., Korhonen, J., and D. Wing, "Discovery of
              the IPv6 Prefix Used for IPv6 Address Synthesis", Work
              in Progress, March 2013.

   [<a name="ref-RFC1918" id="ref-RFC1918">RFC1918</a>]  Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G., and
              E. Lear, "Address Allocation for Private Internets",
              <a href="http://tools.ietf.org/html/bcp5">BCP 5</a>, <a href="rfc1918.html">RFC 1918</a>, February 1996.

   [<a name="ref-RFC3633" id="ref-RFC3633">RFC3633</a>]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", <a href="rfc3633.html">RFC 3633</a>,
              December 2003.

   [<a name="ref-RFC5245" id="ref-RFC5245">RFC5245</a>]  Rosenberg, J., "Interactive Connectivity Establishment
              (ICE): A Protocol for Network Address Translator (NAT)
              Traversal for Offer/Answer Protocols", <a href="rfc5245.html">RFC 5245</a>,
              April 2010.

   [<a name="ref-RFC5625" id="ref-RFC5625">RFC5625</a>]  Bellis, R., "DNS Proxy Implementation Guidelines",
              <a href="http://tools.ietf.org/html/bcp152">BCP 152</a>, <a href="rfc5625.html">RFC 5625</a>, August 2009.

   [<a name="ref-RFC6092" id="ref-RFC6092">RFC6092</a>]  Woodyatt, J., "Recommended Simple Security Capabilities in
              Customer Premises Equipment (CPE) for Providing
              Residential IPv6 Internet Service", <a href="rfc6092.html">RFC 6092</a>,
              January 2011.

   [<a name="ref-RFC6147" id="ref-RFC6147">RFC6147</a>]  Bagnulo, M., Sullivan, A., Matthews, P., and I. van
              Beijnum, "DNS64: DNS Extensions for Network Address
              Translation from IPv6 Clients to IPv4 Servers", <a href="rfc6147.html">RFC 6147</a>,
              April 2011.

   [<a name="ref-RFC6459" id="ref-RFC6459">RFC6459</a>]  Korhonen, J., Soininen, J., Patil, B., Savolainen, T.,
              Bajko, G., and K. Iisakkila, "IPv6 in 3rd Generation
              Partnership Project (3GPP) Evolved Packet System (EPS)",
              <a href="rfc6459.html">RFC 6459</a>, January 2012.

   [<a name="ref-TS.23203" id="ref-TS.23203">TS.23203</a>] 3GPP, "Policy and charging control architecture", 3GPP
              TS 23.203 10.7.0, June 2012.











<span class="grey">Mawatari, et al.              Informational                    [Page 12]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-13" id="page-13" href="#page-13" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


<span class="h2"><a class="selflink" name="appendix-A" href="#appendix-A">Appendix A</a>.  Examples of IPv4/IPv6 Address Translation</span>

   The following is an example of IPv4/IPv6 address translation on the
   464XLAT architecture.

   In the case that an IPv6 prefix greater than /64 is assigned to an
   end user by such as DHCPv6-PD [<a href="rfc3633.html" title="&quot;IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6&quot;">RFC3633</a>], the CLAT can use a dedicated
   /64 from the assigned IPv6 prefix.

      Host &amp; configuration value
   +------------------------------+
   |           IPv4 server        |
   |         [198.51.100.1]       |            IP packet header
   +------------------------------+   +--------------------------------+
                   ^                  | Destination IP address         |
                   |                  | [198.51.100.1]                 |
                   |                  | Source IP address              |
                   |                  | [192.0.2.1]                    |
   +------------------------------+   +--------------------------------+
   |              PLAT            |                   ^
   | IPv4 pool address            |                   |
   | [192.0.2.1 - 192.0.2.100]    |                   |
   | PLAT-side XLATE IPv6 prefix  |                   |
   | [2001:db8:1234::/96]         |                   |
   +------------------------------+   +--------------------------------+
                   ^                  | Destination IP address         |
                   |                  | [2001:db8:1234::198.51.100.1]  |
                   |                  | Source IP address              |
                   |                  | [2001:db8:aaaa::192.168.1.2]   |
   +------------------------------+   +--------------------------------+
   |              CLAT            |                   ^
   | PLAT-side XLATE IPv6 prefix  |                   |
   | [2001:db8:1234::/96]         |                   |
   | CLAT-side XLATE IPv6 prefix  |                   |
   | [2001:db8:aaaa::/96]         |                   |
   +------------------------------+   +--------------------------------+
                   ^                  | Destination IP address         |
                   |                  | [198.51.100.1]                 |
                   |                  | Source IP address              |
                   |                  | [192.168.1.2]                  |
   +------------------------------+   +--------------------------------+
   |          IPv4 client         |
   |        [192.168.1.2/24]      |
   +------------------------------+
   Delegated IPv6 prefix for client: 2001:db8:aaaa::/56






<span class="grey">Mawatari, et al.              Informational                    [Page 13]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-14" id="page-14" href="#page-14" class="invisible"> </a>
<span class="grey"><a href="rfc6877.html">RFC 6877</a>                         464XLAT                      April 2013</span>


Authors' Addresses

   Masataka Mawatari
   Japan Internet Exchange Co., Ltd.
   KDDI Otemachi Building 19F, 1-8-1 Otemachi,
   Chiyoda-ku, Tokyo  100-0004
   JAPAN

   Phone: +81 3 3243 9579
   EMail: mawatari@jpix.ad.jp


   Masanobu Kawashima
   NEC AccessTechnica, Ltd.
   800, Shimomata
   Kakegawa-shi, Shizuoka  436-8501
   JAPAN

   Phone: +81 537 22 8274
   EMail: kawashimam@vx.jp.nec.com


   Cameron Byrne
   T-Mobile USA
   Bellevue, Washington  98006
   USA

   EMail: cameron.byrne@t-mobile.com























Mawatari, et al.              Informational                    [Page 14]

</pre><br />
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>
</body>
<!-- Mirrored from tools.ietf.org/html/rfc6877 by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 19 Mar 2014 18:32:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
