<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4207 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 07 Jun 2014 20:18:47 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.107" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4207" name="DC.Identifier"/>
<meta content="This document details the Synchronous Optical Network\n(SONET)/Synchronous Digital Hierarchy (SDH) technology-specific\ninformation needed when sending Link Management Protocol (LMP) test\nmessages. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Jonathan P. Lang &lt;jplang@calient.net&gt;" name="DC.Creator"/>
<meta content="October, 2005" name="DC.Date.Issued"/>
<meta content="Synchronous Optical Network (SONET)/Synchronous Digital Hierarchy (SDH) Encoding for Link Management Protocol (LMP) Test Messages" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4207 - Synchronous Optical Network (SONET)/Synchronous Digital Hierarchy (SDH) Encoding for Link Management Protocol (LMP) Test Messages</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc4207.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc4207" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-ietf-ccamp-lmp-test-sonet-sdh" title="draft-ietf-ccamp-lmp-test-sonet-sdh">draft-ietf-ccamp-...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4207" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc4207" title="Side-by-side diff">Diff2</a>] [<a href="http://www.rfc-editor.org/errata_search.php?rfc=4207">Errata</a>]        </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Updated by: <a href="rfc6898.html">6898</a>                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                            J. Lang
Request for Comments: 4207                                   Sonos, Inc.
Category: Standards Track                               D. Papadimitriou
                                                                 Alcatel
                                                            October 2005


Synchronous Optical Network (SONET)/Synchronous Digital Hierarchy (SDH)
       Encoding for Link Management Protocol (LMP) Test Messages

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This document details the Synchronous Optical Network
   (SONET)/Synchronous Digital Hierarchy (SDH) technology-specific
   information needed when sending Link Management Protocol (LMP) test
   messages.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   For scalability purposes, multiple physical resources that
   interconnect Label Switching Routers (LSRs) can be combined to form a
   single traffic engineering (TE) link for the purposes of path
   computation and signaling.  These resources may represent one or more
   physical links that connect the LSRs, or they may represent a Label
   Switched Path (LSP) if LSP hierarchy [<a href="rfc4206.html" title='"Label Switched Paths (LSP) Hierarchy with Generalized Multi-Protocol Label Switching (GMPLS) Traffic Engineering (TE)"'>RFC4206</a>] is used.  The
   management of TE links is not restricted to in-band messaging, but
   instead can be done using out-of-band techniques.

   The Link Management Protocol (LMP) [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>] has been developed as
   part of the Generalized MPLS (GMPLS) protocol suite to manage TE
   links.  LMP currently consists of four main procedures, of which the
   first two are mandatory and the last two are optional:







<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


      1.  Control channel management
      2.  Link property correlation
      3.  Link verification
      4.  Fault management

   Control channel management is used to establish and maintain control
   channel connectivity between adjacent nodes.  This is done using a
   Config message exchange followed by a lightweight keep-alive message
   exchange.  Link property correlation is used to aggregate multiple
   data links into a single TE Link and to synchronize the link
   properties.  Link verification is used to verify the physical
   connectivity of the data links and to exchange the Interface_Ids of
   the data links.  Fault management is primarily used to suppress
   alarms and to localize failures in both opaque and transparent
   networks.  When LMP is used with SONET/SDH, however, the fault
   management procedures may not be needed as existing SONET/SDH
   mechanisms can be used.

   In this document, the SONET/SDH technology-specific information for
   LMP is defined.  Specifically, the SONET/SDH test procedures used for
   link verification and link property correlation are detailed.  These
   procedures include the trace correlation transport mechanism (defined
   for J0, J1, J2) that supports a separation of the transport and
   control plane identifiers.  The latter procedure requires a new trace
   monitoring function that is discussed in this document.  Once the
   data links have been verified, they can be grouped to form TE links.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   The reader is assumed to be familiar with the terminology in
   [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>], [<a href="#ref-G.707" title='"Network node interface for the synchronous digital hierarchy (SDH),"'>G.707</a>], and [<a href="#ref-T1.105" title='"Revised Draft T105 SONET Base Standard,"'>T1.105</a>].  The following abbreviations are
   used in this document:

   CRC-N:   Cyclic Redundancy Check-N.
   DCC:     Data communications channel.
   LOVC:    Lower-order virtual container.
   HOVC:    Higher-order virtual container.
   MS:      Multiplex section.
   MSOH:    Multiplex section overhead.
   POH:     Path overhead.
   RS:      Regenerator section.
   RSOH:    Regenerator section overhead.
   SDH:     Synchronous digital hierarchy.
   SOH:     Section overhead.



<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


   SONET:   Synchronous Optical Network.
   STM(-N): Synchronous Transport Module (-N) (SDH).
   STS(-N): Synchronous Transport Signal-Level N (SONET).
   VC-n:    Virtual Container-n (SDH).
   VTn:     Virtual Tributary-n (SONET).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Verifying%20Link%20Connectivity"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Verifying Link Connectivity</span>

   In [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>], a link verification procedure is defined whereby Test
   messages are transmitted in-band over the data links.  This is used
   for data plane discovery, Interface_Id exchange (Interface_Ids are
   used in GMPLS signaling, either as port labels [<a href="rfc3471.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Functional Description"'>RFC3471</a>] or component
   link identifiers [<a href="rfc4201.html" title='"Link Bundling in MPLS Traffic Engineering (TE)"'>RFC4201</a>], depending on the configuration), and
   physical connectivity verification.  Multiple data links can be
   verified using a single verification procedure; the correlation is
   done using the Verify_Id that is assigned to the procedure.

   As part of the link verification procedure, a BeginVerify message
   exchange is used to agree upon parameters for the Test procedure.
   This can be initiated by sending a BeginVerify message over the
   control channel.  This message includes a BEGIN_VERIFY object that
   contains a number of fields specifying, among other things, the
   transmission (bit) rate, encoding type, and transport mechanisms for
   the Test Messages.  If the remote node receives a BeginVerify message
   and is ready to begin the procedure, it sends a BeginVerifyAck
   message specifying the desired transport mechanism for the Test
   messages.  The remote node also assigns a Verify_Id to the procedure
   and includes it in the BeginVerifyAck message.

   The transmission rate of the data link over which the Test Messages
   will be transmitted is represented in IEEE floating-point format
   using a 32-bit number field and expressed in bytes per second.  See
   [<a href="rfc3471.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Functional Description"'>RFC3471</a>] for values defined for SONET/SDH.

   The encoding type identifies the encoding supported by an interface.
   The defined encoding is consistent with the LSP Encoding Type as
   defined in [<a href="rfc3471.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Functional Description"'>RFC3471</a>].  For SONET/SDH, this value must equal the value
   given for "SDH ITU-T G.707/SONET ANSI T1.105".

   The transport mechanism is defined using the Verify Transport
   Mechanism bit mask.  The scope of this bit mask is restricted to the
   link encoding type.  Multiple bits may be set when this field is
   included in the BeginVerify message; however, only one bit may be set
   when it is included in the BeginVerifyAck message.







<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


   In the following subsection, the various options for Verify Transport
   Mechanism are defined when the encoding is SONET/SDH.  The trace
   correlation transport mechanism (defined for J0, J1, J2) supports a
   separation of the transport and control plane identifiers.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Verify%20Transport%20Mechanism"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Verify Transport Mechanism</span>

   This field is 16 bits in length.

   In this document, the flags for SONET/SDH encoding are defined.  Note
   that all values are defined in network byte order (i.e., big-endian
   byte order).

        0x0001: Reserved

        0x0002 DCCS: Test Message over the Section/RS DCC

                Capable of transmitting Test Messages using the DCC
                Section/RS Overhead bytes with bit-oriented High-Level
                Data Link Control (HDLC) framing format [<a href="rfc1662.html" title='"PPP in HDLC-like Framing"'>RFC1662</a>].

                The Test Message is sent as defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].

        0x0004 DCCL: Test Message over the Line/MS DCC

                Capable of transmitting Test Messages using the DCC
                Line/MS Overhead bytes with bit-oriented HDLC framing
                format [<a href="rfc1662.html" title='"PPP in HDLC-like Framing"'>RFC1662</a>].

                The Test Message is sent as defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].

        0x0008 J0-trace: J0 Section Trace Correlation

                Capable of transmitting SONET/SDH Section/RS trace over
                J0 Section/RS overhead byte as defined in [<a href="#ref-T1.105" title='"Revised Draft T105 SONET Base Standard,"'>T1.105</a>] and
                [<a href="#ref-G.707" title='"Network node interface for the synchronous digital hierarchy (SDH),"'>G.707</a>].

                The Test Message is not transmitted using the J0 bytes
                (i.e., over the data link), but is sent over the control
                channel and correlated for consistency to the received
                J0 pattern.

                In order to get the mapping between the Interface_Id
                over which the J0 Test Message is sent and the J0
                pattern sent in-band, the transmitting node must provide
                the correlation between this pattern and the J0 Test
                Message.  This correlation is done using the TRACE
                object as defined in <a href="#section-4">Section 4</a>.



<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


                The format of the Test Message is as follows:

                &lt;Test Message&gt; ::=&lt;Common Header&gt; &lt;LOCAL_INTERFACE_ID&gt;
                &lt;VERIFY_ID&gt; &lt;TRACE&gt;

        0x0010:  Reserved

        0x0020:  Reserved

        0x0040 J1-trace: J1 Path Trace Correlation

                Capable of transmitting SONET/SDH STS SPE/HOVC Path
                trace over J1 Path overhead byte as defined in [<a href="#ref-T1.105" title='"Revised Draft T105 SONET Base Standard,"'>T1.105</a>]
                and [<a href="#ref-G.707" title='"Network node interface for the synchronous digital hierarchy (SDH),"'>G.707</a>].

                The Test Message is not transmitted using the J1 bytes
                (i.e., over the data link), but is sent over the control
                channel and correlated for consistency to the received
                J1 pattern.

                In order to get the mapping between the Interface_Id
                over which the J1 Test Message is sent and the J1
                pattern sent in-band, the transmitting node must provide
                the correlation between this pattern and the J1 Test
                Message.  This correlation is done using the TRACE
                object as defined in <a href="#section-4">Section 4</a>.

                The Test Message format is identical to that defined
                above in J0-trace.

        0x0080 J2-trace: J2 Path Trace Correlation

                Capable of transmitting SONET/SDH VT SPE/LOVC Path trace
                over J2 Path overhead byte as defined in [<a href="#ref-T1.105" title='"Revised Draft T105 SONET Base Standard,"'>T1.105</a>] and
                [<a href="#ref-G.707" title='"Network node interface for the synchronous digital hierarchy (SDH),"'>G.707</a>].

                The Test Message is not transmitted using the J2 bytes
                (i.e., over the data link), but is sent over the control
                channel and correlated for consistency to the received
                J2 pattern.

                In order to get the mapping between the Interface_Id
                over which the J2 Test Message is sent and the J2
                pattern sent in-band, the transmitting node must provide
                the correlation between this pattern and the J2 Test
                Message.  This correlation is done using the TRACE
                object as defined in <a href="#section-4">Section 4</a>.




<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


                The Test Message format is identical to that defined
                above in J0-trace.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Trace%20Monitoring"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Trace Monitoring</span>

   The trace monitoring features described in this section allow a node
   to do trace monitoring by using the SONET/SDH capabilities.

     o   A node may request its neighbor (the remote node) to monitor a
         link for a specific pattern in the overhead using the
         TraceMonitor Message.  An example of this overhead is the SONET
         Section Trace message transmitted in the J0 byte.  If the
         actual trace message does not match the expected trace message,
         the remote node MUST report the mismatch condition.

     o   A node may request the value of the current trace message on a
         given data link using the TraceReq Message.

     o   A node may request a remote node to send a specific trace
         message over a data link using the InsertTrace Message.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.1.%20%20TraceMonitor%20Message"></a><a class="selflink" href="#section-4.1.1" name="section-4.1.1">4.1.1</a>.  TraceMonitor Message</span>

   The TraceMonitor message (Message Type 21) is sent over the
   control channel and is used to request the remote node to monitor a
   data link for a specific trace value.  This value is inserted in the
   &lt;TRACE&gt; object.  The format of the TraceMonitor message is as
   follows:

   &lt;TraceMonitor Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID&gt;
                              &lt;LOCAL_INTERFACE_ID&gt; &lt;TRACE&gt;

   The above transmission order SHOULD be followed.

   The remote node MUST respond to a TraceMonitor message with either a
   TraceMonitorAck or TraceMonitorNack Message.















<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 6]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.1.1.1.%20%20TRACE%20Object%20Class"></a><a class="selflink" href="#section-4.1.1.1" name="section-4.1.1.1">4.1.1.1</a>.  TRACE Object Class</span>

   Class = 21

   o    C-Type = 1, Trace

    0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |N|   C-Type    |     Class     |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Trace Type          |          Trace Length         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   //                         Trace Message                       //
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Trace Type: 16 bits

       The type of the trace message.  The following values are defined.
       All other values are reserved.

       1 = SONET Section Trace (J0 Byte)
       2 = SONET Path Trace (J1 Byte)
       3 = SONET Path Trace (J2 Byte)
       4 = SDH Section Trace (J0 Byte)
       5 = SDH Path Trace (J1 Byte)
       6 = SDH Path Trace (J2 Byte)

   Trace Length:  16 bits

       This is the length in bytes of the trace message (as specified by
       the Trace Type).

   Trace Message:

       This is the value of the expected message to be received in-band.
       The valid length and value combinations are determined by the
       specific technology: for SONET see [<a href="#ref-T1.105" title='"Revised Draft T105 SONET Base Standard,"'>T1.105</a>] and for SDH see
       [<a href="#ref-G.707" title='"Network node interface for the synchronous digital hierarchy (SDH),"'>G.707</a>].  The message MUST be padded with zeros to a 32-bit
       boundary, if necessary.  Trace Length does not include padding
       zeroes.

   This object is nonnegotiable.






<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 7]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.2.%20%20TraceMonitorAck%20Message"></a><a class="selflink" href="#section-4.1.2" name="section-4.1.2">4.1.2</a>.  TraceMonitorAck Message</span>

   The TraceMonitorAck message (Message Type 22) is used to acknowledge
   receipt of the TraceMonitor message and indicate that all of the
   TRACE Objects in the TraceMonitor message have been received and
   processed correctly (i.e., no Trace Mismatch).

   The format is as follows:

   &lt;TraceMonitorAck Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID_ACK&gt;

   The above transmission order SHOULD be followed.

   The MESSAGE_ID_ACK object is defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].  The contents of
   the MESSAGE_ID_ACK object MUST be obtained from the TraceMonitor
   message being acknowledged.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.3.%20%20TraceMonitorNack%20Message"></a><a class="selflink" href="#section-4.1.3" name="section-4.1.3">4.1.3</a>.  TraceMonitorNack Message</span>

   The TraceMonitorNack message (Message Type 23) is used to acknowledge
   receipt of the TraceMonitor message and indicate that the TRACE
   Object in the TraceMonitor message was not processed correctly.  This
   could be because the trace monitoring requested is not supported or
   there was an error in the TRACE object value(s).

   The format is as follows:

   &lt;TraceMonitorNack Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID_ACK&gt;
                                  &lt;ERROR_CODE&gt;

   The above transmission order SHOULD be followed.

   The MESSAGE_ID_ACK and ERROR_CODE objects are defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].
   The contents of the MESSAGE_ID_ACK object MUST be obtained from the
   TraceMonitor message being acknowledged.

   If the Trace type is not supported, the ERROR_CODE MUST indicate
   "Unsupported Trace Type" defined in <a href="#section-4.1.3.1">Section 4.1.3.1</a>.

   If the TRACE object was not equal to the value seen in the trace, the
   TraceMonitorNack message MUST include the ERROR_CODE indicating
   "Invalid Trace Message".  The TraceMismatch message (see <a href="#section-4.1.4">Section</a>
   <a href="#section-4.1.4">4.1.4</a>) SHOULD NOT be sent as a result of the mismatch.

   The TraceMonitorNack message uses a new ERROR_CODE C-Type defined in
   <a href="#section-4.1.3.1">Section 4.1.3.1</a>.





<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 8]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.1.3.1.%20%20ERROR_CODE%20Class"></a><a class="selflink" href="#section-4.1.3.1" name="section-4.1.3.1">4.1.3.1</a>.  ERROR_CODE Class</span>

   C-Type = 3, TRACE_ERROR

   The following new error code bit-values are defined:

   0x01 = Unsupported Trace Type
   0x02 = Invalid Trace Message

   All other values are Reserved.

   Multiple bits may be set to indicate multiple errors.

   This Object is nonnegotiable.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.4.%20%20TraceMismatch%20Message"></a><a class="selflink" href="#section-4.1.4" name="section-4.1.4">4.1.4</a>.  TraceMismatch Message</span>

   The TraceMismatch message (Message Type 24) is sent over the control
   channel and is used to report a trace mismatch on a data link for
   which trace monitoring was requested.  The format is as follows:

   &lt;TraceMismatch message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID&gt;
                               &lt;LOCAL_INTERFACE_ID&gt;
                               [&lt;LOCAL_INTERFACE_ID&gt; ...]

   The above transmission order SHOULD be followed.

   A neighboring node that receives a TraceMismatch message MUST respond
   with a TraceMismatchAck message.

   The LOCAL_INTERFACE_ID object is defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].  The
   LOCAL_INTERFACE_ID in this message is the local Interface Id of the
   data link that has a trace mismatch.  A trace mismatch for multiple
   LOCAL_INTERFACE_IDs may be reported in the same message.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.5.%20%20TraceMismatchAck%20Message"></a><a class="selflink" href="#section-4.1.5" name="section-4.1.5">4.1.5</a>.  TraceMismatchAck Message</span>

   The TraceMismatchAck message (Message Type 25) is used to acknowledge
   receipt of a TraceMismatch message.  The format is as follows:

   &lt;TraceMismatchAck Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID_ACK&gt;

   The MESSAGE_ID_ACK object is defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].  The contents of
   the MESSAGE_ID_ACK object MUST be obtained from the TraceMismatch
   message being acknowledged.






<span class="grey">Lang &amp; Papadimitriou        Standards Track                     [Page 9]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.6.%20%20TraceReq%20Message"></a><a class="selflink" href="#section-4.1.6" name="section-4.1.6">4.1.6</a>.  TraceReq Message</span>

   The TraceReq message (Message Type 26) is sent over the control
   channel and is used to request the current trace value of a data
   link.

   &lt;TraceReq Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID&gt;
                          &lt;LOCAL_INTERFACE_ID&gt; &lt;TRACE_REQ&gt;

   The above transmission order SHOULD be followed.

   The format of the TRACE_REQ object is as follows:

   Class = 22

   O    C-Type = 1, TraceReq

     0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |N|   C-Type    |     Class     |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Trace Type          |           (Reserved)          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Trace Type: 16 bits

         Defined in <a href="#section-4.1.1.1">Section 4.1.1.1</a>.

   Reserved: 16 bits

         This field MUST be set to zero when sent and ignored when
         received

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.7.%20%20TraceReport%20Message"></a><a class="selflink" href="#section-4.1.7" name="section-4.1.7">4.1.7</a>.  TraceReport Message</span>

   The TraceReport message (Message Type 27) is sent over the control
   channel after receiving a TraceReq message.

   &lt;TraceReport Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID_ACK&gt; &lt;TRACE&gt;

   The TraceReport message MUST include a TRACE Object (as described in
   <a href="#section-4.1.1.1">Section 4.1.1.1</a>) for the requested data link.

   The MESSAGE_ID_ACK object is defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].  The contents of
   the MESSAGE_ID_ACK object MUST be obtained from the TraceReq message
   being acknowledged.




<span class="grey">Lang &amp; Papadimitriou        Standards Track                    [Page 10]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.8.%20%20TraceReqNack%20Message"></a><a class="selflink" href="#section-4.1.8" name="section-4.1.8">4.1.8</a>.  TraceReqNack Message</span>

   The TraceReqNack message (Message Type 28) is sent over the control
   channel after receiving a TraceReq message.

   &lt;TraceReqNack Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID_ACK&gt;
                            &lt;ERROR_CODE&gt;

   The above transmission order SHOULD be followed.

   The MESSAGE_ID_ACK object is defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].  The contents of
   the MESSAGE_ID_ACK object MUST be obtained from the TraceReq message
   being acknowledged.

   The TraceReqNack message MUST include an ERROR_CODE Object (as
   defined in <a href="#section-4.1.3.1">Section 4.1.3.1</a>) for the requested data link.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.9.%20%20InsertTrace%20Message"></a><a class="selflink" href="#section-4.1.9" name="section-4.1.9">4.1.9</a>.  InsertTrace Message</span>

   The InsertTrace message (Message Type 29) is sent over the control
   channel and is used to request a remote node to send a specific trace
   message over a data link (this assumes that the remote knows the
   mapping between the local and remote interface_Ids before fulfilling
   such request).

   The format is as follows:

   &lt;InsertTrace Message&gt; ::=   &lt;Common Header&gt; &lt;MESSAGE_ID&gt;
                               &lt;LOCAL_INTERFACE_ID&gt; &lt;TRACE&gt;

   The above transmission order SHOULD be followed.

   A node that receives an InsertTrace message MUST respond with either
   an InsertTraceAck or an InsertTraceNack Message.

   Once the InsertTraceAck message is received, the TraceMismatch
   message (see <a href="#section-4.1.4">Section 4.1.4</a>) is used to indicate a trace mismatch has
   occurred.

   The MESSAGE_ID_object is defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.10.%20%20InsertTraceAck%20Message"></a><a class="selflink" href="#section-4.1.10" name="section-4.1.10">4.1.10</a>.  InsertTraceAck Message</span>

   The InsertTraceAck message (Message Type 30) is used to acknowledge
   receipt of the InsertTrace message and indicate that the TRACE Object
   in the InsertTrace message has been received and processed correctly
   (i.e., no Trace Mismatch).  The format is as follows:




<span class="grey">Lang &amp; Papadimitriou        Standards Track                    [Page 11]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


   &lt;InsertTraceAck Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID_ACK&gt;

   The MESSAGE_ID_ACK object is defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].  The contents of
   the MESSAGE_ID_ACK object MUST be obtained from the InsertTrace
   message being acknowledged.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.11.%20%20InsertTraceNack%20Message"></a><a class="selflink" href="#section-4.1.11" name="section-4.1.11">4.1.11</a>.  InsertTraceNack Message</span>

   The InsertTraceNack message (Message Type 31) is used to acknowledge
   receipt of the InsertTrace message and to indicate that the TRACE
   Object in the InsertTrace message was not processed correctly.  This
   could be because the trace monitoring requested is not supported or
   there was an error in the value.

   The format is as follows:

   &lt;InsertTraceNack Message&gt; ::= &lt;Common Header&gt; &lt;MESSAGE_ID_ACK&gt;
                                 &lt;ERROR_CODE&gt;

   The above transmission order SHOULD be followed.

   The MESSAGE_ID_ACK object is defined in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].

   The InsertTraceNack message MUST include an ERROR_CODE Object (as
   defined in <a href="#section-4.1.3.1">Section 4.1.3.1</a>) for the requested data link.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Security%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Security Considerations</span>

   LMP message security uses IPsec as described in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].  This
   document introduces no other new security considerations not covered
   in [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  IANA Considerations</span>

   LMP [<a href="rfc4204.html" title='"Link Management Protocol (LMP)"'>RFC4204</a>] defines the following name spaces and how IANA can make
   assignments in those namespaces:

   - LMP Message Type.
   - LMP Object Class.
   - LMP Object Class type (C-Type) unique within the Object Class.
   - LMP Sub-object Class type (Type) unique within the Object Class.

   This memo introduces the following new assignments:

   LMP Message Type:

      o TraceMonitor message      (Message type = 21)
      o TraceMonitorAck message   (Message type = 22)



<span class="grey">Lang &amp; Papadimitriou        Standards Track                    [Page 12]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


      o TraceMonitorNack message  (Message type = 23)
      o TraceMismatch message     (Message type = 24)
      o TraceMismatchAck message  (Message type = 25)

      o TraceReq message          (Message type = 26)
      o TraceReport message       (Message type = 27)
      o TraceReqNack message      (Message type = 28)

      o InsertTrace message       (Message type = 29)
      o InsertTraceAck message    (Message type = 30)
      o InsertTraceNack message   (Message type = 31)

   LMP Object Class name space and Class type (C-Type):

      o TRACE              Class name (21)
        - Type 1           (C-Type = 1)

      o TRACE REQ          Class name (22)
        - Type 1           (C-Type = 1)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20References"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Normative%20References"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC4201" name="ref-RFC4201">RFC4201</a>]   Kompella, K., Rekhter, Y., and L. Berger, "Link Bundling
               in MPLS Traffic Engineering (TE)", <a href="rfc4201.html">RFC 4201</a>, October
               2005.

   [<a id="ref-G.707" name="ref-G.707">G.707</a>]     ITU-T Recommendation G.707, "Network node interface for
               the synchronous digital hierarchy (SDH)," October 2000.

   [<a id="ref-RFC4204" name="ref-RFC4204">RFC4204</a>]   Lang, J., Ed., "Link Management Protocol (LMP)", <a href="rfc4204.html">RFC</a>
               <a href="rfc4204.html">4204</a>, October 2005.

   [<a id="ref-RFC1662" name="ref-RFC1662">RFC1662</a>]   Simpson, W., "PPP in HDLC-like Framing", STD 51, <a href="rfc1662.html">RFC</a>
               <a href="rfc1662.html">1662</a>, July 1994.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]   Bradner, S., "Key words for use in RFCs to Indicate
               Requirement Levels", <a href="http://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC3471" name="ref-RFC3471">RFC3471</a>]   Berger, L., "Generalized Multi-Protocol Label Switching
               (GMPLS) Signaling Functional Description", <a href="rfc3471.html">RFC 3471</a>,
               January 2003.

   [<a id="ref-T1.105" name="ref-T1.105">T1.105</a>]    T1.105, "Revised Draft T105 SONET Base Standard," January
               2001.





<span class="grey">Lang &amp; Papadimitriou        Standards Track                    [Page 13]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Informative%20References"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-RFC4206" name="ref-RFC4206">RFC4206</a>]   Kompella, K., and Y. Rekhter, "Label Switched Paths (LSP)
               Hierarchy with Generalized Multi-Protocol Label Switching
               (GMPLS) Traffic Engineering (TE)", <a href="rfc4206.html">RFC 4206</a>, October
               2005.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Acknowledgements"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Acknowledgements</span>

   The authors would like to thank Bernard Sales, Emmanuel Desmet, Gert
   Grammel, Jim Jones, Stefan Ansorge, John Drake, and James Scott for
   their many contributions to this document.

   We would also like to thank Greg Bernstein and Michiel van Everdingen
   for their insightful comments and for acting with a strong
   combination of toughness, professionalism, and courtesy.

Authors' Addresses

   Jonathan P. Lang
   Sonos, Inc.
   223 E. De La Guerra St.
   Santa Barbara, CA 93101

   EMail: jplang@ieee.org


   Dimitri Papadimitriou
   Alcatel
   Francis Wellesplein 1
   B-2018 Antwerpen, Belgium

   EMail: dimitri.papadimitriou@alcatel.be


















<span class="grey">Lang &amp; Papadimitriou        Standards Track                    [Page 14]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4207.html">RFC 4207</a>        SONET/SDH Encoding for LMP Test Messages    October 2005</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2005).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="http://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="http://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="http://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Lang &amp; Papadimitriou        Standards Track                    [Page 15]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>



</body><!-- Mirrored from tools.ietf.org/html/rfc4207 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 07 Jun 2014 20:18:47 GMT --></html>