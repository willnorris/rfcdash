<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6144 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:31 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-baker-behave-v4v6-framework" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:6144" name="DC.Identifier"/>
<meta content="April, 2011" name="DC.Date.Issued"/>
<meta content="Bao, Congxiao" name="DC.Creator"/>
<meta content="Yin, Kevin" name="DC.Creator"/>
<meta content="Li, Xing" name="DC.Creator"/>
<meta content="Baker, Fred" name="DC.Creator"/>
<meta content="This note describes a framework for IPv4/IPv6 translation. This is in
the context of replacing NAT-PT, which was deprecated by RFC 4966, and
to enable networks to have IPv4 and IPv6 coexist in a somewhat
rational manner while transitioning to an IPv6 network." name="DC.Description.Abstract"/>
<meta content="Framework for IPv4/IPv6 Translation" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6144 - Framework for IPv4/IPv6 Translation</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6144.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6144" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-behave-v6v4-framework" title="draft-ietf-behave-v6v4-framework">draft-ietf-beha...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6144" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6144" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6144" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                          F. Baker
Request for Comments: 6144                                 Cisco Systems
Category: Informational                                            X. Li
ISSN: 2070-1721                                                   C. Bao
                                       CERNET Center/Tsinghua University
                                                                  K. Yin
                                                           Cisco Systems
                                                              April 2011


                  <span class="h1">Framework for IPv4/IPv6 Translation</span>

Abstract

   This note describes a framework for IPv4/IPv6 translation.  This is
   in the context of replacing Network Address Translation - Protocol
   Translation (NAT-PT), which was deprecated by <a href="rfc4966.html">RFC 4966</a>, and to enable
   networks to have IPv4 and IPv6 coexist in a somewhat rational manner
   while transitioning to an IPv6 network.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6144">http://www.rfc-editor.org/info/rfc6144</a>.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must




<span class="grey">Baker, et al.                 Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-1.1">1.1</a>.  Why Translation? . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-1.2">1.2</a>.  Terminology  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-1.3">1.3</a>.  Translation Objectives . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-1.4">1.4</a>.  Transition Plan  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-2">2</a>.  Scenarios for IPv4/IPv6 Translation  . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-2.1">2.1</a>.  Scenario 1: An IPv6 Network to the IPv4 Internet . . . . . <a href="#page-12">12</a>
     <a href="#section-2.2">2.2</a>.  Scenario 2: The IPv4 Internet to an IPv6 Network . . . . . <a href="#page-13">13</a>
     <a href="#section-2.3">2.3</a>.  Scenario 3: The IPv6 Internet to an IPv4 Network . . . . . <a href="#page-14">14</a>
     <a href="#section-2.4">2.4</a>.  Scenario 4: An IPv4 Network to the IPv6 Internet . . . . . <a href="#page-15">15</a>
     <a href="#section-2.5">2.5</a>.  Scenario 5: An IPv6 Network to an IPv4 Network . . . . . . <a href="#page-16">16</a>
     <a href="#section-2.6">2.6</a>.  Scenario 6: An IPv4 Network to an IPv6 Network . . . . . . <a href="#page-17">17</a>
     <a href="#section-2.7">2.7</a>.  Scenario 7: The IPv6 Internet to the IPv4 Internet . . . . <a href="#page-18">18</a>
     <a href="#section-2.8">2.8</a>.  Scenario 8: The IPv4 Internet to the IPv6 Internet . . . . <a href="#page-19">19</a>
   <a href="#section-3">3</a>.  Framework  . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-3.1">3.1</a>.  Translation Components . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
       <a href="#section-3.1.1">3.1.1</a>.  Address Translation  . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
       <a href="#section-3.1.2">3.1.2</a>.  IP and ICMP Translation  . . . . . . . . . . . . . . . <a href="#page-21">21</a>
       <a href="#section-3.1.3">3.1.3</a>.  Maintaining Translation State  . . . . . . . . . . . . <a href="#page-21">21</a>
       <a href="#section-3.1.4">3.1.4</a>.  DNS64 and DNS46  . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
       <a href="#section-3.1.5">3.1.5</a>.  ALGs for Other Applications Layer Protocols  . . . . . <a href="#page-22">22</a>
     <a href="#section-3.2">3.2</a>.  Operation Mode for Specific Scenarios  . . . . . . . . . . <a href="#page-22">22</a>
       <a href="#section-3.2.1">3.2.1</a>.  Stateless Translation  . . . . . . . . . . . . . . . . <a href="#page-23">23</a>
       <a href="#section-3.2.2">3.2.2</a>.  Stateful Translation . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     <a href="#section-3.3">3.3</a>.  Layout of the Related Documents  . . . . . . . . . . . . . <a href="#page-26">26</a>
   <a href="#section-4">4</a>.  Translation in Operation . . . . . . . . . . . . . . . . . . . <a href="#page-27">27</a>
   <a href="#section-5">5</a>.  Unsolved Problems  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>
   <a href="#section-6">6</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>
   <a href="#section-7">7</a>.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
   <a href="#section-8">8</a>.  References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
     <a href="#section-8.1">8.1</a>.  Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
     <a href="#section-8.2">8.2</a>.  Informative References . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>













<span class="grey">Baker, et al.                 Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This note describes a framework for IPv4/IPv6 translation.  This is
   in the context of replacing NAT-PT (Network Address Translation -
   Protocol Translation) [<a href="rfc2766.html" title='"Network Address Translation - Protocol Translation (NAT-PT)"'>RFC2766</a>], which was deprecated by [<a href="rfc4966.html" title='"Reasons to Move the Network Address Translator - Protocol Translator (NAT-PT) to Historic Status"'>RFC4966</a>],
   and to enable networks to have IPv4 and IPv6 coexist in a somewhat
   rational manner while transitioning to an IPv6-only network.

   NAT-PT was deprecated to inform the community that NAT-PT had
   operational issues and was not considered a viable medium- or long-
   term strategy for either coexistence or transition.  It wasn't
   intended to say that IPv4&lt;-&gt;IPv6 translation was bad, but the way
   that NAT-PT did it was bad, and in particular using NAT-PT as a
   general-purpose solution was bad.  As with the deprecation of the RIP
   routing protocol [<a href="rfc1923.html" title='"RIPv1 Applicability Statement for Historic Status"'>RFC1923</a>] at the time the Internet was converting to
   Classless Inter-Domain Routing (CIDR), the point was to encourage
   network operators to actually move away from technology with known
   issues.

   [<a id="ref-RFC4213" name="ref-RFC4213">RFC4213</a>] describes the IETF's view of the most sensible transition
   model.  The IETF recommends, in short, that network operators
   (transit providers, service providers, enterprise networks, small and
   medium businesses, SOHO (Small Office, Home Office) and residential
   customers, and any other kind of network that may currently be using
   IPv4) obtain an IPv6 prefix, turn on IPv6 routing within their
   networks and between themselves and any peer, upstream, or downstream
   neighbors, enable it on their computers, and use it in normal
   processing.  This should be done while leaving IPv4 stable, until a
   point is reached that any communication that can be carried out could
   use either protocol equally well.  At that point, the economic
   justification for running both becomes debatable, and network
   operators can justifiably turn IPv4 off.  This process is comparable
   to that of [<a href="rfc4192.html" title='"Procedures for Renumbering an IPv6 Network without a Flag Day"'>RFC4192</a>], which describes how to renumber a network using
   the same address family without a flag day.  While running stably
   with the older system, deploy the new.  Use the coexistence period to
   work out such kinks as they arise.  When the new is also running
   stably, shift production to it.  When network and economic conditions
   warrant, remove the old, which is now no longer necessary.

   The question arises: what if that is infeasible due to the time
   available to deploy or other considerations?  What if the process of
   moving a network and its components or customers is starting too late
   for contract cycles to effect IPv6 turn-up on important parts at a
   point where it becomes uneconomical to deploy global IPv4 addresses
   in new services?  How does one continue to deploy new services
   without balkanizing the network?





<span class="grey">Baker, et al.                 Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


   This document describes translation as one of the tools networks
   might use to facilitate coexistence and ultimate transition.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Why%20Translation%3F"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Why Translation?</span>

   Besides dual-stack deployment, there are two fundamental approaches
   one could take to interworking between IPv4 and IPv6: tunneling and
   translation.  One could -- and in the [<a href="#ref-6NET" title='"6NET"'>6NET</a>] we did -- build an
   overlay network that tunnels one protocol over the other.  Various
   proposals take that model, including 6to4 [<a href="rfc3056.html" title='"Connection of IPv6 Domains via IPv4 Clouds"'>RFC3056</a>], Teredo
   [<a href="rfc4380.html" title='"Teredo: Tunneling IPv6 over UDP through Network Address Translations (NATs)"'>RFC4380</a>], Intra-Site Automatic Tunnel Addressing Protocol (ISATAP)
   [<a href="rfc5214.html" title='"Intra-Site Automatic Tunnel Addressing Protocol (ISATAP)"'>RFC5214</a>], and Dual-Stack Lite [<a href="#ref-DS-LITE" title='"Dual- Stack Lite Broadband Deployments Following IPv4 Exhaustion"'>DS-LITE</a>].  The advantage of doing so
   is that the new protocol is enabled to work without disturbing the
   old protocol, providing connectivity between users of the new
   protocol.  There are two disadvantages to tunneling:

   o  Users of the new architecture are unable to use the services of
      the underlying infrastructure -- it is just bandwidth, and

   o  It doesn't enable new protocol users to communicate with old
      protocol users without dual-stack hosts.

   As noted, in this work, we look at Internet Protocol translation as a
   transition strategy.  [<a href="rfc4864.html" title='"Local Network Protection for IPv6"'>RFC4864</a>] forcefully makes the point that
   people use Network Address Translators to meet various needs, many of
   which are met as well by routing or protocol mechanisms that preserve
   the end-to-end addressability of the Internet.  What it did not
   consider is the case in which there is an ongoing requirement to
   communicate with IPv4 systems, but, for example, configuring IPv4
   routing is not the most desirable strategy in the network operator's
   view, or is infeasible due to a shortage of global address space.
   Translation enables the client of a network, whether a transit
   network, an access network, or an edge network, to access the
   services of the network and communicate with other network users
   regardless of their protocol usage -- within limits.  Like NAT-PT,
   IPv4/IPv6 translation under this rubric is not a long-term support
   strategy, but it is a medium-term coexistence strategy that can be
   used to facilitate a long-term program of transition.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Terminology"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Terminology</span>

   The following terminology is used in this document and other
   documents related to it.

   An IPv4 network:  A specific network that has an IPv4-only
      deployment.  This could be an enterprise's IPv4-only network, an
      ISP's IPv4-only network, or even an IPv4-only host.  The IPv4
      Internet is the set of all interconnected IPv4 networks.



<span class="grey">Baker, et al.                 Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


   An IPv6 network:  A specific network that has an IPv6-only
      deployment.  This could be an enterprise's IPv6-only network, an
      ISP's IPv6-only network, or even an IPv6-only host.  The IPv6
      Internet is the set of all interconnected IPv6 networks.

   DNS46:  A DNS translator that translates AAAA record to A record.

   DNS64:  A DNS translator that translates A record to AAAA record.

   Dual-Stack implementation:  A dual-stack implementation, in this
      context, comprises an IPv4/IPv6-enabled end system stack,
      applications plus routing in the network.  It implies that two
      application instances are capable of communicating using either
      IPv4 or IPv6 -- they have stacks, they have addresses, and they
      have any necessary network support including routing.

   IPv4-converted addresses:  IPv6 addresses used to represent IPv4
      nodes in an IPv6 network.  They have an explicit mapping
      relationship to IPv4 addresses.  Both stateless and stateful
      translators use IPv4-converted addresses to represent IPv4
      addresses.

   IPv4-only:  An IPv4-only implementation, in this context, comprises
      an IPv4-enabled end system stack, applications directly or
      indirectly using that IPv4 stack, plus routing in the network.  It
      implies that two application instances are capable of
      communicating using IPv4, but not IPv6 -- they have an IPv4 stack,
      addresses, and network support including IPv4 routing and
      potentially IPv4/IPv4 translation, but some element is missing
      that prevents communication with IPv6 hosts.

   IPv4-translatable addresses:  IPv6 addresses to be assigned to IPv6
      nodes for use with stateless translation.  They have an explicit
      mapping relationship to IPv4 addresses.  A stateless translator
      uses the corresponding IPv4 addresses to represent the IPv6
      addresses.  A stateful translator does not use this kind of
      addresses, since IPv6 hosts are represented by the IPv4 address
      pool in the translator via dynamic state.

   IPv6-only:  An IPv6-only implementation, in this context, comprises
      an IPv6-enabled end system stack, applications directly or
      indirectly using that IPv6 stack, plus routing in the network.  It
      implies that two application instances are capable of
      communicating using IPv6, but not IPv4 -- they have an IPv6 stack,
      addresses, and network support including routing in IPv6, but some
      element is missing that prevents communication with IPv4 hosts.





<span class="grey">Baker, et al.                 Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


   Network-Specific Prefix (NSP):  From an IPv6 prefix assigned to a
      network operator, the operator chooses a longer prefix for use by
      the operator's translator(s).  Hence, a given IPv4 address would
      have different IPv6 representations in different networks that use
      different network-specific prefixes.  A network-specific prefix is
      also known as a Local Internet Registry (LIR) prefix.

   State:  "State" refers to dynamic information that is stored in a
      network element.  For example, if two systems are communicating
      using a TCP connection, each stores information about the
      connection, which is called "connection state".  In this context,
      the term refers to dynamic correlations between IP addresses on
      either side of a translator, or {IP address, transport protocol,
      transport port number} tuples on either side of the translator.
      Of stateful algorithms, there are at least two major flavors
      depending on the kind of state they maintain:

      Hidden state:  the existence of this state is unknown outside the
         network element that contains it.

      Known state:  the existence of this state is known by other
         network elements.

   Stateful Translation:  A translation algorithm may be said to
      "require state in a network element" or be "stateful" if the
      transmission or reception of a packet creates or modifies a data
      structure in the relevant network element.

   Stateful Translator:  A translator that uses stateful translation for
      either the source or destination address.  A stateful translator
      typically also uses a stateless translation algorithm for the
      other type of address.

   Stateless Translation:  A translation algorithm that is not
      "stateful" is "stateless".  It derives its needed information
      algorithmically from the messages it is translating and from pre-
      configured information.

   Stateless Translator:  A translator that uses only stateless
      translation for both destination address and source address.

   Well-Known Prefix (WKP):  The IPv6 prefix defined in [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>] for
      use in an algorithmic mapping.








<span class="grey">Baker, et al.                 Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.3.%20%20Translation%20Objectives"></a><a class="selflink" href="#section-1.3" name="section-1.3">1.3</a>.  Translation Objectives</span>

   In any translation model, there is a question of objectives.
   Ideally, one would like to make any system and any application
   running on it able to "talk with" -- exchange datagrams supporting
   applications with -- any other system running the same application
   regardless of whether they have an IPv4 stack and connectivity or
   IPv6 stack and connectivity.  That was the model for NAT-PT, and the
   things it necessitated led to scaling and operational difficulties
   [<a href="rfc4966.html" title='"Reasons to Move the Network Address Translator - Protocol Translator (NAT-PT) to Historic Status"'>RFC4966</a>].

   So the question comes back to what different kinds of connectivity
   can be easily supported, what kinds are harder, and what technologies
   are needed to at least pick the low-hanging fruit.  We observe that
   applications today fall into two main categories:

   Client/Server Application:  Per whatis.com, "'Client/server'
      describes the relationship between two computer programs in which
      one program, the client, makes a service request from another
      program, the server, which fulfills the request."  In networking,
      the behavior of the applications is that connections are initiated
      from client software and systems to server software and systems.
      Examples include mail handling between an end user and his mail
      system (POP3, IMAP, and MUA-&gt;MTA SMTP), FTP, the web, and DNS name
      resolution.

   Peer-to-Peer (P2P) Application:  A P2P application is an application
      that uses the same endpoint to initiate outgoing sessions to
      peering hosts as well as accept incoming sessions from peering
      hosts.  These in turn fall broadly into two categories:

      Peer-to-peer infrastructure applications:  Examples of
         "infrastructure applications" include SMTP between MTAs,
         Network News, and SIP.  Any MTA might open an SMTP session with
         any other at any time; any SIP Proxy might similarly connect
         with any other SIP Proxy.  An important characteristic of these
         applications is that they use ephemeral sessions -- they open
         sessions when they are needed and close them when they are
         done.

      Peer-to-peer file exchange applications:  Examples of these
         include Limewire, BitTorrent, and UTorrent.  These are
         applications that open some sessions between systems and leave
         them open for long periods of time, and where ephemeral
         sessions are important, these applications are able to learn
         about the reliability of peers from history or by reputation.
         They use the long-term sessions to map content availability.




<span class="grey">Baker, et al.                 Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


         Short-term sessions are used to exchange content.  They tend to
         prefer to ask for content from peers that they find reliable
         and available.

   If the goal is the ability to open connections between systems, then
   one must ask who opens connections.

   o  We need a technology that will enable systems that act as clients
      to be able to open sessions with other systems that act as
      servers, whether in the IPv6-&gt;IPv4 direction or the IPv4-&gt;IPv6
      direction.  Ideally, this is stateless; especially in a carrier
      infrastructure, the preponderance of accesses will be to servers,
      and this optimizes access to them.  However, a stateful algorithm
      is acceptable if the complexity is minimized and a stateless
      algorithm cannot be constructed.

   o  We also need a technology that will allow peers to connect with
      each other, whether in the IPv6-&gt;IPv4 direction or the IPv4-&gt;IPv6
      direction.  Again, it would be ideal if this was stateless, but a
      stateful algorithm is acceptable if the complexity is minimized
      and a stateless algorithm cannot be constructed.

   o  In some situations, hosts are purely clients.  In those
      situations, we do not need an algorithm to enable connections to
      those hosts.

   The complexity arguments bring us in the direction of hidden state:
   if state must be shared between the application and the translator or
   between translation components, complexity and deployment issues are
   greatly magnified.  The objective of the translators is to avoid, as
   much as possible, any software changes in hosts or applications
   necessary to support translation.

   NAT-PT is an example of a facility with known state -- at least two
   software components (the data-plane translator and the DNS
   Application Layer Gateway, which may be implemented in the same or
   different systems) share and must coordinate translation state.  A
   typical IPv4/IPv4 NAT implements an algorithm with hidden state.
   Obviously, stateless translation requires less computational overhead
   than stateful translation, and less memory to maintain the state,
   because the translation tables and their associated methods and
   processes exist in a stateful algorithm and don't exist in a
   stateless one.








<span class="grey">Baker, et al.                 Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.4.%20%20Transition%20Plan"></a><a class="selflink" href="#section-1.4" name="section-1.4">1.4</a>.  Transition Plan</span>

   While the design of IPv4 made it impossible for IPv6 to be compatible
   on the wire, the designers intended that it would coexist with IPv4
   during a period of transition.  The primary mode of coexistence was
   dual-stack operation -- routers would be dual-stacked so that the
   network could carry both address families, and IPv6-capable hosts
   could be dual-stack to maintain access to IPv4-only partners.  The
   goal was that the preponderance of hosts and routers in the Internet
   would be IPv6-capable long before IPv4 address space allocation was
   completed.  At this time, it appears the exhaustion of IPv4 address
   space will occur before significant IPv6 adoption.

   Curran's "A Transition Plan" [<a href="rfc5211.html" title='"An Internet Transition Plan"'>RFC5211</a>] proposes a three-phase
   progression:

   Preparation Phase (current):  characterized by pilot use of IPv6,
      primarily through transition mechanisms defined in [<a href="rfc4213.html" title='"Basic Transition Mechanisms for IPv6 Hosts and Routers"'>RFC4213</a>], and
      planning activities.

   Transition Phase (2010 through 2011):  characterized by general
      availability of IPv6 in provider networks, which should be native
      IPv6; organizations should provide IPv6 connectivity for their
      Internet-facing servers, but should still provide IPv4-based
      services via a separate service name.

   Post-Transition Phase (2012 and beyond):  characterized by a
      preponderance of IPv6-based services and diminishing support for
      IPv4-based services.

   Various timelines have been discussed, but most will agree with the
   pattern of the above three transition phases, also known as an "S"
   curve transition pattern.

   In each of these phases, the coexistence problem and solution space
   have a different focus:

   Preparation Phase:  Coexistence tools are needed to facilitate early
      adopters by removing impediments to IPv6 deployment and to assure
      that nothing is lost by adopting IPv6 -- in particular, that the
      IPv6 adopter has unfettered access to the global IPv4 Internet
      regardless of whether they have a global IPv4 address (or any IPv4
      address or stack at all).  While it might appear reasonable for
      the cost and operational burden to be borne by the early adopter,
      the shared goal of promoting IPv6 adoption would argue against
      that model.  Additionally, current IPv4 users should not be forced





<span class="grey">Baker, et al.                 Informational                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


      to retire or upgrade their equipment, and the burden remains on
      service providers to carry and route native IPv4.  This is known
      as the early stage of the "S" curve.

   Transition Phase:  During the middle stage of the "S" curve, while
      IPv6 adoption can be expected to accelerate, there will still be a
      significant portion of the Internet operating IPv4-only or
      preferring IPv4.  During this phase, the norm shifts from IPv4 to
      IPv6, and coexistence tools evolve to ensure interoperability
      between domains that may be restricted to IPv4 or IPv6.

   Post-Transition Phase:  This is the last stage of the "S" curve.  In
      this phase, IPv6 is ubiquitous and the burden of maintaining
      interoperability shifts to those who choose to maintain IPv4-only
      systems.  While these systems should be allowed to live out their
      economic life cycles, the IPv4-only legacy users at the edges
      should bear the cost of coexistence tools, and at some point
      service provider networks should not be expected to carry and
      route native IPv4 traffic.

   The choice between the terms "transition" versus "coexistence" has
   engendered long philosophical debate.  "Transition" carries the sense
   that one is going somewhere, while "coexistence" seems more like one
   is sitting somewhere.  Historically with the IETF, "transition" has
   been the term of choice [<a href="rfc4213.html" title='"Basic Transition Mechanisms for IPv6 Hosts and Routers"'>RFC4213</a>] [<a href="rfc5211.html" title='"An Internet Transition Plan"'>RFC5211</a>], and the tools for
   interoperability have been called "transition mechanisms".  There is
   some perception or conventional wisdom that adoption of IPv6 is being
   impeded by the deficiency of tools to facilitate interoperability of
   nodes or networks that are constrained (in some way, fully or
   partially) from full operation in one of the address families.  In
   addition, it is apparent that transition will involve a period of
   coexistence; the only real question is how long that will last.

   Thus, coexistence is an integral part of the transition plan, not in
   conflict with it, but there will be a balancing act.  It starts out
   being a way for early IPv6 adopters to easily exploit the bigger IPv4
   Internet, and ends up being a way for late/never adopters to hang on
   with IPv4 (at their own expense, with minimal impact or visibility to
   the Internet).  One way to look at solutions is that cost incentives
   (both monetary cost and the operational overhead for the end user)
   should encourage IPv6 and discourage IPv4.  That way natural market
   forces will keep the transition moving -- especially as the legacy
   IPv4-only stuff ages out of use.  The end goal should not be to
   eliminate IPv4 by fiat, but rather render it redundant through
   ubiquitous IPv6 deployment.  IPv4 may never go away completely, but
   rational plans should move the costs of maintaining IPv4 to those who
   insist on using it after wide adoption of IPv6.




<span class="grey">Baker, et al.                 Informational                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Scenarios%20for%20IPv4%2FIPv6%20Translation"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Scenarios for IPv4/IPv6 Translation</span>

   It is important to note that the choice of translation solution and
   the assumptions about the network where they are used impact the
   consequences.  A translator for the general case has a number of
   issues that a translator for a more specific situation may not have
   at all.

   The intention of this document is to focus on translation solutions
   under all kinds of situations.  All IPv4/IPv6 translation cases can
   be easily described in terms of "interoperation between a set of
   systems (applications) that only communicate using IPv4 and a set of
   systems that only communicate using IPv6", but the differences at a
   detailed level make them interesting.

   Based on the transition plan described in <a href="#section-1.4">Section 1.4</a>, there are four
   types of IPv4/IPv6 translation cases:

   a.  Interoperation between an IPv6 network and the IPv4 Internet

   b.  Interoperation between an IPv4 network and the IPv6 Internet

   c.  Interoperation between an IPv6 network and an IPv4 network

   d.  Interoperation between the IPv6 Internet and the IPv4 Internet

   Each one of the above can be divided into two scenarios, depending on
   whether the IPv6 side or the IPv4 side initiates communication, so
   there are a total of eight scenarios.

   Scenario 1: an IPv6 network to the IPv4 Internet

   Scenario 2: the IPv4 Internet to an IPv6 network

   Scenario 3: the IPv6 Internet to an IPv4 network

   Scenario 4: an IPv4 network to the IPv6 Internet

   Scenario 5: an IPv6 network to an IPv4 network

   Scenario 6: an IPv4 network to an IPv6 network

   Scenario 7: the IPv6 Internet to the IPv4 Internet

   Scenario 8: the IPv4 Internet to the IPv6 Internet

   We will discuss each scenario in detail in the next section.




<span class="grey">Baker, et al.                 Informational                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Scenario%201%3A%20An%20IPv6%20Network%20to%20the%20IPv4%20Internet"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Scenario 1: An IPv6 Network to the IPv4 Internet</span>

   Due to the lack of IPv4 addresses or due to other technical or
   economical constraints, the network is IPv6-only, but the hosts in
   the network require communicating with the global IPv4 Internet.

   This is the typical scenario for what we sometimes call "green-field"
   deployments.  One example is an enterprise network that wishes to
   operate only IPv6 for operational simplicity, but still wishes to
   reach the content in the IPv4 Internet.  The green-field enterprise
   scenario is different from an ISP's network in the sense that there
   is only one place that the enterprise can easily modify: the border
   between its network and the IPv4 Internet.  Obviously, the IPv4
   Internet operates the way it already does.  But, in addition, the
   hosts in the enterprise network are commercially available devices,
   personal computers with existing operating systems.  This restriction
   drives us to a "one box" type of solution, where IPv6 can be
   translated into IPv4 to reach the public Internet.

   Other cases that have been mentioned include wireless ISP networks
   and sensor networks.  These bear a striking resemblance to this
   scenario as well, if one considers the ISP network to simply be a
   very special kind of enterprise network.

               --------
             //        \\       -----------
            /            \     //          \\
           /             +----+              \
          |              |XLAT|               |
          |  The IPv4    +----+  An IPv6      |
          |  Internet    +----+  Network      |  XLAT: IPv6/IPv4
          |              |DNS |               |        Translator
           \             +----+              /   DNS:  DNS64
            \            /     \\          //
             \\        //       -----------
                --------
                          &lt;====

                           Figure 1: Scenario 1

   Both stateless and stateful solutions can support Scenario 1.










<span class="grey">Baker, et al.                 Informational                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Scenario%202%3A%20The%20IPv4%20Internet%20to%20an%20IPv6%20Network"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Scenario 2: The IPv4 Internet to an IPv6 Network</span>

   When the enterprise networks or ISP networks adopt Scenario 1, the
   IPv6-only users will not only want to access servers on the IPv4
   Internet but also will want to setup their own servers in the network
   that are accessible by the users on the IPv4 Internet, since the
   majority of the Internet users are still in the IPv4 Internet.  Thus,
   with a translation solution for this scenario, the benefits would be
   clear.  Not only could servers move directly to IPv6 without trudging
   through a difficult transition period, but they could do so without
   risk of losing connectivity with the IPv4-only Internet.

               --------
             //        \\        ----------
            /            \     //          \\
           /             +----+              \
          |              |XLAT|               |
          |  The IPv4    +----+  An IPv6      |
          |  Internet    +----+  Network      |  XLAT: IPv4/IPv6
          |              |DNS |               |        Translator
           \             +----+              /   DNS:  DNS46
            \            /     \\          //
             \\        //        ----------
               --------
                          ====&gt;

                           Figure 2: Scenario 2

   In general, this scenario presents a hard case for translation.
   Stateful translation such as NAT-PT [<a href="rfc2766.html" title='"Network Address Translation - Protocol Translation (NAT-PT)"'>RFC2766</a>] can be used in this
   scenario, but it requires a tightly coupled DNS Application Level
   Gateway (ALG) in the translator, and this technique was deprecated by
   the IETF [<a href="rfc4966.html" title='"Reasons to Move the Network Address Translator - Protocol Translator (NAT-PT) to Historic Status"'>RFC4966</a>].

   The stateless translation solution in Scenario 1 can also work in
   Scenario 2, since it can support IPv4-initiated communications with a
   subset of the IPv6 addresses (IPv4-translatable addresses) in an IPv6
   network.













<span class="grey">Baker, et al.                 Informational                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3.%20%20Scenario%203%3A%20The%20IPv6%20Internet%20to%20an%20IPv4%20Network"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a>.  Scenario 3: The IPv6 Internet to an IPv4 Network</span>

   There is a requirement for a legacy IPv4 network to provide services
   to IPv6 hosts.

                                -----------
              ----------       //         \\
            //          \\    /             \
           /             +----+              \
          |              |XLAT|               |
          |  An IPv4     +----+  The IPv6     |
          |  Network     +----+  Internet     |  XLAT: IPv6/IPv4
          |              |DNS |               |        Translator
           \             +----+               /  DNS:  DNS64
            \\         //      \             /
              ---------         \\         //
                                 -----------
                         &lt;====

                           Figure 3: Scenario 3

   Stateless translation will not work for this scenario, because an
   IPv4 network needs to communicate with all of the IPv6 Internet, not
   just a small subset, and stateless can only support a subset of the
   IPv6 addresses.  However, IPv6-initiated communication can be
   achieved through stateful translation.  In this case, a Network
   Specific Prefix assigned to the translator will give the hosts unique
   IPv4-converted IPv6 addresses, no matter whether the legacy IPv4
   network uses public IPv4 addresses or [<a href="rfc1918.html" title='"Address Allocation for Private Internets"'>RFC1918</a>] addresses.  Also
   there is no need to synthesize AAAA from A records, since static AAAA
   records can be put in the regular DNS to represent these IPv4-only
   hosts as discussed in <a href="rfc6147.html#section-7.3">Section 7.3 of [RFC6147]</a>.



















<span class="grey">Baker, et al.                 Informational                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.4.%20%20Scenario%204%3A%20An%20IPv4%20Network%20to%20the%20IPv6%20Internet"></a><a class="selflink" href="#section-2.4" name="section-2.4">2.4</a>.  Scenario 4: An IPv4 Network to the IPv6 Internet</span>

   Due to technical or economical constraints, the network is IPv4-only,
   and IPv4-only hosts (applications) may require communicating with the
   global IPv6 Internet.

                                -----------
              ----------       //         \\
            //          \\    /             \
           /             +----+              \
          |              |XLAT|               |
          |  An IPv4     +----+  The IPv6     |  XLAT: IPv4/IPv6
          |  Network     +----+  Internet     |        Translator
          |              |DNS |               |  DNS:  DNS46
           \             +----+               /
            \\         //      \             /
              ---------         \\         //
                                 ----------
                         =====&gt;

                           Figure 4: Scenario 4

   In general, this scenario presents a hard case for translation.
   Stateful translation such as NAT-PT [<a href="rfc2766.html" title='"Network Address Translation - Protocol Translation (NAT-PT)"'>RFC2766</a>] can be used in this
   scenario, but it requires a tightly coupled DNS ALG in the
   translator, and this technique was deprecated by the IETF [<a href="rfc4966.html" title='"Reasons to Move the Network Address Translator - Protocol Translator (NAT-PT) to Historic Status"'>RFC4966</a>].

   From the transition phase discussion in <a href="#section-1.4">Section 1.4</a>, this scenario
   will probably only occur when we are well past the early stage of the
   "S" curve, and the IPv4/IPv6 transition has already moved to the
   right direction.  Therefore, in-network translation is not considered
   viable for this scenario, and other techniques should be considered.



















<span class="grey">Baker, et al.                 Informational                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.5.%20%20Scenario%205%3A%20An%20IPv6%20Network%20to%20an%20IPv4%20Network"></a><a class="selflink" href="#section-2.5" name="section-2.5">2.5</a>.  Scenario 5: An IPv6 Network to an IPv4 Network</span>

   In this scenario, both an IPv4 network and an IPv6 network are within
   the same organization.

   The IPv4 addresses used are either public IPv4 addresses or [<a href="rfc1918.html" title='"Address Allocation for Private Internets"'>RFC1918</a>]
   addresses.  The IPv6 addresses used are either public IPv6 addresses
   or ULAs (Unique Local Addresses) [<a href="rfc4193.html" title='"Unique Local IPv6 Unicast Addresses"'>RFC4193</a>].

              ---------          ---------
            //         \\      //          \\
           /             +----+              \
          |              |XLAT|               |
          |  An IPv4     +----+  An IPv6      |
          |  Network     +----+  Network      |  XLAT: IPv6/IPv4
          |              |DNS |               |        Translator
           \             +----+              /   DNS:  DNS64
            \\         //      \\          //
               --------          ---------
                         &lt;====

                           Figure 5: Scenario 5

   The translation requirement from this scenario has no significant
   difference from Scenario 1, so both the stateful and stateless
   translation schemes discussed in <a href="#section-2.1">Section 2.1</a> apply here.

























<span class="grey">Baker, et al.                 Informational                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.6.%20%20Scenario%206%3A%20An%20IPv4%20Network%20to%20an%20IPv6%20Network"></a><a class="selflink" href="#section-2.6" name="section-2.6">2.6</a>.  Scenario 6: An IPv4 Network to an IPv6 Network</span>

   This is another scenario when both an IPv4 network and an IPv6
   network are within the same organization.

   The IPv4 addresses used are either public IPv4 addresses or [<a href="rfc1918.html" title='"Address Allocation for Private Internets"'>RFC1918</a>]
   addresses.  The IPv6 addresses used are either public IPv6 addresses
   or ULAs (Unique Local Addresses) [<a href="rfc4193.html" title='"Unique Local IPv6 Unicast Addresses"'>RFC4193</a>].

               --------          ---------
            //         \\      //          \\
           /             +----+              \
          |              |XLAT|               |
          |  An IPv4     +----+  An IPv6      |
          |  Network     +----+  Network      |  XLAT: IPv4/IPv6
          |              |DNS |               |        Translator
           \             +----+              /   DNS:  DNS46
             \\        //      \\          //
               --------          ---------
                           ====&gt;

                           Figure 6: Scenario 6

   The translation requirement from this scenario has no significant
   difference from Scenario 2, so the translation scheme discussed in
   <a href="#section-2.2">Section 2.2</a> applies here.

























<span class="grey">Baker, et al.                 Informational                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.7.%20%20Scenario%207%3A%20The%20IPv6%20Internet%20to%20the%20IPv4%20Internet"></a><a class="selflink" href="#section-2.7" name="section-2.7">2.7</a>.  Scenario 7: The IPv6 Internet to the IPv4 Internet</span>

   This seems the ideal case for in-network translation technology,
   where any IPv6-only host or application on the global Internet can
   initiate communication with any IPv4-only host or application on the
   global Internet.

               --------          ---------
             //       \\        //        \\
            /           \      /            \
           /             +----+              \
          |              |XLAT|               |
          |  The IPv4    +----+  The IPv6     |
          |  Internet    +----+  Internet     |  XLAT: IPv6/IPv4
          |              |DNS |               |        Translator
           \             +----+              /   DNS:  DNS64
             \          /      \            /
              \\      //        \\        //
               --------          ---------
                         &lt;====

                           Figure 7: Scenario 7

   Due to the huge difference in size between the address spaces of the
   IPv4 Internet and the IPv6 Internet, there is no viable translation
   technique to handle unlimited IPv6 address translation.

   If we ever run into this scenario, fortunately, the IPv4/IPv6
   transition has already passed the early stage of the "S" curve.
   Therefore, there is no obvious business reason to demand a
   translation solution as the only transition strategy.




















<span class="grey">Baker, et al.                 Informational                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.8.%20%20Scenario%208%3A%20The%20IPv4%20Internet%20to%20the%20IPv6%20Internet"></a><a class="selflink" href="#section-2.8" name="section-2.8">2.8</a>.  Scenario 8: The IPv4 Internet to the IPv6 Internet</span>

   This case is very similar to Scenario 7.  The analysis and
   conclusions for Scenario 7 also apply for this scenario.

               --------          ---------
             //       \\        //        \\
            /           \      /            \
           /             +----+              \
          |              |XLAT|               |
          |  The IPv4    +----+  The IPv6     |
          |  Internet    +----+  Internet     |  XLAT: IPv4/IPv6
          |              |DNS |               |        Translator
           \             +----+              /   DNS:  DNS46
             \          /      \            /
              \\      //        \\        //
               --------          ---------
                           ====&gt;

                           Figure 8: Scenario 8

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Framework"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Framework</span>

   Having laid out the preferred transition model and the options for
   implementing it (<a href="#section-1.1">Section 1.1</a>), defined terms (<a href="#section-1.2">Section 1.2</a>),
   considered the requirements (<a href="#section-1.3">Section 1.3</a>), considered the transition
   model (<a href="#section-1.4">Section 1.4</a>), and considered the kinds of scenarios the
   facility would support (<a href="#section-2">Section 2</a>), we now turn to a framework for
   IPv4/IPv6 translation.  The framework contains the following
   components:

   o  Address translation

   o  IP and ICMP translation

   o  Maintaining translation state

   o  DNS64 and DNS46

   o  ALGs for other application-layer protocols (e.g., FTP)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Translation%20Components"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Translation Components</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.1.%20%20Address%20Translation"></a><a class="selflink" href="#section-3.1.1" name="section-3.1.1">3.1.1</a>.  Address Translation</span>

   When IPv6/IPv4 translation is performed, we should specify how an
   individual IPv6 address is translated to a corresponding IPv4
   address, and vice versa, in cases where an algorithmic mapping is



<span class="grey">Baker, et al.                 Informational                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


   used.  This includes the choice of IPv6 prefix and the choice of
   method by which the remainder of the IPv6 address is derived from an
   IPv4 address [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>].  The usages of the IPv6 addresses are shown
   in the following figures.

          ------------
    H4 - (IPv4 network) - IPv4 address corresponding to H6's IPv4-
    (IPv4 ------------            translatable address
    address)          \
                       --------------
                      |Stateless XLAT|
                       --------------
                                     \
                                     -----------
    IPv4-converted address of H4 - (IPv6 network) - H6 (IPv4-
                                     -----------   translatable address)

      Figure 9: IPv6 Address Representation for Stateless Translation


         ------------
   H4 - (IPv4 network) - IPv4 address in the translator's IPv4 pool
   (IPv4 ------------
   address)          \
                      --------------
                     |Stateful XLAT |
                      --------------
                                    \
                                    -----------
   IPv4-converted address of H4 - (IPv6 network) - H6 (any IPv6 address)
                                    -----------

      Figure 10: IPv6 Address Representation for Stateful Translation

   For both stateless and stateful translation, an algorithmic mapping
   table is used to translate IPv6 destination addresses (IPv4-converted
   addresses) to IPv4 destination addresses in the IPv6-to-IPv4
   direction and translate IPv4 source addresses to IPv6 source
   addresses (IPv4-converted addresses) in the IPv4-to-IPv6 direction.
   Note that translating IPv6 source addresses to IPv4 source addresses
   in the IPv6-to-IPv4 direction and translating IPv4 destination
   addresses to IPv6 destination addresses in the IPv4-to-IPv6 direction
   will be different for stateless translation and stateful translation.

   o  For stateless translation, the same algorithmic mapping table is
      used to translate IPv6 source addresses (IPv4-translatable
      addresses) to IPv4 source addresses in the IPv6-to-IPv4 direction
      and translate IPv4 destination addresses to IPv6 destination



<span class="grey">Baker, et al.                 Informational                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


      addresses (IPv4-translatable addresses) in the IPv4-to-IPv6
      direction.  In this case, blocks of the service provider's IPv4
      addresses are mapped into IPv6 and used by physical IPv6 nodes.
      The original IPv4 form of these blocks of the service provider's
      IPv4 addresses are used to represent the physical IPv6 nodes in
      IPv4.  Note that stateless translation supports both IPv6
      initiated as well as IPv4 initiated communications.

   o  For stateful translation, the algorithmic mapping table is not
      used to translate source addresses in the IPv6-to-IPv4 direction
      and destination addresses in the IPv4-to-IPv6 direction.  Instead,
      a state table is used to translate IPv6 source addresses to IPv4
      source addresses in the IPv6-to-IPv4 direction and translate IPv4
      destination addresses to IPv6 destination addresses in the IPv4-
      to-IPv6 direction.  In this case, blocks of the service provider's
      IPv4 addresses are maintained in the translator as the IPv4
      address pools and are dynamically bound to specific IPv6
      addresses.  The original IPv4 form of these blocks of the service
      provider's IPv4 addresses is used to represent the IPv6 address in
      IPv4.  However, due to the dynamic binding, stateful translation
      in general only supports IPv6-initiated communication.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.2.%20%20IP%20and%20ICMP%20Translation"></a><a class="selflink" href="#section-3.1.2" name="section-3.1.2">3.1.2</a>.  IP and ICMP Translation</span>

   The IPv4/IPv6 translator is based on the update to the Stateless IP/
   ICMP Translation Algorithm (SIIT) described in [<a href="rfc2765.html" title='"Stateless IP/ICMP Translation Algorithm (SIIT)"'>RFC2765</a>].  The
   algorithm translates between IPv4 and IPv6 packet headers (including
   ICMP headers).

   The IP and ICMP translation document [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>] discusses header
   translation for both stateless and stateful modes, but does not cover
   maintaining state in the stateful mode.  In the stateless mode,
   translation is performed using a combination of information carried
   in the address and information configured in the translator.  This
   permits both IPv4-&gt;IPv6 and IPv6-&gt;IPv4 session establishment.  In the
   stateful mode, translation state is maintained between IPv4 address/
   transport port tuples and IPv6 address/transport port tuples,
   enabling IPv6 systems to open sessions with IPv4 systems.  The choice
   of operational mode is made by the operator deploying the network and
   is critical to the operation of the applications using it.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.3.%20%20Maintaining%20Translation%20State"></a><a class="selflink" href="#section-3.1.3" name="section-3.1.3">3.1.3</a>.  Maintaining Translation State</span>

   For the stateful translator, besides IP and ICMP translation, special
   action must be taken to maintain the translation states.  [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>]
   describes a mechanism for maintaining state.





<span class="grey">Baker, et al.                 Informational                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.4.%20%20DNS64%20and%20DNS46"></a><a class="selflink" href="#section-3.1.4" name="section-3.1.4">3.1.4</a>.  DNS64 and DNS46</span>

   DNS64 [<a href="rfc6147.html" title='"DNS64: DNS extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>] and possible future DNS46 documents describe the
   mechanisms by which a DNS translator is intended to operate.  It is
   designed to operate on the basis of known address translation
   algorithms defined in [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>].

   There are at least two possible implementations of a DNS64 and DNS46:

   Static records:  One could literally populate DNS with corresponding
      A and AAAA records.  This mechanism works for scenarios 2, 3, 5,
      and 6.

   Dynamic Translation of static records:  In more general operation,
      the preferred behavior is an A record to be (retrieved and)
      translated to a AAAA record by the DNS64 if and only if no
      reachable AAAA record exists, or for a AAAA record to be
      (retrieved and) translated to an A record by the DNS46 if and only
      if no reachable A record exists.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.5.%20%20ALGs%20for%20Other%20Applications%20Layer%20Protocols"></a><a class="selflink" href="#section-3.1.5" name="section-3.1.5">3.1.5</a>.  ALGs for Other Applications Layer Protocols</span>

   In addition, some applications require special support.  An example
   is FTP.  FTP's active mode doesn't work well across NATs without
   extra support such as SOCKS [<a href="rfc1928.html" title='"SOCKS Protocol Version 5"'>RFC1928</a>] [<a href="rfc3089.html" title='"A SOCKS-based IPv6/IPv4 Gateway Mechanism"'>RFC3089</a>].  Across NATs, it
   generally uses passive mode.  However, the designers of FTP wrote
   different and incompatible passive-mode implementations for IPv4 and
   IPv6 networks.  Hence, either they need to fix FTP, or a translator
   must be written for the application.  Other applications may be
   similarly broken.

   As a general rule, a simple operational recommendation will work
   around many application issues: there should be a server in each
   domain, or an instance of the server should have an interface in each
   domain.  For example, an SMTP MTA may be confused by finding an IPv6
   address in its HELO when it is connected to using IPv4 (or vice
   versa), but would work perfectly well if it had an interface in both
   the IPv4 and IPv6 domains and was used as an application-layer bridge
   between them.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Operation%20Mode%20for%20Specific%20Scenarios"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Operation Mode for Specific Scenarios</span>

   Currently, the proposed solutions for IPv6/IPv4 translation are
   classified into stateless translation and stateful translation.







<span class="grey">Baker, et al.                 Informational                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.%20%20Stateless%20Translation"></a><a class="selflink" href="#section-3.2.1" name="section-3.2.1">3.2.1</a>.  Stateless Translation</span>

   For stateless translation, the translation information is carried in
   the address itself plus configuration in the translators, permitting
   both IPv4-&gt;IPv6 and IPv6-&gt;IPv4 session initiation.  Stateless
   translation supports end-to-end address transparency and has better
   scalability compared with stateful translation [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>].

   The stateless translation mechanisms typically put constraints on
   what IPv6 addresses can be assigned to IPv6 nodes that want to
   communicate with IPv4 destinations using an algorithmic mapping.  For
   Scenario 1 ("an IPv6 network to the IPv4 Internet"), it is not a
   serious drawback, since the address assignment policy can be applied
   to satisfy this requirement for the IPv6 nodes that need to
   communicate with the IPv4 Internet.  In addition, stateless
   translation supports Scenario 2 ("the IPv4 Internet to an IPv6
   network"), which means that not only could servers move directly to
   IPv6 without trudging through a difficult transition period, but also
   they could do so without risk of losing connectivity with the IPv4-
   only Internet.

   Stateless translation can be used for Scenarios 1, 2, 5, and 6, i.e.,
   it supports "an IPv6 network to the IPv4 Internet", "the IPv4
   Internet to an IPv6 network", "an IPv6 network to an IPv4 network",
   and "an IPv4 network to an IPv6 network".


























<span class="grey">Baker, et al.                 Informational                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


            --------
         //        \\       -----------
        /            \     //          \\
       /             +----+              \
      |              |XLAT|               |
      |  The IPv4    +----+  An IPv6      |
      |  Internet    +----+  Network      |  XLAT: Stateless IPv4/IPv6
      |              |DNS |  (address     |        Translator
       \             +----+   subset)    /   DNS:  DNS64/DNS46
        \            /     \\          //
         \\        //        ----------
           --------
                     &lt;====&gt;

          Figure 11: Stateless Translation for Scenarios 1 and 2


           --------          ---------
        //         \\      //          \\
       /             +----+              \
      |              |XLAT|               |
      |  An IPv4     +----+  An IPv6      |
      |  Network     +----+  Network      |  XLAT: Stateless IPv4/IPv6
      |              |DNS |  (address     |        Translator
       \             +----+   subset)    /   DNS:  DNS64/DNS46
         \\        //      \\          //
           --------          ---------
                     &lt;====&gt;

          Figure 12: Stateless Translation for Scenarios 5 and 6

   The implementation of the stateless translator needs to refer to
   [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>] and [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.2.%20%20Stateful%20Translation"></a><a class="selflink" href="#section-3.2.2" name="section-3.2.2">3.2.2</a>.  Stateful Translation</span>

   For stateful translation, the translation state is maintained between
   IPv4 address/port pairs and IPv6 address/port pairs, enabling IPv6
   systems to open sessions with IPv4 systems [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>] [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>].

   Stateful translation can be used for Scenarios 1, 3, and 5, i.e., it
   supports "an IPv6 network to the IPv4 Internet", "the IPv6 Internet
   to an IPv4 network", and "an IPv6 network to an IPv4 network".

   For Scenario 1, any IPv6 addresses in an IPv6 network can use
   stateful translation; however, it typically only supports initiation
   from the IPv6 side.  In addition, it does not result in stable
   addresses of IPv6 nodes that can be used in DNS, which may cause



<span class="grey">Baker, et al.                 Informational                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


   problems for the protocols and applications that do not deal well
   with highly dynamic addresses.

           --------
         //        \\       -----------
        /            \     //          \\
       /             +----+              \
      |              |XLAT|               |
      |  The IPv4    +----+  An IPv6      |
      |  Internet    +----+  Network      |  XLAT: Stateful IPv4/IPv6
      |              |DNS |               |        Translator
       \             +----+              /   DNS:  DNS64
        \            /     \\          //
         \\        //       -----------
           --------
                      &lt;====

              Figure 13: Stateful Translation for Scenario 1

   Scenario 3 handles servers using IPv4 private addresses [<a href="rfc1918.html" title='"Address Allocation for Private Internets"'>RFC1918</a>] and
   being reached from the IPv6 Internet.  This includes cases of servers
   that for some reason cannot be upgraded to IPv6 and don't have public
   IPv4 addresses, and yet need to be reached by IPv6 nodes in the IPv6
   Internet.

                            -----------
          ----------       //         \\
         //          \\    /             \
       /             +----+              \
      |              |XLAT|               |
      |  An IPv4     +----+  The IPv6     |
      |  Network     +----+  Internet     |  XLAT: Stateful IPv4/IPv6
      |              |DNS |               |        Translator
       \             +----+               /  DNS:  DNS64
        \\         //      \             /
          ---------         \\         //
                            -----------
                      &lt;====

              Figure 14: Stateful Translation for Scenario 3











<span class="grey">Baker, et al.                 Informational                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


   Similarly, stateful translation can also be used for Scenario 5.

           --------          ---------
        //         \\      //          \\
       /             +----+              \
      |              |XLAT|               |
      |  An IPv4     +----+  An IPv6      |
      |  Network     +----+  Network      |  XLAT: Stateful IPv4/IPv6
      |              |DNS |               |        Translator
       \             +----+              /   DNS:  DNS64
         \\        //      \\          //
           --------          ---------
                      &lt;====

              Figure 15: Stateful Translation for Scenario 5

   The implementation of the stateful translator needs to refer to
   [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>], [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>], and [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20Layout%20of%20the%20Related%20Documents"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  Layout of the Related Documents</span>

   Based on the above analysis, the IPv4/IPv6 translation series
   consists of the following documents.

   o  Framework for IPv4/IPv6 Translation (this document).

   o  Address translation (the choice of IPv6 prefix and the choice of
      method by which the remainder of the IPv6 address is derived from
      an IPv4 address, part of the SIIT update) [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>].

   o  IP and ICMP Translation (header translation and ICMP handling,
      part of the SIIT update) [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>].

   o  Table maintenance (stateful translation including session database
      and mapping table handling) [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>].

   o  DNS64 (DNS64: A to AAAA mapping and DNSSEC discussion) [<a href="rfc6147.html" title='"DNS64: DNS extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>].

   o  FTP ALG [<a href="#ref-FTP64" title='"An FTP ALG for IPv6-to-IPv4 translation"'>FTP64</a>].

   o  Others (DNS46, Multicast, etc.).

   The relationship among these documents is shown in the following
   figure.







<span class="grey">Baker, et al.                 Informational                    [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


               -----------------------------------------
              |   Framework for IPv4/IPv6 Translation  |
               -----------------------------------------
                 ||                                 ||
    -------------------------------------------------------------------
   |             ||     stateless and stateful      ||                 |
   |   --------------------                   ---------------------    |
   |  |Address Translation |   &lt;========     | IP/ICMP Translation |   |
   |   --------------------                   ---------------------    |
   |          /\                                        /\             |
   |          ||                      ------------------||------------ |
   |          ||                     |  stateful        \/             |
   |   -----------------             |        ---------------------    |
   |  |   DNS64/DNS46   |            |       |  Table Maintenance  |   |
   |   -----------------             |        ---------------------    |
    -------------------------------------------------------------------
              /\                                        /\
              ||                                        ||
       -----------------                       --------------------
      |     FTP ALG     |                     |      Others        |
       -----------------                       --------------------

                        Figure 16: Document Layout

   In the document layout, the IP/ICMP Translation and DNS64/DNS46
   normatively refer to Address Translation.  The Table Maintenance and
   IP/ICMP Translation normatively refer to each other.

   The FTP ALG and other documents normatively refer to the Address
   Format, IP/ICMP Translation, and Table Maintenance documents.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Translation%20in%20Operation"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Translation in Operation</span>

   Operationally, there are two ways that translation could be used --
   as a permanent solution thereby making transition "the other guy's
   problem", and as a temporary solution for a new part of one's network
   while bringing up IPv6 services in the remaining parts of one's
   network.  We obviously recommend the latter at the present stage.
   For the IPv4 parts of the network, [<a href="rfc4213.html" title='"Basic Transition Mechanisms for IPv6 Hosts and Routers"'>RFC4213</a>]'s recommendation holds.
   Bring IPv6 up in those domains, move production to it, and then take
   down the now-unnecessary IPv4 service when economics warrant.  This
   approach to transition entails the least risk.









<span class="grey">Baker, et al.                 Informational                    [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


                           ----------------------
                    //////                        \\\\\\
                ///         IPv4 or Dual Stack           \\\
              ||    +----+      Routing          +-----+    ||
             |      |IPv4|                       |IPv4+|      |
             |      |Host|                       |IPv6 |      |
              ||    +----+                       |Host |    ||
                \\\                              +-----+ ///
                    \\\\\----+----+-+-----+ +----+-/////
                             |XLAT|-|DNS64|-|FTP |
                             |    |-|DNS46|-|ALG |
                    /////----+----+ +-----+ +----+-\\\\\
                ///                                      \\\
              ||    +-----+                     +----+      ||
             |      |IPv4+|                     |IPv6|        |
             |      |IPv6 |                     |Host|        |
              ||    |Host |                     +----+      ||
                \\\ +-----+  IPv6-only Routing           ///
                    \\\\\\                        //////
                           ----------------------

                 Figure 17: Translation Operational Model

   Figure 17 shows that, during the coexistence phase, one expects a
   combination of hosts, applications, and networks.  Hosts might
   include IPv6-only gaming devices and handsets, older computer
   operating systems that are IPv4-only, and modern mainline operating
   systems that support both.  Applications might include ones that are
   IPv4-only and modern applications that support both IPv4 and IPv6.
   Networks might include dual-stack devices operating in single-stack
   networks (whether that stack is IPv4 or IPv6) and fully functional
   dual-stack networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Unsolved%20Problems"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Unsolved Problems</span>

   The framework does not cover all possible scenarios, and it may be
   extended in the future to address them.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   This document is the framework of IPv4/IPv6 translation.  The
   security issues are addressed in individual IPv4/IPv6 translation
   documents, i.e., [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>], [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>], [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>], [<a href="rfc6147.html" title='"DNS64: DNS extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>], and
   [<a href="#ref-FTP64" title='"An FTP ALG for IPv6-to-IPv4 translation"'>FTP64</a>].







<span class="grey">Baker, et al.                 Informational                    [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Acknowledgements"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Acknowledgements</span>

   This is under development by a large group of people.  Those who have
   posted to the list during the discussion include Andrew Sullivan,
   Andrew Yourtchenko, Bo Zhou, Brian Carpenter, Dan Wing, Dave Thaler,
   David Harrington, Ed Jankiewicz, Gang Chen, Hui Deng, Hiroshi Miyata,
   Iljitsch van Beijnum, John Schnizlein, Magnus Westerlund, Marcelo
   Bagnulo Braun, Margaret Wasserman, Masahito Endo, Phil Roberts,
   Philip Matthews, Remi Denis-Courmont, and Remi Despres.

   Ed Jankiewicz described the transition plan.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC6052" name="ref-RFC6052">RFC6052</a>]  Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and X.
              Li, "IPv6 Addressing of IPv4/IPv6 Translators", <a href="rfc6052.html">RFC 6052</a>,
              October 2010.

   [<a id="ref-RFC6145" name="ref-RFC6145">RFC6145</a>]  Li, X., Bao, C., and F. Baker, "IP/ICMP Translation
              Algorithm", <a href="rfc6145.html">RFC 6145</a>, April 2011.

   [<a id="ref-RFC6146" name="ref-RFC6146">RFC6146</a>]  Bagnulo, M., Matthews, P., and I. Beijnum, "Stateful
              NAT64: Network Address and Protocol Translation from IPv6
              Clients to IPv4 Servers", <a href="rfc6146.html">RFC 6146</a>, April 2011.

   [<a id="ref-RFC6147" name="ref-RFC6147">RFC6147</a>]  Bagnulo, M., Sullivan, A., Matthews, P., and I. Beijnum,
              "DNS64: DNS extensions for Network Address Translation
              from IPv6 Clients to IPv4 Servers", <a href="rfc6147.html">RFC 6147</a>, April 2011.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-6NET" name="ref-6NET">6NET</a>]     6NET Consortium, "6NET", &lt;<a href="http://www.6net.org/">http://www.6net.org/</a>&gt;.

   [<a id="ref-DS-LITE" name="ref-DS-LITE">DS-LITE</a>]  Durand, A., Droms, R., Woodyatt, J., and Y. Lee, "Dual-
              Stack Lite Broadband Deployments Following IPv4
              Exhaustion", Work in Progress, March 2011.

   [<a id="ref-FTP64" name="ref-FTP64">FTP64</a>]    Beijnum, I., <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22An+FTP+ALG+for+IPv6-to-IPv4+translation%22" style="text-decoration: none">"An FTP ALG for IPv6-to-IPv4 translation"</a>,
              Work in Progress, March 2011.

   [<a id="ref-RFC1918" name="ref-RFC1918">RFC1918</a>]  Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G., and
              E. Lear, "Address Allocation for Private Internets",
              <a href="https://tools.ietf.org/html/bcp5">BCP 5</a>, <a href="rfc1918.html">RFC 1918</a>, February 1996.

   [<a id="ref-RFC1923" name="ref-RFC1923">RFC1923</a>]  Halpern, J. and S. Bradner, "RIPv1 Applicability Statement
              for Historic Status", <a href="rfc1923.html">RFC 1923</a>, March 1996.



<span class="grey">Baker, et al.                 Informational                    [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


   [<a id="ref-RFC1928" name="ref-RFC1928">RFC1928</a>]  Leech, M., Ganis, M., Lee, Y., Kuris, R., Koblas, D., and
              L. Jones, "SOCKS Protocol Version 5", <a href="rfc1928.html">RFC 1928</a>,
              March 1996.

   [<a id="ref-RFC2765" name="ref-RFC2765">RFC2765</a>]  Nordmark, E., "Stateless IP/ICMP Translation Algorithm
              (SIIT)", <a href="rfc2765.html">RFC 2765</a>, February 2000.

   [<a id="ref-RFC2766" name="ref-RFC2766">RFC2766</a>]  Tsirtsis, G. and P. Srisuresh, "Network Address
              Translation - Protocol Translation (NAT-PT)", <a href="rfc2766.html">RFC 2766</a>,
              February 2000.

   [<a id="ref-RFC3056" name="ref-RFC3056">RFC3056</a>]  Carpenter, B. and K. Moore, "Connection of IPv6 Domains
              via IPv4 Clouds", <a href="rfc3056.html">RFC 3056</a>, February 2001.

   [<a id="ref-RFC3089" name="ref-RFC3089">RFC3089</a>]  Kitamura, H., "A SOCKS-based IPv6/IPv4 Gateway Mechanism",
              <a href="rfc3089.html">RFC 3089</a>, April 2001.

   [<a id="ref-RFC4192" name="ref-RFC4192">RFC4192</a>]  Baker, F., Lear, E., and R. Droms, "Procedures for
              Renumbering an IPv6 Network without a Flag Day", <a href="rfc4192.html">RFC 4192</a>,
              September 2005.

   [<a id="ref-RFC4193" name="ref-RFC4193">RFC4193</a>]  Hinden, R. and B. Haberman, "Unique Local IPv6 Unicast
              Addresses", <a href="rfc4193.html">RFC 4193</a>, October 2005.

   [<a id="ref-RFC4213" name="ref-RFC4213">RFC4213</a>]  Nordmark, E. and R. Gilligan, "Basic Transition Mechanisms
              for IPv6 Hosts and Routers", <a href="rfc4213.html">RFC 4213</a>, October 2005.

   [<a id="ref-RFC4380" name="ref-RFC4380">RFC4380</a>]  Huitema, C., "Teredo: Tunneling IPv6 over UDP through
              Network Address Translations (NATs)", <a href="rfc4380.html">RFC 4380</a>,
              February 2006.

   [<a id="ref-RFC4864" name="ref-RFC4864">RFC4864</a>]  Van de Velde, G., Hain, T., Droms, R., Carpenter, B., and
              E. Klein, "Local Network Protection for IPv6", <a href="rfc4864.html">RFC 4864</a>,
              May 2007.

   [<a id="ref-RFC4966" name="ref-RFC4966">RFC4966</a>]  Aoun, C. and E. Davies, "Reasons to Move the Network
              Address Translator - Protocol Translator (NAT-PT) to
              Historic Status", <a href="rfc4966.html">RFC 4966</a>, July 2007.

   [<a id="ref-RFC5211" name="ref-RFC5211">RFC5211</a>]  Curran, J., "An Internet Transition Plan", <a href="rfc5211.html">RFC 5211</a>,
              July 2008.

   [<a id="ref-RFC5214" name="ref-RFC5214">RFC5214</a>]  Templin, F., Gleeson, T., and D. Thaler, "Intra-Site
              Automatic Tunnel Addressing Protocol (ISATAP)", <a href="rfc5214.html">RFC 5214</a>,
              March 2008.






<span class="grey">Baker, et al.                 Informational                    [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc6144.html">RFC 6144</a>           Framework for IPv4/IPv6 Translation        April 2011</span>


Authors' Addresses

   Fred Baker
   Cisco Systems
   Santa Barbara, California  93117
   USA

   Phone: +1-408-526-4257
   Fax:   +1-413-473-2403
   EMail: fred@cisco.com


   Xing Li
   CERNET Center/Tsinghua University
   Room 225, Main Building, Tsinghua University
   Beijing,   100084
   China

   Phone: +86 10-62785983
   EMail: xing@cernet.edu.cn


   Congxiao Bao
   CERNET Center/Tsinghua University
   Room 225, Main Building, Tsinghua University
   Beijing,   100084
   China

   Phone: +86 10-62785983
   EMail: congxiao@cernet.edu.cn


   Kevin Yin
   Cisco Systems
   No. 2 Jianguomenwai Ave, Chaoyang District
   Beijing,   100022
   China

   Phone: +86-10-8515-5094
   EMail: kyin@cisco.com











Baker, et al.                 Informational                    [Page 31]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6144 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:31 GMT --></html>