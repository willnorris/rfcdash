<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from tools.ietf.org/html/rfc6530 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 12:43:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129c" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Relation.Replaces" content="rfc4952" />
<meta name="DC.Relation.Replaces" content="rfc5504" />
<meta name="DC.Relation.Replaces" content="rfc5825" />
<meta name="DC.Identifier" content="urn:ietf:rfc:6530" />
<meta name="DC.Date.Issued" content="February, 2012" />
<meta name="DC.Creator" content="Ko, Y." />
<meta name="DC.Creator" content="Klensin, J." />
<meta name="DC.Description.Abstract" content="Full use of electronic mail throughout the world requires that,
subject to other constraints, people be able to use close variations
on their own names, written correctly in their own languages and
scripts, as mailbox names in email addresses. This document introduces
a series of specifications that define mechanisms and protocol
extensions needed to fully support internationalized email addresses.
These changes include an SMTP extension and extension of email header
syntax to accommodate UTF-8 data. The document set also includes
discussion of key assumptions and issues in deploying fully
internationalized email. This document is an update of RFC 4952 that
reflects additional issues identified since that document was
published." />
<meta name="DC.Title" content="Overview and Framework for Internationalized Email" />

    <link rel="icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <title>RFC 6530 - Overview and Framework for Internationalized Email</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgblue"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6530.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6530" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-eai-frmwrk-4952bis" title="draft-ietf-eai-frmwrk-4952bis">draft-ietf-eai-...</a>] [<a href='https://datatracker.ietf.org/doc/rfc6530' title='IESG Datatracker information for this document'>Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6530" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6530" title="Side-by-side diff">Diff2</a>]         </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Internet Engineering Task Force (IETF)                        J. Klensin
Request for Comments: 6530                                         Y. Ko
Obsoletes: <a href="rfc4952.html">4952</a>, <a href="rfc5504.html">5504</a>, <a href="rfc5825.html">5825</a>                                February 2012
Category: Standards Track
ISSN: 2070-1721


           <span class="h1">Overview and Framework for Internationalized Email</span>

Abstract

   Full use of electronic mail throughout the world requires that
   (subject to other constraints) people be able to use close variations
   on their own names (written correctly in their own languages and
   scripts) as mailbox names in email addresses.  This document
   introduces a series of specifications that define mechanisms and
   protocol extensions needed to fully support internationalized email
   addresses.  These changes include an SMTP extension and extension of
   email header syntax to accommodate UTF-8 data.  The document set also
   includes discussion of key assumptions and issues in deploying fully
   internationalized email.  This document is a replacement for <a href="rfc4952.html">RFC</a>
   <a href="rfc4952.html">4952</a>; it reflects additional issues identified since that document
   was published.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6530">http://www.rfc-editor.org/info/rfc6530</a>.

Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect



<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 1]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.



































<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 2]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Role of This Specification . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  Problem Statement  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
   <a href="#section-4">4</a>.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-4.1">4.1</a>.  Mail User and Mail Transfer Agents . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-4.2">4.2</a>.  Address Character Sets . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-4.3">4.3</a>.  User Types . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-4.4">4.4</a>.  Messages . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-4.5">4.5</a>.  Mailing Lists  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-4.6">4.6</a>.  Conventional Message and Internationalized Message . . . .  <a href="#page-8">8</a>
     4.7.  Undeliverable Messages, Notification, and Delivery
           Receipts . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
   <a href="#section-5">5</a>.  Overview of the Approach and Document Plan . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-6">6</a>.  Review of Experimental Results . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-7">7</a>.  Overview of Protocol Extensions and Changes  . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-7.1">7.1</a>.  SMTP Extension for Internationalized Email Address . . . . <a href="#page-10">10</a>
     <a href="#section-7.2">7.2</a>.  Transmission of Email Header Fields in UTF-8 Encoding  . . <a href="#page-11">11</a>
     <a href="#section-7.3">7.3</a>.  SMTP Service Extension for DSNs  . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-8">8</a>.  Downgrading before and after SMTP Transactions . . . . . . . . <a href="#page-12">12</a>
     <a href="#section-8.1">8.1</a>.  Downgrading before or during Message Submission  . . . . . <a href="#page-13">13</a>
     8.2.  Downgrading or Other Processing after Final SMTP
           Delivery . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-14">14</a>
   <a href="#section-9">9</a>.  Downgrading in Transit . . . . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
   <a href="#section-10">10</a>. User Interface and Configuration Issues  . . . . . . . . . . . <a href="#page-15">15</a>
     <a href="#section-10.1">10.1</a>. Choices of Mailbox Names and Unicode Normalization . . . . <a href="#page-15">15</a>
   <a href="#section-11">11</a>. Additional Issues  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-11.1">11.1</a>. Impact on URIs and IRIs  . . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-11.2">11.2</a>. Use of Email Addresses as Identifiers  . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-11.3">11.3</a>. Encoded Words, Signed Messages, and Downgrading  . . . . . <a href="#page-18">18</a>
     <a href="#section-11.4">11.4</a>. Other Uses of Local Parts  . . . . . . . . . . . . . . . . <a href="#page-18">18</a>
     <a href="#section-11.5">11.5</a>. Non-Standard Encapsulation Formats . . . . . . . . . . . . <a href="#page-19">19</a>
   <a href="#section-12">12</a>. Key Changes from the Experimental Protocols and Framework  . . <a href="#page-19">19</a>
   <a href="#section-13">13</a>. Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
   <a href="#section-14">14</a>. Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-21">21</a>
   <a href="#section-15">15</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-21">21</a>
     <a href="#section-15.1">15.1</a>. Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-21">21</a>
     <a href="#section-15.2">15.2</a>. Informative References . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>












<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 3]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>.  Introduction</span>

   In order to use internationalized email addresses, it is necessary to
   internationalize both the domain part and the local part of email
   addresses.  The domain part of email addresses is already
   internationalized [<a href="rfc5890.html" title="&quot;Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework&quot;">RFC5890</a>], while the local part is not.  Without
   the extensions specified in this document, the mailbox name is
   restricted to a subset of 7-bit ASCII [<a href="rfc5321.html" title="&quot;Simple Mail Transfer Protocol&quot;">RFC5321</a>].  Though MIME
   [<a href="rfc2045.html" title="&quot;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies&quot;">RFC2045</a>] enables the transport of non-ASCII data, it does not
   provide a mechanism for internationalized email addresses.  In <a href="rfc2047.html">RFC</a>
   <a href="rfc2047.html">2047</a> [<a href="rfc2047.html" title="&quot;MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text&quot;">RFC2047</a>], MIME defines an encoding mechanism for some specific
   message header fields to accommodate non-ASCII data.  However, it
   does not permit the use of email addresses that include non-ASCII
   characters.  Without the extensions defined here, or some equivalent
   set, the only way to incorporate non-ASCII characters in any part of
   email addresses is to use <a href="rfc2047.html">RFC 2047</a> coding to embed them in what <a href="rfc5322.html">RFC</a>
   <a href="rfc5322.html">5322</a> [<a href="rfc5322.html" title="&quot;Internet Message Format&quot;">RFC5322</a>] calls the "display name" (known as a "name phrase" or
   by other terms elsewhere) of the relevant header fields.  Information
   coded into the display name is invisible in the message envelope and,
   for many purposes, is not part of the address at all.

   This document is a replacement for <a href="rfc4952.html">RFC 4952</a> [<a href="rfc4952.html" title="&quot;Overview and Framework for Internationalized Email&quot;">RFC4952</a>]; it reflects
   additional issues, shared terminology, and some architectural changes
   identified since that document was published.  It obsoletes that
   document.  The experimental descriptions of in-transit downgrading
   [<a href="rfc5504.html" title="&quot;Downgrading Mechanism for Email Address Internationalization&quot;">RFC5504</a>] [<a href="rfc5825.html" title="&quot;Displaying Downgraded Messages for Email Address Internationalization&quot;">RFC5825</a>] are now irrelevant and no longer needed due to
   the changes discussed in <a href="#section-12">Section 12</a>.  The RFC Editor is requested to
   move all three of those documents to Historic.

   The pronouns "he" and "she" are used interchangeably to indicate a
   human of indeterminate gender.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>
   [<a href="rfc2119.html" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>.  Role of This Specification</span>

   This document presents the overview and framework for an approach to
   the next stage of email internationalization.  This new stage
   requires not only internationalization of addresses and header
   fields, but also associated transport and delivery models.  A prior
   version of this specification, <a href="rfc4952.html">RFC 4952</a> [<a href="rfc4952.html" title="&quot;Overview and Framework for Internationalized Email&quot;">RFC4952</a>], also provided an
   introduction to a series of experimental protocols [<a href="rfc5335.html" title="&quot;Internationalized Email Headers&quot;">RFC5335</a>]
   [<a href="rfc5336.html" title="&quot;SMTP Extension for Internationalized Email Addresses&quot;">RFC5336</a>] [<a href="rfc5337.html" title="&quot;Internationalized Delivery Status and Disposition Notifications&quot;">RFC5337</a>] [<a href="rfc5504.html" title="&quot;Downgrading Mechanism for Email Address Internationalization&quot;">RFC5504</a>] [<a href="rfc5721.html" title="&quot;POP3 Support for UTF-8&quot;">RFC5721</a>] [<a href="rfc5738.html" title="&quot;IMAP Support for UTF-8&quot;">RFC5738</a>] [<a href="rfc5825.html" title="&quot;Displaying Downgraded Messages for Email Address Internationalization&quot;">RFC5825</a>].  This
   revised form provides overview and conceptual information for the
   Standards Track successors of a subset of those protocols.  Details



<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 4]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   of the documents and the relationships among them appear in <a href="#section-5">Section 5</a>
   and a discussion of what was learned from the experimental protocols
   and their implementations appears in <a href="#section-6">Section 6</a>.

   Taken together, these specifications provide the details for a way to
   implement and support internationalized email.  The document itself
   describes how the various elements of email internationalization fit
   together and the relationships among the primary specifications
   associated with message transport, header formats, and handling.

   This document, and others that comprise the collection described
   above, assume a reasonable familiarity with the basic Internet
   electronic mail specifications and terminology [<a href="rfc5321.html" title="&quot;Simple Mail Transfer Protocol&quot;">RFC5321</a>] [<a href="rfc5322.html" title="&quot;Internet Message Format&quot;">RFC5322</a>]
   and the MIME [<a href="rfc2045.html" title="&quot;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies&quot;">RFC2045</a>] and 8BITMIME [<a href="rfc6152.html" title="&quot;SMTP Service Extension for 8-bit MIME Transport&quot;">RFC6152</a>] ones as well.  While
   not strictly required to implement this specification, a general
   familiarity with the terminology and functions of IDNA [<a href="rfc5890.html" title="&quot;Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework&quot;">RFC5890</a>]
   [<a href="rfc5891.html" title="&quot;Internationalized Domain Names in Applications (IDNA): Protocol&quot;">RFC5891</a>] [<a href="rfc5892.html" title="&quot;The Unicode Code Points and Internationalized Domain Names for Applications (IDNA)&quot;">RFC5892</a>] [<a href="rfc5893.html" title="&quot;Right-to-Left Scripts for Internationalized Domain Names for Applications (IDNA)&quot;">RFC5893</a>] [<a href="rfc5894.html" title="&quot;Internationalized Domain Names for Applications (IDNA): Background, Explanation, and Rationale&quot;">RFC5894</a>] are also assumed.

<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>.  Problem Statement</span>

   Internationalizing Domain Names in Applications (IDNA) [<a href="rfc5890.html" title="&quot;Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework&quot;">RFC5890</a>]
   permits internationalized domain names, but deployment has not yet
   reached most users.  One of the reasons for this is that we do not
   yet have fully internationalized naming schemes.  Domain names are
   just one of the various names and identifiers that are required to be
   internationalized.  In many contexts, until more of those identifiers
   are internationalized, internationalized domain names alone have
   little value.

   Email addresses are prime examples of why it is not good enough to
   just internationalize the domain name.  As most observers have
   learned from experience, users strongly prefer email addresses that
   resemble names or initials to those involving seemingly meaningless
   strings of letters or numbers.  Unless the entire email address can
   use familiar characters and formats, users will perceive email as
   being culturally unfriendly.  If the names and initials used in email
   addresses can be expressed in the native languages and writing
   systems of the users, the Internet will be perceived as more natural,
   especially by those whose native language is not written in a subset
   of a Roman-derived script.

   Internationalization of email addresses is not merely a matter of
   changing the SMTP envelope; or of modifying the "From:", "To:", and
   "Cc:" header fields; or of permitting upgraded Mail User Agents
   (MUAs) to decode a special coding and respond by displaying local
   characters.  To be perceived as usable, the addresses must be
   internationalized and handled consistently in all of the contexts in
   which they occur.  This requirement has far-reaching implications:



<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 5]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-6" id="page-6" href="#page-6" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   collections of patches and workarounds are not adequate.  Even if
   they were adequate, a workaround-based approach may result in an
   assortment of implementations with different sets of patches and
   workarounds having been applied with consequent user confusion about
   what is actually usable and supported.  Instead, we need to build a
   fully internationalized email environment, focusing on permitting
   efficient communication among those who share a language and writing
   system.  That, in turn, implies changes to the mail header
   environment to permit those header fields that are appropriately
   internationalized to utilize the full range of Unicode characters, an
   SMTP extension to permit UTF-8 [<a href="rfc3629.html" title="&quot;UTF-8, a transformation format of ISO 10646&quot;">RFC3629</a>] [<a href="rfc5198.html" title="&quot;Unicode Format for Network Interchange&quot;">RFC5198</a>] mail addressing
   and delivery of those extended header fields, support for
   internationalization of delivery and service notifications [<a href="rfc3461.html" title="&quot;Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)&quot;">RFC3461</a>]
   [<a href="rfc3464.html" title="&quot;An Extensible Message Format for Delivery Status Notifications&quot;">RFC3464</a>], and (finally) a requirement for support of the 8BITMIME
   SMTP extension [<a href="rfc6152.html" title="&quot;SMTP Service Extension for 8-bit MIME Transport&quot;">RFC6152</a>] so that all of these can be transported
   through the mail system without having to overcome the limitation
   that header fields do not have content-transfer-encodings.

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>.  Terminology</span>

   This document assumes a reasonable understanding of the protocols and
   terminology of the core email standards as documented in <a href="rfc5321.html">RFC 5321</a>
   [<a href="rfc5321.html" title="&quot;Simple Mail Transfer Protocol&quot;">RFC5321</a>] and <a href="rfc5322.html">RFC 5322</a> [<a href="rfc5322.html" title="&quot;Internet Message Format&quot;">RFC5322</a>].

<span class="h3"><a class="selflink" name="section-4.1" href="#section-4.1">4.1</a>.  Mail User and Mail Transfer Agents</span>

   Much of the description in this document depends on the abstractions
   of "Mail Transfer Agent" ("MTA") and "Mail User Agent" ("MUA").
   However, it is important to understand that those terms and the
   underlying concepts postdate the design of the Internet's email
   architecture and the application of the "protocols on the wire"
   principle to it.  That email architecture, as it has evolved, and
   that "on the wire" principle have prevented any strong and
   standardized distinctions about how MTAs and MUAs interact on a given
   origin or destination host (or even whether they are separate).

   However, the term "final delivery MTA" is used in this document in a
   fashion equivalent to the term "delivery system" or "final delivery
   system" of <a href="rfc5321.html">RFC 5321</a>.  This is the SMTP server that controls the
   format of the local parts of addresses and is permitted to inspect
   and interpret them.  It receives messages from the network for
   delivery to mailboxes or for other local processing, including any
   forwarding or aliasing that changes envelope addresses, rather than
   relaying.  From the perspective of the network, any local delivery
   arrangements such as saving to a message store, handoff to specific
   message delivery programs or agents, and mechanisms for retrieving
   messages are all "behind" the final delivery MTA and hence are not
   part of the SMTP transport or delivery process.



<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 6]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-7" id="page-7" href="#page-7" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


<span class="h3"><a class="selflink" name="section-4.2" href="#section-4.2">4.2</a>.  Address Character Sets</span>

   In this document, an address is "all-ASCII", or just an "ASCII
   address", if every character in the address is in the ASCII character
   repertoire [<a href="#ref-ASCII" title="&quot;USA Code for Information Interchange&quot;">ASCII</a>]; an address is "non-ASCII", or an "i18n-address",
   if any character is not in the ASCII character repertoire.  Such
   addresses MAY be restricted in other ways, but those restrictions are
   not relevant to this definition.  The term "all-ASCII" is also
   applied to other protocol elements when the distinction is important,
   with "non-ASCII" or "internationalized" as its opposite.

   The umbrella term to describe the email address internationalization
   specified by this document and its companion documents is "SMTPUTF8".
   For example, an address permitted by this specification is referred
   to as a "SMTPUTF8 (compliant) address".

   Please note that, according to the definitions given here, the set of
   all "all-ASCII" addresses and the set of all "non-ASCII" addresses
   are mutually exclusive.  The set of all addresses permitted when
   SMTPUTF8 appears is the union of these two sets.

<span class="h3"><a class="selflink" name="section-4.3" href="#section-4.3">4.3</a>.  User Types</span>

   An "ASCII user" (i) exclusively uses email addresses that contain
   ASCII characters only, and (ii) cannot generate recipient addresses
   that contain non-ASCII characters.

   An "internationalized email user" has one or more non-ASCII email
   addresses, or is able to generate recipient addresses that contain
   non-ASCII characters.  Such a user may have ASCII addresses too; if
   the user has more than one email account and a corresponding address,
   or more than one alias for the same address, he or she has some
   method to choose which address to use on outgoing email.  Note that
   under this definition, it is not possible to tell from an ASCII
   address if the owner of that address is an internationalized email
   user or not.  (A non-ASCII address implies a belief that the owner of
   that address is an internationalized email user.)  There is no such
   thing as an "internationalized email user message"; the term applies
   only to users and their agents and capabilities.  In particular, the
   use of non-ASCII, and hence presumably internationalized, message
   content is an integral part of the MIME specifications [<a href="rfc2045.html" title="&quot;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies&quot;">RFC2045</a>] and
   does not require these extensions (although it is compatible with
   them).








<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 7]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-8" id="page-8" href="#page-8" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


<span class="h3"><a class="selflink" name="section-4.4" href="#section-4.4">4.4</a>.  Messages</span>

   A "message" is sent from one user (the sender) using a particular
   email address to one or more other recipient email addresses (often
   referred to just as "users" or "recipient users").

<span class="h3"><a class="selflink" name="section-4.5" href="#section-4.5">4.5</a>.  Mailing Lists</span>

   A "mailing list" is a mechanism whereby a message may be distributed
   to multiple recipients by sending it to one recipient address.  An
   agent (typically not a human being) at that single address then
   causes the message to be redistributed to the target recipients.
   This agent sets the envelope return address of the redistributed
   message to a different address from that of the original single
   recipient message.  Using a different envelope return address
   (reverse-path) causes error (and other automatically generated)
   messages to go to an error-handling address.

   Special provisions for managing mailing lists that might contain non-
   ASCII addresses are discussed in a document that is specific to that
   topic [<a href="rfc5983.html" title="&quot;Mailing Lists and Internationalized Email Addresses&quot;">RFC5983</a>] and its expected successor [<a href="#ref-RFC5983bis-MailingList" title="&quot;Mailing Lists and UTF-8 Addresses&quot;">RFC5983bis-MailingList</a>].

<span class="h3"><a class="selflink" name="section-4.6" href="#section-4.6">4.6</a>.  Conventional Message and Internationalized Message</span>

   o  A conventional message is one that does not use any extension
      defined in the SMTP extension document [<a href="rfc6531.html" title="&quot;SMTP Extension for Internationalized Email Address&quot;">RFC6531</a>] or in the
      UTF8header document [<a href="rfc6532.html" title="&quot;Internationalized Email Headers&quot;">RFC6532</a>] in this set of specifications, and
      is strictly conformant to <a href="rfc5322.html">RFC 5322</a> [<a href="rfc5322.html" title="&quot;Internet Message Format&quot;">RFC5322</a>].

   o  An internationalized message is a message utilizing one or more of
      the extensions defined in this set of specifications, so that it
      is no longer conformant to the traditional specification of an
      email message or its transport.

<span class="h3"><a class="selflink" name="section-4.7" href="#section-4.7">4.7</a>.  Undeliverable Messages, Notification, and Delivery Receipts</span>

   As specified in <a href="rfc5321.html">RFC 5321</a>, a message that is undeliverable for some
   reason is expected to result in notification to the sender.  This can
   occur in either of two ways.  One, typically called "Rejection",
   occurs when an SMTP server returns a reply code indicating a fatal
   error (a "5yz" code) or persistently returns a temporary failure
   error (a "4yz" code).  The other involves accepting the message
   during SMTP processing and then generating a message to the sender,
   typically known as a "Non-delivery Notification" or "NDN".  Current
   practice often favors rejection over NDNs because of the reduced
   likelihood that the generation of NDNs will be used as a spamming
   technique.  The latter, NDN, case is unavoidable if an intermediate
   MTA accepts a message that is then rejected by the next-hop server.



<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 8]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-9" id="page-9" href="#page-9" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   A sender MAY also explicitly request message receipts [<a href="rfc3461.html" title="&quot;Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)&quot;">RFC3461</a>] that
   raise the same issues for these internationalization extensions as
   NDNs.

<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>.  Overview of the Approach and Document Plan</span>

   This set of specifications changes both SMTP and the character
   encoding of email message headers to permit non-ASCII characters to
   be represented directly.  Each important component of the work is
   described in a separate document.  The document set, whose members
   are described below, also contains Informational documents whose
   purpose is to provide implementation suggestions and guidance for the
   protocols.

   In addition to this document, the following documents make up this
   specification and provide advice and context for it.

   o  SMTP extension.  The SMTP extension document [<a href="rfc6531.html" title="&quot;SMTP Extension for Internationalized Email Address&quot;">RFC6531</a>] provides an
      SMTP extension (as provided for in <a href="rfc5321.html">RFC 5321</a>) for internationalized
      addresses.

   o  Email message headers in UTF-8.  The email message header document
      [<a href="rfc6532.html" title="&quot;Internationalized Email Headers&quot;">RFC6532</a>] essentially updates <a href="rfc5322.html">RFC 5322</a> to permit some information
      in email message headers to be expressed directly by Unicode
      characters encoded in UTF-8 when the SMTP extension described
      above is used.  This document, possibly with one or more
      supplemental ones, will also need to address the interactions with
      MIME, including relationships between SMTPUTF8 and internal MIME
      headers and content types.

   o  Extensions to delivery status and notification handling to adapt
      to internationalized addresses [<a href="rfc6533.html" title="&quot;Internationalized Delivery Status and Disposition Notifications&quot;">RFC6533</a>].

   o  Forthcoming documents will specify extensions to the IMAP protocol
      [<a href="rfc3501.html" title="&quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1&quot;">RFC3501</a>] to support internationalized message headers
      [<a href="#ref-RFC5738bis-IMAP" title="&quot;IMAP Support for UTF-8&quot;">RFC5738bis-IMAP</a>], parallel extensions to the POP protocol
      [<a href="rfc5721.html" title="&quot;POP3 Support for UTF-8&quot;">RFC5721</a>] [<a href="#ref-RFC5721bis-POP3" title="&quot;POP3 Support for UTF-8&quot;">RFC5721bis-POP3</a>], and some common properties of the two
      [<a href="#ref-POPIMAP-downgrade" title="&quot;Post-delivery Message Downgrading for Internationalized Email Messages&quot;">POPIMAP-downgrade</a>].

<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>.  Review of Experimental Results</span>

   The key difference between this set of protocols and the experimental
   set that preceded them [<a href="rfc5335.html" title="&quot;Internationalized Email Headers&quot;">RFC5335</a>] [<a href="rfc5336.html" title="&quot;SMTP Extension for Internationalized Email Addresses&quot;">RFC5336</a>] [<a href="rfc5337.html" title="&quot;Internationalized Delivery Status and Disposition Notifications&quot;">RFC5337</a>] [<a href="rfc5504.html" title="&quot;Downgrading Mechanism for Email Address Internationalization&quot;">RFC5504</a>]
   [<a href="rfc5721.html" title="&quot;POP3 Support for UTF-8&quot;">RFC5721</a>] [<a href="rfc5738.html" title="&quot;IMAP Support for UTF-8&quot;">RFC5738</a>] [<a href="rfc5825.html" title="&quot;Displaying Downgraded Messages for Email Address Internationalization&quot;">RFC5825</a>] is that the earlier group provided a
   mechanism for in-transit downgrading of messages (described in detail
   in <a href="rfc5504.html">RFC 5504</a>).  That mechanism permitted, and essentially required,
   that each non-ASCII address be accompanied by an all-ASCII
   equivalent.  That, in turn, raised security concerns associated with



<span class="grey">Klensin &amp; Ko                 Standards Track                    [Page 9]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-10" id="page-10" href="#page-10" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   pairing of addresses that could not be authenticated.  It also
   introduced the first incompatible change to Internet mail addressing
   in many years, raising concerns about interoperability issues if the
   new address forms "leaked" into legacy email implementations.  After
   examining experience with the earlier, experimental, predecessors of
   these specifications, the working group that produced them concluded
   that the advantages of in-transit downgrading, were it feasible
   operationally, would be significant enough to overcome those
   concerns.

   That turned out not to be the case, with interoperability problems
   among initial implementations.  Prior to starting on the work that
   led to this set of specifications, the WG concluded that the
   combination of requirements and long-term implications of that
   earlier model were too complex to be satisfactory and that work
   should move ahead without it.

   The other significant change to the protocols themselves is that the
   SMTPUTF8 keyword is now required as an SMTP client announcement if
   the extension is needed; in the experimental version, only the server
   announcement that an extended envelope and/or content were permitted
   was necessary.

<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>.  Overview of Protocol Extensions and Changes</span>

<span class="h3"><a class="selflink" name="section-7.1" href="#section-7.1">7.1</a>.  SMTP Extension for Internationalized Email Address</span>

   An SMTP extension, "SMTPUTF8", is specified as follows:

   o  Permits the use of UTF-8 strings in email addresses, both local
      parts and domain names.

   o  Permits the selective use of UTF-8 strings in email message
      headers (see <a href="#section-7.2">Section 7.2</a>).

   o  Requires that the server advertise the 8BITMIME extension
      [<a href="rfc6152.html" title="&quot;SMTP Service Extension for 8-bit MIME Transport&quot;">RFC6152</a>] and that the client support 8-bit transmission so that
      header information can be transmitted without using a special
      content-transfer-encoding.

   Some general principles affect the development decisions underlying
   this work.

   1.  Email addresses enter subsystems (such as a user interface) that
       may perform charset conversions or other encoding changes.  When
       the local part of the address includes characters outside the
       ASCII character repertoire, use of ASCII-compatible encoding
       (ACE) [<a href="rfc3492.html" title="&quot;Punycode: A Bootstring encoding of Unicode for Internationalized Domain Names in Applications (IDNA)&quot;">RFC3492</a>] [<a href="rfc5890.html" title="&quot;Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework&quot;">RFC5890</a>] in the domain part is discouraged to



<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 10]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-11" id="page-11" href="#page-11" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


       promote consistent processing of characters throughout the
       address.

   2.  An SMTP relay MUST

       *  Either recognize the format explicitly, agreeing to do so via
          an ESMTP option, or

       *  Reject the message or, if necessary, return a non-delivery
          notification message, so that the sender can make another
          plan.

   3.  If the message cannot be forwarded because the next-hop system
       cannot accept the extension, it MUST be rejected or a non-
       delivery message MUST be generated and sent.

   4.  In the interest of interoperability, charsets other than UTF-8
       are prohibited in mail addresses and message headers being
       transmitted over the Internet.  There is no practical way to
       identify multiple charsets properly with an extension similar to
       this without introducing great complexity.

   Conformance to the group of standards specified here for email
   transport and delivery requires implementation of the SMTP extension
   specification and the UTF-8 header specification.  If the system
   implements IMAP or POP, it MUST conform to the internationalized IMAP
   [<a href="#ref-RFC5738bis-IMAP" title="&quot;IMAP Support for UTF-8&quot;">RFC5738bis-IMAP</a>] or POP [<a href="#ref-RFC5721bis-POP3" title="&quot;POP3 Support for UTF-8&quot;">RFC5721bis-POP3</a>] specifications
   respectively.

<span class="h3"><a class="selflink" name="section-7.2" href="#section-7.2">7.2</a>.  Transmission of Email Header Fields in UTF-8 Encoding</span>

   There are many places in MUAs or in a user presentation in which
   email addresses or domain names appear.  Examples include the
   conventional "From:", "To:", or "Cc:" header fields; "Message-ID:"
   and "In-Reply-To:" header fields that normally contain domain names
   (but that may be a special case); and in message bodies.  Each of
   these must be examined from an internationalization perspective.  The
   user will expect to see mailbox and domain names in local characters,
   and to see them consistently.  If non-obvious encodings, such as
   protocol-specific ACE variants, are used, the user will inevitably,
   if only occasionally, see them rather than "native" characters and
   will find that discomfiting or astonishing.  Similarly, if different
   codings are used for mail transport and message bodies, the user is
   particularly likely to be surprised, if only as a consequence of the
   long-established "things leak" principle.  The only practical way to
   avoid these sources of discomfort, in both the medium and the longer
   term, is to have the encodings used in transport be as similar to the
   encodings used in message headers and message bodies as possible.



<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 11]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-12" id="page-12" href="#page-12" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   When email local parts are internationalized, they SHOULD be
   accompanied by arrangements for the message headers to be in the
   fully internationalized form.  That form SHOULD use UTF-8 rather than
   ASCII as the base character set for the contents of header fields
   (protocol elements such as the header field names themselves are
   unchanged and remain entirely in ASCII).  For transition purposes and
   compatibility with legacy systems, this can be done by extending the
   traditional MIME encoding models for non-ASCII characters in headers
   [<a href="rfc2045.html" title="&quot;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies&quot;">RFC2045</a>] [<a href="rfc2231.html" title="&quot;MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations&quot;">RFC2231</a>], but even these should be based on UTF-8, rather
   than other encodings, if at all possible [<a href="rfc6055.html" title="&quot;IAB Thoughts on Encodings for Internationalized Domain Names&quot;">RFC6055</a>].  However, the
   target is fully internationalized message headers, as discussed in
   [<a href="rfc6532.html" title="&quot;Internationalized Email Headers&quot;">RFC6532</a>] and not an extended and painful transition.

<span class="h3"><a class="selflink" name="section-7.3" href="#section-7.3">7.3</a>.  SMTP Service Extension for DSNs</span>

   The existing Delivery Status Notifications (DSNs) specification
   [<a href="rfc3461.html" title="&quot;Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)&quot;">RFC3461</a>], which is a Draft Standard, is limited to ASCII text in the
   machine-readable portions of the protocol.  "International Delivery
   and Disposition Notifications" [<a href="rfc6533.html" title="&quot;Internationalized Delivery Status and Disposition Notifications&quot;">RFC6533</a>] adds a new address type for
   international email addresses so an original recipient address with
   non-ASCII characters can be correctly preserved even after
   downgrading.  If an SMTP server advertises both the SMTPUTF8 and the
   DSN extension, that server MUST implement internationalized DSNs
   including support for the ORCPT parameter specified in <a href="rfc3461.html">RFC 3461</a>
   [<a href="rfc3461.html" title="&quot;Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)&quot;">RFC3461</a>].

<span class="h2"><a class="selflink" name="section-8" href="#section-8">8</a>.  Downgrading before and after SMTP Transactions</span>

   An important issue with these extensions is how to handle
   interactions between systems that support non-ASCII addresses and
   legacy systems that expect ASCII.  There is, of course, no problem
   with ASCII-only systems sending to those that can handle
   internationalized forms because the ASCII forms are just a proper
   subset.  But, when systems that support these extensions send mail,
   they MAY include non-ASCII addresses for senders, receivers, or both
   and might also provide non-ASCII header information other than
   addresses.  If the extension is not supported by the first-hop system
   (i.e., the SMTP server accessed by the submission server acting as an
   SMTP client), message-originating systems SHOULD be prepared to
   either send conventional envelopes and message headers or to return
   the message to the originating user so the message may be manually
   downgraded to the traditional form, possibly using encoded words
   [<a href="rfc2047.html" title="&quot;MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text&quot;">RFC2047</a>] in the message headers.  Of course, such transformations
   imply that the originating user or system must have ASCII-only
   addresses available for all senders and recipients.  Mechanisms by
   which such addresses may be found or identified are outside the scope





<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 12]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-13" id="page-13" href="#page-13" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   of these specifications as are decisions about the design of
   originating systems such as whether any required transformations are
   made by the user, the originating MUA, or the submission server.

   A somewhat more complex situation arises when the first-hop system
   supports these extensions but some subsequent server in the SMTP
   transmission chain does not.  It is important to note that most cases
   of that situation with forward-pointing addresses will be the result
   of configuration errors: especially if it hosts non-ASCII addresses,
   a final delivery MTA that accepts these extensions SHOULD NOT be
   configured with lower-preference MX hosts that do not.  When the only
   non-ASCII address being transmitted is backward-pointing (e.g., in an
   SMTP MAIL command), recipient configuration cannot help in general.
   On the other hand, alternate, all-ASCII addresses for senders are
   those most likely to be authoritatively known by the submission
   environment or the sender herself.  Consequently, if an intermediate
   SMTP relay that requires these extensions then discovers that the
   next system in the chain does not support them, it will have little
   choice other than to reject or return the message.

   As discussed above, downgrading to an ASCII-only form may occur
   before or during the initial message submission.  It might also occur
   after the delivery to the final delivery MTA in order to accommodate
   message stores, IMAP or POP servers, or clients that have different
   capabilities than the delivery MTA.  These cases are discussed in the
   subsections below.

<span class="h3"><a class="selflink" name="section-8.1" href="#section-8.1">8.1</a>.  Downgrading before or during Message Submission</span>

   The IETF has traditionally avoided specifying the precise behavior of
   MUAs to provide maximum flexibility in the associated user
   interfaces.  The SMTP standard <a href="rfc5321.html#section-6.4">[RFC5321], Section&nbsp;6.4</a>, gives wide
   latitude to MUAs and submission servers as to what might be supplied
   by the user as long as the result conforms with "on the wire"
   standards once it is injected into the public Internet.  In that
   tradition, the discussion in the remainder of <a href="#section-8">Section 8</a> is provided
   as general guidance rather than normative requirements.

   Messages that require these extensions will sometimes be transferred
   to a system that does not support these extensions; it is likely that
   the most common cases will involve the combination of ASCII-only
   forward-pointing addresses with a non-ASCII backward-pointing one.
   Until the extensions described here have been universally implemented
   in the Internet email environment, senders who prefer to use non-
   ASCII addresses (or raw UTF-8 characters in header fields), even when
   their intended recipients use and expect all-ASCII ones, will need to
   be especially careful about the error conditions that can arise.  The




<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 13]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-14" id="page-14" href="#page-14" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   risks are especially great in environments in which non-delivery
   messages (or other indications from submission servers) are routinely
   dropped or ignored.

   Perhaps obviously, the most convenient time to find an ASCII address
   corresponding to an internationalized address is at the originating
   MUA or closely associated systems.  This can occur either before the
   message is sent or after the internationalized form of the message is
   rejected.  It is also the most convenient time to convert a message
   from the internationalized form into conventional ASCII form or to
   generate a non-delivery message to the sender if either is necessary.
   At that point, the user has a full range of choices available,
   including changing backward-pointing addresses, contacting the
   intended recipient out of band for an alternate address, consulting
   appropriate directories, arranging for translation of both addresses
   and message content into a different language, and so on.  While it
   is natural to think of message downgrading as optimally being a fully
   automated process, we should not underestimate the capabilities of a
   user of at least moderate intelligence who wishes to communicate with
   another such user.

   In this context, one can easily imagine modifications to message
   submission servers (as described in <a href="rfc6409.html">RFC 6409</a> [<a href="rfc6409.html" title="&quot;Message Submission for Mail&quot;">RFC6409</a>]) so that they
   would perform downgrading operations or perhaps even upgrading ones.
   Such operations would permit receiving messages with one or more of
   the internationalization extensions discussed here and adapting the
   outgoing message, as needed, to respond to the delivery or next-hop
   environment the submission server encounters.

<span class="h3"><a class="selflink" name="section-8.2" href="#section-8.2">8.2</a>.  Downgrading or Other Processing after Final SMTP Delivery</span>

   When an email message is received by a final delivery MTA, it is
   usually stored in some form.  Then it is retrieved either by software
   that reads the stored form directly or by client software via some
   email retrieval mechanisms such as POP or IMAP.

   The SMTP extension described in <a href="#section-7.1">Section 7.1</a> provides protection only
   in transport.  It does not prevent MUAs and email retrieval
   mechanisms that have not been upgraded to understand
   internationalized addresses and UTF-8 message headers from accessing
   stored internationalized emails.

   Since the final delivery MTA (or, to be more specific, its
   corresponding mail storage agent) cannot safely assume that agents
   accessing email storage will always be capable of handling the
   extensions proposed here, it MAY downgrade internationalized emails,
   specially identify messages that utilize these extensions, or both.
   If either or both of these actions were to be taken, the final



<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 14]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-15" id="page-15" href="#page-15" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   delivery MTA SHOULD include a mechanism to preserve or recover the
   original internationalized forms without information loss.
   Preservation of that information is necessary to support access by
   SMTPUTF8-aware agents.

<span class="h2"><a class="selflink" name="section-9" href="#section-9">9</a>.  Downgrading in Transit</span>

   The base SMTP specification (<a href="rfc5321.html#section-2.3.11">Section&nbsp;2.3.11 of RFC 5321</a> [<a href="rfc5321.html" title="&quot;Simple Mail Transfer Protocol&quot;">RFC5321</a>])
   states that "due to a long history of problems when intermediate
   hosts have attempted to optimize transport by modifying them, the
   local-part MUST be interpreted and assigned semantics only by the
   host specified in the domain part of the address".  This is not a new
   requirement; equivalent statements appeared in specifications in 2001
   [<a href="rfc2821.html" title="&quot;Simple Mail Transfer Protocol&quot;">RFC2821</a>] and even in 1989 [<a href="rfc1123.html" title="&quot;Requirements for Internet Hosts - Application and Support&quot;">RFC1123</a>].

   Adherence to this rule means that a downgrade mechanism that
   transforms the local part of an email address cannot be utilized in
   transit.  It can only be applied at the endpoints, specifically by
   the MUA or submission server or by the final delivery MTA.

   One of the reasons for this rule has to do with legacy email systems
   that embed mail routing information in the local part of the address
   field.  Transforming the email address destroys such routing
   information.  There is no way a server other than the final delivery
   server can know, for example, whether the local part of
   user%foo@example.com is a route ("user" is reached via "foo") or
   simply a local address.

<span class="h2"><a class="selflink" name="section-10" href="#section-10">10</a>.  User Interface and Configuration Issues</span>

   Internationalization of addresses and message headers, especially in
   combination with variations on character coding that are inherent to
   Unicode, may make careful choices of addresses and careful
   configuration of servers and DNS records even more important than
   they are for traditional Internet email.  It is likely that, as
   experience develops with the use of these protocols, it will be
   desirable to produce one or more additional documents that offer
   guidance for configuration and interfaces.  A document that discusses
   issues with MUAs, especially with regard to downgrading, is expected
   to be developed.  The subsections below address some other issues.

<span class="h3"><a class="selflink" name="section-10.1" href="#section-10.1">10.1</a>.  Choices of Mailbox Names and Unicode Normalization</span>

   It has long been the case that the email syntax permits choices about
   mailbox names that are unwise in practice, if one actually intends
   the mailboxes to be accessible to a broad range of senders.  The most
   often cited examples involve the use of case-sensitivity and tricky
   quoting of embedded characters in mailbox local parts.  These



<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 15]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-16" id="page-16" href="#page-16" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   deliberately unusual constructions are permitted by the protocols,
   and servers are expected to support them.  Although they can provide
   value in special cases, taking advantage of them is almost always bad
   practice unless the intent is to create some form of security by
   obscurity.

   In the absence of these extensions, SMTP clients and servers are
   constrained to using only those addresses permitted by <a href="rfc5321.html">RFC 5321</a>.  The
   local parts of those addresses MAY be made up of any ASCII characters
   except the control characters that <a href="rfc5321.html">RFC 5321</a> prohibits, although some
   of them MUST be quoted as specified there.  It is notable in an
   internationalization context that there is a long history on some
   systems of using overstruck ASCII characters (a character, a
   backspace, and another character) within a quoted string to
   approximate non-ASCII characters.  This form of internationalization
   was permitted by <a href="rfc821.html">RFC 821</a> [<a href="https://tools.ietf.org/html/rfc0821" title="&quot;Simple Mail Transfer Protocol&quot;">RFC0821</a>] but is prohibited by <a href="rfc5321.html">RFC 5321</a>
   because it requires a backspace character (a prohibited C0 control).
   Because <a href="rfc5321.html">RFC 5321</a> (and its predecessor, <a href="rfc2821.html">RFC 2821</a>) prohibit the use of
   this character in ASCII mailbox names and it is even more problematic
   (for canonicalization and normalization reasons) in non-ASCII
   strings, backspace MUST NOT appear in SMTPUTF8 mailbox names.

   For the particular case of mailbox names that contain non-ASCII
   characters in the local part, domain part, or both, special attention
   MUST be paid to Unicode normalization [<a href="#ref-Unicode-UAX15" title="&quot;Unicode Standard Annex #15: Unicode Normalization Forms&quot;">Unicode-UAX15</a>], in part
   because Unicode strings may be normalized by other processes
   independent of what a mail protocol specifies (this is exactly
   analogous to what may happen with quoting and dequoting in
   traditional addresses).  Consequently, the following principles are
   offered as advice to those who are selecting names for mailboxes:

   o  In general, it is wise to support addresses in Normalized form,
      using at least Normalization Form NFC.  Except in circumstances in
      which NFKC would map characters together that the parties
      responsible for the destination mail server would prefer to be
      kept distinguishable, supporting the NFKC-conformant form would
      yield even more predictable behavior for the typical user.

   o  It will usually be wise to support other forms of the same local-
      part string, either as aliases or by normalization of strings
      reaching the delivery server: the sender should not be depended
      upon to send the strings in normalized form.









<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 16]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-17" id="page-17" href="#page-17" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   o  Stated differently and in more specific terms, the rules of the
      protocol for local-part strings essentially provide that:

      *  Unnormalized strings are valid, but sufficiently bad practice
         that they may not work reliably on a global basis.  Servers
         should not depend on clients to send normalized forms but
         should be aware that procedures on client machines outside the
         control of the MUA may cause normalized strings to be sent
         regardless of user intent.

      *  C0 (and presumably C1) controls (see The Unicode Standard
         [<a href="#ref-Unicode" title="&quot;The Unicode Standard, Version 6.0.0&quot;">Unicode</a>]) are prohibited, the first in <a href="rfc5321.html">RFC 5321</a> and the second
         by an obvious extension from it [<a href="rfc5198.html" title="&quot;Unicode Format for Network Interchange&quot;">RFC5198</a>].

      *  Other kinds of punctuation, spaces, etc., are risky practice.
         Perhaps they will work, and SMTP receiver code is required to
         handle them without severe errors (even if such strings are not
         accepted in addresses to be delivered on that server), but
         creating dependencies on them in mailbox names that are chosen
         is usually a bad practice and may lead to interoperability
         problems.

<span class="h2"><a class="selflink" name="section-11" href="#section-11">11</a>.  Additional Issues</span>

   This section identifies issues that are not covered, or not covered
   comprehensively, as part of this set of specifications, but that will
   require ongoing review as part of deployment of email address and
   header internationalization.

<span class="h3"><a class="selflink" name="section-11.1" href="#section-11.1">11.1</a>.  Impact on URIs and IRIs</span>

   The mailto: schema [<a href="rfc6068.html" title="&quot;The 'mailto' URI Scheme&quot;">RFC6068</a>], and the discussion of it in the
   Internationalized Resource Identifier (IRI) specification [<a href="rfc3987.html" title="&quot;Internationalized Resource Identifiers (IRIs)&quot;">RFC3987</a>],
   may need to be modified when this work is completed and standardized.

<span class="h3"><a class="selflink" name="section-11.2" href="#section-11.2">11.2</a>.  Use of Email Addresses as Identifiers</span>

   There are a number of places in contemporary Internet usage in which
   email addresses are used as identifiers for individuals, including as
   identifiers to Web servers supporting some electronic commerce sites
   and in some X.509 certificates [<a href="rfc5280.html" title="&quot;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile&quot;">RFC5280</a>].  These documents do not
   address those uses, but it is reasonable to expect that some
   difficulties will be encountered when internationalized addresses are
   first used in those contexts, many of which cannot even handle the
   full range of addresses permitted today.






<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 17]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-18" id="page-18" href="#page-18" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


<span class="h3"><a class="selflink" name="section-11.3" href="#section-11.3">11.3</a>.  Encoded Words, Signed Messages, and Downgrading</span>

   One particular characteristic of the email format is its persistency:
   MUAs are expected to handle messages that were originally sent
   decades ago and not just those delivered seconds ago.  As such, MUAs
   and mail filtering software, such as that specified in Sieve
   [<a href="rfc5228.html" title="&quot;Sieve: An Email Filtering Language&quot;">RFC5228</a>], will need to continue to accept and decode header fields
   that use the "encoded word" mechanism [<a href="rfc2047.html" title="&quot;MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text&quot;">RFC2047</a>] to accommodate non-
   ASCII characters in some header fields.  While extensions to both
   POP3 [<a href="rfc1939.html" title="&quot;Post Office Protocol - Version 3&quot;">RFC1939</a>] and IMAP [<a href="rfc3501.html" title="&quot;INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1&quot;">RFC3501</a>] have been defined that include
   automatic upgrading of messages that carry non-ASCII information in
   encoded form -- including <a href="rfc2047.html">RFC 2047</a> decoding -- of messages by the
   POP3 [<a href="#ref-RFC5721bis-POP3" title="&quot;POP3 Support for UTF-8&quot;">RFC5721bis-POP3</a>] or IMAP [<a href="#ref-RFC5738bis-IMAP" title="&quot;IMAP Support for UTF-8&quot;">RFC5738bis-IMAP</a>] server, there are
   message structures and MIME content-types for which that cannot be
   done or where the change would have unacceptable side effects.

   For example, message parts that are cryptographically signed, using
   e.g., S/MIME [<a href="rfc5751.html" title="&quot;Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.2 Message Specification&quot;">RFC5751</a>] or Pretty Good Privacy (PGP) [<a href="rfc3156.html" title="&quot;MIME Security with OpenPGP&quot;">RFC3156</a>], cannot
   be upgraded from the <a href="rfc2047.html">RFC 2047</a> form to normal UTF-8 characters without
   breaking the signature.  Similarly, message parts that are encrypted
   may contain, when decrypted, header fields that use the <a href="rfc2047.html">RFC 2047</a>
   encoding; such messages cannot be 'fully' upgraded without access to
   cryptographic keys.

   Similar issues may arise if messages are signed and then subsequently
   downgraded, e.g., as discussed in <a href="#section-8.1">Section 8.1</a>, and then an attempt is
   made to upgrade them to the original form and then verify the
   signatures.  Even the very subtle changes that may result from
   algorithms to downgrade and then upgrade again may be sufficient to
   invalidate the signatures if they impact either the primary or MIME
   body part headers.  When signatures are present, downgrading must be
   performed with extreme care if at all.

<span class="h3"><a class="selflink" name="section-11.4" href="#section-11.4">11.4</a>.  Other Uses of Local Parts</span>

   Local parts are sometimes used to construct domain labels, e.g., the
   local part "user" in the address user@domain.example could be
   converted into a host name user.domain.example with its Web space at
   &lt;<a href="http://user.domain.example/">http://user.domain.example</a>&gt; and the catch-all addresses
   any.thing.goes@user.domain.example.

   Such schemes are obviously limited by, among other things, the SMTP
   rules for domain names, and will not work without further
   restrictions for other local parts.  Whether those limitations are
   relevant to these specifications is an open question.  It may be
   simply another case of the considerable flexibility accorded to
   delivery MTAs in determining the mailbox names they will accept and
   how they are interpreted.



<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 18]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-19" id="page-19" href="#page-19" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


<span class="h3"><a class="selflink" name="section-11.5" href="#section-11.5">11.5</a>.  Non-Standard Encapsulation Formats</span>

   Some applications use formats similar to the application/mbox format
   [<a href="rfc4155.html" title="&quot;The application/mbox Media Type&quot;">RFC4155</a>] instead of the message/digest form defined in <a href="rfc2046.html#section-5.1.5">RFC 2046,
   Section&nbsp;5.1.5</a> [<a href="rfc2046.html" title="&quot;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types&quot;">RFC2046</a>] to transfer multiple messages as single
   units.  Insofar as such applications assume that all stored messages
   use the message/rfc822 format described in <a href="rfc2046.html#section-5.2.1">RFC 2046, Section&nbsp;5.2.1</a>
   [<a href="rfc2046.html" title="&quot;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types&quot;">RFC2046</a>] with ASCII message headers, they are not ready for the
   extensions specified in this series of documents, and special
   measures may be needed to properly detect and process them.

<span class="h2"><a class="selflink" name="section-12" href="#section-12">12</a>.  Key Changes from the Experimental Protocols and Framework</span>

   The original framework for internationalized email addresses and
   headers was described in <a href="rfc4952.html">RFC 4952</a> and a subsequent set of
   experimental protocol documents.  Those relationships are described
   in <a href="#section-3">Section 3</a>.  The key architectural difference between the
   experimental specifications and this newer set is that the earlier
   specifications supported in-transit downgrading.  Those mechanisms
   included the definition of syntax and functions to support passing
   alternate, all-ASCII addresses with the non-ASCII ones as well as
   special headers to indicate the downgraded status of messages.  Those
   features were eliminated after experimentation indicated that they
   were more complex and less necessary than had been assumed earlier.
   Those issues are described in more detail in Sections <a href="#section-6">6</a> and <a href="#section-9">9</a>.

<span class="h2"><a class="selflink" name="section-13" href="#section-13">13</a>.  Security Considerations</span>

   Any expansion of permitted characters and encoding forms in email
   addresses raises some risks.  There have been discussions on so
   called "IDN-spoofing" or "IDN homograph attacks".  These attacks
   allow an attacker (or "phisher") to spoof the domain or URLs of
   businesses or other entities.  The same kind of attack is also
   possible on the local part of internationalized email addresses.  It
   should be noted that the proposed fix involving forcing all displayed
   elements into normalized lowercase works for domain names in URLs,
   but not for email local parts since those are case sensitive.

   Since email addresses are often transcribed from business cards and
   notes on paper, they are subject to problems arising from confusable
   characters (see [<a href="rfc4690.html" title="&quot;Review and Recommendations for Internationalized Domain Names (IDNs)&quot;">RFC4690</a>]).  These problems are somewhat reduced if
   the domain associated with the mailbox is unambiguous and supports a
   relatively small number of mailboxes whose names follow local system
   conventions.  They are increased with very large mail systems in
   which users can freely select their own addresses.






<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 19]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-20" id="page-20" href="#page-20" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   The internationalization of email addresses and message headers must
   not leave the Internet less secure than it is without the required
   extensions.  The requirements and mechanisms documented in this set
   of specifications do not, in general, raise any new security issues.

   They do require a review of issues associated with confusable
   characters -- a topic that is being explored thoroughly elsewhere
   (see, e.g., <a href="rfc4690.html">RFC 4690</a> [<a href="rfc4690.html" title="&quot;Review and Recommendations for Internationalized Domain Names (IDNs)&quot;">RFC4690</a>]) -- and, potentially, some issues with
   UTF-8 normalization, discussed in <a href="rfc3629.html">RFC 3629</a> [<a href="rfc3629.html" title="&quot;UTF-8, a transformation format of ISO 10646&quot;">RFC3629</a>], and other
   transformations.  Normalization and other issues associated with
   transformations and standard forms are also part of the subject of
   work described elsewhere [<a href="rfc5198.html" title="&quot;Unicode Format for Network Interchange&quot;">RFC5198</a>] [<a href="rfc5893.html" title="&quot;Right-to-Left Scripts for Internationalized Domain Names for Applications (IDNA)&quot;">RFC5893</a>] [<a href="rfc6055.html" title="&quot;IAB Thoughts on Encodings for Internationalized Domain Names&quot;">RFC6055</a>].

   Some issues specifically related to internationalized addresses and
   message headers are discussed in more detail in the other documents
   in this set.  However, in particular, caution should be taken that
   any "downgrading" mechanism, or use of downgraded addresses, does not
   inappropriately assume authenticated bindings between the
   internationalized and ASCII addresses.  This potential problem can be
   mitigated somewhat by enforcing the expectation that most or all such
   transformations will be performed prior to final delivery by systems
   that are presumed to be under the administrative control of the
   sending user (as opposed to being performed in transit by entities
   that are not under the administrative control of the sending user).

   The new UTF-8 header and message formats might also raise, or
   aggravate, another known issue.  If the model creates new forms of an
   'invalid' or 'malformed' message, then a new email attack is created:
   in an effort to be robust, some or most agents will accept such
   messages and interpret them as if they were well-formed.  If a filter
   interprets such a message differently than the MUA used by the
   recipient, then it may be possible to create a message that appears
   acceptable under the filter's interpretation but that should be
   rejected under the interpretation given to it by that MUA.  Such
   attacks already have occurred for existing messages and encoding
   layers, e.g., invalid MIME syntax, invalid HTML markup, and invalid
   coding of particular image types.

   In addition, email addresses are used in many contexts other than
   sending mail, such as for identifiers under various circumstances
   (see <a href="#section-11.2">Section 11.2</a>).  Each of those contexts will need to be
   evaluated, in turn, to determine whether the use of non-ASCII forms
   is appropriate and what particular issues they raise.

   This work will clearly affect any systems or mechanisms that are
   dependent on digital signatures or similar integrity protection for
   email message headers (see also the discussion in <a href="#section-11.3">Section 11.3</a>).
   Many conventional uses of PGP and S/MIME are not affected since they



<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 20]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-21" id="page-21" href="#page-21" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   are used to sign body parts but not message headers.  On the other
   hand, the developing work on DomainKeys Identified Mail (DKIM)
   [<a href="rfc5863.html" title="&quot;DomainKeys Identified Mail (DKIM) Development, Deployment, and Operations&quot;">RFC5863</a>] will eventually need to consider this work, and vice versa:
   while this specification does not address or solve the issues raised
   by DKIM and other signed header mechanisms, the issues will have to
   be coordinated and resolved eventually if the two sets of protocols
   are to coexist.  In addition, to the degree to which email addresses
   appear in PKI (Public Key Infrastructure) certificates [<a href="rfc5280.html" title="&quot;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile&quot;">RFC5280</a>],
   standards addressing such certificates will need to be upgraded to
   address these internationalized addresses.  Those upgrades will need
   to address questions of spoofing by look-alikes of the addresses
   themselves.

<span class="h2"><a class="selflink" name="section-14" href="#section-14">14</a>.  Acknowledgments</span>

   This document is an update to, and derived from, <a href="rfc4952.html">RFC 4952</a>.  This
   document would have been impossible without the work and
   contributions acknowledged in it.  The present document benefited
   significantly from discussions in the IETF EAI working group and
   elsewhere after <a href="rfc4952.html">RFC 4952</a> was published, especially discussions about
   the experimental versions of other documents in the internationalized
   email collection, and from RFC errata on <a href="rfc4952.html">RFC 4952</a> itself.

   Special thanks are due to Ernie Dainow for careful reviews and
   suggested text in this version and to several IESG members for a
   careful review and specific suggestions.

<span class="h2"><a class="selflink" name="section-15" href="#section-15">15</a>.  References</span>

<span class="h3"><a class="selflink" name="section-15.1" href="#section-15.1">15.1</a>.  Normative References</span>

   [<a name="ref-ASCII" id="ref-ASCII">ASCII</a>]    American National Standards Institute (formerly United
              States of America Standards Institute), "USA Code for
              Information Interchange", ANSI X3.4-1968, 1968.

              ANSI X3.4-1968 has been replaced by newer versions with
              slight modifications, but the 1968 version remains
              definitive for the Internet.

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a name="ref-RFC3629" id="ref-RFC3629">RFC3629</a>]  Yergeau, F., "UTF-8, a transformation format of ISO
              10646", STD 63, <a href="rfc3629.html">RFC 3629</a>, November 2003.

   [<a name="ref-RFC5321" id="ref-RFC5321">RFC5321</a>]  Klensin, J., "Simple Mail Transfer Protocol", <a href="rfc5321.html">RFC 5321</a>,
              October 2008.




<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 21]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-22" id="page-22" href="#page-22" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   [<a name="ref-RFC5322" id="ref-RFC5322">RFC5322</a>]  Resnick, P., Ed., "Internet Message Format", <a href="rfc5322.html">RFC 5322</a>,
              October 2008.

   [<a name="ref-RFC5890" id="ref-RFC5890">RFC5890</a>]  Klensin, J., "Internationalized Domain Names for
              Applications (IDNA): Definitions and Document Framework",
              <a href="rfc5890.html">RFC 5890</a>, August 2010.

   [<a name="ref-RFC6152" id="ref-RFC6152">RFC6152</a>]  Klensin, J., Freed, N., Rose, M., and D. Crocker, "SMTP
              Service Extension for 8-bit MIME Transport", STD 71,
              <a href="rfc6152.html">RFC 6152</a>, March 2011.

   [<a name="ref-RFC6531" id="ref-RFC6531">RFC6531</a>]  Yao, J. and W. Mao, "SMTP Extension for Internationalized
              Email Address", <a href="rfc6531.html">RFC 6531</a>, February 2012.

   [<a name="ref-RFC6532" id="ref-RFC6532">RFC6532</a>]  Yang, A., Steele, S., and N. Freed, "Internationalized
              Email Headers", <a href="rfc6532.html">RFC 6532</a>, February 2012.

   [<a name="ref-RFC6533" id="ref-RFC6533">RFC6533</a>]  Hansen, T., Newman, C., and A. Melnikov,
              "Internationalized Delivery Status and Disposition
              Notifications", <a href="rfc6533.html">RFC 6533</a>, February 2012.

<span class="h3"><a class="selflink" name="section-15.2" href="#section-15.2">15.2</a>.  Informative References</span>

   [<a name="ref-POPIMAP-downgrade" id="ref-POPIMAP-downgrade">POPIMAP-downgrade</a>]
              Fujiwara, K., "Post-delivery Message Downgrading for
              Internationalized Email Messages", Work in Progress,
              October 2011.

   [<a name="ref-RFC0821" id="ref-RFC0821">RFC0821</a>]  Postel, J., "Simple Mail Transfer Protocol", STD 10,
              <a href="rfc821.html">RFC 821</a>, August 1982.

   [<a name="ref-RFC1123" id="ref-RFC1123">RFC1123</a>]  Braden, R., "Requirements for Internet Hosts - Application
              and Support", STD 3, <a href="rfc1123.html">RFC 1123</a>, October 1989.

   [<a name="ref-RFC1939" id="ref-RFC1939">RFC1939</a>]  Myers, J. and M. Rose, "Post Office Protocol - Version 3",
              STD 53, <a href="rfc1939.html">RFC 1939</a>, May 1996.

   [<a name="ref-RFC2045" id="ref-RFC2045">RFC2045</a>]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
              Extensions (MIME) Part One: Format of Internet Message
              Bodies", <a href="rfc2045.html">RFC 2045</a>, November 1996.

   [<a name="ref-RFC2046" id="ref-RFC2046">RFC2046</a>]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
              Extensions (MIME) Part Two: Media Types", <a href="rfc2046.html">RFC 2046</a>,
              November 1996.

   [<a name="ref-RFC2047" id="ref-RFC2047">RFC2047</a>]  Moore, K., "MIME (Multipurpose Internet Mail Extensions)
              Part Three: Message Header Extensions for Non-ASCII Text",
              <a href="rfc2047.html">RFC 2047</a>, November 1996.



<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 22]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-23" id="page-23" href="#page-23" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   [<a name="ref-RFC2231" id="ref-RFC2231">RFC2231</a>]  Freed, N. and K. Moore, "MIME Parameter Value and Encoded
              Word Extensions: Character Sets, Languages, and
              Continuations", <a href="rfc2231.html">RFC 2231</a>, November 1997.

   [<a name="ref-RFC2821" id="ref-RFC2821">RFC2821</a>]  Klensin, J., "Simple Mail Transfer Protocol", <a href="rfc2821.html">RFC 2821</a>,
              April 2001.

   [<a name="ref-RFC3156" id="ref-RFC3156">RFC3156</a>]  Elkins, M., Del Torto, D., Levien, R., and T. Roessler,
              "MIME Security with OpenPGP", <a href="rfc3156.html">RFC 3156</a>, August 2001.

   [<a name="ref-RFC3461" id="ref-RFC3461">RFC3461</a>]  Moore, K., "Simple Mail Transfer Protocol (SMTP) Service
              Extension for Delivery Status Notifications (DSNs)",
              <a href="rfc3461.html">RFC 3461</a>, January 2003.

   [<a name="ref-RFC3464" id="ref-RFC3464">RFC3464</a>]  Moore, K. and G. Vaudreuil, "An Extensible Message Format
              for Delivery Status Notifications", <a href="rfc3464.html">RFC 3464</a>,
              January 2003.

   [<a name="ref-RFC3492" id="ref-RFC3492">RFC3492</a>]  Costello, A., "Punycode: A Bootstring encoding of Unicode
              for Internationalized Domain Names in Applications
              (IDNA)", <a href="rfc3492.html">RFC 3492</a>, March 2003.

   [<a name="ref-RFC3501" id="ref-RFC3501">RFC3501</a>]  Crispin, M., "INTERNET MESSAGE ACCESS PROTOCOL - VERSION
              4rev1", <a href="rfc3501.html">RFC 3501</a>, March 2003.

   [<a name="ref-RFC3987" id="ref-RFC3987">RFC3987</a>]  Duerst, M. and M. Suignard, "Internationalized Resource
              Identifiers (IRIs)", <a href="rfc3987.html">RFC 3987</a>, January 2005.

   [<a name="ref-RFC4155" id="ref-RFC4155">RFC4155</a>]  Hall, E., "The application/mbox Media Type", <a href="rfc4155.html">RFC 4155</a>,
              September 2005.

   [<a name="ref-RFC4690" id="ref-RFC4690">RFC4690</a>]  Klensin, J., Faltstrom, P., Karp, C., and IAB, "Review and
              Recommendations for Internationalized Domain Names
              (IDNs)", <a href="rfc4690.html">RFC 4690</a>, September 2006.

   [<a name="ref-RFC4952" id="ref-RFC4952">RFC4952</a>]  Klensin, J. and Y. Ko, "Overview and Framework for
              Internationalized Email", <a href="rfc4952.html">RFC 4952</a>, July 2007.

   [<a name="ref-RFC5198" id="ref-RFC5198">RFC5198</a>]  Klensin, J. and M. Padlipsky, "Unicode Format for Network
              Interchange", <a href="rfc5198.html">RFC 5198</a>, March 2008.

   [<a name="ref-RFC5228" id="ref-RFC5228">RFC5228</a>]  Guenther, P. and T. Showalter, "Sieve: An Email Filtering
              Language", <a href="rfc5228.html">RFC 5228</a>, January 2008.

   [<a name="ref-RFC5280" id="ref-RFC5280">RFC5280</a>]  Cooper, D., Santesson, S., Farrell, S., Boeyen, S.,
              Housley, R., and W. Polk, "Internet X.509 Public Key
              Infrastructure Certificate and Certificate Revocation List
              (CRL) Profile", <a href="rfc5280.html">RFC 5280</a>, May 2008.



<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 23]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-24" id="page-24" href="#page-24" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   [<a name="ref-RFC5335" id="ref-RFC5335">RFC5335</a>]  Yang, A., "Internationalized Email Headers", <a href="rfc5335.html">RFC 5335</a>,
              September 2008.

   [<a name="ref-RFC5336" id="ref-RFC5336">RFC5336</a>]  Yao, J. and W. Mao, "SMTP Extension for Internationalized
              Email Addresses", <a href="rfc5336.html">RFC 5336</a>, September 2008.

   [<a name="ref-RFC5337" id="ref-RFC5337">RFC5337</a>]  Newman, C. and A. Melnikov, "Internationalized Delivery
              Status and Disposition Notifications", <a href="rfc5337.html">RFC 5337</a>,
              September 2008.

   [<a name="ref-RFC5504" id="ref-RFC5504">RFC5504</a>]  Fujiwara, K. and Y. Yoneya, "Downgrading Mechanism for
              Email Address Internationalization", <a href="rfc5504.html">RFC 5504</a>, March 2009.

   [<a name="ref-RFC5721" id="ref-RFC5721">RFC5721</a>]  Gellens, R. and C. Newman, "POP3 Support for UTF-8",
              <a href="rfc5721.html">RFC 5721</a>, February 2010.

   [<a name="ref-RFC5721bis-POP3" id="ref-RFC5721bis-POP3">RFC5721bis-POP3</a>]
              Gellens, R., Newman, C., Yao, J., and K. Fujiwara, "POP3
              Support for UTF-8", Work in Progress, November 2011.

   [<a name="ref-RFC5738" id="ref-RFC5738">RFC5738</a>]  Resnick, P. and C. Newman, "IMAP Support for UTF-8",
              <a href="rfc5738.html">RFC 5738</a>, March 2010.

   [<a name="ref-RFC5738bis-IMAP" id="ref-RFC5738bis-IMAP">RFC5738bis-IMAP</a>]
              Resnick, P., Ed., Newman, C., Ed., and S. Shen, Ed., "IMAP
              Support for UTF-8", Work in Progress, December 2011.

   [<a name="ref-RFC5751" id="ref-RFC5751">RFC5751</a>]  Ramsdell, B. and S. Turner, "Secure/Multipurpose Internet
              Mail Extensions (S/MIME) Version 3.2 Message
              Specification", <a href="rfc5751.html">RFC 5751</a>, January 2010.

   [<a name="ref-RFC5825" id="ref-RFC5825">RFC5825</a>]  Fujiwara, K. and B. Leiba, "Displaying Downgraded Messages
              for Email Address Internationalization", <a href="rfc5825.html">RFC 5825</a>,
              April 2010.

   [<a name="ref-RFC5863" id="ref-RFC5863">RFC5863</a>]  Hansen, T., Siegel, E., Hallam-Baker, P., and D. Crocker,
              "DomainKeys Identified Mail (DKIM) Development,
              Deployment, and Operations", <a href="rfc5863.html">RFC 5863</a>, May 2010.

   [<a name="ref-RFC5891" id="ref-RFC5891">RFC5891</a>]  Klensin, J., "Internationalized Domain Names in
              Applications (IDNA): Protocol", <a href="rfc5891.html">RFC 5891</a>, August 2010.

   [<a name="ref-RFC5892" id="ref-RFC5892">RFC5892</a>]  Faltstrom, P., "The Unicode Code Points and
              Internationalized Domain Names for Applications (IDNA)",
              <a href="rfc5892.html">RFC 5892</a>, August 2010.






<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 24]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-25" id="page-25" href="#page-25" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


   [<a name="ref-RFC5893" id="ref-RFC5893">RFC5893</a>]  Alvestrand, H. and C. Karp, "Right-to-Left Scripts for
              Internationalized Domain Names for Applications (IDNA)",
              <a href="rfc5893.html">RFC 5893</a>, August 2010.

   [<a name="ref-RFC5894" id="ref-RFC5894">RFC5894</a>]  Klensin, J., "Internationalized Domain Names for
              Applications (IDNA): Background, Explanation, and
              Rationale", <a href="rfc5894.html">RFC 5894</a>, August 2010.

   [<a name="ref-RFC5983" id="ref-RFC5983">RFC5983</a>]  Gellens, R., "Mailing Lists and Internationalized Email
              Addresses", <a href="rfc5983.html">RFC 5983</a>, October 2010.

   [<a name="ref-RFC5983bis-MailingList" id="ref-RFC5983bis-MailingList">RFC5983bis-MailingList</a>]
              Levine, J. and R. Gellens, "Mailing Lists and UTF-8
              Addresses", Work in Progress, December 2011.

   [<a name="ref-RFC6055" id="ref-RFC6055">RFC6055</a>]  Thaler, D., Klensin, J., and S. Cheshire, "IAB Thoughts on
              Encodings for Internationalized Domain Names", <a href="rfc6055.html">RFC 6055</a>,
              February 2011.

   [<a name="ref-RFC6068" id="ref-RFC6068">RFC6068</a>]  Duerst, M., Masinter, L., and J. Zawinski, "The 'mailto'
              URI Scheme", <a href="rfc6068.html">RFC 6068</a>, October 2010.

   [<a name="ref-RFC6409" id="ref-RFC6409">RFC6409</a>]  Gellens, R. and J. Klensin, "Message Submission for Mail",
              STD 72, <a href="rfc6409.html">RFC 6409</a>, November 2011.

   [<a name="ref-Unicode" id="ref-Unicode">Unicode</a>]  The Unicode Consortium.  The Unicode Standard, Version
              6.0.0, defined by:, "The Unicode Standard, Version 6.0.0",
              (Mountain View, CA: The Unicode Consortium, 2011.  ISBN
              978-1-936213-01-6).,
              &lt;<a href="http://www.unicode.org/versions/Unicode6.0.0/">http://www.unicode.org/versions/Unicode6.0.0/</a>&gt;.

   [<a name="ref-Unicode-UAX15" id="ref-Unicode-UAX15">Unicode-UAX15</a>]
              The Unicode Consortium, "Unicode Standard Annex #15:
              Unicode Normalization Forms", September 2010,
              &lt;<a href="http://www.unicode.org/reports/tr15/">http://www.unicode.org/reports/tr15/</a>&gt;.
















<span class="grey">Klensin &amp; Ko                 Standards Track                   [Page 25]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-26" id="page-26" href="#page-26" class="invisible"> </a>
<span class="grey"><a href="rfc6530.html">RFC 6530</a>            Internationalized Email Framework      February 2012</span>


Authors' Addresses

   John C KLENSIN
   1770 Massachusetts Ave, #322
   Cambridge, MA  02140
   USA

   Phone: +1 617 491 5735
   EMail: john-ietf@jck.com


   YangWoo KO
   112-202 Malgeunachim APT. Nae-dong
   Seo-gu, Daejeon  302-981
   Republic of Korea

   EMail: yangwooko@gmail.com


































Klensin &amp; Ko                 Standards Track                   [Page 26]

</pre><br />
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.129c, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>
</body>

<!-- Mirrored from tools.ietf.org/html/rfc6530 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 12:43:00 GMT -->
</html>
