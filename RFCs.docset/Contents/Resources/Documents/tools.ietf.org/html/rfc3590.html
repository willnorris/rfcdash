<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3590 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:46 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:3590" name="DC.Identifier"/>
<meta content="It has come to light that there is an issue with the selection of a
suitable IPv6 source address for Multicast Listener Discovery (MLD)
messages when a node is performing stateless address
autoconfiguration. This document is intended to clarify the rules on
selecting an IPv6 address to use for MLD messages. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Brian Haberman &lt;brian@innovationslab.net&gt;" name="DC.Creator"/>
<meta content="September, 2003" name="DC.Date.Issued"/>
<meta content="Source Address Selection for the Multicast Listener Discovery (MLD) Protocol" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3590 - Source Address Selection for the Multicast Listener Discovery (MLD) Protocol</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc3590.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc3590" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-magma-mld-source" title="draft-ietf-magma-mld-source">draft-ietf-magm...</a>] [<a href="https://datatracker.ietf.org/doc/rfc3590" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3590" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc3590" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                        B. Haberman
Request for Comments: 3590                              Caspian Networks
Updates: <a href="rfc2710.html">2710</a>                                             September 2003
Category: Standards Track


                    <span class="h1">Source Address Selection for the</span>
              <span class="h1">Multicast Listener Discovery (MLD) Protocol</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

Abstract

   It has come to light that there is an issue with the selection of a
   suitable IPv6 source address for Multicast Listener Discovery (MLD)
   messages when a node is performing stateless address
   autoconfiguration.  This document is intended to clarify the rules on
   selecting an IPv6 address to use for MLD messages.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The original specification of the Multicast Listener Discovery
   Protocol (MLD) for IPv6 [<a href="rfc2710.html">RFC 2710</a>] mandates the use of a link-local
   IPv6 source address for the transmission of MLD messages.  In
   addition, MLD also requires nodes to send MLD Report messages when
   joining any IPv6 multicast group (except the All-Nodes address and
   addresses of scope less than 2).

   These MLD requirements conflict with the use of IPv6 multicast within
   the Neighbor Discovery Protocol [<a href="rfc2461.html">RFC 2461</a>].  For stateless
   autoconfiguration, as defined in [<a href="rfc2462.html">RFC 2462</a>], a node is required to
   join several IPv6 multicast groups in order to perform Duplicate
   Address Detection prior to its use.  Since the only address the node
   has is tentative, and cannot be used for communication, it does not
   have a suitable address to utilize as a source address.






<span class="grey">Haberman                    Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3590.html">RFC 3590</a>       Source Address Selection for MLD Protocol  September 2003</span>


   This document will clarify the IPv6 source address selection rules
   for use with MLD when no link-local addresses are available.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html">RFC 2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Justification"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Justification</span>

   In <a href="rfc2710.html#section-3">[RFC 2710], Section 3</a> requires that all MLD messages be sent with
   a valid link-local IPv6 source address.  However, a node in the
   process of performing duplicate address detection for its link-local
   (LL) address will not have one available to use as a source address.
   For this reason, this document allows the unspecified address to be
   used as a source address for MLD messages being used during duplicate
   address detection.

   The discrepancies in the rules defined in [<a href="rfc2710.html">RFC 2710</a>] and [<a href="rfc2462.html">RFC 2462</a>]
   has led to implementation issues.  Several IPv6 implementations skip
   sending MLD Report messages during duplicate address detection
   because they have no valid link-local address.  This leads to
   operational problems when a node is attached to switches that perform
   MLD snooping.  In this scenario, duplicate address detection (DAD)
   will complete successfully and collisions can occur once the address
   is put into use because switches may not have forwarded the DAD
   messages to all nodes on the link as required.  This document fixes
   this problem by specifying that MLD reports are to be sent using an
   unspecified source address prior to DAD being started in order to
   ensure that messages sent to LL multicast addresses (e.g., including
   MLD) are forwarded to all appropriate nodes as required.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20MLD%20Source%20Address%20Selection%20Guidelines"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  MLD Source Address Selection Guidelines</span>

   An MLD speaking node is required to choose a suitable IPv6 source
   address for all MLD messages (Report, Done, and Query).

   MLD Query messages MUST be sent with a valid link-local address as
   the IPv6 source address.  If a node (router or host) receives a query
   message with an IPv6 source address set to the unspecified address
   (::), it MUST silently discard the message and SHOULD log a warning.

   MLD Report and Done messages are sent with a link-local address as
   the IPv6 source address, if a valid address is available on the
   interface.  If a valid link-local address is not available (e.g., one
   has not been configured), the message is sent with the unspecified
   address (::) as the IPv6 source address.



<span class="grey">Haberman                    Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3590.html">RFC 3590</a>       Source Address Selection for MLD Protocol  September 2003</span>


   Once a valid link-local address is available, a node SHOULD generate
   new MLD Report messages for all multicast addresses joined on the
   interface.

   Routers receiving an MLD Report or Done message with the unspecified
   address as the IPv6 source address MUST silently discard the packet
   without taking any action on the packets contents.

   Snooping switches MUST manage multicast forwarding state based on MLD
   Report and Done messages sent with the unspecified address as the
   IPv6 source address.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Source%20Address%20Selection%20Implications"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Source Address Selection Implications</span>

   In <a href="rfc2710.html">RFC 2710</a>, MLD Report and Done messages are required to have an
   IPv6 source address that is link-local.  This memo augments that rule
   by allowing these messages to contain the unspecified address (::) as
   the source address.

   The behavior of <a href="rfc2710.html">RFC 2710</a> implementations, when receiving a message
   with a source address of ::, is dependent upon how the implementation
   treats the unspecified address.  That is, these messages will be
   dropped if the implementation does not consider the unspecified
   address to be link-local in scope.

   As the unspecified address is only used when there is no link-local
   address, <a href="rfc2710.html">RFC 2710</a> implementations discarding these packets will have
   no affect on the packet's sender as the use should only be for
   joining the link-local solicited-node multicast group [<a href="rfc2462.html">RFC 2462</a>].

   There is an implication to senders with respect to joining other
   multicast groups prior to the activation of a link-local address.
   The dropping of Reports using the unspecified address as a source
   address could cause a lack of multicast traffic that is expected by
   the node.  This black hole will be temporary until the node can send
   a Report with a valid link-local address.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   General security issues related to MLD are discussed in [<a href="rfc2710.html">RFC 2710</a>].

   For hosts and routers, all received MLD messages from an unspecified
   source address are silently discarded.  This is the required behavior
   from [<a href="rfc2710.html">RFC 2710</a>] and is not changed by this document.  Thus, the
   changes have no new security impacts.






<span class="grey">Haberman                    Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3590.html">RFC 3590</a>       Source Address Selection for MLD Protocol  September 2003</span>


   In the case of snooping switches, multicast forwarding state will be
   maintained based on Report and Done messages sent with the
   unspecified address as the source address.  However, the security
   vulnerabilities in this scenario are similar to those describing
   forged messages in the security considerations section of [<a href="rfc2710.html">RFC 2710</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Intellectual%20Property%20Statement"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Intellectual Property Statement</span>

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in <a href="https://tools.ietf.org/html/bcp11">BCP-11</a>.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC 2119" name="ref-RFC 2119">RFC 2119</a>] Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC 2710" name="ref-RFC 2710">RFC 2710</a>] Deering, S., Fenner, W. and B. Haberman, "Multicast
              Listener Discovery (MLD) for IPv6", <a href="rfc2710.html">RFC 2710</a>, October
              1999.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-RFC 2461" name="ref-RFC 2461">RFC 2461</a>] Narten, T., Nordmark, E. and W. Simpson, "Neighbor
              Discovery for IP Version 6 (IPv6)", <a href="rfc2461.html">RFC 2461</a>, December
              1998.

   [<a id="ref-RFC 2462" name="ref-RFC 2462">RFC 2462</a>] Thomson, S. and T. Narten, "IPv6 Stateless Address
              Autoconfiguration", <a href="rfc2462.html">RFC 2462</a>, December 1998.




<span class="grey">Haberman                    Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3590.html">RFC 3590</a>       Source Address Selection for MLD Protocol  September 2003</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Author%27s%20Address"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Author's Address</span>

   Brian Haberman
   Caspian Networks
   753 Bridgewater Drive
   Sykesville, MD  21784

   Phone: +1-410-552-1421
   EMail: brian@innovationslab.net










































<span class="grey">Haberman                    Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc3590.html">RFC 3590</a>       Source Address Selection for MLD Protocol  September 2003</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Haberman                    Standards Track                     [Page 6]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc3590 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:46 GMT --></html>