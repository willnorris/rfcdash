<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4090 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:43 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4090" name="DC.Identifier"/>
<meta content="This document defines RSVP-TE extensions to establish backup label-
switched path (LSP) tunnels for local repair of LSP tunnels. These
mechanisms enable the re-direction of traffic onto backup LSP tunnels
in 10s of milliseconds, in the event of a failure.  Two methods are
defined here. The one-to-one backup method creates detour LSPs for
each protected LSP at each potential point of local repair. The
facility backup method creates a bypass tunnel to protect a potential
failure point; by taking advantage of MPLS label stacking, this bypass
tunnel can protect a set of LSPs that have similar backup constraints.
Both methods can be used to protect links and nodes during network
failure. The described behavior and extensions to RSVP allow nodes to
implement either method or both and to interoperate in a mixed
network. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Swallow, George" name="DC.Creator"/>
<meta content="Pan, Ping" name="DC.Creator"/>
<meta content="Atlas, Alia" name="DC.Creator"/>
<meta content="May, 2005" name="DC.Date.Issued"/>
<meta content="Fast Reroute Extensions to RSVP-TE for LSP Tunnels" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4090 - Fast Reroute Extensions to RSVP-TE for LSP Tunnels</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4090.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4090" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-mpls-rsvp-lsp-fastreroute" title="draft-ietf-mpls-rsvp-lsp-fastreroute">draft-ietf-mpls...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4090" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4090" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4090" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=4090&amp;submit=rfc" title="IPR disclosures related to this document">IPR</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=4090">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Updated by: <a href="rfc8271.html">8271</a>                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                        P. Pan, Ed.
Request for Comments: 4090                            Hammerhead Systems
Category: Standards Track                                G. Swallow, Ed.
                                                           Cisco Systems
                                                           A. Atlas, Ed.
                                                           Avici Systems
                                                                May 2005


           <span class="h1">Fast Reroute Extensions to RSVP-TE for LSP Tunnels</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This document defines RSVP-TE extensions to establish backup label-
   switched path (LSP) tunnels for local repair of LSP tunnels.  These
   mechanisms enable the re-direction of traffic onto backup LSP tunnels
   in 10s of milliseconds, in the event of a failure.

   Two methods are defined here.  The one-to-one backup method creates
   detour LSPs for each protected LSP at each potential point of local
   repair.  The facility backup method creates a bypass tunnel to
   protect a potential failure point; by taking advantage of MPLS label
   stacking, this bypass tunnel can protect a set of LSPs that have
   similar backup constraints.  Both methods can be used to protect
   links and nodes during network failure.  The described behavior and
   extensions to RSVP allow nodes to implement either method or both and
   to interoperate in a mixed network.












<span class="grey">Pan, et al.                 Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction ...................................................<a href="#page-3">3</a>
       <a href="#section-1.1">1.1</a>.  Background ...............................................<a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Terminology ....................................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>.  Local Repair Techniques ........................................<a href="#page-6">6</a>
       <a href="#section-3.1">3.1</a>.  One-to-One Backup ........................................<a href="#page-6">6</a>
       <a href="#section-3.2">3.2</a>.  Facility Backup ..........................................<a href="#page-7">7</a>
   <a href="#section-4">4</a>.  RSVP Extensions ................................................<a href="#page-8">8</a>
       <a href="#section-4.1">4.1</a>.  FAST_REROUTE Object ......................................<a href="#page-8">8</a>
       <a href="#section-4.2">4.2</a>.  DETOUR Object ...........................................<a href="#page-11">11</a>
             <a href="#section-4.2.1">4.2.1</a>. DETOUR Object for IPv4 Address ...................<a href="#page-11">11</a>
             <a href="#section-4.2.2">4.2.2</a>. DETOUR Object for IPv6 Address ...................<a href="#page-12">12</a>
       <a href="#section-4.3">4.3</a>.  SESSION_ATTRIBUTE Flags .................................<a href="#page-13">13</a>
       <a href="#section-4.4">4.4</a>.  RRO IPv4/IPv6 Sub-object Flags ..........................<a href="#page-14">14</a>
   <a href="#section-5">5</a>.  Head-End Behavior .............................................<a href="#page-15">15</a>
   <a href="#section-6">6</a>.  Point of Local Repair (PLR) Behavior ..........................<a href="#page-16">16</a>
       <a href="#section-6.1">6.1</a>.  Signaling a Backup Path .................................<a href="#page-17">17</a>
             6.1.1. Backup Path Identification: Sender
                    Template-Specific ................................<a href="#page-19">19</a>
             <a href="#section-6.1.2">6.1.2</a>. Backup Path Identification: Path-Specific ........<a href="#page-19">19</a>
       <a href="#section-6.2">6.2</a>.  Procedures for Backup Path Computation ..................<a href="#page-20">20</a>
       <a href="#section-6.3">6.3</a>.  Signaling Backups for One-to-One Protection .............<a href="#page-21">21</a>
             <a href="#section-6.3.1">6.3.1</a>. Make-before-Break with Detour LSPs ...............<a href="#page-22">22</a>
             <a href="#section-6.3.2">6.3.2</a>. Message Handling .................................<a href="#page-23">23</a>
             <a href="#section-6.3.3">6.3.3</a>. Local Reroute of Traffic onto Detour LSP .........<a href="#page-23">23</a>
        <a href="#section-6.4">6.4</a>. Signaling for Facility Protection .......................<a href="#page-24">24</a>
             <a href="#section-6.4.1">6.4.1</a>. Discovering Downstream Labels ....................<a href="#page-24">24</a>
             <a href="#section-6.4.2">6.4.2</a>. Procedures for the PLR before Local Repair .......<a href="#page-24">24</a>
             <a href="#section-6.4.3">6.4.3</a>. Procedures for the PLR during Local Repair .......<a href="#page-25">25</a>
             <a href="#section-6.4.4">6.4.4</a>. Processing Backup Tunnel's ERO ...................<a href="#page-26">26</a>
        <a href="#section-6.5">6.5</a>. PLR Procedures during Local Repair ......................<a href="#page-26">26</a>
             <a href="#section-6.5.1">6.5.1</a>. Notification of Local Repair .....................<a href="#page-26">26</a>
             <a href="#section-6.5.2">6.5.2</a>. Revertive Behavior ...............................<a href="#page-27">27</a>
   <a href="#section-7">7</a>.  Merge Node Behavior ...........................................<a href="#page-28">28</a>
       <a href="#section-7.1">7.1</a>.  Handling Backup Path Messages before Failure ............<a href="#page-28">28</a>
             7.1.1. Merging Backup Paths using the Sender
                    Template-Specific Method .........................<a href="#page-29">29</a>
             <a href="#section-7.1.2">7.1.2</a>. Merging Detours using the Path-Specific Method ...<a href="#page-29">29</a>
             <a href="#section-7.1.3">7.1.3</a>. Message Handling for Merged Detours ..............<a href="#page-31">31</a>
       <a href="#section-7.2">7.2</a>.  Handling Failures .......................................<a href="#page-31">31</a>
   <a href="#section-8">8</a>.  Behavior of All LSRs ..........................................<a href="#page-32">32</a>
       <a href="#section-8.1">8.1</a>.  Merging Detours in the Path-Specific Method .............<a href="#page-32">32</a>
   <a href="#section-9">9</a>.  Security Considerations .......................................<a href="#page-33">33</a>
   <a href="#section-10">10</a>. IANA Considerations ...........................................<a href="#page-33">33</a>
   <a href="#section-11">11</a>. Contributors ..................................................<a href="#page-35">35</a>
   <a href="#section-12">12</a>. Acknowledgments ...............................................<a href="#page-36">36</a>
   <a href="#section-13">13</a>. Normative References ..........................................<a href="#page-36">36</a>



<span class="grey">Pan, et al.                 Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document extends RSVP [<a href="#ref-RSVP" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RSVP</a>] to establish backup label-switched
   path (LSP) tunnels for the local repair of LSP tunnels.  This
   extension will meet the needs of real-time applications such as voice
   over IP, for which user traffic should be redirected onto backup LSP
   tunnels in 10s of milliseconds.  This timing requirement can be
   satisfied by computing and signaling backup LSP tunnels in advance of
   failure and by re-directing traffic as close to the failure point as
   possible.  In this way, the time for redirection includes no path
   computation and no signaling delays, including delays to propagate
   failure notification between label-switched routers (LSRs).  Speed of
   repair is the primary advantage of the methods and extensions
   described here.  The term local repair is used when referring to
   techniques that re-direct traffic to a backup LSP tunnel in response
   to a local failure.

   A protected LSP is an explicitly-routed LSP that is provided with
   protection.  The repair methods described here are applicable only to
   explicitly-routed LSPs.  Application of these methods to LSPs that
   dynamically change their routes, such as LSPs used in unicast IGP
   routing, is beyond the scope of this document.

   <a href="#section-2">Section 2</a> covers new terminology used in this document.  <a href="#section-3">Section 3</a>
   describes two basic methods for creating backup LSPs.  <a href="#section-4">Section 4</a>
   describes the RSVP protocol extensions to support local protection.
   <a href="#section-5">Section 5</a> presents the behavior of an LSR that seeks to request local
   protection for an LSP.  The behavior of a potential point of local
   repair (PLR) is given in <a href="#section-6">Section 6</a>, which describes how to determine
   the appropriate strategy for protecting an LSP and how to implement
   each of the strategies.  <a href="#section-7">Section 7</a> describes the behavior of a merge
   node, the LSR where a protected LSP and its backup LSP rejoin.
   Finally, <a href="#section-8">Section 8</a> discusses the required behavior of other nodes in
   the network.

   The methods discussed in this document depend upon three assumptions:

      o    An LSR that is on the path of a protected LSP should always
           assume that it is a merge point.  This is necessary because
           the facility backup method does not signal backups through a
           bypass tunnel before failure.

      o    If the one-to-one backup method is used and a DETOUR object
           is included, the LSRs in the traffic-engineered network
           should support the DETOUR object.  This is necessary so that
           the Path message containing the DETOUR object is not
           rejected.




<span class="grey">Pan, et al.                 Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


      o    Understanding the DETOUR object is required to support the
           path-specific method, which requires that LSRs in the
           traffic-engineered network be capable of merging detours.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Background"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Background</span>

   Several years before work began on this document, operational
   networks had deployed two independent methods of doing fast reroute;
   these methods are called here one-to-one backup and facility backup.
   Vendors trying to support both methods experienced compatibility
   problems in attempting to produce a single implementation capable of
   interoperating with both methods.  There are technical tradeoffs
   between the methods.  These tradeoffs are so topologically dependent
   that the community has not converged on a single approach.

   This document rationalizes the RSVP signaling for both methods so
   that any implementation can recognize all fast reroute requests and
   clearly respond.  The response may be positive if the method can be
   performed, or it may be a clear error to inform the requester to seek
   alternate backup means.  This document also allows a single
   implementation to support both methods, thereby providing a range of
   capabilities.  The described behavior and extensions to RSVP allow
   LERs and LSRs to implement either method or both.

   While the two methods could in principle be used in a single network,
   it is expected that operators will continue to deploy either one or
   the other.  The goal of this document is to standardize the RSVP
   signaling so that a network composed of LSRs that implement both
   methods or a network composed of some LSRs that support one method
   and others that support both can properly signal among those LSRs to
   achieve fast restoration.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC2119</a> [<a href="#ref-RFC-WORDS" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC-WORDS</a>].

   The reader is assumed to be familiar with the terminology in [<a href="#ref-RSVP" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RSVP</a>]
   and [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>].

      LSR: Label-Switch Router.

      LSP: An MPLS Label-Switched Path.  In this document, an LSP will
            always be explicitly routed.

      Local Repair: Techniques used to repair LSP tunnels quickly when a
            node or link along the LSP's path fails.



<span class="grey">Pan, et al.                 Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


      PLR: Point of Local Repair.  The head-end LSR of a backup tunnel
            or a detour LSP.

      One-to-One Backup: A local repair method in which a backup LSP is
            separately created for each protected LSP at a PLR.

      Facility Backup: A local repair method in which a bypass tunnel is
            used to protect one or more protected LSPs that traverse the
            PLR, the resource being protected, and the Merge Point in
            that order.

      Protected LSP: An LSP is said to be protected at a given hop if it
            has one or multiple associated backup tunnels originating at
            that hop.

      Detour LSP: The LSP that is used to re-route traffic around a
            failure in one-to-one backup.

      Bypass Tunnel: An LSP that is used to protect a set of LSPs
            passing over a common facility.

      Backup Tunnel: The LSP that is used to backup up one of the many
            LSPs in many-to-one backup.

      NHOP Bypass Tunnel: Next-Hop Bypass Tunnel.  A backup tunnel that
            bypasses a single link of the protected LSP.

      NNHOP Bypass Tunnel: Next-Next-Hop Bypass Tunnel.  A backup tunnel
            that bypasses a single node of the protected LSP.

      Backup Path: The LSP that is responsible for backing up one
            protected LSP.  A backup path refers to either a detour LSP
            or a backup tunnel.

      MP: Merge Point.  The LSR where one or more backup tunnels rejoin
            the path of the protected LSP downstream of the potential
            failure.  The same LSR may be both an MP and a PLR
            simultaneously.

      DMP: Detour Merge Point.  In the case of one-to-one backup, this
            is an LSR where multiple detours converge.  Only one detour
            is signaled beyond that LSR.

      Reroutable LSP: Any LSP for which the head-end LSR requests local
            protection.  See <a href="#section-5">Section 5</a> for more detail.

      CSPF: Constraint-based Shortest Path First.




<span class="grey">Pan, et al.                 Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


      SRLG Disjoint: A path is considered to be SRLG disjoint from a
            given link or node if the path does not use any links or
            nodes which belong to the same SRLG as that given link or
            node.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Local%20Repair%20Techniques"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Local Repair Techniques</span>

   Two different methods for local protection are described.  In the
   one-to-one backup method, a PLR computes a separate backup LSP,
   called a detour LSP, for each LSP that the PLR protects.  In the
   facility backup method, the PLR creates a single bypass tunnel that
   can be used to protect multiple LSPs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20One-to-One%20Backup"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  One-to-One Backup</span>

   In the one-to-one backup method, a label-switched path is established
   that intersects the original LSP somewhere downstream of the point of
   link or node failure.  A separate backup LSP is established for each
   LSP that is backed up.

              [R1]----[R2]----[R3]------[R4]------[R5]
                  \       \       \    /    \    /
                   [R6]----[R7]----[<a href="#ref-R8">R8</a>]------[R9]

              Protected LSP:  [R1-&gt;R2-&gt;R3-&gt;R4-&gt;R5]
              R1's Backup:    [R1-&gt;R6-&gt;R7-&gt;R8-&gt;R3]
              R2's Backup:    [R2-&gt;R7-&gt;R8-&gt;R4]
              R3's Backup:    [R3-&gt;R8-&gt;R9-&gt;R5]
              R4's Backup:    [R4-&gt;R9-&gt;R5]

              Example 1.  One-to-One Backup Technique

   In the simple topology shown in Example 1, the protected LSP runs
   from R1 to R5.  R2 can provide user traffic protection by creating a
   partial backup LSP that merges with the protected LSP at R4.  We
   refer to a partial one-to-one backup LSP [R2-&gt;R7-&gt;R8-&gt;R4] as a
   detour.

   To protect an LSP that traverses N nodes fully, there could be as
   many as (N - 1) detours.  Example 1 shows the paths for the detours
   necessary to protect fully the LSP in the example.  To minimize the
   number of LSPs in the network, it is desirable to merge a detour back
   to its protected LSP, when feasible.  When a detour LSP intersects
   its protected LSP at an LSR with the same outgoing interface, it will
   be merged.






<span class="grey">Pan, et al.                 Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   When a failure occurs along the protected LSP, the PLR redirects
   traffic onto the local detour.  For instance, if the link [R2-&gt;R3]
   fails in Example 1, R2 will switch traffic received from R1 onto the
   protected LSP along link [R2-&gt;R7], using the label received when R2
   created the detour.  When R4 receives traffic with the label provided
   for R2's detour, R4 will switch that traffic onto link [R4-R5], using
   the label received from R5 for the protected LSP.  At no point does
   the depth of the label stack increase as a result of the detour.
   While R2 is using its detour, traffic will take the path
   [R1-&gt;R2-&gt;R7-&gt;R8-&gt;R4-&gt;R5].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Facility%20Backup"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Facility Backup</span>

   The facility backup method takes advantage of the MPLS label stack.
   Instead of creating a separate LSP for every backed-up LSP, a single
   LSP is created that serves to back up a set of LSPs.  We call such an
   LSP tunnel a bypass tunnel.

   The bypass tunnel must intersect the path of the original LSP(s)
   somewhere downstream of the PLR.  Naturally, this constrains the set
   of LSPs being backed up via that bypass tunnel to those that pass
   through some common downstream node.  All LSPs that pass through the
   point of local repair and through this common node that do not also
   use the facilities involved in the bypass tunnel are candidates for
   this set of LSPs.

                 [<a id="ref-R8" name="ref-R8">R8</a>]
                     \
               [R1]---[R2]----[R3]-----[R4]---[R5]
                          \           /    \
                           [R6]===[R7]      [R9]

                Protected LSP 1:   [R1-&gt;R2-&gt;R3-&gt;R4-&gt;R5]
                Protected LSP 2:   [R8-&gt;R2-&gt;R3-&gt;R4]
                Protected LSP 3:   [R2-&gt;R3-&gt;R4-&gt;R9]
                Bypass LSP Tunnel: [R2-&gt;R6-&gt;R7-&gt;R4]

                    Example 2.  Facility Backup Technique

   In Example 2, R2 has built a bypass tunnel that protects against the
   failure of link [R2-&gt;R3] and node [R3].  The doubled lines represent
   this tunnel.  This technique provides a scalability improvement, in
   that the same bypass tunnel can also be used to protect LSPs from any
   of R1, R2, or R8 to any of R4, R5, or R9.  Example 2 describes three
   different protected LSPs that are using the same bypass tunnel for
   protection.





<span class="grey">Pan, et al.                 Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   As with the one-to-one method, there could be as many as (N-1) bypass
   tunnels to fully protect an LSP that traverses N nodes.  However,
   each of those bypass tunnels could protect a set of LSPs.

   When a failure occurs along a protected LSP, the PLR redirects
   traffic into the appropriate bypass tunnel.  For instance, if link
   [R2-&gt;R3] fails in Example 2, R2 will switch traffic received from R1
   on the protected LSP onto link [R2-&gt;R6].  The label will be switched
   for one which will be understood by R4 to indicate the protected LSP,
   and the bypass tunnel's label will then be pushed onto the label-
   stack of the redirected packets.  If penultimate-hop-popping is used,
   the merge point in Example 2, R4, will receive the redirected packet
   with a label indicating the protected LSP that the packet is to
   follow.  If penultimate-hop-popping is not used, R4 will pop the
   bypass tunnel's label and examine the label underneath to determine
   the protected LSP that the packet is to follow.  When R2 is using the
   bypass tunnel for protected LSP 1, the traffic takes the path
   [R1-&gt;R2-&gt;R6-&gt;R7-&gt;R4-&gt;R5]; the bypass tunnel is the connection between
   R2 and R4.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20RSVP%20Extensions"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  RSVP Extensions</span>

   This specification defines two additional objects, FAST_REROUTE and
   DETOUR, to extend RSVP-TE for fast-reroute signaling.  These new
   objects are backward compatible with LSRs that do not recognize them
   (see section 3.10 in [<a href="#ref-RSVP" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RSVP</a>]).  Both objects can only be carried in
   RSVP Path messages.

   The SESSION_ATTRIBUTE and RECORD_ROUTE objects are also extended to
   support bandwidth and node protection features.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20FAST_REROUTE%20Object"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  FAST_REROUTE Object</span>

   The FAST_REROUTE object is used to control the backup used for the
   protected LSP.  This specifies the setup and hold priorities, session
   attribute filters, and bandwidth to be used for protection.  It also
   allows a specific local protection method to be requested.  This
   object MUST only be inserted into the PATH message by the head-end
   LER and MUST NOT be changed by downstream LSRs.  The FAST_REROUTE
   object has the following format:











<span class="grey">Pan, et al.                 Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


      Class-Num = 205
      C-Type = 1

             0             1             2             3
      +-------------+-------------+-------------+-------------+
      |       Length (bytes)      |  Class-Num  |   C-Type    |
      +-------------+-------------+-------------+-------------+
      | Setup Prio  | Hold Prio   | Hop-limit   |    Flags    |
      +-------------+-------------+-------------+-------------+
      |                  Bandwidth                            |
      +-------------+-------------+-------------+-------------+
      |                  Include-any                          |
      +-------------+-------------+-------------+-------------+
      |                  Exclude-any                          |
      +-------------+-------------+-------------+-------------+
      |                  Include-all                          |
      +-------------+-------------+-------------+-------------+

      Setup Priority

         The priority of the backup path with respect to taking
         resources, in the range 0 to 7.  The value 0 is the highest
         priority.  Setup Priority is used in deciding whether this
         session can preempt another session.  See [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>] for the
         usage on priority.

      Holding Priority

         The priority of the backup path with respect to holding
         resources, in the range 0 to 7.  The value 0 is the highest
         priority.  Holding Priority is used in deciding whether this
         session can be preempted by another session.  See [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>] for
         the usage on priority.

      Hop-limit

         The maximum number of extra hops the backup path is allowed to
         take, from current node (a PLR) to an MP, with PLR and MP
         excluded from the count.  For example, hop-limit of 0 means
         that only direct links between PLR and MP can be considered.

      Flags

         0x01  One-to-One Backup Desired

            Requests protection via the one-to-one backup method.





<span class="grey">Pan, et al.                 Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


         0x02  Facility Backup Desired

            Requests protection via the facility backup method.

      Bandwidth

         Bandwidth estimate; 32-bit IEEE floating point integer, in
         bytes per second.

      Exclude-any

         A 32-bit vector representing a set of attribute filters
         associated with a backup path, any of which renders a link
         unacceptable.

      Include-any

         A 32-bit vector representing a set of attribute filters
         associated with a backup path, any of which renders a link
         acceptable (with respect to this test).  A null set (all bits
         set to zero) automatically passes.

      Include-all

         A 32-bit vector representing a set of attribute filters
         associated with a backup path, all of which must be present for
         a link to be acceptable (with respect to this test).  A null
         set (all bits set to zero) automatically passes.

   The two high-order bits of the Class-Num (11) cause nodes that do not
   understand the object to ignore it and pass it forward unchanged.

   For informational purposes, a different C-Type value and format for
   the FAST_REROUTE object are specified below.  This is used by legacy
   implementations.  The meaning of the fields is the same as that
   described for C-Type 1.















<span class="grey">Pan, et al.                 Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


      Class-Num = 205
      C-Type = 7

             0             1             2             3
      +-------------+-------------+-------------+-------------+
      |       Length (bytes)      |  Class-Num  |   C-Type    |
      +-------------+-------------+-------------+-------------+
      | Setup Prio  | Hold Prio   | Hop-limit   | Reserved    |
      +-------------+-------------+-------------+-------------+
      |                  Bandwidth                            |
      +-------------+-------------+-------------+-------------+
      |                  Include-any                          |
      +-------------+-------------+-------------+-------------+
      |                  Exclude-any                          |
      +-------------+-------------+-------------+-------------+

   Unknown C-Types should be treated as specified in [<a href="#ref-RSVP" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RSVP</a>] <a href="#section-3.10">Section</a>
   <a href="#section-3.10">3.10</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20DETOUR%20Object"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  DETOUR Object</span>

   The DETOUR object is used in the one-to-one backup method to identify
   detour LSPs.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.1.%20%20DETOUR%20Object%20for%20IPv4%20Address"></a><a class="selflink" href="#section-4.2.1" name="section-4.2.1">4.2.1</a>.  DETOUR Object for IPv4 Address</span>

      Class-Num = 63
      C-Type = 7

            0             1              2             3
       +-------------+-------------+-------------+-------------+
       |       Length (bytes)      |  Class-Num  |   C-Type    |
       +-------------+-------------+-------------+-------------+
       |                      PLR_ID  1                        |
       +-------------+-------------+-------------+-------------+
       |                    Avoid_Node_ID 1                    |
       +-------------+-------------+-------------+-------------+
      //                        ....                          //
       +-------------+-------------+-------------+-------------+
       |                      PLR_ID  n                        |
       +-------------+-------------+-------------+-------------+
       |                    Avoid_Node_ID  n                   |
       +-------------+-------------+-------------+-------------+

      PLR_ID  (1 - n)

         IPv4 address identifying the PLR that is the beginning point of
         the detour.  Any local address on the PLR can be used.



<span class="grey">Pan, et al.                 Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


      Avoid_Node_ID  (1 - n)

         IPv4 address identifying the immediate downstream node that the
         PLR is trying to avoid.  Any local address of the downstream
         node can be used.  This field is mandatory and is used by the
         MP for the merging rules discussed below.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.2.%20%20DETOUR%20Object%20for%20IPv6%20Address"></a><a class="selflink" href="#section-4.2.2" name="section-4.2.2">4.2.2</a>.  DETOUR Object for IPv6 Address</span>

      Class-Num = 63
      C-Type = 8

             0             1              2             3
        +-------------+-------------+-------------+-------------+
        |       Length (bytes)      |  Class-Num  |   C-Type    |
        +-------------+-------------+-------------+-------------+
        |                      PLR_ID  1                        |
        +-------------+-------------+-------------+-------------+
        |                      PLR_ID  1 (continued)            |
        +-------------+-------------+-------------+-------------+
        |                      PLR_ID  1 (continued)            |
        +-------------+-------------+-------------+-------------+
        |                      PLR_ID  1 (continued)            |
        +-------------+-------------+-------------+-------------+
        |                    Avoid_Node_ID 1                    |
        +-------------+-------------+-------------+-------------+
        |                    Avoid_Node_ID 1 (continued)        |
        +-------------+-------------+-------------+-------------+
        |                    Avoid_Node_ID 1 (continued)        |
        +-------------+-------------+-------------+-------------+
        |                    Avoid_Node_ID 1 (continued)        |
        +-------------+-------------+-------------+-------------+
       //                        ....                          //
        +-------------+-------------+-------------+-------------+

      PLR_ID  (1 - n)

         An IPv6 128-bit unicast host address identifying the PLR that
         is the beginning point of the detour.  Any local address on the
         PLR can be used.

      Avoid_Node_ID  (1 - n)

         An IPv6 128-bit unicast host address identifying the immediate
         downstream node that the PLR is trying to avoid.  Any local
         address on the downstream node can be used.  This field is





<span class="grey">Pan, et al.                 Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


         mandatory and is used by the MP for the merging rules discussed
         below.

   There can be more than one pair of (PLR_ID, Avoid_Node_ID) entries in
   a DETOUR object.  If detour merging is desired, after each merging
   operation, the Detour Merge Point should combine all the merged
   detours in subsequent Path messages.

   The high-order bit of the Class-Num is zero; LSRs that do not support
   the DETOUR objects MUST reject any Path message containing a DETOUR
   object and send a PathErr to notify the PLR.  This PathErr SHOULD be
   generated as specified in [<a href="#ref-RSVP" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RSVP</a>] for unknown objects with a Class-Num
   of the form "0bbbbbbb".

   Unknown C-Types should be treated as specified in [<a href="#ref-RSVP" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RSVP</a>] <a href="#section-3.10">Section</a>
   <a href="#section-3.10">3.10</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20SESSION_ATTRIBUTE%20Flags"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  SESSION_ATTRIBUTE Flags</span>

   To request bandwidth and node protection explicitly, two new flags
   are defined in the SESSION_ATTRIBUTE object.

   For both C-Type 1 and 7, the SESSION_ATTRIBUTE object currently has
   the following flags defined [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>]:

      Local protection desired:   0x01

         This flag permits transit routers to use a local repair
         mechanism that may result in violation of the explicit route
         object.  When a fault is detected on an adjacent downstream
         link or node, a transit node may reroute traffic for fast
         service restoration.

      Label recording desired:   0x02

         This flag indicates that label information should be included
         when doing a route record.

      SE Style desired:   0x04

         This flag indicates that the tunnel ingress node may choose to
         reroute this tunnel without tearing it down.  A tunnel egress
         node SHOULD use the SE Style when responding with a Resv
         message.  When requesting fast reroute, the head-end LSR SHOULD
         set this flag; this is not necessary for the path-specific
         method of the one-to-one backup method.





<span class="grey">Pan, et al.                 Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   The following new flags are defined:

      Bandwidth protection desired:  0x08

         This flag indicates to the PLRs along the protected LSP path
         that a backup path with a bandwidth guarantee is desired.  The
         bandwidth to be guaranteed is that of the protected LSP, if no
         FAST_REROUTE object is included in the PATH message; if a
         FAST_REROUTE object is in the PATH message, then the bandwidth
         specified therein is to be guaranteed.

      Node protection desired: 0x10

         This flag indicates to the PLRs along a protected LSP path that
         a backup path that bypasses at least the next node of the
         protected LSP is desired.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20RRO%20IPv4%2FIPv6%20Sub-object%20Flags"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  RRO IPv4/IPv6 Sub-object Flags</span>

   To report whether bandwidth and/or node protection are provided as
   requested, we define two new flags in the RRO IPv4 sub-object.

   The RRO IPv4 and IPv6 address sub-objects currently have the
   following flags defined [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>]:

      Local protection available:  0x01

         Indicates that the link downstream of this node is protected
         via a local repair mechanism, which can be either one-to-one or
         facility backup.

      Local protection in use:  0x02

         Indicates that a local repair mechanism is in use to maintain
         this tunnel (usually in the face of an outage of the link it
         was previously routed over, or an outage of the neighboring
         node).

   Two new flags are defined:

      Bandwidth protection:  0x04

         The PLR will set this bit when the protected LSP has a backup
         path that is guaranteed to provide the desired bandwidth that
         is specified in the FAST_REROUTE object or the bandwidth of the
         protected LSP, if no FAST_REROUTE object was included.  The PLR
         may set this whenever the desired bandwidth is guaranteed; the
         PLR MUST set this flag when the desired bandwidth is guaranteed



<span class="grey">Pan, et al.                 Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


         and the "bandwidth protection desired" flag was set in the
         SESSION_ATTRIBUTE object.  If the requested bandwidth is not
         guaranteed, the PLR MUST NOT set this flag.

      Node protection:  0x08

         The PLR will set this bit when the protected LSP has a backup
         path that provides protection against a failure of the next LSR
         along the protected LSP.  The PLR may set this whenever node
         protection is provided by the protected LSP's backup path; the
         PLR MUST set this flag when the node protection is provided and
         the "node protection desired" flag was set in the
         SESSION_ATTRIBUTE object.  If node protection is not provided,
         the PLR MUST NOT set this flag.  Thus, if a PLR could only set
         up a link-protection backup path, the "Local protection
         available" bit will be set, but the "Node protection" bit will
         be cleared.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Head-End%20Behavior"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Head-End Behavior</span>

   The head-end of an LSP determines whether local protection should be
   requested for that LSP and which local protection method is desired
   for the protected LSP.  The head-end also determines what constraints
   should be requested for the backup paths of a protected LSP.

   To indicate that an LSP should be locally protected, the head-end LSR
   MUST either set the "local protection desired" flag in the
   SESSION_ATTRIBUTE object or include a FAST_REROUTE object in the PATH
   message, or both.  The "local protection desired" flag in the
   SESSION_ATTRIBUTE object SHOULD always be set.  If a head-end LSR
   signals a FAST_REROUTE object, it MUST be stored for Path refreshes.

   The head-end LSR of a protected LSP MUST set the "label recording
   desired" flag in the SESSION_ATTRIBUTE object.  This facilitates the
   use of the facility backup method.  If node protection is desired,
   the head-end LSR should set the "node protection desired" flag in the
   SESSION_ATTRIBUTE object; otherwise, this flag should be cleared.
   Similarly, if a guarantee of bandwidth protection is desired, then
   the "bandwidth protection desired" flag in the SESSION_ATTRIBUTE
   object should be set; otherwise, this flag should be cleared.  If the
   head-end LSR determines that control of the backup paths for the
   protected LSP is desired, then the LSR should include the
   FAST_REROUTE object.  The PLRs will use the attribute filters,
   bandwidth, hop-limit, and priorities to determine the backup paths.

   If the head-end LSR desires that the one-to-one backup method be used
   for the protected LSP, then the head-end LSR should include a
   FAST_REROUTE object and set the "one-to-one backup desired" flag.  If



<span class="grey">Pan, et al.                 Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   the head-end LSR desires that the protected LSP be protected via the
   facility backup method, then the head-end LSR should include a
   FAST_REROUTE object and set the "facility backup desired" flag.  The
   lack of a FAST_REROUTE object, or having both these flags clear,
   should be treated by PLRs as a lack of preference.  If both flags are
   set, a PLR may use either method or both.

   The head-end LSR of a protected LSP MUST support the additional flags
   defined in <a href="#section-4.4">Section 4.4</a> being set or clear in the RRO IPv4 and IPv6
   sub-objects.  The head-end LSR of a protected LSP MUST support the
   RRO Label sub-object.

   If the head-end LSR of an LSP determines that local protection is
   newly desired, this SHOULD be signaled via make-before-break.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Point%20of%20Local%20Repair%20%28PLR%29%20Behavior"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Point of Local Repair (PLR) Behavior</span>

   Every LSR along a protected LSP (except the egress) MUST follow the
   PLR behavior described in this document.

   A PLR SHOULD support the FAST_REROUTE object, the "local protection
   desired", "label recording desired", "node protection desired", and
   "bandwidth protection desired" flags in the SESSION_ATTRIBUTE object,
   and the "local protection available", "local protection in use",
   "bandwidth protection", and "node protection" flags in the RRO IPv4
   and IPv6 sub-objects.  A PLR MAY support the DETOUR object.

   A PLR MUST consider an LSP to have asked for local protection if the
   "local protection desired" flag is set in the SESSION_ATTRIBUTE
   object and/or the FAST_REROUTE object is included.  If the
   FAST_REROUTE object is included, a PLR SHOULD consider providing
   one-to-one protection if the "one-to-one desired" is set, and it
   SHOULD consider providing facility backup if the "facility backup
   desired" flag is set.  If the "node protection desired" flag is set,
   the PLR SHOULD try to provide node protection; if this is not
   feasible, the PLR SHOULD then try to provide link protection.  If the
   "bandwidth protection guaranteed" flag is set, the PLR SHOULD try to
   provide a bandwidth guarantee; if this is not feasible, the PLR
   SHOULD then try to provide a backup without a guarantee of the full
   bandwidth.











<span class="grey">Pan, et al.                 Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   The following treatment for the RRO IPv4 or IPv6 sub-object's flags
   must be followed if an RRO is included in the protected LSP's RESV
   message.  Based on this additional information, the head-end may take
   appropriate actions.

    - Until a PLR has a backup path available, the PLR MUST clear the
      relevant four flags in the corresponding RRO IPv4 or IPv6 sub-
      object.

    - Whenever the PLR has a backup path available, the PLR MUST set the
      "local protection available" flag.  If no established one-to-one
      backup LSP or bypass tunnel exists, or if the one-to-one LSP and
      the bypass tunnel is in "DOWN" state, the PLR MUST clear the
      "local protection available" flag in its IPv4 (or IPv6) address
      sub-object of the RRO and SHOULD send the updated RESV.

    - The PLR MUST clear the "local protection in use" flag unless it is
      actively redirecting traffic into the backup path instead of along
      the protected LSP.

    - The PLR SHOULD also set the "node protection" flag if the backup
      path protects against the failure of the immediate downstream
      node, and, if the path does not, the PLR SHOULD clear the "node
      protection" flag.  This MUST be done if the "node protection
      desired" flag was set in the SESSION_ATTRIBUTE object.

    - The PLR SHOULD set the "bandwidth protection" flag if the backup
      path offers a bandwidth guarantee, and, if the path does not, the
      PLR SHOULD clear the "bandwidth protection" flag.  This MUST be
      done if the "bandwidth protection desired" flag was set in the
      SESSION_ATTRIBUTE object.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Signaling%20a%20Backup%20Path"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Signaling a Backup Path</span>

   A number of objectives must be met to obtain a satisfactory signaling
   solution.  These are summarized as follows:

      1. Unambiguously and uniquely identifying backup paths.

      2. Unambiguously associating protected LSPs with their backup
         paths.

      3. Working with both global and non-global label spaces.

      4. Allowing merging of backup paths.

      5. Maintaining RSVP state during and after fail-over.




<span class="grey">Pan, et al.                 Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   LSP tunnels are identified by a combination of the SESSION and
   SENDER_TEMPLATE objects [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>].  The relevant fields are as
   follows.

      IPv4 (or IPv6) tunnel end point address

         IPv4 (or IPv6) address of the egress node for the tunnel.

      Tunnel ID

         A 16-bit identifier used in the SESSION that remains constant
         over the life of the tunnel.

      Extended Tunnel ID

         A 32-bit (IPv4) or 128-bit (IPv6) identifier used in the
         SESSION that remains constant over the life of the tunnel.
         Normally it is set to all zero.  Ingress nodes that wish to
         narrow the scope of a SESSION to the ingress-egress pair may
         place their IP address here as a globally unique identifier.

      IPv4 (or IPv6) tunnel sender address

         IPv4 (or IPv6) address for a sender node.

      LSP ID

         A 16-bit identifier used in the SENDER_TEMPLATE and the
         FILTER_SPEC, which can be changed to allow a sender to share
         resources with itself.

   The first three of these are in the SESSION object and are the basic
   identification for the tunnel.  Setting the "Extended Tunnel ID" to
   an IP address of the head-end LSR allows the scope of the SESSION to
   be narrowed to only LSPs sent by that LSR.  A backup LSP is
   considered part of the same session as its protected LSP; therefore
   these three cannot be varied.

   The last two are in the SENDER_TEMPLATE.  Multiple LSPs in the same
   SESSION may be protected and may take different routes; this is
   common when a tunnel is rerouted using make-before-break.  A backup
   path must be clearly identified with its protected LSP to allow
   correct merging and state treatment.  Therefore, a backup path must
   inherit its LSP ID from the associated protected LSP.  Thus, the only
   field in the SESSION and SENDER_TEMPLATE objects that could be varied
   between a backup path and a protected LSP is the "IPv4 (or IPv6)
   tunnel sender address" in the SENDER_TEMPLATE.




<span class="grey">Pan, et al.                 Standards Track                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   There are two different methods to uniquely identify a backup path,
   described below.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.1.%20%20Backup%20Path%20Identification%3A%20Sender%20Template-Specific"></a><a class="selflink" href="#section-6.1.1" name="section-6.1.1">6.1.1</a>.  Backup Path Identification: Sender Template-Specific</span>

   In this approach, the SESSION object and the LSP_ID are copied from
   the protected LSP.  The "IPv4 tunnel sender address" is set to an
   address of the PLR.  If the head-end of a tunnel is also acting as
   the PLR, it MUST choose an IP address different from the one used in
   the SENDER_TEMPLATE of the original LSP tunnel.

   When the sender template-specific approach is used, the protected
   LSPs and the backup paths SHOULD use the Shared Explicit (SE) style.
   This allows bandwidth sharing between multiple backup paths.  The
   backup paths and the protected LSP MAY be merged by the Detour Merge
   Points, when the ERO from the MP to the egress is the same on each
   LSP to be merged, as specified in [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.2.%20%20Backup%20Path%20Identification%3A%20Path-Specific"></a><a class="selflink" href="#section-6.1.2" name="section-6.1.2">6.1.2</a>.  Backup Path Identification: Path-Specific</span>

   In this approach, rather than vary the SESSION or SENDER_TEMPLATE
   objects, an implementation uses a new object, the DETOUR object, to
   distinguish between PATH messages for a backup path and the protected
   LSP.

   Thus, the backup paths use the same SESSION and SENDER_TEMPLATE
   objects as the ones used in the protected LSP.  The presence of a
   DETOUR object in Path messages signifies a backup path; the presence
   of a FAST_REROUTE object and/or the "local protection requested" flag
   in the SESSION_ATTRIBUTE object indicates a protected LSP.

   In the path message-specific approach, an LSR merges Path messages
   that are received with the same SESSION and SENDER_TEMPLATE objects
   and that also have the same next-hop object.  Without this behavior,
   it would be impossible to associate the multiple RESV messages with
   the backup paths.  However, this merging behavior reduces the total
   number of RSVP states inside the network at the expense of merging
   LSPs with different EROs.













<span class="grey">Pan, et al.                 Standards Track                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Procedures%20for%20Backup%20Path%20Computation"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Procedures for Backup Path Computation</span>

   Before a PLR can create a detour or a bypass tunnel, the desired
   explicit route must be determined.  This can be done using a CSPF
   (Constraint-based Shortest Path First) computation.  Before this CSPF
   computation, the following information must be collected at a PLR:

      - The list of downstream nodes that the protected LSP passes
        through.  This information is readily available from the
        RECORD_ROUTE objects during LSP setup.  This information is also
        available from the ERO.  However, if the ERO contains loose
        sub-objects, the ERO may not provide adequate information.

      - The downstream links/nodes that we want to protect against.
        Once again, this information is learned from the RECORD_ROUTE
        objects.  Whether node protection is desired is determined by
        the "node protection" flag in the SESSION_ATTRIBUTE object and
        local policy.

      - The upstream uni-directional links that the protected LSP passes
        through.  This information is learned from the RECORD_ROUTE
        objects; it is only needed for setting up one-to-one protection.
        In the path-specific method, it is necessary to avoid the detour
        and the protected LSP sharing a common next-hop upstream of the
        failure.  In the sender template-specific mode, this same
        restriction is necessary to avoid sharing bandwidth between the
        detour and its protected LSP, where that bandwidth has been
        reserved only once.

      - The link attribute filters to be applied.  These are derived
        from the FAST_REROUTE object, if it is included in the PATH
        message, or from the SESSION_ATTRIBUTE object otherwise.

      - The bandwidth to be used is found in the FAST_REROUTE object, if
        it is included in the PATH message, or in the SESSION_ATTRIBUTE
        object otherwise.  Local policy may modify the bandwidth to be
        reserved.

      - The hop-limit, if a FAST_REROUTE object was included in the PATH
        message.

   When a CSPF algorithm is used to compute the backup route, the
   following constraints must be satisfied:

      - For detour LSPs, the destination MUST be the tail-end of the
        protected LSP.  For bypass tunnels (<a href="#section-7">Section 7</a>), the destination
        MUST be the address of the MP.




<span class="grey">Pan, et al.                 Standards Track                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


      - When one-to-one protection is set up by using the path-specific
        method, a detour MUST not traverse the upstream links of the
        protected LSP in the same direction.  This prevents the
        possibility of early merging of the detour into the protected
        LSP.  When one-to-one protection is set up using the sender-
        template-specific method, a detour should not traverse the
        upstream links of the protected LSP in the same direction.  This
        prevents sharing the bandwidth between a protected LSP and its
        backup upstream of the failure where the bandwidth would be used
        twice in the event of a failure.

      - The backup LSP cannot traverse the downstream node and/or link
        whose failure is being protected against.  Note that if the PLR
        is the penultimate hop, node protection is not possible, and
        only the downstream link can be avoided.  The backup path may be
        computed to be SRLG disjoint from the downstream node and/or
        link being avoided.

      - The backup path must satisfy the resource requirements of the
        protected LSP.  This includes the link attribute filters,
        bandwidth, and hop limits determined from the FAST_REROUTE
        object and the SESSION_ATTRIBUTE object.

   If such computation succeeds, the PLR should attempt to establish a
   backup path.  The PLR may schedule a re-computation at a later time
   to discover better paths that might have emerged.  If for any reason,
   the PLR is unable to bring up a backup path, it must schedule a retry
   at a later time.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Signaling%20Backups%20for%20One-to-One%20Protection"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Signaling Backups for One-to-One Protection</span>

   Once a PLR has decided to protect an LSP locally with one-to-one
   backup and has identified the desired path, it signals for the
   detour.

   The following describes the transformation to be performed upon the
   protected LSP's PATH message to create the detour LSP's PATH message.

      - If the sender template-specific method is to be used, then the
        PLR MUST change the "IPv4 (or IPv6) tunnel sender address" of
        the SENDER_TEMPLATE to an address belonging to the PLR that is
        not the same as that used for the protected LSP.  Additionally,
        the DETOUR object MAY be added to the PATH message.

      - If the path-specific method is to be used, then the PLR MUST add
        a DETOUR object to the PATH message.





<span class="grey">Pan, et al.                 Standards Track                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


      - The SESSION_ATTRIBUTE flags "Local protection desired",
        "Bandwidth protection desired", and "Node protection desired"
        MUST be cleared.  The "Label recording desired" flag MAY be
        modified.  If the Path Message contained a FAST_REROUTE object
        and the ERO is not completely strict, the Include-any, Exclude-
        any, and Include-all fields of the FAST_REROUTE object SHOULD be
        copied to the corresponding fields of the SESSION_ATTRIBUTE
        object.

      - If the protected LSP's Path message contained a FAST_REROUTE
        object, this object MUST be removed from the detour LSP's PATH
        message.

      - The PLR MUST generate an EXPLICIT_ROUTE object toward the
        egress.  First, the PLR must remove all sub-objects preceding
        the first address belonging to the Merge Point.  Then the PLR
        SHOULD add sub-objects corresponding to the desired backup path
        between the PLR and the MP.

      - The SENDER_TSPEC object SHOULD contain the bandwidth information
        from the received FAST_REROUTE object, if included in the
        protected LSP's PATH message.

      - The RSVP_HOP object containing one of the PLR's IP address.

      - The detour LSPs MUST use the same reservation style as the
        protected LSP.  This must be correctly reflected in the
        SESSION_ATTRIBUTE object.

     Detour LSPs operate like regular LSPs.  Once a detour path is
     successfully computed and the detour LSP is established, the PLR
     need not compute detour routes again, unless (1) the contents of
     FAST_REROUTE have changed or (2) the downstream interface and/or
     the nexthop router for a protected LSP has changed.  The PLR may
     recompute detour routes at any time.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.3.1.%20%20Make-before-Break%20with%20Detour%20LSPs"></a><a class="selflink" href="#section-6.3.1" name="section-6.3.1">6.3.1</a>.  Make-before-Break with Detour LSPs</span>

   If the sender template-specific method is used, it is possible to do
   make-before-break with detour LSPs.  This is done using two different
   IP addresses belonging to the PLR (which were not used in the
   SENDER_TEMPLATE of the protected LSP).  If the current detour LSP
   uses the first IP address in its SENDER_TEMPLATE, then the new detour
   LSP should be signaled by using the second IP address in its
   SENDER_TEMPLATE.  Once the new detour LSP has been created, the
   current detour LSP can be torn down.  By alternating the use of these
   IP addresses, the current and new detour LSPs will have different
   SENDER_TEMPLATES and, thus, different state in the downstream LSRs.



<span class="grey">Pan, et al.                 Standards Track                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   This make-before-break mechanism, which changes the PLR IP address in
   the DETOUR object instead, is not feasible with the path-specific
   method, as the PATH messages for new and current detour LSPs may be
   merged if they share a common next-hop.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.3.2.%20%20Message%20Handling"></a><a class="selflink" href="#section-6.3.2" name="section-6.3.2">6.3.2</a>.  Message Handling</span>

   LSRs must process the detour LSPs independently of the protected LSPs
   to avoid triggering the LSP loop detection procedure described in
   [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>].

   The PLR MUST not mix the messages for the protected and the detour
   LSPs.  When a PLR receives Resv, ResvTear, and PathErr messages from
   the downstream detour destination, the messages MUST not be forwarded
   upstream.  Similarly, when a PLR receives ResvErr and ResvConf
   messages from a protected LSP, it MUST not propagate them onto the
   associated detour LSP.

   A session tear-down request is normally originated by the sender via
   PathTear messages.  When a PLR node receives a PathTear message from
   upstream, it MUST delete both the protected and the detour LSPs.  The
   PathTear messages MUST propagate to both protected and detour LSPs.
   During error conditions, the LSRs may send ResvTear messages to fix
   problems on the failing path.  When a PLR node receives the ResvTear
   messages from downstream for a protected LSP, as long as a detour is
   up, the ResvTear messages MUST not be sent further upstream.
   PathErrs should be treated similarly.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.3.3.%20%20Local%20Reroute%20of%20Traffic%20onto%20Detour%20LSP"></a><a class="selflink" href="#section-6.3.3" name="section-6.3.3">6.3.3</a>.  Local Reroute of Traffic onto Detour LSP</span>

   When the PLR detects a failure on the protected LSP, the PLR MUST
   rapidly switch packets to the protected LSP's backup LSP instead of
   to the protected LSP's normal out-segment.  The goal of this method
   is to effect the redirection within 10s of milliseconds.

               L32      L33      L34      L35
           R1-------R2-------R3-------R4-------R5
                    |                 |
               L46  |                 | L44
                    |       L47       |
                    R6----------------R7

            Protected LSP: [R1-&gt;R2-&gt;R3-&gt;R4-&gt;R5]
            Detour LSP:    [R2-&gt;R6-&gt;R7-&gt;R4]

                 Example 3.  Redirect to Detour





<span class="grey">Pan, et al.                 Standards Track                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   In Example 3, if the link [R2-&gt;R3] fails, R2 would do the following.
   Any traffic received on link [R1-&gt;R2] with label L32 would be sent on
   link [R2-&gt;R6] with label L46 (along the detour LSP) instead of on
   link [R3-&gt;R4] with label L34 (along the protected LSP).  The merge
   point R4 would recognize that packets received on link [R7-&gt;R4] with
   label L44 should be sent on link [R4-&gt;R5] with label L35 and that
   they should be merged with the protected LSP.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4.%20%20Signaling%20for%20Facility%20Protection"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a>.  Signaling for Facility Protection</span>

   A PLR may use one or more bypass tunnels to protect against the
   failure of a link and/or a node.  These bypass tunnels may be set up
   in advance or may be dynamically created as new protected LSPs are
   signaled.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.1.%20%20Discovering%20Downstream%20Labels"></a><a class="selflink" href="#section-6.4.1" name="section-6.4.1">6.4.1</a>.  Discovering Downstream Labels</span>

   To support facility backup, the PLR must determine a label that will
   indicate to the MP that packets received with that label should be
   switched along the protected LSP.  This can be done without
   explicitly signaling the backup path if the MP uses a label space
   global to that LSR.

   As described in <a href="#section-6">Section 6</a>, the head-end LSR MUST set the "label
   recording requested" flag in the SESSION_ATTRIBUTE object for LSPs
   requesting local protection.  This will cause (as specified in
   [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>]) all LSRs to record their INBOUND labels and to note via a
   flag whether the label is global to the LSR.  Thus, when a protected
   LSP is first signaled through a PLR, the PLR can examine the RRO in
   the Resv message and learn about the incoming labels that are used by
   all downstream nodes for this LSP

   When MPs use per-interface label spaces, the PLR must send Path
   messages (for each protected LSP using a bypass tunnel) via that
   bypass tunnel prior to the failure in order to discover the
   appropriate MP label.  The signaling procedures for this are in
   <a href="#section-6.4.3">Section 6.4.3</a> below.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.2.%20%20Procedures%20for%20the%20PLR%20before%20Local%20Repair"></a><a class="selflink" href="#section-6.4.2" name="section-6.4.2">6.4.2</a>.  Procedures for the PLR before Local Repair</span>

   A PLR that determines to use facility-backup to protect a given LSP
   should select a bypass tunnel to use, taking into account whether
   node protection is to be provided, what bandwidth was requested,
   whether a bandwidth guarantee is desired, and what link attribute
   filters were specified in the FAST_REROUTE object.  The selection of
   a bypass tunnel for a protected LSP is performed by the PLR when the
   LSP is first set up.




<span class="grey">Pan, et al.                 Standards Track                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.3.%20%20Procedures%20for%20the%20PLR%20during%20Local%20Repair"></a><a class="selflink" href="#section-6.4.3" name="section-6.4.3">6.4.3</a>.  Procedures for the PLR during Local Repair</span>

   When the PLR detects a link or/and node failure condition, it has to
   reroute the data traffic onto the bypass tunnel and to start sending
   the control traffic for the protected LSP onto the bypass tunnel.

   The backup tunnel is identified by using the sender template-specific
   method.  The procedures to follow are similar to those described in
   <a href="#section-6.3">Section 6.3</a>.

      - The SESSION is unchanged.

      - The SESSION_ATTRIBUTE is unchanged except as follows:  The
        "Local protection desired", "Bandwidth protection desired", and
        "Node protection desired" flags SHOULD be cleared.  The "Label
        recording desired" MAY be modified.

      - The IPv4 (or IPv6) tunnel sender address of the SENDER_TEMPLATE
        is set to an address belonging to the PLR.

      - The RSVP_HOP object MUST contain an IP source address belonging
        to the PLR.  Consequently, the MP will send messages back to the
        PLR with that IP address as the destination.

      - The PLR MUST generate an EXPLICIT_ROUTE object toward the
        egress.  Detailed ERO processing is described below.

      - The RRO object may have to be updated as described in <a href="#section-6.5">Section</a>
        <a href="#section-6.5">6.5</a>.

   The PLR sends Path, PathTear, and ResvConf messages via the backup
   tunnel.  The MP sends Resv, ResvTear, and PathErr messages by sending
   them directly to the address in the RSVP_HOP object, as specified in
   [<a href="#ref-RSVP" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RSVP</a>].

   If it is necessary to signal the backup prior to failure to determine
   the MP label to use, then the same Path message is sent.  In this
   case, the PLR SHOULD continue to send Path messages for the protected
   LSP along the normal route.  PathTear messages should be duplicated,
   with one sent along the normal route and one sent through the bypass
   tunnel.  The MP should duplicate the Resv and ResvTear messages and
   send them to both the PLR and the LSR indicated by the protected
   LSP's RSVP_HOP object.








<span class="grey">Pan, et al.                 Standards Track                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.4.%20%20Processing%20Backup%20Tunnel%27s%20ERO"></a><a class="selflink" href="#section-6.4.4" name="section-6.4.4">6.4.4</a>.  Processing Backup Tunnel's ERO</span>

   Procedures for ERO processing are described in [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>].  This
   section describes additional ERO update procedures for Path messages
   that are sent over bypass tunnels.  If normal ERO processing rules
   were followed, the Merge Point would examine the first sub-object and
   likely reject it (Bad initial sub-object).  This is because the
   unmodified ERO might contain the IP address of a bypassed node (in
   the case of a NNHOP Bypass Tunnel) or of an interface that is
   currently down (in the case of a NHOP Backup Tunnel).  For this
   reason, the PLR invokes the following ERO procedures before sending a
   Path message via a bypass tunnel.

      Sub-objects belonging to abstract nodes that precede the Merge
      Point are removed, along with the first sub-object belonging to
      the MP.  A sub-object identifying the Backup Tunnel destination is
      then added.

      More specifically, the PLR MUST:

         - remove all the sub-objects proceeding the first address
           belonging to the MP, and

         - replace this first MP address with an IP address of the MP.
           (Note that this could be same address that was just removed.)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.5.%20%20PLR%20Procedures%20during%20Local%20Repair"></a><a class="selflink" href="#section-6.5" name="section-6.5">6.5</a>.  PLR Procedures during Local Repair</span>

   In addition to the method-specific signaling and packet treatment,
   there is common signaling that should be followed.

   During fast reroute, for each protected LSP containing an RRO object,
   the PLR obtains the RRO from the protected LSP's stored RESV.  The
   PLR MUST update the IPv4 or IPv6 sub-object it inserted into the RRO
   by setting the "Local protection in use" and "Local Protection
   Available" flags.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.5.1.%20%20Notification%20of%20Local%20Repair"></a><a class="selflink" href="#section-6.5.1" name="section-6.5.1">6.5.1</a>.  Notification of Local Repair</span>

   In many situations, the route used during local repair will be less
   than optimal.  The purpose of local repair is to keep high priority
   and loss-sensitive traffic flowing while a more optimal re-routing of
   the tunnel can be effected by the head-end of the tunnel.  Thus, the
   head-end has to know of the failure so that it may re-signal an
   optimal LSP.






<span class="grey">Pan, et al.                 Standards Track                    [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   To provide this notification, the PLR SHOULD send a Path Error
   message with error code of "Notify" (Error code = 25) and an error
   value field of ss00 cccc cccc cccc, where ss=00 and the sub-code = 3
   ("Tunnel locally repaired") (see [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>]).

   Additionally, a head-end may detect that an LSP has to be moved to a
   more optimal path by noticing failures reported via the IGP.  Note
   that in the case of inter-area TE LSP (TE LSP spanning areas), the
   head-end LSR will have to rely exclusively on Path Error messages to
   be informed of failures in another area.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.5.2.%20%20Revertive%20Behavior"></a><a class="selflink" href="#section-6.5.2" name="section-6.5.2">6.5.2</a>.  Revertive Behavior</span>

   Upon a failure event, a protected TE LSP is locally repaired by the
   PLR.  There are two basic strategies for restoring the TE LSP to a
   full working path.

    - Global revertive mode: The head-end LSR of each tunnel is
      responsible for reoptimizing the TE LSPs that used the failed
      resource.  There are several potential reoptimization triggers:
      RSVP error messages, inspection of OSPF LSAs or ISIS LSPs, and
      timers.  Note that this re-optimization process may proceed as
      soon as the failure is detected.  It is not tied to the
      restoration of the failed resource.

    - Local revertive mode: Upon detecting that the resource is
      restored, the PLR re-signals each of the TE LSPs that used to be
      routed over the restored resource.  Every TE LSP successfully
      re-signaled along the restored resource is switched back.

   There are several circumstances in which a local revertive mode might
   not be desirable.  In the case of resource flapping (not an uncommon
   failure type), this could generate multiple traffic disruptions.
   Therefore, in the local revertive mode, the PLR should implement a
   means to dampen the re-signaling process in order to limit potential
   disruptions due to flapping.

   In the local revertive mode, any TE LSP will be switched back,
   without any distinction, whereas in the global revertive mode, the
   decision to reuse the restored resource is made by the head-end LSR
   based on the TE LSP attributes.  When the head-end learns of the
   failure, it may reoptimize the protected LSP tunnel along a different
   and more optimal path, as it has a more complete view of the
   resources and TE LSP constraints.  This means that the old LSP that
   has been reverted to may no longer be optimal.  Note that in the case
   of inter-area LSP, where the TE LSP path computation might be done on
   some Path Computation Element, the reoptimization process can




<span class="grey">Pan, et al.                 Standards Track                    [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   still be triggered on the Head-End LSP.  The local revertive mode
   is optional.

   However, there are circumstances in which the head-end does not have
   the ability to reroute the TE LSP (e.g., if the protected LSP is
   pinned down, as may be desirable if the paths are determined by using
   an off-line optimization tool), or if the head-end does not have the
   complete TE topology information (depending on the path computation
   scenario).  In those cases, the local revertive mode might be an
   interesting option.

   The globally revertive mode SHOULD always be used.  Note that a link
   or node "failure" may be due to the facility being permanently taken
   out of service.  Local revertive mode is optional.  When used in
   combination, the global mode may rely solely on timers to do the
   reoptimization.  When local revertive mode is not used, head-end LSRs
   SHOULD react to RSVP error messages and/or IGP indications in order
   to make a timely response.

   Interoperability: If a PLR is configured with the local revertive
   mode but the MP is not, any attempt from the PLR to resignal the TE
   LSP over the restored resource will fail, as the MP will not send any
   Resv message.  The PLR will still refresh the TE LSP over the backup
   tunnel.  The TE LSP will not revert to the restored resource;
   instead, it will continue to use the backup until it is re-optimized.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Merge%20Node%20Behavior"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Merge Node Behavior</span>

   An LSR is a Merge Point if it receives the Path message for a
   protected LSP and one or more messages for a backup LSP that is
   merged into that protected LSP.  In the one-to-one backup method, the
   LSR is aware that it is a merge node prior to failure.  In the
   facility backup method, the LSR may not know that it is a Merge Point
   until a failure occurs and it receives a backup LSP's Path message.
   Therefore, an LSR that is on the path of a protected LSP SHOULD
   always assume that it is a merge point.

   When a MP receives a backup LSP's Path message through a bypass
   tunnel, the Send_TTL in the Common Header may not match the TTL of
   the IP packet within which the Path message was transported.  This is
   expected behavior.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Handling%20Backup%20Path%20Messages%20before%20Failure"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Handling Backup Path Messages before Failure</span>

   There are two circumstances in which a Merge Point will receive Path
   messages for a backup path prior to failure.  In the first case, if a
   PLR is providing local protection via the one-to-one backup method,
   the detour will be signaled and must be properly handled by the MP.



<span class="grey">Pan, et al.                 Standards Track                    [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   In this case, the backup LSP may be signaled via the sender
   template-specific method or via the path-specific method.

   In the second case, if the Merge Point does not provide labels global
   to the MP and record them in a Label sub-object of the RRO, or if the
   PLR does not use such recorded information, the PLR may signal the
   backup path as described in <a href="#section-6.4.1">Section 6.4.1</a>.  This will determine the
   label to use if the PLR is providing protection according to the
   facility backup method.  In this case, the backup LSP is signaled via
   the sender template-specific method.

   The reception of a backup LSP's path message does not indicate that a
   failure has occurred or that the incoming protected LSP will no
   longer be used.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.1.%20%20Merging%20Backup%20Paths%20using%20the%20Sender%20Template-Specific%20Method"></a><a class="selflink" href="#section-7.1.1" name="section-7.1.1">7.1.1</a>.  Merging Backup Paths using the Sender Template-Specific Method</span>

   An LSR may receive multiple Path messages for one or more backup LSPs
   and, possibly, for the protected LSP.  Each of these Path messages
   will have a different SENDER_TEMPLATE.  The protected LSP can be
   recognized because it will include the FAST_REROUTE object or have
   the "local protection desired" flag set in the SESSION_ATTRIBUTE
   object, or both.

   If the outgoing interface and next-hop LSR are the same, then the
   Path messages are eligible for merging.  Similarly to the
   specification in [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>] for merging of RESV messages, only Path
   messages whose ERO from that LSR to the egress is the same can be
   merged.  If merging occurs and one of the Path messages merged was
   for the protected LSP, then the final Path message to be sent MUST be
   that of the protected LSP.  This merges the backup LSPs into the
   protected LSP at that LSR.  Once the final Path message has been
   identified, the MP MUST start to refresh it downstream periodically.

   If merging occurs and all the Path messages were for backup LSPs,
   then the DETOUR object, if any, should be altered as specified in
   <a href="#section-8.1">Section 8.1</a>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.2.%20%20Merging%20Detours%20using%20the%20Path-Specific%20Method"></a><a class="selflink" href="#section-7.1.2" name="section-7.1.2">7.1.2</a>.  Merging Detours using the Path-Specific Method</span>

   An LSR (that is, an MP) may receive multiple Path messages from
   different interfaces with identical SESSION and SENDER_TEMPLATE
   objects.  In this case, Path state merging is REQUIRED.  The merging
   rule is as follows:

   If all Path messages have neither a FAST_REROUTE nor a DETOUR object,
   or if the MP is the egress of the LSP, no merging is required.  The
   messages are processed according to [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>].



<span class="grey">Pan, et al.                 Standards Track                    [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   Otherwise, the MP MUST record the Path state and the incoming
   interface.  If the Path messages do not share an outgoing interface
   and a next-hop LSR, the MP MUST consider them to be independent LSPs
   and MUST NOT merge them.

   For all the Path messages that share the same outgoing interface and
   next-hop LSR, the MP runs the following procedure to create a Path
   message to forward downstream.

     1. If one or more of the Path messages is for the protected LSP (a
        protected LSP is one originated from this node, or with the
        FAST_REROUTE object, or without the DETOUR object), one of these
        must become the chosen Path message.  There could be more than
        one; in that case, which one to forward is a local decision.
        Quit.

     2. From the remaining set of Detour Path messages, eliminate from
        consideration those that traverse nodes that others want to
        avoid.

     3. If several still remain, which one to forward is a local
        decision.  If none remain, then the MP MAY try to find a new
        route that avoids all nodes that merging Detour Paths want to
        avoid; it will forward a Path message with that ERO.

   Once the final Path message has been identified, the MP MUST start to
   refresh it downstream periodically.  Other LSPs are considered merged
   at this node.  For bandwidth reservations on the outgoing link, any
   merging should be considered to have occurred before bandwidth is
   reserved.  Thus, even though Fixed Filter style is specified,
   multiple detours and/or their protected LSP (which are to be merged
   due to sharing an outgoing interface and next-hop LSR) will reserve
   only the bandwidth of the final Path message on that outgoing
   interface.

   If no merged Path message can be constructed, the MP SHOULD send a
   PathErr in response to the most recently received detour Path
   message.  If a protected Path is chosen to be forwarded but it
   traverses nodes that some detours want to avoid, PathErrs SHOULD be
   sent in response to those detour Paths which cannot merge.











<span class="grey">Pan, et al.                 Standards Track                    [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/7.1.2.1.%20%20An%20Example%20of%20Path%20Message%20Merging"></a><a class="selflink" href="#section-7.1.2.1" name="section-7.1.2.1">7.1.2.1</a>.  An Example of Path Message Merging</span>

                R7---R8---R9-\
                |    |    |   \
           R1---R2---R3---R4---R5---R6

           Protected LSP:  [R1-&gt;R2-&gt;R3-&gt;R4-&gt;R5-&gt;R6]
           R2's Detour:    [R2-&gt;R7-&gt;R8-&gt;R9-&gt;R4-&gt;R5-&gt;R6]
           R3's Detour:    [R3-&gt;R8-&gt;R9-&gt;R5-&gt;R6]

           Example 4.  Path Message Merging

   In Example 4, R8 will receive Path messages that have the same
   SESSION and SENDER_TEMPLATE from detours for R2 and R3.  During
   merging at R8, because detour R3 has a shorter ERO path length (that
   is, ERO is [R9-&gt;R5-&gt;R6], and path length is 3), R8 will select it as
   the final LSP and will only propagate its Path messages downstream.
   Upon receiving a Resv (or a ResvTear) message, R8 must relay the
   messages toward both R2 and R3.

   R5 has to merge as well, and it will select the main LSP, since it
   has the FAST_REROUTE object.  Thus, the detour LSP terminates at R5.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.3.%20%20Message%20Handling%20for%20Merged%20Detours"></a><a class="selflink" href="#section-7.1.3" name="section-7.1.3">7.1.3</a>.  Message Handling for Merged Detours</span>

   When an LSR receives a ResvTear for an LSP, the LSR must determine
   whether it has an alternate associated LSP.  For instance, if the
   ResvTear was received for a protected LSP but an associated backup
   LSP has not received a ResvTear, then the LSR has an alternate
   associated LSP.  If the LSR does not have an alternate associated
   LSP, then the MP MUST propagate the ResvTear toward the LSP's
   ingress, and, for each backup LSP merged into that LSP at this LSR,
   the ResvTear SHOULD also be propagated along the backup LSP.

   The MP may receive PathTear messages for some of the merging LSPs.
   PathTear messages SHOULD NOT be propagated downstream until the MP
   has received PathTear messages for each of the merged LSPs.  However,
   the fact that one or more of the merged LSPs has been torn down
   should be reflected in the downstream message, such as by changing
   the DETOUR object, if there is one.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Handling%20Failures"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Handling Failures</span>

   When a downstream LSR detects a local link failure, for any protected
   LSPs routed over the failed link, Path and Resv state MUST NOT be
   cleared, and PathTear and ResvErr messages MUST NOT be sent
   immediately.  If this is not the case, then the facility backup
   method will not work.  Furthermore, a downstream LSR SHOULD reset the



<span class="grey">Pan, et al.                 Standards Track                    [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


   refresh timers for these LSPs as if they had just been refreshed.
   This is to allow time for the PLR to begin refreshing state via the
   bypass tunnel.  State MUST be removed if it has not been refreshed
   before the refresh timer expires.  This allows the facility backup
   method to work without requiring that it signal backup paths through
   the bypass tunnel before failure.

   After a failure has occurred, the MP must still send Resv messages
   for the backup LSPs associated with the protected LSPs that have
   failed.  If the backup LSP was sent through a bypass tunnel, then the
   PHOP object in its Path message will have the IP address of the
   associated PLR.  This will ensure that Resv state is refreshed.

   Once the local link has recovered, the MP may or may not accept Path
   messages for existing protected LSPs that had failed over to their
   backup.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Behavior%20of%20All%20LSRs"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Behavior of All LSRs</span>

   The objects and methods defined in this document require behavior
   from all LSRs in the traffic-engineered network, even if an LSR is
   not along the path of a protected LSP.

   First, if a DETOUR object is included in the backup LSP's path
   message for the sender template-specific method, the LSRs in the
   traffic-engineered network should support the DETOUR object.

   Second, if the path-specific method is to be supported for the one-
   to-one backup method, it is necessary that the LSRs in the traffic-
   engineered network be capable of merging detours as specified in
   <a href="#section-8.1">Section 8.1</a>.

   It is possible to avoid specific LSRs that do not support this
   behavior by assigning a link attribute to all the links of those LSPs
   and then requesting that backup paths exclude this link attribute.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Merging%20Detours%20in%20the%20Path-Specific%20Method"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Merging Detours in the Path-Specific Method</span>

   If multiple Path Messages for different detours are received with the
   same SESSION, SENDER_TEMPLATE, outgoing interface, and next-hop LSR,
   then the LSR must function as a Detour Merge Point and merge the
   detour Path Messages.  This merging should occur as specified in
   <a href="#section-7.1.2">Section 7.1.2</a> and shown in Example 4.

   In addition, it is necessary to update the DETOUR object to reflect
   the merging that has taken place.  This is done using the following
   algorithm to format the outgoing DETOUR object for the final LSP:




<span class="grey">Pan, et al.                 Standards Track                    [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


     - Combine all the (PLR_ID, Avoid_Node_ID) pairs from all the DETOUR
       objects of all merged LSPs into a new object.  Ordering is
       insignificant.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   This document does not introduce new security issues.  The security
   considerations pertaining to the original RSVP protocol [<a href="#ref-RSVP" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RSVP</a>] remain
   relevant.

   Note that the facility backup method requires that a PLR and its
   selected merge point trust RSVP messages received from each other.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  IANA Considerations</span>

   IANA [<a href="#ref-RFC-IANA" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC-IANA</a>] has assigned the following RSVP Class Numbers for
   objects defined in this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20DETOUR%20Object"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  DETOUR Object</span>

   IANA has assigned:

      63  DETOUR

          Class Types or C-Types:

             7  IPv4
             8  IPv6

   Future C-Types will be assigned using the following guidelines:

       C-Types 0 through 127 are assigned by Standards Action.

       C-Types 128 through 191 are assigned by Expert Review.

       C-Types 192 through 255 are reserved for Vendor Private Use.

   For C-Types in the range 192 through 255, the first four octets of
   the DETOUR object after the C-Type must be the Vendor's SMI Network
   Management Private Enterprise Code (see [<a href="#ref-ENT">ENT</a>]) in network byte order.











<span class="grey">Pan, et al.                 Standards Track                    [Page 33]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-34" id="page-34" name="page-34"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20FAST_REROUTE%20Object"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  FAST_REROUTE Object</span>

   IANA has assigned:

      205  FAST_REROUTE

           Class Types or C-Types:

             1   FAST_REROUTE Type 1
             7   RESERVED

   In the FAST_REROUTE object, C-Type 7 is reserved as it is still used
   by pre-standard implementations.  Future C-Types will be assigned
   using the following guidelines:

       C-Types 0 through 127 are assigned by Standards Action.

       C-Types 128 through 191 are assigned by Expert Review.

       C-Types 192 through 255 are reserved for Vendor Private Use.

   For C-Types in the range 192 through 255, the first four octets of
   the FAST_REROUTE object after the C-Type must be the Vendor's SMI
   Network Management Private Enterprise Code (see [<a href="#ref-ENT">ENT</a>]) in network
   byte order.


























<span class="grey">Pan, et al.                 Standards Track                    [Page 34]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-35" id="page-35" name="page-35"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Contributors"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Contributors</span>

   This document was written by George Swallow, Ping Pan, Alia Atlas,
   Jean Philippe Vasseur, Markus Jork, Der-Hwa Gan, and Dave Cooper.

   Jean Philippe Vasseur
   Cisco Systems, Inc.
   300 Beaver Brook Road
   Boxborough, MA 01719
   USA

   Phone:  +1 978 497 6238
   EMail: jpv@cisco.com


   Markus Jork
   Quarry Technologies
   8 New England Executive Park
   Burlington, MA 01803
   USA

   Phone: +1 781 359 5071
   EMail: mjork@quarrytech.com


   Der-Hwa Gan
   Juniper Networks
   1194 N.Mathilda Ave
   Sunnyvale, CA 94089
   USA

   Phone: +1 408 745 2074
   EMail: dhg@juniper.net


   Dave Cooper
   Global Crossing
   960 Hamlin Court
   Sunnyvale, CA 94089
   USA

   Phone: +1 916 415 0437
   EMail: dcooper@gblx.net








<span class="grey">Pan, et al.                 Standards Track                    [Page 35]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-36" id="page-36" name="page-36"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Acknowledgments"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Acknowledgments</span>

   We would like to acknowledge input and helpful comments from Rob
   Goguen, Tony Li, Yakov Rekhter and Curtis Villamizar.  Especially, we
   thank those, who have been involved in interoperability testing and
   field trails, and provided invaluable ideas and suggestions.  They
   are Rob Goguen, Carol Iturralde, Brook Bailey, Safaa Hasan, Richard
   Southern, and Bijan Jabbari.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Normative%20References"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Normative References</span>

   [<a id="ref-RSVP" name="ref-RSVP">RSVP</a>]       Braden, R., Zhang, L., Berson, S., Herzog, S., and S.
                Jamin, "Resource ReSerVation Protocol (RSVP) -- Version
                1 Functional Specification", <a href="rfc2205.html">RFC 2205</a>, September 1997.

   [<a id="ref-RSVP-TE" name="ref-RSVP-TE">RSVP-TE</a>]    Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan,
                V., and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
                Tunnels", <a href="rfc3209.html">RFC 3209</a>, December 2001.

   [<a id="ref-RFC-WORDS" name="ref-RFC-WORDS">RFC-WORDS</a>]  Bradner, S., "Key words for use in RFCs to Indicate
                Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC-IANA" name="ref-RFC-IANA">RFC-IANA</a>]   Narten, T. and H. Alvestrand, "Guidelines for Writing an
                IANA Considerations Section in RFCs", <a href="https://tools.ietf.org/html/bcp26">BCP 26</a>, <a href="rfc2434.html">RFC 2434</a>,
                October 1998.

   [<a id="ref-ENT" name="ref-ENT">ENT</a>]        IANA PRIVATE ENTERPRISE NUMBERS,
                <a href="http://www.iana.org/assignments/enterprise-numbers">http://www.iana.org/assignments/enterprise-numbers</a>























<span class="grey">Pan, et al.                 Standards Track                    [Page 36]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-37" id="page-37" name="page-37"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


Authors' Addresses

   George Swallow
   Cisco Systems, Inc.
   300 Beaver Brook Road
   Boxborough, MA 01719
   USA

   Phone:  +1 978 244 8143
   EMail:  swallow@cisco.com


   Ping Pan
   Hammerhead Systems
   640 Clyde Court
   Mountain View, CA 94043
   USA

   EMail: ppan@hammerheadsystems.com


   Alia Atlas
   Avici Systems
   101 Billerica Avenue
   N. Billerica, MA 01862
   USA

   Phone: +1 978 964 2070
   EMail: aatlas@avici.com






















<span class="grey">Pan, et al.                 Standards Track                    [Page 37]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-38" id="page-38" name="page-38"> </a>
<span class="grey"><a href="rfc4090.html">RFC 4090</a>                  RSVP-TE Fast Reroute                  May 2005</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2005).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Pan, et al.                 Standards Track                    [Page 38]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4090 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:43 GMT --></html>