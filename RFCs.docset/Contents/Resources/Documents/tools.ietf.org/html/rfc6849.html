<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6849 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:26 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6849" name="DC.Identifier"/>
<meta content="The wide deployment of Voice over IP (VoIP), real-time text, and Video
over IP services has introduced new challenges in managing and
maintaining real-time voice/text/video quality, reliability, and
overall performance. In particular, media delivery is an area that
needs attention. One method of meeting these challenges is monitoring
the media delivery performance by looping media back to the
transmitter. This is typically referred to as &quot;active monitoring&quot; of
services. Media loopback is especially popular in ensuring the quality
of transport to the edge of a given VoIP, real-time text, or Video
over IP service. Today, in networks that deliver real-time media,
short of running 'ping' and 'traceroute' to the edge,
administrators are left without the necessary tools to actively
monitor, manage, and diagnose quality issues with their service. The
extension defined herein adds new Session Description Protocol (SDP)
media types and attributes that enable establishment of media sessions
where the media is looped back to the transmitter. Such media sessions
will serve as monitoring and troubleshooting tools by providing the
means for measurement of more advanced VoIP, real-time text, and Video
over IP performance metrics." name="DC.Description.Abstract"/>
<meta content="Venna, Nagarjuna" name="DC.Creator"/>
<meta content="Jones, Paul" name="DC.Creator"/>
<meta content="Hedayat, Kaynam" name="DC.Creator"/>
<meta content="Stratton, Nathan" name="DC.Creator"/>
<meta content="Kaplan, Hadriel" name="DC.Creator"/>
<meta content="February, 2013" name="DC.Date.Issued"/>
<meta content="An Extension to the Session Description Protocol (SDP) and Real-time Transport Protocol (RTP) for Media Loopback" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6849 - An Extension to the Session Description Protocol (SDP) and Real-time Transport Protocol (RTP) for Media Loopback</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6849.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6849" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-mmusic-media-loopback" title="draft-ietf-mmusic-media-loopback">draft-ietf-mmus...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6849" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6849" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6849" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                    H. Kaplan, Ed.
Request for Comments: 6849                                   Acme Packet
Category: Standards Track                                     K. Hedayat
ISSN: 2070-1721                                                     EXFO
                                                                N. Venna
                                                                 Saperix
                                                                P. Jones
                                                     Cisco Systems, Inc.
                                                             N. Stratton
                                                         BlinkMind, Inc.
                                                           February 2013


         <span class="h1">An Extension to the Session Description Protocol (SDP)</span>
       <span class="h1">and Real-time Transport Protocol (RTP) for Media Loopback</span>

Abstract

   The wide deployment of Voice over IP (VoIP), real-time text, and
   Video over IP services has introduced new challenges in managing and
   maintaining real-time voice/text/video quality, reliability, and
   overall performance.  In particular, media delivery is an area that
   needs attention.  One method of meeting these challenges is
   monitoring the media delivery performance by looping media back to
   the transmitter.  This is typically referred to as "active
   monitoring" of services.  Media loopback is especially popular in
   ensuring the quality of transport to the edge of a given VoIP, real-
   time text, or Video over IP service.  Today, in networks that deliver
   real-time media, short of running 'ping' and 'traceroute' to the
   edge, administrators are left without the necessary tools to actively
   monitor, manage, and diagnose quality issues with their service.  The
   extension defined herein adds new Session Description Protocol (SDP)
   media types and attributes that enable establishment of media
   sessions where the media is looped back to the transmitter.  Such
   media sessions will serve as monitoring and troubleshooting tools by
   providing the means for measurement of more advanced VoIP, real-time
   text, and Video over IP performance metrics.














<span class="grey">Kaplan, et al.               Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6849">http://www.rfc-editor.org/info/rfc6849</a>.

Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.











<span class="grey">Kaplan, et al.               Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
      <a href="#section-1.1">1.1</a>. Use Cases Supported ........................................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-6">6</a>
   <a href="#section-3">3</a>. Overview of Operation ...........................................<a href="#page-6">6</a>
      <a href="#section-3.1">3.1</a>. SDP Offerer Behavior .......................................<a href="#page-6">6</a>
      <a href="#section-3.2">3.2</a>. SDP Answerer Behavior ......................................<a href="#page-7">7</a>
   <a href="#section-4">4</a>. New SDP Attributes ..............................................<a href="#page-7">7</a>
      <a href="#section-4.1">4.1</a>. Loopback-Type Attribute ....................................<a href="#page-7">7</a>
      4.2. Loopback-Role Attributes: loopback-source and
           loopback-mirror ............................................<a href="#page-8">8</a>
   <a href="#section-5">5</a>. Rules for Generating the SDP Offer/Answer .......................<a href="#page-9">9</a>
      <a href="#section-5.1">5.1</a>. Generating the SDP Offer for Loopback Session ..............<a href="#page-9">9</a>
      <a href="#section-5.2">5.2</a>. Generating the SDP Answer for Loopback Session ............<a href="#page-10">10</a>
      <a href="#section-5.3">5.3</a>. Offerer Processing of the SDP Answer ......................<a href="#page-12">12</a>
      <a href="#section-5.4">5.4</a>. Modifying the Session .....................................<a href="#page-12">12</a>
      <a href="#section-5.5">5.5</a>. Establishing Sessions between Entities behind NATs ........<a href="#page-12">12</a>
   <a href="#section-6">6</a>. RTP Requirements ...............................................<a href="#page-13">13</a>
   <a href="#section-7">7</a>. Payload Formats for Packet Loopback ............................<a href="#page-13">13</a>
      <a href="#section-7.1">7.1</a>. Encapsulated Payload Format ...............................<a href="#page-14">14</a>
      <a href="#section-7.2">7.2</a>. Direct Loopback RTP Payload Format ........................<a href="#page-16">16</a>
   <a href="#section-8">8</a>. SRTP Behavior ..................................................<a href="#page-17">17</a>
   <a href="#section-9">9</a>. RTCP Requirements ..............................................<a href="#page-18">18</a>
   <a href="#section-10">10</a>. Congestion Control ............................................<a href="#page-18">18</a>
   <a href="#section-11">11</a>. Examples ......................................................<a href="#page-18">18</a>
      <a href="#section-11.1">11.1</a>. Offer for Specific Media Loopback Type ...................<a href="#page-19">19</a>
      <a href="#section-11.2">11.2</a>. Offer for Choice of Media Loopback Type ..................<a href="#page-19">19</a>
      <a href="#section-11.3">11.3</a>. Answerer Rejecting Loopback Media ........................<a href="#page-20">20</a>
   <a href="#section-12">12</a>. Security Considerations .......................................<a href="#page-21">21</a>
   <a href="#section-13">13</a>. Implementation Considerations .................................<a href="#page-22">22</a>
   <a href="#section-14">14</a>. IANA Considerations ...........................................<a href="#page-22">22</a>
      <a href="#section-14.1">14.1</a>. SDP Attributes ...........................................<a href="#page-22">22</a>
      <a href="#section-14.2">14.2</a>. Media Types ..............................................<a href="#page-23">23</a>
   <a href="#section-15">15</a>. Acknowledgements ..............................................<a href="#page-31">31</a>
   <a href="#section-16">16</a>. References ....................................................<a href="#page-31">31</a>
      <a href="#section-16.1">16.1</a>. Normative References .....................................<a href="#page-31">31</a>
      <a href="#section-16.2">16.2</a>. Informative References ...................................<a href="#page-32">32</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The overall quality, reliability, and performance of VoIP, real-time
   text, and Video over IP services rely on the performance and quality
   of the media path.  In order to assure the quality of the delivered
   media, there is a need to monitor the performance of the media
   transport.  One method of monitoring and managing the overall quality
   of real-time VoIP, real-time text, and Video over IP services is




<span class="grey">Kaplan, et al.               Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   through monitoring the quality of the media in an active session.
   This type of "active monitoring" of services is a method of
   proactively managing the performance and quality of VoIP-based
   services.

   The goal of active monitoring is to measure the media quality of a
   VoIP, real-time text, or Video over IP session.  A way to achieve
   this goal is to request an endpoint to loop media back to the other
   endpoint and to provide media statistics (e.g., RTP Control Protocol
   (RTCP) [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and RTCP Extended Reports (RTCP-XR) [<a href="rfc3611.html" title='"RTP Control Protocol Extended Reports (RTCP XR)"'>RFC3611</a>]
   information).  Another method involves deployment of special
   endpoints that always loop incoming media back for all sessions.
   Although the latter method has been used and is functional, it does
   not scale to support large networks and introduces new network
   management challenges.  Further, it does not offer the granularity of
   testing a specific endpoint that may be exhibiting problems.

   The extension defined in this document introduces new SDP media types
   and attributes that enable establishment of media sessions where the
   media is looped back to the transmitter.  The SDP offer/answer model
   [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>] is used to establish a loopback connection.  Furthermore,
   this extension provides guidelines on handling RTP [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>], as well
   as usage of RTCP [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and RTCP-XR [<a href="rfc3611.html" title='"RTP Control Protocol Extended Reports (RTCP XR)"'>RFC3611</a>] for reporting media-
   related measurements.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Use%20Cases%20Supported"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Use Cases Supported</span>

   As a matter of terminology in this document, packets flow from one
   peer acting as a "loopback source", to the other peer acting as a
   "loopback mirror", which in turn returns packets to the loopback
   source.  In advance of the session, the peers negotiate to determine
   which one acts in which role, using the SDP offer/answer exchange.
   The negotiation also includes details such as the type of loopback to
   be used.

   This specification supports three use cases: "encapsulated packet
   loopback", "direct loopback", and "media loopback".  These are
   distinguished by the treatment of incoming RTP packets at the
   loopback mirror.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/1.1.1.%20%20Encapsulated%20Packet%20Loopback"></a><a class="selflink" href="#section-1.1.1" name="section-1.1.1">1.1.1</a>.  Encapsulated Packet Loopback</span>

   In the encapsulated packet loopback case, the entire incoming RTP
   packet is encapsulated as payload within an outer RTP packet that is
   specific to this use case and specified in <a href="#section-7.1">Section 7.1</a>.  The
   encapsulated packet is returned to the loopback source.  The loopback
   source can generate statistics for one-way path performance up to the
   RTP level for each direction of travel by examining sequence numbers



<span class="grey">Kaplan, et al.               Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   and timestamps in the encapsulating outer RTP header and the
   encapsulated RTP packet payload.  The loopback source can also play
   back the returned media content for evaluation.

   Because the encapsulating RTP packet header extends the packet size,
   it could encounter difficulties in an environment where the original
   RTP packet size is close to the path Maximum Transmission Unit (MTU)
   size.  The encapsulating payload format therefore offers the
   possibility of RTP-level fragmentation of the returned packets.  The
   use of this facility could affect statistics derived for the return
   path.  In addition, the increased bit rate required in the return
   direction may affect these statistics more directly in a restricted-
   bandwidth situation.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/1.1.2.%20%20Direct%20Loopback"></a><a class="selflink" href="#section-1.1.2" name="section-1.1.2">1.1.2</a>.  Direct Loopback</span>

   In the direct loopback case, the loopback mirror copies the payload
   of the incoming RTP packet into a new RTP packet, using a payload
   format specific to this use case and specified in <a href="#section-7.2">Section 7.2</a>.  The
   loopback mirror returns the new packet to the packet source.  There
   is no provision in this case for RTP-level fragmentation.

   This use case has the advantage of keeping the packet size the same
   in both directions.  The packet source can compute only two-way path
   statistics from the direct loopback packet header but can play back
   the returned media content.

   It has been suggested that the loopback source, knowing that the
   incoming packet will never be passed to a decoder, can store a
   timestamp and sequence number inside the payload of the packet it
   sends to the mirror, then extract that information from the returned
   direct loopback packet and compute one-way path statistics as in the
   previous case.  Obviously, playout of returned content is no longer
   possible if this is done.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/1.1.3.%20%20Media%20Loopback"></a><a class="selflink" href="#section-1.1.3" name="section-1.1.3">1.1.3</a>.  Media Loopback</span>

   In the media loopback case, the loopback mirror submits the incoming
   packet to a decoder appropriate to the incoming payload type.  The
   packet is taken as close as possible to the analog level, then
   re-encoded according to an outgoing format determined by SDP
   negotiation.  The re-encoded content is returned to the loopback
   source as an RTP packet with payload type corresponding to the
   re-encoding format.

   This usage allows troubleshooting at the codec level.  The capability
   for path statistics is limited to what is available from RTCP
   reports.



<span class="grey">Kaplan, et al.               Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   SDP: Session Description Protocol, as defined in [<a href="rfc4566.html" title='"SDP: Session Description Protocol"'>RFC4566</a>].  This
        document assumes that the SDP offer/answer model is followed,
        per [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>], but does not assume any specific signaling
        protocol for carrying the SDP.

   The following terms are borrowed from [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>] definitions: offer,
   offerer, answer, answerer, and agent.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Overview%20of%20Operation"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Overview of Operation</span>

   This document defines two loopback 'types', two 'roles', and two
   encoding formats for loopback.  For any given SDP offerer or answerer
   pair, one side is the source of RTP packets, while the other is the
   mirror looping packets/media back.  Those define the two loopback
   roles.  As the mirror, two 'types' of loopback can be performed:
   packet-level or media-level.  When media-level is used, there is no
   further choice of encoding format -- there is only one format:
   whatever is indicated for normal media, since the "looping" is
   performed at the codec level.  When packet-level looping is
   performed, however, the mirror can either send back RTP in an
   encapsulated format or direct loopback format.  The rest of this
   document describes these loopback types, roles, and encoding formats,
   and the SDP offer/answer rules for indicating them.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20SDP%20Offerer%20Behavior"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  SDP Offerer Behavior</span>

   An SDP offerer compliant to this specification and attempting to
   establish a media session with media loopback will include "loopback"
   media attributes for each individual media description in the offer
   message that it wishes to have looped back.  Note that the offerer
   may choose to only request loopback for some media
   descriptions/streams but not others.  For example, it might wish to
   request loopback for a video stream but not audio, or vice versa.

   The offerer will look for the "loopback" media attributes in the
   media description(s) of the response from the SDP answer for
   confirmation that the request is accepted.








<span class="grey">Kaplan, et al.               Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20SDP%20Answerer%20Behavior"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  SDP Answerer Behavior</span>

   In order to accept a loopback offer (that is, an offer containing
   "loopback" in the media description), an SDP answerer includes the
   "loopback" media attribute in each media description for which it
   desires loopback.

   An answerer can reject an offered stream (either with loopback-source
   or loopback-mirror) if the loopback-type is not specified, the
   specified loopback-type is not supported, or the endpoint cannot
   honor the offer for any other reason.  The loopback request is
   rejected by setting the stream's media port number to zero in the
   answer as defined in <a href="rfc3264.html">RFC 3264</a> [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>] or by rejecting the entire
   offer (i.e., by rejecting the session request entirely).

   Note that an answerer that is not compliant to this specification and
   that receives an offer with the "loopback" media attributes would
   ignore the attributes and treat the incoming offer as a normal
   request.  If the offerer does not wish to establish a "normal" RTP
   session, it would need to terminate the session upon receiving such
   an answer.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20New%20SDP%20Attributes"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  New SDP Attributes</span>

   Three new SDP media-level attributes are defined: one indicates the
   type of loopback, and the other two define the role of the agent.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Loopback-Type%20Attribute"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Loopback-Type Attribute</span>

   This specification defines a new "loopback" attribute, which
   indicates that the agent wishes to perform loopback, and the type of
   loopback that the agent is able to do.  The loopback-type is a value
   media attribute [<a href="rfc4566.html" title='"SDP: Session Description Protocol"'>RFC4566</a>] with the following syntax:

      a=loopback:&lt;loopback-type&gt;

   Following is the Augmented BNF [<a href="rfc5234.html" title='"Augmented BNF for Syntax Specifications: ABNF"'>RFC5234</a>] for loopback-type:

   attribute              =/ loopback-attr
   ; attribute defined in <a href="rfc4566.html">RFC 4566</a>

   loopback-attr          = "loopback:" SP loopback-type
   loopback-type          = loopback-choice [1*SP loopback-choice]
   loopback-choice        = loopback-type-pkt / loopback-type-media
   loopback-type-pkt      = "rtp-pkt-loopback"
   loopback-type-media    = "rtp-media-loopback"





<span class="grey">Kaplan, et al.               Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   The loopback-type is used to indicate the type of loopback.  The
   loopback-type values are rtp-pkt-loopback and rtp-media-loopback.

   rtp-pkt-loopback: In this mode, the RTP packets are looped back to
      the sender at a point before the encoder/decoder function in the
      receive direction to a point after the encoder/decoder function in
      the send direction.  This effectively re-encapsulates the RTP
      payload with the RTP/UDP/IP headers appropriate for sending it in
      the reverse direction.  Any type of encoding-related functions,
      such as packet loss concealment, MUST NOT be part of this type of
      loopback path.  In this mode, the RTP packets are looped back with
      a new payload type and format.  <a href="#section-7">Section 7</a> describes the payload
      formats that are to be used for this type of loopback.  This type
      of loopback applies to the encapsulated and direct loopback use
      cases described in <a href="#section-1.1">Section 1.1</a>.

   rtp-media-loopback: This loopback is activated as close as possible
      to the analog interface and after the decoder so that the RTP
      packets are subsequently re-encoded prior to transmission back to
      the sender.  This type of loopback applies to the media loopback
      use case described in <a href="#section-1.1.3">Section 1.1.3</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Loopback-Role%20Attributes%3A%20loopback-source%20and%20loopback-mirror"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Loopback-Role Attributes: loopback-source and loopback-mirror</span>

   The loopback role defines two property media attributes [<a href="rfc4566.html" title='"SDP: Session Description Protocol"'>RFC4566</a>]
   that are used to indicate the role of the agent generating the SDP
   offer or answer.  The syntax of the two loopback-role media
   attributes is as follows:

      a=loopback-source

   and

      a=loopback-mirror

   Following is the Augmented BNF [<a href="rfc5234.html" title='"Augmented BNF for Syntax Specifications: ABNF"'>RFC5234</a>] for loopback-source and
   loopback-mirror:

   attribute             =/ loopback-source / loopback-mirror
   ; attribute defined in <a href="rfc4566.html">RFC 4566</a>
   loopback-source       = "loopback-source"
   loopback-mirror       = "loopback-mirror"

   loopback-source: This attribute specifies that the entity that
      generated the SDP is the media source and expects the receiver of
      the SDP message to act as a loopback mirror.





<span class="grey">Kaplan, et al.               Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   loopback-mirror: This attribute specifies that the entity that
      generated the SDP will mirror (echo) all received media back to
      the sender of the RTP stream.  No media is generated locally by
      the looping-back entity for transmission in the mirrored stream.

   The "m=" line in the SDP includes all the payload types that will be
   used during the loopback session.  The complete payload space for the
   session is specified in the "m=" line, and the rtpmap attribute is
   used to map from the payload type number to an encoding name denoting
   the payload format to be used.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Rules%20for%20Generating%20the%20SDP%20Offer%2FAnswer"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Rules for Generating the SDP Offer/Answer</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Generating%20the%20SDP%20Offer%20for%20Loopback%20Session"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Generating the SDP Offer for Loopback Session</span>

   If an offerer wishes to make a loopback request, it includes both the
   loopback-type and loopback-role attributes in a valid SDP offer:

   Example:   m=audio 41352 RTP/AVP 0 8 100
              a=loopback:rtp-media-loopback
              a=loopback-source
              a=rtpmap:0 pcmu/8000
              a=rtpmap:8 pcma/8000
              a=rtpmap:100 G7221/16000/1

   Since media loopback requires bidirectional RTP, its normal direction
   mode is "sendrecv"; the "sendrecv" direction attribute MAY be encoded
   in SDP or not, as per <a href="rfc3264.html#section-5.1">Section 5.1 of [RFC3264]</a>, since it is implied
   by default.  If either the loopback source or mirror wishes to
   disable loopback use during a session, the direction mode attribute
   "inactive" MUST be used as per [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>].  The direction mode
   attributes "recvonly" and "sendonly" are incompatible with the
   loopback mechanism and MUST NOT be indicated when generating an SDP
   offer or answer.  When receiving an SDP offer or answer, if
   "recvonly" or "sendonly" is indicated for loopback, the SDP-receiving
   agent SHOULD treat it as a protocol failure of the loopback
   negotiation and terminate the session through its normal means (e.g.,
   by sending a SIP BYE if SIP is used) or reject the offending media
   stream.

   The offerer may offer more than one loopback-type in the SDP offer.
   The port number and the address in the offer (m/c= lines) indicate
   where the offerer would like to receive the media stream(s).  The
   payload type numbers indicate the value of the payload the offerer
   expects to receive.  However, the answer might indicate a subset of
   payload type numbers from those given in the offer.  In that case,
   the offerer MUST only send the payload types received in the answer,
   per normal SDP offer/answer rules.



<span class="grey">Kaplan, et al.               Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   If the offer indicates rtp-pkt-loopback support, the offer MUST also
   contain either an encapsulated or direct loopback encoding format
   encoding name, or both, as defined in Sections <a href="#section-7.1">7.1</a> and <a href="#section-7.2">7.2</a> of this
   document.  If the offer only indicates rtp-media-loopback support,
   then neither encapsulated nor direct loopback encoding formats apply
   and they MUST NOT be in the offer.

   If loopback-type is rtp-pkt-loopback, the loopback mirror MUST send,
   and the loopback source MUST receive, the looped-back packets encoded
   in one of the two payload formats (encapsulated RTP or direct
   loopback) as defined in <a href="#section-7">Section 7</a>.

   Example:   m=audio 41352 RTP/AVP 0 8 112
              a=loopback:rtp-pkt-loopback
              a=loopback-source
              a=rtpmap:112 encaprtp/8000

   Example:   m=audio 41352 RTP/AVP 0 8 112
              a=loopback:rtp-pkt-loopback
              a=loopback-source
              a=rtpmap:112 rtploopback/8000

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Generating%20the%20SDP%20Answer%20for%20Loopback%20Session"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Generating the SDP Answer for Loopback Session</span>

   As with the offer, an SDP answer for loopback follows SDP
   offer/answer rules for the direction attribute, but directions of
   "sendonly" or "recvonly" do not apply for loopback operation.

   The port number and the address in the answer (m/c= lines) indicate
   where the answerer would like to receive the media stream.  The
   payload type numbers indicate the value of the payload types the
   answerer expects to send and receive.

   An answerer includes both the loopback-role and loopback-type
   attributes in the answer to indicate that it will accept the loopback
   request.  When a stream is offered with the loopback-source
   attribute, the corresponding stream in the response will be
   loopback-mirror and vice versa, provided the answerer is capable of
   supporting the requested loopback-type.

   For example, if the offer contains the loopback-source attribute:

      m=audio 41352 RTP/AVP 0 8
      a=loopback:rtp-media-loopback
      a=loopback-source






<span class="grey">Kaplan, et al.               Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   The answer that is capable of supporting the offer must contain the
   loopback-mirror attribute:

      m=audio 12345 RTP/AVP 0 8
      a=loopback:rtp-media-loopback
      a=loopback-mirror

   If a stream is offered with multiple loopback-type attributes, the
   answer MUST include only one of the loopback types that are accepted
   by the answerer.  The answerer SHOULD give preference to the first
   loopback-type in the SDP offer.

   For example, if the offer contains:

      m=audio 41352 RTP/AVP 0 8 112
      a=loopback:rtp-media-loopback rtp-pkt-loopback
      a=loopback-source
      a=rtpmap:112 encaprtp/8000

   The answer that is capable of supporting the offer and chooses to
   loopback the media using the rtp-media-loopback type must contain:

      m=audio 12345 RTP/AVP 0 8
      a=loopback:rtp-media-loopback
      a=loopback-mirror

   As specified in <a href="#section-7">Section 7</a>, if the loopback-type is rtp-pkt-loopback,
   either the encapsulated RTP payload format or direct loopback RTP
   payload format MUST be used for looped-back packets.

   For example, if the offer contains:

      m=audio 41352 RTP/AVP 0 8 112 113
      a=loopback:rtp-pkt-loopback
      a=loopback-source
      a=rtpmap:112 encaprtp/8000
      a=rtpmap:113 rtploopback/8000














<span class="grey">Kaplan, et al.               Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   The answer that is capable of supporting the offer must contain one
   of the following:

      m=audio 12345 RTP/AVP 0 8 112
      a=loopback:rtp-pkt-loopback
      a=loopback-mirror
      a=rtpmap:112 encaprtp/8000

      m=audio 12345 RTP/AVP 0 8 113
      a=loopback:rtp-pkt-loopback
      a=loopback-mirror
      a=rtpmap:113 rtploopback/8000

   The previous examples used the 'encaprtp' and 'rtploopback' encoding
   names, which will be defined in Sections <a href="#section-7.1.3">7.1.3</a> and <a href="#section-7.2.3">7.2.3</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Offerer%20Processing%20of%20the%20SDP%20Answer"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Offerer Processing of the SDP Answer</span>

   If the received SDP answer does not contain an a=loopback-mirror or
   a=loopback-source attribute, it is assumed that the loopback
   extensions are not supported by the remote agent.  This is not a
   protocol failure and instead merely completes the SDP offer/answer
   exchange with whatever normal rules apply; the offerer MAY decide to
   end the established RTP session (if any) through normal means of the
   upper-layer signaling protocol (e.g., by sending a SIP BYE).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Modifying%20the%20Session"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Modifying the Session</span>

   At any point during the loopback session, either participant MAY
   issue a new offer to modify the characteristics of the previous
   session, as defined in <a href="rfc3264.html#section-8">Section 8 of RFC 3264</a> [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>].  This also
   includes transitioning from a normal media processing mode to
   loopback mode, and vice versa.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20Establishing%20Sessions%20between%20Entities%20behind%20NATs"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  Establishing Sessions between Entities behind NATs</span>

   Interactive Connectivity Establishment (ICE) [<a href="rfc5245.html" title='"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols"'>RFC5245</a>], Traversal
   Using Relays around NAT (TURN) [<a href="rfc5766.html" title='"Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)"'>RFC5766</a>], and Session Traversal
   Utilities for NAT (STUN) [<a href="rfc5389.html" title='"Session Traversal Utilities for NAT (STUN)"'>RFC5389</a>] provide a general solution to
   establishing media sessions between entities that are behind Network
   Address Translators (NATs).  Loopback sessions that involve one or
   more endpoints behind NATs can also use these general solutions
   wherever possible.

   If ICE is not supported, then in the case of loopback, the mirroring
   entity will not send RTP packets and therefore will not automatically
   create the NAT pinhole in the way that other SIP sessions do.
   Therefore, if the mirroring entity is behind a NAT, it MUST send some



<span class="grey">Kaplan, et al.               Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   packets to the identified address/port(s) of the peer, in order to
   open the NAT pinhole.  Using ICE, this would be accomplished with the
   STUN connectivity check process or through a TURN server connection.
   If ICE is not supported, either [<a href="rfc6263.html" title='"Application Mechanism for Keeping Alive the NAT Mappings Associated with RTP / RTP Control Protocol (RTCP) Flows"'>RFC6263</a>] or <a href="#section-10">Section 10</a> of ICE
   [<a href="rfc5245.html" title='"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols"'>RFC5245</a>] can be followed to open the pinhole and keep the NAT
   binding alive/refreshed.

   Note that for any form of NAT traversal to function, symmetric
   RTP/RTCP [<a href="rfc4961.html" title='"Symmetric RTP / RTP Control Protocol (RTCP)"'>RFC4961</a>] MUST be used, unless the mirror can control the
   NAT(s) in its path to create explicit pinholes.  In other words, both
   agents MUST send packets from the source address and port they
   receive packets on, unless some mechanism is used to avoid that need
   (e.g., by using the Port Control Protocol).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20RTP%20Requirements"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  RTP Requirements</span>

   A loopback source MUST NOT send multiple source streams on the same
   5-tuple, since there is no means for the mirror to indicate which is
   which in its mirrored RTP packets.

   A loopback mirror that is compliant to this specification and accepts
   media with the loopback type rtp-pkt-loopback loops back the incoming
   RTP packets using either the encapsulated RTP payload format or the
   direct loopback RTP payload format as defined in <a href="#section-7">Section 7</a> of this
   specification.

   A device that is compliant to this specification and performing the
   mirroring using the loopback type rtp-media-loopback MUST transmit
   all received media back to the sender, unless congestion feedback or
   other lower-layer constraints prevent it from doing so.  The incoming
   media is treated as if it were to be played; for example, the media
   stream may receive treatment from Packet Loss Concealment (PLC)
   algorithms.  The mirroring entity re-generates all the RTP header
   fields as it would when transmitting media.  The mirroring entity MAY
   choose to encode the loopback media according to any of the media
   descriptions supported by the offering entity.  Furthermore, in cases
   where the same media type is looped back, the mirroring entity can
   choose to preserve the number of frames/packets and the bit rate of
   the encoded media according to the received media.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Payload%20Formats%20for%20Packet%20Loopback"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Payload Formats for Packet Loopback</span>

   The payload formats described in this section MUST be used by a
   loopback mirror when 'rtp-pkt-loopback' is the specified
   loopback-type.  Two different formats are specified here -- an
   encapsulated RTP payload format and a direct loopback RTP payload
   format.  The encapsulated RTP payload format should be used when the
   incoming RTP header information needs to be preserved during the



<span class="grey">Kaplan, et al.               Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   loopback operation.  This is useful in cases where the loopback
   source needs to measure performance metrics in both directions.
   However, this comes at the expense of increased packet size as
   described in <a href="#section-7.1">Section 7.1</a>.  The direct loopback RTP payload format
   should be used when bandwidth requirements prevent the use of the
   encapsulated RTP payload format.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Encapsulated%20Payload%20Format"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Encapsulated Payload Format</span>

   A received RTP packet is encapsulated in the payload section of the
   RTP packet generated by a loopback mirror.  Each received packet is
   encapsulated in a separate encapsulating RTP packet; the encapsulated
   packet would be fragmented only if required (for example, due to MTU
   limitations).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.1.%20%20Usage%20of%20RTP%20Header%20Fields"></a><a class="selflink" href="#section-7.1.1" name="section-7.1.1">7.1.1</a>.  Usage of RTP Header Fields</span>

   Payload Type (PT): The assignment of an RTP payload type for this
      packet format is outside the scope of this document; it is either
      specified by the RTP profile under which this payload format is
      used or more likely signaled dynamically out-of-band (e.g., using
      SDP; <a href="#section-7.1.3">Section 7.1.3</a> defines the name binding).

   Marker (M) bit: If the received RTP packet is looped back in multiple
      encapsulating RTP packets, the M bit is set to 1 in every fragment
      except the last packet; otherwise, it is set to 0.

   Extension (X) bit: This bit is defined by the RTP profile used.

   Sequence Number: The RTP sequence number SHOULD be generated by the
      loopback mirror in the usual manner with a constant random offset
      as described in <a href="rfc3550.html">RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   Timestamp: The RTP timestamp denotes the sampling instant for when
      the loopback mirror is transmitting this packet to the loopback
      source.  The RTP timestamp MUST use the same clock rate as that of
      the encapsulated packet.  The initial value of the timestamp
      SHOULD be random for security reasons (see <a href="rfc3550.html#section-5.1">Section 5.1 of RFC 3550</a>
      [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>]).

   Synchronization source (SSRC): This field is set as described in
      <a href="rfc3550.html">RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   The CSRC count (CC) and contributing source (CSRC) fields are used as
   described in <a href="rfc3550.html">RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].






<span class="grey">Kaplan, et al.               Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.2.%20%20RTP%20Payload%20Structure"></a><a class="selflink" href="#section-7.1.2" name="section-7.1.2">7.1.2</a>.  RTP Payload Structure</span>

   The outer RTP header of the encapsulating packet is followed by the
   payload header defined in this section, after any header
   extension(s).  If the received RTP packet has to be looped back in
   multiple encapsulating packets due to fragmentation, the
   encapsulating RTP header in each packet is followed by the payload
   header defined in this section.  The header is devised so that the
   loopback source can decode looped-back packets in the presence of
   moderate packet loss [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].  The RTP payload of the encapsulating
   RTP packet starts with the payload header defined in this section.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                         receive timestamp                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | F | R |  CC   |M|     PT      |       sequence number         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                           transmit timestamp                  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           synchronization source (SSRC) identifier            |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |            contributing source (CSRC) identifiers             |
   |                             ....                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

            Figure 1.  Encapsulating RTP Packet Payload Header

   The 12 octets after the receive timestamp are identical to the
   encapsulated RTP header of the received packet except for the first 2
   bits of the first octet.  In effect, the received RTP packet is
   encapsulated by creating a new outer RTP header followed by 4 new
   bytes of a receive timestamp, followed by the original received RTP
   header and payload, except that the first two bits of the received
   RTP header are overwritten as defined here.

   Receive timestamp: 32 bits

   The receive timestamp denotes the sampling instant for when the last
   octet of the received media packet that is being encapsulated by the
   loopback mirror is received from the loopback source.  The same clock
   rate MUST be used by the loopback source.  The initial value of the
   timestamp SHOULD be random for security reasons (see <a href="rfc3550.html#section-5.1">Section 5.1 of
   RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>]).






<span class="grey">Kaplan, et al.               Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Fragmentation (F): 2 bits

   Possible values are First Fragment (00), Last Fragment (01),
   No Fragmentation (10), or Intermediate Fragment (11).  This field
   identifies how much of the received packet is encapsulated in this
   packet by the loopback mirror.  If the received packet is not
   fragmented, this field is set to 10; otherwise, the packet that
   contains the first fragments sets this field to 00.  The packet that
   contains the last fragment sets this field to 01, and all other
   packets set this field to 11.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.3.%20%20Usage%20of%20SDP"></a><a class="selflink" href="#section-7.1.3" name="section-7.1.3">7.1.3</a>.  Usage of SDP</span>

   The payload type number for the encapsulated stream can be negotiated
   using SDP.  There is no static payload type assignment for the
   encapsulating stream, so dynamic payload type numbers MUST be used.
   The binding to the name is indicated by an rtpmap attribute.  The
   name used in this binding is "encaprtp".

   The following is an example SDP fragment for encapsulated RTP.

   m=audio 41352 RTP/AVP 112
   a=rtpmap:112 encaprtp/8000

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Direct%20Loopback%20RTP%20Payload%20Format"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Direct Loopback RTP Payload Format</span>

   The direct loopback RTP payload format can be used in scenarios where
   the 16-byte overhead of the encapsulated payload format is of
   concern, or simply due to local policy.  When using this payload
   format, the receiver loops back each received RTP packet payload (not
   header) in a separate RTP packet.

   Because a direct loopback format does not retain the original RTP
   headers, there will be no indication of the original payload-type
   sent to the mirror, in looped-back packets.  Therefore, the loopback
   source SHOULD only send one payload type per loopback RTP session if
   direct mode is used.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.2.1.%20%20Usage%20of%20RTP%20Header%20Fields"></a><a class="selflink" href="#section-7.2.1" name="section-7.2.1">7.2.1</a>.  Usage of RTP Header Fields</span>

   Payload Type (PT): The assignment of an RTP payload type for the
      encapsulating packet format is outside the scope of this document;
      it is either specified by the RTP profile under which this payload
      format is used or more likely signaled dynamically out-of-band
      (e.g., using SDP; <a href="#section-7.2.3">Section 7.2.3</a> defines the name binding).

   Marker (M) bit: This bit is set to the value in the received packet.




<span class="grey">Kaplan, et al.               Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Extension (X) bit: This bit is defined by the RTP profile used.

   Sequence Number: The RTP sequence number SHOULD be generated by the
      loopback mirror in the usual manner with a constant random offset,
      as per [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   Timestamp: The RTP timestamp denotes the sampling instant for when
      the loopback mirror is transmitting this packet to the loopback
      source.  The same clock rate MUST be used as that of the received
      RTP packet.  The initial value of the timestamp SHOULD be random
      for security reasons (see <a href="rfc3550.html#section-5.1">Section 5.1 of RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>]).

   SSRC: This field is set as described in <a href="rfc3550.html">RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   The CC and CSRC fields are used as described in <a href="rfc3550.html">RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.2.2.%20%20RTP%20Payload%20Structure"></a><a class="selflink" href="#section-7.2.2" name="section-7.2.2">7.2.2</a>.  RTP Payload Structure</span>

   This payload format does not define any payload-specific headers.
   The loopback mirror simply copies the RTP payload data from the
   payload portion of the RTP packet received from the loopback source.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.2.3.%20%20Usage%20of%20SDP"></a><a class="selflink" href="#section-7.2.3" name="section-7.2.3">7.2.3</a>.  Usage of SDP</span>

   The payload type number for the payload loopback stream can be
   negotiated using a mechanism like SDP.  There is no static payload
   type assignment for the stream, so dynamic payload type numbers MUST
   be used.  The binding to the name is indicated by an rtpmap
   attribute.  The name used in this binding is "rtploopback".

   The following is an example SDP fragment for the direct loopback RTP
   format.

   m=audio 41352 RTP/AVP 112
   a=rtpmap:112 rtploopback/8000

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20SRTP%20Behavior"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  SRTP Behavior</span>

   Secure RTP (SRTP) [<a href="rfc3711.html" title='"The Secure Real-time Transport Protocol (SRTP)"'>RFC3711</a>] MAY be used for loopback sessions.  SRTP
   operates at a lower logical layer than RTP, and thus if both sides
   negotiate to use SRTP, each side uses its own key and performs
   encryption/decryption, authentication, etc.  Therefore, the loopback
   function on the mirror occurs after the SRTP packet has been
   decrypted and authenticated, as a normal cleartext RTP packet without
   a Master Key Identifier (MKI) or authentication tag; once the






<span class="grey">Kaplan, et al.               Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   cleartext RTP packet or payload is mirrored -- either at the media-
   layer, direct packet-layer, or encapsulated packet-layer -- it is
   encrypted by the mirror using its own key.

   In order to provide the same level of protection to both forward and
   reverse media flows (media to and from the mirror), if SRTP is used
   it MUST be used in both directions with the same properties.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20RTCP%20Requirements"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  RTCP Requirements</span>

   The use of the loopback attribute is intended for the monitoring of
   media quality of the session.  Consequently, the media performance
   information should be exchanged between the offering and the
   answering entities.  An offering or answering agent that is compliant
   to this specification SHOULD support RTCP per [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and RTCP-XR
   per <a href="rfc3611.html">RFC 3611</a> [<a href="rfc3611.html" title='"RTP Control Protocol Extended Reports (RTCP XR)"'>RFC3611</a>].  Furthermore, if the offerer or answerer
   chooses to support RTCP-XR, they SHOULD support the RTCP-XR Loss Run
   Length Encoding (RLE) Report Block, Duplicate RLE Report Block,
   Statistics Summary Report Block, and VoIP Metrics Report Block per
   Sections <a href="#section-4.1">4.1</a>, <a href="#section-4.2">4.2</a>, <a href="#section-4.6">4.6</a>, and <a href="#section-4.7">4.7</a> of <a href="rfc3611.html">RFC 3611</a> [<a href="rfc3611.html" title='"RTP Control Protocol Extended Reports (RTCP XR)"'>RFC3611</a>].  The offerer
   and the answerer MAY support other RTCP-XR reporting blocks as
   defined by <a href="rfc3611.html">RFC 3611</a> [<a href="rfc3611.html" title='"RTP Control Protocol Extended Reports (RTCP XR)"'>RFC3611</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Congestion%20Control"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Congestion Control</span>

   All the participants in a media-level loopback session SHOULD
   implement congestion control mechanisms as defined by the RTP profile
   under which the loopback mechanism is implemented.  For audio/video
   profiles, implementations SHOULD conform to the mechanism defined in
   <a href="rfc3551.html#section-2">Section 2 of RFC 3551</a> [<a href="rfc3551.html" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>].

   For packet-level loopback types, the loopback source SHOULD implement
   congestion control.  The mirror will simply reflect back the RTP
   packets it receives (either in encapsulated or direct modes);
   therefore, the source needs to control the congestion of both forward
   and reverse paths by reducing its sending rate to the mirror.  This
   keeps the loopback mirror implementation simpler and provides more
   flexibility for the source performing a loopback test.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Examples"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Examples</span>

   This section provides examples for media descriptions using SDP for
   different scenarios.  The examples are given for SIP-based
   transactions; for convenience, they are abbreviated and do not show
   the complete signaling.






<span class="grey">Kaplan, et al.               Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.1.%20%20Offer%20for%20Specific%20Media%20Loopback%20Type"></a><a class="selflink" href="#section-11.1" name="section-11.1">11.1</a>.  Offer for Specific Media Loopback Type</span>

   An agent sends an SDP offer that looks like:

   v=0
   o=alice 2890844526 2890842807 IN IP4 host.atlanta.example.com
   s=-
   c=IN IP4 host.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=loopback:rtp-media-loopback
   a=loopback-source
   a=rtpmap:0 pcmu/8000

   The agent is offering to source the media and expects the answering
   agent to mirror the RTP stream per the loopback type
   rtp-media-loopback.

   An answering agent sends an SDP answer that looks like:

   v=0
   o=bob 1234567890 1122334455 IN IP4 host.biloxi.example.com
   s=-
   c=IN IP4 host.biloxi.example.com
   t=0 0
   m=audio 49270 RTP/AVP 0
   a=loopback:rtp-media-loopback
   a=loopback-mirror
   a=rtpmap:0 pcmu/8000

   The answerer agrees to mirror the media from the offerer at the media
   level.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.2.%20%20Offer%20for%20Choice%20of%20Media%20Loopback%20Type"></a><a class="selflink" href="#section-11.2" name="section-11.2">11.2</a>.  Offer for Choice of Media Loopback Type</span>

   An agent sends an SDP offer that looks like:

   v=0
   o=alice 2890844526 2890842807 IN IP4 host.atlanta.example.com
   s=-
   c=IN IP4 host.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0 112 113
   a=loopback:rtp-media-loopback rtp-pkt-loopback
   a=loopback-source
   a=rtpmap:0 pcmu/8000
   a=rtpmap:112 encaprtp/8000
   a=rtpmap:113 rtploopback/8000



<span class="grey">Kaplan, et al.               Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   The offerer is offering to source the media and expects the answerer
   to mirror the RTP stream at either the media or RTP level.

   An answering agent sends an SDP answer that looks like:

   v=0
   o=bob 1234567890 1122334455 IN IP4 host.biloxi.example.com
   s=-
   c=IN IP4 host.biloxi.example.com
   t=0 0
   m=audio 49270 RTP/AVP 0 112
   a=loopback:rtp-pkt-loopback
   a=loopback-mirror
   a=rtpmap:0 pcmu/8000
   a=rtpmap:112 encaprtp/8000

   The answerer agrees to mirror the media from the offerer at the
   packet level using the encapsulated RTP payload format.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.3.%20%20Answerer%20Rejecting%20Loopback%20Media"></a><a class="selflink" href="#section-11.3" name="section-11.3">11.3</a>.  Answerer Rejecting Loopback Media</span>

   An agent sends an SDP offer that looks like:

   v=0
   o=alice 2890844526 2890842807 IN IP4 host.atlanta.example.com
   s=-
   c=IN IP4 host.atlanta.example.com
   t=0 0
   m=audio 49170 RTP/AVP 0
   a=loopback:rtp-media-loopback
   a=loopback-source
   a=rtpmap:0 pcmu/8000

   The offerer is offering to source the media and expects the answerer
   to mirror the RTP stream at the media level.

   An answering agent sends an SDP answer that looks like:

   v=0
   o=bob 1234567890 1122334455 IN IP4 host.biloxi.example.com
   s=-
   c=IN IP4 host.biloxi.example.com
   t=0 0
   m=audio 0 RTP/AVP 0
   a=rtpmap:0 pcmu/8000






<span class="grey">Kaplan, et al.               Standards Track                   [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Note in this case that the answerer did not indicate loopback
   support, although it could have and still used a port number of 0 to
   indicate that it does not wish to accept that media session.

   Alternatively, the answering agent could have simply rejected the
   entire SDP offer through some higher-layer signaling protocol means
   (e.g., by rejecting the SIP INVITE request if the SDP offer was in
   the INVITE).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Security%20Considerations"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Security Considerations</span>

   The security considerations of [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>] and [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] apply.

   Given that media loopback may be automated without the end user's
   knowledge, the answerer of the media loopback should be aware of
   denial-of-service attacks.  It is RECOMMENDED that session requests
   for media loopback be authenticated and the frequency of such
   sessions limited by the answerer.

   If the higher-layer signaling protocol were not authenticated, a
   malicious attacker could create a session between two parties the
   attacker wishes to target, with each party acting as the loopback
   mirror to the other, of the rtp-pkt-loopback type.  A few RTP packets
   sent to either party would then infinitely loop among the two, as
   fast as they could process them, consuming their resources and
   network bandwidth.

   Furthermore, media loopback provides a means of attack indirection,
   whereby a malicious attacker creates a loopback session as the
   loopback source and uses the mirror to reflect the attacker's packets
   against a target -- perhaps a target the attacker could not reach
   directly, such as one behind a firewall, for example.  Or, the
   attacker could initiate the session as the loopback mirror, in the
   hopes of making the peer generate media against another target.

   If end-user devices such as mobile phones answer loopback requests
   without authentication and without notifying the end user, then an
   attacker could cause the battery to drain, and possibly deny the end
   user normal phone service or cause network data usage fees.  This
   could even occur naturally if a legitimate loopback session does not
   terminate properly and the end device does not have a timeout
   mechanism for such.

   For the reasons noted above, end-user devices SHOULD provide a means
   of indicating to the human user that the device is in a loopback
   session, even if it is an authenticated session.  Devices that answer





<span class="grey">Kaplan, et al.               Standards Track                   [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   or generate loopback sessions SHOULD either perform keepalive/refresh
   tests of the session state through some means or time out the session
   automatically.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Implementation%20Considerations"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Implementation Considerations</span>

   The media loopback approach described in this document is a complete
   solution that would work under all scenarios.  However, it is
   possible that the solution may not be lightweight enough for some
   implementations.  In light of this concern, this section clarifies
   which features of the loopback proposal MUST be implemented for all
   implementations and which features MAY be deferred if the complete
   solution is not desired.

   All implementations MUST at least support the rtp-pkt-loopback mode
   for loopback-type, with direct media loopback payload encoding.  In
   addition, for the loopback role, all implementations of an SDP
   offerer MUST at least be able to act as a loopback source.  These
   requirements are intended to provide a minimal level of
   interoperability between different implementations.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-14" name="section-14">14</a>.  IANA Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/14.1.%20%20SDP%20Attributes"></a><a class="selflink" href="#section-14.1" name="section-14.1">14.1</a>.  SDP Attributes</span>

   This document defines three new media-level SDP attributes.  IANA has
   registered the following attributes.

      Contact name:             Kaynam Hedayat
      Email address:            kh274@cornell.edu
      Telephone number:         +1-617-899-3279
      Attribute name:           loopback
      Type of attribute:        Media level.
      Subject to charset:       No.
      Purpose of attribute:     The 'loopback' attribute is used to
                                indicate the type of media loopback.
      Allowed attribute values: The parameters for 'loopback' may be
                                one or more of "rtp-pkt-loopback" and
                                "rtp-media-loopback".  See <a href="rfc6849.html#section-4">Section 4
                                of RFC 6849</a> for syntax.











<span class="grey">Kaplan, et al.               Standards Track                   [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


      Contact name:             Kaynam Hedayat
      Email address:            kh274@cornell.edu
      Telephone number:         +1-617-899-3279
      Attribute name:           loopback-source
      Type of attribute:        Media level.
      Subject to charset:       No.
      Purpose of attribute:     The 'loopback-source' attribute
                                specifies that the sender is the media
                                source and expects the receiver to act
                                as a loopback mirror.
      Allowed attribute values: N/A

      Contact name:             Kaynam Hedayat
      Email address:            kh274@cornell.edu
      Telephone number:         +1-617-899-3279
      Attribute name:           loopback-mirror
      Type of attribute:        Media level.
      Subject to charset:       No.
      Purpose of attribute:     The 'loopback-mirror' attribute
                                specifies that the receiver will
                                mirror (echo) all received media back
                                to the sender of the RTP stream.
      Allowed attribute values: N/A

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/14.2.%20%20Media%20Types"></a><a class="selflink" href="#section-14.2" name="section-14.2">14.2</a>.  Media Types</span>

   The IANA has registered the following media types.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.1.%20%20audio%2Fencaprtp"></a><a class="selflink" href="#section-14.2.1" name="section-14.2.1">14.2.1</a>.  audio/encaprtp</span>

   To: ietf-types@iana.org

   Subject: Registration of media type audio/encaprtp

   Type name: audio

   Subtype name: encaprtp

   Required parameters:

      rate: RTP timestamp clock rate, which is equal to the sampling
      rate.  This is specified by the loopback source and reflected by
      the mirror.

   Optional parameters: N/A

   Encoding considerations: This media type is framed.




<span class="grey">Kaplan, et al.               Standards Track                   [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Security considerations: See <a href="rfc6849.html#section-12">Section 12 of RFC 6849</a>.

   Interoperability considerations: N/A

   Published specification: <a href="rfc6849.html">RFC 6849</a>.

   Applications that use this media type: Applications wishing to
      monitor and ensure the quality of transport to the edge of a given
      VoIP service.

   Additional information: N/A

   Contact: the authors of <a href="rfc6849.html">RFC 6849</a>.

   Intended usage: LIMITED USE

   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP.  Transfer within other
      framing protocols is not defined at this time.

   Author: Kaynam Hedayat.

   Change controller: IETF PAYLOAD working group delegated from
      the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.2.%20%20video%2Fencaprtp"></a><a class="selflink" href="#section-14.2.2" name="section-14.2.2">14.2.2</a>.  video/encaprtp</span>

   To: ietf-types@iana.org

   Subject: Registration of media type video/encaprtp

   Type name: video

   Subtype name: encaprtp

   Required parameters:

      rate: RTP timestamp clock rate, which is equal to the sampling
      rate.  This is specified by the loopback source and reflected by
      the mirror.

   Optional parameters: N/A

   Encoding considerations: This media type is framed.

   Security considerations: See <a href="rfc6849.html#section-12">Section 12 of RFC 6849</a>.

   Interoperability considerations: N/A



<span class="grey">Kaplan, et al.               Standards Track                   [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Published specification: <a href="rfc6849.html">RFC 6849</a>.

   Applications that use this media type: Applications wishing to
      monitor and ensure the quality of transport to the edge of a given
      Video Over IP service.

   Additional information: N/A

   Contact: the authors of <a href="rfc6849.html">RFC 6849</a>.

   Intended usage: LIMITED USE

   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP.  Transfer within other
      framing protocols is not defined at this time.

   Author: Kaynam Hedayat.

   Change controller: IETF PAYLOAD working group delegated from
      the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.3.%20%20text%2Fencaprtp"></a><a class="selflink" href="#section-14.2.3" name="section-14.2.3">14.2.3</a>.  text/encaprtp</span>

   To: ietf-types@iana.org

   Subject: Registration of media type text/encaprtp

   Type name: text

   Subtype name: encaprtp

   Required parameters:

      rate: RTP timestamp clock rate, which is equal to the sampling
      rate.  This is specified by the loopback source and reflected by
      the mirror.

   Optional parameters: N/A

   Encoding considerations: This media type is framed.

   Security considerations: See <a href="rfc6849.html#section-12">Section 12 of RFC 6849</a>.

   Interoperability considerations: N/A

   Published specification: <a href="rfc6849.html">RFC 6849</a>.





<span class="grey">Kaplan, et al.               Standards Track                   [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Applications that use this media type: Applications wishing to
      monitor and ensure the quality of transport to the edge of a given
      real-time text service.

   Additional information: N/A

   Contact: the authors of <a href="rfc6849.html">RFC 6849</a>.

   Intended usage: LIMITED USE

   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP.  Transfer within other
      framing protocols is not defined at this time.

   Author: Kaynam Hedayat.

   Change controller: IETF PAYLOAD working group delegated from
      the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.4.%20%20application%2Fencaprtp"></a><a class="selflink" href="#section-14.2.4" name="section-14.2.4">14.2.4</a>.  application/encaprtp</span>

   To: ietf-types@iana.org

   Subject: Registration of media type application/encaprtp

   Type name: application

   Subtype name: encaprtp

   Required parameters:

      rate: RTP timestamp clock rate, which is equal to the sampling
      rate.  This is specified by the loopback source and reflected by
      the mirror.

   Optional parameters: N/A

   Encoding considerations: This media type is framed.

   Security considerations: See <a href="rfc6849.html#section-12">Section 12 of RFC 6849</a>.

   Interoperability considerations: N/A

   Published specification: <a href="rfc6849.html">RFC 6849</a>.

   Applications that use this media type: Applications wishing to
      monitor and ensure the quality of transport to the edge of a given
      real-time application service.



<span class="grey">Kaplan, et al.               Standards Track                   [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Additional information: N/A

   Contact: the authors of <a href="rfc6849.html">RFC 6849</a>.

   Intended usage: LIMITED USE

   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP.  Transfer within other
      framing protocols is not defined at this time.

   Author: Kaynam Hedayat.

   Change controller: IETF PAYLOAD working group delegated from
      the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.5.%20%20audio%2Frtploopback"></a><a class="selflink" href="#section-14.2.5" name="section-14.2.5">14.2.5</a>.  audio/rtploopback</span>

   To: ietf-types@iana.org

   Subject: Registration of media type audio/rtploopback

   Type name: audio

   Subtype name: rtploopback

   Required parameters:

      rate: RTP timestamp clock rate, which is equal to the sampling
      rate.  This is specified by the loopback source and reflected by
      the mirror.

   Optional parameters: N/A

   Encoding considerations: This media type is framed.

   Security considerations: See <a href="rfc6849.html#section-12">Section 12 of RFC 6849</a>.

   Interoperability considerations: N/A

   Published specification: <a href="rfc6849.html">RFC 6849</a>.

   Applications that use this media type: Applications wishing to
      monitor and ensure the quality of transport to the edge of a given
      VoIP service.

   Additional information: N/A

   Contact: the authors of <a href="rfc6849.html">RFC 6849</a>.



<span class="grey">Kaplan, et al.               Standards Track                   [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Intended usage: LIMITED USE

   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP.  Transfer within other
      framing protocols is not defined at this time.

   Author: Kaynam Hedayat.

   Change controller: IETF PAYLOAD working group delegated from
      the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.6.%20%20video%2Frtploopback"></a><a class="selflink" href="#section-14.2.6" name="section-14.2.6">14.2.6</a>.  video/rtploopback</span>

   To: ietf-types@iana.org

   Subject: Registration of media type video/rtploopback

   Type name: video

   Subtype name: rtploopback

   Required parameters:

      rate: RTP timestamp clock rate, which is equal to the sampling
      rate.  This is specified by the loopback source and reflected by
      the mirror.

   Optional parameters: N/A

   Encoding considerations: This media type is framed.

   Security considerations: See <a href="rfc6849.html#section-12">Section 12 of RFC 6849</a>.

   Interoperability considerations: N/A

   Published specification: <a href="rfc6849.html">RFC 6849</a>.

   Applications that use this media type: Applications wishing to
      monitor and ensure the quality of transport to the edge of a given
      Video Over IP service.

   Additional information: N/A

   Contact: the authors of <a href="rfc6849.html">RFC 6849</a>.

   Intended usage: LIMITED USE





<span class="grey">Kaplan, et al.               Standards Track                   [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP.  Transfer within other
      framing protocols is not defined at this time.

   Author: Kaynam Hedayat.

   Change controller: IETF PAYLOAD working group delegated from
      the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.7.%20%20text%2Frtploopback"></a><a class="selflink" href="#section-14.2.7" name="section-14.2.7">14.2.7</a>.  text/rtploopback</span>

   To: ietf-types@iana.org

   Subject: Registration of media type text/rtploopback

   Type name: text

   Subtype name: rtploopback

   Required parameters:

      rate: RTP timestamp clock rate, which is equal to the sampling
      rate.  This is specified by the loopback source and reflected by
      the mirror.

   Optional parameters: N/A

   Encoding considerations: This media type is framed.

   Security considerations: See <a href="rfc6849.html#section-12">Section 12 of RFC 6849</a>.

   Interoperability considerations: N/A

   Published specification: <a href="rfc6849.html">RFC 6849</a>.

   Applications that use this media type: Applications wishing to
      monitor and ensure the quality of transport to the edge of a given
      real-time text service.

   Additional information: N/A

   Contact: the authors of <a href="rfc6849.html">RFC 6849</a>.

   Intended usage: LIMITED USE

   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP.  Transfer within other
      framing protocols is not defined at this time.



<span class="grey">Kaplan, et al.               Standards Track                   [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Author: Kaynam Hedayat.

   Change controller: IETF PAYLOAD working group delegated from
      the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.8.%20%20application%2Frtploopback"></a><a class="selflink" href="#section-14.2.8" name="section-14.2.8">14.2.8</a>.  application/rtploopback</span>

   To: ietf-types@iana.org

   Subject: Registration of media type application/rtploopback

   Type name: application

   Subtype name: rtploopback

   Required parameters:

      rate: RTP timestamp clock rate, which is equal to the sampling
      rate.  This is specified by the loopback source and reflected by
      the mirror.

   Optional parameters: N/A

   Encoding considerations: This media type is framed.

   Security considerations: See <a href="rfc6849.html#section-12">Section 12 of RFC 6849</a>.

   Interoperability considerations: N/A

   Published specification: <a href="rfc6849.html">RFC 6849</a>.

   Applications that use this media type: Applications wishing to
      monitor and ensure the quality of transport to the edge of a given
      real-time application service.

   Additional information: N/A

   Contact: the authors of <a href="rfc6849.html">RFC 6849</a>.

   Intended usage: LIMITED USE

   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP.  Transfer within other
      framing protocols is not defined at this time.







<span class="grey">Kaplan, et al.               Standards Track                   [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   Author: Kaynam Hedayat.

   Change controller: IETF PAYLOAD working group delegated from
      the IESG.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/15.%20%20Acknowledgements"></a><a class="selflink" href="#section-15" name="section-15">15</a>.  Acknowledgements</span>

   This document's editor would like to thank the original authors of
   the document: Kaynam Hedayat, Nagarjuna Venna, Paul E. Jones, Arjun
   Roychowdhury, Chelliah SivaChelvan, and Nathan Stratton.  The editor
   has made fairly insignificant changes in the end.  Also, we'd like to
   thank Magnus Westerlund, Miguel Garcia, Muthu Arul Mozhi Perumal,
   Jeff Bernstein, Paul Kyzivat, Dave Oran, Flemming Andreasen, Gunnar
   Hellstrom, Emil Ivov, and Dan Wing for their feedback, comments, and
   suggestions.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/16.%20%20References"></a><a class="selflink" href="#section-16" name="section-16">16</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/16.1.%20%20Normative%20References"></a><a class="selflink" href="#section-16.1" name="section-16.1">16.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]   Bradner, S., "Key words for use in RFCs to Indicate
               Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC3264" name="ref-RFC3264">RFC3264</a>]   Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model
               with Session Description Protocol (SDP)", <a href="rfc3264.html">RFC 3264</a>,
               June 2002.

   [<a id="ref-RFC3550" name="ref-RFC3550">RFC3550</a>]   Schulzrinne, H., Casner, S., Frederick, R., and V.
               Jacobson, "RTP: A Transport Protocol for Real-Time
               Applications", STD 64, <a href="rfc3550.html">RFC 3550</a>, July 2003.

   [<a id="ref-RFC3551" name="ref-RFC3551">RFC3551</a>]   Schulzrinne, H. and S. Casner, "RTP Profile for Audio and
               Video Conferences with Minimal Control", STD 65,
               <a href="rfc3551.html">RFC 3551</a>, July 2003.

   [<a id="ref-RFC3611" name="ref-RFC3611">RFC3611</a>]   Friedman, T., Ed., Caceres, R., Ed., and A. Clark, Ed.,
               "RTP Control Protocol Extended Reports (RTCP XR)",
               <a href="rfc3611.html">RFC 3611</a>, November 2003.

   [<a id="ref-RFC3711" name="ref-RFC3711">RFC3711</a>]   Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K.
               Norrman, "The Secure Real-time Transport Protocol
               (SRTP)", <a href="rfc3711.html">RFC 3711</a>, March 2004.

   [<a id="ref-RFC4566" name="ref-RFC4566">RFC4566</a>]   Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
               Description Protocol", <a href="rfc4566.html">RFC 4566</a>, July 2006.






<span class="grey">Kaplan, et al.               Standards Track                   [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


   [<a id="ref-RFC4961" name="ref-RFC4961">RFC4961</a>]   Wing, D., "Symmetric RTP / RTP Control Protocol (RTCP)",
               <a href="https://tools.ietf.org/html/bcp131">BCP 131</a>, <a href="rfc4961.html">RFC 4961</a>, July 2007.

   [<a id="ref-RFC5234" name="ref-RFC5234">RFC5234</a>]   Crocker, D., Ed., and P. Overell, "Augmented BNF for
               Syntax Specifications: ABNF", STD 68, <a href="rfc5234.html">RFC 5234</a>,
               January 2008.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/16.2.%20%20Informative%20References"></a><a class="selflink" href="#section-16.2" name="section-16.2">16.2</a>.  Informative References</span>

   [<a id="ref-RFC5245" name="ref-RFC5245">RFC5245</a>]   Rosenberg, J., "Interactive Connectivity Establishment
               (ICE): A Protocol for Network Address Translator (NAT)
               Traversal for Offer/Answer Protocols", <a href="rfc5245.html">RFC 5245</a>,
               April 2010.

   [<a id="ref-RFC5389" name="ref-RFC5389">RFC5389</a>]   Rosenberg, J., Mahy, R., Matthews, P., and D. Wing,
               "Session Traversal Utilities for NAT (STUN)", <a href="rfc5389.html">RFC 5389</a>,
               October 2008.

   [<a id="ref-RFC5766" name="ref-RFC5766">RFC5766</a>]   Mahy, R., Matthews, P., and J. Rosenberg, "Traversal
               Using Relays around NAT (TURN): Relay Extensions to
               Session Traversal Utilities for NAT (STUN)", <a href="rfc5766.html">RFC 5766</a>,
               April 2010.

   [<a id="ref-RFC6263" name="ref-RFC6263">RFC6263</a>]   Marjou, X. and A. Sollaud, "Application Mechanism for
               Keeping Alive the NAT Mappings Associated with RTP / RTP
               Control Protocol (RTCP) Flows", <a href="rfc6263.html">RFC 6263</a>, June 2011.

























<span class="grey">Kaplan, et al.               Standards Track                   [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc6849.html">RFC 6849</a>                   SDP Media Loopback              February 2013</span>


Authors' Addresses

   Hadriel Kaplan (editor)
   Acme Packet
   100 Crosby Drive
   Bedford, MA  01730
   US
   EMail: hkaplan@acmepacket.com
   URI:   <a href="http://www.acmepacket.com/">http://www.acmepacket.com</a>


   Kaynam Hedayat
   EXFO
   285 Mill Road
   Chelmsford, MA  01824
   US
   EMail: kh274@cornell.edu
   URI:   <a href="http://www.exfo.com/">http://www.exfo.com/</a>


   Nagarjuna Venna
   Saperix
   c/o DogPatch Labs
   One Cambridge Center, 6th Floor
   Cambridge, MA  02142
   US
   EMail: vnagarjuna@saperix.com
   URI:   <a href="http://www.saperix.com/">http://www.saperix.com/</a>


   Paul E. Jones
   Cisco Systems, Inc.
   7025 Kit Creek Rd.
   Research Triangle Park, NC  27709
   US
   EMail: paulej@packetizer.com
   URI:   <a href="http://www.cisco.com/">http://www.cisco.com/</a>


   Nathan Stratton
   BlinkMind, Inc.
   2027 Briarchester Dr.
   Katy, TX  77450
   US
   EMail: nathan@robotics.net
   URI:   <a href="http://www.robotics.net/">http://www.robotics.net/</a>





Kaplan, et al.               Standards Track                   [Page 33]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6849 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:26 GMT --></html>