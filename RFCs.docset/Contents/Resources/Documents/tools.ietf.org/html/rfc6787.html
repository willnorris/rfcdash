<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6787 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:27 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6787" name="DC.Identifier"/>
<meta content='The Media Resource Control Protocol Version 2 (MRCPv2) allows client
hosts to control media service resources such as speech synthesizers,
recognizers, verifiers, and identifiers residing in servers on the
network. MRCPv2 is not a "stand-alone" protocol -- it relies on other
protocols, such as the Session Initiation Protocol (SIP), to
coordinate MRCPv2 clients and servers and manage sessions between
them, and the Session Description Protocol (SDP) to describe,
discover, and exchange capabilities. It also depends on SIP and SDP to
establish the media sessions and associated parameters between the
media source or sink and the media server. Once this is done, the
MRCPv2 exchange operates over the control session established above,
allowing the client to control the media processing resources on the
speech resource server. [STANDARDS-TRACK]' name="DC.Description.Abstract"/>
<meta content="Saravanan Shanmugham &lt;sarvi@cisco.com&gt;" name="DC.Creator"/>
<meta content="November, 2012" name="DC.Date.Issued"/>
<meta content="Media Resource Control Protocol Version 2 (MRCPv2)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6787 - Media Resource Control Protocol Version 2 (MRCPv2)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6787.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6787" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-speechsc-mrcpv2" title="draft-ietf-speechsc-mrcpv2">draft-ietf-spee...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6787" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6787" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6787" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=6787">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Internet Engineering Task Force (IETF)                        D. Burnett
Request for Comments: 6787                                         Voxeo
Category: Standards Track                                  S. Shanmugham
ISSN: 2070-1721                                      Cisco Systems, Inc.
                                                           November 2012


           <span class="h1">Media Resource Control Protocol Version 2 (MRCPv2)</span>

Abstract

   The Media Resource Control Protocol Version 2 (MRCPv2) allows client
   hosts to control media service resources such as speech synthesizers,
   recognizers, verifiers, and identifiers residing in servers on the
   network.  MRCPv2 is not a "stand-alone" protocol -- it relies on
   other protocols, such as the Session Initiation Protocol (SIP), to
   coordinate MRCPv2 clients and servers and manage sessions between
   them, and the Session Description Protocol (SDP) to describe,
   discover, and exchange capabilities.  It also depends on SIP and SDP
   to establish the media sessions and associated parameters between the
   media source or sink and the media server.  Once this is done, the
   MRCPv2 exchange operates over the control session established above,
   allowing the client to control the media processing resources on the
   speech resource server.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6787">http://www.rfc-editor.org/info/rfc6787</a>.

Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents



<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-2">2</a>.  Document Conventions  . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-2.1">2.1</a>.   Definitions  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-2.2">2.2</a>.   State-Machine Diagrams . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-2.3">2.3</a>.   URI Schemes  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-3">3</a>.  Architecture  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-3.1">3.1</a>.   MRCPv2 Media Resource Types  . . . . . . . . . . . . . .  <a href="#page-12">12</a>
     <a href="#section-3.2">3.2</a>.   Server and Resource Addressing . . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-4">4</a>.  MRCPv2 Basics . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
     <a href="#section-4.1">4.1</a>.   Connecting to the Server . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
     <a href="#section-4.2">4.2</a>.   Managing Resource Control Channels . . . . . . . . . . .  <a href="#page-14">14</a>
     <a href="#section-4.3">4.3</a>.   SIP Session Example  . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
     <a href="#section-4.4">4.4</a>.   Media Streams and RTP Ports  . . . . . . . . . . . . . .  <a href="#page-22">22</a>
     <a href="#section-4.5">4.5</a>.   MRCPv2 Message Transport . . . . . . . . . . . . . . . .  <a href="#page-24">24</a>
     <a href="#section-4.6">4.6</a>.   MRCPv2 Session Termination . . . . . . . . . . . . . . .  <a href="#page-24">24</a>
   <a href="#section-5">5</a>.  MRCPv2 Specification  . . . . . . . . . . . . . . . . . . . .  <a href="#page-24">24</a>
     <a href="#section-5.1">5.1</a>.   Common Protocol Elements . . . . . . . . . . . . . . . .  <a href="#page-25">25</a>
     <a href="#section-5.2">5.2</a>.   Request  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-28">28</a>
     <a href="#section-5.3">5.3</a>.   Response . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-29">29</a>
     <a href="#section-5.4">5.4</a>.   Status Codes . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-30">30</a>
     <a href="#section-5.5">5.5</a>.   Events . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-31">31</a>
   <a href="#section-6">6</a>.  MRCPv2 Generic Methods, Headers, and Result Structure . . . .  <a href="#page-32">32</a>
     <a href="#section-6.1">6.1</a>.   Generic Methods  . . . . . . . . . . . . . . . . . . . .  <a href="#page-32">32</a>
       <a href="#section-6.1.1">6.1.1</a>.   SET-PARAMS . . . . . . . . . . . . . . . . . . . . .  <a href="#page-32">32</a>
       <a href="#section-6.1.2">6.1.2</a>.   GET-PARAMS . . . . . . . . . . . . . . . . . . . . .  <a href="#page-33">33</a>
     <a href="#section-6.2">6.2</a>.   Generic Message Headers  . . . . . . . . . . . . . . . .  <a href="#page-34">34</a>
       <a href="#section-6.2.1">6.2.1</a>.   Channel-Identifier . . . . . . . . . . . . . . . . .  <a href="#page-35">35</a>
       <a href="#section-6.2.2">6.2.2</a>.   Accept . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-36">36</a>



<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


       <a href="#section-6.2.3">6.2.3</a>.   Active-Request-Id-List . . . . . . . . . . . . . . .  <a href="#page-36">36</a>
       <a href="#section-6.2.4">6.2.4</a>.   Proxy-Sync-Id  . . . . . . . . . . . . . . . . . . .  <a href="#page-36">36</a>
       <a href="#section-6.2.5">6.2.5</a>.   Accept-Charset . . . . . . . . . . . . . . . . . . .  <a href="#page-37">37</a>
       <a href="#section-6.2.6">6.2.6</a>.   Content-Type . . . . . . . . . . . . . . . . . . . .  <a href="#page-37">37</a>
       <a href="#section-6.2.7">6.2.7</a>.   Content-ID . . . . . . . . . . . . . . . . . . . . .  <a href="#page-38">38</a>
       <a href="#section-6.2.8">6.2.8</a>.   Content-Base . . . . . . . . . . . . . . . . . . . .  <a href="#page-38">38</a>
       <a href="#section-6.2.9">6.2.9</a>.   Content-Encoding . . . . . . . . . . . . . . . . . .  <a href="#page-38">38</a>
       <a href="#section-6.2.10">6.2.10</a>.  Content-Location . . . . . . . . . . . . . . . . . .  <a href="#page-39">39</a>
       <a href="#section-6.2.11">6.2.11</a>.  Content-Length . . . . . . . . . . . . . . . . . . .  <a href="#page-39">39</a>
       <a href="#section-6.2.12">6.2.12</a>.  Fetch Timeout  . . . . . . . . . . . . . . . . . . .  <a href="#page-39">39</a>
       <a href="#section-6.2.13">6.2.13</a>.  Cache-Control  . . . . . . . . . . . . . . . . . . .  <a href="#page-40">40</a>
       <a href="#section-6.2.14">6.2.14</a>.  Logging-Tag  . . . . . . . . . . . . . . . . . . . .  <a href="#page-41">41</a>
       <a href="#section-6.2.15">6.2.15</a>.  Set-Cookie . . . . . . . . . . . . . . . . . . . . .  <a href="#page-42">42</a>
       <a href="#section-6.2.16">6.2.16</a>.  Vendor-Specific Parameters . . . . . . . . . . . . .  <a href="#page-44">44</a>
     <a href="#section-6.3">6.3</a>.   Generic Result Structure . . . . . . . . . . . . . . . .  <a href="#page-44">44</a>
       <a href="#section-6.3.1">6.3.1</a>.   Natural Language Semantics Markup Language . . . . .  <a href="#page-45">45</a>
   <a href="#section-7">7</a>.  Resource Discovery  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-46">46</a>
   <a href="#section-8">8</a>.  Speech Synthesizer Resource . . . . . . . . . . . . . . . . .  <a href="#page-47">47</a>
     <a href="#section-8.1">8.1</a>.   Synthesizer State Machine  . . . . . . . . . . . . . . .  <a href="#page-48">48</a>
     <a href="#section-8.2">8.2</a>.   Synthesizer Methods  . . . . . . . . . . . . . . . . . .  <a href="#page-48">48</a>
     <a href="#section-8.3">8.3</a>.   Synthesizer Events . . . . . . . . . . . . . . . . . . .  <a href="#page-49">49</a>
     <a href="#section-8.4">8.4</a>.   Synthesizer Header Fields  . . . . . . . . . . . . . . .  <a href="#page-49">49</a>
       <a href="#section-8.4.1">8.4.1</a>.   Jump-Size  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-49">49</a>
       <a href="#section-8.4.2">8.4.2</a>.   Kill-On-Barge-In . . . . . . . . . . . . . . . . . .  <a href="#page-50">50</a>
       <a href="#section-8.4.3">8.4.3</a>.   Speaker-Profile  . . . . . . . . . . . . . . . . . .  <a href="#page-51">51</a>
       <a href="#section-8.4.4">8.4.4</a>.   Completion-Cause . . . . . . . . . . . . . . . . . .  <a href="#page-51">51</a>
       <a href="#section-8.4.5">8.4.5</a>.   Completion-Reason  . . . . . . . . . . . . . . . . .  <a href="#page-52">52</a>
       <a href="#section-8.4.6">8.4.6</a>.   Voice-Parameter  . . . . . . . . . . . . . . . . . .  <a href="#page-52">52</a>
       <a href="#section-8.4.7">8.4.7</a>.   Prosody-Parameters . . . . . . . . . . . . . . . . .  <a href="#page-53">53</a>
       <a href="#section-8.4.8">8.4.8</a>.   Speech-Marker  . . . . . . . . . . . . . . . . . . .  <a href="#page-53">53</a>
       <a href="#section-8.4.9">8.4.9</a>.   Speech-Language  . . . . . . . . . . . . . . . . . .  <a href="#page-54">54</a>
       <a href="#section-8.4.10">8.4.10</a>.  Fetch-Hint . . . . . . . . . . . . . . . . . . . . .  <a href="#page-54">54</a>
       <a href="#section-8.4.11">8.4.11</a>.  Audio-Fetch-Hint . . . . . . . . . . . . . . . . . .  <a href="#page-55">55</a>
       <a href="#section-8.4.12">8.4.12</a>.  Failed-URI . . . . . . . . . . . . . . . . . . . . .  <a href="#page-55">55</a>
       <a href="#section-8.4.13">8.4.13</a>.  Failed-URI-Cause . . . . . . . . . . . . . . . . . .  <a href="#page-55">55</a>
       <a href="#section-8.4.14">8.4.14</a>.  Speak-Restart  . . . . . . . . . . . . . . . . . . .  <a href="#page-56">56</a>
       <a href="#section-8.4.15">8.4.15</a>.  Speak-Length . . . . . . . . . . . . . . . . . . . .  <a href="#page-56">56</a>
       <a href="#section-8.4.16">8.4.16</a>.  Load-Lexicon . . . . . . . . . . . . . . . . . . . .  <a href="#page-57">57</a>
       <a href="#section-8.4.17">8.4.17</a>.  Lexicon-Search-Order . . . . . . . . . . . . . . . .  <a href="#page-57">57</a>
     <a href="#section-8.5">8.5</a>.   Synthesizer Message Body . . . . . . . . . . . . . . . .  <a href="#page-57">57</a>
       <a href="#section-8.5.1">8.5.1</a>.   Synthesizer Speech Data  . . . . . . . . . . . . . .  <a href="#page-57">57</a>
       <a href="#section-8.5.2">8.5.2</a>.   Lexicon Data . . . . . . . . . . . . . . . . . . . .  <a href="#page-59">59</a>
     <a href="#section-8.6">8.6</a>.   SPEAK Method . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-60">60</a>
     <a href="#section-8.7">8.7</a>.   STOP . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-62">62</a>
     <a href="#section-8.8">8.8</a>.   BARGE-IN-OCCURRED  . . . . . . . . . . . . . . . . . . .  <a href="#page-63">63</a>
     <a href="#section-8.9">8.9</a>.   PAUSE  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-65">65</a>
     <a href="#section-8.10">8.10</a>.  RESUME . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-66">66</a>
     <a href="#section-8.11">8.11</a>.  CONTROL  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-67">67</a>



<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


     <a href="#section-8.12">8.12</a>.  SPEAK-COMPLETE . . . . . . . . . . . . . . . . . . . . .  <a href="#page-69">69</a>
     <a href="#section-8.13">8.13</a>.  SPEECH-MARKER  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-70">70</a>
     <a href="#section-8.14">8.14</a>.  DEFINE-LEXICON . . . . . . . . . . . . . . . . . . . . .  <a href="#page-71">71</a>
   <a href="#section-9">9</a>.  Speech Recognizer Resource  . . . . . . . . . . . . . . . . .  <a href="#page-72">72</a>
     <a href="#section-9.1">9.1</a>.   Recognizer State Machine . . . . . . . . . . . . . . . .  <a href="#page-74">74</a>
     <a href="#section-9.2">9.2</a>.   Recognizer Methods . . . . . . . . . . . . . . . . . . .  <a href="#page-74">74</a>
     <a href="#section-9.3">9.3</a>.   Recognizer Events  . . . . . . . . . . . . . . . . . . .  <a href="#page-75">75</a>
     <a href="#section-9.4">9.4</a>.   Recognizer Header Fields . . . . . . . . . . . . . . . .  <a href="#page-75">75</a>
       <a href="#section-9.4.1">9.4.1</a>.   Confidence-Threshold . . . . . . . . . . . . . . . .  <a href="#page-77">77</a>
       <a href="#section-9.4.2">9.4.2</a>.   Sensitivity-Level  . . . . . . . . . . . . . . . . .  <a href="#page-77">77</a>
       <a href="#section-9.4.3">9.4.3</a>.   Speed-Vs-Accuracy  . . . . . . . . . . . . . . . . .  <a href="#page-77">77</a>
       <a href="#section-9.4.4">9.4.4</a>.   N-Best-List-Length . . . . . . . . . . . . . . . . .  <a href="#page-78">78</a>
       <a href="#section-9.4.5">9.4.5</a>.   Input-Type . . . . . . . . . . . . . . . . . . . . .  <a href="#page-78">78</a>
       <a href="#section-9.4.6">9.4.6</a>.   No-Input-Timeout . . . . . . . . . . . . . . . . . .  <a href="#page-78">78</a>
       <a href="#section-9.4.7">9.4.7</a>.   Recognition-Timeout  . . . . . . . . . . . . . . . .  <a href="#page-79">79</a>
       <a href="#section-9.4.8">9.4.8</a>.   Waveform-URI . . . . . . . . . . . . . . . . . . . .  <a href="#page-79">79</a>
       <a href="#section-9.4.9">9.4.9</a>.   Media-Type . . . . . . . . . . . . . . . . . . . . .  <a href="#page-80">80</a>
       <a href="#section-9.4.10">9.4.10</a>.  Input-Waveform-URI . . . . . . . . . . . . . . . . .  <a href="#page-80">80</a>
       <a href="#section-9.4.11">9.4.11</a>.  Completion-Cause . . . . . . . . . . . . . . . . . .  <a href="#page-80">80</a>
       <a href="#section-9.4.12">9.4.12</a>.  Completion-Reason  . . . . . . . . . . . . . . . . .  <a href="#page-83">83</a>
       <a href="#section-9.4.13">9.4.13</a>.  Recognizer-Context-Block . . . . . . . . . . . . . .  <a href="#page-83">83</a>
       <a href="#section-9.4.14">9.4.14</a>.  Start-Input-Timers . . . . . . . . . . . . . . . . .  <a href="#page-83">83</a>
       <a href="#section-9.4.15">9.4.15</a>.  Speech-Complete-Timeout  . . . . . . . . . . . . . .  <a href="#page-84">84</a>
       <a href="#section-9.4.16">9.4.16</a>.  Speech-Incomplete-Timeout  . . . . . . . . . . . . .  <a href="#page-84">84</a>
       <a href="#section-9.4.17">9.4.17</a>.  DTMF-Interdigit-Timeout  . . . . . . . . . . . . . .  <a href="#page-85">85</a>
       <a href="#section-9.4.18">9.4.18</a>.  DTMF-Term-Timeout  . . . . . . . . . . . . . . . . .  <a href="#page-85">85</a>
       <a href="#section-9.4.19">9.4.19</a>.  DTMF-Term-Char . . . . . . . . . . . . . . . . . . .  <a href="#page-85">85</a>
       <a href="#section-9.4.20">9.4.20</a>.  Failed-URI . . . . . . . . . . . . . . . . . . . . .  <a href="#page-86">86</a>
       <a href="#section-9.4.21">9.4.21</a>.  Failed-URI-Cause . . . . . . . . . . . . . . . . . .  <a href="#page-86">86</a>
       <a href="#section-9.4.22">9.4.22</a>.  Save-Waveform  . . . . . . . . . . . . . . . . . . .  <a href="#page-86">86</a>
       <a href="#section-9.4.23">9.4.23</a>.  New-Audio-Channel  . . . . . . . . . . . . . . . . .  <a href="#page-86">86</a>
       <a href="#section-9.4.24">9.4.24</a>.  Speech-Language  . . . . . . . . . . . . . . . . . .  <a href="#page-87">87</a>
       <a href="#section-9.4.25">9.4.25</a>.  Ver-Buffer-Utterance . . . . . . . . . . . . . . . .  <a href="#page-87">87</a>
       <a href="#section-9.4.26">9.4.26</a>.  Recognition-Mode . . . . . . . . . . . . . . . . . .  <a href="#page-87">87</a>
       <a href="#section-9.4.27">9.4.27</a>.  Cancel-If-Queue  . . . . . . . . . . . . . . . . . .  <a href="#page-88">88</a>
       <a href="#section-9.4.28">9.4.28</a>.  Hotword-Max-Duration . . . . . . . . . . . . . . . .  <a href="#page-88">88</a>
       <a href="#section-9.4.29">9.4.29</a>.  Hotword-Min-Duration . . . . . . . . . . . . . . . .  <a href="#page-88">88</a>
       <a href="#section-9.4.30">9.4.30</a>.  Interpret-Text . . . . . . . . . . . . . . . . . . .  <a href="#page-89">89</a>
       <a href="#section-9.4.31">9.4.31</a>.  DTMF-Buffer-Time . . . . . . . . . . . . . . . . . .  <a href="#page-89">89</a>
       <a href="#section-9.4.32">9.4.32</a>.  Clear-DTMF-Buffer  . . . . . . . . . . . . . . . . .  <a href="#page-89">89</a>
       <a href="#section-9.4.33">9.4.33</a>.  Early-No-Match . . . . . . . . . . . . . . . . . . .  <a href="#page-90">90</a>
       <a href="#section-9.4.34">9.4.34</a>.  Num-Min-Consistent-Pronunciations  . . . . . . . . .  <a href="#page-90">90</a>
       <a href="#section-9.4.35">9.4.35</a>.  Consistency-Threshold  . . . . . . . . . . . . . . .  <a href="#page-90">90</a>
       <a href="#section-9.4.36">9.4.36</a>.  Clash-Threshold  . . . . . . . . . . . . . . . . . .  <a href="#page-90">90</a>
       <a href="#section-9.4.37">9.4.37</a>.  Personal-Grammar-URI . . . . . . . . . . . . . . . .  <a href="#page-91">91</a>
       <a href="#section-9.4.38">9.4.38</a>.  Enroll-Utterance . . . . . . . . . . . . . . . . . .  <a href="#page-91">91</a>
       <a href="#section-9.4.39">9.4.39</a>.  Phrase-Id  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-91">91</a>
       <a href="#section-9.4.40">9.4.40</a>.  Phrase-NL  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-92">92</a>



<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


       <a href="#section-9.4.41">9.4.41</a>.  Weight . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-92">92</a>
       <a href="#section-9.4.42">9.4.42</a>.  Save-Best-Waveform . . . . . . . . . . . . . . . . .  <a href="#page-92">92</a>
       <a href="#section-9.4.43">9.4.43</a>.  New-Phrase-Id  . . . . . . . . . . . . . . . . . . .  <a href="#page-93">93</a>
       <a href="#section-9.4.44">9.4.44</a>.  Confusable-Phrases-URI . . . . . . . . . . . . . . .  <a href="#page-93">93</a>
       <a href="#section-9.4.45">9.4.45</a>.  Abort-Phrase-Enrollment  . . . . . . . . . . . . . .  <a href="#page-93">93</a>
     <a href="#section-9.5">9.5</a>.   Recognizer Message Body  . . . . . . . . . . . . . . . .  <a href="#page-93">93</a>
       <a href="#section-9.5.1">9.5.1</a>.   Recognizer Grammar Data  . . . . . . . . . . . . . .  <a href="#page-93">93</a>
       <a href="#section-9.5.2">9.5.2</a>.   Recognizer Result Data . . . . . . . . . . . . . . .  <a href="#page-97">97</a>
       <a href="#section-9.5.3">9.5.3</a>.   Enrollment Result Data . . . . . . . . . . . . . . .  <a href="#page-98">98</a>
       <a href="#section-9.5.4">9.5.4</a>.   Recognizer Context Block . . . . . . . . . . . . . .  <a href="#page-98">98</a>
     <a href="#section-9.6">9.6</a>.   Recognizer Results . . . . . . . . . . . . . . . . . . .  <a href="#page-99">99</a>
       <a href="#section-9.6.1">9.6.1</a>.   Markup Functions . . . . . . . . . . . . . . . . . .  <a href="#page-99">99</a>
       9.6.2.   Overview of Recognizer Result Elements and Their
                Relationships  . . . . . . . . . . . . . . . . . . . <a href="#page-100">100</a>
       <a href="#section-9.6.3">9.6.3</a>.   Elements and Attributes  . . . . . . . . . . . . . . <a href="#page-101">101</a>
     <a href="#section-9.7">9.7</a>.   Enrollment Results . . . . . . . . . . . . . . . . . . . <a href="#page-106">106</a>
       <a href="#section-9.7.1">9.7.1</a>.   &lt;num-clashes&gt; Element  . . . . . . . . . . . . . . . <a href="#page-106">106</a>
       <a href="#section-9.7.2">9.7.2</a>.   &lt;num-good-repetitions&gt; Element . . . . . . . . . . . <a href="#page-106">106</a>
       <a href="#section-9.7.3">9.7.3</a>.   &lt;num-repetitions-still-needed&gt; Element . . . . . . . <a href="#page-107">107</a>
       <a href="#section-9.7.4">9.7.4</a>.   &lt;consistency-status&gt; Element . . . . . . . . . . . . <a href="#page-107">107</a>
       <a href="#section-9.7.5">9.7.5</a>.   &lt;clash-phrase-ids&gt; Element . . . . . . . . . . . . . <a href="#page-107">107</a>
       <a href="#section-9.7.6">9.7.6</a>.   &lt;transcriptions&gt; Element . . . . . . . . . . . . . . <a href="#page-107">107</a>
       <a href="#section-9.7.7">9.7.7</a>.   &lt;confusable-phrases&gt; Element . . . . . . . . . . . . <a href="#page-107">107</a>
     <a href="#section-9.8">9.8</a>.   DEFINE-GRAMMAR . . . . . . . . . . . . . . . . . . . . . <a href="#page-107">107</a>
     <a href="#section-9.9">9.9</a>.   RECOGNIZE  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-111">111</a>
     <a href="#section-9.10">9.10</a>.  STOP . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-118">118</a>
     <a href="#section-9.11">9.11</a>.  GET-RESULT . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-119">119</a>
     <a href="#section-9.12">9.12</a>.  START-OF-INPUT . . . . . . . . . . . . . . . . . . . . . <a href="#page-120">120</a>
     <a href="#section-9.13">9.13</a>.  START-INPUT-TIMERS . . . . . . . . . . . . . . . . . . . <a href="#page-120">120</a>
     <a href="#section-9.14">9.14</a>.  RECOGNITION-COMPLETE . . . . . . . . . . . . . . . . . . <a href="#page-120">120</a>
     <a href="#section-9.15">9.15</a>.  START-PHRASE-ENROLLMENT  . . . . . . . . . . . . . . . . <a href="#page-123">123</a>
     <a href="#section-9.16">9.16</a>.  ENROLLMENT-ROLLBACK  . . . . . . . . . . . . . . . . . . <a href="#page-124">124</a>
     <a href="#section-9.17">9.17</a>.  END-PHRASE-ENROLLMENT  . . . . . . . . . . . . . . . . . <a href="#page-124">124</a>
     <a href="#section-9.18">9.18</a>.  MODIFY-PHRASE  . . . . . . . . . . . . . . . . . . . . . <a href="#page-125">125</a>
     <a href="#section-9.19">9.19</a>.  DELETE-PHRASE  . . . . . . . . . . . . . . . . . . . . . <a href="#page-125">125</a>
     <a href="#section-9.20">9.20</a>.  INTERPRET  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-125">125</a>
     <a href="#section-9.21">9.21</a>.  INTERPRETATION-COMPLETE  . . . . . . . . . . . . . . . . <a href="#page-127">127</a>
     <a href="#section-9.22">9.22</a>.  DTMF Detection . . . . . . . . . . . . . . . . . . . . . <a href="#page-128">128</a>
   <a href="#section-10">10</a>. Recorder Resource . . . . . . . . . . . . . . . . . . . . . . <a href="#page-129">129</a>
     <a href="#section-10.1">10.1</a>.  Recorder State Machine . . . . . . . . . . . . . . . . . <a href="#page-129">129</a>
     <a href="#section-10.2">10.2</a>.  Recorder Methods . . . . . . . . . . . . . . . . . . . . <a href="#page-130">130</a>
     <a href="#section-10.3">10.3</a>.  Recorder Events  . . . . . . . . . . . . . . . . . . . . <a href="#page-130">130</a>
     <a href="#section-10.4">10.4</a>.  Recorder Header Fields . . . . . . . . . . . . . . . . . <a href="#page-130">130</a>
       <a href="#section-10.4.1">10.4.1</a>.  Sensitivity-Level  . . . . . . . . . . . . . . . . . <a href="#page-130">130</a>
       <a href="#section-10.4.2">10.4.2</a>.  No-Input-Timeout . . . . . . . . . . . . . . . . . . <a href="#page-131">131</a>
       <a href="#section-10.4.3">10.4.3</a>.  Completion-Cause . . . . . . . . . . . . . . . . . . <a href="#page-131">131</a>
       <a href="#section-10.4.4">10.4.4</a>.  Completion-Reason  . . . . . . . . . . . . . . . . . <a href="#page-132">132</a>
       <a href="#section-10.4.5">10.4.5</a>.  Failed-URI . . . . . . . . . . . . . . . . . . . . . <a href="#page-132">132</a>



<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


       <a href="#section-10.4.6">10.4.6</a>.  Failed-URI-Cause . . . . . . . . . . . . . . . . . . <a href="#page-132">132</a>
       <a href="#section-10.4.7">10.4.7</a>.  Record-URI . . . . . . . . . . . . . . . . . . . . . <a href="#page-132">132</a>
       <a href="#section-10.4.8">10.4.8</a>.  Media-Type . . . . . . . . . . . . . . . . . . . . . <a href="#page-133">133</a>
       <a href="#section-10.4.9">10.4.9</a>.  Max-Time . . . . . . . . . . . . . . . . . . . . . . <a href="#page-133">133</a>
       <a href="#section-10.4.10">10.4.10</a>. Trim-Length  . . . . . . . . . . . . . . . . . . . . <a href="#page-134">134</a>
       <a href="#section-10.4.11">10.4.11</a>. Final-Silence  . . . . . . . . . . . . . . . . . . . <a href="#page-134">134</a>
       <a href="#section-10.4.12">10.4.12</a>. Capture-On-Speech  . . . . . . . . . . . . . . . . . <a href="#page-134">134</a>
       <a href="#section-10.4.13">10.4.13</a>. Ver-Buffer-Utterance . . . . . . . . . . . . . . . . <a href="#page-134">134</a>
       <a href="#section-10.4.14">10.4.14</a>. Start-Input-Timers . . . . . . . . . . . . . . . . . <a href="#page-135">135</a>
       <a href="#section-10.4.15">10.4.15</a>. New-Audio-Channel  . . . . . . . . . . . . . . . . . <a href="#page-135">135</a>
     <a href="#section-10.5">10.5</a>.  Recorder Message Body  . . . . . . . . . . . . . . . . . <a href="#page-135">135</a>
     <a href="#section-10.6">10.6</a>.  RECORD . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-135">135</a>
     <a href="#section-10.7">10.7</a>.  STOP . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-136">136</a>
     <a href="#section-10.8">10.8</a>.  RECORD-COMPLETE  . . . . . . . . . . . . . . . . . . . . <a href="#page-137">137</a>
     <a href="#section-10.9">10.9</a>.  START-INPUT-TIMERS . . . . . . . . . . . . . . . . . . . <a href="#page-138">138</a>
     <a href="#section-10.10">10.10</a>. START-OF-INPUT . . . . . . . . . . . . . . . . . . . . . <a href="#page-138">138</a>
   <a href="#section-11">11</a>. Speaker Verification and Identification . . . . . . . . . . . <a href="#page-139">139</a>
     <a href="#section-11.1">11.1</a>.  Speaker Verification State Machine . . . . . . . . . . . <a href="#page-140">140</a>
     <a href="#section-11.2">11.2</a>.  Speaker Verification Methods . . . . . . . . . . . . . . <a href="#page-142">142</a>
     <a href="#section-11.3">11.3</a>.  Verification Events  . . . . . . . . . . . . . . . . . . <a href="#page-144">144</a>
     <a href="#section-11.4">11.4</a>.  Verification Header Fields . . . . . . . . . . . . . . . <a href="#page-144">144</a>
       <a href="#section-11.4.1">11.4.1</a>.  Repository-URI . . . . . . . . . . . . . . . . . . . <a href="#page-144">144</a>
       <a href="#section-11.4.2">11.4.2</a>.  Voiceprint-Identifier  . . . . . . . . . . . . . . . <a href="#page-145">145</a>
       <a href="#section-11.4.3">11.4.3</a>.  Verification-Mode  . . . . . . . . . . . . . . . . . <a href="#page-145">145</a>
       <a href="#section-11.4.4">11.4.4</a>.  Adapt-Model  . . . . . . . . . . . . . . . . . . . . <a href="#page-146">146</a>
       <a href="#section-11.4.5">11.4.5</a>.  Abort-Model  . . . . . . . . . . . . . . . . . . . . <a href="#page-146">146</a>
       <a href="#section-11.4.6">11.4.6</a>.  Min-Verification-Score . . . . . . . . . . . . . . . <a href="#page-147">147</a>
       <a href="#section-11.4.7">11.4.7</a>.  Num-Min-Verification-Phrases . . . . . . . . . . . . <a href="#page-147">147</a>
       <a href="#section-11.4.8">11.4.8</a>.  Num-Max-Verification-Phrases . . . . . . . . . . . . <a href="#page-147">147</a>
       <a href="#section-11.4.9">11.4.9</a>.  No-Input-Timeout . . . . . . . . . . . . . . . . . . <a href="#page-148">148</a>
       <a href="#section-11.4.10">11.4.10</a>. Save-Waveform  . . . . . . . . . . . . . . . . . . . <a href="#page-148">148</a>
       <a href="#section-11.4.11">11.4.11</a>. Media-Type . . . . . . . . . . . . . . . . . . . . . <a href="#page-148">148</a>
       <a href="#section-11.4.12">11.4.12</a>. Waveform-URI . . . . . . . . . . . . . . . . . . . . <a href="#page-148">148</a>
       <a href="#section-11.4.13">11.4.13</a>. Voiceprint-Exists  . . . . . . . . . . . . . . . . . <a href="#page-149">149</a>
       <a href="#section-11.4.14">11.4.14</a>. Ver-Buffer-Utterance . . . . . . . . . . . . . . . . <a href="#page-149">149</a>
       <a href="#section-11.4.15">11.4.15</a>. Input-Waveform-URI . . . . . . . . . . . . . . . . . <a href="#page-149">149</a>
       <a href="#section-11.4.16">11.4.16</a>. Completion-Cause . . . . . . . . . . . . . . . . . . <a href="#page-150">150</a>
       <a href="#section-11.4.17">11.4.17</a>. Completion-Reason  . . . . . . . . . . . . . . . . . <a href="#page-151">151</a>
       <a href="#section-11.4.18">11.4.18</a>. Speech-Complete-Timeout  . . . . . . . . . . . . . . <a href="#page-151">151</a>
       <a href="#section-11.4.19">11.4.19</a>. New-Audio-Channel  . . . . . . . . . . . . . . . . . <a href="#page-152">152</a>
       <a href="#section-11.4.20">11.4.20</a>. Abort-Verification . . . . . . . . . . . . . . . . . <a href="#page-152">152</a>
       <a href="#section-11.4.21">11.4.21</a>. Start-Input-Timers . . . . . . . . . . . . . . . . . <a href="#page-152">152</a>
     <a href="#section-11.5">11.5</a>.  Verification Message Body  . . . . . . . . . . . . . . . <a href="#page-152">152</a>
       <a href="#section-11.5.1">11.5.1</a>.  Verification Result Data . . . . . . . . . . . . . . <a href="#page-152">152</a>
       <a href="#section-11.5.2">11.5.2</a>.  Verification Result Elements . . . . . . . . . . . . <a href="#page-153">153</a>
     <a href="#section-11.6">11.6</a>.  START-SESSION  . . . . . . . . . . . . . . . . . . . . . <a href="#page-157">157</a>
     <a href="#section-11.7">11.7</a>.  END-SESSION  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-158">158</a>
     <a href="#section-11.8">11.8</a>.  QUERY-VOICEPRINT . . . . . . . . . . . . . . . . . . . . <a href="#page-159">159</a>



<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


     <a href="#section-11.9">11.9</a>.  DELETE-VOICEPRINT  . . . . . . . . . . . . . . . . . . . <a href="#page-160">160</a>
     <a href="#section-11.10">11.10</a>. VERIFY . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-160">160</a>
     <a href="#section-11.11">11.11</a>. VERIFY-FROM-BUFFER . . . . . . . . . . . . . . . . . . . <a href="#page-160">160</a>
     <a href="#section-11.12">11.12</a>. VERIFY-ROLLBACK  . . . . . . . . . . . . . . . . . . . . <a href="#page-164">164</a>
     <a href="#section-11.13">11.13</a>. STOP . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-164">164</a>
     <a href="#section-11.14">11.14</a>. START-INPUT-TIMERS . . . . . . . . . . . . . . . . . . . <a href="#page-165">165</a>
     <a href="#section-11.15">11.15</a>. VERIFICATION-COMPLETE  . . . . . . . . . . . . . . . . . <a href="#page-165">165</a>
     <a href="#section-11.16">11.16</a>. START-OF-INPUT . . . . . . . . . . . . . . . . . . . . . <a href="#page-166">166</a>
     <a href="#section-11.17">11.17</a>. CLEAR-BUFFER . . . . . . . . . . . . . . . . . . . . . . <a href="#page-166">166</a>
     <a href="#section-11.18">11.18</a>. GET-INTERMEDIATE-RESULT  . . . . . . . . . . . . . . . . <a href="#page-167">167</a>
   <a href="#section-12">12</a>. Security Considerations . . . . . . . . . . . . . . . . . . . <a href="#page-168">168</a>
     <a href="#section-12.1">12.1</a>.  Rendezvous and Session Establishment . . . . . . . . . . <a href="#page-168">168</a>
     <a href="#section-12.2">12.2</a>.  Control Channel Protection . . . . . . . . . . . . . . . <a href="#page-168">168</a>
     <a href="#section-12.3">12.3</a>.  Media Session Protection . . . . . . . . . . . . . . . . <a href="#page-169">169</a>
     <a href="#section-12.4">12.4</a>.  Indirect Content Access  . . . . . . . . . . . . . . . . <a href="#page-169">169</a>
     <a href="#section-12.5">12.5</a>.  Protection of Stored Media . . . . . . . . . . . . . . . <a href="#page-170">170</a>
     <a href="#section-12.6">12.6</a>.  DTMF and Recognition Buffers . . . . . . . . . . . . . . <a href="#page-171">171</a>
     <a href="#section-12.7">12.7</a>.  Client-Set Server Parameters . . . . . . . . . . . . . . <a href="#page-171">171</a>
     <a href="#section-12.8">12.8</a>.  DELETE-VOICEPRINT and Authorization  . . . . . . . . . . <a href="#page-171">171</a>
   <a href="#section-13">13</a>. IANA Considerations . . . . . . . . . . . . . . . . . . . . . <a href="#page-171">171</a>
     <a href="#section-13.1">13.1</a>.  New Registries . . . . . . . . . . . . . . . . . . . . . <a href="#page-171">171</a>
       <a href="#section-13.1.1">13.1.1</a>.  MRCPv2 Resource Types  . . . . . . . . . . . . . . . <a href="#page-171">171</a>
       <a href="#section-13.1.2">13.1.2</a>.  MRCPv2 Methods and Events  . . . . . . . . . . . . . <a href="#page-172">172</a>
       <a href="#section-13.1.3">13.1.3</a>.  MRCPv2 Header Fields . . . . . . . . . . . . . . . . <a href="#page-173">173</a>
       <a href="#section-13.1.4">13.1.4</a>.  MRCPv2 Status Codes  . . . . . . . . . . . . . . . . <a href="#page-176">176</a>
       <a href="#section-13.1.5">13.1.5</a>.  Grammar Reference List Parameters  . . . . . . . . . <a href="#page-176">176</a>
       <a href="#section-13.1.6">13.1.6</a>.  MRCPv2 Vendor-Specific Parameters  . . . . . . . . . <a href="#page-176">176</a>
     <a href="#section-13.2">13.2</a>.  NLSML-Related Registrations  . . . . . . . . . . . . . . <a href="#page-177">177</a>
       <a href="#section-13.2.1">13.2.1</a>.  'application/nlsml+xml' Media Type Registration  . . <a href="#page-177">177</a>
     <a href="#section-13.3">13.3</a>.  NLSML XML Schema Registration  . . . . . . . . . . . . . <a href="#page-178">178</a>
     <a href="#section-13.4">13.4</a>.  MRCPv2 XML Namespace Registration  . . . . . . . . . . . <a href="#page-178">178</a>
     <a href="#section-13.5">13.5</a>.  Text Media Type Registrations  . . . . . . . . . . . . . <a href="#page-178">178</a>
       <a href="#section-13.5.1">13.5.1</a>.  text/grammar-ref-list  . . . . . . . . . . . . . . . <a href="#page-178">178</a>
     <a href="#section-13.6">13.6</a>.  'session' URI Scheme Registration  . . . . . . . . . . . <a href="#page-180">180</a>
     <a href="#section-13.7">13.7</a>.  SDP Parameter Registrations  . . . . . . . . . . . . . . <a href="#page-181">181</a>
       <a href="#section-13.7.1">13.7.1</a>.  Sub-Registry "proto" . . . . . . . . . . . . . . . . <a href="#page-181">181</a>
       <a href="#section-13.7.2">13.7.2</a>.  Sub-Registry "att-field (media-level)" . . . . . . . <a href="#page-182">182</a>
   <a href="#section-14">14</a>. Examples  . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-183">183</a>
     <a href="#section-14.1">14.1</a>.  Message Flow . . . . . . . . . . . . . . . . . . . . . . <a href="#page-183">183</a>
     <a href="#section-14.2">14.2</a>.  Recognition Result Examples  . . . . . . . . . . . . . . <a href="#page-192">192</a>
       <a href="#section-14.2.1">14.2.1</a>.  Simple ASR Ambiguity . . . . . . . . . . . . . . . . <a href="#page-192">192</a>
       <a href="#section-14.2.2">14.2.2</a>.  Mixed Initiative . . . . . . . . . . . . . . . . . . <a href="#page-192">192</a>
       <a href="#section-14.2.3">14.2.3</a>.  DTMF Input . . . . . . . . . . . . . . . . . . . . . <a href="#page-193">193</a>
       14.2.4.  Interpreting Meta-Dialog and Meta-Task Utterances  . 194
       <a href="#section-14.2.5">14.2.5</a>.  Anaphora and Deixis  . . . . . . . . . . . . . . . . <a href="#page-195">195</a>
       14.2.6.  Distinguishing Individual Items from Sets with
                One Member . . . . . . . . . . . . . . . . . . . . . <a href="#page-195">195</a>
       <a href="#section-14.2.7">14.2.7</a>.  Extensibility  . . . . . . . . . . . . . . . . . . . <a href="#page-196">196</a>



<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   <a href="#section-15">15</a>. ABNF Normative Definition . . . . . . . . . . . . . . . . . . <a href="#page-196">196</a>
   <a href="#section-16">16</a>. XML Schemas . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-211">211</a>
     <a href="#section-16.1">16.1</a>.  NLSML Schema Definition  . . . . . . . . . . . . . . . . <a href="#page-211">211</a>
     <a href="#section-16.2">16.2</a>.  Enrollment Results Schema Definition . . . . . . . . . . <a href="#page-213">213</a>
     <a href="#section-16.3">16.3</a>.  Verification Results Schema Definition . . . . . . . . . <a href="#page-214">214</a>
   <a href="#section-17">17</a>. References  . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-218">218</a>
     <a href="#section-17.1">17.1</a>.  Normative References . . . . . . . . . . . . . . . . . . <a href="#page-218">218</a>
     <a href="#section-17.2">17.2</a>.  Informative References . . . . . . . . . . . . . . . . . <a href="#page-220">220</a>
   <a href="#appendix-A">Appendix A</a>.  Contributors . . . . . . . . . . . . . . . . . . . . <a href="#page-223">223</a>
   <a href="#appendix-B">Appendix B</a>.  Acknowledgements . . . . . . . . . . . . . . . . . . <a href="#page-223">223</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   MRCPv2 is designed to allow a client device to control media
   processing resources on the network.  Some of these media processing
   resources include speech recognition engines, speech synthesis
   engines, speaker verification, and speaker identification engines.
   MRCPv2 enables the implementation of distributed Interactive Voice
   Response platforms using VoiceXML [<a href="#ref-W3C.REC-voicexml20-20040316">W3C.REC-voicexml20-20040316</a>]
   browsers or other client applications while maintaining separate
   back-end speech processing capabilities on specialized speech
   processing servers.  MRCPv2 is based on the earlier Media Resource
   Control Protocol (MRCP) [<a href="rfc4463.html" title='"A Media Resource Control Protocol (MRCP) Developed by Cisco, Nuance, and Speechworks"'>RFC4463</a>] developed jointly by Cisco Systems,
   Inc., Nuance Communications, and Speechworks, Inc.  Although some of
   the method names are similar, the way in which these methods are
   communicated is different.  There are also more resources and more
   methods for each resource.  The first version of MRCP was essentially
   taken only as input to the development of this protocol.  There is no
   expectation that an MRCPv2 client will work with an MRCPv1 server or
   vice versa.  There is no migration plan or gateway definition between
   the two protocols.

   The protocol requirements of Speech Services Control (SPEECHSC)
   [<a href="rfc4313.html" title='"Requirements for Distributed Control of Automatic Speech Recognition (ASR), Speaker Identification/Speaker Verification (SI/SV), and Text-to- Speech (TTS) Resources"'>RFC4313</a>] include that the solution be capable of reaching a media
   processing server, setting up communication channels to the media
   resources, and sending and receiving control messages and media
   streams to/from the server.  The Session Initiation Protocol (SIP)
   [<a href="rfc3261.html" title='"SIP: Session Initiation Protocol"'>RFC3261</a>] meets these requirements.

   The proprietary version of MRCP ran over the Real Time Streaming
   Protocol (RTSP) [<a href="rfc2326.html" title='"Real Time Streaming Protocol (RTSP)"'>RFC2326</a>].  At the time work on MRCPv2 was begun, the
   consensus was that this use of RTSP would break the RTSP protocol or
   cause backward-compatibility problems, something forbidden by <a href="rfc4313.html#section-3.2">Section</a>
   <a href="rfc4313.html#section-3.2">3.2 of [RFC4313]</a>.  This is the reason why MRCPv2 does not run over
   RTSP.






<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   MRCPv2 leverages these capabilities by building upon SIP and the
   Session Description Protocol (SDP) [<a href="rfc4566.html" title='"SDP: Session Description Protocol"'>RFC4566</a>].  MRCPv2 uses SIP to set
   up and tear down media and control sessions with the server.  In
   addition, the client can use a SIP re-INVITE method (an INVITE dialog
   sent within an existing SIP session) to change the characteristics of
   these media and control session while maintaining the SIP dialog
   between the client and server.  SDP is used to describe the
   parameters of the media sessions associated with that dialog.  It is
   mandatory to support SIP as the session establishment protocol to
   ensure interoperability.  Other protocols can be used for session
   establishment by prior agreement.  This document only describes the
   use of SIP and SDP.

   MRCPv2 uses SIP and SDP to create the speech client/server dialog and
   set up the media channels to the server.  It also uses SIP and SDP to
   establish MRCPv2 control sessions between the client and the server
   for each media processing resource required for that dialog.  The
   MRCPv2 protocol exchange between the client and the media resource is
   carried on that control session.  MRCPv2 exchanges do not change the
   state of the SIP dialog, the media sessions, or other parameters of
   the dialog initiated via SIP.  It controls and affects the state of
   the media processing resource associated with the MRCPv2 session(s).

   MRCPv2 defines the messages to control the different media processing
   resources and the state machines required to guide their operation.
   It also describes how these messages are carried over a transport-
   layer protocol such as the Transmission Control Protocol (TCP)
   [<a href="https://tools.ietf.org/html/rfc0793" title='"Transmission Control Protocol"'>RFC0793</a>] or the Transport Layer Security (TLS) Protocol [<a href="rfc5246.html" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>].
   (Note: the Stream Control Transmission Protocol (SCTP) [<a href="rfc4960.html" title='"Stream Control Transmission Protocol"'>RFC4960</a>] is a
   viable transport for MRCPv2 as well, but the mapping onto SCTP is not
   described in this specification.)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Document%20Conventions"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Document Conventions</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   Since many of the definitions and syntax are identical to those for
   the Hypertext Transfer Protocol -- HTTP/1.1 [<a href="rfc2616.html" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>RFC2616</a>], this
   specification refers to the section where they are defined rather
   than copying it.  For brevity, [HX.Y] is to be taken to refer to
   Section X.Y of <a href="rfc2616.html">RFC 2616</a>.

   All the mechanisms specified in this document are described in both
   prose and an augmented Backus-Naur form (ABNF [<a href="rfc5234.html" title='"Augmented BNF for Syntax Specifications: ABNF"'>RFC5234</a>]).





<span class="grey">Burnett &amp; Shanmugham         Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   The complete message format in ABNF form is provided in <a href="#section-15">Section 15</a>
   and is the normative format definition.  Note that productions may be
   duplicated within the main body of the document for reading
   convenience.  If a production in the body of the text conflicts with
   one in the normative definition, the latter rules.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Definitions"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Definitions</span>

   Media Resource
                  An entity on the speech processing server that can be
                  controlled through MRCPv2.

   MRCP Server
                  Aggregate of one or more "Media Resource" entities on
                  a server, exposed through MRCPv2.  Often, 'server' in
                  this document refers to an MRCP server.

   MRCP Client
                  An entity controlling one or more Media Resources
                  through MRCPv2 ("Client" for short).

   DTMF
                  Dual-Tone Multi-Frequency; a method of transmitting
                  key presses in-band, either as actual tones (Q.23
                  [<a href="#ref-Q.23" title='"Technical Features of Push-Button Telephone Sets"'>Q.23</a>]) or as named tone events (<a href="rfc4733.html">RFC 4733</a> [<a href="rfc4733.html" title='"RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals"'>RFC4733</a>]).

   Endpointing
                  The process of automatically detecting the beginning
                  and end of speech in an audio stream.  This is
                  critical both for speech recognition and for automated
                  recording as one would find in voice mail systems.

   Hotword Mode
                  A mode of speech recognition where a stream of
                  utterances is evaluated for match against a small set
                  of command words.  This is generally employed either
                  to trigger some action or to control the subsequent
                  grammar to be used for further recognition.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20State-Machine%20Diagrams"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  State-Machine Diagrams</span>

   The state-machine diagrams in this document do not show every
   possible method call.  Rather, they reflect the state of the resource
   based on the methods that have moved to IN-PROGRESS or COMPLETE
   states (see <a href="#section-5.3">Section 5.3</a>).  Note that since PENDING requests
   essentially have not affected the resource yet and are in the queue
   to be processed, they are not reflected in the state-machine
   diagrams.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3.%20%20URI%20Schemes"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a>.  URI Schemes</span>

   This document defines many protocol headers that contain URIs
   (Uniform Resource Identifiers [<a href="rfc3986.html" title='"Uniform Resource Identifier (URI): Generic Syntax"'>RFC3986</a>]) or lists of URIs for
   referencing media.  The entire document, including the Security
   Considerations section (<a href="#section-12">Section 12</a>), assumes that HTTP or HTTP over
   TLS (HTTPS) [<a href="rfc2818.html" title='"HTTP Over TLS"'>RFC2818</a>] will be used as the URI addressing scheme
   unless otherwise stated.  However, implementations MAY support other
   schemes (such as 'file'), provided they have addressed any security
   considerations described in this document and any others particular
   to the specific scheme.  For example, implementations where the
   client and server both reside on the same physical hardware and the
   file system is secured by traditional user-level file access controls
   could be reasonable candidates for supporting the 'file' scheme.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Architecture"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Architecture</span>

   A system using MRCPv2 consists of a client that requires the
   generation and/or consumption of media streams and a media resource
   server that has the resources or "engines" to process these streams
   as input or generate these streams as output.  The client uses SIP
   and SDP to establish an MRCPv2 control channel with the server to use
   its media processing resources.  MRCPv2 servers are addressed using
   SIP URIs.

   SIP uses SDP with the offer/answer model described in <a href="rfc3264.html">RFC 3264</a>
   [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>] to set up the MRCPv2 control channels and describe their
   characteristics.  A separate MRCPv2 session is needed to control each
   of the media processing resources associated with the SIP dialog
   between the client and server.  Within a SIP dialog, the individual
   resource control channels for the different resources are added or
   removed through SDP offer/answer carried in a SIP re-INVITE
   transaction.

   The server, through the SDP exchange, provides the client with a
   difficult-to-guess, unambiguous channel identifier and a TCP port
   number (see <a href="#section-4.2">Section 4.2</a>).  The client MAY then open a new TCP
   connection with the server on this port number.  Multiple MRCPv2
   channels can share a TCP connection between the client and the
   server.  All MRCPv2 messages exchanged between the client and the
   server carry the specified channel identifier that the server MUST
   ensure is unambiguous among all MRCPv2 control channels that are
   active on that server.  The client uses this channel identifier to
   indicate the media processing resource associated with that channel.
   For information on message framing, see <a href="#section-5">Section 5</a>.

   SIP also establishes the media sessions between the client (or other
   source/sink of media) and the MRCPv2 server using SDP "m=" lines.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   One or more media processing resources may share a media session
   under a SIP session, or each media processing resource may have its
   own media session.

   The following diagram shows the general architecture of a system that
   uses MRCPv2.  To simplify the diagram, only a few resources are
   shown.

     MRCPv2 client                   MRCPv2 Media Resource Server
|--------------------|            |------------------------------------|
||------------------||            ||----------------------------------||
|| Application Layer||            ||Synthesis|Recognition|Verification||
||------------------||            || Engine  |  Engine   |   Engine   ||
||Media Resource API||            ||    ||   |    ||     |    ||      ||
||------------------||            ||Synthesis|Recognizer |  Verifier  ||
|| SIP  |  MRCPv2   ||            ||Resource | Resource  |  Resource  ||
||Stack |           ||            ||     Media Resource Management    ||
||      |           ||            ||----------------------------------||
||------------------||            ||   SIP  |        MRCPv2           ||
||   TCP/IP Stack   ||---MRCPv2---||  Stack |                         ||
||                  ||            ||----------------------------------||
||------------------||----SIP-----||           TCP/IP Stack           ||
|--------------------|            ||                                  ||
         |                        ||----------------------------------||
        SIP                       |------------------------------------|
         |                          /
|-------------------|             RTP
|                   |             /
| Media Source/Sink |------------/
|                   |
|-------------------|

                      Figure 1: Architectural Diagram

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20MRCPv2%20Media%20Resource%20Types"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  MRCPv2 Media Resource Types</span>

   An MRCPv2 server may offer one or more of the following media
   processing resources to its clients.

   Basic Synthesizer
                  A speech synthesizer resource that has very limited
                  capabilities and can generate its media stream
                  exclusively from concatenated audio clips.  The speech
                  data is described using a limited subset of the Speech
                  Synthesis Markup Language (SSML)
                  [<a href="#ref-W3C.REC-speech-synthesis-20040907">W3C.REC-speech-synthesis-20040907</a>] elements.  A basic
                  synthesizer MUST support the SSML tags &lt;speak&gt;,
                  &lt;audio&gt;, &lt;say-as&gt;, and &lt;mark&gt;.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Speech Synthesizer
                  A full-capability speech synthesis resource that can
                  render speech from text.  Such a synthesizer MUST have
                  full SSML [<a href="#ref-W3C.REC-speech-synthesis-20040907">W3C.REC-speech-synthesis-20040907</a>] support.

   Recorder
                  A resource capable of recording audio and providing a
                  URI pointer to the recording.  A recorder MUST provide
                  endpointing capabilities for suppressing silence at
                  the beginning and end of a recording, and MAY also
                  suppress silence in the middle of a recording.  If
                  such suppression is done, the recorder MUST maintain
                  timing metadata to indicate the actual timestamps of
                  the recorded media.

   DTMF Recognizer
                  A recognizer resource capable of extracting and
                  interpreting Dual-Tone Multi-Frequency (DTMF) [<a href="#ref-Q.23" title='"Technical Features of Push-Button Telephone Sets"'>Q.23</a>]
                  digits in a media stream and matching them against a
                  supplied digit grammar.  It could also do a semantic
                  interpretation based on semantic tags in the grammar.

   Speech Recognizer
                  A full speech recognition resource that is capable of
                  receiving a media stream containing audio and
                  interpreting it to recognition results.  It also has a
                  natural language semantic interpreter to post-process
                  the recognized data according to the semantic data in
                  the grammar and provide semantic results along with
                  the recognized input.  The recognizer MAY also support
                  enrolled grammars, where the client can enroll and
                  create new personal grammars for use in future
                  recognition operations.

   Speaker Verifier
                  A resource capable of verifying the authenticity of a
                  claimed identity by matching a media stream containing
                  spoken input to a pre-existing voiceprint.  This may
                  also involve matching the caller's voice against more
                  than one voiceprint, also called multi-verification or
                  speaker identification.










<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Server%20and%20Resource%20Addressing"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Server and Resource Addressing</span>

   The MRCPv2 server is a generic SIP server, and is thus addressed by a
   SIP URI (<a href="rfc3261.html">RFC 3261</a> [<a href="rfc3261.html" title='"SIP: Session Initiation Protocol"'>RFC3261</a>]).

   For example:

        sip:mrcpv2@example.net   or
        sips:mrcpv2@example.net

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20MRCPv2%20Basics"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  MRCPv2 Basics</span>

   MRCPv2 requires a connection-oriented transport-layer protocol such
   as TCP to guarantee reliable sequencing and delivery of MRCPv2
   control messages between the client and the server.  In order to meet
   the requirements for security enumerated in SPEECHSC requirements
   [<a href="rfc4313.html" title='"Requirements for Distributed Control of Automatic Speech Recognition (ASR), Speaker Identification/Speaker Verification (SI/SV), and Text-to- Speech (TTS) Resources"'>RFC4313</a>], clients and servers MUST implement TLS as well.  One or
   more connections between the client and the server can be shared
   among different MRCPv2 channels to the server.  The individual
   messages carry the channel identifier to differentiate messages on
   different channels.  MRCPv2 encoding is text based with mechanisms to
   carry embedded binary data.  This allows arbitrary data like
   recognition grammars, recognition results, synthesizer speech markup,
   etc., to be carried in MRCPv2 messages.  For information on message
   framing, see <a href="#section-5">Section 5</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Connecting%20to%20the%20Server"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Connecting to the Server</span>

   MRCPv2 employs SIP, in conjunction with SDP, as the session
   establishment and management protocol.  The client reaches an MRCPv2
   server using conventional INVITE and other SIP requests for
   establishing, maintaining, and terminating SIP dialogs.  The SDP
   offer/answer exchange model over SIP is used to establish a resource
   control channel for each resource.  The SDP offer/answer exchange is
   also used to establish media sessions between the server and the
   source or sink of audio.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Managing%20Resource%20Control%20Channels"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Managing Resource Control Channels</span>

   The client needs a separate MRCPv2 resource control channel to
   control each media processing resource under the SIP dialog.  A
   unique channel identifier string identifies these resource control
   channels.  The channel identifier is a difficult-to-guess,
   unambiguous string followed by an "@", then by a string token
   specifying the type of resource.  The server generates the channel
   identifier and MUST make sure it does not clash with the identifier
   of any other MRCP channel currently allocated by that server.  MRCPv2
   defines the following IANA-registered types of media processing



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   resources.  Additional resource types and their associated methods/
   events and state machines may be added as described below in
   <a href="#section-13">Section 13</a>.

          +---------------+----------------------+--------------+
          | Resource Type | Resource Description | Described in |
          +---------------+----------------------+--------------+
          | speechrecog   | Speech Recognizer    | <a href="#section-9">Section 9</a>    |
          | dtmfrecog     | DTMF Recognizer      | <a href="#section-9">Section 9</a>    |
          | speechsynth   | Speech Synthesizer   | <a href="#section-8">Section 8</a>    |
          | basicsynth    | Basic Synthesizer    | <a href="#section-8">Section 8</a>    |
          | speakverify   | Speaker Verification | <a href="#section-11">Section 11</a>   |
          | recorder      | Speech Recorder      | <a href="#section-10">Section 10</a>   |
          +---------------+----------------------+--------------+

                          Table 1: Resource Types

   The SIP INVITE or re-INVITE transaction and the SDP offer/answer
   exchange it carries contain "m=" lines describing the resource
   control channel to be allocated.  There MUST be one SDP "m=" line for
   each MRCPv2 resource to be used in the session.  This "m=" line MUST
   have a media type field of "application" and a transport type field
   of either "TCP/MRCPv2" or "TCP/TLS/MRCPv2".  The port number field of
   the "m=" line MUST contain the "discard" port of the transport
   protocol (port 9 for TCP) in the SDP offer from the client and MUST
   contain the TCP listen port on the server in the SDP answer.  The
   client may then either set up a TCP or TLS connection to that server
   port or share an already established connection to that port.  Since
   MRCPv2 allows multiple sessions to share the same TCP connection,
   multiple "m=" lines in a single SDP document MAY share the same port
   field value; MRCPv2 servers MUST NOT assume any relationship between
   resources using the same port other than the sharing of the
   communication channel.

   MRCPv2 resources do not use the port or format field of the "m=" line
   to distinguish themselves from other resources using the same
   channel.  The client MUST specify the resource type identifier in the
   resource attribute associated with the control "m=" line of the SDP
   offer.  The server MUST respond with the full Channel-Identifier
   (which includes the resource type identifier and a difficult-to-
   guess, unambiguous string) in the "channel" attribute associated with
   the control "m=" line of the SDP answer.  To remain backwards
   compatible with conventional SDP usage, the format field of the "m="
   line MUST have the arbitrarily selected value of "1".

   When the client wants to add a media processing resource to the
   session, it issues a new SDP offer, according to the procedures of
   <a href="rfc3264.html">RFC 3264</a> [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>], in a SIP re-INVITE request.  The SDP offer/answer



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   exchange carried by this SIP transaction contains one or more
   additional control "m=" lines for the new resources to be allocated
   to the session.  The server, on seeing the new "m=" line, allocates
   the resources (if they are available) and responds with a
   corresponding control "m=" line in the SDP answer carried in the SIP
   response.  If the new resources are not available, the re-INVITE
   receives an error message, and existing media processing going on
   before the re-INVITE will continue as it was before.  It is not
   possible to allocate more than one resource of each type.  If a
   client requests more than one resource of any type, the server MUST
   behave as if the resources of that type (beyond the first one) are
   not available.

   MRCPv2 clients and servers using TCP as a transport protocol MUST use
   the procedures specified in <a href="rfc4145.html">RFC 4145</a> [<a href="rfc4145.html" title='"TCP-Based Media Transport in the Session Description Protocol (SDP)"'>RFC4145</a>] for setting up the TCP
   connection, with the considerations described hereby.  Similarly,
   MRCPv2 clients and servers using TCP/TLS as a transport protocol MUST
   use the procedures specified in <a href="rfc4572.html">RFC 4572</a> [<a href="rfc4572.html" title='"Connection-Oriented Media Transport over the Transport Layer Security (TLS) Protocol in the Session Description Protocol (SDP)"'>RFC4572</a>] for setting up the
   TLS connection, with the considerations described hereby.  The
   a=setup attribute, as described in <a href="rfc4145.html">RFC 4145</a> [<a href="rfc4145.html" title='"TCP-Based Media Transport in the Session Description Protocol (SDP)"'>RFC4145</a>], MUST be
   "active" for the offer from the client and MUST be "passive" for the
   answer from the MRCPv2 server.  The a=connection attribute MUST have
   a value of "new" on the very first control "m=" line offer from the
   client to an MRCPv2 server.  Subsequent control "m=" line offers from
   the client to the MRCP server MAY contain "new" or "existing",
   depending on whether the client wants to set up a new connection or
   share an existing connection, respectively.  If the client specifies
   a value of "new", the server MUST respond with a value of "new".  If
   the client specifies a value of "existing", the server MUST respond.
   The legal values in the response are "existing" if the server prefers
   to share an existing connection or "new" if not.  In the latter case,
   the client MUST initiate a new transport connection.

   When the client wants to deallocate the resource from this session,
   it issues a new SDP offer, according to <a href="rfc3264.html">RFC 3264</a> [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>], where the
   control "m=" line port MUST be set to 0.  This SDP offer is sent in a
   SIP re-INVITE request.  This deallocates the associated MRCPv2
   identifier and resource.  The server MUST NOT close the TCP or TLS
   connection if it is currently being shared among multiple MRCP
   channels.  When all MRCP channels that may be sharing the connection
   are released and/or the associated SIP dialog is terminated, the
   client or server terminates the connection.

   When the client wants to tear down the whole session and all its
   resources, it MUST issue a SIP BYE request to close the SIP session.
   This will deallocate all the control channels and resources allocated
   under the session.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   All servers MUST support TLS.  Servers MAY use TCP without TLS in
   controlled environments (e.g., not in the public Internet) where both
   nodes are inside a protected perimeter, for example, preventing
   access to the MRCP server from remote nodes outside the controlled
   perimeter.  It is up to the client, through the SDP offer, to choose
   which transport it wants to use for an MRCPv2 session.  Aside from
   the exceptions given above, when using TCP, the "m=" lines MUST
   conform to <a href="rfc4145.html">RFC4145</a> [<a href="rfc4145.html" title='"TCP-Based Media Transport in the Session Description Protocol (SDP)"'>RFC4145</a>], which describes the usage of SDP for
   connection-oriented transport.  When using TLS, the SDP "m=" line for
   the control stream MUST conform to Connection-Oriented Media
   (COMEDIA) over TLS [<a href="rfc4572.html" title='"Connection-Oriented Media Transport over the Transport Layer Security (TLS) Protocol in the Session Description Protocol (SDP)"'>RFC4572</a>], which specifies the usage of SDP for
   establishing a secure connection-oriented transport over TLS.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20SIP%20Session%20Example"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  SIP Session Example</span>

   This first example shows the power of using SIP to route to the
   appropriate resource.  In the example, note the use of a request to a
   domain's speech server service in the INVITE to
   mresources@example.com.  The SIP routing machinery in the domain
   locates the actual server, mresources@server.example.com, which gets
   returned in the 200 OK.  Note that "cmid" is defined in <a href="#section-4.4">Section 4.4</a>.

   This example exchange adds a resource control channel for a
   synthesizer.  Since a synthesizer also generates an audio stream,
   this interaction also creates a receive-only Real-Time Protocol (RTP)
   [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] media session for the server to send audio to.  The SIP
   dialog with the media source/sink is independent of MRCP and is not
   shown.

   C-&gt;S:  INVITE sip:mresources@example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf1
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314161 INVITE
          Contact:&lt;sip:sarvi@client.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=sarvi 2890844526 2890844526 IN IP4 192.0.2.12
          s=-
          c=IN IP4 192.0.2.12
          t=0 0
          m=application 9 TCP/MRCPv2 1
          a=setup:active



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


          a=connection:new
          a=resource:speechsynth
          a=cmid:1
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 pcmu/8000
          a=recvonly
          a=mid:1


   S-&gt;C:  SIP/2.0 200 OK
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf1;received=192.0.32.10
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314161 INVITE
          Contact:&lt;sip:mresources@server.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=- 2890842808 2890842808 IN IP4 192.0.2.11
          s=-
          c=IN IP4 192.0.2.11
          t=0 0
          m=application 32416 TCP/MRCPv2 1
          a=setup:passive
          a=connection:new
          a=channel:32AECB234338@speechsynth
          a=cmid:1
          m=audio 48260 RTP/AVP 0
          a=rtpmap:0 pcmu/8000
          a=sendonly
          a=mid:1


   C-&gt;S:  ACK sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf2
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314161 ACK
          Content-Length:0

                 Example: Add Synthesizer Control Channel




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   This example exchange continues from the previous figure and
   allocates an additional resource control channel for a recognizer.
   Since a recognizer would need to receive an audio stream for
   recognition, this interaction also updates the audio stream to
   sendrecv, making it a two-way RTP media session.

   C-&gt;S:  INVITE sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf3
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314162 INVITE
          Contact:&lt;sip:sarvi@client.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=sarvi 2890844526 2890844527 IN IP4 192.0.2.12
          s=-
          c=IN IP4 192.0.2.12
          t=0 0
          m=application 9 TCP/MRCPv2 1
          a=setup:active
          a=connection:existing
          a=resource:speechsynth
          a=cmid:1
          m=audio 49170 RTP/AVP 0 96
          a=rtpmap:0 pcmu/8000
          a=rtpmap:96 telephone-event/8000
          a=fmtp:96 0-15
          a=sendrecv
          a=mid:1
          m=application 9 TCP/MRCPv2 1
          a=setup:active
          a=connection:existing
          a=resource:speechrecog
          a=cmid:1


   S-&gt;C:  SIP/2.0 200 OK
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf3;received=192.0.32.10
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314162 INVITE



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


          Contact:&lt;sip:mresources@server.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=- 2890842808 2890842809 IN IP4 192.0.2.11
          s=-
          c=IN IP4 192.0.2.11
          t=0 0
          m=application 32416 TCP/MRCPv2 1
          a=setup:passive
          a=connection:existing
          a=channel:32AECB234338@speechsynth
          a=cmid:1
          m=audio 48260 RTP/AVP 0 96
          a=rtpmap:0 pcmu/8000
          a=rtpmap:96 telephone-event/8000
          a=fmtp:96 0-15
          a=sendrecv
          a=mid:1
          m=application 32416 TCP/MRCPv2 1
          a=setup:passive
          a=connection:existing
          a=channel:32AECB234338@speechrecog
          a=cmid:1


   C-&gt;S:  ACK sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf4
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314162 ACK
          Content-Length:0

                          Example: Add Recognizer

   This example exchange continues from the previous figure and
   deallocates the recognizer channel.  Since a recognizer no longer
   needs to receive an audio stream, this interaction also updates the
   RTP media session to recvonly.

   C-&gt;S:  INVITE sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf5
          Max-Forwards:6



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314163 INVITE
          Contact:&lt;sip:sarvi@client.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=sarvi 2890844526 2890844528 IN IP4 192.0.2.12
          s=-
          c=IN IP4 192.0.2.12
          t=0 0
          m=application 9 TCP/MRCPv2 1
          a=resource:speechsynth
          a=cmid:1
          m=audio 49170 RTP/AVP 0
          a=rtpmap:0 pcmu/8000
          a=recvonly
          a=mid:1
          m=application 0 TCP/MRCPv2 1
          a=resource:speechrecog
          a=cmid:1


   S-&gt;C:  SIP/2.0 200 OK
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf5;received=192.0.32.10
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314163 INVITE
          Contact:&lt;sip:mresources@server.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=- 2890842808 2890842810 IN IP4 192.0.2.11
          s=-
          c=IN IP4 192.0.2.11
          t=0 0
          m=application 32416 TCP/MRCPv2 1
          a=channel:32AECB234338@speechsynth
          a=cmid:1
          m=audio 48260 RTP/AVP 0
          a=rtpmap:0 pcmu/8000
          a=sendonly
          a=mid:1



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


          m=application 0 TCP/MRCPv2 1
          a=channel:32AECB234338@speechrecog
          a=cmid:1

   C-&gt;S:  ACK sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bf6
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:314163 ACK
          Content-Length:0

                      Example: Deallocate Recognizer

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Media%20Streams%20and%20RTP%20Ports"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Media Streams and RTP Ports</span>

   Since MRCPv2 resources either generate or consume media streams, the
   client or the server needs to associate media sessions with their
   corresponding resource or resources.  More than one resource could be
   associated with a single media session or each resource could be
   assigned a separate media session.  Also, note that more than one
   media session can be associated with a single resource if need be,
   but this scenario is not useful for the current set of resources.
   For example, a synthesizer and a recognizer could be associated to
   the same media session (m=audio line), if it is opened in "sendrecv"
   mode.  Alternatively, the recognizer could have its own "sendonly"
   audio session, and the synthesizer could have its own "recvonly"
   audio session.

   The association between control channels and their corresponding
   media sessions is established using a new "resource channel media
   identifier" media-level attribute ("cmid").  Valid values of this
   attribute are the values of the "mid" attribute defined in <a href="rfc5888.html">RFC 5888</a>
   [<a href="rfc5888.html" title='"The Session Description Protocol (SDP) Grouping Framework"'>RFC5888</a>].  If there is more than one audio "m=" line, then each
   audio "m=" line MUST have a "mid" attribute.  Each control "m=" line
   MAY have one or more "cmid" attributes that match the resource
   control channel to the "mid" attributes of the audio "m=" lines it is
   associated with.  Note that if a control "m=" line does not have a
   "cmid" attribute it will not be associated with any media.  The
   operations on such a resource will hence be limited.  For example, if
   it was a recognizer resource, the RECOGNIZE method requires an
   associated media to process while the INTERPRET method does not.  The
   formatting of the "cmid" attribute is described by the following
   ABNF:





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   cmid-attribute     = "a=cmid:" identification-tag
   identification-tag = token

   To allow this flexible mapping of media sessions to MRCPv2 control
   channels, a single audio "m=" line can be associated with multiple
   resources, or each resource can have its own audio "m=" line.  For
   example, if the client wants to allocate a recognizer and a
   synthesizer and associate them with a single two-way audio stream,
   the SDP offer would contain two control "m=" lines and a single audio
   "m=" line with an attribute of "sendrecv".  Each of the control "m="
   lines would have a "cmid" attribute whose value matches the "mid" of
   the audio "m=" line.  If, on the other hand, the client wants to
   allocate a recognizer and a synthesizer each with its own separate
   audio stream, the SDP offer would carry two control "m=" lines (one
   for the recognizer and another for the synthesizer) and two audio
   "m=" lines (one with the attribute "sendonly" and another with
   attribute "recvonly").  The "cmid" attribute of the recognizer
   control "m=" line would match the "mid" value of the "sendonly" audio
   "m=" line, and the "cmid" attribute of the synthesizer control "m="
   line would match the "mid" attribute of the "recvonly" "m=" line.

   When a server receives media (e.g., audio) on a media session that is
   associated with more than one media processing resource, it is the
   responsibility of the server to receive and fork the media to the
   resources that need to consume it.  If multiple resources in an
   MRCPv2 session are generating audio (or other media) to be sent on a
   single associated media session, it is the responsibility of the
   server either to multiplex the multiple streams onto the single RTP
   session or to contain an embedded RTP mixer (see <a href="rfc3550.html">RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>])
   to combine the multiple streams into one.  In the former case, the
   media stream will contain RTP packets generated by different sources,
   and hence the packets will have different Synchronization Source
   Identifiers (SSRCs).  In the latter case, the RTP packets will
   contain multiple Contributing Source Identifiers (CSRCs)
   corresponding to the original streams before being combined by the
   mixer.  If an MRCPv2 server implementation neither multiplexes nor
   mixes, it MUST disallow the client from associating multiple such
   resources to a single audio stream by rejecting the SDP offer with a
   SIP 488 "Not Acceptable" error.  Note that there is a large installed
   base that will return a SIP 501 "Not Implemented" error in this case.
   To facilitate interoperability with this installed base, new
   implementations SHOULD treat a 501 in this context as a 488 when it
   is received from an element known to be a legacy implementation.








<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20MRCPv2%20Message%20Transport"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  MRCPv2 Message Transport</span>

   The MRCPv2 messages defined in this document are transported over a
   TCP or TLS connection between the client and the server.  The method
   for setting up this transport connection and the resource control
   channel is discussed in Sections <a href="#section-4.1">4.1</a> and <a href="#section-4.2">4.2</a>.  Multiple resource
   control channels between a client and a server that belong to
   different SIP dialogs can share one or more TLS or TCP connections
   between them; the server and client MUST support this mode of
   operation.  Clients and servers MUST use the MRCPv2 channel
   identifier, carried in the Channel-Identifier header field in
   individual MRCPv2 messages, to differentiate MRCPv2 messages from
   different resource channels (see <a href="#section-6.2.1">Section 6.2.1</a> for details).  All
   MRCPv2 servers MUST support TLS.  Servers MAY use TCP without TLS in
   controlled environments (e.g., not in the public Internet) where both
   nodes are inside a protected perimeter, for example, preventing
   access to the MRCP server from remote nodes outside the controlled
   perimeter.  It is up to the client to choose which mode of transport
   it wants to use for an MRCPv2 session.

   Most examples from here on show only the MRCPv2 messages and do not
   show the SIP messages that may have been used to establish the MRCPv2
   control channel.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6.%20%20MRCPv2%20Session%20Termination"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a>.  MRCPv2 Session Termination</span>

   If an MRCP client notices that the underlying connection has been
   closed for one of its MRCP channels, and it has not previously
   initiated a re-INVITE to close that channel, it MUST send a BYE to
   close down the SIP dialog and all other MRCP channels.  If an MRCP
   server notices that the underlying connection has been closed for one
   of its MRCP channels, and it has not previously received and accepted
   a re-INVITE closing that channel, then it MUST send a BYE to close
   down the SIP dialog and all other MRCP channels.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20MRCPv2%20Specification"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  MRCPv2 Specification</span>

   Except as otherwise indicated, MRCPv2 messages are Unicode encoded in
   UTF-8 (<a href="rfc3629.html">RFC 3629</a> [<a href="rfc3629.html" title='"UTF-8, a transformation format of ISO 10646"'>RFC3629</a>]) to allow many different languages to be
   represented.  DEFINE-GRAMMAR (<a href="#section-9.8">Section 9.8</a>), for example, is one such
   exception, since its body can contain arbitrary XML in arbitrary (but
   specified via XML) encodings.  MRCPv2 also allows message bodies to
   be represented in other character sets (for example, ISO 8859-1
   [<a href="#ref-ISO.8859-1.1987">ISO.8859-1.1987</a>]) because, in some locales, other character sets are
   already in widespread use.  The MRCPv2 headers (the first line of an
   MRCP message) and header field names use only the US-ASCII subset of
   UTF-8.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Lines are terminated by CRLF (carriage return, then line feed).
   Also, some parameters in the message may contain binary data or a
   record spanning multiple lines.  Such fields have a length value
   associated with the parameter, which indicates the number of octets
   immediately following the parameter.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Common%20Protocol%20Elements"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Common Protocol Elements</span>

   The MRCPv2 message set consists of requests from the client to the
   server, responses from the server to the client, and asynchronous
   events from the server to the client.  All these messages consist of
   a start-line, one or more header fields, an empty line (i.e., a line
   with nothing preceding the CRLF) indicating the end of the header
   fields, and an optional message body.

generic-message  =    start-line
                      message-header
                      CRLF
                      [ message-body ]

message-body     =    *OCTET

start-line       =    request-line / response-line / event-line

message-header   =  1*(generic-header / resource-header / generic-field)

resource-header  =    synthesizer-header
                 /    recognizer-header
                 /    recorder-header
                 /    verifier-header

   The message-body contains resource-specific and message-specific
   data.  The actual media types used to carry the data are specified in
   the sections defining the individual messages.  Generic header fields
   are described in <a href="#section-6.2">Section 6.2</a>.

   If a message contains a message body, the message MUST contain
   content-headers indicating the media type and encoding of the data in
   the message body.

   Request, response and event messages (described in following
   sections) include the version of MRCP that the message conforms to.
   Version compatibility rules follow [H3.1] regarding version ordering,
   compliance requirements, and upgrading of version numbers.  The
   version information is indicated by "MRCP" (as opposed to "HTTP" in
   [H3.1]) or "MRCP/2.0" (as opposed to "HTTP/1.1" in [H3.1]).  To be
   compliant with this specification, clients and servers sending MRCPv2




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   messages MUST indicate an mrcp-version of "MRCP/2.0".  ABNF
   productions using mrcp-version can be found in Sections <a href="#section-5.2">5.2</a>, <a href="#section-5.3">5.3</a>, and
   5.5.

   mrcp-version   =    "MRCP" "/" 1*2DIGIT "." 1*2DIGIT

   The message-length field specifies the length of the message in
   octets, including the start-line, and MUST be the second token from
   the beginning of the message.  This is to make the framing and
   parsing of the message simpler to do.  This field specifies the
   length of the message including data that may be encoded into the
   body of the message.  Note that this value MAY be given as a fixed-
   length integer that is zero-padded (with leading zeros) in order to
   eliminate or reduce inefficiency in cases where the message-length
   value would change as a result of the length of the message-length
   token itself.  This value, as with all lengths in MRCP, is to be
   interpreted as a base-10 number.  In particular, leading zeros do not
   indicate that the value is to be interpreted as a base-8 number.

   message-length =    1*19DIGIT

   The following sample MRCP exchange demonstrates proper message-length
   values.  The values for message-length have been removed from all
   other examples in the specification and replaced by '...' to reduce
   confusion in the case of minor message-length computation errors in
   those examples.

   C-&gt;S:   MRCP/2.0 877 INTERPRET 543266
           Channel-Identifier:32AECB23433801@speechrecog
           Interpret-Text:may I speak to Andre Roy
           Content-Type:application/srgs+xml
           Content-ID:&lt;request1@form-level.store&gt;
           Content-Length:661

           &lt;?xml version="1.0"?&gt;
           &lt;!-- the default grammar language is US English --&gt;
           &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
                    xml:lang="en-US" version="1.0" root="request"&gt;
           &lt;!-- single language attachment to tokens --&gt;
               &lt;rule id="yes"&gt;
                   &lt;one-of&gt;
                       &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                       &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
                   &lt;/one-of&gt;
               &lt;/rule&gt;






<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


           &lt;!-- single language attachment to a rule expansion --&gt;
               &lt;rule id="request"&gt;
                   may I speak to
                   &lt;one-of xml:lang="fr-CA"&gt;
                       &lt;item&gt;Michel Tremblay&lt;/item&gt;
                       &lt;item&gt;Andre Roy&lt;/item&gt;
                   &lt;/one-of&gt;
               &lt;/rule&gt;
           &lt;/grammar&gt;

   S-&gt;C:   MRCP/2.0 82 543266 200 IN-PROGRESS
           Channel-Identifier:32AECB23433801@speechrecog

   S-&gt;C:   MRCP/2.0 634 INTERPRETATION-COMPLETE 543266 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog
           Completion-Cause:000 success
           Content-Type:application/nlsml+xml
           Content-Length:441

           &lt;?xml version="1.0"?&gt;
           &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                   xmlns:ex="http://www.example.com/example"
                   grammar="session:request1@form-level.store"&gt;
               &lt;interpretation&gt;
                   &lt;instance name="Person"&gt;
                       &lt;ex:Person&gt;
                           &lt;ex:Name&gt; Andre Roy &lt;/ex:Name&gt;
                       &lt;/ex:Person&gt;
                   &lt;/instance&gt;
                   &lt;input&gt;   may I speak to Andre Roy &lt;/input&gt;
               &lt;/interpretation&gt;
           &lt;/result&gt;

   All MRCPv2 messages, responses and events MUST carry the Channel-
   Identifier header field so the server or client can differentiate
   messages from different control channels that may share the same
   transport connection.

   In the resource-specific header field descriptions in Sections <a href="#section-8">8</a>-<a href="#section-11">11</a>,
   a header field is disallowed on a method (request, response, or
   event) for that resource unless specifically listed as being allowed.
   Also, the phrasing "This header field MAY occur on method X"
   indicates that the header field is allowed on that method but is not
   required to be used in every instance of that method.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Request"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Request</span>

   An MRCPv2 request consists of a Request line followed by the message
   header section and an optional message body containing data specific
   to the request message.

   The Request message from a client to the server includes within the
   first line the method to be applied, a method tag for that request
   and the version of the protocol in use.

   request-line   =    mrcp-version SP message-length SP method-name
                       SP request-id CRLF

   The mrcp-version field is the MRCP protocol version that is being
   used by the client.

   The message-length field specifies the length of the message,
   including the start-line.

   Details about the mrcp-version and message-length fields are given in
   <a href="#section-5.1">Section 5.1</a>.

   The method-name field identifies the specific request that the client
   is making to the server.  Each resource supports a subset of the
   MRCPv2 methods.  The subset for each resource is defined in the
   section of the specification for the corresponding resource.

   method-name    =    generic-method
                  /    synthesizer-method
                  /    recognizer-method
                  /    recorder-method
                  /    verifier-method

   The request-id field is a unique identifier representable as an
   unsigned 32-bit integer created by the client and sent to the server.
   Clients MUST utilize monotonically increasing request-ids for
   consecutive requests within an MRCP session.  The request-id space is
   linear (i.e., not mod(32)), so the space does not wrap, and validity
   can be checked with a simple unsigned comparison operation.  The
   client may choose any initial value for its first request, but a
   small integer is RECOMMENDED to avoid exhausting the space in long
   sessions.  If the server receives duplicate or out-of-order requests,
   the server MUST reject the request with a response code of 410.
   Since request-ids are scoped to the MRCP session, they are unique
   across all TCP connections and all resource channels in the session.

   The server resource MUST use the client-assigned identifier in its
   response to the request.  If the request does not complete



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   synchronously, future asynchronous events associated with this
   request MUST carry the client-assigned request-id.

   request-id     =    1*10DIGIT

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Response"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Response</span>

   After receiving and interpreting the request message for a method,
   the server resource responds with an MRCPv2 response message.  The
   response consists of a response line followed by the message header
   section and an optional message body containing data specific to the
   method.

   response-line  =    mrcp-version SP message-length SP request-id
                       SP status-code SP request-state CRLF

   The mrcp-version field MUST contain the version of the request if
   supported; otherwise, it MUST contain the highest version of MRCP
   supported by the server.

   The message-length field specifies the length of the message,
   including the start-line.

   Details about the mrcp-version and message-length fields are given in
   <a href="#section-5.1">Section 5.1</a>.

   The request-id used in the response MUST match the one sent in the
   corresponding request message.

   The status-code field is a 3-digit code representing the success or
   failure or other status of the request.

   status-code     =    3DIGIT

   The request-state field indicates if the action initiated by the
   Request is PENDING, IN-PROGRESS, or COMPLETE.  The COMPLETE status
   means that the request was processed to completion and that there
   will be no more events or other messages from that resource to the
   client with that request-id.  The PENDING status means that the
   request has been placed in a queue and will be processed in first-in-
   first-out order.  The IN-PROGRESS status means that the request is
   being processed and is not yet complete.  A PENDING or IN-PROGRESS
   status indicates that further Event messages may be delivered with
   that request-id.

   request-state    =  "COMPLETE"
                    /  "IN-PROGRESS"
                    /  "PENDING"



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Status%20Codes"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Status Codes</span>

   The status codes are classified under the Success (2xx), Client
   Failure (4xx), and Server Failure (5xx) codes.

     +------------+--------------------------------------------------+
     | Code       | Meaning                                          |
     +------------+--------------------------------------------------+
     | 200        | Success                                          |
     | 201        | Success with some optional header fields ignored |
     +------------+--------------------------------------------------+

                               Success (2xx)

   +--------+----------------------------------------------------------+
   | Code   | Meaning                                                  |
   +--------+----------------------------------------------------------+
   | 401    | Method not allowed                                       |
   | 402    | Method not valid in this state                           |
   | 403    | Unsupported header field                                 |
   | 404    | Illegal value for header field. This is the error for a  |
   |        | syntax violation.                                        |
   | 405    | Resource not allocated for this session or does not      |
   |        | exist                                                    |
   | 406    | Mandatory Header Field Missing                           |
   | 407    | Method or Operation Failed (e.g., Grammar compilation    |
   |        | failed in the recognizer. Detailed cause codes might be  |
   |        | available through a resource-specific header.)           |
   | 408    | Unrecognized or unsupported message entity               |
   | 409    | Unsupported Header Field Value. This is a value that is  |
   |        | syntactically legal but exceeds the implementation's     |
   |        | capabilities or expectations.                            |
   | 410    | Non-Monotonic or Out-of-order sequence number in request.|
   | 411-420| Reserved for future assignment                           |
   +--------+----------------------------------------------------------+

                           Client Failure (4xx)

              +------------+--------------------------------+
              | Code       | Meaning                        |
              +------------+--------------------------------+
              | 501        | Server Internal Error          |
              | 502        | Protocol Version not supported |
              | 503        | Reserved for future assignment |
              | 504        | Message too large              |
              +------------+--------------------------------+

                           Server Failure (5xx)



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20Events"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  Events</span>

   The server resource may need to communicate a change in state or the
   occurrence of a certain event to the client.  These messages are used
   when a request does not complete immediately and the response returns
   a status of PENDING or IN-PROGRESS.  The intermediate results and
   events of the request are indicated to the client through the event
   message from the server.  The event message consists of an event
   header line followed by the message header section and an optional
   message body containing data specific to the event message.  The
   header line has the request-id of the corresponding request and
   status value.  The request-state value is COMPLETE if the request is
   done and this was the last event, else it is IN-PROGRESS.

   event-line       =  mrcp-version SP message-length SP event-name
                       SP request-id SP request-state CRLF

   The mrcp-version used here is identical to the one used in the
   Request/Response line and indicates the highest version of MRCP
   running on the server.

   The message-length field specifies the length of the message,
   including the start-line.

   Details about the mrcp-version and message-length fields are given in
   <a href="#section-5.1">Section 5.1</a>.

   The event-name identifies the nature of the event generated by the
   media resource.  The set of valid event names depends on the resource
   generating it.  See the corresponding resource-specific section of
   the document.

   event-name       =  synthesizer-event
                    /  recognizer-event
                    /  recorder-event
                    /  verifier-event

   The request-id used in the event MUST match the one sent in the
   request that caused this event.

   The request-state indicates whether the Request/Command causing this
   event is complete or still in progress and whether it is the same as
   the one mentioned in <a href="#section-5.3">Section 5.3</a>.  The final event for a request has
   a COMPLETE status indicating the completion of the request.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20MRCPv2%20Generic%20Methods%2C%20Headers%2C%20and%20Result%20Structure"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  MRCPv2 Generic Methods, Headers, and Result Structure</span>

   MRCPv2 supports a set of methods and header fields that are common to
   all resources.  These are discussed here; resource-specific methods
   and header fields are discussed in the corresponding resource-
   specific section of the document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Generic%20Methods"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Generic Methods</span>

   MRCPv2 supports two generic methods for reading and writing the state
   associated with a resource.

   generic-method      =    "SET-PARAMS"
                       /    "GET-PARAMS"

   These are described in the following subsections.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.1.%20%20SET-PARAMS"></a><a class="selflink" href="#section-6.1.1" name="section-6.1.1">6.1.1</a>.  SET-PARAMS</span>

   The SET-PARAMS method, from the client to the server, tells the
   MRCPv2 resource to define parameters for the session, such as voice
   characteristics and prosody on synthesizers, recognition timers on
   recognizers, etc.  If the server accepts and sets all parameters, it
   MUST return a response status-code of 200.  If it chooses to ignore
   some optional header fields that can be safely ignored without
   affecting operation of the server, it MUST return 201.

   If one or more of the header fields being sent is incorrect, error
   403, 404, or 409 MUST be returned as follows:

   o  If one or more of the header fields being set has an illegal
      value, the server MUST reject the request with a 404 Illegal Value
      for Header Field.

   o  If one or more of the header fields being set is unsupported for
      the resource, the server MUST reject the request with a 403
      Unsupported Header Field, except as described in the next
      paragraph.

   o  If one or more of the header fields being set has an unsupported
      value, the server MUST reject the request with a 409 Unsupported
      Header Field Value, except as described in the next paragraph.

   If both error 404 and another error have occurred, only error 404
   MUST be returned.  If both errors 403 and 409 have occurred, but not
   error 404, only error 403 MUST be returned.





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   If error 403, 404, or 409 is returned, the response MUST include the
   bad or unsupported header fields and their values exactly as they
   were sent from the client.  Session parameters modified using
   SET-PARAMS do not override parameters explicitly specified on
   individual requests or requests that are IN-PROGRESS.

   C-&gt;S:  MRCP/2.0 ... SET-PARAMS 543256
          Channel-Identifier:32AECB23433802@speechsynth
          Voice-gender:female
          Voice-variant:3

   S-&gt;C:  MRCP/2.0 ... 543256 200 COMPLETE
          Channel-Identifier:32AECB23433802@speechsynth

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.2.%20%20GET-PARAMS"></a><a class="selflink" href="#section-6.1.2" name="section-6.1.2">6.1.2</a>.  GET-PARAMS</span>

   The GET-PARAMS method, from the client to the server, asks the MRCPv2
   resource for its current session parameters, such as voice
   characteristics and prosody on synthesizers, recognition timers on
   recognizers, etc.  For every header field the client sends in the
   request without a value, the server MUST include the header field and
   its corresponding value in the response.  If no parameter header
   fields are specified by the client, then the server MUST return all
   the settable parameters and their values in the corresponding header
   section of the response, including vendor-specific parameters.  Such
   wildcard parameter requests can be very processing-intensive, since
   the number of settable parameters can be large depending on the
   implementation.  Hence, it is RECOMMENDED that the client not use the
   wildcard GET-PARAMS operation very often.  Note that GET-PARAMS
   returns header field values that apply to the whole session and not
   values that have a request-level scope.  For example, Input-Waveform-
   URI is a request-level header field and thus would not be returned by
   GET-PARAMS.

   If all of the header fields requested are supported, the server MUST
   return a response status-code of 200.  If some of the header fields
   being retrieved are unsupported for the resource, the server MUST
   reject the request with a 403 Unsupported Header Field.  Such a
   response MUST include the unsupported header fields exactly as they
   were sent from the client, without values.

   C-&gt;S:   MRCP/2.0 ... GET-PARAMS 543256
           Channel-Identifier:32AECB23433802@speechsynth
           Voice-gender:
           Voice-variant:
           Vendor-Specific-Parameters:com.example.param1;
                         com.example.param2




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 33]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-34" id="page-34" name="page-34"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:   MRCP/2.0 ... 543256 200 COMPLETE
           Channel-Identifier:32AECB23433802@speechsynth
           Voice-gender:female
           Voice-variant:3
           Vendor-Specific-Parameters:com.example.param1="Company Name";
                         com.example.param2="124324234@example.com"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Generic%20Message%20Headers"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Generic Message Headers</span>

   All MRCPv2 header fields, which include both the generic-headers
   defined in the following subsections and the resource-specific header
   fields defined later, follow the same generic format as that given in
   <a href="rfc5322.html#section-3.1">Section 3.1 of RFC 5322</a> [<a href="rfc5322.html" title='"Internet Message Format"'>RFC5322</a>].  Each header field consists of a
   name followed by a colon (":") and the value.  Header field names are
   case-insensitive.  The value MAY be preceded by any amount of LWS
   (linear white space), though a single SP (space) is preferred.
   Header fields may extend over multiple lines by preceding each extra
   line with at least one SP or HT (horizontal tab).

   generic-field  = field-name ":" [ field-value ]
   field-name     = token
   field-value    = *LWS field-content *( CRLF 1*LWS field-content)
   field-content  = &lt;the OCTETs making up the field-value
                    and consisting of either *TEXT or combinations
                    of token, separators, and quoted-string&gt;

   The field-content does not include any leading or trailing LWS (i.e.,
   linear white space occurring before the first non-whitespace
   character of the field-value or after the last non-whitespace
   character of the field-value).  Such leading or trailing LWS MAY be
   removed without changing the semantics of the field value.  Any LWS
   that occurs between field-content MAY be replaced with a single SP
   before interpreting the field value or forwarding the message
   downstream.

   MRCPv2 servers and clients MUST NOT depend on header field order.  It
   is RECOMMENDED to send general-header fields first, followed by
   request-header or response-header fields, and ending with the entity-
   header fields.  However, MRCPv2 servers and clients MUST be prepared
   to process the header fields in any order.  The only exception to
   this rule is when there are multiple header fields with the same name
   in a message.

   Multiple header fields with the same name MAY be present in a message
   if and only if the entire value for that header field is defined as a
   comma-separated list [i.e., #(values)].





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 34]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-35" id="page-35" name="page-35"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Since vendor-specific parameters may be order-dependent, it MUST be
   possible to combine multiple header fields of the same name into one
   "name:value" pair without changing the semantics of the message, by
   appending each subsequent value to the first, each separated by a
   comma.  The order in which header fields with the same name are
   received is therefore significant to the interpretation of the
   combined header field value, and thus an intermediary MUST NOT change
   the order of these values when a message is forwarded.

   generic-header      =    channel-identifier
                       /    accept
                       /    active-request-id-list
                       /    proxy-sync-id
                       /    accept-charset
                       /    content-type
                       /    content-id
                       /    content-base
                       /    content-encoding
                       /    content-location
                       /    content-length
                       /    fetch-timeout
                       /    cache-control
                       /    logging-tag
                       /    set-cookie
                       /    vendor-specific

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.1.%20%20Channel-Identifier"></a><a class="selflink" href="#section-6.2.1" name="section-6.2.1">6.2.1</a>.  Channel-Identifier</span>

   All MRCPv2 requests, responses, and events MUST contain the Channel-
   Identifier header field.  The value is allocated by the server when a
   control channel is added to the session and communicated to the
   client by the "a=channel" attribute in the SDP answer from the
   server.  The header field value consists of 2 parts separated by the
   '@' symbol.  The first part is an unambiguous string identifying the
   MRCPv2 session.  The second part is a string token that specifies one
   of the media processing resource types listed in <a href="#section-3.1">Section 3.1</a>.  The
   unambiguous string (first part) MUST be difficult to guess, unique
   among the resource instances managed by the server, and common to all
   resource channels with that server established through a single SIP
   dialog.

   channel-identifier  = "Channel-Identifier" ":" channel-id CRLF
   channel-id          = 1*alphanum "@" 1*alphanum








<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 35]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-36" id="page-36" name="page-36"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.2.%20%20Accept"></a><a class="selflink" href="#section-6.2.2" name="section-6.2.2">6.2.2</a>.  Accept</span>

   The Accept header field follows the syntax defined in [H14.1].  The
   semantics are also identical, with the exception that if no Accept
   header field is present, the server MUST assume a default value that
   is specific to the resource type that is being controlled.  This
   default value can be changed for a resource on a session by sending
   this header field in a SET-PARAMS method.  The current default value
   of this header field for a resource in a session can be found through
   a GET-PARAMS method.  This header field MAY occur on any request.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.3.%20%20Active-Request-Id-List"></a><a class="selflink" href="#section-6.2.3" name="section-6.2.3">6.2.3</a>.  Active-Request-Id-List</span>

   In a request, this header field indicates the list of request-ids to
   which the request applies.  This is useful when there are multiple
   requests that are PENDING or IN-PROGRESS and the client wants this
   request to apply to one or more of these specifically.

   In a response, this header field returns the list of request-ids that
   the method modified or affected.  There could be one or more requests
   in a request-state of PENDING or IN-PROGRESS.  When a method
   affecting one or more PENDING or IN-PROGRESS requests is sent from
   the client to the server, the response MUST contain the list of
   request-ids that were affected or modified by this command in its
   header section.

   The Active-Request-Id-List is only used in requests and responses,
   not in events.

   For example, if a STOP request with no Active-Request-Id-List is sent
   to a synthesizer resource that has one or more SPEAK requests in the
   PENDING or IN-PROGRESS state, all SPEAK requests MUST be cancelled,
   including the one IN-PROGRESS.  The response to the STOP request
   contains in the Active-Request-Id-List value the request-ids of all
   the SPEAK requests that were terminated.  After sending the STOP
   response, the server MUST NOT send any SPEAK-COMPLETE or RECOGNITION-
   COMPLETE events for the terminated requests.

   active-request-id-list  =  "Active-Request-Id-List" ":"
                              request-id *("," request-id) CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.%20%20Proxy-Sync-Id"></a><a class="selflink" href="#section-6.2.4" name="section-6.2.4">6.2.4</a>.  Proxy-Sync-Id</span>

   When any server resource generates a "barge-in-able" event, it also
   generates a unique tag.  The tag is sent as this header field's value
   in an event to the client.  The client then acts as an intermediary
   among the server resources and sends a BARGE-IN-OCCURRED method to
   the synthesizer server resource with the Proxy-Sync-Id it received



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 36]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-37" id="page-37" name="page-37"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   from the server resource.  When the recognizer and synthesizer
   resources are part of the same session, they may choose to work
   together to achieve quicker interaction and response.  Here, the
   Proxy-Sync-Id helps the resource receiving the event, intermediated
   by the client, to decide if this event has been processed through a
   direct interaction of the resources.  This header field MAY occur
   only on events and the BARGE-IN-OCCURRED method.  The name of this
   header field contains the word 'proxy' only for historical reasons
   and does not imply that a proxy server is involved.

   proxy-sync-id    =  "Proxy-Sync-Id" ":" 1*VCHAR CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.%20%20Accept-Charset"></a><a class="selflink" href="#section-6.2.5" name="section-6.2.5">6.2.5</a>.  Accept-Charset</span>

   See [H14.2].  This specifies the acceptable character sets for
   entities returned in the response or events associated with this
   request.  This is useful in specifying the character set to use in
   the Natural Language Semantic Markup Language (NLSML) results of a
   RECOGNITION-COMPLETE event.  This header field is only used on
   requests.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.6.%20%20Content-Type"></a><a class="selflink" href="#section-6.2.6" name="section-6.2.6">6.2.6</a>.  Content-Type</span>

   See [H14.17].  MRCPv2 supports a restricted set of registered media
   types for content, including speech markup, grammar, and recognition
   results.  The content types applicable to each MRCPv2 resource-type
   are specified in the corresponding section of the document and are
   registered in the MIME Media Types registry maintained by IANA.  The
   multipart content type "multipart/mixed" is supported to communicate
   multiple of the above mentioned contents, in which case the body
   parts MUST NOT contain any MRCPv2-specific header fields.  This
   header field MAY occur on all messages.

   content-type     =    "Content-Type" ":" media-type-value CRLF

   media-type-value =    type "/" subtype *( ";" parameter )

   type             =    token

   subtype          =    token

   parameter        =    attribute "=" value

   attribute        =    token

   value            =    token / quoted-string





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 37]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-38" id="page-38" name="page-38"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.7.%20%20Content-ID"></a><a class="selflink" href="#section-6.2.7" name="section-6.2.7">6.2.7</a>.  Content-ID</span>

   This header field contains an ID or name for the content by which it
   can be referenced.  This header field operates according to the
   specification in <a href="rfc2392.html">RFC 2392</a> [<a href="rfc2392.html" title='"Content-ID and Message-ID Uniform Resource Locators"'>RFC2392</a>] and is required for content
   disambiguation in multipart messages.  In MRCPv2, whenever the
   associated content is stored by either the client or the server, it
   MUST be retrievable using this ID.  Such content can be referenced
   later in a session by addressing it with the 'session' URI scheme
   described in <a href="#section-13.6">Section 13.6</a>.  This header field MAY occur on all
   messages.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.8.%20%20Content-Base"></a><a class="selflink" href="#section-6.2.8" name="section-6.2.8">6.2.8</a>.  Content-Base</span>

   The Content-Base entity-header MAY be used to specify the base URI
   for resolving relative URIs within the entity.

   content-base      = "Content-Base" ":" absoluteURI CRLF

   Note, however, that the base URI of the contents within the entity-
   body may be redefined within that entity-body.  An example of this
   would be multipart media, which in turn can have multiple entities
   within it.  This header field MAY occur on all messages.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.9.%20%20Content-Encoding"></a><a class="selflink" href="#section-6.2.9" name="section-6.2.9">6.2.9</a>.  Content-Encoding</span>

   The Content-Encoding entity-header is used as a modifier to the
   Content-Type.  When present, its value indicates what additional
   content encoding has been applied to the entity-body, and thus what
   decoding mechanisms must be applied in order to obtain the Media Type
   referenced by the Content-Type header field.  Content-Encoding is
   primarily used to allow a document to be compressed without losing
   the identity of its underlying media type.  Note that the SIP session
   can be used to determine accepted encodings (see <a href="#section-7">Section 7</a>).  This
   header field MAY occur on all messages.

   content-encoding  = "Content-Encoding" ":"
                       *WSP content-coding
                       *(*WSP "," *WSP content-coding *WSP )
                       CRLF

   Content codings are defined in [H3.5].  An example of its use is
   Content-Encoding:gzip

   If multiple encodings have been applied to an entity, the content
   encodings MUST be listed in the order in which they were applied.





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 38]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-39" id="page-39" name="page-39"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.10.%20%20Content-Location"></a><a class="selflink" href="#section-6.2.10" name="section-6.2.10">6.2.10</a>.  Content-Location</span>

   The Content-Location entity-header MAY be used to supply the resource
   location for the entity enclosed in the message when that entity is
   accessible from a location separate from the requested resource's
   URI.  Refer to [H14.14].

   content-location  =  "Content-Location" ":"
                        ( absoluteURI / relativeURI ) CRLF

   The Content-Location value is a statement of the location of the
   resource corresponding to this particular entity at the time of the
   request.  This header field is provided for optimization purposes
   only.  The receiver of this header field MAY assume that the entity
   being sent is identical to what would have been retrieved or might
   already have been retrieved from the Content-Location URI.

   For example, if the client provided a grammar markup inline, and it
   had previously retrieved it from a certain URI, that URI can be
   provided as part of the entity, using the Content-Location header
   field.  This allows a resource like the recognizer to look into its
   cache to see if this grammar was previously retrieved, compiled, and
   cached.  In this case, it might optimize by using the previously
   compiled grammar object.

   If the Content-Location is a relative URI, the relative URI is
   interpreted relative to the Content-Base URI.  This header field MAY
   occur on all messages.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.11.%20%20Content-Length"></a><a class="selflink" href="#section-6.2.11" name="section-6.2.11">6.2.11</a>.  Content-Length</span>

   This header field contains the length of the content of the message
   body (i.e., after the double CRLF following the last header field).
   Unlike in HTTP, it MUST be included in all messages that carry
   content beyond the header section.  If it is missing, a default value
   of zero is assumed.  Otherwise, it is interpreted according to
   [H14.13].  When a message having no use for a message body contains
   one, i.e., the Content-Length is non-zero, the receiver MUST ignore
   the content of the message body.  This header field MAY occur on all
   messages.

   content-length  =  "Content-Length" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.12.%20%20Fetch%20Timeout"></a><a class="selflink" href="#section-6.2.12" name="section-6.2.12">6.2.12</a>.  Fetch Timeout</span>

   When the recognizer or synthesizer needs to fetch documents or other
   resources, this header field controls the corresponding URI access
   properties.  This defines the timeout for content that the server may



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 39]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-40" id="page-40" name="page-40"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   need to fetch over the network.  The value is interpreted to be in
   milliseconds and ranges from 0 to an implementation-specific maximum
   value.  It is RECOMMENDED that servers be cautious about accepting
   long timeout values.  The default value for this header field is
   implementation specific.  This header field MAY occur in DEFINE-
   GRAMMAR, RECOGNIZE, SPEAK, SET-PARAMS, or GET-PARAMS.

   fetch-timeout       =   "Fetch-Timeout" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.13.%20%20Cache-Control"></a><a class="selflink" href="#section-6.2.13" name="section-6.2.13">6.2.13</a>.  Cache-Control</span>

   If the server implements content caching, it MUST adhere to the cache
   correctness rules of HTTP 1.1 [<a href="rfc2616.html" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>RFC2616</a>] when accessing and caching
   stored content.  In particular, the "expires" and "cache-control"
   header fields of the cached URI or document MUST be honored and take
   precedence over the Cache-Control defaults set by this header field.
   The Cache-Control directives are used to define the default caching
   algorithms on the server for the session or request.  The scope of
   the directive is based on the method it is sent on.  If the directive
   is sent on a SET-PARAMS method, it applies for all requests for
   external documents the server makes during that session, unless it is
   overridden by a Cache-Control header field on an individual request.
   If the directives are sent on any other requests, they apply only to
   external document requests the server makes for that request.  An
   empty Cache-Control header field on the GET-PARAMS method is a
   request for the server to return the current Cache-Control directives
   setting on the server.  This header field MAY occur only on requests.

   cache-control    =    "Cache-Control" ":"
                         [*WSP cache-directive
                         *( *WSP "," *WSP cache-directive *WSP )]
                         CRLF

   cache-directive     = "max-age" "=" delta-seconds
                       / "max-stale" [ "=" delta-seconds ]
                       / "min-fresh" "=" delta-seconds

   delta-seconds       = 1*19DIGIT

   Here, delta-seconds is a decimal time value specifying the number of
   seconds since the instant the message response or data was received
   by the server.

   The different cache-directive options allow the client to ask the
   server to override the default cache expiration mechanisms:






<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 40]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-41" id="page-41" name="page-41"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   max-age        Indicates that the client can tolerate the server
                  using content whose age is no greater than the
                  specified time in seconds.  Unless a "max-stale"
                  directive is also included, the client is not willing
                  to accept a response based on stale data.

   min-fresh      Indicates that the client is willing to accept a
                  server response with cached data whose expiration is
                  no less than its current age plus the specified time
                  in seconds.  If the server's cache time-to-live
                  exceeds the client-supplied min-fresh value, the
                  server MUST NOT utilize cached content.

   max-stale      Indicates that the client is willing to allow a server
                  to utilize cached data that has exceeded its
                  expiration time.  If "max-stale" is assigned a value,
                  then the client is willing to allow the server to use
                  cached data that has exceeded its expiration time by
                  no more than the specified number of seconds.  If no
                  value is assigned to "max-stale", then the client is
                  willing to allow the server to use stale data of any
                  age.

   If the server cache is requested to use stale response/data without
   validation, it MAY do so only if this does not conflict with any
   "MUST"-level requirements concerning cache validation (e.g., a "must-
   revalidate" Cache-Control directive in the HTTP 1.1 specification
   pertaining to the corresponding URI).

   If both the MRCPv2 Cache-Control directive and the cached entry on
   the server include "max-age" directives, then the lesser of the two
   values is used for determining the freshness of the cached entry for
   that request.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.14.%20%20Logging-Tag"></a><a class="selflink" href="#section-6.2.14" name="section-6.2.14">6.2.14</a>.  Logging-Tag</span>

   This header field MAY be sent as part of a SET-PARAMS/GET-PARAMS
   method to set or retrieve the logging tag for logs generated by the
   server.  Once set, the value persists until a new value is set or the
   session ends.  The MRCPv2 server MAY provide a mechanism to create
   subsets of its output logs so that system administrators can examine
   or extract only the log file portion during which the logging tag was
   set to a certain value.

   It is RECOMMENDED that clients include in the logging tag information
   to identify the MRCPv2 client User Agent, so that one can determine
   which MRCPv2 client request generated a given log message at the
   server.  It is also RECOMMENDED that MRCPv2 clients not log



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 41]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-42" id="page-42" name="page-42"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   personally identifiable information such as credit card numbers and
   national identification numbers.

   logging-tag    = "Logging-Tag" ":" 1*UTFCHAR CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.15.%20%20Set-Cookie"></a><a class="selflink" href="#section-6.2.15" name="section-6.2.15">6.2.15</a>.  Set-Cookie</span>

   Since the associated HTTP client on an MRCPv2 server fetches
   documents for processing on behalf of the MRCPv2 client, the cookie
   store in the HTTP client of the MRCPv2 server is treated as an
   extension of the cookie store in the HTTP client of the MRCPv2
   client.  This requires that the MRCPv2 client and server be able to
   synchronize their common cookie store as needed.  To enable the
   MRCPv2 client to push its stored cookies to the MRCPv2 server and get
   new cookies from the MRCPv2 server stored back to the MRCPv2 client,
   the Set-Cookie entity-header field MAY be included in MRCPv2 requests
   to update the cookie store on a server and be returned in final
   MRCPv2 responses or events to subsequently update the client's own
   cookie store.  The stored cookies on the server persist for the
   duration of the MRCPv2 session and MUST be destroyed at the end of
   the session.  To ensure support for cookies, MRCPv2 clients and
   servers MUST support the Set-Cookie entity-header field.

   Note that it is the MRCPv2 client that determines which, if any,
   cookies are sent to the server.  There is no requirement that all
   cookies be shared.  Rather, it is RECOMMENDED that MRCPv2 clients
   communicate only cookies needed by the MRCPv2 server to process its
   requests.

 set-cookie      =       "Set-Cookie:" cookies CRLF
 cookies         =       cookie *("," *LWS cookie)
 cookie          =       attribute "=" value *(";" cookie-av)
 cookie-av       =       "Comment" "=" value
                 /       "Domain" "=" value
                 /       "Max-Age" "=" value
                 /       "Path" "=" value
                 /       "Secure"
                 /       "Version" "=" 1*19DIGIT
                 /       "Age" "=" delta-seconds

 set-cookie        = "Set-Cookie:" SP set-cookie-string
 set-cookie-string = cookie-pair *( ";" SP cookie-av )
 cookie-pair       = cookie-name "=" cookie-value
 cookie-name       = token
 cookie-value      = *cookie-octet / ( DQUOTE *cookie-octet DQUOTE )
 cookie-octet      = %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E
 token             = &lt;token, defined in <a href="rfc2616.html#section-2.2">[RFC2616], Section 2.2</a>&gt;




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 42]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-43" id="page-43" name="page-43"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


 cookie-av         = expires-av / max-age-av / domain-av /
                      path-av / secure-av / httponly-av /
                      extension-av / age-av
 expires-av        = "Expires=" sane-cookie-date
 sane-cookie-date  = &lt;<a href="rfc1123.html">rfc1123</a>-date, defined in <a href="rfc2616.html#section-3.3.1">[RFC2616], Section 3.3.1</a>&gt;
 max-age-av        = "Max-Age=" non-zero-digit *DIGIT
 non-zero-digit    = %x31-39
 domain-av         = "Domain=" domain-value
 domain-value      = &lt;subdomain&gt;
 path-av           = "Path=" path-value
 path-value        = &lt;any CHAR except CTLs or ";"&gt;
 secure-av         = "Secure"
 httponly-av       = "HttpOnly"
 extension-av      = &lt;any CHAR except CTLs or ";"&gt;
 age-av            = "Age=" delta-seconds

   The Set-Cookie header field is specified in <a href="rfc6265.html">RFC 6265</a> [<a href="rfc6265.html" title='"HTTP State Management Mechanism"'>RFC6265</a>].  The
   "Age" attribute is introduced in this specification to indicate the
   age of the cookie and is OPTIONAL.  An MRCPv2 client or server MUST
   calculate the age of the cookie according to the age calculation
   rules in the HTTP/1.1 specification [<a href="rfc2616.html" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>RFC2616</a>] and append the "Age"
   attribute accordingly.  This attribute is provided because time may
   have passed since the client received the cookie from an HTTP server.
   Rather than having the client reduce Max-Age by the actual age, it
   passes Max-Age verbatim and appends the "Age" attribute, thus
   maintaining the cookie as received while still accounting for the
   fact that time has passed.

   The MRCPv2 client or server MUST supply defaults for the "Domain" and
   "Path" attributes, as specified in <a href="rfc6265.html">RFC 6265</a>, if they are omitted by
   the HTTP origin server.  Note that there is no leading dot present in
   the "Domain" attribute value in this case.  Although an explicitly
   specified "Domain" value received via the HTTP protocol may be
   modified to include a leading dot, an MRCPv2 client or server MUST
   NOT modify the "Domain" value when received via the MRCPv2 protocol.

   An MRCPv2 client or server MAY combine multiple cookie header fields
   of the same type into a single "field-name:field-value" pair as
   described in <a href="#section-6.2">Section 6.2</a>.

   The Set-Cookie header field MAY be specified in any request that
   subsequently results in the server performing an HTTP access.  When a
   server receives new cookie information from an HTTP origin server,
   and assuming the cookie store is modified according to <a href="rfc6265.html">RFC 6265</a>, the
   server MUST return the new cookie information in the MRCPv2 COMPLETE
   response or event, as appropriate, to allow the client to update its
   own cookie store.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 43]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-44" id="page-44" name="page-44"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   The SET-PARAMS request MAY specify the Set-Cookie header field to
   update the cookie store on a server.  The GET-PARAMS request MAY be
   used to return the entire cookie store of "Set-Cookie" type cookies
   to the client.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.16.%20%20Vendor-Specific%20Parameters"></a><a class="selflink" href="#section-6.2.16" name="section-6.2.16">6.2.16</a>.  Vendor-Specific Parameters</span>

   This set of header fields allows for the client to set or retrieve
   vendor-specific parameters.

   vendor-specific          =    "Vendor-Specific-Parameters" ":"
                                 [vendor-specific-av-pair
                                 *(";" vendor-specific-av-pair)] CRLF

   vendor-specific-av-pair  = vendor-av-pair-name "="
                              value

   vendor-av-pair-name     = 1*UTFCHAR

   Header fields of this form MAY be sent in any method (request) and
   are used to manage implementation-specific parameters on the server
   side.  The vendor-av-pair-name follows the reverse Internet Domain
   Name convention (see <a href="#section-13.1.6">Section 13.1.6</a> for syntax and registration
   information).  The value of the vendor attribute is specified after
   the "=" symbol and MAY be quoted.  For example:

   com.example.companyA.paramxyz=256
   com.example.companyA.paramabc=High
   com.example.companyB.paramxyz=Low

   When used in GET-PARAMS to get the current value of these parameters
   from the server, this header field value MAY contain a semicolon-
   separated list of implementation-specific attribute names.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Generic%20Result%20Structure"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Generic Result Structure</span>

   Result data from the server for the Recognizer and Verifier resources
   is carried as a typed media entity in the MRCPv2 message body of
   various events.  The Natural Language Semantics Markup Language
   (NLSML), an XML markup based on an early draft from the W3C, is the
   default standard for returning results back to the client.  Hence,
   all servers implementing these resource types MUST support the media
   type 'application/nlsml+xml'.  The Extensible MultiModal Annotation
   (EMMA) [<a href="#ref-W3C.REC-emma-20090210">W3C.REC-emma-20090210</a>] format can be used to return results
   as well.  This can be done by negotiating the format at session
   establishment time with SDP (a=resultformat:application/emma+xml) or
   with SIP (Allow/Accept).  With SIP, for example, if a client wants




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 44]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-45" id="page-45" name="page-45"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   results in EMMA, an MRCPv2 server can route the request to another
   server that supports EMMA by inspecting the SIP header fields, rather
   than having to inspect the SDP.

   MRCPv2 uses this representation to convey content among the clients
   and servers that generate and make use of the markup.  MRCPv2 uses
   NSLML specifically to convey recognition, enrollment, and
   verification results between the corresponding resource on the MRCPv2
   server and the MRCPv2 client.  Details of this result format are
   fully described in <a href="#section-6.3.1">Section 6.3.1</a>.

   Content-Type:application/nlsml+xml
   Content-Length:...

   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           xmlns:ex="http://www.example.com/example"
           grammar="http://theYesNoGrammar"&gt;
       &lt;interpretation&gt;
           &lt;instance&gt;
                   &lt;ex:response&gt;yes&lt;/ex:response&gt;
           &lt;/instance&gt;
           &lt;input&gt;OK&lt;/input&gt;
       &lt;/interpretation&gt;
   &lt;/result&gt;

                              Result Example

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.3.1.%20%20Natural%20Language%20Semantics%20Markup%20Language"></a><a class="selflink" href="#section-6.3.1" name="section-6.3.1">6.3.1</a>.  Natural Language Semantics Markup Language</span>

   The Natural Language Semantics Markup Language (NLSML) is an XML data
   structure with elements and attributes designed to carry result
   information from recognizer (including enrollment) and verifier
   resources.  The normative definition of NLSML is the RelaxNG schema
   in <a href="#section-16.1">Section 16.1</a>.  Note that the elements and attributes of this
   format are defined in the MRCPv2 namespace.  In the result structure,
   they must either be prefixed by a namespace prefix declared within
   the result or must be children of an element identified as belonging
   to the respective namespace.  For details on how to use XML
   Namespaces, see [<a href="#ref-W3C.REC-xml-names11-20040204">W3C.REC-xml-names11-20040204</a>].  Section 2 of
   [<a href="#ref-W3C.REC-xml-names11-20040204">W3C.REC-xml-names11-20040204</a>] provides details on how to declare
   namespaces and namespace prefixes.

   The root element of NLSML is &lt;result&gt;.  Optional child elements are
   &lt;interpretation&gt;, &lt;enrollment-result&gt;, and &lt;verification-result&gt;, at
   least one of which must be present.  A single &lt;result&gt; MAY contain
   any or all of the optional child elements.  Details of the &lt;result&gt;
   and &lt;interpretation&gt; elements and their subelements and attributes



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 45]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-46" id="page-46" name="page-46"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   can be found in <a href="#section-9.6">Section 9.6</a>.  Details of the &lt;enrollment-result&gt;
   element and its subelements can be found in <a href="#section-9.7">Section 9.7</a>.  Details of
   the &lt;verification-result&gt; element and its subelements can be found in
   <a href="#section-11.5.2">Section 11.5.2</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Resource%20Discovery"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Resource Discovery</span>

   Server resources may be discovered and their capabilities learned by
   clients through standard SIP machinery.  The client MAY issue a SIP
   OPTIONS transaction to a server, which has the effect of requesting
   the capabilities of the server.  The server MUST respond to such a
   request with an SDP-encoded description of its capabilities according
   to <a href="rfc3264.html">RFC 3264</a> [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>].  The MRCPv2 capabilities are described by a
   single "m=" line containing the media type "application" and
   transport type "TCP/TLS/MRCPv2" or "TCP/MRCPv2".  There MUST be one
   "resource" attribute for each media resource that the server
   supports, and it has the resource type identifier as its value.

   The SDP description MUST also contain "m=" lines describing the audio
   capabilities and the coders the server supports.

   In this example, the client uses the SIP OPTIONS method to query the
   capabilities of the MRCPv2 server.

   C-&gt;S:
        OPTIONS sip:mrcp@server.example.com SIP/2.0
        Via:SIP/2.0/TCP client.atlanta.example.com:5060;
         branch=z9hG4bK74bf7
        Max-Forwards:6
        To:&lt;sip:mrcp@example.com&gt;
        From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
        Call-ID:a84b4c76e66710
        CSeq:63104 OPTIONS
        Contact:&lt;sip:sarvi@client.example.com&gt;
        Accept:application/sdp
        Content-Length:0


   S-&gt;C:
        SIP/2.0 200 OK
        Via:SIP/2.0/TCP client.atlanta.example.com:5060;
         branch=z9hG4bK74bf7;received=192.0.32.10
        To:&lt;sip:mrcp@example.com&gt;;tag=62784
        From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
        Call-ID:a84b4c76e66710
        CSeq:63104 OPTIONS
        Contact:&lt;sip:mrcp@server.example.com&gt;
        Allow:INVITE, ACK, CANCEL, OPTIONS, BYE



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 46]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-47" id="page-47" name="page-47"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


        Accept:application/sdp
        Accept-Encoding:gzip
        Accept-Language:en
        Supported:foo
        Content-Type:application/sdp
        Content-Length:...

        v=0
        o=sarvi 2890844536 2890842811 IN IP4 192.0.2.12
        s=-
        i=MRCPv2 server capabilities
        c=IN IP4 192.0.2.12/127
        t=0 0
        m=application 0 TCP/TLS/MRCPv2 1
        a=resource:speechsynth
        a=resource:speechrecog
        a=resource:speakverify
        m=audio 0 RTP/AVP 0 3
        a=rtpmap:0 PCMU/8000
        a=rtpmap:3 GSM/8000

         Using SIP OPTIONS for MRCPv2 Server Capability Discovery

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Speech%20Synthesizer%20Resource"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Speech Synthesizer Resource</span>

   This resource processes text markup provided by the client and
   generates a stream of synthesized speech in real time.  Depending
   upon the server implementation and capability of this resource, the
   client can also dictate parameters of the synthesized speech such as
   voice characteristics, speaker speed, etc.

   The synthesizer resource is controlled by MRCPv2 requests from the
   client.  Similarly, the resource can respond to these requests or
   generate asynchronous events to the client to indicate conditions of
   interest to the client during the generation of the synthesized
   speech stream.

   This section applies for the following resource types:

   o  speechsynth

   o  basicsynth

   The capabilities of these resources are defined in <a href="#section-3.1">Section 3.1</a>.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 47]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-48" id="page-48" name="page-48"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Synthesizer%20State%20Machine"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Synthesizer State Machine</span>

   The synthesizer maintains a state machine to process MRCPv2 requests
   from the client.  The state transitions shown below describe the
   states of the synthesizer and reflect the state of the request at the
   head of the synthesizer resource queue.  A SPEAK request in the
   PENDING state can be deleted or stopped by a STOP request without
   affecting the state of the resource.

   Idle                    Speaking                  Paused
   State                   State                     State
     |                        |                          |
     |----------SPEAK--------&gt;|                 |--------|
     |&lt;------STOP-------------|             CONTROL      |
     |&lt;----SPEAK-COMPLETE-----|                 |-------&gt;|
     |&lt;----BARGE-IN-OCCURRED--|                          |
     |              |---------|                          |
     |          CONTROL       |-----------PAUSE---------&gt;|
     |              |--------&gt;|&lt;----------RESUME---------|
     |                        |               |----------|
     |----------|             |              PAUSE       |
     |    BARGE-IN-OCCURRED   |               |---------&gt;|
     |&lt;---------|             |----------|               |
     |                        |      SPEECH-MARKER       |
     |                        |&lt;---------|               |
     |----------|             |----------|               |
     |         STOP           |       RESUME             |
     |          |             |&lt;---------|               |
     |&lt;---------|             |                          |
     |&lt;---------------------STOP-------------------------|
     |----------|             |                          |
     |     DEFINE-LEXICON     |                          |
     |          |             |                          |
     |&lt;---------|             |                          |
     |&lt;---------------BARGE-IN-OCCURRED------------------|

                         Synthesizer State Machine

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Synthesizer%20Methods"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Synthesizer Methods</span>

   The synthesizer supports the following methods.










<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 48]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-49" id="page-49" name="page-49"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   synthesizer-method   =  "SPEAK"
                        /  "STOP"
                        /  "PAUSE"
                        /  "RESUME"
                        /  "BARGE-IN-OCCURRED"
                        /  "CONTROL"
                        /  "DEFINE-LEXICON"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.3.%20%20Synthesizer%20Events"></a><a class="selflink" href="#section-8.3" name="section-8.3">8.3</a>.  Synthesizer Events</span>

   The synthesizer can generate the following events.

   synthesizer-event    =  "SPEECH-MARKER"
                        /  "SPEAK-COMPLETE"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.4.%20%20Synthesizer%20Header%20Fields"></a><a class="selflink" href="#section-8.4" name="section-8.4">8.4</a>.  Synthesizer Header Fields</span>

   A synthesizer method can contain header fields containing request
   options and information to augment the Request, Response, or Event it
   is associated with.

   synthesizer-header  =  jump-size
                       /  kill-on-barge-in
                       /  speaker-profile
                       /  completion-cause
                       /  completion-reason
                       /  voice-parameter
                       /  prosody-parameter
                       /  speech-marker
                       /  speech-language
                       /  fetch-hint
                       /  audio-fetch-hint
                       /  failed-uri
                       /  failed-uri-cause
                       /  speak-restart
                       /  speak-length
                       /  load-lexicon
                       /  lexicon-search-order

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.1.%20%20Jump-Size"></a><a class="selflink" href="#section-8.4.1" name="section-8.4.1">8.4.1</a>.  Jump-Size</span>

   This header field MAY be specified in a CONTROL method and controls
   the amount to jump forward or backward in an active SPEAK request.  A
   '+' or '-' indicates a relative value to what is being currently
   played.  This header field MAY also be specified in a SPEAK request
   as a desired offset into the synthesized speech.  In this case, the
   synthesizer MUST begin speaking from this amount of time into the
   speech markup.  Note that an offset that extends beyond the end of



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 49]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-50" id="page-50" name="page-50"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   the produced speech will result in audio of length zero.  The
   different speech length units supported are dependent on the
   synthesizer implementation.  If the synthesizer resource does not
   support a unit for the operation, the resource MUST respond with a
   status-code of 409 "Unsupported Header Field Value".

   jump-size             =   "Jump-Size" ":" speech-length-value CRLF

   speech-length-value   =   numeric-speech-length
                         /   text-speech-length

   text-speech-length    =   1*UTFCHAR SP "Tag"

   numeric-speech-length =    ("+" / "-") positive-speech-length

   positive-speech-length =   1*19DIGIT SP numeric-speech-unit

   numeric-speech-unit   =   "Second"
                         /   "Word"
                         /   "Sentence"
                         /   "Paragraph"

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.2.%20%20Kill-On-Barge-In"></a><a class="selflink" href="#section-8.4.2" name="section-8.4.2">8.4.2</a>.  Kill-On-Barge-In</span>

   This header field MAY be sent as part of the SPEAK method to enable
   "kill-on-barge-in" support.  If enabled, the SPEAK method is
   interrupted by DTMF input detected by a signal detector resource or
   by the start of speech sensed or recognized by the speech recognizer
   resource.

   kill-on-barge-in      =   "Kill-On-Barge-In" ":" BOOLEAN CRLF

   The client MUST send a BARGE-IN-OCCURRED method to the synthesizer
   resource when it receives a barge-in-able event from any source.
   This source could be a synthesizer resource or signal detector
   resource and MAY be either local or distributed.  If this header
   field is not specified in a SPEAK request or explicitly set by a
   SET-PARAMS, the default value for this header field is "true".

   If the recognizer or signal detector resource is on the same server
   as the synthesizer and both are part of the same session, the server
   MAY work with both to provide internal notification to the
   synthesizer so that audio may be stopped without having to wait for
   the client's BARGE-IN-OCCURRED event.

   It is generally RECOMMENDED when playing a prompt to the user with
   Kill-On-Barge-In and asking for input, that the client issue the
   RECOGNIZE request ahead of the SPEAK request for optimum performance



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 50]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-51" id="page-51" name="page-51"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   and user experience.  This way, it is guaranteed that the recognizer
   is online before the prompt starts playing and the user's speech will
   not be truncated at the beginning (especially for power users).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.3.%20%20Speaker-Profile"></a><a class="selflink" href="#section-8.4.3" name="section-8.4.3">8.4.3</a>.  Speaker-Profile</span>

   This header field MAY be part of the SET-PARAMS/GET-PARAMS or SPEAK
   request from the client to the server and specifies a URI that
   references the profile of the speaker.  Speaker profiles are
   collections of voice parameters like gender, accent, etc.

   speaker-profile       =   "Speaker-Profile" ":" uri CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.4.%20%20Completion-Cause"></a><a class="selflink" href="#section-8.4.4" name="section-8.4.4">8.4.4</a>.  Completion-Cause</span>

   This header field MUST be specified in a SPEAK-COMPLETE event coming
   from the synthesizer resource to the client.  This indicates the
   reason the SPEAK request completed.

   completion-cause      =   "Completion-Cause" ":" 3DIGIT SP
                             1*VCHAR CRLF

   +------------+-----------------------+------------------------------+
   | Cause-Code | Cause-Name            | Description                  |
   +------------+-----------------------+------------------------------+
   | 000        | normal                | SPEAK completed normally.    |
   | 001        | barge-in              | SPEAK request was terminated |
   |            |                       | because of barge-in.         |
   | 002        | parse-failure         | SPEAK request terminated     |
   |            |                       | because of a failure to      |
   |            |                       | parse the speech markup      |
   |            |                       | text.                        |
   | 003        | uri-failure           | SPEAK request terminated     |
   |            |                       | because access to one of the |
   |            |                       | URIs failed.                 |
   | 004        | error                 | SPEAK request terminated     |
   |            |                       | prematurely due to           |
   |            |                       | synthesizer error.           |
   | 005        | language-unsupported  | Language not supported.      |
   | 006        | lexicon-load-failure  | Lexicon loading failed.      |
   | 007        | cancelled             | A prior SPEAK request failed |
   |            |                       | while this one was still in  |
   |            |                       | the queue.                   |
   +------------+-----------------------+------------------------------+

                Synthesizer Resource Completion Cause Codes





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 51]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-52" id="page-52" name="page-52"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.5.%20%20Completion-Reason"></a><a class="selflink" href="#section-8.4.5" name="section-8.4.5">8.4.5</a>.  Completion-Reason</span>

   This header field MAY be specified in a SPEAK-COMPLETE event coming
   from the synthesizer resource to the client.  This contains the
   reason text behind the SPEAK request completion.  This header field
   communicates text describing the reason for the failure, such as an
   error in parsing the speech markup text.

   completion-reason   =   "Completion-Reason" ":"
                           quoted-string CRLF

   The completion reason text is provided for client use in logs and for
   debugging and instrumentation purposes.  Clients MUST NOT interpret
   the completion reason text.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.6.%20%20Voice-Parameter"></a><a class="selflink" href="#section-8.4.6" name="section-8.4.6">8.4.6</a>.  Voice-Parameter</span>

   This set of header fields defines the voice of the speaker.

   voice-parameter    =   voice-gender
                       /   voice-age
                       /   voice-variant
                       /   voice-name

   voice-gender        =   "Voice-Gender:" voice-gender-value CRLF
   voice-gender-value  =   "male"
                       /   "female"
                       /   "neutral"
   voice-age           =   "Voice-Age:" 1*3DIGIT CRLF
   voice-variant       =   "Voice-Variant:" 1*19DIGIT CRLF
   voice-name          =   "Voice-Name:"
                           1*UTFCHAR *(1*WSP 1*UTFCHAR) CRLF

   The "Voice-" parameters are derived from the similarly named
   attributes of the voice element specified in W3C's Speech Synthesis
   Markup Language Specification (SSML)
   [<a href="#ref-W3C.REC-speech-synthesis-20040907">W3C.REC-speech-synthesis-20040907</a>].  Legal values for these
   parameters are as defined in that specification.

   These header fields MAY be sent in SET-PARAMS or GET-PARAMS requests
   to define or get default values for the entire session or MAY be sent
   in the SPEAK request to define default values for that SPEAK request.
   Note that SSML content can itself set these values internal to the
   SSML document, of course.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 52]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-53" id="page-53" name="page-53"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Voice parameter header fields MAY also be sent in a CONTROL method to
   affect a SPEAK request in progress and change its behavior on the
   fly.  If the synthesizer resource does not support this operation, it
   MUST reject the request with a status-code of 403 "Unsupported Header
   Field".

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.7.%20%20Prosody-Parameters"></a><a class="selflink" href="#section-8.4.7" name="section-8.4.7">8.4.7</a>.  Prosody-Parameters</span>

   This set of header fields defines the prosody of the speech.

   prosody-parameter   =   "Prosody-" prosody-param-name ":"
                           prosody-param-value CRLF

   prosody-param-name    =    1*VCHAR

   prosody-param-value   =    1*VCHAR

   prosody-param-name is any one of the attribute names under the
   prosody element specified in W3C's Speech Synthesis Markup Language
   Specification [<a href="#ref-W3C.REC-speech-synthesis-20040907">W3C.REC-speech-synthesis-20040907</a>].  The prosody-
   param-value is any one of the value choices of the corresponding
   prosody element attribute from that specification.

   These header fields MAY be sent in SET-PARAMS or GET-PARAMS requests
   to define or get default values for the entire session or MAY be sent
   in the SPEAK request to define default values for that SPEAK request.
   Furthermore, these attributes can be part of the speech text marked
   up in SSML.

   The prosody parameter header fields in the SET-PARAMS or SPEAK
   request only apply if the speech data is of type 'text/plain' and
   does not use a speech markup format.

   These prosody parameter header fields MAY also be sent in a CONTROL
   method to affect a SPEAK request in progress and change its behavior
   on the fly.  If the synthesizer resource does not support this
   operation, it MUST respond back to the client with a status-code of
   403 "Unsupported Header Field".

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.8.%20%20Speech-Marker"></a><a class="selflink" href="#section-8.4.8" name="section-8.4.8">8.4.8</a>.  Speech-Marker</span>

   This header field contains timestamp information in a "timestamp"
   field.  This is a Network Time Protocol (NTP) [<a href="rfc5905.html" title='"Network Time Protocol Version 4: Protocol and Algorithms Specification"'>RFC5905</a>] timestamp, a
   64-bit number in decimal form.  It MUST be synced with the Real-Time
   Protocol (RTP) [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] timestamp of the media stream through the
   Real-Time Control Protocol (RTCP) [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 53]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-54" id="page-54" name="page-54"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Markers are bookmarks that are defined within the markup.  Most
   speech markup formats provide mechanisms to embed marker fields
   within speech texts.  The synthesizer generates SPEECH-MARKER events
   when it reaches these marker fields.  This header field MUST be part
   of the SPEECH-MARKER event and contain the marker tag value after the
   timestamp, separated by a semicolon.  In these events, the timestamp
   marks the time the text corresponding to the marker was emitted as
   speech by the synthesizer.

   This header field MUST also be returned in responses to STOP,
   CONTROL, and BARGE-IN-OCCURRED methods, in the SPEAK-COMPLETE event,
   and in an IN-PROGRESS SPEAK response.  In these messages, if any
   markers have been encountered for the current SPEAK, the marker tag
   value MUST be the last embedded marker encountered.  If no markers
   have yet been encountered for the current SPEAK, only the timestamp
   is REQUIRED.  Note that in these events, the purpose of this header
   field is to provide timestamp information associated with important
   events within the lifecycle of a request (start of SPEAK processing,
   end of SPEAK processing, receipt of CONTROL/STOP/BARGE-IN-OCCURRED).

   timestamp           =   "timestamp" "=" time-stamp-value

   time-stamp-value    =   1*20DIGIT

   speech-marker       =   "Speech-Marker" ":"
                           timestamp
                           [";" 1*(UTFCHAR / %x20)] CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.9.%20%20Speech-Language"></a><a class="selflink" href="#section-8.4.9" name="section-8.4.9">8.4.9</a>.  Speech-Language</span>

   This header field specifies the default language of the speech data
   if the language is not specified in the markup.  The value of this
   header field MUST follow <a href="rfc5646.html">RFC 5646</a> [<a href="rfc5646.html" title='"Tags for Identifying Languages"'>RFC5646</a>] for its values.  The
   header field MAY occur in SPEAK, SET-PARAMS, or GET-PARAMS requests.

   speech-language     =   "Speech-Language" ":" 1*VCHAR CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.10.%20%20Fetch-Hint"></a><a class="selflink" href="#section-8.4.10" name="section-8.4.10">8.4.10</a>.  Fetch-Hint</span>

   When the synthesizer needs to fetch documents or other resources like
   speech markup or audio files, this header field controls the
   corresponding URI access properties.  This provides client policy on
   when the synthesizer should retrieve content from the server.  A
   value of "prefetch" indicates the content MAY be downloaded when the
   request is received, whereas "safe" indicates that content MUST NOT






<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 54]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-55" id="page-55" name="page-55"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   be downloaded until actually referenced.  The default value is
   "prefetch".  This header field MAY occur in SPEAK, SET-PARAMS, or
   GET-PARAMS requests.

   fetch-hint          =   "Fetch-Hint" ":" ("prefetch" / "safe") CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.11.%20%20Audio-Fetch-Hint"></a><a class="selflink" href="#section-8.4.11" name="section-8.4.11">8.4.11</a>.  Audio-Fetch-Hint</span>

   When the synthesizer needs to fetch documents or other resources like
   speech audio files, this header field controls the corresponding URI
   access properties.  This provides client policy whether or not the
   synthesizer is permitted to attempt to optimize speech by pre-
   fetching audio.  The value is either "safe" to say that audio is only
   fetched when it is referenced, never before; "prefetch" to permit,
   but not require the implementation to pre-fetch the audio; or
   "stream" to allow it to stream the audio fetches.  The default value
   is "prefetch".  This header field MAY occur in SPEAK, SET-PARAMS, or
   GET-PARAMS requests.

   audio-fetch-hint    =   "Audio-Fetch-Hint" ":"
                           ("prefetch" / "safe" / "stream") CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.12.%20%20Failed-URI"></a><a class="selflink" href="#section-8.4.12" name="section-8.4.12">8.4.12</a>.  Failed-URI</span>

   When a synthesizer method needs a synthesizer to fetch or access a
   URI and the access fails, the server SHOULD provide the failed URI in
   this header field in the method response, unless there are multiple
   URI failures, in which case the server MUST provide one of the failed
   URIs in this header field in the method response.

   failed-uri          =   "Failed-URI" ":" absoluteURI CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.13.%20%20Failed-URI-Cause"></a><a class="selflink" href="#section-8.4.13" name="section-8.4.13">8.4.13</a>.  Failed-URI-Cause</span>

   When a synthesizer method needs a synthesizer to fetch or access a
   URI and the access fails, the server MUST provide the URI-specific or
   protocol-specific response code for the URI in the Failed-URI header
   field in the method response through this header field.  The value
   encoding is UTF-8 (<a href="rfc3629.html">RFC 3629</a> [<a href="rfc3629.html" title='"UTF-8, a transformation format of ISO 10646"'>RFC3629</a>]) to accommodate any access
   protocol -- some access protocols might have a response string
   instead of a numeric response code.

   failed-uri-cause    =   "Failed-URI-Cause" ":" 1*UTFCHAR CRLF








<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 55]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-56" id="page-56" name="page-56"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.14.%20%20Speak-Restart"></a><a class="selflink" href="#section-8.4.14" name="section-8.4.14">8.4.14</a>.  Speak-Restart</span>

   When a client issues a CONTROL request to a currently speaking
   synthesizer resource to jump backward, and the target jump point is
   before the start of the current SPEAK request, the current SPEAK
   request MUST restart from the beginning of its speech data and the
   server's response to the CONTROL request MUST contain this header
   field with a value of "true" indicating a restart.

   speak-restart       =   "Speak-Restart" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.15.%20%20Speak-Length"></a><a class="selflink" href="#section-8.4.15" name="section-8.4.15">8.4.15</a>.  Speak-Length</span>

   This header field MAY be specified in a CONTROL method to control the
   maximum length of speech to speak, relative to the current speaking
   point in the currently active SPEAK request.  If numeric, the value
   MUST be a positive integer.  If a header field with a Tag unit is
   specified, then the speech output continues until the tag is reached
   or the SPEAK request is completed, whichever comes first.  This
   header field MAY be specified in a SPEAK request to indicate the
   length to speak from the speech data and is relative to the point in
   speech that the SPEAK request starts.  The different speech length
   units supported are synthesizer implementation dependent.  If a
   server does not support the specified unit, the server MUST respond
   with a status-code of 409 "Unsupported Header Field Value".

   speak-length          =   "Speak-Length" ":" positive-length-value
                             CRLF

   positive-length-value =   positive-speech-length
                         /   text-speech-length

   text-speech-length    =   1*UTFCHAR SP "Tag"

   positive-speech-length =  1*19DIGIT SP numeric-speech-unit

   numeric-speech-unit   =   "Second"
                         /   "Word"
                         /   "Sentence"
                         /   "Paragraph"











<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 56]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-57" id="page-57" name="page-57"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.16.%20%20Load-Lexicon"></a><a class="selflink" href="#section-8.4.16" name="section-8.4.16">8.4.16</a>.  Load-Lexicon</span>

   This header field is used to indicate whether a lexicon has to be
   loaded or unloaded.  The value "true" means to load the lexicon if
   not already loaded, and the value "false" means to unload the lexicon
   if it is loaded.  The default value for this header field is "true".
   This header field MAY be specified in a DEFINE-LEXICON method.

   load-lexicon       =   "Load-Lexicon" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.4.17.%20%20Lexicon-Search-Order"></a><a class="selflink" href="#section-8.4.17" name="section-8.4.17">8.4.17</a>.  Lexicon-Search-Order</span>

   This header field is used to specify a list of active pronunciation
   lexicon URIs and the search order among the active lexicons.
   Lexicons specified within the SSML document take precedence over the
   lexicons specified in this header field.  This header field MAY be
   specified in the SPEAK, SET-PARAMS, and GET-PARAMS methods.

   lexicon-search-order =   "Lexicon-Search-Order" ":"
             "&lt;" absoluteURI "&gt;" *(" " "&lt;" absoluteURI "&gt;") CRLF

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.5.%20%20Synthesizer%20Message%20Body"></a><a class="selflink" href="#section-8.5" name="section-8.5">8.5</a>.  Synthesizer Message Body</span>

   A synthesizer message can contain additional information associated
   with the Request, Response, or Event in its message body.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.5.1.%20%20Synthesizer%20Speech%20Data"></a><a class="selflink" href="#section-8.5.1" name="section-8.5.1">8.5.1</a>.  Synthesizer Speech Data</span>

   Marked-up text for the synthesizer to speak is specified as a typed
   media entity in the message body.  The speech data to be spoken by
   the synthesizer can be specified inline by embedding the data in the
   message body or by reference by providing a URI for accessing the
   data.  In either case, the data and the format used to markup the
   speech needs to be of a content type supported by the server.

   All MRCPv2 servers containing synthesizer resources MUST support both
   plain text speech data and W3C's Speech Synthesis Markup Language
   [<a href="#ref-W3C.REC-speech-synthesis-20040907">W3C.REC-speech-synthesis-20040907</a>] and hence MUST support the media
   types 'text/plain' and 'application/ssml+xml'.  Other formats MAY be
   supported.

   If the speech data is to be fetched by URI reference, the media type
   'text/uri-list' (see <a href="rfc2483.html">RFC 2483</a> [<a href="rfc2483.html" title='"URI Resolution Services Necessary for URN Resolution"'>RFC2483</a>]) is used to indicate one or
   more URIs that, when dereferenced, will contain the content to be
   spoken.  If a list of speech URIs is specified, the resource MUST
   speak the speech data provided by each URI in the order in which the
   URIs are specified in the content.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 57]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-58" id="page-58" name="page-58"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   MRCPv2 clients and servers MUST support the 'multipart/mixed' media
   type.  This is the appropriate media type to use when providing a mix
   of URI and inline speech data.  Embedded within the multipart content
   block, there MAY be content for the 'text/uri-list', 'application/
   ssml+xml', and/or 'text/plain' media types.  The character set and
   encoding used in the speech data is specified according to standard
   media type definitions.  The multipart content MAY also contain
   actual audio data.  Clients may have recorded audio clips stored in
   memory or on a local device and wish to play it as part of the SPEAK
   request.  The audio portions MAY be sent by the client as part of the
   multipart content block.  This audio is referenced in the speech
   markup data that is another part in the multipart content block
   according to the 'multipart/mixed' media type specification.

   Content-Type:text/uri-list
   Content-Length:...

   http://www.example.com/ASR-Introduction.ssml
   http://www.example.com/ASR-Document-Part1.ssml
   http://www.example.com/ASR-Document-Part2.ssml
   http://www.example.com/ASR-Conclusion.ssml

                             URI List Example


   Content-Type:application/ssml+xml
   Content-Length:...

   &lt;?xml version="1.0"?&gt;
        &lt;speak version="1.0"
               xmlns="http://www.w3.org/2001/10/synthesis"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
               xml:lang="en-US"&gt;
          &lt;p&gt;
            &lt;s&gt;You have 4 new messages.&lt;/s&gt;
            &lt;s&gt;The first is from Aldine Turnbet
            and arrived at &lt;break/&gt;
            &lt;say-as interpret-as="vxml:time"&gt;0345p&lt;/say-as&gt;.&lt;/s&gt;

            &lt;s&gt;The subject is &lt;prosody
            rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
         &lt;/p&gt;
        &lt;/speak&gt;

                               SSML Example




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 58]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-59" id="page-59" name="page-59"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Content-Type:multipart/mixed; boundary="break"

   --break
   Content-Type:text/uri-list
   Content-Length:...

   http://www.example.com/ASR-Introduction.ssml
   http://www.example.com/ASR-Document-Part1.ssml
   http://www.example.com/ASR-Document-Part2.ssml
   http://www.example.com/ASR-Conclusion.ssml

   --break
   Content-Type:application/ssml+xml
   Content-Length:...

   &lt;?xml version="1.0"?&gt;
       &lt;speak version="1.0"
              xmlns="http://www.w3.org/2001/10/synthesis"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
              xml:lang="en-US"&gt;
          &lt;p&gt;
            &lt;s&gt;You have 4 new messages.&lt;/s&gt;
            &lt;s&gt;The first is from Stephanie Williams
            and arrived at &lt;break/&gt;
            &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.&lt;/s&gt;

            &lt;s&gt;The subject is &lt;prosody
            rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
          &lt;/p&gt;
       &lt;/speak&gt;
   --break--

                             Multipart Example

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/8.5.2.%20%20Lexicon%20Data"></a><a class="selflink" href="#section-8.5.2" name="section-8.5.2">8.5.2</a>.  Lexicon Data</span>

   Synthesizer lexicon data from the client to the server can be
   provided inline or by reference.  Either way, they are carried as
   typed media in the message body of the MRCPv2 request message (see
   <a href="#section-8.14">Section 8.14</a>).

   When a lexicon is specified inline in the message, the client MUST
   provide a Content-ID for that lexicon as part of the content header
   fields.  The server MUST store the lexicon associated with that
   Content-ID for the duration of the session.  A stored lexicon can be
   overwritten by defining a new lexicon with the same Content-ID.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 59]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-60" id="page-60" name="page-60"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Lexicons that have been associated with a Content-ID can be
   referenced through the 'session' URI scheme (see <a href="#section-13.6">Section 13.6</a>).

   If lexicon data is specified by external URI reference, the media
   type 'text/uri-list' (see <a href="rfc2483.html">RFC 2483</a> [<a href="rfc2483.html" title='"URI Resolution Services Necessary for URN Resolution"'>RFC2483</a>] ) is used to list the
   one or more URIs that may be dereferenced to obtain the lexicon data.
   All MRCPv2 servers MUST support the "http" and "https" URI access
   mechanisms, and MAY support other mechanisms.

   If the data in the message body consists of a mix of URI and inline
   lexicon data, the 'multipart/mixed' media type is used.  The
   character set and encoding used in the lexicon data may be specified
   according to standard media type definitions.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.6.%20%20SPEAK%20Method"></a><a class="selflink" href="#section-8.6" name="section-8.6">8.6</a>.  SPEAK Method</span>

   The SPEAK request provides the synthesizer resource with the speech
   text and initiates speech synthesis and streaming.  The SPEAK method
   MAY carry voice and prosody header fields that alter the behavior of
   the voice being synthesized, as well as a typed media message body
   containing the actual marked-up text to be spoken.

   The SPEAK method implementation MUST do a fetch of all external URIs
   that are part of that operation.  If caching is implemented, this URI
   fetching MUST conform to the cache-control hints and parameter header
   fields associated with the method in deciding whether it is to be
   fetched from cache or from the external server.  If these hints/
   parameters are not specified in the method, the values set for the
   session using SET-PARAMS/GET-PARAMS apply.  If it was not set for the
   session, their default values apply.

   When applying voice parameters, there are three levels of precedence.
   The highest precedence are those specified within the speech markup
   text, followed by those specified in the header fields of the SPEAK
   request and hence that apply for that SPEAK request only, followed by
   the session default values that can be set using the SET-PARAMS
   request and apply for subsequent methods invoked during the session.

   If the resource was idle at the time the SPEAK request arrived at the
   server and the SPEAK method is being actively processed, the resource
   responds immediately with a success status code and a request-state
   of IN-PROGRESS.

   If the resource is in the speaking or paused state when the SPEAK
   method arrives at the server, i.e., it is in the middle of processing
   a previous SPEAK request, the status returns success with a request-
   state of PENDING.  The server places the SPEAK request in the
   synthesizer resource request queue.  The request queue operates



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 60]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-61" id="page-61" name="page-61"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   strictly FIFO: requests are processed serially in order of receipt.
   If the current SPEAK fails, all SPEAK methods in the pending queue
   are cancelled and each generates a SPEAK-COMPLETE event with a
   Completion-Cause of "cancelled".

   For the synthesizer resource, SPEAK is the only method that can
   return a request-state of IN-PROGRESS or PENDING.  When the text has
   been synthesized and played into the media stream, the resource
   issues a SPEAK-COMPLETE event with the request-id of the SPEAK
   request and a request-state of COMPLETE.

   C-&gt;S: MRCP/2.0 ... SPEAK 543257
         Channel-Identifier:32AECB23433802@speechsynth
         Voice-gender:neutral
         Voice-Age:25
         Prosody-volume:medium
         Content-Type:application/ssml+xml
         Content-Length:...

         &lt;?xml version="1.0"?&gt;
            &lt;speak version="1.0"
                xmlns="http://www.w3.org/2001/10/synthesis"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                xml:lang="en-US"&gt;
            &lt;p&gt;
             &lt;s&gt;You have 4 new messages.&lt;/s&gt;
             &lt;s&gt;The first is from Stephanie Williams and arrived at
                &lt;break/&gt;
                &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.
                &lt;/s&gt;
             &lt;s&gt;The subject is
                    &lt;prosody rate="-20%"&gt;ski trip&lt;/prosody&gt;
             &lt;/s&gt;
            &lt;/p&gt;
           &lt;/speak&gt;

   S-&gt;C: MRCP/2.0 ... 543257 200 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857206027059

   S-&gt;C: MRCP/2.0 ... SPEAK-COMPLETE 543257 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Completion-Cause:000 normal
         Speech-Marker:timestamp=857206027059

                               SPEAK Example



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 61]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-62" id="page-62" name="page-62"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.7.%20%20STOP"></a><a class="selflink" href="#section-8.7" name="section-8.7">8.7</a>.  STOP</span>

   The STOP method from the client to the server tells the synthesizer
   resource to stop speaking if it is speaking something.

   The STOP request can be sent with an Active-Request-Id-List header
   field to stop the zero or more specific SPEAK requests that may be in
   queue and return a response status-code of 200 "Success".  If no
   Active-Request-Id-List header field is sent in the STOP request, the
   server terminates all outstanding SPEAK requests.

   If a STOP request successfully terminated one or more PENDING or
   IN-PROGRESS SPEAK requests, then the response MUST contain an Active-
   Request-Id-List header field enumerating the SPEAK request-ids that
   were terminated.  Otherwise, there is no Active-Request-Id-List
   header field in the response.  No SPEAK-COMPLETE events are sent for
   such terminated requests.

   If a SPEAK request that was IN-PROGRESS and speaking was stopped, the
   next pending SPEAK request, if any, becomes IN-PROGRESS at the
   resource and enters the speaking state.

   If a SPEAK request that was IN-PROGRESS and paused was stopped, the
   next pending SPEAK request, if any, becomes IN-PROGRESS and enters
   the paused state.

   C-&gt;S: MRCP/2.0 ... SPEAK 543258
         Channel-Identifier:32AECB23433802@speechsynth
         Content-Type:application/ssml+xml
         Content-Length:...

         &lt;?xml version="1.0"?&gt;
           &lt;speak version="1.0"
                xmlns="http://www.w3.org/2001/10/synthesis"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                xml:lang="en-US"&gt;
            &lt;p&gt;
             &lt;s&gt;You have 4 new messages.&lt;/s&gt;
             &lt;s&gt;The first is from Stephanie Williams and arrived at
                &lt;break/&gt;
                &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.&lt;/s&gt;
             &lt;s&gt;The subject is
                 &lt;prosody rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
            &lt;/p&gt;
           &lt;/speak&gt;




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 62]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-63" id="page-63" name="page-63"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C: MRCP/2.0 ... 543258 200 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857206027059

   C-&gt;S: MRCP/2.0 ... STOP 543259
         Channel-Identifier:32AECB23433802@speechsynth

   S-&gt;C: MRCP/2.0 ... 543259 200 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Active-Request-Id-List:543258
         Speech-Marker:timestamp=857206039059

                               STOP Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.8.%20%20BARGE-IN-OCCURRED"></a><a class="selflink" href="#section-8.8" name="section-8.8">8.8</a>.  BARGE-IN-OCCURRED</span>

   The BARGE-IN-OCCURRED method, when used with the synthesizer
   resource, provides a client that has detected a barge-in-able event a
   means to communicate the occurrence of the event to the synthesizer
   resource.

   This method is useful in two scenarios:

   1.  The client has detected DTMF digits in the input media or some
       other barge-in-able event and wants to communicate that to the
       synthesizer resource.

   2.  The recognizer resource and the synthesizer resource are in
       different servers.  In this case, the client acts as an
       intermediary for the two servers.  It receives an event from the
       recognition resource and sends a BARGE-IN-OCCURRED request to the
       synthesizer.  In such cases, the BARGE-IN-OCCURRED method would
       also have a Proxy-Sync-Id header field received from the resource
       generating the original event.

   If a SPEAK request is active with kill-on-barge-in enabled (see
   <a href="#section-8.4.2">Section 8.4.2</a>), and the BARGE-IN-OCCURRED event is received, the
   synthesizer MUST immediately stop streaming out audio.  It MUST also
   terminate any speech requests queued behind the current active one,
   irrespective of whether or not they have barge-in enabled.  If a
   barge-in-able SPEAK request was playing and it was terminated, the
   response MUST contain an Active-Request-Id-List header field listing
   the request-ids of all SPEAK requests that were terminated.  The
   server generates no SPEAK-COMPLETE events for these requests.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 63]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-64" id="page-64" name="page-64"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   If there were no SPEAK requests terminated by the synthesizer
   resource as a result of the BARGE-IN-OCCURRED method, the server MUST
   respond to the BARGE-IN-OCCURRED with a status-code of 200 "Success",
   and the response MUST NOT contain an Active-Request-Id-List header
   field.

   If the synthesizer and recognizer resources are part of the same
   MRCPv2 session, they can be optimized for a quicker kill-on-barge-in
   response if the recognizer and synthesizer interact directly.  In
   these cases, the client MUST still react to a START-OF-INPUT event
   from the recognizer by invoking the BARGE-IN-OCCURRED method to the
   synthesizer.  The client MUST invoke the BARGE-IN-OCCURRED if it has
   any outstanding requests to the synthesizer resource in either the
   PENDING or IN-PROGRESS state.

   C-&gt;S: MRCP/2.0 ... SPEAK 543258
         Channel-Identifier:32AECB23433802@speechsynth
         Voice-gender:neutral
         Voice-Age:25
         Prosody-volume:medium
         Content-Type:application/ssml+xml
         Content-Length:...

         &lt;?xml version="1.0"?&gt;
           &lt;speak version="1.0"
                xmlns="http://www.w3.org/2001/10/synthesis"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                xml:lang="en-US"&gt;
            &lt;p&gt;
             &lt;s&gt;You have 4 new messages.&lt;/s&gt;
             &lt;s&gt;The first is from Stephanie Williams and arrived at
                &lt;break/&gt;
                &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.&lt;/s&gt;
             &lt;s&gt;The subject is
                &lt;prosody rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
            &lt;/p&gt;
           &lt;/speak&gt;

   S-&gt;C: MRCP/2.0 ... 543258 200 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857206027059

   C-&gt;S: MRCP/2.0 ... BARGE-IN-OCCURRED 543259
         Channel-Identifier:32AECB23433802@speechsynth
         Proxy-Sync-Id:987654321




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 64]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-65" id="page-65" name="page-65"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:MRCP/2.0 ... 543259 200 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Active-Request-Id-List:543258
         Speech-Marker:timestamp=857206039059

                         BARGE-IN-OCCURRED Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.9.%20%20PAUSE"></a><a class="selflink" href="#section-8.9" name="section-8.9">8.9</a>.  PAUSE</span>

   The PAUSE method from the client to the server tells the synthesizer
   resource to pause speech output if it is speaking something.  If a
   PAUSE method is issued on a session when a SPEAK is not active, the
   server MUST respond with a status-code of 402 "Method not valid in
   this state".  If a PAUSE method is issued on a session when a SPEAK
   is active and paused, the server MUST respond with a status-code of
   200 "Success".  If a SPEAK request was active, the server MUST return
   an Active-Request-Id-List header field whose value contains the
   request-id of the SPEAK request that was paused.

   C-&gt;S: MRCP/2.0 ... SPEAK 543258
         Channel-Identifier:32AECB23433802@speechsynth
         Voice-gender:neutral
         Voice-Age:25
         Prosody-volume:medium
         Content-Type:application/ssml+xml
         Content-Length:...

         &lt;?xml version="1.0"?&gt;
           &lt;speak version="1.0"
                xmlns="http://www.w3.org/2001/10/synthesis"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                xml:lang="en-US"&gt;
            &lt;p&gt;
             &lt;s&gt;You have 4 new messages.&lt;/s&gt;
             &lt;s&gt;The first is from Stephanie Williams and arrived at
                &lt;break/&gt;
                &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.&lt;/s&gt;

             &lt;s&gt;The subject is
                &lt;prosody rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
            &lt;/p&gt;
           &lt;/speak&gt;

   S-&gt;C: MRCP/2.0 ... 543258 200 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857206027059



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 65]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-66" id="page-66" name="page-66"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S: MRCP/2.0 ... PAUSE 543259
         Channel-Identifier:32AECB23433802@speechsynth

   S-&gt;C: MRCP/2.0 ... 543259 200 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Active-Request-Id-List:543258

                               PAUSE Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.10.%20%20RESUME"></a><a class="selflink" href="#section-8.10" name="section-8.10">8.10</a>.  RESUME</span>

   The RESUME method from the client to the server tells a paused
   synthesizer resource to resume speaking.  If a RESUME request is
   issued on a session with no active SPEAK request, the server MUST
   respond with a status-code of 402 "Method not valid in this state".
   If a RESUME request is issued on a session with an active SPEAK
   request that is speaking (i.e., not paused), the server MUST respond
   with a status-code of 200 "Success".  If a SPEAK request was paused,
   the server MUST return an Active-Request-Id-List header field whose
   value contains the request-id of the SPEAK request that was resumed.

   C-&gt;S: MRCP/2.0 ... SPEAK 543258
         Channel-Identifier:32AECB23433802@speechsynth
         Voice-gender:neutral
         Voice-age:25
         Prosody-volume:medium
         Content-Type:application/ssml+xml
         Content-Length:...

         &lt;?xml version="1.0"?&gt;
           &lt;speak version="1.0"
                xmlns="http://www.w3.org/2001/10/synthesis"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                xml:lang="en-US"&gt;
            &lt;p&gt;
             &lt;s&gt;You have 4 new messages.&lt;/s&gt;
             &lt;s&gt;The first is from Stephanie Williams and arrived at
                &lt;break/&gt;
                &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.&lt;/s&gt;
             &lt;s&gt;The subject is
                &lt;prosody rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
            &lt;/p&gt;
           &lt;/speak&gt;






<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 66]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-67" id="page-67" name="page-67"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C: MRCP/2.0 ... 543258 200 IN-PROGRESS@speechsynth
         Channel-Identifier:32AECB23433802
         Speech-Marker:timestamp=857206027059

   C-&gt;S: MRCP/2.0 ... PAUSE 543259
         Channel-Identifier:32AECB23433802@speechsynth

   S-&gt;C: MRCP/2.0 ... 543259 200 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Active-Request-Id-List:543258

   C-&gt;S: MRCP/2.0 ... RESUME 543260
         Channel-Identifier:32AECB23433802@speechsynth

   S-&gt;C: MRCP/2.0 ... 543260 200 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Active-Request-Id-List:543258

                              RESUME Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.11.%20%20CONTROL"></a><a class="selflink" href="#section-8.11" name="section-8.11">8.11</a>.  CONTROL</span>

   The CONTROL method from the client to the server tells a synthesizer
   that is speaking to modify what it is speaking on the fly.  This
   method is used to request the synthesizer to jump forward or backward
   in what it is speaking, change speaker rate, speaker parameters, etc.
   It affects only the currently IN-PROGRESS SPEAK request.  Depending
   on the implementation and capability of the synthesizer resource, it
   may or may not support the various modifications indicated by header
   fields in the CONTROL request.

   When a client invokes a CONTROL method to jump forward and the
   operation goes beyond the end of the active SPEAK method's text, the
   CONTROL request still succeeds.  The active SPEAK request completes
   and returns a SPEAK-COMPLETE event following the response to the
   CONTROL method.  If there are more SPEAK requests in the queue, the
   synthesizer resource starts at the beginning of the next SPEAK
   request in the queue.

   When a client invokes a CONTROL method to jump backward and the
   operation jumps to the beginning or beyond the beginning of the
   speech data of the active SPEAK method, the CONTROL request still
   succeeds.  The response to the CONTROL request contains the speak-
   restart header field, and the active SPEAK request restarts from the
   beginning of its speech data.






<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 67]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-68" id="page-68" name="page-68"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   These two behaviors can be used to rewind or fast-forward across
   multiple speech requests, if the client wants to break up a speech
   markup text into multiple SPEAK requests.

   If a SPEAK request was active when the CONTROL method was received,
   the server MUST return an Active-Request-Id-List header field
   containing the request-id of the SPEAK request that was active.

   C-&gt;S: MRCP/2.0 ... SPEAK 543258
         Channel-Identifier:32AECB23433802@speechsynth
         Voice-gender:neutral
         Voice-age:25
         Prosody-volume:medium
         Content-Type:application/ssml+xml
         Content-Length:...

         &lt;?xml version="1.0"?&gt;
           &lt;speak version="1.0"
                xmlns="http://www.w3.org/2001/10/synthesis"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                xml:lang="en-US"&gt;
            &lt;p&gt;
             &lt;s&gt;You have 4 new messages.&lt;/s&gt;
             &lt;s&gt;The first is from Stephanie Williams
                and arrived at &lt;break/&gt;
                &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.&lt;/s&gt;

             &lt;s&gt;The subject is &lt;prosody
                rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
            &lt;/p&gt;
           &lt;/speak&gt;

   S-&gt;C: MRCP/2.0 ... 543258 200 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857205016059

   C-&gt;S: MRCP/2.0 ... CONTROL 543259
         Channel-Identifier:32AECB23433802@speechsynth
         Prosody-rate:fast

   S-&gt;C: MRCP/2.0 ... 543259 200 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Active-Request-Id-List:543258
         Speech-Marker:timestamp=857206027059





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 68]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-69" id="page-69" name="page-69"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S: MRCP/2.0 ... CONTROL 543260
         Channel-Identifier:32AECB23433802@speechsynth
         Jump-Size:-15 Words

   S-&gt;C: MRCP/2.0 ... 543260 200 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Active-Request-Id-List:543258
         Speech-Marker:timestamp=857206039059

                              CONTROL Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.12.%20%20SPEAK-COMPLETE"></a><a class="selflink" href="#section-8.12" name="section-8.12">8.12</a>.  SPEAK-COMPLETE</span>

   This is an Event message from the synthesizer resource to the client
   that indicates the corresponding SPEAK request was completed.  The
   request-id field matches the request-id of the SPEAK request that
   initiated the speech that just completed.  The request-state field is
   set to COMPLETE by the server, indicating that this is the last event
   with the corresponding request-id.  The Completion-Cause header field
   specifies the cause code pertaining to the status and reason of
   request completion, such as the SPEAK completed normally or because
   of an error, kill-on-barge-in, etc.

   C-&gt;S: MRCP/2.0 ... SPEAK 543260
         Channel-Identifier:32AECB23433802@speechsynth
         Voice-gender:neutral
         Voice-age:25
         Prosody-volume:medium
         Content-Type:application/ssml+xml
         Content-Length:...

         &lt;?xml version="1.0"?&gt;
           &lt;speak version="1.0"
                xmlns="http://www.w3.org/2001/10/synthesis"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                xml:lang="en-US"&gt;
            &lt;p&gt;
             &lt;s&gt;You have 4 new messages.&lt;/s&gt;
             &lt;s&gt;The first is from Stephanie Williams
                and arrived at &lt;break/&gt;
                &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.&lt;/s&gt;
             &lt;s&gt;The subject is
                &lt;prosody rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
            &lt;/p&gt;
           &lt;/speak&gt;




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 69]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-70" id="page-70" name="page-70"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C: MRCP/2.0 ... 543260 200 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857206027059

   S-&gt;C: MRCP/2.0 ... SPEAK-COMPLETE 543260 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Completion-Cause:000 normal
         Speech-Marker:timestamp=857206039059

                          SPEAK-COMPLETE Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.13.%20%20SPEECH-MARKER"></a><a class="selflink" href="#section-8.13" name="section-8.13">8.13</a>.  SPEECH-MARKER</span>

   This is an event generated by the synthesizer resource to the client
   when the synthesizer encounters a marker tag in the speech markup it
   is currently processing.  The value of the request-id field MUST
   match that of the corresponding SPEAK request.  The request-state
   field MUST have the value "IN-PROGRESS" as the speech is still not
   complete.  The value of the speech marker tag hit, describing where
   the synthesizer is in the speech markup, MUST be returned in the
   Speech-Marker header field, along with an NTP timestamp indicating
   the instant in the output speech stream that the marker was
   encountered.  The SPEECH-MARKER event MUST also be generated with a
   null marker value and output NTP timestamp when a SPEAK request in
   Pending-State (i.e., in the queue) changes state to IN-PROGRESS and
   starts speaking.  The NTP timestamp MUST be synchronized with the RTP
   timestamp used to generate the speech stream through standard RTCP
   machinery.

   C-&gt;S: MRCP/2.0 ... SPEAK 543261
         Channel-Identifier:32AECB23433802@speechsynth
         Voice-gender:neutral
         Voice-age:25
         Prosody-volume:medium
         Content-Type:application/ssml+xml
         Content-Length:...

         &lt;?xml version="1.0"?&gt;
           &lt;speak version="1.0"
                xmlns="http://www.w3.org/2001/10/synthesis"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                   <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                xml:lang="en-US"&gt;
            &lt;p&gt;
             &lt;s&gt;You have 4 new messages.&lt;/s&gt;
             &lt;s&gt;The first is from Stephanie Williams
                and arrived at &lt;break/&gt;



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 70]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-71" id="page-71" name="page-71"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


                &lt;say-as interpret-as="vxml:time"&gt;0342p&lt;/say-as&gt;.&lt;/s&gt;
                &lt;mark name="here"/&gt;
             &lt;s&gt;The subject is
                &lt;prosody rate="-20%"&gt;ski trip&lt;/prosody&gt;
             &lt;/s&gt;
             &lt;mark name="ANSWER"/&gt;
            &lt;/p&gt;
           &lt;/speak&gt;

   S-&gt;C: MRCP/2.0 ... 543261 200 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857205015059

   S-&gt;C: MRCP/2.0 ... SPEECH-MARKER 543261 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857206027059;here

   S-&gt;C: MRCP/2.0 ... SPEECH-MARKER 543261 IN-PROGRESS
         Channel-Identifier:32AECB23433802@speechsynth
         Speech-Marker:timestamp=857206039059;ANSWER

   S-&gt;C: MRCP/2.0 ... SPEAK-COMPLETE 543261 COMPLETE
         Channel-Identifier:32AECB23433802@speechsynth
         Completion-Cause:000 normal
         Speech-Marker:timestamp=857207689259;ANSWER

                           SPEECH-MARKER Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.14.%20%20DEFINE-LEXICON"></a><a class="selflink" href="#section-8.14" name="section-8.14">8.14</a>.  DEFINE-LEXICON</span>

   The DEFINE-LEXICON method, from the client to the server, provides a
   lexicon and tells the server to load or unload the lexicon (see
   <a href="#section-8.4.16">Section 8.4.16</a>).  The media type of the lexicon is provided in the
   Content-Type header (see <a href="#section-8.5.2">Section 8.5.2</a>).  One such media type is
   "application/pls+xml" for the Pronunciation Lexicon Specification
   (PLS) [<a href="#ref-W3C.REC-pronunciation-lexicon-20081014">W3C.REC-pronunciation-lexicon-20081014</a>] [<a href="rfc4267.html" title='"The W3C Speech Interface Framework Media Types: application/voicexml+xml, application/ssml+xml, application/srgs, application/srgs+xml, application/ ccxml+xml, and application/pls+xml"'>RFC4267</a>].

   If the server resource is in the speaking or paused state, the server
   MUST respond with a failure status-code of 402 "Method not valid in
   this state".

   If the resource is in the idle state and is able to successfully
   load/unload the lexicon, the status MUST return a 200 "Success"
   status-code and the request-state MUST be COMPLETE.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 71]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-72" id="page-72" name="page-72"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   If the synthesizer could not define the lexicon for some reason, for
   example, because the download failed or the lexicon was in an
   unsupported form, the server MUST respond with a failure status-code
   of 407 and a Completion-Cause header field describing the failure
   reason.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Speech%20Recognizer%20Resource"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Speech Recognizer Resource</span>

   The speech recognizer resource receives an incoming voice stream and
   provides the client with an interpretation of what was spoken in
   textual form.

   The recognizer resource is controlled by MRCPv2 requests from the
   client.  The recognizer resource can both respond to these requests
   and generate asynchronous events to the client to indicate conditions
   of interest during the processing of the method.

   This section applies to the following resource types.

   1.  speechrecog

   2.  dtmfrecog

   The difference between the above two resources is in their level of
   support for recognition grammars.  The "dtmfrecog" resource type is
   capable of recognizing only DTMF digits and hence accepts only DTMF
   grammars.  It only generates barge-in for DTMF inputs and ignores
   speech.  The "speechrecog" resource type can recognize regular speech
   as well as DTMF digits and hence MUST support grammars describing
   either speech or DTMF.  This resource generates barge-in events for
   speech and/or DTMF.  By analyzing the grammars that are activated by
   the RECOGNIZE method, it determines if a barge-in should occur for
   speech and/or DTMF.  When the recognizer decides it needs to generate
   a barge-in, it also generates a START-OF-INPUT event to the client.
   The recognizer resource MAY support recognition in the normal or
   hotword modes or both (although note that a single "speechrecog"
   resource does not perform normal and hotword mode recognition
   simultaneously).  For implementations where a single recognizer
   resource does not support both modes, or simultaneous normal and
   hotword recognition is desired, the two modes can be invoked through
   separate resources allocated to the same SIP dialog (with different
   MRCP session identifiers) and share the RTP audio feed.

   The capabilities of the recognizer resource are enumerated below:

   Normal Mode Recognition  Normal mode recognition tries to match all
      of the speech or DTMF against the grammar and returns a no-match
      status if the input fails to match or the method times out.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 72]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-73" id="page-73" name="page-73"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Hotword Mode Recognition  Hotword mode is where the recognizer looks
      for a match against specific speech grammar or DTMF sequence and
      ignores speech or DTMF that does not match.  The recognition
      completes only if there is a successful match of grammar, if the
      client cancels the request, or if there is a non-input or
      recognition timeout.

   Voice Enrolled Grammars  A recognizer resource MAY optionally support
      Voice Enrolled Grammars.  With this functionality, enrollment is
      performed using a person's voice.  For example, a list of contacts
      can be created and maintained by recording the person's names
      using the caller's voice.  This technique is sometimes also called
      speaker-dependent recognition.

   Interpretation  A recognizer resource MAY be employed strictly for
      its natural language interpretation capabilities by supplying it
      with a text string as input instead of speech.  In this mode, the
      resource takes text as input and produces an "interpretation" of
      the input according to the supplied grammar.

   Voice enrollment has the concept of an enrollment session.  A session
   to add a new phrase to a personal grammar involves the initial
   enrollment followed by a repeat of enough utterances before
   committing the new phrase to the personal grammar.  Each time an
   utterance is recorded, it is compared for similarity with the other
   samples and a clash test is performed against other entries in the
   personal grammar to ensure there are no similar and confusable
   entries.

   Enrollment is done using a recognizer resource.  Controlling which
   utterances are to be considered for enrollment of a new phrase is
   done by setting a header field (see <a href="#section-9.4.39">Section 9.4.39</a>) in the Recognize
   request.

   Interpretation is accomplished through the INTERPRET method
   (<a href="#section-9.20">Section 9.20</a>) and the Interpret-Text header field (<a href="#section-9.4.30">Section 9.4.30</a>).















<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 73]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-74" id="page-74" name="page-74"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Recognizer%20State%20Machine"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Recognizer State Machine</span>

   The recognizer resource maintains a state machine to process MRCPv2
   requests from the client.

   Idle                   Recognizing               Recognized
   State                  State                     State
    |                       |                          |
    |---------RECOGNIZE----&gt;|---RECOGNITION-COMPLETE--&gt;|
    |&lt;------STOP------------|&lt;-----RECOGNIZE-----------|
    |                       |                          |
    |              |--------|              |-----------|
    |       START-OF-INPUT  |       GET-RESULT         |
    |              |-------&gt;|              |----------&gt;|
    |------------|          |                          |
    |      DEFINE-GRAMMAR   |----------|               |
    |&lt;-----------|          | START-INPUT-TIMERS       |
    |                       |&lt;---------|               |
    |------|                |                          |
    |  INTERPRET            |                          |
    |&lt;-----|                |------|                   |
    |                       |   RECOGNIZE              |
    |-------|               |&lt;-----|                   |
    |      STOP                                        |
    |&lt;------|                                          |
    |&lt;-------------------STOP--------------------------|
    |&lt;-------------------DEFINE-GRAMMAR----------------|

                         Recognizer State Machine

   If a recognizer resource supports voice enrolled grammars, starting
   an enrollment session does not change the state of the recognizer
   resource.  Once an enrollment session is started, then utterances are
   enrolled by calling the RECOGNIZE method repeatedly.  The state of
   the speech recognizer resource goes from IDLE to RECOGNIZING state
   each time RECOGNIZE is called.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20Recognizer%20Methods"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  Recognizer Methods</span>

   The recognizer supports the following methods.

   recognizer-method    =  recog-only-method
                        /  enrollment-method








<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 74]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-75" id="page-75" name="page-75"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   recog-only-method    =  "DEFINE-GRAMMAR"
                        /  "RECOGNIZE"
                        /  "INTERPRET"
                        /  "GET-RESULT"
                        /  "START-INPUT-TIMERS"
                        /  "STOP"

   It is OPTIONAL for a recognizer resource to support voice enrolled
   grammars.  If the recognizer resource does support voice enrolled
   grammars, it MUST support the following methods.

   enrollment-method    =  "START-PHRASE-ENROLLMENT"
                        /  "ENROLLMENT-ROLLBACK"
                        /  "END-PHRASE-ENROLLMENT"
                        /  "MODIFY-PHRASE"
                        /  "DELETE-PHRASE"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.3.%20%20Recognizer%20Events"></a><a class="selflink" href="#section-9.3" name="section-9.3">9.3</a>.  Recognizer Events</span>

   The recognizer can generate the following events.

   recognizer-event     =  "START-OF-INPUT"
                        /  "RECOGNITION-COMPLETE"
                        /  "INTERPRETATION-COMPLETE"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.4.%20%20Recognizer%20Header%20Fields"></a><a class="selflink" href="#section-9.4" name="section-9.4">9.4</a>.  Recognizer Header Fields</span>

   A recognizer message can contain header fields containing request
   options and information to augment the Method, Response, or Event
   message it is associated with.

   recognizer-header    =  recog-only-header
                        /  enrollment-header

   recog-only-header    =  confidence-threshold
                        /  sensitivity-level
                        /  speed-vs-accuracy
                        /  n-best-list-length
                        /  no-input-timeout
                        /  input-type
                        /  recognition-timeout
                        /  waveform-uri
                        /  input-waveform-uri
                        /  completion-cause
                        /  completion-reason
                        /  recognizer-context-block
                        /  start-input-timers
                        /  speech-complete-timeout



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 75]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-76" id="page-76" name="page-76"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


                        /  speech-incomplete-timeout
                        /  dtmf-interdigit-timeout
                        /  dtmf-term-timeout
                        /  dtmf-term-char
                        /  failed-uri
                        /  failed-uri-cause
                        /  save-waveform
                        /  media-type
                        /  new-audio-channel
                        /  speech-language
                        /  ver-buffer-utterance
                        /  recognition-mode
                        /  cancel-if-queue
                        /  hotword-max-duration
                        /  hotword-min-duration
                        /  interpret-text
                        /  dtmf-buffer-time
                        /  clear-dtmf-buffer
                        /  early-no-match

   If a recognizer resource supports voice enrolled grammars, the
   following header fields are also used.

   enrollment-header    =  num-min-consistent-pronunciations
                        /  consistency-threshold
                        /  clash-threshold
                        /  personal-grammar-uri
                        /  enroll-utterance
                        /  phrase-id
                        /  phrase-nl
                        /  weight
                        /  save-best-waveform
                        /  new-phrase-id
                        /  confusable-phrases-uri
                        /  abort-phrase-enrollment

   For enrollment-specific header fields that can appear as part of
   SET-PARAMS or GET-PARAMS methods, the following general rule applies:
   the START-PHRASE-ENROLLMENT method MUST be invoked before these
   header fields may be set through the SET-PARAMS method or retrieved
   through the GET-PARAMS method.

   Note that the Waveform-URI header field of the Recognizer resource
   can also appear in the response to the END-PHRASE-ENROLLMENT method.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 76]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-77" id="page-77" name="page-77"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.1.%20%20Confidence-Threshold"></a><a class="selflink" href="#section-9.4.1" name="section-9.4.1">9.4.1</a>.  Confidence-Threshold</span>

   When a recognizer resource recognizes or matches a spoken phrase with
   some portion of the grammar, it associates a confidence level with
   that match.  The Confidence-Threshold header field tells the
   recognizer resource what confidence level the client considers a
   successful match.  This is a float value between 0.0-1.0 indicating
   the recognizer's confidence in the recognition.  If the recognizer
   determines that there is no candidate match with a confidence that is
   greater than the confidence threshold, then it MUST return no-match
   as the recognition result.  This header field MAY occur in RECOGNIZE,
   SET-PARAMS, or GET-PARAMS.  The default value for this header field
   is implementation specific, as is the interpretation of any specific
   value for this header field.  Although values for servers from
   different vendors are not comparable, it is expected that clients
   will tune this value over time for a given server.

   confidence-threshold     =  "Confidence-Threshold" ":" FLOAT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.2.%20%20Sensitivity-Level"></a><a class="selflink" href="#section-9.4.2" name="section-9.4.2">9.4.2</a>.  Sensitivity-Level</span>

   To filter out background noise and not mistake it for speech, the
   recognizer resource supports a variable level of sound sensitivity.
   The Sensitivity-Level header field is a float value between 0.0 and
   1.0 and allows the client to set the sensitivity level for the
   recognizer.  This header field MAY occur in RECOGNIZE, SET-PARAMS, or
   GET-PARAMS.  A higher value for this header field means higher
   sensitivity.  The default value for this header field is
   implementation specific, as is the interpretation of any specific
   value for this header field.  Although values for servers from
   different vendors are not comparable, it is expected that clients
   will tune this value over time for a given server.

   sensitivity-level        =  "Sensitivity-Level" ":" FLOAT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.3.%20%20Speed-Vs-Accuracy"></a><a class="selflink" href="#section-9.4.3" name="section-9.4.3">9.4.3</a>.  Speed-Vs-Accuracy</span>

   Depending on the implementation and capability of the recognizer
   resource it may be tunable towards Performance or Accuracy.  Higher
   accuracy may mean more processing and higher CPU utilization, meaning
   fewer active sessions per server and vice versa.  The value is a
   float between 0.0 and 1.0.  A value of 0.0 means fastest recognition.
   A value of 1.0 means best accuracy.  This header field MAY occur in
   RECOGNIZE, SET-PARAMS, or GET-PARAMS.  The default value for this







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 77]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-78" id="page-78" name="page-78"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   header field is implementation specific.  Although values for servers
   from different vendors are not comparable, it is expected that
   clients will tune this value over time for a given server.

   speed-vs-accuracy        =  "Speed-Vs-Accuracy" ":" FLOAT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.4.%20%20N-Best-List-Length"></a><a class="selflink" href="#section-9.4.4" name="section-9.4.4">9.4.4</a>.  N-Best-List-Length</span>

   When the recognizer matches an incoming stream with the grammar, it
   may come up with more than one alternative match because of
   confidence levels in certain words or conversation paths.  If this
   header field is not specified, by default, the recognizer resource
   returns only the best match above the confidence threshold.  The
   client, by setting this header field, can ask the recognition
   resource to send it more than one alternative.  All alternatives must
   still be above the Confidence-Threshold.  A value greater than one
   does not guarantee that the recognizer will provide the requested
   number of alternatives.  This header field MAY occur in RECOGNIZE,
   SET-PARAMS, or GET-PARAMS.  The minimum value for this header field
   is 1.  The default value for this header field is 1.

   n-best-list-length       =  "N-Best-List-Length" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.5.%20%20Input-Type"></a><a class="selflink" href="#section-9.4.5" name="section-9.4.5">9.4.5</a>.  Input-Type</span>

   When the recognizer detects barge-in-able input and generates a
   START-OF-INPUT event, that event MUST carry this header field to
   specify whether the input that caused the barge-in was DTMF or
   speech.

   input-type         =  "Input-Type" ":"  inputs CRLF
   inputs             =  "speech" / "dtmf"

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.6.%20%20No-Input-Timeout"></a><a class="selflink" href="#section-9.4.6" name="section-9.4.6">9.4.6</a>.  No-Input-Timeout</span>

   When recognition is started and there is no speech detected for a
   certain period of time, the recognizer can send a RECOGNITION-
   COMPLETE event to the client with a Completion-Cause of "no-input-
   timeout" and terminate the recognition operation.  The client can use
   the No-Input-Timeout header field to set this timeout.  The value is
   in milliseconds and can range from 0 to an implementation-specific
   maximum value.  This header field MAY occur in RECOGNIZE, SET-PARAMS,
   or GET-PARAMS.  The default value is implementation specific.

   no-input-timeout         =  "No-Input-Timeout" ":" 1*19DIGIT CRLF






<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 78]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-79" id="page-79" name="page-79"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.7.%20%20Recognition-Timeout"></a><a class="selflink" href="#section-9.4.7" name="section-9.4.7">9.4.7</a>.  Recognition-Timeout</span>

   When recognition is started and there is no match for a certain
   period of time, the recognizer can send a RECOGNITION-COMPLETE event
   to the client and terminate the recognition operation.  The
   Recognition-Timeout header field allows the client to set this
   timeout value.  The value is in milliseconds.  The value for this
   header field ranges from 0 to an implementation-specific maximum
   value.  The default value is 10 seconds.  This header field MAY occur
   in RECOGNIZE, SET-PARAMS, or GET-PARAMS.

   recognition-timeout      =  "Recognition-Timeout" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.8.%20%20Waveform-URI"></a><a class="selflink" href="#section-9.4.8" name="section-9.4.8">9.4.8</a>.  Waveform-URI</span>

   If the Save-Waveform header field is set to "true", the recognizer
   MUST record the incoming audio stream of the recognition into a
   stored form and provide a URI for the client to access it.  This
   header field MUST be present in the RECOGNITION-COMPLETE event if the
   Save-Waveform header field was set to "true".  The value of the
   header field MUST be empty if there was some error condition
   preventing the server from recording.  Otherwise, the URI generated
   by the server MUST be unambiguous across the server and all its
   recognition sessions.  The content associated with the URI MUST be
   available to the client until the MRCPv2 session terminates.

   Similarly, if the Save-Best-Waveform header field is set to "true",
   the recognizer MUST save the audio stream for the best repetition of
   the phrase that was used during the enrollment session.  The
   recognizer MUST then record the recognized audio and make it
   available to the client by returning a URI in the Waveform-URI header
   field in the response to the END-PHRASE-ENROLLMENT method.  The value
   of the header field MUST be empty if there was some error condition
   preventing the server from recording.  Otherwise, the URI generated
   by the server MUST be unambiguous across the server and all its
   recognition sessions.  The content associated with the URI MUST be
   available to the client until the MRCPv2 session terminates.  See the
   discussion on the sensitivity of saved waveforms in <a href="#section-12">Section 12</a>.

   The server MUST also return the size in octets and the duration in
   milliseconds of the recorded audio waveform as parameters associated
   with the header field.

   waveform-uri             =  "Waveform-URI" ":" ["&lt;" uri "&gt;"
                               ";" "size" "=" 1*19DIGIT
                               ";" "duration" "=" 1*19DIGIT] CRLF





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 79]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-80" id="page-80" name="page-80"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.9.%20%20Media-Type"></a><a class="selflink" href="#section-9.4.9" name="section-9.4.9">9.4.9</a>.  Media-Type</span>

   This header field MAY be specified in the SET-PARAMS, GET-PARAMS, or
   the RECOGNIZE methods and tells the server resource the media type in
   which to store captured audio or video, such as the one captured and
   returned by the Waveform-URI header field.

   media-type               =  "Media-Type" ":" media-type-value
                               CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.10.%20%20Input-Waveform-URI"></a><a class="selflink" href="#section-9.4.10" name="section-9.4.10">9.4.10</a>.  Input-Waveform-URI</span>

   This optional header field specifies a URI pointing to audio content
   to be processed by the RECOGNIZE operation.  This enables the client
   to request recognition from a specified buffer or audio file.

   input-waveform-uri       =  "Input-Waveform-URI" ":" uri CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.11.%20%20Completion-Cause"></a><a class="selflink" href="#section-9.4.11" name="section-9.4.11">9.4.11</a>.  Completion-Cause</span>

   This header field MUST be part of a RECOGNITION-COMPLETE event coming
   from the recognizer resource to the client.  It indicates the reason
   behind the RECOGNIZE method completion.  This header field MUST be
   sent in the DEFINE-GRAMMAR and RECOGNIZE responses, if they return
   with a failure status and a COMPLETE state.  In the ABNF below, the
   cause-code contains a numerical value selected from the Cause-Code
   column of the following table.  The cause-name contains the
   corresponding token selected from the Cause-Name column.

   completion-cause         =  "Completion-Cause" ":" cause-code SP
                               cause-name CRLF
   cause-code               =  3DIGIT
   cause-name               =  *VCHAR


















<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 80]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-81" id="page-81" name="page-81"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   +------------+-----------------------+------------------------------+
   | Cause-Code | Cause-Name            | Description                  |
   +------------+-----------------------+------------------------------+
   | 000        | success               | RECOGNIZE completed with a   |
   |            |                       | match or DEFINE-GRAMMAR      |
   |            |                       | succeeded in downloading and |
   |            |                       | compiling the grammar.       |
   |            |                       |                              |
   | 001        | no-match              | RECOGNIZE completed, but no  |
   |            |                       | match was found.             |
   |            |                       |                              |
   | 002        | no-input-timeout      | RECOGNIZE completed without  |
   |            |                       | a match due to a             |
   |            |                       | no-input-timeout.            |
   |            |                       |                              |
   | 003        | hotword-maxtime       | RECOGNIZE in hotword mode    |
   |            |                       | completed without a match    |
   |            |                       | due to a                     |
   |            |                       | recognition-timeout.         |
   |            |                       |                              |
   | 004        | grammar-load-failure  | RECOGNIZE failed due to      |
   |            |                       | grammar load failure.        |
   |            |                       |                              |
   | 005        | grammar-compilation-  | RECOGNIZE failed due to      |
   |            | failure               | grammar compilation failure. |
   |            |                       |                              |
   | 006        | recognizer-error      | RECOGNIZE request terminated |
   |            |                       | prematurely due to a         |
   |            |                       | recognizer error.            |
   |            |                       |                              |
   | 007        | speech-too-early      | RECOGNIZE request terminated |
   |            |                       | because speech was too       |
   |            |                       | early. This happens when the |
   |            |                       | audio stream is already      |
   |            |                       | "in-speech" when the         |
   |            |                       | RECOGNIZE request was        |
   |            |                       | received.                    |
   |            |                       |                              |
   | 008        | success-maxtime       | RECOGNIZE request terminated |
   |            |                       | because speech was too long  |
   |            |                       | but whatever was spoken till |
   |            |                       | that point was a full match. |
   |            |                       |                              |
   | 009        | uri-failure           | Failure accessing a URI.     |
   |            |                       |                              |
   | 010        | language-unsupported  | Language not supported.      |
   |            |                       |                              |




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 81]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-82" id="page-82" name="page-82"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   | 011        | cancelled             | A new RECOGNIZE cancelled    |
   |            |                       | this one, or a prior         |
   |            |                       | RECOGNIZE failed while this  |
   |            |                       | one was still in the queue.  |
   |            |                       |                              |
   | 012        | semantics-failure     | Recognition succeeded, but   |
   |            |                       | semantic interpretation of   |
   |            |                       | the recognized input failed. |
   |            |                       | The RECOGNITION-COMPLETE     |
   |            |                       | event MUST contain the       |
   |            |                       | Recognition result with only |
   |            |                       | input text and no            |
   |            |                       | interpretation.              |
   |            |                       |                              |
   | 013        | partial-match         | Speech Incomplete Timeout    |
   |            |                       | expired before there was a   |
   |            |                       | full match. But whatever was |
   |            |                       | spoken till that point was a |
   |            |                       | partial match to one or more |
   |            |                       | grammars.                    |
   |            |                       |                              |
   | 014        | partial-match-maxtime | The Recognition-Timeout      |
   |            |                       | expired before full match    |
   |            |                       | was achieved. But whatever   |
   |            |                       | was spoken till that point   |
   |            |                       | was a partial match to one   |
   |            |                       | or more grammars.            |
   |            |                       |                              |
   | 015        | no-match-maxtime      | The Recognition-Timeout      |
   |            |                       | expired. Whatever was spoken |
   |            |                       | till that point did not      |
   |            |                       | match any of the grammars.   |
   |            |                       | This cause could also be     |
   |            |                       | returned if the recognizer   |
   |            |                       | does not support detecting   |
   |            |                       | partial grammar matches.     |
   |            |                       |                              |
   | 016        | grammar-definition-   | Any DEFINE-GRAMMAR error     |
   |            | failure               | other than                   |
   |            |                       | grammar-load-failure and     |
   |            |                       | grammar-compilation-failure. |
   +------------+-----------------------+------------------------------+









<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 82]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-83" id="page-83" name="page-83"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.12.%20%20Completion-Reason"></a><a class="selflink" href="#section-9.4.12" name="section-9.4.12">9.4.12</a>.  Completion-Reason</span>

   This header field MAY be specified in a RECOGNITION-COMPLETE event
   coming from the recognizer resource to the client.  This contains the
   reason text behind the RECOGNIZE request completion.  The server uses
   this header field to communicate text describing the reason for the
   failure, such as the specific error encountered in parsing a grammar
   markup.

   The completion reason text is provided for client use in logs and for
   debugging and instrumentation purposes.  Clients MUST NOT interpret
   the completion reason text.

   completion-reason        =  "Completion-Reason" ":"
                               quoted-string CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.13.%20%20Recognizer-Context-Block"></a><a class="selflink" href="#section-9.4.13" name="section-9.4.13">9.4.13</a>.  Recognizer-Context-Block</span>

   This header field MAY be sent as part of the SET-PARAMS or GET-PARAMS
   request.  If the GET-PARAMS method contains this header field with no
   value, then it is a request to the recognizer to return the
   recognizer context block.  The response to such a message MAY contain
   a recognizer context block as a typed media message body.  If the
   server returns a recognizer context block, the response MUST contain
   this header field and its value MUST match the Content-ID of the
   corresponding media block.

   If the SET-PARAMS method contains this header field, it MUST also
   contain a message body containing the recognizer context data and a
   Content-ID matching this header field value.  This Content-ID MUST
   match the Content-ID that came with the context data during the
   GET-PARAMS operation.

   An implementation choosing to use this mechanism to hand off
   recognizer context data between servers MUST distinguish its
   implementation-specific block of data by using an IANA-registered
   content type in the IANA Media Type vendor tree.

   recognizer-context-block  =  "Recognizer-Context-Block" ":"
                                [1*VCHAR] CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.14.%20%20Start-Input-Timers"></a><a class="selflink" href="#section-9.4.14" name="section-9.4.14">9.4.14</a>.  Start-Input-Timers</span>

   This header field MAY be sent as part of the RECOGNIZE request.  A
   value of false tells the recognizer to start recognition but not to
   start the no-input timer yet.  The recognizer MUST NOT start the
   timers until the client sends a START-INPUT-TIMERS request to the
   recognizer.  This is useful in the scenario when the recognizer and



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 83]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-84" id="page-84" name="page-84"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   synthesizer engines are not part of the same session.  In such
   configurations, when a kill-on-barge-in prompt is being played (see
   <a href="#section-8.4.2">Section 8.4.2</a>), the client wants the RECOGNIZE request to be
   simultaneously active so that it can detect and implement kill-on-
   barge-in.  However, the recognizer SHOULD NOT start the no-input
   timers until the prompt is finished.  The default value is "true".

   start-input-timers  =  "Start-Input-Timers" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.15.%20%20Speech-Complete-Timeout"></a><a class="selflink" href="#section-9.4.15" name="section-9.4.15">9.4.15</a>.  Speech-Complete-Timeout</span>

   This header field specifies the length of silence required following
   user speech before the speech recognizer finalizes a result (either
   accepting it or generating a no-match result).  The Speech-Complete-
   Timeout value applies when the recognizer currently has a complete
   match against an active grammar, and specifies how long the
   recognizer MUST wait for more input before declaring a match.  By
   contrast, the Speech-Incomplete-Timeout is used when the speech is an
   incomplete match to an active grammar.  The value is in milliseconds.

  speech-complete-timeout = "Speech-Complete-Timeout" ":" 1*19DIGIT CRLF

   A long Speech-Complete-Timeout value delays the result to the client
   and therefore makes the application's response to a user slow.  A
   short Speech-Complete-Timeout may lead to an utterance being broken
   up inappropriately.  Reasonable speech complete timeout values are
   typically in the range of 0.3 seconds to 1.0 seconds.  The value for
   this header field ranges from 0 to an implementation-specific maximum
   value.  The default value for this header field is implementation
   specific.  This header field MAY occur in RECOGNIZE, SET-PARAMS, or
   GET-PARAMS.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.16.%20%20Speech-Incomplete-Timeout"></a><a class="selflink" href="#section-9.4.16" name="section-9.4.16">9.4.16</a>.  Speech-Incomplete-Timeout</span>

   This header field specifies the required length of silence following
   user speech after which a recognizer finalizes a result.  The
   incomplete timeout applies when the speech prior to the silence is an
   incomplete match of all active grammars.  In this case, once the
   timeout is triggered, the partial result is rejected (with a
   Completion-Cause of "partial-match").  The value is in milliseconds.
   The value for this header field ranges from 0 to an implementation-
   specific maximum value.  The default value for this header field is
   implementation specific.

   speech-incomplete-timeout = "Speech-Incomplete-Timeout" ":" 1*19DIGIT
                                CRLF





<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 84]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-85" id="page-85" name="page-85"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   The Speech-Incomplete-Timeout also applies when the speech prior to
   the silence is a complete match of an active grammar, but where it is
   possible to speak further and still match the grammar.  By contrast,
   the Speech-Complete-Timeout is used when the speech is a complete
   match to an active grammar and no further spoken words can continue
   to represent a match.

   A long Speech-Incomplete-Timeout value delays the result to the
   client and therefore makes the application's response to a user slow.
   A short Speech-Incomplete-Timeout may lead to an utterance being
   broken up inappropriately.

   The Speech-Incomplete-Timeout is usually longer than the Speech-
   Complete-Timeout to allow users to pause mid-utterance (for example,
   to breathe).  This header field MAY occur in RECOGNIZE, SET-PARAMS,
   or GET-PARAMS.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.17.%20%20DTMF-Interdigit-Timeout"></a><a class="selflink" href="#section-9.4.17" name="section-9.4.17">9.4.17</a>.  DTMF-Interdigit-Timeout</span>

   This header field specifies the inter-digit timeout value to use when
   recognizing DTMF input.  The value is in milliseconds.  The value for
   this header field ranges from 0 to an implementation-specific maximum
   value.  The default value is 5 seconds.  This header field MAY occur
   in RECOGNIZE, SET-PARAMS, or GET-PARAMS.

  dtmf-interdigit-timeout = "DTMF-Interdigit-Timeout" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.18.%20%20DTMF-Term-Timeout"></a><a class="selflink" href="#section-9.4.18" name="section-9.4.18">9.4.18</a>.  DTMF-Term-Timeout</span>

   This header field specifies the terminating timeout to use when
   recognizing DTMF input.  The DTMF-Term-Timeout applies only when no
   additional input is allowed by the grammar; otherwise, the
   DTMF-Interdigit-Timeout applies.  The value is in milliseconds.  The
   value for this header field ranges from 0 to an implementation-
   specific maximum value.  The default value is 10 seconds.  This
   header field MAY occur in RECOGNIZE, SET-PARAMS, or GET-PARAMS.

   dtmf-term-timeout        =  "DTMF-Term-Timeout" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.19.%20%20DTMF-Term-Char"></a><a class="selflink" href="#section-9.4.19" name="section-9.4.19">9.4.19</a>.  DTMF-Term-Char</span>

   This header field specifies the terminating DTMF character for DTMF
   input recognition.  The default value is NULL, which is indicated by
   an empty header field value.  This header field MAY occur in
   RECOGNIZE, SET-PARAMS, or GET-PARAMS.

   dtmf-term-char           =  "DTMF-Term-Char" ":" VCHAR CRLF




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 85]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-86" id="page-86" name="page-86"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.20.%20%20Failed-URI"></a><a class="selflink" href="#section-9.4.20" name="section-9.4.20">9.4.20</a>.  Failed-URI</span>

   When a recognizer needs to fetch or access a URI and the access
   fails, the server SHOULD provide the failed URI in this header field
   in the method response, unless there are multiple URI failures, in
   which case one of the failed URIs MUST be provided in this header
   field in the method response.

   failed-uri               =  "Failed-URI" ":" absoluteURI CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.21.%20%20Failed-URI-Cause"></a><a class="selflink" href="#section-9.4.21" name="section-9.4.21">9.4.21</a>.  Failed-URI-Cause</span>

   When a recognizer method needs a recognizer to fetch or access a URI
   and the access fails, the server MUST provide the URI-specific or
   protocol-specific response code for the URI in the Failed-URI header
   field through this header field in the method response.  The value
   encoding is UTF-8 (<a href="rfc3629.html">RFC 3629</a> [<a href="rfc3629.html" title='"UTF-8, a transformation format of ISO 10646"'>RFC3629</a>]) to accommodate any access
   protocol, some of which might have a response string instead of a
   numeric response code.

   failed-uri-cause         =  "Failed-URI-Cause" ":" 1*UTFCHAR CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.22.%20%20Save-Waveform"></a><a class="selflink" href="#section-9.4.22" name="section-9.4.22">9.4.22</a>.  Save-Waveform</span>

   This header field allows the client to request the recognizer
   resource to save the audio input to the recognizer.  The recognizer
   resource MUST then attempt to record the recognized audio, without
   endpointing, and make it available to the client in the form of a URI
   returned in the Waveform-URI header field in the RECOGNITION-COMPLETE
   event.  If there was an error in recording the stream or the audio
   content is otherwise not available, the recognizer MUST return an
   empty Waveform-URI header field.  The default value for this field is
   "false".  This header field MAY occur in RECOGNIZE, SET-PARAMS, or
   GET-PARAMS.  See the discussion on the sensitivity of saved waveforms
   in <a href="#section-12">Section 12</a>.

   save-waveform            =  "Save-Waveform" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.23.%20%20New-Audio-Channel"></a><a class="selflink" href="#section-9.4.23" name="section-9.4.23">9.4.23</a>.  New-Audio-Channel</span>

   This header field MAY be specified in a RECOGNIZE request and allows
   the client to tell the server that, from this point on, further input
   audio comes from a different audio source, channel, or speaker.  If
   the recognizer resource had collected any input statistics or
   adaptation state, the recognizer resource MUST do what is appropriate
   for the specific recognition technology, which includes but is not
   limited to discarding any collected input statistics or adaptation
   state before starting the RECOGNIZE request.  Note that if there are



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 86]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-87" id="page-87" name="page-87"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   multiple resources that are sharing a media stream and are collecting
   or using this data, and the client issues this header field to one of
   the resources, the reset operation applies to all resources that use
   the shared media stream.  This helps in a number of use cases,
   including where the client wishes to reuse an open recognition
   session with an existing media session for multiple telephone calls.

   new-audio-channel        =  "New-Audio-Channel" ":" BOOLEAN
                               CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.24.%20%20Speech-Language"></a><a class="selflink" href="#section-9.4.24" name="section-9.4.24">9.4.24</a>.  Speech-Language</span>

   This header field specifies the language of recognition grammar data
   within a session or request, if it is not specified within the data.
   The value of this header field MUST follow <a href="rfc5646.html">RFC 5646</a> [<a href="rfc5646.html" title='"Tags for Identifying Languages"'>RFC5646</a>] for its
   values.  This MAY occur in DEFINE-GRAMMAR, RECOGNIZE, SET-PARAMS, or
   GET-PARAMS requests.

   speech-language          =  "Speech-Language" ":" 1*VCHAR CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.25.%20%20Ver-Buffer-Utterance"></a><a class="selflink" href="#section-9.4.25" name="section-9.4.25">9.4.25</a>.  Ver-Buffer-Utterance</span>

   This header field lets the client request the server to buffer the
   utterance associated with this recognition request into a buffer
   available to a co-resident verifier resource.  The buffer is shared
   across resources within a session and is allocated when a verifier
   resource is added to this session.  The client MUST NOT send this
   header field unless a verifier resource is instantiated for the
   session.  The buffer is released when the verifier resource is
   released from the session.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.26.%20%20Recognition-Mode"></a><a class="selflink" href="#section-9.4.26" name="section-9.4.26">9.4.26</a>.  Recognition-Mode</span>

   This header field specifies what mode the RECOGNIZE method will
   operate in.  The value choices are "normal" or "hotword".  If the
   value is "normal", the RECOGNIZE starts matching speech and DTMF to
   the grammars specified in the RECOGNIZE request.  If any portion of
   the speech does not match the grammar, the RECOGNIZE command
   completes with a no-match status.  Timers may be active to detect
   speech in the audio (see <a href="#section-9.4.14">Section 9.4.14</a>), so the RECOGNIZE method may
   complete because of a timeout waiting for speech.  If the value of
   this header field is "hotword", the RECOGNIZE method operates in
   hotword mode, where it only looks for the particular keywords or DTMF








<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 87]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-88" id="page-88" name="page-88"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   sequences specified in the grammar and ignores silence or other
   speech in the audio stream.  The default value for this header field
   is "normal".  This header field MAY occur on the RECOGNIZE method.

   recognition-mode         =  "Recognition-Mode" ":"
                               "normal" / "hotword" CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.27.%20%20Cancel-If-Queue"></a><a class="selflink" href="#section-9.4.27" name="section-9.4.27">9.4.27</a>.  Cancel-If-Queue</span>

   This header field specifies what will happen if the client attempts
   to invoke another RECOGNIZE method when this RECOGNIZE request is
   already in progress for the resource.  The value for this header
   field is a Boolean.  A value of "true" means the server MUST
   terminate this RECOGNIZE request, with a Completion-Cause of
   "cancelled", if the client issues another RECOGNIZE request for the
   same resource.  A value of "false" for this header field indicates to
   the server that this RECOGNIZE request will continue to completion,
   and if the client issues more RECOGNIZE requests to the same
   resource, they are queued.  When the currently active RECOGNIZE
   request is stopped or completes with a successful match, the first
   RECOGNIZE method in the queue becomes active.  If the current
   RECOGNIZE fails, all RECOGNIZE methods in the pending queue are
   cancelled, and each generates a RECOGNITION-COMPLETE event with a
   Completion-Cause of "cancelled".  This header field MUST be present
   in every RECOGNIZE request.  There is no default value.

   cancel-if-queue          =  "Cancel-If-Queue" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.28.%20%20Hotword-Max-Duration"></a><a class="selflink" href="#section-9.4.28" name="section-9.4.28">9.4.28</a>.  Hotword-Max-Duration</span>

   This header field MAY be sent in a hotword mode RECOGNIZE request.
   It specifies the maximum length of an utterance (in seconds) that
   will be considered for hotword recognition.  This header field, along
   with Hotword-Min-Duration, can be used to tune performance by
   preventing the recognizer from evaluating utterances that are too
   short or too long to be one of the hotwords in the grammar(s).  The
   value is in milliseconds.  The default is implementation dependent.
   If present in a RECOGNIZE request specifying a mode other than
   "hotword", the header field is ignored.

   hotword-max-duration     =  "Hotword-Max-Duration" ":" 1*19DIGIT
                               CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.29.%20%20Hotword-Min-Duration"></a><a class="selflink" href="#section-9.4.29" name="section-9.4.29">9.4.29</a>.  Hotword-Min-Duration</span>

   This header field MAY be sent in a hotword mode RECOGNIZE request.
   It specifies the minimum length of an utterance (in seconds) that
   will be considered for hotword recognition.  This header field, along



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 88]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-89" id="page-89" name="page-89"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   with Hotword-Max-Duration, can be used to tune performance by
   preventing the recognizer from evaluating utterances that are too
   short or too long to be one of the hotwords in the grammar(s).  The
   value is in milliseconds.  The default value is implementation
   dependent.  If present in a RECOGNIZE request specifying a mode other
   than "hotword", the header field is ignored.

   hotword-min-duration     =  "Hotword-Min-Duration" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.30.%20%20Interpret-Text"></a><a class="selflink" href="#section-9.4.30" name="section-9.4.30">9.4.30</a>.  Interpret-Text</span>

   The value of this header field is used to provide a pointer to the
   text for which a natural language interpretation is desired.  The
   value is either a URI or text.  If the value is a URI, it MUST be a
   Content-ID that refers to an entity of type 'text/plain' in the body
   of the message.  Otherwise, the server MUST treat the value as the
   text to be interpreted.  This header field MUST be used when invoking
   the INTERPRET method.

   interpret-text           =  "Interpret-Text" ":" 1*VCHAR CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.31.%20%20DTMF-Buffer-Time"></a><a class="selflink" href="#section-9.4.31" name="section-9.4.31">9.4.31</a>.  DTMF-Buffer-Time</span>

   This header field MAY be specified in a GET-PARAMS or SET-PARAMS
   method and is used to specify the amount of time, in milliseconds, of
   the type-ahead buffer for the recognizer.  This is the buffer that
   collects DTMF digits as they are pressed even when there is no
   RECOGNIZE command active.  When a subsequent RECOGNIZE method is
   received, it MUST look to this buffer to match the RECOGNIZE request.
   If the digits in the buffer are not sufficient, then it can continue
   to listen to more digits to match the grammar.  The default size of
   this DTMF buffer is platform specific.

   dtmf-buffer-time  =  "DTMF-Buffer-Time" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.32.%20%20Clear-DTMF-Buffer"></a><a class="selflink" href="#section-9.4.32" name="section-9.4.32">9.4.32</a>.  Clear-DTMF-Buffer</span>

   This header field MAY be specified in a RECOGNIZE method and is used
   to tell the recognizer to clear the DTMF type-ahead buffer before
   starting the RECOGNIZE.  The default value of this header field is
   "false", which does not clear the type-ahead buffer before starting
   the RECOGNIZE method.  If this header field is specified to be
   "true", then the RECOGNIZE will clear the DTMF buffer before starting
   recognition.  This means digits pressed by the caller before the
   RECOGNIZE command was issued are discarded.

   clear-dtmf-buffer  = "Clear-DTMF-Buffer" ":" BOOLEAN CRLF




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 89]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-90" id="page-90" name="page-90"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.33.%20%20Early-No-Match"></a><a class="selflink" href="#section-9.4.33" name="section-9.4.33">9.4.33</a>.  Early-No-Match</span>

   This header field MAY be specified in a RECOGNIZE method and is used
   to tell the recognizer that it MUST NOT wait for the end of speech
   before processing the collected speech to match active grammars.  A
   value of "true" indicates the recognizer MUST do early matching.  The
   default value for this header field if not specified is "false".  If
   the recognizer does not support the processing of the collected audio
   before the end of speech, this header field can be safely ignored.

   early-no-match  = "Early-No-Match" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.34.%20%20Num-Min-Consistent-Pronunciations"></a><a class="selflink" href="#section-9.4.34" name="section-9.4.34">9.4.34</a>.  Num-Min-Consistent-Pronunciations</span>

   This header field MAY be specified in a START-PHRASE-ENROLLMENT,
   SET-PARAMS, or GET-PARAMS method and is used to specify the minimum
   number of consistent pronunciations that must be obtained to voice
   enroll a new phrase.  The minimum value is 1.  The default value is
   implementation specific and MAY be greater than 1.

   num-min-consistent-pronunciations  =
                 "Num-Min-Consistent-Pronunciations" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.35.%20%20Consistency-Threshold"></a><a class="selflink" href="#section-9.4.35" name="section-9.4.35">9.4.35</a>.  Consistency-Threshold</span>

   This header field MAY be sent as part of the START-PHRASE-ENROLLMENT,
   SET-PARAMS, or GET-PARAMS method.  Used during voice enrollment, this
   header field specifies how similar to a previously enrolled
   pronunciation of the same phrase an utterance needs to be in order to
   be considered "consistent".  The higher the threshold, the closer the
   match between an utterance and previous pronunciations must be for
   the pronunciation to be considered consistent.  The range for this
   threshold is a float value between 0.0 and 1.0.  The default value
   for this header field is implementation specific.

   consistency-threshold    =  "Consistency-Threshold" ":" FLOAT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.36.%20%20Clash-Threshold"></a><a class="selflink" href="#section-9.4.36" name="section-9.4.36">9.4.36</a>.  Clash-Threshold</span>

   This header field MAY be sent as part of the START-PHRASE-ENROLLMENT,
   SET-PARAMS, or GET-PARAMS method.  Used during voice enrollment, this
   header field specifies how similar the pronunciations of two
   different phrases can be before they are considered to be clashing.
   For example, pronunciations of phrases such as "John Smith" and "Jon
   Smits" may be so similar that they are difficult to distinguish
   correctly.  A smaller threshold reduces the number of clashes
   detected.  The range for this threshold is a float value between 0.0




<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 90]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-91" id="page-91" name="page-91"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   and 1.0.  The default value for this header field is implementation
   specific.  Clash testing can be turned off completely by setting the
   Clash-Threshold header field value to 0.

   clash-threshold          =  "Clash-Threshold" ":" FLOAT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.37.%20%20Personal-Grammar-URI"></a><a class="selflink" href="#section-9.4.37" name="section-9.4.37">9.4.37</a>.  Personal-Grammar-URI</span>

   This header field specifies the speaker-trained grammar to be used or
   referenced during enrollment operations.  Phrases are added to this
   grammar during enrollment.  For example, a contact list for user
   "Jeff" could be stored at the Personal-Grammar-URI
   "http://myserver.example.com/myenrollmentdb/jeff-list".  The
   generated grammar syntax MAY be implementation specific.  There is no
   default value for this header field.  This header field MAY be sent
   as part of the START-PHRASE-ENROLLMENT, SET-PARAMS, or GET-PARAMS
   method.

   personal-grammar-uri     =  "Personal-Grammar-URI" ":" uri CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.38.%20%20Enroll-Utterance"></a><a class="selflink" href="#section-9.4.38" name="section-9.4.38">9.4.38</a>.  Enroll-Utterance</span>

   This header field MAY be specified in the RECOGNIZE method.  If this
   header field is set to "true" and an Enrollment is active, the
   RECOGNIZE command MUST add the collected utterance to the personal
   grammar that is being enrolled.  The way in which this occurs is
   engine specific and may be an area of future standardization.  The
   default value for this header field is "false".

   enroll-utterance     =  "Enroll-Utterance" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.39.%20%20Phrase-Id"></a><a class="selflink" href="#section-9.4.39" name="section-9.4.39">9.4.39</a>.  Phrase-Id</span>

   This header field in a request identifies a phrase in an existing
   personal grammar for which enrollment is desired.  It is also
   returned to the client in the RECOGNIZE complete event.  This header
   field MAY occur in START-PHRASE-ENROLLMENT, MODIFY-PHRASE, or DELETE-
   PHRASE requests.  There is no default value for this header field.

   phrase-id                =  "Phrase-ID" ":" 1*VCHAR CRLF











<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 91]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-92" id="page-92" name="page-92"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.40.%20%20Phrase-NL"></a><a class="selflink" href="#section-9.4.40" name="section-9.4.40">9.4.40</a>.  Phrase-NL</span>

   This string specifies the interpreted text to be returned when the
   phrase is recognized.  This header field MAY occur in START-PHRASE-
   ENROLLMENT and MODIFY-PHRASE requests.  There is no default value for
   this header field.

   phrase-nl                =  "Phrase-NL" ":" 1*UTFCHAR CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.41.%20%20Weight"></a><a class="selflink" href="#section-9.4.41" name="section-9.4.41">9.4.41</a>.  Weight</span>

   The value of this header field represents the occurrence likelihood
   of a phrase in an enrolled grammar.  When using grammar enrollment,
   the system is essentially constructing a grammar segment consisting
   of a list of possible match phrases.  This can be thought of to be
   similar to the dynamic construction of a &lt;one-of&gt; tag in the W3C
   grammar specification.  Each enrolled-phrase becomes an item in the
   list that can be matched against spoken input similar to the &lt;item&gt;
   within a &lt;one-of&gt; list.  This header field allows you to assign a
   weight to the phrase (i.e., &lt;item&gt; entry) in the &lt;one-of&gt; list that
   is enrolled.  Grammar weights are normalized to a sum of one at
   grammar compilation time, so a weight value of 1 for each phrase in
   an enrolled grammar list indicates all items in that list have the
   same weight.  This header field MAY occur in START-PHRASE-ENROLLMENT
   and MODIFY-PHRASE requests.  The default value for this header field
   is implementation specific.

   weight                   =  "Weight" ":" FLOAT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.42.%20%20Save-Best-Waveform"></a><a class="selflink" href="#section-9.4.42" name="section-9.4.42">9.4.42</a>.  Save-Best-Waveform</span>

   This header field allows the client to request the recognizer
   resource to save the audio stream for the best repetition of the
   phrase that was used during the enrollment session.  The recognizer
   MUST attempt to record the recognized audio and make it available to
   the client in the form of a URI returned in the Waveform-URI header
   field in the response to the END-PHRASE-ENROLLMENT method.  If there
   was an error in recording the stream or the audio data is otherwise
   not available, the recognizer MUST return an empty Waveform-URI
   header field.  This header field MAY occur in the START-PHRASE-
   ENROLLMENT, SET-PARAMS, and GET-PARAMS methods.

   save-best-waveform  =  "Save-Best-Waveform" ":" BOOLEAN CRLF








<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 92]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-93" id="page-93" name="page-93"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.43.%20%20New-Phrase-Id"></a><a class="selflink" href="#section-9.4.43" name="section-9.4.43">9.4.43</a>.  New-Phrase-Id</span>

   This header field replaces the ID used to identify the phrase in a
   personal grammar.  The recognizer returns the new ID when using an
   enrollment grammar.  This header field MAY occur in MODIFY-PHRASE
   requests.

   new-phrase-id            =  "New-Phrase-ID" ":" 1*VCHAR CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.44.%20%20Confusable-Phrases-URI"></a><a class="selflink" href="#section-9.4.44" name="section-9.4.44">9.4.44</a>.  Confusable-Phrases-URI</span>

   This header field specifies a grammar that defines invalid phrases
   for enrollment.  For example, typical applications do not allow an
   enrolled phrase that is also a command word.  This header field MAY
   occur in RECOGNIZE requests that are part of an enrollment session.

   confusable-phrases-uri   =  "Confusable-Phrases-URI" ":" uri CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.4.45.%20%20Abort-Phrase-Enrollment"></a><a class="selflink" href="#section-9.4.45" name="section-9.4.45">9.4.45</a>.  Abort-Phrase-Enrollment</span>

   This header field MAY be specified in the END-PHRASE-ENROLLMENT
   method to abort the phrase enrollment, rather than committing the
   phrase to the personal grammar.

   abort-phrase-enrollment  =  "Abort-Phrase-Enrollment" ":"
                               BOOLEAN CRLF

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.5.%20%20Recognizer%20Message%20Body"></a><a class="selflink" href="#section-9.5" name="section-9.5">9.5</a>.  Recognizer Message Body</span>

   A recognizer message can carry additional data associated with the
   request, response, or event.  The client MAY provide the grammar to
   be recognized in DEFINE-GRAMMAR or RECOGNIZE requests.  When one or
   more grammars are specified using the DEFINE-GRAMMAR method, the
   server MUST attempt to fetch, compile, and optimize the grammar
   before returning a response to the DEFINE-GRAMMAR method.  A
   RECOGNIZE request MUST completely specify the grammars to be active
   during the recognition operation, except when the RECOGNIZE method is
   being used to enroll a grammar.  During grammar enrollment, such
   grammars are OPTIONAL.  The server resource sends the recognition
   results in the RECOGNITION-COMPLETE event and the GET-RESULT
   response.  Grammars and recognition results are carried in the
   message body of the corresponding MRCPv2 messages.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.5.1.%20%20Recognizer%20Grammar%20Data"></a><a class="selflink" href="#section-9.5.1" name="section-9.5.1">9.5.1</a>.  Recognizer Grammar Data</span>

   Recognizer grammar data from the client to the server can be provided
   inline or by reference.  Either way, grammar data is carried as typed
   media entities in the message body of the RECOGNIZE or DEFINE-GRAMMAR



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 93]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-94" id="page-94" name="page-94"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   request.  All MRCPv2 servers MUST accept grammars in the XML form
   (media type 'application/srgs+xml') of the W3C's XML-based Speech
   Grammar Markup Format (SRGS) [<a href="#ref-W3C.REC-speech-grammar-20040316">W3C.REC-speech-grammar-20040316</a>] and
   MAY accept grammars in other formats.  Examples include but are not
   limited to:

   o  the ABNF form (media type 'application/srgs') of SRGS

   o  Sun's Java Speech Grammar Format (JSGF)
      [<a href="#ref-refs.javaSpeechGrammarFormat">refs.javaSpeechGrammarFormat</a>]

   Additionally, MRCPv2 servers MAY support the Semantic Interpretation
   for Speech Recognition (SISR)
   [<a href="#ref-W3C.REC-semantic-interpretation-20070405">W3C.REC-semantic-interpretation-20070405</a>] specification.

   When a grammar is specified inline in the request, the client MUST
   provide a Content-ID for that grammar as part of the content header
   fields.  If there is no space on the server to store the inline
   grammar, the request MUST return with a Completion-Cause code of 016
   "grammar-definition-failure".  Otherwise, the server MUST associate
   the inline grammar block with that Content-ID and MUST store it on
   the server for the duration of the session.  However, if the
   Content-ID is redefined later in the session through a subsequent
   DEFINE-GRAMMAR, the inline grammar previously associated with the
   Content-ID MUST be freed.  If the Content-ID is redefined through a
   subsequent DEFINE-GRAMMAR with an empty message body (i.e., no
   grammar definition), then in addition to freeing any grammar
   previously associated with the Content-ID, the server MUST clear all
   bindings and associations to the Content-ID.  Unless and until
   subsequently redefined, this URI MUST be interpreted by the server as
   one that has never been set.

   Grammars that have been associated with a Content-ID can be
   referenced through the 'session' URI scheme (see <a href="#section-13.6">Section 13.6</a>).  For
   example:
   session:help@root-level.store

   Grammar data MAY be specified using external URI references.  To do
   so, the client uses a body of media type 'text/uri-list' (see <a href="rfc2483.html">RFC</a>
   <a href="rfc2483.html">2483</a> [<a href="rfc2483.html" title='"URI Resolution Services Necessary for URN Resolution"'>RFC2483</a>] ) to list the one or more URIs that point to the
   grammar data.  The client can use a body of media type 'text/
   grammar-ref-list' (see <a href="#section-13.5.1">Section 13.5.1</a>) if it wants to assign weights
   to the list of grammar URI.  All MRCPv2 servers MUST support grammar
   access using the 'http' and 'https' URI schemes.

   If the grammar data the client wishes to be used on a request
   consists of a mix of URI and inline grammar data, the client uses the
   'multipart/mixed' media type to enclose the 'text/uri-list',



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 94]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-95" id="page-95" name="page-95"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   'application/srgs', or 'application/srgs+xml' content entities.  The
   character set and encoding used in the grammar data are specified
   using to standard media type definitions.

   When more than one grammar URI or inline grammar block is specified
   in a message body of the RECOGNIZE request, the server interprets
   this as a list of grammar alternatives to match against.

   Content-Type:application/srgs+xml
   Content-ID:&lt;request1@form-level.store&gt;
   Content-Length:...

   &lt;?xml version="1.0"?&gt;

   &lt;!-- the default grammar language is US English --&gt;
   &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
            xml:lang="en-US" version="1.0" root="request"&gt;

   &lt;!-- single language attachment to tokens --&gt;
         &lt;rule id="yes"&gt;
               &lt;one-of&gt;
                     &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                     &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

   &lt;!-- single language attachment to a rule expansion --&gt;
         &lt;rule id="request"&gt;
               may I speak to
               &lt;one-of xml:lang="fr-CA"&gt;
                     &lt;item&gt;Michel Tremblay&lt;/item&gt;
                     &lt;item&gt;Andre Roy&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

         &lt;!-- multiple language attachment to a token --&gt;
         &lt;rule id="people1"&gt;
               &lt;token lexicon="en-US,fr-CA"&gt; Robert &lt;/token&gt;
         &lt;/rule&gt;












<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 95]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-96" id="page-96" name="page-96"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


         &lt;!-- the equivalent single-language attachment expansion --&gt;
         &lt;rule id="people2"&gt;
               &lt;one-of&gt;
                     &lt;item xml:lang="en-US"&gt;Robert&lt;/item&gt;
                     &lt;item xml:lang="fr-CA"&gt;Robert&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

         &lt;/grammar&gt;

                           SRGS Grammar Example


   Content-Type:text/uri-list
   Content-Length:...

   session:help@root-level.store
   http://www.example.com/Directory-Name-List.grxml
   http://www.example.com/Department-List.grxml
   http://www.example.com/TAC-Contact-List.grxml
   session:menu1@menu-level.store

                         Grammar Reference Example


   Content-Type:multipart/mixed; boundary="break"

   --break
   Content-Type:text/uri-list
   Content-Length:...

   http://www.example.com/Directory-Name-List.grxml
   http://www.example.com/Department-List.grxml
   http://www.example.com/TAC-Contact-List.grxml

   --break
   Content-Type:application/srgs+xml
   Content-ID:&lt;request1@form-level.store&gt;
   Content-Length:...












<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 96]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-97" id="page-97" name="page-97"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   &lt;?xml version="1.0"?&gt;

   &lt;!-- the default grammar language is US English --&gt;
   &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
            xml:lang="en-US" version="1.0"&gt;

   &lt;!-- single language attachment to tokens --&gt;
         &lt;rule id="yes"&gt;
               &lt;one-of&gt;
                     &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                     &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

   &lt;!-- single language attachment to a rule expansion --&gt;
         &lt;rule id="request"&gt;
               may I speak to
               &lt;one-of xml:lang="fr-CA"&gt;
                     &lt;item&gt;Michel Tremblay&lt;/item&gt;
                     &lt;item&gt;Andre Roy&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

         &lt;!-- multiple language attachment to a token --&gt;
         &lt;rule id="people1"&gt;
               &lt;token lexicon="en-US,fr-CA"&gt; Robert &lt;/token&gt;
         &lt;/rule&gt;

         &lt;!-- the equivalent single-language attachment expansion --&gt;
         &lt;rule id="people2"&gt;
               &lt;one-of&gt;
                     &lt;item xml:lang="en-US"&gt;Robert&lt;/item&gt;
                     &lt;item xml:lang="fr-CA"&gt;Robert&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

         &lt;/grammar&gt;
   --break--

                      Mixed Grammar Reference Example

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.5.2.%20%20Recognizer%20Result%20Data"></a><a class="selflink" href="#section-9.5.2" name="section-9.5.2">9.5.2</a>.  Recognizer Result Data</span>

   Recognition results are returned to the client in the message body of
   the RECOGNITION-COMPLETE event or the GET-RESULT response message as
   described in <a href="#section-6.3">Section 6.3</a>.  Element and attribute descriptions for the
   recognition portion of the NLSML format are provided in <a href="#section-9.6">Section 9.6</a>
   with a normative definition of the schema in <a href="#section-16.1">Section 16.1</a>.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 97]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-98" id="page-98" name="page-98"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Content-Type:application/nlsml+xml
   Content-Length:...

   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           xmlns:ex="http://www.example.com/example"
           grammar="http://www.example.com/theYesNoGrammar"&gt;
       &lt;interpretation&gt;
           &lt;instance&gt;
                   &lt;ex:response&gt;yes&lt;/ex:response&gt;
           &lt;/instance&gt;
           &lt;input&gt;OK&lt;/input&gt;
       &lt;/interpretation&gt;
   &lt;/result&gt;

                              Result Example

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.5.3.%20%20Enrollment%20Result%20Data"></a><a class="selflink" href="#section-9.5.3" name="section-9.5.3">9.5.3</a>.  Enrollment Result Data</span>

   Enrollment results are returned to the client in the message body of
   the RECOGNITION-COMPLETE event as described in <a href="#section-6.3">Section 6.3</a>.  Element
   and attribute descriptions for the enrollment portion of the NLSML
   format are provided in <a href="#section-9.7">Section 9.7</a> with a normative definition of the
   schema in <a href="#section-16.2">Section 16.2</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.5.4.%20%20Recognizer%20Context%20Block"></a><a class="selflink" href="#section-9.5.4" name="section-9.5.4">9.5.4</a>.  Recognizer Context Block</span>

   When a client changes servers while operating on the behalf of the
   same incoming communication session, this header field allows the
   client to collect a block of opaque data from one server and provide
   it to another server.  This capability is desirable if the client
   needs different language support or because the server issued a
   redirect.  Here, the first recognizer resource may have collected
   acoustic and other data during its execution of recognition methods.
   After a server switch, communicating this data may allow the
   recognizer resource on the new server to provide better recognition.
   This block of data is implementation specific and MUST be carried as
   media type 'application/octets' in the body of the message.

   This block of data is communicated in the SET-PARAMS and GET-PARAMS
   method/response messages.  In the GET-PARAMS method, if an empty
   Recognizer-Context-Block header field is present, then the recognizer
   SHOULD return its vendor-specific context block, if any, in the
   message body as an entity of media type 'application/octets' with a
   specific Content-ID.  The Content-ID value MUST also be specified in
   the Recognizer-Context-Block header field in the GET-PARAMS response.
   The SET-PARAMS request wishing to provide this vendor-specific data
   MUST send it in the message body as a typed entity with the same



<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 98]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-99" id="page-99" name="page-99"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Content-ID that it received from the GET-PARAMS.  The Content-ID MUST
   also be sent in the Recognizer-Context-Block header field of the
   SET-PARAMS message.

   Each speech recognition implementation choosing to use this mechanism
   to hand off recognizer context data among servers MUST distinguish
   its implementation-specific block of data from other implementations
   by choosing a Content-ID that is recognizable among the participating
   servers and unlikely to collide with values chosen by another
   implementation.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.6.%20%20Recognizer%20Results"></a><a class="selflink" href="#section-9.6" name="section-9.6">9.6</a>.  Recognizer Results</span>

   The recognizer portion of NLSML (see <a href="#section-6.3.1">Section 6.3.1</a>) represents
   information automatically extracted from a user's utterances by a
   semantic interpretation component, where "utterance" is to be taken
   in the general sense of a meaningful user input in any modality
   supported by the MRCPv2 implementation.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.6.1.%20%20Markup%20Functions"></a><a class="selflink" href="#section-9.6.1" name="section-9.6.1">9.6.1</a>.  Markup Functions</span>

   MRCPv2 recognizer resources employ the Natural Language Semantics
   Markup Language (NLSML) to interpret natural language speech input
   and to format the interpretation for consumption by an MRCPv2 client.

   The elements of the markup fall into the following general functional
   categories: interpretation, side information, and multi-modal
   integration.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.1.1.%20%20Interpretation"></a><a class="selflink" href="#section-9.6.1.1" name="section-9.6.1.1">9.6.1.1</a>.  Interpretation</span>

   Elements and attributes represent the semantics of a user's
   utterance, including the &lt;result&gt;, &lt;interpretation&gt;, and &lt;instance&gt;
   elements.  The &lt;result&gt; element contains the full result of
   processing one utterance.  It MAY contain multiple &lt;interpretation&gt;
   elements if the interpretation of the utterance results in multiple
   alternative meanings due to uncertainty in speech recognition or
   natural language understanding.  There are at least two reasons for
   providing multiple interpretations:

   1.  The client application might have additional information, for
       example, information from a database, that would allow it to
       select a preferred interpretation from among the possible
       interpretations returned from the semantic interpreter.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                   [Page 99]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-100" id="page-100" name="page-100"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   2.  A client-based dialog manager (e.g., VoiceXML
       [<a href="#ref-W3C.REC-voicexml20-20040316">W3C.REC-voicexml20-20040316</a>]) that was unable to select between
       several competing interpretations could use this information to
       go back to the user and find out what was intended.  For example,
       it could issue a SPEAK request to a synthesizer resource to emit
       "Did you say 'Boston' or 'Austin'?"

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.1.2.%20%20Side%20Information"></a><a class="selflink" href="#section-9.6.1.2" name="section-9.6.1.2">9.6.1.2</a>.  Side Information</span>

   These are elements and attributes representing additional information
   about the interpretation, over and above the interpretation itself.
   Side information includes:

   1.  Whether an interpretation was achieved (the &lt;nomatch&gt; element)
       and the system's confidence in an interpretation (the
       "confidence" attribute of &lt;interpretation&gt;).

   2.  Alternative interpretations (&lt;interpretation&gt;)

   3.  Input formats and Automatic Speech Recognition (ASR) information:
       the &lt;input&gt; element, representing the input to the semantic
       interpreter.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.1.3.%20%20Multi-Modal%20Integration"></a><a class="selflink" href="#section-9.6.1.3" name="section-9.6.1.3">9.6.1.3</a>.  Multi-Modal Integration</span>

   When more than one modality is available for input, the
   interpretation of the inputs needs to be coordinated.  The "mode"
   attribute of &lt;input&gt; supports this by indicating whether the
   utterance was input by speech, DTMF, pointing, etc.  The "timestamp-
   start" and "timestamp-end" attributes of &lt;input&gt; also provide for
   temporal coordination by indicating when inputs occurred.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.6.2.%20%20Overview%20of%20Recognizer%20Result%20Elements%20and%20Their%20Relationships"></a><a class="selflink" href="#section-9.6.2" name="section-9.6.2">9.6.2</a>.  Overview of Recognizer Result Elements and Their Relationships</span>

   The recognizer elements in NLSML fall into two categories:

   1.  description of the input that was processed, and

   2.  description of the meaning which was extracted from the input.

   Next to each element are its attributes.  In addition, some elements
   can contain multiple instances of other elements.  For example, a
   &lt;result&gt; can contain multiple &lt;interpretation&gt; elements, each of
   which is taken to be an alternative.  Similarly, &lt;input&gt; can contain
   multiple child &lt;input&gt; elements, which are taken to be cumulative.
   To illustrate the basic usage of these elements, as a simple example,





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 100]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-101" id="page-101" name="page-101"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   consider the utterance "OK" (interpreted as "yes").  The example
   illustrates how that utterance and its interpretation would be
   represented in the NLSML markup.

   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           xmlns:ex="http://www.example.com/example"
           grammar="http://www.example.com/theYesNoGrammar"&gt;
     &lt;interpretation&gt;
        &lt;instance&gt;
           &lt;ex:response&gt;yes&lt;/ex:response&gt;
         &lt;/instance&gt;
       &lt;input&gt;OK&lt;/input&gt;
     &lt;/interpretation&gt;
   &lt;/result&gt;

   This example includes only the minimum required information.  There
   is an overall &lt;result&gt; element, which includes one interpretation and
   an input element.  The interpretation contains the application-
   specific element "&lt;response&gt;", which is the semantically interpreted
   result.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.6.3.%20%20Elements%20and%20Attributes"></a><a class="selflink" href="#section-9.6.3" name="section-9.6.3">9.6.3</a>.  Elements and Attributes</span>

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.3.1.%20%20%3Cresult%3E%20Root%20Element"></a><a class="selflink" href="#section-9.6.3.1" name="section-9.6.3.1">9.6.3.1</a>.  &lt;result&gt; Root Element</span>

   The root element of the markup is &lt;result&gt;.  The &lt;result&gt; element
   includes one or more &lt;interpretation&gt; elements.  Multiple
   interpretations can result from ambiguities in the input or in the
   semantic interpretation.  If the "grammar" attribute does not apply
   to all of the interpretations in the result, it can be overridden for
   individual interpretations at the &lt;interpretation&gt; level.

   Attributes:

   1.  grammar: The grammar or recognition rule matched by this result.
       The format of the grammar attribute will match the rule reference
       semantics defined in the grammar specification.  Specifically,
       the rule reference is in the external XML form for grammar rule
       references.  The markup interpreter needs to know the grammar
       rule that is matched by the utterance because multiple rules may
       be simultaneously active.  The value is the grammar URI used by
       the markup interpreter to specify the grammar.  The grammar can
       be overridden by a grammar attribute in the &lt;interpretation&gt;
       element if the input was ambiguous as to which grammar it
       matched.  If all interpretation elements within the result
       element contain their own grammar attributes, the attribute can
       be dropped from the result element.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 101]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-102" id="page-102" name="page-102"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           grammar="http://www.example.com/grammar"&gt;
     &lt;interpretation&gt;
      ....
     &lt;/interpretation&gt;
   &lt;/result&gt;

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.3.2.%20%20%3Cinterpretation%3E%20Element"></a><a class="selflink" href="#section-9.6.3.2" name="section-9.6.3.2">9.6.3.2</a>.  &lt;interpretation&gt; Element</span>

   An &lt;interpretation&gt; element contains a single semantic
   interpretation.

   Attributes:

   1.  confidence: A float value from 0.0-1.0 indicating the semantic
       analyzer's confidence in this interpretation.  A value of 1.0
       indicates maximum confidence.  The values are implementation
       dependent but are intended to align with the value interpretation
       for the confidence MRCPv2 header field defined in <a href="#section-9.4.1">Section 9.4.1</a>.
       This attribute is OPTIONAL.

   2.  grammar: The grammar or recognition rule matched by this
       interpretation (if needed to override the grammar specification
       at the &lt;interpretation&gt; level.)  This attribute is only needed
       under &lt;interpretation&gt; if it is necessary to override a grammar
       that was defined at the &lt;result&gt; level.  Note that the grammar
       attribute for the interpretation element is optional if and only
       if the grammar attribute is specified in the &lt;result&gt; element.

   Interpretations MUST be sorted best-first by some measure of
   "goodness".  The goodness measure is "confidence" if present;
   otherwise, it is some implementation-specific indication of quality.

   The grammar is expected to be specified most frequently at the
   &lt;result&gt; level.  However, it can be overridden at the
   &lt;interpretation&gt; level because it is possible that different
   interpretations may match different grammar rules.

   The &lt;interpretation&gt; element includes an optional &lt;input&gt; element
   containing the input being analyzed, and at least one &lt;instance&gt;
   element containing the interpretation of the utterance.

   &lt;interpretation confidence="0.75"
                   grammar="http://www.example.com/grammar"&gt;
       ...
   &lt;/interpretation&gt;




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 102]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-103" id="page-103" name="page-103"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.3.3.%20%20%3Cinstance%3E%20Element"></a><a class="selflink" href="#section-9.6.3.3" name="section-9.6.3.3">9.6.3.3</a>.  &lt;instance&gt; Element</span>

   The &lt;instance&gt; element contains the interpretation of the utterance.
   When the Semantic Interpretation for Speech Recognition format is
   used, the &lt;instance&gt; element contains the XML serialization of the
   result using the approach defined in that specification.  When there
   is semantic markup in the grammar that does not create semantic
   objects, but instead only does a semantic translation of a portion of
   the input, such as translating "coke" to "coca-cola", the instance
   contains the whole input but with the translation applied.  The NLSML
   looks like the markup in Figure 2 below.  If there are no semantic
   objects created, nor any semantic translation, the instance value is
   the same as the input value.

   Attributes:

   1.  confidence: Each element of the instance MAY have a confidence
       attribute, defined in the NLSML namespace.  The confidence
       attribute contains a float value in the range from 0.0-1.0
       reflecting the system's confidence in the analysis of that slot.
       A value of 1.0 indicates maximum confidence.  The values are
       implementation dependent, but are intended to align with the
       value interpretation for the MRCPv2 header field Confidence-
       Threshold defined in <a href="#section-9.4.1">Section 9.4.1</a>.  This attribute is OPTIONAL.

   &lt;instance&gt;
     &lt;nameAddress&gt;
         &lt;street confidence="0.75"&gt;123 Maple Street&lt;/street&gt;
         &lt;city&gt;Mill Valley&lt;/city&gt;
         &lt;state&gt;CA&lt;/state&gt;
         &lt;zip&gt;90952&lt;/zip&gt;
     &lt;/nameAddress&gt;
   &lt;/instance&gt;
   &lt;input&gt;
     My address is 123 Maple Street,
     Mill Valley, California, 90952
   &lt;/input&gt;


   &lt;instance&gt;
       I would like to buy a coca-cola
   &lt;/instance&gt;
   &lt;input&gt;
     I would like to buy a coke
   &lt;/input&gt;

                          Figure 2: NSLML Example




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 103]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-104" id="page-104" name="page-104"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.3.4.%20%20%3Cinput%3E%20Element"></a><a class="selflink" href="#section-9.6.3.4" name="section-9.6.3.4">9.6.3.4</a>.  &lt;input&gt; Element</span>

   The &lt;input&gt; element is the text representation of a user's input.  It
   includes an optional "confidence" attribute, which indicates the
   recognizer's confidence in the recognition result (as opposed to the
   confidence in the interpretation, which is indicated by the
   "confidence" attribute of &lt;interpretation&gt;).  Optional "timestamp-
   start" and "timestamp-end" attributes indicate the start and end
   times of a spoken utterance, in ISO 8601 format [<a href="#ref-ISO.8601.1988">ISO.8601.1988</a>].

   Attributes:

   1.  timestamp-start: The time at which the input began. (optional)

   2.  timestamp-end: The time at which the input ended. (optional)

   3.  mode: The modality of the input, for example, speech, DTMF, etc.
       (optional)

   4.  confidence: The confidence of the recognizer in the correctness
       of the input in the range 0.0 to 1.0. (optional)

   Note that it may not make sense for temporally overlapping inputs to
   have the same mode; however, this constraint is not expected to be
   enforced by implementations.

   When there is no time zone designator, ISO 8601 time representations
   default to local time.

   There are three possible formats for the &lt;input&gt; element.

   1.  The &lt;input&gt; element can contain simple text:

       &lt;input&gt;onions&lt;/input&gt;

       A future possibility is for &lt;input&gt; to contain not only text but
       additional markup that represents prosodic information that was
       contained in the original utterance and extracted by the speech
       recognizer.  This depends on the availability of ASRs that are
       capable of producing prosodic information.  MRCPv2 clients MUST
       be prepared to receive such markup and MAY make use of it.

   2.  An &lt;input&gt; tag can also contain additional &lt;input&gt; tags.  Having
       additional input elements allows the representation to support
       future multi-modal inputs as well as finer-grained speech
       information, such as timestamps for individual words and word-
       level confidences.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 104]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-105" id="page-105" name="page-105"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


       &lt;input&gt;
            &lt;input mode="speech" confidence="0.5"
                timestamp-start="2000-04-03T0:00:00"
                timestamp-end="2000-04-03T0:00:00.2"&gt;fried&lt;/input&gt;
            &lt;input mode="speech" confidence="1.0"
                timestamp-start="2000-04-03T0:00:00.25"
                timestamp-end="2000-04-03T0:00:00.6"&gt;onions&lt;/input&gt;
       &lt;/input&gt;

   3.  Finally, the &lt;input&gt; element can contain &lt;nomatch&gt; and &lt;noinput&gt;
       elements, which describe situations in which the speech
       recognizer received input that it was unable to process or did
       not receive any input at all, respectively.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.3.5.%20%20%3Cnomatch%3E%20Element"></a><a class="selflink" href="#section-9.6.3.5" name="section-9.6.3.5">9.6.3.5</a>.  &lt;nomatch&gt; Element</span>

   The &lt;nomatch&gt; element under &lt;input&gt; is used to indicate that the
   semantic interpreter was unable to successfully match any input with
   confidence above the threshold.  It can optionally contain the text
   of the best of the (rejected) matches.

   &lt;interpretation&gt;
      &lt;instance/&gt;
         &lt;input confidence="0.1"&gt;
            &lt;nomatch/&gt;
         &lt;/input&gt;
   &lt;/interpretation&gt;
   &lt;interpretation&gt;
      &lt;instance/&gt;
      &lt;input mode="speech" confidence="0.1"&gt;
        &lt;nomatch&gt;I want to go to New York&lt;/nomatch&gt;
      &lt;/input&gt;
   &lt;/interpretation&gt;

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/9.6.3.6.%20%20%3Cnoinput%3E%20Element"></a><a class="selflink" href="#section-9.6.3.6" name="section-9.6.3.6">9.6.3.6</a>.  &lt;noinput&gt; Element</span>

   &lt;noinput&gt; indicates that there was no input -- a timeout occurred in
   the speech recognizer due to silence.
   &lt;interpretation&gt;
      &lt;instance/&gt;
      &lt;input&gt;
         &lt;noinput/&gt;
      &lt;/input&gt;
   &lt;/interpretation&gt;

   If there are multiple levels of inputs, the most natural place for
   &lt;nomatch&gt; and &lt;noinput&gt; elements to appear is under the highest level
   of &lt;input&gt; for &lt;noinput&gt;, and under the appropriate level of



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 105]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-106" id="page-106" name="page-106"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   &lt;interpretation&gt; for &lt;nomatch&gt;.  So, &lt;noinput&gt; means "no input at
   all" and &lt;nomatch&gt; means "no match in speech modality" or "no match
   in DTMF modality".  For example, to represent garbled speech combined
   with DTMF "1 2 3 4", the markup would be:
   &lt;input&gt;
      &lt;input mode="speech"&gt;&lt;nomatch/&gt;&lt;/input&gt;
      &lt;input mode="dtmf"&gt;1 2 3 4&lt;/input&gt;
   &lt;/input&gt;

   Note: while &lt;noinput&gt; could be represented as an attribute of input,
   &lt;nomatch&gt; cannot, since it could potentially include PCDATA content
   with the best match.  For parallelism, &lt;noinput&gt; is also an element.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.7.%20%20Enrollment%20Results"></a><a class="selflink" href="#section-9.7" name="section-9.7">9.7</a>.  Enrollment Results</span>

   All enrollment elements are contained within a single
   &lt;enrollment-result&gt; element under &lt;result&gt;.  The elements are
   described below and have the schema defined in <a href="#section-16.2">Section 16.2</a>.  The
   following elements are defined:

   1.  num-clashes

   2.  num-good-repetitions

   3.  num-repetitions-still-needed

   4.  consistency-status

   5.  clash-phrase-ids

   6.  transcriptions

   7.  confusable-phrases

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.7.1.%20%20%3Cnum-clashes%3E%20Element"></a><a class="selflink" href="#section-9.7.1" name="section-9.7.1">9.7.1</a>.  &lt;num-clashes&gt; Element</span>

   The &lt;num-clashes&gt; element contains the number of clashes that this
   pronunciation has with other pronunciations in an active enrollment
   session.  The associated Clash-Threshold header field determines the
   sensitivity of the clash measurement.  Note that clash testing can be
   turned off completely by setting the Clash-Threshold header field
   value to 0.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.7.2.%20%20%3Cnum-good-repetitions%3E%20Element"></a><a class="selflink" href="#section-9.7.2" name="section-9.7.2">9.7.2</a>.  &lt;num-good-repetitions&gt; Element</span>

   The &lt;num-good-repetitions&gt; element contains the number of consistent
   pronunciations obtained so far in an active enrollment session.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 106]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-107" id="page-107" name="page-107"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.7.3.%20%20%3Cnum-repetitions-still-needed%3E%20Element"></a><a class="selflink" href="#section-9.7.3" name="section-9.7.3">9.7.3</a>.  &lt;num-repetitions-still-needed&gt; Element</span>

   The &lt;num-repetitions-still-needed&gt; element contains the number of
   consistent pronunciations that must still be obtained before the new
   phrase can be added to the enrollment grammar.  The number of
   consistent pronunciations required is specified by the client in the
   request header field Num-Min-Consistent-Pronunciations.  The returned
   value must be 0 before the client can successfully commit a phrase to
   the grammar by ending the enrollment session.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.7.4.%20%20%3Cconsistency-status%3E%20Element"></a><a class="selflink" href="#section-9.7.4" name="section-9.7.4">9.7.4</a>.  &lt;consistency-status&gt; Element</span>

   The &lt;consistency-status&gt; element is used to indicate how consistent
   the repetitions are when learning a new phrase.  It can have the
   values of consistent, inconsistent, and undecided.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.7.5.%20%20%3Cclash-phrase-ids%3E%20Element"></a><a class="selflink" href="#section-9.7.5" name="section-9.7.5">9.7.5</a>.  &lt;clash-phrase-ids&gt; Element</span>

   The &lt;clash-phrase-ids&gt; element contains the phrase IDs of clashing
   pronunciation(s), if any.  This element is absent if there are no
   clashes.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.7.6.%20%20%3Ctranscriptions%3E%20Element"></a><a class="selflink" href="#section-9.7.6" name="section-9.7.6">9.7.6</a>.  &lt;transcriptions&gt; Element</span>

   The &lt;transcriptions&gt; element contains the transcriptions returned in
   the last repetition of the phrase being enrolled.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.7.7.%20%20%3Cconfusable-phrases%3E%20Element"></a><a class="selflink" href="#section-9.7.7" name="section-9.7.7">9.7.7</a>.  &lt;confusable-phrases&gt; Element</span>

   The &lt;confusable-phrases&gt; element contains a list of phrases from a
   command grammar that are confusable with the phrase being added to
   the personal grammar.  This element MAY be absent if there are no
   confusable phrases.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.8.%20%20DEFINE-GRAMMAR"></a><a class="selflink" href="#section-9.8" name="section-9.8">9.8</a>.  DEFINE-GRAMMAR</span>

   The DEFINE-GRAMMAR method, from the client to the server, provides
   one or more grammars and requests the server to access, fetch, and
   compile the grammars as needed.  The DEFINE-GRAMMAR method
   implementation MUST do a fetch of all external URIs that are part of
   that operation.  If caching is implemented, this URI fetching MUST
   conform to the cache control hints and parameter header fields
   associated with the method in deciding whether the URIs should be
   fetched from cache or from the external server.  If these hints/
   parameters are not specified in the method, the values set for the
   session using SET-PARAMS/GET-PARAMS apply.  If it was not set for the
   session, their default values apply.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 107]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-108" id="page-108" name="page-108"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   If the server resource is in the recognition state, the DEFINE-
   GRAMMAR request MUST respond with a failure status.

   If the resource is in the idle state and is able to successfully
   process the supplied grammars, the server MUST return a success code
   status and the request-state MUST be COMPLETE.

   If the recognizer resource could not define the grammar for some
   reason (for example, if the download failed, the grammar failed to
   compile, or the grammar was in an unsupported form), the MRCPv2
   response for the DEFINE-GRAMMAR method MUST contain a failure status-
   code of 407 and contain a Completion-Cause header field describing
   the failure reason.

   C-&gt;S:MRCP/2.0 ... DEFINE-GRAMMAR 543257
   Channel-Identifier:32AECB23433801@speechrecog
   Content-Type:application/srgs+xml
   Content-ID:&lt;request1@form-level.store&gt;
   Content-Length:...

   &lt;?xml version="1.0"?&gt;

   &lt;!-- the default grammar language is US English --&gt;
   &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
            xml:lang="en-US" version="1.0"&gt;

   &lt;!-- single language attachment to tokens --&gt;
   &lt;rule id="yes"&gt;
               &lt;one-of&gt;
                     &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                     &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

   &lt;!-- single language attachment to a rule expansion --&gt;
         &lt;rule id="request"&gt;
               may I speak to
               &lt;one-of xml:lang="fr-CA"&gt;
                     &lt;item&gt;Michel Tremblay&lt;/item&gt;
                     &lt;item&gt;Andre Roy&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

         &lt;/grammar&gt;

   S-&gt;C:MRCP/2.0 ... 543257 200 COMPLETE
   Channel-Identifier:32AECB23433801@speechrecog
           Completion-Cause:000 success



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 108]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-109" id="page-109" name="page-109"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S:MRCP/2.0 ... DEFINE-GRAMMAR 543258
   Channel-Identifier:32AECB23433801@speechrecog
   Content-Type:application/srgs+xml
   Content-ID:&lt;helpgrammar@root-level.store&gt;
   Content-Length:...

   &lt;?xml version="1.0"?&gt;

   &lt;!-- the default grammar language is US English --&gt;
   &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
            xml:lang="en-US" version="1.0"&gt;

         &lt;rule id="request"&gt;
               I need help
         &lt;/rule&gt;

   S-&gt;C:MRCP/2.0 ... 543258 200 COMPLETE
   Channel-Identifier:32AECB23433801@speechrecog
           Completion-Cause:000 success

   C-&gt;S:MRCP/2.0 ... DEFINE-GRAMMAR 543259
   Channel-Identifier:32AECB23433801@speechrecog
   Content-Type:application/srgs+xml
   Content-ID:&lt;request2@field-level.store&gt;
   Content-Length:...

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;

   &lt;!DOCTYPE grammar PUBLIC "-//W3C//DTD GRAMMAR 1.0//EN"
                     "<a href="http://www.w3.org/TR/speech-grammar/grammar.dtd">http://www.w3.org/TR/speech-grammar/grammar.dtd</a>"&gt;

   &lt;grammar xmlns="http://www.w3.org/2001/06/grammar" xml:lang="en"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://www.w3.org/2001/06/grammar
              <a href="http://www.w3.org/TR/speech-grammar/grammar.xsd">http://www.w3.org/TR/speech-grammar/grammar.xsd</a>"
              version="1.0" mode="voice" root="basicCmd"&gt;

   &lt;meta name="author" content="Stephanie Williams"/&gt;

   &lt;rule id="basicCmd" scope="public"&gt;
     &lt;example&gt; please move the window &lt;/example&gt;
     &lt;example&gt; open a file &lt;/example&gt;

     &lt;ruleref
       uri="http://grammar.example.com/politeness.grxml#startPolite"/&gt;






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 109]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-110" id="page-110" name="page-110"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


     &lt;ruleref uri="#command"/&gt;
     &lt;ruleref
       uri="http://grammar.example.com/politeness.grxml#endPolite"/&gt;
   &lt;/rule&gt;

   &lt;rule id="command"&gt;
     &lt;ruleref uri="#action"/&gt; &lt;ruleref uri="#object"/&gt;
   &lt;/rule&gt;

   &lt;rule id="action"&gt;
      &lt;one-of&gt;
         &lt;item weight="10"&gt; open   &lt;tag&gt;open&lt;/tag&gt;   &lt;/item&gt;
         &lt;item weight="2"&gt;  close  &lt;tag&gt;close&lt;/tag&gt;  &lt;/item&gt;
         &lt;item weight="1"&gt;  delete &lt;tag&gt;delete&lt;/tag&gt; &lt;/item&gt;
         &lt;item weight="1"&gt;  move   &lt;tag&gt;move&lt;/tag&gt;   &lt;/item&gt;
      &lt;/one-of&gt;
   &lt;/rule&gt;

   &lt;rule id="object"&gt;
     &lt;item repeat="0-1"&gt;
       &lt;one-of&gt;
         &lt;item&gt; the &lt;/item&gt;
         &lt;item&gt; a &lt;/item&gt;
       &lt;/one-of&gt;
     &lt;/item&gt;

     &lt;one-of&gt;
         &lt;item&gt; window &lt;/item&gt;
         &lt;item&gt; file &lt;/item&gt;
         &lt;item&gt; menu &lt;/item&gt;
     &lt;/one-of&gt;
   &lt;/rule&gt;

   &lt;/grammar&gt;


   S-&gt;C:MRCP/2.0 ... 543259 200 COMPLETE
   Channel-Identifier:32AECB23433801@speechrecog
           Completion-Cause:000 success

   C-&gt;S:MRCP/2.0 ... RECOGNIZE 543260
   Channel-Identifier:32AECB23433801@speechrecog
           N-Best-List-Length:2
   Content-Type:text/uri-list
   Content-Length:...






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 110]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-111" id="page-111" name="page-111"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   session:request1@form-level.store
   session:request2@field-level.store
   session:helpgramar@root-level.store

   S-&gt;C:MRCP/2.0 ... 543260 200 IN-PROGRESS
   Channel-Identifier:32AECB23433801@speechrecog

   S-&gt;C:MRCP/2.0 ... START-OF-INPUT 543260 IN-PROGRESS
   Channel-Identifier:32AECB23433801@speechrecog

   S-&gt;C:MRCP/2.0 ... RECOGNITION-COMPLETE 543260 COMPLETE
   Channel-Identifier:32AECB23433801@speechrecog
   Completion-Cause:000 success
   Waveform-URI:&lt;<a href="http://web.media.com/session123/audio.wav">http://web.media.com/session123/audio.wav</a>&gt;;
                size=124535;duration=2340
   Content-Type:application/x-nlsml
   Content-Length:...

   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           xmlns:ex="http://www.example.com/example"
           grammar="session:request1@form-level.store"&gt;
           &lt;interpretation&gt;
               &lt;instance name="Person"&gt;
               &lt;ex:Person&gt;
                   &lt;ex:Name&gt; Andre Roy &lt;/ex:Name&gt;
               &lt;/ex:Person&gt;
            &lt;/instance&gt;
            &lt;input&gt;   may I speak to Andre Roy &lt;/input&gt;
       &lt;/interpretation&gt;
   &lt;/result&gt;

                          Define Grammar Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.9.%20%20RECOGNIZE"></a><a class="selflink" href="#section-9.9" name="section-9.9">9.9</a>.  RECOGNIZE</span>

   The RECOGNIZE method from the client to the server requests the
   recognizer to start recognition and provides it with one or more
   grammar references for grammars to match against the input media.
   The RECOGNIZE method can carry header fields to control the
   sensitivity, confidence level, and the level of detail in results
   provided by the recognizer.  These header field values override the
   current values set by a previous SET-PARAMS method.

   The RECOGNIZE method can request the recognizer resource to operate
   in normal or hotword mode as specified by the Recognition-Mode header
   field.  The default value is "normal".  If the resource could not
   start a recognition, the server MUST respond with a failure status-



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 111]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-112" id="page-112" name="page-112"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   code of 407 and a Completion-Cause header field in the response
   describing the cause of failure.

   The RECOGNIZE request uses the message body to specify the grammars
   applicable to the request.  The active grammar(s) for the request can
   be specified in one of three ways.  If the client needs to explicitly
   control grammar weights for the recognition operation, it MUST employ
   method 3 below.  The order of these grammars specifies the precedence
   of the grammars that is used when more than one grammar in the list
   matches the speech; in this case, the grammar with the higher
   precedence is returned as a match.  This precedence capability is
   useful in applications like VoiceXML browsers to order grammars
   specified at the dialog, document, and root level of a VoiceXML
   application.

   1.  The grammar MAY be placed directly in the message body as typed
       content.  If more than one grammar is included in the body, the
       order of inclusion controls the corresponding precedence for the
       grammars during recognition, with earlier grammars in the body
       having a higher precedence than later ones.

   2.  The body MAY contain a list of grammar URIs specified in content
       of media type 'text/uri-list' [<a href="rfc2483.html" title='"URI Resolution Services Necessary for URN Resolution"'>RFC2483</a>].  The order of the URIs
       determines the corresponding precedence for the grammars during
       recognition, with highest precedence first and decreasing for
       each URI thereafter.

   3.  The body MAY contain a list of grammar URIs specified in content
       of media type 'text/grammar-ref-list'.  This type defines a list
       of grammar URIs and allows each grammar URI to be assigned a
       weight in the list.  This weight has the same meaning as the
       weights described in <a href="#section-2.4.1">Section 2.4.1</a> of the Speech Grammar Markup
       Format (SRGS) [<a href="#ref-W3C.REC-speech-grammar-20040316">W3C.REC-speech-grammar-20040316</a>].

   In addition to performing recognition on the input, the recognizer
   MUST also enroll the collected utterance in a personal grammar if the
   Enroll-Utterance header field is set to true and an Enrollment is
   active (via an earlier execution of the START-PHRASE-ENROLLMENT
   method).  If so, and if the RECOGNIZE request contains a Content-ID
   header field, then the resulting grammar (which includes the personal
   grammar as a sub-grammar) can be referenced through the 'session' URI
   scheme (see <a href="#section-13.6">Section 13.6</a>).

   If the resource was able to successfully start the recognition, the
   server MUST return a success status-code and a request-state of
   IN-PROGRESS.  This means that the recognizer is active and that the
   client MUST be prepared to receive further events with this
   request-id.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 112]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-113" id="page-113" name="page-113"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   If the resource was able to queue the request, the server MUST return
   a success code and request-state of PENDING.  This means that the
   recognizer is currently active with another request and that this
   request has been queued for processing.

   If the resource could not start a recognition, the server MUST
   respond with a failure status-code of 407 and a Completion-Cause
   header field in the response describing the cause of failure.

   For the recognizer resource, RECOGNIZE and INTERPRET are the only
   requests that return a request-state of IN-PROGRESS, meaning that
   recognition is in progress.  When the recognition completes by
   matching one of the grammar alternatives or by a timeout without a
   match or for some other reason, the recognizer resource MUST send the
   client a RECOGNITION-COMPLETE event (or INTERPRETATION-COMPLETE, if
   INTERPRET was the request) with the result of the recognition and a
   request-state of COMPLETE.

   Large grammars can take a long time for the server to compile.  For
   grammars that are used repeatedly, the client can improve server
   performance by issuing a DEFINE-GRAMMAR request with the grammar
   ahead of time.  In such a case, the client can issue the RECOGNIZE
   request and reference the grammar through the 'session' URI scheme
   (see <a href="#section-13.6">Section 13.6</a>).  This also applies in general if the client wants
   to repeat recognition with a previous inline grammar.

   The RECOGNIZE method implementation MUST do a fetch of all external
   URIs that are part of that operation.  If caching is implemented,
   this URI fetching MUST conform to the cache control hints and
   parameter header fields associated with the method in deciding
   whether it should be fetched from cache or from the external server.
   If these hints/parameters are not specified in the method, the values
   set for the session using SET-PARAMS/GET-PARAMS apply.  If it was not
   set for the session, their default values apply.

   Note that since the audio and the messages are carried over separate
   communication paths there may be a race condition between the start
   of the flow of audio and the receipt of the RECOGNIZE method.  For
   example, if an audio flow is started by the client at the same time
   as the RECOGNIZE method is sent, either the audio or the RECOGNIZE
   can arrive at the recognizer first.  As another example, the client
   may choose to continuously send audio to the server and signal the
   server to recognize using the RECOGNIZE method.  Mechanisms to
   resolve this condition are outside the scope of this specification.
   The recognizer can expect the media to start flowing when it receives
   the RECOGNIZE request, but it MUST NOT buffer anything it receives
   beforehand in order to preserve the semantics that application
   authors expect with respect to the input timers.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 113]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-114" id="page-114" name="page-114"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   When a RECOGNIZE method has been received, the recognition is
   initiated on the stream.  The No-Input-Timer MUST be started at this
   time if the Start-Input-Timers header field is specified as "true".
   If this header field is set to "false", the No-Input-Timer MUST be
   started when it receives the START-INPUT-TIMERS method from the
   client.  The Recognition-Timeout MUST be started when the recognition
   resource detects speech or a DTMF digit in the media stream.

   For recognition when not in hotword mode:

   When the recognizer resource detects speech or a DTMF digit in the
   media stream, it MUST send the START-OF-INPUT event.  When enough
   speech has been collected for the server to process, the recognizer
   can try to match the collected speech with the active grammars.  If
   the speech collected at this point fully matches with any of the
   active grammars, the Speech-Complete-Timer is started.  If it matches
   partially with one or more of the active grammars, with more speech
   needed before a full match is achieved, then the Speech-Incomplete-
   Timer is started.

   1.  When the No-Input-Timer expires, the recognizer MUST complete
       with a Completion-Cause code of "no-input-timeout".

   2.  The recognizer MUST support detecting a no-match condition upon
       detecting end of speech.  The recognizer MAY support detecting a
       no-match condition before waiting for end-of-speech.  If this is
       supported, this capability is enabled by setting the Early-No-
       Match header field to "true".  Upon detecting a no-match
       condition, the RECOGNIZE MUST return with "no-match".

   3.  When the Speech-Incomplete-Timer expires, the recognizer SHOULD
       complete with a Completion-Cause code of "partial-match", unless
       the recognizer cannot differentiate a partial-match, in which
       case it MUST return a Completion-Cause code of "no-match".  The
       recognizer MAY return results for the partially matched grammar.

   4.  When the Speech-Complete-Timer expires, the recognizer MUST
       complete with a Completion-Cause code of "success".













<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 114]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-115" id="page-115" name="page-115"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   5.  When the Recognition-Timeout expires, one of the following MUST
       happen:

       5.1.  If there was a partial-match, the recognizer SHOULD
             complete with a Completion-Cause code of "partial-match-
             maxtime", unless the recognizer cannot differentiate a
             partial-match, in which case it MUST complete with a
             Completion-Cause code of "no-match-maxtime".  The
             recognizer MAY return results for the partially matched
             grammar.

       5.2.  If there was a full-match, the recognizer MUST complete
             with a Completion-Cause code of "success-maxtime".

       5.3.  If there was a no match, the recognizer MUST complete with
             a Completion-Cause code of "no-match-maxtime".

   For recognition in hotword mode:

   Note that for recognition in hotword mode the START-OF-INPUT event is
   not generated when speech or a DTMF digit is detected.

   1.  When the No-Input-Timer expires, the recognizer MUST complete
       with a Completion-Cause code of "no-input-timeout".

   2.  If at any point a match occurs, the RECOGNIZE MUST complete with
       a Completion-Cause code of "success".

   3.  When the Recognition-Timeout expires and there is not a match,
       the RECOGNIZE MUST complete with a Completion-Cause code of
       "hotword-maxtime".

   4.  When the Recognition-Timeout expires and there is a match, the
       RECOGNIZE MUST complete with a Completion-Cause code of "success-
       maxtime".

   5.  When the Recognition-Timeout is running but the detected speech/
       DTMF has not resulted in a match, the Recognition-Timeout MUST be
       stopped and reset.  It MUST then be restarted when speech/DTMF is
       again detected.

   Below is a complete example of using RECOGNIZE.  It shows the call to
   RECOGNIZE, the IN-PROGRESS and START-OF-INPUT status messages, and
   the final RECOGNITION-COMPLETE message containing the result.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 115]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-116" id="page-116" name="page-116"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S:MRCP/2.0 ... RECOGNIZE 543257
   Channel-Identifier:32AECB23433801@speechrecog
           Confidence-Threshold:0.9
   Content-Type:application/srgs+xml
   Content-ID:&lt;request1@form-level.store&gt;
   Content-Length:...

   &lt;?xml version="1.0"?&gt;

   &lt;!-- the default grammar language is US English --&gt;
   &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
            xml:lang="en-US" version="1.0" root="request"&gt;

   &lt;!-- single language attachment to tokens --&gt;
       &lt;rule id="yes"&gt;
               &lt;one-of&gt;
                     &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                     &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

   &lt;!-- single language attachment to a rule expansion --&gt;
         &lt;rule id="request"&gt;
               may I speak to
               &lt;one-of xml:lang="fr-CA"&gt;
                     &lt;item&gt;Michel Tremblay&lt;/item&gt;
                     &lt;item&gt;Andre Roy&lt;/item&gt;
               &lt;/one-of&gt;
         &lt;/rule&gt;

     &lt;/grammar&gt;

   S-&gt;C: MRCP/2.0 ... 543257 200 IN-PROGRESS
   Channel-Identifier:32AECB23433801@speechrecog

   S-&gt;C:MRCP/2.0 ... START-OF-INPUT 543257 IN-PROGRESS
   Channel-Identifier:32AECB23433801@speechrecog

   S-&gt;C:MRCP/2.0 ... RECOGNITION-COMPLETE 543257 COMPLETE
   Channel-Identifier:32AECB23433801@speechrecog
   Completion-Cause:000 success
   Waveform-URI:&lt;<a href="http://web.media.com/session123/audio.wav">http://web.media.com/session123/audio.wav</a>&gt;;
                 size=424252;duration=2543
   Content-Type:application/nlsml+xml
   Content-Length:...






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 116]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-117" id="page-117" name="page-117"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           xmlns:ex="http://www.example.com/example"
           grammar="session:request1@form-level.store"&gt;
       &lt;interpretation&gt;
           &lt;instance name="Person"&gt;
               &lt;ex:Person&gt;
                   &lt;ex:Name&gt; Andre Roy &lt;/ex:Name&gt;
               &lt;/ex:Person&gt;
           &lt;/instance&gt;
               &lt;input&gt;   may I speak to Andre Roy &lt;/input&gt;
       &lt;/interpretation&gt;
   &lt;/result&gt;

   Below is an example of calling RECOGNIZE with a different grammar.
   No status or completion messages are shown in this example, although
   they would of course occur in normal usage.

   C-&gt;S:   MRCP/2.0 ... RECOGNIZE 543257
           Channel-Identifier:32AECB23433801@speechrecog
           Confidence-Threshold:0.9
           Fetch-Timeout:20
           Content-Type:application/srgs+xml
           Content-Length:...

           &lt;?xml version="1.0"? Version="1.0" mode="voice"
                 root="Basic md"&gt;
            &lt;rule id="rule_list" scope="public"&gt;
                &lt;one-of&gt;
                    &lt;item weight=10&gt;
                        &lt;ruleref uri=
               "http://grammar.example.com/world-cities.grxml#canada"/&gt;
                   &lt;/item&gt;
                   &lt;item weight=1.5&gt;
                       &lt;ruleref uri=
               "http://grammar.example.com/world-cities.grxml#america"/&gt;
                   &lt;/item&gt;
                  &lt;item weight=0.5&gt;
                       &lt;ruleref uri=
               "http://grammar.example.com/world-cities.grxml#india"/&gt;
                  &lt;/item&gt;
              &lt;/one-of&gt;
           &lt;/rule&gt;








<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 117]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-118" id="page-118" name="page-118"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.10.%20%20STOP"></a><a class="selflink" href="#section-9.10" name="section-9.10">9.10</a>.  STOP</span>

   The STOP method from the client to the server tells the resource to
   stop recognition if a request is active.  If a RECOGNIZE request is
   active and the STOP request successfully terminated it, then the
   response header section contains an Active-Request-Id-List header
   field containing the request-id of the RECOGNIZE request that was
   terminated.  In this case, no RECOGNITION-COMPLETE event is sent for
   the terminated request.  If there was no recognition active, then the
   response MUST NOT contain an Active-Request-Id-List header field.
   Either way, the response MUST contain a status-code of 200 "Success".

   C-&gt;S:   MRCP/2.0 ... RECOGNIZE 543257
           Channel-Identifier:32AECB23433801@speechrecog
           Confidence-Threshold:0.9
           Content-Type:application/srgs+xml
           Content-ID:&lt;request1@form-level.store&gt;
           Content-Length:...

           &lt;?xml version="1.0"?&gt;

           &lt;!-- the default grammar language is US English --&gt;
           &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
                    xml:lang="en-US" version="1.0" root="request"&gt;

           &lt;!-- single language attachment to tokens --&gt;
               &lt;rule id="yes"&gt;
                   &lt;one-of&gt;
                         &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                         &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
                   &lt;/one-of&gt;
               &lt;/rule&gt;

           &lt;!-- single language attachment to a rule expansion --&gt;
               &lt;rule id="request"&gt;
               may I speak to
                   &lt;one-of xml:lang="fr-CA"&gt;
                         &lt;item&gt;Michel Tremblay&lt;/item&gt;
                         &lt;item&gt;Andre Roy&lt;/item&gt;
                   &lt;/one-of&gt;
               &lt;/rule&gt;
           &lt;/grammar&gt;

   S-&gt;C:   MRCP/2.0 ... 543257 200 IN-PROGRESS
           Channel-Identifier:32AECB23433801@speechrecog

   C-&gt;S:   MRCP/2.0 ... STOP 543258 200
           Channel-Identifier:32AECB23433801@speechrecog



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 118]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-119" id="page-119" name="page-119"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:   MRCP/2.0 ... 543258 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog
           Active-Request-Id-List:543257

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.11.%20%20GET-RESULT"></a><a class="selflink" href="#section-9.11" name="section-9.11">9.11</a>.  GET-RESULT</span>

   The GET-RESULT method from the client to the server MAY be issued
   when the recognizer resource is in the recognized state.  This
   request allows the client to retrieve results for a completed
   recognition.  This is useful if the client decides it wants more
   alternatives or more information.  When the server receives this
   request, it re-computes and returns the results according to the
   recognition constraints provided in the GET-RESULT request.

   The GET-RESULT request can specify constraints such as a different
   confidence-threshold or n-best-list-length.  This capability is
   OPTIONAL for MRCPv2 servers and the automatic speech recognition
   engine in the server MUST return a status of unsupported feature if
   not supported.

   C-&gt;S:   MRCP/2.0 ... GET-RESULT 543257
           Channel-Identifier:32AECB23433801@speechrecog
           Confidence-Threshold:0.9


   S-&gt;C:   MRCP/2.0 ... 543257 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog
           Content-Type:application/nlsml+xml
           Content-Length:...

           &lt;?xml version="1.0"?&gt;
           &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                   xmlns:ex="http://www.example.com/example"
                   grammar="session:request1@form-level.store"&gt;
               &lt;interpretation&gt;
                   &lt;instance name="Person"&gt;
                       &lt;ex:Person&gt;
                           &lt;ex:Name&gt; Andre Roy &lt;/ex:Name&gt;
                       &lt;/ex:Person&gt;
                   &lt;/instance&gt;
                   &lt;input&gt;   may I speak to Andre Roy &lt;/input&gt;
               &lt;/interpretation&gt;
           &lt;/result&gt;








<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 119]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-120" id="page-120" name="page-120"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.12.%20%20START-OF-INPUT"></a><a class="selflink" href="#section-9.12" name="section-9.12">9.12</a>.  START-OF-INPUT</span>

   This is an event from the server to the client indicating that the
   recognizer resource has detected speech or a DTMF digit in the media
   stream.  This event is useful in implementing kill-on-barge-in
   scenarios when a synthesizer resource is in a different session from
   the recognizer resource and hence is not aware of an incoming audio
   source (see <a href="#section-8.4.2">Section 8.4.2</a>).  In these cases, it is up to the client
   to act as an intermediary and respond to this event by issuing a
   BARGE-IN-OCCURRED event to the synthesizer resource.  The recognizer
   resource also MUST send a Proxy-Sync-Id header field with a unique
   value for this event.

   This event MUST be generated by the server, irrespective of whether
   or not the synthesizer and recognizer are on the same server.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.13.%20%20START-INPUT-TIMERS"></a><a class="selflink" href="#section-9.13" name="section-9.13">9.13</a>.  START-INPUT-TIMERS</span>

   This request is sent from the client to the recognizer resource when
   it knows that a kill-on-barge-in prompt has finished playing (see
   <a href="#section-8.4.2">Section 8.4.2</a>).  This is useful in the scenario when the recognition
   and synthesizer engines are not in the same session.  When a kill-on-
   barge-in prompt is being played, the client may want a RECOGNIZE
   request to be simultaneously active so that it can detect and
   implement kill-on-barge-in.  But at the same time the client doesn't
   want the recognizer to start the no-input timers until the prompt is
   finished.  The Start-Input-Timers header field in the RECOGNIZE
   request allows the client to say whether or not the timers should be
   started immediately.  If not, the recognizer resource MUST NOT start
   the timers until the client sends a START-INPUT-TIMERS method to the
   recognizer.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.14.%20%20RECOGNITION-COMPLETE"></a><a class="selflink" href="#section-9.14" name="section-9.14">9.14</a>.  RECOGNITION-COMPLETE</span>

   This is an event from the recognizer resource to the client
   indicating that the recognition completed.  The recognition result is
   sent in the body of the MRCPv2 message.  The request-state field MUST
   be COMPLETE indicating that this is the last event with that
   request-id and that the request with that request-id is now complete.
   The server MUST maintain the recognizer context containing the
   results and the audio waveform input of that recognition until the
   next RECOGNIZE request is issued for that resource or the session
   terminates.  If the server returns a URI to the audio waveform, it
   MUST do so in a Waveform-URI header field in the RECOGNITION-COMPLETE
   event.  The client can use this URI to retrieve or playback the
   audio.





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 120]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-121" id="page-121" name="page-121"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Note, if an enrollment session was active, the RECOGNITION-COMPLETE
   event can contain either recognition or enrollment results depending
   on what was spoken.  The following example shows a complete exchange
   with a recognition result.

   C-&gt;S:   MRCP/2.0 ... RECOGNIZE 543257
           Channel-Identifier:32AECB23433801@speechrecog
           Confidence-Threshold:0.9
           Content-Type:application/srgs+xml
           Content-ID:&lt;request1@form-level.store&gt;
           Content-Length:...

           &lt;?xml version="1.0"?&gt;

           &lt;!-- the default grammar language is US English --&gt;
           &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
                    xml:lang="en-US" version="1.0" root="request"&gt;

           &lt;!-- single language attachment to tokens --&gt;
               &lt;rule id="yes"&gt;
                      &lt;one-of&gt;
                          &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                          &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
                      &lt;/one-of&gt;
                 &lt;/rule&gt;

           &lt;!-- single language attachment to a rule expansion --&gt;
                 &lt;rule id="request"&gt;
                     may I speak to
                      &lt;one-of xml:lang="fr-CA"&gt;
                             &lt;item&gt;Michel Tremblay&lt;/item&gt;
                             &lt;item&gt;Andre Roy&lt;/item&gt;
                      &lt;/one-of&gt;
                 &lt;/rule&gt;
           &lt;/grammar&gt;

   S-&gt;C:   MRCP/2.0 ... 543257 200 IN-PROGRESS
           Channel-Identifier:32AECB23433801@speechrecog

   S-&gt;C:   MRCP/2.0 ... START-OF-INPUT 543257 IN-PROGRESS
           Channel-Identifier:32AECB23433801@speechrecog










<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 121]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-122" id="page-122" name="page-122"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:   MRCP/2.0 ... RECOGNITION-COMPLETE 543257 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog
           Completion-Cause:000 success
           Waveform-URI:&lt;<a href="http://web.media.com/session123/audio.wav">http://web.media.com/session123/audio.wav</a>&gt;;
                        size=342456;duration=25435
           Content-Type:application/nlsml+xml
           Content-Length:...

           &lt;?xml version="1.0"?&gt;
           &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                   xmlns:ex="http://www.example.com/example"
                   grammar="session:request1@form-level.store"&gt;
               &lt;interpretation&gt;
                   &lt;instance name="Person"&gt;
                       &lt;ex:Person&gt;
                           &lt;ex:Name&gt; Andre Roy &lt;/ex:Name&gt;
                       &lt;/ex:Person&gt;
                   &lt;/instance&gt;
                   &lt;input&gt;   may I speak to Andre Roy &lt;/input&gt;
               &lt;/interpretation&gt;
           &lt;/result&gt;

   If the result were instead an enrollment result, the final message
   from the server above could have been:

   S-&gt;C:   MRCP/2.0 ... RECOGNITION-COMPLETE 543257 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog
           Completion-Cause:000 success
           Content-Type:application/nlsml+xml
           Content-Length:...

           &lt;?xml version= "1.0"?&gt;
           &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                   grammar="Personal-Grammar-URI"&gt;
               &lt;enrollment-result&gt;
                   &lt;num-clashes&gt; 2 &lt;/num-clashes&gt;
                   &lt;num-good-repetitions&gt; 1 &lt;/num-good-repetitions&gt;
                   &lt;num-repetitions-still-needed&gt;
                      1
                   &lt;/num-repetitions-still-needed&gt;
                   &lt;consistency-status&gt; consistent &lt;/consistency-status&gt;
                   &lt;clash-phrase-ids&gt;
                       &lt;item&gt; Jeff &lt;/item&gt; &lt;item&gt; Andre &lt;/item&gt;
                   &lt;/clash-phrase-ids&gt;
                   &lt;transcriptions&gt;
                        &lt;item&gt; m ay b r ow k er &lt;/item&gt;
                        &lt;item&gt; m ax r aa k ah &lt;/item&gt;
                   &lt;/transcriptions&gt;



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 122]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-123" id="page-123" name="page-123"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


                   &lt;confusable-phrases&gt;
                        &lt;item&gt;
                             &lt;phrase&gt; call &lt;/phrase&gt;
                             &lt;confusion-level&gt; 10 &lt;/confusion-level&gt;
                        &lt;/item&gt;
                   &lt;/confusable-phrases&gt;
               &lt;/enrollment-result&gt;
           &lt;/result&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.15.%20%20START-PHRASE-ENROLLMENT"></a><a class="selflink" href="#section-9.15" name="section-9.15">9.15</a>.  START-PHRASE-ENROLLMENT</span>

   The START-PHRASE-ENROLLMENT method from the client to the server
   starts a new phrase enrollment session during which the client can
   call RECOGNIZE multiple times to enroll a new utterance in a grammar.
   An enrollment session consists of a set of calls to RECOGNIZE in
   which the caller speaks a phrase several times so the system can
   "learn" it.  The phrase is then added to a personal grammar (speaker-
   trained grammar), so that the system can recognize it later.

   Only one phrase enrollment session can be active at a time for a
   resource.  The Personal-Grammar-URI identifies the grammar that is
   used during enrollment to store the personal list of phrases.  Once
   RECOGNIZE is called, the result is returned in a RECOGNITION-COMPLETE
   event and will contain either an enrollment result OR a recognition
   result for a regular recognition.

   Calling END-PHRASE-ENROLLMENT ends the ongoing phrase enrollment
   session, which is typically done after a sequence of successful calls
   to RECOGNIZE.  This method can be called to commit the new phrase to
   the personal grammar or to abort the phrase enrollment session.

   The grammar to contain the new enrolled phrase, specified by
   Personal-Grammar-URI, is created if it does not exist.  Also, the
   personal grammar MUST ONLY contain phrases added via a phrase
   enrollment session.

   The Phrase-ID passed to this method is used to identify this phrase
   in the grammar and will be returned as the speech input when doing a
   RECOGNIZE on the grammar.  The Phrase-NL similarly is returned in a
   RECOGNITION-COMPLETE event in the same manner as other Natural
   Language (NL) in a grammar.  The tag-format of this NL is
   implementation specific.

   If the client has specified Save-Best-Waveform as true, then the
   response after ending the phrase enrollment session MUST contain the
   location/URI of a recording of the best repetition of the learned
   phrase.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 123]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-124" id="page-124" name="page-124"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S:   MRCP/2.0 ... START-PHRASE-ENROLLMENT 543258
           Channel-Identifier:32AECB23433801@speechrecog
           Num-Min-Consistent-Pronunciations:2
           Consistency-Threshold:30
           Clash-Threshold:12
           Personal-Grammar-URI:&lt;personal grammar uri&gt;
           Phrase-Id:&lt;phrase id&gt;
           Phrase-NL:&lt;NL phrase&gt;
           Weight:1
           Save-Best-Waveform:true

   S-&gt;C:   MRCP/2.0 ... 543258 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.16.%20%20ENROLLMENT-ROLLBACK"></a><a class="selflink" href="#section-9.16" name="section-9.16">9.16</a>.  ENROLLMENT-ROLLBACK</span>

   The ENROLLMENT-ROLLBACK method discards the last live utterance from
   the RECOGNIZE operation.  The client can invoke this method when the
   caller provides undesirable input such as non-speech noises, side-
   speech, commands, utterance from the RECOGNIZE grammar, etc.  Note
   that this method does not provide a stack of rollback states.
   Executing ENROLLMENT-ROLLBACK twice in succession without an
   intervening recognition operation has no effect the second time.

   C-&gt;S:   MRCP/2.0 ... ENROLLMENT-ROLLBACK 543261
           Channel-Identifier:32AECB23433801@speechrecog

   S-&gt;C:   MRCP/2.0 ... 543261 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.17.%20%20END-PHRASE-ENROLLMENT"></a><a class="selflink" href="#section-9.17" name="section-9.17">9.17</a>.  END-PHRASE-ENROLLMENT</span>

   The client MAY call the END-PHRASE-ENROLLMENT method ONLY during an
   active phrase enrollment session.  It MUST NOT be called during an
   ongoing RECOGNIZE operation.  To commit the new phrase in the
   grammar, the client MAY call this method once successive calls to
   RECOGNIZE have succeeded and Num-Repetitions-Still-Needed has been
   returned as 0 in the RECOGNITION-COMPLETE event.  Alternatively, the
   client MAY abort the phrase enrollment session by calling this method
   with the Abort-Phrase-Enrollment header field.

   If the client has specified Save-Best-Waveform as "true" in the
   START-PHRASE-ENROLLMENT request, then the response MUST contain a
   Waveform-URI header whose value is the location/URI of a recording of
   the best repetition of the learned phrase.

  C-&gt;S:   MRCP/2.0 ... END-PHRASE-ENROLLMENT 543262
          Channel-Identifier:32AECB23433801@speechrecog



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 124]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-125" id="page-125" name="page-125"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


  S-&gt;C:   MRCP/2.0 ... 543262 200 COMPLETE
          Channel-Identifier:32AECB23433801@speechrecog
          Waveform-URI:&lt;<a href="http://mediaserver.com/recordings/file1324.wav">http://mediaserver.com/recordings/file1324.wav</a>&gt;;
                       size=242453;duration=25432

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.18.%20%20MODIFY-PHRASE"></a><a class="selflink" href="#section-9.18" name="section-9.18">9.18</a>.  MODIFY-PHRASE</span>

   The MODIFY-PHRASE method sent from the client to the server is used
   to change the phrase ID, NL phrase, and/or weight for a given phrase
   in a personal grammar.

   If no fields are supplied, then calling this method has no effect.

   C-&gt;S:   MRCP/2.0 ... MODIFY-PHRASE 543265
           Channel-Identifier:32AECB23433801@speechrecog
           Personal-Grammar-URI:&lt;personal grammar uri&gt;
           Phrase-Id:&lt;phrase id&gt;
           New-Phrase-Id:&lt;new phrase id&gt;
           Phrase-NL:&lt;NL phrase&gt;
           Weight:1

   S-&gt;C:   MRCP/2.0 ... 543265 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.19.%20%20DELETE-PHRASE"></a><a class="selflink" href="#section-9.19" name="section-9.19">9.19</a>.  DELETE-PHRASE</span>

   The DELETE-PHRASE method sent from the client to the server is used
   to delete a phase that is in a personal grammar and was added through
   voice enrollment or text enrollment.  If the specified phrase does
   not exist, this method has no effect.

   C-&gt;S:   MRCP/2.0 ... DELETE-PHRASE 543266
           Channel-Identifier:32AECB23433801@speechrecog
           Personal-Grammar-URI:&lt;personal grammar uri&gt;
           Phrase-Id:&lt;phrase id&gt;

   S-&gt;C:   MRCP/2.0 ... 543266 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.20.%20%20INTERPRET"></a><a class="selflink" href="#section-9.20" name="section-9.20">9.20</a>.  INTERPRET</span>

   The INTERPRET method from the client to the server takes as input an
   Interpret-Text header field containing the text for which the
   semantic interpretation is desired, and returns, via the
   INTERPRETATION-COMPLETE event, an interpretation result that is very
   similar to the one returned from a RECOGNIZE method invocation.  Only





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 125]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-126" id="page-126" name="page-126"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   portions of the result relevant to acoustic matching are excluded
   from the result.  The Interpret-Text header field MUST be included in
   the INTERPRET request.

   Recognizer grammar data is treated in the same way as it is when
   issuing a RECOGNIZE method call.

   If a RECOGNIZE, RECORD, or another INTERPRET operation is already in
   progress for the resource, the server MUST reject the request with a
   response having a status-code of 402 "Method not valid in this
   state", and a COMPLETE request state.

   C-&gt;S:   MRCP/2.0 ... INTERPRET 543266
           Channel-Identifier:32AECB23433801@speechrecog
           Interpret-Text:may I speak to Andre Roy
           Content-Type:application/srgs+xml
           Content-ID:&lt;request1@form-level.store&gt;
           Content-Length:...

           &lt;?xml version="1.0"?&gt;
           &lt;!-- the default grammar language is US English --&gt;
           &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
                    xml:lang="en-US" version="1.0" root="request"&gt;
           &lt;!-- single language attachment to tokens --&gt;
               &lt;rule id="yes"&gt;
                   &lt;one-of&gt;
                       &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                       &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
                   &lt;/one-of&gt;
               &lt;/rule&gt;

           &lt;!-- single language attachment to a rule expansion --&gt;
               &lt;rule id="request"&gt;
                   may I speak to
                   &lt;one-of xml:lang="fr-CA"&gt;
                       &lt;item&gt;Michel Tremblay&lt;/item&gt;
                       &lt;item&gt;Andre Roy&lt;/item&gt;
                   &lt;/one-of&gt;
               &lt;/rule&gt;
           &lt;/grammar&gt;

   S-&gt;C:   MRCP/2.0 ... 543266 200 IN-PROGRESS
           Channel-Identifier:32AECB23433801@speechrecog








<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 126]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-127" id="page-127" name="page-127"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:   MRCP/2.0 ... INTERPRETATION-COMPLETE 543266 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog
           Completion-Cause:000 success
           Content-Type:application/nlsml+xml
           Content-Length:...

           &lt;?xml version="1.0"?&gt;
           &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                   xmlns:ex="http://www.example.com/example"
                   grammar="session:request1@form-level.store"&gt;
               &lt;interpretation&gt;
                   &lt;instance name="Person"&gt;
                       &lt;ex:Person&gt;
                           &lt;ex:Name&gt; Andre Roy &lt;/ex:Name&gt;
                       &lt;/ex:Person&gt;
                   &lt;/instance&gt;
                   &lt;input&gt;   may I speak to Andre Roy &lt;/input&gt;
               &lt;/interpretation&gt;
           &lt;/result&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.21.%20%20INTERPRETATION-COMPLETE"></a><a class="selflink" href="#section-9.21" name="section-9.21">9.21</a>.  INTERPRETATION-COMPLETE</span>

   This event from the recognizer resource to the client indicates that
   the INTERPRET operation is complete.  The interpretation result is
   sent in the body of the MRCP message.  The request state MUST be set
   to COMPLETE.

   The Completion-Cause header field MUST be included in this event and
   MUST be set to an appropriate value from the list of cause codes.

   C-&gt;S:    MRCP/2.0 ... INTERPRET 543266
           Channel-Identifier:32AECB23433801@speechrecog
           Interpret-Text:may I speak to Andre Roy
           Content-Type:application/srgs+xml
           Content-ID:&lt;request1@form-level.store&gt;
           Content-Length:...

           &lt;?xml version="1.0"?&gt;
           &lt;!-- the default grammar language is US English --&gt;
           &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
                    xml:lang="en-US" version="1.0" root="request"&gt;
           &lt;!-- single language attachment to tokens --&gt;
               &lt;rule id="yes"&gt;
                   &lt;one-of&gt;
                       &lt;item xml:lang="fr-CA"&gt;oui&lt;/item&gt;
                       &lt;item xml:lang="en-US"&gt;yes&lt;/item&gt;
                   &lt;/one-of&gt;
               &lt;/rule&gt;



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 127]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-128" id="page-128" name="page-128"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


           &lt;!-- single language attachment to a rule expansion --&gt;
               &lt;rule id="request"&gt;
                   may I speak to
                   &lt;one-of xml:lang="fr-CA"&gt;
                       &lt;item&gt;Michel Tremblay&lt;/item&gt;
                       &lt;item&gt;Andre Roy&lt;/item&gt;
                   &lt;/one-of&gt;
               &lt;/rule&gt;
           &lt;/grammar&gt;

   S-&gt;C:    MRCP/2.0 ... 543266 200 IN-PROGRESS
           Channel-Identifier:32AECB23433801@speechrecog

   S-&gt;C:    MRCP/2.0 ... INTERPRETATION-COMPLETE 543266 200 COMPLETE
           Channel-Identifier:32AECB23433801@speechrecog
           Completion-Cause:000 success
           Content-Type:application/nlsml+xml
           Content-Length:...

           &lt;?xml version="1.0"?&gt;
           &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                   xmlns:ex="http://www.example.com/example"
                   grammar="session:request1@form-level.store"&gt;
               &lt;interpretation&gt;
                   &lt;instance name="Person"&gt;
                       &lt;ex:Person&gt;
                           &lt;ex:Name&gt; Andre Roy &lt;/ex:Name&gt;
                       &lt;/ex:Person&gt;
                   &lt;/instance&gt;
                   &lt;input&gt;   may I speak to Andre Roy &lt;/input&gt;
               &lt;/interpretation&gt;
           &lt;/result&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.22.%20%20DTMF%20Detection"></a><a class="selflink" href="#section-9.22" name="section-9.22">9.22</a>.  DTMF Detection</span>

   Digits received as DTMF tones are delivered to the recognition
   resource in the MRCPv2 server in the RTP stream according to <a href="rfc4733.html">RFC 4733</a>
   [<a href="rfc4733.html" title='"RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals"'>RFC4733</a>].  The Automatic Speech Recognizer (ASR) MUST support <a href="rfc4733.html">RFC</a>
   <a href="rfc4733.html">4733</a> to recognize digits, and it MAY support recognizing DTMF tones
   [<a href="#ref-Q.23" title='"Technical Features of Push-Button Telephone Sets"'>Q.23</a>] in the audio.











<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 128]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-129" id="page-129" name="page-129"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Recorder%20Resource"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Recorder Resource</span>

   This resource captures received audio and video and stores it as
   content pointed to by a URI.  The main usages of recorders are

   1.  to capture speech audio that may be submitted for recognition at
       a later time, and

   2.  recording voice or video mails.

   Both these applications require functionality above and beyond those
   specified by protocols such as RTSP [<a href="rfc2326.html" title='"Real Time Streaming Protocol (RTSP)"'>RFC2326</a>].  This includes audio
   endpointing (i.e., detecting speech or silence).  The support for
   video is OPTIONAL and is mainly capturing video mails that may
   require the speech or audio processing mentioned above.

   A recorder MUST provide endpointing capabilities for suppressing
   silence at the beginning and end of a recording, and it MAY also
   suppress silence in the middle of a recording.  If such suppression
   is done, the recorder MUST maintain timing metadata to indicate the
   actual time stamps of the recorded media.

   See the discussion on the sensitivity of saved waveforms in
   <a href="#section-12">Section 12</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Recorder%20State%20Machine"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Recorder State Machine</span>

   Idle                   Recording
   State                  State
    |                       |
    |---------RECORD-------&gt;|
    |                       |
    |&lt;------STOP------------|
    |                       |
    |&lt;--RECORD-COMPLETE-----|
    |                       |
    |              |--------|
    |       START-OF-INPUT  |
    |              |-------&gt;|
    |                       |
    |              |--------|
    |    START-INPUT-TIMERS |
    |              |-------&gt;|
    |                       |

                          Recorder State Machine





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 129]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-130" id="page-130" name="page-130"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Recorder%20Methods"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Recorder Methods</span>

   The recorder resource supports the following methods.

   recorder-method      =  "RECORD"
                        /  "STOP"
                        /  "START-INPUT-TIMERS"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.3.%20%20Recorder%20Events"></a><a class="selflink" href="#section-10.3" name="section-10.3">10.3</a>.  Recorder Events</span>

   The recorder resource can generate the following events.

   recorder-event       =  "START-OF-INPUT"
                        /  "RECORD-COMPLETE"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.4.%20%20Recorder%20Header%20Fields"></a><a class="selflink" href="#section-10.4" name="section-10.4">10.4</a>.  Recorder Header Fields</span>

   Method invocations for the recorder resource can contain resource-
   specific header fields containing request options and information to
   augment the Method, Response, or Event message it is associated with.

   recorder-header      =  sensitivity-level
                        /  no-input-timeout
                        /  completion-cause
                        /  completion-reason
                        /  failed-uri
                        /  failed-uri-cause
                        /  record-uri
                        /  media-type
                        /  max-time
                        /  trim-length
                        /  final-silence
                        /  capture-on-speech
                        /  ver-buffer-utterance
                        /  start-input-timers
                        /  new-audio-channel

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.1.%20%20Sensitivity-Level"></a><a class="selflink" href="#section-10.4.1" name="section-10.4.1">10.4.1</a>.  Sensitivity-Level</span>

   To filter out background noise and not mistake it for speech, the
   recorder can support a variable level of sound sensitivity.  The
   Sensitivity-Level header field is a float value between 0.0 and 1.0
   and allows the client to set the sensitivity level for the recorder.
   This header field MAY occur in RECORD, SET-PARAMS, or GET-PARAMS.  A
   higher value for this header field means higher sensitivity.  The
   default value for this header field is implementation specific.

   sensitivity-level    =     "Sensitivity-Level" ":" FLOAT CRLF



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 130]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-131" id="page-131" name="page-131"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.2.%20%20No-Input-Timeout"></a><a class="selflink" href="#section-10.4.2" name="section-10.4.2">10.4.2</a>.  No-Input-Timeout</span>

   When recording is started and there is no speech detected for a
   certain period of time, the recorder can send a RECORD-COMPLETE event
   to the client and terminate the record operation.  The No-Input-
   Timeout header field can set this timeout value.  The value is in
   milliseconds.  This header field MAY occur in RECORD, SET-PARAMS, or
   GET-PARAMS.  The value for this header field ranges from 0 to an
   implementation-specific maximum value.  The default value for this
   header field is implementation specific.

   no-input-timeout    =     "No-Input-Timeout" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.3.%20%20Completion-Cause"></a><a class="selflink" href="#section-10.4.3" name="section-10.4.3">10.4.3</a>.  Completion-Cause</span>

   This header field MUST be part of a RECORD-COMPLETE event from the
   recorder resource to the client.  This indicates the reason behind
   the RECORD method completion.  This header field MUST be sent in the
   RECORD responses if they return with a failure status and a COMPLETE
   state.  In the ABNF below, the 'cause-code' contains a numerical
   value selected from the Cause-Code column of the following table.
   The 'cause-name' contains the corresponding token selected from the
   Cause-Name column.

   completion-cause         =  "Completion-Cause" ":" cause-code SP
                               cause-name CRLF
   cause-code               =  3DIGIT
   cause-name               =  *VCHAR

   +------------+-----------------------+------------------------------+
   | Cause-Code | Cause-Name            | Description                  |
   +------------+-----------------------+------------------------------+
   | 000        | success-silence       | RECORD completed with a      |
   |            |                       | silence at the end.          |
   | 001        | success-maxtime       | RECORD completed after       |
   |            |                       | reaching maximum recording   |
   |            |                       | time specified in record     |
   |            |                       | method.                      |
   | 002        | no-input-timeout      | RECORD failed due to no      |
   |            |                       | input.                       |
   | 003        | uri-failure           | Failure accessing the record |
   |            |                       | URI.                         |
   | 004        | error                 | RECORD request terminated    |
   |            |                       | prematurely due to a         |
   |            |                       | recorder error.              |
   +------------+-----------------------+------------------------------+





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 131]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-132" id="page-132" name="page-132"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.4.%20%20Completion-Reason"></a><a class="selflink" href="#section-10.4.4" name="section-10.4.4">10.4.4</a>.  Completion-Reason</span>

   This header field MAY be present in a RECORD-COMPLETE event coming
   from the recorder resource to the client.  It contains the reason
   text behind the RECORD request completion.  This header field
   communicates text describing the reason for the failure.

   The completion reason text is provided for client use in logs and for
   debugging and instrumentation purposes.  Clients MUST NOT interpret
   the completion reason text.

   completion-reason        =  "Completion-Reason" ":"
                               quoted-string CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.5.%20%20Failed-URI"></a><a class="selflink" href="#section-10.4.5" name="section-10.4.5">10.4.5</a>.  Failed-URI</span>

   When a recorder method needs to post the audio to a URI and access to
   the URI fails, the server MUST provide the failed URI in this header
   field in the method response.

   failed-uri               =  "Failed-URI" ":" absoluteURI CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.6.%20%20Failed-URI-Cause"></a><a class="selflink" href="#section-10.4.6" name="section-10.4.6">10.4.6</a>.  Failed-URI-Cause</span>

   When a recorder method needs to post the audio to a URI and access to
   the URI fails, the server MAY provide the URI-specific or protocol-
   specific response code through this header field in the method
   response.  The value encoding is UTF-8 (<a href="rfc3629.html">RFC 3629</a> [<a href="rfc3629.html" title='"UTF-8, a transformation format of ISO 10646"'>RFC3629</a>]) to
   accommodate any access protocol -- some access protocols might have a
   response string instead of a numeric response code.

   failed-uri-cause         =  "Failed-URI-Cause" ":" 1*UTFCHAR
                               CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.7.%20%20Record-URI"></a><a class="selflink" href="#section-10.4.7" name="section-10.4.7">10.4.7</a>.  Record-URI</span>

   When a recorder method contains this header field, the server MUST
   capture the audio and store it.  If the header field is present but
   specified with no value, the server MUST store the content locally
   and generate a URI that points to it.  This URI is then returned in
   either the STOP response or the RECORD-COMPLETE event.  If the header
   field in the RECORD method specifies a URI, the server MUST attempt
   to capture and store the audio at that location.  If this header
   field is not specified in the RECORD request, the server MUST capture
   the audio, MUST encode it, and MUST send it in the STOP response or
   the RECORD-COMPLETE event as a message body.  In this case, the





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 132]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-133" id="page-133" name="page-133"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   response carrying the audio content MUST include a Content ID (cid)
   [<a href="rfc2392.html" title='"Content-ID and Message-ID Uniform Resource Locators"'>RFC2392</a>] value in this header pointing to the Content-ID in the
   message body.

   The server MUST also return the size in octets and the duration in
   milliseconds of the recorded audio waveform as parameters associated
   with the header field.

   Implementations MUST support 'http' [<a href="rfc2616.html" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>RFC2616</a>], 'https' [<a href="rfc2818.html" title='"HTTP Over TLS"'>RFC2818</a>],
   'file' [<a href="rfc3986.html" title='"Uniform Resource Identifier (URI): Generic Syntax"'>RFC3986</a>], and 'cid' [<a href="rfc2392.html" title='"Content-ID and Message-ID Uniform Resource Locators"'>RFC2392</a>] schemes in the URI.  Note that
   implementations already exist that support other schemes.

   record-uri               =  "Record-URI" ":" ["&lt;" uri "&gt;"
                               ";" "size" "=" 1*19DIGIT
                               ";" "duration" "=" 1*19DIGIT] CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.8.%20%20Media-Type"></a><a class="selflink" href="#section-10.4.8" name="section-10.4.8">10.4.8</a>.  Media-Type</span>

   A RECORD method MUST contain this header field, which specifies to
   the server the media type of the captured audio or video.

   media-type               =  "Media-Type" ":" media-type-value
                               CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.9.%20%20Max-Time"></a><a class="selflink" href="#section-10.4.9" name="section-10.4.9">10.4.9</a>.  Max-Time</span>

   When recording is started, this specifies the maximum length of the
   recording in milliseconds, calculated from the time the actual
   capture and store begins and is not necessarily the time the RECORD
   method is received.  It specifies the duration before silence
   suppression, if any, has been applied by the recorder resource.
   After this time, the recording stops and the server MUST return a
   RECORD-COMPLETE event to the client having a request-state of
   COMPLETE.  This header field MAY occur in RECORD, SET-PARAMS, or GET-
   PARAMS.  The value for this header field ranges from 0 to an
   implementation-specific maximum value.  A value of 0 means infinity,
   and hence the recording continues until one or more of the other stop
   conditions are met.  The default value for this header field is 0.

   max-time                 =  "Max-Time" ":" 1*19DIGIT CRLF











<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 133]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-134" id="page-134" name="page-134"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.10.%20%20Trim-Length"></a><a class="selflink" href="#section-10.4.10" name="section-10.4.10">10.4.10</a>.  Trim-Length</span>

   This header field MAY be sent on a STOP method and specifies the
   length of audio to be trimmed from the end of the recording after the
   stop.  The length is interpreted to be in milliseconds.  The default
   value for this header field is 0.

   trim-length                 =  "Trim-Length" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.11.%20%20Final-Silence"></a><a class="selflink" href="#section-10.4.11" name="section-10.4.11">10.4.11</a>.  Final-Silence</span>

   When the recorder is started and the actual capture begins, this
   header field specifies the length of silence in the audio that is to
   be interpreted as the end of the recording.  This header field MAY
   occur in RECORD, SET-PARAMS, or GET-PARAMS.  The value for this
   header field ranges from 0 to an implementation-specific maximum
   value and is interpreted to be in milliseconds.  A value of 0 means
   infinity, and hence the recording will continue until one of the
   other stop conditions are met.  The default value for this header
   field is implementation specific.

   final-silence            =  "Final-Silence" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.12.%20%20Capture-On-Speech"></a><a class="selflink" href="#section-10.4.12" name="section-10.4.12">10.4.12</a>.  Capture-On-Speech</span>

   If "false", the recorder MUST start capturing immediately when
   started.  If "true", the recorder MUST wait for the endpointing
   functionality to detect speech before it starts capturing.  This
   header field MAY occur in the RECORD, SET-PARAMS, or GET-PARAMS.  The
   value for this header field is a Boolean.  The default value for this
   header field is "false".

   capture-on-speech        =  "Capture-On-Speech " ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.13.%20%20Ver-Buffer-Utterance"></a><a class="selflink" href="#section-10.4.13" name="section-10.4.13">10.4.13</a>.  Ver-Buffer-Utterance</span>

   This header field is the same as the one described for the verifier
   resource (see <a href="#section-11.4.14">Section 11.4.14</a>).  This tells the server to buffer the
   utterance associated with this recording request into the
   verification buffer.  Sending this header field is permitted only if
   the verification buffer is for the session.  This buffer is shared
   across resources within a session.  It gets instantiated when a
   verifier resource is added to this session and is released when the
   verifier resource is released from the session.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 134]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-135" id="page-135" name="page-135"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.14.%20%20Start-Input-Timers"></a><a class="selflink" href="#section-10.4.14" name="section-10.4.14">10.4.14</a>.  Start-Input-Timers</span>

   This header field MAY be sent as part of the RECORD request.  A value
   of "false" tells the recorder resource to start the operation, but
   not to start the no-input timer until the client sends a START-INPUT-
   TIMERS request to the recorder resource.  This is useful in the
   scenario when the recorder and synthesizer resources are not part of
   the same session.  When a kill-on-barge-in prompt is being played,
   the client may want the RECORD request to be simultaneously active so
   that it can detect and implement kill-on-barge-in (see
   <a href="#section-8.4.2">Section 8.4.2</a>).  But at the same time, the client doesn't want the
   recorder resource to start the no-input timers until the prompt is
   finished.  The default value is "true".

   start-input-timers       =  "Start-Input-Timers" ":"
                               BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/10.4.15.%20%20New-Audio-Channel"></a><a class="selflink" href="#section-10.4.15" name="section-10.4.15">10.4.15</a>.  New-Audio-Channel</span>

   This header field is the same as the one described for the recognizer
   resource (see <a href="#section-9.4.23">Section 9.4.23</a>).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.5.%20%20Recorder%20Message%20Body"></a><a class="selflink" href="#section-10.5" name="section-10.5">10.5</a>.  Recorder Message Body</span>

   If the RECORD request did not have a Record-URI header field, the
   STOP response or the RECORD-COMPLETE event MUST contain a message
   body carrying the captured audio.  In this case, the message carrying
   the audio content has a Record-URI header field with a Content ID
   value pointing to the message body entity that contains the recorded
   audio.  See <a href="#section-10.4.7">Section 10.4.7</a> for details.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.6.%20%20RECORD"></a><a class="selflink" href="#section-10.6" name="section-10.6">10.6</a>.  RECORD</span>

   The RECORD request places the recorder resource in the recording
   state.  Depending on the header fields specified in the RECORD
   method, the resource may start recording the audio immediately or
   wait for the endpointing functionality to detect speech in the audio.
   The audio is then made available to the client either in the message
   body or as specified by Record-URI.

   The server MUST support the 'https' URI scheme and MAY support other
   schemes.  Note that, due to the sensitive nature of voice recordings,
   any protocols used for dereferencing SHOULD employ integrity and
   confidentiality, unless other means, such as use of a controlled
   environment (see <a href="#section-4.2">Section 4.2</a>), are employed.






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 135]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-136" id="page-136" name="page-136"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   If a RECORD operation is already in progress, invoking this method
   causes the server to issue a response having a status-code of 402
   "Method not valid in this state" and a request-state of COMPLETE.

   If the Record-URI is not valid, a status-code of 404 "Illegal Value
   for Header Field" is returned in the response.  If it is impossible
   for the server to create the requested stored content, a status-code
   of 407 "Method or Operation Failed" is returned.

   If the type specified in the Media-Type header field is not
   supported, the server MUST respond with a status-code of 409
   "Unsupported Header Field Value" with the Media-Type header field in
   its response.

   When the recording operation is initiated, the response indicates an
   IN-PROGRESS request state.  The server MAY generate a subsequent
   START-OF-INPUT event when speech is detected.  Upon completion of the
   recording operation, the server generates a RECORD-COMPLETE event.

   C-&gt;S:  MRCP/2.0 ... RECORD 543257
          Channel-Identifier:32AECB23433802@recorder
          Record-URI:&lt;file://mediaserver/recordings/myfile.wav&gt;
          Media-Type:audio/wav
          Capture-On-Speech:true
          Final-Silence:300
          Max-Time:6000

   S-&gt;C:  MRCP/2.0 ... 543257 200 IN-PROGRESS
          Channel-Identifier:32AECB23433802@recorder

   S-&gt;C:  MRCP/2.0 ... START-OF-INPUT 543257 IN-PROGRESS
          Channel-Identifier:32AECB23433802@recorder

   S-&gt;C:  MRCP/2.0 ... RECORD-COMPLETE 543257 COMPLETE
          Channel-Identifier:32AECB23433802@recorder
          Completion-Cause:000 success-silence
          Record-URI:&lt;file://mediaserver/recordings/myfile.wav&gt;;
                     size=242552;duration=25645

                              RECORD Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.7.%20%20STOP"></a><a class="selflink" href="#section-10.7" name="section-10.7">10.7</a>.  STOP</span>

   The STOP method moves the recorder from the recording state back to
   the idle state.  If a RECORD request is active and the STOP request
   successfully terminates it, then the STOP response MUST contain an
   Active-Request-Id-List header field containing the RECORD request-id
   that was terminated.  In this case, no RECORD-COMPLETE event is sent



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 136]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-137" id="page-137" name="page-137"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   for the terminated request.  If there was no recording active, then
   the response MUST NOT contain an Active-Request-Id-List header field.
   If the recording was a success, the STOP response MUST contain a
   Record-URI header field pointing to the recorded audio content or to
   a typed entity in the body of the STOP response containing the
   recorded audio.  The STOP method MAY have a Trim-Length header field,
   in which case the specified length of audio is trimmed from the end
   of the recording after the stop.  In any case, the response MUST
   contain a status-code of 200 "Success".

   C-&gt;S:  MRCP/2.0 ... RECORD 543257
          Channel-Identifier:32AECB23433802@recorder
          Record-URI:&lt;file://mediaserver/recordings/myfile.wav&gt;
          Capture-On-Speech:true
          Final-Silence:300
          Max-Time:6000

   S-&gt;C:  MRCP/2.0 ... 543257 200 IN-PROGRESS
          Channel-Identifier:32AECB23433802@recorder

   S-&gt;C:  MRCP/2.0 ... START-OF-INPUT 543257 IN-PROGRESS
          Channel-Identifier:32AECB23433802@recorder

   C-&gt;S:  MRCP/2.0 ... STOP 543257
          Channel-Identifier:32AECB23433802@recorder
          Trim-Length:200

   S-&gt;C:  MRCP/2.0 ... 543257 200 COMPLETE
          Channel-Identifier:32AECB23433802@recorder
          Record-URI:&lt;file://mediaserver/recordings/myfile.wav&gt;;
                     size=324253;duration=24561
          Active-Request-Id-List:543257

                               STOP Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.8.%20%20RECORD-COMPLETE"></a><a class="selflink" href="#section-10.8" name="section-10.8">10.8</a>.  RECORD-COMPLETE</span>

   If the recording completes due to no input, silence after speech, or
   reaching the max-time, the server MUST generate the RECORD-COMPLETE
   event to the client with a request-state of COMPLETE.  If the
   recording was a success, the RECORD-COMPLETE event contains a Record-
   URI header field pointing to the recorded audio file on the server or
   to a typed entity in the message body containing the recorded audio.








<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 137]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-138" id="page-138" name="page-138"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S:  MRCP/2.0 ... RECORD 543257
          Channel-Identifier:32AECB23433802@recorder
          Record-URI:&lt;file://mediaserver/recordings/myfile.wav&gt;
          Capture-On-Speech:true
          Final-Silence:300
          Max-Time:6000

   S-&gt;C:  MRCP/2.0 ... 543257 200 IN-PROGRESS
          Channel-Identifier:32AECB23433802@recorder

   S-&gt;C:  MRCP/2.0 ... START-OF-INPUT 543257 IN-PROGRESS
          Channel-Identifier:32AECB23433802@recorder

   S-&gt;C:  MRCP/2.0 ... RECORD-COMPLETE 543257 COMPLETE
          Channel-Identifier:32AECB23433802@recorder
          Completion-Cause:000 success
          Record-URI:&lt;file://mediaserver/recordings/myfile.wav&gt;;
                     size=325325;duration=24652

                          RECORD-COMPLETE Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.9.%20%20START-INPUT-TIMERS"></a><a class="selflink" href="#section-10.9" name="section-10.9">10.9</a>.  START-INPUT-TIMERS</span>

   This request is sent from the client to the recorder resource when it
   discovers that a kill-on-barge-in prompt has finished playing (see
   <a href="#section-8.4.2">Section 8.4.2</a>).  This is useful in the scenario when the recorder and
   synthesizer resources are not in the same MRCPv2 session.  When a
   kill-on-barge-in prompt is being played, the client wants the RECORD
   request to be simultaneously active so that it can detect and
   implement kill-on-barge-in.  But at the same time, the client doesn't
   want the recorder resource to start the no-input timers until the
   prompt is finished.  The Start-Input-Timers header field in the
   RECORD request allows the client to say if the timers should be
   started or not.  In the above case, the recorder resource does not
   start the timers until the client sends a START-INPUT-TIMERS method
   to the recorder.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.10.%20%20START-OF-INPUT"></a><a class="selflink" href="#section-10.10" name="section-10.10">10.10</a>.  START-OF-INPUT</span>

   The START-OF-INPUT event is returned from the server to the client
   once the server has detected speech.  This event is always returned
   by the recorder resource when speech has been detected.  The recorder
   resource also MUST send a Proxy-Sync-Id header field with a unique
   value for this event.

   S-&gt;C:  MRCP/2.0 ... START-OF-INPUT 543259 IN-PROGRESS
          Channel-Identifier:32AECB23433801@recorder
          Proxy-Sync-Id:987654321



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 138]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-139" id="page-139" name="page-139"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Speaker%20Verification%20and%20Identification"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Speaker Verification and Identification</span>

   This section describes the methods, responses and events employed by
   MRCPv2 for doing speaker verification/identification.

   Speaker verification is a voice authentication methodology that can
   be used to identify the speaker in order to grant the user access to
   sensitive information and transactions.  Because speech is a
   biometric, a number of essential security considerations related to
   biometric authentication technologies apply to its implementation and
   usage.  Implementers should carefully read <a href="#section-12">Section 12</a> in this
   document and the corresponding section of the SPEECHSC requirements
   [<a href="rfc4313.html" title='"Requirements for Distributed Control of Automatic Speech Recognition (ASR), Speaker Identification/Speaker Verification (SI/SV), and Text-to- Speech (TTS) Resources"'>RFC4313</a>].  Implementers and deployers of this technology are
   strongly encouraged to check the state of the art for any new risks
   and solutions that might have been developed.

   In speaker verification, a recorded utterance is compared to a
   previously stored voiceprint, which is in turn associated with a
   claimed identity for that user.  Verification typically consists of
   two phases: a designation phase to establish the claimed identity of
   the caller and an execution phase in which a voiceprint is either
   created (training) or used to authenticate the claimed identity
   (verification).

   Speaker identification is the process of associating an unknown
   speaker with a member in a population.  It does not employ a claim of
   identity.  When an individual claims to belong to a group (e.g., one
   of the owners of a joint bank account) a group authentication is
   performed.  This is generally implemented as a kind of verification
   involving comparison with more than one voice model.  It is sometimes
   called 'multi-verification'.  If the individual speaker can be
   identified from the group, this may be useful for applications where
   multiple users share the same access privileges to some data or
   application.  Speaker identification and group authentication are
   also done in two phases, a designation phase and an execution phase.
   Note that, from a functionality standpoint, identification can be
   thought of as a special case of group authentication (if the
   individual is identified) where the group is the entire population,
   although the implementation of speaker identification may be
   different from the way group authentication is performed.  To
   accommodate single-voiceprint verification, verification against
   multiple voiceprints, group authentication, and identification, this
   specification provides a single set of methods that can take a list
   of identifiers, called "voiceprint identifiers", and return a list of
   identifiers, with a score for each that represents how well the input
   speech matched each identifier.  The input and output lists of
   identifiers do not have to match, allowing a vendor-specific group
   identifier to be used as input to indicate that identification is to



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 139]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-140" id="page-140" name="page-140"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   be performed.  In this specification, the terms "identification" and
   "multi-verification" are used to indicate that the input represents a
   group (potentially the entire population) and that results for
   multiple voiceprints may be returned.

   It is possible for a verifier resource to share the same session with
   a recognizer resource or to operate independently.  In order to share
   the same session, the verifier and recognizer resources MUST be
   allocated from within the same SIP dialog.  Otherwise, an independent
   verifier resource, running on the same physical server or a separate
   one, will be set up.  Note that, in addition to allowing both
   resources to be allocated in the same INVITE, it is possible to
   allocate one initially and the other later via a re-INVITE.

   Some of the speaker verification methods, described below, apply only
   to a specific mode of operation.

   The verifier resource has a verification buffer associated with it
   (see <a href="#section-11.4.14">Section 11.4.14</a>).  This allows the storage of speech utterances
   for the purposes of verification, identification, or training from
   the buffered speech.  This buffer is owned by the verifier resource,
   but other input resources (such as the recognizer resource or
   recorder resource) may write to it.  This allows the speech received
   as part of a recognition or recording operation to be later used for
   verification, identification, or training.  Access to the buffer is
   limited to one operation at time.  Hence, when the resource is doing
   read, write, or delete operations, such as a RECOGNIZE with
   ver-buffer-utterance turned on, another operation involving the
   buffer fails with a status-code of 402.  The verification buffer can
   be cleared by a CLEAR-BUFFER request from the client and is freed
   when the verifier resource is deallocated or the session with the
   server terminates.

   The verification buffer is different from collecting waveforms and
   processing them using either the real-time audio stream or stored
   audio, because this buffering mechanism does not simply accumulate
   speech to a buffer.  The verification buffer MAY contain additional
   information gathered by the recognizer resource that serves to
   improve verification performance.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.1.%20%20Speaker%20Verification%20State%20Machine"></a><a class="selflink" href="#section-11.1" name="section-11.1">11.1</a>.  Speaker Verification State Machine</span>

   Speaker verification may operate in a training or a verification
   session.  Starting one of these sessions does not change the state of
   the verifier resource, i.e., it remains idle.  Once a verification or
   training session is started, then utterances are trained or verified





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 140]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-141" id="page-141" name="page-141"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   by calling the VERIFY or VERIFY-FROM-BUFFER method.  The state of the
   verifier resources goes from IDLE to VERIFYING state each time VERIFY
   or VERIFY-FROM-BUFFER is called.

     Idle              Session Opened       Verifying/Training
     State             State                State
      |                   |                         |
      |--START-SESSION---&gt;|                         |
      |                   |                         |
      |                   |----------|              |
      |                   |     START-SESSION       |
      |                   |&lt;---------|              |
      |                   |                         |
      |&lt;--END-SESSION-----|                         |
      |                   |                         |
      |                   |---------VERIFY---------&gt;|
      |                   |                         |
      |                   |---VERIFY-FROM-BUFFER---&gt;|
      |                   |                         |
      |                   |----------|              |
      |                   |  VERIFY-ROLLBACK        |
      |                   |&lt;---------|              |
      |                   |                         |
      |                   |                |--------|
      |                   | GET-INTERMEDIATE-RESULT |
      |                   |                |-------&gt;|
      |                   |                         |
      |                   |                |--------|
      |                   |     START-INPUT-TIMERS  |
      |                   |                |-------&gt;|
      |                   |                         |
      |                   |                |--------|
      |                   |         START-OF-INPUT  |
      |                   |                |-------&gt;|
      |                   |                         |
      |                   |&lt;-VERIFICATION-COMPLETE--|
      |                   |                         |
      |                   |&lt;--------STOP------------|
      |                   |                         |
      |                   |----------|              |
      |                   |         STOP            |
      |                   |&lt;---------|              |
      |                   |                         |
      |----------|        |                         |
      |         STOP      |                         |
      |&lt;---------|        |                         |





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 141]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-142" id="page-142" name="page-142"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


      |                   |----------|              |
      |                   |    CLEAR-BUFFER         |
      |                   |&lt;---------|              |
      |                   |                         |
      |----------|        |                         |
      |   CLEAR-BUFFER    |                         |
      |&lt;---------|        |                         |
      |                   |                         |
      |                   |----------|              |
      |                   |   QUERY-VOICEPRINT      |
      |                   |&lt;---------|              |
      |                   |                         |
      |----------|        |                         |
      | QUERY-VOICEPRINT  |                         |
      |&lt;---------|        |                         |
      |                   |                         |
      |                   |----------|              |
      |                   |  DELETE-VOICEPRINT      |
      |                   |&lt;---------|              |
      |                   |                         |
      |----------|        |                         |
      | DELETE-VOICEPRINT |                         |
      |&lt;---------|        |                         |

                      Verifier Resource State Machine

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.2.%20%20Speaker%20Verification%20Methods"></a><a class="selflink" href="#section-11.2" name="section-11.2">11.2</a>.  Speaker Verification Methods</span>

   The verifier resource supports the following methods.

   verifier-method          =  "START-SESSION"
                            / "END-SESSION"
                            / "QUERY-VOICEPRINT"
                            / "DELETE-VOICEPRINT"
                            / "VERIFY"
                            / "VERIFY-FROM-BUFFER"
                            / "VERIFY-ROLLBACK"
                            / "STOP"
                            / "CLEAR-BUFFER"
                            / "START-INPUT-TIMERS"
                            / "GET-INTERMEDIATE-RESULT"

   These methods allow the client to control the mode and target of
   verification or identification operations within the context of a
   session.  All the verification input operations that occur within a
   session can be used to create, update, or validate against the





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 142]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-143" id="page-143" name="page-143"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   voiceprint specified during the session.  At the beginning of each
   session, the verifier resource is reset to the state it had prior to
   any previous verification session.

   Verification/identification operations can be executed against live
   or buffered audio.  The verifier resource provides methods for
   collecting and evaluating live audio data, and methods for
   controlling the verifier resource and adjusting its configured
   behavior.

   There are no dedicated methods for collecting buffered audio data.
   This is accomplished by calling VERIFY, RECOGNIZE, or RECORD as
   appropriate for the resource, with the header field
   Ver-Buffer-Utterance.  Then, when the following method is called,
   verification is performed using the set of buffered audio.

   1.  VERIFY-FROM-BUFFER

   The following methods are used for verification of live audio
   utterances:

   1.  VERIFY

   2.  START-INPUT-TIMERS

   The following methods are used for configuring the verifier resource
   and for establishing resource states:

   1.  START-SESSION

   2.  END-SESSION

   3.  QUERY-VOICEPRINT

   4.  DELETE-VOICEPRINT

   5.  VERIFY-ROLLBACK

   6.  STOP

   7.  CLEAR-BUFFER

   The following method allows the polling of a verification in progress
   for intermediate results.

   1.  GET-INTERMEDIATE-RESULT





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 143]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-144" id="page-144" name="page-144"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.3.%20%20Verification%20Events"></a><a class="selflink" href="#section-11.3" name="section-11.3">11.3</a>.  Verification Events</span>

   The verifier resource generates the following events.

   verifier-event       =  "VERIFICATION-COMPLETE"
                        /  "START-OF-INPUT"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.4.%20%20Verification%20Header%20Fields"></a><a class="selflink" href="#section-11.4" name="section-11.4">11.4</a>.  Verification Header Fields</span>

   A verifier resource message can contain header fields containing
   request options and information to augment the Request, Response, or
   Event message it is associated with.

   verification-header      =  repository-uri
                            /  voiceprint-identifier
                            /  verification-mode
                            /  adapt-model
                            /  abort-model
                            /  min-verification-score
                            /  num-min-verification-phrases
                            /  num-max-verification-phrases
                            /  no-input-timeout
                            /  save-waveform
                            /  media-type
                            /  waveform-uri
                            /  voiceprint-exists
                            /  ver-buffer-utterance
                            /  input-waveform-uri
                            /  completion-cause
                            /  completion-reason
                            /  speech-complete-timeout
                            /  new-audio-channel
                            /  abort-verification
                            /  start-input-timers

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.1.%20%20Repository-URI"></a><a class="selflink" href="#section-11.4.1" name="section-11.4.1">11.4.1</a>.  Repository-URI</span>

   This header field specifies the voiceprint repository to be used or
   referenced during speaker verification or identification operations.
   This header field is required in the START-SESSION, QUERY-VOICEPRINT,
   and DELETE-VOICEPRINT methods.

   repository-uri           =  "Repository-URI" ":" uri CRLF








<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 144]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-145" id="page-145" name="page-145"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.2.%20%20Voiceprint-Identifier"></a><a class="selflink" href="#section-11.4.2" name="section-11.4.2">11.4.2</a>.  Voiceprint-Identifier</span>

   This header field specifies the claimed identity for verification
   applications.  The claimed identity MAY be used to specify an
   existing voiceprint or to establish a new voiceprint.  This header
   field MUST be present in the QUERY-VOICEPRINT and DELETE-VOICEPRINT
   methods.  The Voiceprint-Identifier MUST be present in the START-
   SESSION method for verification operations.  For identification or
   multi-verification operations, this header field MAY contain a list
   of voiceprint identifiers separated by semicolons.  For
   identification operations, the client MAY also specify a voiceprint
   group identifier instead of a list of voiceprint identifiers.

   voiceprint-identifier        =  "Voiceprint-Identifier" ":"
                                   vid *[";" vid] CRLF
   vid                          =  1*VCHAR ["." 1*VCHAR]

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.3.%20%20Verification-Mode"></a><a class="selflink" href="#section-11.4.3" name="section-11.4.3">11.4.3</a>.  Verification-Mode</span>

   This header field specifies the mode of the verifier resource and is
   set by the START-SESSION method.  Acceptable values indicate whether
   the verification session will train a voiceprint ("train") or verify/
   identify using an existing voiceprint ("verify").

   Training and verification sessions both require the voiceprint
   Repository-URI to be specified in the START-SESSION.  In many usage
   scenarios, however, the system does not know the speaker's claimed
   identity until a recognition operation has, for example, recognized
   an account number to which the user desires access.  In order to
   allow the first few utterances of a dialog to be both recognized and
   verified, the verifier resource on the MRCPv2 server retains a
   buffer.  In this buffer, the MRCPv2 server accumulates recognized
   utterances.  The client can later execute a verification method and
   apply the buffered utterances to the current verification session.

   Some voice user interfaces may require additional user input that
   should not be subject to verification.  For example, the user's input
   may have been recognized with low confidence and thus require a
   confirmation cycle.  In such cases, the client SHOULD NOT execute the
   VERIFY or VERIFY-FROM-BUFFER methods to collect and analyze the
   caller's input.  A separate recognizer resource can analyze the
   caller's response without any participation by the verifier resource.









<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 145]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-146" id="page-146" name="page-146"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Once the following conditions have been met:

   1.  the voiceprint identity has been successfully established through
       the Voiceprint-Identifier header fields of the START-SESSION
       method, and

   2.  the verification mode has been set to one of "train" or "verify",

   the verifier resource can begin providing verification information
   during verification operations.  If the verifier resource does not
   reach one of the two major states ("train" or "verify") , it MUST
   report an error condition in the MRCPv2 status code to indicate why
   the verifier resource is not ready for the corresponding usage.

   The value of verification-mode is persistent within a verification
   session.  If the client attempts to change the mode during a
   verification session, the verifier resource reports an error and the
   mode retains its current value.

   verification-mode            =  "Verification-Mode" ":"
                                   verification-mode-string

   verification-mode-string     =  "train"
                                /  "verify"

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.4.%20%20Adapt-Model"></a><a class="selflink" href="#section-11.4.4" name="section-11.4.4">11.4.4</a>.  Adapt-Model</span>

   This header field indicates the desired behavior of the verifier
   resource after a successful verification operation.  If the value of
   this header field is "true", the server SHOULD use audio collected
   during the verification session to update the voiceprint to account
   for ongoing changes in a speaker's incoming speech characteristics,
   unless local policy prohibits updating the voiceprint.  If the value
   is "false" (the default), the server MUST NOT update the voiceprint.
   This header field MAY occur in the START-SESSION method.

   adapt-model              = "Adapt-Model" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.5.%20%20Abort-Model"></a><a class="selflink" href="#section-11.4.5" name="section-11.4.5">11.4.5</a>.  Abort-Model</span>

   The Abort-Model header field indicates the desired behavior of the
   verifier resource upon session termination.  If the value of this
   header field is "true", the server MUST discard any pending changes
   to a voiceprint due to verification training or verification
   adaptation.  If the value is "false" (the default), the server MUST
   commit any pending changes for a training session or a successful





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 146]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-147" id="page-147" name="page-147"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   verification session to the voiceprint repository.  A value of "true"
   for Abort-Model overrides a value of "true" for the Adapt-Model
   header field.  This header field MAY occur in the END-SESSION method.

   abort-model             = "Abort-Model" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.6.%20%20Min-Verification-Score"></a><a class="selflink" href="#section-11.4.6" name="section-11.4.6">11.4.6</a>.  Min-Verification-Score</span>

   The Min-Verification-Score header field, when used with a verifier
   resource through a SET-PARAMS, GET-PARAMS, or START-SESSION method,
   determines the minimum verification score for which a verification
   decision of "accepted" may be declared by the server.  This is a
   float value between -1.0 and 1.0.  The default value for this header
   field is implementation specific.

   min-verification-score  = "Min-Verification-Score" ":"
                             [ %x2D ] FLOAT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.7.%20%20Num-Min-Verification-Phrases"></a><a class="selflink" href="#section-11.4.7" name="section-11.4.7">11.4.7</a>.  Num-Min-Verification-Phrases</span>

   The Num-Min-Verification-Phrases header field is used to specify the
   minimum number of valid utterances before a positive decision is
   given for verification.  The value for this header field is an
   integer and the default value is 1.  The verifier resource MUST NOT
   declare a verification 'accepted' unless Num-Min-Verification-Phrases
   valid utterances have been received.  The minimum value is 1.  This
   header field MAY occur in START-SESSION, SET-PARAMS, or GET-PARAMS.

   num-min-verification-phrases =  "Num-Min-Verification-Phrases" ":"
                                   1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.8.%20%20Num-Max-Verification-Phrases"></a><a class="selflink" href="#section-11.4.8" name="section-11.4.8">11.4.8</a>.  Num-Max-Verification-Phrases</span>

   The Num-Max-Verification-Phrases header field is used to specify the
   number of valid utterances required before a decision is forced for
   verification.  The verifier resource MUST NOT return a decision of
   'undecided' once Num-Max-Verification-Phrases have been collected and
   used to determine a verification score.  The value for this header
   field is an integer and the minimum value is 1.  The default value is
   implementation specific.  This header field MAY occur in START-
   SESSION, SET-PARAMS, or GET-PARAMS.

   num-max-verification-phrases =  "Num-Max-Verification-Phrases" ":"
                                    1*19DIGIT CRLF







<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 147]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-148" id="page-148" name="page-148"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.9.%20%20No-Input-Timeout"></a><a class="selflink" href="#section-11.4.9" name="section-11.4.9">11.4.9</a>.  No-Input-Timeout</span>

   The No-Input-Timeout header field sets the length of time from the
   start of the verification timers (see START-INPUT-TIMERS) until the
   VERIFICATION-COMPLETE server event message declares that no input has
   been received (i.e., has a Completion-Cause of no-input-timeout).
   The value is in milliseconds.  This header field MAY occur in VERIFY,
   SET-PARAMS, or GET-PARAMS.  The value for this header field ranges
   from 0 to an implementation-specific maximum value.  The default
   value for this header field is implementation specific.

   no-input-timeout         = "No-Input-Timeout" ":" 1*19DIGIT CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.10.%20%20Save-Waveform"></a><a class="selflink" href="#section-11.4.10" name="section-11.4.10">11.4.10</a>.  Save-Waveform</span>

   This header field allows the client to request that the verifier
   resource save the audio stream that was used for verification/
   identification.  The verifier resource MUST attempt to record the
   audio and make it available to the client in the form of a URI
   returned in the Waveform-URI header field in the VERIFICATION-
   COMPLETE event.  If there was an error in recording the stream, or
   the audio content is otherwise not available, the verifier resource
   MUST return an empty Waveform-URI header field.  The default value
   for this header field is "false".  This header field MAY appear in
   the VERIFY method.  Note that this header field does not appear in
   the VERIFY-FROM-BUFFER method since it only controls whether or not
   to save the waveform for live verification/identification operations.

   save-waveform            =  "Save-Waveform" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.11.%20%20Media-Type"></a><a class="selflink" href="#section-11.4.11" name="section-11.4.11">11.4.11</a>.  Media-Type</span>

   This header field MAY be specified in the SET-PARAMS, GET-PARAMS, or
   the VERIFY methods and tells the server resource the media type of
   the captured audio or video such as the one captured and returned by
   the Waveform-URI header field.

   media-type               =  "Media-Type" ":" media-type-value
                               CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.12.%20%20Waveform-URI"></a><a class="selflink" href="#section-11.4.12" name="section-11.4.12">11.4.12</a>.  Waveform-URI</span>

   If the Save-Waveform header field is set to "true", the verifier
   resource MUST attempt to record the incoming audio stream of the
   verification into a file and provide a URI for the client to access
   it.  This header field MUST be present in the VERIFICATION-COMPLETE
   event if the Save-Waveform header field was set to true by the
   client.  The value of the header field MUST be empty if there was



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 148]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-149" id="page-149" name="page-149"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   some error condition preventing the server from recording.
   Otherwise, the URI generated by the server MUST be globally unique
   across the server and all its verification sessions.  The content
   MUST be available via the URI until the verification session ends.
   Since the Save-Waveform header field applies only to live
   verification/identification operations, the server can return the
   Waveform-URI only in the VERIFICATION-COMPLETE event for live
   verification/identification operations.

   The server MUST also return the size in octets and the duration in
   milliseconds of the recorded audio waveform as parameters associated
   with the header field.

   waveform-uri             =  "Waveform-URI" ":" ["&lt;" uri "&gt;"
                               ";" "size" "=" 1*19DIGIT
                               ";" "duration" "=" 1*19DIGIT] CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.13.%20%20Voiceprint-Exists"></a><a class="selflink" href="#section-11.4.13" name="section-11.4.13">11.4.13</a>.  Voiceprint-Exists</span>

   This header field MUST be returned in QUERY-VOICEPRINT and DELETE-
   VOICEPRINT responses.  This is the status of the voiceprint specified
   in the QUERY-VOICEPRINT method.  For the DELETE-VOICEPRINT method,
   this header field indicates the status of the voiceprint at the
   moment the method execution started.

   voiceprint-exists    =  "Voiceprint-Exists" ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.14.%20%20Ver-Buffer-Utterance"></a><a class="selflink" href="#section-11.4.14" name="section-11.4.14">11.4.14</a>.  Ver-Buffer-Utterance</span>

   This header field is used to indicate that this utterance could be
   later considered for speaker verification.  This way, a client can
   request the server to buffer utterances while doing regular
   recognition or verification activities, and speaker verification can
   later be requested on the buffered utterances.  This header field is
   optional in the RECOGNIZE, VERIFY, and RECORD methods.  The default
   value for this header field is "false".

   ver-buffer-utterance     = "Ver-Buffer-Utterance" ":" BOOLEAN
                              CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.15.%20%20Input-Waveform-URI"></a><a class="selflink" href="#section-11.4.15" name="section-11.4.15">11.4.15</a>.  Input-Waveform-URI</span>

   This header field specifies stored audio content that the client
   requests the server to fetch and process according to the current
   verification mode, either to train the voiceprint or verify a claimed
   identity.  This header field enables the client to implement the





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 149]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-150" id="page-150" name="page-150"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   buffering use case where the recognizer and verifier resources are in
   different sessions and the verification buffer technique cannot be
   used.  It MAY be specified on the VERIFY request.

   input-waveform-uri           =  "Input-Waveform-URI" ":" uri CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.16.%20%20Completion-Cause"></a><a class="selflink" href="#section-11.4.16" name="section-11.4.16">11.4.16</a>.  Completion-Cause</span>

   This header field MUST be part of a VERIFICATION-COMPLETE event from
   the verifier resource to the client.  This indicates the cause of
   VERIFY or VERIFY-FROM-BUFFER method completion.  This header field
   MUST be sent in the VERIFY, VERIFY-FROM-BUFFER, and QUERY-VOICEPRINT
   responses, if they return with a failure status and a COMPLETE state.
   In the ABNF below, the 'cause-code' contains a numerical value
   selected from the Cause-Code column of the following table.  The
   'cause-name' contains the corresponding token selected from the
   Cause-Name column.

   completion-cause         =  "Completion-Cause" ":" cause-code SP
                               cause-name CRLF
   cause-code               =  3DIGIT
   cause-name               =  *VCHAR

   +------------+--------------------------+---------------------------+
   | Cause-Code | Cause-Name               | Description               |
   +------------+--------------------------+---------------------------+
   | 000        | success                  | VERIFY or                 |
   |            |                          | VERIFY-FROM-BUFFER        |
   |            |                          | request completed         |
   |            |                          | successfully. The verify  |
   |            |                          | decision can be           |
   |            |                          | "accepted", "rejected",   |
   |            |                          | or "undecided".           |
   | 001        | error                    | VERIFY or                 |
   |            |                          | VERIFY-FROM-BUFFER        |
   |            |                          | request terminated        |
   |            |                          | prematurely due to a      |
   |            |                          | verifier resource or      |
   |            |                          | system error.             |
   | 002        | no-input-timeout         | VERIFY request completed  |
   |            |                          | with no result due to a   |
   |            |                          | no-input-timeout.         |
   | 003        | too-much-speech-timeout  | VERIFY request completed  |
   |            |                          | with no result due to too |
   |            |                          | much speech.              |
   | 004        | speech-too-early         | VERIFY request completed  |
   |            |                          | with no result due to     |
   |            |                          | speech too soon.          |



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 150]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-151" id="page-151" name="page-151"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   | 005        | buffer-empty             | VERIFY-FROM-BUFFER        |
   |            |                          | request completed with no |
   |            |                          | result due to empty       |
   |            |                          | buffer.                   |
   | 006        | out-of-sequence          | Verification operation    |
   |            |                          | failed due to             |
   |            |                          | out-of-sequence method    |
   |            |                          | invocations, for example, |
   |            |                          | calling VERIFY before     |
   |            |                          | QUERY-VOICEPRINT.         |
   | 007        | repository-uri-failure   | Failure accessing         |
   |            |                          | Repository URI.           |
   | 008        | repository-uri-missing   | Repository-URI is not     |
   |            |                          | specified.                |
   | 009        | voiceprint-id-missing    | Voiceprint-Identifier is  |
   |            |                          | not specified.            |
   | 010        | voiceprint-id-not-exist  | Voiceprint-Identifier     |
   |            |                          | does not exist in the     |
   |            |                          | voiceprint repository.    |
   | 011        | speech-not-usable        | VERIFY request completed  |
   |            |                          | with no result because    |
   |            |                          | the speech was not usable |
   |            |                          | (too noisy, too short,    |
   |            |                          | etc.)                     |
   +------------+--------------------------+---------------------------+

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.17.%20%20Completion-Reason"></a><a class="selflink" href="#section-11.4.17" name="section-11.4.17">11.4.17</a>.  Completion-Reason</span>

   This header field MAY be specified in a VERIFICATION-COMPLETE event
   coming from the verifier resource to the client.  It contains the
   reason text behind the VERIFY request completion.  This header field
   communicates text describing the reason for the failure.

   The completion reason text is provided for client use in logs and for
   debugging and instrumentation purposes.  Clients MUST NOT interpret
   the completion reason text.

   completion-reason        =  "Completion-Reason" ":"
                               quoted-string CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.18.%20%20Speech-Complete-Timeout"></a><a class="selflink" href="#section-11.4.18" name="section-11.4.18">11.4.18</a>.  Speech-Complete-Timeout</span>

   This header field is the same as the one described for the Recognizer
   resource.  See <a href="#section-9.4.15">Section 9.4.15</a>.  This header field MAY occur in
   VERIFY, SET-PARAMS, or GET-PARAMS.






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 151]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-152" id="page-152" name="page-152"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.19.%20%20New-Audio-Channel"></a><a class="selflink" href="#section-11.4.19" name="section-11.4.19">11.4.19</a>.  New-Audio-Channel</span>

   This header field is the same as the one described for the Recognizer
   resource.  See <a href="#section-9.4.23">Section 9.4.23</a>.  This header field MAY be specified in
   a VERIFY request.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.20.%20%20Abort-Verification"></a><a class="selflink" href="#section-11.4.20" name="section-11.4.20">11.4.20</a>.  Abort-Verification</span>

   This header field MUST be sent in a STOP request to indicate whether
   or not to abort a VERIFY method in progress.  A value of "true"
   requests the server to discard the results.  A value of "false"
   requests the server to return in the STOP response the verification
   results obtained up to the point it received the STOP request.

   abort-verification   =  "Abort-Verification " ":" BOOLEAN CRLF

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.4.21.%20%20Start-Input-Timers"></a><a class="selflink" href="#section-11.4.21" name="section-11.4.21">11.4.21</a>.  Start-Input-Timers</span>

   This header field MAY be sent as part of a VERIFY request.  A value
   of "false" tells the verifier resource to start the VERIFY operation
   but not to start the no-input timer yet.  The verifier resource MUST
   NOT start the timers until the client sends a START-INPUT-TIMERS
   request to the resource.  This is useful in the scenario when the
   verifier and synthesizer resources are not part of the same session.
   In this scenario, when a kill-on-barge-in prompt is being played, the
   client may want the VERIFY request to be simultaneously active so
   that it can detect and implement kill-on-barge-in (see
   <a href="#section-8.4.2">Section 8.4.2</a>).  But at the same time, the client doesn't want the
   verifier resource to start the no-input timers until the prompt is
   finished.  The default value is "true".

   start-input-timers       =  "Start-Input-Timers" ":"
                               BOOLEAN CRLF

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.5.%20%20Verification%20Message%20Body"></a><a class="selflink" href="#section-11.5" name="section-11.5">11.5</a>.  Verification Message Body</span>

   A verification response or event message can carry additional data as
   described in the following subsection.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.5.1.%20%20Verification%20Result%20Data"></a><a class="selflink" href="#section-11.5.1" name="section-11.5.1">11.5.1</a>.  Verification Result Data</span>

   Verification results are returned to the client in the message body
   of the VERIFICATION-COMPLETE event or the GET-INTERMEDIATE-RESULT
   response message as described in <a href="#section-6.3">Section 6.3</a>.  Element and attribute
   descriptions for the verification portion of the NLSML format are
   provided in <a href="#section-11.5.2">Section 11.5.2</a> with a normative definition of the schema
   in <a href="#section-16.3">Section 16.3</a>.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 152]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-153" id="page-153" name="page-153"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.%20%20Verification%20Result%20Elements"></a><a class="selflink" href="#section-11.5.2" name="section-11.5.2">11.5.2</a>.  Verification Result Elements</span>

   All verification elements are contained within a single
   &lt;verification-result&gt; element under &lt;result&gt;.  The elements are
   described below and have the schema defined in <a href="#section-16.2">Section 16.2</a>.  The
   following elements are defined:

   1.   &lt;voiceprint&gt;

   2.   &lt;incremental&gt;

   3.   &lt;cumulative&gt;

   4.   &lt;decision&gt;

   5.   &lt;utterance-length&gt;

   6.   &lt;device&gt;

   7.   &lt;gender&gt;

   8.   &lt;adapted&gt;

   9.   &lt;verification-score&gt;

   10.  &lt;vendor-specific-results&gt;

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.1.%20%20%3Cvoiceprint%3E%20Element"></a><a class="selflink" href="#section-11.5.2.1" name="section-11.5.2.1">11.5.2.1</a>.  &lt;voiceprint&gt; Element</span>

   This element in the verification results provides information on how
   the speech data matched a single voiceprint.  The result data
   returned MAY have more than one such entity in the case of
   identification or multi-verification.  Each &lt;voiceprint&gt; element and
   the XML data within the element describe verification result
   information for how well the speech data matched that particular
   voiceprint.  The list of &lt;voiceprint&gt; element data are ordered
   according to their cumulative verification match scores, with the
   highest score first.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.2.%20%20%3Ccumulative%3E%20Element"></a><a class="selflink" href="#section-11.5.2.2" name="section-11.5.2.2">11.5.2.2</a>.  &lt;cumulative&gt; Element</span>

   Within each &lt;voiceprint&gt; element there MUST be a &lt;cumulative&gt; element
   with the cumulative scores of how well multiple utterances matched
   the voiceprint.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 153]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-154" id="page-154" name="page-154"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.3.%20%20%3Cincremental%3E%20Element"></a><a class="selflink" href="#section-11.5.2.3" name="section-11.5.2.3">11.5.2.3</a>.  &lt;incremental&gt; Element</span>

   The first &lt;voiceprint&gt; element MAY contain an &lt;incremental&gt; element
   with the incremental scores of how well the last utterance matched
   the voiceprint.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.4.%20%20%3CDecision%3E%20Element"></a><a class="selflink" href="#section-11.5.2.4" name="section-11.5.2.4">11.5.2.4</a>.  &lt;Decision&gt; Element</span>

   This element is found within the &lt;incremental&gt; or &lt;cumulative&gt;
   element within the verification results.  Its value indicates the
   verification decision.  It can have the values of "accepted",
   "rejected", or "undecided".

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.5.%20%20%3Cutterance-length%3E%20Element"></a><a class="selflink" href="#section-11.5.2.5" name="section-11.5.2.5">11.5.2.5</a>.  &lt;utterance-length&gt; Element</span>

   This element MAY occur within either the &lt;incremental&gt; or
   &lt;cumulative&gt; elements within the first &lt;voiceprint&gt; element.  Its
   value indicates the size in milliseconds, respectively, of the last
   utterance or the cumulated set of utterances.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.6.%20%20%3Cdevice%3E%20Element"></a><a class="selflink" href="#section-11.5.2.6" name="section-11.5.2.6">11.5.2.6</a>.  &lt;device&gt; Element</span>

   This element is found within the &lt;incremental&gt; or &lt;cumulative&gt;
   element within the verification results.  Its value indicates the
   apparent type of device used by the caller as determined by the
   verifier resource.  It can have the values of "cellular-phone",
   "electret-phone", "carbon-button-phone", or "unknown".

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.7.%20%20%3Cgender%3E%20Element"></a><a class="selflink" href="#section-11.5.2.7" name="section-11.5.2.7">11.5.2.7</a>.  &lt;gender&gt; Element</span>

   This element is found within the &lt;incremental&gt; or &lt;cumulative&gt;
   element within the verification results.  Its value indicates the
   apparent gender of the speaker as determined by the verifier
   resource.  It can have the values of "male", "female", or "unknown".

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.8.%20%20%3Cadapted%3E%20Element"></a><a class="selflink" href="#section-11.5.2.8" name="section-11.5.2.8">11.5.2.8</a>.  &lt;adapted&gt; Element</span>

   This element is found within the first &lt;voiceprint&gt; element within
   the verification results.  When verification is trying to confirm the
   voiceprint, this indicates if the voiceprint has been adapted as a
   consequence of analyzing the source utterances.  It is not returned
   during verification training.  The value can be "true" or "false".

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.9.%20%20%3Cverification-score%3E%20Element"></a><a class="selflink" href="#section-11.5.2.9" name="section-11.5.2.9">11.5.2.9</a>.  &lt;verification-score&gt; Element</span>

   This element is found within the &lt;incremental&gt; or &lt;cumulative&gt;
   element within the verification results.  Its value indicates the
   score of the last utterance as determined by verification.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 154]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-155" id="page-155" name="page-155"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   During verification, the higher the score, the more likely it is that
   the speaker is the same one as the one who spoke the voiceprint
   utterances.  During training, the higher the score, the more likely
   the speaker is to have spoken all of the analyzed utterances.  The
   value is a floating point between -1.0 and 1.0.  If there are no such
   utterances, the score is -1.  Note that the verification score is not
   a probability value.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/11.5.2.10.%20%20%3Cvendor-specific-results%3E%20Element"></a><a class="selflink" href="#section-11.5.2.10" name="section-11.5.2.10">11.5.2.10</a>.  &lt;vendor-specific-results&gt; Element</span>

   MRCPv2 servers MAY send verification results that contain
   implementation-specific data that augment the information provided by
   the MRCPv2-defined elements.  Such data might be useful to clients
   who have private knowledge of how to interpret these schema
   extensions.  Implementation-specific additions to the verification
   results schema MUST belong to the vendor's own namespace.  In the
   result structure, either they MUST be indicated by a namespace prefix
   declared within the result, or they MUST be children of an element
   identified as belonging to the respective namespace.

   The following example shows the results of three voiceprints.  Note
   that the first one has crossed the verification score threshold, and
   the speaker has been accepted.  The voiceprint was also adapted with
   the most recent utterance.

   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           grammar="What-Grammar-URI"&gt;
     &lt;verification-result&gt;
       &lt;voiceprint id="johnsmith"&gt;
         &lt;adapted&gt; true &lt;/adapted&gt;
         &lt;incremental&gt;
           &lt;utterance-length&gt; 500 &lt;/utterance-length&gt;
           &lt;device&gt; cellular-phone &lt;/device&gt;
           &lt;gender&gt; male &lt;/gender&gt;
           &lt;decision&gt; accepted &lt;/decision&gt;
           &lt;verification-score&gt; 0.98514 &lt;/verification-score&gt;
         &lt;/incremental&gt;
         &lt;cumulative&gt;
           &lt;utterance-length&gt; 10000 &lt;/utterance-length&gt;
           &lt;device&gt; cellular-phone &lt;/device&gt;
           &lt;gender&gt; male &lt;/gender&gt;
           &lt;decision&gt; accepted &lt;/decision&gt;
           &lt;verification-score&gt; 0.96725&lt;/verification-score&gt;
         &lt;/cumulative&gt;
       &lt;/voiceprint&gt;





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 155]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-156" id="page-156" name="page-156"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


       &lt;voiceprint id="marysmith"&gt;
         &lt;cumulative&gt;
           &lt;verification-score&gt; 0.93410 &lt;/verification-score&gt;
         &lt;/cumulative&gt;
       &lt;/voiceprint&gt;
       &lt;voiceprint uri="juniorsmith"&gt;
         &lt;cumulative&gt;
           &lt;verification-score&gt; 0.74209 &lt;/verification-score&gt;
         &lt;/cumulative&gt;
       &lt;/voiceprint&gt;
     &lt;/verification-result&gt;
   &lt;/result&gt;

                      Verification Results Example 1

   In this next example, the verifier has enough information to decide
   to reject the speaker.

   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           xmlns:xmpl="http://www.example.org/2003/12/mrcpv2"
           grammar="What-Grammar-URI"&gt;
     &lt;verification-result&gt;
       &lt;voiceprint id="johnsmith"&gt;
         &lt;incremental&gt;
           &lt;utterance-length&gt; 500 &lt;/utterance-length&gt;
           &lt;device&gt; cellular-phone &lt;/device&gt;
           &lt;gender&gt; male &lt;/gender&gt;
           &lt;verification-score&gt; 0.88514 &lt;/verification-score&gt;
           &lt;xmpl:raspiness&gt; high &lt;/xmpl:raspiness&gt;
           &lt;xmpl:emotion&gt; sadness &lt;/xmpl:emotion&gt;
         &lt;/incremental&gt;
         &lt;cumulative&gt;
           &lt;utterance-length&gt; 10000 &lt;/utterance-length&gt;
           &lt;device&gt; cellular-phone &lt;/device&gt;
           &lt;gender&gt; male &lt;/gender&gt;
           &lt;decision&gt; rejected &lt;/decision&gt;
           &lt;verification-score&gt; 0.9345 &lt;/verification-score&gt;
         &lt;/cumulative&gt;
       &lt;/voiceprint&gt;
     &lt;/verification-result&gt;
   &lt;/result&gt;

                      Verification Results Example 2







<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 156]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-157" id="page-157" name="page-157"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.6.%20%20START-SESSION"></a><a class="selflink" href="#section-11.6" name="section-11.6">11.6</a>.  START-SESSION</span>

   The START-SESSION method starts a speaker verification or speaker
   identification session.  Execution of this method places the verifier
   resource into its initial state.  If this method is called during an
   ongoing verification session, the previous session is implicitly
   aborted.  If this method is invoked when VERIFY or VERIFY-FROM-BUFFER
   is active, the method fails and the server returns a status-code of
   402.

   Upon completion of the START-SESSION method, the verifier resource
   MUST have terminated any ongoing verification session and cleared any
   voiceprint designation.

   A verification session is associated with the voiceprint repository
   to be used during the session.  This is specified through the
   Repository-URI header field (see <a href="#section-11.4.1">Section 11.4.1</a>).

   The START-SESSION method also establishes, through the Voiceprint-
   Identifier header field, which voiceprints are to be matched or
   trained during the verification session.  If this is an
   Identification session or if the client wants to do Multi-
   Verification, the Voiceprint-Identifier header field contains a list
   of semicolon-separated voiceprint identifiers.

   The Adapt-Model header field MAY also be present in the START-SESSION
   request to indicate whether or not to adapt a voiceprint based on
   data collected during the session (if the voiceprint verification
   phase succeeds).  By default, the voiceprint model MUST NOT be
   adapted with data from a verification session.

   The START-SESSION also determines whether the session is for a train
   or verify of a voiceprint.  Hence, the Verification-Mode header field
   MUST be sent in every START-SESSION request.  The value of the
   Verification-Mode header field MUST be one of either "train" or
   "verify".

   Before a verification/identification session is started, the client
   may only request that VERIFY-ROLLBACK and generic SET-PARAMS and
   GET-PARAMS operations be performed on the verifier resource.  The
   server MUST return status-code 402 "Method not valid in this state"
   for all other verification operations.

   A verifier resource MUST NOT have more than a single session active
   at one time.






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 157]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-158" id="page-158" name="page-158"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S:  MRCP/2.0 ... START-SESSION 314161
          Channel-Identifier:32AECB23433801@speakverify
          Repository-URI:http://www.example.com/voiceprintdbase/
          Voiceprint-Mode:verify
          Voiceprint-Identifier:johnsmith.voiceprint
          Adapt-Model:true

   S-&gt;C:  MRCP/2.0 ... 314161 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.7.%20%20END-SESSION"></a><a class="selflink" href="#section-11.7" name="section-11.7">11.7</a>.  END-SESSION</span>

   The END-SESSION method terminates an ongoing verification session and
   releases the verification voiceprint resources.  The session may
   terminate in one of three ways:

   1.  abort - the voiceprint adaptation or creation may be aborted so
       that the voiceprint remains unchanged (or is not created).

   2.  commit - when terminating a voiceprint training session, the new
       voiceprint is committed to the repository.

   3.  adapt - an existing voiceprint is modified using a successful
       verification.

   The Abort-Model header field MAY be included in the END-SESSION to
   control whether or not to abort any pending changes to the
   voiceprint.  The default behavior is to commit (not abort) any
   pending changes to the designated voiceprint.

   The END-SESSION method may be safely executed multiple times without
   first executing the START-SESSION method.  Any additional executions
   of this method without an intervening use of the START-SESSION method
   have no effect on the verifier resource.

   The following example assumes there is either a training session or a
   verification session in progress.

   C-&gt;S:  MRCP/2.0 ... END-SESSION 314174
          Channel-Identifier:32AECB23433801@speakverify
          Abort-Model:true

   S-&gt;C:  MRCP/2.0 ... 314174 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify







<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 158]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-159" id="page-159" name="page-159"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.8.%20%20QUERY-VOICEPRINT"></a><a class="selflink" href="#section-11.8" name="section-11.8">11.8</a>.  QUERY-VOICEPRINT</span>

   The QUERY-VOICEPRINT method is used to get status information on a
   particular voiceprint and can be used by the client to ascertain if a
   voiceprint or repository exists and if it contains trained
   voiceprints.

   The response to the QUERY-VOICEPRINT request contains an indication
   of the status of the designated voiceprint in the Voiceprint-Exists
   header field, allowing the client to determine whether to use the
   current voiceprint for verification, train a new voiceprint, or
   choose a different voiceprint.

   A voiceprint is completely specified by providing a repository
   location and a voiceprint identifier.  The particular voiceprint or
   identity within the repository is specified by a string identifier
   that is unique within the repository.  The Voiceprint-Identifier
   header field carries this unique voiceprint identifier within a given
   repository.

   The following example assumes a verification session is in progress
   and the voiceprint exists in the voiceprint repository.

   C-&gt;S:  MRCP/2.0 ... QUERY-VOICEPRINT 314168
          Channel-Identifier:32AECB23433801@speakverify
          Repository-URI:http://www.example.com/voiceprints/
          Voiceprint-Identifier:johnsmith.voiceprint

   S-&gt;C:  MRCP/2.0 ... 314168 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify
          Repository-URI:http://www.example.com/voiceprints/
          Voiceprint-Identifier:johnsmith.voiceprint
          Voiceprint-Exists:true

   The following example assumes that the URI provided in the
   Repository-URI header field is a bad URI.

   C-&gt;S:  MRCP/2.0 ... QUERY-VOICEPRINT 314168
          Channel-Identifier:32AECB23433801@speakverify
          Repository-URI:http://www.example.com/bad-uri/
          Voiceprint-Identifier:johnsmith.voiceprint

   S-&gt;C:  MRCP/2.0 ... 314168 405 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify
          Repository-URI:http://www.example.com/bad-uri/
          Voiceprint-Identifier:johnsmith.voiceprint
          Completion-Cause:007 repository-uri-failure




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 159]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-160" id="page-160" name="page-160"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.9.%20%20DELETE-VOICEPRINT"></a><a class="selflink" href="#section-11.9" name="section-11.9">11.9</a>.  DELETE-VOICEPRINT</span>

   The DELETE-VOICEPRINT method removes a voiceprint from a repository.
   This method MUST carry the Repository-URI and Voiceprint-Identifier
   header fields.

   An MRCPv2 server MUST reject a DELETE-VOICEPRINT request with a 401
   status code unless the MRCPv2 client has been authenticated and
   authorized.  Note that MRCPv2 does not have a standard mechanism for
   this.  See <a href="#section-12.8">Section 12.8</a>.

   If the corresponding voiceprint does not exist, the DELETE-VOICEPRINT
   method MUST return a 200 status code.

   The following example demonstrates a DELETE-VOICEPRINT operation to
   remove a specific voiceprint.

   C-&gt;S:  MRCP/2.0 ... DELETE-VOICEPRINT 314168
          Channel-Identifier:32AECB23433801@speakverify
          Repository-URI:http://www.example.com/bad-uri/
          Voiceprint-Identifier:johnsmith.voiceprint

   S-&gt;C:  MRCP/2.0 ... 314168 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.10.%20%20VERIFY"></a><a class="selflink" href="#section-11.10" name="section-11.10">11.10</a>.  VERIFY</span>

   The VERIFY method is used to request that the verifier resource
   either train/adapt the voiceprint or verify/identify a claimed
   identity.  If the voiceprint is new or was deleted by a previous
   DELETE-VOICEPRINT method, the VERIFY method trains the voiceprint.
   If the voiceprint already exists, it is adapted and not retrained by
   the VERIFY command.

   C-&gt;S:  MRCP/2.0 ... VERIFY 543260
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 543260 200 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speakverify

   When the VERIFY request completes, the MRCPv2 server MUST send a
   VERIFICATION-COMPLETE event to the client.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.11.%20%20VERIFY-FROM-BUFFER"></a><a class="selflink" href="#section-11.11" name="section-11.11">11.11</a>.  VERIFY-FROM-BUFFER</span>

   The VERIFY-FROM-BUFFER method directs the verifier resource to verify
   buffered audio against a voiceprint.  Only one VERIFY or VERIFY-FROM-
   BUFFER method may be active for a verifier resource at a time.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 160]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-161" id="page-161" name="page-161"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   The buffered audio is not consumed by this method and thus VERIFY-
   FROM-BUFFER may be invoked multiple times by the client to attempt
   verification against different voiceprints.

   For the VERIFY-FROM-BUFFER method, the server MAY optionally return
   an IN-PROGRESS response before the VERIFICATION-COMPLETE event.

   When the VERIFY-FROM-BUFFER method is invoked and the verification
   buffer is in use by another resource sharing it, the server MUST
   return an IN-PROGRESS response and wait until the buffer is available
   to it.  The verification buffer is owned by the verifier resource but
   is shared with write access from other input resources on the same
   session.  Hence, it is considered to be in use if there is a read or
   write operation such as a RECORD or RECOGNIZE with the
   Ver-Buffer-Utterance header field set to "true" on a resource that
   shares this buffer.  Note that if a RECORD or RECOGNIZE method
   returns with a failure cause code, the VERIFY-FROM-BUFFER request
   waiting to process that buffer MUST also fail with a Completion-Cause
   of 005 (buffer-empty).

   The following example illustrates the usage of some buffering
   methods.  In this scenario, the client first performed a live
   verification, but the utterance had been rejected.  In the meantime,
   the utterance is also saved to the audio buffer.  Then, another
   voiceprint is used to do verification against the audio buffer and
   the utterance is accepted.  For the example, we assume both
   Num-Min-Verification-Phrases and Num-Max-Verification-Phrases are 1.

   C-&gt;S:  MRCP/2.0 ... START-SESSION 314161
          Channel-Identifier:32AECB23433801@speakverify
          Verification-Mode:verify
          Adapt-Model:true
          Repository-URI:http://www.example.com/voiceprints
          Voiceprint-Identifier:johnsmith.voiceprint

   S-&gt;C:  MRCP/2.0 ... 314161 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify

   C-&gt;S:  MRCP/2.0 ... VERIFY 314162
          Channel-Identifier:32AECB23433801@speakverify
          Ver-buffer-utterance:true

   S-&gt;C:  MRCP/2.0 ... 314162 200 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speakverify







<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 161]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-162" id="page-162" name="page-162"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:  MRCP/2.0 ... VERIFICATION-COMPLETE 314162 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify
          Completion-Cause:000 success
          Content-Type:application/nlsml+xml
          Content-Length:...

          &lt;?xml version="1.0"?&gt;
          &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                  grammar="What-Grammar-URI"&gt;
            &lt;verification-result&gt;
              &lt;voiceprint id="johnsmith"&gt;
                &lt;incremental&gt;
                  &lt;utterance-length&gt; 500 &lt;/utterance-length&gt;
                  &lt;device&gt; cellular-phone &lt;/device&gt;
                  &lt;gender&gt; female &lt;/gender&gt;
                  &lt;decision&gt; rejected &lt;/decision&gt;
                  &lt;verification-score&gt; 0.05465 &lt;/verification-score&gt;
                &lt;/incremental&gt;
                &lt;cumulative&gt;
                  &lt;utterance-length&gt; 500 &lt;/utterance-length&gt;
                  &lt;device&gt; cellular-phone &lt;/device&gt;
                  &lt;gender&gt; female &lt;/gender&gt;
                  &lt;decision&gt; rejected &lt;/decision&gt;
                  &lt;verification-score&gt; 0.05465 &lt;/verification-score&gt;
                &lt;/cumulative&gt;
              &lt;/voiceprint&gt;
            &lt;/verification-result&gt;
          &lt;/result&gt;

   C-&gt;S:  MRCP/2.0 ... QUERY-VOICEPRINT 314163
          Channel-Identifier:32AECB23433801@speakverify
          Repository-URI:http://www.example.com/voiceprints/
          Voiceprint-Identifier:johnsmith

   S-&gt;C:  MRCP/2.0 ... 314163 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify
          Repository-URI:http://www.example.com/voiceprints/
          Voiceprint-Identifier:johnsmith.voiceprint
          Voiceprint-Exists:true

   C-&gt;S:  MRCP/2.0 ... START-SESSION 314164
          Channel-Identifier:32AECB23433801@speakverify
          Verification-Mode:verify
          Adapt-Model:true
          Repository-URI:http://www.example.com/voiceprints
          Voiceprint-Identifier:marysmith.voiceprint





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 162]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-163" id="page-163" name="page-163"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:  MRCP/2.0 ... 314164 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify

   C-&gt;S:  MRCP/2.0 ... VERIFY-FROM-BUFFER 314165
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 314165 200 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... VERIFICATION-COMPLETE 314165 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify
          Completion-Cause:000 success
          Content-Type:application/nlsml+xml
          Content-Length:...

          &lt;?xml version="1.0"?&gt;
          &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                  grammar="What-Grammar-URI"&gt;
            &lt;verification-result&gt;
              &lt;voiceprint id="marysmith"&gt;
                &lt;incremental&gt;
                  &lt;utterance-length&gt; 1000 &lt;/utterance-length&gt;
                  &lt;device&gt; cellular-phone &lt;/device&gt;
                  &lt;gender&gt; female &lt;/gender&gt;
                  &lt;decision&gt; accepted &lt;/decision&gt;
                  &lt;verification-score&gt; 0.98 &lt;/verification-score&gt;
                &lt;/incremental&gt;
                &lt;cumulative&gt;
                  &lt;utterance-length&gt; 1000 &lt;/utterance-length&gt;
                  &lt;device&gt; cellular-phone &lt;/device&gt;
                  &lt;gender&gt; female &lt;/gender&gt;
                  &lt;decision&gt; accepted &lt;/decision&gt;
                  &lt;verification-score&gt; 0.98 &lt;/verification-score&gt;
                &lt;/cumulative&gt;
              &lt;/voiceprint&gt;
            &lt;/verification-result&gt;
          &lt;/result&gt;


   C-&gt;S:  MRCP/2.0 ... END-SESSION 314166
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 314166 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify

                        VERIFY-FROM-BUFFER Example





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 163]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-164" id="page-164" name="page-164"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.12.%20%20VERIFY-ROLLBACK"></a><a class="selflink" href="#section-11.12" name="section-11.12">11.12</a>.  VERIFY-ROLLBACK</span>

   The VERIFY-ROLLBACK method discards the last buffered utterance or
   discards the last live utterances (when the mode is "train" or
   "verify").  The client will likely want to invoke this method when
   the user provides undesirable input such as non-speech noises, side-
   speech, out-of-grammar utterances, commands, etc.  Note that this
   method does not provide a stack of rollback states.  Executing
   VERIFY-ROLLBACK twice in succession without an intervening
   recognition operation has no effect on the second attempt.

   C-&gt;S:  MRCP/2.0 ... VERIFY-ROLLBACK 314165
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 314165 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify

                          VERIFY-ROLLBACK Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.13.%20%20STOP"></a><a class="selflink" href="#section-11.13" name="section-11.13">11.13</a>.  STOP</span>

   The STOP method from the client to the server tells the verifier
   resource to stop the VERIFY or VERIFY-FROM-BUFFER request if one is
   active.  If such a request is active and the STOP request
   successfully terminated it, then the response header section contains
   an Active-Request-Id-List header field containing the request-id of
   the VERIFY or VERIFY-FROM-BUFFER request that was terminated.  In
   this case, no VERIFICATION-COMPLETE event is sent for the terminated
   request.  If there was no verify request active, then the response
   MUST NOT contain an Active-Request-Id-List header field.  Either way,
   the response MUST contain a status-code of 200 "Success".

   The STOP method can carry an Abort-Verification header field, which
   specifies if the verification result until that point should be
   discarded or returned.  If this header field is not present or if the
   value is "true", the verification result is discarded and the STOP
   response does not contain any result data.  If the header field is
   present and its value is "false", the STOP response MUST contain a
   Completion-Cause header field and carry the Verification result data
   in its body.

   An aborted VERIFY request does an automatic rollback and hence does
   not affect the cumulative score.  A VERIFY request that was stopped
   with no Abort-Verification header field or with the Abort-
   Verification header field set to "false" does affect cumulative
   scores and would need to be explicitly rolled back if the client does
   not want the verification result considered in the cumulative scores.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 164]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-165" id="page-165" name="page-165"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   The following example assumes a voiceprint identity has already been
   established.

   C-&gt;S:  MRCP/2.0 ... VERIFY 314177
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 314177 200 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speakverify

   C-&gt;S:  MRCP/2.0 ... STOP 314178
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 314178 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify
          Active-Request-Id-List:314177

                         STOP Verification Example

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.14.%20%20START-INPUT-TIMERS"></a><a class="selflink" href="#section-11.14" name="section-11.14">11.14</a>.  START-INPUT-TIMERS</span>

   This request is sent from the client to the verifier resource to
   start the no-input timer, usually once the client has ascertained
   that any audio prompts to the user have played to completion.

   C-&gt;S:  MRCP/2.0 ... START-INPUT-TIMERS 543260
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 543260 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.15.%20%20VERIFICATION-COMPLETE"></a><a class="selflink" href="#section-11.15" name="section-11.15">11.15</a>.  VERIFICATION-COMPLETE</span>

   The VERIFICATION-COMPLETE event follows a call to VERIFY or VERIFY-
   FROM-BUFFER and is used to communicate the verification results to
   the client.  The event message body contains only verification
   results.

   S-&gt;C:  MRCP/2.0 ... VERIFICATION-COMPLETE 543259 COMPLETE
          Completion-Cause:000 success
          Content-Type:application/nlsml+xml
          Content-Length:...

          &lt;?xml version="1.0"?&gt;
          &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                  grammar="What-Grammar-URI"&gt;
            &lt;verification-result&gt;
              &lt;voiceprint id="johnsmith"&gt;




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 165]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-166" id="page-166" name="page-166"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


                &lt;incremental&gt;
                  &lt;utterance-length&gt; 500 &lt;/utterance-length&gt;
                  &lt;device&gt; cellular-phone &lt;/device&gt;
                  &lt;gender&gt; male &lt;/gender&gt;
                  &lt;decision&gt; accepted &lt;/decision&gt;
                  &lt;verification-score&gt; 0.85 &lt;/verification-score&gt;
                &lt;/incremental&gt;
                &lt;cumulative&gt;
                  &lt;utterance-length&gt; 1500 &lt;/utterance-length&gt;
                  &lt;device&gt; cellular-phone &lt;/device&gt;
                  &lt;gender&gt; male &lt;/gender&gt;
                  &lt;decision&gt; accepted &lt;/decision&gt;
                  &lt;verification-score&gt; 0.75 &lt;/verification-score&gt;
                &lt;/cumulative&gt;
              &lt;/voiceprint&gt;
            &lt;/verification-result&gt;
          &lt;/result&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.16.%20%20START-OF-INPUT"></a><a class="selflink" href="#section-11.16" name="section-11.16">11.16</a>.  START-OF-INPUT</span>

   The START-OF-INPUT event is returned from the server to the client
   once the server has detected speech.  This event is always returned
   by the verifier resource when speech has been detected, irrespective
   of whether or not the recognizer and verifier resources share the
   same session.

   S-&gt;C:  MRCP/2.0 ... START-OF-INPUT 543259 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speakverify

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.17.%20%20CLEAR-BUFFER"></a><a class="selflink" href="#section-11.17" name="section-11.17">11.17</a>.  CLEAR-BUFFER</span>

   The CLEAR-BUFFER method can be used to clear the verification buffer.
   This buffer is used to buffer speech during recognition, record, or
   verification operations that may later be used by VERIFY-FROM-BUFFER.
   As noted before, the buffer associated with the verifier resource is
   shared by other input resources like recognizers and recorders.
   Hence, a CLEAR-BUFFER request fails if the verification buffer is in
   use.  This can happen when any one of the input resources that share
   this buffer has an active read or write operation such as RECORD,
   RECOGNIZE, or VERIFY with the Ver-Buffer-Utterance header field set
   to "true".

   C-&gt;S:  MRCP/2.0 ... CLEAR-BUFFER 543260
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 543260 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 166]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-167" id="page-167" name="page-167"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.18.%20%20GET-INTERMEDIATE-RESULT"></a><a class="selflink" href="#section-11.18" name="section-11.18">11.18</a>.  GET-INTERMEDIATE-RESULT</span>

   A client can use the GET-INTERMEDIATE-RESULT method to poll for
   intermediate results of a verification request that is in progress.
   Invoking this method does not change the state of the resource.  The
   verifier resource collects the accumulated verification results and
   returns the information in the method response.  The message body in
   the response to a GET-INTERMEDIATE-RESULT REQUEST contains only
   verification results.  The method response MUST NOT contain a
   Completion-Cause header field as the request is not yet complete.  If
   the resource does not have a verification in progress, the response
   has a 402 failure status-code and no result in the body.

   C-&gt;S:  MRCP/2.0 ... GET-INTERMEDIATE-RESULT 543260
          Channel-Identifier:32AECB23433801@speakverify

   S-&gt;C:  MRCP/2.0 ... 543260 200 COMPLETE
          Channel-Identifier:32AECB23433801@speakverify
          Content-Type:application/nlsml+xml
          Content-Length:...

          &lt;?xml version="1.0"?&gt;
          &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                  grammar="What-Grammar-URI"&gt;
            &lt;verification-result&gt;
              &lt;voiceprint id="marysmith"&gt;
                &lt;incremental&gt;
                  &lt;utterance-length&gt; 50 &lt;/utterance-length&gt;
                  &lt;device&gt; cellular-phone &lt;/device&gt;
                  &lt;gender&gt; female &lt;/gender&gt;
                  &lt;decision&gt; undecided &lt;/decision&gt;
                  &lt;verification-score&gt; 0.85 &lt;/verification-score&gt;
                &lt;/incremental&gt;
                &lt;cumulative&gt;
                  &lt;utterance-length&gt; 150 &lt;/utterance-length&gt;
                  &lt;device&gt; cellular-phone &lt;/device&gt;
                  &lt;gender&gt; female &lt;/gender&gt;
                  &lt;decision&gt; undecided &lt;/decision&gt;
                  &lt;verification-score&gt; 0.65 &lt;/verification-score&gt;
                &lt;/cumulative&gt;
              &lt;/voiceprint&gt;
            &lt;/verification-result&gt;
          &lt;/result&gt;








<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 167]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-168" id="page-168" name="page-168"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Security%20Considerations"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Security Considerations</span>

   MRCPv2 is designed to comply with the security-related requirements
   documented in the SPEECHSC requirements [<a href="rfc4313.html" title='"Requirements for Distributed Control of Automatic Speech Recognition (ASR), Speaker Identification/Speaker Verification (SI/SV), and Text-to- Speech (TTS) Resources"'>RFC4313</a>].  Implementers and
   users of MRCPv2 are strongly encouraged to read the Security
   Considerations section of [<a href="rfc4313.html" title='"Requirements for Distributed Control of Automatic Speech Recognition (ASR), Speaker Identification/Speaker Verification (SI/SV), and Text-to- Speech (TTS) Resources"'>RFC4313</a>], because that document contains
   discussion of a number of important security issues associated with
   the utilization of speech as biometric authentication technology, and
   on the threats against systems which store recorded speech, contain
   large corpora of voiceprints, and send and receive sensitive
   information based on voice input to a recognizer or speech output
   from a synthesizer.  Specific security measures employed by MRCPv2
   are summarized in the following subsections.  See the corresponding
   sections of this specification for how the security-related machinery
   is invoked by individual protocol operations.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.1.%20%20Rendezvous%20and%20Session%20Establishment"></a><a class="selflink" href="#section-12.1" name="section-12.1">12.1</a>.  Rendezvous and Session Establishment</span>

   MRCPv2 control sessions are established as media sessions described
   by SDP within the context of a SIP dialog.  In order to ensure secure
   rendezvous between MRCPv2 clients and servers, the following are
   required:

   1.  The SIP implementation in MRCPv2 clients and servers MUST support
       SIP digest authentication [<a href="rfc3261.html" title='"SIP: Session Initiation Protocol"'>RFC3261</a>] and SHOULD employ it.

   2.  The SIP implementation in MRCPv2 clients and servers MUST support
       'sips' URIs and SHOULD employ 'sips' URIs; this includes that
       clients and servers SHOULD set up TLS [<a href="rfc5246.html" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>] connections.

   3.  If media stream cryptographic keying is done through SDP (e.g.
       using [<a href="rfc4568.html" title='"Session Description Protocol (SDP) Security Descriptions for Media Streams"'>RFC4568</a>]), the MRCPv2 clients and servers MUST employ the
       'sips' URI.

   4.  When TLS is used for SIP, the client MUST verify the identity of
       the server to which it connects, following the rules and
       guidelines defined in [<a href="rfc5922.html" title='"Domain Certificates in the Session Initiation Protocol (SIP)"'>RFC5922</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.2.%20%20Control%20Channel%20Protection"></a><a class="selflink" href="#section-12.2" name="section-12.2">12.2</a>.  Control Channel Protection</span>

   Sensitive data is carried over the MRCPv2 control channel.  This
   includes things like the output of speech recognition operations,
   speaker verification results, input to text-to-speech conversion,
   personally identifying grammars, etc.  For this reason, MRCPv2
   servers must be properly authenticated, and the control channel must
   permit the use of both confidentiality and integrity for the data.
   To ensure control channel protection, MRCPv2 clients and servers MUST
   support TLS and SHOULD utilize it by default unless alternative



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 168]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-169" id="page-169" name="page-169"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   control channel protection is used.  When TLS is used, the client
   MUST verify the identity of the server to which it connects,
   following the rules and guidelines defined in [<a href="rfc4572.html" title='"Connection-Oriented Media Transport over the Transport Layer Security (TLS) Protocol in the Session Description Protocol (SDP)"'>RFC4572</a>].  If there
   are multiple TLS-protected channels between the client and the
   server, the server MUST NOT send a response to the client over a
   channel for which the TLS identities of the server or client differ
   from the channel over which the server received the corresponding
   request.  Alternative control-channel protection MAY be used if
   desired (e.g., Security Architecture for the Internet Protocol
   (IPsec) [<a href="rfc4301.html" title='"Security Architecture for the Internet Protocol"'>RFC4301</a>]).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.3.%20%20Media%20Session%20Protection"></a><a class="selflink" href="#section-12.3" name="section-12.3">12.3</a>.  Media Session Protection</span>

   Sensitive data is also carried on media sessions terminating on
   MRCPv2 servers (the other end of a media channel may or may not be on
   the MRCPv2 client).  This data includes the user's spoken utterances
   and the output of text-to-speech operations.  MRCPv2 servers MUST
   support a security mechanism for protection of audio media sessions.
   MRCPv2 clients that originate or consume audio similarly MUST support
   a security mechanism for protection of the audio.  One such mechanism
   is the Secure Real-time Transport Protocol (SRTP) [<a href="rfc3711.html" title='"The Secure Real-time Transport Protocol (SRTP)"'>RFC3711</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.4.%20%20Indirect%20Content%20Access"></a><a class="selflink" href="#section-12.4" name="section-12.4">12.4</a>.  Indirect Content Access</span>

   MCRPv2 employs content indirection extensively.  Content may be
   fetched and/or stored based on URI addressing on systems other than
   the MRCPv2 client or server.  Not all of the stored content is
   necessarily sensitive (e.g., XML schemas), but the majority generally
   needs protection, and some indirect content, such as voice recordings
   and voiceprints, is extremely sensitive and must always be protected.
   MRCPv2 clients and servers MUST implement HTTPS for indirect content
   access and SHOULD employ secure access for all sensitive indirect
   content.  Other secure URI schemes such as Secure FTP (FTPS)
   [<a href="rfc4217.html" title='"Securing FTP with TLS"'>RFC4217</a>] MAY also be used.  See <a href="#section-6.2.15">Section 6.2.15</a> for the header fields
   used to transfer cookie information between the MRCPv2 client and
   server if needed for authentication.

   Access to URIs provided by servers introduces risks that need to be
   considered.  Although <a href="rfc6454.html">RFC 6454</a> [<a href="rfc6454.html" title='"The Web Origin Concept"'>RFC6454</a>] discusses and focuses on a
   same-origin policy, which MRCPv2 does not restrict URIs to, it still
   provides an excellent description of the pitfalls of blindly
   following server-provided URIs in <a href="#section-3">Section 3</a> of the RFC.  Servers also
   need to be aware that clients could provide URIs to sites designed to
   tie up the server in long or otherwise problematic document fetches.
   MRCPv2 servers, and the services they access, MUST always be prepared
   for the possibility of such a denial-of-service attack.





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 169]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-170" id="page-170" name="page-170"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   MRCPv2 makes no inherent assumptions about the lifetime and access
   controls associated with a URI.  For example, if neither
   authentication nor scheme-specific access controls are used, a leak
   of the URI is equivalent to a leak of the content.  Moreover, MRCPv2
   makes no specific demands on the lifetime of a URI.  If a server
   offers a URI and the client takes a long, long time to access that
   URI, the server may have removed the resource in the interim time
   period.  MRCPv2 deals with this case by using the URI access scheme's
   'resource not found' error, such as 404 for HTTPS.  How long a server
   should keep a dynamic resource available is highly application and
   context dependent.  However, the server SHOULD keep the resource
   available for a reasonable amount of time to make it likely the
   client will have the resource available when the client needs the
   resource.  Conversely, to mitigate state exhaustion attacks, MRCPv2
   servers are not obligated to keep resources and resource state in
   perpetuity.  The server SHOULD delete dynamically generated resources
   associated with an MRCPv2 session when the session ends.

   One method to avoid resource leakage is for the server to use
   difficult-to-guess, one-time resource URIs.  In this instance, there
   can be only a single access to the underlying resource using the
   given URI.  A downside to this approach is if an attacker uses the
   URI before the client uses the URI, then the client is denied the
   resource.  Other methods would be to adopt a mechanism similar to the
   URLAUTH IMAP extension [<a href="rfc4467.html" title='"Internet Message Access Protocol (IMAP) - URLAUTH Extension"'>RFC4467</a>], where the server sets cryptographic
   checks on URI usage, as well as capabilities for expiration,
   revocation, and so on.  Specifying such a mechanism is beyond the
   scope of this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.5.%20%20Protection%20of%20Stored%20Media"></a><a class="selflink" href="#section-12.5" name="section-12.5">12.5</a>.  Protection of Stored Media</span>

   MRCPv2 applications often require the use of stored media.  Voice
   recordings are both stored (e.g., for diagnosis and system tuning),
   and fetched (for replaying utterances into multiple MRCPv2
   resources).  Voiceprints are fundamental to the speaker
   identification and verification functions.  This data can be
   extremely sensitive and can present substantial privacy and
   impersonation risks if stolen.  Systems employing MRCPv2 SHOULD be
   deployed in ways that minimize these risks.  The SPEECHSC
   requirements RFC [<a href="rfc4313.html" title='"Requirements for Distributed Control of Automatic Speech Recognition (ASR), Speaker Identification/Speaker Verification (SI/SV), and Text-to- Speech (TTS) Resources"'>RFC4313</a>] contains a more extensive discussion of
   these risks and ways they may be mitigated.










<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 170]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-171" id="page-171" name="page-171"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.6.%20%20DTMF%20and%20Recognition%20Buffers"></a><a class="selflink" href="#section-12.6" name="section-12.6">12.6</a>.  DTMF and Recognition Buffers</span>

   DTMF buffers and recognition buffers may grow large enough to exceed
   the capabilities of a server, and the server MUST be prepared to
   gracefully handle resource consumption.  A server MAY respond with
   the appropriate recognition incomplete if the server is in danger of
   running out of resources.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.7.%20%20Client-Set%20Server%20Parameters"></a><a class="selflink" href="#section-12.7" name="section-12.7">12.7</a>.  Client-Set Server Parameters</span>

   In MRCPv2, there are some tasks, such as URI resource fetches, that
   the server does on behalf of the client.  To control this behavior,
   MRCPv2 has a number of server parameters that a client can configure.
   With one such parameter, Fetch-Timeout (<a href="#section-6.2.12">Section 6.2.12</a>), a malicious
   client could set a very large value and then request the server to
   fetch a non-existent document.  It is RECOMMENDED that servers be
   cautious about accepting long timeout values or abnormally large
   values for other client-set parameters.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.8.%20%20DELETE-VOICEPRINT%20and%20Authorization"></a><a class="selflink" href="#section-12.8" name="section-12.8">12.8</a>.  DELETE-VOICEPRINT and Authorization</span>

   Since this specification does not mandate a specific mechanism for
   authentication and authorization when requesting DELETE-VOICEPRINT
   (<a href="#section-11.9">Section 11.9</a>), there is a risk that an MRCPv2 server may not do such
   a check for authentication and authorization.  In practice, each
   provider of voice biometric solutions does insist on its own
   authentication and authorization mechanism, outside of this
   specification, so this is not likely to be a major problem.  If in
   the future voice biometric providers standardize on such a mechanism,
   then a future version of MRCP can mandate it.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  IANA Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.1.%20%20New%20Registries"></a><a class="selflink" href="#section-13.1" name="section-13.1">13.1</a>.  New Registries</span>

   This section describes the name spaces (registries) for MRCPv2 that
   IANA has created and now maintains.  Assignment/registration policies
   are described in <a href="rfc5226.html">RFC 5226</a> [<a href="rfc5226.html" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC5226</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.1.1.%20%20MRCPv2%20Resource%20Types"></a><a class="selflink" href="#section-13.1.1" name="section-13.1.1">13.1.1</a>.  MRCPv2 Resource Types</span>

   IANA has created a new name space of "MRCPv2 Resource Types".  All
   maintenance within and additions to the contents of this name space
   MUST be according to the "Standards Action" registration policy.  The
   initial contents of the registry, defined in <a href="#section-4.2">Section 4.2</a>, are given
   below:





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 171]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-172" id="page-172" name="page-172"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Resource type  Resource description  Reference
   -------------  --------------------  ---------
   speechrecog    Speech Recognizer     [<a href="rfc6787.html">RFC6787</a>]
   dtmfrecog      DTMF Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   speechsynth    Speech Synthesizer    [<a href="rfc6787.html">RFC6787</a>]
   basicsynth     Basic Synthesizer     [<a href="rfc6787.html">RFC6787</a>]
   speakverify    Speaker Verifier      [<a href="rfc6787.html">RFC6787</a>]
   recorder       Speech Recorder       [<a href="rfc6787.html">RFC6787</a>]

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.1.2.%20%20MRCPv2%20Methods%20and%20Events"></a><a class="selflink" href="#section-13.1.2" name="section-13.1.2">13.1.2</a>.  MRCPv2 Methods and Events</span>

   IANA has created a new name space of "MRCPv2 Methods and Events".
   All maintenance within and additions to the contents of this name
   space MUST be according to the "Standards Action" registration
   policy.  The initial contents of the registry, defined by the
   "method-name" and "event-name" BNF in <a href="#section-15">Section 15</a> and explained in
   Sections <a href="#section-5.2">5.2</a> and <a href="#section-5.5">5.5</a>, are given below.

   Name                     Resource type  Method/Event  Reference
   ----                     -------------  ------------  ---------
   SET-PARAMS               Generic        Method        [<a href="rfc6787.html">RFC6787</a>]
   GET-PARAMS               Generic        Method        [<a href="rfc6787.html">RFC6787</a>]
   SPEAK                    Synthesizer    Method        [<a href="rfc6787.html">RFC6787</a>]
   STOP                     Synthesizer    Method        [<a href="rfc6787.html">RFC6787</a>]
   PAUSE                    Synthesizer    Method        [<a href="rfc6787.html">RFC6787</a>]
   RESUME                   Synthesizer    Method        [<a href="rfc6787.html">RFC6787</a>]
   BARGE-IN-OCCURRED        Synthesizer    Method        [<a href="rfc6787.html">RFC6787</a>]
   CONTROL                  Synthesizer    Method        [<a href="rfc6787.html">RFC6787</a>]
   DEFINE-LEXICON           Synthesizer    Method        [<a href="rfc6787.html">RFC6787</a>]
   DEFINE-GRAMMAR           Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   RECOGNIZE                Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   INTERPRET                Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   GET-RESULT               Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   START-INPUT-TIMERS       Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   STOP                     Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   START-PHRASE-ENROLLMENT  Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   ENROLLMENT-ROLLBACK      Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   END-PHRASE-ENROLLMENT    Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   MODIFY-PHRASE            Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   DELETE-PHRASE            Recognizer     Method        [<a href="rfc6787.html">RFC6787</a>]
   RECORD                   Recorder       Method        [<a href="rfc6787.html">RFC6787</a>]
   STOP                     Recorder       Method        [<a href="rfc6787.html">RFC6787</a>]
   START-INPUT-TIMERS       Recorder       Method        [<a href="rfc6787.html">RFC6787</a>]
   START-SESSION            Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   END-SESSION              Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   QUERY-VOICEPRINT         Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   DELETE-VOICEPRINT        Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   VERIFY                   Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 172]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-173" id="page-173" name="page-173"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   VERIFY-FROM-BUFFER       Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   VERIFY-ROLLBACK          Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   STOP                     Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   START-INPUT-TIMERS       Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   GET-INTERMEDIATE-RESULT  Verifier       Method        [<a href="rfc6787.html">RFC6787</a>]
   SPEECH-MARKER            Synthesizer    Event         [<a href="rfc6787.html">RFC6787</a>]
   SPEAK-COMPLETE           Synthesizer    Event         [<a href="rfc6787.html">RFC6787</a>]
   START-OF-INPUT           Recognizer     Event         [<a href="rfc6787.html">RFC6787</a>]
   RECOGNITION-COMPLETE     Recognizer     Event         [<a href="rfc6787.html">RFC6787</a>]
   INTERPRETATION-COMPLETE  Recognizer     Event         [<a href="rfc6787.html">RFC6787</a>]
   START-OF-INPUT           Recorder       Event         [<a href="rfc6787.html">RFC6787</a>]
   RECORD-COMPLETE          Recorder       Event         [<a href="rfc6787.html">RFC6787</a>]
   VERIFICATION-COMPLETE    Verifier       Event         [<a href="rfc6787.html">RFC6787</a>]
   START-OF-INPUT           Verifier       Event         [<a href="rfc6787.html">RFC6787</a>]

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.1.3.%20%20MRCPv2%20Header%20Fields"></a><a class="selflink" href="#section-13.1.3" name="section-13.1.3">13.1.3</a>.  MRCPv2 Header Fields</span>

   IANA has created a new name space of "MRCPv2 Header Fields".  All
   maintenance within and additions to the contents of this name space
   MUST be according to the "Standards Action" registration policy.  The
   initial contents of the registry, defined by the "message-header" BNF
   in <a href="#section-15">Section 15</a> and explained in <a href="#section-5.1">Section 5.1</a>, are given below.  Note
   that the values permitted for the "Vendor-Specific-Parameters"
   parameter are managed according to a different policy.  See
   <a href="#section-13.1.6">Section 13.1.6</a>.

   Name                               Resource type    Reference
   ----                               -------------    ---------
   Channel-Identifier                 Generic          [<a href="rfc6787.html">RFC6787</a>]
   Accept                             Generic          [<a href="rfc2616.html" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>RFC2616</a>]
   Active-Request-Id-List             Generic          [<a href="rfc6787.html">RFC6787</a>]
   Proxy-Sync-Id                      Generic          [<a href="rfc6787.html">RFC6787</a>]
   Accept-Charset                     Generic          [<a href="rfc2616.html" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>RFC2616</a>]
   Content-Type                       Generic          [<a href="rfc6787.html">RFC6787</a>]
   Content-ID                         Generic
                             [<a href="rfc2392.html" title='"Content-ID and Message-ID Uniform Resource Locators"'>RFC2392</a>], [<a href="rfc2046.html" title='"Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"'>RFC2046</a>], and [<a href="rfc5322.html" title='"Internet Message Format"'>RFC5322</a>]
   Content-Base                       Generic          [<a href="rfc6787.html">RFC6787</a>]
   Content-Encoding                   Generic          [<a href="rfc6787.html">RFC6787</a>]
   Content-Location                   Generic          [<a href="rfc6787.html">RFC6787</a>]
   Content-Length                     Generic          [<a href="rfc6787.html">RFC6787</a>]
   Fetch-Timeout                      Generic          [<a href="rfc6787.html">RFC6787</a>]
   Cache-Control                      Generic          [<a href="rfc6787.html">RFC6787</a>]
   Logging-Tag                        Generic          [<a href="rfc6787.html">RFC6787</a>]
   Set-Cookie                         Generic          [<a href="rfc6787.html">RFC6787</a>]
   Vendor-Specific                    Generic          [<a href="rfc6787.html">RFC6787</a>]
   Jump-Size                          Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Kill-On-Barge-In                   Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Speaker-Profile                    Synthesizer      [<a href="rfc6787.html">RFC6787</a>]



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 173]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-174" id="page-174" name="page-174"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Completion-Cause                   Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Completion-Reason                  Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Voice-Parameter                    Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Prosody-Parameter                  Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Speech-Marker                      Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Speech-Language                    Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Fetch-Hint                         Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Audio-Fetch-Hint                   Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Failed-URI                         Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Failed-URI-Cause                   Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Speak-Restart                      Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Speak-Length                       Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Load-Lexicon                       Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Lexicon-Search-Order               Synthesizer      [<a href="rfc6787.html">RFC6787</a>]
   Confidence-Threshold               Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Sensitivity-Level                  Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Speed-Vs-Accuracy                  Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   N-Best-List-Length                 Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Input-Type                         Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   No-Input-Timeout                   Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Recognition-Timeout                Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Waveform-URI                       Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Input-Waveform-URI                 Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Completion-Cause                   Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Completion-Reason                  Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Recognizer-Context-Block           Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Start-Input-Timers                 Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Speech-Complete-Timeout            Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Speech-Incomplete-Timeout          Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Dtmf-Interdigit-Timeout            Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Dtmf-Term-Timeout                  Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Dtmf-Term-Char                     Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Failed-URI                         Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Failed-URI-Cause                   Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Save-Waveform                      Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Media-Type                         Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   New-Audio-Channel                  Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Speech-Language                    Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Ver-Buffer-Utterance               Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Recognition-Mode                   Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Cancel-If-Queue                    Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Hotword-Max-Duration               Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Hotword-Min-Duration               Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Interpret-Text                     Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Dtmf-Buffer-Time                   Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Clear-Dtmf-Buffer                  Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Early-No-Match                     Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Num-Min-Consistent-Pronunciations  Recognizer       [<a href="rfc6787.html">RFC6787</a>]



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 174]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-175" id="page-175" name="page-175"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Consistency-Threshold              Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Clash-Threshold                    Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Personal-Grammar-URI               Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Enroll-Utterance                   Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Phrase-ID                          Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Phrase-NL                          Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Weight                             Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Save-Best-Waveform                 Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   New-Phrase-ID                      Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Confusable-Phrases-URI             Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Abort-Phrase-Enrollment            Recognizer       [<a href="rfc6787.html">RFC6787</a>]
   Sensitivity-Level                  Recorder         [<a href="rfc6787.html">RFC6787</a>]
   No-Input-Timeout                   Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Completion-Cause                   Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Completion-Reason                  Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Failed-URI                         Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Failed-URI-Cause                   Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Record-URI                         Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Media-Type                         Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Max-Time                           Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Trim-Length                        Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Final-Silence                      Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Capture-On-Speech                  Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Ver-Buffer-Utterance               Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Start-Input-Timers                 Recorder         [<a href="rfc6787.html">RFC6787</a>]
   New-Audio-Channel                  Recorder         [<a href="rfc6787.html">RFC6787</a>]
   Repository-URI                     Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Voiceprint-Identifier              Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Verification-Mode                  Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Adapt-Model                        Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Abort-Model                        Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Min-Verification-Score             Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Num-Min-Verification-Phrases       Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Num-Max-Verification-Phrases       Verifier         [<a href="rfc6787.html">RFC6787</a>]
   No-Input-Timeout                   Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Save-Waveform                      Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Media-Type                         Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Waveform-URI                       Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Voiceprint-Exists                  Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Ver-Buffer-Utterance               Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Input-Waveform-URI                 Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Completion-Cause                   Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Completion-Reason                  Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Speech-Complete-Timeout            Verifier         [<a href="rfc6787.html">RFC6787</a>]
   New-Audio-Channel                  Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Abort-Verification                 Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Start-Input-Timers                 Verifier         [<a href="rfc6787.html">RFC6787</a>]
   Input-Type                         Verifier         [<a href="rfc6787.html">RFC6787</a>]



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 175]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-176" id="page-176" name="page-176"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.1.4.%20%20MRCPv2%20Status%20Codes"></a><a class="selflink" href="#section-13.1.4" name="section-13.1.4">13.1.4</a>.  MRCPv2 Status Codes</span>

   IANA has created a new name space of "MRCPv2 Status Codes" with the
   initial values that are defined in <a href="#section-5.4">Section 5.4</a>.  All maintenance
   within and additions to the contents of this name space MUST be
   according to the "Specification Required with Expert Review"
   registration policy.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.1.5.%20%20Grammar%20Reference%20List%20Parameters"></a><a class="selflink" href="#section-13.1.5" name="section-13.1.5">13.1.5</a>.  Grammar Reference List Parameters</span>

   IANA has created a new name space of "Grammar Reference List
   Parameters".  All maintenance within and additions to the contents of
   this name space MUST be according to the "Specification Required with
   Expert Review" registration policy.  There is only one initial
   parameter as shown below.

   Name                       Reference
   ----                       -------------
   weight                     [<a href="rfc6787.html">RFC6787</a>]

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.1.6.%20%20MRCPv2%20Vendor-Specific%20Parameters"></a><a class="selflink" href="#section-13.1.6" name="section-13.1.6">13.1.6</a>.  MRCPv2 Vendor-Specific Parameters</span>

   IANA has created a new name space of "MRCPv2 Vendor-Specific
   Parameters".  All maintenance within and additions to the contents of
   this name space MUST be according to the "Hierarchical Allocation"
   registration policy as follows.  Each name (corresponding to the
   "vendor-av-pair-name" ABNF production) MUST satisfy the syntax
   requirements of Internet Domain Names as described in <a href="rfc1035.html#section-2.3.1">Section 2.3.1
   of RFC 1035</a> [<a href="rfc1035.html" title='"Domain names - implementation and specification"'>RFC1035</a>] (and as updated or obsoleted by successive
   RFCs), with one exception, the order of the domain names is reversed.
   For example, a vendor-specific parameter "foo" by example.com would
   have the form "com.example.foo".  The first, or top-level domain, is
   restricted to exactly the set of Top-Level Internet Domains defined
   by IANA and will be updated by IANA when and only when that set
   changes.  The second-level and all subdomains within the parameter
   name MUST be allocated according to the "First Come First Served"
   policy.  It is RECOMMENDED that assignment requests adhere to the
   existing allocations of Internet domain names to organizations,
   institutions, corporations, etc.

   The registry contains a list of vendor-registered parameters, where
   each defined parameter is associated with a contact person and
   includes an optional reference to the definition of the parameter,
   preferably an RFC.  The registry is initially empty.







<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 176]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-177" id="page-177" name="page-177"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.2.%20%20NLSML-Related%20Registrations"></a><a class="selflink" href="#section-13.2" name="section-13.2">13.2</a>.  NLSML-Related Registrations</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.2.1.%20%20%27application%2Fnlsml%2Bxml%27%20Media%20Type%20Registration"></a><a class="selflink" href="#section-13.2.1" name="section-13.2.1">13.2.1</a>.  'application/nlsml+xml' Media Type Registration</span>

   IANA has registered the following media type according to the process
   defined in <a href="rfc4288.html">RFC 4288</a> [<a href="rfc4288.html" title='"Media Type Specifications and Registration Procedures"'>RFC4288</a>].

   To:  ietf-types@iana.org

   Subject:  Registration of media type application/nlsml+xml

   MIME media type name:  application

   MIME subtype name:  nlsml+xml

   Required parameters:  none

   Optional parameters:

      charset:  All of the considerations described in <a href="rfc3023.html">RFC 3023</a>
         [<a href="rfc3023.html" title='"XML Media Types"'>RFC3023</a>] also apply to the application/nlsml+xml media type.

   Encoding considerations:  All of the considerations described in <a href="rfc3023.html">RFC</a>
      <a href="rfc3023.html">3023</a> also apply to the 'application/nlsml+xml' media type.

   Security considerations:  As with HTML, NLSML documents contain links
      to other data stores (grammars, verifier resources, etc.).  Unlike
      HTML, however, the data stores are not treated as media to be
      rendered.  Nevertheless, linked files may themselves have security
      considerations, which would be those of the individual registered
      types.  Additionally, this media type has all of the security
      considerations described in <a href="rfc3023.html">RFC 3023</a>.

   Interoperability considerations:  Although an NLSML document is
      itself a complete XML document, for a fuller interpretation of the
      content a receiver of an NLSML document may wish to access
      resources linked to by the document.  The inability of an NLSML
      processor to access or process such linked resources could result
      in different behavior by the ultimate consumer of the data.

   Published specification:  <a href="rfc6787.html">RFC 6787</a>

   Applications that use this media type:  MRCPv2 clients and servers

   Additional information:  none

   Magic number(s):  There is no single initial octet sequence that is
      always present for NLSML files.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 177]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-178" id="page-178" name="page-178"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Person &amp; email address to contact for further information:
      Sarvi Shanmugham, sarvi@cisco.com

   Intended usage:  This media type is expected to be used only in
      conjunction with MRCPv2.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.3.%20%20NLSML%20XML%20Schema%20Registration"></a><a class="selflink" href="#section-13.3" name="section-13.3">13.3</a>.  NLSML XML Schema Registration</span>

   IANA has registered and now maintains the following XML Schema.
   Information provided follows the template in <a href="rfc3688.html">RFC 3688</a> [<a href="rfc3688.html" title='"The IETF XML Registry"'>RFC3688</a>].

   XML element type:  schema

   URI:  urn:ietf:params:xml:schema:nlsml

   Registrant Contact:  IESG

   XML:  See <a href="#section-16.1">Section 16.1</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.4.%20%20MRCPv2%20XML%20Namespace%20Registration"></a><a class="selflink" href="#section-13.4" name="section-13.4">13.4</a>.  MRCPv2 XML Namespace Registration</span>

   IANA has registered and now maintains the following XML Name space.
   Information provided follows the template in <a href="rfc3688.html">RFC 3688</a> [<a href="rfc3688.html" title='"The IETF XML Registry"'>RFC3688</a>].

   XML element type:  ns

   URI:  urn:ietf:params:xml:ns:mrcpv2

   Registrant Contact:  IESG

   XML:  <a href="rfc6787.html">RFC 6787</a>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.5.%20%20Text%20Media%20Type%20Registrations"></a><a class="selflink" href="#section-13.5" name="section-13.5">13.5</a>.  Text Media Type Registrations</span>

   IANA has registered the following text media type according to the
   process defined in <a href="rfc4288.html">RFC 4288</a> [<a href="rfc4288.html" title='"Media Type Specifications and Registration Procedures"'>RFC4288</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.5.1.%20%20text%2Fgrammar-ref-list"></a><a class="selflink" href="#section-13.5.1" name="section-13.5.1">13.5.1</a>.  text/grammar-ref-list</span>

   To:  ietf-types@iana.org

   Subject:  Registration of media type text/grammar-ref-list

   MIME media type name:  text

   MIME subtype name:  text/grammar-ref-list

   Required parameters:  none



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 178]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-179" id="page-179" name="page-179"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Optional parameters:  none

   Encoding considerations:  Depending on the transfer protocol, a
      transfer encoding may be necessary to deal with very long lines.

   Security considerations:  This media type contains URIs that may
      represent references to external resources.  As these resources
      are assumed to be speech recognition grammars, similar
      considerations as for the media types 'application/srgs' and
      'application/srgs+xml' apply.

   Interoperability considerations:  '&gt;' must be percent encoded in URIs
      according to <a href="rfc3986.html">RFC 3986</a> [<a href="rfc3986.html" title='"Uniform Resource Identifier (URI): Generic Syntax"'>RFC3986</a>].

   Published specification:  The RECOGNIZE method of the MRCP protocol
      performs a recognition operation that matches input against a set
      of grammars.  When matching against more than one grammar, it is
      sometimes necessary to use different weights for the individual
      grammars.  These weights are not a property of the grammar
      resource itself but qualify the reference to that grammar for the
      particular recognition operation initiated by the RECOGNIZE
      method.  The format of the proposed 'text/grammar-ref-list' media
      type is as follows:

      body       = *reference
      reference  = "&lt;" uri "&gt;" [parameters] CRLF
      parameters = ";" parameter *(";" parameter)
      parameter  = attribute "=" value

      This specification currently only defines a 'weight' parameter,
      but new parameters MAY be added through the "Grammar Reference
      List Parameters" IANA registry established through this
      specification.  Example:

            &lt;http://example.com/grammars/field1.gram&gt;
            &lt;http://example.com/grammars/field2.gram&gt;;weight="0.85"
            &lt;session:field3@form-level.store&gt;;weight="0.9"
            &lt;http://example.com/grammars/universals.gram&gt;;weight="0.75"

   Applications that use this media type:  MRCPv2 clients and servers

   Additional information:  none

   Magic number(s):  none

   Person &amp; email address to contact for further information:
      Sarvi Shanmugham, sarvi@cisco.com




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 179]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-180" id="page-180" name="page-180"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Intended usage:  This media type is expected to be used only in
      conjunction with MRCPv2.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.6.%20%20%27session%27%20URI%20Scheme%20Registration"></a><a class="selflink" href="#section-13.6" name="section-13.6">13.6</a>.  'session' URI Scheme Registration</span>

   IANA has registered the following new URI scheme.  The information
   below follows the template given in <a href="rfc4395.html">RFC 4395</a> [<a href="rfc4395.html" title='"Guidelines and Registration Procedures for New URI Schemes"'>RFC4395</a>].

   URI scheme name:  session

   Status:  Permanent

   URI scheme syntax:  The syntax of this scheme is identical to that
      defined for the "cid" scheme in <a href="rfc2392.html#section-2">Section 2 of RFC 2392</a> [<a href="rfc2392.html" title='"Content-ID and Message-ID Uniform Resource Locators"'>RFC2392</a>].

   URI scheme semantics:  The URI is intended to identify a data
      resource previously given to the network computing resource.  The
      purpose of this scheme is to permit access to the specific
      resource for the lifetime of the session with the entity storing
      the resource.  The media type of the resource CAN vary.  There is
      no explicit mechanism for communication of the media type.  This
      scheme is currently widely used internally by existing
      implementations, and the registration is intended to provide
      information in the rare (and unfortunate) case that the scheme is
      used elsewhere.  The scheme SHOULD NOT be used for open Internet
      protocols.

   Encoding considerations:  There are no other encoding considerations
      for the 'session' URIs not described in <a href="rfc3986.html">RFC 3986</a> [<a href="rfc3986.html" title='"Uniform Resource Identifier (URI): Generic Syntax"'>RFC3986</a>]

   Applications/protocols that use this URI scheme name:  This scheme
      name is used by MRCPv2 clients and servers.

   Interoperability considerations:  Note that none of the resources are
      accessible after the MCRPv2 session ends, hence the name of the
      scheme.  For clients who establish one MRCPv2 session only for the
      entire speech application being implemented, this is sufficient,
      but clients who create, terminate, and recreate MRCP sessions for
      performance or scalability reasons will lose access to resources
      established in the earlier session(s).

   Security considerations:  Generic security considerations for URIs
      described in <a href="rfc3986.html">RFC 3986</a> [<a href="rfc3986.html" title='"Uniform Resource Identifier (URI): Generic Syntax"'>RFC3986</a>] apply to this scheme as well.  The
      URIs defined here provide an identification mechanism only.  Given
      that the communication channel between client and server is
      secure, that the server correctly accesses the resource associated





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 180]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-181" id="page-181" name="page-181"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


      with the URI, and that the server ensures session-only lifetime
      and access for each URI, the only additional security issues are
      those of the types of media referred to by the URI.

   Contact:  Sarvi Shanmugham, sarvi@cisco.com

   Author/Change controller:  IESG, iesg@ietf.org

   References:  This specification, particularly Sections <a href="#section-6.2.7">6.2.7</a>, <a href="#section-8.5.2">8.5.2</a>,
      9.5.1, and 9.9.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.7.%20%20SDP%20Parameter%20Registrations"></a><a class="selflink" href="#section-13.7" name="section-13.7">13.7</a>.  SDP Parameter Registrations</span>

   IANA has registered the following SDP parameter values.  The
   information for each follows the template given in <a href="rfc4566.html">RFC 4566</a>
   <a href="rfc4566.html#appendix-B">[RFC4566], Appendix B</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.7.1.%20%20Sub-Registry%20%22proto%22"></a><a class="selflink" href="#section-13.7.1" name="section-13.7.1">13.7.1</a>.  Sub-Registry "proto"</span>

   "TCP/MRCPv2" value of the "proto" parameter

   Contact name, email address, and telephone number:  Sarvi Shanmugham,
      sarvi@cisco.com, +1.408.902.3875

   Name being registered (as it will appear in SDP):  TCP/MRCPv2

   Long-form name in English:  MCRPv2 over TCP

   Type of name:  proto

   Explanation of name:  This name represents the MCRPv2 protocol
      carried over TCP.

   Reference to specification of name:  <a href="rfc6787.html">RFC 6787</a>

   "TCP/TLS/MRCPv2" value of the "proto" parameter

   Contact name, email address, and telephone number:  Sarvi Shanmugham,
      sarvi@cisco.com, +1.408.902.3875

   Name being registered (as it will appear in SDP):  TCP/TLS/MRCPv2

   Long-form name in English:  MCRPv2 over TLS over TCP

   Type of name:  proto

   Explanation of name:  This name represents the MCRPv2 protocol
      carried over TLS over TCP.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 181]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-182" id="page-182" name="page-182"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Reference to specification of name:  <a href="rfc6787.html">RFC 6787</a>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/13.7.2.%20%20Sub-Registry%20%22att-field%20%28media-level%29%22"></a><a class="selflink" href="#section-13.7.2" name="section-13.7.2">13.7.2</a>.  Sub-Registry "att-field (media-level)"</span>

   "resource" value of the "att-field" parameter

   Contact name, email address, and telephone number:  Sarvi Shanmugham,
      sarvi@cisco.com, +1.408.902.3875

   Attribute name (as it will appear in SDP):  resource

   Long-form attribute name in English:  MRCPv2 resource type

   Type of attribute:  media-level

   Subject to charset attribute?  no

   Explanation of attribute:  See <a href="rfc6787.html#section-4.2">Section 4.2 of RFC 6787</a> for
      description and examples.

   Specification of appropriate attribute values:  See section
      <a href="rfc6787.html#section-13.1.1">Section 13.1.1 of RFC 6787</a>.

   "channel" value of the "att-field" parameter

   Contact name, email address, and telephone number:  Sarvi Shanmugham,
      sarvi@cisco.com, +1.408.902.3875

   Attribute name (as it will appear in SDP):  channel

   Long-form attribute name in English:  MRCPv2 resource channel
      identifier

   Type of attribute:  media-level

   Subject to charset attribute?  no

   Explanation of attribute:  See <a href="rfc6787.html#section-4.2">Section 4.2 of RFC 6787</a> for
      description and examples.

   Specification of appropriate attribute values:  See <a href="#section-4.2">Section 4.2</a> and
      the "channel-id" ABNF production rules of <a href="rfc6787.html">RFC 6787</a>.

   "cmid" value of the "att-field" parameter

   Contact name, email address, and telephone number:  Sarvi Shanmugham,
      sarvi@cisco.com, +1.408.902.3875




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 182]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-183" id="page-183" name="page-183"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Attribute name (as it will appear in SDP):  cmid

   Long-form attribute name in English:  MRCPv2 resource channel media
      identifier

   Type of attribute:  media-level

   Subject to charset attribute?  no

   Explanation of attribute:  See <a href="rfc6787.html#section-4.4">Section 4.4 of RFC 6787</a> for
      description and examples.

   Specification of appropriate attribute values:  See <a href="#section-4.4">Section 4.4</a> and
      the "cmid-attribute" ABNF production rules of <a href="rfc6787.html">RFC 6787</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20Examples"></a><a class="selflink" href="#section-14" name="section-14">14</a>.  Examples</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/14.1.%20%20Message%20Flow"></a><a class="selflink" href="#section-14.1" name="section-14.1">14.1</a>.  Message Flow</span>

   The following is an example of a typical MRCPv2 session of speech
   synthesis and recognition between a client and a server.  Although
   the SDP "s=" attribute in these examples has a text description value
   to assist in understanding the examples, please keep in mind that <a href="rfc3264.html">RFC</a>
   <a href="rfc3264.html">3264</a> [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>] recommends that messages actually put on the wire use
   a space or a dash.

   The figure below illustrates opening a session to the MRCPv2 server.
   This exchange does not allocate a resource or setup media.  It simply
   establishes a SIP session with the MRCPv2 server.

   C-&gt;S:
          INVITE sip:mresources@example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg1
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323123 INVITE
          Contact:&lt;sip:sarvi@client.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=sarvi 2614933546 2614933546 IN IP4 192.0.2.12
          s=Set up MRCPv2 control and audio
          i=Initial contact
          c=IN IP4 192.0.2.12



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 183]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-184" id="page-184" name="page-184"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:
          SIP/2.0 200 OK
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg1;received=192.0.32.10
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323123 INVITE
          Contact:&lt;sip:mresources@server.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=- 3000000001 3000000001 IN IP4 192.0.2.11
          s=Set up MRCPv2 control and audio
          i=Initial contact
          c=IN IP4 192.0.2.11

   C-&gt;S:
          ACK sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg2
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323123 ACK
          Content-Length:0

   The client requests the server to create a synthesizer resource
   control channel to do speech synthesis.  This also adds a media
   stream to send the generated speech.  Note that, in this example, the
   client requests a new MRCPv2 TCP stream between the client and the
   server.  In the following requests, the client will ask to use the
   existing connection.

   C-&gt;S:
          INVITE sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg3
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323124 INVITE
          Contact:&lt;sip:sarvi@client.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 184]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-185" id="page-185" name="page-185"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


          v=0
          o=sarvi 2614933546 2614933547 IN IP4 192.0.2.12
          s=Set up MRCPv2 control and audio
          i=Add TCP channel, synthesizer and one-way audio
          c=IN IP4 192.0.2.12
          t=0 0
          m=application 9  TCP/MRCPv2 1
          a=setup:active
          a=connection:new
          a=resource:speechsynth
          a=cmid:1
          m=audio 49170 RTP/AVP 0 96
          a=rtpmap:0 pcmu/8000
          a=rtpmap:96 telephone-event/8000
          a=fmtp:96 0-15
          a=recvonly
          a=mid:1


   S-&gt;C:
          SIP/2.0 200 OK
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg3;received=192.0.32.10
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323124 INVITE
          Contact:&lt;sip:mresources@server.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=- 3000000001 3000000002 IN IP4 192.0.2.11
          s=Set up MRCPv2 control and audio
          i=Add TCP channel, synthesizer and one-way audio
          c=IN IP4 192.0.2.11
          t=0 0
          m=application 32416  TCP/MRCPv2 1
          a=setup:passive
          a=connection:new
          a=channel:32AECB23433801@speechsynth
          a=cmid:1
          m=audio 48260 RTP/AVP 0
          a=rtpmap:0 pcmu/8000
          a=sendonly
          a=mid:1





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 185]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-186" id="page-186" name="page-186"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S:
          ACK sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg4
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323124 ACK
          Content-Length:0

   This exchange allocates an additional resource control channel for a
   recognizer.  Since a recognizer would need to receive an audio stream
   for recognition, this interaction also updates the audio stream to
   sendrecv, making it a two-way audio stream.

   C-&gt;S:
          INVITE sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg5
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323125 INVITE
          Contact:&lt;sip:sarvi@client.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=sarvi 2614933546 2614933548 IN IP4 192.0.2.12
          s=Set up MRCPv2 control and audio
          i=Add recognizer and duplex the audio
          c=IN IP4 192.0.2.12
          t=0 0
          m=application 9  TCP/MRCPv2 1
          a=setup:active
          a=connection:existing
          a=resource:speechsynth
          a=cmid:1
          m=audio 49170 RTP/AVP 0 96
          a=rtpmap:0 pcmu/8000
          a=rtpmap:96 telephone-event/8000
          a=fmtp:96 0-15
          a=recvonly
          a=mid:1
          m=application 9  TCP/MRCPv2 1
          a=setup:active



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 186]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-187" id="page-187" name="page-187"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


          a=connection:existing
          a=resource:speechrecog
          a=cmid:2
          m=audio 49180 RTP/AVP 0 96
          a=rtpmap:0 pcmu/8000
          a=rtpmap:96 telephone-event/8000
          a=fmtp:96 0-15
          a=sendonly
          a=mid:2


   S-&gt;C:
          SIP/2.0 200 OK
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg5;received=192.0.32.10
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323125 INVITE
          Contact:&lt;sip:mresources@server.example.com&gt;
          Content-Type:application/sdp
          Content-Length:...

          v=0
          o=- 3000000001 3000000003 IN IP4 192.0.2.11
          s=Set up MRCPv2 control and audio
          i=Add recognizer and duplex the audio
          c=IN IP4 192.0.2.11
          t=0 0
          m=application 32416  TCP/MRCPv2 1
          a=channel:32AECB23433801@speechsynth
          a=cmid:1
          m=audio 48260 RTP/AVP 0
          a=rtpmap:0 pcmu/8000
          a=sendonly
          a=mid:1
          m=application 32416  TCP/MRCPv2 1
          a=channel:32AECB23433801@speechrecog
          a=cmid:2
          m=audio 48260 RTP/AVP 0
          a=rtpmap:0 pcmu/8000
          a=rtpmap:96 telephone-event/8000
          a=fmtp:96 0-15
          a=recvonly
          a=mid:2






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 187]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-188" id="page-188" name="page-188"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   C-&gt;S:
          ACK sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg6
          Max-Forwards:6
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          Call-ID:a84b4c76e66710
          CSeq:323125 ACK
          Content-Length:0

   A MRCPv2 SPEAK request initiates speech.

   C-&gt;S:
          MRCP/2.0 ... SPEAK 543257
          Channel-Identifier:32AECB23433801@speechsynth
          Kill-On-Barge-In:false
          Voice-gender:neutral
          Voice-age:25
          Prosody-volume:medium
          Content-Type:application/ssml+xml
          Content-Length:...

          &lt;?xml version="1.0"?&gt;
          &lt;speak version="1.0"
                 xmlns="http://www.w3.org/2001/10/synthesis"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                 <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                 xml:lang="en-US"&gt;
            &lt;p&gt;
              &lt;s&gt;You have 4 new messages.&lt;/s&gt;
              &lt;s&gt;The first is from Stephanie Williams
                &lt;mark name="Stephanie"/&gt;
                and arrived at &lt;break/&gt;
                &lt;say-as interpret-as="vxml:time"&gt;0345p&lt;/say-as&gt;.&lt;/s&gt;
              &lt;s&gt;The subject is &lt;prosody
                 rate="-20%"&gt;ski trip&lt;/prosody&gt;&lt;/s&gt;
            &lt;/p&gt;
          &lt;/speak&gt;

   S-&gt;C:
          MRCP/2.0 ... 543257 200 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speechsynth
          Speech-Marker:timestamp=857205015059






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 188]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-189" id="page-189" name="page-189"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   The synthesizer hits the special marker in the message to be spoken
   and faithfully informs the client of the event.

   S-&gt;C:  MRCP/2.0 ... SPEECH-MARKER 543257 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speechsynth
          Speech-Marker:timestamp=857206027059;Stephanie

   The synthesizer finishes with the SPEAK request.

   S-&gt;C:  MRCP/2.0 ... SPEAK-COMPLETE 543257 COMPLETE
          Channel-Identifier:32AECB23433801@speechsynth
          Speech-Marker:timestamp=857207685213;Stephanie


   The recognizer is issued a request to listen for the customer
   choices.

   C-&gt;S:  MRCP/2.0 ... RECOGNIZE 543258
          Channel-Identifier:32AECB23433801@speechrecog
          Content-Type:application/srgs+xml
          Content-Length:...

          &lt;?xml version="1.0"?&gt;
          &lt;!-- the default grammar language is US English --&gt;
          &lt;grammar xmlns="http://www.w3.org/2001/06/grammar"
                   xml:lang="en-US" version="1.0" root="request"&gt;
          &lt;!-- single language attachment to a rule expansion --&gt;
            &lt;rule id="request"&gt;
              Can I speak to
              &lt;one-of xml:lang="fr-CA"&gt;
                &lt;item&gt;Michel Tremblay&lt;/item&gt;
                &lt;item&gt;Andre Roy&lt;/item&gt;
              &lt;/one-of&gt;
            &lt;/rule&gt;
          &lt;/grammar&gt;


   S-&gt;C:  MRCP/2.0 ... 543258 200 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speechrecog

   The client issues the next MRCPv2 SPEAK method.

   C-&gt;S:  MRCP/2.0 ... SPEAK 543259
          Channel-Identifier:32AECB23433801@speechsynth
          Kill-On-Barge-In:true
          Content-Type:application/ssml+xml
          Content-Length:...




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 189]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-190" id="page-190" name="page-190"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


          &lt;?xml version="1.0"?&gt;
          &lt;speak version="1.0"
                 xmlns="http://www.w3.org/2001/10/synthesis"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://www.w3.org/2001/10/synthesis
                 <a href="http://www.w3.org/TR/speech-synthesis/synthesis.xsd">http://www.w3.org/TR/speech-synthesis/synthesis.xsd</a>"
                 xml:lang="en-US"&gt;
            &lt;p&gt;
              &lt;s&gt;Welcome to ABC corporation.&lt;/s&gt;
              &lt;s&gt;Who would you like to talk to?&lt;/s&gt;
            &lt;/p&gt;
          &lt;/speak&gt;

   S-&gt;C:  MRCP/2.0 ... 543259 200 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speechsynth
          Speech-Marker:timestamp=857207696314

   This next section of this ongoing example demonstrates how kill-on-
   barge-in support works.  Since this last SPEAK request had Kill-On-
   Barge-In set to "true", when the recognizer (the server) generated
   the START-OF-INPUT event while a SPEAK was active, the client
   immediately issued a BARGE-IN-OCCURRED method to the synthesizer
   resource.  The speech synthesizer then terminated playback and
   notified the client.  The completion-cause code provided the
   indication that this was a kill-on-barge-in interruption rather than
   a normal completion.

   Note that, since the recognition and synthesizer resources are in the
   same session on the same server, to obtain a faster response the
   server might have internally relayed the start-of-input condition to
   the synthesizer directly, before receiving the expected BARGE-IN-
   OCCURRED event.  However, any such communication is outside the scope
   of MRCPv2.

   S-&gt;C:  MRCP/2.0 ... START-OF-INPUT 543258 IN-PROGRESS
          Channel-Identifier:32AECB23433801@speechrecog
          Proxy-Sync-Id:987654321


   C-&gt;S:  MRCP/2.0 ... BARGE-IN-OCCURRED 543259
          Channel-Identifier:32AECB23433801@speechsynth
          Proxy-Sync-Id:987654321


   S-&gt;C:  MRCP/2.0 ... 543259 200 COMPLETE
          Channel-Identifier:32AECB23433801@speechsynth
          Active-Request-Id-List:543258
          Speech-Marker:timestamp=857206096314



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 190]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-191" id="page-191" name="page-191"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   S-&gt;C:  MRCP/2.0 ... SPEAK-COMPLETE 543259 COMPLETE
          Channel-Identifier:32AECB23433801@speechsynth
          Completion-Cause:001 barge-in
          Speech-Marker:timestamp=857207685213


   The recognizer resource matched the spoken stream to a grammar and
   generated results.  The result of the recognition is returned by the
   server as part of the RECOGNITION-COMPLETE event.

   S-&gt;C:  MRCP/2.0 ... RECOGNITION-COMPLETE 543258 COMPLETE
          Channel-Identifier:32AECB23433801@speechrecog
          Completion-Cause:000 success
          Waveform-URI:&lt;<a href="http://web.media.com/session123/audio.wav">http://web.media.com/session123/audio.wav</a>&gt;;
                       size=423523;duration=25432
          Content-Type:application/nlsml+xml
          Content-Length:...

          &lt;?xml version="1.0"?&gt;
          &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
                  xmlns:ex="http://www.example.com/example"
                  grammar="session:request1@form-level.store"&gt;
              &lt;interpretation&gt;
                  &lt;instance name="Person"&gt;
                      &lt;ex:Person&gt;
                          &lt;ex:Name&gt; Andre Roy &lt;/ex:Name&gt;
                      &lt;/ex:Person&gt;
                  &lt;/instance&gt;
                  &lt;input&gt;   may I speak to Andre Roy &lt;/input&gt;
              &lt;/interpretation&gt;
          &lt;/result&gt;

   Since the client was now finished with the session, including all
   resources, it issued a SIP BYE request to close the SIP session.
   This caused all control channels and resources allocated under the
   session to be deallocated.

   C-&gt;S:  BYE sip:mresources@server.example.com SIP/2.0
          Via:SIP/2.0/TCP client.atlanta.example.com:5060;
           branch=z9hG4bK74bg7
          Max-Forwards:6
          From:Sarvi &lt;sip:sarvi@example.com&gt;;tag=1928301774
          To:MediaServer &lt;sip:mresources@example.com&gt;;tag=62784
          Call-ID:a84b4c76e66710
          CSeq:323126 BYE
          Content-Length:0





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 191]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-192" id="page-192" name="page-192"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/14.2.%20%20Recognition%20Result%20Examples"></a><a class="selflink" href="#section-14.2" name="section-14.2">14.2</a>.  Recognition Result Examples</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.1.%20%20Simple%20ASR%20Ambiguity"></a><a class="selflink" href="#section-14.2.1" name="section-14.2.1">14.2.1</a>.  Simple ASR Ambiguity</span>

   System: To which city will you be traveling?
   User:   I want to go to Pittsburgh.

   &lt;?xml version="1.0"?&gt;
   &lt;result xmlns="urn:ietf:params:xml:ns:mrcpv2"
           xmlns:ex="http://www.example.com/example"
           grammar="http://www.example.com/flight"&gt;
     &lt;interpretation confidence="0.6"&gt;
        &lt;instance&gt;
           &lt;ex:airline&gt;
              &lt;ex:to_city&gt;Pittsburgh&lt;/ex:to_city&gt;
           &lt;ex:airline&gt;
        &lt;instance&gt;
        &lt;input mode="speech"&gt;
           I want to go to Pittsburgh
        &lt;/input&gt;
     &lt;/interpretation&gt;
     &lt;interpretation confidence="0.4"
        &lt;instance&gt;
           &lt;ex:airline&gt;
              &lt;ex:to_city&gt;Stockholm&lt;/ex:to_city&gt;
           &lt;/ex:airline&gt;
        &lt;/instance&gt;
        &lt;input&gt;I want to go to Stockholm&lt;/input&gt;
     &lt;/interpretation&gt;
   &lt;/result&gt;

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.2.%20%20Mixed%20Initiative"></a><a class="selflink" href="#section-14.2.2" name="section-14.2.2">14.2.2</a>.  Mixed Initiative</span>

   System: What would you like?
   User:   I would like 2 pizzas, one with pepperoni and cheese,
           one with sausage and a bottle of coke, to go.

   This example includes an order object which in turn contains objects
   named "food_item", "drink_item", and "delivery_method".  The
   representation assumes there are no ambiguities in the speech or
   natural language processing.  Note that this representation also
   assumes some level of intra-sentential anaphora resolution, i.e., to
   resolve the two "one"s as "pizza".

   &lt;?xml version="1.0"?&gt;
   &lt;nl:result xmlns:nl="urn:ietf:params:xml:ns:mrcpv2"
              xmlns="http://www.example.com/example"
              grammar="http://www.example.com/foodorder"&gt;



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 192]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-193" id="page-193" name="page-193"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


     &lt;nl:interpretation confidence="1.0" &gt;
        &lt;nl:instance&gt;
         &lt;order&gt;
           &lt;food_item confidence="1.0"&gt;
             &lt;pizza&gt;
               &lt;ingredients confidence="1.0"&gt;
                 pepperoni
               &lt;/ingredients&gt;
               &lt;ingredients confidence="1.0"&gt;
                 cheese
               &lt;/ingredients&gt;
             &lt;/pizza&gt;
             &lt;pizza&gt;
               &lt;ingredients&gt;sausage&lt;/ingredients&gt;
             &lt;/pizza&gt;
           &lt;/food_item&gt;
           &lt;drink_item confidence="1.0"&gt;
             &lt;size&gt;2-liter&lt;/size&gt;
           &lt;/drink_item&gt;
           &lt;delivery_method&gt;to go&lt;/delivery_method&gt;
         &lt;/order&gt;
       &lt;/nl:instance&gt;
       &lt;nl:input mode="speech"&gt;I would like 2 pizzas,
            one with pepperoni and cheese, one with sausage
            and a bottle of coke, to go.
       &lt;/nl:input&gt;
     &lt;/nl:interpretation&gt;
   &lt;/nl:result&gt;

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.3.%20%20DTMF%20Input"></a><a class="selflink" href="#section-14.2.3" name="section-14.2.3">14.2.3</a>.  DTMF Input</span>

   A combination of DTMF input and speech is represented using nested
   input elements.  For example:
   User: My pin is (dtmf 1 2 3 4)

   &lt;input&gt;
     &lt;input mode="speech" confidence ="1.0"
        timestamp-start="2000-04-03T0:00:00"
        timestamp-end="2000-04-03T0:00:01.5"&gt;My pin is
     &lt;/input&gt;
     &lt;input mode="dtmf" confidence ="1.0"
        timestamp-start="2000-04-03T0:00:01.5"
        timestamp-end="2000-04-03T0:00:02.0"&gt;1 2 3 4
     &lt;/input&gt;
   &lt;/input&gt;






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 193]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-194" id="page-194" name="page-194"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Note that grammars that recognize mixtures of speech and DTMF are not
   currently possible in SRGS; however, this representation might be
   needed for other applications of NLSML, and this mixture capability
   might be introduced in future versions of SRGS.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.4.%20%20Interpreting%20Meta-Dialog%20and%20Meta-Task%20Utterances"></a><a class="selflink" href="#section-14.2.4" name="section-14.2.4">14.2.4</a>.  Interpreting Meta-Dialog and Meta-Task Utterances</span>

   Natural language communication makes use of meta-dialog and meta-task
   utterances.  This specification is flexible enough so that meta-
   utterances can be represented on an application-specific basis
   without requiring other standard markup.

   Here are two examples of how meta-task and meta-dialog utterances
   might be represented.

System: What toppings do you want on your pizza?
User:   What toppings do you have?

&lt;interpretation grammar="http://www.example.com/toppings"&gt;
   &lt;instance&gt;
      &lt;question&gt;
         &lt;questioned_item&gt;toppings&lt;questioned_item&gt;
         &lt;questioned_property&gt;
          availability
         &lt;/questioned_property&gt;
      &lt;/question&gt;
   &lt;/instance&gt;
   &lt;input mode="speech"&gt;
     what toppings do you have?
   &lt;/input&gt;
&lt;/interpretation&gt;

User:   slow down.

&lt;interpretation grammar="http://www.example.com/generalCommandsGrammar"&gt;
   &lt;instance&gt;
    &lt;command&gt;
       &lt;action&gt;reduce speech rate&lt;/action&gt;
       &lt;doer&gt;system&lt;/doer&gt;
    &lt;/command&gt;
   &lt;/instance&gt;
  &lt;input mode="speech"&gt;slow down&lt;/input&gt;
&lt;/interpretation&gt;








<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 194]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-195" id="page-195" name="page-195"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.5.%20%20Anaphora%20and%20Deixis"></a><a class="selflink" href="#section-14.2.5" name="section-14.2.5">14.2.5</a>.  Anaphora and Deixis</span>

   This specification can be used on an application-specific basis to
   represent utterances that contain unresolved anaphoric and deictic
   references.  Anaphoric references, which include pronouns and
   definite noun phrases that refer to something that was mentioned in
   the preceding linguistic context, and deictic references, which refer
   to something that is present in the non-linguistic context, present
   similar problems in that there may not be sufficient unambiguous
   linguistic context to determine what their exact role in the
   interpretation should be.  In order to represent unresolved anaphora
   and deixis using this specification, one strategy would be for the
   developer to define a more surface-oriented representation that
   leaves the specific details of the interpretation of the reference
   open.  (This assumes that a later component is responsible for
   actually resolving the reference).

   Example: (ignoring the issue of representing the input from the
             pointing gesture.)

   System: What do you want to drink?
   User:   I want this. (clicks on picture of large root beer.)

   &lt;?xml version="1.0"?&gt;
   &lt;nl:result xmlns:nl="urn:ietf:params:xml:ns:mrcpv2"
           xmlns="http://www.example.com/example"
           grammar="http://www.example.com/beverages.grxml"&gt;
      &lt;nl:interpretation&gt;
         &lt;nl:instance&gt;
          &lt;doer&gt;I&lt;/doer&gt;
          &lt;action&gt;want&lt;/action&gt;
          &lt;object&gt;this&lt;/object&gt;
         &lt;/nl:instance&gt;
         &lt;nl:input mode="speech"&gt;I want this&lt;/nl:input&gt;
      &lt;/nl:interpretation&gt;
   &lt;/nl:result&gt;

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.6.%20%20Distinguishing%20Individual%20Items%20from%20Sets%20with%20One%20Member"></a><a class="selflink" href="#section-14.2.6" name="section-14.2.6">14.2.6</a>.  Distinguishing Individual Items from Sets with One Member</span>

   For programming convenience, it is useful to be able to distinguish
   between individual items and sets containing one item in the XML
   representation of semantic results.  For example, a pizza order might
   consist of exactly one pizza, but a pizza might contain zero or more
   toppings.  Since there is no standard way of marking this distinction
   directly in XML, in the current framework, the developer is free to
   adopt any conventions that would convey this information in the XML
   markup.  One strategy would be for the developer to wrap the set of
   items in a grouping element, as in the following example.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 195]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-196" id="page-196" name="page-196"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   &lt;order&gt;
      &lt;pizza&gt;
         &lt;topping-group&gt;
            &lt;topping&gt;mushrooms&lt;/topping&gt;
         &lt;/topping-group&gt;
      &lt;/pizza&gt;
      &lt;drink&gt;coke&lt;/drink&gt;
   &lt;/order&gt;

   In this example, the programmer can assume that there is supposed to
   be exactly one pizza and one drink in the order, but the fact that
   there is only one topping is an accident of this particular pizza
   order.

   Note that the client controls both the grammar and the semantics to
   be returned upon grammar matches, so the user of MRCPv2 is fully
   empowered to cause results to be returned in NLSML in such a way that
   the interpretation is clear to that user.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/14.2.7.%20%20Extensibility"></a><a class="selflink" href="#section-14.2.7" name="section-14.2.7">14.2.7</a>.  Extensibility</span>

   Extensibility in NLSML is provided via result content flexibility, as
   described in the discussions of meta-utterances and anaphora.  NLSML
   can easily be used in sophisticated systems to convey application-
   specific information that more basic systems would not make use of,
   for example, defining speech acts.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/15.%20%20ABNF%20Normative%20Definition"></a><a class="selflink" href="#section-15" name="section-15">15</a>.  ABNF Normative Definition</span>

   The following productions make use of the core rules defined in
   Section B.1 of <a href="rfc5234.html">RFC 5234</a> [<a href="rfc5234.html" title='"Augmented BNF for Syntax Specifications: ABNF"'>RFC5234</a>].

LWS    =    [*WSP CRLF] 1*WSP ; linear whitespace

SWS    =    [LWS] ; sep whitespace

UTF8-NONASCII    =    %xC0-DF 1UTF8-CONT
                 /    %xE0-EF 2UTF8-CONT
                 /    %xF0-F7 3UTF8-CONT
                 /    %xF8-FB 4UTF8-CONT
                 /    %xFC-FD 5UTF8-CONT

UTF8-CONT        =    %x80-BF
UTFCHAR          =    %x21-7E
                 /    UTF8-NONASCII
param            =    *pchar





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 196]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-197" id="page-197" name="page-197"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


quoted-string    =    SWS DQUOTE *(qdtext / quoted-pair )
                      DQUOTE

qdtext           =    LWS / %x21 / %x23-5B / %x5D-7E
                 /    UTF8-NONASCII

quoted-pair      =    "\" (%x00-09 / %x0B-0C / %x0E-7F)

token            =    1*(alphanum / "-" / "." / "!" / "%" / "*"
                      / "_" / "+" / "`" / "'" / "~" )

reserved         =    ";" / "/" / "?" / ":" / "@" / "&amp;" / "="
                      / "+" / "$" / ","

mark             =    "-" / "_" / "." / "!" / "~" / "*" / "'"
                 /    "(" / ")"

unreserved       =    alphanum / mark

pchar            =    unreserved / escaped
                 /    ":" / "@" / "&amp;" / "=" / "+" / "$" / ","

alphanum         =    ALPHA / DIGIT

BOOLEAN          =    "true" / "false"

FLOAT            =    *DIGIT ["." *DIGIT]

escaped          =    "%" HEXDIG HEXDIG

fragment         =    *uric

uri              =    [ absoluteURI / relativeURI ]
                      [ "#" fragment ]

absoluteURI      =    scheme ":" ( hier-part / opaque-part )

relativeURI      =    ( net-path / abs-path / rel-path )
                      [ "?" query ]

hier-part        =    ( net-path / abs-path ) [ "?" query ]

net-path         =    "//" authority [ abs-path ]

abs-path         =    "/" path-segments

rel-path         =    rel-segment [ abs-path ]




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 197]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-198" id="page-198" name="page-198"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


rel-segment      =    1*( unreserved / escaped / ";" / "@"
                 /    "&amp;" / "=" / "+" / "$" / "," )

opaque-part      =    uric-no-slash *uric

uric             =    reserved / unreserved / escaped

uric-no-slash    =    unreserved / escaped / ";" / "?" / ":"
                      / "@" / "&amp;" / "=" / "+" / "$" / ","

path-segments    =    segment *( "/" segment )

segment          =    *pchar *( ";" param )

scheme           =    ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority        =    srvr / reg-name

srvr             =    [ [ userinfo "@" ] hostport ]

reg-name         =    1*( unreserved / escaped / "$" / ","
                 /     ";" / ":" / "@" / "&amp;" / "=" / "+" )

query            =    *uric

userinfo         =    ( user ) [ ":" password ] "@"

user             =    1*( unreserved / escaped
                 /    user-unreserved )

user-unreserved  =    "&amp;" / "=" / "+" / "$" / "," / ";"
                 /    "?" / "/"

password         =    *( unreserved / escaped
                 /    "&amp;" / "=" / "+" / "$" / "," )

hostport         =    host [ ":" port ]

host             =    hostname / IPv4address / IPv6reference

hostname         =    *( domainlabel "." ) toplabel [ "." ]

domainlabel      =    alphanum / alphanum *( alphanum / "-" )
                      alphanum

toplabel         =    ALPHA / ALPHA *( alphanum / "-" )
                      alphanum




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 198]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-199" id="page-199" name="page-199"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


IPv4address      =    1*3DIGIT "." 1*3DIGIT "." 1*3DIGIT "."
                      1*3DIGIT

IPv6reference    =    "[" IPv6address "]"

IPv6address      =    hexpart [ ":" IPv4address ]

hexpart          =    hexseq / hexseq "::" [ hexseq ] / "::"
                      [ hexseq ]

hexseq           =    hex4 *( ":" hex4)

hex4             =    1*4HEXDIG

port             =    1*19DIGIT

; generic-message is the top-level rule

generic-message  =    start-line message-header CRLF
                      [ message-body ]

message-body     =    *OCTET

start-line       =    request-line / response-line / event-line

request-line     =    mrcp-version SP message-length SP method-name
                      SP request-id CRLF

response-line    =    mrcp-version SP message-length SP request-id
                      SP status-code SP request-state CRLF

event-line       =    mrcp-version SP message-length SP event-name
                      SP request-id SP request-state CRLF

method-name      =    generic-method
                 /    synthesizer-method
                 /    recognizer-method
                 /    recorder-method
                 /    verifier-method

generic-method   =    "SET-PARAMS"
                 /    "GET-PARAMS"

request-state    =    "COMPLETE"
                 /    "IN-PROGRESS"
                 /    "PENDING"





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 199]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-200" id="page-200" name="page-200"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


event-name       =    synthesizer-event
                 /    recognizer-event
                 /    recorder-event
                 /    verifier-event

message-header   =  1*(generic-header / resource-header / generic-field)

generic-field    =    field-name ":" [ field-value ]
field-name       =    token
field-value      =    *LWS field-content *( CRLF 1*LWS field-content)
field-content    =    &lt;the OCTETs making up the field-value
                      and consisting of either *TEXT or combinations
                      of token, separators, and quoted-string&gt;

resource-header  =    synthesizer-header
                 /    recognizer-header
                 /    recorder-header
                 /    verifier-header

generic-header   =    channel-identifier
                 /    accept
                 /    active-request-id-list
                 /    proxy-sync-id
                 /    accept-charset
                 /    content-type
                 /    content-id
                 /    content-base
                 /    content-encoding
                 /    content-location
                 /    content-length
                 /    fetch-timeout
                 /    cache-control
                 /    logging-tag
                 /    set-cookie
                 /    vendor-specific

; -- content-id is as defined in <a href="rfc2392.html">RFC 2392</a>, <a href="rfc2046.html">RFC 2046</a> and <a href="rfc5322.html">RFC 5322</a>
; -- accept and accept-charset are as defined in <a href="rfc2616.html">RFC 2616</a>

mrcp-version     =    "MRCP" "/" 1*2DIGIT "." 1*2DIGIT

message-length   =    1*19DIGIT

request-id       =    1*10DIGIT

status-code      =    3DIGIT





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 200]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-201" id="page-201" name="page-201"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


channel-identifier =  "Channel-Identifier" ":"
                      channel-id CRLF

channel-id       =    1*alphanum "@" 1*alphanum

active-request-id-list = "Active-Request-Id-List" ":"
                         request-id *("," request-id) CRLF

proxy-sync-id    =    "Proxy-Sync-Id" ":" 1*VCHAR CRLF

content-base     =    "Content-Base" ":" absoluteURI CRLF

content-length   =    "Content-Length" ":" 1*19DIGIT CRLF

content-type     =    "Content-Type" ":" media-type-value CRLF

media-type-value =    type "/" subtype *( ";" parameter )

type             =    token

subtype          =    token

parameter        =    attribute "=" value

attribute        =    token

value            =    token / quoted-string

content-encoding =    "Content-Encoding" ":"
                      *WSP content-coding
                      *(*WSP "," *WSP content-coding *WSP )
                      CRLF

content-coding   =    token

content-location =    "Content-Location" ":"
                      ( absoluteURI / relativeURI )  CRLF

cache-control    =    "Cache-Control" ":"
                      [*WSP cache-directive
                      *( *WSP "," *WSP cache-directive *WSP )]
                      CRLF

fetch-timeout    =    "Fetch-Timeout" ":" 1*19DIGIT CRLF

cache-directive  =    "max-age" "=" delta-seconds
                 /    "max-stale" ["=" delta-seconds ]
                 /    "min-fresh" "=" delta-seconds



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 201]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-202" id="page-202" name="page-202"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


delta-seconds    =    1*19DIGIT

logging-tag      =    "Logging-Tag" ":" 1*UTFCHAR CRLF

vendor-specific  =    "Vendor-Specific-Parameters" ":"
                      [vendor-specific-av-pair
                      *(";" vendor-specific-av-pair)] CRLF

vendor-specific-av-pair = vendor-av-pair-name "="
                          value

vendor-av-pair-name     = 1*UTFCHAR

set-cookie        = "Set-Cookie:" SP set-cookie-string
set-cookie-string = cookie-pair *( ";" SP cookie-av )
cookie-pair       = cookie-name "=" cookie-value
cookie-name       = token
cookie-value      = *cookie-octet / ( DQUOTE *cookie-octet DQUOTE )
cookie-octet      = %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E
token             = &lt;token, defined in <a href="rfc2616.html#section-2.2">[RFC2616], Section 2.2</a>&gt;

cookie-av         = expires-av / max-age-av / domain-av /
                     path-av / secure-av / httponly-av /
                     extension-av / age-av
expires-av        = "Expires=" sane-cookie-date
sane-cookie-date  = &lt;<a href="rfc1123.html">rfc1123</a>-date, defined in <a href="rfc2616.html#section-3.3.1">[RFC2616], Section 3.3.1</a>&gt;
max-age-av        = "Max-Age=" non-zero-digit *DIGIT
non-zero-digit    = %x31-39
domain-av         = "Domain=" domain-value
domain-value      = &lt;subdomain&gt;
path-av           = "Path=" path-value
path-value        = &lt;any CHAR except CTLs or ";"&gt;
secure-av         = "Secure"
httponly-av       = "HttpOnly"
extension-av      = &lt;any CHAR except CTLs or ";"&gt;
age-av            = "Age=" delta-seconds

; Synthesizer ABNF

synthesizer-method    =    "SPEAK"
                      /    "STOP"
                      /    "PAUSE"
                      /    "RESUME"
                      /    "BARGE-IN-OCCURRED"
                      /    "CONTROL"
                      /    "DEFINE-LEXICON"





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 202]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-203" id="page-203" name="page-203"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


synthesizer-event     =    "SPEECH-MARKER"
                      /    "SPEAK-COMPLETE"

synthesizer-header    =    jump-size
                      /    kill-on-barge-in
                      /    speaker-profile
                      /    completion-cause
                      /    completion-reason
                      /    voice-parameter
                      /    prosody-parameter
                      /    speech-marker
                      /    speech-language
                      /    fetch-hint
                      /    audio-fetch-hint
                      /    failed-uri
                      /    failed-uri-cause
                      /    speak-restart
                      /    speak-length
                      /    load-lexicon
                      /    lexicon-search-order

jump-size             =    "Jump-Size" ":" speech-length-value CRLF

speech-length-value   =    numeric-speech-length
                      /    text-speech-length

text-speech-length    =    1*UTFCHAR SP "Tag"

numeric-speech-length =    ("+" / "-") positive-speech-length

positive-speech-length =   1*19DIGIT SP numeric-speech-unit

numeric-speech-unit   =    "Second"
                      /    "Word"
                      /    "Sentence"
                      /    "Paragraph"

kill-on-barge-in      =    "Kill-On-Barge-In" ":" BOOLEAN
                           CRLF

speaker-profile       =    "Speaker-Profile" ":" uri CRLF

completion-cause         =  "Completion-Cause" ":" cause-code SP
                            cause-name CRLF
cause-code               =  3DIGIT
cause-name               =  *VCHAR





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 203]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-204" id="page-204" name="page-204"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


completion-reason     =    "Completion-Reason" ":"
                           quoted-string CRLF

voice-parameter       =    voice-gender
                      /    voice-age
                      /    voice-variant
                      /    voice-name

voice-gender          =    "Voice-Gender:" voice-gender-value CRLF

voice-gender-value    =    "male"
                      /    "female"
                      /    "neutral"

voice-age             =    "Voice-Age:" 1*3DIGIT CRLF

voice-variant         =    "Voice-Variant:" 1*19DIGIT CRLF

voice-name            =    "Voice-Name:"
                           1*UTFCHAR *(1*WSP 1*UTFCHAR) CRLF

prosody-parameter     =    "Prosody-" prosody-param-name ":"
                           prosody-param-value CRLF

prosody-param-name    =    1*VCHAR

prosody-param-value   =    1*VCHAR

timestamp             =    "timestamp" "=" time-stamp-value

time-stamp-value      =    1*20DIGIT

speech-marker         =    "Speech-Marker" ":"
                           timestamp
                           [";" 1*(UTFCHAR / %x20)] CRLF

speech-language       =    "Speech-Language" ":" 1*VCHAR CRLF

fetch-hint            =    "Fetch-Hint" ":" ("prefetch" / "safe") CRLF

audio-fetch-hint      =    "Audio-Fetch-Hint" ":"
                          ("prefetch" / "safe" / "stream") CRLF

failed-uri            =    "Failed-URI" ":" absoluteURI CRLF

failed-uri-cause      =    "Failed-URI-Cause" ":" 1*UTFCHAR CRLF

speak-restart         =    "Speak-Restart" ":" BOOLEAN CRLF



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 204]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-205" id="page-205" name="page-205"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


speak-length          =    "Speak-Length" ":" positive-length-value
                           CRLF

positive-length-value   =  positive-speech-length
                        /  text-speech-length

load-lexicon          =    "Load-Lexicon" ":" BOOLEAN CRLF

lexicon-search-order  =    "Lexicon-Search-Order" ":"
          "&lt;" absoluteURI "&gt;" *(" " "&lt;" absoluteURI "&gt;") CRLF

; Recognizer ABNF

recognizer-method     =    recog-only-method
                      /    enrollment-method

recog-only-method     =    "DEFINE-GRAMMAR"
                      /    "RECOGNIZE"
                      /    "INTERPRET"
                      /    "GET-RESULT"
                      /    "START-INPUT-TIMERS"
                      /    "STOP"

enrollment-method     =    "START-PHRASE-ENROLLMENT"
                      /    "ENROLLMENT-ROLLBACK"
                      /    "END-PHRASE-ENROLLMENT"
                      /    "MODIFY-PHRASE"
                      /    "DELETE-PHRASE"

recognizer-event      =    "START-OF-INPUT"
                      /    "RECOGNITION-COMPLETE"
                      /    "INTERPRETATION-COMPLETE"

recognizer-header     =    recog-only-header
                      /    enrollment-header

recog-only-header     =    confidence-threshold
                      /    sensitivity-level
                      /    speed-vs-accuracy
                      /    n-best-list-length
                      /    input-type
                      /    no-input-timeout
                      /    recognition-timeout
                      /    waveform-uri
                      /    input-waveform-uri
                      /    completion-cause
                      /    completion-reason
                      /    recognizer-context-block



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 205]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-206" id="page-206" name="page-206"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


                      /    start-input-timers
                      /    speech-complete-timeout
                      /    speech-incomplete-timeout
                      /    dtmf-interdigit-timeout
                      /    dtmf-term-timeout
                      /    dtmf-term-char
                      /    failed-uri
                      /    failed-uri-cause
                      /    save-waveform
                      /    media-type
                      /    new-audio-channel
                      /    speech-language
                      /    ver-buffer-utterance
                      /    recognition-mode
                      /    cancel-if-queue
                      /    hotword-max-duration
                      /    hotword-min-duration
                      /    interpret-text
                      /    dtmf-buffer-time
                      /    clear-dtmf-buffer
                      /    early-no-match

enrollment-header     =    num-min-consistent-pronunciations
                      /    consistency-threshold
                      /    clash-threshold
                      /    personal-grammar-uri
                      /    enroll-utterance
                      /    phrase-id
                      /    phrase-nl
                      /    weight
                      /    save-best-waveform
                      /    new-phrase-id
                      /    confusable-phrases-uri
                      /    abort-phrase-enrollment

confidence-threshold  =    "Confidence-Threshold" ":"
                           FLOAT CRLF

sensitivity-level     =    "Sensitivity-Level" ":" FLOAT
                           CRLF

speed-vs-accuracy     =    "Speed-Vs-Accuracy" ":" FLOAT
                           CRLF

n-best-list-length    =    "N-Best-List-Length" ":" 1*19DIGIT
                           CRLF

input-type            =    "Input-Type" ":"  inputs CRLF



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 206]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-207" id="page-207" name="page-207"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


inputs                =    "speech" / "dtmf"

no-input-timeout      =    "No-Input-Timeout" ":" 1*19DIGIT
                           CRLF

recognition-timeout   =    "Recognition-Timeout" ":" 1*19DIGIT
                           CRLF

waveform-uri          =    "Waveform-URI" ":" ["&lt;" uri "&gt;"
                           ";" "size" "=" 1*19DIGIT
                           ";" "duration" "=" 1*19DIGIT] CRLF

recognizer-context-block = "Recognizer-Context-Block" ":"
                           [1*VCHAR] CRLF

start-input-timers    =    "Start-Input-Timers" ":"
                           BOOLEAN CRLF

speech-complete-timeout =  "Speech-Complete-Timeout" ":"
                           1*19DIGIT CRLF

speech-incomplete-timeout = "Speech-Incomplete-Timeout" ":"
                            1*19DIGIT CRLF

dtmf-interdigit-timeout = "DTMF-Interdigit-Timeout" ":"
                          1*19DIGIT CRLF

dtmf-term-timeout     =    "DTMF-Term-Timeout" ":" 1*19DIGIT
                           CRLF

dtmf-term-char        =    "DTMF-Term-Char" ":" VCHAR CRLF

save-waveform         =    "Save-Waveform" ":" BOOLEAN CRLF

new-audio-channel     =    "New-Audio-Channel" ":"
                           BOOLEAN CRLF

recognition-mode      =    "Recognition-Mode" ":"
                           "normal" / "hotword" CRLF

cancel-if-queue       =    "Cancel-If-Queue" ":" BOOLEAN CRLF

hotword-max-duration  =    "Hotword-Max-Duration" ":"
                           1*19DIGIT CRLF

hotword-min-duration  =    "Hotword-Min-Duration" ":"
                           1*19DIGIT CRLF




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 207]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-208" id="page-208" name="page-208"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


interpret-text        =    "Interpret-Text" ":" 1*VCHAR CRLF

dtmf-buffer-time      =    "DTMF-Buffer-Time" ":" 1*19DIGIT CRLF

clear-dtmf-buffer     =    "Clear-DTMF-Buffer" ":" BOOLEAN CRLF

early-no-match        =    "Early-No-Match" ":" BOOLEAN CRLF

num-min-consistent-pronunciations    =
    "Num-Min-Consistent-Pronunciations" ":" 1*19DIGIT CRLF

consistency-threshold =    "Consistency-Threshold" ":" FLOAT
                           CRLF

clash-threshold       =    "Clash-Threshold" ":" FLOAT CRLF

personal-grammar-uri  =    "Personal-Grammar-URI" ":" uri CRLF

enroll-utterance      =    "Enroll-Utterance" ":" BOOLEAN CRLF

phrase-id             =    "Phrase-ID" ":" 1*VCHAR CRLF

phrase-nl             =    "Phrase-NL" ":" 1*UTFCHAR CRLF

weight                =    "Weight" ":" FLOAT CRLF

save-best-waveform    =    "Save-Best-Waveform" ":"
                           BOOLEAN CRLF

new-phrase-id         =    "New-Phrase-ID" ":" 1*VCHAR CRLF

confusable-phrases-uri =   "Confusable-Phrases-URI" ":"
                           uri CRLF

abort-phrase-enrollment =  "Abort-Phrase-Enrollment" ":"
                           BOOLEAN CRLF

; Recorder ABNF

recorder-method       =    "RECORD"
                      /    "STOP"
                      /    "START-INPUT-TIMERS"

recorder-event        =    "START-OF-INPUT"
                      /    "RECORD-COMPLETE"






<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 208]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-209" id="page-209" name="page-209"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


recorder-header       =    sensitivity-level
                      /    no-input-timeout
                      /    completion-cause
                      /    completion-reason
                      /    failed-uri
                      /    failed-uri-cause
                      /    record-uri
                      /    media-type
                      /    max-time
                      /    trim-length
                      /    final-silence
                      /    capture-on-speech
                      /    ver-buffer-utterance
                      /    start-input-timers
                      /    new-audio-channel

record-uri            =    "Record-URI" ":" [ "&lt;" uri "&gt;"
                           ";" "size" "=" 1*19DIGIT
                           ";" "duration" "=" 1*19DIGIT] CRLF

media-type            =    "Media-Type" ":" media-type-value CRLF

max-time              =    "Max-Time" ":" 1*19DIGIT CRLF

trim-length           =    "Trim-Length" ":" 1*19DIGIT CRLF

final-silence         =    "Final-Silence" ":" 1*19DIGIT CRLF

capture-on-speech     =    "Capture-On-Speech " ":"
                           BOOLEAN CRLF

; Verifier ABNF

verifier-method       =    "START-SESSION"
                      /    "END-SESSION"
                      /    "QUERY-VOICEPRINT"
                      /    "DELETE-VOICEPRINT"
                      /    "VERIFY"
                      /    "VERIFY-FROM-BUFFER"
                      /    "VERIFY-ROLLBACK"
                      /    "STOP"
                      /    "CLEAR-BUFFER"
                      /    "START-INPUT-TIMERS"
                      /    "GET-INTERMEDIATE-RESULT"

verifier-event        =    "VERIFICATION-COMPLETE"
                      /    "START-OF-INPUT"




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 209]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-210" id="page-210" name="page-210"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


verifier-header       =    repository-uri
                      /    voiceprint-identifier
                      /    verification-mode
                      /    adapt-model
                      /    abort-model
                      /    min-verification-score
                      /    num-min-verification-phrases
                      /    num-max-verification-phrases
                      /    no-input-timeout
                      /    save-waveform
                      /    media-type
                      /    waveform-uri
                      /    voiceprint-exists
                      /    ver-buffer-utterance
                      /    input-waveform-uri
                      /    completion-cause
                      /    completion-reason
                      /    speech-complete-timeout
                      /    new-audio-channel
                      /    abort-verification
                      /    start-input-timers
                      /    input-type

repository-uri        =    "Repository-URI" ":" uri CRLF

voiceprint-identifier        =  "Voiceprint-Identifier" ":"
                                vid *[";" vid] CRLF
vid                          =  1*VCHAR ["." 1*VCHAR]

verification-mode     =    "Verification-Mode" ":"
                           verification-mode-string

verification-mode-string = "train" / "verify"

adapt-model           =    "Adapt-Model" ":" BOOLEAN CRLF

abort-model           =    "Abort-Model" ":" BOOLEAN CRLF

min-verification-score  =  "Min-Verification-Score" ":"
                           [ %x2D ] FLOAT CRLF

num-min-verification-phrases = "Num-Min-Verification-Phrases"
                               ":" 1*19DIGIT CRLF

num-max-verification-phrases = "Num-Max-Verification-Phrases"
                               ":" 1*19DIGIT CRLF





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 210]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-211" id="page-211" name="page-211"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


voiceprint-exists     =    "Voiceprint-Exists" ":"
                           BOOLEAN CRLF

ver-buffer-utterance  =    "Ver-Buffer-Utterance" ":"
                           BOOLEAN CRLF

input-waveform-uri    =    "Input-Waveform-URI" ":" uri CRLF

abort-verification    =    "Abort-Verification " ":"
                           BOOLEAN CRLF

   The following productions add a new SDP session-level attribute.  See
   Paragraph 5.

   cmid-attribute     =    "a=cmid:" identification-tag

   identification-tag =    token

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/16.%20%20XML%20Schemas"></a><a class="selflink" href="#section-16" name="section-16">16</a>.  XML Schemas</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/16.1.%20%20NLSML%20Schema%20Definition"></a><a class="selflink" href="#section-16.1" name="section-16.1">16.1</a>.  NLSML Schema Definition</span>

 &lt;?xml version="1.0" encoding="UTF-8"?&gt;
 &lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
             targetNamespace="urn:ietf:params:xml:ns:mrcpv2"
             xmlns="urn:ietf:params:xml:ns:mrcpv2"
             elementFormDefault="qualified"
             attributeFormDefault="unqualified" &gt;
   &lt;xs:annotation&gt;
     &lt;xs:documentation&gt; Natural Language Semantic Markup Schema
     &lt;/xs:documentation&gt;
   &lt;/xs:annotation&gt;
   &lt;xs:include schemaLocation="enrollment-schema.rng"/&gt;
   &lt;xs:include schemaLocation="verification-schema.rng"/&gt;
   &lt;xs:element name="result"&gt;
     &lt;xs:complexType&gt;
       &lt;xs:sequence&gt;
         &lt;xs:element name="interpretation" maxOccurs="unbounded"&gt;
           &lt;xs:complexType&gt;
             &lt;xs:sequence&gt;
               &lt;xs:element name="instance"&gt;
                 &lt;xs:complexType mixed="true"&gt;
                   &lt;xs:sequence minOccurs="0"&gt;
                     &lt;xs:any namespace="##other" processContents="lax"/&gt;
                   &lt;/xs:sequence&gt;
                 &lt;/xs:complexType&gt;
               &lt;/xs:element&gt;
               &lt;xs:element name="input" minOccurs="0"&gt;



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 211]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-212" id="page-212" name="page-212"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


                 &lt;xs:complexType mixed="true"&gt;
                   &lt;xs:choice&gt;
                     &lt;xs:element name="noinput" minOccurs="0"/&gt;
                     &lt;xs:element name="nomatch" minOccurs="0"/&gt;
                     &lt;xs:element name="input" minOccurs="0"/&gt;
                   &lt;/xs:choice&gt;
                   &lt;xs:attribute name="mode"
                                 type="xs:string"
                                 default="speech"/&gt;
                   &lt;xs:attribute name="confidence"
                                 type="confidenceinfo"
                                 default="1.0"/&gt;
                   &lt;xs:attribute name="timestamp-start"
                                 type="xs:string"/&gt;
                   &lt;xs:attribute name="timestamp-end"
                                 type="xs:string"/&gt;
                 &lt;/xs:complexType&gt;
               &lt;/xs:element&gt;
             &lt;/xs:sequence&gt;
             &lt;xs:attribute name="confidence" type="confidenceinfo"
                           default="1.0"/&gt;
             &lt;xs:attribute name="grammar" type="xs:anyURI"
                           use="optional"/&gt;
           &lt;/xs:complexType&gt;
         &lt;/xs:element&gt;
         &lt;xs:element name="enrollment-result"
                     type="enrollment-contents"/&gt;
         &lt;xs:element name="verification-result"
                     type="verification-contents"/&gt;
       &lt;/xs:sequence&gt;
       &lt;xs:attribute name="grammar" type="xs:anyURI"
                     use="optional"/&gt;
     &lt;/xs:complexType&gt;
   &lt;/xs:element&gt;

   &lt;xs:simpleType name="confidenceinfo"&gt;
     &lt;xs:restriction base="xs:float"&gt;
        &lt;xs:minInclusive value="0.0"/&gt;
        &lt;xs:maxInclusive value="1.0"/&gt;
     &lt;/xs:restriction&gt;
   &lt;/xs:simpleType&gt;
 &lt;/xs:schema&gt;









<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 212]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-213" id="page-213" name="page-213"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/16.2.%20%20Enrollment%20Results%20Schema%20Definition"></a><a class="selflink" href="#section-16.2" name="section-16.2">16.2</a>.  Enrollment Results Schema Definition</span>

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;

   &lt;!-- MRCP Enrollment Schema
   (See <a href="http://www.oasis-open.org/committees/relax-ng/spec.html">http://www.oasis-open.org/committees/relax-ng/spec.html</a>)
   --&gt;

   &lt;grammar datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"
            ns="urn:ietf:params:xml:ns:mrcpv2"
            xmlns="http://relaxng.org/ns/structure/1.0"&gt;

     &lt;start&gt;
       &lt;element name="enrollment-result"&gt;
         &lt;ref name="enrollment-content"/&gt;
       &lt;/element&gt;
     &lt;/start&gt;

     &lt;define name="enrollment-content"&gt;
       &lt;interleave&gt;
         &lt;element name="num-clashes"&gt;
           &lt;data type="nonNegativeInteger"/&gt;
         &lt;/element&gt;
         &lt;element name="num-good-repetitions"&gt;
           &lt;data type="nonNegativeInteger"/&gt;
         &lt;/element&gt;
         &lt;element name="num-repetitions-still-needed"&gt;
           &lt;data type="nonNegativeInteger"/&gt;
         &lt;/element&gt;
         &lt;element name="consistency-status"&gt;
           &lt;choice&gt;
             &lt;value&gt;consistent&lt;/value&gt;
             &lt;value&gt;inconsistent&lt;/value&gt;
             &lt;value&gt;undecided&lt;/value&gt;
           &lt;/choice&gt;
         &lt;/element&gt;
         &lt;optional&gt;
           &lt;element name="clash-phrase-ids"&gt;
             &lt;oneOrMore&gt;
               &lt;element name="item"&gt;
                 &lt;data type="token"/&gt;
               &lt;/element&gt;
             &lt;/oneOrMore&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
           &lt;element name="transcriptions"&gt;
             &lt;oneOrMore&gt;



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 213]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-214" id="page-214" name="page-214"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


               &lt;element name="item"&gt;
                 &lt;text/&gt;
               &lt;/element&gt;
             &lt;/oneOrMore&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
           &lt;element name="confusable-phrases"&gt;
             &lt;oneOrMore&gt;
               &lt;element name="item"&gt;
                 &lt;text/&gt;
               &lt;/element&gt;
             &lt;/oneOrMore&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
       &lt;/interleave&gt;
     &lt;/define&gt;

   &lt;/grammar&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/16.3.%20%20Verification%20Results%20Schema%20Definition"></a><a class="selflink" href="#section-16.3" name="section-16.3">16.3</a>.  Verification Results Schema Definition</span>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;

   &lt;!--    MRCP Verification Results Schema
           (See <a href="http://www.oasis-open.org/committees/relax-ng/spec.html">http://www.oasis-open.org/committees/relax-ng/spec.html</a>)
      --&gt;

   &lt;grammar datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"
            ns="urn:ietf:params:xml:ns:mrcpv2"
            xmlns="http://relaxng.org/ns/structure/1.0"&gt;

     &lt;start&gt;
       &lt;element name="verification-result"&gt;
         &lt;ref name="verification-contents"/&gt;
       &lt;/element&gt;
     &lt;/start&gt;

     &lt;define name="verification-contents"&gt;
       &lt;element name="voiceprint"&gt;
         &lt;ref name="firstVoiceprintContent"/&gt;
       &lt;/element&gt;
       &lt;zeroOrMore&gt;
         &lt;element name="voiceprint"&gt;
           &lt;ref name="restVoiceprintContent"/&gt;
         &lt;/element&gt;
       &lt;/zeroOrMore&gt;
     &lt;/define&gt;




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 214]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-215" id="page-215" name="page-215"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


     &lt;define name="firstVoiceprintContent"&gt;
       &lt;attribute name="id"&gt;
         &lt;data type="string"/&gt;
       &lt;/attribute&gt;
       &lt;interleave&gt;
         &lt;optional&gt;
           &lt;element name="adapted"&gt;
             &lt;data type="boolean"/&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
           &lt;element name="needmoredata"&gt;
             &lt;ref name="needmoredataContent"/&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
           &lt;element name="incremental"&gt;
             &lt;ref name="firstCommonContent"/&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;element name="cumulative"&gt;
           &lt;ref name="firstCommonContent"/&gt;
         &lt;/element&gt;
       &lt;/interleave&gt;
     &lt;/define&gt;

     &lt;define name="restVoiceprintContent"&gt;
       &lt;attribute name="id"&gt;
         &lt;data type="string"/&gt;
       &lt;/attribute&gt;
       &lt;element name="cumulative"&gt;
         &lt;ref name="restCommonContent"/&gt;
       &lt;/element&gt;
     &lt;/define&gt;

     &lt;define name="firstCommonContent"&gt;
       &lt;interleave&gt;
         &lt;element name="decision"&gt;
           &lt;ref name="decisionContent"/&gt;
         &lt;/element&gt;
         &lt;optional&gt;
           &lt;element name="utterance-length"&gt;
             &lt;ref name="utterance-lengthContent"/&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
           &lt;element name="device"&gt;
             &lt;ref name="deviceContent"/&gt;



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 215]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-216" id="page-216" name="page-216"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
           &lt;element name="gender"&gt;
             &lt;ref name="genderContent"/&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;zeroOrMore&gt;
           &lt;element name="verification-score"&gt;
             &lt;ref name="verification-scoreContent"/&gt;
           &lt;/element&gt;
         &lt;/zeroOrMore&gt;
       &lt;/interleave&gt;
     &lt;/define&gt;

     &lt;define name="restCommonContent"&gt;
       &lt;interleave&gt;
         &lt;optional&gt;
           &lt;element name="decision"&gt;
             &lt;ref name="decisionContent"/&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
           &lt;element name="device"&gt;
             &lt;ref name="deviceContent"/&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
         &lt;optional&gt;
           &lt;element name="gender"&gt;
             &lt;ref name="genderContent"/&gt;
           &lt;/element&gt;
         &lt;/optional&gt;
        &lt;zeroOrMore&gt;
           &lt;element name="verification-score"&gt;
             &lt;ref name="verification-scoreContent"/&gt;
           &lt;/element&gt;
        &lt;/zeroOrMore&gt;
        &lt;/interleave&gt;
     &lt;/define&gt;

     &lt;define name="decisionContent"&gt;
       &lt;choice&gt;
         &lt;value&gt;accepted&lt;/value&gt;
         &lt;value&gt;rejected&lt;/value&gt;
         &lt;value&gt;undecided&lt;/value&gt;
       &lt;/choice&gt;
     &lt;/define&gt;




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 216]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-217" id="page-217" name="page-217"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


     &lt;define name="needmoredataContent"&gt;
       &lt;data type="boolean"/&gt;
     &lt;/define&gt;

     &lt;define name="utterance-lengthContent"&gt;
       &lt;data type="nonNegativeInteger"/&gt;
     &lt;/define&gt;

     &lt;define name="deviceContent"&gt;
       &lt;choice&gt;
         &lt;value&gt;cellular-phone&lt;/value&gt;
         &lt;value&gt;electret-phone&lt;/value&gt;
         &lt;value&gt;carbon-button-phone&lt;/value&gt;
         &lt;value&gt;unknown&lt;/value&gt;
       &lt;/choice&gt;
     &lt;/define&gt;

     &lt;define name="genderContent"&gt;
       &lt;choice&gt;
         &lt;value&gt;male&lt;/value&gt;
         &lt;value&gt;female&lt;/value&gt;
         &lt;value&gt;unknown&lt;/value&gt;
       &lt;/choice&gt;
     &lt;/define&gt;

     &lt;define name="verification-scoreContent"&gt;
       &lt;data type="float"&gt;
         &lt;param name="minInclusive"&gt;-1&lt;/param&gt;
         &lt;param name="maxInclusive"&gt;1&lt;/param&gt;
       &lt;/data&gt;
     &lt;/define&gt;

   &lt;/grammar&gt;


















<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 217]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-218" id="page-218" name="page-218"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/17.%20%20References"></a><a class="selflink" href="#section-17" name="section-17">17</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/17.1.%20%20Normative%20References"></a><a class="selflink" href="#section-17.1" name="section-17.1">17.1</a>.  Normative References</span>

   [<a id="ref-ISO.8859-1.1987" name="ref-ISO.8859-1.1987">ISO.8859-1.1987</a>]
              International Organization for Standardization,
              "Information technology - 8-bit single byte coded graphic
              - character sets - Part 1: Latin alphabet No. 1, JTC1/
              SC2", ISO Standard 8859-1, 1987.

   [<a id="ref-RFC0793" name="ref-RFC0793">RFC0793</a>]  Postel, J., "Transmission Control Protocol", STD 7,
              <a href="rfc793.html">RFC 793</a>, September 1981.

   [<a id="ref-RFC1035" name="ref-RFC1035">RFC1035</a>]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, <a href="rfc1035.html">RFC 1035</a>, November 1987.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2326" name="ref-RFC2326">RFC2326</a>]  Schulzrinne, H., Rao, A., and R. Lanphier, "Real Time
              Streaming Protocol (RTSP)", <a href="rfc2326.html">RFC 2326</a>, April 1998.

   [<a id="ref-RFC2392" name="ref-RFC2392">RFC2392</a>]  Levinson, E., "Content-ID and Message-ID Uniform Resource
              Locators", <a href="rfc2392.html">RFC 2392</a>, August 1998.

   [<a id="ref-RFC2483" name="ref-RFC2483">RFC2483</a>]  Mealling, M. and R. Daniel, "URI Resolution Services
              Necessary for URN Resolution", <a href="rfc2483.html">RFC 2483</a>, January 1999.

   [<a id="ref-RFC2616" name="ref-RFC2616">RFC2616</a>]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
              Masinter, L., Leach, P., and T. Berners-Lee, "Hypertext
              Transfer Protocol -- HTTP/1.1", <a href="rfc2616.html">RFC 2616</a>, June 1999.

   [<a id="ref-RFC3023" name="ref-RFC3023">RFC3023</a>]  Murata, M., St. Laurent, S., and D. Kohn, "XML Media
              Types", <a href="rfc3023.html">RFC 3023</a>, January 2001.

   [<a id="ref-RFC3261" name="ref-RFC3261">RFC3261</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", <a href="rfc3261.html">RFC 3261</a>,
              June 2002.

   [<a id="ref-RFC3264" name="ref-RFC3264">RFC3264</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model
              with Session Description Protocol (SDP)", <a href="rfc3264.html">RFC 3264</a>,
              June 2002.

   [<a id="ref-RFC3550" name="ref-RFC3550">RFC3550</a>]  Schulzrinne, H., Casner, S., Frederick, R., and V.
              Jacobson, "RTP: A Transport Protocol for Real-Time
              Applications", STD 64, <a href="rfc3550.html">RFC 3550</a>, July 2003.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 218]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-219" id="page-219" name="page-219"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   [<a id="ref-RFC3629" name="ref-RFC3629">RFC3629</a>]  Yergeau, F., "UTF-8, a transformation format of ISO
              10646", STD 63, <a href="rfc3629.html">RFC 3629</a>, November 2003.

   [<a id="ref-RFC3688" name="ref-RFC3688">RFC3688</a>]  Mealling, M., "The IETF XML Registry", <a href="https://tools.ietf.org/html/bcp81">BCP 81</a>, <a href="rfc3688.html">RFC 3688</a>,
              January 2004.

   [<a id="ref-RFC3711" name="ref-RFC3711">RFC3711</a>]  Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K.
              Norrman, "The Secure Real-time Transport Protocol (SRTP)",
              <a href="rfc3711.html">RFC 3711</a>, March 2004.

   [<a id="ref-RFC3986" name="ref-RFC3986">RFC3986</a>]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform
              Resource Identifier (URI): Generic Syntax", STD 66,
              <a href="rfc3986.html">RFC 3986</a>, January 2005.

   [<a id="ref-RFC4145" name="ref-RFC4145">RFC4145</a>]  Yon, D. and G. Camarillo, "TCP-Based Media Transport in
              the Session Description Protocol (SDP)", <a href="rfc4145.html">RFC 4145</a>,
              September 2005.

   [<a id="ref-RFC4288" name="ref-RFC4288">RFC4288</a>]  Freed, N. and J. Klensin, "Media Type Specifications and
              Registration Procedures", <a href="https://tools.ietf.org/html/bcp13">BCP 13</a>, <a href="rfc4288.html">RFC 4288</a>, December 2005.

   [<a id="ref-RFC4566" name="ref-RFC4566">RFC4566</a>]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
              Description Protocol", <a href="rfc4566.html">RFC 4566</a>, July 2006.

   [<a id="ref-RFC4568" name="ref-RFC4568">RFC4568</a>]  Andreasen, F., Baugher, M., and D. Wing, "Session
              Description Protocol (SDP) Security Descriptions for Media
              Streams", <a href="rfc4568.html">RFC 4568</a>, July 2006.

   [<a id="ref-RFC4572" name="ref-RFC4572">RFC4572</a>]  Lennox, J., "Connection-Oriented Media Transport over the
              Transport Layer Security (TLS) Protocol in the Session
              Description Protocol (SDP)", <a href="rfc4572.html">RFC 4572</a>, July 2006.

   [<a id="ref-RFC5226" name="ref-RFC5226">RFC5226</a>]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", <a href="https://tools.ietf.org/html/bcp26">BCP 26</a>, <a href="rfc5226.html">RFC 5226</a>,
              May 2008.

   [<a id="ref-RFC5234" name="ref-RFC5234">RFC5234</a>]  Crocker, D. and P. Overell, "Augmented BNF for Syntax
              Specifications: ABNF", STD 68, <a href="rfc5234.html">RFC 5234</a>, January 2008.

   [<a id="ref-RFC5246" name="ref-RFC5246">RFC5246</a>]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", <a href="rfc5246.html">RFC 5246</a>, August 2008.

   [<a id="ref-RFC5322" name="ref-RFC5322">RFC5322</a>]  Resnick, P., Ed., "Internet Message Format", <a href="rfc5322.html">RFC 5322</a>,
              October 2008.

   [<a id="ref-RFC5646" name="ref-RFC5646">RFC5646</a>]  Phillips, A. and M. Davis, "Tags for Identifying
              Languages", <a href="https://tools.ietf.org/html/bcp47">BCP 47</a>, <a href="rfc5646.html">RFC 5646</a>, September 2009.




<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 219]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-220" id="page-220" name="page-220"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   [<a id="ref-RFC5888" name="ref-RFC5888">RFC5888</a>]  Camarillo, G. and H. Schulzrinne, "The Session Description
              Protocol (SDP) Grouping Framework", <a href="rfc5888.html">RFC 5888</a>, June 2010.

   [<a id="ref-RFC5905" name="ref-RFC5905">RFC5905</a>]  Mills, D., Martin, J., Burbank, J., and W. Kasch, "Network
              Time Protocol Version 4: Protocol and Algorithms
              Specification", <a href="rfc5905.html">RFC 5905</a>, June 2010.

   [<a id="ref-RFC5922" name="ref-RFC5922">RFC5922</a>]  Gurbani, V., Lawrence, S., and A. Jeffrey, "Domain
              Certificates in the Session Initiation Protocol (SIP)",
              <a href="rfc5922.html">RFC 5922</a>, June 2010.

   [<a id="ref-RFC6265" name="ref-RFC6265">RFC6265</a>]  Barth, A., "HTTP State Management Mechanism", <a href="rfc6265.html">RFC 6265</a>,
              April 2011.

   [<a id="ref-W3C.REC-semantic-interpretation-20070405" name="ref-W3C.REC-semantic-interpretation-20070405">W3C.REC-semantic-interpretation-20070405</a>]
              Tichelen, L. and D. Burke, "Semantic Interpretation for
              Speech Recognition (SISR) Version 1.0", World Wide Web
              Consortium Recommendation REC-semantic-
              interpretation-20070405, April 2007,
              &lt;<a href="http://www.w3.org/TR/2007/REC-semantic-interpretation-20070405">http://www.w3.org/TR/2007/</a>
              <a href="http://www.w3.org/TR/2007/REC-semantic-interpretation-20070405">REC-semantic-interpretation-20070405</a>&gt;.

   [<a id="ref-W3C.REC-speech-grammar-20040316" name="ref-W3C.REC-speech-grammar-20040316">W3C.REC-speech-grammar-20040316</a>]
              McGlashan, S. and A. Hunt, "Speech Recognition Grammar
              Specification Version 1.0", World Wide Web Consortium
              Recommendation REC-speech-grammar-20040316, March 2004,
              &lt;<a href="http://www.w3.org/TR/2004/REC-speech-grammar-20040316">http://www.w3.org/TR/2004/REC-speech-grammar-20040316</a>&gt;.

   [<a id="ref-W3C.REC-speech-synthesis-20040907" name="ref-W3C.REC-speech-synthesis-20040907">W3C.REC-speech-synthesis-20040907</a>]
              Walker, M., Burnett, D., and A. Hunt, "Speech Synthesis
              Markup Language (SSML) Version 1.0", World Wide Web
              Consortium Recommendation REC-speech-synthesis-20040907,
              September 2004,
              &lt;<a href="http://www.w3.org/TR/2004/REC-speech-synthesis-20040907">http://www.w3.org/TR/2004/REC-speech-synthesis-20040907</a>&gt;.

   [<a id="ref-W3C.REC-xml-names11-20040204" name="ref-W3C.REC-xml-names11-20040204">W3C.REC-xml-names11-20040204</a>]
              Layman, A., Bray, T., Hollander, D., and R. Tobin,
              "Namespaces in XML 1.1", World Wide Web Consortium First
              Edition REC-xml-names11-20040204, February 2004,
              &lt;<a href="http://www.w3.org/TR/2004/REC-xml-names11-20040204">http://www.w3.org/TR/2004/REC-xml-names11-20040204</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/17.2.%20%20Informative%20References"></a><a class="selflink" href="#section-17.2" name="section-17.2">17.2</a>.  Informative References</span>

   [<a id="ref-ISO.8601.1988" name="ref-ISO.8601.1988">ISO.8601.1988</a>]
              International Organization for Standardization, "Data
              elements and interchange formats - Information interchange
              - Representation of dates and times", ISO Standard 8601,
              June 1988.



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 220]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-221" id="page-221" name="page-221"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   [<a id="ref-Q.23" name="ref-Q.23">Q.23</a>]     International Telecommunications Union, "Technical
              Features of Push-Button Telephone Sets", ITU-T Q.23, 1993.

   [<a id="ref-RFC2046" name="ref-RFC2046">RFC2046</a>]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
              Extensions (MIME) Part Two: Media Types", <a href="rfc2046.html">RFC 2046</a>,
              November 1996.

   [<a id="ref-RFC2818" name="ref-RFC2818">RFC2818</a>]  Rescorla, E., "HTTP Over TLS", <a href="rfc2818.html">RFC 2818</a>, May 2000.

   [<a id="ref-RFC4217" name="ref-RFC4217">RFC4217</a>]  Ford-Hutchinson, P., "Securing FTP with TLS", <a href="rfc4217.html">RFC 4217</a>,
              October 2005.

   [<a id="ref-RFC4267" name="ref-RFC4267">RFC4267</a>]  Froumentin, M., "The W3C Speech Interface Framework Media
              Types: application/voicexml+xml, application/ssml+xml,
              application/srgs, application/srgs+xml, application/
              ccxml+xml, and application/pls+xml", <a href="rfc4267.html">RFC 4267</a>,
              November 2005.

   [<a id="ref-RFC4301" name="ref-RFC4301">RFC4301</a>]  Kent, S. and K. Seo, "Security Architecture for the
              Internet Protocol", <a href="rfc4301.html">RFC 4301</a>, December 2005.

   [<a id="ref-RFC4313" name="ref-RFC4313">RFC4313</a>]  Oran, D., "Requirements for Distributed Control of
              Automatic Speech Recognition (ASR), Speaker
              Identification/Speaker Verification (SI/SV), and Text-to-
              Speech (TTS) Resources", <a href="rfc4313.html">RFC 4313</a>, December 2005.

   [<a id="ref-RFC4395" name="ref-RFC4395">RFC4395</a>]  Hansen, T., Hardie, T., and L. Masinter, "Guidelines and
              Registration Procedures for New URI Schemes", <a href="https://tools.ietf.org/html/bcp35">BCP 35</a>,
              <a href="rfc4395.html">RFC 4395</a>, February 2006.

   [<a id="ref-RFC4463" name="ref-RFC4463">RFC4463</a>]  Shanmugham, S., Monaco, P., and B. Eberman, "A Media
              Resource Control Protocol (MRCP) Developed by Cisco,
              Nuance, and Speechworks", <a href="rfc4463.html">RFC 4463</a>, April 2006.

   [<a id="ref-RFC4467" name="ref-RFC4467">RFC4467</a>]  Crispin, M., "Internet Message Access Protocol (IMAP) -
              URLAUTH Extension", <a href="rfc4467.html">RFC 4467</a>, May 2006.

   [<a id="ref-RFC4733" name="ref-RFC4733">RFC4733</a>]  Schulzrinne, H. and T. Taylor, "RTP Payload for DTMF
              Digits, Telephony Tones, and Telephony Signals", <a href="rfc4733.html">RFC 4733</a>,
              December 2006.

   [<a id="ref-RFC4960" name="ref-RFC4960">RFC4960</a>]  Stewart, R., "Stream Control Transmission Protocol",
              <a href="rfc4960.html">RFC 4960</a>, September 2007.

   [<a id="ref-RFC6454" name="ref-RFC6454">RFC6454</a>]  Barth, A., "The Web Origin Concept", <a href="rfc6454.html">RFC 6454</a>,
              December 2011.





<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 221]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-222" id="page-222" name="page-222"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   [<a id="ref-W3C.REC-emma-20090210" name="ref-W3C.REC-emma-20090210">W3C.REC-emma-20090210</a>]
              Johnston, M., Baggia, P., Burnett, D., Carter, J., Dahl,
              D., McCobb, G., and D. Raggett, "EMMA: Extensible
              MultiModal Annotation markup language", World Wide Web
              Consortium Recommendation REC-emma-20090210,
              February 2009,
              &lt;<a href="http://www.w3.org/TR/2009/REC-emma-20090210">http://www.w3.org/TR/2009/REC-emma-20090210</a>&gt;.

   [<a id="ref-W3C.REC-pronunciation-lexicon-20081014" name="ref-W3C.REC-pronunciation-lexicon-20081014">W3C.REC-pronunciation-lexicon-20081014</a>]
              Baggia, P., Bagshaw, P., Burnett, D., Carter, J., and F.
              Scahill, "Pronunciation Lexicon Specification (PLS)",
              World Wide Web Consortium Recommendation
              REC-pronunciation-lexicon-20081014, October 2008,
              &lt;<a href="http://www.w3.org/TR/2008/REC-pronunciation-lexicon-20081014">http://www.w3.org/TR/2008/</a>
              <a href="http://www.w3.org/TR/2008/REC-pronunciation-lexicon-20081014">REC-pronunciation-lexicon-20081014</a>&gt;.

   [<a id="ref-W3C.REC-voicexml20-20040316" name="ref-W3C.REC-voicexml20-20040316">W3C.REC-voicexml20-20040316</a>]
              Danielsen, P., Porter, B., Hunt, A., Rehor, K., Lucas, B.,
              Burnett, D., Ferrans, J., Tryphonas, S., McGlashan, S.,
              and J. Carter, "Voice Extensible Markup Language
              (VoiceXML) Version 2.0", World Wide Web Consortium
              Recommendation REC-voicexml20-20040316, March 2004,
              &lt;<a href="http://www.w3.org/TR/2004/REC-voicexml20-20040316">http://www.w3.org/TR/2004/REC-voicexml20-20040316</a>&gt;.

   [<a id="ref-refs.javaSpeechGrammarFormat" name="ref-refs.javaSpeechGrammarFormat">refs.javaSpeechGrammarFormat</a>]
              Sun Microsystems, "Java Speech Grammar Format Version
              1.0", October 1998.
























<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 222]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-223" id="page-223" name="page-223"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Contributors"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Contributors</span>

   Pierre Forgues
   Nuance Communications Ltd.
   1500 University Street
   Suite 935
   Montreal, Quebec
   Canada H3A 3S7

   EMail:  forgues@nuance.com


   Charles Galles
   Intervoice, Inc.
   17811 Waterview Parkway
   Dallas, Texas 75252
   USA

   EMail:  charles.galles@intervoice.com


   Klaus Reifenrath
   Scansoft, Inc
   Guldensporenpark 32
   Building D
   9820 Merelbeke
   Belgium

   EMail: klaus.reifenrath@scansoft.com

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20B.%20%20Acknowledgements"></a><a class="selflink" href="#appendix-B" name="appendix-B">Appendix B</a>.  Acknowledgements</span>

   Andre Gillet (Nuance Communications)
   Andrew Hunt (ScanSoft)
   Andrew Wahbe (Genesys)
   Aaron Kneiss (ScanSoft)
   Brian Eberman (ScanSoft)
   Corey Stohs (Cisco Systems, Inc.)
   Dave Burke (VoxPilot)
   Jeff Kusnitz (IBM Corp)
   Ganesh N. Ramaswamy (IBM Corp)
   Klaus Reifenrath (ScanSoft)
   Kristian Finlator (ScanSoft)
   Magnus Westerlund (Ericsson)
   Martin Dragomirecky (Cisco Systems, Inc.)
   Paolo Baggia (Loquendo)
   Peter Monaco (Nuance Communications)
   Pierre Forgues (Nuance Communications)



<span class="grey">Burnett &amp; Shanmugham         Standards Track                  [Page 223]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-224" id="page-224" name="page-224"> </a>
<span class="grey"><a href="rfc6787.html">RFC 6787</a>                         MRCPv2                    November 2012</span>


   Ran Zilca (IBM Corp)
   Suresh Kaliannan (Cisco Systems, Inc.)
   Skip Cave (Intervoice, Inc.)
   Thomas Gal (LumenVox)

   The chairs of the SPEECHSC work group are Eric Burger (Georgetown
   University) and Dave Oran (Cisco Systems, Inc.).

   Many thanks go in particular to Robert Sparks, Alex Agranovsky, and
   Henry Phan, who were there at the end to dot all the i's and cross
   all the t's.

Authors' Addresses

   Daniel C. Burnett
   Voxeo
   189 South Orange Avenue #1000
   Orlando, FL  32801
   USA

   EMail: dburnett@voxeo.com


   Saravanan Shanmugham
   Cisco Systems, Inc.
   170 W. Tasman Dr.
   San Jose, CA  95134
   USA

   EMail: sarvi@cisco.com





















Burnett &amp; Shanmugham         Standards Track                  [Page 224]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6787 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:27 GMT --></html>