<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc8349 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:04 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.127" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="rfc8022" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:8349" name="DC.Identifier"/>
<meta content="March, 2018" name="DC.Date.Issued"/>
<meta content="Lindem, Acee" name="DC.Creator"/>
<meta content="Qu, Yingzhen" name="DC.Creator"/>
<meta content="Lhotka, Ladislav" name="DC.Creator"/>
<meta content="This document specifies three YANG modules and one submodule.
Together, they form the core routing data model that serves as a
framework for configuring and managing a routing subsystem. It is
expected that these modules will be augmented by additional YANG
modules defining data models for control-plane protocols, route
filters, and other functions. The core routing data model provides
common building blocks for such extensions -- routes, Routing
Information Bases (RIBs), and control-plane protocols.  The YANG
modules in this document conform to the Network Management Datastore
Architecture (NMDA). This document obsoletes RFC 8022." name="DC.Description.Abstract"/>
<meta content="A YANG Data Model for Routing Management (NMDA Version)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 8349 - A YANG Data Model for Routing Management (NMDA Version)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8349.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8349" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-netmod-rfc8022bis" title="draft-ietf-netmod-rfc8022bis">draft-ietf-netm...</a>] [<a href="https://datatracker.ietf.org/doc/rfc8349" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8349" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8349" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                         L. Lhotka
Request for Comments: 8349                                        CZ.NIC
Obsoletes: <a href="rfc8022.html">8022</a>                                                A. Lindem
Category: Standards Track                                  Cisco Systems
ISSN: 2070-1721                                                    Y. Qu
                                                                  Huawei
                                                              March 2018


        <span class="h1">A YANG Data Model for Routing Management (NMDA Version)</span>

Abstract

   This document specifies three YANG modules and one submodule.
   Together, they form the core routing data model that serves as a
   framework for configuring and managing a routing subsystem.  It is
   expected that these modules will be augmented by additional YANG
   modules defining data models for control-plane protocols, route
   filters, and other functions.  The core routing data model provides
   common building blocks for such extensions -- routes, Routing
   Information Bases (RIBs), and control-plane protocols.

   The YANG modules in this document conform to the Network Management
   Datastore Architecture (NMDA).  This document obsoletes <a href="rfc8022.html">RFC 8022</a>.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc7841.html#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8349">https://www.rfc-editor.org/info/rfc8349</a>.













<span class="grey">Lhotka, et al.               Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





































<span class="grey">Lhotka, et al.               Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Terminology and Notation  . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-2.1">2.1</a>.  Glossary of New Terms . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-2.2">2.2</a>.  Tree Diagrams . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-2.3">2.3</a>.  Prefixes in Data Node Names . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-3">3</a>.  Objectives  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-4">4</a>.  The Design of the Core Routing Data Model . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-4.1">4.1</a>.  System-Controlled and User-Controlled List Entries  . . .   <a href="#page-8">8</a>
   <a href="#section-5">5</a>.  Basic Building Blocks . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-5.1">5.1</a>.  Routes  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-5.2">5.2</a>.  Routing Information Base (RIB)  . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-5.3">5.3</a>.  Control-Plane Protocol  . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
       <a href="#section-5.3.1">5.3.1</a>.  Routing Pseudo-Protocols  . . . . . . . . . . . . . .  <a href="#page-11">11</a>
       <a href="#section-5.3.2">5.3.2</a>.  Defining New Control-Plane Protocols  . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-5.4">5.4</a>.  Parameters of IPv6 Router Advertisements  . . . . . . . .  <a href="#page-12">12</a>
   <a href="#section-6">6</a>.  Interactions with Other YANG Modules  . . . . . . . . . . . .  <a href="#page-13">13</a>
     <a href="#section-6.1">6.1</a>.  Module "ietf-interfaces"  . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
     <a href="#section-6.2">6.2</a>.  Module "ietf-ip"  . . . . . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-7">7</a>.  Routing Management YANG Module  . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
   <a href="#section-8">8</a>.  IPv4 Unicast Routing Management YANG Module . . . . . . . . .  <a href="#page-29">29</a>
   <a href="#section-9">9</a>.  IPv6 Unicast Routing Management YANG Module . . . . . . . . .  <a href="#page-37">37</a>
     <a href="#section-9.1">9.1</a>.  IPv6 Router Advertisements Submodule  . . . . . . . . . .  <a href="#page-45">45</a>
   <a href="#section-10">10</a>. IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <a href="#page-56">56</a>
   <a href="#section-11">11</a>. Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-57">57</a>
   <a href="#section-12">12</a>. References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-58">58</a>
     <a href="#section-12.1">12.1</a>.  Normative References . . . . . . . . . . . . . . . . . .  <a href="#page-58">58</a>
     <a href="#section-12.2">12.2</a>.  Informative References . . . . . . . . . . . . . . . . .  <a href="#page-60">60</a>
   <a href="#appendix-A">Appendix A</a>.  The Complete Schema Tree . . . . . . . . . . . . . .  <a href="#page-61">61</a>
   <a href="#appendix-B">Appendix B</a>.  Minimum Implementation . . . . . . . . . . . . . . .  <a href="#page-66">66</a>
   <a href="#appendix-C">Appendix C</a>.  Example: Adding a New Control-Plane Protocol . . . .  <a href="#page-67">67</a>
   <a href="#appendix-D">Appendix D</a>.  Data Tree Example  . . . . . . . . . . . . . . . . .  <a href="#page-70">70</a>
   <a href="#appendix-E">Appendix E</a>.  NETCONF Get Data Reply Example . . . . . . . . . . .  <a href="#page-77">77</a>
   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-80">80</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-80">80</a>















<span class="grey">Lhotka, et al.               Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document specifies the following YANG modules:

   o  The "ietf-routing" module provides generic components of a routing
      data model.

   o  The "ietf-ipv4-unicast-routing" module augments the "ietf-routing"
      module with additional data specific to IPv4 unicast.

   o  The "ietf-ipv6-unicast-routing" module augments the "ietf-routing"
      module with additional data specific to IPv6 unicast.  Its
      submodule, "ietf-ipv6-router-advertisements", also augments the
      "ietf-interfaces"  [<a href="rfc8343.html" title='"A YANG Data Model for Interface Management"'>RFC8343</a>] and "ietf-ip" [<a href="rfc8344.html" title='"A YANG Data Model for IP Management"'>RFC8344</a>] modules with
      IPv6 router configuration variables required by [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>].

   These modules together define the core routing data model, which is
   intended as a basis for future data model development covering
   more-sophisticated routing systems.  While these three modules can be
   directly used for simple IP devices with static routing (see
   <a href="#appendix-B">Appendix B</a>), their main purpose is to provide essential building
   blocks for more-complicated data models involving multiple
   control-plane protocols, multicast routing, additional address
   families, and advanced functions such as route filtering or policy
   routing.  To this end, it is expected that the core routing data
   model will be augmented by numerous modules developed by various IETF
   working groups.

   The YANG modules in this document conform to the Network Management
   Datastore Architecture (NMDA) [<a href="rfc8342.html" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>].  This document obsoletes
   <a href="rfc8022.html">RFC 8022</a> [<a href="rfc8022.html" title='"A YANG Data Model for Routing Management"'>RFC8022</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology%20and%20Notation"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology and Notation</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="rfc8174.html" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

   The following terms are defined in [<a href="rfc8342.html" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>]:

   o  client

   o  server

   o  configuration




<span class="grey">Lhotka, et al.               Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   o  system state

   o  operational state

   o  intended configuration

   The following terms are defined in [<a href="rfc7950.html" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>]:

   o  action

   o  augment

   o  container

   o  data model

   o  data node

   o  feature

   o  leaf

   o  list

   o  mandatory node

   o  module

   o  presence container

   o  schema tree

   o  RPC (Remote Procedure Call) operation

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Glossary%20of%20New%20Terms"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Glossary of New Terms</span>

   core routing data model:  YANG data model comprising "ietf-routing",
      "ietf-ipv4-unicast-routing", and "ietf-ipv6-unicast-routing"
      modules.

   direct route:  A route to a directly connected network.

   Routing Information Base (RIB):  An object containing a list of
      routes, together with other information.  See <a href="#section-5.2">Section 5.2</a> for
      details.






<span class="grey">Lhotka, et al.               Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   system-controlled entry:  An entry in a list in the operational state
      ("config false") that is created by the system independently of
      what has been explicitly configured.  See <a href="#section-4.1">Section 4.1</a> for details.

   user-controlled entry:  An entry in a list in the operational state
      ("config false") that is created and deleted as a direct
      consequence of certain configuration changes.  See <a href="#section-4.1">Section 4.1</a> for
      details.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Tree%20Diagrams"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Tree Diagrams</span>

   Tree diagrams used in this document follow the notation defined in
   [<a href="rfc8340.html" title='"YANG Tree Diagrams"'>RFC8340</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3.%20%20Prefixes%20in%20Data%20Node%20Names"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a>.  Prefixes in Data Node Names</span>

   In this document, names of data nodes, actions, and other data model
   objects are often used without a prefix, as long as it is clear from
   the context in which YANG module each name is defined.  Otherwise,
   names are prefixed using the standard prefix associated with the
   corresponding YANG module, as shown in Table 1.

            +--------+---------------------------+-----------+
            | Prefix | YANG module               | Reference |
            +--------+---------------------------+-----------+
            | if     | ietf-interfaces           | [<a href="rfc8343.html" title='"A YANG Data Model for Interface Management"'>RFC8343</a>] |
            | ip     | ietf-ip                   | [<a href="rfc8344.html" title='"A YANG Data Model for IP Management"'>RFC8344</a>] |
            | rt     | ietf-routing              | <a href="#section-7">Section 7</a> |
            | v4ur   | ietf-ipv4-unicast-routing | <a href="#section-8">Section 8</a> |
            | v6ur   | ietf-ipv6-unicast-routing | <a href="#section-9">Section 9</a> |
            | yang   | ietf-yang-types           | [<a href="rfc6991.html" title='"Common YANG Data Types"'>RFC6991</a>] |
            | inet   | ietf-inet-types           | [<a href="rfc6991.html" title='"Common YANG Data Types"'>RFC6991</a>] |
            +--------+---------------------------+-----------+

             Table 1: Prefixes and Corresponding YANG Modules

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Objectives"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Objectives</span>

   The initial design of the core routing data model was driven by the
   following objectives:

   o  The data model should be suitable for the common address families
      -- in particular, IPv4 and IPv6 -- and for unicast and multicast
      routing, as well as Multiprotocol Label Switching (MPLS).

   o  A simple IP routing system, such as one that uses only static
      routing, should be configurable in a simple way, ideally without
      any need to develop additional YANG modules.



<span class="grey">Lhotka, et al.               Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   o  On the other hand, the core routing framework must allow for
      complicated implementations involving multiple RIBs and multiple
      control-plane protocols, as well as controlled redistributions of
      routing information.

   o  Because device vendors will want to map the data models built on
      this generic framework to their proprietary data models and
      configuration interfaces, the framework should be flexible enough
      to facilitate such mapping and accommodate data models with
      different logic.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20The%20Design%20of%20the%20Core%20Routing%20Data%20Model"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  The Design of the Core Routing Data Model</span>

   The core routing data model consists of three YANG modules and one
   submodule.  The first module, "ietf-routing", defines the generic
   components of a routing system.  The other two modules --
   "ietf-ipv4-unicast-routing" and "ietf-ipv6-unicast-routing" --
   augment the "ietf-routing" module with additional data nodes that are
   needed for IPv4 and IPv6 unicast routing, respectively.  The
   "ietf-ipv6-unicast-routing" module has a submodule,
   "ietf-ipv6-router-advertisements", that augments the
   "ietf-interfaces" [<a href="rfc8343.html" title='"A YANG Data Model for Interface Management"'>RFC8343</a>] and "ietf-ip" [<a href="rfc8344.html" title='"A YANG Data Model for IP Management"'>RFC8344</a>] modules with
   configuration variables for IPv6 Router Advertisements as required by
   [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>].



























<span class="grey">Lhotka, et al.               Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   Figure 1 shows abridged views of the hierarchies.  See <a href="#appendix-A">Appendix A</a> for
   the complete data trees.

   +--rw routing
      +--rw router-id?                 yang:dotted-quad
      +--ro interfaces
      |  +--ro interface*   if:interface-ref
      +--rw control-plane-protocols
      |  +--rw control-plane-protocol* [type name]
      |     +--rw type             identityref
      |     +--rw name             string
      |     +--rw description?     string
      |     +--rw static-routes
      |        +--rw v4ur:ipv4
      |        |     ...
      |        +--rw v6ur:ipv6
      |              ...
      +--rw ribs
         +--rw rib* [name]
            +--rw name              string
            +--rw address-family?   identityref
            +--ro default-rib?      boolean {multiple-ribs}?
            +--ro routes
            |  +--ro route*
            |        ...
            +---x active-route
            |  +---w input
            |  |  +---w v4ur:destination-address?   inet:ipv4-address
            |  |  +---w v6ur:destination-address?   inet:ipv6-address
            |  +--ro output
            |        ...
            +--rw description?      string

                         Figure 1: Data Hierarchy

   As can be seen from Figure 1, the core routing data model introduces
   several generic components of a routing framework: routes, RIBs
   containing lists of routes, and control-plane protocols.  <a href="#section-5">Section 5</a>
   describes these components in more detail.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20System-Controlled%20and%20User-Controlled%20List%20Entries"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  System-Controlled and User-Controlled List Entries</span>

   The core routing data model defines several lists in the schema tree,
   such as "rib", that have to be populated with at least one entry in
   any properly functioning device, and additional entries may be
   configured by a client.





<span class="grey">Lhotka, et al.               Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   In such a list, the server creates the required item as a
   "system-controlled entry" in the operational state, i.e., inside
   read-only lists in the "routing" container.

   An example can be seen in <a href="#appendix-D">Appendix D</a>: the "/routing/ribs/rib" list
   has two system-controlled entries -- "ipv4-master" and "ipv6-master".

   Additional entries called "user-controlled entries" may be created in
   the configuration by a client, e.g., via the Network Configuration
   Protocol (NETCONF).  If the server accepts a configured
   user-controlled entry, then this entry also appears in the
   operational state version of the list.

   Corresponding entries in both versions of the list (in the intended
   configuration and the operational state) [<a href="rfc8342.html" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>] have the same
   value of the list key.

   A client may also provide supplemental configuration of system-
   controlled entries.  To do so, the client creates a new entry in the
   configuration with the desired contents.  In order to bind this entry
   to the corresponding entry in the operational state, the key of the
   configuration entry has to be set to the same value as the key of the
   operational state entry.

   Deleting a user-controlled entry from the intended configuration
   results in the removal of the corresponding entry in the operational
   state list.  In contrast, if a client deletes a system-controlled
   entry from the intended configuration, only the extra configuration
   specified in that entry is removed; the corresponding operational
   state entry is not removed.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Basic%20Building%20Blocks"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Basic Building Blocks</span>

   This section describes the essential components of the core routing
   data model.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Routes"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Routes</span>

   Routes are basic elements of information in a routing system.  The
   core routing data model defines only the following minimal set of
   route attributes:

   o  "destination-prefix": address prefix specifying the set of
      destination addresses for which the route may be used.  This
      attribute is mandatory.






<span class="grey">Lhotka, et al.               Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   o  "route-preference": an integer value (also known as
      "administrative distance") that is used for selecting a preferred
      route among routes with the same destination prefix.  A lower
      value indicates a route that is more preferred.

   o  "next-hop": determines the outgoing interface and/or next-hop
      address(es), or a special operation to be performed on a packet.

   Routes are primarily system state and appear as entries in RIBs
   (<a href="#section-5.2">Section 5.2</a>), but they may also be found in configuration data --
   for example, as manually configured static routes.  In the latter
   case, configurable route attributes are generally a subset of
   attributes defined for RIB routes.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Routing%20Information%20Base%20%28RIB%29"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Routing Information Base (RIB)</span>

   Every implementation of the core routing data model manages one or
   more RIBs.  A RIB is a list of routes complemented with
   administrative data.  Each RIB contains only routes of one address
   family.  An address family is represented by an identity derived from
   the "rt:address-family" base identity.

   In the core routing data model, RIBs are represented as entries in
   the list "/routing/ribs/rib" in the operational state.  The contents
   of RIBs are controlled and manipulated by control-plane protocol
   operations that may result in route additions, removals, and
   modifications.  This also includes manipulations via the "static"
   and/or "direct" pseudo-protocols; see <a href="#section-5.3.1">Section 5.3.1</a>.

   For every supported address family, exactly one RIB MUST be marked as
   the "default RIB", in which control-plane protocols place their
   routes by default.

   Simple router implementations that do not advertise the
   "multiple-ribs" feature will typically create one system-controlled
   RIB per supported address family and mark it as the default RIB.

   More-complex router implementations advertising the "multiple-ribs"
   feature support multiple RIBs per address family that can be used for
   policy routing and other purposes.

   The following action (see <a href="rfc7950.html#section-7.15">Section 7.15 of [RFC7950]</a>) is defined for
   the "rib" list:

   o  active-route -- return the active RIB route for the destination
      address that is specified as the action's input parameter.





<span class="grey">Lhotka, et al.               Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Control-Plane%20Protocol"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Control-Plane Protocol</span>

   The core routing data model provides an open-ended framework for
   defining multiple control-plane protocol instances, e.g., for Layer 3
   routing protocols.  Each control-plane protocol instance MUST be
   assigned a type, which is an identity derived from the
   "rt:control-plane-protocol" base identity.  The core routing data
   model defines two identities for the "direct" and "static"
   pseudo-protocols (<a href="#section-5.3.1">Section 5.3.1</a>).

   Multiple control-plane protocol instances of the same type MAY be
   configured.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.1.%20%20Routing%20Pseudo-Protocols"></a><a class="selflink" href="#section-5.3.1" name="section-5.3.1">5.3.1</a>.  Routing Pseudo-Protocols</span>

   The core routing data model defines two special routing protocol
   types -- "direct" and "static".  Both are in fact pseudo-protocols,
   which means that they are confined to the local device and do not
   exchange any routing information with adjacent routers.

   Every implementation of the core routing data model MUST provide
   exactly one instance of the "direct" pseudo-protocol type.  It is the
   source of direct routes for all configured address families.  Direct
   routes are normally supplied by the operating system kernel, based on
   the configuration of network interface addresses; see <a href="#section-6.2">Section 6.2</a>.

   A pseudo-protocol of the type "static" allows for specifying routes
   manually.  It MAY be configured in zero or multiple instances,
   although a typical configuration will have exactly one instance.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.2.%20%20Defining%20New%20Control-Plane%20Protocols"></a><a class="selflink" href="#section-5.3.2" name="section-5.3.2">5.3.2</a>.  Defining New Control-Plane Protocols</span>

   It is expected that future YANG modules will create data models for
   additional control-plane protocol types.  Such new modules will have
   to define the protocol-specific data nodes, and they will have to
   integrate into the core routing framework in the following way:

   o  A new identity MUST be defined for the control-plane protocol, and
      its base identity MUST be set to "rt:control-plane-protocol" or to
      an identity derived from "rt:control-plane-protocol".











<span class="grey">Lhotka, et al.               Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   o  Additional route attributes MAY be defined, preferably in one
      place by means of defining a YANG grouping.  The new attributes
      have to be inserted by augmenting the definitions of the node

       /rt:routing/rt:ribs/rt:rib/rt:routes/rt:route

      and possibly other places in the schema tree.

   o  Data nodes for the new protocol can be defined by augmenting the
      "control-plane-protocol" data node under "/routing".

   By using a "when" statement, the augmented data nodes specific to the
   new protocol SHOULD be made conditional and valid only if the value
   of "rt:type" or "rt:source-protocol" is equal to (or derived from)
   the new protocol's identity.

   It is also RECOMMENDED that protocol-specific data nodes be
   encapsulated in an appropriately named container with presence.  Such
   a container may contain mandatory data nodes that are otherwise
   forbidden at the top level of an augment.

   The above steps are implemented by the example YANG module for the
   Routing Information Protocol (RIP); see <a href="#appendix-C">Appendix C</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Parameters%20of%20IPv6%20Router%20Advertisements"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Parameters of IPv6 Router Advertisements</span>

   The YANG module "ietf-ipv6-router-advertisements" (<a href="#section-9.1">Section 9.1</a>),
   which is a submodule of the "ietf-ipv6-unicast-routing" module,
   augments the schema tree of IPv6 interfaces with definitions of the
   following variables as required by <a href="rfc4861.html#section-6.2.1">Section 6.2.1 of [RFC4861]</a>:

   o  send-advertisements

   o  max-rtr-adv-interval

   o  min-rtr-adv-interval

   o  managed-flag

   o  other-config-flag

   o  link-mtu

   o  reachable-time

   o  retrans-timer

   o  cur-hop-limit



<span class="grey">Lhotka, et al.               Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   o  default-lifetime

   o  prefix-list: a list of prefixes to be advertised.

      The following parameters are associated with each prefix in
      the list:

      *  valid-lifetime

      *  on-link-flag

      *  preferred-lifetime

      *  autonomous-flag

   NOTES:

   1.  The "IsRouter" flag, which is also required by [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>], is
       implemented in the "ietf-ip" module [<a href="rfc8344.html" title='"A YANG Data Model for IP Management"'>RFC8344</a>] (leaf
       "ip:forwarding").

   2.  The Neighbor Discovery specification [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>] allows the
       implementations to decide whether the "valid-lifetime" and
       "preferred-lifetime" parameters remain the same in consecutive
       advertisements or decrement in real time.  However, the latter
       behavior seems problematic because the values might be reset
       again to the (higher) configured values after a configuration is
       reloaded.  Moreover, no implementation is known to use the
       decrementing behavior.  The "ietf-ipv6-router-advertisements"
       submodule therefore stipulates the former behavior with constant
       values.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Interactions%20with%20Other%20YANG%20Modules"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Interactions with Other YANG Modules</span>

   The semantics of the core routing data model also depends on several
   configuration parameters that are defined in other YANG modules.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Module%20%22ietf-interfaces%22"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Module "ietf-interfaces"</span>

   The following boolean switch is defined in the "ietf-interfaces" YANG
   module [<a href="rfc8343.html" title='"A YANG Data Model for Interface Management"'>RFC8343</a>]:

   /if:interfaces/if:interface/if:enabled

      If this switch is set to "false" for a network-layer interface,
      then all routing and forwarding functions MUST be disabled on this
      interface.




<span class="grey">Lhotka, et al.               Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Module%20%22ietf-ip%22"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Module "ietf-ip"</span>

   The following boolean switches are defined in the "ietf-ip" YANG
   module [<a href="rfc8344.html" title='"A YANG Data Model for IP Management"'>RFC8344</a>]:

   /if:interfaces/if:interface/ip:ipv4/ip:enabled

      If this switch is set to "false" for a network-layer interface,
      then all IPv4 routing and forwarding functions MUST be disabled on
      this interface.

   /if:interfaces/if:interface/ip:ipv4/ip:forwarding

      If this switch is set to "false" for a network-layer interface,
      then the forwarding of IPv4 datagrams through this interface MUST
      be disabled.  However, the interface MAY participate in other IPv4
      routing functions, such as routing protocols.

   /if:interfaces/if:interface/ip:ipv6/ip:enabled

      If this switch is set to "false" for a network-layer interface,
      then all IPv6 routing and forwarding functions MUST be disabled on
      this interface.

   /if:interfaces/if:interface/ip:ipv6/ip:forwarding

      If this switch is set to "false" for a network-layer interface,
      then the forwarding of IPv6 datagrams through this interface MUST
      be disabled.  However, the interface MAY participate in other IPv6
      routing functions, such as routing protocols.

   In addition, the "ietf-ip" module allows for configuring IPv4 and
   IPv6 addresses and network prefixes or masks on network-layer
   interfaces.  Configuration of these parameters on an enabled
   interface MUST result in an immediate creation of the corresponding
   direct route.  The destination prefix of this route is set according
   to the configured IP address and network prefix/mask, and the
   interface is set as the outgoing interface for that route.













<span class="grey">Lhotka, et al.               Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Routing%20Management%20YANG%20Module"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Routing Management YANG Module</span>

   &lt;CODE BEGINS&gt; file "ietf-routing@2018-03-13.yang"

   module ietf-routing {
     yang-version "1.1";
     namespace "urn:ietf:params:xml:ns:yang:ietf-routing";
     prefix "rt";

     import ietf-yang-types {
       prefix "yang";
     }

     import ietf-interfaces {
       prefix "if";
       description
         "An 'ietf-interfaces' module version that is compatible with
          the Network Management Datastore Architecture (NMDA)
          is required.";
     }

     organization
       "IETF NETMOD (Network Modeling) Working Group";
     contact
       "WG Web:   &lt;<a href="https://datatracker.ietf.org/wg/netmod/">https://datatracker.ietf.org/wg/netmod/</a>&gt;
        WG List:  &lt;mailto:rtgwg@ietf.org&gt;

        Editor:   Ladislav Lhotka
                  &lt;mailto:lhotka@nic.cz&gt;
                  Acee Lindem
                  &lt;mailto:acee@cisco.com&gt;
                  Yingzhen Qu
                  &lt;mailto:yingzhen.qu@huawei.com&gt;";

     description
       "This YANG module defines essential components for the management
        of a routing subsystem.  The model fully conforms to the Network
        Management Datastore Architecture (NMDA).

        Copyright (c) 2018 IETF Trust and the persons
        identified as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).



<span class="grey">Lhotka, et al.               Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


        This version of this YANG module is part of <a href="rfc8349.html">RFC 8349</a>; see
        the RFC itself for full legal notices.";

     revision 2018-03-13 {
       description
         "Network Management Datastore Architecture (NMDA) revision.";
       reference
         "<a href="rfc8349.html">RFC 8349</a>: A YANG Data Model for Routing Management
                    (NMDA Version)";
     }

     revision 2016-11-04 {
          description
            "Initial revision.";
          reference
            "<a href="rfc8022.html">RFC 8022</a>: A YANG Data Model for Routing Management";
     }

     /* Features */
     feature multiple-ribs {
       description
         "This feature indicates that the server supports
          user-defined RIBs.

          Servers that do not advertise this feature SHOULD provide
          exactly one system-controlled RIB per supported address family
          and also make it the default RIB.  This RIB then appears as an
          entry in the list '/routing/ribs/rib'.";
     }

     feature router-id {
       description
         "This feature indicates that the server supports an explicit
          32-bit router ID that is used by some routing protocols.

          Servers that do not advertise this feature set a router ID
          algorithmically, usually to one of the configured IPv4
          addresses.  However, this algorithm is implementation
          specific.";
     }

     /* Identities */

     identity address-family {
       description
         "Base identity from which identities describing address
          families are derived.";
     }



<span class="grey">Lhotka, et al.               Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


     identity ipv4 {
       base address-family;
       description
         "This identity represents an IPv4 address family.";
     }

     identity ipv6 {
       base address-family;
       description
         "This identity represents an IPv6 address family.";
     }

     identity control-plane-protocol {
       description
         "Base identity from which control-plane protocol identities are
          derived.";
     }

     identity routing-protocol {
       base control-plane-protocol;
       description
         "Identity from which Layer 3 routing protocol identities are
          derived.";
     }

     identity direct {
       base routing-protocol;
       description
         "Routing pseudo-protocol that provides routes to directly
          connected networks.";
     }

     identity static {
       base routing-protocol;
       description
         "'Static' routing pseudo-protocol.";
     }

     /* Type Definitions */

     typedef route-preference {
       type uint32;
       description
         "This type is used for route preferences.";
     }

     /* Groupings */




<span class="grey">Lhotka, et al.               Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


     grouping address-family {
       description
         "This grouping provides a leaf identifying an address
          family.";
       leaf address-family {
         type identityref {
           base address-family;
         }
         mandatory true;
         description
           "Address family.";
       }
     }

     grouping router-id {
       description
         "This grouping provides a router ID.";
       leaf router-id {
         type yang:dotted-quad;
         description
           "A 32-bit number in the form of a dotted quad that is used by
            some routing protocols identifying a router.";
         reference
           "<a href="rfc2328.html">RFC 2328</a>: OSPF Version 2";
       }
     }

     grouping special-next-hop {
       description
         "This grouping provides a leaf with an enumeration of special
          next hops.";
       leaf special-next-hop {
         type enumeration {
           enum blackhole {
             description
               "Silently discard the packet.";
           }
           enum unreachable {
             description
               "Discard the packet and notify the sender with an error
                message indicating that the destination host is
                unreachable.";
           }
           enum prohibit {
             description
               "Discard the packet and notify the sender with an error
                message indicating that the communication is
                administratively prohibited.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


           }
           enum receive {
             description
               "The packet will be received by the local system.";
           }
         }
         description
           "Options for special next hops.";
       }
     }

     grouping next-hop-content {
       description
         "Generic parameters of next hops in static routes.";
       choice next-hop-options {
         mandatory true;
         description
           "Options for next hops in static routes.

            It is expected that further cases will be added through
            augments from other modules.";
         case simple-next-hop {
           description
             "This case represents a simple next hop consisting of the
              next-hop address and/or outgoing interface.

              Modules for address families MUST augment this case with a
              leaf containing a next-hop address of that address
              family.";
           leaf outgoing-interface {
             type if:interface-ref;
             description
               "Name of the outgoing interface.";
           }
         }
         case special-next-hop {
           uses special-next-hop;
         }
         case next-hop-list {
           container next-hop-list {
             description
               "Container for multiple next hops.";
             list next-hop {
               key "index";
               description
                 "An entry in a next-hop list.

                  Modules for address families MUST augment this list



<span class="grey">Lhotka, et al.               Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


                  with a leaf containing a next-hop address of that
                  address family.";
               leaf index {
                 type string;
                 description
                   "A user-specified identifier utilized to uniquely
                    reference the next-hop entry in the next-hop list.
                    The value of this index has no semantic meaning
                    other than for referencing the entry.";
               }
               leaf outgoing-interface {
                 type if:interface-ref;
                 description
                   "Name of the outgoing interface.";
               }
             }
           }
         }
       }
     }

     grouping next-hop-state-content {
       description
         "Generic state parameters of next hops.";
       choice next-hop-options {
         mandatory true;
         description
           "Options for next hops.

            It is expected that further cases will be added through
            augments from other modules, e.g., for recursive
            next hops.";
         case simple-next-hop {
           description
             "This case represents a simple next hop consisting of the
              next-hop address and/or outgoing interface.

              Modules for address families MUST augment this case with a
              leaf containing a next-hop address of that address
              family.";
           leaf outgoing-interface {
             type if:interface-ref;
             description
               "Name of the outgoing interface.";
           }
         }
         case special-next-hop {
           uses special-next-hop;



<span class="grey">Lhotka, et al.               Standards Track                   [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


         }
         case next-hop-list {
           container next-hop-list {
             description
               "Container for multiple next hops.";
             list next-hop {
               description
                 "An entry in a next-hop list.

                  Modules for address families MUST augment this list
                  with a leaf containing a next-hop address of that
                  address family.";
               leaf outgoing-interface {
                 type if:interface-ref;
                 description
                   "Name of the outgoing interface.";
               }
             }
           }
         }
       }
     }

     grouping route-metadata {
       description
         "Common route metadata.";
       leaf source-protocol {
         type identityref {
           base routing-protocol;
         }
         mandatory true;
         description
           "Type of the routing protocol from which the route
            originated.";
       }
       leaf active {
         type empty;
         description
           "The presence of this leaf indicates that the route is
            preferred among all routes in the same RIB that have the
            same destination prefix.";
       }
       leaf last-updated {
         type yang:date-and-time;
         description
           "Timestamp of the last modification of the route.  If the
            route was never modified, it is the time when the route was
            inserted into the RIB.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


       }
     }

     /* Data nodes */

     container routing {
       description
         "Configuration parameters for the routing subsystem.";
       uses router-id {
         if-feature "router-id";
         description
           "Support for the global router ID.  Routing protocols
            that use a router ID can use this parameter or override it
            with another value.";
       }
       container interfaces {
         config false;
         description
           "Network-layer interfaces used for routing.";
         leaf-list interface {
           type if:interface-ref;
           description
             "Each entry is a reference to the name of a configured
              network-layer interface.";
         }
       }
       container control-plane-protocols {
         description
           "Support for control-plane protocol instances.";
         list control-plane-protocol {
           key "type name";
           description
             "Each entry contains a control-plane protocol instance.";
           leaf type {
             type identityref {
               base control-plane-protocol;
             }
             description
               "Type of the control-plane protocol -- an identity
                derived from the 'control-plane-protocol'
                base identity.";
           }
           leaf name {
             type string;
             description
               "An arbitrary name of the control-plane protocol
                instance.";
           }



<span class="grey">Lhotka, et al.               Standards Track                   [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


           leaf description {
             type string;
             description
               "Textual description of the control-plane protocol
                instance.";
           }
           container static-routes {
             when "derived-from-or-self(../type, 'rt:static')" {
               description
                 "This container is only valid for the 'static' routing
                  protocol.";
             }
             description
               "Support for the 'static' pseudo-protocol.

                Address-family-specific modules augment this node with
                their lists of routes.";
           }
         }
       }
       container ribs {
         description
           "Support for RIBs.";
         list rib {
           key "name";
           description
             "Each entry contains a configuration for a RIB identified
              by the 'name' key.

              Entries having the same key as a system-controlled entry
              in the list '/routing/ribs/rib' are used for
              configuring parameters of that entry.  Other entries
              define additional user-controlled RIBs.";
           leaf name {
             type string;
             description
               "The name of the RIB.

                For system-controlled entries, the value of this leaf
                must be the same as the name of the corresponding entry
                in the operational state.

                For user-controlled entries, an arbitrary name can be
                used.";
           }
           uses address-family {
             description
               "The address family of the system-controlled RIB.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


           }

           leaf default-rib {
             if-feature "multiple-ribs";
             type boolean;
             default "true";
             config false;
             description
               "This flag has the value of 'true' if and only if the RIB
                is the default RIB for the given address family.

                By default, control-plane protocols place their routes
                in the default RIBs.";
           }
           container routes {
             config false;
             description
               "Current contents of the RIB.";
             list route {
               description
                 "A RIB route entry.  This data node MUST be augmented
                  with information specific to routes of each address
                  family.";
               leaf route-preference {
                 type route-preference;
                 description
                   "This route attribute, also known as 'administrative
                    distance', allows for selecting the preferred route
                    among routes with the same destination prefix.  A
                    smaller value indicates a route that is
                    more preferred.";
               }
               container next-hop {
                 description
                   "Route's next-hop attribute.";
                 uses next-hop-state-content;
               }
               uses route-metadata;
             }
           }
           action active-route {
             description
               "Return the active RIB route that is used for the
                destination address.

                Address-family-specific modules MUST augment input
                parameters with a leaf named 'destination-address'.";
             output {



<span class="grey">Lhotka, et al.               Standards Track                   [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


               container route {
                 description
                   "The active RIB route for the specified destination.

                    If no route exists in the RIB for the destination
                    address, no output is returned.

                    Address-family-specific modules MUST augment this
                    container with appropriate route contents.";
                 container next-hop {
                   description
                     "Route's next-hop attribute.";
                   uses next-hop-state-content;
                 }
                 uses route-metadata;
               }
             }
           }
           leaf description {
             type string;
             description
               "Textual description of the RIB.";
           }
         }
       }
     }

     /*
      * The subsequent data nodes are obviated and obsoleted
      * by the Network Management Datastore Architecture
      * as described in <a href="rfc8342.html">RFC 8342</a>.
      */
     container routing-state {
       config false;
       status obsolete;
       description
         "State data of the routing subsystem.";
       uses router-id {
         status obsolete;
         description
           "Global router ID.

            It may be either configured or assigned algorithmically by
            the implementation.";
       }
       container interfaces {
         status obsolete;
         description



<span class="grey">Lhotka, et al.               Standards Track                   [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


           "Network-layer interfaces used for routing.";
         leaf-list interface {
           type if:interface-state-ref;
           status obsolete;
           description
             "Each entry is a reference to the name of a configured
              network-layer interface.";
         }
       }
       container control-plane-protocols {
         status obsolete;
         description
           "Container for the list of routing protocol instances.";
         list control-plane-protocol {
           key "type name";
           status obsolete;
           description
             "State data of a control-plane protocol instance.

              An implementation MUST provide exactly one
              system-controlled instance of the 'direct'
              pseudo-protocol.  Instances of other control-plane
              protocols MAY be created by configuration.";
           leaf type {
             type identityref {
               base control-plane-protocol;
             }
             status obsolete;
             description
               "Type of the control-plane protocol.";
           }
           leaf name {
             type string;
             status obsolete;
             description
               "The name of the control-plane protocol instance.

                For system-controlled instances, this name is
                persistent, i.e., it SHOULD NOT change across
                reboots.";
           }
         }
       }
       container ribs {
         status obsolete;
         description
           "Container for RIBs.";
         list rib {



<span class="grey">Lhotka, et al.               Standards Track                   [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


           key "name";
           min-elements 1;
           status obsolete;
           description
             "Each entry represents a RIB identified by the 'name'
              key.  All routes in a RIB MUST belong to the same address
              family.

              An implementation SHOULD provide one system-controlled
              default RIB for each supported address family.";
           leaf name {
             type string;
             status obsolete;
             description
               "The name of the RIB.";
           }
           uses address-family {
             status obsolete;
             description
               "The address family of the RIB.";
           }
           leaf default-rib {
             if-feature "multiple-ribs";
             type boolean;
             default "true";
             status obsolete;
             description
               "This flag has the value of 'true' if and only if the
                RIB is the default RIB for the given address family.

                By default, control-plane protocols place their routes
                in the default RIBs.";
           }
           container routes {
             status obsolete;
             description
               "Current contents of the RIB.";
             list route {
               status obsolete;
               description
                 "A RIB route entry.  This data node MUST be augmented
                  with information specific to routes of each address
                  family.";
               leaf route-preference {
                 type route-preference;
                 status obsolete;
                 description
                   "This route attribute, also known as 'administrative



<span class="grey">Lhotka, et al.               Standards Track                   [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


                    distance', allows for selecting the preferred route
                    among routes with the same destination prefix.  A
                    smaller value indicates a route that is
                    more preferred.";
               }
               container next-hop {
                 status obsolete;
                 description
                   "Route's next-hop attribute.";
                 uses next-hop-state-content {
                   status obsolete;
                   description
                     "Route's next-hop attribute operational state.";
                 }
               }
               uses route-metadata {
                 status obsolete;
                 description
                   "Route metadata.";
               }
             }
           }
           action active-route {
             status obsolete;
             description
               "Return the active RIB route that is used for the
                destination address.

                Address-family-specific modules MUST augment input
                parameters with a leaf named 'destination-address'.";
             output {
               container route {
                 status obsolete;
                 description
                   "The active RIB route for the specified
                    destination.

                    If no route exists in the RIB for the destination
                    address, no output is returned.

                    Address-family-specific modules MUST augment this
                    container with appropriate route contents.";
                 container next-hop {
                   status obsolete;
                   description
                     "Route's next-hop attribute.";
                   uses next-hop-state-content {
                     status obsolete;



<span class="grey">Lhotka, et al.               Standards Track                   [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


                     description
                       "Active route state data.";
                   }
                 }
                 uses route-metadata {
                   status obsolete;
                   description
                     "Active route metadata.";
                 }
               }
             }
           }
         }
       }
     }
   }

   &lt;CODE ENDS&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20IPv4%20Unicast%20Routing%20Management%20YANG%20Module"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  IPv4 Unicast Routing Management YANG Module</span>

   &lt;CODE BEGINS&gt; file "ietf-ipv4-unicast-routing@2018-03-13.yang"

   module ietf-ipv4-unicast-routing {
     yang-version "1.1";
     namespace
       "urn:ietf:params:xml:ns:yang:ietf-ipv4-unicast-routing";
     prefix "v4ur";

     import ietf-routing {
       prefix "rt";
       description
         "An 'ietf-routing' module version that is compatible with
          the Network Management Datastore Architecture (NMDA)
          is required.";
     }

     import ietf-inet-types {
       prefix "inet";
     }
     organization
       "IETF NETMOD (Network Modeling) Working Group";
     contact
       "WG Web:   &lt;<a href="https://datatracker.ietf.org/wg/netmod/">https://datatracker.ietf.org/wg/netmod/</a>&gt;
        WG List:  &lt;mailto:rtgwg@ietf.org&gt;

        Editor:   Ladislav Lhotka
                  &lt;mailto:lhotka@nic.cz&gt;



<span class="grey">Lhotka, et al.               Standards Track                   [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


                  Acee Lindem
                  &lt;mailto:acee@cisco.com&gt;
                  Yingzhen Qu
                  &lt;mailto:yingzhen.qu@huawei.com&gt;";

     description
       "This YANG module augments the 'ietf-routing' module with basic
        parameters for IPv4 unicast routing.  The model fully conforms
        to the Network Management Datastore Architecture (NMDA).

        Copyright (c) 2018 IETF Trust and the persons
        identified as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).

        This version of this YANG module is part of <a href="rfc8349.html">RFC 8349</a>; see
        the RFC itself for full legal notices.";

     revision 2018-03-13 {
       description
         "Network Management Datastore Architecture (NMDA) revision.";
       reference
         "<a href="rfc8349.html">RFC 8349</a>: A YANG Data Model for Routing Management
                    (NMDA Version)";
     }

     revision 2016-11-04 {
          description
            "Initial revision.";
          reference
            "<a href="rfc8022.html">RFC 8022</a>: A YANG Data Model for Routing Management";
     }

     /* Identities */

     identity ipv4-unicast {
       base rt:ipv4;
       description
         "This identity represents the IPv4 unicast address family.";
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route" {
       when "derived-from-or-self(../../rt:address-family, "



<span class="grey">Lhotka, et al.               Standards Track                   [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


          + "'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       description
         "This leaf augments an IPv4 unicast route.";
       leaf destination-prefix {
         type inet:ipv4-prefix;
         description
           "IPv4 destination prefix.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route/"
           + "rt:next-hop/rt:next-hop-options/rt:simple-next-hop" {
       when "derived-from-or-self(../../../rt:address-family, "
          + "'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       description
         "Augments the 'simple-next-hop' case in IPv4 unicast routes.";
       leaf next-hop-address {
         type inet:ipv4-address;
         description
           "IPv4 address of the next hop.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route/"
           + "rt:next-hop/rt:next-hop-options/rt:next-hop-list/"
           + "rt:next-hop-list/rt:next-hop" {
       when "derived-from-or-self(../../../../../rt:address-family, "
          + "'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       description
         "This leaf augments the 'next-hop-list' case of IPv4 unicast
          routes.";
       leaf address {
         type inet:ipv4-address;
         description
           "IPv4 address of the next hop.";
       }
     }

     augment



<span class="grey">Lhotka, et al.               Standards Track                   [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


       "/rt:routing/rt:ribs/rt:rib/rt:active-route/rt:input" {
       when "derived-from-or-self(../rt:address-family, "
          + "'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast RIBs.";
       }
       description
         "This augment adds the input parameter of the 'active-route'
          action.";
       leaf destination-address {
         type inet:ipv4-address;
         description
           "IPv4 destination address.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:active-route/"
           + "rt:output/rt:route" {
       when "derived-from-or-self(../../rt:address-family, "
          + "'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       description
         "This augment adds the destination prefix to the reply of the
          'active-route' action.";
       leaf destination-prefix {
         type inet:ipv4-prefix;
         description
           "IPv4 destination prefix.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:active-route/"
           + "rt:output/rt:route/rt:next-hop/rt:next-hop-options/"
           + "rt:simple-next-hop" {
       when "derived-from-or-self(../../../rt:address-family, "
          + "'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       description
         "Augments the 'simple-next-hop' case in the reply to the
          'active-route' action.";
       leaf next-hop-address {
         type inet:ipv4-address;
         description
           "IPv4 address of the next hop.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:active-route/"
           + "rt:output/rt:route/rt:next-hop/rt:next-hop-options/"
           + "rt:next-hop-list/rt:next-hop-list/rt:next-hop" {
       when "derived-from-or-self(../../../../../rt:address-family, "
          + "'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       description
         "Augments the 'next-hop-list' case in the reply to the
          'active-route' action.";
       leaf next-hop-address {
         type inet:ipv4-address;
         description
           "IPv4 address of the next hop.";
       }
     }

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rt:static-routes" {
       description
         "This augment defines the 'static' pseudo-protocol
          with data specific to IPv4 unicast.";
       container ipv4 {
         description
           "Support for a 'static' pseudo-protocol instance
            consists of a list of routes.";
         list route {
           key "destination-prefix";
           description
             "A list of static routes.";
           leaf destination-prefix {
             type inet:ipv4-prefix;
             mandatory true;
             description
               "IPv4 destination prefix.";
           }
           leaf description {
             type string;
             description
               "Textual description of the route.";
           }
           container next-hop {
             description
               "Support for next-hop.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 33]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-34" id="page-34" name="page-34"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


             uses rt:next-hop-content {
               augment "next-hop-options/simple-next-hop" {
                 description
                   "Augments the 'simple-next-hop' case in IPv4 static
                    routes.";
                 leaf next-hop-address {
                   type inet:ipv4-address;
                   description
                     "IPv4 address of the next hop.";
                 }
               }
               augment "next-hop-options/next-hop-list/next-hop-list/"
                     + "next-hop" {
                 description
                   "Augments the 'next-hop-list' case in IPv4 static
                    routes.";
                 leaf next-hop-address {
                   type inet:ipv4-address;
                   description
                     "IPv4 address of the next hop.";
                 }
               }
             }
           }
         }
       }
     }

     /*
      * The subsequent data nodes are obviated and obsoleted
      * by the Network Management Datastore Architecture
      * as described in <a href="rfc8342.html">RFC 8342</a>.
      */
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:routes/rt:route" {
       when "derived-from-or-self(../../rt:address-family, "
            + "'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       status obsolete;
       description
         "This leaf augments an IPv4 unicast route.";
       leaf destination-prefix {
         type inet:ipv4-prefix;
         status obsolete;
         description
           "IPv4 destination prefix.";
       }



<span class="grey">Lhotka, et al.               Standards Track                   [Page 34]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-35" id="page-35" name="page-35"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:routes/rt:route/"
             + "rt:next-hop/rt:next-hop-options/rt:simple-next-hop" {
       when "derived-from-or-self(
               ../../../rt:address-family, 'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       status obsolete;
       description
         "Augments the 'simple-next-hop' case in IPv4 unicast routes.";
       leaf next-hop-address {
         type inet:ipv4-address;
         status obsolete;
         description
           "IPv4 address of the next hop.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:routes/rt:route/"
             + "rt:next-hop/rt:next-hop-options/rt:next-hop-list/"
             + "rt:next-hop-list/rt:next-hop" {
       when "derived-from-or-self(../../../../../rt:address-family,
               'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       status obsolete;
       description
         "This leaf augments the 'next-hop-list' case of IPv4 unicast
          routes.";
       leaf address {
         type inet:ipv4-address;
         status obsolete;
         description
           "IPv4 address of the next hop.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:active-route/"
             + "rt:input" {
       when "derived-from-or-self(../rt:address-family,
               'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast RIBs.";
       }
       status obsolete;
       description
         "This augment adds the input parameter of the 'active-route'
          action.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 35]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-36" id="page-36" name="page-36"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


       leaf destination-address {
         type inet:ipv4-address;
         status obsolete;
         description
           "IPv4 destination address.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:active-route/"
             + "rt:output/rt:route" {
       when "derived-from-or-self(../../rt:address-family,
               'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       status obsolete;
       description
         "This augment adds the destination prefix to the reply of the
          'active-route' action.";
       leaf destination-prefix {
         type inet:ipv4-prefix;
         status obsolete;
         description
           "IPv4 destination prefix.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:active-route/"
             + "rt:output/rt:route/rt:next-hop/rt:next-hop-options/"
             + "rt:simple-next-hop" {
       when "derived-from-or-self(../../../rt:address-family,
               'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       status obsolete;
       description
         "Augments the 'simple-next-hop' case in the reply to the
          'active-route' action.";
       leaf next-hop-address {
         type inet:ipv4-address;
         status obsolete;
         description
           "IPv4 address of the next hop.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:active-route/"
             + "rt:output/rt:route/rt:next-hop/rt:next-hop-options/"
             + "rt:next-hop-list/rt:next-hop-list/rt:next-hop" {
       when "derived-from-or-self(../../../../../rt:address-family,



<span class="grey">Lhotka, et al.               Standards Track                   [Page 36]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-37" id="page-37" name="page-37"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


               'v4ur:ipv4-unicast')" {
         description
           "This augment is valid only for IPv4 unicast.";
       }
       status obsolete;
       description
         "Augments the 'next-hop-list' case in the reply to the
          'active-route' action.";
       leaf next-hop-address {
         type inet:ipv4-address;
         status obsolete;
         description
           "IPv4 address of the next hop.";
       }
     }
   }

   &lt;CODE ENDS&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20IPv6%20Unicast%20Routing%20Management%20YANG%20Module"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  IPv6 Unicast Routing Management YANG Module</span>

   &lt;CODE BEGINS&gt; file "ietf-ipv6-unicast-routing@2018-03-13.yang"

   module ietf-ipv6-unicast-routing {
     yang-version "1.1";
     namespace
       "urn:ietf:params:xml:ns:yang:ietf-ipv6-unicast-routing";
     prefix "v6ur";

     import ietf-routing {
       prefix "rt";
       description
         "An 'ietf-routing' module version that is compatible with
          the Network Management Datastore Architecture (NMDA)
          is required.";
     }

     import ietf-inet-types {
       prefix "inet";
       description
         "An 'ietf-interfaces' module version that is compatible with
          the Network Management Datastore Architecture (NMDA)
          is required.";
     }

     include ietf-ipv6-router-advertisements {
       revision-date 2018-03-13;
     }



<span class="grey">Lhotka, et al.               Standards Track                   [Page 37]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-38" id="page-38" name="page-38"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


     organization
       "IETF NETMOD (Network Modeling) Working Group";
     contact
       "WG Web:   &lt;<a href="https://datatracker.ietf.org/wg/netmod/">https://datatracker.ietf.org/wg/netmod/</a>&gt;
        WG List:  &lt;mailto:rtgwg@ietf.org&gt;

        Editor:   Ladislav Lhotka
                  &lt;mailto:lhotka@nic.cz&gt;
                  Acee Lindem
                  &lt;mailto:acee@cisco.com&gt;
                  Yingzhen Qu
                  &lt;mailto:yingzhen.qu@huawei.com&gt;";

     description
       "This YANG module augments the 'ietf-routing' module with basic
        parameters for IPv6 unicast routing.  The model fully conforms
        to the Network Management Datastore Architecture (NMDA).

        Copyright (c) 2018 IETF Trust and the persons
        identified as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).

        This version of this YANG module is part of <a href="rfc8349.html">RFC 8349</a>; see
        the RFC itself for full legal notices.";

     revision 2018-03-13 {
       description
         "Network Management Datastore Architecture (NMDA) revision.";
       reference
         "<a href="rfc8349.html">RFC 8349</a>: A YANG Data Model for Routing Management
                    (NMDA Version)";
     }

     /* Identities */

     revision 2016-11-04 {
          description
            "Initial revision.";
          reference
            "<a href="rfc8022.html">RFC 8022</a>: A YANG Data Model for Routing Management";
     }




<span class="grey">Lhotka, et al.               Standards Track                   [Page 38]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-39" id="page-39" name="page-39"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


     identity ipv6-unicast {
       base rt:ipv6;
       description
         "This identity represents the IPv6 unicast address family.";
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route" {
       when "derived-from-or-self(../../rt:address-family, "
          + "'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       description
         "This leaf augments an IPv6 unicast route.";
       leaf destination-prefix {
         type inet:ipv6-prefix;
         description
           "IPv6 destination prefix.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route/"
           + "rt:next-hop/rt:next-hop-options/rt:simple-next-hop" {
       when "derived-from-or-self(../../../rt:address-family, "
          + "'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       description
         "Augments the 'simple-next-hop' case in IPv6 unicast routes.";
       leaf next-hop-address {
         type inet:ipv6-address;
         description
           "IPv6 address of the next hop.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route/"
           + "rt:next-hop/rt:next-hop-options/rt:next-hop-list/"
           + "rt:next-hop-list/rt:next-hop" {
       when "derived-from-or-self(../../../../../rt:address-family, "
          + "'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       description
         "This leaf augments the 'next-hop-list' case of IPv6 unicast
          routes.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 39]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-40" id="page-40" name="page-40"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


       leaf address {
         type inet:ipv6-address;
         description
           "IPv6 address of the next hop.";
       }
     }

     augment
       "/rt:routing/rt:ribs/rt:rib/rt:active-route/rt:input" {
       when "derived-from-or-self(../rt:address-family, "
          + "'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast RIBs.";
       }
       description
         "This augment adds the input parameter of the 'active-route'
          action.";
       leaf destination-address {
         type inet:ipv6-address;
         description
           "IPv6 destination address.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:active-route/"
           + "rt:output/rt:route" {
       when "derived-from-or-self(../../rt:address-family, "
          + "'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       description
         "This augment adds the destination prefix to the reply of the
          'active-route' action.";
       leaf destination-prefix {
         type inet:ipv6-prefix;
         description
           "IPv6 destination prefix.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:active-route/"
           + "rt:output/rt:route/rt:next-hop/rt:next-hop-options/"
           + "rt:simple-next-hop" {
       when "derived-from-or-self(../../../rt:address-family, "
          + "'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 40]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-41" id="page-41" name="page-41"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


       }
       description
         "Augments the 'simple-next-hop' case in the reply to the
          'active-route' action.";
       leaf next-hop-address {
         type inet:ipv6-address;
         description
           "IPv6 address of the next hop.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:active-route/"
           + "rt:output/rt:route/rt:next-hop/rt:next-hop-options/"
           + "rt:next-hop-list/rt:next-hop-list/rt:next-hop" {
       when "derived-from-or-self(../../../../../rt:address-family, "
          + "'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       description
         "Augments the 'next-hop-list' case in the reply to the
          'active-route' action.";
       leaf next-hop-address {
         type inet:ipv6-address;
         description
           "IPv6 address of the next hop.";
       }
     }

     /* Data node augmentations */

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/rt:static-routes" {
       description
         "This augment defines the 'static' pseudo-protocol
          with data specific to IPv6 unicast.";
       container ipv6 {
         description
           "Support for a 'static' pseudo-protocol instance
            consists of a list of routes.";
         list route {
           key "destination-prefix";
           description
             "A list of static routes.";
           leaf destination-prefix {
             type inet:ipv6-prefix;
             mandatory true;
             description



<span class="grey">Lhotka, et al.               Standards Track                   [Page 41]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-42" id="page-42" name="page-42"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


               "IPv6 destination prefix.";
           }
           leaf description {
             type string;
             description
               "Textual description of the route.";
           }
           container next-hop {
             description
               "Next hop for the route.";
             uses rt:next-hop-content {
               augment "next-hop-options/simple-next-hop" {
                 description
                   "Augments the 'simple-next-hop' case in IPv6 static
                    routes.";
                 leaf next-hop-address {
                   type inet:ipv6-address;
                   description
                     "IPv6 address of the next hop.";
                 }
               }
               augment "next-hop-options/next-hop-list/next-hop-list/"
                     + "next-hop" {
                 description
                   "Augments the 'next-hop-list' case in IPv6 static
                    routes.";
                 leaf next-hop-address {
                   type inet:ipv6-address;
                   description
                     "IPv6 address of the next hop.";
                 }
               }
             }
           }
         }
       }
     }

     /*
      * The subsequent data nodes are obviated and obsoleted
      * by the Network Management Datastore Architecture
      * as described in <a href="rfc8342.html">RFC 8342</a>.
      */
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:routes/rt:route" {
       when "derived-from-or-self(../../rt:address-family,
               'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 42]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-43" id="page-43" name="page-43"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


       }
       status obsolete;
       description
         "This leaf augments an IPv6 unicast route.";
       leaf destination-prefix {
         type inet:ipv6-prefix;
         status obsolete;
         description
           "IPv6 destination prefix.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:routes/rt:route/"
             + "rt:next-hop/rt:next-hop-options/rt:simple-next-hop" {
       when "derived-from-or-self(../../../rt:address-family,
               'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       status obsolete;
       description
         "Augments the 'simple-next-hop' case in IPv6 unicast routes.";
       leaf next-hop-address {
         type inet:ipv6-address;
         status obsolete;
         description
           "IPv6 address of the next hop.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:routes/rt:route/"
             + "rt:next-hop/rt:next-hop-options/rt:next-hop-list/"
             + "rt:next-hop-list/rt:next-hop" {
       when "derived-from-or-self(../../../../../rt:address-family,
               'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       status obsolete;
       description
         "This leaf augments the 'next-hop-list' case of IPv6 unicast
          routes.";
       leaf address {
         type inet:ipv6-address;
         status obsolete;
         description
           "IPv6 address of the next hop.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/"



<span class="grey">Lhotka, et al.               Standards Track                   [Page 43]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-44" id="page-44" name="page-44"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


             + "rt:active-route/rt:input" {
       when "derived-from-or-self(../rt:address-family,
               'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast RIBs.";
       }
       status obsolete;
       description
         "This augment adds the input parameter of the 'active-route'
          action.";
       leaf destination-address {
         type inet:ipv6-address;
         status obsolete;
         description
           "IPv6 destination address.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:active-route/"
             + "rt:output/rt:route" {
       when "derived-from-or-self(../../rt:address-family,
               'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       status obsolete;
       description
         "This augment adds the destination prefix to the reply of the
          'active-route' action.";
       leaf destination-prefix {
         type inet:ipv6-prefix;
         status obsolete;
         description
           "IPv6 destination prefix.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:active-route/"
             + "rt:output/rt:route/rt:next-hop/rt:next-hop-options/"
             + "rt:simple-next-hop" {
       when "derived-from-or-self(../../../rt:address-family,
               'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       status obsolete;
       description
         "Augments the 'simple-next-hop' case in the reply to the
          'active-route' action.";
       leaf next-hop-address {



<span class="grey">Lhotka, et al.               Standards Track                   [Page 44]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-45" id="page-45" name="page-45"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


         type inet:ipv6-address;
         status obsolete;
         description
           "IPv6 address of the next hop.";
       }
     }
     augment "/rt:routing-state/rt:ribs/rt:rib/rt:active-route/"
             + "rt:output/rt:route/rt:next-hop/rt:next-hop-options/"
             + "rt:next-hop-list/rt:next-hop-list/rt:next-hop" {
       when "derived-from-or-self(../../../../../rt:address-family,
               'v6ur:ipv6-unicast')" {
         description
           "This augment is valid only for IPv6 unicast.";
       }
       status obsolete;
       description
         "Augments the 'next-hop-list' case in the reply to the
          'active-route' action.";
       leaf next-hop-address {
         type inet:ipv6-address;
         status obsolete;
         description
           "IPv6 address of the next hop.";
       }
     }
   }

   &lt;CODE ENDS&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20IPv6%20Router%20Advertisements%20Submodule"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  IPv6 Router Advertisements Submodule</span>

   &lt;CODE BEGINS&gt; file "ietf-ipv6-router-advertisements@2018-03-13.yang"

   submodule ietf-ipv6-router-advertisements {
     yang-version "1.1";

     belongs-to ietf-ipv6-unicast-routing {
       prefix "v6ur";
     }

     import ietf-inet-types {
       prefix "inet";
     }

     import ietf-interfaces {
       prefix "if";
       description
         "An 'ietf-interfaces' module version that is compatible with



<span class="grey">Lhotka, et al.               Standards Track                   [Page 45]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-46" id="page-46" name="page-46"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


          the Network Management Datastore Architecture (NMDA)
          is required.";
     }

     import ietf-ip {
       prefix "ip";
       description
         "An 'ietf-ip' module version that is compatible with
          the Network Management Datastore Architecture (NMDA)
          is required.";
     }

     organization
       "IETF NETMOD (Network Modeling) Working Group";
     contact
       "WG Web:   &lt;<a href="https://datatracker.ietf.org/wg/netmod/">https://datatracker.ietf.org/wg/netmod/</a>&gt;
        WG List:  &lt;mailto:rtgwg@ietf.org&gt;

        Editor:   Ladislav Lhotka
                  &lt;mailto:lhotka@nic.cz&gt;
                  Acee Lindem
                  &lt;mailto:acee@cisco.com&gt;
                  Yingzhen Qu
                  &lt;mailto:yingzhen.qu@huawei.com&gt;";

     description
       "This YANG module augments the 'ietf-ip' module with
        parameters for IPv6 Router Advertisements.  The model fully
        conforms to the Network Management Datastore
        Architecture (NMDA).

        Copyright (c) 2018 IETF Trust and the persons
        identified as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).

        This version of this YANG module is part of <a href="rfc8349.html">RFC 8349</a>; see
        the RFC itself for full legal notices.";

     reference
       "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)";

     revision 2018-03-13 {



<span class="grey">Lhotka, et al.               Standards Track                   [Page 46]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-47" id="page-47" name="page-47"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


       description
         "Network Management Datastore Architecture (NMDA) revision.";
       reference
         "<a href="rfc8349.html">RFC 8349</a>: A YANG Data Model for Routing Management
                    (NMDA Version)";
     }

     revision 2016-11-04 {
          description
            "Initial revision.";
          reference
            "<a href="rfc8022.html">RFC 8022</a>: A YANG Data Model for Routing Management";
     }

     augment "/if:interfaces/if:interface/ip:ipv6" {
       description
         "Augments interface configuration with parameters of IPv6
          Router Advertisements.";
       container ipv6-router-advertisements {
         description
           "Support for IPv6 Router Advertisements.";
         leaf send-advertisements {
           type boolean;
           default "false";
           description
             "A flag indicating whether or not the router sends
              periodic Router Advertisements and responds to
              Router Solicitations.";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvSendAdvertisements";
         }
         leaf max-rtr-adv-interval {
           type uint16 {
             range "4..65535";
           }
           units "seconds";
           default "600";
           description
             "The maximum time allowed between sending unsolicited
              multicast Router Advertisements from the interface.";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - MaxRtrAdvInterval";
         }
         leaf min-rtr-adv-interval {
           type uint16 {
             range "3..1350";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 47]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-48" id="page-48" name="page-48"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


           }
           units "seconds";
           must ". &lt;= 0.75 * ../max-rtr-adv-interval" {
             description
               "The value MUST NOT be greater than 75% of
                'max-rtr-adv-interval'.";
           }
           description
             "The minimum time allowed between sending unsolicited
              multicast Router Advertisements from the interface.

              The default value to be used operationally if this
              leaf is not configured is determined as follows:

              - if max-rtr-adv-interval &gt;= 9 seconds, the default
                value is 0.33 * max-rtr-adv-interval;

              - otherwise, it is 0.75 * max-rtr-adv-interval.";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - MinRtrAdvInterval";
         }
         leaf managed-flag {
           type boolean;
           default "false";
           description
             "The value to be placed in the 'Managed address
              configuration' flag field in the Router
              Advertisement.";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvManagedFlag";
         }
         leaf other-config-flag {
           type boolean;
           default "false";
           description
             "The value to be placed in the 'Other configuration'
              flag field in the Router Advertisement.";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvOtherConfigFlag";
         }
         leaf link-mtu {
           type uint32;
           default "0";
           description
             "The value to be placed in MTU options sent by the



<span class="grey">Lhotka, et al.               Standards Track                   [Page 48]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-49" id="page-49" name="page-49"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


              router.  A value of zero indicates that no MTU options
              are sent.";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvLinkMTU";
         }
         leaf reachable-time {
           type uint32 {
             range "0..3600000";
           }
           units "milliseconds";
           default "0";
           description
             "The value to be placed in the Reachable Time field in
              the Router Advertisement messages sent by the router.
              A value of zero means unspecified (by this router).";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvReachableTime";
         }
         leaf retrans-timer {
           type uint32;
           units "milliseconds";
           default "0";
           description
             "The value to be placed in the Retrans Timer field in
              the Router Advertisement messages sent by the router.
              A value of zero means unspecified (by this router).";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvRetransTimer";
         }
         leaf cur-hop-limit {
           type uint8;
           description
             "The value to be placed in the Cur Hop Limit field in
              the Router Advertisement messages sent by the router.
              A value of zero means unspecified (by this router).

              If this parameter is not configured, the device SHOULD
              use the IANA-specified value for the default IPv4
              Time to Live (TTL) parameter that was in effect at the
              time of implementation.";
           reference
             "<a href="rfc3232.html">RFC 3232</a>: Assigned Numbers: <a href="rfc1700.html">RFC 1700</a> is Replaced by
                        an On-line Database
              <a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvCurHopLimit



<span class="grey">Lhotka, et al.               Standards Track                   [Page 49]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-50" id="page-50" name="page-50"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


              IANA: IP Parameters
                    (<a href="https://www.iana.org/assignments/ip-parameters">https://www.iana.org/assignments/ip-parameters</a>)";
         }
         leaf default-lifetime {
           type uint16 {
             range "0..65535";
           }
           units "seconds";
           description
             "The value to be placed in the Router Lifetime field of
              Router Advertisements sent from the interface, in
              seconds.  It MUST be either zero or between
              max-rtr-adv-interval and 9000 seconds.  A value of zero
              indicates that the router is not to be used as a
              default router.  These limits may be overridden by
              specific documents that describe how IPv6 operates over
              different link layers.

              If this parameter is not configured, the device SHOULD
              use a value of 3 * max-rtr-adv-interval.";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvDefaultLifetime";
         }
         container prefix-list {
           description
             "Support for prefixes to be placed in Prefix
              Information options in Router Advertisement messages
              sent from the interface.

              Prefixes that are advertised by default but do not
              have their entries in the child 'prefix' list are
              advertised with the default values of all parameters.

              The link-local prefix SHOULD NOT be included in the
              list of advertised prefixes.";
           reference
             "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6 (IPv6)
                        - AdvPrefixList";
           list prefix {
             key "prefix-spec";
             description
               "Support for an advertised prefix entry.";
             leaf prefix-spec {
               type inet:ipv6-prefix;
               description
                 "IPv6 address prefix.";
             }



<span class="grey">Lhotka, et al.               Standards Track                   [Page 50]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-51" id="page-51" name="page-51"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


             choice control-adv-prefixes {
               default "advertise";
               description
                 "Either (1) the prefix is explicitly removed from the
                  set of advertised prefixes or (2) the parameters with
                  which the prefix is advertised are specified (default
                  case).";
               leaf no-advertise {
                 type empty;
                 description
                   "The prefix will not be advertised.

                    This can be used for removing the prefix from
                    the default set of advertised prefixes.";
               }
               case advertise {
                 leaf valid-lifetime {
                   type uint32;
                   units "seconds";
                   default "2592000";
                   description
                     "The value to be placed in the Valid Lifetime
                      in the Prefix Information option.  The
                      designated value of all 1's (0xffffffff)
                       represents infinity.";
                   reference
                     "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6
                                (IPv6) - AdvValidLifetime";
                 }
                 leaf on-link-flag {
                   type boolean;
                   default "true";
                   description
                     "The value to be placed in the on-link flag
                      ('L-bit') field in the Prefix Information
                      option.";
                   reference
                     "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6
                                (IPv6) - AdvOnLinkFlag";
                 }
                 leaf preferred-lifetime {
                   type uint32;
                   units "seconds";
                   must ". &lt;= ../valid-lifetime" {
                     description
                       "This value MUST NOT be greater than
                        valid-lifetime.";
                   }



<span class="grey">Lhotka, et al.               Standards Track                   [Page 51]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-52" id="page-52" name="page-52"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


                   default "604800";
                   description
                     "The value to be placed in the Preferred
                      Lifetime in the Prefix Information option.
                      The designated value of all 1's (0xffffffff)
                      represents infinity.";
                   reference
                     "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6
                                (IPv6) - AdvPreferredLifetime";
                 }
                 leaf autonomous-flag {
                   type boolean;
                   default "true";
                   description
                     "The value to be placed in the Autonomous Flag
                      field in the Prefix Information option.";
                   reference
                     "<a href="rfc4861.html">RFC 4861</a>: Neighbor Discovery for IP version 6
                                (IPv6) - AdvAutonomousFlag";
                 }
               }
             }
           }
         }
       }
     }

     /*
      * The subsequent data nodes are obviated and obsoleted
      * by the Network Management Datastore Architecture
      * as described in <a href="rfc8342.html">RFC 8342</a>.
      */
     augment "/if:interfaces-state/if:interface/ip:ipv6" {
       status obsolete;
       description
         "Augments interface state data with parameters of IPv6
          Router Advertisements.";
       container ipv6-router-advertisements {
         status obsolete;
         description
           "Parameters of IPv6 Router Advertisements.";
         leaf send-advertisements {
           type boolean;
           status obsolete;
           description
             "A flag indicating whether or not the router sends
              periodic Router Advertisements and responds to
              Router Solicitations.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 52]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-53" id="page-53" name="page-53"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


         }
         leaf max-rtr-adv-interval {
           type uint16 {
             range "4..1800";
           }
           units "seconds";
           status obsolete;
           description
             "The maximum time allowed between sending unsolicited
              multicast Router Advertisements from the interface.";
         }
         leaf min-rtr-adv-interval {
           type uint16 {
             range "3..1350";
           }
           units "seconds";
           status obsolete;
           description
             "The minimum time allowed between sending unsolicited
              multicast Router Advertisements from the interface.";
         }
         leaf managed-flag {
           type boolean;
           status obsolete;
           description
             "The value that is placed in the 'Managed address
              configuration' flag field in the Router Advertisement.";
         }
         leaf other-config-flag {
           type boolean;
           status obsolete;
           description
             "The value that is placed in the 'Other configuration' flag
              field in the Router Advertisement.";
         }
         leaf link-mtu {
           type uint32;
           status obsolete;
           description
             "The value that is placed in MTU options sent by the
              router.  A value of zero indicates that no MTU options
              are sent.";
         }
         leaf reachable-time {
           type uint32 {
             range "0..3600000";
           }
           units "milliseconds";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 53]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-54" id="page-54" name="page-54"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


           status obsolete;
           description
             "The value that is placed in the Reachable Time field in
              the Router Advertisement messages sent by the router.  A
              value of zero means unspecified (by this router).";
         }
         leaf retrans-timer {
           type uint32;
           units "milliseconds";
           status obsolete;
           description
             "The value that is placed in the Retrans Timer field in the
              Router Advertisement messages sent by the router.  A value
              of zero means unspecified (by this router).";
         }
         leaf cur-hop-limit {
           type uint8;
           status obsolete;
           description
             "The value that is placed in the Cur Hop Limit field in the
              Router Advertisement messages sent by the router.  A value
              of zero means unspecified (by this router).";
         }
         leaf default-lifetime {
           type uint16 {
             range "0..9000";
           }
           units "seconds";
           status obsolete;
           description
             "The value that is placed in the Router Lifetime field of
              Router Advertisements sent from the interface, in seconds.
              A value of zero indicates that the router is not to be
              used as a default router.";
         }
         container prefix-list {
           status obsolete;
           description
             "A list of prefixes that are placed in Prefix Information
              options in Router Advertisement messages sent from the
              interface.

              By default, these are all prefixes that the router
              advertises via routing protocols as being on-link for the
              interface from which the advertisement is sent.";
           list prefix {
             key "prefix-spec";
             status obsolete;



<span class="grey">Lhotka, et al.               Standards Track                   [Page 54]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-55" id="page-55" name="page-55"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


             description
               "Advertised prefix entry and its parameters.";
             leaf prefix-spec {
               type inet:ipv6-prefix;
               status obsolete;
               description
                 "IPv6 address prefix.";
             }
             leaf valid-lifetime {
               type uint32;
               units "seconds";
               status obsolete;
               description
                 "The value that is placed in the Valid Lifetime in the
                  Prefix Information option.  The designated value of
                  all 1's (0xffffffff) represents infinity.

                  An implementation SHOULD keep this value constant in
                  consecutive advertisements, except when it is
                  explicitly changed in configuration.";
             }
             leaf on-link-flag {
               type boolean;
               status obsolete;
               description
                 "The value that is placed in the on-link flag ('L-bit')
                  field in the Prefix Information option.";
             }
             leaf preferred-lifetime {
               type uint32;
               units "seconds";
               status obsolete;
               description
                 "The value that is placed in the Preferred Lifetime in
                  the Prefix Information option, in seconds.  The
                  designated value of all 1's (0xffffffff) represents
                  infinity.

                  An implementation SHOULD keep this value constant in
                  consecutive advertisements, except when it is
                  explicitly changed in configuration.";
             }
             leaf autonomous-flag {
               type boolean;
               status obsolete;
               description
                 "The value that is placed in the Autonomous Flag field
                  in the Prefix Information option.";



<span class="grey">Lhotka, et al.               Standards Track                   [Page 55]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-56" id="page-56" name="page-56"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


             }
           }
         }
       }
     }
   }

   &lt;CODE ENDS&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  IANA Considerations</span>

   [<a id="ref-RFC8022" name="ref-RFC8022">RFC8022</a>] registered the following namespace URIs in the "IETF XML
   Registry" [<a href="rfc3688.html" title='"The IETF XML Registry"'>RFC3688</a>].  IANA has updated the references to refer to
   this document.

   URI: urn:ietf:params:xml:ns:yang:ietf-routing
   Registrant Contact: The IESG.
   XML: N/A; the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-ipv4-unicast-routing
   Registrant Contact: The IESG.
   XML: N/A; the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-ipv6-unicast-routing
   Registrant Contact: The IESG.
   XML: N/A; the requested URI is an XML namespace.

   [<a id="ref-RFC8022" name="ref-RFC8022">RFC8022</a>] registered the following YANG modules in the "YANG Module
   Names" registry [<a href="rfc6020.html" title='"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"'>RFC6020</a>].  IANA has updated (1) the modules per this
   document and (2) the references to refer to this document.

   Name:      ietf-routing
   Namespace: urn:ietf:params:xml:ns:yang:ietf-routing
   Prefix:    rt
   Reference: <a href="rfc8349.html">RFC 8349</a>

   Name:      ietf-ipv4-unicast-routing
   Namespace: urn:ietf:params:xml:ns:yang:ietf-ipv4-unicast-routing
   Prefix:    v4ur
   Reference: <a href="rfc8349.html">RFC 8349</a>

   Name:      ietf-ipv6-unicast-routing
   Namespace: urn:ietf:params:xml:ns:yang:ietf-ipv6-unicast-routing
   Prefix:    v6ur
   Reference: <a href="rfc8349.html">RFC 8349</a>






<span class="grey">Lhotka, et al.               Standards Track                   [Page 56]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-57" id="page-57" name="page-57"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   This document registers the following YANG submodule in the "YANG
   Module Names" registry [<a href="rfc6020.html" title='"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"'>RFC6020</a>]:

   Name:      ietf-ipv6-router-advertisements
   Module:    ietf-ipv6-unicast-routing
   Reference: <a href="rfc8349.html">RFC 8349</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Security%20Considerations"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Security Considerations</span>

   The YANG modules specified in this document define a schema for data
   that is designed to be accessed via network management protocols such
   as NETCONF [<a href="rfc6241.html" title='"Network Configuration Protocol (NETCONF)"'>RFC6241</a>] or RESTCONF [<a href="rfc8040.html" title='"RESTCONF Protocol"'>RFC8040</a>].  The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure
   transport is Secure Shell (SSH) [<a href="rfc6242.html" title='"Using the NETCONF Protocol over Secure Shell (SSH)"'>RFC6242</a>].  The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   [<a href="rfc5246.html" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>].

   The NETCONF access control model [<a href="rfc8341.html" title='"Network Configuration Access Control Model"'>RFC8341</a>] provides the means to
   restrict access for particular NETCONF or RESTCONF users to a
   preconfigured subset of all available NETCONF or RESTCONF protocol
   operations and content.

   There are a number of data nodes defined in these YANG modules that
   are writable/creatable/deletable (i.e., config true, which is the
   default).  These data nodes may be considered sensitive or vulnerable
   in some network environments.  Write operations (e.g., edit-config)
   to these data nodes without proper protection can have a negative
   effect on network operations.  These are the subtrees and data nodes
   and their sensitivity/vulnerability:

   /routing/control-plane-protocols/control-plane-protocol:  This list
      specifies the control-plane protocols configured on a device.

   /routing/ribs/rib:  This list specifies the RIBs configured for the
      device.

   Some of the readable data nodes in these YANG modules may be
   considered sensitive or vulnerable in some network environments.  It
   is thus important to control read access (e.g., via get, get-config,
   or notification) to these data nodes.  These are the subtrees and
   data nodes and their sensitivity/vulnerability:

   /routing/control-plane-protocols/control-plane-protocol:  This list
      specifies the control-plane protocols configured on a device.
      Refer to the control-plane models for a list of sensitive
      information.





<span class="grey">Lhotka, et al.               Standards Track                   [Page 57]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-58" id="page-58" name="page-58"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   /routing/ribs/rib:  This list specifies the RIBs and their contents
      for the device.  Access to this information may disclose the
      network topology and/or other information.

   Some of the RPC operations in this YANG module may be considered
   sensitive or vulnerable in some network environments.  It is thus
   important to control access to these operations.  These are the
   operations and their sensitivity/vulnerability:

   /routing/ribs/rib/active-route:  The output from this RPC operation
      returns the route that is being used for a specified destination.
      Access to this information may disclose the network topology or
      relationship (e.g., client/provider).  Additionally, the routes
      used by a network device may be used to mount a subsequent attack
      on traffic traversing the network device.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20References"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.1.%20%20Normative%20References"></a><a class="selflink" href="#section-12.1" name="section-12.1">12.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3688" name="ref-RFC3688">RFC3688</a>]  Mealling, M., "The IETF XML Registry", <a href="https://tools.ietf.org/html/bcp81">BCP 81</a>, <a href="rfc3688.html">RFC 3688</a>,
              DOI 10.17487/RFC3688, January 2004,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3688">https://www.rfc-editor.org/info/rfc3688</a>&gt;.

   [<a id="ref-RFC4861" name="ref-RFC4861">RFC4861</a>]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", <a href="rfc4861.html">RFC 4861</a>,
              DOI 10.17487/RFC4861, September 2007,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4861">https://www.rfc-editor.org/info/rfc4861</a>&gt;.

   [<a id="ref-RFC5246" name="ref-RFC5246">RFC5246</a>]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", <a href="rfc5246.html">RFC 5246</a>,
              DOI 10.17487/RFC5246, August 2008,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5246">https://www.rfc-editor.org/info/rfc5246</a>&gt;.

   [<a id="ref-RFC6020" name="ref-RFC6020">RFC6020</a>]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", <a href="rfc6020.html">RFC 6020</a>,
              DOI 10.17487/RFC6020, October 2010,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6020">https://www.rfc-editor.org/info/rfc6020</a>&gt;.

   [<a id="ref-RFC6241" name="ref-RFC6241">RFC6241</a>]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", <a href="rfc6241.html">RFC 6241</a>, DOI 10.17487/RFC6241, June 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6241">https://www.rfc-editor.org/info/rfc6241</a>&gt;.



<span class="grey">Lhotka, et al.               Standards Track                   [Page 58]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-59" id="page-59" name="page-59"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   [<a id="ref-RFC6242" name="ref-RFC6242">RFC6242</a>]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", <a href="rfc6242.html">RFC 6242</a>, DOI 10.17487/RFC6242, June 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6242">https://www.rfc-editor.org/info/rfc6242</a>&gt;.

   [<a id="ref-RFC6991" name="ref-RFC6991">RFC6991</a>]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              <a href="rfc6991.html">RFC 6991</a>, DOI 10.17487/RFC6991, July 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6991">https://www.rfc-editor.org/info/rfc6991</a>&gt;.

   [<a id="ref-RFC7950" name="ref-RFC7950">RFC7950</a>]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              <a href="rfc7950.html">RFC 7950</a>, DOI 10.17487/RFC7950, August 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7950">https://www.rfc-editor.org/info/rfc7950</a>&gt;.

   [<a id="ref-RFC8022" name="ref-RFC8022">RFC8022</a>]  Lhotka, L. and A. Lindem, "A YANG Data Model for Routing
              Management", <a href="rfc8022.html">RFC 8022</a>, DOI 10.17487/RFC8022,
              November 2016, &lt;<a href="https://www.rfc-editor.org/info/rfc8022">https://www.rfc-editor.org/info/rfc8022</a>&gt;.

   [<a id="ref-RFC8040" name="ref-RFC8040">RFC8040</a>]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", <a href="rfc8040.html">RFC 8040</a>, DOI 10.17487/RFC8040, January 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8040">https://www.rfc-editor.org/info/rfc8040</a>&gt;.

   [<a id="ref-RFC8174" name="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in
              <a href="rfc2119.html">RFC 2119</a> Key Words", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc8174.html">RFC 8174</a>,
              DOI 10.17487/RFC8174, May 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a id="ref-RFC8341" name="ref-RFC8341">RFC8341</a>]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, <a href="rfc8341.html">RFC 8341</a>,
              DOI 10.17487/RFC8341, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8341">https://www.rfc-editor.org/info/rfc8341</a>&gt;.

   [<a id="ref-RFC8342" name="ref-RFC8342">RFC8342</a>]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", <a href="rfc8342.html">RFC 8342</a>, DOI 10.17487/RFC8342, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8342">https://www.rfc-editor.org/info/rfc8342</a>&gt;.

   [<a id="ref-RFC8343" name="ref-RFC8343">RFC8343</a>]  Bjorklund, M., "A YANG Data Model for Interface
              Management", <a href="rfc8343.html">RFC 8343</a>, DOI 10.17487/RFC8343, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8343">https://www.rfc-editor.org/info/rfc8343</a>&gt;.

   [<a id="ref-RFC8344" name="ref-RFC8344">RFC8344</a>]  Bjorklund, M., "A YANG Data Model for IP Management",
              <a href="rfc8344.html">RFC 8344</a>, DOI 10.17487/RFC8344, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8344">https://www.rfc-editor.org/info/rfc8344</a>&gt;.









<span class="grey">Lhotka, et al.               Standards Track                   [Page 59]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-60" id="page-60" name="page-60"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   [<a id="ref-W3C.REC-xml-20081126" name="ref-W3C.REC-xml-20081126">W3C.REC-xml-20081126</a>]
              Bray, T., Paoli, J., Sperberg-McQueen, M., Maler, E., and
              F. Yergeau, "Extensible Markup Language (XML) 1.0
              (Fifth Edition)", World Wide Web Consortium Recommendation
              REC-xml-20081126, November 2008,
              &lt;<a href="https://www.w3.org/TR/2008/REC-xml-20081126">https://www.w3.org/TR/2008/REC-xml-20081126</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.2.%20%20Informative%20References"></a><a class="selflink" href="#section-12.2" name="section-12.2">12.2</a>.  Informative References</span>

   [<a id="ref-RFC7224" name="ref-RFC7224">RFC7224</a>]  Bjorklund, M., "IANA Interface Type YANG Module",
              <a href="rfc7224.html">RFC 7224</a>, DOI 10.17487/RFC7224, May 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7224">https://www.rfc-editor.org/info/rfc7224</a>&gt;.

   [<a id="ref-RFC7895" name="ref-RFC7895">RFC7895</a>]  Bierman, A., Bjorklund, M., and K. Watsen, "YANG Module
              Library", <a href="rfc7895.html">RFC 7895</a>, DOI 10.17487/RFC7895, June 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7895">https://www.rfc-editor.org/info/rfc7895</a>&gt;.

   [<a id="ref-RFC7951" name="ref-RFC7951">RFC7951</a>]  Lhotka, L., "JSON Encoding of Data Modeled with YANG",
              <a href="rfc7951.html">RFC 7951</a>, DOI 10.17487/RFC7951, August 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7951">https://www.rfc-editor.org/info/rfc7951</a>&gt;.

   [<a id="ref-RFC8340" name="ref-RFC8340">RFC8340</a>]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              <a href="https://tools.ietf.org/html/bcp215">BCP 215</a>, <a href="rfc8340.html">RFC 8340</a>, DOI 10.17487/RFC8340, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8340">https://www.rfc-editor.org/info/rfc8340</a>&gt;.

   [<a id="ref-YANG-Guidelines" name="ref-YANG-Guidelines">YANG-Guidelines</a>]
              Bierman, A., "Guidelines for Authors and Reviewers of YANG
              Data Model Documents", Work in Progress,
              <a href="https://tools.ietf.org/html/draft-ietf-netmod-rfc6087bis-20">draft-ietf-netmod-rfc6087bis-20</a>, March 2018.






















<span class="grey">Lhotka, et al.               Standards Track                   [Page 60]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-61" id="page-61" name="page-61"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20The%20Complete%20Schema%20Tree"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  The Complete Schema Tree</span>

   This appendix presents the complete tree of the core routing data
   model.  See [<a href="rfc8340.html" title='"YANG Tree Diagrams"'>RFC8340</a>] for an explanation of the symbols used.  The
   data type of every leaf node is shown near the right end of the
   corresponding line.

   module: ietf-routing
     +--rw routing
     |  +--rw router-id?                 yang:dotted-quad
     |  +--ro interfaces
     |  |  +--ro interface*   if:interface-ref
     |  +--rw control-plane-protocols
     |  |  +--rw control-plane-protocol* [type name]
     |  |     +--rw type             identityref
     |  |     +--rw name             string
     |  |     +--rw description?     string
     |  |     +--rw static-routes
     |  |        +--rw v4ur:ipv4
     |  |        |  +--rw v4ur:route* [destination-prefix]
     |  |        |     +--rw v4ur:destination-prefix
     |  |        |     |       inet:ipv4-prefix
     |  |        |     +--rw v4ur:description?          string
     |  |        |     +--rw v4ur:next-hop
     |  |        |        +--rw (v4ur:next-hop-options)
     |  |        |           +--:(v4ur:simple-next-hop)
     |  |        |           |  +--rw v4ur:outgoing-interface?
     |  |        |           |  |       if:interface-ref
     |  |        |           |  +--rw v4ur:next-hop-address?
     |  |        |           |          inet:ipv4-address
     |  |        |           +--:(v4ur:special-next-hop)
     |  |        |           |  +--rw v4ur:special-next-hop?
     |  |        |           |          enumeration
     |  |        |           +--:(v4ur:next-hop-list)
     |  |        |              +--rw v4ur:next-hop-list
     |  |        |                 +--rw v4ur:next-hop* [index]
     |  |        |                    +--rw v4ur:index
     |  |        |                    |       string
     |  |        |                    +--rw v4ur:outgoing-interface?
     |  |        |                    |       if:interface-ref
     |  |        |                    +--rw v4ur:next-hop-address?
     |  |        |                            inet:ipv4-address
     |  |        +--rw v6ur:ipv6
     |  |           +--rw v6ur:route* [destination-prefix]
     |  |              +--rw v6ur:destination-prefix
     |  |              |       inet:ipv6-prefix
     |  |              +--rw v6ur:description?          string




<span class="grey">Lhotka, et al.               Standards Track                   [Page 61]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-62" id="page-62" name="page-62"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


     |  |              +--rw v6ur:next-hop
     |  |                 +--rw (v6ur:next-hop-options)
     |  |                    +--:(v6ur:simple-next-hop)
     |  |                    |  +--rw v6ur:outgoing-interface?
     |  |                    |  |       if:interface-ref
     |  |                    |  +--rw v6ur:next-hop-address?
     |  |                    |          inet:ipv6-address
     |  |                    +--:(v6ur:special-next-hop)
     |  |                    |  +--rw v6ur:special-next-hop?
     |  |                    |          enumeration
     |  |                    +--:(v6ur:next-hop-list)
     |  |                       +--rw v6ur:next-hop-list
     |  |                          +--rw v6ur:next-hop* [index]
     |  |                             +--rw v6ur:index
     |  |                             |       string
     |  |                             +--rw v6ur:outgoing-interface?
     |  |                             |       if:interface-ref
     |  |                             +--rw v6ur:next-hop-address?
     |  |                                     inet:ipv6-address
     |  +--rw ribs
     |     +--rw rib* [name]
     |        +--rw name              string
     |        +--rw address-family    identityref
     |        +--ro default-rib?      boolean {multiple-ribs}?
     |        +--ro routes
     |        |  +--ro route*
     |        |     +--ro route-preference?          route-preference
     |        |     +--ro next-hop
     |        |     |  +--ro (next-hop-options)
     |        |     |     +--:(simple-next-hop)
     |        |     |     |  +--ro outgoing-interface?
     |        |     |     |  |       if:interface-ref
     |        |     |     |  +--ro v4ur:next-hop-address?
     |        |     |     |  |       inet:ipv4-address
     |        |     |     |  +--ro v6ur:next-hop-address?
     |        |     |     |          inet:ipv6-address
     |        |     |     +--:(special-next-hop)
     |        |     |     |  +--ro special-next-hop?        enumeration
     |        |     |     +--:(next-hop-list)
     |        |     |        +--ro next-hop-list
     |        |     |           +--ro next-hop*
     |        |     |              +--ro outgoing-interface?
     |        |     |              |       if:interface-ref
     |        |     |              +--ro v4ur:address?
     |        |     |              |       inet:ipv4-address
     |        |     |              +--ro v6ur:address?
     |        |     |                      inet:ipv6-address




<span class="grey">Lhotka, et al.               Standards Track                   [Page 62]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-63" id="page-63" name="page-63"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


     |        |     +--ro source-protocol            identityref
     |        |     +--ro active?                    empty
     |        |     +--ro last-updated?              yang:date-and-time
     |        |     +--ro v4ur:destination-prefix?   inet:ipv4-prefix
     |        |     +--ro v6ur:destination-prefix?   inet:ipv6-prefix
     |        +---x active-route
     |        |  +---w input
     |        |  |  +---w v4ur:destination-address?   inet:ipv4-address
     |        |  |  +---w v6ur:destination-address?   inet:ipv6-address
     |        |  +--ro output
     |        |     +--ro route
     |        |        +--ro next-hop
     |        |        |  +--ro (next-hop-options)
     |        |        |     +--:(simple-next-hop)
     |        |        |     |  +--ro outgoing-interface?
     |        |        |     |  |       if:interface-ref
     |        |        |     |  +--ro v4ur:next-hop-address?
     |        |        |     |  |       inet:ipv4-address
     |        |        |     |  +--ro v6ur:next-hop-address?
     |        |        |     |          inet:ipv6-address
     |        |        |     +--:(special-next-hop)
     |        |        |     |  +--ro special-next-hop?
     |        |        |     |          enumeration
     |        |        |     +--:(next-hop-list)
     |        |        |        +--ro next-hop-list
     |        |        |           +--ro next-hop*
     |        |        |              +--ro outgoing-interface?
     |        |        |              |       if:interface-ref
     |        |        |              +--ro v4ur:next-hop-address?
     |        |        |              |       inet:ipv4-address
     |        |        |              +--ro v6ur:next-hop-address?
     |        |        |                      inet:ipv6-address
     |        |        +--ro source-protocol            identityref
     |        |        +--ro active?                    empty
     |        |        +--ro last-updated?
     |        |        |       yang:date-and-time
     |        |        +--ro v4ur:destination-prefix?
     |        |        |       inet:ipv4-prefix
     |        |        +--ro v6ur:destination-prefix?
     |        |                inet:ipv6-prefix
     |        +--rw description?      string
     o--ro routing-state
        o--ro router-id?                 yang:dotted-quad
        o--ro interfaces
        |  o--ro interface*   if:interface-state-ref






<span class="grey">Lhotka, et al.               Standards Track                   [Page 63]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-64" id="page-64" name="page-64"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


        o--ro control-plane-protocols
        |  o--ro control-plane-protocol* [type name]
        |     o--ro type    identityref
        |     o--ro name    string
        o--ro ribs
           o--ro rib* [name]
              o--ro name              string
              o--ro address-family    identityref
              o--ro default-rib?      boolean {multiple-ribs}?
              o--ro routes
              |  o--ro route*
              |     o--ro route-preference?          route-preference
              |     o--ro next-hop
              |     |  o--ro (next-hop-options)
              |     |     o--:(simple-next-hop)
              |     |     |  o--ro outgoing-interface?
              |     |     |  |       if:interface-ref
              |     |     |  o--ro v4ur:next-hop-address?
              |     |     |  |       inet:ipv4-address
              |     |     |  o--ro v6ur:next-hop-address?
              |     |     |          inet:ipv6-address
              |     |     o--:(special-next-hop)
              |     |     |  o--ro special-next-hop?        enumeration
              |     |     o--:(next-hop-list)
              |     |        o--ro next-hop-list
              |     |           o--ro next-hop*
              |     |              o--ro outgoing-interface?
              |     |              |       if:interface-ref
              |     |              o--ro v4ur:address?
              |     |              |       inet:ipv4-address
              |     |              o--ro v6ur:address?
              |     |                      inet:ipv6-address
              |     o--ro source-protocol            identityref
              |     o--ro active?                    empty
              |     o--ro last-updated?              yang:date-and-time
              |     o--ro v4ur:destination-prefix?   inet:ipv4-prefix
              |     o--ro v6ur:destination-prefix?   inet:ipv6-prefix
              o---x active-route
                 o---w input
                 |  o---w v4ur:destination-address?   inet:ipv4-address
                 |  o---w v6ur:destination-address?   inet:ipv6-address
                 o--ro output









<span class="grey">Lhotka, et al.               Standards Track                   [Page 64]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-65" id="page-65" name="page-65"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


                    o--ro route
                       o--ro next-hop
                       |  o--ro (next-hop-options)
                       |     o--:(simple-next-hop)
                       |     |  o--ro outgoing-interface?
                       |     |  |       if:interface-ref
                       |     |  o--ro v4ur:next-hop-address?
                       |     |  |       inet:ipv4-address
                       |     |  o--ro v6ur:next-hop-address?
                       |     |          inet:ipv6-address
                       |     o--:(special-next-hop)
                       |     |  o--ro special-next-hop?
                       |     |          enumeration
                       |     o--:(next-hop-list)
                       |        o--ro next-hop-list
                       |           o--ro next-hop*
                       |              o--ro outgoing-interface?
                       |              |       if:interface-ref
                       |              o--ro v4ur:next-hop-address?
                       |              |       inet:ipv4-address
                       |              o--ro v6ur:next-hop-address?
                       |                      inet:ipv6-address
                       o--ro source-protocol            identityref
                       o--ro active?                    empty
                       o--ro last-updated?
                       |       yang:date-and-time
                       o--ro v4ur:destination-prefix?
                       |       inet:ipv4-prefix
                       o--ro v6ur:destination-prefix?
                               inet:ipv6-prefix
   module: ietf-ipv6-unicast-routing
     augment /if:interfaces/if:interface/ip:ipv6:
       +--rw ipv6-router-advertisements
          +--rw send-advertisements?    boolean
          +--rw max-rtr-adv-interval?   uint16
          +--rw min-rtr-adv-interval?   uint16
          +--rw managed-flag?           boolean
          +--rw other-config-flag?      boolean
          +--rw link-mtu?               uint32
          +--rw reachable-time?         uint32
          +--rw retrans-timer?          uint32
          +--rw cur-hop-limit?          uint8
          +--rw default-lifetime?       uint16
          +--rw prefix-list
             +--rw prefix* [prefix-spec]
                +--rw prefix-spec           inet:ipv6-prefix





<span class="grey">Lhotka, et al.               Standards Track                   [Page 65]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-66" id="page-66" name="page-66"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


                +--rw (control-adv-prefixes)?
                   +--:(no-advertise)
                   |  +--rw no-advertise?         empty
                   +--:(advertise)
                      +--rw valid-lifetime?       uint32
                      +--rw on-link-flag?         boolean
                      +--rw preferred-lifetime?   uint32
                      +--rw autonomous-flag?      boolean
     augment /if:interfaces-state/if:interface/ip:ipv6:
       o--ro ipv6-router-advertisements
          o--ro send-advertisements?    boolean
          o--ro max-rtr-adv-interval?   uint16
          o--ro min-rtr-adv-interval?   uint16
          o--ro managed-flag?           boolean
          o--ro other-config-flag?      boolean
          o--ro link-mtu?               uint32
          o--ro reachable-time?         uint32
          o--ro retrans-timer?          uint32
          o--ro cur-hop-limit?          uint8
          o--ro default-lifetime?       uint16
          o--ro prefix-list
             o--ro prefix* [prefix-spec]
                o--ro prefix-spec           inet:ipv6-prefix
                o--ro valid-lifetime?       uint32
                o--ro on-link-flag?         boolean
                o--ro preferred-lifetime?   uint32
                o--ro autonomous-flag?      boolean

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20B.%20%20Minimum%20Implementation"></a><a class="selflink" href="#appendix-B" name="appendix-B">Appendix B</a>.  Minimum Implementation</span>

   Some parts and options of the core routing model, such as
   user-defined RIBs, are intended only for advanced routers.  This
   appendix gives basic non-normative guidelines for implementing a bare
   minimum of available functions.  Such an implementation may be used
   for hosts or very simple routers.

   A minimum implementation does not support the "multiple-ribs"
   feature.  This means that a single system-controlled RIB is available
   for each supported address family -- IPv4, IPv6, or both.  These RIBs
   are also the default RIBs.  No user-controlled RIBs are allowed.

   In addition to the mandatory instance of the "direct"
   pseudo-protocol, a minimum implementation should support configuring
   instance(s) of the "static" pseudo-protocol.

   For hosts that are never intended to act as routers, the ability to
   turn on sending IPv6 Router Advertisements (<a href="#section-5.4">Section 5.4</a>) should be
   removed.



<span class="grey">Lhotka, et al.               Standards Track                   [Page 66]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-67" id="page-67" name="page-67"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   Platforms with severely constrained resources may use deviations for
   restricting the data model, e.g., limiting the number of "static"
   control-plane protocol instances.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20C.%20%20Example%3A%20Adding%20a%20New%20Control-Plane%20Protocol"></a><a class="selflink" href="#appendix-C" name="appendix-C">Appendix C</a>.  Example: Adding a New Control-Plane Protocol</span>

   This appendix demonstrates how the core routing data model can be
   extended to support a new control-plane protocol.  The YANG module
   "example-rip" shown below is intended as an illustration rather than
   a real definition of a data model for the Routing Information
   Protocol (RIP).  For the sake of brevity, this module does not obey
   all the guidelines specified in [<a href="#ref-YANG-Guidelines" title='"Guidelines for Authors and Reviewers of YANG Data Model Documents"'>YANG-Guidelines</a>].  See also
   <a href="#section-5.3.2">Section 5.3.2</a>.

   module example-rip {

     yang-version "1.1";
     namespace "http://example.com/rip";
     prefix "rip";

     import ietf-interfaces {
       prefix "if";
     }

     import ietf-routing {
       prefix "rt";
     }

     identity rip {
       base rt:routing-protocol;
       description
         "Identity for the Routing Information Protocol (RIP).";
     }

     typedef rip-metric {
       type uint8 {
         range "0..16";
       }
     }












<span class="grey">Lhotka, et al.               Standards Track                   [Page 67]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-68" id="page-68" name="page-68"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


     grouping route-content {
       description
         "This grouping defines RIP-specific route attributes.";
       leaf metric {
         type rip-metric;
       }
       leaf tag {
         type uint16;
         default "0";
         description
           "This leaf may be used to carry additional information,
            e.g., an autonomous system (AS) number.";
       }
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:routes/rt:route" {
       when "derived-from-or-self(rt:source-protocol, 'rip:rip')" {
         description
           "This augment is only valid for a route whose source
            protocol is RIP.";
       }
       description
         "RIP-specific route attributes.";
       uses route-content;
     }

     augment "/rt:routing/rt:ribs/rt:rib/rt:active-route/"
           + "rt:output/rt:route" {
       description
         "RIP-specific route attributes in the output of an
          'active-route' RPC.";
       uses route-content;
     }

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol" {
       when "derived-from-or-self(rt:type,'rip:rip')" {
         description
           "This augment is only valid for a routing protocol instance
            of type 'rip'.";
       }
       container rip {
         presence
           "RIP configuration";
         description
           "RIP instance configuration.";
         container interfaces {




<span class="grey">Lhotka, et al.               Standards Track                   [Page 68]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-69" id="page-69" name="page-69"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


           description
             "Per-interface RIP configuration.";
           list interface {
             key "name";
             description
               "RIP is enabled on interfaces that have an entry in this
                list, unless 'enabled' is set to 'false' for that
                entry.";
             leaf name {
               type if:interface-ref;
             }
             leaf enabled {
               type boolean;
               default "true";
             }
             leaf metric {
               type rip-metric;
               default "1";
             }
           }
         }
         leaf update-interval {
           type uint8 {
             range "10..60";
           }
           units "seconds";
           default "30";
           description
             "Time interval between periodic updates.";
         }
       }
     }
   }


















<span class="grey">Lhotka, et al.               Standards Track                   [Page 69]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-70" id="page-70" name="page-70"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20D.%20%20Data%20Tree%20Example"></a><a class="selflink" href="#appendix-D" name="appendix-D">Appendix D</a>.  Data Tree Example</span>

   This section contains an example of an instance data tree from the
   operational state, in JSON encoding [<a href="rfc7951.html" title='"JSON Encoding of Data Modeled with YANG"'>RFC7951</a>].  (This example
   includes "iana-if-type", which is defined in [<a href="rfc7224.html" title='"IANA Interface Type YANG Module"'>RFC7224</a>].)

   The data conforms to a data model that is defined by the following
   YANG library specification [<a href="rfc7895.html" title='"YANG Module Library"'>RFC7895</a>]:

    {
      "ietf-yang-library:modules-state": {
        "module-set-id": "c2e1f54169aa7f36e1a6e8d0865d441d3600f9c4",
        "module": [
          {
            "name": "ietf-routing",
            "revision": "2018-03-13",
            "feature": [
              "multiple-ribs",
              "router-id"
            ],
            "namespace": "urn:ietf:params:xml:ns:yang:ietf-routing",
            "conformance-type": "implement"
          },
          {
            "name": "ietf-ipv4-unicast-routing",
            "revision": "2018-03-13",
            "namespace":
              "urn:ietf:params:xml:ns:yang:ietf-ipv4-unicast-routing",
            "conformance-type": "implement"
          },
          {
            "name": "ietf-ipv6-unicast-routing",
            "revision": "2018-03-13",
            "namespace":
              "urn:ietf:params:xml:ns:yang:ietf-ipv6-unicast-routing",
            "conformance-type": "implement",
            "submodule": [
              {
                "name": "ietf-ipv6-router-advertisements",
                "revision": "2018-03-13"
              }
            ]
          },
          {
            "name": "ietf-interfaces",
            "revision": "2018-02-20",
            "namespace": "urn:ietf:params:xml:ns:yang:ietf-interfaces",
            "conformance-type": "implement"



<span class="grey">Lhotka, et al.               Standards Track                   [Page 70]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-71" id="page-71" name="page-71"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


          },
          {
            "name": "ietf-inet-types",
            "namespace": "urn:ietf:params:xml:ns:yang:ietf-inet-types",
            "revision": "2013-07-15",
            "conformance-type": "import"
          },
          {
            "name": "ietf-yang-types",
            "namespace": "urn:ietf:params:xml:ns:yang:ietf-yang-types",
            "revision": "2013-07-15",
            "conformance-type": "import"
          },
          {
            "name": "iana-if-type",
            "namespace": "urn:ietf:params:xml:ns:yang:iana-if-type",
            "revision": "2014-05-08",
            "conformance-type": "implement"
          },
          {
            "name": "ietf-ip",
            "revision": "2018-02-22",
            "namespace": "urn:ietf:params:xml:ns:yang:ietf-ip",
            "conformance-type": "implement"
          }
        ]
      }
    }























<span class="grey">Lhotka, et al.               Standards Track                   [Page 71]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-72" id="page-72" name="page-72"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


   A simple network setup as shown in Figure 2 is assumed: router "A"
   uses static default routes with the "ISP" router as the next hop.
   IPv6 Router Advertisements are configured only on the "eth1"
   interface and disabled on the upstream "eth0" interface.

                   +-----------------+
                   |                 |
                   |    Router ISP   |
                   |                 |
                   +--------+--------+
                            |2001:db8:0:1::2
                            |192.0.2.2
                            |
                            |
                            |2001:db8:0:1::1
                        eth0|192.0.2.1
                   +--------+--------+
                   |                 |
                   |     Router A    |
                   |                 |
                   +--------+--------+
                        eth1|198.51.100.1
                            |2001:db8:0:2::1
                            |

                Figure 2: Example of Network Configuration

   The instance data tree could then be as follows:

   {
     "ietf-interfaces:interfaces": {
       "interface": [
         {
           "name": "eth0",
           "type": "iana-if-type:ethernetCsmacd",
           "description": "Uplink to ISP.",
           "phys-address": "00:0C:42:E5:B1:E9",
           "oper-status": "up",
           "statistics": {
             "discontinuity-time": "2015-10-24T17:11:27+02:00"
           },
           "ietf-ip:ipv4": {
             "forwarding": true,
             "mtu": 1500,
             "address": [
               {
                 "ip": "192.0.2.1",
                 "prefix-length": 24



<span class="grey">Lhotka, et al.               Standards Track                   [Page 72]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-73" id="page-73" name="page-73"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


               }
             ]
           },
           "ietf-ip:ipv6": {
             "forwarding": true,
             "mtu": 1500,
             "address": [
               {
                 "ip": "2001:0db8:0:1::1",
                 "prefix-length": 64
               }
             ],
             "autoconf": {
               "create-global-addresses": false
             },
             "ietf-ipv6-unicast-routing:ipv6-router-advertisements": {
               "send-advertisements": false
             }
           }
         },
         {
           "name": "eth1",
           "type": "iana-if-type:ethernetCsmacd",
           "description": "Interface to the internal network.",
           "phys-address": "00:0C:42:E5:B1:EA",
           "oper-status": "up",
           "statistics": {
             "discontinuity-time": "2015-10-24T17:11:29+02:00"
           },
           "ietf-ip:ipv4": {
             "forwarding": true,
             "mtu": 1500,
             "address": [
               {
                 "ip": "198.51.100.1",
                 "prefix-length": 24
               }
             ]
           },
           "ietf-ip:ipv6": {
             "forwarding": true,
             "mtu": 1500,
             "address": [
               {
                 "ip": "2001:0db8:0:2::1",
                 "prefix-length": 64
               }
             ],



<span class="grey">Lhotka, et al.               Standards Track                   [Page 73]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-74" id="page-74" name="page-74"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


             "autoconf": {
               "create-global-addresses": false
             },
             "ietf-ipv6-unicast-routing:ipv6-router-advertisements": {
               "send-advertisements": true,
               "prefix-list": {
                 "prefix": [
                   {
                     "prefix-spec": "2001:db8:0:2::/64"
                   }
                 ]
               }
             }
           }
         }
       ]
     },

     "ietf-routing:routing": {
       "router-id": "192.0.2.1",
       "control-plane-protocols": {
         "control-plane-protocol": [
           {
             "type": "ietf-routing:static",
             "name": "st0",
             "description":
               "Static routing is used for the internal network.",
             "static-routes": {
               "ietf-ipv4-unicast-routing:ipv4": {
                 "route": [
                   {
                     "destination-prefix": "0.0.0.0/0",
                     "next-hop": {
                       "next-hop-address": "192.0.2.2"
                     }
                   }
                 ]
               },
               "ietf-ipv6-unicast-routing:ipv6": {
                 "route": [
                   {
                     "destination-prefix": "::/0",
                     "next-hop": {
                       "next-hop-address": "2001:db8:0:1::2"
                     }
                   }
                 ]
               }



<span class="grey">Lhotka, et al.               Standards Track                   [Page 74]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-75" id="page-75" name="page-75"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


             }
           }
         ]
       },
       "ribs": {
         "rib": [
           {
             "name": "ipv4-master",
             "address-family":
               "ietf-ipv4-unicast-routing:ipv4-unicast",
             "default-rib": true,
             "routes": {
               "route": [
                 {
                   "ietf-ipv4-unicast-routing:destination-prefix":
                     "192.0.2.1/24",
                   "next-hop": {
                     "outgoing-interface": "eth0"
                   },
                   "route-preference": 0,
                   "source-protocol": "ietf-routing:direct",
                   "last-updated": "2015-10-24T17:11:27+02:00"
                 },
                 {
                   "ietf-ipv4-unicast-routing:destination-prefix":
                     "198.51.100.0/24",
                   "next-hop": {
                     "outgoing-interface": "eth1"
                   },
                   "source-protocol": "ietf-routing:direct",
                   "route-preference": 0,
                   "last-updated": "2015-10-24T17:11:27+02:00"
                 },
                 {
                   "ietf-ipv4-unicast-routing:destination-prefix":
                     "0.0.0.0/0",
                   "source-protocol": "ietf-routing:static",
                   "route-preference": 5,
                   "next-hop": {
                     "ietf-ipv4-unicast-routing:next-hop-address":
                       "192.0.2.2"
                   },
                   "last-updated": "2015-10-24T18:02:45+02:00"
                 }
               ]
             }
           },
           {



<span class="grey">Lhotka, et al.               Standards Track                   [Page 75]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-76" id="page-76" name="page-76"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


             "name": "ipv6-master",
             "address-family":
               "ietf-ipv6-unicast-routing:ipv6-unicast",
             "default-rib": true,
             "routes": {
               "route": [
                 {
                   "ietf-ipv6-unicast-routing:destination-prefix":
                     "2001:db8:0:1::/64",
                   "next-hop": {
                     "outgoing-interface": "eth0"
                   },
                   "source-protocol": "ietf-routing:direct",
                   "route-preference": 0,
                   "last-updated": "2015-10-24T17:11:27+02:00"
                 },
                 {
                   "ietf-ipv6-unicast-routing:destination-prefix":
                     "2001:db8:0:2::/64",
                   "next-hop": {
                     "outgoing-interface": "eth1"
                   },
                   "source-protocol": "ietf-routing:direct",
                   "route-preference": 0,
                   "last-updated": "2015-10-24T17:11:27+02:00"
                 },
                 {
                   "ietf-ipv6-unicast-routing:destination-prefix":
                     "::/0",
                   "next-hop": {
                     "ietf-ipv6-unicast-routing:next-hop-address":
                       "2001:db8:0:1::2"
                   },
                   "source-protocol": "ietf-routing:static",
                   "route-preference": 5,
                   "last-updated": "2015-10-24T18:02:45+02:00"
                 }
               ]
             }
           }
         ]
       }
     }
   }







<span class="grey">Lhotka, et al.               Standards Track                   [Page 76]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-77" id="page-77" name="page-77"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20E.%20%20NETCONF%20Get%20Data%20Reply%20Example"></a><a class="selflink" href="#appendix-E" name="appendix-E">Appendix E</a>.  NETCONF Get Data Reply Example</span>

   This section gives an example of an XML [<a href="#ref-W3C.REC-xml-20081126" title='"Extensible Markup Language (XML) 1.0 (Fifth Edition)"'>W3C.REC-xml-20081126</a>] reply
   to the NETCONF &lt;get-data&gt; request for &lt;operational&gt; for a device that
   implements the example data models above.

   &lt;rpc-reply
    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
    message-id="101"&gt;
    &lt;data&gt;
      &lt;routing
        xmlns="urn:ietf:params:xml:ns:yang:ietf-routing"
        xmlns:or="urn:ietf:params:xml:ns:yang:ietf-origin"&gt;

        &lt;router-id or:origin="or:intended"&gt;192.0.2.1&lt;/router-id&gt;
        &lt;control-plane-protocols or:origin="or:intended"&gt;
          &lt;control-plane-protocol&gt;
            &lt;type&gt;ietf-routing:static&lt;/type&gt;
            &lt;name&gt;static-routing-protocol&lt;/name&gt;
            &lt;static-routes&gt;
              &lt;ietf-ipv4-unicast-routing:ipv4&gt;
                &lt;route&gt;
                  &lt;destination-prefix&gt;0.0.0.0/0&lt;/destination-prefix&gt;
                  &lt;next-hop&gt;
                    &lt;next-hop-address&gt;192.0.2.2&lt;/next-hop-address&gt;
                  &lt;/next-hop&gt;
                &lt;/route&gt;
              &lt;/ietf-ipv4-unicast-routing:ipv4&gt;
              &lt;ietf-ipv6-unicast-routing:ipv6&gt;
                &lt;route&gt;
                  &lt;destination-prefix&gt;::/0&lt;/destination-prefix&gt;
                  &lt;next-hop&gt;
                    &lt;next-hop-address&gt;2001:db8:0:1::2&lt;/next-hop-address&gt;
                  &lt;/next-hop&gt;
                &lt;/route&gt;
              &lt;/ietf-ipv6-unicast-routing:ipv6&gt;
            &lt;/static-routes&gt;
          &lt;/control-plane-protocol&gt;
        &lt;/control-plane-protocols&gt;

        &lt;ribs&gt;
          &lt;rib or:origin="or:intended"&gt;
            &lt;name&gt;ipv4-master&lt;/name&gt;
            &lt;address-family&gt;
              ietf-ipv4-unicast-routing:ipv4-unicast
            &lt;/address-family&gt;
            &lt;default-rib&gt;true&lt;/default-rib&gt;
            &lt;routes&gt;



<span class="grey">Lhotka, et al.               Standards Track                   [Page 77]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-78" id="page-78" name="page-78"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


              &lt;route&gt;
                &lt;ietf-ipv4-unicast-routing:destination-prefix&gt;
                  192.0.2.1/24
                &lt;/ietf-ipv4-unicast-routing:destination-prefix&gt;
                &lt;next-hop&gt;
                  &lt;outgoing-interface&gt;eth0&lt;/outgoing-interface&gt;
                &lt;/next-hop&gt;
                &lt;route-preference&gt;0&lt;/route-preference&gt;
                &lt;source-protocol&gt;ietf-routing:direct&lt;/source-protocol&gt;
                &lt;last-updated&gt;2015-10-24T17:11:27+02:00&lt;/last-updated&gt;
              &lt;/route&gt;
              &lt;route&gt;
                &lt;ietf-ipv4-unicast-routing:destination-prefix&gt;
                  198.51.100.0/24
                &lt;/ietf-ipv4-unicast-routing:destination-prefix&gt;
                &lt;next-hop&gt;
                  &lt;outgoing-interface&gt;eth1&lt;/outgoing-interface&gt;
                &lt;/next-hop&gt;
                &lt;route-preference&gt;0&lt;/route-preference&gt;
                &lt;source-protocol&gt;ietf-routing:direct&lt;/source-protocol&gt;
                &lt;last-updated&gt;2015-10-24T17:11:27+02:00&lt;/last-updated&gt;
              &lt;/route&gt;
              &lt;route&gt;
                &lt;ietf-ipv4-unicast-routing:destination-prefix&gt;0.0.0.0/0
                &lt;/ietf-ipv4-unicast-routing:destination-prefix&gt;
                &lt;next-hop&gt;
                  &lt;ietf-ipv4-unicast-routing:next-hop-address&gt;192.0.2.2
                  &lt;/ietf-ipv4-unicast-routing:next-hop-address&gt;
                &lt;/next-hop&gt;
                &lt;route-preference&gt;5&lt;/route-preference&gt;
                &lt;source-protocol&gt;ietf-routing:static&lt;/source-protocol&gt;
                &lt;last-updated&gt;2015-10-24T18:02:45+02:00&lt;/last-updated&gt;
              &lt;/route&gt;
            &lt;/routes&gt;
          &lt;/rib&gt;
          &lt;rib or:origin="or:intended"&gt;
            &lt;name&gt;ipv6-master&lt;/name&gt;
            &lt;address-family&gt;
              ietf-ipv6-unicast-routing:ipv6-unicast
            &lt;/address-family&gt;
            &lt;default-rib&gt;true&lt;/default-rib&gt;
            &lt;routes&gt;
              &lt;route&gt;
                &lt;ietf-ipv6-unicast-routing:destination-prefix&gt;
                  2001:db8:0:1::/64
                &lt;/ietf-ipv6-unicast-routing:destination-prefix&gt;
                &lt;next-hop&gt;
                  &lt;outgoing-interface&gt;eth0&lt;/outgoing-interface&gt;



<span class="grey">Lhotka, et al.               Standards Track                   [Page 78]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-79" id="page-79" name="page-79"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


                &lt;/next-hop&gt;
                &lt;route-preference&gt;0&lt;/route-preference&gt;
                &lt;source-protocol&gt;ietf-routing:direct&lt;/source-protocol&gt;
                &lt;last-updated&gt;2015-10-24T17:11:27+02:00&lt;/last-updated&gt;
              &lt;/route&gt;
              &lt;route&gt;
                &lt;ietf-ipv6-unicast-routing:destination-prefix&gt;
                  2001:db8:0:2::/64
                &lt;/ietf-ipv6-unicast-routing:destination-prefix&gt;
                &lt;next-hop&gt;
                  &lt;outgoing-interface&gt;eth1&lt;/outgoing-interface&gt;
                &lt;/next-hop&gt;
                &lt;route-preference&gt;0&lt;/route-preference&gt;
                &lt;source-protocol&gt;ietf-routing:direct&lt;/source-protocol&gt;
                &lt;last-updated&gt;2015-10-24T17:11:27+02:00&lt;/last-updated&gt;
              &lt;/route&gt;
              &lt;route&gt;
                &lt;ietf-ipv6-unicast-routing:destination-prefix&gt;::/0
                &lt;/ietf-ipv6-unicast-routing:destination-prefix&gt;
                &lt;next-hop&gt;
                  &lt;ietf-ipv6-unicast-routing:next-hop-address&gt;
                    2001:db8:0:1::2
                  &lt;/ietf-ipv6-unicast-routing:next-hop-address&gt;
                &lt;/next-hop&gt;
                &lt;route-preference&gt;5&lt;/route-preference&gt;
                &lt;source-protocol&gt;ietf-routing:static&lt;/source-protocol&gt;
                &lt;last-updated&gt;2015-10-24T18:02:45+02:00&lt;/last-updated&gt;
              &lt;/route&gt;
            &lt;/routes&gt;
          &lt;/rib&gt;
        &lt;/ribs&gt;
      &lt;/routing&gt;
    &lt;/data&gt;
   &lt;/rpc-reply&gt;

















<span class="grey">Lhotka, et al.               Standards Track                   [Page 79]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-80" id="page-80" name="page-80"> </a>
<span class="grey"><a href="rfc8349.html">RFC 8349</a>                 YANG Routing Management              March 2018</span>


Acknowledgments

   The authors wish to thank Nitin Bahadur, Martin Bjorklund, Dean
   Bogdanovic, Joe Clarke, Francis Dupont, Jeff Haas, Joel Halpern,
   Wes Hardaker, Jia He, Sriganesh Kini, Suresh Krishnan,
   David Lamparter, Xiang Li, Stephane Litkowski, Andrew McGregor,
   Jan Medved, Thomas Morin, Tom Petch, Bruno Rijsman,
   Juergen Schoenwaelder, Phil Shafer, Dave Thaler, Vladimir Vassilev,
   Rob Wilton, Yi Yang, Derek Man-Kit Yeung, and Jeffrey Zhang for their
   helpful comments and suggestions.

Authors' Addresses

   Ladislav Lhotka
   CZ.NIC

   Email: lhotka@nic.cz


   Acee Lindem
   Cisco Systems

   Email: acee@cisco.com


   Yingzhen Qu
   Huawei
   2330 Central Expressway
   Santa Clara, CA  95050
   United States of America

   Email: yingzhen.qu@huawei.com



















Lhotka, et al.               Standards Track                   [Page 80]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc8349 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:04 GMT --></html>