<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc8362 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:17 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.127" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-acee-ospfv3-lsa-extend" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:8362" name="DC.Identifier"/>
<meta content="April, 2018" name="DC.Date.Issued"/>
<meta content="Baker, Fred" name="DC.Creator"/>
<meta content="Goethals, Dirk" name="DC.Creator"/>
<meta content="Lindem, Acee" name="DC.Creator"/>
<meta content="Roy, Abhay" name="DC.Creator"/>
<meta content="Vallem, Veerendranatha" name="DC.Creator"/>
<meta content='OSPFv3 requires functional extension beyond what can readily be done
with the fixed-format Link State Advertisement (LSA) as described in
RFC 5340. Without LSA extension, attributes associated with OSPFv3
links and advertised IPv6 prefixes must be advertised in separate LSAs
and correlated to the fixed-format LSAs. This document extends the LSA
format by encoding the existing OSPFv3 LSA information in Type-Length-
Value (TLV) tuples and allowing advertisement of additional
information with additional TLVs. Backward-compatibility mechanisms
are also described.  This document updates RFC 5340, "OSPF for IPv6",
and RFC 5838, "Support of Address Families in OSPFv3", by providing
TLV-based encodings for the base OSPFv3 unicast support and OSPFv3
address family support.' name="DC.Description.Abstract"/>
<meta content="OSPFv3 Link State Advertisement (LSA) Extensibility" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 8362 - OSPFv3 Link State Advertisement (LSA) Extensibility</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8362.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8362" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-ospf-ospfv3-lsa-extend" title="draft-ietf-ospf-ospfv3-lsa-extend">draft-ietf-ospf...</a>] [<a href="https://datatracker.ietf.org/doc/rfc8362" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8362" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8362" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                         A. Lindem
Request for Comments: 8362                                        A. Roy
Updates: <a href="rfc5340.html">5340</a>, <a href="rfc5838.html">5838</a>                                        Cisco Systems
Category: Standards Track                                    D. Goethals
ISSN: 2070-1721                                                    Nokia
                                                         V. Reddy Vallem

                                                                F. Baker
                                                              April 2018


          <span class="h1">OSPFv3 Link State Advertisement (LSA) Extensibility</span>

Abstract

   OSPFv3 requires functional extension beyond what can readily be done
   with the fixed-format Link State Advertisement (LSA) as described in
   <a href="rfc5340.html">RFC 5340</a>.  Without LSA extension, attributes associated with OSPFv3
   links and advertised IPv6 prefixes must be advertised in separate
   LSAs and correlated to the fixed-format LSAs.  This document extends
   the LSA format by encoding the existing OSPFv3 LSA information in
   Type-Length-Value (TLV) tuples and allowing advertisement of
   additional information with additional TLVs.  Backward-compatibility
   mechanisms are also described.

   This document updates <a href="rfc5340.html">RFC 5340</a>, "OSPF for IPv6", and <a href="rfc5838.html">RFC 5838</a>,
   "Support of Address Families in OSPFv3", by providing TLV-based
   encodings for the base OSPFv3 unicast support and OSPFv3 address
   family support.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc7841.html#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8362">https://www.rfc-editor.org/info/rfc8362</a>.








<span class="grey">Lindem, et al.               Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-1.1">1.1</a>.  Requirements Notation . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-1.2">1.2</a>.  OSPFv3 LSA Terminology  . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  OSPFv3 Extended LSA Types . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  OSPFv3 Extended LSA TLVs  . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.1">3.1</a>.  Prefix Options Extensions . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
       <a href="#section-3.1.1">3.1.1</a>.  N-bit Prefix Option . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-3.2">3.2</a>.  Router-Link TLV . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
     <a href="#section-3.3">3.3</a>.  Attached-Routers TLV  . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-3.4">3.4</a>.  Inter-Area-Prefix TLV . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-3.5">3.5</a>.  Inter-Area-Router TLV . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-3.6">3.6</a>.  External-Prefix TLV . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
     <a href="#section-3.7">3.7</a>.  Intra-Area-Prefix TLV . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
     <a href="#section-3.8">3.8</a>.  IPv6 Link-Local Address TLV . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
     <a href="#section-3.9">3.9</a>.  IPv4 Link-Local Address TLV . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
     <a href="#section-3.10">3.10</a>. IPv6-Forwarding-Address Sub-TLV . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-3.11">3.11</a>. IPv4-Forwarding-Address Sub-TLV . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-3.12">3.12</a>. Route-Tag Sub-TLV . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   <a href="#section-4">4</a>.  OSPFv3 Extended LSAs  . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
     <a href="#section-4.1">4.1</a>.  OSPFv3 E-Router-LSA . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
     <a href="#section-4.2">4.2</a>.  OSPFv3 E-Network-LSA  . . . . . . . . . . . . . . . . . .  <a href="#page-18">18</a>
     <a href="#section-4.3">4.3</a>.  OSPFv3 E-Inter-Area-Prefix-LSA  . . . . . . . . . . . . .  <a href="#page-19">19</a>
     <a href="#section-4.4">4.4</a>.  OSPFv3 E-Inter-Area-Router-LSA  . . . . . . . . . . . . .  <a href="#page-20">20</a>
     <a href="#section-4.5">4.5</a>.  OSPFv3 E-AS-External-LSA  . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>
     <a href="#section-4.6">4.6</a>.  OSPFv3 E-NSSA-LSA . . . . . . . . . . . . . . . . . . . .  <a href="#page-22">22</a>
     <a href="#section-4.7">4.7</a>.  OSPFv3 E-Link-LSA . . . . . . . . . . . . . . . . . . . .  <a href="#page-22">22</a>
     <a href="#section-4.8">4.8</a>.  OSPFv3 E-Intra-Area-Prefix-LSA  . . . . . . . . . . . . .  <a href="#page-24">24</a>
   <a href="#section-5">5</a>.  Malformed OSPFv3 Extended LSA Handling  . . . . . . . . . . .  <a href="#page-25">25</a>
   <a href="#section-6">6</a>.  LSA Extension Backward Compatibility  . . . . . . . . . . . .  <a href="#page-25">25</a>
     <a href="#section-6.1">6.1</a>.  Full Extended LSA Migration . . . . . . . . . . . . . . .  <a href="#page-25">25</a>
     <a href="#section-6.2">6.2</a>.  Extended LSA Sparse-Mode Backward Compatibility . . . . .  <a href="#page-26">26</a>



<span class="grey">Lindem, et al.               Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


     <a href="#section-6.3">6.3</a>.  LSA TLV Processing Backward Compatibility . . . . . . . .  <a href="#page-26">26</a>
   <a href="#section-7">7</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-27">27</a>
   <a href="#section-8">8</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <a href="#page-27">27</a>
     <a href="#section-8.1">8.1</a>.  OSPFv3 Extended LSA TLV Registry  . . . . . . . . . . . .  <a href="#page-27">27</a>
     <a href="#section-8.2">8.2</a>.  OSPFv3 Extended LSA Sub-TLV Registry  . . . . . . . . . .  <a href="#page-28">28</a>
   <a href="#section-9">9</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-29">29</a>
     <a href="#section-9.1">9.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-29">29</a>
     <a href="#section-9.2">9.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-30">30</a>
   <a href="#appendix-A">Appendix A</a>.  Global Configuration Parameters  . . . . . . . . . .  <a href="#page-31">31</a>
   <a href="#appendix-B">Appendix B</a>.  Area Configuration Parameters  . . . . . . . . . . .  <a href="#page-31">31</a>
   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-32">32</a>
   Contributors  . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-32">32</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-33">33</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   OSPFv3 requires functional extension beyond what can readily be done
   with the fixed-format Link State Advertisement (LSA) as described in
   <a href="rfc5340.html">RFC 5340</a> [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  Without LSA extension, attributes associated with
   OSPFv3 links and advertised IPv6 prefixes must be advertised in
   separate LSAs and correlated to the fixed-format LSAs.  This document
   extends the LSA format by encoding the existing OSPFv3 LSA
   information in Type-Length-Value (TLV) tuples and allowing
   advertisement of additional information with additional TLVs.
   Backward-compatibility mechanisms are also described.

   This document updates <a href="rfc5340.html">RFC 5340</a>, "OSPF for IPv6", and <a href="rfc5838.html">RFC 5838</a>,
   "Support of Address Families in OSPFv3", by providing TLV-based
   encodings for the base OSPFv3 support [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>] and OSPFv3 address
   family support [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>].

   A similar extension was previously proposed in support of multi-
   topology routing.  Additional requirements for the OSPFv3 LSA
   extension include source/destination routing, route tagging, and
   others.

   A final requirement is to limit the changes to OSPFv3 to those
   necessary for TLV-based LSAs.  For the most part, the semantics of
   existing OSPFv3 LSAs are retained for their TLV-based successor LSAs
   described herein.  Additionally, encoding details, e.g., the
   representation of IPv6 prefixes as described in <a href="#appendix-A.4.1">Appendix A.4.1</a> in <a href="rfc5340.html">RFC</a>
   <a href="rfc5340.html">5340</a> [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>], have been retained.  This requirement was included to
   increase the expedience of IETF adoption and deployment.








<span class="grey">Lindem, et al.               Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


   The following aspects of the OSPFv3 LSA extension are described:

   1.  Extended LSA Types

   2.  Extended LSA TLVs

   3.  Extended LSA Formats

   4.  Backward Compatibility

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Requirements%20Notation"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Requirements Notation</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="rfc8174.html" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20OSPFv3%20LSA%20Terminology"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  OSPFv3 LSA Terminology</span>

   The TLV-based OSPFv3 LSAs described in this document will be referred
   to as Extended LSAs.  The OSPFv3 fixed-format LSAs [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>] will be
   referred to as Legacy LSAs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20OSPFv3%20Extended%20LSA%20Types"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  OSPFv3 Extended LSA Types</span>

   In order to provide backward compatibility, new LSA codes must be
   allocated.  There are eight fixed-format LSAs defined in <a href="rfc5340.html">RFC 5340</a>
   [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  For ease of implementation and debugging, the LSA function
   codes are the same as the fixed-format LSAs only with 32, i.e., 0x20,
   added.  The alternative to this mapping was to allocate a bit in the
   LS Type indicating the new LSA format.  However, this would have used
   one half the LSA function code space for the migration of the eight
   original fixed-format LSAs.  For backward compatibility, the U-bit
   MUST be set in the LS Type so that the LSAs will be flooded by OSPFv3
   routers that do not understand them.















<span class="grey">Lindem, et al.               Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


            LSA function code   LS Type   Description
            ----------------------------------------------------
            33                  0xA021    E-Router-LSA
            34                  0xA022    E-Network-LSA
            35                  0xA023    E-Inter-Area-Prefix-LSA
            36                  0xA024    E-Inter-Area-Router-LSA
            37                  0xC025    E-AS-External-LSA
            38                  N/A       Unused (Not to be allocated)
            39                  0xA027    E-Type-7-LSA
            40                  0x8028    E-Link-LSA
            41                  0xA029    E-Intra-Area-Prefix-LSA


                         OSPFv3 Extended LSA Types

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20OSPFv3%20Extended%20LSA%20TLVs"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  OSPFv3 Extended LSA TLVs</span>

   The format of the TLVs within the body of the Extended LSAs is the
   same as the format used by the Traffic Engineering Extensions to OSPF
   [<a href="#ref-TE" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>TE</a>].  The variable TLV section consists of one or more nested TLV
   tuples.  Nested TLVs are also referred to as sub-TLVs.  The format of
   each TLV is:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Type             |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                            Value...                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                TLV Format

   The Length field defines the length of the value portion in octets
   (thus, a TLV with no value portion would have a length of 0).  The
   TLV is padded to 4-octet alignment; padding is not included in the
   Length field (so a 3-octet value would have a length of 3, but the
   total size of the TLV would be 8 octets).  Nested TLVs are also
   32-bit aligned.  For example, a 1-byte value would have the Length
   field set to 1, and 3 octets of padding would be added to the end of
   the value portion of the TLV.

   This document defines the following top-level TLV types:

   o  0 - Reserved

   o  1 - Router-Link TLV




<span class="grey">Lindem, et al.               Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


   o  2 - Attached-Routers TLV

   o  3 - Inter-Area-Prefix TLV

   o  4 - Inter-Area-Router TLV

   o  5 - External-Prefix TLV

   o  6 - Intra-Area-Prefix TLV

   o  7 - IPv6 Link-Local Address TLV

   o  8 - IPv4 Link-Local Address TLV

   Additionally, this document defines the following sub-TLV types:

   o  0 - Reserved

   o  1 - IPv6-Forwarding-Address sub-TLV

   o  2 - IPv4-Forwarding-Address sub-TLV

   o  3 - Route-Tag sub-TLV

   In general, TLVs and sub-TLVs MAY occur in any order, and the
   specification should define whether the TLV or sub-TLV is required
   and the behavior when there are multiple occurrences of the TLV or
   sub-TLV.  While this document only describes the usage of TLVs and
   sub-TLVs, sub-TLVs may be nested to any level as long as the sub-TLVs
   are fully specified in the specification for the subsuming sub-TLV.

   For backward compatibility, an LSA is not considered malformed from a
   TLV perspective unless either a required TLV is missing or a
   specified TLV is less than the minimum required length.  Refer to
   <a href="#section-6.3">Section 6.3</a> for more information on TLV backward compatibility.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Prefix%20Options%20Extensions"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Prefix Options Extensions</span>

   The prefix options are extended from <a href="#appendix-A.4.1.1">Appendix A.4.1.1</a> [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The
   applicability of the LA-bit is expanded, and it SHOULD be set in
   Inter-Area-Prefix TLVs and MAY be set in External-Prefix TLVs when
   the advertised host IPv6 address, i.e., PrefixLength = 128 for the
   IPv6 Address Family or PrefixLength = 32 for the IPv4 Address Family
   [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>], is an interface address.  In <a href="rfc5340.html">RFC 5340</a>, the LA-bit is
   only set in Intra-Area-Prefix-LSAs (Section 4.4.3.9 of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>]).
   This will allow a stable address to be advertised without having to
   configure a separate loopback address in every OSPFv3 area.




<span class="grey">Lindem, et al.               Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.1.%20%20N-bit%20Prefix%20Option"></a><a class="selflink" href="#section-3.1.1" name="section-3.1.1">3.1.1</a>.  N-bit Prefix Option</span>

   Additionally, the N-bit prefix option is defined.  The figure below
   shows the position of the N-bit in the prefix options (value 0x20).

                          0  1  2  3  4  5  6  7
                        +--+--+--+--+--+--+--+--+
                        |  |  | N|DN| P| x|LA|NU|
                        +--+--+--+--+--+--+--+--+

                         The Prefix Options Field

   The N-bit is set in PrefixOptions for a host address
   (PrefixLength=128 for the IPv6 Address Family or PrefixLength=32 for
   the IPv4 Address Family [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>]) that identifies the advertising
   router.  While it is similar to the LA-bit, there are two
   differences.  The advertising router MAY choose NOT to set the N-bit
   even when the above conditions are met.  If the N-bit is set and the
   PrefixLength is NOT 128 for the IPv6 Address Family or 32 for the
   IPv4 Address Family [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>], the N-bit MUST be ignored.
   Additionally, the N-bit is propagated in the PrefixOptions when an
   OSPFv3 Area Border Router (ABR) originates an Inter-Area-Prefix-LSA
   for an Intra-Area route that has the N-bit set in the PrefixOptions.
   Similarly, the N-bit is propagated in the PrefixOptions when an
   OSPFv3 Not-So-Stubby Area (NSSA) ABR originates an E-AS-External-LSA
   corresponding to an NSSA route as described in <a href="rfc3101.html#section-3">Section 3 of RFC 3101</a>
   [<a href="#ref-NSSA" title='"The OSPF Not-So-Stubby Area (NSSA) Option"'>NSSA</a>].  The N-bit is added to the Inter-Area-Prefix TLV
   (<a href="#section-3.4">Section 3.4</a>), External-Prefix TLV (<a href="#section-3.6">Section 3.6</a>), and
   Intra-Area-Prefix-TLV (<a href="#section-3.7">Section 3.7</a>).  The N-bit is used as hint to
   identify the preferred address to reach the advertising OSPFv3
   router.  This would be in contrast to an anycast address
   [<a href="#ref-IPV6-ADDRESS-ARCH" title='"IP Version 6 Addressing Architecture"'>IPV6-ADDRESS-ARCH</a>], which could also be a local address with the
   LA-bit set.  It is useful for applications such as identifying the
   prefixes corresponding to Node Segment Identifiers (SIDs) in Segment
   Routing [<a href="#ref-SEGMENT-ROUTING" title='"OSPFv3 Extensions for Segment Routing"'>SEGMENT-ROUTING</a>].  There may be future applications
   requiring selection of a prefix associated with an OSPFv3 router.















<span class="grey">Lindem, et al.               Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Router-Link%20TLV"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Router-Link TLV</span>

   The Router-Link TLV defines a single router link, and the field
   definitions correspond directly to links in the OSPFv3 Router-LSA;
   see <a href="#appendix-A.4.3">Appendix A.4.3</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The Router-Link TLV is only
   applicable to the E-Router-LSA (<a href="#section-4.1">Section 4.1</a>).  Inclusion in other
   Extended LSAs MUST be ignored.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          1 (Router-Link)      |       TLV Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |       0       |           Metric              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Interface ID                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Neighbor Interface ID                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    Neighbor Router ID                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                            Sub-TLVs                           .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                              Router-Link TLV
























<span class="grey">Lindem, et al.               Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20Attached-Routers%20TLV"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  Attached-Routers TLV</span>

   The Attached-Routers TLV defines all the routers attached to an
   OSPFv3 multi-access network.  The field definitions correspond
   directly to content of the OSPFv3 Network-LSA; see <a href="#appendix-A.4.4">Appendix A.4.4</a> of
   [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The Attached-Routers TLV is only applicable to the
   E-Network-LSA (<a href="#section-4.2">Section 4.2</a>).  Inclusion in other Extended LSAs MUST
   be ignored.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |        2 (Attached-Routers)   |       TLV Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Adjacent Neighbor Router ID                      |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .              Additional Adjacent Neighbors                    .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                           Attached-Routers TLV

   There are two reasons for not having a separate TLV or sub-TLV for
   each adjacent neighbor.  The first is to discourage using the
   E-Network-LSA for more than its current role of solely advertising
   the routers attached to a multi-access network.  The router's metric
   as well as the attributes of individual attached routers should be
   advertised in their respective E-Router-LSAs.  The second reason is
   that there is only a single E-Network-LSA per multi-access link with
   the Link State ID set to the Designated Router's Interface ID, and
   consequently, compact encoding has been chosen to decrease the
   likelihood that the size of the E-Network-LSA will require IPv6
   fragmentation when advertised in an OSPFv3 Link State Update packet.

















<span class="grey">Lindem, et al.               Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.4.%20%20Inter-Area-Prefix%20TLV"></a><a class="selflink" href="#section-3.4" name="section-3.4">3.4</a>.  Inter-Area-Prefix TLV</span>

   The Inter-Area-Prefix TLV defines a single OSPFV3 inter-area prefix.
   The field definitions correspond directly to the content of an OSPFv3
   IPv6 Prefix, as defined in <a href="#appendix-A.4.1">Appendix A.4.1</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>], and an OSPFv3
   Inter-Area-Prefix-LSA, as defined in <a href="#appendix-A.4.5">Appendix A.4.5</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].
   Additionally, the PrefixOptions are extended as described in
   <a href="#section-3.1">Section 3.1</a>.  The Inter-Area-Prefix TLV is only applicable to the
   E-Inter-Area-Prefix-LSA (<a href="#section-4.3">Section 4.3</a>).  Inclusion in other Extended
   LSAs MUST be ignored.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       3 (Inter-Area Prefix)   |       TLV Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      0        |                  Metric                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | PrefixLength  | PrefixOptions |              0                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Address Prefix                         |
      |                             ...                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                            Sub-TLVs                           .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                           Inter-Area-Prefix TLV






















<span class="grey">Lindem, et al.               Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.5.%20%20Inter-Area-Router%20TLV"></a><a class="selflink" href="#section-3.5" name="section-3.5">3.5</a>.  Inter-Area-Router TLV</span>

   The Inter-Area-Router TLV defines a single OSPFv3 Autonomous System
   Boundary Router (ASBR) that is reachable in another area.  The field
   definitions correspond directly to the content of an OSPFv3
   Inter-Area-Router-LSA, as defined in <a href="#appendix-A.4.6">Appendix A.4.6</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The
   Inter-Area-Router TLV is only applicable to the
   E-Inter-Area-Router-LSA (<a href="#section-4.4">Section 4.4</a>).  Inclusion in other Extended
   LSAs MUST be ignored.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       4 (Inter-Area Router)   |       TLV Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      0        |                Options                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      0        |                Metric                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                 Destination Router ID                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                            Sub-TLVs                           .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                           Inter-Area-Router TLV
























<span class="grey">Lindem, et al.               Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.6.%20%20External-Prefix%20TLV"></a><a class="selflink" href="#section-3.6" name="section-3.6">3.6</a>.  External-Prefix TLV</span>

   The External-Prefix TLV defines a single OSPFv3 external prefix.
   With the exception of omitted fields noted below, the field
   definitions correspond directly to the content of an OSPFv3 IPv6
   Prefix, as defined in <a href="#appendix-A.4.1">Appendix A.4.1</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>], and an OSPFv3
   AS-External-LSA, as defined in <a href="#appendix-A.4.7">Appendix A.4.7</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The
   External-Prefix TLV is only applicable to the E-AS-External-LSA
   (<a href="#section-4.5">Section 4.5</a>) and the E-NSSA-LSA (<a href="#section-4.6">Section 4.6</a>).  Additionally, the
   PrefixOptions are extended as described in <a href="#section-3.1">Section 3.1</a>.  Inclusion in
   other Extended LSAs MUST be ignored.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       5 (External Prefix)     |       TLV Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         |E| | |                Metric                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | PrefixLength  | PrefixOptions |              0                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Address Prefix                         |
      |                             ...                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                            Sub-TLVs                           .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                            External-Prefix TLV

   In the External-Prefix TLV, the optional IPv6/IPv4 Forwarding Address
   and External Route Tag are now sub-TLVs.  Given the Referenced LS
   Type and Referenced Link State ID from the AS-External-LSA have never
   been used or even specified, they have been omitted from the
   External-Prefix TLV.  If there were ever a requirement for a
   referenced LSA, it could be satisfied with a sub-TLV.

   The following sub-TLVs are defined for optional inclusion in the
   External-Prefix TLV:

   o  1 - IPv6-Forwarding-Address sub-TLV (<a href="#section-3.10">Section 3.10</a>)

   o  2 - IPv4-Forwarding-Address sub-TLV (<a href="#section-3.11">Section 3.11</a>)

   o  3 - Route-Tag sub-TLV (<a href="#section-3.12">Section 3.12</a>)





<span class="grey">Lindem, et al.               Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.7.%20%20Intra-Area-Prefix%20TLV"></a><a class="selflink" href="#section-3.7" name="section-3.7">3.7</a>.  Intra-Area-Prefix TLV</span>

   The Intra-Area-Prefix TLV defines a single OSPFv3 intra-area prefix.
   The field definitions correspond directly to the content of an OSPFv3
   IPv6 Prefix, as defined in <a href="#appendix-A.4.1">Appendix A.4.1</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>], and an OSPFv3
   Link-LSA, as defined in <a href="#appendix-A.4.9">Appendix A.4.9</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The
   Intra-Area-Prefix TLV is only applicable to the E-Link-LSA
   (<a href="#section-4.7">Section 4.7</a>) and the E-Intra-Area-Prefix-LSA (<a href="#section-4.8">Section 4.8</a>).
   Additionally, the PrefixOptions are extended as described in
   <a href="#section-3.1">Section 3.1</a>.  Inclusion in other Extended LSAs MUST be ignored.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       6 (Intra-Area Prefix)   |       TLV Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      0        |                  Metric                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | PrefixLength  | PrefixOptions |              0                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Address Prefix                         |
      |                             ...                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                            Sub-TLVs                           .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                           Intra-Area-Prefix TLV






















<span class="grey">Lindem, et al.               Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.8.%20%20IPv6%20Link-Local%20Address%20TLV"></a><a class="selflink" href="#section-3.8" name="section-3.8">3.8</a>.  IPv6 Link-Local Address TLV</span>

   The IPv6 Link-Local Address TLV is to be used with IPv6 address
   families as defined in [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>].  The IPv6 Link-Local Address TLV
   is only applicable to the E-Link-LSA (<a href="#section-4.7">Section 4.7</a>).  Inclusion in
   other Extended LSAs MUST be ignored.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  7 (IPv6 Local-Local Address) |       TLV Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +-                                                             -+
      |                                                               |
      +-            IPv6 Link-Local Interface Address                -+
      |                                                               |
      +-                                                             -+
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                            Sub-TLVs                           .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                        IPv6 Link-Local Address TLV

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.9.%20%20IPv4%20Link-Local%20Address%20TLV"></a><a class="selflink" href="#section-3.9" name="section-3.9">3.9</a>.  IPv4 Link-Local Address TLV</span>

   The IPv4 Link-Local Address TLV is to be used with IPv4 address
   families as defined in [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>].  The IPv4 Link-Local Address TLV
   is only applicable to the E-Link-LSA (<a href="#section-4.7">Section 4.7</a>).  Inclusion in
   other Extended LSAs MUST be ignored.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  8 (IPv4 Local-Local Address) |       TLV Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             IPv4 Link-Local Interface Address                 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                            Sub-TLVs                           .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                        IPv4 Link-Local Address TLV




<span class="grey">Lindem, et al.               Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.10.%20%20IPv6-Forwarding-Address%20Sub-TLV"></a><a class="selflink" href="#section-3.10" name="section-3.10">3.10</a>.  IPv6-Forwarding-Address Sub-TLV</span>

   The IPv6-Forwarding-Address TLV has identical semantics to the
   optional forwarding address in <a href="#appendix-A.4.7">Appendix A.4.7</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The IPv6-
   Forwarding-Address TLV is applicable to the External-Prefix TLV
   (<a href="#section-3.6">Section 3.6</a>).  Specification as a sub-TLV of other TLVs is not
   defined herein.  The sub-TLV is optional and the first specified
   instance is used as the forwarding address as defined in [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].
   Instances subsequent to the first MUST be ignored.

   The IPv6-Forwarding-Address TLV is to be used with IPv6 address
   families as defined in [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>].  It MUST be ignored for other
   address families.  The IPv6-Forwarding-Address TLV length must meet a
   minimum length (16 octets), or it will be considered malformed as
   described in <a href="#section-6.3">Section 6.3</a>.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       1 - Forwarding Address  |          sub-TLV Length       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +-                                                             -+
      |                                                               |
      +-                    Forwarding Address                       -+
      |                                                               |
      +-                                                             -+
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                        IPv6-Forwarding-Address TLV

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.11.%20%20IPv4-Forwarding-Address%20Sub-TLV"></a><a class="selflink" href="#section-3.11" name="section-3.11">3.11</a>.  IPv4-Forwarding-Address Sub-TLV</span>

   The IPv4-Forwarding-Address TLV has identical semantics to the
   optional forwarding address in <a href="#appendix-A.4.7">Appendix A.4.7</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The
   IPv4-Forwarding-Address TLV is applicable to the External-Prefix TLV
   (<a href="#section-3.6">Section 3.6</a>).  Specification as a sub-TLV of other TLVs is not
   defined herein.  The sub-TLV is optional, and the first specified
   instance is used as the forwarding address as defined in [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].
   Instances subsequent to the first MUST be ignored.

   The IPv4-Forwarding-Address TLV is to be used with IPv4 address
   families as defined in [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>].  It MUST be ignored for other
   address families.  The IPv4-Forwarding-Address TLV length must meet a
   minimum length (4 octets), or it will be considered malformed as
   described in <a href="#section-6.3">Section 6.3</a>.




<span class="grey">Lindem, et al.               Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       2 - Forwarding Address  |          sub-TLV Length       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Forwarding Address                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                        IPv4-Forwarding-Address TLV

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.12.%20%20Route-Tag%20Sub-TLV"></a><a class="selflink" href="#section-3.12" name="section-3.12">3.12</a>.  Route-Tag Sub-TLV</span>

   The optional Route-Tag sub-TLV has identical semantics to the
   optional External Route Tag in <a href="#appendix-A.4.7">Appendix A.4.7</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  The
   Route-Tag sub-TLV is applicable to the External-Prefix TLV
   (<a href="#section-3.6">Section 3.6</a>).  Specification as a sub-TLV of other TLVs is not
   defined herein.  The sub-TLV is optional, and the first specified
   instance is used as the Route Tag as defined in [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  Instances
   subsequent to the first MUST be ignored.

   The Route-Tag TLV length must meet a minimum length (4 octets), or it
   will be considered malformed as described in <a href="#section-6.3">Section 6.3</a>.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       3 - Route Tag           |          sub-TLV Length       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Route Tag                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                             Route-Tag Sub-TLV

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20OSPFv3%20Extended%20LSAs"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  OSPFv3 Extended LSAs</span>

   This section specifies the OSPFv3 Extended LSA formats and encoding.
   The Extended OSPFv3 LSAs corresponded directly to the original OSPFv3
   LSAs specified in [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20OSPFv3%20E-Router-LSA"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  OSPFv3 E-Router-LSA</span>

   The E-Router-LSA has an LS Type of 0xA021 and has the same base
   information content as the Router-LSA defined in <a href="#appendix-A.4.3">Appendix A.4.3</a> of
   [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  However, unlike the existing Router-LSA, it is fully
   extensible and represented as TLVs.






<span class="grey">Lindem, et al.               Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


       0                    1                   2                   3
       0 1 2 3  4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           LS Age               |1|0|1|         0x21            |
      +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Link State ID                            |
      +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    Advertising Router                          |
      +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    LS Sequence Number                          |
      +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |        LS Checksum             |            Length             |
      +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  0  |Nt|x|V|E|B|            Options                            |
      +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                                .
      .                            TLVs                                .
      .                                                                .
      +-+-+-+--+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                            Extended Router-LSA

   Other than having a different LS Type, all LSA Header fields are the
   same as defined for the Router-LSA.  Initially, only the top-level
   Router-Link TLV (<a href="#section-3.2">Section 3.2</a>) is applicable, and an E-Router-LSA may
   include multiple Router-Link TLVs.  Like the existing Router-LSA, the
   LSA length is used to determine the end of the LSA including any
   TLVs.  Depending on the implementation, it is perfectly valid for an
   E-Router-LSA to not contain any Router-Link TLVs.  However, this
   would imply that the OSPFv3 router doesn't have any adjacencies in
   the corresponding area and is forming an adjacency or adjacencies
   over an unnumbered link(s).  Note that no E-Router-LSA stub link is
   advertised for an unnumbered link.


















<span class="grey">Lindem, et al.               Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20OSPFv3%20E-Network-LSA"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  OSPFv3 E-Network-LSA</span>

   The E-Network-LSA has an LS Type of 0xA022 and has the same base
   information content as the Network-LSA defined in <a href="#appendix-A.4.4">Appendix A.4.4</a> of
   [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  However, unlike the existing Network-LSA, it is fully
   extensible and represented as TLVs.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          LS Age               |1|0|1|         0x22            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Link State ID                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Advertising Router                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   LS Sequence Number                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       LS Checksum             |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       0       |            Options                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                           TLVs                                .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                               E-Network-LSA

   Other than having a different LS Type, all LSA Header fields are the
   same as defined for the Network-LSA.  Like the existing Network-LSA,
   the LSA length is used to determine the end of the LSA including any
   TLVs.  Initially, only the top-level Attached-Routers TLV
   (<a href="#section-3.3">Section 3.3</a>) is applicable.  If the Attached-Router TLV is not
   included in the E-Network-LSA, it is treated as malformed as
   described in <a href="#section-5">Section 5</a>.  Instances of the Attached-Router TLV
   subsequent to the first MUST be ignored.














<span class="grey">Lindem, et al.               Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20OSPFv3%20E-Inter-Area-Prefix-LSA"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  OSPFv3 E-Inter-Area-Prefix-LSA</span>

   The E-Inter-Area-Prefix-LSA has an LS Type of 0xA023 and has the same
   base information content as the Inter-Area-Prefix-LSA defined in
   <a href="#appendix-A.4.5">Appendix A.4.5</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  However, unlike the existing
   Inter-Area-Prefix-LSA, it is fully extensible and represented as
   TLVs.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          LS Age               |1|0|1|         0x23            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Link State ID                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Advertising Router                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   LS Sequence Number                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       LS Checksum             |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                           TLVs                                .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                          E-Inter-Area-Prefix-LSA

   Other than having a different LS Type, all LSA Header fields are the
   same as defined for the Inter-Area-Prefix-LSA.  In order to retain
   compatibility and semantics with the current OSPFv3 specification,
   each Inter-Area-Prefix LSA MUST contain a single Inter-Area-Prefix
   TLV.  This will facilitate migration and avoid changes to functions
   such as incremental Shortest Path First (SPF) computation.

   Like the existing Inter-Area-Prefix-LSA, the LSA length is used to
   determine the end of the LSA including any TLVs.  Initially, only the
   top-level Inter-Area-Prefix TLV (<a href="#section-3.4">Section 3.4</a>) is applicable.  If the
   Inter-Area-Prefix TLV is not included in the E-Inter-Area-Prefix-LSA,
   it is treated as malformed as described in <a href="#section-5">Section 5</a>.  Instances of
   the Inter-Area-Prefix TLV subsequent to the first MUST be ignored.










<span class="grey">Lindem, et al.               Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20OSPFv3%20E-Inter-Area-Router-LSA"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  OSPFv3 E-Inter-Area-Router-LSA</span>

   The E-Inter-Area-Router-LSA has an LS Type of 0xA024 and has the same
   base information content as the Inter-Area-Router-LSA defined in
   <a href="#appendix-A.4.6">Appendix A.4.6</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  However, unlike the
   Inter-Area-Router-LSA, it is fully extensible and represented as
   TLVs.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          LS Age               |1|0|1|         0x24            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Link State ID                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Advertising Router                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   LS Sequence Number                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       LS Checksum             |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                           TLVs                                .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                          E-Inter-Area-Router-LSA

   Other than having a different LS Type, all LSA Header fields are the
   same as defined for the Inter-Area-Router-LSA.  In order to retain
   compatibility and semantics with the current OSPFv3 specification,
   each Inter-Area-Router-LSA MUST contain a single Inter-Area-Router
   TLV.  This will facilitate migration and avoid changes to functions
   such as incremental SPF computation.

   Like the existing Inter-Area-Router-LSA, the LSA length is used to
   determine the end of the LSA including any TLVs.  Initially, only the
   top-level Inter-Area-Router TLV (<a href="#section-3.5">Section 3.5</a>) is applicable.  If the
   Inter-Area-Router TLV is not included in the E-Inter-Area-Router-LSA,
   it is treated as malformed as described in <a href="#section-5">Section 5</a>.  Instances of
   the Inter-Area-Router TLV subsequent to the first MUST be ignored.










<span class="grey">Lindem, et al.               Standards Track                   [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20OSPFv3%20E-AS-External-LSA"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  OSPFv3 E-AS-External-LSA</span>

   The E-AS-External-LSA has an LS Type of 0xC025 and has the same base
   information content as the AS-External-LSA defined in <a href="#appendix-A.4.7">Appendix A.4.7</a>
   of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  However, unlike the existing AS-External-LSA, it is
   fully extensible and represented as TLVs.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          LS Age               |1|1|0|         0x25            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Link State ID                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Advertising Router                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   LS Sequence Number                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       LS Checksum             |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                           TLVs                                .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                             E-AS-External-LSA

   Other than having a different LS Type, all LSA Header fields are the
   same as defined for the AS-External-LSA.  In order to retain
   compatibility and semantics with the current OSPFv3 specification,
   each LSA MUST contain a single External-Prefix TLV.  This will
   facilitate migration and avoid changes to OSPFv3 functions such as
   incremental SPF computation.

   Like the existing AS-External-LSA, the LSA length is used to
   determine the end of the LSA including any TLVs.  Initially, only the
   top-level External-Prefix TLV (<a href="#section-3.6">Section 3.6</a>) is applicable.  If the
   External-Prefix TLV is not included in the E-External-AS-LSA, it is
   treated as malformed as described in <a href="#section-5">Section 5</a>.  Instances of the
   External-Prefix TLV subsequent to the first MUST be ignored.











<span class="grey">Lindem, et al.               Standards Track                   [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6.%20%20OSPFv3%20E-NSSA-LSA"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a>.  OSPFv3 E-NSSA-LSA</span>

   The E-NSSA-LSA will have the same format and TLVs as the Extended
   AS-External-LSA (<a href="#section-4.5">Section 4.5</a>).  This is the same relationship that
   exists between the NSSA-LSA, as defined in <a href="#appendix-A.4.8">Appendix A.4.8</a> of
   [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>], and the AS-External-LSA.  The NSSA-LSA will have type
   0xA027, which implies area flooding scope.  Future requirements may
   dictate that supported TLVs differ between the E-AS-External-LSA and
   the E-NSSA-LSA.  However, future requirements are beyond the scope of
   this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.7.%20%20OSPFv3%20E-Link-LSA"></a><a class="selflink" href="#section-4.7" name="section-4.7">4.7</a>.  OSPFv3 E-Link-LSA</span>

   The E-Link-LSA has an LS Type of 0x8028 and will have the same base
   information content as the Link-LSA defined in <a href="#appendix-A.4.9">Appendix A.4.9</a> of
   [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  However, unlike the existing Link-LSA, it is fully
   extensible and represented as TLVs.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          LS Age               |1|0|0|         0x28            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Link State ID                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Advertising Router                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   LS Sequence Number                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       LS Checksum             |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Rtr Priority  |                Options                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                           TLVs                                .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                E-Link-LSA

   Other than having a different LS Type, all LSA Header fields are the
   same as defined for the Link-LSA.

   Only the Intra-Area-Prefix TLV (<a href="#section-3.7">Section 3.7</a>), IPv6 Link-Local Address
   TLV (<a href="#section-3.8">Section 3.8</a>), and IPv4 Link-Local Address TLV (<a href="#section-3.9">Section 3.9</a>) are
   applicable to the E-Link-LSA.  Like the Link-LSA, the E-Link-LSA





<span class="grey">Lindem, et al.               Standards Track                   [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


   affords advertisement of multiple intra-area prefixes.  Hence,
   multiple Intra-Area-Prefix TLVs (<a href="#section-3.7">Section 3.7</a>) may be specified, and
   the LSA length defines the end of the LSA including any TLVs.

   A single instance of the IPv6 Link-Local Address TLV (<a href="#section-3.8">Section 3.8</a>)
   SHOULD be included in the E-Link-LSA.  Instances following the first
   MUST be ignored.  For IPv4 address families as defined in
   [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>], this TLV MUST be ignored.

   Similarly, only a single instance of the IPv4 Link-Local Address TLV
   (<a href="#section-3.9">Section 3.9</a>) SHOULD be included in the E-Link-LSA.  Instances
   following the first MUST be ignored.  For OSPFv3 IPv6 address
   families as defined in [<a href="#ref-OSPFV3-AF" title='"Support of Address Families in OSPFv3"'>OSPFV3-AF</a>], this TLV SHOULD be ignored.

   If the IPv4/IPv6 Link-Local Address TLV corresponding to the OSPFv3
   Address Family is not included in the E-Link-LSA, it is treated as
   malformed as described in <a href="#section-5">Section 5</a>.

   Future specifications may support advertisement of routing and
   topology information for multiple address families.  However, this is
   beyond the scope of this document.






























<span class="grey">Lindem, et al.               Standards Track                   [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.8.%20%20OSPFv3%20E-Intra-Area-Prefix-LSA"></a><a class="selflink" href="#section-4.8" name="section-4.8">4.8</a>.  OSPFv3 E-Intra-Area-Prefix-LSA</span>

   The E-Intra-Area-Prefix-LSA has an LS Type of 0xA029 and has the same
   base information content as the Intra-Area-Prefix-LSA defined in
   <a href="#appendix-A.4.10">Appendix A.4.10</a> of [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>] except for the Referenced LS Type.
   However, unlike the Intra-Area-Prefix-LSA, it is fully extensible and
   represented as TLVs.  The Referenced LS Type MUST be either an
   E-Router-LSA (0xA021) or an E-Network-LSA (0xA022).

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           LS Age              |1|0|1|         0x29            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Link State ID                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Advertising Router                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   LS Sequence Number                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |        LS Checksum            |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       0                       |     Referenced LS Type        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Referenced Link State ID                     |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |               Referenced Advertising Router                   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                            TLVs                               .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                          E-Intra-Area-Prefix-LSA

   Other than having a different LS Type, all LSA Header fields are the
   same as defined for the Intra-Area-Prefix-LSA.

   Like the Intra-Area-Prefix-LSA, the E-Intra-Area-Link-LSA affords
   advertisement of multiple intra-area prefixes.  Hence, multiple
   Intra-Area-Prefix TLVs may be specified, and the LSA length defines
   the end of the LSA including any TLVs.









<span class="grey">Lindem, et al.               Standards Track                   [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Malformed%20OSPFv3%20Extended%20LSA%20Handling"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Malformed OSPFv3 Extended LSA Handling</span>

   Extended LSAs that have inconsistent length or other encoding errors,
   as described herein, MUST NOT be installed in the Link State
   Database, acknowledged, or flooded.  Reception of malformed LSAs
   SHOULD be counted and/or logged for examination by the administrator
   of the OSPFv3 routing domain.  Note that for the purposes of length
   validation, a TLV or sub-TLV should not be considered invalid unless
   the length exceeds the length of the LSA or does not meet the minimum
   length requirements for the TLV or sub-TLV.  This allows for sub-TLVs
   to be added as described in <a href="#section-6.3">Section 6.3</a>.

   Additionally, an LSA MUST be considered malformed if it does not
   include all of the required TLVs and sub-TLVs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20LSA%20Extension%20Backward%20Compatibility"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  LSA Extension Backward Compatibility</span>

   In the context of this document, backward compatibility is solely
   related to the capability of an OSPFv3 router to receive, process,
   and originate the TLV-based LSAs defined herein.  Unrecognized TLVs
   and sub-TLVs are ignored.  Backward compatibility for future OSPFv3
   extensions utilizing the TLV-based LSAs is out of scope and must be
   covered in the documents describing those extensions.  Both full and,
   if applicable, partial deployment SHOULD be specified for future TLV-
   based OSPFv3 LSA extensions.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Full%20Extended%20LSA%20Migration"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Full Extended LSA Migration</span>

   If ExtendedLSASupport is enabled (Appendix A), OSPFv3 Extended LSAs
   will be originated and used for the SPF computation.  Individual OSPF
   Areas can be migrated separately with the Legacy AS-External-LSAs
   being originated and used for the SPF computation.  This is
   accomplished by enabling AreaExtendedLSASupport (Appendix B).

   An OSPFv3 routing domain or area may be non-disruptively migrated
   using separate OSPFv3 instances for the Extended LSAs.  Initially,
   the OSPFv3 instances with ExtendedLSASupport will have a lower
   preference, i.e., higher administrative distance, than the OSPFv3
   instances originating and using the Legacy LSAs.  Once the routing
   domain or area is fully migrated and the OSPFv3 Routing Information
   Bases (RIBs) have been verified, the OSPFv3 instances using the
   Extended LSAs can be given preference.  When this has been completed
   and the routing within the OSPF routing domain or area has been
   verified, the original OSPFv3 instance using Legacy LSAs can be
   removed.






<span class="grey">Lindem, et al.               Standards Track                   [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Extended%20LSA%20Sparse-Mode%20Backward%20Compatibility"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Extended LSA Sparse-Mode Backward Compatibility</span>

   In this mode, OSPFv3 will use the Legacy LSAs for the SPF computation
   and will only originate Extended LSAs when LSA origination is
   required in support of additional functionality.  Furthermore, those
   Extended LSAs will only include the top-level TLVs (e.g., Router-Link
   TLVs or Inter-Area TLVs), which are required for that new
   functionality.  However, if a top-level TLV is advertised, it MUST
   include required sub-TLVs, or it will be considered malformed as
   described in <a href="#section-5">Section 5</a>.  Hence, this mode of compatibility is known
   as "sparse-mode".  The advantage of sparse-mode is that functionality
   utilizing the OSPFv3 Extended LSAs can be added to an existing OSPFv3
   routing domain without the requirement for migration.  In essence,
   this compatibility mode is very much like the approach taken for
   OSPFv2 [<a href="#ref-OSPF-PREFIX-LINK" title='"OSPFv2 Prefix/Link Attribute Advertisement"'>OSPF-PREFIX-LINK</a>].  As with all the compatibility modes,
   backward compatibility for the functions utilizing the Extended LSAs
   must be described in the IETF documents describing those functions.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20LSA%20TLV%20Processing%20Backward%20Compatibility"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  LSA TLV Processing Backward Compatibility</span>

   This section defines the general rules for processing LSA TLVs.  To
   ensure compatibility of future TLV-based LSA extensions, all
   implementations MUST adhere to these rules:

   1.  Unrecognized TLVs and sub-TLVs are ignored when parsing or
       processing Extended LSAs.

   2.  Whether or not partial deployment of a given TLV is supported
       MUST be specified.

   3.  If partial deployment is not supported, mechanisms to ensure the
       corresponding feature is not deployed MUST be specified in the
       document defining the new TLV or sub-TLV.

   4.  If partial deployment is supported, backward compatibility and
       partial deployment MUST be specified in the document defining the
       new TLV or sub-TLV.

   5.  If a TLV or sub-TLV is recognized but the length is less than the
       minimum, then the LSA should be considered malformed, and it
       SHOULD NOT be acknowledged.  Additionally, the occurrence SHOULD
       be logged with enough information to identify the LSA by type,
       Link State ID, originator, and sequence number and identify the
       TLV or sub-TLV in error.  Ideally, the log entry would include
       the hexadecimal or binary representation of the LSA including the
       malformed TLV or sub-TLV.





<span class="grey">Lindem, et al.               Standards Track                   [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


   6.  Documents specifying future TLVs or Sub-TLVs MUST specify the
       requirements for usage of those TLVs or sub-TLVs.

   7.  Future TLVs or sub-TLVs must be optional.  However, there may be
       requirements for sub-TLVs if an optional TLV is specified.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   In general, extensible OSPFv3 LSAs are subject to the same security
   concerns as those described in <a href="rfc5340.html">RFC 5340</a> [<a href="#ref-OSPFV3" title='"OSPF for IPv6"'>OSPFV3</a>].  Additionally,
   implementations must assure that malformed TLV and sub-TLV
   permutations do not result in errors that cause hard OSPFv3 failures.

   If there were ever a requirement to digitally sign OSPFv3 LSAs as
   described for OSPFv2 LSAs in <a href="rfc2154.html">RFC 2154</a> [<a href="#ref-OSPF-DIGITAL-SIGNATURE" title='"OSPF with Digital Signatures"'>OSPF-DIGITAL-SIGNATURE</a>], the
   mechanisms described herein would greatly simplify the extension.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  IANA Considerations</span>

   This specification defines nine OSPFv3 Extended LSA types as
   described in <a href="#section-2">Section 2</a>.  These have been added to the existing OSPFv3
   LSA Function Codes registry.

   The specification defines a code point for the N-bit in the OSPFv3
   Prefix-Options registry.  The value 0x20 has been assigned.

   This specification also creates two registries for OSPFv3 Extended
   LSA TLVs and sub-TLVs.  The TLV and sub-TLV code points in these
   registries are common to all Extended LSAs, and their respective
   definitions must define where they are applicable.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20OSPFv3%20Extended%20LSA%20TLV%20Registry"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  OSPFv3 Extended LSA TLV Registry</span>

   The "OSPFv3 Extended LSA TLVs" registry defines top-level TLVs for
   Extended LSAs and has been placed in the existing OSPFv3 IANA
   registry.

   Nine values have been allocated:

   o  0 - Reserved

   o  1 - Router-Link TLV

   o  2 - Attached-Routers TLV

   o  3 - Inter-Area-Prefix TLV

   o  4 - Inter-Area-Router TLV



<span class="grey">Lindem, et al.               Standards Track                   [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


   o  5 - External-Prefix TLV

   o  6 - Intra-Area-Prefix TLV

   o  7 - IPv6 Link-Local Address TLV

   o  8 - IPv4 Link-Local Address TLV

   Types in the range 9-32767 are allocated via IETF Review or IESG
   Approval [<a href="rfc8126.html" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC8126</a>].

   Types in the range 32768-33023 are Reserved for Experimental Use;
   these will not be registered with IANA and MUST NOT be mentioned by
   RFCs.

   Types in the range 33024-45055 are to be assigned on a First Come
   First Served (FCFS) basis.

   Types in the range 45056-65535 are not to be assigned at this time.
   Before any assignments can be made in the 33024-65535 range, there
   MUST be an IETF specification that specifies IANA Considerations that
   cover the range being assigned.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20OSPFv3%20Extended%20LSA%20Sub-TLV%20Registry"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  OSPFv3 Extended LSA Sub-TLV Registry</span>

   The "OSPFv3 Extended LSA Sub-TLVs" registry defines sub-TLVs at any
   level of nesting for Extended LSAs and has been placed in the
   existing OSPFv3 IANA registry.

   Four values have been allocated:

   o  0 - Reserved

   o  1 - IPv6-Forwarding-Address sub-TLV

   o  2 - IPv4-Forwarding-Address sub-TLV

   o  3 - Route-Tag sub-TLV

   Types in the range 4-32767 are allocated via IETF Review or IESG
   Approval.

   Types in the range 32768-33023 are Reserved for Experimental Use;
   these will not be registered with IANA and MUST NOT be mentioned by
   RFCs.

   Types in the range 33024-45055 are to be assigned on an FCFS basis.




<span class="grey">Lindem, et al.               Standards Track                   [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


   Types in the range 45056-65535 are not to be assigned at this time.
   Before any assignments can be made in the 33024-65535 range, there
   MUST be an IETF specification that specifies IANA Considerations that
   cover the range being assigned.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Normative%20References"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-NSSA" name="ref-NSSA">NSSA</a>]     Murphy, P., "The OSPF Not-So-Stubby Area (NSSA) Option",
              <a href="rfc3101.html">RFC 3101</a>, DOI 10.17487/RFC3101, January 2003,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3101">https://www.rfc-editor.org/info/rfc3101</a>&gt;.

   [<a id="ref-OSPFV3" name="ref-OSPFV3">OSPFV3</a>]   Coltun, R., Ferguson, D., Moy, J., and A. Lindem, "OSPF
              for IPv6", <a href="rfc5340.html">RFC 5340</a>, DOI 10.17487/RFC5340, July 2008,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5340">https://www.rfc-editor.org/info/rfc5340</a>&gt;.

   [<a id="ref-OSPFV3-AF" name="ref-OSPFV3-AF">OSPFV3-AF</a>]
              Lindem, A., Ed., Mirtorabi, S., Roy, A., Barnes, M., and
              R. Aggarwal, "Support of Address Families in OSPFv3",
              <a href="rfc5838.html">RFC 5838</a>, DOI 10.17487/RFC5838, April 2010,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5838">https://www.rfc-editor.org/info/rfc5838</a>&gt;.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC8126" name="ref-RFC8126">RFC8126</a>]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for
              Writing an IANA Considerations Section in RFCs", <a href="https://tools.ietf.org/html/bcp26">BCP 26</a>,
              <a href="rfc8126.html">RFC 8126</a>, DOI 10.17487/RFC8126, June 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;.

   [<a id="ref-RFC8174" name="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="rfc2119.html">RFC</a>
              <a href="rfc2119.html">2119</a> Key Words", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc8174.html">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a id="ref-TE" name="ref-TE">TE</a>]       Katz, D., Kompella, K., and D. Yeung, "Traffic Engineering
              (TE) Extensions to OSPF Version 2", <a href="rfc3630.html">RFC 3630</a>,
              DOI 10.17487/RFC3630, September 2003,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3630">https://www.rfc-editor.org/info/rfc3630</a>&gt;.










<span class="grey">Lindem, et al.               Standards Track                   [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20Informative%20References"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-IPV6-ADDRESS-ARCH" name="ref-IPV6-ADDRESS-ARCH">IPV6-ADDRESS-ARCH</a>]
              Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", <a href="rfc4291.html">RFC 4291</a>, DOI 10.17487/RFC4291, February
              2006, &lt;<a href="https://www.rfc-editor.org/info/rfc4291">https://www.rfc-editor.org/info/rfc4291</a>&gt;.

   [<a id="ref-MT-OSPFV3" name="ref-MT-OSPFV3">MT-OSPFV3</a>]
              Mirtorabi, S. and A. Roy, "Multi-topology routing in
              OSPFv3 (MT-OSPFv3)", Work in Progress, <a href="https://tools.ietf.org/html/draft-ietf-ospf-mt-ospfv3-03">draft-ietf-ospf-mt-</a>
              <a href="https://tools.ietf.org/html/draft-ietf-ospf-mt-ospfv3-03">ospfv3-03</a>, July 2007.

   [<a id="ref-OSPF-DIGITAL-SIGNATURE" name="ref-OSPF-DIGITAL-SIGNATURE">OSPF-DIGITAL-SIGNATURE</a>]
              Murphy, S., Badger, M., and B. Wellington, "OSPF with
              Digital Signatures", <a href="rfc2154.html">RFC 2154</a>, DOI 10.17487/RFC2154, June
              1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2154">https://www.rfc-editor.org/info/rfc2154</a>&gt;.

   [<a id="ref-OSPF-PREFIX-LINK" name="ref-OSPF-PREFIX-LINK">OSPF-PREFIX-LINK</a>]
              Psenak, P., Gredler, H., Shakir, R., Henderickx, W.,
              Tantsura, J., and A. Lindem, "OSPFv2 Prefix/Link Attribute
              Advertisement", <a href="rfc7684.html">RFC 7684</a>, DOI 10.17487/RFC7684, November
              2015, &lt;<a href="https://www.rfc-editor.org/info/rfc7684">https://www.rfc-editor.org/info/rfc7684</a>&gt;.

   [<a id="ref-SEGMENT-ROUTING" name="ref-SEGMENT-ROUTING">SEGMENT-ROUTING</a>]
              Psenak, P., Previdi, S., Filsfils, C., Gredler, H.,
              Shakir, R., Henderickx, W., and J. Tantsura, "OSPFv3
              Extensions for Segment Routing", Work in Progress,
              <a href="https://tools.ietf.org/html/draft-ietf-ospf-ospfv3-segment-routing-extensions-11">draft-ietf-ospf-ospfv3-segment-routing-extensions-11</a>,
              January 2018.






















<span class="grey">Lindem, et al.               Standards Track                   [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Global%20Configuration%20Parameters"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Global Configuration Parameters</span>

   The global configurable parameter ExtendedLSASupport is added to the
   OSPFv3 protocol.  If ExtendedLSASupport is enabled, the OSPFv3 router
   will originate OSPFv3 Extended LSAs and use the LSAs for the SPF
   computation.  If ExtendedLSASupport is not enabled, a subset of
   OSPFv3 Extended LSAs may still be originated and used for other
   functions as described in <a href="#section-6.2">Section 6.2</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20B.%20%20Area%20Configuration%20Parameters"></a><a class="selflink" href="#appendix-B" name="appendix-B">Appendix B</a>.  Area Configuration Parameters</span>

   The area configurable parameter AreaExtendedLSASupport is added to
   the OSPFv3 protocol.  If AreaExtendedLSASupport is enabled, the
   OSPFv3 router will originate link and area OSPFv3 Extended LSAs and
   use the LSAs for the SPF computation.  Legacy AS-Scoped LSAs will
   still be originated and used for the AS-External-LSA computation.  If
   AreaExtendedLSASupport is not enabled, a subset of OSPFv3 link and
   area Extended LSAs may still be originated and used for other
   functions as described in <a href="#section-6.2">Section 6.2</a>.

   For regular areas, i.e., areas where AS-scoped LSAs are flooded,
   disabling AreaExtendedLSASupport for a regular OSPFv3 area (not a
   Stub or NSSA area) when ExtendedLSASupport is enabled is
   contradictory and SHOULD be prohibited by implementations.



























<span class="grey">Lindem, et al.               Standards Track                   [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


Acknowledgments

   OSPFv3 TLV-based LSAs were first proposed in "Multi-topology routing
   in OSPFv3 (MT-OSPFv3)" [<a href="#ref-MT-OSPFV3" title='"Multi-topology routing in OSPFv3 (MT-OSPFv3)"'>MT-OSPFV3</a>].

   Thanks for Peter Psenak for significant contributions to the
   backward-compatibility mechanisms.

   Thanks go to Michael Barnes, Mike Dubrovsky, Anton Smirnov, and Tony
   Przygienda for review of the draft versions and discussions of
   backward compatibility.

   Thanks to Alan Davey for review and comments including the suggestion
   to separate the Extended LSA TLV definitions from the Extended LSAs
   definitions.

   Thanks to David Lamparter for review and suggestions on backward
   compatibility.

   Thanks to Karsten Thomann, Chris Bowers, Meng Zhang, and Nagendra
   Kumar for review and editorial comments.

   Thanks to Alia Atlas for substantive Routing Area Director (AD)
   comments prior to IETF last call.

   Thanks to Alvaro Retana and Suresh Krishnan for substantive comments
   during IESG Review.

   Thanks to Mehmet Ersue for the Operations and Management (OPS)
   Directorate review.

Contributors

   Sina Mirtorabi
   Cisco Systems
   170 Tasman Drive
   San Jose, CA  95134
   United States of America

   Email: sina@cisco.com











<span class="grey">Lindem, et al.               Standards Track                   [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc8362.html">RFC 8362</a>                OSPFv3 LSA Extensibility              April 2018</span>


Authors' Addresses

   Acee Lindem
   Cisco Systems
   301 Midenhall Way
   Cary, NC  27513
   United States of America

   Email: acee@cisco.com


   Abhay Roy
   Cisco Systems
   170 Tasman Drive
   San Jose, CA  95134
   United States of America

   Email: akr@cisco.com


   Dirk Goethals
   Nokia
   Copernicuslaan 50
   Antwerp 2018
   Belgium

   Email: dirk.goethals@nokia.com


   Veerendranatha Reddy Vallem
   Bangalore
   India

   Email: vallem.veerendra@gmail.com


   Fred Baker
   Santa Barbara, California  93117
   United States of America

   Email: FredBaker.IETF@gmail.com










Lindem, et al.               Standards Track                   [Page 33]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc8362 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:17 GMT --></html>