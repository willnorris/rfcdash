<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5252 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 14:27:36 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.127" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-bryskin-l1vpn-ospf-auto-discovery" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:5252" name="DC.Identifier"/>
<meta content="July, 2008" name="DC.Date.Issued"/>
<meta content="Berger, Lou" name="DC.Creator"/>
<meta content="Bryskin, Igor" name="DC.Creator"/>
<meta content="This document defines an OSPF based layer-1 VPN auto-discovery
mechanism. This mechanism enables PEs using the OSPF IGP to
dynamically learn about existence of each other, and attributes of
currently configured CE-PE links and their associations with L1VPNs.
This document builds on [RFC4847] and provides an auto-discovery
mechanism as discussed in [L1VPN-BM].  Contents" name="DC.Description.Abstract"/>
<meta content="OSPF Based L1VPN Auto-Discovery" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5252 - OSPF Based L1VPN Auto-Discovery</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5252.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5252" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-l1vpn-ospf-auto-discovery" title="draft-ietf-l1vpn-ospf-auto-discovery">draft-ietf-l1vp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc5252" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5252" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5252" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=5252">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                         I. Bryskin
Request for Comments: 5252                       ADVA Optical Networking
Category: Standards Track                                      L. Berger
                                                    LabN Consulting, LLC
                                                               July 2008


                 <span class="h1">OSPF-Based Layer 1 VPN Auto-Discovery</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Abstract

   This document defines an Open Shortest Path First (OSPF) based Layer
   1 Virtual Private Network (L1VPN) auto-discovery mechanism.  This
   mechanism enables provider edge (PE) devices using OSPF to
   dynamically learn about the existence of each other, and attributes
   of configured customer edge (CE) links and their associations with
   L1VPNs.  This document builds on the L1VPN framework and requirements
   and provides a L1VPN basic mode auto-discovery mechanism.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
      <a href="#section-1.1">1.1</a>. Overview ...................................................<a href="#page-2">2</a>
      <a href="#section-1.2">1.2</a>. Terminology ................................................<a href="#page-3">3</a>
      <a href="#section-1.3">1.3</a>. Conventions Used in This Document ..........................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. L1VPN LSA and Its TLVs ..........................................<a href="#page-4">4</a>
      <a href="#section-2.1">2.1</a>. L1VPN LSA ..................................................<a href="#page-4">4</a>
      <a href="#section-2.2">2.2</a>. L1VPN INFO TLV .............................................<a href="#page-6">6</a>
   <a href="#section-3">3</a>. L1VPN LSA Advertising and Processing ............................<a href="#page-7">7</a>
      <a href="#section-3.1">3.1</a>. Discussion and Example .....................................<a href="#page-7">7</a>
   <a href="#section-4">4</a>. Backward Compatibility ..........................................<a href="#page-8">8</a>
   <a href="#section-5">5</a>. Security Considerations .........................................<a href="#page-9">9</a>
   <a href="#section-6">6</a>. IANA Considerations .............................................<a href="#page-9">9</a>
   <a href="#section-7">7</a>. Acknowledgments .................................................<a href="#page-9">9</a>
   <a href="#section-8">8</a>. References ......................................................<a href="#page-9">9</a>
      <a href="#section-8.1">8.1</a>. Normative References .......................................<a href="#page-9">9</a>
      <a href="#section-8.2">8.2</a>. Informative References ....................................<a href="#page-10">10</a>






<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Overview"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Overview</span>

   The framework for Layer 1 VPNs is described in [<a href="rfc4847.html" title='"Framework and Requirements for Layer 1 Virtual Private Networks"'>RFC4847</a>].  Basic mode
   operation is further defined in [<a href="rfc5251.html" title='"Layer 1 VPN Basic Mode"'>RFC5251</a>].  The L1VPN Basic Mode
   (L1VPN-BM) document [<a href="rfc5251.html" title='"Layer 1 VPN Basic Mode"'>RFC5251</a>] identifies the information that is
   necessary to map customer information (ports identifiers) to provider
   information (identifiers).  It also states that this mapping
   information may be provided via provisioning or via an auto-discovery
   mechanism.  This document provides such an auto-discovery mechanism
   using Open Shortest Path First (OSPF) version 2.  Use of OSPF version
   3 and support for IPv6 are out of scope of this document and will be
   defined separately.

   Figure 1 shows the L1VPN basic service being supported using OSPF-
   based L1VPN auto-discovery.  This figure shows two PE routers
   interconnected over a GMPLS backbone.  Each PE is attached to three
   CE devices belonging to three different L1VPN connections.  In this
   network, OSPF is used to provide the VPN membership, port mapping,
   and related information required to support basic mode operation.

                  PE                        PE
               +---------+             +--------------+
   +--------+  | +------+|             | +----------+ | +--------+
   |  VPN-A |  | |VPN-A ||             | |  VPN-A   | | |  VPN-A |
   |   CE1  |--| |PIT   ||  OSPF LSAs  | |  PIT     | |-|   CE2  |
   +--------+  | |      ||&lt;-----------&gt;| |          | | +--------+
               | +------+| Distribution| +----------+ |
               |         |             |              |
   +--------+  | +------+|             | +----------+ | +--------+
   | VPN-B  |  | |VPN-B ||   -------   | |   VPN-B  | | |  VPN-B |
   |  CE1   |--| |PIT   ||--( GMPLS )--| |   PIT    | |-|   CE2  |
   +--------+  | |      ||  (Backbone) | |          | | +--------+
               | +------+|   --------  | +----------+ |
               |         |             |              |
   +--------+  | +-----+ |             | +----------+ | +--------+
   | VPN-C  |  | |VPN-C| |             | |   VPN-C  | | |  VPN-C |
   |  CE1   |--| |PIT  | |             | |   PIT    | |-|   CE2  |
   +--------+  | |     | |             | |          | | +--------+
               | +-----+ |             | +----------+ |
               +---------+             +--------------+

               Figure 1: OSPF Auto-Discovery for L1VPNs

   See [<a href="rfc5195.html" title='"BGP-Based Auto-Discovery for Layer-1 VPNs"'>RFC5195</a>] for a parallel L1VPN auto-discovery that uses BGP.  The
   OSPF approach described in this document is particularly useful in
   networks where BGP is not typically used.



<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


   The approach used in this document to provide OSPF-based L1VPN auto-
   discovery uses a new type of Opaque Link State Advertisement (LSA)
   that is referred to as an L1VPN LSA.  The L1VPN LSA carries
   information in TLV (type, length, value) structures.  An L1VPN-
   specific TLV is defined below to propagate VPN membership and port
   information.  This TLV is referred to as the L1VPN Info TLV.  The
   L1VPN LSA may also carry Traffic Engineering (TE) TLVs; see [<a href="rfc3630.html" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>RFC3630</a>]
   and [<a href="rfc4203.html" title='"OSPF Extensions in Support of Generalized Multi-Protocol Label Switching (GMPLS)"'>RFC4203</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Terminology"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Terminology</span>

   The reader of this document should be familiar with the terms used in
   [<a href="rfc4847.html" title='"Framework and Requirements for Layer 1 Virtual Private Networks"'>RFC4847</a>] and [<a href="rfc5251.html" title='"Layer 1 VPN Basic Mode"'>RFC5251</a>].  The reader of this document should also be
   familiar with [<a href="rfc2328.html" title='"OSPF Version 2"'>RFC2328</a>], [<a href="rfc5250.html" title='"The OSPF Opaque LSA Option"'>RFC5250</a>], and [<a href="rfc3630.html" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>RFC3630</a>].  In particular,
   the following terms:

   L1VPN - Layer 1 Virtual Private Network

   CE - Customer (edge) network element directly connected to the
        provider network (terminates one or more links to one or more
        PEs); it is also connected to one or more Cs and/or other CEs

   C - Customer network element that is not connected to the provider
       network but is connected to one or more other Cs and/or CEs

   PE - Provider (edge) network element directly connected to one or
        more customer networks (terminates one or more links to one or
        more CEs associated with the same or different L1VPNs); it is
        also connected to one or more Ps and/or other PEs

   P - Provider (core) network element that is not directly connected to
       any customer networks; P is connected to one or more other Ps
       and/or PEs

   LSA - OSPF link State Advertisement

   LSDB - Link State Database: a data structure supported by an IGP
          speaker

   PIT - Port Information Table

   CPI - Customer Port Identifier

   PPI - Provider Port Identifier







<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.3.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-1.3" name="section-1.3">1.3</a>.  Conventions Used in This Document</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20L1VPN%20LSA%20and%20Its%20TLVs"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  L1VPN LSA and Its TLVs</span>

   This section defines the L1VPN LSA and its TLVs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20L1VPN%20LSA"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  L1VPN LSA</span>

   The format of a L1VPN LSA is as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |            LS age             |     Options   |  LS Type      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Opaque Type  |               Opaque ID                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Advertising Router                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      LS Sequence Number                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         LS checksum           |           Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                           L1VPN Info TLV                      |
   |                             ...                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                            TE Link TLV                        |
   |                             ...                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   LS age
      As defined in [<a href="rfc2328.html" title='"OSPF Version 2"'>RFC2328</a>].

   Options
      As defined in [<a href="rfc2328.html" title='"OSPF Version 2"'>RFC2328</a>].

   LS Type
      This field MUST be set to 11, i.e., an Autonomous System (AS)
      scoped Opaque LSA [<a href="rfc5250.html" title='"The OSPF Opaque LSA Option"'>RFC5250</a>].

   Opaque Type
      The value of this field MUST be set to 5.





<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


   Opaque ID
      As defined in [<a href="rfc5250.html" title='"The OSPF Opaque LSA Option"'>RFC5250</a>].

   Advertising Router
      As defined in [<a href="rfc2328.html" title='"OSPF Version 2"'>RFC2328</a>].

   LS Sequence Number
      As defined in [<a href="rfc2328.html" title='"OSPF Version 2"'>RFC2328</a>].

   LS checksum
      As defined in [<a href="rfc2328.html" title='"OSPF Version 2"'>RFC2328</a>].

   Length
      As defined in [<a href="rfc2328.html" title='"OSPF Version 2"'>RFC2328</a>].

   L1VPN Info TLV
      A single TLV, as defined in <a href="#section-3.2">Section 3.2</a>, MUST be present.  If more
      than one L1VPN Info TLV is present, only the first TLV is
      processed and the others MUST be ignored on receipt.

   TE Link TLV
      A single TE Link TLV (as defined in [<a href="rfc3630.html" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>RFC3630</a>] and [<a href="rfc4203.html" title='"OSPF Extensions in Support of Generalized Multi-Protocol Label Switching (GMPLS)"'>RFC4203</a>]) MAY
      be included in a L1VPN LSA.




























<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20L1VPN%20INFO%20TLV"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  L1VPN INFO TLV</span>

   The following TLV is introduced:

   Name: L1VPN IPv4 Info
   Type: 1
   Length: Variable

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           L1VPN TLV Type      |         L1VPN TLV Length      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 L1VPN Globally Unique Identifier              |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          PE TE Address                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Link Local Identifier                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                              ...                              |
   |                 L1VPN Auto-Discovery Information              |
   +                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                               |           Padding             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   L1VPN TLV Type
      The type of the TLV.

   TLV Length
      The length of the TLV in bytes, excluding the 4 bytes of the TLV
      header and, if present, the length of the Padding field.

   L1VPN Globally Unique Identifier
      As defined in [<a href="rfc5251.html" title='"Layer 1 VPN Basic Mode"'>RFC5251</a>].

   PE TE Address
      This field MUST carry an address that has been advertised by the
      LSA originator per [<a href="rfc3630.html" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>RFC3630</a>] and is either the Router Address TLV
      or Local interface IP address link sub-TLV.  It will typically
      carry the TE Router Address.

   Link Local Identifier
      This field is used to support unnumbered links.  When an
      unnumbered PE TE link is represented, this field MUST contain a
      value advertised by the LSA originator per [<a href="rfc4203.html" title='"OSPF Extensions in Support of Generalized Multi-Protocol Label Switching (GMPLS)"'>RFC4203</a>] in a Link
      Local/Remote Identifiers link sub-TLV.  When a numbered link is
      represented, this field MUST be set to 0.



<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


   L1VPN Auto-discovery information
      As defined in [<a href="rfc5251.html" title='"Layer 1 VPN Basic Mode"'>RFC5251</a>].

   Padding
      A field of variable length and of sufficient size to ensure that
      the TLV is aligned on a 4-byte boundary.  This field is only
      required when the L1VPN Auto-discovery information field is not
      4-byte aligned.  This field MUST be less than 4 bytes long, and
      MUST NOT be present when the size of the L1VPN Auto-discovery
      information field is 4-byte aligned.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20L1VPN%20LSA%20Advertising%20and%20Processing"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  L1VPN LSA Advertising and Processing</span>

   PEs advertise local &lt;CPI, PPI&gt; tuples in L1VPN LSAs containing L1VPN
   Info TLVs.  Each PE MUST originate a separate L1VPN LSA with AS
   flooding scope for each local CE-to-PE link.  The LSA MUST be
   originated each time a PE restarts and every time there is a change
   in the PIT entry associated with a local CE-to-PE link.  The LSA MUST
   include a single L1VPN Info TLV and MAY include a single TE Link TLV
   as per [<a href="rfc3630.html" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>RFC3630</a>] and [<a href="rfc4203.html" title='"OSPF Extensions in Support of Generalized Multi-Protocol Label Switching (GMPLS)"'>RFC4203</a>].  The TE Link TLV carries TE
   attributes of the associated CE-to-PE link.  Note that because CEs
   are outside of the provider TE domain, the attributes of CE-to-PE
   links are not advertised via normal OSPF-TE procedures as described
   in [<a href="rfc3630.html" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>RFC3630</a>] and [<a href="rfc4203.html" title='"OSPF Extensions in Support of Generalized Multi-Protocol Label Switching (GMPLS)"'>RFC4203</a>].  If more than one L1VPN Info TLVs and/or
   TE Link TLVs are found in the LSA, the subsequent TLVs SHOULD be
   ignored by the receiving PEs.

   L1VPN LSAs are of AS-scope (LS type is set to 11) and therefore are
   flooded to all PEs within the AS according to [<a href="rfc5250.html" title='"The OSPF Opaque LSA Option"'>RFC5250</a>].  Every time
   a PE receives a new, removed, or modified L1VPN LSA, the PE MUST
   check whether it maintains a PIT associated with the L1VPN specified
   in the L1VPN globally unique identifier field.  If this is the case
   (the appropriate PIT will be found if one or more local CE-to-PE
   links that belong to the L1VPN are configured), the PE SHOULD add,
   remove, or modify the PIT entry associated with each of the
   advertised CE-to-PE links accordingly.  (An implementation MAY choose
   to not remove or modify the PIT according to local policy or
   management directives.)  Thus, in the normal steady-state case, all
   PEs associated with a particular L1VPN will have identical local PITs
   for an L1VPN.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Discussion%20and%20Example"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Discussion and Example</span>

   The L1VPN auto-discovery mechanism described in this document does
   not prevent a PE from applying any local policy with respect to PIT
   management.  An example of such a local policy would be the ability
   to configure permanent (static) PIT entries.  Another example would




<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


   be the ability to ignore information carried in L1VPN LSAs advertised
   by a specific TE.

   The reason why it is required that the value specified in the PE TE
   Address field of the L1VPN Info TLV matches a valid PE TE Router ID
   or numbered TE Link ID is to ensure that CEs attached to this PE can
   be resolved to the PE as it is known to the Traffic Engineering
   Database (TED) and hence TE paths toward the CEs across the provider
   domain can be computed.

   Let us consider the example presented in Figure 2.

                            CE11               CE13
                              |                 |
                      CE22---PE1--------P------PE2
                              |         |
                             CE15      PE3
                                        |
                                       CE24

                    Figure 2: Single Area Configuration

   Let us assume that PE1 is connected to CE11 and CE15 in L1VPN1 and to
   CE22 in L1VPN2; PE2 is connected to CE13 in L1VPN1; PE3 is connected
   to CE24 in L1VPN2.  In this configuration PE1 manages two PITs: PIT1
   for L1VPN1 and PIT2 for L1VPN2; PE2 manages only PIT1; and PE3
   manages only PIT2.  PE1 originates three L1VPN LSAs, each containing
   a L1VPN Info TLV advertising links PE1-CE11, PE1-CE22, and PE1-CE15,
   respectively.  PE2 originates a single L1VPN LSA for link PE2-CE13,
   and PE3 originates a single L1VPN LSA for link PE3-CE24.  In steady
   state, the PIT1 on PE1 and PE3 will contain information on links
   PE1-CE11, PE1-CE15, and PE2-CE13; PIT2 on PE1 and PE2 will contain
   entries for links PE1-CE22 and PE3-CE24.  Thus, all PEs will learn
   about all remote PE-to-CE links for all L1VPNs supported by PEs.

   Note that P in this configuration does not have links connecting it
   to any L1VPNs.  It neither originates L1VPN LSAs nor maintains any
   PITs.  However, it does participate in the flooding of all of the
   L1VPN LSAs and hence maintains the LSAs in its LSDB.  This is a cause
   for scalability concerns and could prove to be problematic in large
   networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Backward%20Compatibility"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Backward Compatibility</span>

   Neither the TLV nor the LSA introduced in this document present any
   interoperability issues.  Per [<a href="rfc5250.html" title='"The OSPF Opaque LSA Option"'>RFC5250</a>], OSPF speakers that do not
   support the L1VPN auto-discovery application (Ps for example) just




<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


   participate in the L1VPN LSAs flooding process but should ignore the
   LSAs contents.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Security%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Security Considerations</span>

   The approach presented in this document describes how PEs dynamically
   learn L1VPN-specific information.  Mechanisms to deliver the VPN
   membership information to CEs are explicitly out of scope of this
   document.  Therefore, the security issues raised in this document are
   limited to within the OSPF domain.

   This defined approach reuses mechanisms defined in [<a href="rfc2328.html" title='"OSPF Version 2"'>RFC2328</a>] and
   [<a href="rfc5250.html" title='"The OSPF Opaque LSA Option"'>RFC5250</a>].  Therefore, the same security approaches and
   considerations apply to this approach.  OSPF provides several
   security mechanisms that can be applied.  Specifically, OSPF supports
   multiple types of authentication, limits the frequency of LSA
   origination and acceptance, and provides techniques to avoid and
   limit impact database overflow.  In cases where end-to-end
   authentication is desired, OSPF's neighbor-to-neighbor authentication
   approach can be augmented with an experimental extension to OSPF; see
   [<a href="rfc2154.html" title='"OSPF with Digital Signatures"'>RFC2154</a>], which supports the signing and authentication of LSAs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  IANA Considerations</span>

   This document requests the assignment of an OSPF Opaque LSA type.
   IANA has made the assignment in the form:

       Value   Opaque Type                              Reference
      -------  -----------                              ---------
       5       L1VPN LSA                                [<a href="rfc5252.html">RFC5252</a>]

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Acknowledgments"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Acknowledgments</span>

   We would like to thank Adrian Farrel and Anton Smirnov for their
   useful comments.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2328" name="ref-RFC2328">RFC2328</a>]  Moy, J., "OSPF Version 2", STD 54, <a href="rfc2328.html">RFC 2328</a>, April 1998.

   [<a id="ref-RFC3630" name="ref-RFC3630">RFC3630</a>]  Katz, D., Kompella, K., and D. Yeung, "Traffic Engineering
              (TE) Extensions to OSPF Version 2", <a href="rfc3630.html">RFC 3630</a>, September
              2003.



<span class="grey">Bryskin &amp; Berger            Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


   [<a id="ref-RFC4203" name="ref-RFC4203">RFC4203</a>]  Kompella, K., Ed., and Y. Rekhter, Ed., "OSPF Extensions
              in Support of Generalized Multi-Protocol Label Switching
              (GMPLS)", <a href="rfc4203.html">RFC 4203</a>, October 2005.

   [<a id="ref-RFC5250" name="ref-RFC5250">RFC5250</a>]  Berger, L., Bryskin, I., and A. Zinin, "The OSPF Opaque
              LSA Option", <a href="rfc5250.html">RFC 5250</a>, July 2008.

   [<a id="ref-RFC5251" name="ref-RFC5251">RFC5251</a>]  Fedyk, D., Ed., Rekhter, Y., Ed., Papadimitriou, D.,
              Rabbat, R., and L. Berger, "Layer 1 VPN Basic Mode", <a href="rfc5251.html">RFC</a>
              <a href="rfc5251.html">5251</a>, July 2008.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-RFC2154" name="ref-RFC2154">RFC2154</a>]  Murphy, S., Badger, M., and B. Wellington, "OSPF with
              Digital Signatures", <a href="rfc2154.html">RFC 2154</a>, June 1997.

   [<a id="ref-RFC4847" name="ref-RFC4847">RFC4847</a>]  Takeda, T., Ed., "Framework and Requirements for Layer 1
              Virtual Private Networks", <a href="rfc4847.html">RFC 4847</a>, April 2007.

   [<a id="ref-RFC5195" name="ref-RFC5195">RFC5195</a>]  Ould-Brahim, H., Fedyk, D., and Y. Rekhter, "BGP-Based
              Auto-Discovery for Layer-1 VPNs", <a href="rfc5195.html">RFC 5195</a>, June 2008.

Authors' Addresses

   Igor Bryskin
   ADVA Optical Networking Inc
   7926 Jones Branch Drive
   Suite 615
   McLean, VA  22102
   EMail: ibryskin@advaoptical.com

   Lou Berger
   LabN Consulting, LLC
   EMail: lberger@labn.net

















<span class="grey">Bryskin &amp; Berger            Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5252.html">RFC 5252</a>            OSPF-Based L1VPN Auto-Discovery            July 2008</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.












Bryskin &amp; Berger            Standards Track                    [Page 11]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc5252 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 14:27:36 GMT --></html>