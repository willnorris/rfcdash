<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5361 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Apr 2015 16:01:33 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.111" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-camarillo-sipping-consent-format" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:5361" name="DC.Identifier"/>
<meta content="October, 2008" name="DC.Date.Issued"/>
<meta content="Gonzalo Camarillo &lt;gonzalo.camarillo@ericsson.com&gt;" name="DC.Creator"/>
<meta content="This document defines an Extensible Markup Language (XML) format for a
permission document used to request consent. A permission document
written in this format is used by a relay to request a specific
recipient permission to perform a particular routing translation.
[STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="A Document Format for Requesting Consent" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5361 - A Document Format for Requesting Consent</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc5361.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc5361" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-ietf-sipping-consent-format" title="draft-ietf-sipping-consent-format">draft-ietf-sippin...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5361" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc5361" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                       G. Camarillo
Request for Comments: 5361                                      Ericsson
Category: Standards Track                                   October 2008


                <span class="h1">A Document Format for Requesting Consent</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Abstract

   This document defines an Extensible Markup Language (XML) format for
   a permission document used to request consent.  A permission document
   written in this format is used by a relay to request a specific
   recipient permission to perform a particular routing translation.

Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Definitions and Terminology  . . . . . . . . . . . . . . . . .  <a href="#page-2">2</a>
   <a href="#section-3">3</a>.  Permission Document Structure  . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-3.1">3.1</a>.  Conditions . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
       <a href="#section-3.1.1">3.1.1</a>.  Recipient Condition  . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
       <a href="#section-3.1.2">3.1.2</a>.  Identity Condition . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
       <a href="#section-3.1.3">3.1.3</a>.  Target Condition . . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
       <a href="#section-3.1.4">3.1.4</a>.  Validity Condition . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
       <a href="#section-3.1.5">3.1.5</a>.  Sphere Condition . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-3.2">3.2</a>.  Actions  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
       <a href="#section-3.2.1">3.2.1</a>.  Translation Handling . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
   <a href="#section-4">4</a>.  Example Document . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
   <a href="#section-5">5</a>.  XML Schema . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
   <a href="#section-6">6</a>.  Extensibility  . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
   <a href="#section-7">7</a>.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-7.1">7.1</a>.  XML Namespace Registration . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-7.2">7.2</a>.  XML Schema Registration  . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-8">8</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-9">9</a>.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-10">10</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
     <a href="#section-10.1">10.1</a>. Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
     <a href="#section-10.2">10.2</a>. Informative References . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>





<span class="grey">Camarillo                   Standards Track                     [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The framework for consent-based communications in the Session
   Initiation Protocol (SIP) [<a href="rfc5360.html" title='"A Framework for Consent-Based Communications in the Session Initiation Protocol (SIP)"'>RFC5360</a>] identifies the need for a format
   to create permission documents.  Such permission documents are used
   by SIP [<a href="rfc3261.html" title='"SIP: Session Initiation Protocol"'>RFC3261</a>] relays to request permission to perform
   translations.  A relay is defined as any SIP server, be it a proxy,
   B2BUA (Back-to-Back User Agent), or some hybrid, which receives a
   request and translates the Request-URI into one or more next-hop URIs
   to which it then delivers a request.

   The format for permission documents specified in this document is
   based on Common Policy [<a href="rfc4745.html" title='"Common Policy: A Document Format for Expressing Privacy Preferences"'>RFC4745</a>], an XML document format for
   expressing privacy preferences.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Definitions%20and%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Definitions and Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   This document uses the terms defined in [<a href="rfc5360.html" title='"A Framework for Consent-Based Communications in the Session Initiation Protocol (SIP)"'>RFC5360</a>].  For completeness,
   these terms are repeated here.  Figure 1 of [<a href="rfc5360.html" title='"A Framework for Consent-Based Communications in the Session Initiation Protocol (SIP)"'>RFC5360</a>] shows the
   relationship between target and recipient URIs in a translation
   operation.

   Recipient URI:

      The Request-URI of an outgoing request sent by an entity (e.g., a
      user agent or a proxy).  The sending of such request can have been
      the result of a translation operation.

   Relay:

      Any SIP server, be it a proxy, B2BUA (Back-to-Back User Agent), or
      some hybrid, that receives a request, translates its Request-URI
      into one or more next-hop URIs (i.e., recipient URIs), and
      delivers the request to those URIs.

   Target URI:

      The Request-URI of an incoming request that arrives to a relay
      that will perform a translation operation.

   Translation logic:

      The logic that defines a translation operation at a relay.  This
      logic includes the translation's target and recipient URIs.



<span class="grey">Camarillo                   Standards Track                     [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


   Translation operation:

      Operation by which a relay translates the Request-URI of an
      incoming request (i.e., the target URI) into one or more URIs
      (i.e., recipient URIs) that are used as the Request-URIs of one or
      more outgoing requests.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Permission%20Document%20Structure"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Permission Document Structure</span>

   A permission document is an XML document, formatted according to the
   schema defined in [<a href="rfc4745.html" title='"Common Policy: A Document Format for Expressing Privacy Preferences"'>RFC4745</a>].  Permission documents inherit the MIME
   type of common policy documents, 'application/auth-policy+xml'.  As
   described in [<a href="rfc4745.html" title='"Common Policy: A Document Format for Expressing Privacy Preferences"'>RFC4745</a>], this type of document is composed of three
   parts: conditions, actions, and transformations.

   This section defines the new conditions and actions defined by this
   specification.  This specification does not define any new
   transformation.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Conditions"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Conditions</span>

   The conditions in a permission document are a set of expressions,
   each of which evaluates to either TRUE or FALSE.  Note that, as
   discussed in [<a href="rfc4745.html" title='"Common Policy: A Document Format for Expressing Privacy Preferences"'>RFC4745</a>], a permission document applies to a
   translation if all the expressions in its conditions part evaluate to
   TRUE.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.1.%20%20Recipient%20Condition"></a><a class="selflink" href="#section-3.1.1" name="section-3.1.1">3.1.1</a>.  Recipient Condition</span>

   The recipient condition is matched against the recipient URI of a
   translation.  Recipient conditions can contain the same elements and
   attributes as identity conditions.

   When performing a translation, a relay matches the recipient
   condition of the permission document that was used to request
   permission for that translation against the destination URI of the
   outgoing request.  When receiving a request granting or denying
   permissions (e.g., a SIP PUBLISH request as described in [<a href="rfc5360.html" title='"A Framework for Consent-Based Communications in the Session Initiation Protocol (SIP)"'>RFC5360</a>]),
   the relay matches the recipient condition of the permission document
   that was used to request permission against the identity of the
   entity granting or denying permissions (i.e., the sender of the
   PUBLISH request).  If there is a match, the recipient condition
   evaluates to TRUE.  Otherwise, the recipient condition evaluates to
   FALSE.

   Since only authenticated identities can be matched, this section
   defines acceptable means of authentication, which are in line with
   those described in <a href="rfc5360.html#section-5.6.1">Section 5.6.1 of [RFC5360]</a>.



<span class="grey">Camarillo                   Standards Track                     [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


   The 'id' attribute in the elements &lt;one&gt; and &lt;except&gt; MUST contain a
   scheme when these elements appear in a permission document.

   When used with SIP, a recipient granting or denying a relay
   permissions is considered authenticated if one of the following
   techniques is used:

   SIP Identity  [<a href="rfc4474.html" title='"Enhancements for Authenticated Identity Management in the Session Initiation Protocol (SIP)"'>RFC4474</a>], as described in <a href="rfc5360.html#section-5.6.1.1">Section 5.6.1.1 of
      [RFC5360]</a>.  For PUBLISH requests that are authenticated using the
      SIP Identity mechanism, the identity of the sender of the PUBLISH
      request is equal to the SIP URI in the From header field of the
      request, assuming that the signature in the Identity header field
      has been validated.

   P-Asserted-Identity  [<a href="rfc3325.html" title='"Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks"'>RFC3325</a>] (which can only be used in closed
      network environments) as described in <a href="rfc5360.html#section-5.6.1.2">Section 5.6.1.2 of
      [RFC5360]</a>.  For PUBLISH requests that are authenticated using the
      P-Asserted-Identity mechanism, the identity of the sender of the
      PUBLISH request is equal to the P-Asserted-Identity header field
      of the request.

   Return Routability Test, as described in <a href="rfc5360.html#section-5.6.1.3">Section 5.6.1.3 of
      [RFC5360]</a>.  It can be used for SIP PUBLISH and HTTP GET requests.
      No authentication is expected to be used with return routability
      tests and, therefore, no identity matching procedures are defined.

   SIP digest, as described in <a href="rfc5360.html#section-5.6.1.4">Section 5.6.1.4 of [RFC5360]</a>.  The
      identity of the sender is set equal to the SIP Address of Record
      (AOR) for the user that has authenticated themselves.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.2.%20%20Identity%20Condition"></a><a class="selflink" href="#section-3.1.2" name="section-3.1.2">3.1.2</a>.  Identity Condition</span>

   The identity condition, which is defined in [<a href="rfc4745.html" title='"Common Policy: A Document Format for Expressing Privacy Preferences"'>RFC4745</a>], is matched
   against the URI of the sender of the request that is used as input
   for a translation.

   When performing a translation, a relay matches the identity condition
   against the identity of the sender of the incoming request.  If they
   match, the identity condition evaluates to TRUE.  Otherwise, the
   identity condition evaluates to FALSE.

   Since only authenticated identities can be matched, the following
   subsections define acceptable means of authentication, the procedure
   for representing the identity of the sender as a URI, and the
   procedure for converting an identifier of the form user@domain,
   present in the 'id' attribute of the &lt;one&gt; and &lt;except&gt; elements,
   into a URI.




<span class="grey">Camarillo                   Standards Track                     [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.1.2.1.%20%20Acceptable%20Means%20of%20Authentication"></a><a class="selflink" href="#section-3.1.2.1" name="section-3.1.2.1">3.1.2.1</a>.  Acceptable Means of Authentication</span>

   When used with SIP, a request sent by a sender is considered
   authenticated if one of the following techniques is used:

   SIP Digest:  the relay authenticates the sender using SIP digest
      authentication [<a href="rfc2617.html" title='"HTTP Authentication: Basic and Digest Access Authentication"'>RFC2617</a>].  However, if the anonymous
      authentication described on page 194 of [<a href="rfc3261.html" title='"SIP: Session Initiation Protocol"'>RFC3261</a>] is used, the
      sender is not considered authenticated.

   Asserted Identity:  if a request contains a P-Asserted-ID header
      field [<a href="rfc3325.html" title='"Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks"'>RFC3325</a>] and the request is coming from a trusted element,
      the sender is considered authenticated.

   Cryptographically Verified Identity:  if a request contains an
      Identity header field as defined in [<a href="rfc4474.html" title='"Enhancements for Authenticated Identity Management in the Session Initiation Protocol (SIP)"'>RFC4474</a>], and it validates
      the From header field of the request, the request is considered to
      be authenticated.  Note that this is true even if the request
      contained a From header field of the form
      sip:anonymous@example.com.  As long as the signature verifies that
      the request legitimately came from this identity, it is considered
      authenticated.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.1.2.2.%20%20Computing%20a%20URI%20for%20the%20Sender"></a><a class="selflink" href="#section-3.1.2.2" name="section-3.1.2.2">3.1.2.2</a>.  Computing a URI for the Sender</span>

   For requests that are authenticated using SIP Digest, the identity of
   the sender is set equal to the SIP Address of Record (AOR) for the
   user that has authenticated themselves.  For example, consider the
   following "user record" in a database:

      SIP AOR: sip:alice@example.com
      digest username: ali
      digest password: f779ajvvh8a6s6
      digest realm: example.com

   If the relay receives a request and challenges it with the realm set
   to "example.com", and the subsequent request contains an
   Authorization header field with a username of "ali" and a digest
   response generated with the password "f779ajvvh8a6s6", the identity
   used in matching operations is "sip:alice@example.com".

   For requests that are authenticated using [<a href="rfc3325.html" title='"Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks"'>RFC3325</a>], the identity of
   the sender is equal to the SIP URI in the P-Asserted-ID header field.
   If there are multiple values for the P-Asserted-ID header field
   (there can be one sip URI and one tel URI [<a href="rfc3966.html" title='"The tel URI for Telephone Numbers"'>RFC3966</a>]), then each of
   them is used for the comparisons outlined in [<a href="rfc4745.html" title='"Common Policy: A Document Format for Expressing Privacy Preferences"'>RFC4745</a>]; if either of
   them match a &lt;one&gt; or &lt;except&gt; element, it is considered a match.




<span class="grey">Camarillo                   Standards Track                     [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


   For requests that are authenticated using the SIP Identity mechanism
   [<a href="rfc4474.html" title='"Enhancements for Authenticated Identity Management in the Session Initiation Protocol (SIP)"'>RFC4474</a>], identity of the sender is equal to the SIP URI in the From
   header field of the request, assuming that the signature in the
   Identity header field has been validated.

   SIP also allows for anonymous requests.  If a request is anonymous
   because the digest challenge/response used the "anonymous" username,
   the request is considered unauthenticated and will not match the
   &lt;identity&gt; condition.  If a request is anonymous because it contains
   a Privacy header field [<a href="rfc3323.html" title='"A Privacy Mechanism for the Session Initiation Protocol (SIP)"'>RFC3323</a>], but still contains a P-Asserted-ID
   header field, the identity in the P-Asserted-ID header field is still
   used in the authorization computations; the fact that the request was
   anonymous has no impact on the identity processing.  However, if the
   request had traversed a trust boundary and the P-Asserted-ID header
   field and the Privacy header field had been removed, the request will
   be considered unauthenticated when it arrives at the relay, and thus
   not match the &lt;sender&gt; condition.  Finally, if a request contained an
   Identity header field that was validated, and the From header field
   contained a URI of the form sip:anonymous@example.com, then the
   sender is considered authenticated, and it will have an identity
   equal to sip:anonymous@example.com.  Had such an identity been placed
   into a &lt;one&gt; or &lt;except&gt; element, there will be a match.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.1.2.3.%20%20Computing%20a%20SIP%20URI%20from%20the%20id%20Attribute"></a><a class="selflink" href="#section-3.1.2.3" name="section-3.1.2.3">3.1.2.3</a>.  Computing a SIP URI from the id Attribute</span>

   If the &lt;one&gt; or &lt;except&gt; condition does not contain a scheme,
   conversion of the value in the 'id' attribute to a SIP URI is done
   trivially.  If the characters in the 'id' attribute are valid
   characters for the user and hostpart components of the SIP URI, a
   'sip:' is appended to the contents of the 'id' attribute, and the
   result is the SIP URI.  If the characters in the 'id' attribute are
   not valid for the user and hostpart components of the SIP URI,
   conversion is not possible and, thus, the identity condition
   evaluates to FALSE.  This happens, for example, when the user portion
   of the 'id' attribute contains UTF-8 characters.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.3.%20%20Target%20Condition"></a><a class="selflink" href="#section-3.1.3" name="section-3.1.3">3.1.3</a>.  Target Condition</span>

   The target condition is matched against the target URI of a
   translation.  The target condition can contain the same elements and
   attributes as identity conditions.

   When performing a translation, a relay matches the target condition
   against the destination of the incoming request, which is typically
   contained in the Request-URI.  If they match, the target condition
   evaluates to TRUE.  Otherwise, the target condition evaluates to
   FALSE.




<span class="grey">Camarillo                   Standards Track                     [Page 6]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.4.%20%20Validity%20Condition"></a><a class="selflink" href="#section-3.1.4" name="section-3.1.4">3.1.4</a>.  Validity Condition</span>

   The &lt;validity&gt; element is not applicable to this document.  Each
   &lt;permission&gt; element has an infinite lifetime and can be revoked
   using an independent mechanism, as described in <a href="rfc5360.html#section-5.8">Section 5.8 of
   [RFC5360]</a>.  In any case, as discussed in <a href="rfc5360.html#section-4.1">Section 4.1 of [RFC5360]</a>,
   permissions are only valid as long as the context where they were
   granted is valid.  If present, &lt;validity&gt; elements MUST be ignored.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.5.%20%20Sphere%20Condition"></a><a class="selflink" href="#section-3.1.5" name="section-3.1.5">3.1.5</a>.  Sphere Condition</span>

   The &lt;sphere&gt; element is not applicable to this document and therefore
   is not used.  If present, &lt;sphere&gt; elements MUST be ignored.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Actions"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Actions</span>

   The actions in a permission document provide URIs to grant or deny
   permission to perform the translation described in the document.

      Note that the &lt;trans-handling&gt; element is not an action, as
      defined in Common Policy [<a href="rfc4745.html" title='"Common Policy: A Document Format for Expressing Privacy Preferences"'>RFC4745</a>], but rather an informational
      element.  Therefore, the conflict resolution mechanism does not
      apply to it.

   Each policy rule contains at least two &lt;trans-handling&gt; elements; one
   element with a URI to grant and another with a URI to deny
   permission.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.%20%20Translation%20Handling"></a><a class="selflink" href="#section-3.2.1" name="section-3.2.1">3.2.1</a>.  Translation Handling</span>

   The &lt;trans-handling&gt; provides URIs for a recipient to grant or deny
   the relay permission to perform a translation.  The defined values
   are:

   deny:  this action tells the relay not to perform the translation.

   grant:  this action tells the server to perform the translation.

   The 'perm-uri' attribute in the &lt;trans-handling&gt; element provides a
   URI to grant or deny permission to perform a translation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Example%20Document"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Example Document</span>

   In the following example, a client adds 'sip:bob@example.org' to the
   translation whose target URI is 'sip:alices-friends@example.com'.
   The relay handling the translation generates the following permission
   document in order to ask for permission to relay requests sent to
   'sip:alices-friends@example.com' to 'sip:bob@example.org'.  The



<span class="grey">Camarillo                   Standards Track                     [Page 7]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


   target URI is 'sip:alices-friends@example.com', and the recipient URI
   is 'sip:bob@example.org'.  The sender's identity does not play a role
   in this example.  Therefore, the permission document does not put any
   restriction on potential senders.

  +--------+        +--------------------------------+  Permission
  |        |        |                                |   Request
  | Client |        |             Relay              |    with
  |        |        | sip:alices-friends@example.com |  Permission
  +--------+        |                                |   Document
      |             |+-------+                       |-------------+
      |             ||Transl.|                       |             |
      |Manipulation ||Logic  |                       |             |
      +------------&gt;|+-------+                       |             |
           Add      +--------------------------------+             |
     sip:bob@example.org                                           V
                                                 +---------------------+
                                                 |                     |
                                                 |      Recipient      |
                                                 | sip:bob@example.org |
                                                 |                     |
                                                 +---------------------+





























<span class="grey">Camarillo                   Standards Track                     [Page 8]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
         &lt;cp:ruleset
             xmlns="urn:ietf:params:xml:ns:consent-rules"
             xmlns:cp="urn:ietf:params:xml:ns:common-policy"&gt;
             &lt;cp:rule id="f1"&gt;
          &lt;cp:conditions&gt;
              &lt;cp:identity&gt;
                  &lt;cp:many/&gt;
              &lt;/cp:identity&gt;
              &lt;recipient&gt;
                  &lt;cp:one id="sip:bob@example.org"/&gt;
              &lt;/recipient&gt;
              &lt;target&gt;
                  &lt;cp:one id="sip:alices-friends@example.com"/&gt;
              &lt;/target&gt;
          &lt;/cp:conditions&gt;
          &lt;cp:actions&gt;
              &lt;trans-handling
                  perm-uri="sips:grant-1awdch5Fasddfce34@example.com"
                  &gt;grant&lt;/trans-handling&gt;
              &lt;trans-handling
                  perm-uri="https://example.com/grant-1awdch5Fasddfce34"
                  &gt;grant&lt;/trans-handling&gt;
              &lt;trans-handling
                  perm-uri="sips:deny-23rCsdfgvdT5sdfgye@example.com"
                  &gt;deny&lt;/trans-handling&gt;
              &lt;trans-handling
                  perm-uri="https://example.com/deny-23rCsdfgvdT5sdfgye"
                  &gt;deny&lt;/trans-handling&gt;
          &lt;/cp:actions&gt;
          &lt;cp:transformations/&gt;
      &lt;/cp:rule&gt;
      &lt;/cp:ruleset&gt;


















<span class="grey">Camarillo                   Standards Track                     [Page 9]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20XML%20Schema"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  XML Schema</span>


   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
      &lt;xs:schema
        targetNamespace="urn:ietf:params:xml:ns:consent-rules"
        xmlns:cr="urn:ietf:params:xml:ns:consent-rules"
        xmlns:cp="urn:ietf:params:xml:ns:common-policy"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        elementFormDefault="qualified"
        attributeFormDefault="unqualified"&gt;

        &lt;!-- Conditions --&gt;
        &lt;xs:element name="recipient" type="cp:identityType"/&gt;
        &lt;xs:element name="target" type="cp:identityType"/&gt;

       &lt;!-- Actions --&gt;
       &lt;xs:simpleType name="trans-values"&gt;
          &lt;xs:restriction base="xs:string"&gt;
            &lt;xs:enumeration value="deny"/&gt;
            &lt;xs:enumeration value="grant"/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;

        &lt;xs:element name="trans-handling"&gt;
          &lt;xs:complexType&gt;
            &lt;xs:simpleContent&gt;
              &lt;xs:extension base="trans-values"&gt;
                &lt;xs:attribute name="perm-uri" type="xs:anyURI"
                              use="required"/&gt;
              &lt;/xs:extension&gt;
            &lt;/xs:simpleContent&gt;
          &lt;/xs:complexType&gt;
        &lt;/xs:element&gt;

      &lt;/xs:schema&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Extensibility"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Extensibility</span>

   This specification defines elements that do not have extension points
   in the "urn:ietf:params:xml:ns:consent-rules" namespace.  Instance
   documents that utilize these element definitions SHOULD be schema
   valid.  Applications processing instance documents with content that
   is not understood by the application MUST ignore that content.  IETF
   extension documents of this specification MAY reuse the
   "urn:ietf:params:xml:ns:consent-rules" namespace to define new
   elements.




<span class="grey">Camarillo                   Standards Track                    [Page 10]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  IANA Considerations</span>

   This section registers a new XML namespace and a new XML schema per
   the procedures in [<a href="rfc3688.html" title='"The IETF XML Registry"'>RFC3688</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20XML%20Namespace%20Registration"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  XML Namespace Registration</span>

   URI:  urn:ietf:params:xml:ns:consent-rules

   Registrant Contact:  IETF SIPPING working group &lt;sipping@ietf.org&gt;,
      Gonzalo Camarillo &lt;Gonzalo.Camarillo@ericsson.com&gt;

  XML:

     BEGIN
     &lt;?xml version="1.0"?&gt;
     &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
       "<a href="http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd</a>"&gt;
     &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
     &lt;head&gt;
       &lt;meta http-equiv="content-type"
             content="text/html;charset=iso-8859-1"/&gt;
       &lt;title&gt;Consent Rules Namespace&lt;/title&gt;
     &lt;/head&gt;
     &lt;body&gt;
       &lt;h1&gt;Namespace for Permission Documents&lt;/h1&gt;
       &lt;h2&gt;urn:ietf:params:xml:ns:consent-rules&lt;/h2&gt;
     &lt;p&gt;See &lt;a href="http://www.rfc-editor.org/rfc/rfc5361.txt"&gt;<a href="rfc5361.html">RFC 5361</a>
       &lt;/a&gt;.&lt;/p&gt;
     &lt;/body&gt;
     &lt;/html&gt;
     END

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20XML%20Schema%20Registration"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  XML Schema Registration</span>

   URI:  urn:ietf:params:xml:schema:consent-rules

   Registrant Contact:  IETF SIPPING working group &lt;sipping@ietf.org&gt;,
      Gonzalo Camarillo &lt;Gonzalo.Camarillo@ericsson.com&gt;

   XML:  The XML schema to be registered is contained in <a href="#section-5">Section 5</a>.










<span class="grey">Camarillo                   Standards Track                    [Page 11]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Security Considerations</span>

   <a href="rfc5360.html">RFC 5360</a> [<a href="rfc5360.html" title='"A Framework for Consent-Based Communications in the Session Initiation Protocol (SIP)"'>RFC5360</a>] discusses security-related issues, such as how to
   authenticate SIP and HTTP requests granting permissions and how to
   transport permission documents between relays and recipients, that
   are directly related to this specification.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Acknowledgements"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Acknowledgements</span>

   Jonathan Rosenberg provided useful ideas on this document.  Hannes
   Tschofenig helped align this document with common policy.  Ben
   Campbell and Mary Barnes performed a thorough review of this
   document.  Lakshminath Dondeti provided useful comments.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="http://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2617" name="ref-RFC2617">RFC2617</a>]  Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S.,
              Leach, P., Luotonen, A., and L. Stewart, "HTTP
              Authentication: Basic and Digest Access Authentication",
              <a href="rfc2617.html">RFC 2617</a>, June 1999.

   [<a id="ref-RFC3261" name="ref-RFC3261">RFC3261</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", <a href="rfc3261.html">RFC 3261</a>,
              June 2002.

   [<a id="ref-RFC3323" name="ref-RFC3323">RFC3323</a>]  Peterson, J., "A Privacy Mechanism for the Session
              Initiation Protocol (SIP)", <a href="rfc3323.html">RFC 3323</a>, November 2002.

   [<a id="ref-RFC3688" name="ref-RFC3688">RFC3688</a>]  Mealling, M., "The IETF XML Registry", <a href="http://tools.ietf.org/html/bcp81">BCP 81</a>, <a href="rfc3688.html">RFC 3688</a>,
              January 2004.

   [<a id="ref-RFC4474" name="ref-RFC4474">RFC4474</a>]  Peterson, J. and C. Jennings, "Enhancements for
              Authenticated Identity Management in the Session
              Initiation Protocol (SIP)", <a href="rfc4474.html">RFC 4474</a>, August 2006.

   [<a id="ref-RFC4745" name="ref-RFC4745">RFC4745</a>]  Schulzrinne, H., Tschofenig, H., Morris, J., Cuellar, J.,
              Polk, J., and J. Rosenberg, "Common Policy: A Document
              Format for Expressing Privacy Preferences", <a href="rfc4745.html">RFC 4745</a>,
              February 2007.






<span class="grey">Camarillo                   Standards Track                    [Page 12]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


   [<a id="ref-RFC5360" name="ref-RFC5360">RFC5360</a>]  Rosenberg, J., Camarillo, G., and D. Willis, "A Framework
              for Consent-Based Communications in the Session Initiation
              Protocol (SIP)", <a href="rfc5360.html">RFC 5360</a>, October 2008.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-RFC3966" name="ref-RFC3966">RFC3966</a>]  Schulzrinne, H., "The tel URI for Telephone Numbers",
              <a href="rfc3966.html">RFC 3966</a>, December 2004.

   [<a id="ref-RFC3325" name="ref-RFC3325">RFC3325</a>]  Jennings, C., Peterson, J., and M. Watson, "Private
              Extensions to the Session Initiation Protocol (SIP) for
              Asserted Identity within Trusted Networks", <a href="rfc3325.html">RFC 3325</a>,
              November 2002.

Author's Address

   Gonzalo Camarillo
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   EMail: Gonzalo.Camarillo@ericsson.com




























<span class="grey">Camarillo                   Standards Track                    [Page 13]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc5361.html">RFC 5361</a>               Permission Document Format           October 2008</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="http://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="http://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="http://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.












Camarillo                   Standards Track                    [Page 14]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.111, available from
<a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>



</body><!-- Mirrored from tools.ietf.org/html/rfc5361 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Apr 2015 16:01:33 GMT --></html>