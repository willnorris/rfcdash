<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from tools.ietf.org/html/rfc5641 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 12:57:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129c" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Relation.Replaces" content="draft-nmcgill-l2tpext-circuit-status-extensions" />
<meta name="DC.Identifier" content="urn:ietf:rfc:5641" />
<meta name="DC.Date.Issued" content="August, 2009" />
<meta name="DC.Creator" content="Pignataro, Carlos" />
<meta name="DC.Creator" content="McGill, Neil" />
<meta name="DC.Description.Abstract" content="This document defines additional Layer 2 Tunneling Protocol Version 3
(L2TPv3) bit values to be used within the &quot;Circuit Status&quot; Attribute
Value Pair (AVP) to communicate more granular error states for
Attachment Circuits (ACs) and Pseudowires (PWs). It also generalizes
the Active bit and deprecates the use of the New bit in the &quot;Circuit
Status&quot; AVP, updating RFC3931, RFC4349, RFC4454, RFC4591, and RFC4719." />
<meta name="DC.Title" content="Layer 2 Tunneling Protocol Version 3 (L2TPv3) Extended Circuit Status Values" />

    <link rel="icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <title>RFC 5641 - Layer 2 Tunneling Protocol Version 3 (L2TPv3) Extended Circuit Status Values</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgblue"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5641.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5641" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-l2tpext-circuit-status-extensions" title="draft-ietf-l2tpext-circuit-status-extensions">draft-ietf-l2tp...</a>] [<a href='https://datatracker.ietf.org/doc/rfc5641' title='IESG Datatracker information for this document'>Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5641" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5641" title="Side-by-side diff">Diff2</a>]         </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Network Working Group                                          N. McGill
Request for Comments: 5641                                  C. Pignataro
Updates: <a href="rfc3931.html">3931</a>, <a href="rfc4349.html">4349</a>, <a href="rfc4454.html">4454</a>, <a href="rfc4591.html">4591</a>, <a href="rfc4719.html">4719</a>                      Cisco Systems
Category: Standards Track                                    August 2009

             <span class="h1">Layer 2 Tunneling Protocol Version 3 (L2TPv3)</span>
                     <span class="h1">Extended Circuit Status Values</span>

Abstract

   This document defines additional Layer 2 Tunneling Protocol Version 3
   (L2TPv3) bit values to be used within the "Circuit Status" Attribute
   Value Pair (AVP) to communicate finer-grained error states for
   Attachment Circuits (ACs) and pseudowires (PWs).  It also generalizes
   the Active bit and deprecates the use of the New bit in the Circuit
   Status AVP, updating <a href="rfc3931.html">RFC 3931</a>, <a href="rfc4349.html">RFC 4349</a>, <a href="rfc4454.html">RFC 4454</a>, <a href="rfc4591.html">RFC 4591</a>, and <a href="rfc4719.html">RFC</a>
   <a href="rfc4719.html">4719</a>.

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.



<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 1]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-2">2</a>
     <a href="#section-1.1">1.1</a>.  Specification of Requirements  . . . . . . . . . . . . . .  <a href="#page-2">2</a>
     <a href="#section-1.2">1.2</a>.  Abbreviations  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  L2TPv3 Extended Circuit Status Values  . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-3">3</a>.  Circuit Status Usage and Clarifications  . . . . . . . . . . .  <a href="#page-7">7</a>
   <a href="#section-4">4</a>.  Updates to Existing RFCs . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
   <a href="#section-5">5</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-6">6</a>.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-7">7</a>.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-8">8</a>.  References . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-8.1">8.1</a>.  Normative References . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-8.2">8.2</a>.  Informative References . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>

<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>.  Introduction</span>

   Currently, the L2TPv3 Circuit Status AVP [<a href="rfc3931.html" title="&quot;Layer Two Tunneling Protocol - Version 3 (L2TPv3)&quot;">RFC3931</a>] is able to convey
   the UP/DOWN status of an access circuit.  However, a finer
   granularity is often useful to determine the direction of the fault,
   as has been added for MPLS-based pseudowires and is used in the
   pseudowire control protocol using the Label Distribution Protocol
   (LDP); see <a href="rfc4446.html#section-3.5">Section&nbsp;3.5 of [RFC4446]</a> and <a href="rfc4447.html#section-5.4.2">Section&nbsp;5.4.2 of [RFC4447]</a>.

   Additionally, it is useful (in session-level redundancy scenarios) to
   be able to indicate if a pseudowire is in a standby state, where it
   is fully established by signaling and allows Operations,
   Administration, and Maintenance, but is not switching data.  Again,
   such functionality is available for MPLS-based pseudowires using LDP,
   see [<a href="#ref-PREF-FWD" title="&quot;Preferential Forwarding Status bit definition&quot;">PREF-FWD</a>].

   This document provides extended circuit status bit values for L2TPv3
   and adds them in a manner such that it is backwards compatible with
   the current Circuit Status AVP.  These new bits are applicable to all
   pseudowire types that use the Circuit Status AVP.

<span class="h3"><a class="selflink" name="section-1.1" href="#section-1.1">1.1</a>.  Specification of Requirements</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].










<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 2]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


<span class="h3"><a class="selflink" name="section-1.2" href="#section-1.2">1.2</a>.  Abbreviations</span>

   The following abbreviations are used in this document and in the
   documents that it updates.  L2TPv3 Control Message Types are listed
   in <a href="rfc3931.html#section-6">Section&nbsp;6 of [RFC3931]</a>.

     AC    Attachment Circuit
     AVP   Attribute Value Pair
     LCCE  L2TP Control Connection Endpoint
     NNI   Network-Network Interface
     PE    Provider Edge
     PSN   Packet Switched Network
     PW    Pseudowire

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>.  L2TPv3 Extended Circuit Status Values</span>

   The Circuit Status AVP (ICRQ, ICRP, ICCN, OCRQ, OCRP, OCCN, SLI),
   Attribute Type 71, indicates the initial status of, or a status
   change in, the circuit to which the session is bound.

   The Attribute Value field for this AVP, currently defined in
   [<a href="rfc3931.html" title="&quot;Layer Two Tunneling Protocol - Version 3 (L2TPv3)&quot;">RFC3931</a>], has the following format:

      0                   1
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |         Reserved          |N|A|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

     Bit  Bit-Value   Name
     ----------------------------------------------------------------
     (A)  15  0x0001  Active
     (N)  14  0x0002  New

   As currently defined in [<a href="rfc3931.html" title="&quot;Layer Two Tunneling Protocol - Version 3 (L2TPv3)&quot;">RFC3931</a>] and replicated in [<a href="rfc4349.html" title="&quot;High-Level Data Link Control (HDLC) Frames over Layer 2 Tunneling Protocol, Version 3 (L2TPv3)&quot;">RFC4349</a>],
   [<a href="rfc4454.html" title="&quot;Asynchronous Transfer Mode (ATM) over Layer 2 Tunneling Protocol Version 3 (L2TPv3)&quot;">RFC4454</a>], [<a href="rfc4591.html" title="&quot;Frame Relay over Layer 2 Tunneling Protocol Version 3 (L2TPv3)&quot;">RFC4591</a>], and [<a href="rfc4719.html" title="&quot;Transport of Ethernet Frames over Layer 2 Tunneling Protocol Version 3 (L2TPv3)&quot;">RFC4719</a>], the two bits have the following
   meanings:

   o  The A (Active) bit indicates whether the circuit is up/active/
      ready (1) or down/inactive/not-ready (0).

   o  The N (New) bit indicates whether the circuit status indication is
      for a new circuit (1) or an existing circuit (0).

   This document updates the semantics of the A and N bits as follows
   (see also <a href="#section-4">Section 4</a>):





<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 3]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


   The A (Active) bit indicates whether the local pseudowire endpoint
   (including the local Attachment Circuit (AC) and local Packet
   Switched Network (PSN)-facing pseudowire termination) has no faults
   present and is up/active/ready (1) or has faults present and is down/
   inactive/not-ready (0).

   The N (New) bit indicates if the notification is for a new circuit
   (1) or an existing circuit (0), and is provided to emulate Network-
   Network Interface (NNI) signaling between Provider Edge (PE) routers,
   e.g., Frame Relay NNI.  It MAY be used to convey that a circuit has
   been re-provisioned or newly provisioned at the PE, which can already
   be inferred from the L2TP control message type.  It is therefore
   uncertain as to what use the receiving PE can make of this bit,
   although it MAY include logging.  This document deprecates this bit
   as it is of little or no use, hence this bit SHOULD be ignored on
   receipt and is OPTIONAL to set on sending.  For reference, see
   <a href="rfc4591.html#section-3.4">Section&nbsp;3.4 of [RFC4591]</a>, which does not specify any additional usage
   beyond the setting of the N bit in the ICRQ, ICRP (and OCRQ, OCRP)
   and the clearing of it in all other control messages.

   This document also extends this bitmap of values to allow for finer
   granularity of local pseudowire (i.e., Attachment Circuit or PSN-
   facing endpoint) status reporting.

   The Attribute Value field for the Circuit Status AVP, including the
   new values, has the following format:

      0                   1
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |     Reserved    |S|E|I|T|R|N|A|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

     Bit  Bit-Value   Name
     -----------------------------------------------------------------
     (A)  15  0x0001  Active: Pseudowire has no faults
     (N)  14  0x0002  New [use deprecated]
     (R)  13  0x0004  Local Attachment Circuit (ingress) Receive Fault
     (T)  12  0x0008  Local Attachment Circuit (egress) Transmit Fault
     (I)  11  0x0010  Local PSN-facing PW (ingress) Receive Fault
     (E)  10  0x0020  Local PSN-facing PW (egress) Transmit Fault
     (S)   9  0x0040  Pseudowire is in Standby mode

   The new bit values have the following meanings:







<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 4]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


   (R), Local Attachment Circuit (ingress) Receive Fault

    Fault Here
         |
         |
         |   +----------------------+         +----------------------+
         | Rx|         LCCE         |Egress   |       Peer LCCE      |
       --X--&gt;|                      |--------&gt;|                      |
             |             L2TPv3   |  [PSN]  |   L2TPv3             |
           Tx| Circuit   Pseudowire |Ingress  | Pseudowire   Circuit |
       &lt;-----|                      |&lt;--------|                      |
             +----------------------+         +----------------------+

      An alarm or fault has occurred at the local Attachment Circuit
      such that it is unable to receive traffic.  It can still transmit
      traffic.

   (T), Local Attachment Circuit (egress) Transmit Fault

             +----------------------+         +----------------------+
           Rx|         LCCE         |Egress   |       Peer LCCE      |
       -----&gt;|                      |--------&gt;|                      |
             |             L2TPv3   |  [PSN]  |   L2TPv3             |
           Tx| Circuit   Pseudowire |Ingress  | Pseudowire   Circuit |
       &lt;--X--|                      |&lt;--------|                      |
          |  +----------------------+         +----------------------+
          |
          |
     Fault Here

      A fault has occurred at the local Attachment Circuit such that it
      is unable to transmit traffic.  It can still receive traffic.

   (I), Local PSN-facing PW (ingress) Receive Fault

             +----------------------+         +----------------------+
           Rx|         LCCE         |Egress   |       Peer LCCE      |
       -----&gt;|                      |--------&gt;|                      |
             |             L2TPv3   |  [PSN]  |   L2TPv3             |
           Tx| Circuit   Pseudowire |Ingress  | Pseudowire   Circuit |
       &lt;-----|                      |&lt;---X----|                      |
             +----------------------+    |    +----------------------+
                                         |
                                         |
                                    Fault Here

      A fault has occurred in the receive direction between the local
      endpoint and the remote L2TP endpoint.



<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 5]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-6" id="page-6" href="#page-6" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


      Note that a fault at the session level would not necessarily
      trigger an L2TP control connection timeout.  The means of
      detecting this fault are outside the scope of this document; as an
      example, detection may be via PW Type-specific means,
      Bidirectional Forwarding Detection (BFD), or other methods.

   (E), Local PSN-facing PW (egress) Transmit Fault

                                      Fault Here
                                           |
                                           |
             +----------------------+      |  +----------------------+
           Rx|         LCCE         |Egress|  |       Peer LCCE      |
       -----&gt;|                      |------X-&gt;|                      |
             |             L2TPv3   |  [PSN]  |   L2TPv3             |
           Tx| Circuit   Pseudowire |Ingress  | Pseudowire   Circuit |
       &lt;-----|                      |&lt;--------|                      |
             +----------------------+         +----------------------+

      A fault has occurred in the transmit direction between the local
      endpoint and the remote L2TP endpoint.

      Note that a fault at the session level would not necessarily
      trigger an L2TP control connection timeout.  The means of
      detecting this fault are outside the scope of this document; as an
      example, detection may be via PW Type-specific means, BFD, or
      other methods.

   (S), Pseudowire is in Standby mode

                                      Standby
                                        |
                                        |
             +----------------------+   |     +----------------------+
           Rx|         LCCE         |Egress   |       Peer LCCE      |
       -----&gt;|                      |---X----&gt;|                      |
             |             L2TPv3   |  [PSN]  |   L2TPv3             |
           Tx| Circuit   Pseudowire |Ingress  | Pseudowire   Circuit |
       &lt;-----|                      |&lt;--X-----|                      |
             +----------------------+   |     +----------------------+
                                        |
                                        |
                                      Standby

      The pseudowire has been placed into a Standby mode, which means
      that although it was signaled (during setup of the PW) and is
      operational, it is NOT switching user traffic.  Any received user
      traffic SHOULD be dropped.  User traffic MUST NOT be transmitted.



<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 6]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-7" id="page-7" href="#page-7" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


      A standby pseudowire also allows for means to check its data plane
      liveness in order to ensure its ability to switch data packets
      end-to-end.  This is achieved, for example, as detailed in
      [<a href="rfc5085.html" title="&quot;Pseudowire Virtual Circuit Connectivity Verification (VCCV): A Control Channel for Pseudowires&quot;">RFC5085</a>] or [<a href="#ref-VCCV-BFD" title="&quot;Bidirectional Forwarding Detection (BFD) for the Pseudowire Virtual Circuit Connectivity Verification (VCCV)&quot;">VCCV-BFD</a>].  However, data is not forwarded from an
      Attachment Circuit (AC) into the L2TPv3 session, or from the
      L2TPv3 session out to the AC.

<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>.  Circuit Status Usage and Clarifications</span>

   In implementations prior to this specification, bits 0-13 MUST be set
   to zero (see <a href="rfc3931.html#section-5.4.5">Section&nbsp;5.4.5 of [RFC3931]</a>).  This allows for legacy
   implementations to interwork properly with new implementations.

   The following are clarifications regarding the usage of the Circuit
   Status AVP bits as defined in this specification:

   o  The (R), (T), (I), and (E) bits are collectively referred to as
      "fault status bits".

   o  [<a href="rfc3931.html" title="&quot;Layer Two Tunneling Protocol - Version 3 (L2TPv3)&quot;">RFC3931</a>] defined the (A) bit as pertaining to local access
      circuit state only.  This document redefines it as meaning that
      "no faults are present on the local pseudowire endpoint."

   o  If multiple faults occur, all the fault status bits corresponding
      to each fault MUST be set (i.e., they MUST be bitwise ORed
      together).

   o  The (A) bit MUST NOT be set until all fault status bits are
      cleared.  This behavior allows an endpoint to be backwards
      compatible with a remote endpoint that does not understand these
      new status bits.

   o  If any of the fault status bits are set, then the (A) bit MUST be
      cleared.  That is, the fault status bits (R, T, I, E) are a more
      granular definition of (A), such that ORing the bits provides an
      inverted (A).

   o  If (A) is clear and the fault status bits (R, T, I, E) are clear,
      it means that there is no extended circuit status.  That is, the
      circuit is down/inactive/not-ready (from the (A) bit), without a
      more granular (extended) indication.

   o  The (S) bit can be set in conjunction with any other bit,
      including (A).  A pseudowire endpoint in Standby (S bit set) can
      be up/active/ready (A bit set) or experiencing a fault (A bit
      cleared and one or more of the fault status bits (R, T, I, E) set.

   o  Leaving Standby mode is indicated by the clearing of the (S) bit.



<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 7]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-8" id="page-8" href="#page-8" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


   o  The usage of the (N) bit has been deprecated.

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>.  Updates to Existing RFCs</span>

   This document updates existing RFCs that define (either generically
   or in the context of a specific set of PW Types) the Active and New
   bits of the Circuit Status AVP.  The Active and New bits of the
   Circuit Status AVP are specified in <a href="rfc3931.html#section-5.4.5">Section&nbsp;5.4.5 of [RFC3931]</a>.
   Those definitions are adapted to specific Attachment Circuits and
   replicated in <a href="rfc4349.html#section-3.4">Section&nbsp;3.4 of [RFC4349]</a> (High-Level Data Link Control
   Frames over L2TPv3), <a href="rfc4454.html#section-8">Section&nbsp;8 of [RFC4454]</a> (Asynchronous Transfer
   Mode over L2TPv3), <a href="rfc4591.html#section-3.4">Section&nbsp;3.4 of [RFC4591]</a> (Frame Relay over
   L2TPv3), and <a href="rfc4719.html#section-2.3.3">Section&nbsp;2.3.3 of [RFC4719]</a> (Ethernet Frames over
   L2TPv3).  This document updates the definitions in all five of these
   references to say:

      The A (Active) bit indicates whether the local pseudowire endpoint
      (including the local Attachment Circuit and local PSN-facing
      pseudowire termination) has no faults present and is up/active/
      ready (1) or has faults present and is down/inactive/not-ready
      (0).

      The N (New) bit usage is deprecated; it SHOULD be ignored on
      receipt and is OPTIONAL to set on sending.

   This document also updates <a href="#section-2.2">Section 2.2</a> (bullet c) of [<a href="rfc4719.html" title="&quot;Transport of Ethernet Frames over Layer 2 Tunneling Protocol Version 3 (L2TPv3)&quot;">RFC4719</a>],
   removing the following two sentences:

      For ICRQ and ICRP, the Circuit Status AVP MUST indicate that the
      circuit status is for a new circuit (refer to N bit in <a href="#section-2.3.3">Section</a>
      <a href="#section-2.3.3">2.3.3</a>).

      For ICCN and SLI (refer to <a href="#section-2.3.2">Section 2.3.2</a>), the Circuit Status AVP
      MUST indicate that the circuit status is for an existing circuit
      (refer to N bit in <a href="#section-2.3.3">Section 2.3.3</a>) and reflect the current status
      of the link (refer to A bit in <a href="#section-2.3.3">Section 2.3.3</a>).

   And finally, this document updates <a href="rfc4349.html#section-3.1">Section&nbsp;3.1 of [RFC4349]</a>, <a href="rfc4454.html#section-3.1">Section</a>
   <a href="rfc4454.html#section-3.1">3.1 of [RFC4454]</a>, <a href="rfc4591.html#section-3.1">Section&nbsp;3.1 of [RFC4591]</a>, and <a href="rfc4719.html#section-2.2">Section&nbsp;2.2 of
   [RFC4719]</a> with the following paragraph addition:

      The usage of the N bit in the Circuit Status AVP is deprecated.
      Therefore, for ICRQ and ICRP, the Circuit Status AVP need not
      indicate on sending (nor check on receipt) that the circuit status
      is for a new circuit, and for ICCN and SLI, the Circuit Status AVP
      need not indicate on sending (nor check on receipt) that the
      circuit status is for an existing circuit.




<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 8]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-9" id="page-9" href="#page-9" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>.  Security Considerations</span>

   Security considerations for the Circuit Status AVP are covered in the
   base L2TPv3 specification (see <a href="rfc3931.html#section-8">Section&nbsp;8 of [RFC3931]</a>).  No
   additional security considerations exist with extending this
   attribute.

<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>.  IANA Considerations</span>

   The Circuit Status Bits number space [<a href="#ref-IANA-l2tp" title="&quot;Layer Two Tunneling Protocol 'L2TP'&quot;">IANA-l2tp</a>] is managed by IANA
   as per <a href="rfc3931.html#section-10.7">Section&nbsp;10.7 of [RFC3931]</a>.  Five new bits (bits 9 through 13)
   and one updated bit (bit 14) have been assigned as follows:

   Circuit Status Bits - per [<a href="rfc3931.html" title="&quot;Layer Two Tunneling Protocol - Version 3 (L2TPv3)&quot;">RFC3931</a>]
   -------------------

   Bit  9 - S (Standby) bit
   Bit 10 - E (Local PSN-facing PW (egress) Tx Fault) bit
   Bit 11 - I (Local PSN-facing PW (ingress) Rx Fault) bit
   Bit 12 - T (Local AC (egress) Tx Fault) bit
   Bit 13 - R (Local AC (ingress) Rx Fault) bit
   Bit 14 - N (New) bit [use deprecated]

<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>.  Acknowledgements</span>

   The authors wish to thank Muhammad Yousuf, Mark Townsley, George
   Wilkie, Prashant Jhingran, Pawel Sowinski, and Ignacio Goyret for
   useful comments received.

<span class="h2"><a class="selflink" name="section-8" href="#section-8">8</a>.  References</span>

<span class="h3"><a class="selflink" name="section-8.1" href="#section-8.1">8.1</a>.  Normative References</span>

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]    Bradner, S., "Key words for use in RFCs to Indicate
                Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a name="ref-RFC3931" id="ref-RFC3931">RFC3931</a>]    Lau, J., Townsley, M., and I. Goyret, "Layer Two
                Tunneling Protocol - Version 3 (L2TPv3)", <a href="rfc3931.html">RFC 3931</a>,
                March 2005.

   [<a name="ref-RFC4349" id="ref-RFC4349">RFC4349</a>]    Pignataro, C. and M. Townsley, "High-Level Data Link
                Control (HDLC) Frames over Layer 2 Tunneling Protocol,
                Version 3 (L2TPv3)", <a href="rfc4349.html">RFC 4349</a>, February 2006.

   [<a name="ref-RFC4454" id="ref-RFC4454">RFC4454</a>]    Singh, S., Townsley, M., and C. Pignataro, "Asynchronous
                Transfer Mode (ATM) over Layer 2 Tunneling Protocol
                Version 3 (L2TPv3)", <a href="rfc4454.html">RFC 4454</a>, May 2006.




<span class="grey">McGill &amp; Pignataro          Standards Track                     [Page 9]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-10" id="page-10" href="#page-10" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


   [<a name="ref-RFC4591" id="ref-RFC4591">RFC4591</a>]    Townsley, M., Wilkie, G., Booth, S., Bryant, S., and J.
                Lau, "Frame Relay over Layer 2 Tunneling Protocol
                Version 3 (L2TPv3)", <a href="rfc4591.html">RFC 4591</a>, August 2006.

   [<a name="ref-RFC4719" id="ref-RFC4719">RFC4719</a>]    Aggarwal, R., Townsley, M., and M. Dos Santos,
                "Transport of Ethernet Frames over Layer 2 Tunneling
                Protocol Version 3 (L2TPv3)", <a href="rfc4719.html">RFC 4719</a>, November 2006.

<span class="h3"><a class="selflink" name="section-8.2" href="#section-8.2">8.2</a>.  Informative References</span>

   [<a name="ref-IANA-l2tp" id="ref-IANA-l2tp">IANA-l2tp</a>]  Internet Assigned Numbers Authority, "Layer Two
                Tunneling Protocol 'L2TP'", &lt;<a href="http://www.iana.org/">http://www.iana.org</a>&gt;.

   [<a name="ref-PREF-FWD" id="ref-PREF-FWD">PREF-FWD</a>]   Muley, P., Bocci, M., and L. Martini, "Preferential
                Forwarding Status bit definition", Work in Progress,
                September 2008.

   [<a name="ref-RFC4446" id="ref-RFC4446">RFC4446</a>]    Martini, L., "IANA Allocations for Pseudowire Edge to
                Edge Emulation (PWE3)", <a href="https://tools.ietf.org/html/bcp116">BCP 116</a>, <a href="rfc4446.html">RFC 4446</a>, April 2006.

   [<a name="ref-RFC4447" id="ref-RFC4447">RFC4447</a>]    Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G.
                Heron, "Pseudowire Setup and Maintenance Using the Label
                Distribution Protocol (LDP)", <a href="rfc4447.html">RFC 4447</a>, April 2006.

   [<a name="ref-RFC5085" id="ref-RFC5085">RFC5085</a>]    Nadeau, T. and C. Pignataro, "Pseudowire Virtual Circuit
                Connectivity Verification (VCCV): A Control Channel for
                Pseudowires", <a href="rfc5085.html">RFC 5085</a>, December 2007.

   [<a name="ref-VCCV-BFD" id="ref-VCCV-BFD">VCCV-BFD</a>]   Nadeau, T. and C. Pignataro, "Bidirectional Forwarding
                Detection (BFD) for the Pseudowire Virtual Circuit
                Connectivity Verification (VCCV)", Work in Progress,
                July 2009.



















<span class="grey">McGill &amp; Pignataro          Standards Track                    [Page 10]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-11" id="page-11" href="#page-11" class="invisible"> </a>
<span class="grey"><a href="rfc5641.html">RFC 5641</a>         L2TPv3 Extended Circuit Status Values       August 2009</span>


Authors' Addresses

   Neil McGill
   Cisco Systems
   7025-4 Kit Creek Road
   PO Box 14987
   Research Triangle Park, NC 27709
   USA

   EMail: nmcgill@cisco.com


   Carlos Pignataro
   Cisco Systems
   7200-12 Kit Creek Road
   PO Box 14987
   Research Triangle Park, NC  27709
   USA

   EMail: cpignata@cisco.com































McGill &amp; Pignataro          Standards Track                    [Page 11]

</pre><br />
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.129c, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>
</body>

<!-- Mirrored from tools.ietf.org/html/rfc5641 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 12:57:13 GMT -->
</html>
