<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc8005 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:17 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="rfc5205" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:8005" name="DC.Identifier"/>
<meta content="October, 2016" name="DC.Date.Issued"/>
<meta content="Julien Laganier &lt;julien.ietf@gmail.com&gt;" name="DC.Creator"/>
<meta content="This document specifies a resource record (RR) for the Domain Name
System (DNS) and how to use it with the Host Identity Protocol (HIP).
This RR allows a HIP node to store in the DNS its Host Identity (HI),
the public component of the node public-private key pair; its Host
Identity Tag (HIT), a truncated hash of its public key (PK); and the
domain names of its rendezvous servers (RVSs). This document obsoletes
RFC 5205." name="DC.Description.Abstract"/>
<meta content="Host Identity Protocol (HIP) Domain Name System (DNS) Extension" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 8005 - Host Identity Protocol (HIP) Domain Name System (DNS) Extension</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8005.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8005" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-hip-rfc5205-bis" title="draft-ietf-hip-rfc5205-bis">draft-ietf-hip-...</a>] [<a href="https://datatracker.ietf.org/doc/rfc8005" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8005" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8005" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                       J. Laganier
Request for Comments: 8005                       Luminate Wireless, Inc.
Obsoletes: <a href="rfc5205.html">5205</a>                                             October 2016
Category: Standards Track
ISSN: 2070-1721


    <span class="h1">Host Identity Protocol (HIP) Domain Name System (DNS) Extension</span>

Abstract

   This document specifies a resource record (RR) for the Domain Name
   System (DNS) and how to use it with the Host Identity Protocol (HIP).
   This RR allows a HIP node to store in the DNS its Host Identity (HI),
   the public component of the node public-private key pair; its Host
   Identity Tag (HIT), a truncated hash of its public key (PK); and the
   domain names of its rendezvous servers (RVSs).  This document
   obsoletes <a href="rfc5205.html">RFC 5205</a>.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc7841.html#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc8005">http://www.rfc-editor.org/info/rfc8005</a>.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




<span class="grey">Laganier                     Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Conventions Used in This Document . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-3">3</a>.  Usage Scenarios . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-3.1">3.1</a>.  Simple Static Single-Homed End Host . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.2">3.2</a>.  Mobile End Host . . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-4">4</a>.  Overview of Using the DNS with HIP  . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-4.1">4.1</a>.  Storing HI, HIT, and RVS in the DNS . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-4.2">4.2</a>.  Initiating Connections Based on DNS Names . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-5">5</a>.  HIP RR Storage Format . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-5.1">5.1</a>.  HIT Length Format . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-5.2">5.2</a>.  PK Algorithm Format . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-5.3">5.3</a>.  PK Length Format  . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-5.4">5.4</a>.  HIT Format  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-5.5">5.5</a>.  Public Key Format . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-5.6">5.6</a>.  Rendezvous Servers Format . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
   <a href="#section-6">6</a>.  HIP RR Presentation Format  . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-7">7</a>.  Examples  . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
   <a href="#section-8">8</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
     <a href="#section-8.1">8.1</a>.  Attacker Tampering with an Insecure HIP RR  . . . . . . .  <a href="#page-13">13</a>
     <a href="#section-8.2">8.2</a>.  Hash and HITs Collisions  . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
     <a href="#section-8.3">8.3</a>.  DNSSEC  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-9">9</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-10">10</a>. References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-10.1">10.1</a>.  Normative References . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-10.2">10.2</a>.  Informative References . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   <a href="#appendix-A">Appendix A</a>.  Changes from <a href="rfc5205.html">RFC 5205</a>  . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
   Contributors  . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-18">18</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document specifies a resource record (RR) for the Domain Name
   System (DNS) [<a href="rfc1034.html" title='"Domain names - concepts and facilities"'>RFC1034</a>] and how to use it with the Host Identity
   Protocol (HIP) [<a href="rfc7401.html" title='"Host Identity Protocol Version 2 (HIPv2)"'>RFC7401</a>].  This RR allows a HIP node to store in the
   DNS its Host Identity (HI), the public component of the node public-
   private key pair; its Host Identity Tag (HIT), a truncated hash of
   its HI; and the domain names of its rendezvous servers (RVSs)
   [<a href="rfc8004.html" title='"Host Identity Protocol (HIP) Rendezvous Extension"'>RFC8004</a>].

   Currently, most of the Internet applications that need to communicate
   with a remote host first translate a domain name (often obtained via
   user input) into one or more IP addresses.  This step occurs prior to
   communication with the remote host and relies on a DNS lookup.





<span class="grey">Laganier                     Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   With HIP, IP addresses are intended to be used mostly for on-the-wire
   communication between end hosts, while most Upper Layer Protocols
   (ULPs) and applications use HIs or HITs instead (ICMP might be an
   example of a ULP not using them).  Consequently, we need a means to
   translate a domain name into an HI.  Using the DNS for this
   translation is pretty straightforward: We define a HIP RR.  Upon
   query by an application or ULP for a name-to-IP-address lookup, the
   resolver would then additionally perform a name-to-HI lookup and use
   it to construct the resulting HI-to-IP-address mapping (which is
   internal to the HIP layer).  The HIP layer uses the HI-to-IP-address
   mapping to translate HIs and HITs into IP addresses, and vice versa.

   The HIP specification [<a href="rfc7401.html" title='"Host Identity Protocol Version 2 (HIPv2)"'>RFC7401</a>] specifies the HIP base exchange
   between a HIP Initiator and a HIP Responder based on a four-way
   handshake involving a total of four HIP packets (I1, R1, I2, and R2).
   Since the HIP packets contain both the Initiator and the Responder
   HIT, the Initiator needs to have knowledge of the Responder's HI and
   HIT prior to initiating the base exchange by sending an I1 packet.

   The HIP Rendezvous Extension [<a href="rfc8004.html" title='"Host Identity Protocol (HIP) Rendezvous Extension"'>RFC8004</a>] allows a HIP node to be
   reached via the IP address(es) of a third party, the node's RVS.  An
   Initiator willing to establish a HIP association with a Responder
   served by an RVS would typically initiate a HIP base exchange by
   sending the I1 packet initiating the exchange towards the RVS IP
   address rather than towards the Responder IP address.  Consequently,
   we need a means to find the name of an RVS for a given host name.

   This document introduces the HIP DNS RR to store the RVS, HI, and HIT
   information.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions Used in This Document</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Usage%20Scenarios"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Usage Scenarios</span>

   In this section, we briefly introduce a number of usage scenarios
   where the DNS is useful with HIP.

   With HIP, most applications and ULPs are unaware of the IP addresses
   used to carry packets on the wire.  Consequently, a HIP node could
   take advantage of having multiple IP addresses for failover,
   redundancy, mobility, or renumbering, in a manner that is transparent
   to most ULPs and applications (because they are bound to HIs; hence,
   they are agnostic to these IP address changes).




<span class="grey">Laganier                     Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   In these situations, for a node to be reachable by reference to its
   Fully Qualified Domain Name (FQDN), the following information should
   be stored in the DNS:

   o  A set of IP addresses via A [<a href="rfc1035.html" title='"Domain names - implementation and specification"'>RFC1035</a>] and AAAA [<a href="rfc3596.html" title='"DNS Extensions to Support IP Version 6"'>RFC3596</a>] Resource
      Record Sets (RRSets) [<a href="rfc2181.html" title='"Clarifications to the DNS Specification"'>RFC2181</a>].

   o  An HI, a HIT, and possibly a set of RVSs through HIP RRs.

   The HIP RR is class independent.

   When a HIP node wants to initiate communication with another HIP
   node, it first needs to perform a HIP base exchange to set up a HIP
   association towards its peer.  Although such an exchange can be
   initiated opportunistically, i.e., without prior knowledge of the
   Responder's HI, by doing so both nodes knowingly risk
   man-in-the-middle (MitM) attacks on the HIP exchange.  To prevent
   these attacks, it is recommended that the Initiator first obtains the
   HI of the Responder and then initiates the exchange.  This can be
   done, for example, through manual configuration or DNS lookups.
   Hence, a HIP RR is introduced.

   When a HIP node is frequently changing its IP address(es), the
   natural DNS latency for propagating changes may prevent it from
   publishing its new IP address(es) in the DNS.  For solving this
   problem, the HIP Architecture [<a href="rfc4423.html" title='"Host Identity Protocol (HIP) Architecture"'>RFC4423</a>] introduces RVSs [<a href="rfc8004.html" title='"Host Identity Protocol (HIP) Rendezvous Extension"'>RFC8004</a>].  A
   HIP host uses an RVS as a rendezvous point to maintain reachability
   with possible HIP Initiators while moving [<a href="rfc5206.html" title='"End-Host Mobility and Multihoming with the Host Identity Protocol"'>RFC5206</a>].  Such a HIP node
   would publish in the DNS its RVS domain name(s) in a HIP RR, while
   keeping its RVS up-to-date with its current set of IP addresses.

   When a HIP node wants to initiate a HIP exchange with a Responder, it
   will perform a number of DNS lookups.  Depending on the type of
   implementation, the order in which those lookups will be issued may
   vary.  For instance, implementations using HIT in Application
   Programming Interfaces (APIs) may typically first query for HIP RRs
   at the Responder FQDN, while those using an IP address in APIs may
   typically first query for A and/or AAAA RRs.

   In the following, we assume that the Initiator first queries for HIP
   RRs at the Responder FQDN.

   If the query for the HIP type was responded to with a DNS answer with
   RCODE=3 (Name Error), then the Responder's information is not present
   in the DNS, and further queries for the same owner name SHOULD NOT be
   made.





<span class="grey">Laganier                     Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   In case the query for the HIP records returned a DNS answer with
   RCODE=0 (No Error) and an empty answer section, it means that no HIP
   information is available at the Responder name.  In such a case, if
   the Initiator has been configured with a policy to fall back to
   opportunistic HIP (initiating without knowing the Responder's HI) or
   plain IP, it would send out more queries for A and AAAA types at the
   Responder's FQDN.

   Depending on the combinations of answers, the situations described in
   Sections <a href="#section-3.1">3.1</a> and <a href="#section-3.2">3.2</a> can occur.

   Note that storing HIP RR information in the DNS at an FQDN that is
   assigned to a non-HIP node might have ill effects on its reachability
   by HIP nodes.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Simple%20Static%20Single-Homed%20End%20Host"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Simple Static Single-Homed End Host</span>

   In addition to its IP address or addresses (IP-R), a HIP node (R)
   with a single static network attachment that wishes to be reachable
   by reference to its FQDN (www.example.com) to act as a Responder
   would store in the DNS a HIP RR containing its Host Identity (HI-R)
   and Host Identity Tag (HIT-R).

   An Initiator willing to associate with a node would typically issue
   the following queries:

   o  Query #1: QNAME=www.example.com, QTYPE=HIP

   (QCLASS=IN is assumed and omitted from the examples)

   Which returns a DNS packet with RCODE=0 and one or more HIP RRs with
   the HIT and HI (e.g., HIT-R and HI-R) of the Responder in the answer
   section, but no RVS.

   o  Query #2: QNAME=www.example.com, QTYPE=A

   o  Query #3: QNAME=www.example.com, QTYPE=AAAA

   Which would return DNS packets with RCODE=0 and, respectively, one or
   more A or AAAA RRs containing the IP address(es) of the Responder
   (e.g., IP-R) in their answer sections.

   Caption: In the remainder of this document, for the sake of keeping
            diagrams simple and concise, several DNS queries and answers
            are represented as one single transaction, while in fact
            there are several queries and answers flowing back and
            forth, as described in the textual examples.




<span class="grey">Laganier                     Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


               [HIP? A?        ]
               [www.example.com]            +-----+
          +--------------------------------&gt;|     |
          |                                 | DNS |
          | +-------------------------------|     |
          | |  [HIP? A?        ]            +-----+
          | |  [www.example.com]
          | |  [HIP HIT-R HI-R ]
          | |  [A IP-R         ]
          | v
        +-----+                              +-----+
        |     |--------------I1-------------&gt;|     |
        |  I  |&lt;-------------R1--------------|  R  |
        |     |--------------I2-------------&gt;|     |
        |     |&lt;-------------R2--------------|     |
        +-----+                              +-----+

                         Static Single-Homed Host

   The Initiator would then send an I1 to the Responder's IP addresses
   (IP-R).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Mobile%20End%20Host"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Mobile End Host</span>

   A mobile HIP node (R) wishing to be reachable by reference to its
   FQDN (www.example.com) would store in the DNS, possibly in addition
   to its IP address or addresses (IP-R), its HI (HI-R), its HIT
   (HIT-R), and the domain name or names of its RVS or servers (e.g.,
   rvs.example.com) in a HIP RR or records.  The mobile HIP node also
   needs to notify its RVSs of any change in its set of IP addresses.

   An Initiator willing to associate with such a mobile node would
   typically issue the following queries:

   o  Query #1: QNAME=www.example.com, QTYPE=HIP

   Which returns a DNS packet with RCODE=0 and one or more HIP RRs with
   the HIT, HI, and RVS domain name or names (e.g., HIT-R, HI-R, and
   rvs.example.com) of the Responder in the answer section.

   o  Query #2: QNAME=rvs.example.com, QTYPE=A

   o  Query #3: QNAME=rvs.example.com, QTYPE=AAAA

   Which return DNS packets with RCODE=0 and, respectively, one or more
   A or AAAA RRs containing an IP address(es) of the Responder's RVS
   (e.g., IP-RVS) in their answer sections.




<span class="grey">Laganier                     Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


              [HIP?           ]
              [www.example.com]

              [A?             ]
              [rvs.example.com]                     +-----+
         +-----------------------------------------&gt;|     |
         |                                          | DNS |
         | +----------------------------------------|     |
         | |  [HIP?                          ]      +-----+
         | |  [www.example.com               ]
         | |  [HIP HIT-R HI-R rvs.example.com]
         | |
         | |  [A?             ]
         | |  [rvs.example.com]
         | |  [A IP-RVS       ]
         | |
         | |                +-----+
         | | +------I1-----&gt;| RVS |-----I1------+
         | | |              +-----+             |
         | | |                                  |
         | | |                                  |
         | v |                                  v
        +-----+                              +-----+
        |     |&lt;---------------R1------------|     |
        |  I  |----------------I2-----------&gt;|  R  |
        |     |&lt;---------------R2------------|     |
        +-----+                              +-----+

                              Mobile End Host

   The Initiator would then send an I1 to the RVS IP address (IP-RVS).
   Following, the RVS will relay the I1 up to the mobile node's IP
   address (IP-R), which will complete the HIP exchange.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Overview%20of%20Using%20the%20DNS%20with%20HIP"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Overview of Using the DNS with HIP</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Storing%20HI%2C%20HIT%2C%20and%20RVS%20in%20the%20DNS"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Storing HI, HIT, and RVS in the DNS</span>

   For any HIP node, its HI, the associated HIT, and the FQDN of its
   possible RVSs can be stored in a DNS HIP RR.  Any conforming
   implementation may store an HI and its associated HIT in a DNS HIP
   RDATA format.  HI and HIT are defined in <a href="#section-3">Section 3</a> of the HIP
   specification [<a href="rfc7401.html" title='"Host Identity Protocol Version 2 (HIPv2)"'>RFC7401</a>].








<span class="grey">Laganier                     Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   Upon return of a HIP RR, a host MUST always calculate the
   HI-derivative HIT to be used in the HIP exchange, as specified in
   <a href="#section-3">Section 3</a> of the HIP specification [<a href="rfc7401.html" title='"Host Identity Protocol Version 2 (HIPv2)"'>RFC7401</a>], while the HIT included
   in the HIP RR SHOULD only be used as an optimization (e.g., table
   lookup).

   The HIP RR may also contain one or more domain names of one or more
   RVSs towards which HIP I1 packets might be sent to trigger the
   establishment of an association with the entity named by this RR
   [<a href="rfc8004.html" title='"Host Identity Protocol (HIP) Rendezvous Extension"'>RFC8004</a>].

   The Rendezvous Server field of the HIP RR stored at a given owner
   name MAY include the owner name itself.  A semantically equivalent
   situation occurs if no RVS is present in the HIP RR stored at that
   owner name.  Such situations occur in two cases:

   o  The host is mobile, and the A and/or AAAA RR(s) stored at its host
      name contain the IP address(es) of its RVS rather than its own
      one.

   o  The host is stationary and can be reached directly at the IP
      address(es) contained in the A and/or AAAA RR(s) stored at its
      host name.  This is a degenerate case of rendezvous service where
      the host somewhat acts as an RVS for itself.

   An RVS receiving such an I1 would then relay it to the appropriate
   Responder (the owner of the I1 receiver HIT).  The Responder will
   then complete the exchange with the Initiator, typically without
   ongoing help from the RVS.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Initiating%20Connections%20Based%20on%20DNS%20Names"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Initiating Connections Based on DNS Names</span>

   On a HIP node, a HIP exchange SHOULD be initiated whenever a ULP
   attempts to communicate with an entity, and the DNS lookup returns
   HIP RRs.

   HIP RRs have a Time To Live (TTL) associated with them.  When the
   number of seconds that passed since the record was retrieved exceeds
   the record's TTL, the record MUST be considered no longer valid and
   deleted by the entity that retrieved it.  If access to the record is
   necessary to initiate communication with the entity to which the
   record corresponds, a new query MUST be made to retrieve a fresh copy
   of the record.

   There may be multiple HIP RRs associated with a single name.  It is
   outside the scope of this specification as to how a host chooses
   between multiple RRs when more than one is returned.  The RVS




<span class="grey">Laganier                     Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   information may be copied and aligned across multiple RRs, or may be
   different for each one; a host MUST check that the RVS used is
   associated with the HI being used, when multiple choices are present.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20HIP%20RR%20Storage%20Format"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  HIP RR Storage Format</span>

   The RDATA for a HIP RR consists of a PK Algorithm Type, the HIT
   length, a HIT, a PK (i.e., an HI), and optionally one or more RVSs.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  HIT length   | PK algorithm  |          PK length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                           HIT                                 ~
   |                                                               |
   +                     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     |                                         |
   +-+-+-+-+-+-+-+-+-+-+-+                                         +
   |                           Public Key                          |
   ~                                                               ~
   |                                                               |
   +                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                               |                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   |                                                               |
   ~                       Rendezvous Servers                      ~
   |                                                               |
   +             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             |
   +-+-+-+-+-+-+-+

   The HIT length, PK algorithm, PK length, HIT, and Public Key fields
   are REQUIRED.  The Rendezvous Server field is OPTIONAL.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20HIT%20Length%20Format"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  HIT Length Format</span>

   The HIT length indicates the length in bytes of the HIT field.  This
   is an 8-bit unsigned integer.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20PK%20Algorithm%20Format"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  PK Algorithm Format</span>

   The PK algorithm field indicates the PK cryptographic algorithm and
   the implied Public Key field format.  This is an 8-bit unsigned
   integer.  This document reuses the values defined for the 'Algorithm
   Type' of the IPSECKEY RR [<a href="rfc4025.html" title='"A Method for Storing IPsec Keying Material in DNS"'>RFC4025</a>].




<span class="grey">Laganier                     Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   Presently defined values are listed in <a href="#section-9">Section 9</a> for reference.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20PK%20Length%20Format"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  PK Length Format</span>

   The PK length indicates the length in bytes of the Public Key field.
   This is a 16-bit unsigned integer in network byte order.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20HIT%20Format"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  HIT Format</span>

   The HIT is stored as a binary value in network byte order.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20Public%20Key%20Format"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  Public Key Format</span>

   Two of the PK types defined in this document (RSA and Digital
   Signature Algorithm (DSA)) reuse the PK formats defined for the
   IPSECKEY RR [<a href="rfc4025.html" title='"A Method for Storing IPsec Keying Material in DNS"'>RFC4025</a>].

   The DSA key format is defined in <a href="rfc2536.html">RFC 2536</a> [<a href="rfc2536.html" title='"DSA KEYs and SIGs in the Domain Name System (DNS)"'>RFC2536</a>].

   The RSA key format is defined in <a href="rfc3110.html">RFC 3110</a> [<a href="rfc3110.html" title='"RSA/SHA-1 SIGs and RSA KEYs in the Domain Name System (DNS)"'>RFC3110</a>], and the RSA key
   size limit (4096 bits) is relaxed in the IPSECKEY RR [<a href="rfc4025.html" title='"A Method for Storing IPsec Keying Material in DNS"'>RFC4025</a>]
   specification.

   In addition, this document similarly defines the PK format of type
   Elliptic Curve Digital Signature Algorithm (ECDSA) as the algorithm-
   specific portion of the DNSKEY RR RDATA for ECDSA [<a href="rfc6605.html" title='"Elliptic Curve Digital Signature Algorithm (DSA) for DNSSEC"'>RFC6605</a>], i.e, all
   of the DNSKEY RR DATA after the first four octets, corresponding to
   the same portion of the DNSKEY RR that must be specified by documents
   that define a DNSSEC algorithm.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.6.%20%20Rendezvous%20Servers%20Format"></a><a class="selflink" href="#section-5.6" name="section-5.6">5.6</a>.  Rendezvous Servers Format</span>

   The Rendezvous Server field indicates one or more variable length
   wire-encoded domain names of one or more RVSs, concatenated and
   encoded as described in <a href="rfc1035.html#section-3.3">Section 3.3 of RFC 1035</a> [<a href="rfc1035.html" title='"Domain names - implementation and specification"'>RFC1035</a>]:
   "&lt;domain-name&gt; is a domain name represented as a series of labels,
   and terminated by a label with zero length".  Since the wire-encoded
   format is self-describing, the length of each domain name is
   implicit: The zero length label termination serves as a separator
   between multiple RVS domain names concatenated in the Rendezvous
   Server field of a same HIP RR.  Since the length of the other portion
   of the RR's RRDATA is known, and the overall length of the RR's RDATA
   is also known (RDLENGTH), all the length information necessary to
   parse the HIP RR is available.

   The domain names MUST NOT be compressed.  The RVS or servers are
   listed in order of preference (i.e., the first RVS or servers are
   preferred), defining an implicit order amongst RVSs of a single RR.



<span class="grey">Laganier                     Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   When multiple HIP RRs are present at the same owner name, this
   implicit order of RVSs within an RR MUST NOT be used to infer a
   preference order between RVSs stored in different RRs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20HIP%20RR%20Presentation%20Format"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  HIP RR Presentation Format</span>

   This section specifies the representation of the HIP RR in a zone
   master file.

   The HIT length field is not represented, as it is implicitly known
   thanks to the HIT field representation.

   The PK algorithm field is represented as unsigned integers.

   The HIT field is represented as the Base16 encoding [<a href="rfc4648.html" title='"The Base16, Base32, and Base64 Data Encodings"'>RFC4648</a>] (a.k.a.
   hex or hexadecimal) of the HIT.  The encoding MUST NOT contain
   whitespaces to distinguish it from the Public Key field.

   The Public Key field is represented as the Base64 encoding of the PK,
   as defined in <a href="rfc4648.html#section-4">Section 4 of [RFC4648]</a>.  The encoding MUST NOT contain
   whitespace(s) to distinguish it from the Rendezvous Server field.

   The PK length field is not represented, as it is implicitly known
   thanks to the Public Key field representation containing no
   whitespaces.

   The Rendezvous Server field is represented by one or more domain
   names separated by whitespace(s).  Such whitespace is only used in
   the HIP RR representation format and is not part of the HIP RR wire
   format.

   The complete representation of the HIP record is:

   IN  HIP   ( pk-algorithm
               base16-encoded-hit
               base64-encoded-public-key
               rendezvous-server[1]
                       ...
               rendezvous-server[n] )

   When no RVSs are present, the representation of the HIP record is:

   IN  HIP   ( pk-algorithm
               base16-encoded-hit
               base64-encoded-public-key )






<span class="grey">Laganier                     Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Examples"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Examples</span>

   In the examples below, the Public Key field containing no whitespace
   is wrapped, since it does not fit in a single line of this document.

   Example of a node with an HI and a HIT but no RVS:

   www.example.com.      IN  HIP ( 2 200100107B1A74DF365639CC39F1D578
                                   AwEAAbdxyhNuSutc5EMzxTs9LBPCIkOFH8cI
   vM4p9+LrV4e19WzK00+CI6zBCQTdtWsuxKbWIy87UOoJTwkUs7lBu+Upr1gsNrut79ry
   ra+bSRGQb1slImA8YVJyuIDsj7kwzG7jnERNqnWxZ48AWkskmdHaVDP4BcelrTI3rMXd
   XF5D )

   Example of a node with an HI, a HIT, and one RVS:

   www.example.com.      IN  HIP ( 2 200100107B1A74DF365639CC39F1D578
                                   AwEAAbdxyhNuSutc5EMzxTs9LBPCIkOFH8cI
   vM4p9+LrV4e19WzK00+CI6zBCQTdtWsuxKbWIy87UOoJTwkUs7lBu+Upr1gsNrut79ry
   ra+bSRGQb1slImA8YVJyuIDsj7kwzG7jnERNqnWxZ48AWkskmdHaVDP4BcelrTI3rMXd
   XF5D
                                   rvs.example.com. )


   Example of a node with an HI, a HIT, and two RVSs:

   www.example.com.      IN  HIP ( 2 200100107B1A74DF365639CC39F1D578
                                   AwEAAbdxyhNuSutc5EMzxTs9LBPCIkOFH8cI
   vM4p9+LrV4e19WzK00+CI6zBCQTdtWsuxKbWIy87UOoJTwkUs7lBu+Upr1gsNrut79ry
   ra+bSRGQb1slImA8YVJyuIDsj7kwzG7jnERNqnWxZ48AWkskmdHaVDP4BcelrTI3rMXd
   XF5D
                                   rvs1.example.com.
                                   rvs2.example.com. )

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Security Considerations</span>

   This section contains a description of the known threats involved
   with the usage of the HIP DNS Extension.

   In a manner similar to the IPSECKEY RR [<a href="rfc4025.html" title='"A Method for Storing IPsec Keying Material in DNS"'>RFC4025</a>], the HIP DNS
   Extension allows for the provision of two HIP nodes with the public
   keying material (HI) of their peer.  These HIs will be subsequently
   used in a key exchange between the peers.  Hence, the HIP DNS
   Extension is subject, as the IPSECKEY RR, to threats stemming from
   attacks against unsecured HIP RRs, as described in the remainder of
   this section.






<span class="grey">Laganier                     Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   A HIP node SHOULD obtain HIP RRs from a trusted party through a
   secure channel ensuring data integrity and authenticity of the RRs.
   DNSSEC [<a href="rfc4033.html" title='"DNS Security Introduction and Requirements"'>RFC4033</a>] [<a href="rfc4034.html" title='"Resource Records for the DNS Security Extensions"'>RFC4034</a>] [<a href="rfc4035.html" title='"Protocol Modifications for the DNS Security Extensions"'>RFC4035</a>] provides such a secure channel.
   However, it should be emphasized that DNSSEC only offers data
   integrity and authenticity guarantees to the channel between the DNS
   server publishing a zone and the HIP node.  DNSSEC does not ensure
   that the entity publishing the zone is trusted.  Therefore, the RRSIG
   of the HIP RRSet MUST NOT be misinterpreted as a certificate binding
   the HI and/or the HIT to the owner name.

   In the absence of a proper secure channel, both parties are
   vulnerable to MitM and Denial-of-Service (DoS) attacks, and unrelated
   parties might be subject to DoS attacks as well.  These threats are
   described in the following sections.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Attacker%20Tampering%20with%20an%20Insecure%20HIP%20RR"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Attacker Tampering with an Insecure HIP RR</span>

   The HIP RR contains public keying material in the form of the named
   peer's PK (the HI) and its secure hash (the HIT).  Both of these are
   not sensitive to attacks where an adversary gains knowledge of them.
   However, an attacker that is able to mount an active attack on the
   DNS, i.e., tampers with this HIP RR (e.g., using DNS spoofing), is
   able to mount MitM attacks on the cryptographic core of the eventual
   HIP exchange (Responder's HIP RR rewritten by the attacker).

   The HIP RR may contain an RVS domain name resolved into a destination
   IP address where the named peer is reachable by an I1, as per the HIP
   Rendezvous Extension [<a href="rfc8004.html" title='"Host Identity Protocol (HIP) Rendezvous Extension"'>RFC8004</a>].  Thus, an attacker that is able to
   tamper with this RR is able to redirect I1 packets sent to the named
   peer to a chosen IP address for DoS or MitM attacks.  Note that this
   kind of attack is not specific to HIP and exists independently of
   whether or not HIP and the HIP RR are used.  Such an attacker might
   tamper with A and AAAA RRs as well.

   An attacker might obviously use these two attacks in conjunction: It
   will replace the Responder's HI and RVS IP address by its own in a
   spoofed DNS packet sent to the Initiator HI, and then redirect all
   exchanged packets to him and mount a MitM on HIP.  In this case, HIP
   won't provide confidentiality nor Initiator HI protection from
   eavesdroppers.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Hash%20and%20HITs%20Collisions"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Hash and HITs Collisions</span>

   As with many cryptographic algorithms, some secure hashes (e.g.,
   SHA1, used by HIP to generate a HIT from an HI) eventually become
   insecure, because an exploit has been found in which an attacker with
   reasonable computation power breaks one of the security features of
   the hash (e.g., its supposed collision resistance).  This is why a



<span class="grey">Laganier                     Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   HIP end-node implementation SHOULD NOT authenticate its HIP peers
   based solely on a HIT retrieved from the DNS, but rather SHOULD use
   HI-based authentication.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.3.%20%20DNSSEC"></a><a class="selflink" href="#section-8.3" name="section-8.3">8.3</a>.  DNSSEC</span>

   In the absence of DNSSEC, the HIP RR is subject to the threats
   described in <a href="rfc3833.html">RFC 3833</a> [<a href="rfc3833.html" title='"Threat Analysis of the Domain Name System (DNS)"'>RFC3833</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  IANA Considerations</span>

   [<a href="rfc5205.html" title='"Host Identity Protocol (HIP) Domain Name System (DNS) Extensions"'>RFC5205</a>], obsoleted by this document, made the following definition
   and reservation in the "Resource Record (RR) TYPEs" subregistry under
   "Domain Name System (DNS) Parameters":

   Value   Type
   -----   ----
   55      HIP

   In the "Resource Record (RR) TYPEs" subregistry under "Domain Name
   System (DNS) Parameters", references to [<a href="rfc5205.html" title='"Host Identity Protocol (HIP) Domain Name System (DNS) Extensions"'>RFC5205</a>] have been replaced
   by references to this document.

   As [<a href="rfc5205.html" title='"Host Identity Protocol (HIP) Domain Name System (DNS) Extensions"'>RFC5205</a>], this document reuses the Algorithm Types defined by
   [<a href="rfc4025.html" title='"A Method for Storing IPsec Keying Material in DNS"'>RFC4025</a>] for the IPSEC KEY RR.  Presently defined values are shown
   here for reference only:

   Value   Description
   -----   --------------------------------------------------------
     1     A DSA key is present, in the format defined in [<a href="rfc2536.html" title='"DSA KEYs and SIGs in the Domain Name System (DNS)"'>RFC2536</a>]
     2     A RSA key is present, in the format defined in [<a href="rfc3110.html" title='"RSA/SHA-1 SIGs and RSA KEYs in the Domain Name System (DNS)"'>RFC3110</a>]

   IANA has made the following assignment in the "Algorithm Type Field"
   subregistry under "IPSECKEY Resource Record Parameters" [<a href="rfc4025.html" title='"A Method for Storing IPsec Keying Material in DNS"'>RFC4025</a>]:

   Value   Description
   -----   -----------
     3     An ECDSA key is present, in the format defined in [<a href="rfc6605.html" title='"Elliptic Curve Digital Signature Algorithm (DSA) for DNSSEC"'>RFC6605</a>]













<span class="grey">Laganier                     Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC1034" name="ref-RFC1034">RFC1034</a>]  Mockapetris, P., "Domain names - concepts and facilities",
              STD 13, <a href="rfc1034.html">RFC 1034</a>, DOI 10.17487/RFC1034, November 1987,
              &lt;<a href="http://www.rfc-editor.org/info/rfc1034">http://www.rfc-editor.org/info/rfc1034</a>&gt;.

   [<a id="ref-RFC1035" name="ref-RFC1035">RFC1035</a>]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, <a href="rfc1035.html">RFC 1035</a>, DOI 10.17487/RFC1035,
              November 1987, &lt;<a href="http://www.rfc-editor.org/info/rfc1035">http://www.rfc-editor.org/info/rfc1035</a>&gt;.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC2181" name="ref-RFC2181">RFC2181</a>]  Elz, R. and R. Bush, "Clarifications to the DNS
              Specification", <a href="rfc2181.html">RFC 2181</a>, DOI 10.17487/RFC2181, July 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2181">http://www.rfc-editor.org/info/rfc2181</a>&gt;.

   [<a id="ref-RFC3596" name="ref-RFC3596">RFC3596</a>]  Thomson, S., Huitema, C., Ksinant, V., and M. Souissi,
              "DNS Extensions to Support IP Version 6", <a href="rfc3596.html">RFC 3596</a>,
              DOI 10.17487/RFC3596, October 2003,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3596">http://www.rfc-editor.org/info/rfc3596</a>&gt;.

   [<a id="ref-RFC4025" name="ref-RFC4025">RFC4025</a>]  Richardson, M., "A Method for Storing IPsec Keying
              Material in DNS", <a href="rfc4025.html">RFC 4025</a>, DOI 10.17487/RFC4025, March
              2005, &lt;<a href="http://www.rfc-editor.org/info/rfc4025">http://www.rfc-editor.org/info/rfc4025</a>&gt;.

   [<a id="ref-RFC4033" name="ref-RFC4033">RFC4033</a>]  Arends, R., Austein, R., Larson, M., Massey, D., and S.
              Rose, "DNS Security Introduction and Requirements",
              <a href="rfc4033.html">RFC 4033</a>, DOI 10.17487/RFC4033, March 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4033">http://www.rfc-editor.org/info/rfc4033</a>&gt;.

   [<a id="ref-RFC4034" name="ref-RFC4034">RFC4034</a>]  Arends, R., Austein, R., Larson, M., Massey, D., and S.
              Rose, "Resource Records for the DNS Security Extensions",
              <a href="rfc4034.html">RFC 4034</a>, DOI 10.17487/RFC4034, March 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4034">http://www.rfc-editor.org/info/rfc4034</a>&gt;.

   [<a id="ref-RFC4035" name="ref-RFC4035">RFC4035</a>]  Arends, R., Austein, R., Larson, M., Massey, D., and S.
              Rose, "Protocol Modifications for the DNS Security
              Extensions", <a href="rfc4035.html">RFC 4035</a>, DOI 10.17487/RFC4035, March 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4035">http://www.rfc-editor.org/info/rfc4035</a>&gt;.

   [<a id="ref-RFC4648" name="ref-RFC4648">RFC4648</a>]  Josefsson, S., "The Base16, Base32, and Base64 Data
              Encodings", <a href="rfc4648.html">RFC 4648</a>, DOI 10.17487/RFC4648, October 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4648">http://www.rfc-editor.org/info/rfc4648</a>&gt;.



<span class="grey">Laganier                     Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


   [<a id="ref-RFC6605" name="ref-RFC6605">RFC6605</a>]  Hoffman, P. and W. Wijngaards, "Elliptic Curve Digital
              Signature Algorithm (DSA) for DNSSEC", <a href="rfc6605.html">RFC 6605</a>,
              DOI 10.17487/RFC6605, April 2012,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6605">http://www.rfc-editor.org/info/rfc6605</a>&gt;.

   [<a id="ref-RFC7401" name="ref-RFC7401">RFC7401</a>]  Moskowitz, R., Ed., Heer, T., Jokela, P., and T.
              Henderson, "Host Identity Protocol Version 2 (HIPv2)",
              <a href="rfc7401.html">RFC 7401</a>, DOI 10.17487/RFC7401, April 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7401">http://www.rfc-editor.org/info/rfc7401</a>&gt;.

   [<a id="ref-RFC8004" name="ref-RFC8004">RFC8004</a>]  Laganier, J. and L. Eggert, "Host Identity Protocol (HIP)
              Rendezvous Extension", <a href="rfc8004.html">RFC 8004</a>, DOI 10.17487/RFC8004,
              October 2016, &lt;<a href="http://www.rfc-editor.org/info/rfc8004">http://www.rfc-editor.org/info/rfc8004</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-RFC2536" name="ref-RFC2536">RFC2536</a>]  Eastlake 3rd, D., "DSA KEYs and SIGs in the Domain Name
              System (DNS)", <a href="rfc2536.html">RFC 2536</a>, DOI 10.17487/RFC2536, March 1999,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2536">http://www.rfc-editor.org/info/rfc2536</a>&gt;.

   [<a id="ref-RFC3110" name="ref-RFC3110">RFC3110</a>]  Eastlake 3rd, D., "RSA/SHA-1 SIGs and RSA KEYs in the
              Domain Name System (DNS)", <a href="rfc3110.html">RFC 3110</a>, DOI 10.17487/RFC3110,
              May 2001, &lt;<a href="http://www.rfc-editor.org/info/rfc3110">http://www.rfc-editor.org/info/rfc3110</a>&gt;.

   [<a id="ref-RFC3833" name="ref-RFC3833">RFC3833</a>]  Atkins, D. and R. Austein, "Threat Analysis of the Domain
              Name System (DNS)", <a href="rfc3833.html">RFC 3833</a>, DOI 10.17487/RFC3833, August
              2004, &lt;<a href="http://www.rfc-editor.org/info/rfc3833">http://www.rfc-editor.org/info/rfc3833</a>&gt;.

   [<a id="ref-RFC4423" name="ref-RFC4423">RFC4423</a>]  Moskowitz, R. and P. Nikander, "Host Identity Protocol
              (HIP) Architecture", <a href="rfc4423.html">RFC 4423</a>, DOI 10.17487/RFC4423, May
              2006, &lt;<a href="http://www.rfc-editor.org/info/rfc4423">http://www.rfc-editor.org/info/rfc4423</a>&gt;.

   [<a id="ref-RFC5205" name="ref-RFC5205">RFC5205</a>]  Nikander, P. and J. Laganier, "Host Identity Protocol
              (HIP) Domain Name System (DNS) Extensions", <a href="rfc5205.html">RFC 5205</a>,
              DOI 10.17487/RFC5205, April 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5205">http://www.rfc-editor.org/info/rfc5205</a>&gt;.

   [<a id="ref-RFC5206" name="ref-RFC5206">RFC5206</a>]  Nikander, P., Henderson, T., Ed., Vogt, C., and J. Arkko,
              "End-Host Mobility and Multihoming with the Host Identity
              Protocol", <a href="rfc5206.html">RFC 5206</a>, DOI 10.17487/RFC5206, April 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5206">http://www.rfc-editor.org/info/rfc5206</a>&gt;.










<span class="grey">Laganier                     Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Changes%20from%20RFC%205205"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Changes from <a href="rfc5205.html">RFC 5205</a></span>

   o  Updated HIP references to revised HIP specifications.

   o  Extended DNS HIP RR to support for Host Identities based on ECDSA.

   o  Clarified that new query must be made when the time that passed
      since an RR was retrieved exceeds the TTL of the RR.

   o  Added considerations related to multiple HIP RRs being associated
      with a single name.

   o  Clarified that the Base64 encoding in use is as per <a href="rfc4648.html#section-4">Section 4 of
      [RFC4648]</a>.

   o  Clarified the wire format when more than one RVS is defined in one
      RR.

   o  Clarified that "whitespace" is used as the delimiter in the human-
      readable representation of the RR but is not part of the wire
      format.

Acknowledgments

   As usual in the IETF, this document is the result of a collaboration
   between many people.  The authors would like to thank the author
   (Michael Richardson), contributors, and reviewers of the IPSECKEY RR
   [<a href="rfc4025.html" title='"A Method for Storing IPsec Keying Material in DNS"'>RFC4025</a>] specification, after which this document was framed.  The
   authors would also like to thank the following people, who have
   provided thoughtful and helpful discussions and/or suggestions, that
   have helped improve this document: Jeff Ahrenholz, Rob Austein, Hannu
   Flinck, Olafur Gudmundsson, Tom Henderson, Peter Koch, Olaf Kolkman,
   Miika Komu, Andrew McGregor, Gabriel Montenegro, and Erik Nordmark.
   Some parts of this document stem from the HIP specification
   [<a href="rfc7401.html" title='"Host Identity Protocol Version 2 (HIPv2)"'>RFC7401</a>].  Finally, thanks to Sheng Jiang for performing the
   Internet Area Directorate review of this document in the course of
   the publication process.

Contributors

   Pekka Nikander coauthored an earlier, experimental version of this
   specification [<a href="rfc5205.html" title='"Host Identity Protocol (HIP) Domain Name System (DNS) Extensions"'>RFC5205</a>].









<span class="grey">Laganier                     Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc8005.html">RFC 8005</a>                    HIP DNS Extension               October 2016</span>


Author's Address

   Julien Laganier
   Luminate Wireless, Inc.
   Cupertino, CA
   United States of America

   Email: julien.ietf@gmail.com











































Laganier                     Standards Track                   [Page 18]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc8005 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:17 GMT --></html>