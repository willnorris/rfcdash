<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6138 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:31 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-lu-ldp-igp-sync-bcast" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:6138" name="DC.Identifier"/>
<meta content="February, 2011" name="DC.Date.Issued"/>
<meta content="Lu, Wenhu" name="DC.Creator"/>
<meta content="Kini, Sriganesh" name="DC.Creator"/>
<meta content="RFC 5443 describes a mechanism to achieve LDP IGP Synchronization to
prevent black-holing traffic (e.g. VPN) when an interior gateway
protocol (IGP) is operational on a link but Label Distribution
Protocol (LDP) is not. If this mechanism is applied to broadcast links
that have more than one LDP/IGP peer, the metric increase procedure
can only be applied to the link as a whole but not an individual peer.
When a new LDP peer comes up on a broadcast network, this can result
in loss of traffic through other established peers on that network.
This document describes a mechanism to address that use-case without
dropping traffic. The mechanism does not introduce any protocol
message changes." name="DC.Description.Abstract"/>
<meta content="LDP IGP Synchronization for broadcast networks" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6138 - LDP IGP Synchronization for broadcast networks</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6138.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6138" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-mpls-ldp-igp-sync-bcast" title="draft-ietf-mpls-ldp-igp-sync-bcast">draft-ietf-mpls...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6138" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6138" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6138" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                      S. Kini, Ed.
Request for Comments: 6138                                    W. Lu, Ed.
Updates: <a href="rfc5443.html">5443</a>                                                   Ericsson
Category: Informational                                    February 2011
ISSN: 2070-1721


             <span class="h1">LDP IGP Synchronization for Broadcast Networks</span>

Abstract

   <a href="rfc5443.html">RFC 5443</a> describes a mechanism to achieve LDP IGP synchronization to
   prevent black-holing traffic (e.g., VPN) when an Interior Gateway
   Protocol (IGP) is operational on a link but Label Distribution
   Protocol (LDP) is not.  If this mechanism is applied to broadcast
   links that have more than one LDP peer, the metric increase procedure
   can only be applied to the link as a whole but not to an individual
   peer.  When a new LDP peer comes up on a broadcast network, this can
   result in loss of traffic through other established peers on that
   network.  This document describes a mechanism to address that use-
   case without dropping traffic.  The mechanism does not introduce any
   protocol message changes.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6138">http://www.rfc-editor.org/info/rfc6138</a>.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents



<span class="grey">Kini &amp; Lu                     Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6138.html">RFC 6138</a>           LDP IGP Sync for Broadcast Networks     February 2011</span>


   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Conventions Used in This Document ...............................<a href="#page-2">2</a>
   <a href="#section-3">3</a>. Problem Statement ...............................................<a href="#page-2">2</a>
   <a href="#section-4">4</a>. Solution ........................................................<a href="#page-4">4</a>
   <a href="#section-5">5</a>. Scope ...........................................................<a href="#page-5">5</a>
   <a href="#section-6">6</a>. Applicability ...................................................<a href="#page-5">5</a>
   <a href="#section-7">7</a>. Security Considerations .........................................<a href="#page-6">6</a>
   <a href="#section-8">8</a>. Conclusions .....................................................<a href="#page-6">6</a>
   <a href="#section-9">9</a>. References ......................................................<a href="#page-7">7</a>
      <a href="#section-9.1">9.1</a>. Normative References .......................................<a href="#page-7">7</a>
      <a href="#section-9.2">9.2</a>. Informative References .....................................<a href="#page-7">7</a>
   Acknowledgments ....................................................<a href="#page-7">7</a>
   <a href="#appendix-A">Appendix A</a>. Computation of "Cut-Edge" ..............................<a href="#page-8">8</a>
   <a href="#appendix-B">Appendix B</a>. Sync without Support at One End ........................<a href="#page-8">8</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   In <a href="rfc5443.html">RFC 5443</a> [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>], when [<a href="#ref-LDP" title='"LDP Specification"'>LDP</a>] is not fully operational on a
   link, the IGP advertises the link with maximum cost to avoid any
   transit traffic on the link if possible.  When LDP becomes
   operational, i.e., all the label bindings have been exchanged, the
   link is advertised with its correct cost.  This tries to ensure that
   the LDP Label Switch Path (LSP) is available all along the IGP
   shortest path.  The mechanisms in [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>] have limitations
   when applied to a broadcast link.  These are described in <a href="#section-3">Section 3</a>.
   A solution is defined in <a href="#section-4">Section 4</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions Used in This Document</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Problem%20Statement"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Problem Statement</span>

   On broadcast networks, a router's Link State Advertisement (LSA)
   contains a single cost to the broadcast network rather than a
   separate cost to each peer on the broadcast network.  The operation
   of the mechanism in [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>] is analyzed using the sample
   topology in Figure 1, where routers A, B, C, and E are attached to a



<span class="grey">Kini &amp; Lu                     Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6138.html">RFC 6138</a>           LDP IGP Sync for Broadcast Networks     February 2011</span>


   common broadcast network.  Say all links in that topology have a cost
   of 1 except the link A-PE3, which has a cost of 10.  The use-case
   when router B's link to the broadcast network comes up is analyzed.
   Before that link comes up, traffic between PE1 and PE2 flows along
   the bi-directional path PE1-A-C-D-PE2, and traffic between PE1 and
   PE3 flows along the bi-directional path PE1-A-E-PE3.

                               |    +---+           +---+
                               |----| B |-----------|PE2|
                               |    +---+           +---+
             +---+    +---+    |                      |
             |PE1|----| A |----|                      |
             +---+    +---+    |                      |
                        |      |    +---+    +---+    |
                        |      |----| C |----| D |----+
                        |      |    +---+    +---+
                        |      |
                        |      |
                        |      |
                        |      |    +---+
                        |      |----| E |-------------+
                        |      |    +---+             |
                        |      |                      |
                        |                             |
                        |                           +---+
                        +---------------------------|PE3|
                                                    +---+

              Figure 1: LDP IGP Sync on a Broadcast Network

   In one interpretation of the applicability of [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>] to
   broadcast networks, when a new router is discovered on a broadcast
   network, that network should avoid transit traffic until LDP becomes
   operational between all routers on that network.  This can be
   achieved by having all the attached routers advertise maximum cost to
   that network.  This should result in traffic that is being sent via
   that broadcast network to be diverted.  However, traffic might be
   inadvertently diverted to the link that just came up.  Until LDP
   becomes operational, that traffic will be black-holed.  An additional
   problem is route churn in the entire network that results in traffic
   that should be unaffected taking sub-optimal paths until the high-
   cost metric is reverted to the normal cost.  In Figure 1, when B's
   link to the broadcast network comes up and it is discovered by
   routers A, C and E, then A, B, C, and E can all start advertising
   maximum cost to the broadcast network.  A will have B as next-hop to
   PE2 and will not have a LDP LSP to PE2, resulting in VPN traffic from
   PE1 to PE2 to be black-holed at A.  The route churn at A also results
   in traffic between PE1 and PE3 to be unnecessarily diverted to the



<span class="grey">Kini &amp; Lu                     Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6138.html">RFC 6138</a>           LDP IGP Sync for Broadcast Networks     February 2011</span>


   sub-optimal path PE1-A-PE3 until the maximum-cost advertisement is
   reverted to the normal cost.

   This interpretation has the additional complexity of requiring the
   maximum-cost advertisement to be reverted by all routers after LDP
   peering between all the routers on the broadcast network is
   operational.  This is non-trivial and needs coordination between all
   the routers.

   In another alternative interpretation of the applicability of
   [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>] to broadcast networks, only the router whose link to
   the broadcast network comes up advertises maximum cost for that link,
   but other routers continue to advertise the normal cost.  In Figure
   1, when B's link to the broadcast network comes up, it advertises a
   high cost to the broadcast network.  After the IGP has converged but
   the LDP peering A-B is not yet operational, A will have B as the
   next-hop for PE2 and will not have a LDP LSP to PE2.  Since A's cost
   to reach B is not high, A-B-PE2 becomes the shortest path.  VPN
   traffic from PE1 to PE2 will be dropped at A.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Solution"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Solution</span>

   The problem described above exists because the Link State Database
   (LSDB) of the IGP does not describe a link coming up on a broadcast
   network with a high bi-directional cost to all other routers on that
   broadcast network.  A broadcast network is advertised as a pseudonode
   containing a list of routers to which the broadcast network is
   connected, and the cost of all these links from the pseudonode to
   each router is zero when computing SPF (Shortest Path First).

   The solution proposed below removes the link that is coming up from
   the LSDB unless absolutely necessary.  Only the router whose link is
   coming up plays a role in ensuring this.  The other routers on the
   broadcast network are not involved.  The following text describes
   this in more detail.

   During the intra-area SPF algorithm execution, an additional
   computation is made to detect an alternate path to a directly
   connected network that does not have any IGP adjacencies.

   If a router has a directly connected network that does not have an
   alternate path to reach it, then the interface to that network is a
   "cut-edge" in the topology for that router.  When a "cut-edge" goes
   down, the network is partitioned into two disjoint sub-graphs.  This
   property of whether or not an interface is a "cut-edge" is used when
   an IGP adjacency comes up on that interface.  The method to determine
   whether an interface is a "cut-edge" is described in <a href="#appendix-A">Appendix A</a>.




<span class="grey">Kini &amp; Lu                     Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6138.html">RFC 6138</a>           LDP IGP Sync for Broadcast Networks     February 2011</span>


   During IGP procedures, when the router's first adjacency to the
   broadcast network is coming up and the LSA is about to be updated
   with a link to the pseudonode of the broadcast interface, a check is
   made whether that interface is a "cut-edge".  If it is not a
   "cut-edge", then the updating of the LSA with that link to the
   pseudonode is postponed until LDP is operational with all the LDP
   peers on that broadcast interface.  After LDP is operational, the LSA
   is updated with that link to the pseudonode (and the LSA is flooded).
   If the interface is a "cut-edge", then the updating of the LSA MUST
   NOT be delayed by LDP's operational state.  Note that the IGP and LDP
   adjacency bring-up procedures are unchanged.  The conditional check
   of whether the interface is a "cut-edge" must be done just before the
   adjacency is about to be reflected in the LSA.

   If the IGP is [<a href="#ref-OSPF" title='"OSPF Version 2"'>OSPF</a>], the Router-LSA is not updated with a "Link Type
   2" (link to transit network) for that subnet until LDP is operational
   with all neighboring routers on that subnet.

   Similarly, if the IGP is [<a href="#ref-IS-IS" title='"Intermediate System to Intermediate System intra-domain routeing information exchange protocol for use in conjunction with the protocol for providing the connectionless-mode network service (ISO 8473)"'>IS-IS</a>], the "Link State PDU" is updated
   with an "IS Reachability TLV" (or an "Extended IS Reachability TLV")
   to the pseudonode after LDP is operational with all neighboring
   routers on that subnet.

   Note that this solution can be introduced in a gradual manner in a
   network without any backward compatibility issues.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Scope"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Scope</span>

   This document is agnostic to the method that detects LDP to be
   operational with a neighbor.  It does not define any new method to
   detect that LDP is operational.  At the time of publishing this
   document, LDP End-of-LIB [<a href="#ref-LDP-EOL" title='"Signaling LDP Label Advertisement Completion"'>LDP-EOL</a>] seems to be the preferred method.

   Issues arising out of LDP not being configured on some routers or on
   some interfaces are not specific to the method described in this
   document and are considered outside the scope of this solution.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Applicability"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Applicability</span>

   The method described in this document can be easily extended to
   point-to-point (P2P) links.  However, an implementation may continue
   to apply the method described in [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>] to P2P links but
   apply the method described in this document to broadcast networks.
   Both methods can coexist in a network.







<span class="grey">Kini &amp; Lu                     Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6138.html">RFC 6138</a>           LDP IGP Sync for Broadcast Networks     February 2011</span>


   The techniques used in this document's solution enable LDP IGP
   synchronization in many scenarios where one end of the IGP adjacency
   does not support any LDP IGP sync method.  This is an optional
   benefit and is for further study.  Some ways to apply this technique
   to achieve that benefit are discussed in <a href="#appendix-B">Appendix B</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   This document does not introduce any new security considerations
   beyond those already described in [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>].

   Note that in [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>], when a link is advertised with a high
   metric, an alternate path with a large number of hops can result in
   the end-to-end path having more than 255 hops and thus result in
   unreachability.  This fact could be exploited if control of metrics
   falls into the hands of an attacker.

   This problem can even exist in a plain IP network with a link-state
   IGP.  If the directly connected path has a higher metric than an
   alternate path with Time to Live (TTL) greater than 255 hops, then
   the standard SPF algorithm will conclude that the shortest path is
   the alternate path although the neighboring node is unreachable
   through this path.  In this case, the link is advertised with its
   normal metric yet there is unreachability in the network.  Thus, this
   document does not introduce any new issues beyond those in a standard
   IGP-based IP network, and operators need to apply policy and security
   to the techniques used to determine and distribute the metrics used
   on links in their networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Conclusions"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Conclusions</span>

   This document complements [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>] by providing a solution to
   achieve LDP IGP synchronization for broadcast networks.  It can also
   coexist with that solution in a network that has a combination of P2P
   links and broadcast networks.  It can also be introduced into a
   network without backward compatibility issues.  The solution in this
   document can also be used exclusively to achieve LDP IGP
   synchronization since this solution applies to both P2P links and
   broadcast networks.

   This solution also has useful properties that can be optionally used
   to achieve LDP IGP synchronization when only one end of the IGP
   adjacency supports this solution but the other end supports neither
   this solution nor the one in [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>].







<span class="grey">Kini &amp; Lu                     Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6138.html">RFC 6138</a>           LDP IGP Sync for Broadcast Networks     February 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Normative%20References"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-LDP-IGP-SYNC" name="ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>]
              Jork, M., Atlas, A., and L. Fang, "LDP IGP
              Synchronization", <a href="rfc5443.html">RFC 5443</a>, March 2009.

   [<a id="ref-LDP" name="ref-LDP">LDP</a>]      Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,
              "LDP Specification", <a href="rfc5036.html">RFC 5036</a>, October 2007.

   [<a id="ref-OSPF" name="ref-OSPF">OSPF</a>]     Moy, J., "OSPF Version 2", STD 54, <a href="rfc2328.html">RFC 2328</a>, April 1998.

   [<a id="ref-IS-IS" name="ref-IS-IS">IS-IS</a>]    International Organization for Standardization,
              "Intermediate System to Intermediate System intra-domain
              routeing information exchange protocol for use in
              conjunction with the protocol for providing the
              connectionless-mode network service (ISO 8473)", ISO
              Standard 10589, 2002.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20Informative%20References"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-LDP-EOL" name="ref-LDP-EOL">LDP-EOL</a>]  Asati, R., Mohapatra, P., Chen, E., and B. Thomas,
              "Signaling LDP Label Advertisement Completion", <a href="rfc5919.html">RFC 5919</a>,
              August 2010.

Acknowledgments

   The authors would like to thank Luyuan Fang, Mikael Abrahamsson, Ben
   Niven-Jenkins, Bruno Decraene, Jeff Tantsura, and Acee Lindem for
   their review and useful comments.

















<span class="grey">Kini &amp; Lu                     Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6138.html">RFC 6138</a>           LDP IGP Sync for Broadcast Networks     February 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Computation%20of%20%22Cut-Edge%22"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Computation of "Cut-Edge"</span>

   A "cut-edge" can be computed during an intra-area SPF run or by using
   results of the previous SPF run.  If an SPF run was scheduled but is
   pending execution, that SPF MUST be executed immediately before any
   procedure checks whether an interface is a "cut-edge".

   An interface is considered a "cut-edge" if, during intra-area SPF
   (using Dijkstra's algorithm described in Section 16.1 of [<a href="#ref-OSPF" title='"OSPF Version 2"'>OSPF</a>]),
   there is no alternate path for the directly connected network.
   Alternately, a "cut-edge" can be detected by the last run of SPF if
   there is a lack of connectivity to the router-id of a directly
   connected peer via an alternate path.  The router-id can be known
   during the adjacency bring-up process.

   A "cut-edge" computation should not require any extra SPF runs.  It
   should not increase the algorithmic complexity of SPF.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20B.%20%20Sync%20without%20Support%20at%20One%20End"></a><a class="selflink" href="#appendix-B" name="appendix-B">Appendix B</a>.  Sync without Support at One End</span>

   A useful property of the solution described in this document is that
   LDP IGP synchronization is achievable in many scenarios where one end
   of the IGP adjacency does not support any LDP IGP sync method.

   For P2P links (or broadcast links on which the IGP operates in P2P
   mode) the applicability is straightforward.  An IGP can establish a
   P2P adjacency on a P2P link or a broadcast link with the IGP in P2P
   mode.  When a P2P adjacency comes up, the end of the adjacency that
   supports the solution in this document would not advertise the link
   to the other router in its LSA unless the edge is a "cut-edge" or
   until LDP becomes operational.  Hence, neither of the two routers
   will have IGP next-hop as the other router unless the link is a
   "cut-edge".  Consider Figure 1 modified such that the broadcast
   network is replaced by P2P links between each of A, B, C, and E.  Say
   link A-B is coming up, but only A has implemented the solution in
   this document whereas B has implemented neither the solution in this
   document nor the solution in [<a href="#ref-LDP-IGP-SYNC">LDP-IGP-SYNC</a>].  Since A's LSA does not
   advertise a link to B until LDP is operational, B does not have A as
   next-hop.  After LDP is operational, A advertises the link to B in
   its LSA.  Hence, there is no traffic loss due to LDP LSP not being
   present.

   For broadcast networks, the applicability is not straightforward and
   should be considered a topic for future study.  One way is for the
   designated router (DR) to stop advertising the link in the pseudonode
   to the router whose link is coming up until LDP is operational.





<span class="grey">Kini &amp; Lu                     Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6138.html">RFC 6138</a>           LDP IGP Sync for Broadcast Networks     February 2011</span>


Authors' Addresses

   Sriganesh Kini (editor)
   Ericsson
   300 Holger Way
   San Jose, CA 95134
   EMail: sriganesh.kini@ericsson.com

   Wenhu Lu (editor)
   Ericsson
   300 Holger Way
   San Jose, CA 95134
   EMail: wenhu.lu@ericsson.com






































Kini &amp; Lu                     Informational                     [Page 9]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6138 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:31 GMT --></html>