<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc2414 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:53 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:2414" name="DC.Identifier"/>
<meta content="This document specifies an increase in the permitted initial window
for TCP from one segment to roughly 4K bytes. This memo defines an
Experimental Protocol for the Internet community." name="DC.Description.Abstract"/>
<meta content="Floyd, Sally" name="DC.Creator"/>
<meta content="Partridge, Craig" name="DC.Creator"/>
<meta content="Allman, Mark" name="DC.Creator"/>
<meta content="September, 1998" name="DC.Date.Issued"/>
<meta content="Increasing TCP's Initial Window" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 2414 - Increasing TCP's Initial Window</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgbrown" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc2414.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc2414" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-floyd-incr-init-win" title="draft-floyd-incr-init-win">draft-floyd-inc...</a>] [<a href="https://datatracker.ietf.org/doc/rfc2414" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc2414" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc2414" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Obsoleted by: <a href="rfc3390.html">3390</a>                                          EXPERIMENTAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                          M. Allman
Request for Comments: 2414                  NASA Lewis/Sterling Software
Category: Experimental                                          S. Floyd
                                                                    LBNL
                                                            C. Partridge
                                                        BBN Technologies
                                                          September 1998


                    <span class="h1">Increasing TCP's Initial Window</span>

Status of this Memo

   This memo defines an Experimental Protocol for the Internet
   community.  It does not specify an Internet standard of any kind.
   Discussion and suggestions for improvement are requested.
   Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (1998).  All Rights Reserved.

Abstract

   This document specifies an increase in the permitted initial window
   for TCP from one segment to roughly 4K bytes.  This document
   discusses the advantages and disadvantages of such a change,
   outlining experimental results that indicate the costs and benefits
   of such a change to TCP.

Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20TCP%20Modification"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  TCP Modification</span>

   This document specifies an increase in the permitted upper bound for
   TCP's initial window from one segment to between two and four
   segments.  In most cases, this change results in an upper bound on
   the initial window of roughly 4K bytes (although given a large
   segment size, the permitted initial window of two segments could be
   significantly larger than 4K bytes).  The upper bound for the initial
   window is given more precisely in (1):

          min (4*MSS, max (2*MSS, 4380 bytes))               (1)




<span class="grey">Allman, et. al.               Experimental                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


   Equivalently, the upper bound for the initial window size is based on
   the maximum segment size (MSS), as follows:

        If (MSS &lt;= 1095 bytes)
            then win &lt;= 4 * MSS;
        If (1095 bytes &lt; MSS &lt; 2190 bytes)
            then win &lt;= 4380;
        If (2190 bytes &lt;= MSS)
            then win &lt;= 2 * MSS;

   This increased initial window is optional: that a TCP MAY start with
   a larger initial window, not that it SHOULD.

   This upper bound for the initial window size represents a change from
   <a href="rfc2001.html">RFC 2001</a> [<a href="#ref-S97" title='"TCP Slow Start, Congestion Avoidance, Fast Retransmit, and Fast Recovery Algorithms"'>S97</a>], which specifies that the congestion window be
   initialized to one segment.  If implementation experience proves
   successful, then the intent is for this change to be incorporated
   into a revision to <a href="rfc2001.html">RFC 2001</a>.

   This change applies to the initial window of the connection in the
   first round trip time (RTT) of transmission following the TCP three-
   way handshake.  Neither the SYN/ACK nor its acknowledgment (ACK) in
   the three-way handshake should increase the initial window size above
   that outlined in equation (1).  If the SYN or SYN/ACK is lost, the
   initial window used by a sender after a correctly transmitted SYN
   MUST be one segment.

   TCP implementations use slow start in as many as three different
   ways: (1) to start a new connection (the initial window); (2) to
   restart a transmission after a long idle period (the restart window);
   and (3) to restart after a retransmit timeout (the loss window).  The
   change proposed in this document affects the value of the initial
   window.  Optionally, a TCP MAY set the restart window to the minimum
   of the value used for the initial window and the current value of
   cwnd (in other words, using a larger value for the restart window
   should never increase the size of cwnd).  These changes do NOT change
   the loss window, which must remain 1 segment (to permit the lowest
   possible window size in the case of severe congestion).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Implementation%20Issues"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Implementation Issues</span>

   When larger initial windows are implemented along with Path MTU
   Discovery [<a href="#ref-MD90" title='"Path MTU Discovery"'>MD90</a>], and the MSS being used is found to be too large,
   the congestion window `cwnd' SHOULD be reduced to prevent large
   bursts of smaller segments.  Specifically, `cwnd' SHOULD be reduced
   by the ratio of the old segment size to the new segment size.





<span class="grey">Allman, et. al.               Experimental                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


   When larger initial windows are implemented along with Path MTU
   Discovery [<a href="#ref-MD90" title='"Path MTU Discovery"'>MD90</a>], alternatives are to set the "Don't Fragment" (DF)
   bit in all segments in the initial window, or to set the "Don't
   Fragment" (DF) bit in one of the segments.  It is an open question
   which of these two alternatives is best; we would hope that
   implementation experiences will shed light on this.  In the first
   case of setting the DF bit in all segments, if the initial packets
   are too large, then all of the initial packets will be dropped in the
   network.  In the second case of setting the DF bit in only one
   segment, if the initial packets are too large, then all but one of
   the initial packets will be fragmented in the network.  When the
   second case is followed, setting the DF bit in the last segment in
   the initial window provides the least chance for needless
   retransmissions when the initial segment size is found to be too
   large, because it minimizes the chances of duplicate ACKs triggering
   a Fast Retransmit.  However, more attention needs to be paid to the
   interaction between larger initial windows and Path MTU Discovery.

   The larger initial window proposed in this document is not intended
   as an encouragement for web browsers to open multiple simultaneous
   TCP connections all with large initial windows.  When web browsers
   open simultaneous TCP connections to the same destination, this works
   against TCP's congestion control mechanisms [<a href="#ref-FF98" title='"http://www- nrg.ee.lbl.gov/floyd/end2end-paper.html"'>FF98</a>], regardless of the
   size of the initial window.  Combining this behavior with larger
   initial windows further increases the unfairness to other traffic in
   the network.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Advantages%20of%20Larger%20Initial%20Windows"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Advantages of Larger Initial Windows</span>

   1.  When the initial window is one segment, a receiver employing
       delayed ACKs [<a href="#ref-Bra89" title='"Requirements for Internet Hosts -- Communication Layers"'>Bra89</a>] is forced to wait for a timeout before
       generating an ACK.  With an initial window of at least two
       segments, the receiver will generate an ACK after the second data
       segment arrives.  This eliminates the wait on the timeout (often
       up to 200 msec).

   2.  For connections transmitting only a small amount of data, a
       larger initial window reduces the transmission time (assuming at
       most moderate segment drop rates).  For many email (SMTP [<a href="#ref-Pos82" title='"Simple Mail Transfer Protocol"'>Pos82</a>])
       and web page (HTTP [<a href="#ref-BLFN96" title='"Hypertext Transfer Protocol -- HTTP/1.0"'>BLFN96</a>, <a href="#ref-FJGFBL97" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>FJGFBL97</a>]) transfers that are less
       than 4K bytes, the larger initial window would reduce the data
       transfer time to a single RTT.

   3.  For connections that will be able to use large congestion
       windows, this modification eliminates up to three RTTs and a
       delayed ACK timeout during the initial slow-start phase.  This





<span class="grey">Allman, et. al.               Experimental                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


       would be of particular benefit for high-bandwidth large-
       propagation-delay TCP connections, such as those over satellite
       links.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Disadvantages%20of%20Larger%20Initial%20Windows%20for%20the%20Individual"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Disadvantages of Larger Initial Windows for the Individual</span>
<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Connection"></a>    Connection</span>

   In high-congestion environments, particularly for routers that have a
   bias against bursty traffic (as in the typical Drop Tail router
   queues), a TCP connection can sometimes be better off starting with
   an initial window of one segment.  There are scenarios where a TCP
   connection slow-starting from an initial window of one segment might
   not have segments dropped, while a TCP connection starting with an
   initial window of four segments might experience unnecessary
   retransmits due to the inability of the router to handle small
   bursts.  This could result in an unnecessary retransmit timeout.  For
   a large-window connection that is able to recover without a
   retransmit timeout, this could result in an unnecessarily-early
   transition from the slow-start to the congestion-avoidance phase of
   the window increase algorithm.  These premature segment drops are
   unlikely to occur in uncongested networks with sufficient buffering
   or in moderately-congested networks where the congested router uses
   active queue management (such as Random Early Detection [FJ93,
   <a href="rfc2309.html">RFC2309</a>]).

   Some TCP connections will receive better performance with the higher
   initial window even if the burstiness of the initial window results
   in premature segment drops.  This will be true if (1) the TCP
   connection recovers from the segment drop without a retransmit
   timeout, and (2) the TCP connection is ultimately limited to a small
   congestion window by either network congestion or by the receiver's
   advertised window.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Disadvantages%20of%20Larger%20Initial%20Windows%20for%20the%20Network"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Disadvantages of Larger Initial Windows for the Network</span>

   In terms of the potential for congestion collapse, we consider two
   separate potential dangers for the network.  The first danger would
   be a scenario where a large number of segments on congested links
   were duplicate segments that had already been received at the
   receiver.  The second danger would be a scenario where a large number
   of segments on congested links were segments that would be dropped
   later in the network before reaching their final destination.

   In terms of the negative effect on other traffic in the network, a
   potential disadvantage of larger initial windows would be that they
   increase the general packet drop rate in the network.  We discuss
   these three issues below.




<span class="grey">Allman, et. al.               Experimental                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


   Duplicate segments:

       As described in the previous section, the larger initial window
       could occasionally result in a segment dropped from the initial
       window, when that segment might not have been dropped if the
       sender had slow-started from an initial window of one segment.
       However, <a href="#appendix-A">Appendix A</a> shows that even in this case, the larger
       initial window would not result in the transmission of a large
       number of duplicate segments.

   Segments dropped later in the network:

       How much would the larger initial window for TCP increase the
       number of segments on congested links that would be dropped
       before reaching their final destination?  This is a problem that
       can only occur for connections with multiple congested links,
       where some segments might use scarce bandwidth on the first
       congested link along the path, only to be dropped later along the
       path.

       First, many of the TCP connections will have only one congested
       link along the path.  Segments dropped from these connections do
       not "waste" scarce bandwidth, and do not contribute to congestion
       collapse.

       However, some network paths will have multiple congested links,
       and segments dropped from the initial window could use scarce
       bandwidth along the earlier congested links before ultimately
       being dropped on subsequent congested links.  To the extent that
       the drop rate is independent of the initial window used by TCP
       segments, the problem of congested links carrying segments that
       will be dropped before reaching their destination will be similar
       for TCP connections that start by sending four segments or one
       segment.

   An increased packet drop rate:

       For a network with a high segment drop rate, increasing the TCP
       initial window could increase the segment drop rate even further.
       This is in part because routers with Drop Tail queue management
       have difficulties with bursty traffic in times of congestion.
       However, given uncorrelated arrivals for TCP connections, the
       larger TCP initial window should not significantly increase the
       segment drop rate.  Simulation-based explorations of these issues
       are discussed in <a href="#section-7.2">Section 7.2</a>.






<span class="grey">Allman, et. al.               Experimental                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


   These potential dangers for the network are explored in simulations
   and experiments described in the section below.  Our judgement would
   be, while there are dangers of congestion collapse in the current
   Internet (see [<a href="#ref-FF98" title='"http://www- nrg.ee.lbl.gov/floyd/end2end-paper.html"'>FF98</a>] for a discussion of the dangers of congestion
   collapse from an increased deployment of UDP connections without
   end-to-end congestion control), there is no such danger to the
   network from increasing the TCP initial window to 4K bytes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Typical%20Levels%20of%20Burstiness%20for%20TCP%20Traffic."></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Typical Levels of Burstiness for TCP Traffic.</span>

   Larger TCP initial windows would not dramatically increase the
   burstiness of TCP traffic in the Internet today, because such traffic
   is already fairly bursty.  Bursts of two and three segments are
   already typical of TCP [<a href="#ref-Flo97" title='"ftp://ftp.ee.lbl.gov/talks/sf-tcp-ietf97.ps"'>Flo97</a>]; A delayed ACK (covering two
   previously unacknowledged segments) received during congestion
   avoidance causes the congestion window to slide and two segments to
   be sent.  The same delayed ACK received during slow start causes the
   window to slide by two segments and then be incremented by one
   segment, resulting in a three-segment burst.  While not necessarily
   typical, bursts of four and five segments for TCP are not rare.
   Assuming delayed ACKs, a single dropped ACK causes the subsequent ACK
   to cover four previously unacknowledged segments.  During congestion
   avoidance this leads to a four-segment burst and during slow start a
   five-segment burst is generated.

   There are also changes in progress that reduce the performance
   problems posed by moderate traffic bursts.  One such change is the
   deployment of higher-speed links in some parts of the network, where
   a burst of 4K bytes can represent a small quantity of data.  A second
   change, for routers with sufficient buffering, is the deployment of
   queue management mechanisms such as RED, which is designed to be
   tolerant of transient traffic bursts.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Simulations%20and%20Experimental%20Results"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Simulations and Experimental Results</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1%20Studies%20of%20TCP%20Connections%20using%20that%20Larger%20Initial%20Window"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a> Studies of TCP Connections using that Larger Initial Window</span>

   This section surveys simulations and experiments that have been used
   to explore the effect of larger initial windows on the TCP connection
   using that larger window.  The first set of experiments explores
   performance over satellite links.  Larger initial windows have been
   shown to improve performance of TCP connections over satellite
   channels [<a href="#ref-All97b" title="Ohio University">All97b</a>].  In this study, an initial window of four segments
   (512 byte MSS) resulted in throughput improvements of up to 30%
   (depending upon transfer size).  [<a href="#ref-KAGT98" title='"http://gigahertz.lerc.nasa.gov/~mallman/papers/nash98.ps"'>KAGT98</a>] shows that the use of
   larger initial windows results in a decrease in transfer time in HTTP
   tests over the ACTS satellite system.  A study involving simulations




<span class="grey">Allman, et. al.               Experimental                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


   of a large number of HTTP transactions over hybrid fiber coax (HFC)
   indicates that the use of larger initial windows decreases the time
   required to load WWW pages [<a href="#ref-Nic97">Nic97</a>].

   A second set of experiments has explored TCP performance over dialup
   modem links.  In experiments over a 28.8 bps dialup channel [All97a,
   AHO98], a four-segment initial window decreased the transfer time of
   a 16KB file by roughly 10%, with no accompanying increase in the drop
   rate.  A particular area of concern has been TCP performance over low
   speed tail circuits (e.g., dialup modem links) with routers with
   small buffers.  A simulation study [<a href="#ref-SP97" title='"When TCP Starts Up With Four Packets Into Only Three Buffers"'>SP97</a>] investigated the effects of
   using a larger initial window on a host connected by a slow modem
   link and a router with a 3 packet buffer.  The study concluded that
   for the scenario investigated, the use of larger initial windows was
   not harmful to TCP performance.  Questions have been raised
   concerning the effects of larger initial windows on the transfer time
   for short transfers in this environment, but these effects have not
   been quantified.  A question has also been raised concerning the
   possible effect on existing TCP connections sharing the link.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2%20Studies%20of%20Networks%20using%20Larger%20Initial%20Windows"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a> Studies of Networks using Larger Initial Windows</span>

   This section surveys simulations and experiments investigating the
   impact of the larger window on other TCP connections sharing the
   path.  Experiments in [<a href="#ref-All97a" title="1997. Washington">All97a</a>, <a href="#ref-AHO98" title='"http://gigahertz.lerc.nasa.gov/~mallman/papers/ initwin.ps"'>AHO98</a>] show that for 16 KB transfers
   to 100 Internet hosts, four-segment initial windows resulted in a
   small increase in the drop rate of 0.04 segments/transfer.  While the
   drop rate increased slightly, the transfer time was reduced by
   roughly 25% for transfers using the four-segment (512 byte MSS)
   initial window when compared to an initial window of one segment.

   One scenario of concern is heavily loaded links.  For instance, a
   couple of years ago, one of the trans-Atlantic links was so heavily
   loaded that the correct congestion window size for a connection was
   about one segment.  In this environment, new connections using larger
   initial windows would be starting with windows that were four times
   too big.  What would the effects be?  Do connections thrash?

   A simulation study in [<a href="#ref-PN98" title='"Simulation Studies of Increased Initial TCP Window Size"'>PN98</a>] explores the impact of a larger initial
   window on competing network traffic.  In this investigation, HTTP and
   FTP flows share a single congested gateway (where the number of HTTP
   and FTP flows varies from one simulation set to another).  For each
   simulation set, the paper examines aggregate link utilization and
   packet drop rates, median web page delay, and network power for the
   FTP transfers.  The larger initial window generally resulted in
   increased throughput, slightly-increased packet drop rates, and an
   increase in overall network power.  With the exception of one
   scenario, the larger initial window resulted in an increase in the



<span class="grey">Allman, et. al.               Experimental                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


   drop rate of less than 1% above the loss rate experienced when using
   a one-segment initial window; in this scenario, the drop rate
   increased from 3.5% with one-segment initial windows, to 4.5% with
   four-segment initial windows.  The overall conclusions were that
   increasing the TCP initial window to three packets (or 4380 bytes)
   helps to improve perceived performance.

   Morris [<a href="#ref-Mor97">Mor97</a>] investigated larger initial windows in a very
   congested network with transfers of size 20K.  The loss rate in
   networks where all TCP connections use an initial window of four
   segments is shown to be 1-2% greater than in a network where all
   connections use an initial window of one segment.  This relationship
   held in scenarios where the loss rates with one-segment initial
   windows ranged from 1% to 11%.  In addition, in networks where
   connections used an initial window of four segments, TCP connections
   spent more time waiting for the retransmit timer (RTO) to expire to
   resend a segment than was spent when using an initial window of one
   segment.  The time spent waiting for the RTO timer to expire
   represents idle time when no useful work was being accomplished for
   that connection.  These results show that in a very congested
   environment, where each connection's share of the bottleneck
   bandwidth is close to one segment, using a larger initial window can
   cause a perceptible increase in both loss rates and retransmit
   timeouts.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Security Considerations</span>

   This document discusses the initial congestion window permitted for
   TCP connections.  Changing this value does not raise any known new
   security issues with TCP.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Conclusion"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Conclusion</span>

   This document proposes a small change to TCP that may be beneficial
   to short-lived TCP connections and those over links with long RTTs
   (saving several RTTs during the initial slow-start phase).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Acknowledgments"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Acknowledgments</span>

   We would like to acknowledge Vern Paxson, Tim Shepard, members of the
   End-to-End-Interest Mailing List, and members of the IETF TCP
   Implementation Working Group for continuing discussions of these
   issues for discussions and feedback on this document.








<span class="grey">Allman, et. al.               Experimental                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20References"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  References</span>

   [<a id="ref-All97a" name="ref-All97a">All97a</a>]    Mark Allman.  An Evaluation of TCP with Larger Initial
               Windows.  40th IETF Meeting -- TCP Implementations WG.
               December, 1997.  Washington, DC.

   [<a id="ref-AHO98" name="ref-AHO98">AHO98</a>]     Mark Allman, Chris Hayes, and Shawn Ostermann, An
               Evaluation of TCP with Larger Initial Windows, March
               1998.  Submitted to ACM Computer Communication Review.
               URL: "<a href="http://gigahertz.lerc.nasa.gov/~mallman/papers/initwin.ps">http://gigahertz.lerc.nasa.gov/~mallman/papers/</a>
               <a href="http://gigahertz.lerc.nasa.gov/~mallman/papers/initwin.ps">initwin.ps</a>".

   [<a id="ref-All97b" name="ref-All97b">All97b</a>]    Mark Allman.  Improving TCP Performance Over Satellite
               Channels.  Master's thesis, Ohio University, June 1997.

   [<a id="ref-BLFN96" name="ref-BLFN96">BLFN96</a>]    Berners-Lee, T., Fielding, R., and H. Nielsen, "Hypertext
               Transfer Protocol -- HTTP/1.0", <a href="rfc1945.html">RFC 1945</a>, May 1996.

   [<a id="ref-Bra89" name="ref-Bra89">Bra89</a>]     Braden, R., "Requirements for Internet Hosts --
               Communication Layers", STD 3, <a href="rfc1122.html">RFC 1122</a>, October 1989.

   [<a id="ref-FF96" name="ref-FF96">FF96</a>]      Fall, K., and Floyd, S., Simulation-based Comparisons of
               Tahoe, Reno, and SACK TCP.  Computer Communication
               Review, 26(3), July 1996.

   [<a id="ref-FF98" name="ref-FF98">FF98</a>]      Sally Floyd, Kevin Fall.  Promoting the Use of End-to-End
               Congestion Control in the Internet.  Submitted to IEEE
               Transactions on Networking.  URL "<a href="http://www-nrg.ee.lbl.gov/floyd/end2end-paper.html">http://www-</a>
               <a href="http://www-nrg.ee.lbl.gov/floyd/end2end-paper.html">nrg.ee.lbl.gov/floyd/end2end-paper.html</a>".

   [<a id="ref-FJGFBL97" name="ref-FJGFBL97">FJGFBL97</a>]  Fielding, R., Mogul, J., Gettys, J., Frystyk, H., and T.
               Berners-Lee, "Hypertext Transfer Protocol -- HTTP/1.1",
               <a href="rfc2068.html">RFC 2068</a>, January 1997.

   [<a id="ref-FJ93" name="ref-FJ93">FJ93</a>]      Floyd, S., and Jacobson, V., Random Early Detection
               gateways for Congestion Avoidance. IEEE/ACM Transactions
               on Networking, V.1 N.4, August 1993, p. 397-413.

   [<a id="ref-Flo94" name="ref-Flo94">Flo94</a>]     Floyd, S., TCP and Explicit Congestion Notification.
               Computer Communication Review, 24(5):10-23, October 1994.

   [<a id="ref-Flo96" name="ref-Flo96">Flo96</a>]     Floyd, S., Issues of TCP with SACK. Technical report,
               January 1996.  Available from <a href="http://www-nrg.ee.lbl.gov/floyd/">http://www-</a>
               <a href="http://www-nrg.ee.lbl.gov/floyd/">nrg.ee.lbl.gov/floyd/</a>.

   [<a id="ref-Flo97" name="ref-Flo97">Flo97</a>]     Floyd, S., Increasing TCP's Initial Window.  Viewgraphs,
               40th IETF Meeting - TCP Implementations WG. December,
               1997.  URL "<a href="ftp://ftp.ee.lbl.gov/talks/sf-tcp-ietf97.ps">ftp://ftp.ee.lbl.gov/talks/sf-tcp-ietf97.ps</a>".



<span class="grey">Allman, et. al.               Experimental                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


   [<a id="ref-KAGT98" name="ref-KAGT98">KAGT98</a>]    Hans Kruse, Mark Allman, Jim Griner, Diepchi Tran.  HTTP
               Page Transfer Rates Over Geo-Stationary Satellite Links.
               March 1998.  Proceedings of the Sixth International
               Conference on Telecommunication Systems.  URL
               "<a href="http://gigahertz.lerc.nasa.gov/~mallman/papers/nash98.ps">http://gigahertz.lerc.nasa.gov/~mallman/papers/nash98.ps</a>".

   [<a id="ref-MD90" name="ref-MD90">MD90</a>]      Mogul, J., and S. Deering, "Path MTU Discovery", <a href="rfc1191.html">RFC</a>
               <a href="rfc1191.html">1191</a>, November 1990.

   [<a id="ref-MMFR96" name="ref-MMFR96">MMFR96</a>]    Mathis, M., Mahdavi, J., Floyd, S., and A. Romanow, "TCP
               Selective Acknowledgment Options", <a href="rfc2018.html">RFC 2018</a>, October
               1996.

   [<a id="ref-Mor97" name="ref-Mor97">Mor97</a>]     Robert Morris.  Private communication, 1997.  Cited for
               acknowledgement purposes only.

   [<a id="ref-Nic97" name="ref-Nic97">Nic97</a>]     Kathleen Nichols.  Improving Network Simulation with
               Feedback.  Com21, Inc. Technical Report.  Available from
               <a href="http://www.com21.com/pages/papers/068.pdf">http://www.com21.com/pages/papers/068.pdf</a>.

   [<a id="ref-PN98" name="ref-PN98">PN98</a>]      Poduri, K., and K. Nichols, "Simulation Studies of
               Increased Initial TCP Window Size", <a href="rfc2415.html">RFC 2415</a>, September
               1998.

   [<a id="ref-Pos82" name="ref-Pos82">Pos82</a>]     Postel, J., "Simple Mail Transfer Protocol", STD 10, <a href="rfc821.html">RFC</a>
               <a href="rfc821.html">821</a>, August 1982.

   [<a id="ref-RF97" name="ref-RF97">RF97</a>]      Ramakrishnan, K., and S. Floyd, "A Proposal to Add
               Explicit Congestion Notification (ECN) to IPv6 and to
               TCP", Work in Progress.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]   Bradner, S., "Key words for use in RFCs to Indicate
               Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2309" name="ref-RFC2309">RFC2309</a>]   Braden, B., Clark, D., Crowcroft, J., Davie, B., Deering,
               S., Estrin, D., Floyd, S., Jacobson, V., Minshall, G.,
               Partridge, C., Peterson, L., Ramakrishnan, K., Shenker,
               S., Wroclawski, J., and L.  Zhang, "Recommendations on
               Queue Management and Congestion Avoidance in the
               Internet", <a href="rfc2309.html">RFC 2309</a>, April 1998.

   [<a id="ref-S97" name="ref-S97">S97</a>]       Stevens, W., "TCP Slow Start, Congestion Avoidance, Fast
               Retransmit, and Fast Recovery Algorithms", <a href="rfc2001.html">RFC 2001</a>,
               January 1997.

   [<a id="ref-SP97" name="ref-SP97">SP97</a>]      Shepard, T., and C. Partridge, "When TCP Starts Up With
               Four Packets Into Only Three Buffers", <a href="rfc2416.html">RFC 2416</a>,
               September 1998.



<span class="grey">Allman, et. al.               Experimental                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Author%27s%20Addresses"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Author's Addresses</span>

   Mark Allman
   NASA Lewis Research Center/Sterling Software
   21000 Brookpark Road
   MS 54-2
   Cleveland, OH 44135

   EMail: mallman@lerc.nasa.gov
   <a href="http://gigahertz.lerc.nasa.gov/~mallman/">http://gigahertz.lerc.nasa.gov/~mallman/</a>


   Sally Floyd
   Lawrence Berkeley National Laboratory
   One Cyclotron Road
   Berkeley, CA 94720

   EMail: floyd@ee.lbl.gov


   Craig Partridge
   BBN Technologies
   10 Moulton Street
   Cambridge, MA 02138

   EMail: craig@bbn.com

























<span class="grey">Allman, et. al.               Experimental                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Appendix%20-%20Duplicate%20Segments"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Appendix - Duplicate Segments</span>

   In the current environment (without Explicit Congestion Notification
   [<a href="#ref-Flo94" title="S.">Flo94</a>] [<a href="#ref-RF97" title='"A Proposal to Add Explicit Congestion Notification (ECN) to IPv6 and to TCP"'>RF97</a>]), all TCPs use segment drops as indications from the
   network about the limits of available bandwidth.  We argue here that
   the change to a larger initial window should not result in the sender
   retransmitting a large number of duplicate segments that have already
   been received at the receiver.

   If one segment is dropped from the initial window, there are three
   different ways for TCP to recover: (1) Slow-starting from a window of
   one segment, as is done after a retransmit timeout, or after Fast
   Retransmit in Tahoe TCP; (2) Fast Recovery without selective
   acknowledgments (SACK), as is done after three duplicate ACKs in Reno
   TCP; and (3) Fast Recovery with SACK, for TCP where both the sender
   and the receiver support the SACK option [<a href="#ref-MMFR96" title='"TCP Selective Acknowledgment Options"'>MMFR96</a>].  In all three
   cases, if a single segment is dropped from the initial window, no
   duplicate segments (i.e., segments that have already been received at
   the receiver) are transmitted.  Note that for a TCP sending four
   512-byte segments in the initial window, a single segment drop will
   not require a retransmit timeout, but can be recovered from using the
   Fast Retransmit algorithm (unless the retransmit timer expires
   prematurely).  In addition, a single segment dropped from an initial
   window of three segments might be repaired using the fast retransmit
   algorithm, depending on which segment is dropped and whether or not
   delayed ACKs are used.  For example, dropping the first segment of a
   three segment initial window will always require waiting for a
   timeout.  However, dropping the third segment will always allow
   recovery via the fast retransmit algorithm, as long as no ACKs are
   lost.

   Next we consider scenarios where the initial window contains two to
   four segments, and at least two of those segments are dropped.  If
   all segments in the initial window are dropped, then clearly no
   duplicate segments are retransmitted, as the receiver has not yet
   received any segments.  (It is still a possibility that these dropped
   segments used scarce bandwidth on the way to their drop point; this
   issue was discussed in <a href="#section-5">Section 5</a>.)

   When two segments are dropped from an initial window of three
   segments, the sender will only send a duplicate segment if the first
   two of the three segments were dropped, and the sender does not
   receive a packet with the SACK option acknowledging the third
   segment.

   When two segments are dropped from an initial window of four
   segments, an examination of the six possible scenarios (which we
   don't go through here) shows that, depending on the position of the



<span class="grey">Allman, et. al.               Experimental                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


   dropped packets, in the absence of SACK the sender might send one
   duplicate segment.  There are no scenarios in which the sender sends
   two duplicate segments.

   When three segments are dropped from an initial window of four
   segments, then, in the absence of SACK, it is possible that one
   duplicate segment will be sent, depending on the position of the
   dropped segments.

   The summary is that in the absence of SACK, there are some scenarios
   with multiple segment drops from the initial window where one
   duplicate segment will be transmitted.  There are no scenarios where
   more that one duplicate segment will be transmitted.  Our conclusion
   is that the number of duplicate segments transmitted as a result of a
   larger initial window should be small.




































<span class="grey">Allman, et. al.               Experimental                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc2414.html">RFC 2414</a>            Increasing TCP's Initial Window       September 1998</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-14" name="section-14">14</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (1998).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
























Allman, et. al.               Experimental                     [Page 14]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc2414 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:53 GMT --></html>