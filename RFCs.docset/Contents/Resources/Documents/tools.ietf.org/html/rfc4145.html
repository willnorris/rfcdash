<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4145 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:43 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4145" name="DC.Identifier"/>
<meta content="This document describes how to express media transport over TCP using
the Session Description Protocol (SDP). It defines the SDP 'TCP'
protocol identifier, the SDP 'setup' attribute, which describes
the connection setup procedure, and the SDP 'connection'
attribute, which handles connection reestablishment. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Camarillo, Gonzalo" name="DC.Creator"/>
<meta content="Yon, David" name="DC.Creator"/>
<meta content="September, 2005" name="DC.Date.Issued"/>
<meta content="TCP-Based Media Transport in the Session Description Protocol (SDP)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4145 - TCP-Based Media Transport in the Session Description Protocol (SDP)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4145.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4145" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-mmusic-sdp-comedia" title="draft-ietf-mmusic-sdp-comedia">draft-ietf-mmus...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4145" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4145" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4145" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Updated by: <a href="rfc4572.html">4572</a>                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                             D. Yon
Request for Comments: 4145                        Tactical Software, LLC
Category: Standards Track                                   G. Camarillo
                                                                Ericsson
                                                          September 2005


  <span class="h1">TCP-Based Media Transport in the Session Description Protocol (SDP)</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This document describes how to express media transport over TCP using
   the Session Description Protocol (SDP).  It defines the SDP 'TCP'
   protocol identifier, the SDP 'setup' attribute, which describes the
   connection setup procedure, and the SDP 'connection' attribute, which
   handles connection reestablishment.























<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-3">3</a>.  Protocol Identifier  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-4">4</a>.  Setup Attribute  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
       <a href="#section-4.1">4.1</a>.  The Setup Attribute in the Offer/Answer Model. . . . . .  <a href="#page-4">4</a>
   <a href="#section-5">5</a>.  The Connection Attribute . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
       <a href="#section-5.1">5.1</a>.  Offerer Behaviour. . . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
       <a href="#section-5.2">5.2</a>.  Answerer Behaviour . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
   <a href="#section-6">6</a>.  Connection Management  . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
       <a href="#section-6.1">6.1</a>.  Connection Establishment . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
       <a href="#section-6.2">6.2</a>.  Connection Reestablishment . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
       <a href="#section-6.3">6.3</a>.  Connection Termination . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
   <a href="#section-7">7</a>.  Examples . . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-7.1">7.1</a>.  Passive/Active . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-7.2">7.2</a>.  Actpass/Passive. . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-7.3">7.3</a>.  Existing Connection Reuse. . . . . . . . . . . . . . . . <a href="#page-10">10</a>
       <a href="#section-7.4">7.4</a>.  Existing Connection Refusal. . . . . . . . . . . . . . . <a href="#page-10">10</a>
   <a href="#section-8">8</a>.  Other Connection-Oriented Transport Protocols. . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-9">9</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-10">10</a>. IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-11">11</a>. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-12">12</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
       <a href="#section-12.1">12.1</a>. Normative References . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
       <a href="#section-12.2">12.2</a>. Informative References . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>

























<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The Session Description Protocol [<a href="#ref-4" title='"SDP: Session Description Protocol"'>4</a>] provides a general-purpose
   format for describing multimedia sessions in announcements or
   invitations.  SDP uses an entirely textual data format (the US-ASCII
   subset of UTF-8 [<a href="#ref-11" title='"UTF-8, a transformation format of ISO 10646"'>11</a>]) to maximize portability among transports.  SDP
   does not define a protocol; it defines the syntax to describe a
   multimedia session with sufficient information to participate in that
   session.  Session descriptions may be sent using arbitrary existing
   application protocols for transport (e.g., SAP [<a href="#ref-9" title='"Session Announcement Protocol"'>9</a>], SIP [<a href="#ref-10" title='"SIP: Session Initiation Protocol"'>10</a>], RTSP
   [<a href="#ref-6" title='"Real Time Streaming Protocol (RTSP)"'>6</a>], email, HTTP [<a href="#ref-8" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>8</a>], etc.).

   SDP [<a href="#ref-4" title='"SDP: Session Description Protocol"'>4</a>] defines two protocol identifiers: RTP/AVP and UDP, both of
   which represent unreliable, connectionless protocols.  While these
   transports are appropriate choices for multimedia streams, there are
   applications for which TCP is more appropriate.  This document
   defines a new protocol identifier, 'TCP', to describe TCP connections
   in SDP.

   TCP introduces two new factors when describing a session: how and
   when should endpoints perform the TCP connection setup procedure.
   This document defines two new attributes to describe TCP connection
   setups: 'setup' and 'connection'.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
   RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as
   described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a> [<a href="#ref-3" title='"Key words for use in RFCs to Indicate Requirement Levels"'>3</a>], and they indicate requirement
   levels for compliant implementations.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Protocol%20Identifier"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Protocol Identifier</span>

   The following is the ABNF for an 'm' line, as specified by <a href="rfc2327.html">RFC 2327</a>
   [<a href="#ref-4" title='"SDP: Session Description Protocol"'>4</a>].

    media-field =         "m=" media space port ["/" integer]
                          space proto 1*(space fmt) CRLF

   This document defines a new value for the proto field: 'TCP'.

   The 'TCP' protocol identifier is similar to the 'UDP' protocol
   identifier in that it only describes the transport protocol, and not
   the upper-layer protocol.  An 'm' line that specifies 'TCP' MUST






<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


   further qualify the application-layer protocol using an fmt
   identifier.  Media described using an 'm' line containing the 'TCP'
   protocol identifier are carried using TCP [<a href="#ref-1" title='"Transmission Control Protocol"'>1</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Setup%20Attribute"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Setup Attribute</span>

   The 'setup' attribute indicates which of the end points should
   initiate the TCP connection establishment (i.e., send the initial TCP
   SYN).  The 'setup' attribute is charset-independent and can be a
   session-level or a media-level attribute.  The following is the ABNF
   of the 'setup' attribute:

         setup-attr           =  "a=setup:" role
         role                 =  "active" / "passive" / "actpass"
                                 / "holdconn"

      'active': The endpoint will initiate an outgoing connection.

      'passive': The endpoint will accept an incoming connection.

      'actpass': The endpoint is willing to accept an incoming
      connection or to initiate an outgoing connection.

      'holdconn': The endpoint does not want the connection to be
      established for the time being.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20The%20Setup%20Attribute%20in%20the%20Offer%2FAnswer%20Model"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  The Setup Attribute in the Offer/Answer Model</span>

   The offer/answer model, defined in <a href="rfc3264.html">RFC 3264</a> [<a href="#ref-5" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>5</a>], provides endpoints
   with a means to obtain shared view of a session.  Some session
   parameters are negotiated (e.g., codecs to use), while others are
   simply communicated from one endpoint to the other (e.g., IP
   addresses).  The value of the 'setup' attribute falls into the first
   category.  That is, both endpoints negotiate its value using the
   offer/answer model.

   The negotiation of the value of the 'setup' attribute takes places as
   follows.  The offerer states which role or roles it is willing to
   perform; and the answerer, taking the offerer's willingness into
   consideration, chooses which roles both endpoints will actually
   perform during connection establishment.  The following are the
   values that the 'setup' attribute can take in an offer/answer
   exchange:








<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


            Offer      Answer
            ________________
            active     passive / holdconn
            passive    active / holdconn
            actpass    active / passive / holdconn
            holdconn   holdconn

   The active endpoint SHOULD initiate a connection to the port number
   on the 'm' line of the other endpoint.  The port number on its own
   'm' line is irrelevant, and the opposite endpoint MUST NOT attempt to
   initiate a connection to the port number specified there.
   Nevertheless, since the 'm' line must contain a valid port number,
   the endpoint using the value 'active' SHOULD specify a port number of
   9 (the discard port) on its 'm' line.  The endpoint MUST NOT specify
   a port number of zero, except to denote an 'm' line that has been or
   is being refused.

   The passive endpoint SHOULD be ready to accept a connection on the
   port number specified in the 'm' line.

   A value of 'actpass' indicates that the offerer can either initiate a
   connection to the port number on the 'm' line in the answer, or
   accept a connection on the port number specified in the 'm' line in
   the offer.  That is, the offerer has no preference as to whether it
   accepts or initiates the connection and, so, is letting the answerer
   choose.

   A value of 'holdconn' indicates that the connection should not be
   established for the time being.

   The default value of the setup attribute in an offer/answer exchange
   is 'active' in the offer and 'passive' in the answer.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20The%20Connection%20Attribute"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  The Connection Attribute</span>

   The preceding description of the 'setup' attribute is placed in the
   context of using SDP to initiate a session.  Still, SDP may be
   exchanged between endpoints at various stages of a session to
   accomplish tasks such as terminating a session, redirecting media to
   a new endpoint, or renegotiating the media parameters for a session.
   After the initial session has been established, it may be ambiguous
   whether a subsequent SDP exchange represents a confirmation that the
   endpoint is to continue using the current TCP connection unchanged,
   or is a request to make a new TCP connection.  The media-level
   'connection' attribute, which is charset-independent, is used to
   disambiguate these two scenarios.  The following is the ABNF of the
   connection attribute:




<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


         connection-attr        = "a=connection:" conn-value
         conn-value             = "new" / "existing"

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Offerer%20Behaviour"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Offerer Behaviour</span>

   Offerers and answerers use the 'connection' attribute to decide
   whether a new transport connection needs to be established or, on the
   other hand, the existing TCP connection should still be used.  When
   an offerer generates an 'm' line that uses TCP, it SHOULD provide a
   connection attribute for the 'm' line unless the application using
   the 'm' line has other means to deal with connection reestablishment.

   After the initial offer/answer exchange, any of the endpoints can
   generate a new offer to change some characteristics of the session
   (e.g., the direction attribute).  If such an offerer wants to
   continue using the previously-established transport-layer connection
   for the 'm' line, the offerer MUST use a connection value of
   'existing' for the 'm' line.  If, on the other hand, the offerer
   wants to establish a new transport-layer connection for the 'm' line,
   it MUST use a connection value of 'new'.

      Note that, according to the rules in this section, an offer that
      changes the transport address (IP address or port number) of an
      'm' line will have a connection value of 'new'.  Similarly, the
      'connection' attribute in an initial offer (i.e., no transport
      connection has been established yet) takes the value of 'new'.

   The 'connection' value resulting from an offer/answer exchange is the
   'connection' value in the answer.  If the 'connection' value in the
   answer is 'new', the end-points SHOULD establish a new connection.
   If the connection value in the answer is 'existing', the end-points
   SHOULD continue using the exiting connection.

   Taking into consideration the rules in <a href="#section-5.2">Section 5.2</a>, the following are
   the values that the 'connection' attribute can take in an
   offer/answer exchange:

            Offer      Answer
            ________________
            new        new
            existing   existing / new

   If the connection value resulting from an offer/answer exchange is
   'existing', the end-points continue using the existing connection.
   Consequently, the port numbers, IP addresses, and 'setup' attributes
   negotiated in the offer/answer exchange are ignored because there is
   no need to establish a new connection.




<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


   The previous rule implies that an offerer generating an offer with a
   connection value of 'existing' and a setup value of 'passive' needs
   to be ready (i.e., needs to allocate resources) to receive a
   connection request from the answerer just in case the answerer
   chooses a connection value of 'new' for the answer.  However, if the
   answerer uses a connection value of 'existing' in the answer, the
   offerer would need to deallocate the previously allocated resources
   that were never used because no connection request was received.

   To avoid allocating resources unnecessarily, offerers using a
   connection value of 'existing' in their offers may choose to use a
   setup value of 'holdconn'.  Nevertheless, offerers using this
   strategy should be aware that if the answerer chooses a connection
   value of 'new', a new offer/answer exchange (typically initiated by
   the previous offerer) with setup value different than 'holdconn' will
   be needed to establish the new connection.  This may, of course,
   cause delays in the application using the TCP connection.

   The default value of the connection attribute in both offers and
   answers is 'new'.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Answerer%20Behaviour"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Answerer Behaviour</span>

   The connection value for an 'm' line is negotiated using the offer/
   answer model.  The resulting connection value after an offer/answer
   exchange is the connection value in the answer.  If the connection
   value in the offer is 'new', the answerer MUST also use a value of
   'new' in the answer.  If the connection value in the offer is
   'existing', the answerer uses a value of 'existing' in the answer if
   it wishes to continue using the existing connection and a value of
   'new' if it wants a new connection to be established.

      In some scenarios where third party call control [<a href="#ref-12" title='"Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP)"'>12</a>] is used, an
      endpoint may receive an initial offer with a connection value of
      'existing'.  Following the previous rules, such an answerer would
      use a connection value of 'new' in the answer.

   If the connection value for an 'm' line resulting from an offer/
   answer exchange is 'new', the endpoints SHOULD establish a new TCP
   connection as indicated by the 'setup' attribute.  If a previous TCP
   connection is still up, the endpoints SHOULD close it as soon as the
   offer/answer exchange is completed.  It is up to the application to
   ensure proper data synchronization between the two TCP connections.

   If the connection value for an 'm' line resulting from an offer/
   answer exchange is 'existing', the endpoints SHOULD continue using
   the existing TCP connection.




<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Connection%20Management"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Connection Management</span>

   This section addresses connection establishment, connection
   reestablishment, and connection termination.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Connection%20Establishment"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Connection Establishment</span>

   An endpoint that according to an offer/answer exchange is supposed to
   initiate a new TCP connection SHOULD initiate it as soon as it is
   able to, even if the endpoint does not intend to immediately begin
   sending media to the remote endpoint.  This allows media to flow from
   the remote endpoint if needed.

      Note that some endpoints need to wait for some event to happen
      before being able to establish the connection.  For example, a
      wireless terminal may need to set up a radio bearer before being
      able to initiate a TCP connection.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Connection%20Reestablishment"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Connection Reestablishment</span>

   If an endpoint determines that the TCP for an 'm' line has been
   closed and should be reestablished, it SHOULD perform a new offer/
   answer exchange using a connection value of 'new' for this 'm' line.

      Note that the SDP direction attribute (e.g., 'a=sendonly') deals
      with the media sent over the TCP connection, but has no impact on
      the TCP connection itself.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Connection%20Termination"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Connection Termination</span>

   Typically, endpoints do not close the TCP connection until the
   session has expired, been explicitly terminated, or a new connection
   value has been provided for the 'm' line.  Additionally, specific
   applications can describe further scenarios where an end-point may
   close a given TCP connection (e.g., whenever a connection is in the
   half-close state).  As soon as an end-point notices that it needs to
   terminate a TCP connection, it SHOULD do so.

   In any case, individual applications may provide further
   considerations on how to achieve a graceful connection termination.
   For example, a file application using TCP to receive a FIN from the
   remote endpoint may need to finish the ongoing transmission of a file
   before sending its own FIN.








<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Examples"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Examples</span>

   The following examples show the most common usage of the 'setup'
   attribute combined with TCP-based media descriptions.  For the
   purpose of brevity, the main portion of the session description is
   omitted in the examples, which only show 'm' lines and their
   attributes (including 'c' lines).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Passive%2FActive"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Passive/Active</span>

   An offerer at 192.0.2.2 signals its availability for a T.38 fax
   session at port 54111:

           m=image 54111 TCP t38
           c=IN IP4 192.0.2.2
           a=setup:passive
           a=connection:new

   An answerer at 192.0.2.1 receiving this offer responds with the
   following answer:

           m=image 9 TCP t38
           c=IN IP4 192.0.2.1
           a=setup:active
           a=connection:new

   The endpoint at 192.0.2.1 then initiates the TCP connection to port
   54111 at 192.0.2.2.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Actpass%2FPassive"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Actpass/Passive</span>

   In another example, an offerer at 192.0.2.2 signals its availability
   for a T.38 fax session at TCP port 54111.  Additionally, this offerer
   is also willing to set up the media stream by initiating the TCP
   connection:

           m=image 54111 TCP t38
           c=IN IP4 192.0.2.2
           a=setup:actpass
           a=connection:new

   The endpoint at 192.0.2.1 responds with the following description:

           m=image 54321 TCP t38
           c=IN IP4 192.0.2.1
           a=setup:passive
           a=connection:new




<span class="grey">Yon &amp; Camarillo             Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


   This will cause the offerer (at 192.0.2.2) to initiate a connection
   to port 54321 at 192.0.2.1.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.3.%20%20Existing%20Connection%20Reuse"></a><a class="selflink" href="#section-7.3" name="section-7.3">7.3</a>.  Existing Connection Reuse</span>

   Subsequent to the exchange in <a href="#section-7.2">Section 7.2</a>, another offer/answer
   exchange is initiated in the opposite direction.  The endpoint at
   192.0.2.1 wishes to continue using the existing connection:

            m=image 54321 TCP t38
            c=IN IP4 192.0.2.1
            a=setup:passive
            a=connection:existing

   The endpoint at 192.0.2.2 also wishes to use the existing connection
   and responds with the following description:

            m=image 9 TCP t38
            c=IN IP4 192.0.2.2
            a=setup:active
            a=connection:existing

   The existing connection from 192.0.2.2 to 192.0.2.1 will be reused.

      Note that the endpoint at 192.0.2.2 uses 'setup:active' in
      response to the offer of 'setup:passive', and uses port 9 because
      it is active.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.4.%20%20Existing%20Connection%20Refusal"></a><a class="selflink" href="#section-7.4" name="section-7.4">7.4</a>.  Existing Connection Refusal</span>

   Subsequent to the exchange in <a href="#section-7.3">Section 7.3</a>, another offer/answer
   exchange is initiated by the endpoint at 192.0.2.2, again wishing to
   reuse the existing connection:

            m=image 54111 TCP t38
            c=IN IP4 192.0.2.2
            a=setup:passive
            a=connection:existing

   However, this time the answerer is unaware of the old connection and
   thus wishes to establish a new one.  (This could be the result of a
   transfer via third-party call control.)  It is unable to act in the
   'passive' mode and thus responds as 'active':








<span class="grey">Yon &amp; Camarillo             Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


            m=image 9 TCP t38
            c=IN IP4 192.0.2.3
            a=setup:active
            a=connection:new

   The endpoint at 192.0.2.3 then initiates the TCP connection to port
   54111 at 192.0.2.2, and the endpoint at 192.0.2.2 closes the old
   connection.

      Note that the endpoint at 192.0.2.2, while using a connection
      value of 'existing', has used a setup value of 'passive'.  Had it
      not done this and instead used a setup value of 'holdconn'
      (probably to avoid allocating resources as described in
      <a href="#section-5.1">Section 5.1</a>), a new offer/answer exchange would have been needed
      in order to establish the new connection.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Other%20Connection-Oriented%20Transport%20Protocols"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Other Connection-Oriented Transport Protocols</span>

   This document specifies how to describe TCP-based media streams using
   SDP.  Still, some of the attributes defined here could possibly be
   used to describe media streams based on other connection-oriented
   transport protocols as well.  This section provides advice to authors
   of specifications of SDP extensions that deal with connection-
   oriented transport protocols other than TCP.

   It is recommended that documents defining new SDP protocol
   identifiers that involve extra protocol layers between TCP and the
   media itself (e.g., TLS [<a href="#ref-7" title='"The TLS Protocol Version 1.0"'>7</a>] over TCP) start with the string 'TCP/'
   (e.g., 'TCP/TLS').

   The 'setup' and the 'connection' attributes are specified in
   <a href="#section-4">Section 4</a> and <a href="#section-5">Section 5</a> respectively.  While both attributes are
   applicable to 'm' lines that use the 'TCP' protocol identifier, they
   are general enough to be reused in 'm' lines with other connection-
   oriented transport protocols.  Therefore, it is recommended that the
   'setup' and 'connection' attributes are reused, as long as it is
   possible, for new proto values associated with connection-oriented
   transport protocols.

   <a href="#section-6">Section 6</a> deals with TCP connection management.  It should be noted
   that while in TCP both end-points need to close a connection, other
   connection-oriented transport protocols may not have the concept of
   half-close connections.  In such a case, a connection would be
   terminated as soon as one of the end-points closed it, making it
   unnecessary for the other end-point to perform any further action to
   terminate the connection.  So, specifications dealing with such
   transport protocols may need to specify slightly different procedures
   regarding connection termination.



<span class="grey">Yon &amp; Camarillo             Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   See <a href="rfc2327.html">RFC 2327</a> [<a href="#ref-4" title='"SDP: Session Description Protocol"'>4</a>] for security and other considerations specific to
   the Session Description Protocol in general.

   An attacker may attempt to modify the values of the connection and
   setup attributes in order to have endpoints reestablish connections
   unnecessarily or to keep them from establishing a connection.  So, it
   is strongly RECOMMENDED that integrity protection be applied to the
   SDP session descriptions.  For session descriptions carried in SIP
   [<a href="#ref-10" title='"SIP: Session Initiation Protocol"'>10</a>], S/MIME is the natural choice to provide such end-to-end
   integrity protection, as described in <a href="rfc3261.html">RFC 3261</a> [<a href="#ref-10" title='"SIP: Session Initiation Protocol"'>10</a>].  Other
   applications MAY use a different form of integrity protection.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  IANA Considerations</span>

   This document defines two session- and media-level SDP attributes:
   setup and connection.  Their formats are defined in <a href="#section-4">Section 4</a> and
   <a href="#section-5">Section 5</a>, respectively.  These two attributes should be registered
   by the IANA under "Session Description Protocol (SDP) Parameters"
   under "att-field (both session and media level)".

   This document defines a proto value: TCP.  Its format is defined in
   <a href="#section-3">Section 3</a>.  This proto value should be registered by the IANA under
   "Session Description Protocol (SDP) Parameters" under "proto".

   The SDP specification, <a href="rfc2327.html">RFC2327</a>, states that specifications defining
   new proto values, like the TCP proto value defined in this RFC, must
   define the rules by which their media format (fmt) namespace is
   managed.  For the TCP protocol, new formats SHOULD have an associated
   MIME registration.  Use of an existing MIME subtype for the format is
   encouraged.  If no MIME subtype exists, it is RECOMMENDED that a
   suitable one is registered through the IETF process [<a href="#ref-2" title='"Multipurpose Internet Mail Extensions (MIME) Part Four: Registration Procedures"'>2</a>] by production
   of, or reference to, a standards-track RFC that defines the transport
   protocol for the format.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Acknowledgements"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Acknowledgements</span>

   Jonathan Rosenberg, Rohan Mahy, Anders Kristensen, Joerg Ott, Paul
   Kyzivat, Robert Fairlie-Cuninghame, Colin Perkins, and Christer
   Holmberg provided valuable insights and contributions.










<span class="grey">Yon &amp; Camarillo             Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20References"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.1.%20%20Normative%20References"></a><a class="selflink" href="#section-12.1" name="section-12.1">12.1</a>.  Normative References</span>

   [<a id="ref-1" name="ref-1">1</a>]  Postel, J., "Transmission Control Protocol", STD 7, <a href="rfc793.html">RFC 793</a>,
        September 1981.

   [<a id="ref-2" name="ref-2">2</a>]  Freed, N., Klensin, J., and J. Postel, "Multipurpose Internet
        Mail Extensions (MIME) Part Four: Registration Procedures",
        <a href="https://tools.ietf.org/html/bcp13">BCP 13</a>, <a href="rfc2048.html">RFC 2048</a>, November 1996.

   [<a id="ref-3" name="ref-3">3</a>]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-4" name="ref-4">4</a>]  Handley, M. and V. Jacobson, "SDP: Session Description
        Protocol", <a href="rfc2327.html">RFC 2327</a>, April 1998.

   [<a id="ref-5" name="ref-5">5</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model with
        Session Description Protocol (SDP)", <a href="rfc3264.html">RFC 3264</a>, June 2002.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.2.%20%20Informative%20References"></a><a class="selflink" href="#section-12.2" name="section-12.2">12.2</a>.  Informative References</span>

   [<a id="ref-6" name="ref-6">6</a>]   Schulzrinne, H., Rao, A., and R. Lanphier, "Real Time Streaming
         Protocol (RTSP)", <a href="rfc2326.html">RFC 2326</a>, April 1998.

   [<a id="ref-7" name="ref-7">7</a>]   Dierks, T. and C. Allen, "The TLS Protocol Version 1.0",
         <a href="rfc2246.html">RFC 2246</a>, January 1999.

   [<a id="ref-8" name="ref-8">8</a>]   Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L.,
         Leach, P., and T. Berners-Lee, "Hypertext Transfer Protocol --
         HTTP/1.1", <a href="rfc2616.html">RFC 2616</a>, June 1999.

   [<a id="ref-9" name="ref-9">9</a>]   Handley, M., Perkins, C., and E. Whelan, "Session Announcement
         Protocol", <a href="rfc2974.html">RFC 2974</a>, October 2000.

   [<a id="ref-10" name="ref-10">10</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,
         Peterson, J., Sparks, R., Handley, M., and E. Schooler, "SIP:
         Session Initiation Protocol", <a href="rfc3261.html">RFC 3261</a>, June 2002.

   [<a id="ref-11" name="ref-11">11</a>]  Yergeau, F., "UTF-8, a transformation format of ISO 10646",
         STD 63, <a href="rfc3629.html">RFC 3629</a>, November 2003.

   [<a id="ref-12" name="ref-12">12</a>]  Rosenberg, J., Peterson, J., Schulzrinne, H., and G. Camarillo,
         "Best Current Practices for Third Party Call Control (3pcc) in
         the Session Initiation Protocol (SIP)", <a href="https://tools.ietf.org/html/bcp85">BCP 85</a>, <a href="rfc3725.html">RFC 3725</a>,
         April 2004.





<span class="grey">Yon &amp; Camarillo             Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


Authors' Addresses

   David Yon
   Tactical Software, LLC
   1750 Elm St., Suite 803
   Manchester, NH  03104
   USA

   EMail: yon-comedia@rfdsoftware.com


   Gonzalo Camarillo
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   EMail: Gonzalo.Camarillo@ericsson.com

































<span class="grey">Yon &amp; Camarillo             Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4145.html">RFC 4145</a>               Connection-Oriented Media          September 2005</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2005).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Yon &amp; Camarillo             Standards Track                    [Page 15]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4145 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:43 GMT --></html>