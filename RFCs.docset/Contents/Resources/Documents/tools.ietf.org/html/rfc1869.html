<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc1869 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:56 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="rfc1651" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:1869" name="DC.Identifier"/>
<meta content="November, 1995" name="DC.Date.Issued"/>
<meta content="Rose, Marshall T." name="DC.Creator"/>
<meta content="Freed, Ned" name="DC.Creator"/>
<meta content="Stefferud, Einar A." name="DC.Creator"/>
<meta content="This memo defines a framework for extending the SMTP service by
defining a means whereby a server SMTP can inform a client SMTP as to
the service extensions it supports. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="SMTP Service Extensions" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 1869 - SMTP Service Extensions</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgbrown" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc1869.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc1869" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-smtpext-extensions" title="draft-ietf-smtpext-extensions">draft-ietf-smtp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc1869" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc1869" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc1869" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Obsoleted by: <a href="rfc2821.html">2821</a>                                     INTERNET STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                               J. Klensin, WG Chair
Request For Comments: 1869                                           MCI
STD: 10                                                 N. Freed, Editor
Obsoletes: <a href="rfc1651.html">1651</a>                             Innosoft International, Inc.
Category: Standards Track                                        M. Rose
                                            Dover Beach Consulting, Inc.
                                                            E. Stefferud
                                     Network Management Associates, Inc.
                                                              D. Crocker
                                                  Brandenburg Consulting
                                                           November 1995


                        <span class="h1">SMTP Service Extensions</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Abstract"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Abstract</span>

   This memo defines a framework for extending the SMTP service by
   defining a means whereby a server SMTP can inform a client SMTP as to
   the service extensions it supports.  Extensions to the SMTP service
   are registered with the IANA. This framework does not require
   modification of existing SMTP clients or servers unless the features
   of the service extensions are to be requested or provided.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Introduction"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Introduction</span>

   The Simple Mail Transfer Protocol (SMTP) [<a href="#ref-1" title='"Simple Mail Transfer Protocol"'>1</a>] has provided a stable,
   effective basis for the relay function of message transfer agents.
   Although a decade old, SMTP has proven remarkably resilient.
   Nevertheless, the need for a number of protocol extensions has become
   evident. Rather than describing these extensions as separate and
   haphazard entities, this document enhances SMTP in a straightforward
   fashion that provides a framework in which all future extensions can
   be built in a single consistent way.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Framework%20for%20SMTP%20Extensions"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Framework for SMTP Extensions</span>

   For the purpose of service extensions to SMTP, SMTP relays a mail
   object containing an envelope and a content.




<span class="grey">Klensin, et al              Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


 (1)   The SMTP envelope is straightforward, and is sent as a
       series of SMTP protocol units: it consists of an
       originator address (to which error reports should be
       directed); a delivery mode (e.g., deliver to recipient
       mailboxes); and, one or more recipient addresses.

 (2)   The SMTP content is sent in the SMTP DATA protocol unit
       and has two parts: the headers and the body. The
       headers form a collection of field/value pairs
       structured according to <a href="rfc822.html">RFC 822</a> [<a href="#ref-2" title='"Standard for the Format of ARPA Internet Text Messages"'>2</a>], whilst the body,
       if structured, is defined according to MIME [<a href="#ref-3" title='"Multipurpose Internet Mail Extensions"'>3</a>]. The
       content is textual in nature, expressed using the US
       ASCII repertoire (ANSI X3.4-1986). Although extensions
       (such as MIME) may relax this restriction for the
       content body, the content headers are always encoded
       using the US ASCII repertoire. The algorithm defined in
       [<a href="#ref-4" title='"Representation of Non-ASCII Text in Internet Message Headers"'>4</a>] is used to represent header values outside the US
       ASCII repertoire, whilst still encoding them using the
       US ASCII repertoire.

   Although SMTP is widely and robustly deployed, some parts of the
   Internet community might wish to extend the SMTP service.  This memo
   defines a means whereby both an extended SMTP client and server may
   recognize each other as such and the server can inform the client as
   to the service extensions that it supports.

   It must be emphasized that any extension to the SMTP service should
   not be considered lightly. SMTP's strength comes primarily from its
   simplicity.  Experience with many protocols has shown that:

     protocols with few options tend towards ubiquity, whilst
     protocols with many options tend towards obscurity.

   This means that each and every extension, regardless of its benefits,
   must be carefully scrutinized with respect to its implementation,
   deployment, and interoperability costs. In many cases, the cost of
   extending the SMTP service will likely outweigh the benefit.

   Given this environment, the framework for the extensions described in
   this memo consists of:

 (1)   a new SMTP command (<a href="#section-4">section 4</a>)

 (2)   a registry of SMTP service extensions (<a href="#section-5">section 5</a>)

 (3)   additional parameters to the SMTP MAIL FROM and RCPT TO
       commands (<a href="#section-6">section 6</a>).




<span class="grey">Klensin, et al              Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20The%20EHLO%20command"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  The EHLO command</span>

   A client SMTP supporting SMTP service extensions should start an SMTP
   session by issuing the EHLO command instead of the HELO command. If
   the SMTP server supports the SMTP service extensions it will give a
   successful response (see <a href="#section-4.3">section 4.3</a>), a failure response (see 4.4),
   or an error response (4.5). If the SMTP server does not support any
   SMTP service extensions it will generate an error response (see
   <a href="#section-4.5">section 4.5</a>).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Changes%20to%20STD%2010%2C%20RFC%20821"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Changes to STD 10, <a href="rfc821.html">RFC 821</a></span>

   This specification is intended to extend STD 10, <a href="rfc821.html">RFC 821</a> without
   impacting existing services in any way.  The minor changes needed are
   enumerated below.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.1.%20%20First%20command"></a><a class="selflink" href="#section-4.1.1" name="section-4.1.1">4.1.1</a>.  First command</span>

   <a href="rfc821.html">RFC 821</a> states that the first command in an SMTP session must be the
   HELO command. This requirement is hereby amended to allow a session
   to start with either EHLO or HELO.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.2.%20%20Maximum%20command%20line%20length"></a><a class="selflink" href="#section-4.1.2" name="section-4.1.2">4.1.2</a>.  Maximum command line length</span>

   This specification extends the SMTP MAIL FROM and RCPT TO to allow
   additional parameters and parameter values.  It is possible that the
   MAIL FROM and RCPT TO lines that result will exceed the 512 character
   limit on command line length imposed by <a href="rfc821.html">RFC 821</a>.  This limit is
   hereby amended to only apply to command lines without any parameters.
   Each specification that defines new MAIL FROM or RCPT TO parameters
   must also specify maximum parameter value lengths for each parameter
   so that implementors of some set of extensions know how much buffer
   space must be allocated. The maximum command length that must be
   supported by an SMTP implementation with extensions is 512 plus the
   sum of all the maximum parameter lengths for all the extensions
   supported.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Command%20syntax"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Command syntax</span>

   The syntax for this command, using the ABNF notation of [<a href="#ref-2" title='"Standard for the Format of ARPA Internet Text Messages"'>2</a>], is:

     ehlo-cmd ::= "EHLO" SP domain CR LF

   If successful, the server SMTP responds with code 250. On failure,
   the server SMTP responds with code 550. On error, the server SMTP
   responds with one of codes 500, 501, 502, 504, or 421.





<span class="grey">Klensin, et al              Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


   This command is issued instead of the HELO command, and may be issued
   at any time that a HELO command would be appropriate.  That is, if
   the EHLO command is issued, and a successful response is returned,
   then a subsequent HELO or EHLO command will result in the server SMTP
   replying with code 503.  A client SMTP must not cache any information
   returned if the EHLO command succeeds. That is, a client SMTP must
   issue the EHLO command at the start of each SMTP session if
   information about extended facilities is needed.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Successful%20response"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Successful response</span>

   If the server SMTP implements and is able to perform the EHLO
   command, it will return code 250.  This indicates that both the
   server and client SMTP are in the initial state, that is, there is no
   transaction in progress and all state tables and buffers are cleared.

   Normally, this response will be a multiline reply. Each line of the
   response contains a keyword and, optionally, one or more parameters.
   The syntax for a positive response, using the ABNF notation of [<a href="#ref-2" title='"Standard for the Format of ARPA Internet Text Messages"'>2</a>],
   is:

     ehlo-ok-rsp  ::=      "250"    domain [ SP greeting ] CR LF
                    / (    "250-"   domain [ SP greeting ] CR LF
                        *( "250-"      ehlo-line           CR LF )
                           "250"    SP ehlo-line           CR LF   )

                  ; the usual HELO chit-chat
     greeting     ::= 1*&lt;any character other than CR or LF&gt;

     ehlo-line    ::= ehlo-keyword *( SP ehlo-param )

     ehlo-keyword ::= (ALPHA / DIGIT) *(ALPHA / DIGIT / "-")

                  ; syntax and values depend on ehlo-keyword
     ehlo-param   ::= 1*&lt;any CHAR excluding SP and all
                         control characters (US ASCII 0-31
                         inclusive)&gt;

     ALPHA        ::= &lt;any one of the 52 alphabetic characters
                       (A through Z in upper case, and,
                        a through z in lower case)&gt;
     DIGIT        ::= &lt;any one of the 10 numeric characters
                       (0 through 9)&gt;

     CR           ::= &lt;the carriage-return character
                       (ASCII decimal code 13)&gt;
     LF           ::= &lt;the line-feed character
                       (ASCII decimal code 10)&gt;



<span class="grey">Klensin, et al              Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


     SP           ::= &lt;the space character
                       (ASCII decimal code 32)&gt;

   Although EHLO keywords may be specified in upper, lower, or mixed
   case, they must always be recognized and processed in a case-
   insensitive manner. This is simply an extension of practices begun in
   <a href="rfc821.html">RFC 821</a>.

   The IANA maintains a registry of SMTP service extensions.  Associated
   with each such extension is a corresponding EHLO keyword value. Each
   service extension registered with the IANA must be defined in an RFC.
   Such RFCs must either be on the standards-track or must define an
   IESG-approved experimental protocol.  The definition must include:

 (1)   the textual name of the SMTP service extension;

 (2)   the EHLO keyword value associated with the extension;

 (3)   the syntax and possible values of parameters associated
       with the EHLO keyword value;

 (4)   any additional SMTP verbs associated with the extension
       (additional verbs will usually be, but are not required
       to be, the same as the EHLO keyword value);

 (5)   any new parameters the extension associates with the
       MAIL FROM or RCPT TO verbs;

 (6)   how support for the extension affects the behavior of a
       server and client SMTP; and,

 (7)   the increment by which the extension is increasing the
       maximum length of the commands MAIL FROM, RCPT TO, or
       both, over that specified in <a href="rfc821.html">RFC 821</a>.

   In addition, any EHLO keyword value that starts with an upper or
   lower case "X" refers to a local SMTP service extension, which is
   used through bilateral, rather than standardized, agreement. Keywords
   beginning with "X" may not be used in a registered service extension.

   Any keyword values presented in the EHLO response that do not begin
   with "X" must correspond to a standard, standards-track, or IESG-
   approved experimental SMTP service extension registered with IANA.  A
   conforming server must not offer non "X" prefixed keyword values that
   are not described in a registered extension.






<span class="grey">Klensin, et al              Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


   Additional verbs are bound by the same rules as EHLO keywords;
   specifically, verbs begining with "X" are local extensions that may
   not be registered or standardized and verbs not beginning with "X"
   must always be registered.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Failure%20response"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Failure response</span>

   If for some reason the server SMTP is unable to list the service
   extensions it supports, it will return code 554.

   In the case of a failure response, the client SMTP should issue
   either the HELO or QUIT command.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20Error%20responses%20from%20extended%20servers"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  Error responses from extended servers</span>

   If the server SMTP recognizes the EHLO command, but the command
   argument is unacceptable, it will return code 501.

   If the server SMTP recognizes, but does not implement, the EHLO
   command, it will return code 502.

   If the server SMTP determines that the SMTP service is no longer
   available (e.g., due to imminent system shutdown), it will return
   code 421.

   In the case of any error response, the client SMTP should issue
   either the HELO or QUIT command.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6.%20%20Responses%20from%20servers%20without%20extensions"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a>.  Responses from servers without extensions</span>

   A server SMTP that conforms to <a href="rfc821.html">RFC 821</a> but does not support the
   extensions specified here will not recognize the EHLO command and
   will consequently return code 500, as specified in <a href="rfc821.html">RFC 821</a>.  The
   server SMTP should stay in the same state after returning this code
   (see <a href="rfc821.html#section-4.1.1">section 4.1.1 of RFC 821</a>).  The client SMTP may then issue
   either a HELO or a QUIT command.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.7.%20%20Responses%20from%20improperly%20implemented%20servers"></a><a class="selflink" href="#section-4.7" name="section-4.7">4.7</a>.  Responses from improperly implemented servers</span>

   Some SMTP servers are known to disconnect the SMTP transmission
   channel upon receipt of the EHLO command. The disconnect can occur
   immediately or after sending a response.  Such behavior violates
   <a href="rfc821.html#section-4.1.1">section 4.1.1 of RFC 821</a>, which explicitly states that disconnection
   should only occur after a QUIT command is issued.

   Nevertheless, in order to achieve maxmimum interoperablity it is
   suggested that extended SMTP clients using EHLO be coded to check for
   server connection closure after EHLO is sent, either before or after



<span class="grey">Klensin, et al              Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


   returning a reply.  If this happens the client must decide if the
   operation can be successfully completed without using any SMTP
   extensions. If it can a new connection can be opened and the HELO
   command can be used.

   Other improperly-implemented servers will not accept a HELO command
   after EHLO has been sent and rejected.  In some cases, this problem
   can be worked around by sending a RSET after the failure response to
   EHLO, then sending the HELO.  Clients that do this should be aware
   that many implementations will return a failure code (e.g., 503 Bad
   sequence of commands) in response to the RSET.  This code can be
   safely ignored.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Initial%20IANA%20Registry"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Initial IANA Registry</span>

   The IANA's initial registry of SMTP service extensions consists of
   these entries:

   Service Ext   EHLO Keyword Parameters Verb       Added Behavior
   ------------- ------------ ---------- ---------- ------------------
   Send             SEND         none       SEND    defined in <a href="rfc821.html">RFC 821</a>
   Send or Mail     SOML         none       SOML    defined in <a href="rfc821.html">RFC 821</a>
   Send and Mail    SAML         none       SAML    defined in <a href="rfc821.html">RFC 821</a>
   Expand           EXPN         none       EXPN    defined in <a href="rfc821.html">RFC 821</a>
   Help             HELP         none       HELP    defined in <a href="rfc821.html">RFC 821</a>
   Turn             TURN         none       TURN    defined in <a href="rfc821.html">RFC 821</a>

   which correspond to those SMTP commands which are defined as optional
   in [<a href="#ref-5" title='"Requirements for Internet Hosts - Application and Support"'>5</a>].  (The mandatory SMTP commands, according to [<a href="#ref-5" title='"Requirements for Internet Hosts - Application and Support"'>5</a>], are HELO,
   MAIL, RCPT, DATA, RSET, VRFY, NOOP, and QUIT.)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20MAIL%20FROM%20and%20RCPT%20TO%20Parameters"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  MAIL FROM and RCPT TO Parameters</span>

   It is recognized that several of the extensions planned for SMTP will
   make use of additional parameters associated with the MAIL FROM and
   RCPT TO command. The syntax for these commands, again using the ABNF
   notation of [<a href="#ref-2" title='"Standard for the Format of ARPA Internet Text Messages"'>2</a>] as well as underlying definitions from [<a href="#ref-1" title='"Simple Mail Transfer Protocol"'>1</a>], is:

     esmtp-cmd        ::= inner-esmtp-cmd [SP esmtp-parameters] CR LF
     esmtp-parameters ::= esmtp-parameter *(SP esmtp-parameter)
     esmtp-parameter  ::= esmtp-keyword ["=" esmtp-value]
     esmtp-keyword    ::= (ALPHA / DIGIT) *(ALPHA / DIGIT / "-")

                          ; syntax and values depend on esmtp-keyword
     esmtp-value      ::= 1*&lt;any CHAR excluding "=", SP, and all
                             control characters (US ASCII 0-31
                             inclusive)&gt;




<span class="grey">Klensin, et al              Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


                          ; The following commands are extended to
                          ; accept extended parameters.
     inner-esmtp-cmd  ::= ("MAIL FROM:" reverse-path)   /
                          ("RCPT TO:" forward-path)

   All esmtp-keyword values must be registered as part of the IANA
   registration process described above. This definition only provides
   the framework for future extension; no extended MAIL FROM or RCPT TO
   parameters are defined by this RFC.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Error%20responses"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Error responses</span>

   If the server SMTP does not recognize or cannot implement one or more
   of the parameters associated with a particular MAIL FROM or RCPT TO
   command, it will return code 555.

   If for some reason the server is temporarily unable to accomodate one
   or more of the parameters associated with a MAIL FROM or RCPT TO
   command, and if the definition of the specific parameter does not
   mandate the use of another code, it should return code 455.

   Errors specific to particular parameters and their values will be
   specified in the parameter's defining RFC.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Received%3A%20Header%20Field%20Annotation"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Received: Header Field Annotation</span>

   SMTP servers are required to add an appropriate Received: field to
   the headers of all messages they receive. A "with ESMTP" clause
   should be added to this field when any SMTP service extensions are
   used. "ESMTP" is hereby added to the list of standard protocol names
   registered with IANA.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Usage%20Examples"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Usage Examples</span>

 (1)   An interaction of the form:

       S: &lt;wait for connection on TCP port 25&gt;
       C: &lt;open connection to server&gt;
       S: 220 dbc.mtview.ca.us SMTP service ready
       C: EHLO ymir.claremont.edu
       S: 250 dbc.mtview.ca.us says hello
        ...

       indicates that the server SMTP implements only those
       SMTP commands which are defined as mandatory in [<a href="#ref-5" title='"Requirements for Internet Hosts - Application and Support"'>5</a>].






<span class="grey">Klensin, et al              Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


 (2)   In contrast, an interaction of the form:

       S: &lt;wait for connection on TCP port 25&gt;
       C: &lt;open connection to server&gt;
       S: 220 dbc.mtview.ca.us SMTP service ready
       C: EHLO ymir.claremont.edu
       S: 250-dbc.mtview.ca.us says hello
       S: 250-EXPN
       S: 250-HELP
       S: 250-8BITMIME
       S: 250-XONE
       S: 250 XVRB
        ...

       indicates that the server SMTP also implements the SMTP
       EXPN and HELP commands, one standard service extension
       (8BITMIME), and two nonstandard and unregistered
       service extensions (XONE and XVRB).

 (3)   Finally, a server that does not support SMTP service
       extensions would act as follows:

       S: &lt;wait for connection on TCP port 25&gt;
       C: &lt;open connection to server&gt;
       S: 220 dbc.mtview.ca.us SMTP service ready
       C: EHLO ymir.claremont.edu
       S: 500 Command not recognized: EHLO
        ...

       The 500 response indicates that the server SMTP does
       not implement the extensions specified here.  The
       client would normally send a HELO command and proceed
       as specified in <a href="rfc821.html">RFC 821</a>.   See <a href="#section-4.7">section 4.7</a> for
       additional discussion.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   This RFC does not discuss security issues and is not believed to
   raise any security issues not already endemic in electronic mail and
   present in fully conforming implementations of <a href="rfc821.html">RFC-821</a>.  It does
   provide an announcement of server mail capabilities via the response
   to the EHLO verb. However, all information provided by announcement
   of any of the initial set of service extensions defined by this RFC
   can be readily deduced by selective probing of the verbs required to
   transport and deliver mail. The security implications of service
   extensions described in other RFCs should be dealt with in those
   RFCs.




<span class="grey">Klensin, et al              Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Acknowledgements"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Acknowledgements</span>

   This document represents a synthesis of the ideas of many people and
   reactions to the ideas and proposals of others.  Randall Atkinson,
   Craig Everhart, Risto Kankkunen, and Greg Vaudreuil contributed ideas
   and text sufficient to be considered co-authors.  Other important
   suggestions, text, or encouragement came from Harald Alvestrand, Jim
   Conklin, Mark Crispin, Frank da Cruz, 'Olafur Gudmundsson, Per
   Hedeland, Christian Huitma, Neil Katin, Eliot Lear, Harold A.
   Miller, Keith Moore, John Myers, Dan Oscarsson, Julian Onions, Rayan
   Zachariassen, and the contributions of the entire IETF SMTP Working
   Group. Of course, none of the individuals are necessarily responsible
   for the combination of ideas represented here. Indeed, in some cases,
   the response to a particular criticism was to accept the problem
   identification but to include an entirely different solution from the
   one originally proposed.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20References"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  References</span>

   [<a id="ref-1" name="ref-1">1</a>] Postel, J., "Simple Mail Transfer Protocol", STD 10, <a href="rfc821.html">RFC 821</a>,
       USC/Information Sciences Institute, August 1982.

   [<a id="ref-2" name="ref-2">2</a>] Crocker, D., "Standard for the Format of ARPA Internet Text
       Messages", STD 11, <a href="rfc822.html">RFC 822</a>, UDEL, August 1982.

   [<a id="ref-3" name="ref-3">3</a>] Borenstein, N., and N. Freed, "Multipurpose Internet Mail
       Extensions", <a href="rfc1521.html">RFC 1521</a>, Bellcore, Innosoft, September 1993.

   [<a id="ref-4" name="ref-4">4</a>] Moore, K., "Representation of Non-ASCII Text in Internet Message
       Headers", <a href="rfc1522.html">RFC 1522</a>, University of Tennessee, September 1993.

   [<a id="ref-5" name="ref-5">5</a>] Braden, R., "Requirements for Internet Hosts - Application and
       Support", STD 3, <a href="rfc1123.html">RFC 1123</a>, USC/Information Sciences Institute,
       October 1989.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Chair%2C%20Editor%2C%20and%20Author%20Addresses"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Chair, Editor, and Author Addresses</span>

   John Klensin, WG Chair
   MCI
   2100 Reston Parkway
   Reston, VA 22091

   Phone: +1 703 715-7361
   Fax: +1 703 715-7436
   EMail: klensin@mci.net






<span class="grey">Klensin, et al              Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc1869.html">RFC 1869</a>                SMTP Service Extensions            November 1995</span>


   Ned Freed, Editor
   Innosoft International, Inc.
   1050 East Garvey Avenue South
   West Covina, CA 91790
   USA

   Phone: +1 818 919 3600
   Fax: +1 818 919 3614
   EMail: ned@innosoft.com


   Marshall T. Rose
   Dover Beach Consulting, Inc.
   420 Whisman Court
   Moutain View, CA  94043-2186
   USA

   Phone: +1 415 968 1052
   Fax: +1 415 968 2510
   EMail: mrose@dbc.mtview.ca.us


   Einar A. Stefferud
   Network Management Associates, Inc.
   17301 Drey Lane
   Huntington Beach, CA, 92647-5615
   USA

   Phone: +1 714 842 3711
   Fax: +1 714 848 2091
   EMail: stef@nma.com


   Dave Crocker
   Brandenburg Consulting
   675 Spruce Dr.
   Sunnyvale, CA 94086 USA
   USA

   Phone: +1 408 246 8253
   Fax: +1 408 249 6205
   EMail: dcrocker@mordor.stanford.edu









Klensin, et al              Standards Track                    [Page 11]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc1869 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:56 GMT --></html>