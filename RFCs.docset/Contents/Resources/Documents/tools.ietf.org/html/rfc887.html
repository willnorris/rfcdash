<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc887 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 07 Jun 2014 20:18:57 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.107" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:887" name="DC.Identifier"/>
<meta content="This RFC specifies a draft standard for the ARPA Internet community.\nIt describes a resource location protocol for use in the ARPA\nInternet. It is most useful on networks employing technologies which\nsupport some method of broadcast addressing, however it may also be\nused on other types of networks. For maximum benefit, all hosts which\nprovide significant resources or services to other hosts on the\nInternet should implement this protocol. Hosts failing to implement\nthe Resource Location Protocol risk being ignored by other hosts which\nare attempting to locate resources on the Internet." name="DC.Description.Abstract"/>
<meta content="M. Accetta" name="DC.Creator"/>
<meta content="December, 1983" name="DC.Date.Issued"/>
<meta content="Resource Location Protocol" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 887 - Resource Location Protocol</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgyellow" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc887.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc887" title="PDF version of this document">pdf</a>]                                                        </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                            EXPERIMENTAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                         M. Accetta
Request for Comments: 887                     Carnegie-Mellon University
                                                           December 1983

                       <span class="h1">RESOURCE LOCATION PROTOCOL</span>


This note describes a resource location protocol for use in the ARPA
Internet.  It is most useful on networks employing technologies which
support some method of broadcast addressing, however it may also be used
on other types of networks.  For maximum benefit, all hosts which
provide significant resources or services to other hosts on the Internet
should implement this protocol.  Hosts failing to implement the Resource
Location Protocol risk being ignored by other hosts which are attempting
to locate resources on the Internet.  This RFC specifies a draft
standard for the ARPA Internet community.

The Resource Location Protocol (RLP) utilizes the User Datagram Protocol
(UDP) [<a href="#ref-1" title="August">1</a>] which in turn calls on the Internet Protocol (IP) [<a href="#ref-3" title="September">3</a>] to
deliver its datagrams.  See <a href="#appendix-A">Appendix A</a> and [<a href="#ref-6" title="J.">6</a>] for the appropriate port
and protocol number assignments.

Unless otherwise indicated, all numeric quantities in this document are
decimal numbers.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>. Introduction</span>

From time to time, Internet hosts are faced with the problem of
determining where on the Internet some particular network service or
resource is being provided.  For example, this situation will arise when
a host needs to send a packet destined for some external network to a
gateway on its directly connected network and does not know of any
gateways.  In another case, a host may need to translate a domain name
to an Internet address and not know of any name servers which it can ask
to perform the translation.  In these situations a host may use the
Resource Location Protocol to determine this information.

In almost all cases the resource location problem is simply a matter of
finding the IP address of some one (usually any) host, either on the
directly connected network or elsewhere on the Internet, which
understands a given protocol.  Most frequently, the querying host itself
understands the protocol in question.  Typically (as in the case of
locating a name server), the querying host subsequently intends to
employ that protocol to communicate with the located host once its
address is known (e.g. to request name to address translations).  Less
frequently, the querying host itself does not necessarily understand the
protocol in question.  Instead (as in the case of locating a gateway),
it is simply attempting to find some other host which does (e.g. to
determine an appropriate place to forward a packet which cannot be
delivered locally).






<span class="grey">Accetta                                                         [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20Resource%20Naming"></a><a class="selflink" href="#section-2" name="section-2">2</a>. Resource Naming</span>

Although the resource location problem can, in most cases, be reduced to
the problem of finding a host which implements a given Internet based
protocol, locating only a particular lowest level Internet protocol
(i.e. one assigned a protocol number for transport using IP) is not
completely sufficient.  Many significant network services and resources
are provided through higher level protocols which merely utilize the
various lower level protocols for their own transport purposes (e.g. the
FTP protocol [<a href="#ref-2" title="June">2</a>] employs the TCP protocol [<a href="#ref-4" title="September">4</a>] for its lower level
transport).  Conceptually, this protocol nesting may even be carried out
to arbitrary levels.

Consequently, the Resource Location Protocol names a resource by the
protocol number assigned to its lowest level Internet transport protocol
and by a variable length protocol/resource specific identifier.  For
example, the UDP based Echo Protocol can be named by its assigned
protocol number (17) and its assigned 16-bit "well-known" port number
(7).  Alternatively, the Internet Control Message Protocol [<a href="#ref-5" title="September">5</a>] (lacking
any higher level client protocols) would be named simply by its assigned
protocol number (1) and an empty protocol specific identifier.  On the
other hand, some as yet undefined resource protocol (provided via say
TCP), might be named by the assigned protocol number (6), its 16-bit
"well-known" TCP port number, and then some additional fixed or variable
length identifier specific to that TCP port.

In general, the components of the protocol/resource specific identifier
are defined to be the "natural" quantities used to successively
de-multiplex the protocol at each next highest protocol level.  See
<a href="#section-5">section 5</a> for some sample assignments.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20Protocol%20Summary"></a><a class="selflink" href="#section-3" name="section-3">3</a>. Protocol Summary</span>

The Resource Location Protocol is a simple request/reply procedure.  The
querying host constructs a list of resources which it would like to
locate and sends a request message on the network.  A request message
may be sent either to a particular IP address and host or, on networks
which provide broadcast address capability, to the IP address which
refers to all hosts on that network (see [<a href="#ref-7" title="R.">7</a>]).  For example, a host
attempting to locate a domain name server might construct a request
containing the resource name [17, 53] (referring to the Domain Name
Server protocol provided at "well-known" UDP port 53) and then broadcast
that request on its local network.

Each receiving host examines the list of resources named in the request
packet, determines which of the resources it provides, and returns a
reply message to the querying host in confirmation.  The receiving host
determines whether or not it provides a resource by successive
decomposition of the resource name until either the name is exhausted or
it encounters a component which is not supported.  In the previous


<span class="grey">Accetta                                                         [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

example, each host on the network receiving the broadcast request would
examine the resource name by first consulting its tables to determine if
it provided UDP service.  If this was successful, it would then examine
the UDP port component of the name and consult its UDP table to
determine if it provided service on UDP port 53.  At this point the name
would be exhausted and if both checks were successful the host would
return a reply message to the querying host indicating support for that
resource.



<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20Request%20Messages"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>. Request Messages</span>

RLP provides two basic types of request messages which may be
transmitted by a querying host.  The first type requires any host
receiving the request message to return a reply message only if it
provides at least one of the resources named in the request list.  The
second type requires any host receiving the message to always return a
reply message even if it provides none of the resources named in the
request list.

These two types of request messages are:

&lt;Who-Provides?&gt;
    This type requires any host receiving the message to return an
    appropriate reply message which names all of the resources from the
    request list which it provides.  If the receiving host provides none
    of the named resources, no reply may be returned.

&lt;Do-You-Provide?&gt;
    This type is identical to the &lt;Who-Provides?&gt; message but with the
    extra requirement that a reply must always be returned.  When a
    receiving host provides none of the requested resources, it simply
    returns an empty reply list.  This empty reply list allows the
    querying host to immediately detect that the confirming host
    provides none of the named resources without having to timeout after
    repeatedly retransmitting the request.

The &lt;Who-Provides?&gt; request message is most typically used when
broadcasting requests to an entire IP network.  The &lt;Do-You-Provide?&gt;
request message, on the other hand, is most typically used when
confirming that a particular host does or does not provide one or more
specific resources.  It may not be broadcast (since such a request would
flood the querying host with reply messages from all hosts on the
network).

In addition to the two basic types of request messages, an additional
two variant types of request messages may also be transmitted by a
querying host.  These message types provide a "third-party" resource
location capability.  They differ from the basic message types by


<span class="grey">Accetta                                                         [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

providing space for an additional qualifier with each listed resource to
identify "third-party" hosts which the confirming host believes may
provide the resource.  As before, the first type requires any host
receiving the request message to return a reply message only if it knows
of some host which provides at least one of the resources named in the
request list.  The second type requires any host receiving the message
to always return a reply message even if it knows of no hosts which
provide any of the resources named in the request list.

These two remaining types of request messages are:

&lt;Who-Anywhere-Provides?&gt;
    This message parallels the &lt;Who-Provides?&gt; message with the
    "third-party" variant described above.  The confirming host is
    required to return at least its own IP address (if it provides the
    named resource) as well as the IP addresses of any other hosts it
    believes may provide the named resource.  The confirming host
    though, may never return an IP address for a resource which is the
    same as an IP address listed with the resource name in the request
    message.  In this case it must treat the resource as if it was
    unsupported at that IP address and omit it from any reply list.

&lt;Does-Anyone-Provide?&gt;
    This message parallels the &lt;Do-You-Provide?&gt; message again with the
    "third-party" variant described above.  As before, the confirming
    host is required to return its own IP address as well as the IP
    addresses of any other hosts it believes may provide the named
    resource and is prohibited from returning the same IP address in the
    reply resource specifier as was listed in the request resource
    specifier.  As in the &lt;Do-You-Provide?&gt; case and for the same
    reason, this message also may not be broadcast.

These variant request messages permit "smart" hosts to supply resource
location information for networks without broadcast capability (provided
that all hosts on the network always "know" the address of one or more
such "smart" hosts).  They also permit resource location information for
services which are not provided anywhere on a directly connected network
to be provided by "smart" gateways which have perhaps queried other
networks to which they are attached or have somehow otherwise acquired
the information.

The restriction against returning the same IP address in a reply as was
specified in the request provides a primitive mechanism for excluding
certain known addresses from consideration in a reply (see <a href="#section-5">section 5</a>,
example 3).  It may also be used to override the receiving host's
preference for its own IP address in "third-party" replies when this is
required.





<span class="grey">Accetta                                                         [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20Reply%20Messages"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>. Reply Messages</span>

Each of the types of request messages has an associated type of reply
message.  The basic reply message type is returned in response to both
&lt;Who-Provides?&gt; and &lt;Do-You-Provide?&gt; request messages and supplies
information about the resources provided by the confirming host.  The
other reply message type is the "third-party" variant returned in
response to both &lt;Who-Anywhere-Provides?&gt; and &lt;Does-Anyone-Provide?&gt;
request messages and supplies information about resources provided by
hosts known to the confirming host.

These two types of reply messages are:

&lt;I-Provide&gt;
    This reply message contains a list of exactly those resources from
    the request list which the confirming host provides.  These
    resources must occur in the reply list in precisely the same order
    as they were listed in the request message.

&lt;They-Provide&gt;
    This reply message similarly contains a list of exactly those
    resources from the request list (appropriately qualified with IP
    addresses) which the confirming host provides or believes another
    host provides.  These resources again must occur in the reply list
    in precisely the same order as they were listed in the request
    message.

Neither type of reply message may be broadcast.

<span class="h1"><a class="selflink" href="#appendix-A" name="appendix-A">A</a> querying host which receives a &lt;They-Provide&gt; reply message from a</span>
confirming host on behalf of a third host is not required to
unquestioningly rely on the indirectly provided information.  This
information should usually be regarded simply as a hint.  In most cases,
the querying host should transmit a specific &lt;Do-You-Provide?&gt; request
to the third host and confirm that the resource is indeed provided at
that IP address before proceeding.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20Message%20Formats"></a><a class="selflink" href="#section-4" name="section-4">4</a>. Message Formats</span>

RLP messages are encapsulated in UDP packets to take advantage of the
multiplexing capability provided by the UDP source and destination ports
and the extra reliability provided by the UDP checksum.  Request
messages are sent from a convenient source port on the querying host to
the assigned RLP destination port of a receiving host.  Reply messages
are returned from the assigned RLP source port of the confirming host to
the appropriate destination port of the querying host as determined by
the source port in the request message.

The format of the various RLP messages is described in the following
diagrams.  All numeric quantities which occupy more than one octet are


<span class="grey">Accetta                                                         [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

stored in the messages from the high order octet to the low order octet
as per the usual Internet protocol standard.  All packet diagrams
indicate the octets of the message from left to right and then top to
bottom as they occur in the data portion of the encapsulating UDP
packet.

Each RLP packet has the general format

                 +--------+--------+--------+--------+
                 |        |        |                 |
                 |  Type  | Flags  |   Message-ID    |
                 |        |        |                 |
                 +--------+--------+--------+--------+
                 |                                   -
                 |           Resource-List           -
                 |                                   -
                 +--------+--------+--------+---\\---+
                 -                                   +
                 -           Resource-List           |
                 -                                   |
                 +--------+--------+--------+---\\---+

where

&lt;Type&gt;
    is a single octet which identifies the message type.  The currently
    defined types are:

    0     &lt;Who-Provides?&gt;
    1     &lt;Do-You-Provide?&gt;
    2     &lt;Who-Anywhere-Provides?&gt;
    3     &lt;Does-Anyone-Provide?&gt;
    4     &lt;I-Provide&gt;
    5     &lt;They-Provide&gt;
    6-255 Reserved.

















<span class="grey">Accetta                                                         [Page 6]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

&lt;Flags&gt;
    is a single octet specifying possible modifications to the standard
    interpretation of &lt;Type&gt;.  Bits in this field are numbered from left
    to right (from most significant to least significant) beginning with
    bit 1.  The currently defined flag bits are:

    Bit 1    &lt;Local-Only&gt;.  Requires that any reply message generated in
             response to a request message with this flag bit set may
             only name IP addresses which are on the same IP network as
             the sender of the request message.  This flag also requires
             that multi-homed hosts answering broadcast &lt;Who-Provides?&gt;
             requests use the appropriate local network IP source
             address in the returned reply.  This bit must be zero in
             reply messages.
    Bits 2-8 Reserved.  Must be zero.

&lt;Message-ID&gt;
    is a two octet (16-bit) value which identifies the request message.
    It is used simply to aid in matching requests with replies.  The
    sending host should initialize this field to some convenient value
    when constructing a request message.  The receiving host must return
    this same value in the &lt;Message-ID&gt; field of any reply message
    generated in response to that request.

&lt;Resource-List&gt;
    is the list of resources being queried or for which location
    information is being supplied.  This list is a sequence of octets
    beginning at the octet following the &lt;Message-ID&gt; and extending
    through the end of the UDP packet.  The format of this field is
    explained more fully in the following section.  The size of this
    list is implicitly specified by the length of the encapsulating UDP
    datagram.



<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20Resource%20Lists"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>. Resource Lists</span>

<span class="h1"><a class="selflink" href="#appendix-A" name="appendix-A">A</a> &lt;Resource-List&gt; consists of zero or more resource specifiers.  Each</span>
resource specifier is simply a sequence of octets.  All resource
specifiers have a common resource name initial format

                 +--------+--------+--------+---\\---+
                 |        |        |                 |
                 |Protocol|IDLength|   Resource-ID   |
                 |        |        |                 |
                 +--------+--------+--------+---\\---+

where




<span class="grey">Accetta                                                         [Page 7]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

&lt;Protocol&gt;
    is the protocol number assigned to the lowest level Internet
    protocol utilized for accessing the resource.

&lt;IDLength&gt;
    is the length of the resource identifier associated with this
    &lt;Protocol&gt;.  This length may be a fixed or variable value depending
    on the particular resource.  It is included so that specifiers which
    refer to resources which a host may not provide can be skipped over
    without needing to know the specific structure of the particular
    resource identifier.  If the &lt;Protocol&gt; has no associated natural
    identifier, this length is 0.

&lt;Resource-ID&gt;
    is the qualifying identifier used to further refine the resource
    being queried.  If the &lt;IDLength&gt; field was 0, then this field is
    empty and occupies no space in the resource specifier.

In addition, resource specifiers in all &lt;Who-Anywhere-Provides?&gt;,
&lt;Does-Anyone-Provide?&gt; and &lt;They-Provide&gt; messages also contain an
additional qualifier following the &lt;Protocol-ID&gt;.  This qualifier has
the format

             +--------+--------+--------+--------+---//---+
             |        |                                   |
             |IPLength|          IP-Address-List          |
             |        |                                   |
             +--------+--------+--------+--------+---//---+

where






















<span class="grey">Accetta                                                         [Page 8]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

&lt;IPLength&gt;
    is the number of IP addresses containing in the following
    &lt;IP-Address-List&gt; (the &lt;IP-Address-List&gt; field thus occupies the
    last 4*&lt;IPLength&gt; octets in its resource specifier).  In request
    messages, this is the maximum number of qualifying addresses which
    may be included in the corresponding reply resource specifier.
    Although not particularly useful, it may be 0 and in that case
    provides no space for qualifying the resource name with IP addresses
    in the returned specifier.  In reply messages, this is the number of
    qualifying addresses known to provide the resource.  It may not
    exceed the number specified in the corresponding request specifier.
    This field may not be 0 in a reply message unless it was supplied as
    0 in the request message and the confirming host would have returned
    one or more IP addresses had any space been provided.

&lt;IP-Address-List&gt;
    is a list of four-octet IP addresses used to qualify the resource
    specifier with respect to those particular addresses.  In reply
    messages, these are the IP addresses of the confirming host (when
    appropriate) and the addresses of any other hosts known to provide
    that resource (subject to the list length limitations).  In request
    messages, these are the IP addresses of hosts for which resource
    information may not be returned.  In such messages, these addresses
    should normally be initialized to some "harmless" value (such as the
    address of the querying host) unless it is intended to specifically
    exclude the supplied addresses from consideration in any reply
    messages.

The receiving host determines if it provides any of the resources named
in the request list by successively decomposing each resource name.  The
first level of decomposition is the Internet protocol number which can
presumably be looked up in a table to determine if that protocol is
supported on the host.  Subsequent decompositions are based on previous
components until one of three events occur:

   1. the current component identifies some aspect of the previous
      components which the host does not support,

   2. the resource name from the request list is exhausted, or

   3. the resource name from the request list is not exhausted but
      the host does not expect any further components in the name
      given the previous components

In case 1, the receiving host has determined that it does not provide
the named resource.  The resource specifier may not be included in any
reply message returned.

In case 2, the receiving host has determined that it does indeed provide
the named resource (note: this may occur even if the receiving host


<span class="grey">Accetta                                                         [Page 9]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

would have expected the resource name to contain more components than
were actually present).  The resource specifier must be included (modulo
IP address prohibitions) in any reply message returned.

In case 3, the receiving host has determined that it does not completely
provide the named resource since name components remain which it does
not understand (this might occur with specializations of or extensions
to a known protocol which are not universally recognized).  The resource
specifier may not be included in any reply message returned.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20Sample%20Usage"></a><a class="selflink" href="#section-5" name="section-5">5</a>. Sample Usage</span>

The following scenarios illustrate some typical uses of RLP.  In all
cases the indicated messages are encapsulated in a UDP datagram with the
appropriate source and destination port numbers, message length, and
checksum.  This datagram is further encapsulated in an IP datagram with
the appropriate source address of the sending host and destination
address (either broadcast or individual) for the receiving host.

All numeric protocol examples are as specified in the appropriate
protocol description documents listed in the references.

 1. Suppose a freshly rebooted host H wishes to find some gateway
    on its directly connected network to which it can send its
    first external packet.  It then broadcasts the request

        &lt;Who-Provides?&gt; &lt;Flags&gt;=&lt;Local-Only&gt; &lt;Message-ID&gt;=12345
                    &lt;Resource-List&gt;={[GGP], [EGP]}

    encoded as the 8 octet message

           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  0  | 128 |   12345   |  3  |  0  |  8  |  0  |
           +-----+-----+-----+-----+-----+-----+-----+-----+

    on its local network.

     - Gateway G1 (which understands EGP) receives the request and
       returns the reply

               &lt;I-Provide&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12345
                         &lt;Resource-List&gt;={[EGP]}

       encoded as the 6 octet message

                  +-----+-----+-----+-----+-----+-----+
                  |  4  |  0  |   12345   |  8  |  0  |
                  +-----+-----+-----+-----+-----+-----+

       to host H which then remembers that gateway G1 may be used


<span class="grey">Accetta                                                        [Page 10]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

       to route traffic to the rest of the Internet.

     -  At the same time, gateway G2 (which understands both GGP
       and EGP) might also receive the request and return the reply

               &lt;I-Provide&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12345
                      &lt;Resource-List&gt;={[GGP], [EGP]}

       encoded as the 8 octet message

            +-----+-----+-----+-----+-----+-----+-----+-----+
            |  4  |  0  |   12345   |  3  |  0  |  8  |  0  |
            +-----+-----+-----+-----+-----+-----+-----+-----+

       to host H which might then also add gateway G2 to its list
       if it chooses.

 2. Assume instead that host H is a stand-alone system which has
    just encountered some fatal software error and wishes to locate
    a crash dump server to save its state before reloading.
    Suppose that the crash dump protocol on the host's local
    network is implemented using the Trivial File Transfer Protocol
    (TFTP) [<a href="#ref-8" title="June">8</a>].  Furthermore, suppose that the special file name
    "CRASH-DUMP" is used to indicate crash dump processing (e.g.
    the server might locally generate a unique file name to hold
    each dump that it receives from a host).  Then host H might
    broadcast the request

            &lt;Who-Provides?&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=54321
           &lt;Resource-List&gt;={[UDP, TFTP, WRQ, "CRASH-DUMP"]}

    encoded as the 21 octet message

           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  0  |  0  |   54321   |  17 |  15 |     69    |
           +-----+-----+-----+-----+-----+-----+-----+-----+
           |     2     | 'C'   'R'   'A'   'S'   'H'   '-' |
           +-----+-----+-----+-----+-----+-----+-----+-----+
           | 'D'   'U'   'M'   'P'    0  |
           +-----+-----+-----+-----+-----+

    to its local network (note that the file name component is
    explicitly terminated by a null so as not to exclude future
    further specialization of the crash dump protocol).

     - Host C (which supports this specialization of the TFTP
       protocol) receives the request and returns the reply

               &lt;I-Provide&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=54321
             &lt;Resource-List&gt;={[UDP, TFTP, WRQ, "CRASH-DUMP"]}


<span class="grey">Accetta                                                        [Page 11]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

       encoded as the 21 octet message


            +-----+-----+-----+-----+-----+-----+-----+-----+
            |  4  |  0  |   54321   |  17 |  15 |     69    |
            +-----+-----+-----+-----+-----+-----+-----+-----+
            |     2     | 'C'   'R'   'A'   'S'   'H'   '-' |
            +-----+-----+-----+-----+-----+-----+-----+-----+
            | 'D'   'U'   'M'   'P'    0  |
            +-----+-----+-----+-----+-----+

       to host H which may then proceed to send its crash dump to
       host C and reload.

     - Host D (which provides TFTP service but not the crash dump
       specialization), however, might receive the request and
       determine that it provides no support for the resource
       (since the resource name contains components following the
       UDP port number which it does not understand).  It would
       therefore return no reply to host H.

 3. Finally, suppose host M wishes to locate some domain name
    translation server (either UDP or TCP based) anywhere on the
    Internet.  Furthermore, suppose that host M is on a IP network
    which does not provide broadcast address capabilities and that
    host R is a "known" resource location server for that network.

    First, since host M prefers to find a domain name server on its
    own locally connected network if possible, it sends the request

              &lt;Does-Anyone-Provide?&gt; &lt;Flags&gt;=&lt;Local-Only&gt;
                  &lt;Message-ID&gt;=12321 &lt;Resource-List&gt;=
                {[TCP, &lt;DOMAIN-NAME-SERVER-PORT&gt;] {M},
                 [UDP, &lt;DOMAIN-NAME-SERVER-PORT&gt;] {M}}

    encoded as the 22 octet message

        +-----+-----+-----+-----+
        |  3  | 128 |   12321   |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+
        |  6  |  2  |     53    |  1  |           M           |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+
        |  17 |  2  |     53    |  1  |           M           |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+

    to host R.

    Host R receives the request and consults its tables for any
    hosts known to support either variety of domain name service.
    It finds entries indicating that both hosts S and T provide UDP


<span class="grey">Accetta                                                        [Page 12]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

    based domain name service but that neither host is on the same
    IP network as host H. It must then send the negative
    confirmation reply

            &lt;They-Provide&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12321
                          &lt;Resource-List&gt;={}

    encoded as the 4 octet message

                       +-----+-----+-----+-----+
                       |  5  |  0  |   12321   |
                       +-----+-----+-----+-----+

    back to host M.

    Host M, receiving this reply, might now abandon any hope of
    finding a server on its own network, reformat its request to
    permit any host address, and resend

        &lt;Does-Anyone-Provide?&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12322
                           &lt;Resource-List&gt;=
                {[TCP, &lt;DOMAIN-NAME-SERVER-PORT&gt;] {M},
                 [UDP, &lt;DOMAIN-NAME-SERVER-PORT&gt;] {M}}

    encoded as the 22 octet message

        +-----+-----+-----+-----+
        |  3  |  0  |   12322   |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+
        |  6  |  2  |     53    |  1  |           M           |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+
        |  17 |  2  |     53    |  1  |           M           |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+

    again to host R.

    Host R receives this new request and is no longer constrained
    to return only local addresses.  However, since only space for
    a single qualifying IP address was provided in each request
    resource specifier, it may not immediately return both
    addresses.  Instead, it is forced to return only the first
    address and replies

            &lt;They-Provide&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12322
        &lt;Resource-List&gt;={[UDP, &lt;DOMAIN-NAME-SERVER-PORT&gt;] {S}}

    encoded as the 13 octet message





<span class="grey">Accetta                                                        [Page 13]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  5  |  0  |   12322   |  17 |  2  |     53    |
           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  1  |           S           |
           +-----+-----+-----+-----+-----+

    to Host M.

    Host M receives the reply and (being the suspicious sort)
    decides to confirm it with host S. It then sends

           &lt;Do-You-Provide?&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12323
          &lt;Resource-List&gt;={[UDP, &lt;DOMAIN-NAME-SERVER-PORT&gt;]}

    encoded as the 8 octet message

           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  1  |  0  |   12323   |  17 |  2  |     53    |
           +-----+-----+-----+-----+-----+-----+-----+-----+

    to host S and receives back from host S the reply

              &lt;I-Provide&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12323
                          &lt;Resource-List&gt;={}

    encoded as the 4 octet message

                       +-----+-----+-----+-----+
                       |  4  |  0  |   12323   |
                       +-----+-----+-----+-----+

    denying any support for UDP based domain name service.

    In desperation host M again queries host R, this time excluding
    host S from consideration, and sends the request

        &lt;Does-Anyone-Provide?&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12324
                           &lt;Resource-List&gt;=
                {[TCP, &lt;DOMAIN-NAME-SERVER-PORT&gt;] {S},
                 [UDP, &lt;DOMAIN-NAME-SERVER-PORT&gt;] {S}}

    encoded as the 22 octet message

        +-----+-----+-----+-----+
        |  3  |  0  |   12324   |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+
        |  6  |  2  |     53    |  1  |           S           |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+
        |  17 |  2  |     53    |  1  |           S           |
        +-----+-----+-----+-----+-----+-----+-----+-----+-----+


<span class="grey">Accetta                                                        [Page 14]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

    and this time receives the reply


            &lt;They-Provide&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12324
        &lt;Resource-List&gt;={[UDP, &lt;DOMAIN-NAME-SERVER-PORT&gt;] {T}}

    encoded as the 13 octet message

           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  5  |  0  |   12324   | 17  |  2  |     53    |
           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  1  |           T           |
           +-----+-----+-----+-----+-----+

    from host R which of course host M again insists on confirming
    by sending the request

           &lt;Do-You-Provide?&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12325
                           &lt;Resource-List&gt;=
                  {[UDP, &lt;DOMAIN-NAME-SERVER-PORT&gt;]}

    encoded as the 8 octet message

           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  1  |  0  |   12325   |  17 |  2  |     53    |
           +-----+-----+-----+-----+-----+-----+-----+-----+

    to host T and finally receives confirmation from host T with
    the reply

              &lt;I-Provide&gt; &lt;Flags&gt;=none &lt;Message-ID&gt;=12325
          &lt;Resource-List&gt;={[UDP, &lt;DOMAIN-NAME-SERVER-PORT&gt;]}

    encoded as the 8 octet message

           +-----+-----+-----+-----+-----+-----+-----+-----+
           |  4  |  0  |   12325   |  17 |  2  |     53    |
           +-----+-----+-----+-----+-----+-----+-----+-----+

    that it indeed provides domain name translation service at UDP
    port 53.

<span class="h1"><a class="selflink" href="#appendix-A" name="appendix-A">A</a>. Assigned Numbers</span>

The "well-known" UDP port number for the Resource Location Protocol is
<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/39%20%2847%20octal%29."></a><a class="selflink" href="#section-39" name="section-39">39</a> (47 octal).</span>






<span class="grey">Accetta                                                        [Page 15]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc887.html">RFC 887</a>                                                    December 1983</span>
Resource Location Protocol

                               REFERENCES

[<a id="ref-1" name="ref-1">1</a>]   Postel, J.
      User Datagram Protocol.
      <a href="rfc768.html">RFC 768</a>, USC/Information Sciences Institute, August, 1980.

[<a id="ref-2" name="ref-2">2</a>]   Postel, J.
      File Transfer Protocol.
      <a href="rfc765.html">RFC 765</a>, USC/Information Sciences Institute, June, 1980.

[<a id="ref-3" name="ref-3">3</a>]   Postel, J.
      Internet Protocol - DARPA Internet Program Protocol Specification.
      <a href="rfc791.html">RFC 791</a>, USC/Information Sciences Institute, September, 1981.

[<a id="ref-4" name="ref-4">4</a>]   Postel, J.
      Transmission Control Protocol- DARPA Internet Program Protocol
         Specification.
      <a href="rfc793.html">RFC 793</a>, USC/Information Sciences Institute, September, 1981.

[<a id="ref-5" name="ref-5">5</a>]   Postel, J.
      Internet Control Message Protocol - DARPA Internet Program
         Protocol Specification.
      <a href="rfc792.html">RFC 792</a>, USC/Information Sciences Institute, September, 1981.

[<a id="ref-6" name="ref-6">6</a>]   Reynolds, J., and J. Postel.
      Assigned Numbers.
      <a href="rfc870.html">RFC 870</a>, USC/Information Sciences Institute, October, 1983.

[<a id="ref-7" name="ref-7">7</a>]   Gurwitz, R., and R. Hinden.
      IP - Local Area Network Addressing Issues.
      IEN 212, Bolt Beranek and Newman, September, 1982.

[<a id="ref-8" name="ref-8">8</a>]   Sollins, K.
      The TFTP Protocol (revision 2).
      <a href="rfc783.html">RFC 783</a>, MIT/Laboratory for Computer Science, June, 1981.

















Accetta                                                        [Page 16]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>



</body><!-- Mirrored from tools.ietf.org/html/rfc887 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 07 Jun 2014 20:18:57 GMT --></html>