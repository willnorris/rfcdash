<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6795 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:27 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-camarillo-sipping-policy-package" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:6795" name="DC.Identifier"/>
<meta content="December, 2012" name="DC.Date.Issued"/>
<meta content="Camarillo, Gonzalo" name="DC.Creator"/>
<meta content="Hilt, Volker" name="DC.Creator"/>
<meta content="This specification defines a Session Initiation Protocol (SIP) event
package for session-specific policies. This event package enables user
agents (UAs) to subscribe to session policies for a SIP session and to
receive notifications if these policies change. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="A Session Initiation Protocol (SIP) Event Package for Session-Specific Policies" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6795 - A Session Initiation Protocol (SIP) Event Package for Session-Specific Policies</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6795.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6795" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-sipping-policy-package" title="draft-ietf-sipping-policy-package">draft-ietf-sipp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6795" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6795" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6795" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                           V. Hilt
Request for Comments: 6795                      Bell Labs/Alcatel-Lucent
Category: Standards Track                                   G. Camarillo
ISSN: 2070-1721                                                 Ericsson
                                                           December 2012


         <span class="h1">A Session Initiation Protocol (SIP) Event Package for</span>
                       <span class="h1">Session-Specific Policies</span>

Abstract

   This specification defines a Session Initiation Protocol (SIP) event
   package for session-specific policies.  This event package enables
   user agents (UAs) to subscribe to session policies for a SIP session
   and to receive notifications if these policies change.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6795">http://www.rfc-editor.org/info/rfc6795</a>.

Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.






<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Event Package Formal Definition .................................<a href="#page-3">3</a>
      <a href="#section-3.1">3.1</a>. Event Package Name .........................................<a href="#page-4">4</a>
      <a href="#section-3.2">3.2</a>. Event Package Parameters ...................................<a href="#page-4">4</a>
      <a href="#section-3.3">3.3</a>. SUBSCRIBE Bodies ...........................................<a href="#page-4">4</a>
      <a href="#section-3.4">3.4</a>. Subscription Duration ......................................<a href="#page-5">5</a>
      <a href="#section-3.5">3.5</a>. NOTIFY Bodies ..............................................<a href="#page-5">5</a>
      <a href="#section-3.6">3.6</a>. Subscriber Generation of SUBSCRIBE Requests ................<a href="#page-6">6</a>
      <a href="#section-3.7">3.7</a>. Notifier Processing of SUBSCRIBE Requests ..................<a href="#page-8">8</a>
      <a href="#section-3.8">3.8</a>. Notifier Generation of NOTIFY Requests .....................<a href="#page-9">9</a>
      <a href="#section-3.9">3.9</a>. Subscriber Processing of NOTIFY Requests ..................<a href="#page-10">10</a>
      <a href="#section-3.10">3.10</a>. Handling of Forked Requests ..............................<a href="#page-11">11</a>
      <a href="#section-3.11">3.11</a>. Rate of Notifications ....................................<a href="#page-11">11</a>
      <a href="#section-3.12">3.12</a>. State Agents .............................................<a href="#page-11">11</a>
      <a href="#section-3.13">3.13</a>. Examples .................................................<a href="#page-11">11</a>
   <a href="#section-4">4</a>. Security Considerations ........................................<a href="#page-14">14</a>
   <a href="#section-5">5</a>. IANA Considerations ............................................<a href="#page-16">16</a>
      <a href="#section-5.1">5.1</a>. Event Package Name ........................................<a href="#page-16">16</a>
   <a href="#section-6">6</a>. References .....................................................<a href="#page-16">16</a>
      <a href="#section-6.1">6.1</a>. Normative References ......................................<a href="#page-16">16</a>
      <a href="#section-6.2">6.2</a>. Informative References ....................................<a href="#page-17">17</a>
   <a href="#appendix-A">Appendix A</a>. Acknowledgements ......................................<a href="#page-18">18</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The Framework for Session Initiation Protocol (SIP) [<a href="rfc3261.html" title='"SIP: Session Initiation Protocol"'>RFC3261</a>] Session
   Policies [<a href="rfc6794.html" title='"A Framework for Session Initiation Protocol (SIP) Session Policies"'>RFC6794</a>] defines a protocol framework that enables a proxy
   to define and impact policies on sessions such as the codecs or media
   types to be used.  This framework identifies two types of session
   policies: session-specific and session-independent policies.
   Session-specific policies are policies that are created for one
   particular session, based on the session description of this session.
   They enable a network intermediary to inspect the session description
   that a UA is proposing and to return a policy specifically generated
   for this session description.  For example, an intermediary could
   open pinholes in a firewall/NAT for each media stream in a session
   and return a policy that replaces the internal IP addresses and ports
   in the session description with external ones.  Since session-
   specific policies are tailored to a session, they only apply to the
   session for which they are created.  A UA requests session-specific
   policies on a session-by-session basis at the time a session is
   created and the session description is known.  Session-independent
   policies, on the other hand, are policies that are created
   independently of a session and generally apply to all the SIP
   sessions set up by a user agent.



<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   "A Framework for Session Initiation Protocol (SIP) Session Policies"
   [<a href="rfc6794.html" title='"A Framework for Session Initiation Protocol (SIP) Session Policies"'>RFC6794</a>] defines a mechanism that enables UAs to discover the URIs
   of session-specific policy servers.  This specification defines a SIP
   event package [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>] that enables UAs to subscribe to session-
   specific policies on a policy server.  Subscribing to session-
   specific policies involves the following steps (see the Session
   Policy Framework [<a href="rfc6794.html" title='"A Framework for Session Initiation Protocol (SIP) Session Policies"'>RFC6794</a>]):

   1.  A user agent submits the details of the session it is trying to
       establish to the policy server and asks whether a session using
       these parameters is permissible.  For example, a user agent might
       propose a session that contains the media types audio and video.

   2.  The policy server generates a policy decision for this session
       and returns the decision to the user agent.  Possible policy
       decisions are (1) to deny the session, (2) to propose changes to
       the session parameters with which the session would be
       acceptable, or (3) to accept the session as it was proposed.  An
       example for a policy decision is to disallow the use of video but
       agree to all other aspects of the proposed session.

   3.  The policy server can update the policy decision at a later time.
       A policy decision update can require additional changes to the
       session (e.g., because the available bandwidth has changed) or
       deny a previously accepted session (i.e., disallow the
       continuation of a session).

   The event package for session-specific policies enables a user agent
   to subscribe to the policies for a SIP session following the above
   model.  The subscriber initiates a subscription by submitting the
   details of the session it is trying to establish to the notifier
   (i.e., the policy server) in the body of a SUBSCRIBE request.  The
   notifier uses this information to determine the policy decision for
   this session.  It conveys the initial policy decision to the
   subscriber in a NOTIFY request and all changes to this decision in
   subsequent NOTIFY requests.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Event%20Package%20Formal%20Definition"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Event Package Formal Definition</span>

   This document provides the details for defining a SIP event package
   as required by <a href="rfc6665.html">RFC 6665</a> [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>].




<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Event%20Package%20Name"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Event Package Name</span>

   The name of the event package defined in this specification is
   "session-spec-policy".

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Event%20Package%20Parameters"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Event Package Parameters</span>

   This package defines the following two event package parameters:

   local-only:  The "local-only" parameter is optional and only defined
      for NOTIFY requests.  The "local-only" parameter indicates that
      the remote session description is not required by the notifier.
      It MUST be ignored if received in a SUBSCRIBE request.  The usage
      of the "local-only" parameter is described in Sections <a href="#section-3.6">3.6</a>, <a href="#section-3.8">3.8</a>
      and 3.9.

   insufficient-info:  The "insufficient-info" parameter is optional and
      only defined for NOTIFY requests.  It is used by the notifier to
      indicate that a policy decision could not be made due to
      insufficient information.  The "insufficient-info" parameter MUST
      be ignored if received in a SUBSCRIBE request.  The usage of the
      "insufficient-info" parameter is described in Sections <a href="#section-3.7">3.7</a>, <a href="#section-3.8">3.8</a>
      and 3.9.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20SUBSCRIBE%20Bodies"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  SUBSCRIBE Bodies</span>

   A SUBSCRIBE for this event package MUST contain a body that describes
   a SIP session.  The purpose of this body is to enable the notifier to
   generate the policies in which the subscriber is interested.  In this
   event package, the Request-URI, the event package name, and event
   parameters are not sufficient to determine the resource a
   subscription is for.  However, with the session description in the
   SUBSCRIBE body, the notifier can generate the requested policy
   decision and create policy events for this resource.

   All subscribers and notifiers MUST support the MIME type
   "application/media-policy-dataset+xml" as defined in "A User Agent
   Profile Data Set for Media Policy" [<a href="rfc6796.html" title='"A User Agent Profile Data Set for Media Policy"'>RFC6796</a>].  The "application/
   media-policy-dataset+xml" format is the default format for SUBSCRIBE
   bodies in this event package.  Subscribers and notifiers MAY
   negotiate the use of other formats capable of representing a session.

      Note: It has been proposed to directly use Session Description
      Protocol (SDP) [<a href="rfc4566.html" title='"SDP: Session Description Protocol"'>RFC4566</a>] instead of encoding the session
      descriptions in the Media Policy [<a href="rfc6796.html" title='"A User Agent Profile Data Set for Media Policy"'>RFC6796</a>] format.  However, using
      a separate format such as the Media Policy format has a number of
      advantages over the direct use of SDP: i) the Media Policy format
      is more flexible and allows the inclusion of information that



<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


      can't be expressed in SDP (e.g., the target URI), ii) the Media
      Policy format enables the encoding of local and remote session
      descriptions in a single document (not requiring the use of MIME
      multipart and new content disposition types), and iii) the Media
      Policy format aligns the formats used for session-specific and
      session-independent policies.  A drawback is that it requires the
      UA to encode SDP and session information in Media Policy
      documents.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.4.%20%20Subscription%20Duration"></a><a class="selflink" href="#section-3.4" name="section-3.4">3.4</a>.  Subscription Duration</span>

   A subscription to the session-specific policy package is usually
   established at the beginning of a session and terminated when the
   corresponding session ends.  A typical duration of a phone call is a
   few minutes.

   Since the duration of a subscription to the session-specific policy
   package is related to the lifetime of the corresponding session, the
   value for the duration of a subscription is largely irrelevant.
   However, the duration SHOULD be longer than the typical duration of a
   session.  The default subscription duration for this event package is
   set to two hours.

   A subscription MAY be terminated before a session ends by the
   notifier.  For example, a notifier may terminate the subscription
   after the initial policy notification has been sent to the subscriber
   if it knows that these policies will not change during the session.
   A subscriber MUST NOT terminate a subscription unless it is
   terminating the session this subscription is for or discovers that
   the notifier has been removed from the list of policy servers
   relevant for this session (see the Session Policy Framework
   [<a href="rfc6794.html" title='"A Framework for Session Initiation Protocol (SIP) Session Policies"'>RFC6794</a>]).  A subscriber MUST refresh a subscription with a
   SUBSCRIBE request before the last SUBSCRIBE request expires to avoid
   that the subscription times out.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.5.%20%20NOTIFY%20Bodies"></a><a class="selflink" href="#section-3.5" name="section-3.5">3.5</a>.  NOTIFY Bodies</span>

   In this event package, the body of a notification contains the
   session policy requested by the subscriber.  All subscribers and
   notifiers MUST support the format "application/
   media-policy-dataset+xml" [<a href="rfc6796.html" title='"A User Agent Profile Data Set for Media Policy"'>RFC6796</a>] as a format for NOTIFY bodies.

   The SUBSCRIBE request MAY contain an Accept header field.  If no such
   header field is present, it has a default value of "application/
   media-policy-dataset+xml".  If the header field is present, it MUST
   include "application/media-policy-dataset+xml", and it MAY include
   any other MIME type capable of representing session-specific




<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   policies.  As defined in <a href="rfc6665.html">RFC 6665</a> [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>], the body of
   notifications MUST be in one of the formats defined in the Accept
   header of the SUBSCRIBE request or in the default format.

   If the notifier uses the same format in NOTIFY bodies that was used
   by the subscriber in the SUBSCRIBE body (e.g., "application/
   media-policy-dataset+xml"), the notifier can expect that the
   subscriber supports all format extensions that were used in the
   SUBSCRIBE body.  The notifier cannot assume that the subscriber
   supports other extensions beyond that and SHOULD NOT use such
   extensions.

   If the SUBSCRIBE request contained a representation of the local
   session description and the subscription was accepted, then the
   NOTIFY body MUST contain a policy for the local session description.
   If the SUBSCRIBE request of an accepted subscription contained the
   local and the remote session description, then the NOTIFY body MUST
   contain two policies: one for the local and one for the remote
   session description.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.6.%20%20Subscriber%20Generation%20of%20SUBSCRIBE%20Requests"></a><a class="selflink" href="#section-3.6" name="section-3.6">3.6</a>.  Subscriber Generation of SUBSCRIBE Requests</span>

   The subscriber follows the general rules for generating SUBSCRIBE
   requests defined in <a href="rfc6665.html">RFC 6665</a> [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>].  The subscriber MUST provide
   sufficient information in the SUBSCRIBE body to fully describe the
   session for which it seeks to receive session-specific policies.  The
   subscriber MUST use the most recent session description as a basis
   for this information.

   If the "application/media-policy-dataset+xml" format is used in
   SUBSCRIBE bodies, the subscriber MUST provide a value for each field
   that is defined for session information documents [<a href="rfc6796.html" title='"A User Agent Profile Data Set for Media Policy"'>RFC6796</a>] and for
   which the subscriber has information available.  In other words, the
   subscriber MUST fill in the elements of a session information
   document as complete as possible.  If the subscriber supports
   extensions of the "application/media-policy-dataset+xml" format, the
   subscriber MUST also provide a value for each field defined by this
   extension for session information documents, if possible.  Providing
   as much information as possible avoids that a session is rejected due
   to a lack of session information and the negotiation of the
   information to be disclosed between notifier and subscriber.

   Subscriptions to this event package are typically created in
   conjunction with an SDP offer/answer exchange [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>] during the
   establishment of a session (see the Session Policy Framework
   [<a href="rfc6794.html" title='"A Framework for Session Initiation Protocol (SIP) Session Policies"'>RFC6794</a>]).  If used with an offer/answer exchange, the subscriber
   MUST insert the representation of the local session description in
   the SUBSCRIBE body.  The local session description is the one that



<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   was created by the subscriber (e.g., the offer if the subscriber has
   initiated the offer/answer exchange).  Under certain circumstances, a
   UA may not have a session description when subscribing to session-
   specific policies, for example, when it is composing an empty INVITE
   request (i.e., an INVITE request that does not contain an offer).  In
   these cases, a UA SHOULD establish a subscription without including a
   representation of the local session description.  The UA MUST refresh
   the subscription with a SUBSCRIBE request that contains this session
   description as soon as the session description becomes available, for
   example, when the UA receives a 200 OK to an empty INVITE request.  A
   policy server can choose to admit a session only after the UA has
   disclosed the session descriptions.

   The subscriber SHOULD also include a representation of the remote
   session description in the SUBSCRIBE body.  The remote session
   description is the one the subscriber has received (i.e., the answer
   if the subscriber has initiated the offer/answer exchange).  In some
   scenarios, the remote session description is not available to the
   subscriber at the time the subscription to session-specific policies
   is established.  In this case, the initial SUBSCRIBE message SHOULD
   only contain a representation of the local session description.  When
   the remote description becomes available, the subscriber SHOULD
   refresh the subscription by sending another SUBSCRIBE request, which
   then contains the local and the remote session description, unless
   the subscriber has received a NOTIFY request with the "local-only"
   parameter.  This parameter indicates that the notifier does not need
   to see the remote session description.

   A user agent can change the session description of an ongoing
   session.  A change in the session description will typically affect
   the policy decisions for this session.  A subscriber MUST refresh the
   subscription to session-specific policies every time the session
   description of a session changes.  It does this by sending a
   SUBSCRIBE request, which contains the details of the updated session
   descriptions.

   A subscriber may receive an error that indicates a server failure in
   response to a SUBSCRIBE request.  In this case, the subscriber SHOULD
   try to locate an alternative server, for example, using the
   procedures described in [<a href="rfc3263.html" title='"Session Initiation Protocol (SIP): Locating SIP Servers"'>RFC3263</a>].  If no alternative server can be
   located, the subscriber MAY continue with the session for which it
   wanted to receive session-specific policies without subscribing to
   session-specific policies.  This is to avoid that a failed policy
   server prevents a UA from setting up or continuing with a session.
   Since the sessions created by the UA may not be policy compliant
   without this subscription, they may be blocked by policy enforcement
   mechanisms if they are in place.




<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   Session policies can contain sensitive information.  Moreover, policy
   decisions can significantly impact the behavior of a user agent.  A
   user agent should therefore verify the identity of a policy server
   and make sure that policies have not been altered in transit.  All
   implementations of this package MUST support Transport Layer Security
   (TLS) [<a href="rfc5246.html" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>] and the Session Initiation Protocol Secure (SIPS) URI
   scheme.  A subscriber SHOULD use SIPS URIs when subscribing to
   session-specific policies so that policies are transmitted over TLS.
   See <a href="#section-4">Section 4</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.7.%20%20Notifier%20Processing%20of%20SUBSCRIBE%20Requests"></a><a class="selflink" href="#section-3.7" name="section-3.7">3.7</a>.  Notifier Processing of SUBSCRIBE Requests</span>

   All subscriptions to session-specific policies SHOULD be
   authenticated and authorized before approval.  However, a policy
   server may frequently encounter UAs it cannot authenticate.  In these
   cases, the policy server MAY provide a generic policy that does not
   reveal sensitive information to these UAs.  For details, see
   <a href="#section-4">Section 4</a>.

   The authorization policy is at the discretion of the administrator.
   In general, all users SHOULD be allowed to subscribe to the session-
   specific policies of their sessions.  A subscription to this event
   package will typically be established by a device that needs to know
   about the policies for its sessions.  However, subscriptions may also
   be established by applications (e.g., a conference server).  In those
   cases, an authorization policy will typically be provided for these
   applications.

   Responding in a timely manner to a SUBSCRIBE request is crucial for
   this event package.  A notifier must minimize the time needed for
   processing SUBSCRIBE requests and generating the initial NOTIFY
   request.  This includes minimizing the time needed to generate an
   initial policy decision.  In particular, a short response time is
   important for this event package since it minimizes the delay for
   fetching policies during an INVITE transaction and therefore reduces
   call setup time.  In addition, subscriptions to session-specific
   policies can be established while the subscriber is in an INVITE
   transaction at a point where it has received the 200 OK but before
   sending the ACK.  Delaying the creation of the initial NOTIFY request
   would delay the transmission of the ACK.  A more detailed discussion
   of this scenario can be found in the Session Policy Framework
   [<a href="rfc6794.html" title='"A Framework for Session Initiation Protocol (SIP) Session Policies"'>RFC6794</a>].

   A subscriber may not have disclosed enough information in the
   SUBSCRIBE request to enable the notifier to generate a policy
   decision.  For example, a UA may have subscribed to session-specific
   policies without including the representation of a session
   description.  The policy server SHOULD accept such a subscription.



<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   The policy server SHOULD generate a NOTIFY request that includes the
   "insufficient-info" event package parameter.  A NOTIFY request with
   this parameter indicates that a policy decision could not be made due
   to insufficient information.  The body of such a NOTIFY request can
   either be empty or contain a policy decision document that provides
   hints about which information was missing.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.8.%20%20Notifier%20Generation%20of%20NOTIFY%20Requests"></a><a class="selflink" href="#section-3.8" name="section-3.8">3.8</a>.  Notifier Generation of NOTIFY Requests</span>

   A notifier sends a notification in response to SUBSCRIBE requests as
   defined in <a href="rfc6665.html">RFC 6665</a> [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>].  In addition, a notifier MAY send a
   notification at any time during the subscription.  Typically, it will
   send one every time the policy decision this subscription is for has
   changed.  When and why a policy decision changes is entirely at the
   discretion of the administrator.  A policy decision can change for
   many reasons.  For example, a network may become congested due to an
   increase in traffic and reduce the bandwidth available to an
   individual user.  Another example is a session that has been started
   during "business hours" and continues into "evening hours" where more
   bandwidth or video sessions are available to the user according to
   the service level agreement.

   Policy decisions are expressed in the format negotiated for the
   NOTIFY body (e.g., "application/media-policy-dataset+xml").  The
   policy document in a NOTIFY body MUST represent a complete policy
   decision.  Notifications that contain the deltas to previous policy
   decisions or partial policy decisions are not supported in this event
   package.

   The notifier SHOULD terminate the subscription if the policy decision
   is to reject a session and if it can be expected that this decision
   will not change in the foreseeable future.  The notifier SHOULD keep
   the subscription alive, if it rejects a session but expects that the
   session can be admitted soon.  For example, if the session was
   rejected due to a temporary shortage of resources and the notifier
   expects that these resources will become available again shortly it
   should keep the subscription alive.  The decision to reject a session
   is expressed in the policy decision document.  A session is admitted
   by returning a policy decision document that requires some or no
   changes to the session.

   If the notifier has not received enough information to make a policy
   decision from the subscriber (e.g., because it did not receive a
   session description), the notifier SHOULD NOT terminate the
   subscription since it can be expected that the UA refreshes the
   subscription with a SUBSCRIBE request that contains more information.
   The notifier SHOULD generate a NOTIFY request with the "insufficient-
   info" event package parameter to indicate that a policy decision



<span class="grey">Hilt &amp; Camarillo             Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   could not be made due to insufficient information.  This NOTIFY
   request can contain an empty body or a body that contains a policy
   decision document indicating which information was missing.

   Some session-specific policies do not require the disclosure of the
   remote session description to the notifier.  If a notifier determines
   that this is the case after receiving a SUBSCRIBE request, the
   notifier SHOULD include the "local-only" event parameter in NOTIFY
   requests.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.9.%20%20Subscriber%20Processing%20of%20NOTIFY%20Requests"></a><a class="selflink" href="#section-3.9" name="section-3.9">3.9</a>.  Subscriber Processing of NOTIFY Requests</span>

   A subscriber MUST apply the policy decision received in a NOTIFY
   request to the session associated with this subscription.  If the UA
   decides not to apply the received policy decision, the UA MUST NOT
   set up the session and MUST terminate the session if the session is
   already in progress.  If the UA has a pending INVITE transaction for
   this session, the UA MUST cancel or reject the INVITE request.

   If the subscriber receives a NOTIFY request indicating that the
   session has been rejected, the subscriber MUST NOT attempt to
   establish this session.  If the notifier has terminated the
   subscription after rejecting the session, the subscriber SHOULD NOT
   try to re-send the same SUBSCRIBE request again.  The termination of
   the subscription by the notifier indicates that the policy decision
   for this session is final and will not change in the foreseeable
   future.  The subscriber MAY try to re-subscribe for this session if
   at least one aspect of the session (e.g., a parameter in the session
   description or the target URI) has changed or if there is other
   reason to believe that re-trying the subscription will be successful
   (e.g., because time has progressed significantly since the last
   attempt).

   The notifier may keep up the subscription after rejecting a session
   to indicate that it may send an updated policy decision for this
   session to the subscriber at a later time.  This is useful, for
   example, if the session was rejected due to a temporary shortage of
   resources and the notifier expects that this problem to be resolved
   shortly.  In another example, the session was rejected because it was
   attempted in a restricted period during the day but this period is
   going to end soon.  In this case, the subscriber SHOULD not terminate
   the subscription to session-specific policies.

   The subscriber may receive a NOTIFY request that contains an
   "insufficient-info" event package parameter to indicate that the
   SUBSCRIBE request did not contain enough information.  The subscriber





<span class="grey">Hilt &amp; Camarillo             Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   SHOULD refresh the subscription with more complete information as
   soon as the missing information (e.g., the session description) is
   available.

   A subscriber may receive an update to a policy decision for a session
   that is already established.  The subscriber MUST apply the new
   policy decision to this session.  If a UA decides that it does not
   want to apply the new policy decision, the UA MUST terminate the
   session.  An updated policy decision may require the UA to generate a
   re-INVITE or UPDATE request in this session if the session
   description has changed or it may need to terminate this session.  A
   policy update that requires a UA to terminate a session can, for
   example, be triggered by the user's account running out of credit or
   the detection of an emergency that requires the termination of non-
   emergency calls.

   If the subscriber receives a NOTIFY request that contains the "local-
   only" event parameter, the subscriber SHOULD NOT include the remote
   session description in subsequent SUBSCRIBE requests within this
   subscription.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.10.%20%20Handling%20of%20Forked%20Requests"></a><a class="selflink" href="#section-3.10" name="section-3.10">3.10</a>.  Handling of Forked Requests</span>

   This event package allows the creation of only one dialog as a result
   of an initial SUBSCRIBE request.  The techniques to achieve this
   behavior are described in [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.11.%20%20Rate%20of%20Notifications"></a><a class="selflink" href="#section-3.11" name="section-3.11">3.11</a>.  Rate of Notifications</span>

   It is anticipated that the rate of policy changes will be very low.
   In any case, notifications SHOULD NOT be generated at a rate of more
   than once every five seconds.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.12.%20%20State%20Agents"></a><a class="selflink" href="#section-3.12" name="section-3.12">3.12</a>.  State Agents</span>

   State agents play no role in this package.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.13.%20%20Examples"></a><a class="selflink" href="#section-3.13" name="section-3.13">3.13</a>.  Examples</span>

   The following message flow illustrates how a user agent (Alice's
   phone) can subscribe to session-specific policies when establishing a
   call (here to Bob's phone).  The flow assumes that the user agent has
   already received the policy server URI (e.g., through configuration
   or as described in the Session Policy Framework [<a href="rfc6794.html" title='"A Framework for Session Initiation Protocol (SIP) Session Policies"'>RFC6794</a>]), and it
   does not show messages for authentication on a transport or SIP
   level.

   These call flow examples are informative and not normative.



<span class="grey">Hilt &amp; Camarillo             Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   Implementers should consult the main text of this document for exact
   protocol details.


   Policy Server          Alice                Bob
       |                   |                   |
       |(1) SUBSCRIBE      |                   |
       |&lt;------------------|                   |
       |(2) 200 OK         |                   |
       |------------------&gt;|                   |
       |(3) NOTIFY         |                   |
       |------------------&gt;|                   |
       |(4) 200 OK         |                   |
       |&lt;------------------|                   |
       |                   |(5) INVITE         |
       |                   |------------------&gt;|
       |                   |                   |
       |                   |(6) 200 OK         |
       |                   |&lt;------------------|
       |                   |(7) ACK            |
       |                   |------------------&gt;|
       |(8) SUBSCRIBE      |                   |
       |&lt;------------------|                   |
       |(9) 200 OK         |                   |
       |------------------&gt;|                   |
       |(10) NOTIFY        |                   |
       |------------------&gt;|                   |
       |(11) 200 OK        |                   |
       |&lt;------------------|                   |
       |                   |                   |

     Message Details

        (1) SUBSCRIBE  Alice -&gt; Policy Server

        SUBSCRIBE sips:policy@biloxi.example.com SIP/2.0
        Via: SIP/2.0/TLS pc.biloxi.example.com:5061
         ;branch=z9hG4bK74bf
        Max-Forwards: 70
        From: Alice &lt;sips:alice@biloxi.example.com&gt;;tag=8675309
        To: PS &lt;sips:policy@biloxi.example.com&gt;
        Call-ID: rt4353gs2egg@pc.biloxi.example.com
        CSeq: 1 SUBSCRIBE
        Contact: &lt;sips:alice@pc.biloxi.example.com&gt;
        Expires: 7200
        Event: session-spec-policy
        Accept: application/media-policy-dataset+xml
        Content-Type: application/media-policy-dataset+xml



<span class="grey">Hilt &amp; Camarillo             Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


        Content-Length: ...

        [Local session description (offer)]


        (2) 200 OK  Policy Server -&gt; Alice

        (3) NOTIFY  Policy Server -&gt; Alice

        NOTIFY sips:alice@pc.biloxi.example.com SIP/2.0
        Via: SIP/2.0/TLS srvr.biloxi.example.com:5061
         ;branch=z9hG4bK74br
        Max-Forwards: 70
        From: PS &lt;sips:policy@biloxi.example.com&gt;;tag=31451098
        To: Alice &lt;sips:alice@biloxi.example.com&gt;;tag=8675309
        Call-ID: rt4353gs2egg@pc.biloxi.example.com
        CSeq: 1 NOTIFY
        Event: session-spec-policy
        Subscription-State: active;expires=7200
        Content-Type: application/media-policy-dataset+xml
        Content-Length: ...

        [Policy for local session description (offer)]

        (4) 200 OK  Alice -&gt; Policy Server

        (5) INVITE  Alice -&gt; Bob

        (6) 200 OK  Bob -&gt; Alice

        (7) ACK  Alice -&gt; Bob

        (8) SUBSCRIBE  Alice -&gt; Policy Server

        SUBSCRIBE sips:policy@biloxi.example.com SIP/2.0
        Via: SIP/2.0/TLS pc.biloxi.example.com:5061
         ;branch=z9hG4bKna998sl
        Max-Forwards: 70
        From: Alice &lt;sips:alice@biloxi.example.com&gt;;tag=8675309
        To: PS &lt;sips:policy@biloxi.example.com&gt;;tag=31451098
        Call-ID: rt4353gs2egg@pc.biloxi.example.com
        CSeq: 2 SUBSCRIBE
        Expires: 7200
        Event: session-spec-policy
        Accept: application/media-policy-dataset+xml
        Content-Type: application/media-policy-dataset+xml
        Content-Length: ...




<span class="grey">Hilt &amp; Camarillo             Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


        [Local session description (offer)]
        [Remote session description (answer)]


        (9) 200 OK  Policy Server -&gt; Alice

        (10) NOTIFY  Policy Server -&gt; Alice

        NOTIFY sips:alice@pc.biloxi.example.com SIP/2.0
        Via: SIP/2.0/TLS srvr.biloxi.example.com:5061
         ;branch=z9hG4bKna998sk
        Max-Forwards: 70
        From: PS &lt;sips:policy@biloxi.example.com&gt;;tag=31451098
        To: Alice &lt;sips:alice@biloxi.example.com&gt;;tag=8675309
        Call-ID: rt4353gs2egg@pc.biloxi.example.com
        CSeq: 2 NOTIFY
        Event: session-spec-policy
        Subscription-State: active;expires=7200
        Content-Type: application/media-policy-dataset+xml
        Content-Length: ...

        [Policy for local session description (offer)]
        [Policy for remote session description (answer)]

        F6 200 OK  Alice -&gt; Policy Server


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Security%20Considerations"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Security Considerations</span>

   Session policies can significantly change the behavior of a user
   agent and can therefore be used by an attacker to compromise a user
   agent.  For example, session policies can be used to prevent a user
   agent from successfully establishing a session (e.g., by setting the
   available bandwidth to zero).  Such a policy can be submitted to the
   user agent during a session, which may cause the UA to terminate the
   session.

   A user agent transmits session information to a policy server.  This
   information may contain sensitive data the user may not want an
   eavesdropper or an unauthorized policy server to see.  For example,
   the session information may contain the encryption keys for media
   streams.  Vice versa, session policies may also contain sensitive
   information about the network or service level agreements the service
   provider may not want to disclose to an eavesdropper or an
   unauthorized user agent.






<span class="grey">Hilt &amp; Camarillo             Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   It is therefore important to secure the communication between the
   user agent and the policy server.  The following three discrete
   attributes need to be protected:

   1.  authentication of the policy server and, if needed, the user
       agent,

   2.  confidentiality of the messages exchanged between the user agent
       and the policy server, and

   3.  ensuring that private information is not exchanged between the
       two parties, even over a confidentiality-assured and
       authenticated session.

   Authentication of the peers and protecting the confidentiality of the
   policies in transit is achieved by existing SIP security mechanisms
   (the use of TLS and SIPS URI scheme [<a href="rfc3261.html" title='"SIP: Session Initiation Protocol"'>RFC3261</a>], [<a href="rfc5630.html" title='"The Use of the SIPS URI Scheme in the Session Initiation Protocol (SIP)"'>RFC5630</a>]).

   Accordingly, policy servers SHOULD be addressable only through a SIPS
   URI.  Policy server and user agent MUST support TLS.  The
   confidentiality of the communication between the policy server and
   the user agent will be assured as long as the policy server supports
   TLS and is reached through a SIPS URI.

   Authenticating the two parties can be performed using X.509
   certificates exchanged through TLS and other techniques such as HTTP
   Digest.  When the user agent establishes a TLS session with the
   policy server, the policy server will present it with an X.509
   certificate.  The user agent SHOULD ensure that the identity of the
   policy server encoded in the certificate matches the URI of the
   policy server the user agent has received either using the Session
   Policy Framework [<a href="rfc6794.html" title='"A Framework for Session Initiation Protocol (SIP) Session Policies"'>RFC6794</a>] or other means such as configuration.

   When a policy server receives a new subscription (as opposed to a
   refresh subscription), the policy server SHOULD try to authenticate
   the user agent using any means at its disposal.  If the user agent
   has an X.509 certificate suitable for use with TLS, the identity of
   the user agent SHOULD be contained in the certificate, or, if the
   user agent does not possess a certificate, the policy server SHOULD
   challenge the user agent using HTTP Digest.  A policy server may
   frequently encounter UAs it cannot authenticate.  In these cases, the
   policy server MAY provide a generic policy that does not reveal
   sensitive information to these UAs.

   If the subscriber and notifier desire to protect the integrity of the
   policy exchange in an end-to-end manner, they MAY use S/MIME to
   protect the session policies.  However, <a href="rfc3261.html">RFC3261</a> cautions that
   "[i]mplementers should note, however, that there may be rare network



<span class="grey">Hilt &amp; Camarillo             Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   intermediaries (not typical proxy servers) that rely on viewing or
   modifying the bodies of SIP messages (especially SDP), and that
   secure MIME may prevent these sorts of intermediaries from
   functioning" [<a href="rfc3261.html" title='"SIP: Session Initiation Protocol"'>RFC3261</a>].

   And finally, the fact that the user agent and the policy server have
   successfully authenticated each other and have established a secure
   TLS session does not absolve either one from ensuring that they do
   not communicate sensitive information.  For example, a session
   description may contain sensitive information -- session keys, for
   example -- that the user agent may not want to share with the policy
   server; and indeed, the policy server does not need such information
   to effectively formulate a policy.  Thus, the user agent should not
   insert such sensitive information in a session information document
   that it sends to the policy server.  Likewise, the policy server may
   have information that is sensitive and of no use to the user agent --
   network service level agreements, or network statistics, for example.
   Thus, the policy server should refrain from transmitting such
   information to the user agent.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  IANA Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Event%20Package%20Name"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Event Package Name</span>

   This specification registers an event package as follows, based on
   the registration procedures defined in <a href="rfc6665.html">RFC 6665</a> [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>].

   Package Name: session-spec-policy

   Package or Template-Package: This is a package.

   Published Document: <a href="rfc6795.html">RFC 6795</a>.

   Person to Contact: Volker Hilt, volker.hilt@bell-labs.com.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20References"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Normative%20References"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC3261" name="ref-RFC3261">RFC3261</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", <a href="rfc3261.html">RFC 3261</a>,
              June 2002.





<span class="grey">Hilt &amp; Camarillo             Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


   [<a id="ref-RFC3263" name="ref-RFC3263">RFC3263</a>]  Rosenberg, J. and H. Schulzrinne, "Session Initiation
              Protocol (SIP): Locating SIP Servers", <a href="rfc3263.html">RFC 3263</a>,
              June 2002.

   [<a id="ref-RFC5246" name="ref-RFC5246">RFC5246</a>]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", <a href="rfc5246.html">RFC 5246</a>, August 2008.

   [<a id="ref-RFC6665" name="ref-RFC6665">RFC6665</a>]  Roach, A., "SIP-Specific Event Notification", <a href="rfc6665.html">RFC 6665</a>,
              July 2012.

   [<a id="ref-RFC6794" name="ref-RFC6794">RFC6794</a>]  Hilt, V., Camarillo, G., and J. Rosenberg, "A Framework
              for Session Initiation Protocol (SIP) Session Policies",
              <a href="rfc6794.html">RFC 6794</a>, December 2012.

   [<a id="ref-RFC6796" name="ref-RFC6796">RFC6796</a>]  Hilt, V., Camarillo, G., Rosenberg, J., and D. Worley, "A
              User Agent Profile Data Set for Media Policy", <a href="rfc6796.html">RFC 6796</a>,
              December 2012.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Informative%20References"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Informative References</span>

   [<a id="ref-RFC3264" name="ref-RFC3264">RFC3264</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model
              with Session Description Protocol (SDP)", <a href="rfc3264.html">RFC 3264</a>,
              June 2002.

   [<a id="ref-RFC4566" name="ref-RFC4566">RFC4566</a>]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
              Description Protocol", <a href="rfc4566.html">RFC 4566</a>, July 2006.

   [<a id="ref-RFC5630" name="ref-RFC5630">RFC5630</a>]  Audet, F., "The Use of the SIPS URI Scheme in the Session
              Initiation Protocol (SIP)", <a href="rfc5630.html">RFC 5630</a>, October 2009.






















<span class="grey">Hilt &amp; Camarillo             Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6795.html">RFC 6795</a>              Session Policy Event Package         December 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Acknowledgements"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Acknowledgements</span>

   Many thanks to Jonathan Rosenberg for the discussions and suggestions
   for this document.  Many thanks to Roni Even, Bob Penfield, Mary
   Barnes, Shida Schubert and Jon Peterson for reviewing the document
   and to Vijay Gurbani for the contributions to the Security
   Considerations section.

Authors' Addresses

   Volker Hilt
   Bell Labs/Alcatel-Lucent
   Lorenzstrasse 10
   70435 Stuttgart
   Germany

   EMail: volker.hilt@bell-labs.com


   Gonzalo Camarillo
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   EMail: Gonzalo.Camarillo@ericsson.com

























Hilt &amp; Camarillo             Standards Track                   [Page 18]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6795 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:27 GMT --></html>