<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6662 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:27 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6662" name="DC.Identifier"/>
<meta content="Pre-Congestion Notification (PCN) is a means for protecting the
quality of service for inelastic traffic admitted to a Diffserv
domain. The overall PCN architecture is described in RFC 5559. This
memo is one of a series describing possible boundary-node behaviors
for a PCN-domain. The behavior described here is that for a form of
measurement-based load control using two PCN marking states: not-
marked and excess-traffic-marked. This behavior is known informally as
the Single Marking (SM) PCN-boundary-node behavior. This document
defines an Experimental Protocol for the Internet community." name="DC.Description.Abstract"/>
<meta content="Menth, Michael" name="DC.Creator"/>
<meta content="Charny, Anna" name="DC.Creator"/>
<meta content="Taylor, Tom" name="DC.Creator"/>
<meta content="Karagiannis, Georgios" name="DC.Creator"/>
<meta content="July, 2012" name="DC.Date.Issued"/>
<meta content="Pre-Congestion Notification (PCN) Boundary-Node Behavior for the Single Marking (SM) Mode of Operation" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6662 - Pre-Congestion Notification (PCN) Boundary-Node Behavior for the Single Marking (SM) Mode of Operation</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgyellow" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6662.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6662" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-pcn-sm-edge-behaviour" title="draft-ietf-pcn-sm-edge-behaviour">draft-ietf-pcn-...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6662" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6662" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6662" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                            EXPERIMENTAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                         A. Charny
Request for Comments: 6662
Category: Experimental                                          J. Zhang
ISSN: 2070-1721                                            Cisco Systems
                                                          G. Karagiannis
                                                    University of Twente
                                                                M. Menth
                                                 University of Tuebingen
                                                          T. Taylor, Ed.
                                                     Huawei Technologies
                                                               July 2012


        <span class="h1">Pre-Congestion Notification (PCN) Boundary-Node Behavior</span>
             <span class="h1">for the Single Marking (SM) Mode of Operation</span>

Abstract

   Pre-Congestion Notification (PCN) is a means for protecting the
   quality of service for inelastic traffic admitted to a Diffserv
   domain.  The overall PCN architecture is described in <a href="rfc5559.html">RFC 5559</a>.  This
   memo is one of a series describing possible boundary-node behaviors
   for a PCN-domain.  The behavior described here is that for a form of
   measurement-based load control using two PCN marking states: not-
   marked and excess-traffic-marked.  This behavior is known informally
   as the Single Marking (SM) PCN-boundary-node behavior.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for examination, experimental implementation, and
   evaluation.

   This document defines an Experimental Protocol for the Internet
   community.  This document is a product of the Internet Engineering
   Task Force (IETF).  It represents the consensus of the IETF
   community.  It has received public review and has been approved for
   publication by the Internet Engineering Steering Group (IESG).  Not
   all documents approved by the IESG are a candidate for any level of
   Internet Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6662">http://www.rfc-editor.org/info/rfc6662</a>.







<span class="grey">Charny, et al.                Experimental                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





































<span class="grey">Charny, et al.                Experimental                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-1.1">1.1</a>.  Terminology  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
   <a href="#section-2">2</a>.  [SM-Specific] Assumed Core Network Behavior for SM . . . . . .  <a href="#page-8">8</a>
   <a href="#section-3">3</a>.  Node Behaviors . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-3.1">3.1</a>.  Overview . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-3.2">3.2</a>.  Behavior of the PCN-Egress-Node  . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-3.2.1">3.2.1</a>.  Data Collection  . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-3.2.2">3.2.2</a>.  Reporting the PCN Data . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
       <a href="#section-3.2.3">3.2.3</a>.  Optional Report Suppression  . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-3.3">3.3</a>.  Behavior at the Decision Point . . . . . . . . . . . . . . <a href="#page-11">11</a>
       <a href="#section-3.3.1">3.3.1</a>.  Flow Admission . . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
       <a href="#section-3.3.2">3.3.2</a>.  Flow Termination . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
       3.3.3.  Decision Point Action for Missing
               PCN-Boundary-Node Reports  . . . . . . . . . . . . . . <a href="#page-14">14</a>
     <a href="#section-3.4">3.4</a>.  Behavior of the Ingress Node . . . . . . . . . . . . . . . <a href="#page-15">15</a>
     3.5.  Summary of Timers and Associated Configurable Durations  . 15
       <a href="#section-3.5.1">3.5.1</a>.  Recommended Values for the Configurable Durations  . . <a href="#page-17">17</a>
   <a href="#section-4">4</a>.  Specification of Diffserv Per-Domain Behavior  . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-4.1">4.1</a>.  Applicability  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-4.2">4.2</a>.  Technical Specification  . . . . . . . . . . . . . . . . . <a href="#page-18">18</a>
       <a href="#section-4.2.1">4.2.1</a>.  Classification and Traffic Conditioning  . . . . . . . <a href="#page-18">18</a>
       <a href="#section-4.2.2">4.2.2</a>.  PHB Configuration  . . . . . . . . . . . . . . . . . . <a href="#page-18">18</a>
     <a href="#section-4.3">4.3</a>.  Attributes . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-18">18</a>
     <a href="#section-4.4">4.4</a>.  Parameters . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-18">18</a>
     <a href="#section-4.5">4.5</a>.  Assumptions  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-4.6">4.6</a>.  Example Uses . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-4.7">4.7</a>.  Environmental Concerns . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-4.8">4.8</a>.  Security Considerations  . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
   <a href="#section-5">5</a>.  Operational and Management Considerations  . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-5.1">5.1</a>.  Deployment of the SM Edge Behavior . . . . . . . . . . . . <a href="#page-19">19</a>
       5.1.1.  Selection of Deployment Options and Global
               Parameters . . . . . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
       5.1.2.  Specification of Node- and Link-Specific Parameters  . 21
       <a href="#section-5.1.3">5.1.3</a>.  Installation of Parameters and Policies  . . . . . . . <a href="#page-22">22</a>
       <a href="#section-5.1.4">5.1.4</a>.  Activation and Verification of All Behaviors . . . . . <a href="#page-23">23</a>
     <a href="#section-5.2">5.2</a>.  Management Considerations  . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
       <a href="#section-5.2.1">5.2.1</a>.  Event Logging in the PCN-Domain  . . . . . . . . . . . <a href="#page-24">24</a>
         <a href="#section-5.2.1.1">5.2.1.1</a>.  Logging Loss and Restoration of Contact  . . . . . <a href="#page-24">24</a>
         <a href="#section-5.2.1.2">5.2.1.2</a>.  Logging Flow Termination Events  . . . . . . . . . <a href="#page-26">26</a>
       <a href="#section-5.2.2">5.2.2</a>.  Provision and Use of Counters  . . . . . . . . . . . . <a href="#page-27">27</a>
   <a href="#section-6">6</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>
   <a href="#section-7">7</a>.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>
   <a href="#section-8">8</a>.  References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
     <a href="#section-8.1">8.1</a>.  Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
     <a href="#section-8.2">8.2</a>.  Informative References . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>




<span class="grey">Charny, et al.                Experimental                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The objective of Pre-Congestion Notification (PCN) is to protect the
   quality of service (QoS) of inelastic flows within a Diffserv domain,
   in a simple, scalable, and robust fashion.  Two mechanisms are used:
   admission control to decide whether to admit or block a new flow
   request and, in abnormal circumstances, flow termination to decide
   whether to terminate some of the existing flows.  To achieve this,
   the overall rate of PCN-traffic is metered on every link in the PCN-
   domain, and PCN-packets are appropriately marked when certain
   configured rates are exceeded.  These configured rates are below the
   rate of the link, thus providing notification to PCN-boundary-nodes
   about incipient overloads before any congestion occurs (hence the
   "pre" part of "pre-congestion notification").  The level of marking
   allows decisions to be made about whether to admit or terminate PCN-
   flows.  For more details, see [<a href="rfc5559.html" title='"Pre-Congestion Notification (PCN) Architecture"'>RFC5559</a>].

   This document describes an experimental edge-node behavior to
   implement PCN in a network.  The experiment may be run in a network
   in which a substantial proportion of the traffic carried is in the
   form of inelastic flows and where admission control of micro-flows is
   applied at the edge.  For the effects of PCN to be observable, the
   committed bandwidth (i.e., level of non-best-effort traffic) on at
   least some links of the network should be near or at link capacity.
   The amount of effort required to prepare the network for the
   experiment (see <a href="#section-5.1">Section 5.1</a>) may constrain the size of network to
   which it is applied.  The purposes of the experiment are:

   o  to validate the specification of the SM edge behavior;

   o  to evaluate the effectiveness of the SM edge behavior in
      preserving quality of service for admitted flows; and

   o  to evaluate PCN's potential for reducing the amount of capital and
      operational costs in comparison to alternative methods of assuring
      quality of service.

   For the first two objectives, the experiment should run long enough
   for the network to experience sharp peaks of traffic in at least some
   directions.  It would also be desirable to observe PCN performance in
   the face of failures in the network.  A period on the order of a
   month or two in busy season may be enough.  The third objective is
   more difficult and could require observation over a period long
   enough for traffic demand to grow to the point where additional
   capacity must be provisioned at some points in the network.






<span class="grey">Charny, et al.                Experimental                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   <a href="#section-3">Section 3</a> of this document specifies a detailed set of algorithms and
   procedures used to implement the PCN mechanisms for the SM mode of
   operation.  Since the algorithms depend on specific metering and
   marking behavior at the interior nodes, it is also necessary to
   specify the assumptions made about PCN-interior-node behavior
   (<a href="#section-2">Section 2</a>).  Finally, because PCN uses Diffserv codepoint (DSCP)
   values to carry its markings, a specification of PCN-boundary-node
   behavior must include the per-domain behavior (PDB) template
   specified in [<a href="rfc3086.html" title='"Definition of Differentiated Services Per Domain Behaviors and Rules for their Specification"'>RFC3086</a>], filled out with the appropriate content
   (<a href="#section-4">Section 4</a>).

   Note that the terms "block" or "terminate" actually translate to one
   or more of several possible courses of action, as discussed in
   <a href="rfc5559.html#section-3.6">Section 3.6 of [RFC5559]</a>.  The choice of which action to take for
   blocked or terminated flows is a matter of local policy.

   A companion document [<a href="rfc6661.html" title='"Pre-Congestion Notification (PCN) Boundary- Node Behavior for the Controlled Load (CL) Mode of Operation"'>RFC6661</a>] specifies the Controlled Load (CL)
   PCN-boundary-node behavior.  This document and [<a href="rfc6661.html" title='"Pre-Congestion Notification (PCN) Boundary- Node Behavior for the Controlled Load (CL) Mode of Operation"'>RFC6661</a>] have a great
   deal of text in common.  To simplify the task of the reader, the text
   in the present document that is specific to the SM PCN-boundary-node
   behavior is preceded by the phrase "[<a href="#ref-SM-specific" title='"block"'>SM-specific</a>]".  A similar
   distinction for CL-specific text is made in [<a href="rfc6661.html" title='"Pre-Congestion Notification (PCN) Boundary- Node Behavior for the Controlled Load (CL) Mode of Operation"'>RFC6661</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Terminology"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   This document uses the following terms defined in <a href="rfc5559.html#section-2">Section 2 of
   [RFC5559]</a>:

   o  PCN-domain

   o  PCN-ingress-node

   o  PCN-egress-node

   o  PCN-interior-node

   o  PCN-boundary-node

   o  PCN-flow

   o  ingress-egress-aggregate

   o  PCN-excess-rate




<span class="grey">Charny, et al.                Experimental                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   o  PCN-admissible-rate

   o  PCN-supportable-rate

   o  PCN-marked

   o  excess-traffic-marked

   It also uses the terms PCN-traffic and PCN-packet, for which the
   definition is repeated from [<a href="rfc5559.html" title='"Pre-Congestion Notification (PCN) Architecture"'>RFC5559</a>] because of their importance to
   the understanding of the text that follows:

   PCN-traffic, PCN-packets, PCN-BA
      A PCN-domain carries traffic of different Diffserv behavior
      aggregates (BAs) [<a href="rfc2474.html" title='"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers"'>RFC2474</a>].  The PCN-BA uses the PCN mechanisms to
      carry PCN-traffic, and the corresponding packets are PCN-packets.
      The same network will carry traffic of other Diffserv BAs.  The
      PCN-BA is distinguished by a combination of the Diffserv codepoint
      and the ECN field.

   This document uses the following term from [<a href="rfc5670.html" title='"Metering and Marking Behaviour of PCN- Nodes"'>RFC5670</a>]:

   o  excess-traffic-meter.

   To complete the list of borrowed terms, this document reuses the
   following terms and abbreviations defined in <a href="rfc6660.html#section-2">Section 2 of [RFC6660]</a>:

   o  not-PCN codepoint;

   o  not-marked (NM) codepoint;

   o  excess-traffic-marked (ETM) codepoint.

   This document defines the following additional terms:

   Decision Point
      The node that makes the decision about which flows to admit and to
      terminate.  In a given network deployment, this can be the PCN-
      ingress-node or a centralized control node.  In either case, the
      PCN-ingress-node is the point where the decisions are enforced.

   NM-rate
      The rate of not-marked PCN-traffic received at a PCN-egress-node
      for a given ingress-egress-aggregate in octets per second.  For
      further details, see <a href="#section-3.2.1">Section 3.2.1</a>.






<span class="grey">Charny, et al.                Experimental                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   ETM-rate
      The rate of excess-traffic-marked PCN-traffic received at a PCN-
      egress-node for a given ingress-egress-aggregate in octets per
      second.  For further details, see <a href="#section-3.2.1">Section 3.2.1</a>.

   PCN-sent-rate
      The rate of PCN-traffic received at a PCN-ingress-node and
      destined for a given ingress-egress-aggregate in octets per
      second.  For further details, see <a href="#section-3.4">Section 3.4</a>.

   Congestion level estimate (CLE)
      The ratio of PCN-marked to total PCN-traffic (measured in octets)
      received for a given ingress-egress-aggregate during a given
      measurement period.  The CLE is used to derive the PCN-admission-
      state (<a href="#section-3.3.1">Section 3.3.1</a>) and is also used by the report suppression
      procedure (<a href="#section-3.2.3">Section 3.2.3</a>) if report suppression is activated.

   PCN-admission-state
      The state ("admit" or "block") derived by the Decision Point for a
      given ingress-egress-aggregate based on statistics about PCN-
      packet marking.  The Decision Point decides to admit or block new
      flows offered to the aggregate based on the current value of the
      PCN-admission-state.  For further details, see <a href="#section-3.3.1">Section 3.3.1</a>.

   Sustainable aggregate rate (SAR)
      The estimated maximum rate of PCN-traffic that can be carried in a
      given ingress-egress-aggregate at a given moment without risking
      degradation of quality of service for the admitted flows.  The
      intention is that if the PCN-sent-rate of every ingress-egress-
      aggregate passing through a given link is limited to its
      sustainable aggregate rate, the total rate of PCN-traffic flowing
      through the link will be limited to the PCN-supportable-rate for
      that link.  An estimate of the sustainable aggregate rate for a
      given ingress-egress-aggregate is derived as part of the flow
      termination procedure and is used to determine how much PCN-
      traffic needs to be terminated.  For further details, see
      <a href="#section-3.3.2">Section 3.3.2</a>.

   CLE-reporting-threshold
      A configurable value against which the CLE is compared as part of
      the report suppression procedure.  For further details, see
      <a href="#section-3.2.3">Section 3.2.3</a>.

   CLE-limit
      A configurable value against which the CLE is compared to
      determine the PCN-admission-state for a given ingress-egress-
      aggregate.  For further details, see <a href="#section-3.3.1">Section 3.3.1</a>.




<span class="grey">Charny, et al.                Experimental                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   T_meas
      A configurable time interval that defines the measurement period
      over which the PCN-egress-node collects statistics relating to
      PCN-traffic marking.  At the end of the interval, the PCN-egress-
      node calculates the values NM-rate and ETM-rate as defined above
      and sends a report to the Decision Point, subject to the operation
      of the report suppression feature.  For further details, see
      <a href="#section-3.2">Section 3.2</a>.

   T_maxsuppress
      A configurable time interval after which the PCN-egress-node MUST
      send a report to the Decision Point for a given ingress-egress-
      aggregate regardless of the most recent values of the CLE.  This
      mechanism provides the Decision Point with a periodic confirmation
      of liveness when report suppression is activated.  For further
      details, see <a href="#section-3.2.3">Section 3.2.3</a>.

   T_fail
      An interval after which the Decision Point concludes that
      communication from a given PCN-egress-node has failed if it has
      received no reports from the PCN-egress-node during that interval.
      For further details, see <a href="#section-3.3.3">Section 3.3.3</a>.

   T_crit
      A configurable interval used in the calculation of T_fail.  For
      further details, see <a href="#section-3.3.3">Section 3.3.3</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20%5BSM-Specific%5D%20Assumed%20Core%20Network%20Behavior%20for%20SM"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  [SM-Specific] Assumed Core Network Behavior for SM</span>

   This section describes the assumed behavior for PCN-interior-nodes in
   the PCN-domain.  The SM mode of operation assumes that:

   o  PCN-interior-nodes perform excess-traffic-marking of PCN-packets
      according to the rules specified in [<a href="rfc5670.html" title='"Metering and Marking Behaviour of PCN- Nodes"'>RFC5670</a>].

   o  For IP transport, excess-traffic-marking of PCN-packets uses the
      excess-traffic-marked (ETM) codepoint defined in [<a href="rfc6660.html" title='"Encoding Three Pre-Congestion Notification (PCN) States in the IP Header Using a Single Diffserv Codepoint (DSCP)"'>RFC6660</a>]; for
      MPLS transport, an equivalent marking is used as discussed in
      <a href="rfc6660.html#appendix-C">Appendix C of [RFC6660]</a>.

   o  On each link, the reference rate for the excess-traffic-meter is
      configured to be equal to the PCN-admissible-rate for the link.

   o  The set of valid codepoint transitions is as shown in Sections
      5.2.1 and 5.2.3.1 of [<a href="rfc6660.html" title='"Encoding Three Pre-Congestion Notification (PCN) States in the IP Header Using a Single Diffserv Codepoint (DSCP)"'>RFC6660</a>].






<span class="grey">Charny, et al.                Experimental                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Node%20Behaviors"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Node Behaviors</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Overview"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Overview</span>

   This section describes the behavior of the PCN-ingress-node, PCN-
   egress-node, and the Decision Point (which MAY be collocated with the
   PCN-ingress-node).

   The PCN-egress-node collects the rates of not-marked and excess-
   traffic-marked PCN-traffic for each ingress-egress-aggregate and
   reports them to the Decision Point.  For a detailed description, see
   <a href="#section-3.2">Section 3.2</a>.

   The PCN-ingress-node enforces flow admission and termination
   decisions.  It also reports the rate of PCN-traffic sent to a given
   ingress-egress-aggregate when requested by the Decision Point.  For
   details, see <a href="#section-3.4">Section 3.4</a>.

   Finally, the Decision Point makes flow admission decisions and
   selects flows to terminate based on the information provided by the
   PCN-ingress-node and PCN-egress-node for a given ingress-egress-
   aggregate.  For details, see <a href="#section-3.3">Section 3.3</a>.

   Specification of a signaling protocol to report rates to the Decision
   Point is out of scope of this document.  If the PCN-ingress-node is
   chosen as the Decision Point, [<a href="#ref-RSVP-PCN" title='"Generic Aggregation of Resource ReSerVation Protocol (RSVP) for IPv4 And IPv6 Reservations over PCN domains"'>RSVP-PCN</a>] specifies an appropriate
   signaling protocol.

   <a href="#section-5.1.2">Section 5.1.2</a> describes how to derive the filters by means of which
   PCN-ingress-nodes and PCN-egress-nodes are able to classify incoming
   packets into ingress-egress-aggregates.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Behavior%20of%20the%20PCN-Egress-Node"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Behavior of the PCN-Egress-Node</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.%20%20Data%20Collection"></a><a class="selflink" href="#section-3.2.1" name="section-3.2.1">3.2.1</a>.  Data Collection</span>

   The PCN-egress-node needs to meter the PCN-traffic it receives in
   order to calculate the following rates for each ingress-egress-
   aggregate passing through it.  These rates SHOULD be calculated at
   the end of each measurement period based on the PCN-traffic observed
   during that measurement period.  The duration of a measurement period
   is equal to the configurable value T_meas.  For further information,
   see <a href="#section-3.5">Section 3.5</a>.

   o  NM-rate: octets per second of PCN-traffic in PCN-packets that are
      not-marked (i.e., marked with the NM codepoint);





<span class="grey">Charny, et al.                Experimental                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   o  ETM-rate: octets per second of PCN-traffic in PCN-packets that are
      excess-traffic-marked (i.e., marked with the ETM codepoint).

      Note: metering the PCN-traffic continuously and using equal-length
      measurement intervals minimizes the statistical variance
      introduced by the measurement process itself.  On the other hand,
      the operation of PCN is not affected if the starting and ending
      times of the measurement intervals for different ingress-egress-
      aggregates are different.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.2.%20%20Reporting%20the%20PCN%20Data"></a><a class="selflink" href="#section-3.2.2" name="section-3.2.2">3.2.2</a>.  Reporting the PCN Data</span>

   Unless the report suppression option described in <a href="#section-3.2.3">Section 3.2.3</a> is
   activated, the PCN-egress-node MUST report the latest values of NM-
   rate and ETM-rate to the Decision Point each time that it calculates
   them.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.3.%20%20Optional%20Report%20Suppression"></a><a class="selflink" href="#section-3.2.3" name="section-3.2.3">3.2.3</a>.  Optional Report Suppression</span>

   Report suppression MUST be provided as a configurable option, along
   with two configurable parameters, the CLE-reporting-threshold and the
   maximum report suppression interval T_maxsuppress.  The default value
   of the CLE-reporting-threshold is zero.  The CLE-reporting-threshold
   MUST NOT exceed the CLE-limit configured at the Decision Point.  For
   further information on T_maxsuppress, see <a href="#section-3.5">Section 3.5</a>.

   If the report suppression option is enabled, the PCN-egress-node MUST
   apply the following procedure to decide whether to send a report to
   the Decision Point, rather than sending a report automatically at the
   end of each measurement interval.

   1.  As well as the quantities NM-rate and ETM-rate, the PCN-egress-
       node MUST calculate the congestion level estimate (CLE) for each
       measurement interval.  The CLE is computed as:

          [<a id="ref-SM-specific" name="ref-SM-specific">SM-specific</a>]
          CLE = ETM-rate / (NM-rate + ETM-rate)

       if any PCN-traffic was observed, or CLE = 0 if all the rates are
       zero.

   2.  If the CLE calculated for the latest measurement interval is
       greater than the CLE-reporting-threshold and/or the CLE
       calculated for the immediately previous interval was greater than
       the CLE-reporting-threshold, then the PCN-egress-node MUST send a
       report to the Decision Point.  The contents of the report are
       described below.




<span class="grey">Charny, et al.                Experimental                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


          The reason for taking into account the CLE of the previous
          interval is to ensure that the Decision Point gets immediate
          feedback if the CLE has dropped below the CLE-reporting-
          threshold.  This is essential if the Decision Point is running
          the flow termination procedure and observing whether (further)
          flow termination is needed.  See <a href="#section-3.3.2">Section 3.3.2</a>.

   3.  If an interval T_maxsuppress has elapsed since the last report
       was sent to the Decision Point, then the PCN-egress-node MUST
       send a report to the Decision Point regardless of the CLE value.

   4.  If neither of the preceding conditions holds, the PCN-egress-node
       MUST NOT send a report for the latest measurement interval.

   Each report sent to the Decision Point when report suppression has
   been activated MUST contain the values of NM-rate, ETM-rate, and CLE
   that were calculated for the most recent measurement interval.

   The above procedure ensures that at least one report is sent per
   interval (T_maxsuppress + T_meas).  This demonstrates to the Decision
   Point that both the PCN-egress-node and the communication path
   between that node and the Decision Point are in operation.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20Behavior%20at%20the%20Decision%20Point"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  Behavior at the Decision Point</span>

   Operators can choose to use PCN procedures just for flow admission,
   or just for flow termination, or for both.  Decision Points MUST
   implement both mechanisms, but configurable options MUST be provided
   to activate or deactivate PCN-based flow admission and flow
   termination independently of each other at a given Decision Point.

   If PCN-based flow termination is enabled but PCN-based flow admission
   is not, flow termination operates as specified in this document.

      Logically, some other system of flow admission control is in
      operation, but the description of such a system is out of scope of
      this document and depends on local arrangements.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.3.1.%20%20Flow%20Admission"></a><a class="selflink" href="#section-3.3.1" name="section-3.3.1">3.3.1</a>.  Flow Admission</span>

   The Decision Point determines the PCN-admission-state for a given
   ingress-egress-aggregate each time it receives a report from the
   egress node.  It makes this determination on the basis of the
   congestion level estimate (CLE).  If the CLE is provided in the
   egress-node report, the Decision Point SHOULD use the reported value.
   If the CLE was not provided in the report, the Decision Point MUST
   calculate it based on the other values provided in the report, using
   the formula:



<span class="grey">Charny, et al.                Experimental                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


      [<a id="ref-SM-specific" name="ref-SM-specific">SM-specific</a>]
      CLE = ETM-rate / (NM-rate + ETM-rate)

   if any PCN-traffic was observed, or CLE = 0 if all the rates are
   zero.

   The Decision Point MUST compare the reported or calculated CLE to a
   configurable value, the CLE-limit.  If the CLE is less than the CLE-
   limit, the PCN-admission-state for that aggregate MUST be set to
   "admit"; otherwise, it MUST be set to "block".

   If the PCN-admission-state for a given ingress-egress-aggregate is
   "admit", the Decision Point SHOULD allow new flows to be admitted to
   that aggregate.  If the PCN-admission-state for a given ingress-
   egress-aggregate is "block", the Decision Point SHOULD NOT allow new
   flows to be admitted to that aggregate.  These actions MAY be
   modified by policy in specific cases, but such policy intervention
   risks defeating the purpose of using PCN.

   A performance study of this admission control method is presented in
   [<a href="#ref-MeLe12" title='"Performance of PCN-Based Admission Control under Challenging Conditions"'>MeLe12</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.3.2.%20%20Flow%20Termination"></a><a class="selflink" href="#section-3.3.2" name="section-3.3.2">3.3.2</a>.  Flow Termination</span>

   [<a id="ref-SM-specific" name="ref-SM-specific">SM-specific</a>] When the PCN-admission-state computed on the basis of
   the CLE is "block" for the given ingress-egress-aggregate, the
   Decision Point MUST request the PCN-ingress-node to provide an
   estimate of the rate (PCN-sent-rate) at which the PCN-ingress-node is
   receiving PCN-traffic that is destined for the given ingress-egress-
   aggregate.

      If the Decision Point is collocated with the PCN-ingress-node, the
      request and response are internal operations.

   The Decision Point MUST then wait, for both the requested rate from
   the PCN-ingress-node and the next report from the PCN-egress-node for
   the ingress-egress-aggregate concerned.  If this next egress-node
   report also includes a non-zero value for the ETM-rate, the Decision
   Point MUST determine the amount of PCN-traffic to terminate using the
   following steps:

   1.  [<a href="#ref-SM-specific" title='"block"'>SM-specific</a>] The sustainable aggregate rate (SAR) for the given
       ingress-egress-aggregate is estimated using the formula:

          SAR = U * NM-Rate






<span class="grey">Charny, et al.                Experimental                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


       for the latest reported interval, where U is a configurable
       factor greater than one and is the same for all ingress-egress-
       aggregates.  In effect, the value of the PCN-supportable-rate for
       each link is approximated by the expression

          U * PCN-admissible-rate

       rather than being calculated explicitly.

   2.  The amount of traffic to be terminated is the difference:

          PCN-sent-rate - SAR,

       where PCN-sent-rate is the value provided by the PCN-ingress-
       node.

   See <a href="#section-3.3.3">Section 3.3.3</a> for a discussion of appropriate actions if the
   Decision Point fails to receive a timely response to its request for
   the PCN-sent-rate.

   If the difference calculated in the second step is positive (traffic
   rate to be terminated), the Decision Point SHOULD select PCN-flows
   for termination.  To that end, the Decision Point MAY use upper rate
   limits for individual PCN-flows (known, e.g., from resource signaling
   used to establish the PCN-flows) and select a set of PCN-flows whose
   sum of upper rate limits is up to the traffic rate to be terminated.
   Then, these PCN-flows are terminated.  The use of upper limits on
   PCN-flow rates avoids over-termination.

   Termination may be continuously needed after consecutive measurement
   intervals for various reasons, e.g., if the used upper rate limits
   overestimate the actual flow rates.  For such cases it is RECOMMENDED
   that enough time elapses between successive termination events to
   allow the effects of previous termination events to be reflected in
   the measurements upon which the termination decisions are based;
   otherwise, over-termination may occur.  See [<a href="#ref-Satoh10" title='"Cause and Countermeasure of Overtermination for PCN-Based Flow Termination"'>Satoh10</a>] and Sections
   4.2 and 4.3 of [<a href="#ref-MeLe10" title='"PCN-Based Measured Rate Termination"'>MeLe10</a>].

   In general, the selection of flows for termination MAY be guided by
   policy.

   The Decision Point SHOULD log each round of termination as described
   in <a href="#section-5.2.1.2">Section 5.2.1.2</a>.








<span class="grey">Charny, et al.                Experimental                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.3.3.%20%20Decision%20Point%20Action%20for%20Missing%20PCN-Boundary-Node%20Reports"></a><a class="selflink" href="#section-3.3.3" name="section-3.3.3">3.3.3</a>.  Decision Point Action for Missing PCN-Boundary-Node Reports</span>

   The Decision Point SHOULD start a timer t_recvFail when it receives a
   report from the PCN-egress-node. t_recvFail is reset each time a new
   report is received from the PCN-egress-node. t_recvFail expires if it
   reaches the value T_fail.  T_fail is calculated according to the
   following logic:

   a.  T_fail = the configurable duration T_crit, if report suppression
       is not deployed;

   b.  T_fail = T_crit also if report suppression is deployed and the
       last report received from the PCN-egress-node contained a CLE
       value greater than CLE-reporting-threshold (<a href="#section-3.2.3">Section 3.2.3</a>);

   c.  T_fail = 3 * T_maxsuppress (<a href="#section-3.2.3">Section 3.2.3</a>) if report suppression
       is deployed and the last report received from the PCN-egress-node
       contained a CLE value less than or equal to CLE-reporting-
       threshold.

   If timer t_recvFail expires for a given PCN-egress-node, the Decision
   Point SHOULD notify management.  A log format is defined for that
   purpose in <a href="#section-5.2.1.1">Section 5.2.1.1</a>.  Other actions depend on local policy,
   but MAY include blocking of new flows destined for the PCN-egress-
   node concerned until another report is received from it.  Termination
   of already admitted flows is also possible, but could be triggered by
   "Destination unreachable" messages received at the PCN-ingress-node.

   If a centralized Decision Point sends a request for the estimated
   value of PCN-sent-rate to a given PCN-ingress-node and fails to
   receive a response in a reasonable amount of time, the Decision Point
   SHOULD repeat the request once.  [<a href="#ref-SM-specific" title='"block"'>SM-specific</a>] If the second request
   to the PCN-ingress-node also fails, the Decision Point SHOULD notify
   management.  The log format defined in <a href="#section-5.2.1.1">Section 5.2.1.1</a> is also
   suitable for this case.

      The response timer t_sndFail with upper bound T_crit is specified
      in <a href="#section-3.5">Section 3.5</a>.  The use of T_crit is an approximation.  A more
      precise limit would be on the order of two round-trip times, plus
      an allowance for processing at each end, plus an allowance for
      variance in these values.

   See <a href="#section-3.5">Section 3.5</a> for suggested values of the configurable durations
   T_crit and T_maxsuppress.







<span class="grey">Charny, et al.                Experimental                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.4.%20%20Behavior%20of%20the%20Ingress%20Node"></a><a class="selflink" href="#section-3.4" name="section-3.4">3.4</a>.  Behavior of the Ingress Node</span>

   The PCN-ingress-node MUST provide the estimated current rate of PCN-
   traffic received at that node and destined for a given ingress-
   egress-aggregate in octets per second (the PCN-sent-rate) when the
   Decision Point requests it.  The way this rate estimate is derived is
   a matter of implementation.

      For example, the rate that the PCN-ingress-node supplies can be
      based on a quick sample taken at the time the information is
      required.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.5.%20%20Summary%20of%20Timers%20and%20Associated%20Configurable%20Durations"></a><a class="selflink" href="#section-3.5" name="section-3.5">3.5</a>.  Summary of Timers and Associated Configurable Durations</span>

   Here is a summary of the timers used in the procedures just
   described:

   t_meas

         Where used: PCN-egress-node.

         Used in procedure: data collection (<a href="#section-3.2.1">Section 3.2.1</a>).

         Incidence: one per ingress-egress-aggregate.

         Reset: immediately on expiry.

         Expiry: when it reaches the configurable duration T_meas.

         Action on expiry: calculate NM-rate and ETM-rate and proceed to
         the applicable reporting procedure (<a href="#section-3.2.2">Section 3.2.2</a> or
         <a href="#section-3.2.3">Section 3.2.3</a>).

   t_maxsuppress

         Where used: PCN-egress-node.

         Used in procedure: report suppression (<a href="#section-3.2.3">Section 3.2.3</a>).

         Incidence: one per ingress-egress-aggregate.

         Reset: when the next report is sent, either after expiry or
         because the CLE has exceeded the reporting threshold.

         Expiry: when it reaches the configurable duration
         T_maxsuppress.





<span class="grey">Charny, et al.                Experimental                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


         Action on expiry: send a report to the Decision Point the next
         time the reporting procedure (<a href="#section-3.2.3">Section 3.2.3</a>) is invoked,
         regardless of the value of CLE.

   t_recvFail

         Where used: Decision Point.

         Used in procedure: failure detection (<a href="#section-3.3.3">Section 3.3.3</a>).

         Incidence: one per ingress-egress-aggregate.

         Reset: when a report is received for the ingress-egress-
         aggregate.

         Expiry: when it reaches the calculated duration T_fail.  As
         described in <a href="#section-3.3.3">Section 3.3.3</a>, T_fail is equal either to the
         configured duration T_crit or to the calculated value 3 *
         T_maxsuppress, where T_maxsuppress is a configured duration.

         Action on expiry: notify management, and possibly other
         actions.

   t_sndFail

         Where used: centralized Decision Point.

         Used in procedure: failure detection (<a href="#section-3.3.3">Section 3.3.3</a>).

         Incidence: only as required, one per outstanding request to a
         PCN-ingress-node.

         Started: when a request for the value of PCN-sent-traffic for a
         given ingress-egress-aggregate is sent to the PCN-ingress-node.

         Terminated without action: when a response is received before
         expiry.

         Expiry: when it reaches the configured duration T_crit.

         Action on expiry: as described in <a href="#section-3.3.3">Section 3.3.3</a>.










<span class="grey">Charny, et al.                Experimental                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.5.1.%20%20Recommended%20Values%20for%20the%20Configurable%20Durations"></a><a class="selflink" href="#section-3.5.1" name="section-3.5.1">3.5.1</a>.  Recommended Values for the Configurable Durations</span>

   The timers just described depend on three configurable durations,
   T_meas, T_maxsuppress, and T_crit.  The recommendations given below
   for the values of these durations are all related to the intended PCN
   reaction time of 1 to 3 seconds.  However, they are based on
   judgement rather than operational experience or mathematical
   derivation.

   The value of T_meas is RECOMMENDED to be on the order of 100 to 500
   ms to provide a reasonable trade-off between demands on network
   resources (PCN-egress-node and Decision Point processing, network
   bandwidth) and the time taken to react to impending congestion.

   The value of T_maxsuppress is RECOMMENDED to be on the order of 3 to
   6 seconds, for similar reasons to those for the choice of T_meas.

   The value of T_crit SHOULD NOT be less than 3 * T_meas.  Otherwise,
   it could cause too many management notifications due to transient
   conditions in the PCN-egress-node or along the signaling path.  A
   reasonable upper bound on T_crit is on the order of 3 seconds.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Specification%20of%20Diffserv%20Per-Domain%20Behavior"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Specification of Diffserv Per-Domain Behavior</span>

   This section provides the specification required by [<a href="rfc3086.html" title='"Definition of Differentiated Services Per Domain Behaviors and Rules for their Specification"'>RFC3086</a>] for a
   per-domain behavior.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Applicability"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Applicability</span>

   This section quotes [<a href="rfc5559.html" title='"Pre-Congestion Notification (PCN) Architecture"'>RFC5559</a>].

   The PCN SM boundary-node behavior specified in this document is
   applicable to inelastic traffic (particularly video and voice) where
   quality of service for admitted flows is protected primarily by
   admission control at the ingress to the domain.

   In exceptional circumstances (e.g., due to rerouting as a result of
   network failures) already admitted flows may be terminated to protect
   the quality of service of the remaining flows.  [<a href="#ref-SM-specific" title='"block"'>SM-specific</a>] The
   performance results in, e.g., [<a href="#ref-MeLe10" title='"PCN-Based Measured Rate Termination"'>MeLe10</a>], indicate that the SM boundary
   node behavior is more likely to terminate too many flows under such
   circumstances than the CL boundary-node behavior described in
   [<a href="rfc6661.html" title='"Pre-Congestion Notification (PCN) Boundary- Node Behavior for the Controlled Load (CL) Mode of Operation"'>RFC6661</a>].








<span class="grey">Charny, et al.                Experimental                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Technical%20Specification"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Technical Specification</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.1.%20%20Classification%20and%20Traffic%20Conditioning"></a><a class="selflink" href="#section-4.2.1" name="section-4.2.1">4.2.1</a>.  Classification and Traffic Conditioning</span>

   Packet classification and treatment at the PCN-ingress-node is
   described in <a href="rfc6660.html#section-5.1">Section 5.1 of [RFC6660]</a>.

   PCN packets are further classified as belonging or not belonging to
   an admitted flow.  PCN packets not belonging to an admitted flow are
   "blocked".  (See <a href="#section-1">Section 1</a> for an understanding of how this term is
   interpreted.)  Packets belonging to an admitted flow are policed to
   ensure that they adhere to the rate or flowspec that was negotiated
   during flow admission.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.2.%20%20PHB%20Configuration"></a><a class="selflink" href="#section-4.2.2" name="section-4.2.2">4.2.2</a>.  PHB Configuration</span>

   The PCN SM boundary-node behavior is a metering and marking behavior
   rather than a scheduling behavior.  As a result, while the encoding
   uses a single DSCP value, that value can vary from one deployment to
   another.  The PCN working group suggests using admission control for
   the following service classes (defined in [<a href="rfc4594.html" title='"Configuration Guidelines for DiffServ Service Classes"'>RFC4594</a>]):

   o  Telephony (EF)

   o  Real-time interactive (CS4)

   o  Broadcast Video (CS3)

   o  Multimedia Conferencing (AF4)

   For a fuller discussion, see <a href="rfc6660.html#appendix-A">Appendix A of [RFC6660]</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Attributes"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Attributes</span>

   The purpose of this per-domain behavior is to achieve low loss and
   jitter for the target class of traffic.  The design requirement for
   PCN was that recovery from overloads through the use of flow
   termination should happen within 1-3 seconds.  PCN probably performs
   better than that.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Parameters"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Parameters</span>

   The set of parameters that needs to be configured at each PCN-node
   and at the Decision Point is described in <a href="#section-5.1">Section 5.1</a>.







<span class="grey">Charny, et al.                Experimental                     [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20Assumptions"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  Assumptions</span>

   It is assumed that a specific portion of link capacity has been
   reserved for PCN-traffic.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6.%20%20Example%20Uses"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a>.  Example Uses</span>

   The PCN SM behavior may be used to carry real-time traffic,
   particularly voice and video.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.7.%20%20Environmental%20Concerns"></a><a class="selflink" href="#section-4.7" name="section-4.7">4.7</a>.  Environmental Concerns</span>

   The PCN SM per-domain behavior could theoretically interfere with the
   use of end-to-end ECN due to reuse of ECN bits for PCN marking.
   <a href="rfc6660.html#section-5.1">Section 5.1 of [RFC6660]</a> describes the actions that can be taken to
   protect ECN signaling.  <a href="#appendix-B">Appendix B</a> of that document provides further
   discussion of how ECN and PCN can coexist.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-4.8" name="section-4.8">4.8</a>.  Security Considerations</span>

   Please see the security considerations in [<a href="rfc5559.html" title='"Pre-Congestion Notification (PCN) Architecture"'>RFC5559</a>] as well as those
   in [<a href="rfc2474.html" title='"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers"'>RFC2474</a>] and [<a href="rfc2475.html" title='"An Architecture for Differentiated Services"'>RFC2475</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Operational%20and%20Management%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Operational and Management Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Deployment%20of%20the%20SM%20Edge%20Behavior"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Deployment of the SM Edge Behavior</span>

   Deployment of the PCN Single Marking edge behavior requires the
   following steps:

   o  selection of deployment options and global parameter values;

   o  derivation of per-node and per-link information;

   o  installation, but not activation, of parameters and policies at
      all of the nodes in the PCN-domain;

   o  activation and verification of all behaviors.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.1.%20%20Selection%20of%20Deployment%20Options%20and%20Global%20Parameters"></a><a class="selflink" href="#section-5.1.1" name="section-5.1.1">5.1.1</a>.  Selection of Deployment Options and Global Parameters</span>

   The first set of decisions affects the operation of the network as a
   whole.  To begin with, the operator needs to make basic design
   decisions such as whether the Decision Point is centralized or
   collocated with the PCN-ingress-nodes, and whether per-flow and
   aggregate resource signaling as described in [<a href="#ref-RSVP-PCN" title='"Generic Aggregation of Resource ReSerVation Protocol (RSVP) for IPv4 And IPv6 Reservations over PCN domains"'>RSVP-PCN</a>] is deployed
   in the network.  After that, the operator needs to decide:




<span class="grey">Charny, et al.                Experimental                     [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   o  whether PCN packets will be forwarded unencapsulated or in tunnels
      between the PCN-ingress-node and the PCN-egress-node.
      Encapsulation preserves incoming ECN settings and simplifies the
      PCN-egress-node's job when it comes to relating incoming packets
      to specific ingress-egress-aggregates, but lowers the path MTU and
      imposes the extra labor of encapsulation/decapsulation on the PCN-
      edge-nodes.

   o  which service classes will be subject to PCN control and what DSCP
      will be used for each.  (See <a href="rfc6660.html#appendix-A">[RFC6660] Appendix A</a> for advice on
      this topic.)

   o  the markings to be used at all nodes in the PCN-domain to indicate
      not-marked (NM) and excess-traffic-marked (ETM) PCN packets;

   o  the marking rules for re-marking PCN-traffic leaving the PCN-
      domain;

   o  whether PCN-based flow admission is enabled;

   o  whether PCN-based flow termination is enabled.

   The following parameters affect the operation of PCN itself.  The
   operator needs to choose:

   o  the value of CLE-limit if PCN-based flow admission is enabled.
      [<a href="#ref-SM-specific" title='"block"'>SM-specific</a>] It is RECOMMENDED that the CLE-limit for SM be set
      fairly low, on the order of 5%.

   o  the value of the collection interval T_meas.  For a recommended
      range of values, see <a href="#section-3.5.1">Section 3.5.1</a> above.

   o  whether report suppression is to be enabled at the PCN-egress-
      nodes and if so, the values of CLE-reporting-threshold and
      T_maxsuppress.  It is reasonable to leave CLE-reporting-threshold
      at its default value (zero, as specified in <a href="#section-3.2.3">Section 3.2.3</a>).  For a
      recommended range of values of T_maxsuppress, see <a href="#section-3.5.1">Section 3.5.1</a>
      above.

   o  the value of the duration T_crit, which the Decision Point uses in
      deciding whether communications with a given PCN-edge-node have
      failed.  For a recommended range of values of T_crit, see
      <a href="#section-3.5.1">Section 3.5.1</a> above.

   o  [<a href="#ref-SM-specific" title='"block"'>SM-specific</a>] The factor U that is used in the flow termination
      procedure (<a href="#section-3.3.2">Section 3.3.2</a>).  An operational definition for U is
      given in that section, but it may be thought of as a contingency
      factor providing a buffer to handle flow peaks above the aggregate



<span class="grey">Charny, et al.                Experimental                     [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


      levels expected when flows are admitted.  A reasonable value for U
      is between 1.2 and 2.  Larger values of U tend to cause more over-
      termination of traffic during peaks, but raise the average link
      utilization level.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.2.%20%20Specification%20of%20Node-%20and%20Link-Specific%20Parameters"></a><a class="selflink" href="#section-5.1.2" name="section-5.1.2">5.1.2</a>.  Specification of Node- and Link-Specific Parameters</span>

   Filters are required at both the PCN-ingress-node and the PCN-egress-
   node to classify incoming PCN packets by ingress-egress-aggregate.
   Because of the potential use of multipath routing in domains upstream
   of the PCN-domain, it is impossible to do such classification
   reliably at the PCN-egress-node based on the packet header contents
   as originally received at the PCN-ingress-node.  (Packets with the
   same header contents could enter the PCN-domain at multiple PCN-
   ingress-nodes.)  As a result, the only way to construct such filters
   reliably is to tunnel the packets from the PCN-ingress-node to the
   PCN-egress-node.

   The PCN-ingress-node needs filters in order to place PCN packets into
   the right tunnel in the first instance, and also to satisfy requests
   from the Decision Point for admission rates into specific ingress-
   egress-aggregates.  These filters select the PCN-egress-node, but not
   necessarily a specific path through the network to that node.  As a
   result, they are likely to be stable even in the face of failures in
   the network, except when the PCN-egress-node itself becomes
   unreachable.  If all PCN packets will be tunneled, the PCN-ingress-
   node also needs to know the address of the peer PCN-egress-node
   associated with each filter.

   Operators may wish to give some thought to the provisioning of
   alternate egress points for some or all ingress-egress-aggregates in
   case of failure of the PCN-egress-node.  This could require the
   setting up of standby tunnels to these alternate egress points.

   Each PCN-egress-node needs filters to classify incoming PCN packets
   by ingress-egress-aggregate, in order to gather measurements on a
   per-aggregate basis.  If tunneling is used, these filters are
   constructed on the basis of the identifier of the tunnel from which
   the incoming packet has emerged (e.g., the source address in the
   outer header if IP encapsulation is used).  The PCN-egress-node also
   needs to know the address of the Decision Point to which it sends
   reports for each ingress-egress-aggregate.

   A centralized Decision Point needs to have the address of the PCN-
   ingress-node corresponding to each ingress-egress-aggregate.
   Security considerations require that information also be prepared for
   a centralized Decision Point and each PCN-edge-node to allow them to
   authenticate each other.



<span class="grey">Charny, et al.                Experimental                     [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   Turning to link-specific parameters, the operator needs to derive a
   value for the PCN-admissible-rate on each link in the network.  The
   first two paragraphs of <a href="rfc5559.html#section-5.2.2">Section 5.2.2 of [RFC5559]</a> discuss how these
   values may be derived.  ([<a href="#ref-SM-specific" title='"block"'>SM-specific</a>] Confusingly, "PCN-admissible-
   rate" in the present context corresponds to "PCN-threshold-rate" in
   the cited paragraphs.)

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.3.%20%20Installation%20of%20Parameters%20and%20Policies"></a><a class="selflink" href="#section-5.1.3" name="section-5.1.3">5.1.3</a>.  Installation of Parameters and Policies</span>

   As discussed in the previous two sections, every PCN node needs to be
   provisioned with a number of parameters and policies relating to its
   behavior in processing incoming packets.  The Diffserv MIB [<a href="rfc3289.html" title='"Management Information Base for the Differentiated Services Architecture"'>RFC3289</a>]
   can be useful for this purpose, although it needs to be extended in
   some cases.  This MIB covers packet classification, metering,
   counting, policing, dropping, and marking.  The required extensions
   specifically include an encapsulation action following
   reclassification by ingress-egress-aggregate.  In addition, the MIB
   has to be extended to include objects for marking the ECN field in
   the outer header at the PCN-ingress-node and an extension to the
   classifiers to include the ECN field at PCN-interior and PCN-egress-
   nodes.  Finally, a new object may need to be defined at the PCN-
   interior-nodes to represent the packet-size-independent excess-
   traffic-marking metering algorithm.

   The value for the PCN-admissible-rate on each link on a node appears
   as a metering parameter.  Operators should take note of the need to
   deploy excess-traffic meters either on the ingress or the egress side
   of each interior link, but not both (Appendix B.2 of [<a href="rfc5670.html" title='"Metering and Marking Behaviour of PCN- Nodes"'>RFC5670</a>].

   The following additional information has to be configured by other
   means (e.g., additional MIBs, NETCONF models).

   At the PCN-egress-node:

   o  the measurement interval T_meas (units of ms, range 50 to 1000);

   o  whether report suppression is to be applied;

   o  if so, the interval T_maxsuppress (units of 100 ms, range 1 to
      100) and the CLE-reporting-threshold (units of tenths of one
      percent, range 0 to 1000, default value 0);

   o  the address of the PCN-ingress-node for each ingress-egress-
      aggregate, if the Decision Point is collocated with the PCN-
      ingress-node and [<a href="#ref-RSVP-PCN" title='"Generic Aggregation of Resource ReSerVation Protocol (RSVP) for IPv4 And IPv6 Reservations over PCN domains"'>RSVP-PCN</a>] is not deployed;

   o  the address of the centralized Decision Point to which it sends
      its reports, if there is one.



<span class="grey">Charny, et al.                Experimental                     [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   At the Decision Point:

   o  whether PCN-based flow admission is enabled;

   o  whether PCN-based flow termination is enabled;

   o  the value of CLE-limit (units of tenths of one percent, range 0 to
      1000);

   o  [<a href="#ref-SM-specific" title='"block"'>SM-specific</a>] the value of the factor U used in the flow
      termination procedure;

   o  the value of the interval T_crit (units of 100 ms, range 1 to
      100);

   o  whether report suppression is to be applied;

   o  if so, the interval T_maxsuppress (units of 100 ms, range 1 to
      100) and the CLE-reporting-threshold (units of tenths of one
      percent, range 0 to 1000, default value 0).  These MUST be the
      same values that are provisioned in the PCN-egress-nodes;

   o  if the Decision Point is centralized, the address of the PCN-
      ingress-node (and any other information needed to establish a
      security association) for each ingress-egress-aggregate.

   Depending on the testing strategy, it may be necessary to install the
   new configuration data in stages.  This is discussed further below.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.4.%20%20Activation%20and%20Verification%20of%20All%20Behaviors"></a><a class="selflink" href="#section-5.1.4" name="section-5.1.4">5.1.4</a>.  Activation and Verification of All Behaviors</span>

   It is certainly not within the scope of this document to advise on
   testing strategy, which operators undoubtedly have well in hand.
   Quite possibly an operator will prefer an incremental approach to
   activation and testing.  Implementing the PCN marking scheme at PCN-
   ingress-nodes, corresponding scheduling behavior in downstream nodes,
   and re-marking at the PCN-egress-nodes is a large enough step in
   itself to require thorough testing before going further.

   Testing will probably involve the injection of packets at individual
   nodes and tracking of how the node processes them.  This work can
   make use of the counter capabilities included in the Diffserv MIB.
   The application of these capabilities to the management of PCN is
   discussed in the next section.







<span class="grey">Charny, et al.                Experimental                     [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Management%20Considerations"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Management Considerations</span>

   This section focuses on the use of event logging and the use of
   counters supported by the Diffserv MIB [<a href="rfc3289.html" title='"Management Information Base for the Differentiated Services Architecture"'>RFC3289</a>] for the various
   monitoring tasks involved in management of a PCN network.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.%20%20Event%20Logging%20in%20the%20PCN-Domain"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a>.  Event Logging in the PCN-Domain</span>

   It is anticipated that event logging using SYSLOG [<a href="rfc5424.html" title='"The Syslog Protocol"'>RFC5424</a>] will be
   needed for fault management and potentially for capacity management.
   Implementations MUST be capable of generating logs for the following
   events:

   o  detection of loss of contact between a Decision Point and a PCN-
      edge-node, as described in <a href="#section-3.3.3">Section 3.3.3</a>;

   o  successful receipt of a report from a PCN-egress-node, following
      detection of loss of contact with that node;

   o  flow termination events.

   All of these logs are generated by the Decision Point.  There is a
   strong likelihood in the first and third cases that the events are
   correlated with network failures at a lower level.  This has
   implications for how often specific event types should be reported,
   so as not to contribute unnecessarily to log buffer overflow.
   Recommendations on this topic follow for each event report type.

   The field names (e.g., HOSTNAME, STRUCTURED-DATA) used in the
   following subsections are defined in [<a href="rfc5424.html" title='"The Syslog Protocol"'>RFC5424</a>].

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.1.%20%20Logging%20Loss%20and%20Restoration%20of%20Contact"></a><a class="selflink" href="#section-5.2.1.1" name="section-5.2.1.1">5.2.1.1</a>.  Logging Loss and Restoration of Contact</span>

   <a href="#section-3.3.3">Section 3.3.3</a> describes the circumstances under which the Decision
   Point may determine that it has lost contact, either with a PCN-
   ingress-node or a PCN-egress-node, due to failure to receive an
   expected report.  Loss of contact with a PCN-ingress-node is a case
   primarily applicable when the Decision Point is in a separate node.
   However, implementations MAY implement logging in the collocated case
   if the implementation is such that non-response to a request from the
   Decision Point function can occasionally occur due to processor load
   or other reasons.

   The log reporting the loss of contact with a PCN-ingress-node or PCN-
   egress-node MUST include the following content:

   o  The HOSTNAME field MUST identify the Decision Point issuing the
      log.



<span class="grey">Charny, et al.                Experimental                     [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   o  A STRUCTURED-DATA element MUST be present, containing parameters
      identifying the node for which an expected report has not been
      received and the type of report lost (ingress or egress).  It is
      RECOMMENDED that the SD-ID for the STRUCTURED-DATA element have
      the form "PCNNode" (without the quotes), which has been registered
      with IANA (see [<a href="rfc6661.html" title='"Pre-Congestion Notification (PCN) Boundary- Node Behavior for the Controlled Load (CL) Mode of Operation"'>RFC6661</a>] for more information).  The node
      identifier PARAM-NAME is RECOMMENDED to be "ID" (without the
      quotes).  The identifier itself is subject to the preferences
      expressed in <a href="rfc5424.html#section-6.2.4">Section 6.2.4 of [RFC5424]</a> for the HOSTNAME field.
      The report type PARAM-NAME is RECOMMENDED to be "RTyp" (without
      the quotes).  The PARAM-VALUE for the RTyp field MUST be either
      "ingr" or "egr".

   The following values are also RECOMMENDED for the indicated fields in
   this log, subject to local practice:

   o  PRI initially set to 115, representing a Facility value of (14)
      "log alert" and a Severity level of (3) "Error Condition".  Note
      that loss of contact with a PCN-egress-node implies that no new
      flows will be admitted to one or more ingress-egress-aggregates
      until contact is restored.  The reason a higher severity level
      (lower value) is not proposed for the initial log is because any
      corrective action would probably be based on alerts at a lower
      subsystem level.

   o  APPNAME set to "PCN" (without the quotes).

   o  MSGID set to "LOST" (without the quotes).

   If contact is not regained with a PCN-egress-node in a reasonable
   period of time (say, one minute), the log SHOULD be repeated, this
   time with a PRI value of 113, implying a Facility value of (14) "log
   alert" and a Severity value of (1) "Alert: action must be taken
   immediately".  The reasoning is that by this time, any more general
   conditions should have been cleared, and the problem lies
   specifically with the PCN-egress-node concerned and the PCN
   application in particular.

   Whenever a loss-of-contact log is generated for a PCN-egress-node, a
   log indicating recovery SHOULD be generated when the Decision Point
   next receives a report from the node concerned.  The log SHOULD have
   the same content as just described for the loss-of-contact log, with
   the following differences:

   o  PRI changes to 117, indicating a Facility value of (14) "log
      alert" and a Severity of (5) "Notice: normal but significant
      condition".




<span class="grey">Charny, et al.                Experimental                     [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   o  MSGID changes to "RECVD" (without the quotes).

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.2.%20%20Logging%20Flow%20Termination%20Events"></a><a class="selflink" href="#section-5.2.1.2" name="section-5.2.1.2">5.2.1.2</a>.  Logging Flow Termination Events</span>

   <a href="#section-3.3.2">Section 3.3.2</a> describes the process whereby the Decision Point
   decides that flow termination is required for a given ingress-egress-
   aggregate, calculates how much flow to terminate, and selects flows
   for termination.  This section describes a log that SHOULD be
   generated each time such an event occurs.  (In the case where
   termination occurs in multiple rounds, one log SHOULD be generated
   per round.)  The log may be useful in fault management, to indicate
   the service impact of a fault occurring in a lower-level subsystem.
   In the absence of network failures, it may also be used as an
   indication of an urgent need to review capacity utilization along the
   path of the ingress-egress-aggregate concerned.

   The log reporting a flow termination event MUST include the following
   content:

   o  The HOSTNAME field MUST identify the Decision Point issuing the
      log.

   o  A STRUCTURED-DATA element MUST be present, containing parameters
      identifying the ingress and egress nodes for the ingress-egress-
      aggregate concerned, indicating the total amount of flow being
      terminated, and giving the number of flows terminated to achieve
      that objective.

      It is RECOMMENDED that the SD-ID for the STRUCTURED-DATA element
      have the form: "PCNTerm" (without the quotes), which has been
      registered with IANA (see [<a href="rfc6661.html" title='"Pre-Congestion Notification (PCN) Boundary- Node Behavior for the Controlled Load (CL) Mode of Operation"'>RFC6661</a>] for more information).  The
      parameter identifying the ingress node for the ingress-egress-
      aggregate is RECOMMENDED to have PARAM-NAME "IngrID" (without the
      quotes).  The parameter identifying the egress node for the
      ingress-egress-aggregate is RECOMMENDED to have PARAM-NAME "EgrID"
      (without the quotes).  Both identifiers are subject to the
      preferences expressed in <a href="rfc5424.html#section-6.2.4">Section 6.2.4 of [RFC5424]</a> for the
      HOSTNAME field.

      The parameter giving the total amount of flow being terminated is
      RECOMMENDED to have PARAM-NAME "TermRate" (without the quotes).
      The PARAM-VALUE MUST be the target rate as calculated according to
      the procedures of <a href="#section-3.3.2">Section 3.3.2</a>, as an integer value in thousands
      of octets per second.  The parameter giving the number of flows
      selected for termination is RECOMMENDED to have PARAM-NAME "FCnt"
      (without the quotes).  The PARAM-VALUE for this parameter MUST be
      an integer, the number of flows selected.




<span class="grey">Charny, et al.                Experimental                     [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   The following values are also RECOMMENDED for the indicated fields in
   this log, subject to local practice:

   o  PRI initially set to 116, representing a Facility value of (14)
      "log alert" and a Severity level of (4) "Warning: warning
      conditions".

   o  APPNAME set to "PCN" (without the quotes).

   o  MSGID set to "TERM" (without the quotes).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2.%20%20Provision%20and%20Use%20of%20Counters"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a>.  Provision and Use of Counters</span>

   The Diffserv MIB [<a href="rfc3289.html" title='"Management Information Base for the Differentiated Services Architecture"'>RFC3289</a>] allows for the provision of counters along
   the various possible processing paths associated with an interface
   and flow direction.  It is RECOMMENDED that the PCN-nodes be
   instrumented as described below.  It is assumed that the cumulative
   counts so obtained will be collected periodically for use in
   debugging, fault management, and capacity management.

   PCN-ingress-nodes SHOULD provide the following counts for each
   ingress-egress-aggregate.  Since the Diffserv MIB installs counters
   by interface and direction, aggregation of counts over multiple
   interfaces may be necessary to obtain total counts by ingress-egress-
   aggregate.  It is expected that such aggregation will be performed by
   a central system rather than at the PCN-ingress-node.

   o  total PCN packets and octets that were received for that ingress-
      egress-aggregate but were dropped;

   o  total PCN packets and octets admitted to that aggregate.

   PCN-interior-nodes SHOULD provide the following counts for each
   interface, noting that a given packet MUST NOT be counted more than
   once as it passes through the node:

   o  total PCN packets and octets dropped;

   o  total PCN packets and octets forwarded without re-marking;

   o  total PCN packets and octets re-marked to excess-traffic-marked.

   PCN-egress-nodes SHOULD provide the following counts for each
   ingress-egress-aggregate.  As with the PCN-ingress-node, so with the
   PCN-egress-node it is expected that any necessary aggregation over
   multiple interfaces will be done by a central system.

   o  total not-marked PCN packets and octets received;



<span class="grey">Charny, et al.                Experimental                     [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   o  total excess-traffic-marked PCN packets and octets received.

   The following continuously cumulative counters SHOULD be provided as
   indicated, but require new MIBs to be defined.  If the Decision Point
   is not collocated with the PCN-ingress-node, the latter SHOULD
   provide a count of the number of requests for PCN-sent-rate received
   from the Decision Point and the number of responses returned to the
   Decision Point.  The PCN-egress-node SHOULD provide a count of the
   number of reports sent to each Decision Point.  Each Decision Point
   SHOULD provide the following:

   o  total number of requests for PCN-sent-rate sent to each PCN-
      ingress-node with which it is not collocated;

   o  total number of reports received from each PCN-egress-node;

   o  total number of loss-of-contact events detected for each PCN-
      boundary-node;

   o  total cumulative duration of "block" state in hundreds of
      milliseconds for each ingress-egress-aggregate;

   o  total number of rounds of flow termination exercised for each
      ingress-egress-aggregate.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   [<a id="ref-RFC5559" name="ref-RFC5559">RFC5559</a>] provides a general description of the security
   considerations for PCN.  This memo introduces one new consideration,
   related to the use of a centralized Decision Point.  The Decision
   Point itself is a trusted entity.  However, its use implies the
   existence of an interface on the PCN-ingress-node through which
   communication of policy decisions takes place.  That interface is a
   point of vulnerability that must be protected from denial-of-service
   attacks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Acknowledgements"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Acknowledgements</span>

   Ruediger Geib, Philip Eardley, and Bob Briscoe have helped to shape
   the present document with their comments.  Toby Moncaster gave a
   careful review to get it into shape for Working Group Last Call.

   Amongst the authors, Michael Menth deserves special mention for his
   constant and careful attention to both the technical content of this
   document and the manner in which it was expressed.






<span class="grey">Charny, et al.                Experimental                     [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


   David Harrington's careful AD review resulted not only in necessary
   changes throughout the document, but also the addition of the
   operations and management considerations (<a href="#section-5">Section 5</a>).

   Finally, reviews by Joel Halpern and Brian Carpenter helped to
   clarify how ingress-egress-aggregates are distinguished (Joel) and
   handling of packets that cannot be carried successfully as PCN-
   packets (Brian).  They also made other suggestions to improve the
   document, as did Stephen Farrell, Sean Turner, and Pete Resnick.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]   Bradner, S., "Key words for use in RFCs to Indicate
               Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2474" name="ref-RFC2474">RFC2474</a>]   Nichols, K., Blake, S., Baker, F., and D. Black,
               "Definition of the Differentiated Services Field (DS
               Field) in the IPv4 and IPv6 Headers", <a href="rfc2474.html">RFC 2474</a>,
               December 1998.

   [<a id="ref-RFC2475" name="ref-RFC2475">RFC2475</a>]   Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.,
               and W. Weiss, "An Architecture for Differentiated
               Services", <a href="rfc2475.html">RFC 2475</a>, December 1998.

   [<a id="ref-RFC3086" name="ref-RFC3086">RFC3086</a>]   Nichols, K. and B. Carpenter, "Definition of
               Differentiated Services Per Domain Behaviors and Rules
               for their Specification", <a href="rfc3086.html">RFC 3086</a>, April 2001.

   [<a id="ref-RFC3289" name="ref-RFC3289">RFC3289</a>]   Baker, F., Chan, K., and A. Smith, "Management
               Information Base for the Differentiated Services
               Architecture", <a href="rfc3289.html">RFC 3289</a>, May 2002.

   [<a id="ref-RFC5424" name="ref-RFC5424">RFC5424</a>]   Gerhards, R., "The Syslog Protocol", <a href="rfc5424.html">RFC 5424</a>,
               March 2009.

   [<a id="ref-RFC5559" name="ref-RFC5559">RFC5559</a>]   Eardley, P., "Pre-Congestion Notification (PCN)
               Architecture", <a href="rfc5559.html">RFC 5559</a>, June 2009.

   [<a id="ref-RFC5670" name="ref-RFC5670">RFC5670</a>]   Eardley, P., "Metering and Marking Behaviour of PCN-
               Nodes", <a href="rfc5670.html">RFC 5670</a>, November 2009.

   [<a id="ref-RFC6660" name="ref-RFC6660">RFC6660</a>]   Briscoe, B., Moncaster, T., and M. Menth, "Encoding Three
               Pre-Congestion Notification (PCN) States in the IP Header
               Using a Single Diffserv Codepoint (DSCP)", <a href="rfc6660.html">RFC 6660</a>,
               July 2012.




<span class="grey">Charny, et al.                Experimental                     [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-MeLe10" name="ref-MeLe10">MeLe10</a>]    Menth, M. and F. Lehrieder, "PCN-Based Measured Rate
               Termination", Computer Networks Journal (Elsevier), vol.
               54, no. 13, pp. 2099-2116, September 2010.

   [<a id="ref-MeLe12" name="ref-MeLe12">MeLe12</a>]    Menth, M. and F. Lehrieder, "Performance of PCN-Based
               Admission Control under Challenging Conditions", IEEE/
               ACM Transactions on Networking, vol. 20, no. 2,
               April 2012.

   [<a id="ref-RFC4594" name="ref-RFC4594">RFC4594</a>]   Babiarz, J., Chan, K., and F. Baker, "Configuration
               Guidelines for DiffServ Service Classes", <a href="rfc4594.html">RFC 4594</a>,
               August 2006.

   [<a id="ref-RFC6661" name="ref-RFC6661">RFC6661</a>]   Charny, A., Huang, F., Karagiannis, G., Menth, M., and T.
               Taylor, Ed., "Pre-Congestion Notification (PCN) Boundary-
               Node Behavior for the Controlled Load (CL) Mode of
               Operation", <a href="rfc6661.html">RFC 6661</a>, July 2012.

   [<a id="ref-RSVP-PCN" name="ref-RSVP-PCN">RSVP-PCN</a>]  Karagiannis, G. and A. Bhargava, "Generic Aggregation of
               Resource ReSerVation Protocol (RSVP) for IPv4 And IPv6
               Reservations over PCN domains", Work in Progress,
               July 2012.

   [<a id="ref-Satoh10" name="ref-Satoh10">Satoh10</a>]   Satoh, D. and H. Ueno, "Cause and Countermeasure of
               Overtermination for PCN-Based Flow Termination",
               Proceedings of IEEE Symposium on Computers and
               Communications (ISCC '10), pp. 155-161, Riccione, Italy,
               June 2010.





















<span class="grey">Charny, et al.                Experimental                     [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc6662.html">RFC 6662</a>              PCN SM Boundary-Node Behavior            July 2012</span>


Authors' Addresses

   Anna Charny
   USA

   EMail: anna@mwsm.com


   Xinyan (Joy) Zhang
   Cisco Systems
   300 Apollo Drive
   Chelmsford, MA  01824
   USA

   EMail: joyzhang@cisco.com


   Georgios Karagiannis
   University of Twente
   P.O. Box 217
   7500 AE Enschede,
   The Netherlands

   Phone: +31 53 4894099
   EMail: g.karagiannis@utwente.nl


   Michael Menth
   University of Tuebingen
   Sand 13
   72076 Tuebingen
   Germany

   Phone: +49-7071-2970505
   EMail: menth@uni-tuebingen.de


   Tom Taylor (editor)
   Huawei Technologies
   Ottawa
   Canada

   EMail: tom.taylor.stds@gmail.com








Charny, et al.                Experimental                     [Page 31]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6662 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:27 GMT --></html>