<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6049 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Apr 2015 16:01:17 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.114" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6049" name="DC.Identifier"/>
<meta content='This memo utilizes IP performance metrics that are applicable to both
complete paths and sub-paths, and it defines relationships to compose
a complete path metric from the sub-path metrics with some accuracy
with regard to the actual metrics. This is called "spatial
composition" in RFC 2330. The memo refers to the framework for metric
composition, and provides background and motivation for combining
metrics to derive others. The descriptions of several composed metrics
and statistics follow. [STANDARDS-TRACK]' name="DC.Description.Abstract"/>
<meta content="Morton, Al" name="DC.Creator"/>
<meta content="Stephan, Emile" name="DC.Creator"/>
<meta content="January, 2011" name="DC.Date.Issued"/>
<meta content="Spatial Composition of Metrics" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6049 - Spatial Composition of Metrics</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc6049.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc6049" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-ietf-ippm-spatial-composition" title="draft-ietf-ippm-spatial-composition">draft-ietf-ippm-s...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6049" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc6049" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Updated by: <a href="rfc6248.html">6248</a>                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                         A. Morton
Request for Comments: 6049                                     AT&amp;T Labs
Category: Standards Track                                     E. Stephan
ISSN: 2070-1721                                    France Telecom Orange
                                                            January 2011


                     <span class="h1">Spatial Composition of Metrics</span>

Abstract

   This memo utilizes IP performance metrics that are applicable to both
   complete paths and sub-paths, and it defines relationships to compose
   a complete path metric from the sub-path metrics with some accuracy
   with regard to the actual metrics.  This is called "spatial
   composition" in <a href="rfc2330.html">RFC 2330</a>.  The memo refers to the framework for
   metric composition, and provides background and motivation for
   combining metrics to derive others.  The descriptions of several
   composed metrics and statistics follow.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6049">http://www.rfc-editor.org/info/rfc6049</a>.


















<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="http://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in <a href="#section-4">Section 4</a>.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

























<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-4">4</a>
      <a href="#section-1.1">1.1</a>. Motivation .................................................<a href="#page-6">6</a>
      <a href="#section-1.2">1.2</a>. Requirements Language ......................................<a href="#page-6">6</a>
   <a href="#section-2">2</a>. Scope and Application ...........................................<a href="#page-6">6</a>
      <a href="#section-2.1">2.1</a>. Scope of Work ..............................................<a href="#page-6">6</a>
      <a href="#section-2.2">2.2</a>. Application ................................................<a href="#page-7">7</a>
      <a href="#section-2.3">2.3</a>. Incomplete Information .....................................<a href="#page-7">7</a>
   <a href="#section-3">3</a>. Common Specifications for Composed Metrics ......................<a href="#page-8">8</a>
      <a href="#section-3.1">3.1</a>. Name: Type-P ...............................................<a href="#page-8">8</a>
           <a href="#section-3.1.1">3.1.1</a>. Metric Parameters ...................................<a href="#page-8">8</a>
           <a href="#section-3.1.2">3.1.2</a>. Definition and Metric Units .........................<a href="#page-9">9</a>
           <a href="#section-3.1.3">3.1.3</a>. Discussion and Other Details ........................<a href="#page-9">9</a>
           <a href="#section-3.1.4">3.1.4</a>. Statistic ...........................................<a href="#page-9">9</a>
           <a href="#section-3.1.5">3.1.5</a>. Composition Function ................................<a href="#page-9">9</a>
           <a href="#section-3.1.6">3.1.6</a>. Statement of Conjecture and Assumptions ............<a href="#page-10">10</a>
           <a href="#section-3.1.7">3.1.7</a>. Justification of the Composition Function ..........<a href="#page-10">10</a>
           <a href="#section-3.1.8">3.1.8</a>. Sources of Deviation from the Ground Truth .........<a href="#page-10">10</a>
           <a href="#section-3.1.9">3.1.9</a>. Specific Cases where the Conjecture Might Fail .....<a href="#page-11">11</a>
           <a href="#section-3.1.10">3.1.10</a>. Application of Measurement Methodology ............<a href="#page-12">12</a>
   <a href="#section-4">4</a>. One-Way Delay Composed Metrics and Statistics ..................<a href="#page-12">12</a>
      <a href="#section-4.1">4.1</a>. Name: Type-P-Finite-One-way-Delay-&lt;Sample&gt;-Stream .........<a href="#page-12">12</a>
           <a href="#section-4.1.1">4.1.1</a>. Metric Parameters ..................................<a href="#page-12">12</a>
           <a href="#section-4.1.2">4.1.2</a>. Definition and Metric Units ........................<a href="#page-12">12</a>
           <a href="#section-4.1.3">4.1.3</a>. Discussion and Other Details .......................<a href="#page-13">13</a>
           <a href="#section-4.1.4">4.1.4</a>. Statistic ..........................................<a href="#page-13">13</a>
      <a href="#section-4.2">4.2</a>. Name: Type-P-Finite-Composite-One-way-Delay-Mean ..........<a href="#page-13">13</a>
           <a href="#section-4.2.1">4.2.1</a>. Metric Parameters ..................................<a href="#page-13">13</a>
           <a href="#section-4.2.2">4.2.2</a>. Definition and Metric Units of the Mean Statistic ..<a href="#page-14">14</a>
           <a href="#section-4.2.3">4.2.3</a>. Discussion and Other Details .......................<a href="#page-14">14</a>
           <a href="#section-4.2.4">4.2.4</a>. Statistic ..........................................<a href="#page-14">14</a>
           <a href="#section-4.2.5">4.2.5</a>. Composition Function: Sum of Means .................<a href="#page-14">14</a>
           <a href="#section-4.2.6">4.2.6</a>. Statement of Conjecture and Assumptions ............<a href="#page-15">15</a>
           <a href="#section-4.2.7">4.2.7</a>. Justification of the Composition Function ..........<a href="#page-15">15</a>
           <a href="#section-4.2.8">4.2.8</a>. Sources of Deviation from the Ground Truth .........<a href="#page-15">15</a>
           <a href="#section-4.2.9">4.2.9</a>. Specific Cases where the Conjecture Might Fail .....<a href="#page-15">15</a>
           <a href="#section-4.2.10">4.2.10</a>. Application of Measurement Methodology ............<a href="#page-16">16</a>
      <a href="#section-4.3">4.3</a>. Name: Type-P-Finite-Composite-One-way-Delay-Minimum .......<a href="#page-16">16</a>
           <a href="#section-4.3.1">4.3.1</a>. Metric Parameters ..................................<a href="#page-16">16</a>
           4.3.2. Definition and Metric Units of the Minimum
                  Statistic ..........................................<a href="#page-16">16</a>
           <a href="#section-4.3.3">4.3.3</a>. Discussion and Other Details .......................<a href="#page-16">16</a>
           <a href="#section-4.3.4">4.3.4</a>. Statistic ..........................................<a href="#page-16">16</a>
           <a href="#section-4.3.5">4.3.5</a>. Composition Function: Sum of Minima ................<a href="#page-16">16</a>
           <a href="#section-4.3.6">4.3.6</a>. Statement of Conjecture and Assumptions ............<a href="#page-17">17</a>
           <a href="#section-4.3.7">4.3.7</a>. Justification of the Composition Function ..........<a href="#page-17">17</a>
           <a href="#section-4.3.8">4.3.8</a>. Sources of Deviation from the Ground Truth .........<a href="#page-17">17</a>



<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


           <a href="#section-4.3.9">4.3.9</a>. Specific Cases where the Conjecture Might Fail .....<a href="#page-17">17</a>
           <a href="#section-4.3.10">4.3.10</a>. Application of Measurement Methodology ............<a href="#page-17">17</a>
   <a href="#section-5">5</a>. Loss Metrics and Statistics ....................................<a href="#page-18">18</a>
      5.1. Type-P-Composite-One-way-Packet-Loss-Empirical-Probability 18
           <a href="#section-5.1.1">5.1.1</a>. Metric Parameters ..................................<a href="#page-18">18</a>
           <a href="#section-5.1.2">5.1.2</a>. Definition and Metric Units ........................<a href="#page-18">18</a>
           <a href="#section-5.1.3">5.1.3</a>. Discussion and Other Details .......................<a href="#page-18">18</a>
           5.1.4. Statistic:
                  Type-P-One-way-Packet-Loss-Empirical-Probability ...<a href="#page-18">18</a>
           5.1.5. Composition Function: Composition of
                  Empirical Probabilities ............................<a href="#page-18">18</a>
           <a href="#section-5.1.6">5.1.6</a>. Statement of Conjecture and Assumptions ............<a href="#page-19">19</a>
           <a href="#section-5.1.7">5.1.7</a>. Justification of the Composition Function ..........<a href="#page-19">19</a>
           <a href="#section-5.1.8">5.1.8</a>. Sources of Deviation from the Ground Truth .........<a href="#page-19">19</a>
           <a href="#section-5.1.9">5.1.9</a>. Specific Cases where the Conjecture Might Fail .....<a href="#page-19">19</a>
           <a href="#section-5.1.10">5.1.10</a>. Application of Measurement Methodology ............<a href="#page-19">19</a>
   <a href="#section-6">6</a>. Delay Variation Metrics and Statistics .........................<a href="#page-20">20</a>
      <a href="#section-6.1">6.1</a>. Name: Type-P-One-way-pdv-refmin-&lt;Sample&gt;-Stream ...........<a href="#page-20">20</a>
           <a href="#section-6.1.1">6.1.1</a>. Metric Parameters ..................................<a href="#page-20">20</a>
           <a href="#section-6.1.2">6.1.2</a>. Definition and Metric Units ........................<a href="#page-20">20</a>
           <a href="#section-6.1.3">6.1.3</a>. Discussion and Other Details .......................<a href="#page-21">21</a>
           <a href="#section-6.1.4">6.1.4</a>. Statistics: Mean, Variance, Skewness, Quantile .....<a href="#page-21">21</a>
           <a href="#section-6.1.5">6.1.5</a>. Composition Functions ..............................<a href="#page-22">22</a>
           <a href="#section-6.1.6">6.1.6</a>. Statement of Conjecture and Assumptions ............<a href="#page-23">23</a>
           <a href="#section-6.1.7">6.1.7</a>. Justification of the Composition Function ..........<a href="#page-23">23</a>
           <a href="#section-6.1.8">6.1.8</a>. Sources of Deviation from the Ground Truth .........<a href="#page-23">23</a>
           <a href="#section-6.1.9">6.1.9</a>. Specific Cases where the Conjecture Might Fail .....<a href="#page-24">24</a>
           <a href="#section-6.1.10">6.1.10</a>. Application of Measurement Methodology ............<a href="#page-24">24</a>
   <a href="#section-7">7</a>. Security Considerations ........................................<a href="#page-24">24</a>
      <a href="#section-7.1">7.1</a>. Denial-of-Service Attacks .................................<a href="#page-24">24</a>
      <a href="#section-7.2">7.2</a>. User Data Confidentiality .................................<a href="#page-24">24</a>
      <a href="#section-7.3">7.3</a>. Interference with the Metrics .............................<a href="#page-24">24</a>
   <a href="#section-8">8</a>. IANA Considerations ............................................<a href="#page-25">25</a>
   <a href="#section-9">9</a>. Contributors and Acknowledgements ..............................<a href="#page-27">27</a>
   <a href="#section-10">10</a>. References ....................................................<a href="#page-28">28</a>
      <a href="#section-10.1">10.1</a>. Normative References .....................................<a href="#page-28">28</a>
      <a href="#section-10.2">10.2</a>. Informative References ...................................<a href="#page-28">28</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The IP Performance Metrics (IPPM) framework [<a href="rfc2330.html" title='"Framework for IP Performance Metrics"'>RFC2330</a>] describes two
   forms of metric composition: spatial and temporal.  The composition
   framework [<a href="rfc5835.html" title='"Framework for Metric Composition"'>RFC5835</a>] expands and further qualifies these original
   forms into three categories.  This memo describes spatial
   composition, one of the categories of metrics under the umbrella of
   the composition framework.





<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   Spatial composition encompasses the definition of performance metrics
   that are applicable to a complete path, based on metrics collected on
   various sub-paths.

   The main purpose of this memo is to define the deterministic
   functions that yield the complete path metrics using metrics of the
   sub-paths.  The effectiveness of such metrics is dependent on their
   usefulness in analysis and applicability with practical measurement
   methods.

   The relationships may involve conjecture, and [<a href="rfc2330.html" title='"Framework for IP Performance Metrics"'>RFC2330</a>] lists four
   points that the metric definitions should include:

   o  the specific conjecture applied to the metric and assumptions of
      the statistical model of the process being measured (if any; see
      <a href="rfc2330.html#section-12">[RFC2330], Section 12</a>),

   o  a justification of the practical utility of the composition in
      terms of making accurate measurements of the metric on the path,

   o  a justification of the usefulness of the composition in terms of
      making analysis of the path using A-frame concepts more effective,
      and

   o  an analysis of how the conjecture could be incorrect.

   Also, [<a href="rfc2330.html" title='"Framework for IP Performance Metrics"'>RFC2330</a>] gives an example using the conjecture that the delay
   of a path is very nearly the sum of the delays of the exchanges and
   clouds of the corresponding path digest.  This example is
   particularly relevant to those who wish to assess the performance of
   an inter-domain path without direct measurement, and the performance
   estimate of the complete path is related to the measured results for
   various sub-paths instead.

   Approximate functions between the sub-path and complete path metrics
   are useful, with knowledge of the circumstances where the
   relationships are/are not applicable.  For example, we would not
   expect that delay singletons from each sub-path would sum to produce
   an accurate estimate of a delay singleton for the complete path
   (unless all the delays were essentially constant -- very unlikely).
   However, other delay statistics (based on a reasonable sample size)
   may have a sufficiently large set of circumstances where they are
   applicable.








<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Motivation"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Motivation</span>

   One-way metrics defined in other RFCs (such as [<a href="rfc2679.html" title='"A One-way Delay Metric for IPPM"'>RFC2679</a>] and
   [<a href="rfc2680.html" title='"A One-way Packet Loss Metric for IPPM"'>RFC2680</a>]) all assume that the measurement can be practically carried
   out between the source and the destination of interest.  Sometimes
   there are reasons that the measurement cannot be executed from the
   source to the destination.  For instance, the measurement path may
   cross several independent domains that have conflicting policies,
   measurement tools and methods, and measurement time assignment.  The
   solution then may be the composition of several sub-path
   measurements.  This means each domain performs the one-way
   measurement on a sub-path between two nodes that are involved in the
   complete path, following its own policy, using its own measurement
   tools and methods, and using its own measurement timing.  Under the
   appropriate conditions, one can combine the sub-path one-way metric
   results to estimate the complete path one-way measurement metric with
   some degree of accuracy.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Requirements%20Language"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   In this memo, the characters "&lt;=" should be read as "less than or
   equal to" and "&gt;=" as "greater than or equal to".

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Scope%20and%20Application"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Scope and Application</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Scope%20of%20Work"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Scope of Work</span>

   For the primary IP Performance Metrics RFCs for loss [<a href="rfc2680.html" title='"A One-way Packet Loss Metric for IPPM"'>RFC2680</a>], delay
   [<a href="rfc2679.html" title='"A One-way Delay Metric for IPPM"'>RFC2679</a>], and delay variation [<a href="rfc3393.html" title='"IP Packet Delay Variation Metric for IP Performance Metrics (IPPM)"'>RFC3393</a>], this memo gives a set of
   metrics that can be composed from the same or similar sub-path
   metrics.  This means that the composition function may utilize:

   o  the same metric for each sub-path;

   o  multiple metrics for each sub-path (possibly one that is the same
      as the complete path metric);

   o  a single sub-path metric that is different from the complete path
      metric;

   o  different measurement techniques like active [<a href="rfc2330.html" title='"Framework for IP Performance Metrics"'>RFC2330</a>], [<a href="rfc3432.html" title='"Network performance measurement with periodic streams"'>RFC3432</a>]
      and passive [<a href="rfc5474.html" title='"A Framework for Packet Selection and Reporting"'>RFC5474</a>].





<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   We note a possibility: using a complete path metric and all but one
   sub-path metric to infer the performance of the missing sub-path,
   especially when the "last" sub-path metric is missing.  However, such
   de-composition calculations, and the corresponding set of issues they
   raise, are beyond the scope of this memo.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Application"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Application</span>

   The composition framework [<a href="rfc5835.html" title='"Framework for Metric Composition"'>RFC5835</a>] requires the specification of the
   applicable circumstances for each metric.  In particular, each
   section addresses whether the metric:

   o  Requires the same test packets to traverse all sub-paths or may
      use similar packets sent and collected separately in each
      sub-path.

   o  Requires homogeneity of measurement methodologies or can allow a
      degree of flexibility (e.g., active, active spatial division
      [<a href="rfc5644.html" title='"IP Performance Metrics (IPPM): Spatial and Multicast"'>RFC5644</a>], or passive methods produce the "same" metric).  Also,
      the applicable sending streams will be specified, such as Poisson,
      Periodic, or both.

   o  Needs information or access that will only be available within an
      operator's domain, or is applicable to inter-domain composition.

   o  Requires synchronized measurement start and stop times in all
      sub-paths or largely overlapping measurement intervals, or no
      timing requirements.

   o  Requires the assumption of sub-path independence with regard to
      the metric being defined/composed or other assumptions.

   o  Has known sources of inaccuracy/error and identifies the sources.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3.%20%20Incomplete%20Information"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a>.  Incomplete Information</span>

   In practice, when measurements cannot be initiated on a sub-path (and
   perhaps the measurement system gives up during the test interval),
   then there will not be a value for the sub-path reported, and the
   entire test result SHOULD be recorded as "undefined".  This case
   should be distinguished from the case where the measurement system
   continued to send packets throughout the test interval, but all were
   declared lost.

   When a composed metric requires measurements from sub-paths A, B, and
   C, and one or more of the sub-path results are undefined, then the
   composed metric SHOULD also be recorded as undefined.




<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Common%20Specifications%20for%20Composed%20Metrics"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Common Specifications for Composed Metrics</span>

   To reduce the redundant information presented in the detailed metrics
   sections that follow, this section presents the specifications that
   are common to two or more metrics.  The section is organized using
   the same subsections as the individual metrics, to simplify
   comparisons.

   Also, the index variables are represented as follows:

   o  m = index for packets sent.

   o  n = index for packets received.

   o  s = index for involved sub-paths.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Name%3A%20Type-P"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Name: Type-P</span>

   All metrics use the "Type-P" convention as described in [<a href="rfc2330.html" title='"Framework for IP Performance Metrics"'>RFC2330</a>].
   The rest of the name is unique to each metric.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.1.%20%20Metric%20Parameters"></a><a class="selflink" href="#section-3.1.1" name="section-3.1.1">3.1.1</a>.  Metric Parameters</span>

   o  Src, the IP address of a host.

   o  Dst, the IP address of a host.

   o  T, a time (start of test interval).

   o  Tf, a time (end of test interval).

   o  lambda, a rate in reciprocal seconds (for Poisson Streams).

   o  incT, the nominal duration of inter-packet interval, first bit to
      first bit (for Periodic Streams).

   o  dT, the duration of the allowed interval for Periodic Stream
      sample start times.

   o  T0, a time that MUST be selected at random from the interval
      [T, T + dT] to start generating packets and taking measurements
      (for Periodic Streams).

   o  TstampSrc, the wire time of the packet as measured at MP(Src)
      (measurement point at the source).

   o  TstampDst, the wire time of the packet as measured at MP(Dst),
      assigned to packets that arrive within a "reasonable" time.



<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   o  Tmax, a maximum waiting time for packets at the destination, set
      sufficiently long to disambiguate packets with long delays from
      packets that are discarded (lost); thus, the distribution of delay
      is not truncated.

   o  M, the total number of packets sent between T0 and Tf.

   o  N, the total number of packets received at Dst (sent between T0
      and Tf).

   o  S, the number of sub-paths involved in the complete Src-Dst path.

   o  Type-P, as defined in [<a href="rfc2330.html" title='"Framework for IP Performance Metrics"'>RFC2330</a>], which includes any field that may
      affect a packet's treatment as it traverses the network.

   In metric names, the term "&lt;Sample&gt;" is intended to be replaced by
   the name of the method used to define a sample of values of parameter
   TstampSrc.  This can be done in several ways, including:

   1.  Poisson: a pseudo-random Poisson process of rate lambda, whose
       values fall between T and Tf.  The time interval between
       successive values of TstampSrc will then average 1/lambda, as per
       [<a href="rfc2330.html" title='"Framework for IP Performance Metrics"'>RFC2330</a>].

   2.  Periodic: a Periodic stream process with pseudo-random start time
       T0 between T and dT, and nominal inter-packet interval incT, as
       per [<a href="rfc3432.html" title='"Network performance measurement with periodic streams"'>RFC3432</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.2.%20%20Definition%20and%20Metric%20Units"></a><a class="selflink" href="#section-3.1.2" name="section-3.1.2">3.1.2</a>.  Definition and Metric Units</span>

   This section is unique for every metric.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.3.%20%20Discussion%20and%20Other%20Details"></a><a class="selflink" href="#section-3.1.3" name="section-3.1.3">3.1.3</a>.  Discussion and Other Details</span>

   This section is unique for every metric.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.4.%20%20Statistic"></a><a class="selflink" href="#section-3.1.4" name="section-3.1.4">3.1.4</a>.  Statistic</span>

   This section is unique for every metric.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.5.%20%20Composition%20Function"></a><a class="selflink" href="#section-3.1.5" name="section-3.1.5">3.1.5</a>.  Composition Function</span>

   This section is unique for every metric.








<span class="grey">Morton &amp; Stephan             Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.6.%20%20Statement%20of%20Conjecture%20and%20Assumptions"></a><a class="selflink" href="#section-3.1.6" name="section-3.1.6">3.1.6</a>.  Statement of Conjecture and Assumptions</span>

   This section is unique for each metric.  The term "ground truth" is
   frequently used in these sections and is defined in <a href="rfc5835.html#section-4.7">Section 4.7 of
   [RFC5835]</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.7.%20%20Justification%20of%20the%20Composition%20Function"></a><a class="selflink" href="#section-3.1.7" name="section-3.1.7">3.1.7</a>.  Justification of the Composition Function</span>

   It is sometimes impractical to conduct active measurements between
   every Src-Dst pair.  Since the full mesh of N measurement points
   grows as N x N, the scope of measurement may be limited by testing
   resources.

   There may be varying limitations on active testing in different parts
   of the network.  For example, it may not be possible to collect the
   desired sample size in each test interval when access link speed is
   limited, because of the potential for measurement traffic to degrade
   the user traffic performance.  The conditions on a low-speed access
   link may be understood well enough to permit use of a small sample
   size/rate, while a larger sample size/rate may be used on other
   sub-paths.

   Also, since measurement operations have a real monetary cost, there
   is value in re-using measurements where they are applicable, rather
   than launching new measurements for every possible source-destination
   pair.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.8.%20%20Sources%20of%20Deviation%20from%20the%20Ground%20Truth"></a><a class="selflink" href="#section-3.1.8" name="section-3.1.8">3.1.8</a>.  Sources of Deviation from the Ground Truth</span>

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.1.8.1.%20%20Sub-Path%20List%20Differs%20from%20Complete%20Path"></a><a class="selflink" href="#section-3.1.8.1" name="section-3.1.8.1">3.1.8.1</a>.  Sub-Path List Differs from Complete Path</span>

   The measurement packets, each having source and destination addresses
   intended for collection at edges of the sub-path, may take a
   different specific path through the network equipment and links when
   compared to packets with the source and destination addresses of the
   complete path.  Example sources of parallel paths include Equal Cost
   Multi-Path and parallel (or bundled) links.  Therefore, the
   performance estimated from the composition of sub-path measurements
   may differ from the performance experienced by packets on the
   complete path.  Multiple measurements employing sufficient sub-path
   address pairs might produce bounds on the extent of this error.

   We also note the possibility of re-routing during a measurement
   interval, as it may affect the correspondence between packets
   traversing the complete path and the sub-paths that were "involved"
   prior to the re-route.





<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.1.8.2.%20%20Sub-Path%20Contains%20Extra%20Network%20Elements"></a><a class="selflink" href="#section-3.1.8.2" name="section-3.1.8.2">3.1.8.2</a>.  Sub-Path Contains Extra Network Elements</span>

   Related to the case of an alternate path described above is the case
   where elements in the measured path are unique to measurement system
   connectivity.  For example, a measurement system may use a dedicated
   link to a LAN switch, and packets on the complete path do not
   traverse that link.  The performance of such a dedicated link would
   be measured continuously, and its contribution to the sub-path
   metrics SHOULD be minimized as a source of error.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.1.8.3.%20%20Sub-Paths%20Have%20Incomplete%20Coverage"></a><a class="selflink" href="#section-3.1.8.3" name="section-3.1.8.3">3.1.8.3</a>.  Sub-Paths Have Incomplete Coverage</span>

   Measurements of sub-path performance may not cover all the network
   elements on the complete path.  For example, the network exchange
   points might be excluded unless a cooperative measurement is
   conducted.  In this example, test packets on the previous sub-path
   are received just before the exchange point, and test packets on the
   next sub-path are injected just after the same exchange point.
   Clearly, the set of sub-path measurements SHOULD cover all critical
   network elements in the complete path.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.1.8.4.%20%20Absence%20of%20Route"></a><a class="selflink" href="#section-3.1.8.4" name="section-3.1.8.4">3.1.8.4</a>.  Absence of Route</span>

   At a specific point in time, no viable route exists between the
   complete path source and destination.  The routes selected for one or
   more sub-paths therefore differ from the complete path.
   Consequently, spatial composition may produce finite estimation of a
   ground truth metric (see <a href="rfc5835.html#section-4.7">Section 4.7 of [RFC5835]</a>) between a source
   and a destination, even when the route between them is undefined.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.9.%20%20Specific%20Cases%20where%20the%20Conjecture%20Might%20Fail"></a><a class="selflink" href="#section-3.1.9" name="section-3.1.9">3.1.9</a>.  Specific Cases where the Conjecture Might Fail</span>

   This section is unique for most metrics (see the metric-specific
   sections).

   For delay-related metrics, one-way delay always depends on packet
   size and link capacity, since it is measured in [<a href="rfc2679.html" title='"A One-way Delay Metric for IPPM"'>RFC2679</a>] from first
   bit to last bit.  If the size of an IP packet changes on its route
   (due to encapsulation), this can influence delay performance.
   However, the main error source may be the additional processing
   associated with encapsulation and encryption/decryption if not
   experienced or accounted for in sub-path measurements.

   Fragmentation is a major issue for composition accuracy, since all
   metrics require all fragments to arrive before proceeding, and
   fragmented complete path performance is likely to be different from
   performance with non-fragmented packets and composed metrics based on
   non-fragmented sub-path measurements.



<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   Highly manipulated routing can cause measurement error if not
   expected and compensated for.  For example, policy-based MPLS routing
   could modify the class of service for the sub-paths and complete
   path.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.10.%20%20Application%20of%20Measurement%20Methodology"></a><a class="selflink" href="#section-3.1.10" name="section-3.1.10">3.1.10</a>.  Application of Measurement Methodology</span>

   o  The methodology SHOULD use similar packets sent and collected
      separately in each sub-path, where "similar" in this case means
      that Type-P contains as many equal attributes as possible, while
      recognizing that there will be differences.  Note that Type-P
      includes stream characteristics (e.g., Poisson, Periodic).

   o  The methodology allows a degree of flexibility regarding test
      stream generation (e.g., active or passive methods can produce an
      equivalent result, but the lack of control over the source,
      timing, and correlation of passive measurements is much more
      challenging).

   o  Poisson and/or Periodic streams are RECOMMENDED.

   o  The methodology applies to both inter-domain and intra-domain
      composition.

   o  The methodology SHOULD have synchronized measurement time
      intervals in all sub-paths, but largely overlapping intervals MAY
      suffice.

   o  Assumption of sub-path independence with regard to the metric
      being defined/composed is REQUIRED.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20One-Way%20Delay%20Composed%20Metrics%20and%20Statistics"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  One-Way Delay Composed Metrics and Statistics</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Name%3A%20Type-P-Finite-One-way-Delay-%3CSample%3E-Stream"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Name: Type-P-Finite-One-way-Delay-&lt;Sample&gt;-Stream</span>

   This metric is a necessary element of delay composition metrics, and
   its definition does not formally exist elsewhere in IPPM literature.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.1.%20%20Metric%20Parameters"></a><a class="selflink" href="#section-4.1.1" name="section-4.1.1">4.1.1</a>.  Metric Parameters</span>

   See the common parameters section (<a href="#section-3.1.1">Section 3.1.1</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.2.%20%20Definition%20and%20Metric%20Units"></a><a class="selflink" href="#section-4.1.2" name="section-4.1.2">4.1.2</a>.  Definition and Metric Units</span>

   Using the parameters above, we obtain the value of the Type-P-One-
   way-Delay singleton as per [<a href="rfc2679.html" title='"A One-way Delay Metric for IPPM"'>RFC2679</a>].





<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   For each packet "[i]" that has a finite one-way delay (in other
   words, excluding packets that have undefined one-way delay):

   Type-P-Finite-One-way-Delay-&lt;Sample&gt;-Stream[i] =

      FiniteDelay[i] = TstampDst - TstampSrc

   This metric is measured in units of time in seconds, expressed in
   sufficiently low resolution to convey meaningful quantitative
   information.  For example, resolution of microseconds is usually
   sufficient.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.3.%20%20Discussion%20and%20Other%20Details"></a><a class="selflink" href="#section-4.1.3" name="section-4.1.3">4.1.3</a>.  Discussion and Other Details</span>

   The "Type-P-Finite-One-way-Delay" metric permits calculation of the
   sample mean statistic.  This resolves the problem of including lost
   packets in the sample (whose delay is undefined) and the issue with
   the informal assignment of infinite delay to lost packets (practical
   systems can only assign some very large value).

   The Finite-One-way-Delay approach handles the problem of lost packets
   by reducing the event space.  We consider conditional statistics, and
   estimate the mean one-way delay conditioned on the event that all
   packets in the sample arrive at the destination (within the specified
   waiting time, Tmax).  This offers a way to make some valid statements
   about one-way delay, at the same time avoiding events with undefined
   outcomes.  This approach is derived from the treatment of lost
   packets in [<a href="rfc3393.html" title='"IP Packet Delay Variation Metric for IP Performance Metrics (IPPM)"'>RFC3393</a>], and is similar to [<a href="#ref-Y.1540" title='"Internet protocol data communication service - IP packet transfer and availability performance parameters"'>Y.1540</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.4.%20%20Statistic"></a><a class="selflink" href="#section-4.1.4" name="section-4.1.4">4.1.4</a>.  Statistic</span>

   All statistics defined in [<a href="rfc2679.html" title='"A One-way Delay Metric for IPPM"'>RFC2679</a>] are applicable to the finite one-
   way delay, and additional metrics are possible, such as the mean (see
   below).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Name%3A%20Type-P-Finite-Composite-One-way-Delay-Mean"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Name: Type-P-Finite-Composite-One-way-Delay-Mean</span>

   This section describes a statistic based on the Type-P-Finite-One-
   way-Delay-&lt;Sample&gt;-Stream metric.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.1.%20%20Metric%20Parameters"></a><a class="selflink" href="#section-4.2.1" name="section-4.2.1">4.2.1</a>.  Metric Parameters</span>

   See the common parameters section (<a href="#section-3.1.1">Section 3.1.1</a>).








<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.2.%20%20Definition%20and%20Metric%20Units%20of%20the%20Mean%20Statistic"></a><a class="selflink" href="#section-4.2.2" name="section-4.2.2">4.2.2</a>.  Definition and Metric Units of the Mean Statistic</span>

   We define

   Type-P-Finite-One-way-Delay-Mean =

                                     N
                                    ---
                               1    \
                   MeanDelay = - *   &gt;   (FiniteDelay [n])
                               N    /
                                    ---
                                   n = 1

   where all packets n = 1 through N have finite singleton delays.

   This metric is measured in units of time in seconds, expressed in
   sufficiently fine resolution to convey meaningful quantitative
   information.  For example, resolution of microseconds is usually
   sufficient.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.3.%20%20Discussion%20and%20Other%20Details"></a><a class="selflink" href="#section-4.2.3" name="section-4.2.3">4.2.3</a>.  Discussion and Other Details</span>

   The Type-P-Finite-One-way-Delay-Mean metric requires the conditional
   delay distribution described in <a href="#section-4.1.3">Section 4.1.3</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.4.%20%20Statistic"></a><a class="selflink" href="#section-4.2.4" name="section-4.2.4">4.2.4</a>.  Statistic</span>

   This metric, a mean, does not require additional statistics.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.5.%20%20Composition%20Function%3A%20Sum%20of%20Means"></a><a class="selflink" href="#section-4.2.5" name="section-4.2.5">4.2.5</a>.  Composition Function: Sum of Means</span>

   The Type-P-Finite-Composite-One-way-Delay-Mean, or CompMeanDelay, for
   the complete source to destination path can be calculated from the
   sum of the mean delays of all of its S constituent sub-paths.
















<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   Then the

   Type-P-Finite-Composite-One-way-Delay-Mean =

                                      S
                                     ---
                                     \
                    CompMeanDelay =   &gt;   (MeanDelay [s])
                                     /
                                     ---
                                    s = 1

   where sub-paths s = 1 to S are involved in the complete path.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.6.%20%20Statement%20of%20Conjecture%20and%20Assumptions"></a><a class="selflink" href="#section-4.2.6" name="section-4.2.6">4.2.6</a>.  Statement of Conjecture and Assumptions</span>

   The mean of a sufficiently large stream of packets measured on each
   sub-path during the interval [T, Tf] will be representative of the
   ground truth mean of the delay distribution (and the distributions
   themselves are sufficiently independent), such that the means may be
   added to produce an estimate of the complete path mean delay.

   It is assumed that the one-way delay distributions of the sub-paths
   and the complete path are continuous.  The mean of multi-modal
   distributions has the unfortunate property that such a value may
   never occur.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.7.%20%20Justification%20of%20the%20Composition%20Function"></a><a class="selflink" href="#section-4.2.7" name="section-4.2.7">4.2.7</a>.  Justification of the Composition Function</span>

   See the common section (<a href="#section-3">Section 3</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.8.%20%20Sources%20of%20Deviation%20from%20the%20Ground%20Truth"></a><a class="selflink" href="#section-4.2.8" name="section-4.2.8">4.2.8</a>.  Sources of Deviation from the Ground Truth</span>

   See the common section (<a href="#section-3">Section 3</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.9.%20%20Specific%20Cases%20where%20the%20Conjecture%20Might%20Fail"></a><a class="selflink" href="#section-4.2.9" name="section-4.2.9">4.2.9</a>.  Specific Cases where the Conjecture Might Fail</span>

   If any of the sub-path distributions are multi-modal, then the
   measured means may not be stable, and in this case the mean will not
   be a particularly useful statistic when describing the delay
   distribution of the complete path.

   The mean may not be a sufficiently robust statistic to produce a
   reliable estimate, or to be useful even if it can be measured.

   If a link contributing non-negligible delay is erroneously included
   or excluded, the composition will be in error.




<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.10.%20%20Application%20of%20Measurement%20Methodology"></a><a class="selflink" href="#section-4.2.10" name="section-4.2.10">4.2.10</a>.  Application of Measurement Methodology</span>

   The requirements of the common section (<a href="#section-3">Section 3</a>) apply here as
   well.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Name%3A%20Type-P-Finite-Composite-One-way-Delay-Minimum"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Name: Type-P-Finite-Composite-One-way-Delay-Minimum</span>

   This section describes a statistic based on the Type-P-Finite-One-
   way-Delay-&lt;Sample&gt;-Stream metric, and the composed metric based on
   that statistic.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.1.%20%20Metric%20Parameters"></a><a class="selflink" href="#section-4.3.1" name="section-4.3.1">4.3.1</a>.  Metric Parameters</span>

   See the common parameters section (<a href="#section-3.1.1">Section 3.1.1</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.2.%20%20Definition%20and%20Metric%20Units%20of%20the%20Minimum%20Statistic"></a><a class="selflink" href="#section-4.3.2" name="section-4.3.2">4.3.2</a>.  Definition and Metric Units of the Minimum Statistic</span>

   We define

   Type-P-Finite-One-way-Delay-Minimum =

               MinDelay = (FiniteDelay [j])

               such that for some index, j, where 1 &lt;= j &lt;= N
               FiniteDelay[j] &lt;= FiniteDelay[n] for all n

   where all packets n = 1 through N have finite singleton delays.

   This metric is measured in units of time in seconds, expressed in
   sufficiently fine resolution to convey meaningful quantitative
   information.  For example, resolution of microseconds is usually
   sufficient.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.3.%20%20Discussion%20and%20Other%20Details"></a><a class="selflink" href="#section-4.3.3" name="section-4.3.3">4.3.3</a>.  Discussion and Other Details</span>

   The Type-P-Finite-One-way-Delay-Minimum metric requires the
   conditional delay distribution described in <a href="#section-4.1.3">Section 4.1.3</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.4.%20%20Statistic"></a><a class="selflink" href="#section-4.3.4" name="section-4.3.4">4.3.4</a>.  Statistic</span>

   This metric, a minimum, does not require additional statistics.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.5.%20%20Composition%20Function%3A%20Sum%20of%20Minima"></a><a class="selflink" href="#section-4.3.5" name="section-4.3.5">4.3.5</a>.  Composition Function: Sum of Minima</span>

   The Type-P-Finite-Composite-One-way-Delay-Minimum, or CompMinDelay,
   for the complete source to destination path can be calculated from
   the sum of the minimum delays of all of its S constituent sub-paths.




<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   Then the

   Type-P-Finite-Composite-One-way-Delay-Minimum =

                                       S
                                      ---
                                      \
                     CompMinDelay =    &gt;  (MinDelay [s])
                                      /
                                      ---
                                     s = 1

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.6.%20%20Statement%20of%20Conjecture%20and%20Assumptions"></a><a class="selflink" href="#section-4.3.6" name="section-4.3.6">4.3.6</a>.  Statement of Conjecture and Assumptions</span>

   The minimum of a sufficiently large stream of packets measured on
   each sub-path during the interval [T, Tf] will be representative of
   the ground truth minimum of the delay distribution (and the
   distributions themselves are sufficiently independent), such that the
   minima may be added to produce an estimate of the complete path
   minimum delay.

   It is assumed that the one-way delay distributions of the sub-paths
   and the complete path are continuous.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.7.%20%20Justification%20of%20the%20Composition%20Function"></a><a class="selflink" href="#section-4.3.7" name="section-4.3.7">4.3.7</a>.  Justification of the Composition Function</span>

   See the common section (<a href="#section-3">Section 3</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.8.%20%20Sources%20of%20Deviation%20from%20the%20Ground%20Truth"></a><a class="selflink" href="#section-4.3.8" name="section-4.3.8">4.3.8</a>.  Sources of Deviation from the Ground Truth</span>

   See the common section (<a href="#section-3">Section 3</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.9.%20%20Specific%20Cases%20where%20the%20Conjecture%20Might%20Fail"></a><a class="selflink" href="#section-4.3.9" name="section-4.3.9">4.3.9</a>.  Specific Cases where the Conjecture Might Fail</span>

   If the routing on any of the sub-paths is not stable, then the
   measured minimum may not be stable.  In this case the composite
   minimum would tend to produce an estimate for the complete path that
   may be too low for the current path.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.10.%20%20Application%20of%20Measurement%20Methodology"></a><a class="selflink" href="#section-4.3.10" name="section-4.3.10">4.3.10</a>.  Application of Measurement Methodology</span>

   The requirements of the common section (<a href="#section-3">Section 3</a>) apply here as
   well.








<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Loss%20Metrics%20and%20Statistics"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Loss Metrics and Statistics</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Type-P-Composite-One-way-Packet-Loss-Empirical-Probability"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Type-P-Composite-One-way-Packet-Loss-Empirical-Probability</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.1.%20%20Metric%20Parameters"></a><a class="selflink" href="#section-5.1.1" name="section-5.1.1">5.1.1</a>.  Metric Parameters</span>

   See the common parameters section (<a href="#section-3.1.1">Section 3.1.1</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.2.%20%20Definition%20and%20Metric%20Units"></a><a class="selflink" href="#section-5.1.2" name="section-5.1.2">5.1.2</a>.  Definition and Metric Units</span>

   Using the parameters above, we obtain the value of the Type-P-One-
   way-Packet-Loss singleton and stream as per [<a href="rfc2680.html" title='"A One-way Packet Loss Metric for IPPM"'>RFC2680</a>].

   We obtain a sequence of pairs with elements as follows:

   o  TstampSrc, as above.

   o  L, either zero or one, where L = 1 indicates loss and L = 0
      indicates arrival at the destination within TstampSrc + Tmax.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.3.%20%20Discussion%20and%20Other%20Details"></a><a class="selflink" href="#section-5.1.3" name="section-5.1.3">5.1.3</a>.  Discussion and Other Details</span>

   None.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.4.%20%20Statistic%3A%20Type-P-One-way-Packet-Loss-Empirical-Probability"></a><a class="selflink" href="#section-5.1.4" name="section-5.1.4">5.1.4</a>.  Statistic: Type-P-One-way-Packet-Loss-Empirical-Probability</span>

   Given the stream parameter M, the number of packets sent, we can
   define the Empirical Probability of Loss Statistic (Ep), consistent
   with average loss in [<a href="rfc2680.html" title='"A One-way Packet Loss Metric for IPPM"'>RFC2680</a>], as follows:

   Type-P-One-way-Packet-Loss-Empirical-Probability =

                                        M
                                       ---
                                  1    \
                             Ep = - *   &gt;  (L[m])
                                  M    /
                                       ---
                                      m = 1

   where all packets m = 1 through M have a value for L.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.5.%20%20Composition%20Function%3A%20Composition%20of%20Empirical%20Probabilities"></a><a class="selflink" href="#section-5.1.5" name="section-5.1.5">5.1.5</a>.  Composition Function: Composition of Empirical Probabilities</span>

   The Type-P-One-way-Composite-Packet-Loss-Empirical-Probability, or
   CompEp, for the complete source to destination path can be calculated
   by combining the Ep of all of its constituent sub-paths (Ep1, Ep2,
   Ep3, ...  Epn) as



<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   Type-P-Composite-One-way-Packet-Loss-Empirical-Probability =

     CompEp = 1 - {(1 - Ep1) x (1 - Ep2) x (1 - Ep3) x ... x (1 - EpS)}

   If any Eps is undefined in a particular measurement interval,
   possibly because a measurement system failed to report a value, then
   any CompEp that uses sub-path s for that measurement interval is
   undefined.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.6.%20%20Statement%20of%20Conjecture%20and%20Assumptions"></a><a class="selflink" href="#section-5.1.6" name="section-5.1.6">5.1.6</a>.  Statement of Conjecture and Assumptions</span>

   The empirical probability of loss calculated on a sufficiently large
   stream of packets measured on each sub-path during the interval
   [T, Tf] will be representative of the ground truth empirical loss
   probability (and the probabilities themselves are sufficiently
   independent), such that the sub-path probabilities may be combined to
   produce an estimate of the complete path empirical loss probability.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.7.%20%20Justification%20of%20the%20Composition%20Function"></a><a class="selflink" href="#section-5.1.7" name="section-5.1.7">5.1.7</a>.  Justification of the Composition Function</span>

   See the common section (<a href="#section-3">Section 3</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.8.%20%20Sources%20of%20Deviation%20from%20the%20Ground%20Truth"></a><a class="selflink" href="#section-5.1.8" name="section-5.1.8">5.1.8</a>.  Sources of Deviation from the Ground Truth</span>

   See the common section (<a href="#section-3">Section 3</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.9.%20%20Specific%20Cases%20where%20the%20Conjecture%20Might%20Fail"></a><a class="selflink" href="#section-5.1.9" name="section-5.1.9">5.1.9</a>.  Specific Cases where the Conjecture Might Fail</span>

   A concern for loss measurements combined in this way is that root
   causes may be correlated to some degree.

   For example, if the links of different networks follow the same
   physical route, then a single catastrophic event like a fire in a
   tunnel could cause an outage or congestion on remaining paths in
   multiple networks.  Here it is important to ensure that measurements
   before the event and after the event are not combined to estimate the
   composite performance.

   Or, when traffic volumes rise due to the rapid spread of an email-
   borne worm, loss due to queue overflow in one network may help
   another network to carry its traffic without loss.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.10.%20%20Application%20of%20Measurement%20Methodology"></a><a class="selflink" href="#section-5.1.10" name="section-5.1.10">5.1.10</a>.  Application of Measurement Methodology</span>

   See the common section (<a href="#section-3">Section 3</a>).






<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Delay%20Variation%20Metrics%20and%20Statistics"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Delay Variation Metrics and Statistics</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Name%3A%20Type-P-One-way-pdv-refmin-%3CSample%3E-Stream"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Name: Type-P-One-way-pdv-refmin-&lt;Sample&gt;-Stream</span>

   This packet delay variation (PDV) metric is a necessary element of
   Composed Delay Variation metrics, and its definition does not
   formally exist elsewhere in IPPM literature (with the exception of
   [<a href="rfc5481.html" title='"Packet Delay Variation Applicability Statement"'>RFC5481</a>]).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.1.%20%20Metric%20Parameters"></a><a class="selflink" href="#section-6.1.1" name="section-6.1.1">6.1.1</a>.  Metric Parameters</span>

   In addition to the parameters of <a href="#section-3.1.1">Section 3.1.1</a>:

   o  TstampSrc[i], the wire time of packet[i] as measured at MP(Src)
      (measurement point at the source).

   o  TstampDst[i], the wire time of packet[i] as measured at MP(Dst),
      assigned to packets that arrive within a "reasonable" time.

   o  B, a packet length in bits.

   o  F, a selection function unambiguously defining the packets from
      the stream that are selected for the packet-pair computation of
      this metric.  F(current packet), the first packet of the pair,
      MUST have a valid Type-P-Finite-One-way-Delay less than Tmax (in
      other words, excluding packets that have undefined one-way delay)
      and MUST have been transmitted during the interval [T, Tf].  The
      second packet in the pair, F(min_delay packet) MUST be the packet
      with the minimum valid value of Type-P-Finite-One-way-Delay for
      the stream, in addition to the criteria for F(current packet).  If
      multiple packets have equal minimum Type-P-Finite-One-way-Delay
      values, then the value for the earliest arriving packet SHOULD be
      used.

   o  MinDelay, the Type-P-Finite-One-way-Delay value for F(min_delay
      packet) given above.

   o  N, the number of packets received at the destination that meet the
      F(current packet) criteria.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.2.%20%20Definition%20and%20Metric%20Units"></a><a class="selflink" href="#section-6.1.2" name="section-6.1.2">6.1.2</a>.  Definition and Metric Units</span>

   Using the definition above in <a href="#section-5.1.2">Section 5.1.2</a>, we obtain the value of
   Type-P-Finite-One-way-Delay-&lt;Sample&gt;-Stream[n], the singleton for
   each packet[i] in the stream (a.k.a. FiniteDelay[i]).






<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   For each packet[n] that meets the F(first packet) criteria given
   above: Type-P-One-way-pdv-refmin-&lt;Sample&gt;-Stream[n] =

      PDV[n] = FiniteDelay[n] - MinDelay

   where PDV[i] is in units of time in seconds, expressed in
   sufficiently fine resolution to convey meaningful quantitative
   information.  For example, resolution of microseconds is usually
   sufficient.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.3.%20%20Discussion%20and%20Other%20Details"></a><a class="selflink" href="#section-6.1.3" name="section-6.1.3">6.1.3</a>.  Discussion and Other Details</span>

   This metric produces a sample of delay variation normalized to the
   minimum delay of the sample.  The resulting delay variation
   distribution is independent of the sending sequence (although
   specific FiniteDelay values within the distribution may be
   correlated, depending on various stream parameters such as packet
   spacing).  This metric is equivalent to the IP Packet Delay Variation
   parameter defined in [<a href="#ref-Y.1540" title='"Internet protocol data communication service - IP packet transfer and availability performance parameters"'>Y.1540</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.4.%20%20Statistics%3A%20Mean%2C%20Variance%2C%20Skewness%2C%20Quantile"></a><a class="selflink" href="#section-6.1.4" name="section-6.1.4">6.1.4</a>.  Statistics: Mean, Variance, Skewness, Quantile</span>

   We define the mean PDV as follows (where all packets n = 1 through N
   have a value for PDV[n]):

   Type-P-One-way-pdv-refmin-Mean = MeanPDV =

                                   N
                                  ---
                             1    \
                             - *   &gt;   (PDV[n])
                             N    /
                                  ---
                                 n = 1

   We define the variance of PDV as follows:

   Type-P-One-way-pdv-refmin-Variance = VarPDV =

                               N
                              ---
                        1     \                      2
                     -------   &gt;   (PDV[n] - MeanPDV)
                     (N - 1)  /
                              ---
                             n = 1





<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   We define the skewness of PDV as follows:

   Type-P-One-way-pdv-refmin-Skewness = SkewPDV =

                         N
                        ---                        3
                        \     /                  \
                         &gt;   |  PDV[n] - MeanPDV  |
                        /     \                  /
                        ---
                       n = 1
                    -----------------------------------
                        /                         \
                       |                  ( 3/2 )  |
                        \ (N - 1) * VarPDV        /

   (See <a href="#appendix-X">Appendix X</a> of [<a href="#ref-Y.1541" title='"Network Performance Objectives for IP-based Services"'>Y.1541</a>] for additional background information.)

   We define the quantile of the PDV sample as the value where the
   specified fraction of singletons is less than the given value.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.5.%20%20Composition%20Functions"></a><a class="selflink" href="#section-6.1.5" name="section-6.1.5">6.1.5</a>.  Composition Functions</span>

   This section gives two alternative composition functions.  The
   objective is to estimate a quantile of the complete path delay
   variation distribution.  The composed quantile will be estimated
   using information from the sub-path delay variation distributions.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.1.5.1.%20%20Approximate%20Convolution"></a><a class="selflink" href="#section-6.1.5.1" name="section-6.1.5.1">6.1.5.1</a>.  Approximate Convolution</span>

   The Type-P-Finite-One-way-Delay-&lt;Sample&gt;-Stream samples from each
   sub-path are summarized as a histogram with 1-ms bins representing
   the one-way delay distribution.

   From [<a href="#ref-STATS" title='"Introduction to the Theory of Statistics, 3rd Edition"'>STATS</a>], the distribution of the sum of independent random
   variables can be derived using the relation:

   Type-P-Composite-One-way-pdv-refmin-quantile-a =

                       .  .
                      /  /
  P(X + Y + Z &lt;= a) = |  | P(X &lt;= a - y - z) * P(Y = y) * P(Z = z) dy dz
                      /  /
                     `  `
                     z  y






<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   Note that dy and dz indicate partial integration above, and that y
   and z are the integration variables.  Also, the probability of an
   outcome is indicated by the symbol P(outcome), where X, Y, and Z are
   random variables representing the delay variation distributions of
   the sub-paths of the complete path (in this case, there are three
   sub-paths), and "a" is the quantile of interest.

   This relation can be used to compose a quantile of interest for the
   complete path from the sub-path delay distributions.  The histograms
   with 1-ms bins are discrete approximations of the delay
   distributions.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.1.5.2.%20%20Normal%20Power%20Approximation%20%28NPA%29"></a><a class="selflink" href="#section-6.1.5.2" name="section-6.1.5.2">6.1.5.2</a>.  Normal Power Approximation (NPA)</span>

   Type-P-One-way-Composite-pdv-refmin-NPA for the complete source to
   destination path can be calculated by combining the statistics of all
   the constituent sub-paths in the process described in [<a href="#ref-Y.1541" title='"Network Performance Objectives for IP-based Services"'>Y.1541</a>],
   Clause 8 and <a href="#appendix-X">Appendix X</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.6.%20%20Statement%20of%20Conjecture%20and%20Assumptions"></a><a class="selflink" href="#section-6.1.6" name="section-6.1.6">6.1.6</a>.  Statement of Conjecture and Assumptions</span>

   The delay distribution of a sufficiently large stream of packets
   measured on each sub-path during the interval [T, Tf] will be
   sufficiently stationary, and the sub-path distributions themselves
   are sufficiently independent, so that summary information describing
   the sub-path distributions can be combined to estimate the delay
   distribution of the complete path.

   It is assumed that the one-way delay distributions of the sub-paths
   and the complete path are continuous.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.7.%20%20Justification%20of%20the%20Composition%20Function"></a><a class="selflink" href="#section-6.1.7" name="section-6.1.7">6.1.7</a>.  Justification of the Composition Function</span>

   See the common section (<a href="#section-3">Section 3</a>).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.8.%20%20Sources%20of%20Deviation%20from%20the%20Ground%20Truth"></a><a class="selflink" href="#section-6.1.8" name="section-6.1.8">6.1.8</a>.  Sources of Deviation from the Ground Truth</span>

   In addition to the common deviations, a few additional sources exist
   here.  For one, very tight distributions with ranges on the order of
   a few milliseconds are not accurately represented by a histogram with
   1-ms bins.  This size was chosen assuming an implicit requirement on
   accuracy: errors of a few milliseconds are acceptable when assessing
   a composed distribution quantile.

   Also, summary statistics cannot describe the subtleties of an
   empirical distribution exactly, especially when the distribution is
   very different from a classical form.  Any procedure that uses these
   statistics alone may incur error.



<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.9.%20%20Specific%20Cases%20where%20the%20Conjecture%20Might%20Fail"></a><a class="selflink" href="#section-6.1.9" name="section-6.1.9">6.1.9</a>.  Specific Cases where the Conjecture Might Fail</span>

   If the delay distributions of the sub-paths are somehow correlated,
   then neither of these composition functions will be reliable
   estimators of the complete path distribution.

   In practice, sub-path delay distributions with extreme outliers have
   increased the error of the composed metric estimate.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.10.%20%20Application%20of%20Measurement%20Methodology"></a><a class="selflink" href="#section-6.1.10" name="section-6.1.10">6.1.10</a>.  Application of Measurement Methodology</span>

   See the common section (<a href="#section-3">Section 3</a>).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Denial-of-Service%20Attacks"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Denial-of-Service Attacks</span>

   This metric requires a stream of packets sent from one host (source)
   to another host (destination) through intervening networks.  This
   method could be abused for denial-of-service attacks directed at the
   destination and/or the intervening network(s).

   Administrators of source, destination, and intervening networks
   should establish bilateral or multilateral agreements regarding the
   timing, size, and frequency of collection of sample metrics.  Use of
   this method in excess of the terms agreed upon between the
   participants may be cause for immediate rejection or discarding of
   packets, or other escalation procedures defined between the affected
   parties.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20User%20Data%20Confidentiality"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  User Data Confidentiality</span>

   Active use of this method generates packets for a sample, rather than
   taking samples based on user data, and does not threaten user data
   confidentiality.  Passive measurement MUST restrict attention to the
   headers of interest.  Since user payloads may be temporarily stored
   for length analysis, suitable precautions MUST be taken to keep this
   information safe and confidential.  In most cases, a hashing function
   will produce a value suitable for payload comparisons.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.3.%20%20Interference%20with%20the%20Metrics"></a><a class="selflink" href="#section-7.3" name="section-7.3">7.3</a>.  Interference with the Metrics</span>

   It may be possible to identify that a certain packet or stream of
   packets is part of a sample.  With that knowledge at the destination
   and/or the intervening networks, it is possible to change the






<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   processing of the packets (e.g., increasing or decreasing delay),
   which may distort the measured performance.  It may also be possible
   to generate additional packets that appear to be part of the sample
   metric.  These additional packets are likely to perturb the results
   of the sample measurement.

   To discourage the kind of interference mentioned above, packet
   interference checks, such as cryptographic hash, may be used.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  IANA Considerations</span>

   Metrics defined in the IETF are typically registered in the IANA IPPM
   Metrics Registry as described in the initial version of the registry
   [<a href="rfc4148.html" title='"IP Performance Metrics (IPPM) Metrics Registry"'>RFC4148</a>].

   IANA has registered the following metrics in the
   IANA-IPPM-METRICS-REGISTRY-MIB:

      ietfFiniteOneWayDelayStream OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-Finite-One-way-Delay-Stream"
         REFERENCE "<a href="rfc6049.html#section-4.1">RFC 6049, Section 4.1</a>."
         ::= { ianaIppmMetrics 71 }


      ietfFiniteOneWayDelayMean OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-Finite-One-way-Delay-Mean"
         REFERENCE "<a href="rfc6049.html#section-4.2">RFC 6049, Section 4.2</a>."
         ::= { ianaIppmMetrics 72 }


      ietfCompositeOneWayDelayMean OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-Finite-Composite-One-way-Delay-Mean"
         REFERENCE "<a href="rfc6049.html#section-4.2.5">RFC 6049, Section 4.2.5</a>."
         ::= { ianaIppmMetrics 73 }


      ietfFiniteOneWayDelayMinimum OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-Finite-One-way-Delay-Minimum"
         REFERENCE "<a href="rfc6049.html#section-4.3.2">RFC 6049, Section 4.3.2</a>."
         ::= { ianaIppmMetrics 74 }



<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


      ietfCompositeOneWayDelayMinimum OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-Finite-Composite-One-way-Delay-Minimum"
         REFERENCE "<a href="rfc6049.html#section-4.3">RFC 6049, Section 4.3</a>."
         ::= { ianaIppmMetrics 75 }


      ietfOneWayPktLossEmpiricProb OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-One-way-Packet-Loss-Empirical-Probability"
         REFERENCE "<a href="rfc6049.html#section-5.1.4">RFC 6049, Section 5.1.4</a>"
         ::= { ianaIppmMetrics 76 }


      ietfCompositeOneWayPktLossEmpiricProb OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-Composite-One-way-Packet-Loss-Empirical-Probability"
         REFERENCE "<a href="rfc6049.html#section-5.1">RFC 6049, Section 5.1</a>."
         ::= { ianaIppmMetrics 77 }


      ietfOneWayPdvRefminStream OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-One-way-pdv-refmin-Stream"
         REFERENCE "<a href="rfc6049.html#section-6.1">RFC 6049, Section 6.1</a>."
         ::= { ianaIppmMetrics 78 }


      ietfOneWayPdvRefminMean OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-One-way-pdv-refmin-Mean"
         REFERENCE "<a href="rfc6049.html#section-6.1.4">RFC 6049, Section 6.1.4</a>."
         ::= { ianaIppmMetrics 79 }


      ietfOneWayPdvRefminVariance OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-One-way-pdv-refmin-Variance"
         REFERENCE "<a href="rfc6049.html#section-6.1.4">RFC 6049, Section 6.1.4</a>."
         ::= { ianaIppmMetrics 80 }





<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


      ietfOneWayPdvRefminSkewness OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-One-way-pdv-refmin-Skewness"
         REFERENCE "<a href="rfc6049.html#section-6.1.4">RFC 6049, Section 6.1.4</a>."
         ::= { ianaIppmMetrics 81 }


      ietfCompositeOneWayPdvRefminQtil OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-Composite-One-way-pdv-refmin-quantile-a"
         REFERENCE "<a href="rfc6049.html#section-6.1.5.1">RFC 6049, Section 6.1.5.1</a>."
         ::= { ianaIppmMetrics 82 }


      ietfCompositeOneWayPdvRefminNPA OBJECT-IDENTITY
         STATUS current
         DESCRIPTION
            "Type-P-One-way-Composite-pdv-refmin-NPA"
         REFERENCE "<a href="rfc6049.html#section-6.1.5.2">RFC 6049, Section 6.1.5.2</a>."
         ::= { ianaIppmMetrics 83 }


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Contributors%20and%20Acknowledgements"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Contributors and Acknowledgements</span>

   The following people have contributed useful ideas, suggestions, or
   the text of sections that have been incorporated into this memo:

   - Phil Chimento &lt;vze275m9@verizon.net&gt;

   - Reza Fardid &lt;RFardid@cariden.com&gt;

   - Roman Krzanowski &lt;roman.krzanowski@verizon.com&gt;

   - Maurizio Molina &lt;maurizio.molina@dante.org.uk&gt;

   - Lei Liang &lt;L.Liang@surrey.ac.uk&gt;

   - Dave Hoeflin &lt;dhoeflin@att.com&gt;

   A long time ago, in a galaxy far, far away (Minneapolis), Will Leland
   suggested the simple and elegant Type-P-Finite-One-way-Delay concept.
   Thanks Will.

   Yaakov Stein and Donald McLachlan also provided useful comments along
   the way.




<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="http://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2330" name="ref-RFC2330">RFC2330</a>]  Paxson, V., Almes, G., Mahdavi, J., and M. Mathis,
              "Framework for IP Performance Metrics", <a href="rfc2330.html">RFC 2330</a>,
              May 1998.

   [<a id="ref-RFC2679" name="ref-RFC2679">RFC2679</a>]  Almes, G., Kalidindi, S., and M. Zekauskas, "A One-way
              Delay Metric for IPPM", <a href="rfc2679.html">RFC 2679</a>, September 1999.

   [<a id="ref-RFC2680" name="ref-RFC2680">RFC2680</a>]  Almes, G., Kalidindi, S., and M. Zekauskas, "A One-way
              Packet Loss Metric for IPPM", <a href="rfc2680.html">RFC 2680</a>, September 1999.

   [<a id="ref-RFC3393" name="ref-RFC3393">RFC3393</a>]  Demichelis, C. and P. Chimento, "IP Packet Delay Variation
              Metric for IP Performance Metrics (IPPM)", <a href="rfc3393.html">RFC 3393</a>,
              November 2002.

   [<a id="ref-RFC3432" name="ref-RFC3432">RFC3432</a>]  Raisanen, V., Grotefeld, G., and A. Morton, "Network
              performance measurement with periodic streams", <a href="rfc3432.html">RFC 3432</a>,
              November 2002.

   [<a id="ref-RFC4148" name="ref-RFC4148">RFC4148</a>]  Stephan, E., "IP Performance Metrics (IPPM) Metrics
              Registry", <a href="http://tools.ietf.org/html/bcp108">BCP 108</a>, <a href="rfc4148.html">RFC 4148</a>, August 2005.

   [<a id="ref-RFC5835" name="ref-RFC5835">RFC5835</a>]  Morton, A. and S. Van den Berghe, "Framework for Metric
              Composition", <a href="rfc5835.html">RFC 5835</a>, April 2010.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-RFC5474" name="ref-RFC5474">RFC5474</a>]  Duffield, N., Chiou, D., Claise, B., Greenberg, A.,
              Grossglauser, M., and J. Rexford, "A Framework for Packet
              Selection and Reporting", <a href="rfc5474.html">RFC 5474</a>, March 2009.

   [<a id="ref-RFC5481" name="ref-RFC5481">RFC5481</a>]  Morton, A. and B. Claise, "Packet Delay Variation
              Applicability Statement", <a href="rfc5481.html">RFC 5481</a>, March 2009.

   [<a id="ref-RFC5644" name="ref-RFC5644">RFC5644</a>]  Stephan, E., Liang, L., and A. Morton, "IP Performance
              Metrics (IPPM): Spatial and Multicast", <a href="rfc5644.html">RFC 5644</a>,
              October 2009.

   [<a id="ref-STATS" name="ref-STATS">STATS</a>]    Mood, A., Graybill, F., and D. Boes, "Introduction to the
              Theory of Statistics, 3rd Edition", McGraw-Hill, New York,
              NY, 1974.




<span class="grey">Morton &amp; Stephan             Standards Track                   [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc6049.html">RFC 6049</a>                   Spatial Composition              January 2011</span>


   [<a id="ref-Y.1540" name="ref-Y.1540">Y.1540</a>]   ITU-T Recommendation Y.1540, "Internet protocol data
              communication service - IP packet transfer and
              availability performance parameters", November 2007.

   [<a id="ref-Y.1541" name="ref-Y.1541">Y.1541</a>]   ITU-T Recommendation Y.1541, "Network Performance
              Objectives for IP-based Services", February 2006.

Authors' Addresses

   Al Morton
   AT&amp;T Labs
   200 Laurel Avenue South
   Middletown, NJ  07748
   USA

   Phone: +1 732 420 1571
   Fax:   +1 732 368 1192
   EMail: acmorton@att.com
   URI:   <a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a>


   Stephan Emile
   France Telecom Orange
   2 avenue Pierre Marzin
   Lannion,   F-22307
   France

   EMail: emile.stephan@orange-ftgroup.com























Morton &amp; Stephan             Standards Track                   [Page 29]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.114, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6049 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Apr 2015 16:01:17 GMT --></html>