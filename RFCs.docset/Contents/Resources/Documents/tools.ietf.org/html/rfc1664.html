<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc1664 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:57 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:1664" name="DC.Identifier"/>
<meta content="This memo defines how to store in the Internet Domain Name System the
mapping information needed by e-mail gateways and other tools to map
RFC822 domain names into X.400 O/R names and vice versa. This memo
defines an Experimental Protocol for the Internet community." name="DC.Description.Abstract"/>
<meta content="Cole, B." name="DC.Creator"/>
<meta content="Allocchio, C." name="DC.Creator"/>
<meta content="Bonito, A." name="DC.Creator"/>
<meta content="Hagens, R." name="DC.Creator"/>
<meta content="Giordano, S." name="DC.Creator"/>
<meta content="August, 1994" name="DC.Date.Issued"/>
<meta content="Using the Internet DNS to Distribute RFC1327 Mail Address Mapping Tables" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 1664 - Using the Internet DNS to Distribute RFC1327 Mail Address Mapping Tables</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgbrown" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc1664.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc1664" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-x400ops-dnsx400maps" title="draft-ietf-x400ops-dnsx400maps">draft-ietf-x400...</a>] [<a href="https://datatracker.ietf.org/doc/rfc1664" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc1664" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc1664" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Obsoleted by: <a href="rfc2163.html">2163</a>                                          EXPERIMENTAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                       C. Allocchio
Request for Comments: 1664                                     A. Bonito
Category: Experimental                                        GARR-Italy
                                                                 B. Cole
                                                      Cisco Systems Inc.
                                                             S. Giordano
                                     Centro Svizzero Calcolo Scientifico
                                                               R. Hagens
                                             Advanced Network &amp; Services
                                                             August 1994


                 <span class="h1">Using the Internet DNS to Distribute</span>
                  <span class="h1"><a href="rfc1327.html">RFC1327</a> Mail Address Mapping Tables</span>

Status of this Memo

   This memo defines an Experimental Protocol for the Internet
   community.  This memo does not specify an Internet standard of any
   kind.  Distribution of this memo is unlimited.

Abstract

   This memo defines how to store in the Internet Domain Name System the
   mapping information needed by e-mail gateways and other tools to map
   <a href="rfc822.html">RFC822</a> domain names into X.400 O/R names and vice versa.  Mapping
   information can be managed in a distributed rather than a centralised
   way. Gateways located on Internet hosts can retrieve the mapping
   information querying the DNS instead of having fixed tables which
   need to be centrally updated and distributed.  This memo is a joint
   effort of X400 operation working group (x400ops) and RARE Mail and
   Messaging working group (WG-MSG).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>. Introduction</span>

   The connectivity between the Internet SMTP mail and other mail
   services, including the Internet X.400 mail and the commercial X.400
   service providers, is assured by the Mail eXchanger (MX) record
   information distributed via the Internet Domain Name System (DNS). A
   number of documents then specify in details how to convert or encode
   addresses from/to <a href="rfc822.html">RFC822</a> style to the other mail system syntax.
   However, only conversion methods provide, via some algorithm or a set
   of mapping rules, a smooth translation, resulting in addresses
   indistinguishable from the native ones in both <a href="rfc822.html">RFC822</a> and foreign
   world.

   <a href="rfc1327.html">RFC1327</a> describes a set of mappings which will enable interworking
   between systems operating the CCITT X.400 (1984/88) Recommendations



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   and systems using the <a href="rfc822.html">RFC822</a> mail protocol, or protocols derived from
   <a href="rfc822.html">RFC822</a>. That document addresses conversion of services, addresses,
   message envelopes, and message bodies between the two mail systems.
   This document is concerned with one aspect of <a href="rfc1327.html">RFC1327</a>: the mechanism
   for mapping between X.400 O/R addresses and <a href="rfc822.html">RFC822</a> domain names. As
   described in <a href="rfc1327.html#appendix-F">Appendix F of RFC1327</a>, implementation of the mappings
   requires a database which maps between X.400 O/R addresses and domain
   names, and this database is statically defined.

   This approach requires many efforts to maintain the correct mapping:
   all the gateways need to get coherent tables to apply the same
   mappings, the conversion tables must be distributed among all the
   operational gateways, and also every update needs to be distributed.
   This static mechanism requires quite a long time to be spent
   modifying and distributing the information, putting heavy constraints
   on the time schedule of every update.  In fact it does not appear
   efficient compared to the Internet Domain Name Service (DNS).  More
   over it does not look feasible to distribute the database to a large
   number of other useful applications, like local address converters,
   e-mail User Agents or any other tool requiring the mapping rules to
   produce correct results.

   A first proposal to use the Internet DNS to store, retrieve and
   maintain those mappings was introduced by two of the authors (B. Cole
   and R. Hagens) adopting two new DNS resource record (RR)  types: TO-
   X400 and TO-822. This new proposal adopts a more complete strategy,
   and requires one new RR only. The distribution of the <a href="rfc1327.html">RFC1327</a> mapping
   rules via DNS is in fact an important service for the whole Internet
   community: it completes the information given by MX resource record
   and it allows to produce clean addresses when messages are exchanged
   among the Internet <a href="rfc822.html">RFC822</a> world and the X.400 one (both Internet and
   Public X.400 service providers).

   A first experiment in using the DNS without expanding the current set
   of RR and using available ones was in the mean time deployed by some
   of the authors. The existing PTR resource records were used to store
   the mapping rules, and a new DNS tree was created under the ".it" top
   level domain. The result of the experiment was positive, and a few
   test applications ran under this provisional set up. This test was
   also very useful in order to define a possible migration strategy
   during the deployment of the new DNS containing the new RR. The
   Internet DNS nameservers wishing to provide this mapping information
   need in fact to be modified to support the new RR type, and in the
   real Internet, due to the large number of different implementations,
   this takes some time.

   The basic idea is to adopt a new DNS RR to store the mapping
   information. The <a href="rfc822.html">RFC822</a> to X.400 mapping rules (including the so



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   called 'gate' rules) will be stored in the ordinary DNS tree, while
   the definition of a new branch of the name space defined under each
   national top level domain is envisaged in order to contain the X.400
   to <a href="rfc822.html">RFC822</a> mappings. A "two-way" mapping resolution schema is thus
   fully implemented.

   The creation of the new domain name space representing the X.400 O/R
   names structure also provides the chance to use the DNS to distribute
   dynamically other X.400 related information, thus solving other
   efficiency problems currently affecting the X.400 MHS service.

   In this paper we will adopt the <a href="rfc1327.html">RFC1327</a> mapping rules syntax, showing
   how it can be stored into the Internet DNS.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1%20Definitions%20syntax"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a> Definitions syntax</span>

   The definitions in this document is given in BNF-like syntax, using
   the following conventions:

      |   means choice
      \   is used for continuation of a definition over several lines
      []  means optional
      {}  means repeated one or more times

   The definitions, however, are detailed only until a certain level,
   and below it self-explaining character text strings will be used.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20Motivation"></a><a class="selflink" href="#section-2" name="section-2">2</a>. Motivation</span>

   Implementations of <a href="rfc1327.html">RFC1327</a> gateways require that a database store
   address mapping information for X.400 and <a href="rfc822.html">RFC822</a>. This information
   must be disseminated to all <a href="rfc1327.html">RFC1327</a> gateways. In the Internet
   community, the DNS has proven to be a practical mean for providing a
   distributed name service. Advantages of using a DNS based system over
   a table based approach for mapping between O/R addresses and domain
   names are:

     - It avoids fetching and storing of entire mapping tables by every
       host that wishes to implement <a href="rfc1327.html">RFC1327</a> gateways and/or tools

     - Modifications to the DNS based mapping information can be made
       available in a more timely manner than with a table driven
       approach.

     - It allows full authority delegation, in agreement with the
       Internet regionalization process.





<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


     - Table management is not necessarily required for DNS-based
       <a href="rfc1327.html">RFC1327</a> gateways.

     - One can determine the mappings in use by a remote gateway by
       querying the DNS (remote debugging).

   Also many other tools, like address converters and User Agents can
   take advantage of the real-time availability of <a href="rfc1327.html">RFC1327</a> tables,
   allowing a much easier maintenance of the information.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20The%20domain%20space%20for%20X.400%20O%2FR%20name%20addresses"></a><a class="selflink" href="#section-3" name="section-3">3</a>. The domain space for X.400 O/R name addresses</span>

   Usual domain names (the ones normally used as the global part of an
   <a href="rfc822.html">RFC822</a> e-mail address) and their associated information, i.e., host
   IP addresses, mail exchanger names, etc., are stored in the DNS as a
   distributed database under a number of top-level domains. Some top-
   level domains are used for traditional categories or international
   organisations (EDU, COM, NET, ORG, INT, MIL...). On the other hand
   any country has its own two letter ISO country code as top-level
   domain (FR, DE, GB, IT, RU, ...), including "US" for USA.  The
   special top-level/second-level couple IN-ADDR.ARPA is used to store
   the IP address to domain name relationship. Our proposal defines in
   the above structure the appropriate way to locate the X.400 O/R name
   space, thus enabling us to store in DNS the <a href="rfc1327.html">RFC1327</a> mapping data.

   The <a href="rfc1327.html">RFC1327</a> mapping information is composed by three tables: 'table1'
   gives the translation from X.400 to <a href="rfc822.html">RFC822</a> while 'table2' and 'gate'
   tables map <a href="rfc822.html">RFC822</a> into X.400. Each mapping table is composed by
   mapping rules, and a single mapping rule is composed by a keyword
   (the argument of the mapping function derived from the address to be
   translated) and a translator (the mapping function parameter):

                          keyword#translator#

   the '#' sign is a delimiter enclosing the translator. An example:

                foo.bar.us#PRMD$foo\.bar.ADMD$intx.C$us#

   Local mappings are not intended for use outside their restricted
   environment, thus they should not be included in DNS. If local
   mappings are used, they should be stored using static local tables,
   exactly as local static host tables can be used with DNS.

   The keyword of a 'table2' and 'gate' table entry is a valid <a href="rfc822.html">RFC822</a>
   domain; thus the usual domain name space can be used without problems
   to store these entries.





<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   On the other hand, the keyword of a 'table1' entry belongs to the
   X.400 O/R name space. The X.400 O/R name space does not usually fit
   into the usual domain name space, although there are a number of
   similarities; a new name structure is thus needed to represent it.
   This new name structure contains the X.400 mail domains.

   To ensure the correct functioning of the DNS system, the new X.400
   name structure must be hooked to the existing domain name space in a
   way which respects the existing name hierarchy.

   A possible solution was to create another special branch, starting
   from the root of the DNS tree, somehow similar to the in-addr.arpa
   tree. This idea would have required to establish a central authority
   to coordinate at international level the management of each national
   X.400 name tree, including the X.400 public service providers. This
   coordination problem is a heavy burden if approached globally. More
   over the X.400 name structure is very 'country oriented': thus while
   it requires a coordination at national level, it does not have
   concepts like the international root. In fact the X.400 international
   service is based  on a large number of bilateral agreements, and only
   within some communities an international coordination service exists.

   The X.400 two letter ISO country codes, however, are the same used
   for the <a href="rfc822.html">RFC822</a> country top-level domains and this gives us an
   appropriate hook to insert the new branches. Our proposal is, in
   fact, to create under each national top level ISO country code a new
   branch in the name space. This branch represents exactly the X.400
   O/R name structure as defined in each single country, following the
   ADMD, PRMD, O, OU hierarchy. A unique reserved label 'X42D' is placed
   under each country top-level domain, and hence the national X.400
   name space derives its own structure:




















<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


                                    . (root)
                                    |
      +-----------------+-----------+--------+-----------------+...
      |                 |                    |                 |
     edu                it                   us                fr
      |                 |                    |                 |
  +---+---+...    +-----+-----+...     +-----+-----+...     +--+---+...
  |       |       |     |     |        |     |     |        |      |
 ...     ...     cnr   X42D  infn      va    ca   X42D     X42D  inria
                        |                    |     |        |
           +------------+------------+...   ...   ...  +----+-------+...
           |            |            |                 |            |
    ADMD-PtPostel  ADMD-garr  ADMD-Master400        ADMD-atlas  ADMD-red
                        |            |                 |            |
             +----------+----+...   ...        +-------+------+... ...
             |               |                 |              |
         PRMD-infn       PRMD-STET        PRMD-Telecom   PRMD-Renault
             |               |                 |              |
            ...             ...               ...            ...


   The creation of the X.400 new name tree at national level solves the
   problem of the international coordination. Actually the coordination
   problem is just moved at national level, but it thus becomes easier
   to solve. The coordination at national level between the X.400
   communities and the Internet world is already a requirement for the
   creation of the national static <a href="rfc1327.html">RFC1327</a> mapping tables; the use of
   the Internet DNS gives further motivations for this coordination.

   The coordination at national level also fits in the ongoing proposal
   intended to define exactly the <a href="rfc1327.html">RFC1327</a> Mapping Authorities. The DNS
   in fact allows a step by step authority distribution, up to a final
   complete delegation, which can be easily controlled at national level
   accordingly with national needs and situations. A further advantage
   of the national based solution is to allow each country to set up its
   own X.400 name structure in DNS and to deploy its own authority
   delegation according to its local time scale and requirements, with
   no loss of global service in the mean time. And last, placing the new
   X.400 name tree and coordination process at national level fits into
   the Internet regionalization and internationalisation process, as it
   requires local bodies to take care of local coordination problems.

   The DNS name space thus contains completely the information required
   by an e-mail gateway or tool to perform the X.400-RFC822 mapping: a
   simple query to the nearest nameserver provides it. Moreover there is
   no more any need to store, maintain and distribute manually any
   mapping table. The new X.400 name space can also contain further
   information about the X.400 community, as DNS allows for it a



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   complete set of resource records, and thus it allows further
   developments. This set of RRs in the new X.400 name space must be
   considered 'reserved' and thus not used until further specifications.

   The construction of the new domain space trees will follow the same
   procedures used when organising at first the already existing DNS
   space: at first the information will be stored in a quite centralised
   way, and distribution of authority will be gradually achieved. A
   separate document will describe the implementation phase and the
   methods to assure a smooth introduction of the new service.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20The%20new%20DNS%20resource%20record%20for%20RFC1327%20mapping%20rules%3A%20PX"></a><a class="selflink" href="#section-4" name="section-4">4</a>. The new DNS resource record for <a href="rfc1327.html">RFC1327</a> mapping rules: PX</span>

   The specification of the Internet DNS (<a href="rfc1035.html">RFC1035</a>) provides a number of
   specific resource records (RRs) to contain specific pieces of
   information. In particular they contain the Mail eXchanger (MX) RR
   and the host Address (A) records which are used by the Internet SMTP
   mailers. As we will store the <a href="rfc822.html">RFC822</a> to X.400 mapping information in
   the already existing DNS name tree, we need to define a new DNS RR in
   order to avoid any possible clash or misuse of already existing data
   structures. The same new RR will also be used to store the mappings
   from X.400 to <a href="rfc822.html">RFC822</a>. More over the mapping information, i.e., the
   <a href="rfc1327.html">RFC1327</a> mapping rules, has a specific format and syntax which require
   an appropriate data structure and processing. A further advantage of
   defining a new RR is the ability to include flexibility for some
   eventual future development.

   The definition of the new 'PX' DNS resource record is:

      class:        IN   (Internet)

      name:         PX   (pointer to X.400/RFC822 mapping information)

      value:        26

   The PX RDATA format is:

          +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
          |                  PREFERENCE                   |
          +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
          /                    MAP822                     /
          /                                               /
          +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
          /                    MAPX400                    /
          /                                               /
          +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

   where:



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   PREFERENCE   A 16 bit integer which specifies the preference given to
                this RR among others at the same owner.  Lower values
                are preferred;

   MAP822       A &lt;domain-name&gt; element containing &lt;<a href="rfc822.html">rfc822</a>-domain&gt;, the
                <a href="rfc822.html">RFC822</a> part of the <a href="rfc1327.html">RFC1327</a> mapping information;

   MAPX400      A &lt;domain-name&gt; element containing the value of
                &lt;x400-in-domain-syntax&gt; derived from the X.400 part of
                the <a href="rfc1327.html">RFC1327</a> mapping information (see sect. 4.2);

   PX records cause no additional section processing. The PX RR format
   is the usual one:

             &lt;name&gt; [&lt;class&gt;] [&lt;TTL&gt;] &lt;type&gt; &lt;RDATA&gt;

   When we store in DNS a 'table1' entry, then &lt;name&gt; will be an X.400
   mail domain name in DNS syntax (see sect. 4.2). When we store a
   'table2' or a 'gate' table entry, &lt;name&gt; will be an <a href="rfc822.html">RFC822</a> mail
   domain name, including both fully qualified DNS domains and mail only
   domains (MX-only domains). All normal DNS conventions, like default
   values, wildcards, abbreviations and message compression, apply also
   for all the components of the PX RR. In particular &lt;name&gt;, MAP822 and
   MAPX400, as &lt;domain-name&gt; elements, must have the final "." (root)
   when they are fully qualified.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1%20Additional%20features%20of%20the%20PX%20resource%20record"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a> Additional features of the PX resource record</span>

   The definition of the RDATA for the PX resource record, and the fact
   that DNS allows a distinction between an exact value and a wildcard
   match for the &lt;name&gt; parameter, represent an extension of the <a href="rfc1327.html">RFC1327</a>
   specification for mapping rules. In fact, any <a href="rfc1327.html">RFC1327</a> mapping table
   entry is an implicit wildcard entry, i.e., the rule

      net2.it#PRMD$net2.ADMD$p400.C$it#

   covers any <a href="rfc822.html">RFC822</a> domain ending with 'net2.it', unless more detailed
   rules for some subdomain in 'net2.it' are present. Thus there is no
   possibility to specify explicitly an <a href="rfc1327.html">RFC1327</a> entry as an exact match
   only rule. In DNS an entry like

      *.net2.it.   IN  PX  10   net2.it.  PRMD-net2.ADMD-p400.C-it.

   specify the usual wildcard match as for <a href="rfc1327.html">RFC1327</a> tables. However an
   entry like

      ab.net2.it.  IN  PX  10   ab.net2.it.  O-ab.PRMD-net2.ADMDb.C-it.




<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   is valid only for an exact match of 'ab.net2.it' <a href="rfc822.html">RFC822</a> domain.

   Note also that in DNS syntax there is no '#' delimiter around MAP822
   and MAPX400 fields: the syntax defined in sect. 4.2 in fact does not
   allow the &lt;blank&gt; (ASCII decimal 32) character within these fields,
   making unneeded the use of an explicit delimiter as required in the
   <a href="rfc1327.html">RFC1327</a> original syntax.

   Another extension to the <a href="rfc1327.html">RFC1327</a> specifications is the PREFERENCE
   value defined as part of the PX RDATA section. This numeric value has
   exactly the same meaning than the similar one used for the MX RR. It
   is thus possible to specify more than one single mapping for a domain
   (both from <a href="rfc822.html">RFC822</a> to X.400 and vice versa), giving as the preference
   order. In <a href="rfc1327.html">RFC1327</a> static tables, however, you cannot specify more
   than one mapping per each <a href="rfc822.html">RFC822</a> domain, and the same restriction
   apply for any X.400 domain mapping to an <a href="rfc822.html">RFC822</a> one.

   More over, in the X.400 recommendations a note suggests than an
   ADMD=&lt;blank&gt; should be reserved for some special cases. Various
   national functional profile specifications for an X.400 MHS states
   that if an X.400 PRMD is reachable via any of its national ADMDs,
   independently of its actual single or multiple connectivity with
   them, it should use ADMD=&lt;blank&gt; to advertise this fact. Again, if a
   PRMD has no connections to any ADMD it should use ADMD=0 to notify
   its status, etc. However, in most of the current real situations, the
   ADMD service providers do not accept messages coming from their
   subscribers if they have a blank ADMD, forcing them to have their own
   ADMD value. In such a situation there are problems in indicating
   properly the actually working mappings for domains with multiple
   connectivity. The PX RDATA 'PREFERENCE' extension was introduced to
   take in consideration these problems.

   However, as these extensions are not available with <a href="rfc1327.html">RFC1327</a> static
   tables, it is strongly discouraged to use them when interworking with
   any table based gateway or application. The extensions were in fact
   introduced just to add more flexibility, like the PREFERENCE value,
   or they were already implicit in the DNS mechanism, like the wildcard
   specification. They should be used very carefully or just considered
   'reserved for future use'. In particular, for current use, the
   PREFERENCE value in the PX record specification should be fixed to a
   value of 50, and only wildcard specifications should be used when
   specifying &lt;name&gt; values.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2%20The%20DNS%20syntax%20for%20an%20X.400%20%27domain%27"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a> The DNS syntax for an X.400 'domain'</span>

   The syntax definition of the <a href="rfc1327.html">RFC1327</a> mapping rules is defined in
   <a href="#appendix-F">appendix F</a> of that document. However that syntax is not very human
   oriented and contains a number of characters which have a special



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   meaning in other fields of the Internet DNS. Thus in order to avoid
   any possible problem, especially due to some old DNS implementations
   still being used in the Internet, we define a syntax for the X.400
   part of any <a href="rfc1327.html">RFC1327</a> mapping rules (and hence for any X.400 O/R name)
   which makes it compatible with a &lt;domain-name&gt; element, i.e.,

   &lt;domain-name&gt;    ::= &lt;subdomain&gt; | " "
   &lt;subdomain&gt;      ::= &lt;label&gt; | &lt;label&gt; "." &lt;subdomain&gt;
   &lt;label&gt;          ::= &lt;alphanum&gt;|
                        &lt;alphanum&gt; {&lt;alphanumhyphen&gt;} &lt;alphanum&gt;
   &lt;alphanum&gt;       ::= "0".."9" | "A".."Z" | "a".."z"
   &lt;alphanumhyphen&gt; ::= "0".."9" | "A".."Z" | "a".."z" | "-"

   (see <a href="rfc1035.html#section-2.3.1">RFC1035, section 2.3.1</a>, page 8).  The legal character set for
   &lt;label&gt; does not correspond to the IA5 Printablestring one used in
   <a href="rfc1327.html">RFC1327</a> to define mapping rules. However a very simple "escape
   mechanism" can be applied in order to bypass the problem. We can in
   fact simply describe the X.400 part of an <a href="rfc1327.html">RFC1327</a> mapping rule format
   as:

     &lt;map-rule&gt;   ::= &lt;map-elem&gt; | &lt;map-elem&gt; { "." &lt;map-elem&gt; }
     &lt;map-elem&gt;   ::= &lt;attr-label&gt; "$" &lt;attr-value&gt;
     &lt;attr-label&gt; ::= "C" | "ADMD" | "PRMD" | "O" | "OU"
     &lt;attr-value&gt; ::= " " | "@" | IA5-Printablestring

   As you can notice &lt;domain-name&gt; and &lt;map-rule&gt; look similar, and also
   &lt;label&gt; and &lt;map-elem&gt; look the same. If we define the correct method
   to transform a &lt;map-elem&gt; into a &lt;label&gt; and vice versa the problem
   to write an <a href="rfc1327.html">RFC1327</a> mapping rule in &lt;domain-name&gt; syntax is solved.

   The <a href="rfc822.html">RFC822</a> domain part of any <a href="rfc1327.html">RFC1327</a> mapping rule is of course
   already in &lt;domain-name&gt; syntax, and thus remains unchanged.

   In particular, in a 'table1' mapping rule the 'keyword' value must be
   converted into &lt;x400-in-domain-syntax&gt; (X.400 mail DNS mail domain),
   while the 'translator' value is already a valid <a href="rfc822.html">RFC822</a> domain.  Vice
   versa in a 'table2' or 'gate' mapping rule, the 'translator' must be
   converted into &lt;x400-in-domain-syntax&gt;, while the 'keyword' is
   already a valid <a href="rfc822.html">RFC822</a> domain.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.1%20IA5-Printablestring%20to%20%3Calphanumhyphen%3E%20mappings"></a><a class="selflink" href="#section-4.2.1" name="section-4.2.1">4.2.1</a> IA5-Printablestring to &lt;alphanumhyphen&gt; mappings</span>

   The problem of unmatching IA5-Printablestring and &lt;label&gt; character
   set definition is solved by a simple character mapping rule: whenever
   an IA5 character does not belong to &lt;alphanumhyphen&gt;, then it is
   mapped using its 3 digit decimal ASCII code, enclosed in hyphens. A
   small set of special rules is also defined for the most frequent
   cases. Moreover some frequent characters combinations used in <a href="rfc1327.html">RFC1327</a>



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   rules are also mapped as special cases.

   Let's then define the following simple rules:

    <a href="rfc1327.html">RFC1327</a> rule          DNS store translation    conditions
    -----------------------------------------------------------------
    &lt;attr-label&gt;$@        &lt;attr-label&gt;             missing attribute
    &lt;attr-label&gt;$&lt;blank&gt;  &lt;attr-label&gt;"b"          blank attribute
    &lt;attr-label&gt;$xxx      &lt;attr-label&gt;-xxx         elsewhere

   Non &lt;alphanumhyphen&gt; characters in &lt;attr-value&gt;:

    <a href="rfc1327.html">RFC1327</a> rule          DNS store translation    conditions
    -----------------------------------------------------------------
    -                     -h-                      hyphen
    \.                    -d-                      quoted dot
    &lt;blank&gt;               -b-                      blank
    &lt;non A/N character&gt;   -&lt;3digit-decimal&gt;-       elsewhere

   If the DNS store translation of &lt;attr-value&gt; happens to end with an
   hyphen, then this last hyphen is omitted.

   Let's now have some examples:

    <a href="rfc1327.html">RFC1327</a> rule          DNS store translation    conditions
    -----------------------------------------------------------------
    PRMD$@                PRMD                     missing attribute
    ADMD$&lt;blank&gt;          ADMDb                    blank attribute
    ADMD$400-net          ADMD-400-h-net           hyphen mapping
    PRMD$UK\.BD           PRMD-UK-d-BD             quoted dot mapping
    O$ACME Inc\.          O-ACME-b-Inc-d           blank &amp; final hyphen
    PRMD$main-400-a       PRMD-main-h-400-h-a      hyphen mapping
    O$-123-b              O--h-123-h-b             hyphen mapping
    OU$123-x              OU-123-h-x               hyphen mapping
    PRMD$Adis+co          PRMD-Adis-043-co         3digit mapping

   Thus, an X.400 part from an <a href="rfc1327.html">RFC1327</a> mapping rule like

     OU$uuu.O$@.PRMD$ppp\.rrr.ADMD$aaa ddd-mmm.C$cc

   translates to

     OU-uuu.O.PRMD-ppp-d-rrr.ADMD-aaa-b-ddd-h-mmm.C-cc

 Another example:

     OU$sales dept\..O$@.PRMD$ACME.ADMD$ .C$GB




<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   translates to

     OU-sales-b-dept-d.O.PRMD-ACME.ADMDb.C-GB

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.2%20Flow%20chart"></a><a class="selflink" href="#section-4.2.2" name="section-4.2.2">4.2.2</a> Flow chart</span>

   In order to achieve the proper DNS store translations of the X.400
   part of an <a href="rfc1327.html">RFC1327</a> mapping rules or any other X.400 O/R name, some
   software tools will be used. It is in fact evident that the above
   rules for converting mapping table from <a href="rfc1327.html">RFC1327</a> to DNS format (and
   vice versa) are not user friendly enough to think of a human made
   conversion.

   To help in designing such tools, we describe hereunder a small flow
   chart. The fundamental rule to be applied during translation is,
   however, the following:

      "A string must be parsed from left to right, moving appropriately
      the pointer in order not to consider again the already translated
      left section of the string in subsequent analysis."

   Flow chart 1 - Translation from <a href="rfc1327.html">RFC1327</a> to DNS format:


                 parse  single attribute
              (enclosed in "." separators)
                           |
            (yes)  ---  &lt;label&gt;$@ ?  ---  (no)
              |                             |
        map to &lt;label&gt;        (no)  &lt;label&gt;$&lt;blank&gt; ?  (yes)
              |                 |                        |
              |           map to &lt;label&gt;-        map to &lt;label&gt;"b"
              |                 |                        |
              |           map "\." to -d-                |
              |                 |                        |
              |           map "-" to -h-                 |
              |                 |                        |
              |    map non A/N char to -&lt;3digit&gt;-        |
  restart     |                 |                        |
     ^        |      remove (if any) last "-"            |
     |        |                 |                        |
     |        \-------&gt;     add a  "."    &lt;--------------/
     |                          |
     \----------  take  next  attribute  (if  any)







<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   Flow chart 2 - Translation from DNS to <a href="rfc1327.html">RFC1327</a> format:


                parse single attribute
            (enclosed in "." separators)
                          |
            (yes) ---- &lt;label&gt; ? ---- (no)
              |                          |
      map to &lt;label&gt;$@        (no) &lt;label&gt;"b" ? (yes)
              |                 |                 |
              |           map to &lt;label&gt;$    map to &lt;label&gt;$&lt;blank&gt;
              |                 |                 |
              |           map -d- to "\."         |
              |                 |                 |
              |           map -h- to "-"          |
              |                 |                 |
              |           map -b- to " "          |
  restart     |                 |                 |
     ^        |   map -&lt;3digit&gt;- to non A/N char  |
     |        |                 |                 |
     |        \--------&gt;   add a "."   &lt;----------/
     |                         |
     \------------- take next attribute (if any)


   Note that the above flow charts deal with the translation of the
   attributes syntax, only.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.3%20The%20Country%20Code%20convention%20in%20the%20%3Cname%3E%20value."></a><a class="selflink" href="#section-4.2.3" name="section-4.2.3">4.2.3</a> The Country Code convention in the &lt;name&gt; value.</span>

   The <a href="rfc822.html">RFC822</a> domain space and the X.400 O/R address space, as said in
   <a href="#section-3">section 3</a>, have one specific common feature: the X.400 ISO country
   codes are the same as the <a href="rfc822.html">RFC822</a> ISO top level domains for countries.
   In the previous sections we have also defined a method to write in
   &lt;domain-name&gt; syntax any X.400 domain, while in <a href="#section-3">section 3</a> we
   described the new name space starting at each country top level
   domain under the X42D.cc (where 'cc' is then two letter ISO country
   code).

   The &lt;name&gt; value for a 'table1' entry in DNS should thus be derived
   from the X.400 domain value, translated to &lt;domain-name&gt; syntax,
   adding the 'X42D.cc.' post-fix to it, i.e.,

      ADMD$acme.C$fr

   produces in &lt;domain-name&gt; syntax the key:

      ADMD-acme.C-fr



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   which is post-fixed by 'X42D.fr.' resulting in:

      ADMD-acme.C-fr.X42D.fr.

   However, due to the identical encoding for X.400 country codes and
   <a href="rfc822.html">RFC822</a> country top level domains, the string 'C-fr.X42D.fr.' is
   clearly redundant.

   We thus define the 'Country Code convention' for the &lt;name&gt; key,
   i.e.,

      "The C-cc section of an X.400 domain in &lt;domain-name&gt; syntax must
      be omitted when creating a &lt;name&gt; key, as it is identical to the
      top level country code used to identify the DNS zone where the
      information is stored".

   Thus we obtain the following &lt;name&gt; key examples:

   X.400 domain                       DNS &lt;name&gt; key
   --------------------------------------------------------------------
   ADMD$acme.C$fr                     ADMD-acme.X42D.fr.
   PRMD$ux\.av.ADMD$ .C$gb            PRMD-ux-d-av.ADMDb.X42D.gb.
   PRMD$ppb.ADMD$Dat 400.C$de         PRMD-ppb.ADMD-Dat-b-400.X42D.de.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3%20Creating%20the%20appropriate%20DNS%20files"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a> Creating the appropriate DNS files</span>

   Using <a href="rfc1327.html">RFC1327</a>'s assumption of an asymmetric mapping between X.400 and
   <a href="rfc822.html">RFC822</a> addresses, two separate relations are required to store the
   mapping database: <a href="rfc1327.html">RFC1327</a> 'table1' and <a href="rfc1327.html">RFC1327</a> 'table2'; thus also in
   DNS we will maintain the two different sections, even if they will
   both use the PX resource record. More over <a href="rfc1327.html">RFC1327</a> also specify a
   third table: <a href="rfc1327.html">RFC1327</a> 'gate' Table. This additional table, however,
   has the same syntax rules than <a href="rfc1327.html">RFC1327</a> 'table2' and thus the same
   translation procedure as 'table2' will be applied; some details about
   the <a href="rfc1327.html">RFC1327</a> 'gate' table are discussed in <a href="#section-4.4">section 4.4</a>.

   Let's now check how to create, from an <a href="rfc1327.html">RFC1327</a> mapping rule entry,
   the appropriate DNS entry in a DNS data file. We can again define an
   <a href="rfc1327.html">RFC1327</a> mapping rule entry as defined in <a href="#appendix-F">appendix F</a> of that document
   as:

     &lt;x400-domain&gt;#&lt;<a href="rfc822.html">rfc822</a>-domain&gt;#  (case A: 'table1' entry)

   and

     &lt;<a href="rfc822.html">rfc822</a>-domain&gt;#&lt;x400-domain&gt;#  (case B: 'table2' and 'gate' entry)

   The two cases must be considered separately. Let's consider case A.



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


    - take &lt;x400-domain&gt; and translate it into &lt;domain-name&gt; syntax,
      obtaining &lt;x400-in-domain-syntax&gt;;
    - create the &lt;name&gt; key from &lt;x400-in-domain-syntax&gt; i.e., apply
      the Country Code convention described in sect. 4.2.3;
    - construct the DNS PX record as:

      *.&lt;name&gt;  IN  PX  50  &lt;<a href="rfc822.html">rfc822</a>-domain&gt;  &lt;x400-in-domain-syntax&gt;

   Please note that within PX RDATA the &lt;<a href="rfc822.html">rfc822</a>-domain&gt; precedes the
   &lt;x400-in-domain-syntax&gt; also for a 'table1' entry.

   an example: from the rule

     PRMD$ab.ADMD$ac.C$fr#ab.fr#

   we obtain

     *.PRMD-ab.ADMD-ac.X42D.fr. IN PX 50  ab.fr.  PRMD-ab.ADMD-ac.C-fr.

   Note that &lt;name&gt;, &lt;<a href="rfc822.html">rfc822</a>-domain&gt; and &lt;x400-in-domain-syntax&gt; are
   fully qualified &lt;domain-name&gt; elements, thus ending with a ".".

   Let's now consider case B.

    - take &lt;<a href="rfc822.html">rfc822</a>-domain&gt; as &lt;name&gt; key;
    - translate &lt;x400-domain&gt; into &lt;x400-in-domain-syntax&gt;;
    - construct the DNS PX record as:

     *.&lt;name&gt;  IN  PX  50  &lt;<a href="rfc822.html">rfc822</a>-domain&gt;  &lt;x400-in-domain-syntax&gt;

   an example: from the rule

     ab.fr#PRMD$ab.ADMD$ac.C$fr#

   we obtain

     *.ab.fr.  IN  PX  50  ab.fr.  PRMD-ab.ADMD-ac.C-fr.

   Again note the fully qualified &lt;domain-name&gt; elements.












<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   A file containing the <a href="rfc1327.html">RFC1327</a> mapping rules and <a href="rfc1327.html">RFC1327</a> 'gate' table
   written in DNS format will look like the following fictious example:

     !
     ! <a href="rfc1327.html">RFC1327</a> table 1: X.400 --&gt; <a href="rfc822.html">RFC822</a>
     !
     *.ADMD-acme.X42D.it.               IN  PX  50  it. ADMD-acme.C-it.
     *.PRMD-accred.ADMD-tx400.X42D.it.  IN  PX  50   \
                                accred.it. PRMD-accred.ADMD-tx400.C-it.
     *.O-u-h-newcity.PRMD-x4net.ADMDb.X42D.it.  IN  PX  50   \
                       cs.ncty.it. O-u-h-newcity.PRMD-x4net.ADMDb.C-it.
     !
     ! <a href="rfc1327.html">RFC1327</a> table 2: <a href="rfc822.html">RFC822</a> --&gt; X.400
     !
     *.nrc.it.    IN  PX  50   nrc.it. PRMD-nrc.ADMD-acme.C-it.
     *.ninp.it.   IN  PX  50   ninp.it. O.PRMD-ninp.ADMD-acme.C-it.
     *.bd.it.     IN  PX  50   bd.it. PRMD-uk-d-bd.ADMDb.C-it.
     !
     ! <a href="rfc1327.html">RFC1327</a> Gate Table
     !
     my.it.  IN PX 50  my.it. OU-int-h-gw.O.PRMD-ninp.ADMD-acme.C-it.G.
     co.it.  IN PX 50  co.it. O-mhs-h-relay.PRMD-x4net.ADMDb.C-it.G.

   (here the "\" indicates continuation on the same line, as wrapping is
   done only due to typographical reasons).

   Note the special suffix ".G." on the right side of the 'gate' Table
   section whose aim is described in <a href="#section-4.4">section 4.4</a>. The corresponding
   <a href="rfc1327.html">RFC1327</a> tables are:


     #
     # <a href="rfc1327.html">RFC1327</a> table 1: X.400 --&gt; <a href="rfc822.html">RFC822</a>
     #
     ADMD$acme.C$it#it#
     PRMD$accred.ADMD$tx400.C$it#accred.it#
     O$u-newcity.PRMD$x4net.ADMD$ .C$it#cs.ncty.it#
     #
     # <a href="rfc1327.html">RFC1327</a> table 2: <a href="rfc822.html">RFC822</a> --&gt; X.400
     #
     nrc.it#PRMD$nrc.ADMD$acme.C$it#
     ninp.it#O.PRMD$ninp.ADMD$acme.C$it#
     bd.it#PRMD$uk\.bd.ADMD$ .C$it#
     #
     # <a href="rfc1327.html">RFC1327</a> Gate Table
     #
     my.it#OU$int-gw.O$@.PRMD$ninp.ADMD$acme.C$it#
     co.it#O$mhs-relay.PRMD$x4net.ADMD$ .C$t#



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4%20Storing%20the%20RFC1327%20Gate%20table"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a> Storing the <a href="rfc1327.html">RFC1327</a> Gate table</span>

   <a href="rfc1327.html#section-4.3.4">Section 4.3.4 of RFC1327</a> also specify how an address should be
   converted between <a href="rfc822.html">RFC822</a> and X.400 in case a complete mapping is
   impossible. To allow the use of DDAs for non mappable domains, the
   <a href="rfc1327.html">RFC1327</a> 'gate' table is thus introduced. DNS must store and
   distribute also these data.

   One of the major features of the DNS is the ability to distribute the
   authority: a certain site runs the "primary" nameserver for one
   determined sub-tree and thus it is also the only place allowed to
   update information regarding that sub-tree. This fact allows, in our
   case, a further additional feature to the table based approach. In
   fact we can avoid one possible ambiguity about the use of the 'gate'
   table (and thus of DDAs encoding).

   The authority maintaining a DNS entry in the usual <a href="rfc822.html">RFC822</a> domain
   space is the only one allowed to decide if its domain should be
   mapped using Standard Attributes (SA) syntax or Domain Defined
   Attributes (DDA) one. If the authority decides that its <a href="rfc822.html">RFC822</a> domain
   should be mapped using SA, then the PX RDATA will be a 'table2'
   entry, otherwise it will be a 'gate' table entry. Thus for an <a href="rfc822.html">RFC822</a>
   domain we cannot have any more two possible entries, one from 'table2
   and another one from 'gate' table, and the action for a gateway
   results clearly stated.

   The <a href="rfc1327.html">RFC1327</a> 'gate' table syntax is actually identical to <a href="rfc1327.html">RFC1327</a>
   'table2'. Thus the same syntax translation rules from <a href="rfc1327.html">RFC1327</a> to DNS
   format can be applied. However a gateway or any other application
   must know if the answer it got from DNS contains some 'table2' or
   some 'gate' table information. This is easily obtained flagging with
   an additional ".G." post-fix the PX RDATA value when it contains a
   'gate' table entry. The example in <a href="#section-4.3">section 4.3</a> shows clearly the
   result. As any X.400 O/R domain must end with a country code ("C-xx"
   in our DNS syntax) the additional ".G." creates no conflicts or
   ambiguities at all. This postfix must obviously be removed before
   using the <a href="rfc1327.html">RFC1327</a> 'gate' table data.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20Finding%20RFC1327%20mapping%20information%20from%20DNS"></a><a class="selflink" href="#section-5" name="section-5">5</a>. Finding <a href="rfc1327.html">RFC1327</a> mapping information from DNS</span>

   The <a href="rfc1327.html">RFC1327</a> mapping information is stored in DNS both in the normal
   <a href="rfc822.html">RFC822</a> domain name space, and in the newly defined X.400 name space.
   The information, stored in PX resource records, does not represent a
   full <a href="rfc822.html">RFC822</a> or X.400 O/R address: it is a template which specifies
   the fields of the domain that are used by the mapping algorithm.

   When mapping information is stored in the DNS, queries to the DNS are
   issued whenever an iterative search through the mapping table would



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   be performed (<a href="rfc1327.html">RFC1327</a>: <a href="#section-4.3.4">section 4.3.4</a>, State I; <a href="#section-4.3.5">section 4.3.5</a>, mapping
   B). Due to the DNS search mechanism, DNS by itself returns the
   longest possible match in the stored mapping rule with a single
   query, thus no iteration and/or multiple queries are needed. As
   specified in <a href="rfc1327.html">RFC1327</a>, a search of the mapping table will result in
   either success (mapping found) or failure (query failed, mapping not
   found).

   When a DNS query is issued, a third possible result is timeout. If
   the result is timeout, the gateway operation is delayed and then
   retried at a later time. A result of success or failure is processed
   according to the algorithms specified in <a href="rfc1327.html">RFC1327</a>. If a DNS error code
   is returned, an error message should be logged and the gateway
   operation is delayed as for timeout. These pathological situations,
   however, should be avoided with a careful duplication and chaching
   mechanism which DNS itself provides.

   Searching the nameserver which can authoritatively solve the query is
   automatically performed by the DNS distributed name service.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1%20A%20DNS%20query%20example"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a> A DNS query example</span>

   An <a href="rfc1327.html">RFC1327</a> mail-gateway located in the Internet, when translating
   addresses from <a href="rfc822.html">RFC822</a> to X.400, can get information about the <a href="rfc1327.html">RFC1327</a>
   mapping rule asking the DNS. As an example, when translating the
   address SUN.CCE.NRC.IT, the gateway will just query DNS for the
   associated PX resource record. The DNS should contain a PX record
   like this:

   *.cce.nrc.it.  IN PX 50   cce.nrc.it.  O-cce.PRMD-nrc.ADMD-acme.C-it.

   The first query will return immediately the appropriate mapping rule
   in DNS store format.

   There is no ".G." at the end of the obtained PX RDATA value, thus
   applying the syntax translation specified in paragraph 4.2 the
   <a href="rfc1327.html">RFC1327</a> Table 2 mapping rule will be obtained.

   Let's now take another example where a 'gate' table rule is returned.
   If we are looking for an <a href="rfc822.html">RFC822</a> domain ending with top level domain
   "MW", and the DNS contains a PX record like this,

      *.mw.   IN  PX  50  mw.  O-cce.PRMD-nrc.ADMD-acme.C-it.G.

   DNS will return 'mw.' and 'O-cce.PRMD-nrc.ADMD-acme.C-it.G.', i.e., a
   'gate' table entry in DNS store format. Dropping the final ".G." and
   applying the syntax translation specified in paragraph 4.2 the
   original rule will be available. More over, the ".G." flag also tells



<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   the gateway to use DDA encoding for the inquired <a href="rfc822.html">RFC822</a> domain.

   On the other hand, translating from X.400 to <a href="rfc822.html">RFC822</a> the address

      C=de; ADMD=pkz; PRMD=nfc; O=top;

   the mail gateway should convert the syntax according to paragraph
   4.2, apply the 'Country code convention' described in 4.2.3 to derive
   the appropriate DNS translation of the X.400 O/R name and then query
   DNS for the corresponding PX resource record. The obtained record for
   which the PX record must be queried is thus:

      O-top.PRMD-nfc.ADMD-pkz.X42D.de.

   The DNS could contain:

      *.ADMD-pkz.X42D.de.  IN  PX  50  pkz.de.  ADMD-pkz.C-de.

   Assuming that there are not more specific records in DNS, the
   wildcard mechanism will return the <a href="rfc1327.html">RFC1327</a> 'table1' rule in encoded
   format.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20Administration%20of%20mapping%20information"></a><a class="selflink" href="#section-6" name="section-6">6</a>. Administration of mapping information</span>

   The DNS, using the PX RR, will be able to distribute the mapping
   information to all <a href="rfc1327.html">RFC1327</a> gateways located on the Internet. However,
   not all <a href="rfc1327.html">RFC1327</a> gateways will be able to use the Internet DNS. It is
   expected that some gateways in a particular management domain will
   conform to one of the following models:

      (a) Table-based, (b) DNS-based, (c) X.500-based

   Table-based management domains will continue to submit and retrieve
   their mapping tables from the International Mapping Table coordinator
   manually or via some automated procedures. Their mapping information
   should be made available in DNS by the appropriate DNS authority
   using the same mechanism already in place for MX records: if a branch
   has not yet in place its own DNS server, some higher authority in the
   DNS tree will provide the service for it. A transition procedure
   similar to the one used to migrate from the 'hosts.txt' tables to DNS
   can be applied also to the deployment phase of this proposal. An
   informational document describing the implementation phase and the
   detailed coordination procedures is expected. The deployment phase
   must also follow the directives produced by the current work on
   <a href="rfc1327.html">RFC1327</a> mapping authorities, in order to insure consistency in the
   mapping information itself.





<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   Another distributed directory service which can distribute the
   <a href="rfc1327.html">RFC1327</a> mapping information is X.500. The coordination, alignment and
   uniqueness of mapping information between DNS and X.500 is an
   essential fact if it happens to have both systems in place. The ideal
   solution is a dynamic alignment mechanism which transparently makes
   the DNS mapping information available in X.500 and vice versa. Some
   work in this specific field is already being done [see Costa] which
   can result in a global transparent directory service, where the
   information is stored in DNS or in X.500, but is visible completely
   by any of the two systems.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20Conclusion"></a><a class="selflink" href="#section-7" name="section-7">7</a>. Conclusion</span>

   The introduction of the new PX resource record and the definition of
   the X.400 O/R name space in the DNS structure provide a good
   repository for mapping information. The mapping information is stored
   in the DNS tree structure so that it can be easily obtained using the
   DNS distributed name service. At the same time the definition of the
   appropriate DNS space for X.400 O/R names provide a repository where
   to store and distribute some other X.400 MHS information. The use of
   the DNS has many known advantages in storing, managing and updating
   the information. A successful number of tests have been performed
   under the provisional top level domain "X400.IT", and their results
   confirmed the advantages of the method.

   Software to query the DNS and then to convert between the textual
   representation of DNS resource records and the address format defined
   in <a href="rfc1327.html">RFC1327</a> needs to be developed. This software must also allow a
   smooth implementation and deployment period, eventually taking care
   of the transition phase. A further informational document describing
   operational and implementation of the service is expected.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20Acknowledgements"></a><a class="selflink" href="#section-8" name="section-8">8</a>. Acknowledgements</span>

   We wish to thanks all those who contributed to the discussion and
   revision of this document: many of their ideas and suggestions
   constitute essential parts of this work. In particular thanks to Jon
   Postel, Paul Mockapetris, Rob Austin and the whole IETF x400ops, RARE
   wg-msg and IETF namedroppers groups. A special mention to Christian
   Huitema for his fundamental contribution to this work.











<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>. References</span>

   [<a id="ref-CCITT" name="ref-CCITT">CCITT</a>] CCITT SG 5/VII, "Recommendation X.400, Message Handling
       Systems: System Model - Service Elements", October 1988.

   [<a id="ref-RFC 1327" name="ref-RFC 1327">RFC 1327</a>] Kille, S., "Mapping between X.400(1988)/ISO 10021 and <a href="rfc822.html">RFC</a>
       <a href="rfc822.html">822</a>", <a href="rfc1327.html">RFC 1327</a>, March 1992.

   [<a id="ref-RFC 1034" name="ref-RFC 1034">RFC 1034</a>] Mockapetris, P., "Domain Names - Concepts and Facilities",
       STD 13, <a href="rfc1034.html">RFC 1034</a>, USC/Information Sciences Institute, November
       1987.

   [<a id="ref-RFC 1035" name="ref-RFC 1035">RFC 1035</a>] Mockapetris, P., "Domain names - Implementation and
       Specification", STD 13, <a href="rfc1035.html">RFC 1035</a>, USC/Information Sciences
       Institute, November 1987.

   [<a id="ref-RFC 1033" name="ref-RFC 1033">RFC 1033</a>] Lottor, M., "Domain Administrators Operation Guide", <a href="rfc1033.html">RFC</a>
       <a href="rfc1033.html">1033</a>, SRI International, November 1987.

   [<a id="ref-Costa" name="ref-Costa">Costa</a>] Costa, A., Macedo, J., and V. Freitas, "Accessing and
       Managing DNS Information in the X.500 Directory", Proceeding of
       the 4th Joint European Networking Conference, Trondheim, NO, May
       1993.

   [<a id="ref-Houttin" name="ref-Houttin">Houttin</a>] Houttin, J., Hansen, K., and S. Aumont, "Address Mapping
       Functions and Authorities", Internet-DRAFT, May 1993.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20Security%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>. Security Considerations</span>

   Security issues are not discussed in this memo.





















<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20Authors%27%20Addresses"></a><a class="selflink" href="#section-11" name="section-11">11</a>. Authors' Addresses</span>

   Claudio Allocchio
   Sincrotrone Trieste
   Padriciano 99
   I 34012 Trieste
   Italy

   <a href="rfc822.html">RFC822</a>: Claudio.Allocchio@elettra.trieste.it
   X.400:  C=it;A=garr;P=Trieste;O=Elettra;
   S=Allocchio;G=Claudio;
   Phone:  +39 40 3758523
   Fax:    +39 40 226338


   Antonio Blasco Bonito
   CNUCE - CNR
   Reparto infr. reti
   Viale S. Maria 36
   I 56126 Pisa
   Italy

   <a href="rfc822.html">RFC822</a>: bonito@cnuce.cnr.it
   X.400:  C=it;A=garr;P=cnr;O=cnuce;S=bonito;
   Phone:  +39 50 593246
   Fax:    +39 50 589354


   Bruce Cole
   Cisco Systems Inc.
   P.O. Box 3075
   1525 O'Brien Drive
   Menlo Park, CA 94026
   U.S.A.

   <a href="rfc822.html">RFC822</a>: bcole@cisco.com
   X.400:  C=us;A= ;P=Internet;
   DD.<a href="rfc822.html">rfc-822</a>=bcole(a)cisco.com;
   Phone:  +1 415 6888245
   Fax:    +1 415 6884575











<span class="grey">Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc1664.html">RFC 1664</a>          Internet DNS for Mail Mapping Tables       August 1994</span>


   Silvia Giordano
   Centro Svizzero di
   Calcolo Scientifico
   Via Cantonale
   CH 6928 Manno
   Switzerland

   <a href="rfc822.html">RFC822</a>: giordano@cscs.ch
   X.400:  C=ch;A=arcom;P=switch;O=cscs;
   S=giordano;
   Phone:  +41 91 508213
   Fax:    +41 91 506711


   Robert Hagens
   Advanced Network and Services
   1875 Campus Commons Drive
   Reston, VA 22091
   U.S.A.

   <a href="rfc822.html">RFC822</a>: hagens@ans.net
   X.400:  C=us;A= ;P=Internet;
   DD.<a href="rfc822.html">rfc-822</a>=hagens(a)ans.net;
   Phone:  +1 703 7587700



























Allocchio, Bonito, Cole, Giordano &amp; Hagens                     [Page 23]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc1664 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:57 GMT --></html>