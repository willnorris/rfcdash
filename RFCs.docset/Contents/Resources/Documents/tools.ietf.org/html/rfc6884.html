<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6884 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:26 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-zfang-avt-rtp-evrc-nw" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:6884" name="DC.Identifier"/>
<meta content="March, 2013" name="DC.Date.Issued"/>
<meta content="Zheng Fang &lt;zfang@qualcomm.com&gt;" name="DC.Creator"/>
<meta content="This document specifies Real-time Transport Protocol (RTP) payload
formats to be used for the Enhanced Variable Rate Narrowband-Wideband
Codec (EVRC-NW). Three media type registrations are included for EVRC-
NW RTP payload formats. In addition, a file format is specified for
transport of EVRC-NW speech data in storage mode applications such as
email." name="DC.Description.Abstract"/>
<meta content="RTP Payload Format for the Enhanced Variable Rate Narrowband-Wideband Codec (EVRC-NW)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6884 - RTP Payload Format for the Enhanced Variable Rate Narrowband-Wideband Codec (EVRC-NW)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6884.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6884" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-avt-rtp-evrc-nw" title="draft-ietf-avt-rtp-evrc-nw">draft-ietf-avt-...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6884" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6884" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6884" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=6884&amp;submit=rfc" title="IPR disclosures related to this document">IPR</a>]   </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                           Z. Fang
Request for Comments: 6884                         Qualcomm Incorporated
Category: Standards Track                                     March 2013
ISSN: 2070-1721


                           <span class="h1">RTP Payload Format</span>
   <span class="h1">for the Enhanced Variable Rate Narrowband-Wideband Codec (EVRC-NW)</span>

Abstract

   This document specifies Real-time Transport Protocol (RTP) payload
   formats to be used for the Enhanced Variable Rate Narrowband-Wideband
   Codec (EVRC-NW).  Three media type registrations are included for
   EVRC-NW RTP payload formats.  In addition, a file format is specified
   for transport of EVRC-NW speech data in storage mode applications
   such as email.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6884">http://www.rfc-editor.org/info/rfc6884</a>.

Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





<span class="grey">Fang                         Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Conventions .....................................................<a href="#page-2">2</a>
   <a href="#section-3">3</a>. Background ......................................................<a href="#page-3">3</a>
   <a href="#section-4">4</a>. EVRC-NW Codec ...................................................<a href="#page-3">3</a>
   <a href="#section-5">5</a>. RTP Header Usage ................................................<a href="#page-4">4</a>
   <a href="#section-6">6</a>. Payload Format ..................................................<a href="#page-4">4</a>
      6.1. Encoding Capability Identification in EVRC-NW
           Interleaved/Bundled Format .................................<a href="#page-5">5</a>
   <a href="#section-7">7</a>. Congestion Control Considerations ...............................<a href="#page-6">6</a>
   <a href="#section-8">8</a>. Storage Format for the EVRC-NW Codec ............................<a href="#page-6">6</a>
   <a href="#section-9">9</a>. IANA Considerations .............................................<a href="#page-7">7</a>
      <a href="#section-9.1">9.1</a>. Media Type Registrations ...................................<a href="#page-7">7</a>
           <a href="#section-9.1.1">9.1.1</a>. Registration of Media Type audio/EVRCNW .............<a href="#page-7">7</a>
           <a href="#section-9.1.2">9.1.2</a>. Registration of Media Type audio/EVRCNW0 ............<a href="#page-9">9</a>
           <a href="#section-9.1.3">9.1.3</a>. Registration of Media Type audio/EVRCNW1 ...........<a href="#page-10">10</a>
   <a href="#section-10">10</a>. SDP Mode Attributes for EVRC-NW ...............................<a href="#page-12">12</a>
   <a href="#section-11">11</a>. Mode Change Request/Response Considerations ...................<a href="#page-13">13</a>
   <a href="#section-12">12</a>. Mapping EVRC-NW Media Type Parameters into SDP ................<a href="#page-14">14</a>
   <a href="#section-13">13</a>. Offer-Answer Model Considerations for EVRC-NW .................<a href="#page-14">14</a>
   <a href="#section-14">14</a>. Declarative SDP Considerations ................................<a href="#page-16">16</a>
   <a href="#section-15">15</a>. Examples ......................................................<a href="#page-16">16</a>
   <a href="#section-16">16</a>. Security Considerations .......................................<a href="#page-19">19</a>
   <a href="#section-17">17</a>. References ....................................................<a href="#page-19">19</a>
      <a href="#section-17.1">17.1</a>. Normative References .....................................<a href="#page-19">19</a>
      <a href="#section-17.2">17.2</a>. Informative References ...................................<a href="#page-20">20</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document specifies the payload formats for packetization of
   EVRC-NW encoded speech signals into the Real-time Transport Protocol
   (RTP).  It defines support for the header-free, interleaved/bundled,
   and compact bundle packet formats for the EVRC-NW codec as well as
   discontinuous transmission (DTX) support for EVRC-NW encoded speech
   transported via RTP.  The EVRC-NW codec offers better speech quality
   than the EVRC and EVRC-B codecs and better capacity than the Enhanced
   Variable Rate Wideband Codec (EVRC-WB).  EVRC-NW belongs to the EVRC
   family of codecs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="#ref-1" title='"Key words for use in RFCs to Indicate Requirement Levels"'>1</a>].






<span class="grey">Fang                         Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Background"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Background</span>

   EVRC-NW is an extension of both the EVRC-B [<a href="#ref-2" title='"Enhancements to RTP Payload Formats for EVRC Family Codecs"'>2</a>] and EVRC-WB [<a href="#ref-3" title='"RTP Payload Format for the Enhanced Variable Rate Wideband Codec (EVRC-WB) and the Media Subtype Updates for EVRC-B Codec"'>3</a>] speech
   codecs developed in the Third Generation Partnership Project 2
   (3GPP2) with support for DTX.  It provides enhanced voice quality and
   high spectral efficiency.

   The EVRC-NW codec operates on 20 ms frames, and the default sampling
   rate is 16 kHz (wideband).  Input and output at the 8 kHz sampling
   rate (narrowband) is also supported.  The EVRC-NW codec can operate
   in eight modes (0 to 7) as defined in 3GPP2 C.S0014-D [<a href="#ref-4" title='"Enhanced Variable Rate Codec, Speech Service Options 3, 68, 70, and 73 for Wideband Spread Spectrum Digital Systems"'>4</a>].  EVRC-NW
   modes 0, 1, and 7 are interoperable with EVRC-WB.  EVRC-NW modes 1 to
   7 are interoperable with EVRC-B.  EVRC-NW modes 0 to 6 use the full
   set or a subset of full rate, 1/2 rate, 1/4 rate, and 1/8 rate
   frames.  EVRC-NW mode 7 uses only 1/2 rate and 1/8 rate frames.  By
   default, EVRC-NW supports all narrowband modes (modes 1 to 7).  The
   support of wideband mode (mode 0) is optional.  Mode change among
   modes 1 to 7 (or among modes 0 to 7 if the receiver supports wideband
   mode) results in codec output bit-rate change but does not cause any
   decoding problems at the receiver.  EVRC-NW provides a standardized
   solution for packetized voice applications that allow transitions
   between enhanced quality and increased capacity.  The most important
   service addressed is IP telephony.  Target devices can be IP phones
   or VoIP handsets, media gateways, voice messaging servers, etc.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20EVRC-NW%20Codec"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  EVRC-NW Codec</span>

   The EVRC-NW codec operates on 20 ms frames.  It produces output
   frames of one of the four different sizes: 171 bits (Rate 1), 80 bits
   (Rate 1/2), 40 bits (Rate 1/4), or 16 bits (Rate 1/8).  In addition,
   there are two zero-bit codec frame types: blank (null) frames and
   erasure frames.  The default sampling rate is 16 kHz.  Input and
   output at the 8 kHz sampling rate is also supported.

   The frame type values and sizes of the associated codec data frames
   are listed in the table below:

   Value  Rate        Total codec data frame size in bytes (and in bits)
   --------------------------------------------------------------------
     0    Blank (Null)   0    (0 bits)
     1    1/8            2    (16 bits)
     2    1/4            5    (40 bits)
     3    1/2           10    (80 bits)
     4    1             22    (171 bits; 5 bits padded at the end)
     5    Erasure        0    (SHOULD NOT be transmitted by sender)






<span class="grey">Fang                         Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20RTP%20Header%20Usage"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  RTP Header Usage</span>

   The format of the RTP header is specified in <a href="rfc3550.html">RFC 3550</a> [<a href="#ref-5" title='"RTP: A Transport Protocol for Real-Time Applications"'>5</a>].  The
   EVRC-NW payload formats (<a href="#section-6">Section 6</a>) use the fields of the RTP header
   as specified in <a href="rfc3550.html">RFC 3550</a> [<a href="#ref-5" title='"RTP: A Transport Protocol for Real-Time Applications"'>5</a>].

   EVRC-NW also has the capability to operate with 8 kHz sampled input/
   output signals.  The decoder does not require a priori knowledge
   about the sampling rate of the original signal at the input of the
   encoder.  The decoder output can be at 8 kHz or 16 kHz regardless of
   the sampling rate used at the encoder.  Therefore, depending on the
   implementation and the electroacoustic audio capabilities of the
   devices, the input of the encoder and/or the output of the decoder
   can be configured at 8 kHz; however, a 16 kHz RTP clock rate MUST
   always be used.  The RTP timestamp is increased by 320 for each
   20 milliseconds.

   The RTP header marker bit (M) SHALL be set to 1 if the first frame
   carried in the packet contains a speech frame that is the first in a
   talkspurt.  For all other packets, the marker bit SHALL be set to
   zero (M=0).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Payload%20Format"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Payload Format</span>

   Three RTP packet formats are supported for the EVRC-NW codec -- the
   interleaved/bundled packet format, the header-free packet format, and
   the compact bundled packet format.  For all these formats, the
   operational details and capabilities of EVRC-NW, such as TOC,
   interleaving, DTX, and bundling, are exactly the same as those
   defined in EVRC [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>], EVRC-B [<a href="#ref-2" title='"Enhancements to RTP Payload Formats for EVRC Family Codecs"'>2</a>], and EVRC-WB [<a href="#ref-3" title='"RTP Payload Format for the Enhanced Variable Rate Wideband Codec (EVRC-WB) and the Media Subtype Updates for EVRC-B Codec"'>3</a>], except that

   1.  the mode change request field in the interleaved/bundled packet
       format MUST be interpreted according to the definition of the
       RATE_REDUC parameter as described for EVRC-NW in
       3GPP2 C.S0014-D [<a href="#ref-4" title='"Enhanced Variable Rate Codec, Speech Service Options 3, 68, 70, and 73 for Wideband Spread Spectrum Digital Systems"'>4</a>].

   2.  the mode change request field in the interleaved/bundled packet
       format SHOULD be honored by an EVRC-NW encoding endpoint in a
       one-to-one session with a dedicated EVRC-NW decoding endpoint,
       such as in a two-party call or in a conference leg.

   3.  the reserved bit field in the first octet of the interleaved/
       bundled format has only one bit.  Bit 1 of the first octet is an
       EVRC-NW wideband/narrowband encoding capability identification
       flag.






<span class="grey">Fang                         Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   The media type audio/EVRCNW maps to the interleaved/bundled packet
   format, audio/EVRCNW0 maps to the header-free packet format, and
   audio/EVRCNW1 maps to the compact bundled packet format.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Encoding%20Capability%20Identification%20in%20EVRC-NW%20Interleaved%2FBundled"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Encoding Capability Identification in EVRC-NW Interleaved/Bundled</span>
<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/Format"></a>      Format</span>

   The EVRC-NW interleaved/bundled format defines an encoding capability
   identification flag, which is used to signal the local EVRC-NW
   wideband/narrowband encoding capability at the time of construction
   of an RTP packet to the far end of a communication session.  This
   capability identification flag allows the far end to use the MMM
   field in its outgoing (returning) EVRC-NW interleaved/bundled format
   packets to request the desired EVRC-NW wideband or narrowband
   encoding mode in accordance with the dynamic/instantaneous encoding
   capability information.  See <a href="rfc3558.html">RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>] for the definition of the
   MMM field.  The following examples illustrate a few scenarios where
   the encoding capability information is used:

   o  An end-to-end wideband communication is established first between
      two communication endpoints using the EVRC-NW interleaved/bundled
      format.  The called endpoint becomes wideband encoding incapable
      during the call and makes the other end aware of this change by
      using the encoding capability identification flag.  Based on the
      new information, the calling endpoint could change the MMM value
      in its outgoing EVRC-NW packets from mode 0 to mode 4 to request
      narrowband encoded traffic for bandwidth efficiency or from mode 0
      to mode 1 for best perceptual quality.

   o  An end-to-end narrowband communication is established between a
      calling endpoint that is EVRC-NW wideband encoding capable and a
      called endpoint that is EVRC-NW wideband encoding incapable.  The
      called endpoint becomes EVRC-NW wideband encoding capable during
      the call and makes the other end aware of this change using the
      encoding capability identification flag.  Based on the new
      information, the calling endpoint could change the MMM value in
      its outgoing EVRC-NW packets from non-mode-0 to mode 0 to request
      wideband traffic.

   The EVRC-NW interleaved/bundled format defines the encoding
   capability identification flag in bit 1 of the first octet, as
   illustrated in the figure below.  The flag shall be set to zero (C=0)
   when the local EVRC-NW encoder is capable of mode 0 wideband
   encoding.  The flag shall be set to one (C=1) when the local EVRC-NW
   encoder is capable of non-mode-0 narrowband encoding only.  See
   <a href="rfc3558.html">RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>] for original definitions of other fields in the
   interleaved/bundled format.




<span class="grey">Fang                         Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                        RTP Header                             |
    +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
    |R|C| LLL | NNN | MMM |  Count  |  TOC  |  ...  |  TOC  |padding|
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |        one or more codec data frames, one per TOC entry       |
    |                             ....                              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Reserved (R): 1 bit

      Reserved bit.  MUST be set to zero by sender; SHOULD be ignored by
      receiver.

   Encoding capability identification (C): 1 bit

      Must be set to zero by sender to indicate wideband encoding
      capable or set to one to indicate narrowband encoding capable
      only.

      C = 0 :  mode 0 wideband encoding capable

        = 1 :  mode 0 wideband encoding incapable, i.e., narrowband
               encoding only.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Congestion%20Control%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Congestion Control Considerations</span>

   Congestion control for RTP is discussed in <a href="rfc3550.html">RFC 3550</a> [<a href="#ref-5" title='"RTP: A Transport Protocol for Real-Time Applications"'>5</a>] and in
   applicable RTP profiles, e.g., <a href="rfc3551.html">RFC3551</a> [<a href="#ref-7" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>7</a>].  This document does not
   change those considerations.

   Due to the header overhead, the number of frames encapsulated in each
   RTP packet influences the overall bandwidth of the RTP stream.
   Packing more frames in each RTP packet can reduce the number of
   packets sent and hence the header overhead, at the expense of
   increased delay and reduced error robustness.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Storage%20Format%20for%20the%20EVRC-NW%20Codec"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Storage Format for the EVRC-NW Codec</span>

   The storage format is used for storing EVRC-NW encoded speech frames,
   e.g., as a file or email attachment.

   The file begins with a magic number to identify the vocoder that is
   used.  The magic number for EVRC-NW corresponds to the ASCII
   character string "#!EVRCNW\n", i.e., "0x23 0x21 0x45 0x56 0x52 0x43
   0x4E 0x57 0x0A".



<span class="grey">Fang                         Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   The codec data frames are stored in consecutive order, with a single
   TOC entry field, extended to one octet, prefixing each codec data
   frame.  The TOC field is extended to one octet by setting the four
   most significant bits of the octet to zero.  For example, a TOC value
   of 4 (a full-rate frame) is stored as 0x04.  The Value column in the
   table in <a href="#section-4">Section 4</a> provides the TOC values for corresponding frame
   types.

   Speech frames lost in transmission and non-received frames MUST be
   stored as erasure frames (TOC value of 5) to maintain synchronization
   with the original media.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  IANA Considerations</span>

   This document introduces a new EVRC-NW 'audio' media subtype.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Media%20Type%20Registrations"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Media Type Registrations</span>

   Following the guidelines in <a href="rfc4855.html">RFC 4855</a> [<a href="#ref-8" title='"Media Type Registration of RTP Payload Formats"'>8</a>] and <a href="rfc6838.html">RFC 6838</a> [<a href="#ref-9" title='"Media Type Specifications and Registration Procedures"'>9</a>], this
   section registers new 'audio' media subtypes for EVRC-NW.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.1.1.%20%20Registration%20of%20Media%20Type%20audio%2FEVRCNW"></a><a class="selflink" href="#section-9.1.1" name="section-9.1.1">9.1.1</a>.  Registration of Media Type audio/EVRCNW</span>

   Type name: audio

   Subtype name: EVRCNW

   Required parameters: None

   Optional parameters:  These parameters apply to RTP transfer only.

      mode-set-recv:  A subset of EVRC-NW modes.  Possible values are a
         comma-separated list of modes from the set {0,1,2,3,4,5,6,7}
         (see Table 2.6.1.2-1 in 3GPP2 C.S0014-D [<a href="#ref-4" title='"Enhanced Variable Rate Codec, Speech Service Options 3, 68, 70, and 73 for Wideband Spread Spectrum Digital Systems"'>4</a>]).  A decoder can
         use this attribute to inform an encoder of its preference to
         operate in a specified subset of modes.  Absence of this
         parameter signals the mode set {1,2,3,4,5,6,7}.

      ptime:  See <a href="rfc4566.html">RFC 4566</a> [<a href="#ref-10" title='"SDP: Session Description Protocol"'>10</a>].

      maxptime:  See <a href="rfc4566.html">RFC 4566</a>.

      maxinterleave:  Maximum number for interleaving length (field LLL
         in the Interleaving Octet) [0..7].  The interleaving lengths
         used in the entire session MUST NOT exceed this maximum value.
         If not signaled, the maxinterleave length MUST be 5.

      silencesupp:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.



<span class="grey">Fang                         Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


      dtxmax:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

      dtxmin:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

      hangover:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

   Encoding considerations:
      This media type is framed binary data (see <a href="rfc6838.html#section-4.8">RFC 6838, Section 4.8</a>)
      and is defined for transfer of EVRC-NW encoded data via RTP using
      the interleaved/bundled packet format specified in <a href="rfc3558.html">RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>].

   Security considerations:  See <a href="#section-16">Section 16</a>.

   Interoperability considerations:  None

   Published specification:
      The EVRC-NW vocoder is specified in 3GPP2 C.S0014-D [<a href="#ref-4" title='"Enhanced Variable Rate Codec, Speech Service Options 3, 68, 70, and 73 for Wideband Spread Spectrum Digital Systems"'>4</a>].  The
      transfer method with the interleaved/bundled packet format via RTP
      is specified in <a href="rfc3558.html">RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>].  See <a href="rfc6884.html#section-6">Section 6 of RFC 6884</a> for
      details for EVRC-NW.

   Applications that use this media type:
      It is expected that many VoIP applications (as well as mobile
      applications) will use this type.

   Additional information:

      The following applies to stored-file transfer methods:

         Magic number: #!EVRCNW\n (see <a href="#section-8">Section 8</a>)

         File extensions: enw, ENW

         Macintosh file type code: None

         Object identifier or OID: None

   EVRC-NW speech frames may also be stored in the file format "3g2" as
   defined in 3GPP2 C.S0050-B [<a href="#ref-14" title='"3GPP2 File Formats for Multimedia Services"'>14</a>], which is identified using the media
   types "audio/3gpp2" or "video/3gpp2" registered by <a href="rfc4393.html">RFC 4393</a> [<a href="#ref-11" title='"MIME Type Registrations for 3GPP2 Multimedia Files"'>11</a>].

   Person &amp; email address to contact for further information:
      Zheng Fang &lt;zfang@qualcomm.com&gt;

   Intended usage:  COMMON






<span class="grey">Fang                         Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   Restrictions on usage:
      This media type can be used with the file format defined in
      <a href="rfc6884.html#section-8">Section 8 of RFC 6884</a> in contexts other than RTP.  In the context
      of transfers over RTP, the RTP payload format specified in
      <a href="rfc3558.html#section-4.1">Section 4.1 of RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>] is used for this media type.

   Author:  Zheng Fang &lt;zfang@qualcomm.com&gt;

   Change controller:
      IETF Payload working group delegated from the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.1.2.%20%20Registration%20of%20Media%20Type%20audio%2FEVRCNW0"></a><a class="selflink" href="#section-9.1.2" name="section-9.1.2">9.1.2</a>.  Registration of Media Type audio/EVRCNW0</span>

   Type name: audio

   Subtype name: EVRCNW0

   Required parameters: None

   Optional parameters:  These parameters apply to RTP transfer only.

      mode-set-recv:  A subset of EVRC-NW modes.  Possible values are a
         comma-separated list of modes from the set {0,1,2,3,4,5,6,7}
         (see Table 2.6.1.2-1 in 3GPP2 C.S0014-D [<a href="#ref-4" title='"Enhanced Variable Rate Codec, Speech Service Options 3, 68, 70, and 73 for Wideband Spread Spectrum Digital Systems"'>4</a>]).  A decoder can
         use this attribute to inform an encoder of its preference to
         operate in a specified subset of modes.  Absence of this
         parameter signals the mode set {1,2,3,4,5,6,7}.

      ptime:  See <a href="rfc4566.html">RFC 4566</a>.

      silencesupp:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

      dtxmax:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

      dtxmin:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

      hangover:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

   Encoding considerations:
      This media type is framed binary data (see <a href="rfc6838.html#section-4.8">RFC 6838, Section 4.8</a>)
      and is defined for transfer of EVRC-NW encoded data via RTP using
      the header-free packet format specified in <a href="rfc3558.html">RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>].

   Security considerations:  See <a href="#section-16">Section 16</a>.

   Interoperability considerations:  None





<span class="grey">Fang                         Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   Published specification:
      The EVRC-NW vocoder is specified in 3GPP2 C.S0014-D [<a href="#ref-4" title='"Enhanced Variable Rate Codec, Speech Service Options 3, 68, 70, and 73 for Wideband Spread Spectrum Digital Systems"'>4</a>].  The
      transfer method with the header-free packet format via RTP is
      specified in <a href="rfc3558.html">RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>].

   Applications that use this media type:
      It is expected that many VoIP applications (as well as mobile
      applications) will use this type.

   Additional information: None

   Person &amp; email address to contact for further information:
      Zheng Fang &lt;zfang@qualcomm.com&gt;

   Intended usage:  COMMON

   Restrictions on usage:
      This media type depends on RTP framing and hence is only defined
      for transfer via RTP [<a href="#ref-5" title='"RTP: A Transport Protocol for Real-Time Applications"'>5</a>].  The RTP payload format specified in
      <a href="rfc3558.html#section-4.2">Section 4.2 of RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>] SHALL be used.  This media type SHALL
      NOT be used for storage or file transfer; instead, audio/EVRCNW
      SHALL be used.

   Author:  Zheng Fang &lt;zfang@qualcomm.com&gt;

   Change controller:
      IETF Payload working group delegated from the IESG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.1.3.%20%20Registration%20of%20Media%20Type%20audio%2FEVRCNW1"></a><a class="selflink" href="#section-9.1.3" name="section-9.1.3">9.1.3</a>.  Registration of Media Type audio/EVRCNW1</span>

   Type name: audio

   Subtype name: EVRCNW1

   Required parameters: None

   Optional parameters:  These parameters apply to RTP transfer only.

      mode-set-recv:  A subset of EVRC-NW modes.  Possible values are a
         comma-separated list of modes from the set {0,1} (see Table
         2.6.1.2-1 in 3GPP2 C.S0014-D [<a href="#ref-4" title='"Enhanced Variable Rate Codec, Speech Service Options 3, 68, 70, and 73 for Wideband Spread Spectrum Digital Systems"'>4</a>]).  A decoder can use this
         attribute to inform an encoder of its preference to operate in
         a specified subset of modes.  A value of 0 signals support for
         wideband fixed rate (full or half rate, depending on the value
         of the 'fixedrate' parameter).  A value of 1 signals narrowband
         fixed rate (full or half rate, depending on the value of the
         'fixedrate' parameter).  Absence of this parameter signals
         mode 1.



<span class="grey">Fang                         Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


      ptime:  See <a href="rfc4566.html">RFC 4566</a>.

      maxptime:  See <a href="rfc4566.html">RFC 4566</a>.

      fixedrate:  Indicates the EVRC-NW rate of the session while in
         single rate operation.  Valid values include 0.5 and 1, where a
         value of 0.5 indicates the 1/2 rate while a value of 1
         indicates the full rate.  If this parameter is not present, 1/2
         rate is assumed.

      silencesupp:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

      dtxmax:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

      dtxmin:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

      hangover:  See <a href="rfc4788.html#section-6.1">Section 6.1 in RFC 4788</a>.

   Encoding considerations:
      This media type is framed binary data (see <a href="rfc6838.html#section-4.8">RFC 6838, Section 4.8</a>)
      and is defined for transfer of EVRC-NW encoded data via RTP using
      the compact bundled packet format specified in <a href="rfc4788.html">RFC 4788</a>.

   Security considerations:  See <a href="#section-16">Section 16</a>.

   Interoperability considerations:  None

   Published specification:
      The EVRC-NW vocoder is specified in 3GPP2 C.S0014-D [<a href="#ref-4" title='"Enhanced Variable Rate Codec, Speech Service Options 3, 68, 70, and 73 for Wideband Spread Spectrum Digital Systems"'>4</a>].  The
      transfer method with the compact bundled packet format via RTP is
      specified in <a href="rfc4788.html">RFC 4788</a>.

   Applications that use this media type:
      It is expected that many VoIP applications (as well as mobile
      applications) will use this type.

   Additional information: None

   Person &amp; email address to contact for further information:
      Zheng Fang &lt;zfang@qualcomm.com&gt;

   Intended usage:  COMMON









<span class="grey">Fang                         Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   Restrictions on usage:
      This media type depends on RTP framing and hence is only defined
      for transfer via RTP [<a href="#ref-5" title='"RTP: A Transport Protocol for Real-Time Applications"'>5</a>].  The RTP payload format specified in
      <a href="rfc4788.html#section-4">Section 4 of RFC 4788</a> SHALL be used.  This media type SHALL NOT be
      used for storage or file transfer; instead, audio/EVRCNW SHALL be
      used.

   Author:  Zheng Fang &lt;zfang@qualcomm.com&gt;

   Change controller:
      IETF Payload working group delegated from the IESG.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20SDP%20Mode%20Attributes%20for%20EVRC-NW"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  SDP Mode Attributes for EVRC-NW</span>

   'mode-set-recv' can be used by a decoder to inform an encoder of its
   preference to operate in a specified subset of modes.  Note that
   indicating a preference implicitly indicates support for that
   capability.  If mode 0 is not preferred for media type EVRCNW0 or
   EVRCNW1, then there is no indication that mode 0 is supported.
   However, absence of this parameter or absence of mode 0 in this
   parameter for media type EVRCNW shall not preclude mode 0 support
   during a call where mode 0 may be requested via the MMM field.

   1.  To inform other nodes of its capability for wideband mode
       support: a decoder can always decode all the narrowband modes
       (modes 1 to 7).  Unless the decoder indicates support of mode 0
       (i.e., preference) in this parameter or in the MMM mode request
       field in the interleaved/bundled payload format, an encoder at
       the other side shall not operate in mode 0.

   2.  To indicate a preference to operate in a subset of modes: a set
       has been defined so that several modes can be expressed as a
       preference in one attempt.  For instance, the set {4,5,6,7}
       signals that the receiver prefers that the sender operate in
       bandwidth-efficient narrowband modes of EVRC-NW.

   Note that during an active call session using the interleaved/bundled
   packet format, the MMM mode request received from a communication
   partner can contain a mode request different than the values in the
   last mode-set-recv attribute.  The partner's EVRC-NW wideband
   decoding capability is determined by the latest mode-set-recv
   attribute or MMM mode request field.  For example, a mode request
   with MMM=0 from a communication partner is an implicit indication of
   the partner's EVRC-NW wideband decoding capability and preference.
   An EVRC-NW wideband-capable node receiving the request can operate in
   wideband mode.  A mode request with MMM=1, 2, ..., or 7 from a
   communication partner is an implicit indication of the partner's




<span class="grey">Fang                         Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   EVRC-NW narrowband decoding preference.  The encoder of an EVRC-NW
   node receiving the request shall honor the request and operate in
   narrowband mode.

   'sendmode' is used as a Session Description Protocol (SDP) mode
   attribute in EVRC [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>], EVRC-B [<a href="#ref-2" title='"Enhancements to RTP Payload Formats for EVRC Family Codecs"'>2</a>], and EVRC-WB [<a href="#ref-3" title='"RTP Payload Format for the Enhanced Variable Rate Wideband Codec (EVRC-WB) and the Media Subtype Updates for EVRC-B Codec"'>3</a>].  However, it is
   deprecated in EVRC-NW.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Mode%20Change%20Request%2FResponse%20Considerations"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Mode Change Request/Response Considerations</span>

   The interleaved/bundled packet format for the EVRC family of vocoders
   supports a 3-bit field (MMM) that a communication node can use to
   indicate its preferred compression mode to an opposite node.  The
   concept of the compression mode (also known as Capacity Operating
   Point) was introduced to allow a controlled trade-off between voice
   quality and channel capacity.  The notion makes it possible to
   exercise vocoders at the highest possible (average) bit-rate (hence,
   highest voice quality) when the network is lightly loaded.
   Conversely, once the network load increases, the vocoders can be
   requested to operate at lower average bit-rates so as to absorb the
   additional network load without causing an undue increase in the
   frame-erasure rates; the underlying premise is that while a higher
   bit-rate improves vocoder performance, it also increases the network
   load, risking a sharp decline in voice quality should the frame-
   erasure rate be too high.  By contrast, a lower bit-rate mode of
   operation can result in accommodation of the additional network load
   without causing unduly high frame-erasure rates, resulting in better
   overall quality despite the inherently lower voice quality of the
   lower bit-rate mode of the vocoder.

   Accordingly, the MMM field should be used to request the far end to
   transmit compressed speech using a mode that provides the best
   balance between voice quality and capacity.  However, in the case of
   mobile-mobile calls, for example, there are two wireless sides
   involved, each with a potentially different network load level and
   hence a different preferred mode.  In such cases, achieving optimal
   end-to-end performance depends on coherent management of the
   operative mode by the two sides.  This requires that even if the
   local node prefers a higher bit-rate vocoder mode, it should adjust
   to a lower bit-rate mode if requested by the far end, in order to
   avoid potentially high frame-erasure rates due to heavy load at the
   far-end network.  For similar reasons, in cases where a mode
   requested by the far end should not be supported, it might still be
   beneficial to consider switching to a supported vocoder mode
   corresponding to a lower average bit-rate than requested.  It is
   recommended that the next lower average bit-rate supported vocoder
   mode be used for encoding when a mode requested by the far end is not
   supported.



<span class="grey">Fang                         Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   A wideband-capable endpoint can use the information conveyed by the
   C-bit of the RTP payload header to determine the optimal mode to
   request of the far end.  If the far end cannot provide mode 0 packets
   (C-bit=1), then the choice of MMM can be based strictly on the local
   network load.  If the C-bit indicates the remote end's mode 0
   encoding capability (C-bit=0), then even if the local network load is
   not light, mode 0 can be requested knowing definitively that it will
   be supported.  This will permit operators to treat wideband-capable
   mobiles preferentially, should they wish to adopt such policy.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Mapping%20EVRC-NW%20Media%20Type%20Parameters%20into%20SDP"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Mapping EVRC-NW Media Type Parameters into SDP</span>

   Information carried in the media type specification has a specific
   mapping to fields in the Session Description Protocol (SDP) [<a href="#ref-10" title='"SDP: Session Description Protocol"'>10</a>],
   which is commonly used to describe RTP sessions.  When SDP is used to
   specify sessions employing EVRC-NW encoded speech, the mapping is as
   follows.

   o  The media type ("audio") goes in SDP "m=" as the media name.

   o  The media subtype ("EVRCNW", "EVRCNW0", or "EVRCNW1") goes in SDP
      "a=rtpmap" as the encoding name.

   o  The optional parameters 'ptime and 'maxptime' (for subtypes EVRCNW
      and EVRCNW1) go in the SDP "a=ptime" and "a=maxptime" attributes,
      respectively.

   o  Any remaining parameters (for subtypes EVRCNW, EVRCNW0, and
      EVRCNW1) go in the SDP "a=fmtp" attribute by copying them from the
      media type string as a semicolon-separated list of parameter=value
      pairs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Offer-Answer%20Model%20Considerations%20for%20EVRC-NW"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Offer-Answer Model Considerations for EVRC-NW</span>

   The following considerations apply when using the SDP offer-answer
   procedures of <a href="rfc3264.html">RFC 3264</a> [<a href="#ref-12" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>12</a>] to negotiate the use of EVRC-NW payload
   in RTP:

   o  Since EVRC-NW is an extension of both EVRC-B and EVRC-WB, the
      offerer SHOULD also announce EVRC-B and EVRC-WB support in its
      "m=audio" lines, with EVRC-NW as the preferred codec.  This will
      allow interoperability with an answerer that supports only EVRC-B
      and/or EVRC-WB.








<span class="grey">Fang                         Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   Below is an example of such an offer:

          m=audio 55954 RTP/AVP 98 99 100
          a=rtpmap:98 EVRCNW0/16000
          a=rtpmap:99 EVRCWB0/16000
          a=rtpmap:100 EVRCB0/8000
          a=fmtp:98 mode-set-recv=0,1,2,3,4,5,6
          a=fmtp:99 mode-set-recv=0,4
          a=fmtp:100 recvmode=0

   If the answerer supports EVRC-NW, then the answerer can keep the
   payload type 98 in its answer and the conversation can be done using
   EVRC-NW.  Otherwise, if the answerer supports only EVRC-WB and/or
   EVRC-B, then the answerer will leave only the payload type 99 and/or
   100, respectively, in its answer and the conversation will be done
   using EVRC-WB and/or EVRC-B, respectively.

   An example answer for the above offer:

          m=audio 55954 RTP/AVP 98
          a=rtpmap:98 EVRCNW0/16000
          a=fmtp:98 mode-set-recv=4

   o  'mode-set-recv' is a unidirectional receive-only parameter.

   o  An offerer can use 'mode-set-recv' to request that the remote
      sender's encoder be limited to the list of modes signaled in
      'mode-set-recv'.  A remote sender MAY ignore 'mode-set-recv'
      requests.  However, a remote sender shall not assume the other
      side can support mode 0, unless the offer includes mode 0
      explicitly in 'mode-set-recv' or the remote sender receives mode
      requests with MMM=0 from the communication partner during an
      active call using the EVRC-NW interleaved/bundled format.

   o  The parameters 'maxptime' and 'ptime' will in most cases not
      affect interoperability; however, the setting of the parameters
      can affect the performance of the application.  The SDP offer-
      answer handling of the 'ptime' parameter is described in <a href="rfc3264.html">RFC 3264</a>
      [<a href="#ref-12" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>12</a>].  The 'maxptime' parameter MUST be handled in the same way.

   o  For a sendonly stream, the 'mode-set-recv' parameter is not useful
      and SHOULD NOT be used.

   o  When using EVRCNW1, the entire session MUST use the same fixed
      rate and mode (0-Wideband or 1-Narrowband).






<span class="grey">Fang                         Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   o  For additional rules that MUST be followed while negotiating DTX
      parameters, see <a href="rfc4788.html#section-6.8">Section 6.8 in RFC 4788</a> [<a href="#ref-2" title='"Enhancements to RTP Payload Formats for EVRC Family Codecs"'>2</a>].

   o  Any unknown parameter in an SDP offer MUST be ignored by the
      receiver and MUST NOT be included in the SDP answer.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20Declarative%20SDP%20Considerations"></a><a class="selflink" href="#section-14" name="section-14">14</a>.  Declarative SDP Considerations</span>

   For declarative use of SDP in the Session Announcement Protocol (SAP)
   [<a href="#ref-15" title='"Session Announcement Protocol"'>15</a>] and the Real Time Streaming Protocol (RTSP) [<a href="#ref-16" title='"Real Time Streaming Protocol (RTSP)"'>16</a>], the following
   considerations apply:

   o  Any 'maxptime' and 'ptime' values should be selected with care to
      ensure that the session's participants can achieve reasonable
      performance.

   o  The payload format configuration parameters are all declarative,
      and a participant MUST use the configuration(s) that is provided
      for the session.  More than one configuration MAY be provided if
      necessary by declaring multiple RTP payload types; however, the
      number of types SHOULD be kept small.  For declarative examples,
      see <a href="#section-15">Section 15</a>.

   o  The usage of unidirectional receive-only parameters, such as
      'mode-set-recv', should be excluded in any declarations, since
      these parameters are meaningless in one-way streaming
      applications.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/15.%20%20Examples"></a><a class="selflink" href="#section-15" name="section-15">15</a>.  Examples</span>

   Some example SDP session descriptions utilizing EVRC-NW encodings
   follow.  In these examples, long a=fmtp lines are folded to meet the
   column width constraints of this document.  The backslash ("\") at
   the end of a line and the carriage return that follows it should be
   ignored.  Note that media subtype names are case-insensitive.
   Parameter names are case-insensitive both in media types and in the
   mapping to the SDP a=fmtp attribute.

   Example usage of EVRCNW if wideband mode is supported:

          m=audio 49120 RTP/AVP 97 98 99
          a=rtpmap:97 EVRCNW/16000
          a=rtpmap:98 EVRCWB/16000
          a=rtpmap:99 EVRCB/8000
          a=fmtp:97 mode-set-recv=0,1,2,3,4,5,6
          a=fmtp:98 mode-set-recv=0,4
          a=fmtp:99 recvmode=0
          a=maxptime:120



<span class="grey">Fang                         Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   Example usage of EVRCNW if wideband mode is not supported:

          m=audio 49120 RTP/AVP 97 98 99
          a=rtpmap:97 EVRCNW/16000
          a=rtpmap:98 EVRCWB/16000
          a=rtpmap:99 EVRCB/8000
          a=fmtp:97 mode-set-recv=1,2,3,4,5,6
          a=fmtp:98 mode-set-recv=4
          a=fmtp:99 recvmode=0
          a=maxptime:120

   Example usage of EVRCNW0:

          m=audio 49120 RTP/AVP 97 98 99
          a=rtpmap:97 EVRCNW0/16000
          a=rtpmap:98 EVRCWB0/16000
          a=rtpmap:99 EVRCB0/8000
          a=fmtp:97 mode-set-recv=0,1,2,3,4,5,6
          a=fmtp:98 mode-set-recv=0,4
          a=fmtp:99 recvmode=0

   Example SDP answer from a media gateway requesting a terminal to
   limit its encoder operation to EVRC-NW mode 4.

          m=audio 49120 RTP/AVP 97
          a=rtpmap:97 EVRCNW0/16000
          a=fmtp:97 mode-set-recv=4

   Example usage of EVRCNW1:

          m=audio 49120 RTP/AVP 97 98 99
          a=rtpmap:97 EVRCNW1/16000
          a=rtpmap:98 EVRCWB1/16000
          a=rtpmap:99 EVRCB1/8000
          a=fmtp:97 fixedrate=0.5
          a=fmtp:98 fixedrate=0.5
          a=fmtp:99 fixedrate=0.5
          a=maxptime:100













<span class="grey">Fang                         Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   Example usage of EVRCNW with DTX with silencesupp=1:

          m=audio 49120 RTP/AVP 97 98 99
          a=rtpmap:97 EVRCNW/16000
          a=rtpmap:98 EVRCWB/16000
          a=rtpmap:99 EVRCB/8000
          a=fmtp:97 silencesupp=1;dtxmax=32;dtxmin=12;hangover=1; \
          mode-set-recv=0,1,2,3,4,5,6
          a=fmtp:98 silencesupp=1;dtxmax=32;dtxmin=12;hangover=1; \
          mode-set-recv=0,4
          a=fmtp:99 recvmode=0
          a=maxptime:120

   Example usage of EVRCNW with DTX with silencesupp=0:

          m=audio 49120 RTP/AVP 97 98 99
          a=rtpmap:97 EVRCNW/16000
          a=rtpmap:98 EVRCWB/16000
          a=rtpmap:99 EVRCB/8000
          a=fmtp:97 silencesupp=0;dtxmax=32;dtxmin=12;hangover=1; \
          mode-set-recv=0,1,2,3,4,5,6
          a=fmtp:98 silencesupp=0;dtxmax=32;dtxmin=12;hangover=1; \
          mode-set-recv=0,4
          a=fmtp:99 recvmode=0
          a=maxptime:120

   Example offer-answer exchange between EVRC-NW and legacy EVRC-B
   (<a href="rfc4788.html">RFC 4788</a>):

         Offer:

           m=audio 55954 RTP/AVP 97 98 99
           a=rtpmap:97 EVRCNW0/16000
           a=rtpmap:98 EVRCWB0/16000
           a=rtpmap:99 EVRCB0/8000
           a=rtpmap:97 mode-set-recv=0,1,2,3,4,5,6
           a=fmtp:98 mode-set-recv=0,4
           a=fmtp:99 recvmode=0

         Answer:

           m=audio 55954 RTP/AVP 99
           a=rtpmap:99 EVRCB0/8000








<span class="grey">Fang                         Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   Example offer-answer exchange between EVRC-NW and legacy EVRC-WB
   (<a href="rfc5188.html">RFC 5188</a>):

         Offer:

           m=audio 55954 RTP/AVP 97 98 99
           a=rtpmap:97 EVRCNW0/16000
           a=rtpmap:98 EVRCWB0/16000
           a=rtpmap:99 EVRCB0/8000
           a=rtpmap:97 mode-set-recv=0,1,2,3,4,5,6
           a=fmtp:98 mode-set-recv=0,4
           a=fmtp:99 recvmode=0

         Answer:

           m=audio 55954 RTP/AVP 98 99
           a=rtpmap:98 EVRCWB0/16000

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/16.%20%20Security%20Considerations"></a><a class="selflink" href="#section-16" name="section-16">16</a>.  Security Considerations</span>

   Since compression is applied to the payload formats end-to-end, and
   the encodings do not exhibit significant non-uniformity,
   implementations of this specification are subject to all the security
   considerations specified in <a href="rfc3558.html">RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>].  Implementations using the
   payload defined in this specification are subject to the security
   considerations discussed in <a href="rfc3558.html">RFC 3558</a> [<a href="#ref-6" title='"RTP Payload Format for Enhanced Variable Rate Codecs (EVRC) and Selectable Mode Vocoders (SMV)"'>6</a>], <a href="rfc3550.html">RFC 3550</a> [<a href="#ref-5" title='"RTP: A Transport Protocol for Real-Time Applications"'>5</a>], and any
   appropriate profile (for example, <a href="rfc3551.html">RFC 3551</a> [<a href="#ref-7" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>7</a>]).  Additional security
   considerations are described in <a href="rfc6562.html">RFC 6562</a> [<a href="#ref-13" title='"Guidelines for the Use of Variable Bit Rate Audio with Secure RTP"'>13</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/17.%20%20References"></a><a class="selflink" href="#section-17" name="section-17">17</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/17.1.%20%20Normative%20References"></a><a class="selflink" href="#section-17.1" name="section-17.1">17.1</a>.  Normative References</span>

   [<a id="ref-1" name="ref-1">1</a>]   Bradner, S., "Key words for use in RFCs to Indicate Requirement
         Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-2" name="ref-2">2</a>]   Xie, Q. and R. Kapoor, "Enhancements to RTP Payload Formats for
         EVRC Family Codecs", <a href="rfc4788.html">RFC 4788</a>, January 2007.

   [<a id="ref-3" name="ref-3">3</a>]   Desineni, H. and Q. Xie, "RTP Payload Format for the Enhanced
         Variable Rate Wideband Codec (EVRC-WB) and the Media Subtype
         Updates for EVRC-B Codec", <a href="rfc5188.html">RFC 5188</a>, February 2008.

   [<a id="ref-4" name="ref-4">4</a>]   "Enhanced Variable Rate Codec, Speech Service Options 3, 68,
         70, and 73 for Wideband Spread Spectrum Digital Systems",
         3GPP2 C.S0014-D v3.0, October 2010, &lt;<a href="http://www.3gpp2.org/public_html/specs/C.S0014-D_v3.0_EVRC.pdf">http://www.3gpp2.org/</a>
         <a href="http://www.3gpp2.org/public_html/specs/C.S0014-D_v3.0_EVRC.pdf">public_html/specs/C.S0014-D_v3.0_EVRC.pdf</a>&gt;.




<span class="grey">Fang                         Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


   [<a id="ref-5" name="ref-5">5</a>]   Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson,
         "RTP: A Transport Protocol for Real-Time Applications", STD 64,
         <a href="rfc3550.html">RFC 3550</a>, July 2003.

   [<a id="ref-6" name="ref-6">6</a>]   Li, A., "RTP Payload Format for Enhanced Variable Rate Codecs
         (EVRC) and Selectable Mode Vocoders (SMV)", <a href="rfc3558.html">RFC 3558</a>,
         July 2003.

   [<a id="ref-7" name="ref-7">7</a>]   Schulzrinne, H. and S. Casner, "RTP Profile for Audio and Video
         Conferences with Minimal Control", STD 65, <a href="rfc3551.html">RFC 3551</a>, July 2003.

   [<a id="ref-8" name="ref-8">8</a>]   Casner, S., "Media Type Registration of RTP Payload Formats",
         <a href="rfc4855.html">RFC 4855</a>, February 2007.

   [<a id="ref-9" name="ref-9">9</a>]   Freed, N., Klensin, J., and T. Hansen, "Media Type
         Specifications and Registration Procedures", <a href="https://tools.ietf.org/html/bcp13">BCP 13</a>, <a href="rfc6838.html">RFC 6838</a>,
         January 2013.

   [<a id="ref-10" name="ref-10">10</a>]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
         Description Protocol", <a href="rfc4566.html">RFC 4566</a>, July 2006.

   [<a id="ref-11" name="ref-11">11</a>]  Garudadri, H., "MIME Type Registrations for 3GPP2 Multimedia
         Files", <a href="rfc4393.html">RFC 4393</a>, March 2006.

   [<a id="ref-12" name="ref-12">12</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model with
         Session Description Protocol (SDP)", <a href="rfc3264.html">RFC 3264</a>, June 2002.

   [<a id="ref-13" name="ref-13">13</a>]  Perkins, C. and JM. Valin, "Guidelines for the Use of Variable
         Bit Rate Audio with Secure RTP", <a href="rfc6562.html">RFC 6562</a>, March 2012.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/17.2.%20%20Informative%20References"></a><a class="selflink" href="#section-17.2" name="section-17.2">17.2</a>.  Informative References</span>

   [<a id="ref-14" name="ref-14">14</a>]  "3GPP2 File Formats for Multimedia Services", 3GPP2 C.S0050-B
         v1.0, May 2007, &lt;<a href="http://www.3gpp2.org/public_html/specs/C.S0050-B_v1.0_070521.pdf">http://www.3gpp2.org/public_html/specs/</a>
         <a href="http://www.3gpp2.org/public_html/specs/C.S0050-B_v1.0_070521.pdf">C.S0050-B_v1.0_070521.pdf</a>&gt;.

   [<a id="ref-15" name="ref-15">15</a>]  Handley, M., Perkins, C., and E. Whelan, "Session Announcement
         Protocol", <a href="rfc2974.html">RFC 2974</a>, October 2000.

   [<a id="ref-16" name="ref-16">16</a>]  Schulzrinne, H., Rao, A., and R. Lanphier, "Real Time Streaming
         Protocol (RTSP)", <a href="rfc2326.html">RFC 2326</a>, April 1998.










<span class="grey">Fang                         Standards Track                   [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6884.html">RFC 6884</a>               EVRC-NW RTP Payload Format             March 2013</span>


Author's Address

   Zheng Fang
   Qualcomm Incorporated
   5775 Morehouse Drive
   San Diego, CA  92126
   USA

   Phone: +1 858 651 9484
   EMail: zfang@qualcomm.com
   URI:   <a href="http://www.qualcomm.com/">http://www.qualcomm.com</a>








































Fang                         Standards Track                   [Page 21]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6884 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:26 GMT --></html>