<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4553 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:40 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4553" name="DC.Identifier"/>
<meta content="This document describes a pseudowire encapsulation for Time Division
Multiplexing (TDM) bit-streams (T1, E1, T3, E3) that disregards any
structure that may be imposed on these streams, in particular the
structure imposed by the standard TDM framing. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content='Alexander ("Sasha") Vainshtein &lt;sasha@axerra.com&gt;' name="DC.Creator"/>
<meta content="June, 2006" name="DC.Date.Issued"/>
<meta content="Structure-Agnostic Time Division Multiplexing (TDM) over Packet (SAToP)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4553 - Structure-Agnostic Time Division Multiplexing (TDM) over Packet (SAToP)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4553.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4553" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-pwe3-satop" title="draft-ietf-pwe3-satop">draft-ietf-pwe3...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4553" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4553" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4553" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=4553&amp;submit=rfc" title="IPR disclosures related to this document">IPR</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=4553">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                 A. Vainshtein, Ed.
Request for Comments: 4553                               Axerra Networks
Category: Standards Track                                 YJ. Stein, Ed.
                                                 RAD Data Communications
                                                               June 2006


          <span class="h1">Structure-Agnostic Time Division Multiplexing (TDM)</span>
                          <span class="h1">over Packet (SAToP)</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This document describes a pseudowire encapsulation for Time Division
   Multiplexing (TDM) bit-streams (T1, E1, T3, E3) that disregards any
   structure that may be imposed on these streams, in particular the
   structure imposed by the standard TDM framing.























<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Terminology and Reference Models ................................<a href="#page-3">3</a>
      <a href="#section-2.1">2.1</a>. Terminology ................................................<a href="#page-3">3</a>
      <a href="#section-2.2">2.2</a>. Reference Models ...........................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Emulated Services ...............................................<a href="#page-4">4</a>
   <a href="#section-4">4</a>. SAToP Encapsulation Layer .......................................<a href="#page-5">5</a>
      <a href="#section-4.1">4.1</a>. SAToP Packet Format ........................................<a href="#page-5">5</a>
      <a href="#section-4.2">4.2</a>. PSN and PW Demultiplexing Layer Headers ....................<a href="#page-5">5</a>
      <a href="#section-4.3">4.3</a>. SAToP Header ...............................................<a href="#page-6">6</a>
           <a href="#section-4.3.1">4.3.1</a>. Usage and Structure of the Control Word .............<a href="#page-8">8</a>
           <a href="#section-4.3.2">4.3.2</a>. Usage of RTP Header .................................<a href="#page-9">9</a>
   <a href="#section-5">5</a>. SAToP Payload Layer ............................................<a href="#page-10">10</a>
      <a href="#section-5.1">5.1</a>. General Payloads ..........................................<a href="#page-10">10</a>
      <a href="#section-5.2">5.2</a>. Octet-Aligned T1 ..........................................<a href="#page-11">11</a>
   <a href="#section-6">6</a>. SAToP Operation ................................................<a href="#page-12">12</a>
      <a href="#section-6.1">6.1</a>. Common Considerations .....................................<a href="#page-12">12</a>
      <a href="#section-6.2">6.2</a>. IWF Operation .............................................<a href="#page-12">12</a>
           <a href="#section-6.2.1">6.2.1</a>. PSN-Bound Direction ................................<a href="#page-12">12</a>
           <a href="#section-6.2.2">6.2.2</a>. CE-Bound Direction .................................<a href="#page-13">13</a>
      <a href="#section-6.3">6.3</a>. SAToP Defects .............................................<a href="#page-14">14</a>
      <a href="#section-6.4">6.4</a>. SAToP PW Performance Monitoring ...........................<a href="#page-15">15</a>
   <a href="#section-7">7</a>. Quality of Service (QoS) Issues ................................<a href="#page-16">16</a>
   <a href="#section-8">8</a>. Congestion Control .............................................<a href="#page-16">16</a>
   <a href="#section-9">9</a>. Security Considerations ........................................<a href="#page-18">18</a>
   <a href="#section-10">10</a>. Applicability Statement .......................................<a href="#page-18">18</a>
   <a href="#section-11">11</a>. IANA Considerations ...........................................<a href="#page-20">20</a>
   <a href="#section-12">12</a>. Acknowledgements ..............................................<a href="#page-20">20</a>
   <a href="#section-13">13</a>. Co-Authors ....................................................<a href="#page-20">20</a>
   <a href="#section-14">14</a>. Normative References ..........................................<a href="#page-21">21</a>
   <a href="#section-15">15</a>. Informative References ........................................<a href="#page-22">22</a>
   <a href="#appendix-A">Appendix A</a>: Old Mode of SAToP Encapsulation over L2TPv3 ...........<a href="#page-24">24</a>
   <a href="#appendix-B">Appendix B</a>: Parameters That MUST Be Agreed upon during the PW
               Setup .................................................<a href="#page-24">24</a>
















<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document describes a method for encapsulating Time Division
   Multiplexing (TDM) bit-streams (T1, E1, T3, E3) as pseudowires over
   packet-switching networks (PSN).  It addresses only structure-
   agnostic transport, i.e., the protocol completely disregards any
   structure that may possibly be imposed on these signals, in
   particular the structure imposed by standard TDM framing [<a href="#ref-G.704" title="2048">G.704</a>].
   This emulation is referred to as "emulation of unstructured TDM
   circuits" in [<a href="rfc4197.html" title='"Requirements for Edge-to-Edge Emulation of Time Division Multiplexed (TDM) Circuits over Packet Switching Networks"'>RFC4197</a>] and suits applications where the PEs have no
   need to interpret TDM data or to participate in the TDM signaling.

   The SAToP solution presented in this document conforms to the PWE3
   architecture described in [<a href="rfc3985.html" title='"Pseudo Wire Emulation Edge- to-Edge (PWE3) Architecture"'>RFC3985</a>] and satisfies both the relevant
   general requirements put forward in [<a href="rfc3916.html" title='"Requirements for Pseudo-Wire Emulation Edge-to-Edge (PWE3)"'>RFC3916</a>] and specific
   requirements for unstructured TDM signals presented in [<a href="rfc4197.html" title='"Requirements for Edge-to-Edge Emulation of Time Division Multiplexed (TDM) Circuits over Packet Switching Networks"'>RFC4197</a>].

   As with all PWs, SAToP PWs may be manually configured or set up using
   the PWE3 control protocol [<a href="rfc4447.html" title='"Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP)"'>RFC4447</a>].  Extensions to the PWE3 control
   protocol required for setup and maintenance of SAToP pseudowires and
   allocations of code points used for this purpose are described in
   separate documents ([<a href="#ref-TDM-CONTROL" title='"Control Protocol Extensions for Setup of TDM Pseudowires"'>TDM-CONTROL</a>] and [<a href="rfc4446.html" title='"IANA Allocations for Pseudowire Edge to Edge Emulation (PWE3)"'>RFC4446</a>], respectively).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology%20and%20Reference%20Models"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology and Reference Models</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Terminology"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Terminology</span>

   The following acronyms used in this document are defined in [<a href="rfc3985.html" title='"Pseudo Wire Emulation Edge- to-Edge (PWE3) Architecture"'>RFC3985</a>]
   and [<a href="rfc4197.html" title='"Requirements for Edge-to-Edge Emulation of Time Division Multiplexed (TDM) Circuits over Packet Switching Networks"'>RFC4197</a>]:

   ATM          Asynchronous Transfer Mode
   CE           Customer Edge
   CES          Circuit Emulation Service
   NSP          Native Service Processing
   PE           Provider Edge
   PDH          Plesiochronous Digital Hierarchy
   PW           Pseudowire
   SDH          Synchronous Digital Hierarchy
   SONET        Synchronous Optical Network
   TDM          Time Division Multiplexing







<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   In addition, the following TDM-specific terms are needed:

      o  Loss of Signal (LOS) - a condition of the TDM attachment
         circuit wherein the incoming signal cannot be detected.
         Criteria for entering and leaving the LOS condition can be
         found in [<a href="#ref-G.775">G.775</a>].

      o  Alarm Indication Signal (AIS) - a special bit pattern (e.g., as
         described in [<a href="#ref-G.775">G.775</a>]) in the TDM bit stream that indicates
         presence of an upstream circuit outage.  For E1, T1, and E3
         circuits, the AIS pattern is a sequence of binary "1" values of
         appropriate duration (the "all ones" pattern), and hence it can
         be detected and generated by structure-agnostic means.  The T3
         AIS pattern requires T3 framing (see [<a href="#ref-G.704" title="2048">G.704</a>], <a href="#section-2.5.3.6.1">Section</a>
         <a href="#section-2.5.3.6.1">2.5.3.6.1</a>) and hence can only be handled by a structure-aware
         NSP.

   We also use the term Interworking Function (IWF) to describe the
   functional block that segments and encapsulates TDM into SAToP
   packets and that in the reverse direction decapsulates SAToP packets
   and reconstitutes TDM.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Reference%20Models"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Reference Models</span>

   The generic models defined in Sections <a href="#section-4.1">4.1</a>, <a href="#section-4.2">4.2</a>, and <a href="#section-4.4">4.4</a> of [<a href="rfc3985.html" title='"Pseudo Wire Emulation Edge- to-Edge (PWE3) Architecture"'>RFC3985</a>]
   fully apply to SAToP.

   The native service addressed in this document is a special case of
   the bit stream payload type defined in <a href="rfc3985.html#section-3.3.3">Section 3.3.3 of [RFC3985]</a>.


   The Network Synchronization reference model and deployment scenarios
   for emulation of TDM services are described in [<a href="rfc4197.html" title='"Requirements for Edge-to-Edge Emulation of Time Division Multiplexed (TDM) Circuits over Packet Switching Networks"'>RFC4197</a>], <a href="#section-4.3">Section</a>
   <a href="#section-4.3">4.3</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Emulated%20Services"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Emulated Services</span>

   This specification describes edge-to-edge emulation of the following
   TDM services described in [<a href="#ref-G.702">G.702</a>]:

      1. E1  (2048 kbit/s)
      2. T1  (1544 kbit/s); this service is also known as DS1
      3. E3 (34368 kbit/s)
      4. T3 (44736 kbit/s); this service is also known as DS3

   The protocol used for emulation of these services does not depend on
   the method in which attachment circuits are delivered to the PEs.
   For example, a T1 attachment circuit is treated in the same way



<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   regardless of whether it is delivered to the PE on copper [<a href="#ref-G.703">G.703</a>],
   multiplexed in a T3 circuit [<a href="#ref-T1.107">T1.107</a>], mapped into a virtual tributary
   of a SONET/SDH circuit [<a href="#ref-G.707">G.707</a>], or carried over an ATM network using
   unstructured ATM Circuit Emulation Service (CES) [<a href="#ref-ATM-CES">ATM-CES</a>].
   Termination of any specific "carrier layers" used between the PE and
   CE is performed by an appropriate NSP.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20SAToP%20Encapsulation%20Layer"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  SAToP Encapsulation Layer</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20SAToP%20Packet%20Format"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  SAToP Packet Format</span>

   The basic format of SAToP packets is shown in Figure 1 below.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             ...                               |
   |              PSN and PW demultiplexing layer headers          |
   |                             ...                               |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                             ...                               |
   +--                                                           --+
   |                   SAToP Encapsulation Header                  |
   +--                                                           --+
   |                             ...                               |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                             ...                               |
   |                        TDM data (Payload)                     |
   |                             ...                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                   Figure 1.  Basic SAToP Packet Format

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20PSN%20and%20PW%20Demultiplexing%20Layer%20Headers"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  PSN and PW Demultiplexing Layer Headers</span>

   Both UDP and L2TPv3 [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>] can provide the PW demultiplexing
   mechanisms for SAToP PWs over an IPv4/IPv6 PSN.  The PW label
   provides the demultiplexing function for an MPLS PSN as described in
   <a href="rfc3985.html#section-5.4.2">Section 5.4.2 of [RFC3985]</a>.

   The total size of a SAToP packet for a specific PW MUST NOT exceed
   path MTU between the pair of PEs terminating this PW.  SAToP
   implementations using IPv4 PSN MUST mark the IPv4 datagrams they
   generate as "Don't Fragment" [<a href="rfc791.html" title='"Internet Protocol"'>RFC791</a>] (see also [<a href="#ref-PWE3-FRAG" title='"PWE3 Fragmentation and Reassembly"'>PWE3-FRAG</a>]).







<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20SAToP%20Header"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  SAToP Header</span>

   The SAToP header MUST contain the SAToP Control Word (4 bytes) and
   MAY also contain a fixed RTP header [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].  If the RTP header is
   included in the SAToP header, it MUST immediately follow the SAToP
   control word in all cases except UDP multiplexing, where it MUST
   precede it (see Figures 2a, 2b, and 2c below).

   Note: Such an arrangement complies with the traditional usage of RTP
   for the IPv4/IPv6 PSN with UDP multiplexing while making SAToP PWs
   Equal Cost Multi-Path (ECMP)-safe for the MPLS PSN by providing for
   PW-IP packet discrimination (see <a href="rfc3985.html#section-5.4.3">[RFC3985], Section 5.4.3</a>).
   Furthermore, it facilitates seamless stitching of L2TPv3-based and
   MPLS-based segments of SAToP PWs (see [<a href="#ref-PWE3-MS" title='"Segmented Pseudo Wire"'>PWE3-MS</a>]).

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             ...                               |
   |       IPv4/IPv6 and UDP (PW demultiplexing layer) headers     |
   |                             ...                               |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                                                               |
   +--                     OPTIONAL                              --+
   |                                                               |
   +--               Fixed RTP Header (see [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>])            --+
   |                                                               |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                  SAToP Control Word                           |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                            ...                                |
   |                      TDM data (Payload)                       |
   |                            ...                                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

        Figure 2a.  SAToP Packet Format for an IPv4/IPv6 PSN with
                             UDP PW Demultiplexing














<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             ...                               |
   |     IPv4/IPv6 and L2TPv3 (PW demultiplexing layer) headers    |
   |                             ...                               |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                  SAToP Control Word                           |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                                                               |
   +--                     OPTIONAL                              --+
   |                                                               |
   +--               Fixed RTP Header (see [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>])            --+
   |                                                               |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                             ...                               |
   |                       TDM data (Payload)                      |
   |                             ...                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

        Figure 2b.  SAToP Packet Format for an IPv4/IPv6 PSN with
                          L2TPv3 PW Demultiplexing

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                             ...                               |
   |                      MPLS Label Stack                         |
   |                             ...                               |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                  SAToP Control Word                           |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                                                               |
   +--                     OPTIONAL                              --+
   |                                                               |
   +--               Fixed RTP Header (see [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>])            --+
   |                                                               |
   +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
   |                             ...                               |
   |                       TDM data (Payload)                      |
   |                             ...                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

             Figure 2c.  SAToP Packet Format for an MPLS PSN







<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.1.%20%20Usage%20and%20Structure%20of%20the%20Control%20Word"></a><a class="selflink" href="#section-4.3.1" name="section-4.3.1">4.3.1</a>.  Usage and Structure of the Control Word</span>

   Usage of the SAToP control word allows:

      1. Detection of packet loss or misordering
      2. Differentiation between the PSN and attachment circuit problems
         as causes for the outage of the emulated service
      3. PSN bandwidth conservation by not transferring invalid data
         (AIS)
      4. Signaling of faults detected at the PW egress to the PW
         ingress.

   The structure of the SAToP Control Word is shown in Figure 3 below.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |0 0 0 0|L|R|RSV|FRG|   LEN     |       Sequence number         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 3.  Structure of the SAToP Control Word

   The use of Bits 0 to 3 is described in [<a href="rfc4385.html" title='"Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN"'>RFC4385</a>].  These bits MUST be
   set to zero unless they are being used to indicate the start of an
   Associated Channel Header (ACH).  An ACH is needed if the state of
   the SAToP PW is being monitored using Virtual Circuit Connectivity
   Verification [<a href="#ref-PWE3-VCCV" title='"Pseudo Wire Virtual Circuit Connectivity"'>PWE3-VCCV</a>].

   L - If set, indicates that TDM data carried in the payload is invalid
       due to an attachment circuit fault.  When the L bit is set the
       payload MAY be omitted in order to conserve bandwidth.  The CE-
       bound IWF MUST play out an appropriate amount of filler data
       regardless of the payload size.  Once set, if the fault is
       rectified, the L bit MUST be cleared.

   Note: This document does not specify which TDM fault conditions are
   treated as invalidating the data carried in the SAToP packets.
   Possible examples include, but are not limited to LOS and AIS.

   R - If set by the PSN-bound IWF, indicates that its local CE-bound
       IWF is in the packet loss state, i.e., has lost a preconfigured
       number of consecutive packets.  The R bit MUST be cleared by the
       PSN-bound IWF once its local CE-bound IWF has exited the packet
       loss state, i.e., has received a preconfigured number of
       consecutive packets.






<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   RSV and FRG (bits 6 to 9) - MUST be set to 0 by the PSN-bound IWF and
       MUST be ignored by the CE-bound IWF.  RSV is reserved.  FRG is
       fragmentation; see [<a href="#ref-PWE3-FRAG" title='"PWE3 Fragmentation and Reassembly"'>PWE3-FRAG</a>].

   LEN (bits 10 to 15) - MAY be used to carry the length of the SAToP
       packet (defined as the size of the SAToP header + the payload
       size) if it is less than 64 bytes, and MUST be set to zero
       otherwise.  When the LEN field is set to 0, the preconfigured
       size of the SAToP packet payload MUST be assumed to be as
       described in <a href="#section-5.1">Section 5.1</a>, and if the actual packet size is
       inconsistent with this length, the packet MUST be considered
       malformed.

   Sequence number - used to provide the common PW sequencing function
       as well as detection of lost packets.  It MUST be generated in
       accordance with the rules defined in <a href="rfc3550.html#section-5.1">Section 5.1 of [RFC3550]</a> for
       the RTP sequence number:

         o Its space is a 16-bit unsigned circular space
         o Its initial value SHOULD be random (unpredictable).

       It MUST be incremented with each SAToP data packet sent in the
       specific PW.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.2.%20%20Usage%20of%20RTP%20Header"></a><a class="selflink" href="#section-4.3.2" name="section-4.3.2">4.3.2</a>.  Usage of RTP Header</span>

   When RTP is used, the following fields of the fixed RTP header (see
   <a href="rfc3550.html#section-5.1">[RFC3550], Section 5.1</a>) MUST be set to zero: P (padding), X (header
   extension), CC (CSRC count), and M (marker).

   The PT (payload type) field is used as follows:

      1. One PT value MUST be allocated from the range of dynamic values
         (see [<a href="#ref-RTP-TYPES">RTP-TYPES</a>]) for each direction of the PW.  The same PT
         value MAY be reused for both directions of the PW and also
         reused between different PWs.

      2. The PSN-bound IWF MUST set the PT field in the RTP header to
         the allocated value.

      3. The CE-bound IWF MAY use the received value to detect malformed
         packets.

   The sequence number MUST be the same as the sequence number in the
   SAToP control word.






<span class="grey">Vainshtein &amp; Stein          Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   The RTP timestamps are used for carrying timing information over the
   network.  Their values are generated in accordance with the rules
   established in [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   The frequency of the clock used for generating timestamps MUST be an
   integer multiple of 8 kHz.  All implementations of SAToP MUST support
   the 8 kHz clock.  Other multiples of 8 kHz MAY be used.

   The SSRC (synchronization source) value in the RTP header MAY be used
   for detection of misconnections, i.e., incorrect interconnection of
   attachment circuits.

   Timestamp generation MAY be used in the following modes:

      1. Absolute mode: The PSN-bound IWF sets timestamps using the
         clock recovered from the incoming TDM attachment circuit.  As a
         consequence, the timestamps are closely correlated with the
         sequence numbers.  All SAToP implementations that support usage
         of the RTP header MUST support this mode.
      2. Differential mode: Both IWFs have access to a common high-
         quality timing source, and this source is used for timestamp
         generation.  Support of this mode is OPTIONAL.

   Usage of the fixed RTP header in a SAToP PW and all the options
   associated with its usage (the timestamping clock frequency, the
   timestamping mode, selected PT and SSRC values) MUST be agreed upon
   between the two SAToP IWFs during PW setup as described in
   [<a href="#ref-TDM-CONTROL" title='"Control Protocol Extensions for Setup of TDM Pseudowires"'>TDM-CONTROL</a>].  Other, RTP-specific methods (e.g., see [<a href="rfc3551.html" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>])
   MUST NOT be used.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20SAToP%20Payload%20Layer"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  SAToP Payload Layer</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20General%20Payloads"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  General Payloads</span>

   In order to facilitate handling of packet loss in the PSN, all
   packets belonging to a given SAToP PW are REQUIRED to carry a fixed
   number of bytes filled with TDM data received from the attachment
   circuit.  The packet payload size MUST be defined during the PW
   setup, MUST be the same for both directions of the PW, and MUST
   remain unchanged for the lifetime of the PW.

   The CE-bound and PSN-bound IWFs MUST agree on SAToP packet payload
   size during PW setup (default payload size values defined below
   guarantee that such an agreement is always possible).  The SAToP
   packet payload size can be exchanged over the PWE3 control protocol
   ([<a href="#ref-TDM-CONTROL" title='"Control Protocol Extensions for Setup of TDM Pseudowires"'>TDM-CONTROL</a>]) by using the Circuit Emulation over Packet (CEP)/TDM
   Payload Bytes sub-TLV of the Interface Parameters TLV ([<a href="rfc4446.html" title='"IANA Allocations for Pseudowire Edge to Edge Emulation (PWE3)"'>RFC4446</a>]).




<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   SAToP uses the following ordering for packetization of the TDM data:

      o  The order of the payload bytes corresponds to their order on
         the attachment circuit.

      o  Consecutive bits coming from the attachment circuit fill each
         payload byte starting from most significant bit to least
         significant.

   All SAToP implementations MUST be capable of supporting the following
   payload sizes:

      o  E1 - 256 bytes
      o  T1 - 192 bytes
      o  E3 and T3 - 1024 bytes.

   Notes:

      1. Whatever the selected payload size, SAToP does not assume
         alignment to any underlying structure imposed by TDM framing
         (byte, frame, or multiframe alignment).
      2. When the L bit in the SAToP control word is set, SAToP packets
         MAY omit invalid TDM data in order to conserve PSN bandwidth.
      3. Payload sizes that are multiples of 47 bytes MAY be used in
         conjunction with unstructured ATM-CES [<a href="#ref-ATM-CES">ATM-CES</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Octet-Aligned%20T1"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Octet-Aligned T1</span>

   An unstructured T1 attachment circuit is sometimes provided already
   padded to an integer number of bytes, as described in Annex B of
   [<a href="#ref-G.802">G.802</a>].  This occurs when the T1 is de-mapped from a SONET/SDH
   virtual tributary/container, or when it is de-framed by a dual-mode
   E1/T1 framer.

   In order to facilitate operation in such cases, SAToP defines a
   special "octet-aligned T1" transport mode.  In this mode, the SAToP
   payload consists of a number of 25-byte subframes, each subframe
   carrying 193 bits of TDM data and 7 bits of padding.  This mode is
   depicted in Figure 4 below.












<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


      |     1         |        2      | ...   |      25       |
      |0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7| ...   |0 1 2 3 4 5 6 7|
      |=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |           TDM Data                      |  padding    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            .................................          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           TDM Data                      |  padding    |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+

      Figure 4.  SAToP Payload Format for Octet-Aligned T1 Transport

   Notes:

   1. No alignment with the framing structure that may be imposed on the
      T1 bit-stream is implied.
   2. An additional advantage of the octet-aligned T1 transport mode is
      the ability to select the SAToP packetization latency as an
      arbitrary integer multiple of 125 microseconds.

   Support of the octet-aligned T1 transport mode is OPTIONAL.  An
   octet-aligned T1 SAToP PW is not interoperable with a T1 SAToP PW
   that carries a non-aligned bit-stream, as described in the previous
   section.

   Implementations supporting octet-aligned T1 transport mode MUST be
   capable of supporting a payload size of 200 bytes (i.e., a payload of
   eight 25-byte subframes) corresponding to precisely 1 millisecond of
   TDM data.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20SAToP%20Operation"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  SAToP Operation</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Common%20Considerations"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Common Considerations</span>

   Edge-to-edge emulation of a TDM service using SAToP is only possible
   when the two PW attachment circuits are of the same type (T1, E1, T3,
   E3).  The service type is exchanged at PW setup as described in
   [<a href="rfc4447.html" title='"Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP)"'>RFC4447</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20IWF%20Operation"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  IWF Operation</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.1.%20%20PSN-Bound%20Direction"></a><a class="selflink" href="#section-6.2.1" name="section-6.2.1">6.2.1</a>.  PSN-Bound Direction</span>

   Once the PW is set up, the PSN-bound SAToP IWF operates as follows:

   TDM data is packetized using the configured number of payload bytes
   per packet.




<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   Sequence numbers, flags, and timestamps (if the RTP header is used)
   are inserted in the SAToP headers.

   SAToP, PW demultiplexing layer, and PSN headers are prepended to the
   packetized service data.

   The resulting packets are transmitted over the PSN.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.2.%20%20CE-Bound%20Direction"></a><a class="selflink" href="#section-6.2.2" name="section-6.2.2">6.2.2</a>.  CE-Bound Direction</span>

   The CE-bound SAToP IWF SHOULD include a jitter buffer where the
   payload of the received SAToP packets is stored prior to play-out to
   the local TDM attachment circuit.  The size of this buffer SHOULD be
   locally configurable to allow accommodation to the PSN-specific
   packet delay variation.

   The CE-bound SAToP IWF SHOULD use the sequence number in the control
   word for detection of lost and misordered packets.  If the RTP header
   is used, the RTP sequence numbers MAY be used for the same purposes.

   Note: With SAToP, a valid sequence number can be always found in bits
   16 - 31 of the first 32-bit word immediately following the PW
   demultiplexing header regardless of the specific PSN type,
   multiplexing method, usage or non-usage of the RTP header, etc.  This
   approach simplifies implementations supporting multiple encapsulation
   types as well as implementation of multi-segment (MS) PWs using
   different encapsulation types in different segments.

   The CE-bound SAToP IWF MAY reorder misordered packets.  Misordered
   packets that cannot be reordered MUST be discarded and treated as
   lost.

   The payload of the received SAToP packets marked with the L bit set
   SHOULD be replaced by the equivalent amount of the "all ones" pattern
   even if it has not been omitted.

   The payload of each lost SAToP packet MUST be replaced with the
   equivalent amount of the replacement data.  The contents of the
   replacement data are implementation-specific and MAY be locally
   configurable.  By default, all SAToP implementations MUST support
   generation of the "all ones" pattern as the replacement data.  Before
   a PW has been set up and after a PW has been torn down, the IWF MUST
   play out the "all ones" pattern to its TDM attachment circuit.

   Once the PW has been set up, the CE-bound IWF begins to receive SAToP
   packets and to store their payload in the jitter buffer but continues
   to play out the "all ones" pattern to its TDM attachment circuit.
   This intermediate state persists until a preconfigured amount of TDM



<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   data (usually half of the jitter buffer) has been received in
   consecutive SAToP packets or until a preconfigured intermediate state
   timer (started when the PW setup is completed) expires.

   Once the preconfigured amount of the TDM data has been received, the
   CE-bound SAToP IWF enters its normal operation state where it
   continues to receive SAToP packets and to store their payload in the
   jitter buffer while playing out the contents of the jitter buffer in
   accordance with the required clock.  In this state, the CE-bound IWF
   performs clock recovery, MAY monitor PW defects, and MAY collect PW
   performance monitoring data.

   If the CE-bound SAToP IWF detects loss of a preconfigured number of
   consecutive packets or if the intermediate state timer expires before
   the required amount of TDM data has been received, it enters its
   packet loss state.  While in this state, the local PSN-bound SAToP
   IWF SHOULD mark every packet it transmits with the R bit set.  The
   CE-bound SAToP IWF leaves this state and transitions to the normal
   one once a preconfigured number of consecutive valid SAToP packets
   have been received.  (Successfully reordered packets contribute to
   the count of consecutive packets.)

   The CE-bound SAToP IWF MUST provide an indication of TDM data
   validity to the CE.  This can be done by transporting or by
   generating the native AIS indication.  As mentioned above, T3 AIS
   cannot be detected or generated by structure-agnostic means, and
   hence a structure-aware NSP MUST be used when generating a valid AIS
   pattern.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20SAToP%20Defects"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  SAToP Defects</span>

   In addition to the packet loss state of the CE-bound SAToP IWF
   defined above, it MAY detect the following defects:

      o  Stray packets
      o  Malformed packets
      o  Excessive packet loss rate
      o  Buffer overrun
      o  Remote packet loss

   Corresponding to each defect is a defect state of the IWF, a
   detection criterion that triggers transition from the normal
   operation state to the appropriate defect state, and an alarm that
   MAY be reported to the management system and thereafter cleared.
   Alarms are only reported when the defect state persists for a
   preconfigured amount of time (typically 2.5 seconds) and MUST be





<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   cleared after the corresponding defect is undetected for a second
   preconfigured amount of time (typically 10 seconds).  The trigger and
   release times for the various alarms may be independent.

   Stray packets MAY be detected by the PSN and PW demultiplexing
   layers.  When RTP is used, the SSRC field in the RTP header MAY be
   used for this purpose as well.  Stray packets MUST be discarded by
   the CE-bound IWF, and their detection MUST NOT affect mechanisms for
   detection of packet loss.

   Malformed packets are detected by mismatch between the expected
   packet size (taking the value of the L bit into account) and the
   actual packet size inferred from the PSN and PW demultiplexing
   layers.  When RTP is used, lack of correspondence between the PT
   value and that allocated for this direction of the PW MAY also be
   used for this purpose.  Malformed in-order packets MUST be discarded
   by the CE-bound IWF and replacement data generated as with lost
   packets.

   Excessive packet loss rate is detected by computing the average
   packet loss rate over a configurable amount of times and comparing it
   with a preconfigured threshold.

   Buffer overrun is detected in the normal operation state when the
   jitter buffer of the CE-bound IWF cannot accommodate newly arrived
   SAToP packets.

   Remote packet loss is indicated by reception of packets with their R
   bit set.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4.%20%20SAToP%20PW%20Performance%20Monitoring"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a>.  SAToP PW Performance Monitoring</span>

   Performance monitoring (PM) parameters are routinely collected for
   TDM services and provide an important maintenance mechanism in TDM
   networks.  The ability to collect compatible PM parameters for SAToP
   PWs enhances their maintenance capabilities.

   Collection of the SAToP PW performance monitoring parameters is
   OPTIONAL and, if implemented, is only performed after the CE-bound
   IWF has exited its intermediate state.

   SAToP defines error events, errored blocks, and defects as follows:

      o  A SAToP error event is defined as insertion of a single
         replacement packet into the jitter buffer (replacement of
         payload of SAToP packets with the L bit set is not considered
         insertion of a replacement packet).




<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


      o  A SAToP errored data block is defined as a block of data played
         out to the TDM attachment circuit and of a size defined in
         accordance with the [<a href="#ref-G.826">G.826</a>] rules for the corresponding TDM
         service that has experienced at least one SAToP error event.

      o  A SAToP defect is defined as the packet loss state of the
         CE-bound SAToP IWF.

   The SAToP PW PM parameters (Errored, Severely Errored, and
   Unavailable Seconds) are derived from these definitions in accordance
   with [<a href="#ref-G.826">G.826</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Quality%20of%20Service%20%28QoS%29%20Issues"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Quality of Service (QoS) Issues</span>

   SAToP SHOULD employ existing QoS capabilities of the underlying PSN.

   If the PSN providing connectivity between PE devices is Diffserv-
   enabled and provides a PDB [<a href="rfc3086.html" title='"Definition of Differentiated Services Per Domain Behaviors and Rules for their Specification"'>RFC3086</a>] that guarantees low jitter and
   low loss, the SAToP PW SHOULD use this PDB in compliance with the
   admission and allocation rules the PSN has put in place for that PDB
   (e.g., marking packets as directed by the PSN).

   If the PSN is Intserv-enabled, then GS (Guaranteed Service) [<a href="rfc2212.html" title='"Specification of Guaranteed Quality of Service"'>RFC2212</a>]
   with the appropriate bandwidth reservation SHOULD be used in order to
   provide a bandwidth guarantee equal or greater than that of the
   aggregate TDM traffic.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Congestion%20Control"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Congestion Control</span>

   As explained in [<a href="rfc3985.html" title='"Pseudo Wire Emulation Edge- to-Edge (PWE3) Architecture"'>RFC3985</a>], the PSN carrying the PW may be subject to
   congestion.  SAToP PWs represent inelastic constant bit-rate (CBR)
   flows and cannot respond to congestion in a TCP-friendly manner
   prescribed by [<a href="rfc2914.html" title='"Congestion Control Principles"'>RFC2914</a>], although the percentage of total bandwidth
   they consume remains constant.

   Unless appropriate precautions are taken, undiminished demand of
   bandwidth by SAToP PWs can contribute to network congestion that may
   impact network control protocols.

   Whenever possible, SAToP PWs SHOULD be carried across traffic-
   engineered PSNs that provide either bandwidth reservation and
   admission control or forwarding prioritization and boundary traffic
   conditioning mechanisms.  IntServ-enabled domains supporting
   Guaranteed Service (GS) [<a href="rfc2212.html" title='"Specification of Guaranteed Quality of Service"'>RFC2212</a>] and DiffServ-enabled domains
   [<a href="rfc2475.html" title='"An Architecture for Differentiated Service"'>RFC2475</a>] supporting Expedited Forwarding (EF) [<a href="rfc3246.html" title='"An Expedited Forwarding PHB (Per-Hop Behavior)"'>RFC3246</a>] provide
   examples of such PSNs.  Such mechanisms will negate, to some degree,
   the effect of the SAToP PWs on the neighboring streams.  In order to
   facilitate boundary traffic conditioning of SAToP traffic over IP



<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   PSNs, the SAToP IP packets SHOULD NOT use the DiffServ Code Point
   (DSCP) value reserved for the Default Per-Hop Behavior (PHB)
   [<a href="rfc2474.html" title='"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers"'>RFC2474</a>].

   If SAToP PWs run over a PSN providing best-effort service, they
   SHOULD monitor packet loss in order to detect "severe congestion".
   If such a condition is detected, a SAToP PW SHOULD shut down bi-
   directionally for some period of time as described in <a href="rfc3985.html#section-6.5">Section 6.5 of
   [RFC3985]</a>.

   Note that:

   1. The SAToP IWF can inherently provide packet loss measurement since
      the expected rate of arrival of SAToP packets is fixed and known

   2. The results of the SAToP packet loss measurement may not be a
      reliable indication of presence or absence of severe congestion if
      the PSN provides enhanced delivery.  For example:

      a) If SAToP traffic takes precedence over non-SAToP traffic,
         severe congestion can develop without significant SAToP packet
         loss.

      b) If non-SAToP traffic takes precedence over SAToP traffic, SAToP
         may experience substantial packet loss due to a short-term
         burst of high-priority traffic.

   3. The TDM services emulated by the SAToP PWs have high availability
      objectives (see [<a href="#ref-G.826">G.826</a>]) that MUST be taken into account when
      deciding on temporary shutdown of SAToP PWs.

   This specification does not define the exact criteria for detecting
   "severe congestion" using the SAToP packet loss rate or the specific
   methods for bi-directional shutdown the SAToP PWs (when such severe
   congestion has been detected) and their subsequent re-start after a
   suitable delay.  This is left for further study.  However, the
   following considerations may be used as guidelines for implementing
   the SAToP severe congestion shutdown mechanism:

   1. SAToP Performance Monitoring techniques (see <a href="#section-6.4">Section 6.4</a>) provide
      entry and exit criteria for the SAToP PW "Unavailable" state that
      make it closely correlated with the "Unavailable" state of the
      emulated TDM circuit as specified in [<a href="#ref-G.826">G.826</a>].  Using the same
      criteria for "severe congestion" detection may decrease the risk
      of shutting down the SAToP PW while the emulated TDM circuit is
      still considered available by the CE.





<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   2. If the SAToP PW has been set up using either PWE3 control protocol
      [<a href="rfc4447.html" title='"Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP)"'>RFC4447</a>] or L2TPv3 [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>], the regular PW teardown procedures
      of these protocols SHOULD be used.

   3. If one of the SAToP PW end points stops transmission of packets
      for a sufficiently long period, its peer (observing 100% packet
      loss) will necessarily detect "severe congestion" and also stop
      transmission, thus achieving bi-directional PW shutdown.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   SAToP does not enhance or detract from the security performance of
   the underlying PSN; rather, it relies upon the PSN mechanisms for
   encryption, integrity, and authentication whenever required.

   SAToP PWs share susceptibility to a number of pseudowire-layer
   attacks and will use whatever mechanisms for confidentiality,
   integrity, and authentication are developed for general PWs.  These
   methods are beyond the scope of this document.

   Although SAToP PWs MAY employ an RTP header when explicit transfer of
   timing information is required, SRTP (see [<a href="rfc3711.html" title='"The Secure Real-time Transport Protocol (SRTP)"'>RFC3711</a>]) mechanisms are
   NOT RECOMMENDED as a substitute for PW layer security.

   Misconnection detection capabilities of SAToP increase its resilience
   to misconfiguration and some types of denial-of-service (DoS)
   attacks.

   Random initialization of sequence numbers, in both the control word
   and the optional RTP header, makes known-plaintext attacks on
   encrypted SAToP PWs more difficult.  Encryption of PWs is beyond the
   scope of this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Applicability%20Statement"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Applicability Statement</span>

   SAToP is an encapsulation layer intended for carrying TDM circuits
   (E1/T1/E3/T3) over PSN in a structure-agnostic fashion.

   SAToP fully complies with the principle of minimal intervention, thus
   minimizing overhead and computational power required for
   encapsulation.

   SAToP provides sequencing and synchronization functions needed for
   emulation of TDM bit-streams, including detection of lost or
   misordered packets and appropriate compensation.






<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   TDM bit-streams carried over SAToP PWs may experience delays
   exceeding those typical of native TDM networks.  These delays include
   the SAToP packetization delay, edge-to-edge delay of the underlying
   PSN, and the delay added by the jitter buffer.  It is recommended to
   estimate both delay and delay variation prior to setup of a SAToP PW.

   SAToP carries TDM streams over PSN in their entirety, including any
   TDM signaling contained within the data.  Consequently, the emulated
   TDM services are sensitive to the PSN packet loss.  Appropriate
   generation of replacement data can be used to prevent shutting down
   the CE TDM interface due to occasional packet loss.  Other effects of
   packet loss on this interface (e.g., errored blocks) cannot be
   prevented.

   Note: Structure-aware TDM emulation (see [<a href="#ref-CESoPSN" title='"TDM Circuit Emulation Service over Packet Switched Network (CESoPSN)"'>CESoPSN</a>] or [<a href="#ref-TDMoIP" title='"TDMoIP"'>TDMoIP</a>])
   completely hides effects of the PSN packet loss on the CE TDM
   interface (because framing and Cyclic Redundancy Checks (CRCs) are
   generated locally) and allows usage of application-specific packet
   loss concealment methods to minimize effects on the applications
   using the emulated TDM service.

   SAToP can be used in conjunction with various network synchronization
   scenarios (see [<a href="rfc4197.html" title='"Requirements for Edge-to-Edge Emulation of Time Division Multiplexed (TDM) Circuits over Packet Switching Networks"'>RFC4197</a>]) and clock recovery techniques.  The quality
   of the TDM clock recovered by the SAToP IWF may be implementation-
   specific.  The quality may be improved by using RTP if a common clock
   is available at both ends of the SAToP PW.

   SAToP provides for effective fault isolation by carrying the local
   attachment circuit failure indications.

   The option not to carry invalid TDM data enables PSN bandwidth
   conservation.

   SAToP allows collection of TDM-like faults and performance monitoring
   parameters and hence emulates 'classic' carrier services of TDM.

   SAToP provides for a carrier-independent ability to detect
   misconnections and malformed packets.  This feature increases
   resilience of the emulated service to misconfiguration and DoS
   attacks.

   Being a constant bit rate (CBR) service, SAToP cannot provide TCP-
   friendly behavior under network congestion.

   Faithfulness of a SAToP PW may be increased by exploiting QoS
   features of the underlying PSN.





<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   SAToP does not provide any mechanisms for protection against PSN
   outages, and hence its resilience to such outages is limited.
   However, lost-packet replacement and packet reordering mechanisms
   increase resilience of the emulated service to fast PSN rerouting
   events.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  IANA Considerations</span>

   Allocation of PW Types for the corresponding SAToP PWs is defined in
   [<a href="rfc4446.html" title='"IANA Allocations for Pseudowire Edge to Edge Emulation (PWE3)"'>RFC4446</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Acknowledgements"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Acknowledgements</span>

   We acknowledge the work of Gil Biran and Hugo Silberman who
   implemented TDM transport over IP in 1998.

   We would like to thank Alik Shimelmits for many productive
   discussions and Ron Insler for his assistance in deploying TDM over
   PSN.

   We express deep gratitude to Stephen Casner who has reviewed in
   detail one of the predecessors of this document and provided valuable
   feedback regarding various aspects of RTP usage, and to Kathleen
   Nichols who has provided the current text of the QoS section
   considering Diffserv-enabled PSN.

   We thank William Bartholomay, Robert Biksner, Stewart Bryant, Rao
   Cherukuri, Ron Cohen, Alex Conta, Shahram Davari, Tom Johnson, Sim
   Narasimha, Yaron Raz, and Maximilian Riegel for their valuable
   feedback.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Co-Authors"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Co-Authors</span>

   The following are co-authors of this document:

   Motty Anavi                 RAD Data Communications
   Tim Frost                   Zarlink Semiconductors
   Eduard Metz                 TNO Telecom
   Prayson Pate                Overture Networks
   Akiva Sadovski
   Israel Sasson               Axerra Networks
   Ronen Shashoua              RAD Data Communications









<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20Normative%20References"></a><a class="selflink" href="#section-14" name="section-14">14</a>.  Normative References</span>

   [<a id="ref-G.702" name="ref-G.702">G.702</a>]        ITU-T Recommendation G.702 (11/88) - Digital Hierarchy
                  Bit Rates.

   [<a id="ref-G.703" name="ref-G.703">G.703</a>]        ITU-T Recommendation G.703 (10/98) -
                  Physical/Electrical Characteristics of Hierarchical
                  Digital Interfaces.

   [<a id="ref-G.704" name="ref-G.704">G.704</a>]        ITU-T Recommendation G.704 (10/98) - Synchronous frame
                  structures used at 1544, 6312, 2048, 8448 and 44 736
                  Kbit/s hierarchical levels.

   [<a id="ref-G.707" name="ref-G.707">G.707</a>]        ITU-T Recommendation G.707 (03/96) - Network Node
                  Interface for the Synchronous Digital Hierarchy (SDH).

   [<a id="ref-G.775" name="ref-G.775">G.775</a>]        ITU-T Recommendation G.775 (10/98) - Loss of Signal
                  (LOS), Alarm Indication Signal (AIS) and Remote Defect
                  Indication (RDI) Defect Detection and Clearance
                  Criteria for PDH Signals.

   [<a id="ref-G.802" name="ref-G.802">G.802</a>]        ITU-T Recommendation G.802 (11/88) - Interworking
                  between Networks Based on Different Digital
                  Hierarchies and Speech Encoding Laws.

   [<a id="ref-G.826" name="ref-G.826">G.826</a>]        ITU-T Recommendation G.826 (02/99) - Error performance
                  parameters and objectives for international, constant
                  bit rate digital paths at or above the primary rate.

   [<a id="ref-RFC791" name="ref-RFC791">RFC791</a>]       Postel, J., "Internet Protocol", STD 5, <a href="rfc791.html">RFC 791</a>,
                  September 1981.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]      Bradner, S., "Key words for use in RFCs to Indicate
                  Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2474" name="ref-RFC2474">RFC2474</a>]      Nichols, K., Blake, S., Baker, F., and D. Black,
                  "Definition of the Differentiated Services Field (DS
                  Field) in the IPv4 and IPv6 Headers", <a href="rfc2474.html">RFC 2474</a>,
                  December 1998.

   [<a id="ref-RFC2475" name="ref-RFC2475">RFC2475</a>]      Blake, S., Black, D., Carlson, M., Davies, E., Wang,
                  Z., and W. Weiss, "An Architecture for Differentiated
                  Service", <a href="rfc2475.html">RFC 2475</a>, December 1998.

   [<a id="ref-RFC2914" name="ref-RFC2914">RFC2914</a>]      Floyd, S., "Congestion Control Principles", <a href="https://tools.ietf.org/html/bcp41">BCP 41</a>,
                  <a href="rfc2914.html">RFC 2914</a>, September 2000.





<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   [<a id="ref-RFC3086" name="ref-RFC3086">RFC3086</a>]      Nichols, K. and B. Carpenter, "Definition of
                  Differentiated Services Per Domain Behaviors and Rules
                  for their Specification", <a href="rfc3086.html">RFC 3086</a>, April 2001.

   [<a id="ref-RFC3550" name="ref-RFC3550">RFC3550</a>]      Schulzrinne, H., Casner, S., Frederick, R., and V.
                  Jacobson, "RTP: A Transport Protocol for Real-Time
                  Applications", STD 64, <a href="rfc3550.html">RFC 3550</a>, July 2003.

   [<a id="ref-RFC3931" name="ref-RFC3931">RFC3931</a>]      Lau, J., Townsley, M., and I. Goyret, "Layer Two
                  Tunneling Protocol - Version 3 (L2TPv3)", <a href="rfc3931.html">RFC 3931</a>,
                  March 2005.

   [<a id="ref-RFC4385" name="ref-RFC4385">RFC4385</a>]      Bryant, S., Swallow, G., Martini, L., and D.
                  McPherson, "Pseudowire Emulation Edge-to-Edge (PWE3)
                  Control Word for Use over an MPLS PSN", <a href="rfc4385.html">RFC 4385</a>,
                  February 2006.

   [<a id="ref-RFC4446" name="ref-RFC4446">RFC4446</a>]      Martini, L., "IANA Allocations for Pseudowire Edge to
                  Edge Emulation (PWE3)", <a href="https://tools.ietf.org/html/bcp116">BCP 116</a>, <a href="rfc4446.html">RFC 4446</a>, April 2006.

   [<a id="ref-RFC4447" name="ref-RFC4447">RFC4447</a>]      Martini, L., Rosen, E., El-Aawar, N., Smith, T., and
                  G. Heron, "Pseudowire Setup and Maintenance Using the
                  Label Distribution Protocol (LDP)", <a href="rfc4447.html">RFC 4447</a>, April
                  2006.

   [<a id="ref-RTP-TYPES" name="ref-RTP-TYPES">RTP-TYPES</a>]    RTP PARAMETERS, &lt;<a href="http://www.iana.org/assignments/rtp-parameters">http://www.iana.org/assignments/rtp-</a>
                  <a href="http://www.iana.org/assignments/rtp-parameters">parameters</a>&gt;.

   [<a id="ref-T1.107" name="ref-T1.107">T1.107</a>]       American National Standard for Telecommunications -
                  Digital Hierarchy - Format Specifications, ANSI
                  T1.107-1988.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/15.%20%20Informative%20References"></a><a class="selflink" href="#section-15" name="section-15">15</a>.  Informative References</span>

   [<a id="ref-ATM-CES" name="ref-ATM-CES">ATM-CES</a>]      ATM forum specification af-vtoa-0078 (CES 2.0) Circuit
                  Emulation Service Interoperability Specification Ver.
                  2.0.

   [<a id="ref-CESoPSN" name="ref-CESoPSN">CESoPSN</a>]      Vainshtein, A., Ed., Sasson, I., Metz, E., Frost, T.,
                  and P. Pate, "TDM Circuit Emulation Service over
                  Packet Switched Network (CESoPSN)", Work in Progress,
                  November 2005.

   [<a id="ref-PWE3-MS" name="ref-PWE3-MS">PWE3-MS</a>]      Martini, L., Metz, C., Nadeau, T., Duckett, M., and F.
                  Balus, "Segmented Pseudo Wire", Work in Progress,
                  March 2006.





<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   [<a id="ref-PWE3-FRAG" name="ref-PWE3-FRAG">PWE3-FRAG</a>]    Malis, A. and M. Townsley, "PWE3 Fragmentation and
                  Reassembly", Work in Progress, November 2005.

   [<a id="ref-PWE3-VCCV" name="ref-PWE3-VCCV">PWE3-VCCV</a>]    Nadeau, T. and R. Aggarwal, "Pseudo Wire Virtual
                  Circuit Connectivity", Work in Progress, August 2005.

   [<a id="ref-RFC2212" name="ref-RFC2212">RFC2212</a>]      Shenker, S., Partridge, C., and R. Guerin,
                  "Specification of Guaranteed Quality of Service", <a href="rfc2212.html">RFC</a>
                  <a href="rfc2212.html">2212</a>, September 1997.

   [<a id="ref-RFC3246" name="ref-RFC3246">RFC3246</a>]      Davie, B., Charny, A., Bennet, J.C., Benson, K., Le
                  Boudec, J., Courtney, W., Davari, S., Firoiu, V., and
                  D. Stiliadis, "An Expedited Forwarding PHB (Per-Hop
                  Behavior)", <a href="rfc3246.html">RFC 3246</a>, March 2002.

   [<a id="ref-RFC3551" name="ref-RFC3551">RFC3551</a>]      Schulzrinne, H. and S. Casner, "RTP Profile for Audio
                  and Video Conferences with Minimal Control", STD 65,
                  <a href="rfc3551.html">RFC 3551</a>, July 2003.

   [<a id="ref-RFC3711" name="ref-RFC3711">RFC3711</a>]      Baugher, M., McGrew, D., Naslund, M., Carrara, E., and
                  K. Norrman, "The Secure Real-time Transport Protocol
                  (SRTP)", <a href="rfc3711.html">RFC 3711</a>, March 2004.

   [<a id="ref-RFC3916" name="ref-RFC3916">RFC3916</a>]      Xiao, X., McPherson, D., and P. Pate, "Requirements
                  for Pseudo-Wire Emulation Edge-to-Edge (PWE3)", <a href="rfc3916.html">RFC</a>
                  <a href="rfc3916.html">3916</a>, September 2004.

   [<a id="ref-RFC3985" name="ref-RFC3985">RFC3985</a>]      Bryant, S. and P. Pate, "Pseudo Wire Emulation Edge-
                  to-Edge (PWE3) Architecture", <a href="rfc3985.html">RFC 3985</a>, March 2005.

   [<a id="ref-RFC4197" name="ref-RFC4197">RFC4197</a>]      Riegel, M., "Requirements for Edge-to-Edge Emulation
                  of Time Division Multiplexed (TDM) Circuits over
                  Packet Switching Networks", <a href="rfc4197.html">RFC 4197</a>, October 2005.

   [<a id="ref-TDM-CONTROL" name="ref-TDM-CONTROL">TDM-CONTROL</a>]  Vainshtein, A. and Y. Stein, "Control Protocol
                  Extensions for Setup of TDM Pseudowires", Work in
                  Progress, July 2005.

   [<a id="ref-TDMoIP" name="ref-TDMoIP">TDMoIP</a>]       Stein, Y., <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22TDMoIP%22" style="text-decoration: none">"TDMoIP"</a>, Work in Progress, February 2005.












<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


Appendix A: Old Mode of SAToP Encapsulation over L2TPv3

   Previous versions of this specification defined a SAToP PW
   encapsulation over L2TPv3, which differs from that described in
   <a href="#section-4.3">Section 4.3</a> and Figure 2b.  In these versions, the RTP header, if
   used, precedes the SAToP control word.

   Existing implementations of the old encapsulation mode MUST be
   distinguished from the encapsulations conforming to this
   specification via the SAToP PW setup.

Appendix B: Parameters That MUST Be Agreed upon during the PW Setup

   The following parameters of the SAToP IWF MUST be agreed upon between
   the peer IWFs during the PW setup.  Such an agreement can be reached
   via manual configuration or via one of the PW setup protocols:

   1. Type of the Attachment Circuit (AC)

      As mentioned in <a href="#section-3">Section 3</a>, SAToP supports the following AC types:
         i)   E1  (2048 kbit/s)
         ii)  T1  (1544 kbit/s); this service is also known as DS1
         iii) E3 (34368 kbit/s)
         iv)  T3 (44736 kbit/s); this service is also known as DS3

      SAToP PWs cannot be established between ACs of different types.

   2. Usage of octet-aligned mode for T1

      a) This OPTIONAL mode of emulating T1 bit-streams with SAToP PWs
         is described in <a href="#section-5.2">Section 5.2</a>.

      b) Both sides MUST agree on using this mode for a SAToP PW to be
         operational.

   3. Payload size, i.e., the amount of valid TDM data in a SAToP packet

      a) As mentioned in <a href="#section-5.1">Section 5.1</a>:
         i)  The same payload size MUST be used in both directions of
             the SAToP PW.
         ii) The payload size cannot be changed once the PW has been set
             up.

      b) In most cases, any mutually agreed upon value can be used.
         However, if octet-aligned T1 encapsulation mode is used, the
         payload size MUST be an integral multiple of 25, and it
         expresses the amount of valid TDM data including padding.




<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


   4. Usage of the RTP header in the encapsulation

      a) Both sides MUST agree on using RTP header in the SAToP PW.

      b) In the case of a SAToP PW over L2TPv3 using the RTP header,
         both sides MUST agree on usage of the "old mode" described in
         <a href="#appendix-A">Appendix A</a>.

   5. RTP-dependent parameters.  The following parameters MUST be agreed
      upon if usage of the RTP header for the SAToP PW has been agreed
      upon.

      a) Timestamping mode (absolute or differential); this mode MAY be
         different for the two directions of the PW, but the receiver
         and transmitter MUST agree on the timestamping mode for each
         direction of the PW

      b) Timestamping clock frequency:
         i)  The timestamping frequency MUST be a integral multiple of 8
             kHz.
         ii) The timestamping frequency MAY be different for the two
             directions of the PW, but the receiver and transmitter MUST
             agree on the timestamping mode for each direction of the
             PW.

      c) RTP Payload Type (PT) value; any dynamically assigned value can
         be used with SAToP PWs.

      d) Synchronization Source (SSRC) value; the transmitter MUST agree
         to send the SSRC value requested by the receiver.





















<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


Editors' Addresses

   Alexander ("Sasha") Vainshtein
   Axerra Networks
   24 Raoul Wallenberg St.,
   Tel Aviv 69719, Israel

   EMail: sasha@axerra.com


   Yaakov (Jonathan) Stein
   RAD Data Communications
   24 Raoul Wallenberg St., Bldg C
   Tel Aviv 69719, Israel

   EMail: yaakov_s@rad.com



































<span class="grey">Vainshtein &amp; Stein          Standards Track                    [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc4553.html">RFC 4553</a>           Structure-Agnostic TDM over Packet          June 2006</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2006).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).







Vainshtein &amp; Stein          Standards Track                    [Page 27]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4553 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:40 GMT --></html>