<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6038 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 23 Aug 2016 18:39:48 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.119" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6038" name="DC.Identifier"/>
<meta content="This memo describes two closely-related features for the core
specification of TWAMP - the Two-Way Active Measurement Protocol: an
optional capability where the responding host returns some of the
command octets or padding octets to the sender, and an optional sender
packet format that ensures equal test packet sizes are used in both
directions." name="DC.Description.Abstract"/>
<meta content="Morton, Al" name="DC.Creator"/>
<meta content="Ciavattone, Len" name="DC.Creator"/>
<meta content="October, 2010" name="DC.Date.Issued"/>
<meta content="TWAMP Reflect Octets and Symmetrical Size Features" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6038 - TWAMP Reflect Octets and Symmetrical Size Features</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6038.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6038" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-ippm-twamp-reflect-octets" title="draft-ietf-ippm-twamp-reflect-octets">draft-ietf-ippm-t...</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6038" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6038" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=6038">Errata</a>]        </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Internet Engineering Task Force (IETF)                         A. Morton
Request for Comments: 6038                                 L. Ciavattone
Updates: <a href="rfc5357.html">5357</a>                                                  AT&amp;T Labs
Category: Standards Track                                   October 2010
ISSN: 2070-1721


     <span class="h1">Two-Way Active Measurement Protocol (TWAMP) Reflect Octets and</span>
                       <span class="h1">Symmetrical Size Features</span>

Abstract

   This memo describes two closely related features for the core
   specification of the Two-Way Active Measurement Protocol (TWAMP): an
   optional capability where the responding host returns some of the
   command octets or padding octets to the sender, and an optional
   sender packet format that ensures equal test packet sizes are used in
   both directions.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6038">http://www.rfc-editor.org/info/rfc6038</a>.

Copyright Notice

   Copyright (c) 2010 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Requirements Language ...........................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Purpose and Scope ...............................................<a href="#page-4">4</a>
   <a href="#section-4">4</a>. TWAMP Control Extensions ........................................<a href="#page-4">4</a>
      <a href="#section-4.1">4.1</a>. Connection Setup with New Features .........................<a href="#page-5">5</a>
      <a href="#section-4.2">4.2</a>. Reflect Octets: Request-TW-Session Packet Format ...........<a href="#page-6">6</a>
      <a href="#section-4.3">4.3</a>. Reflect Octets: Accept Session Packet Format ...............<a href="#page-7">7</a>
      <a href="#section-4.4">4.4</a>. Additional Considerations ..................................<a href="#page-9">9</a>
   <a href="#section-5">5</a>. Extended TWAMP Test .............................................<a href="#page-9">9</a>
      <a href="#section-5.1">5.1</a>. Sender Behavior ............................................<a href="#page-9">9</a>
           <a href="#section-5.1.1">5.1.1</a>. Packet Timings ......................................<a href="#page-9">9</a>
           <a href="#section-5.1.2">5.1.2</a>. Reflect Octets: Packet Formats and Contents .........<a href="#page-9">9</a>
           5.1.3. Reflect Octets: Interaction with Padding
                  Truncation .........................................<a href="#page-11">11</a>
           <a href="#section-5.1.4">5.1.4</a>. Symmetrical Size: Session-Sender Packet Format .....<a href="#page-13">13</a>
           5.1.5. Symmetrical Size AND Reflect Octets:
                  Session-Sender Packet ..............................<a href="#page-14">14</a>
      <a href="#section-5.2">5.2</a>. Reflector Behavior ........................................<a href="#page-14">14</a>
           5.2.1. Reflect Octets: Session-Reflector Packet
                  Format and Contents ................................<a href="#page-15">15</a>
           <a href="#section-5.2.2">5.2.2</a>. Symmetrical Size: Session-Reflector Packet Format ..16
           5.2.3. Symmetrical Size AND Reflect Octets:
                  Session-Sender Packet Format .......................<a href="#page-16">16</a>
   <a href="#section-6">6</a>. Security Considerations ........................................<a href="#page-17">17</a>
   <a href="#section-7">7</a>. IANA Considerations ............................................<a href="#page-17">17</a>
      <a href="#section-7.1">7.1</a>. Registry Specification ....................................<a href="#page-17">17</a>
      <a href="#section-7.2">7.2</a>. Registry Contents .........................................<a href="#page-17">17</a>
   <a href="#section-8">8</a>. Acknowledgements ...............................................<a href="#page-17">17</a>
   <a href="#section-9">9</a>. Normative References ...........................................<a href="#page-18">18</a>








<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The Two-Way Active Measurement Protocol (TWAMP) [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>] is an
   extension of the One-way Active Measurement Protocol (OWAMP)
   [<a href="rfc4656.html" title='"A One-way Active Measurement Protocol (OWAMP)"'>RFC4656</a>].  The TWAMP specification gathered wide review as it
   approached completion, and the by-products were several
   recommendations for new features in TWAMP.

   This memo describes two closely related features for TWAMP.

   One is the OPTIONAL capability for the responder host to return a
   limited number of unassigned (padding) octets to the Control-Client
   or Session-Sender entities in both the TWAMP-Control and TWAMP-Test
   protocols.  With this capability, the Control-Client or Session-
   Sender can embed octets of information it deems useful and have the
   assurance that the corresponding reply/test packet will contain that
   information when it is reflected and returned (by the Server or
   Session-Reflector).

   The memo also adds an OPTIONAL capability to ensure that reflected
   test packets are the same size in both directions of transmission.
   This is accomplished by specifying a new TWAMP-Test Session-Sender
   packet format.  Although TWAMP [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>] recommends padding
   truncation to achieve symmetrical sizes (to compensate for the
   Session-Reflector's larger test packet header), it's not guaranteed
   that the Session-Reflector will truncate the padding, and it's not
   possible if there's insufficient padding.

   This memo is an update to the TWAMP core protocol specified in
   [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>].  Measurement systems are not required to implement the
   features described in this memo to claim compliance with [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>].

   Throughout this memo, the bits marked MBZ (Must Be Zero) MUST be set
   to zero by senders and MUST be ignored by receivers.  Also, the HMAC
   (Hashed Message Authentication Code) MUST be calculated as defined in
   <a href="rfc4656.html#section-3.2">Section 3.2 of [RFC4656]</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Requirements%20Language"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].









<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Purpose%20and%20Scope"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Purpose and Scope</span>

   The purpose of this memo is to define two OPTIONAL closely related
   features for TWAMP [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>].  The features enhance the TWAMP host's
   capabilities to perform a simple operation on control and test
   packets: the reflection of octets or padding, and the capability to
   ensure symmetrical size TWAMP-Test packets.  Motivations include
   permitting the controller host to tag packets with an index for
   simplified identification, and/or assert that the same size test
   packets will be used in each direction.

   The scope of the memo is limited to specifications of the following
   features:

   o  Reflect Octets: the capability of the Server/Session-Reflector to
      reflect specific octets back to the Client/Session-Sender, and a
      similar service provided by the Client and Session-Sender.

   o  Symmetrical Size: the capability to ensure that TWAMP-Test
      protocol uses the same packet size in both directions through
      support of a new TWAMP-Test Session-Sender test packet format in
      both the Session-Sender and the Session-Reflector.  Only the
      Session-Sender test packet format is new.

   This memo extends the modes of operation through assignment of two
   new values in the Modes field (see <a href="rfc4656.html#section-3.1">Section 3.1 of [RFC4656]</a> for the
   format of the Server Greeting message), while retaining backward
   compatibility with the core TWAMP [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>] implementations.  The two
   new values correspond to the two features defined in this memo.

   When the Server and Control-Client have agreed to use the Reflect
   Octets mode during control connection setup, then the Control-Client,
   the Server, the Session-Sender, and the Session-Reflector MUST all
   conform to the requirements of that mode, as identified below.

   When the Server and Control-Client have agreed to use the Symmetrical
   Size mode during control connection setup, then the Control-Client,
   the Server, the Session-Sender, and the Session-Reflector MUST all
   conform to the requirements of that mode, as identified below.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20TWAMP%20Control%20Extensions"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  TWAMP Control Extensions</span>

   TWAMP-Control protocol [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>] uses the Modes field to identify and
   select specific communication capabilities, and this field is a
   recognized extension mechanism.  The following sections describe two
   such extensions.





<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Connection%20Setup%20with%20New%20Features"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Connection Setup with New Features</span>

   TWAMP connection establishment follows the procedure defined in
   <a href="rfc4656.html#section-3.1">Section 3.1 of [RFC4656]</a> and <a href="rfc5357.html#section-3.1">Section 3.1 of [RFC5357]</a>.  The new
   features require two new bit positions (and values) to identify the
   ability of the Server/Session-Reflector to reflect specific octets
   back to the Control-Client/Session-Sender, and to support the new
   Session-Sender packet format in the TWAMP-Test protocol.  See the
   IANA section for details on the assigned values and bit positions.

   The Server sets one or both of the new bit positions in the Modes
   field of the Server Greeting message to indicate its capabilities and
   willingness to operate in either of these modes (or both) if desired.

   If the Control-Client intends to operate all test sessions invoked
   with this control connection using one or both of the new modes, it
   MUST set the Mode field bit corresponding to each function in the
   Setup Response message.  With this and other extensions, the Control-
   Client MAY set multiple Mode field bits in the Setup Response
   message.































<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Reflect%20Octets%3A%20Request-TW-Session%20Packet%20Format"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Reflect Octets: Request-TW-Session Packet Format</span>

   The bits designated for the Reflect Octets feature in the Request-TW-
   Session command are as shown in the packet format below.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      5        |  MBZ  | IPVN  |  Conf-Sender  | Conf-Receiver |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Number of Schedule Slots                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .           ... Many fields (66 octets) not shown ...           .
   .                                                               .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Padding Length  (4 octets)                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Start Time  (8 octets)                   |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Timeout  (8 octets)                     |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Type-P Descriptor                       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Octets to be reflected    |  Length of padding to reflect |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       MBZ (4 octets)                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                       HMAC (16 octets)                        |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   It is important to note that the Padding Length field continues to
   specify the number of padding octets that the Session-Sender will
   append to ALL TWAMP-Test packets associated with this test session.
   See below for considerations on the minimum length of the padding
   octets following the definitions of the two new fields that follow
   the Type-P Descriptor.

   Note that the number of padding octets appended to the Session-
   Reflector's test packet depends on support for the truncation process
   that TWAMP recommends, see <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of [RFC5357]</a>.




<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


   The Octets to be reflected field SHALL be 2 octets long, as shown,
   and contain the octets that the Server MUST reflect in the Accept
   Session message as specified below.

   The Length of padding to reflect field SHALL be 2 octets long and
   contain an unsigned binary value in units of octets.  This field
   communicates the length of the padding in the TWAMP-Test Packet that
   the Session-Sender expects to be reflected and the length of octets
   that the Session-Reflector SHALL return in its TWAMP-Test packet
   format (see <a href="#section-5.2">Section 5.2</a>).  By including this length field in the
   Request-TW-Session message, a Server is able to determine if it can
   comply with a specific request to reflect padding in the TWAMP-Test
   packets and to arrange for the Session-Reflector processing in
   advance.

   The Padding Length SHOULD be &gt;= 27 octets when specifying a test
   session using the Unauthenticated TWAMP-Test mode to allow for the
   truncation process that TWAMP recommends, see <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of
   [RFC5357]</a>.

   The Padding Length SHOULD be &gt;= 56 octets when specifying a test
   session using the Authenticated or Encrypted TWAMP-Test modes to
   allow for the truncation process that TWAMP recommends, see <a href="#section-4.2.1">Section</a>
   <a href="#section-4.2.1">4.2.1</a> of [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>].

   The Padding Length SHALL be &gt; the Length of padding to reflect when
   specifying a test session using the OPTIONAL Reflect Octets mode.

   In Unauthenticated TWAMP-Test mode, the Padding Length SHALL be &gt;= 27
   + Length of padding to reflect octets when specifying a test session
   using both the OPTIONAL Reflect Octets mode and the truncation
   process that TWAMP recommends, see <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of [RFC5357]</a>.

   In Authenticated or Encrypted TWAMP-Test modes, the Padding Length
   SHALL be &gt;= 56 + Length of padding to reflect octets when specifying
   a test session using both the OPTIONAL Reflect Octets mode and the
   truncation process that TWAMP recommends, see <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of
   [RFC5357]</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Reflect%20Octets%3A%20Accept%20Session%20Packet%20Format"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Reflect Octets: Accept Session Packet Format</span>

   The bits designated for the Reflect Padding feature in the Accept
   Session command are as shown in the packet format below.








<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Accept     |      MBZ      |            Port               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-|
   |                                                               |
   |                        SID (16 octets)                        |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Reflected octets        |         Server octets         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       MBZ (8 octets)                          |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                       HMAC (16 octets)                        |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The Reflected octets field SHALL contain the octets from the Request-
   TW-Session Octets to be reflected field and be 2 octets long, as
   shown.

   The Server octets field SHALL contain information that the Server
   intends to be returned in the TWAMP-Test Packet Padding (to be
   reflected) field, OR SHALL be zero, and be 2 octets long, as shown.
   Although the Server determines the SID, this field is very long (16
   octets) and does not normally appear in TWAMP-Test packets.  The
   following items MUST be part of compliant implementations using the
   Reflect Octets feature:

   o  When a Server does not require octets to be returned in TWAMP-Test
      packets, it MUST send all zeros in the Server octets field.

   o  When a Server intends octets to be returned in TWAMP-Test packets,
      it MUST send a non-zero value in the Server octets field, and the
      TWAMP-Test Sender MUST include those octets at the beginning of
      the Packet Padding (to be reflected) field.

   o  <a href="#section-4.1.2">Section 4.1.2</a> defines how Server octets MUST be included in the
      TWAMP-Test packet padding when this service is desired by the
      Server (indicated in the second of two figures in this section).







<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


   When performing the truncation process that TWAMP recommends, see
   <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of [RFC5357]</a>, if calculations on the Padding lengths
   reveal that there are insufficient octets supplied to produce equal-
   length Session-Sender and Session-Reflector test packets, then the
   Accept field MUST be set to 3 to indicate that some aspect of the
   request is not supported.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Additional%20Considerations"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Additional Considerations</span>

   The value of the Modes field sent by the Server in the Server
   Greeting message is the bit-wise OR of the mode values that it is
   willing to support during this session.

   With the publication of this memo as an RFC, the last 7 bit positions
   of the Modes 32-bit field are used.  A Control-Client conforming to
   this extension of [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>] MAY ignore the values in the higher bits
   of the Modes field, or it MAY support other features that are
   communicated in those bit positions.  The other bits are available
   for future protocol extensions.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Extended%20TWAMP%20Test"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Extended TWAMP Test</span>

   The TWAMP-Test protocol is similar to the OWAMP [<a href="rfc4656.html" title='"A One-way Active Measurement Protocol (OWAMP)"'>RFC4656</a>] test
   protocol with the exception that the Session-Reflector transmits test
   packets to the Session-Sender in response to each test packet it
   receives.  TWAMP, see <a href="rfc5357.html#section-4">Section 4 of [RFC5357]</a>, defines two additional
   test packet formats for packets transmitted by the Session-Reflector.
   The appropriate format depends on the security mode chosen.  The new
   modes specified here utilize some of the padding octets within each
   test packet format or require truncation of those octets depending on
   the security mode in use.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Sender%20Behavior"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Sender Behavior</span>

   This section describes extensions to the behavior of the TWAMP
   Session-Sender.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.1.%20%20Packet%20Timings"></a><a class="selflink" href="#section-5.1.1" name="section-5.1.1">5.1.1</a>.  Packet Timings</span>

   The Send Schedule is not utilized in TWAMP, and this is unchanged in
   this memo.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.2.%20%20Reflect%20Octets%3A%20Packet%20Formats%20and%20Contents"></a><a class="selflink" href="#section-5.1.2" name="section-5.1.2">5.1.2</a>.  Reflect Octets: Packet Formats and Contents</span>

   The Session-Sender packet format and content follow the same
   procedure and guidelines as defined in <a href="rfc4656.html#section-4.1.2">Section 4.1.2 of [RFC4656]</a> (as
   indicated in <a href="rfc5357.html#section-4.1.2">Section 4.1.2 of [RFC5357]</a>).




<span class="grey">Morton &amp; Ciavattone          Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


   The Reflect Octets mode re-designates the original TWAMP-Test Packet
   Padding field (see <a href="rfc4656.html#section-4.1.2">Section 4.1.2 of [RFC4656]</a>), as shown below for
   Unauthenticated mode:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Sequence Number                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Timestamp                            |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Error Estimate        |                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   |                                                               |
   |                  Packet Padding (to be reflected)             |
   .               (length in octets specified in command)         .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                  Additional Packet Padding                    .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The Packet Padding (to be reflected) field SHALL correspond to the
   length of octets specified in the Request-TW-Session Length of
   padding to reflect field to this test session.  These are the octets
   that the Session-Sender expects will be returned by the Session-
   Reflector.

   The length of the Additional Packet Padding field is the difference
   between two fields in the Request-TW-Session command, as follows:

   Additional Packet Padding, in octets =

   Padding Length - Length of padding to reflect

   When a Server intends octets to be returned in TWAMP-Test packets, it
   MUST send a non-zero value in the Server octets field, and the TWAMP-
   Test Session-Sender MUST include those octets in the first 2 octets
   of the Packet Padding (to be reflected) field as shown below:











<span class="grey">Morton &amp; Ciavattone          Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                   |         Server octets         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |              Remaining Packet Padding (to be reflected)       |
   .             (total length in octets specified in command)     .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The Server octets field contains the same information that the Server
   returned to the Control-Client in the Accept-Session message
   corresponding to this specific test session (see <a href="#section-4.3">Section 4.3</a>).  At
   the Session-Reflector, these octets MUST be reflected the same as the
   rest of the Packet Padding (to be reflected) field.

   Note that it is permissible for the Session-Sender to insert the same
   octets used in the Octets to be reflected field of the Request-TW-
   Session command elsewhere in the Packet Padding (to be reflected)
   field.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.3.%20%20Reflect%20Octets%3A%20Interaction%20with%20Padding%20Truncation"></a><a class="selflink" href="#section-5.1.3" name="section-5.1.3">5.1.3</a>.  Reflect Octets: Interaction with Padding Truncation</span>

   When the Reflect Octets mode is selected, and performing the
   truncation process that TWAMP recommends, see <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of
   [RFC5357]</a>, the Session-Sender MUST anticipate a minimum padding
   required to achieve equal-size test packets in both directions.  The
   amount of padding needed to achieve symmetrical packet size depends
   on both the security mode (Unauthenticated/Authenticated/Encrypted)
   and whether the Reflect Octets mode is selected simultaneously.

   When using the truncation process in TWAMP alone, see <a href="rfc5357.html#section-4.2.1">Section 4.2.1
   of [RFC5357]</a>, the Session-Sender MUST append sufficient Packet
   Padding octets to allow the same IP packet payload lengths to be used
   in each direction of transmission (this is usually desirable).  To
   compensate for the Session-Reflector's larger test packet format, the
   Session-Sender MUST append at least 27 octets of padding in
   Unauthenticated mode, and at least 56 octets in Authenticated and
   Encrypted modes.  The sizes of TWAMP-Test protocol packets and the
   resulting truncated padding to achieve equal packet sizes in both
   directions are shown in the table below:









<span class="grey">Morton &amp; Ciavattone          Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


    +-------------------+----------------------+---------------------+
    | Octets in:        | Unauthenticated Mode | Auth/Encrypted Mode |
    +-------------------+----------------------+---------------------+
    | Reflector Header  | 41                   | 104                 |
    | Sender Header     | 14                   | 48                  |
    | Truncated Padding | 27                   | 56                  |
    +-------------------+----------------------+---------------------+

                       TWAMP-Test Padding Truncation

   When using the Reflect Octets mode simultaneously with the truncation
   process that TWAMP recommends in <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of [RFC5357]</a>, the
   Session-Sender MUST append at least 27 octets of padding plus the
   Length of the padding to reflect octets when operating in
   Unauthenticated mode.  The Session-Sender MUST append at least 56
   octets of padding plus the Length of the padding to reflect octets
   when operating in Authenticated and Encrypted modes.


































<span class="grey">Morton &amp; Ciavattone          Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.4.%20%20Symmetrical%20Size%3A%20Session-Sender%20Packet%20Format"></a><a class="selflink" href="#section-5.1.4" name="section-5.1.4">5.1.4</a>.  Symmetrical Size: Session-Sender Packet Format</span>

   When the Symmetrical Size mode is selected, the Session-Sender SHALL
   use the following TWAMP-Test Packet Format in Unauthenticated mode:

   Unauthenticated Mode

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Sequence Number                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Timestamp                            |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Error Estimate        |                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   |                                                               |
   |                                                               |
   |                         MBZ (27 octets)                       |
   |                                                               |
   |                                                               |
   |                                                               |
   +               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               |                                               |
   +-+-+-+-+-+-+-+-+                                               +
   .                                                               .
   .                        Packet Padding                         .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   This feature REQUIRES only a new Session-Sender test packet format,
   the Session-Reflector test packet format is unchanged.


















<span class="grey">Morton &amp; Ciavattone          Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.5.%20%20Symmetrical%20Size%20AND%20Reflect%20Octets%3A%20Session-Sender%20Packet"></a><a class="selflink" href="#section-5.1.5" name="section-5.1.5">5.1.5</a>.  Symmetrical Size AND Reflect Octets: Session-Sender Packet</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Format"></a>        Format</span>

   When both the Symmetrical Size mode and the Reflect Octets mode are
   selected, the Session-Sender SHALL use the following TWAMP-Test
   Packet Format in Unauthenticated mode:

   Unauthenticated Mode

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Sequence Number                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          Timestamp                            |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Error Estimate        |                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
   |                                                               |
   |                                                               |
   |                         MBZ (27 octets)                       |
   |                                                               |
   |                                                               |
   |                                                               |
   +               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |               |                                               |
   +-+-+-+-+-+-+-+-+                                               +
   |                  Packet Padding (to be reflected)             |
   .               (length in octets specified in command)         .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   .                                                               .
   .                  Additional Packet Padding                    .
   .                                                               .
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   In this combined mode, the Packet Padding to be reflected follows the
   27 MBZ octets.  In Authenticated or Encrypted modes, the Packet
   Padding to be reflected follows the 56 MBZ octets.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Reflector%20Behavior"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Reflector Behavior</span>

   The TWAMP Reflector follows the procedures and guidelines in <a href="#section-4.2">Section</a>
   <a href="#section-4.2">4.2</a> of [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>], with the following additional functions:

   o  Reflect Octets mode: Designated octets in the Packet Padding (to
      be reflected) field of the Session-Sender's test packet MUST be
      included in the Session-Reflector's test packet.



<span class="grey">Morton &amp; Ciavattone          Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


   o  Symmetrical Size mode: The Session-Reflector MUST operate using
      the Session_Reflector Packet Format defined in <a href="#section-5.1.4">Section 5.1.4</a>,
      where the Padding Octets are separated from the information
      fields.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.%20%20Reflect%20Octets%3A%20Session-Reflector%20Packet%20Format%20and%20Contents"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a>.  Reflect Octets: Session-Reflector Packet Format and Contents</span>

   The Reflect Padding feature re-designates the Packet Padding field,
   as shown below.  When the Reflect Octets mode is selected, the
   Session-Sender SHALL use the following TWAMP-Test Packet Format in
   Unauthenticated mode:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                        Sequence Number                        |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                          Timestamp                            |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |         Error Estimate        |           MBZ                 |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                          Receive Timestamp                    |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                        Sender Sequence Number                 |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                      Sender Timestamp                         |
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |      Sender Error Estimate    |           MBZ                 |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  Sender TTL   |         Packet Padding (from Session-Sender)  |
    +-+-+-+-+-+-+-+-+                                               +
    .                                                               .
    +                                               +-+-+-+-+-+-+-+-+
    |          Packet Padding (from Session-Sender) |               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
    |                                                               |
    |                                                               |
    .                  Additional Packet Padding                    .
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The Packet Padding (from Session-Sender) field MUST be the same
   octets as the Packet Padding (to be reflected) field in the Session-
   Sender's test packet, and therefore MUST conform to the length
   specified in the Request-TW-Session message.




<span class="grey">Morton &amp; Ciavattone          Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


   When the Server has returned a non-zero value in the Server octets
   field of the Accept Session message (as described in <a href="#section-4.3">Section 4.3</a>),
   then the Session-Reflector SHALL reflect these octets the same as the
   rest of the Packet Padding (to be reflected) field.

   <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of [RFC5357]</a> recommends a padding truncation process
   for use in TWAMP.  When using that process in conjunction with the
   Reflect Octets mode, the Session-Reflector MUST reflect the
   designated octets from the Session-Sender's test packet in the Packet
   Padding (from Session-Sender) field, and MAY re-use additional Packet
   Padding from the Session-Sender.  The Session-Reflector MUST truncate
   the padding such that the highest number octets are discarded, and
   the test packet length equals the Session-Sender's packet length.
   When using the recommended truncation process, the Session-Reflector
   MUST truncate exactly 27 octets of padding in Unauthenticated mode,
   and exactly 56 octets in Authenticated and Encrypted modes.

   In any case, the Session-Reflector MAY re-use the Sender's Packet
   Padding (since the requirements for padding generation are the same
   for each).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2.%20%20Symmetrical%20Size%3A%20Session-Reflector%20Packet%20Format"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a>.  Symmetrical Size: Session-Reflector Packet Format</span>

   When Symmetrical Size mode is selected, the Session-Reflector packet
   formats for Unauthenticated and Authenticated/Encrypted modes are
   identical to the core TWAMP specification, see <a href="rfc5357.html#section-4.2.1">Section 4.2.1 of
   [RFC5357]</a>.  Thus, the Session-Reflector test packet format is
   unchanged.

   The Session-Reflector MUST construct its test packet using the
   information in the Session-Sender's test packet.  The length of the
   Session-Reflector's test packet SHALL equal the length of the
   Session-Sender's test packet.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.3.%20%20Symmetrical%20Size%20AND%20Reflect%20Octets%3A%20Session-Sender%20Packet"></a><a class="selflink" href="#section-5.2.3" name="section-5.2.3">5.2.3</a>.  Symmetrical Size AND Reflect Octets: Session-Sender Packet</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Format"></a>        Format</span>

   When both the Symmetrical Size mode and the Reflect Octets mode are
   selected, the Session-Reflector MUST operate using the Session-Sender
   Packet Format defined in <a href="#section-5.1.5">Section 5.1.5</a>, where the Padding Octets are
   separated from the information fields, and the Packet Padding (to be
   reflected) field precedes the Additional Padding.

   The Session-Reflector SHALL use the same TWAMP-Test Packet Format as
   specified in <a href="#section-5.2.1">Section 5.2.1</a>, above.






<span class="grey">Morton &amp; Ciavattone          Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   These extended modes of operation do not appear to permit any new
   attacks on hosts communicating with core TWAMP [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>].

   The security considerations that apply to any active measurement of
   live networks are relevant here as well.  See [<a href="rfc4656.html" title='"A One-way Active Measurement Protocol (OWAMP)"'>RFC4656</a>] and
   [<a href="rfc5357.html" title='"A Two-Way Active Measurement Protocol (TWAMP)"'>RFC5357</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  IANA Considerations</span>

   This memo adds two modes to the IANA registry for the TWAMP Modes
   field, and describes behavior when the new modes are used.  This
   field is a recognized extension mechanism for TWAMP.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Registry%20Specification"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Registry Specification</span>

   IANA has created a TWAMP-Modes registry (as requested in [<a href="rfc5618.html" title='"Mixed Security Mode for the Two-Way Active Measurement Protocol (TWAMP)"'>RFC5618</a>]).
   TWAMP-Modes are specified in TWAMP Server Greeting messages and Setup
   Response messages, as described in <a href="rfc5357.html#section-3.1">Section 3.1 of [RFC5357]</a>,
   consistent with <a href="rfc4656.html#section-3.1">Section 3.1 of [RFC4656]</a>, and extended by this memo.
   Modes are indicated by setting bits in the 32-bit Modes field that
   correspond to values in the Modes registry.  For the TWAMP-Modes
   registry, we expect that new features will be assigned increasing
   registry values that correspond to single bit positions, unless there
   is a good reason to do otherwise (more complex encoding than single-
   bit positions may be used in the future to access the 2^32 value
   space).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Registry%20Contents"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Registry Contents</span>

   The TWAMP-Modes registry has been augmented as follows:

   Value  Description             Semantics Definition
   --------------------------------------------------------
   32     Reflect Octets          this memo, <a href="#section-3.1">Section 3.1</a>
          Capability              new bit position (5)
   64     Symmetrical Size        this memo, <a href="#section-3.1">Section 3.1</a>
          Sender Test Packet Format new bit position (6)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Acknowledgements"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Acknowledgements</span>

   The authors thank Steve Baillargeon, Walt Steverson, and Stina Ross
   for helpful review and comments.







<span class="grey">Morton &amp; Ciavattone          Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6038.html">RFC 6038</a>             Reflect Octets &amp; Symmetric Size        October 2010</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Normative%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC4656" name="ref-RFC4656">RFC4656</a>]  Shalunov, S., Teitelbaum, B., Karp, A., Boote, J., and M.
              Zekauskas, "A One-way Active Measurement Protocol
              (OWAMP)", <a href="rfc4656.html">RFC 4656</a>, September 2006.

   [<a id="ref-RFC5357" name="ref-RFC5357">RFC5357</a>]  Hedayat, K., Krzanowski, R., Morton, A., Yum, K., and J.
              Babiarz, "A Two-Way Active Measurement Protocol (TWAMP)",
              <a href="rfc5357.html">RFC 5357</a>, October 2008.

   [<a id="ref-RFC5618" name="ref-RFC5618">RFC5618</a>]  Morton, A. and K. Hedayat, "Mixed Security Mode for the
              Two-Way Active Measurement Protocol (TWAMP)", <a href="rfc5618.html">RFC 5618</a>,
              August 2009.

Authors' Addresses

   Al Morton
   AT&amp;T Labs
   200 Laurel Avenue South
   Middletown, NJ  07748
   USA

   Phone: +1 732 420 1571
   Fax:   +1 732 368 1192
   EMail: acmorton@att.com
   URI:   <a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a>


   Len Ciavattone
   AT&amp;T Labs
   200 Laurel Avenue South
   Middletown, NJ  07748
   USA

   Phone: +1 732 420 1239
   EMail: lencia@att.com












Morton &amp; Ciavattone          Standards Track                   [Page 18]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.119, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6038 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 23 Aug 2016 18:39:48 GMT --></html>