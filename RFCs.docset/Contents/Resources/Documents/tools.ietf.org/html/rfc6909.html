<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6909 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 23 Aug 2016 18:36:55 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.119" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-gundavelli-netext-pmipv6-sipto-option" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:6909" name="DC.Identifier"/>
<meta content="April, 2013" name="DC.Date.Issued"/>
<meta content="Koodli, Rajeev" name="DC.Creator"/>
<meta content="Zhou, Xingyue" name="DC.Creator"/>
<meta content="Gundavelli, Sri" name="DC.Creator"/>
<meta content="Korhonen, Jouni" name="DC.Creator"/>
<meta content="This specification defines a new mobility option, the IPv4 Traffic
Offload Selector option, for Proxy Mobile IPv6. This option can be
used by the local mobility anchor and the mobile access gateway for
negotiating IPv4 traffic offload policy for a mobility session. Based
on the negotiated IPv4 traffic offload policy, a mobile access gateway
can selectively offload some of the IPv4 traffic flows in the access
network instead of tunneling back to the local mobility anchor in the
home network." name="DC.Description.Abstract"/>
<meta content="IPv4 Traffic Offload Selector Option for Proxy Mobile IPv6" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6909 - IPv4 Traffic Offload Selector Option for Proxy Mobile IPv6</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6909.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6909" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-netext-pmipv6-sipto-option" title="draft-ietf-netext-pmipv6-sipto-option">draft-ietf-netext...</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6909" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6909" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                S. Gundavelli, Ed.
Request for Comments: 6909                                         Cisco
Category: Standards Track                                        X. Zhou
ISSN: 2070-1721                                          ZTE Corporation
                                                             J. Korhonen
                                                          Renesas Mobile
                                                                G. Feige
                                                               R. Koodli
                                                                   Cisco
                                                              April 2013


       <span class="h1">IPv4 Traffic Offload Selector Option for Proxy Mobile IPv6</span>

Abstract

   This specification defines a new mobility option, the IPv4 Traffic
   Offload Selector option, for Proxy Mobile IPv6.  This option can be
   used by the local mobility anchor and the mobile access gateway for
   negotiating IPv4 traffic offload policy for a mobility session.
   Based on the negotiated IPv4 traffic offload policy, a mobile access
   gateway can selectively offload some of the IPv4 traffic flows in the
   access network instead of tunneling back to the local mobility anchor
   in the home network.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6909">http://www.rfc-editor.org/info/rfc6909</a>.













<span class="grey">Gundavelli, et al.           Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Conventions and Terminology .....................................<a href="#page-4">4</a>
      <a href="#section-2.1">2.1</a>. Conventions ................................................<a href="#page-4">4</a>
      <a href="#section-2.2">2.2</a>. Terminology ................................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Solution Overview ...............................................<a href="#page-4">4</a>
      <a href="#section-3.1">3.1</a>. IPv4 Traffic Offload Selector Option .......................<a href="#page-6">6</a>
      <a href="#section-3.2">3.2</a>. MAG Considerations .........................................<a href="#page-8">8</a>
      <a href="#section-3.3">3.3</a>. LMA Considerations .........................................<a href="#page-9">9</a>
   <a href="#section-4">4</a>. Protocol Configuration Variables ...............................<a href="#page-11">11</a>
   <a href="#section-5">5</a>. IANA Considerations ............................................<a href="#page-11">11</a>
   <a href="#section-6">6</a>. Security Considerations ........................................<a href="#page-12">12</a>
   <a href="#section-7">7</a>. Acknowledgements ...............................................<a href="#page-12">12</a>
   <a href="#section-8">8</a>. References .....................................................<a href="#page-13">13</a>
      <a href="#section-8.1">8.1</a>. Normative References ......................................<a href="#page-13">13</a>
      <a href="#section-8.2">8.2</a>. Informative References ....................................<a href="#page-13">13</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Mobile operators are expanding their network coverage by integrating
   various access technology domains (e.g., Wireless LAN, CDMA, and
   Long-Term Evolution (LTE)) into a common IP mobility core.  The Third
   Generation Partnership Project (3GPP) S2a Proxy Mobile IPv6 [<a href="#ref-TS23402" title='"Architecture enhancements for non-3GPP accesses"'>TS23402</a>]
   reference point, specified by the 3GPP system architecture, defines
   the protocol interworking for building such integrated multi-access
   networks.  In this scenario, the mobile node's IP traffic is always
   tunneled back from the mobile access gateway [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>] in the access
   network to the local mobility anchor in the home network.  Currently,
   there is no mechanism for allowing some of the subscriber's IP flows
   to be offloaded in the access network.





<span class="grey">Gundavelli, et al.           Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


   With the exponential growth in mobile data traffic, mobile operators
   are exploring new ways to offload some of the IP traffic flows at the
   nearest access edge.  The offload is intended either for local
   service access in the access network or for Internet offload through
   the access network when there is an Internet peering point.  Not all
   IP traffic flows need to be routed back to the home network; the
   traffic that does not require IP mobility support can be offloaded at
   the mobile access gateway in the access network.  This approach
   allows efficient usage of the mobile packet core, which helps in
   lowering transport costs.  To identify the IP flows that need to be
   offloaded, the local mobility anchor in the home network can deliver
   the IP flow policy to the mobile access gateway in the access
   network.  It is up to an operator's discretion to classify the
   traffic for offload.  One operator might choose to offload everything
   except traffic (such as Voice over IP) that requires QoS services.
   Another might choose to offload only HTTP traffic.  This
   specification is only concerned with matching IP traffic against a
   given flow selector and classification of IP traffic for offloading
   purposes.  This approach has one limitation with respect to
   identifying encrypted traffic: IPsec-encrypted traffic with no
   visibility into the application payload cannot be selected for
   offload.

   This document defines a new mobility option, the IPv4 Traffic Offload
   Selector option (see <a href="#section-3.1">Section 3.1</a>), for Proxy Mobile IPv6 (PMIPv6).
   This option can be used by the local mobility anchor and the mobile
   access gateway for negotiating IPv4 traffic offload policy for a
   mobility session.  This IPv4 traffic offload policy identifies the
   flow selectors that can be used for selecting the flows that can be
   offloaded at the access edge.  Since the mobile node's IP address
   topologically belongs to the home network, the offloaded IPv4 traffic
   flows may need to be NAT [<a href="rfc2663.html" title='"IP Network Address Translator (NAT) Terminology and Considerations"'>RFC2663</a>] translated.  These offloaded flows
   will not have mobility support as the NAT becomes the anchor point
   for those flows.  However, when the traffic is offloaded for local
   service access as opposed to Internet offload, NAT translation may
   not be needed if the mobile access gateway is in the path for the
   return traffic.  The decision on when to apply NAT translation can be
   based on local configuration on the mobile access gateway.  There are
   better ways to address the offload problem for IPv6, and with the
   goal not to create a NAT66 requirement, this specification therefore
   does not address traffic offload support for IPv6 flows.










<span class="grey">Gundavelli, et al.           Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions%20and%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions and Terminology</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Conventions"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Conventions</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Terminology"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Terminology</span>

   All the mobility-related terms used in this document are to be
   interpreted as defined in the base Proxy Mobile IPv6 specifications
   [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>] [<a href="rfc5844.html" title='"IPv4 Support for Proxy Mobile IPv6"'>RFC5844</a>].  Additionally, this document uses the following
   terms:

   IP Flow

      IP flow [<a href="rfc5101.html" title='"Specification of the IP Flow Information Export (IPFIX) Protocol for the Exchange of IP Traffic Flow Information"'>RFC5101</a>] represents a set of IP packets that match a
      traffic selector (TS).  The selector is typically based on the
      source IP address, destination IP address, source port,
      destination port, and other fields in upper-layer headers.

   IP Traffic Offload

      IP traffic offload is the approach of selecting specific IP flows
      and routing them through the access network instead of tunneling
      them to the home network.  Offload can also be between two access
      networks (e.g., moving some of the traffic from LTE access to WLAN
      access).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Solution%20Overview"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Solution Overview</span>

   Figure 1 illustrates the scenario where the mobile access gateway in
   an access network has enabled IPv4 traffic offload support for a
   mobility session.  The offload decision is based on the IPv4 traffic
   offload policy that it negotiated with the local mobility anchor in
   the home network.  For example, all the HTTP flows may be offloaded
   at the mobile access gateway, and all the other flows for that
   mobility session are tunneled back to the local mobility anchor.  The
   offloaded flows typically have to be NAT translated, and this
   specification does not impose any restrictions on the location of the
   NAT function.  It is possible for the NAT function to be co-located
   with the mobile access gateway or located somewhere at the edge of
   the access network.  When the NAT function is not co-located with the
   mobile access gateway, offloaded traffic flows must be delivered
   through the local access network between the mobile access gateway
   and the NAT function, for example, through a VLAN or a point-to-point
   link.  The exact means for this delivery are outside the scope of



<span class="grey">Gundavelli, et al.           Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


   this document.  If the offloaded IPv4 flows are for local service
   access and reverse traffic from the local service device can be
   routed to the mobile node through the mobile access gateway, the
   offloaded flows may be delivered directly to a local service device.

   The traffic selectors in the IPv4 traffic offload policy are used to
   classify the traffic, so it can be offloaded at the access network.
   These parameters include source IP address, destination IP address,
   TCP/UDP port numbers, and other fields.  The format of the IPv4
   binary traffic selector is specified in <a href="rfc6088.html#section-3.1">Section 3.1 of [RFC6088]</a>.

                                      _----_
                                    _(      )_
                 :-----------------( Internet )---------------:
                 |                  (_      _)                |
                 |                    '----'                  |
                 |                                            |
                 :                                            |
      (IPv4 Traffic Offload Point)                            |
                 :                                            |
                 |                                            |
      ........................................................|....
                 |                              |             |
      +--------+ |                   +---------------------+  |
      |  Local | |                   | Services requiring  |  |
      |Services| |                   | mobility, or service|  |
      +--------+ |                   | treatment           |  |
           |     |                   +---------------------+  |
           |   +---+                            |             |
           |   |NAT|                            |             |
           |   +---+                            |             |
           +-----|            _----_            |             |
              +-----+       _(      )_       +-----+          |
      [MN]----| MAG |======(    IP    )======| LMA |----------
              +-----+       (_      _)       +-----+  Internet
                              '----'
                                 .
                                 .
          [Access Network]       .        [Home Network]
      ..........................................................

             Figure 1: IPv4 Traffic Offload Support at the MAG

   Figure 2 explains the operational sequence of the Proxy Mobile IPv6
   protocol signaling message exchange between the mobile access gateway
   (MAG) and the local mobility anchor (LMA) for negotiating the IPv4
   traffic offload selectors.  The details related to DHCP transactions
   or Router Advertisements on the access link are not shown here as



<span class="grey">Gundavelli, et al.           Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


   that is not the key focus of this specification.  The use of IPv4
   Traffic Selector option in the Proxy Binding Update is for allowing
   the MAG to request the LMA for the IPv4 traffic offload policy.

      MN    MAG(NAT)   LMA
      |------&gt;|        |    1.  Mobile Node Attach
      |       |-------&gt;|    2.  Proxy Binding Update (IPv4TS)
      |       |&lt;-------|    3.  Proxy Binding Acknowledgement (IPv4TS)
      |       |========|    4.  Tunnel/Route Setup
      |       +        |    5.  Installing the traffic offload rules
      |------&gt;|        |    6.  IPv4 packet from mobile node
      |       +        |    7.  Offload rule applied (Tunnel/offload)
      |       |        |

           Figure 2: Exchange of IPv4 Traffic Offload Selectors

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20IPv4%20Traffic%20Offload%20Selector%20Option"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  IPv4 Traffic Offload Selector Option</span>

   A new mobility option, the IPv4 Traffic Offload Selector option (53),
   is defined for use in Proxy Binding Update (PBU) and Proxy Binding
   Acknowledgement (PBA) messages exchanged between a mobile access
   gateway and a local mobility anchor.  This option is used for
   carrying the IPv4 traffic offload policy.  This policy identifies the
   IPv4 traffic flow selectors that can be used by the mobile access
   gateway for enforcing the offload policy.

   The alignment requirement for this option is 4n.

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                   |      Type     |   Length      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |M|                         Reserved                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Traffic Selector Sub-option   ...
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 3: IPv4 Traffic Offload Selector Option

   Type
      53

   Length
      8-bit unsigned integer indicating the length in octets of the
      option, excluding the type and length fields.





<span class="grey">Gundavelli, et al.           Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


   Offload Mode (M) Flag
      This field indicates the offload mode.

         If the (M) flag value is set to a value of (0), it is an
         indication that the IPv4 flow(s) that match the traffic
         selectors in the Traffic Selector sub-option [<a href="rfc6089.html" title='"Flow Bindings in Mobile IPv6 and Network Mobility (NEMO) Basic Support"'>RFC6089</a>] and that
         are associated to that mobility session have to be offloaded at
         the mobile access gateway.  All the other IPv4 flows associated
         with that mobility session and not matching the traffic
         selectors have to be tunneled to the local mobility anchor.

         If the (M) flag value is set to a value of (1), it is an
         indication that all the IPv4 flows associated to that mobility
         session except the IPv4 flow(s) matching the traffic selectors
         in the Traffic Selector sub-option have to be offloaded at the
         mobile access gateway.  All the IPv4 flows associated with that
         mobility session and matching the traffic selectors have to be
         tunneled back to the local mobility anchor.

   Reserved
      This field is unused for now.  The value MUST be initialized to 0
      by the sender and MUST be ignored by the receiver.

   Traffic Selector Sub-option
      The Traffic Selector sub-option includes the parameters used to
      match packets for a specific flow binding.  This is an optional
      sub-option when the IPv4 Traffic Selector option is carried in a
      Proxy Binding Update message but is a mandatory sub-option when
      the IPv4 Traffic Selector option is carried in a Proxy Binding
      Acknowledgement message.  The format of the Traffic Selector sub-
      option is defined in <a href="rfc6089.html#section-4.2.1.4">Section 4.2.1.4 of [RFC6089]</a>.  This sub-
      option includes a TS Format field, which identifies the format of
      the flow specification included in that sub-option.  The values
      for that field are defined in <a href="rfc6088.html#section-3">Section 3 of [RFC6088]</a> and are
      repeated here for completeness.  When the value of the TS Format
      field is set to (1), the format that follows is the IPv4 binary
      traffic selector specified in <a href="rfc6088.html#section-3.1">Section 3.1 of [RFC6088]</a>, and that
      support is mandatory for this specification.  The text specified
      in this section takes precedence over what is specified in
      [<a href="rfc6088.html" title='"Traffic Selectors for Flow Bindings"'>RFC6088</a>] and [<a href="rfc6089.html" title='"Flow Bindings in Mobile IPv6 and Network Mobility (NEMO) Basic Support"'>RFC6089</a>].

         1: IPv4 binary traffic selector

         2: IPv6 binary traffic selector (not used by this
         specification)






<span class="grey">Gundavelli, et al.           Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20MAG%20Considerations"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  MAG Considerations</span>

   o  If the mobile access gateway is configured to enable IPv4 traffic
      offload support, then it includes the IPv4 Traffic Offload
      Selector option (<a href="#section-3.1">Section 3.1</a>) in the Proxy Binding Update message
      that it sends to the local mobility anchor.  Optionally, the
      mobile access gateway can also propose a specific offload policy.

      *  The mobile access gateway MAY choose not to propose any
         specific IPv4 traffic offload policy but request the local
         mobility anchor for the offload policy.  In this scenario, the
         IPv4 Traffic Offload Selector option that is carried in the
         Proxy Binding Update message does not include the Traffic
         Selector sub-option (see <a href="#section-3.1">Section 3.1</a>), and the (M) flag (see
         <a href="#section-3.1">Section 3.1</a>) in the option MUST be set to a value of (0).
         Including the IPv4 Traffic Offload Selector option in the Proxy
         Binding Update without the Traffic Selector sub-option serves
         as an indication that the mobile access gateway is not
         proposing any specific offload policy for that mobility
         session, but rather it makes a request to the local mobility
         anchor to provide the offload policy.

      *  The mobile access gateway MAY choose to propose a specific IPv4
         traffic offload policy by including the Traffic Selector sub-
         option in the IPv4 Traffic Offload Selector option (see
         <a href="#section-3.1">Section 3.1</a>).  The specific details on how the mobile access
         gateway obtains the mobile node's IPv4 traffic offload policy
         are outside the scope of this document.  When this offload
         policy is included in the Proxy Binding Update message, it
         serves as a proposal to the local mobility anchor.  The local
         mobility anchor can override with its own offload policy, or it
         can agree to the proposed policy.  The offload policy has to be
         translated to a set of selectors that can be used to match the
         mobile node's IP flows, and these selectors have to be carried
         in the Traffic Selector sub-option.  The Traffic Selector sub-
         option MUST be constructed as specified in <a href="rfc6089.html#section-4.2.1.4">Section 4.2.1.4 of
         [RFC6089]</a>.  This sub-option includes a TS Format field, which
         identifies the format of the flow specification included in the
         sub-option.  The values for that field and the corresponding
         message format are defined in <a href="rfc6088.html#section-3.1">Section 3.1 of [RFC6088]</a>.
         Considerations from <a href="#section-3.1">Section 3.1</a> apply with respect to setting
         the Offload Mode (M) flag.

   o  When sending a Proxy Binding Update either for Binding Lifetime
      Extension or for Binding De-Registration, the mobile access
      gateway SHOULD copy the IPv4 Traffic Offload Selector option from
      the initial Proxy Binding Update message.  Considerations from
      Sections <a href="#section-6.9.1.3">6.9.1.3</a> and <a href="#section-6.9.1.4">6.9.1.4</a> of [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>] MUST be applied.



<span class="grey">Gundavelli, et al.           Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


   o  If the mobile access gateway is not configured to support IPv4
      traffic offload support as specified in this specification, but if
      the received Proxy Binding Acknowledgement message has the IPv4
      Traffic Offload Selector option, then the mobile access gateway
      MUST ignore the option and process the rest of the message as per
      [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>].

   o  If there is no IPv4 Traffic Offload Selector option in the Proxy
      Binding Acknowledgement message received from the local mobility
      anchor, it is an indication that the local mobility anchor did not
      enable IPv4 traffic offload support for that mobility session.
      Upon accepting the Proxy Binding Acknowledgement message, the
      mobile access gateway SHOULD NOT enable IPv4 traffic offload
      support for that mobility session.

   o  If there is an IPv4 Traffic Offload Selector option in the Proxy
      Binding Acknowledgement message, then the mobile access gateway
      SHOULD enable IPv4 traffic offload support for that mobility
      session.  The mobility access gateway has to provision the data
      plane using the flow selectors present in the Traffic Selector
      sub-option.  The IPv4 flows matching the flow selectors have to be
      offloaded or tunneled back based to the local mobility anchor
      based on the value of the Offload Mode (M) flag (see <a href="#section-3.1">Section 3.1</a>).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20LMA%20Considerations"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  LMA Considerations</span>

   o  If the received Proxy Binding Update message does not include the
      IPv4 Traffic Offload Selector option (<a href="#section-3.1">Section 3.1</a>), then the local
      mobility anchor MUST NOT enable IPv4 traffic offload support for
      that mobility session, and the Proxy Binding Acknowledgement
      message that will be sent in response MUST NOT contain the IPv4
      Traffic Offload Selector option.

   o  If the Proxy Binding Update message includes the IPv4 Traffic
      Offload Selector option, but the local mobility anchor is not
      configured to support IPv4 traffic offload support, then the local
      mobility anchor will ignore the option and process the rest of the
      message as per [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>].  This would have no effect on the
      operation of the rest of the protocol.

   o  If the Proxy Binding Update message has the IPv4 Traffic Offload
      Selector option and if the local mobility anchor is configured to
      support IPv4 traffic offload support, then the local mobility
      anchor MUST enable IPv4 traffic offload support for that mobility
      session.  The Proxy Binding Acknowledgement message that will be
      sent in response MUST include the IPv4 Traffic Offload Selector
      option.  The following considerations apply with respect to
      constructing the IPv4 Traffic Offload Selector option.



<span class="grey">Gundavelli, et al.           Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


      *  The local mobility anchor can obtain the offload policy from
         the local configuration store or from a network function such
         as AAA (Authentication, Authorization, and Accounting) or PCRF
         (Policy and Charging Rule Function).  The offload policy has to
         be translated to a set of selectors that can be used to match
         the mobile node's IP flows, and these selectors have to be
         carried in the Traffic Selector sub-option.  The Traffic
         Selector sub-option MUST be constructed as specified in <a href="#section-4.2.1.4">Section</a>
         <a href="#section-4.2.1.4">4.2.1.4</a> of [<a href="rfc6089.html" title='"Flow Bindings in Mobile IPv6 and Network Mobility (NEMO) Basic Support"'>RFC6089</a>].  Considerations from <a href="#section-3.1">Section 3.1</a> apply
         with respect to the Offload Mode (M) flag setting.

      *  If the Proxy Binding Update message includes a specific IPv4
         traffic offload policy proposal in the form of the Traffic
         Selector sub-option [<a href="rfc6089.html" title='"Flow Bindings in Mobile IPv6 and Network Mobility (NEMO) Basic Support"'>RFC6089</a>], then the local mobility anchor
         MAY choose to agree to that request by including the same IPv4
         traffic offload policy in the Proxy Binding Acknowledgement
         message.  This implies the local mobility anchor has agreed to
         the IPv4 traffic offload policy provided by the mobile access
         gateway.  The local mobility anchor MAY also choose to override
         the request by including a different IPv4 traffic offload
         policy that it wants the mobile access gateway to enforce for
         that mobility session.  This is entirely based on the policy
         configuration on the local mobility anchor.

      *  The IPv4 traffic offload policy that is sent to the mobile
         access gateway has to be specific to the mobility session
         identified using the Mobile Node Identifier option [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>].
         The offload policy MUST be specific to a mobile node's
         application traffic.  The traffic selectors have to match only
         the mobile node's application traffic and MUST NOT match any
         other mobile node's IP traffic.  Furthermore, control-plane
         traffic such as DHCP, Neighbor Discovery (ND), or any other IP
         traffic that is used for IP address configuration, mobility
         management, or other control-plane functions MUST NOT be
         subject to offload.

      *  The local mobility anchor MUST NOT make any changes to the
         mobile node's offload policy during the middle of a mobility
         session, as long as the mobile node continues to attach to the
         mobile access gateway that negotiated the offload policy.
         However, when the mobile node performs an inter-MAG handover,
         the new mobile access gateway may not be capable of supporting
         IP Traffic offload and in this scenario, the offload policy may
         change.  Therefore, the IPv4 Traffic Selector option with the
         Traffic Selector sub-option that is delivered during the
         initial mobility signaling MUST be the same as the one that is
         delivered as part of the mobility signaling related to lifetime
         extension from the same mobile access gateway.



<span class="grey">Gundavelli, et al.           Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Protocol%20Configuration%20Variables"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Protocol Configuration Variables</span>

   This specification defines the following configuration variable that
   controls the IPv4 traffic offload support feature.  This
   configuration variable is internal to the system and has no bearing
   on interoperability across different implementations.

   The mobility entities, local mobility anchor, and the mobile access
   gateway have to allow these variables to be configured by the system
   management.  The configured values for these protocol variables have
   to survive server reboots and service restarts.

   EnableIPv4TrafficOffloadSupport

         This flag indicates whether or not IPv4 traffic offload support
         needs to be enabled.  This configuration variable is available
         at both the mobile access gateway and the local mobility
         anchor.  The default value for this flag is set to (0),
         indicating that IPv4 traffic offload support is disabled.

         When this flag on the mobile access gateway is set to a value
         of (1), the mobile access gateway has to enable IPv4 traffic
         offload support for all mobility sessions, by specifically
         requesting the IPv4 traffic offload policy from the local
         mobility anchor by including the IPv4 Traffic Offload Selector
         option in the Proxy Binding Update message.  If the flag is set
         to a value of (0), the mobile access gateway has to disable
         IPv4 traffic offload support for all mobility sessions.

         Similarly, when this flag on the local mobility anchor is set
         to a value of (1), the local mobility anchor has to enable IPv4
         traffic offload support.  If the local mobility anchor chooses
         to enable IPv4 traffic offload support when there is an offload
         policy specified for a mobile node, it has to deliver the IPv4
         traffic offload policy to the mobile access gateway by
         including the IPv4 Traffic Offload Selector option in the Proxy
         Binding Acknowledgement message.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  IANA Considerations</span>

   Per this specification, IANA has assigned a new mobility option: the
   IPv4 Traffic Offload Selector option (53).  This option is described
   in <a href="#section-3.1">Section 3.1</a>.  The Type value for this option has been assigned
   from the same numbering space as allocated for the other mobility
   options [<a href="rfc6275.html" title='"Mobility Support in IPv6"'>RFC6275</a>].






<span class="grey">Gundavelli, et al.           Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   The IPv4 Traffic Offload Selector option defined in this
   specification is for use in Proxy Binding Update and Proxy Binding
   Acknowledgement messages.  This option is carried like any other
   mobility header option as specified in [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>].  Therefore, it
   inherits from [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>] its security guidelines and does not require
   any additional security considerations.  Carrying IPv4 traffic
   offload selectors does not introduce any new security
   vulnerabilities.

   When IPv4 traffic offload support is enabled for a mobile node, the
   mobile access gateway selectively offloads some of the mobile node's
   IPv4 traffic flows to the access network.  Typically, these offloaded
   flows get NAT translated, which essentially introduces certain
   vulnerabilities that are common to any NAT deployment.  These
   vulnerabilities and the related considerations have been well
   documented in the NAT specification [<a href="rfc2663.html" title='"IP Network Address Translator (NAT) Terminology and Considerations"'>RFC2663</a>].  There are no
   additional considerations above and beyond what has already been
   documented by the NAT specifications and that are unique to the
   approach specified in this document.

   The mobile node's home network may be equipped with firewall and
   other security devices to guard against any security threats.  When
   IPv4 traffic offload support is enabled, it potentially exposes the
   mobile node to some security risks in the access network.  This
   threat can be mitigated by deploying the security features both in
   the access network and in the home network.

   When IPv4 traffic offload support is enabled for a mobile node, some
   of the IP flows are sent through the home network, and some other IP
   flows are routed through the access network.  This potentially
   introduces some complexity with respect to enabling diagnostics or
   monitoring on the user traffic.  The tools that are used for such
   diagnostics have to be aware of the offload policy that in enabled in
   the network.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Acknowledgements"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Acknowledgements</span>

   The authors would like to thank Ahmad Muhanna, Basavaraj Patil,
   Carlos Bernardos, Eric Voit, Frank Brockners, Hidetoshi Yokota, Marco
   Liebsch, Mark Grayson, Pierrick Seite, Ryuji Wakikawa, Steve Wood,
   Barry Leiba, Sean Turner, Pete Resnick, Wesley Eddy, Mary Barnes,
   Vincent Roca, Ralph Droms, Scott Bradner, Stephen Farrell, Adrian
   Farrel, Benoit Claise, and Brian Haberman for all the reviews and
   discussions related to the topic of IPv4 traffic offload.





<span class="grey">Gundavelli, et al.           Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC5213" name="ref-RFC5213">RFC5213</a>]  Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K.,
              and B. Patil, "Proxy Mobile IPv6", <a href="rfc5213.html">RFC 5213</a>, August 2008.

   [<a id="ref-RFC5844" name="ref-RFC5844">RFC5844</a>]  Wakikawa, R. and S. Gundavelli, "IPv4 Support for Proxy
              Mobile IPv6", <a href="rfc5844.html">RFC 5844</a>, May 2010.

   [<a id="ref-RFC6088" name="ref-RFC6088">RFC6088</a>]  Tsirtsis, G., Giarreta, G., Soliman, H., and N. Montavont,
              "Traffic Selectors for Flow Bindings", <a href="rfc6088.html">RFC 6088</a>,
              January 2011.

   [<a id="ref-RFC6089" name="ref-RFC6089">RFC6089</a>]  Tsirtsis, G., Soliman, H., Montavont, N., Giaretta, G.,
              and K. Kuladinithi, "Flow Bindings in Mobile IPv6 and
              Network Mobility (NEMO) Basic Support", <a href="rfc6089.html">RFC 6089</a>,
              January 2011.

   [<a id="ref-RFC6275" name="ref-RFC6275">RFC6275</a>]  Perkins, C., Johnson, D., and J. Arkko, "Mobility Support
              in IPv6", <a href="rfc6275.html">RFC 6275</a>, July 2011.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-RFC2663" name="ref-RFC2663">RFC2663</a>]  Srisuresh, P. and M. Holdrege, "IP Network Address
              Translator (NAT) Terminology and Considerations",
              <a href="rfc2663.html">RFC 2663</a>, August 1999.

   [<a id="ref-RFC5101" name="ref-RFC5101">RFC5101</a>]  Claise, B., "Specification of the IP Flow Information
              Export (IPFIX) Protocol for the Exchange of IP Traffic
              Flow Information", <a href="rfc5101.html">RFC 5101</a>, January 2008.

   [<a id="ref-TS23402" name="ref-TS23402">TS23402</a>]  3GPP, "Architecture enhancements for non-3GPP accesses",
              2010.














<span class="grey">Gundavelli, et al.           Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6909.html">RFC 6909</a>          IPv4 Traffic Offload Selector Option        April 2013</span>


Authors' Addresses

   Sri Gundavelli (editor)
   Cisco
   170 West Tasman Drive
   San Jose, CA  95134
   USA

   EMail: sgundave@cisco.com


   Xingyue Zhou
   ZTE Corporation
   No.68 Zijinghua Rd
   Nanjing
   China

   EMail: zhou.xingyue@zte.com.cn


   Jouni Korhonen
   Renesas Mobile
   Porkkalankatu 24
   Helsinki  FIN-00180
   Finland

   EMail: jouni.nospam@gmail.com


   Gaetan Feige
   Cisco
   France

   EMail: gfeige@cisco.com


   Rajeev Koodli
   Cisco
   3650 Cisco Way
   San Jose, CA  95134
   USA

   EMail: rkoodli@cisco.com








Gundavelli, et al.           Standards Track                   [Page 14]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.119, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6909 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 23 Aug 2016 18:36:55 GMT --></html>