<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4227 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 23 Aug 2016 18:45:19 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.119" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="rfc3288" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:4227" name="DC.Identifier"/>
<meta content="January, 2006" name="DC.Date.Issued"/>
<meta content="Marshall T. Rose &lt;mrose@dbc.mtview.ca.us&gt;" name="DC.Creator"/>
<meta content="This memo specifies a Simple Object Access Protocol (SOAP) binding to
the Blocks Extensible Exchange Protocol (BEEP) core. A SOAP binding
describes how SOAP messages are transmitted in the network.  The SOAP
is an XML-based (eXtensible Markup Language) messaging protocol used
to implement a wide variety of distributed messaging models. It
defines a message format and describes a variety of message patterns,
including, but not limited to, Remote Procedure Calling (RPC),
asynchronous event notification, unacknowledged messages, and
forwarding via SOAP intermediaries. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Using the Simple Object Access Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4227 - Using the Simple Object Access Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4227.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4227" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-mrose-rfc3288bis" title="draft-mrose-rfc3288bis">draft-mrose-rfc32...</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4227" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4227" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=4227">Errata</a>]        </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                      E. O'Tuathail
Request for Comments: 4227                                  Clipcode.com
Obsoletes: <a href="rfc3288.html">3288</a>                                                  M. Rose
Category: Standards Track                   Dover Beach Consulting, Inc.
                                                            January 2006


             <span class="h1">Using the Simple Object Access Protocol (SOAP)</span>
             <span class="h1">in Blocks Extensible Exchange Protocol (BEEP)</span>


Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This memo specifies a Simple Object Access Protocol (SOAP) binding to
   the Blocks Extensible Exchange Protocol (BEEP) core.  A SOAP binding
   describes how SOAP messages are transmitted in the network.

   The SOAP is an XML-based (eXtensible Markup Language) messaging
   protocol used to implement a wide variety of distributed messaging
   models.  It defines a message format and describes a variety of
   message patterns, including, but not limited to, Remote Procedure
   Calling (RPC), asynchronous event notification, unacknowledged
   messages, and forwarding via SOAP intermediaries.
















<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. BEEP Profile Identification .....................................<a href="#page-3">3</a>
      <a href="#section-2.1">2.1</a>. Profile Initialization .....................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. SOAP Message Packages ...........................................<a href="#page-6">6</a>
   <a href="#section-4">4</a>. SOAP Message Patterns ...........................................<a href="#page-8">8</a>
      <a href="#section-4.1">4.1</a>. One-Way Message ............................................<a href="#page-8">8</a>
      <a href="#section-4.2">4.2</a>. Request-Response Exchange ..................................<a href="#page-8">8</a>
      <a href="#section-4.3">4.3</a>. Request/N-Responses Exchange ...............................<a href="#page-8">8</a>
      <a href="#section-4.4">4.4</a>. Error Handling .............................................<a href="#page-9">9</a>
   <a href="#section-5">5</a>. SOAP Protocol Binding Framework Conformance .....................<a href="#page-9">9</a>
      <a href="#section-5.1">5.1</a>. Binding Name ...............................................<a href="#page-9">9</a>
      <a href="#section-5.2">5.2</a>. Base URI ...................................................<a href="#page-9">9</a>
      <a href="#section-5.3">5.3</a>. Supported SOAP Message Exchange Patterns ...................<a href="#page-9">9</a>
      <a href="#section-5.4">5.4</a>. Supported Features .........................................<a href="#page-9">9</a>
      <a href="#section-5.5">5.5</a>. MEP Operation .............................................<a href="#page-10">10</a>
           <a href="#section-5.5.1">5.5.1</a>. Behavior of Requesting SOAP Node ...................<a href="#page-10">10</a>
                  <a href="#section-5.5.1.1">5.5.1.1</a>. Init ......................................<a href="#page-10">10</a>
                  <a href="#section-5.5.1.2">5.5.1.2</a>. Requesting ................................<a href="#page-10">10</a>
                  <a href="#section-5.5.1.3">5.5.1.3</a>. Sending+Receiving .........................<a href="#page-10">10</a>
                  <a href="#section-5.5.1.4">5.5.1.4</a>. Success and Fail ..........................<a href="#page-11">11</a>
           <a href="#section-5.5.2">5.5.2</a>. Behavior of Responding SOAP Node ...................<a href="#page-11">11</a>
                  <a href="#section-5.5.2.1">5.5.2.1</a>. Init ......................................<a href="#page-11">11</a>
                  <a href="#section-5.5.2.2">5.5.2.2</a>. Receiving .................................<a href="#page-11">11</a>
                  <a href="#section-5.5.2.3">5.5.2.3</a>. Receiving+Sending .........................<a href="#page-11">11</a>
                  <a href="#section-5.5.2.4">5.5.2.4</a>. Success and Fail ..........................<a href="#page-11">11</a>
   <a href="#section-6">6</a>. URL Schemes ....................................................<a href="#page-11">11</a>
      <a href="#section-6.1">6.1</a>. The soap.beep URL Scheme ..................................<a href="#page-11">11</a>
           <a href="#section-6.1.1">6.1.1</a>. Resolving IP/TCP Address Information ...............<a href="#page-12">12</a>
      <a href="#section-6.2">6.2</a>. The soap.beeps URL Scheme .................................<a href="#page-13">13</a>
   <a href="#section-7">7</a>. Registration Templates .........................................<a href="#page-13">13</a>
      <a href="#section-7.1">7.1</a>. SOAP Profile Feature Registration Template ................<a href="#page-13">13</a>
   <a href="#section-8">8</a>. Initial Registrations ..........................................<a href="#page-13">13</a>
      <a href="#section-8.1">8.1</a>. Registration: The SOAP Profile ............................<a href="#page-13">13</a>
      <a href="#section-8.2">8.2</a>. Registration: The soap.beep URL Scheme ....................<a href="#page-14">14</a>
      <a href="#section-8.3">8.3</a>. Registration: The soap.beeps URL Scheme ...................<a href="#page-14">14</a>
      8.4. Registration: The System (Well-Known) TCP Port
           Number for SOAP ...........................................<a href="#page-15">15</a>
   <a href="#section-9">9</a>. Security Considerations ........................................<a href="#page-15">15</a>
   <a href="#section-10">10</a>. IANA Considerations ...........................................<a href="#page-16">16</a>
   <a href="#section-11">11</a>. Changes from <a href="rfc3288.html">RFC 3288</a> .........................................<a href="#page-16">16</a>
   <a href="#section-12">12</a>. Acknowledgements ..............................................<a href="#page-17">17</a>
   <a href="#section-13">13</a>. References ....................................................<a href="#page-17">17</a>
      <a href="#section-13.1">13.1</a>. Normative References .....................................<a href="#page-17">17</a>
      <a href="#section-13.2">13.2</a>. Informative References ...................................<a href="#page-18">18</a>
   <a href="#appendix-A">A</a>. Appendix - SOAP with Attachments (Informative) .................<a href="#page-19">19</a>




<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This memo specifies how SOAP envelopes [<a href="#ref-15" title='"SOAP Version 1.2 Part 0: Primer"'>15</a>] are transmitted using a
   BEEP profile [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>].  Conforming implementations MUST support SOAP
   version 1.2 [<a href="#ref-15" title='"SOAP Version 1.2 Part 0: Primer"'>15</a>] and MAY support other versions, such as SOAP version
   1.1 [<a href="#ref-17" title='"Simple Object Access Protocol (SOAP) 1.1"'>17</a>].  This memo specifies how SOAP envelopes [<a href="#ref-15" title='"SOAP Version 1.2 Part 0: Primer"'>15</a>] are
   transmitted using a BEEP profile [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>].  Unlike its predecessor,
   <a href="rfc3288.html">RFC3288</a> [<a href="#ref-16" title='"Using the Simple Object Access Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)"'>16</a>], this memo does not mandate the use of SOAP version 1.1.

   Throughout this memo, the term "envelope" refers to the top-level
   element exchanged by SOAP senders and receivers.  For example, when
   referring to SOAP version 1.2, the term "envelope" refers to the
   "Envelope" element defined in Section 5.1 of [<a href="#ref-2" title='"SOAP Version 1.2 Part 1: Messaging Framework"'>2</a>].  Furthermore, the
   terms "peer", "client", "server", "one-to-one", and "one-to-many" are
   used in the context of BEEP.  In particular, Sections <a href="#section-2.1">2.1</a> and <a href="#section-2.1.1">2.1.1</a>
   of [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>] discuss BEEP roles and exchange styles.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20BEEP%20Profile%20Identification"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  BEEP Profile Identification</span>

   The BEEP profile for SOAP is identified as

       <a href="http://iana.org/beep/soap/VERSION">http://iana.org/beep/soap/VERSION</a>

   in the BEEP "profile" element during channel creation. where
   "VERSION" refers to the numeric version of the SOAP specification.

   For example,

       <a href="http://iana.org/beep/soap/1.2">http://iana.org/beep/soap/1.2</a>

   refers to version 1.2.

   Note that <a href="rfc3288.html">RFC 3288</a> [<a href="#ref-16" title='"Using the Simple Object Access Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)"'>16</a>] used

       <a href="http://iana.org/beep/soap">http://iana.org/beep/soap</a>

   for the purposes of profile identification for SOAP version 1.1
   envelopes [<a href="#ref-17" title='"Simple Object Access Protocol (SOAP) 1.1"'>17</a>].  If an implementation of this memo chooses to
   implement SOAP version 1.1, then it should support both this Uniform
   Resource Identifier (URI) for profile identification as well as
   "<a href="http://iana.org/beep/soap/1.1">http://iana.org/beep/soap/1.1</a>".

   In BEEP, when the first channel is successfully created, the
   "serverName" attribute in the "start" element identifies the "virtual
   host" associated with the peer acting in the server role, e.g.,






<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


       &lt;start number='1' serverName='stockquoteserver.example.com'&gt;
           &lt;profile uri='http://iana.org/beep/soap/1.2' /&gt;
       &lt;/start&gt;

   The "serverName" attribute is analogous to HTTP's "Host" request-
   header field (cf. Section 14.23 of [<a href="#ref-4" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>4</a>]).

   There are two states in the BEEP profile for SOAP, "boot" and
   "ready":

   o  In the "boot" state, the peer requesting the creation of the
      channel sends a "bootmsg" (either during channel initialization or
      in a "MSG" message).

      *  If the other peer sends a "bootrpy" (either during channel
         initialization or in an "RPY" message), then the "ready" state
         is entered

      *  Otherwise, the other peer sends an "error" (either during
         channel initialization or in an "ERR" message), then no state
         change occurs.

   o  In the "ready" state, either peer begins a SOAP message pattern by
      sending a "MSG" message containing an envelope.  The other peer
      completes the message pattern either by

      *  sending back an "RPY" message containing an envelope or

      *  sending back zero or more "ANS" messages, each containing an
         envelope, followed by a "NUL" message.

      Regardless, no state change occurs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Profile%20Initialization"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Profile Initialization</span>

   The boot message is used for two purposes:

      resource identification: each channel bound to the BEEP profile
      for SOAP provides access to a single resource (a network data
      object or service).

      feature negotiation: if new features of SOAP (such as compression)
      emerge, their use can be negotiated.








<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   The DTD syntax for the boot message and its response are:

       &lt;!ELEMENT bootmsg     EMPTY&gt;
       &lt;!ATTLIST bootmsg
                 resource    CDATA             #REQUIRED
                 features    NMTOKENS          ""&gt;

       &lt;!ELEMENT bootrpy     EMPTY&gt;
       &lt;!ATTLIST bootrpy
                 features    NMTOKENS          ""&gt;

   The boot message contains a mandatory and an optional attribute:

   o  the "resource" attribute, which is analogous to HTTP's "abs_path"
      Request-URI parameter (cf. Section 5.1.2 of [<a href="#ref-4" title='"Hypertext Transfer Protocol -- HTTP/1.1"'>4</a>]) and

   o  the "features" attribute, which, if present, contains one or more
      feature tokens, each indicating an optional feature of the BEEP
      profile for SOAP that is being requested for possible use over the
      channel.

   <a href="#section-7.1">Section 7.1</a> defines a registration template for optional features.

   If the peer acting in the server role recognizes the requested
   resource, it replies with the boot response that contains one
   optional attribute:

   o  The "features" attribute, if present, contains a subset of the
      feature tokens in the boot message, indicating which features may
      be used over the channel.  (If not present or empty, then no
      features may be used.)

   Otherwise, if the boot message is improperly formed, or if the
   requested resource is not recognized, the peer acting in the server
   role replies with an error message (cf. Section 7.1 of [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>]).
   Typically, the boot message and its response are exchanged during
   channel initialization (cf. Section 2.3.1.2 of [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>]).

   For example, here the boot message and its response are exchanged
   during channel initialization:

       C: &lt;start number='1' serverName='stockquoteserver.example.com'&gt;
       C:     &lt;profile uri='http://iana.org/beep/soap/1.2'&gt;
       C:         &lt;![CDATA[&lt;bootmsg resource='/StockQuote' /&gt;]]&gt;
       C:     &lt;/profile&gt;
       C: &lt;/start&gt;





<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


       S: &lt;profile uri='http://iana.org/beep/soap/1.2'&gt;
       S:     &lt;![CDATA[&lt;bootrpy /&gt;]]&gt;
       S: &lt;/profile&gt;

   The channel bound to the BEEP profile for SOAP is now in the "ready"
   state.

   Alternatively, here is an example in which the boot exchange is
   unsuccessful:

       C: &lt;start number='1' serverName='stockquoteserver.example.com'&gt;
       C:     &lt;profile uri='http://iana.org/beep/soap/1.2'&gt;
       C:         &lt;![CDATA[&lt;bootmsg resource='/StockPick' /&gt;]]&gt;
       C:     &lt;/profile&gt;
       C: &lt;/start&gt;

       S: &lt;profile uri='http://iana.org/beep/soap/1.2'&gt;
       S:     &lt;![CDATA[&lt;error code='550'&gt;resource not
       S:                                supported&lt;/error&gt;]]&gt;
       S: &lt;/profile&gt;

   Although the channel was created successfully, it remains in the
   "boot" state.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20SOAP%20Message%20Packages"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  SOAP Message Packages</span>

   The BEEP profile for SOAP transmits envelopes encoded as UTF-8 and
   SHOULD use the media type "application/soap+xml" [<a href="#ref-5" title='"The "'>5</a>], e.g.,


   MSG 1 1 . 0 284
   Content-Type: application/soap+xml

   &lt;env:Envelope
        xmlns:env="http://www.w3.org/2003/05/soap-envelope"&gt;
     &lt;env:Header&gt;
      &lt;m:GetLastTradePrice xmlns:m="Some-URI" /&gt;
     &lt;/env:Header&gt;
     &lt;env:Body&gt;
       &lt;symbol xmlns:p="Some-URI" &gt;DIS&lt;/symbol&gt;
     &lt;/env:Body&gt;
   &lt;/env:Envelope&gt;
   END

   To provide compatibility with <a href="rfc3288.html">RFC 3288</a> [<a href="#ref-16" title='"Using the Simple Object Access Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)"'>16</a>], it MAY use the media
   type "application/xml" [<a href="#ref-6" title='"XML Media Types"'>6</a>].





<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   In addition, an implementation of the BEEP profile for SOAP MAY
   support transmission of envelopes using the MTOM [<a href="#ref-7" title='"SOAP Message Transmission Optimization Mechanism"'>7</a>] / XOP [<a href="#ref-8" title='"XML-binary Optimized Packaging"'>8</a>]
   packaging technique, e.g.,

   MSG 1 2 . 283 1436
   MIME-Version: 1.0
   Content-Type: Multipart/Related;boundary=MIME_boundary;
       type="application/xop+xml";
       start="&lt;mymessage.xml@example.org&gt;";
       startinfo="application/soap+xml; action=
   Content-Description: A SOAP message with my pic and sig in it

   --MIME_boundary
   Content-Type: application/xop+xml;
       charset=UTF-8;
       type="application/soap+xml; action=
   Content-Transfer-Encoding: 8bit
   Content-ID: &lt;mymessage.xml@example.org&gt;

   &lt;soap:Envelope
       xmlns:soap='http://www.w3.org/2003/05/soap-envelope'
       xmlns:xmlmime='http://www.w3.org/2004/11/xmlmime'&gt;
     &lt;soap:Body&gt;
       &lt;m:data xmlns:m='http://example.org/stuff'&gt;
         &lt;m:photo
     xmlmime:contentType='image/png'&gt;&lt;xop:Include
       xmlns:xop='http://www.w3.org/2004/08/xop/include'
       href='cid:http://example.org/me.png'/&gt;&lt;/m:photo&gt;
         &lt;m:sig
     xmlmime:contentType='application/pkcs7-signature'&gt;&lt;xop:Include
       xmlns:xop='http://www.w3.org/2004/08/xop/include'
       href='cid:http://example.org/my.hsh'/&gt;&lt;/m:sig&gt;
       &lt;/m:data&gt;
     &lt;/soap:Body&gt;
   &lt;/soap:Envelope&gt;

   --MIME_boundary
   Content-Type: image/png
   Content-Transfer-Encoding: binary
   Content-ID: &lt;http://example.org/me.png&gt;

   // binary octets for png

   --MIME_boundary
   Content-Type: application/pkcs7-signature
   Content-Transfer-Encoding: binary
   Content-ID: &lt;http://example.org/my.hsh&gt;




<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   // binary octets for signature

   --MIME_boundary--
   END

   Consult <a href="#section-4.1">Section 4.1</a> of XOP [<a href="#ref-8" title='"XML-binary Optimized Packaging"'>8</a>] for guidance on MIME Multipart/Related
   usage.  Because BEEP provides an 8-bit-wide path, a "transformative"
   Content-Transfer-Encoding (e.g., "base64" or "quoted-printable")
   should not be used.  Note that MIME [<a href="#ref-9" title='"Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies"'>9</a>] requires that the value of
   the "Content-ID" header be globally unique.  As stated in <a href="#section-4">Section 4</a>
   of XOP [<a href="#ref-8" title='"XML-binary Optimized Packaging"'>8</a>], XOP may be used with diverse packaging mechanisms.  When
   an implementation of BEEP in SOAP does support MTOM/XOP, it SHOULD
   support the MIME Multipart/Related XOP Package format, and MAY
   support others.  Additional formats could, in the future, include XOP
   package formats specific to BEEP (e.g., sending the attachments on a
   different channel to the SOAP channel, which would avoid searching
   for the MIME boundary tags and allows lazy delivery of attachments,
   delivering them only when really needed.)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20SOAP%20Message%20Patterns"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  SOAP Message Patterns</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20One-Way%20Message"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  One-Way Message</span>

   A one-way message involves sending a message without any response
   being returned.

   The BEEP profile for SOAP achieves this using a one-to-many exchange,
   in which the client sends a "MSG" message containing an envelope, and
   the server immediately sends back a "NUL" message, before processing
   the contents of the envelope.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Request-Response%20Exchange"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Request-Response Exchange</span>

   A request/response exchange involves sending a request, which results
   in a response being returned.

   The BEEP profile for SOAP achieves this using a one-to-one exchange,
   in which the client sends a "MSG" message containing an envelope, and
   the server sends back a "RPY" message containing an envelope.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Request%2FN-Responses%20Exchange"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Request/N-Responses Exchange</span>

   A request/N-responses exchange involves sending a request, which
   results in zero or more responses being returned.







<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   The BEEP profile for SOAP achieves this using a one-to-many exchange,
   in which the client sends a "MSG" message containing an envelope, and
   the server sends back zero or more "ANS" messages, each containing an
   envelope, followed by a "NUL" message.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Error%20Handling"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Error Handling</span>

   The BEEP profile for SOAP does not use the "ERR" message for SOAP
   faults.  When performing one-to-one exchanges, whatever SOAP response
   (including SOAP faults) generated by the server is always returned in
   the "RPY" message.  When performing one-to-many exchanges, whatever
   SOAP response (including SOAP faults) generated by the server is
   always returned in the "ANS" messages.

   If there is an error with the BEEP message unrelated to the SOAP
   envelope (e.g., poorly formed MIME message or MIME Content-Type not
   supported), then the server responds with an ERR message (see <a href="#section-7.1">Section</a>
   <a href="#section-7.1">7.1</a> of [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>]) with an appropriate reply code (e.g., see Section 8 of
   [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>]).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20SOAP%20Protocol%20Binding%20Framework%20Conformance"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  SOAP Protocol Binding Framework Conformance</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Binding%20Name"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Binding Name</span>

   This binding is identified by a URI that is exactly the same as the
   profile URI for BEEP in SOAP (see <a href="#section-2">Section 2</a>).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Base%20URI"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Base URI</span>

   The Base URI for the SOAP envelope is the URI of the resource
   identified in the bootmsg.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Supported%20SOAP%20Message%20Exchange%20Patterns"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Supported SOAP Message Exchange Patterns</span>

   An implementation of this binding MUST support the following SOAP
   Message Exchange Pattern (MEP):

   o  "<a href="http://www.w3.org/2003/05/soap/mep/request-response/">http://www.w3.org/2003/05/soap/mep/request-response/</a>" (see
      Section 6.2 of [<a href="#ref-3" title='"SOAP Version 1.2 Part 2: Adjuncts"'>3</a>])

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Supported%20Features"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Supported Features</span>

   An implementation of this binding MAY support the following feature:
   "<a href="http://www.w3.org/2003/05/soap/features/action/">http://www.w3.org/2003/05/soap/features/action/</a>" (see Section 6.5 of
   [<a href="#ref-3" title='"SOAP Version 1.2 Part 2: Adjuncts"'>3</a>].)






<span class="grey">O'Tuathail &amp; Rose           Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20MEP%20Operation"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  MEP Operation</span>

   For binding instances conforming to this specification:

   o  A SOAP node instantiated at the BEEP peer that initiates the
      message exchange may assume the role (i.e., the property <a href="http://www.w3.org/2003/05/soap/bindingFramework/ExchangeContext/Role">http://</a>
      <a href="http://www.w3.org/2003/05/soap/bindingFramework/ExchangeContext/Role">www.w3.org/2003/05/soap/bindingFramework/ExchangeContext/Role</a> ) of
      "RequestingSOAPNode".

   o  A SOAP node instantiated at the other BEEP peer may assume the
      role (i.e., the property <a href="http://www.w3.org/2003/05/soap/bindingFramework/ExchangeContext/Role">http://www.w3.org/2003/05/soap/</a>
      <a href="http://www.w3.org/2003/05/soap/bindingFramework/ExchangeContext/Role">bindingFramework/ExchangeContext/Role</a>) of "RespondingSOAPNode".

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.5.1.%20%20Behavior%20of%20Requesting%20SOAP%20Node"></a><a class="selflink" href="#section-5.5.1" name="section-5.5.1">5.5.1</a>.  Behavior of Requesting SOAP Node</span>

   The overall flow of the behavior of a requesting SOAP node follows a
   state machine description consistent with Section 6.2 of [<a href="#ref-3" title='"SOAP Version 1.2 Part 2: Adjuncts"'>3</a>].

   In order to avoid deadlock during streaming (see Section 6.2.3 of
   [<a href="#ref-3" title='"SOAP Version 1.2 Part 2: Adjuncts"'>3</a>]), the requesting SOAP node MUST be able to process incoming SOAP
   response information while the SOAP request is still being
   transmitted.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.5.1.1.%20%20Init"></a><a class="selflink" href="#section-5.5.1.1" name="section-5.5.1.1">5.5.1.1</a>.  Init</span>

   In the "Init" state, a BEEP message is formulated according to
   <a href="#section-3">Section 3</a>, transmission of the message begins, and then the state
   changes to "Requesting".

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.5.1.2.%20%20Requesting"></a><a class="selflink" href="#section-5.5.1.2" name="section-5.5.1.2">5.5.1.2</a>.  Requesting</span>

   In the "Requesting" state, more of the request message is transmitted
   and the arrival of the response is awaited.  When the beginning of
   the response message is received, if it is a BEEP ERR message, then
   the state transitions to "Fail"; otherwise, the state transitions to
   "Sending+Receiving".

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.5.1.3.%20%20Sending%2BReceiving"></a><a class="selflink" href="#section-5.5.1.3" name="section-5.5.1.3">5.5.1.3</a>.  Sending+Receiving</span>

   In the "Sending+Receiving" state, the transmission of the request
   message and receiving of the response message are completed.  The
   response message is assumed to contain a SOAP envelope serialized
   according to the rules for carrying SOAP messages in the media type
   given in the Content-Type header field.  Once the receipt of the
   response is completed, the state transitions to "Success".






<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.5.1.4.%20%20Success%20and%20Fail"></a><a class="selflink" href="#section-5.5.1.4" name="section-5.5.1.4">5.5.1.4</a>.  Success and Fail</span>

   "Success" and "Fail" are the terminal states for the state machine.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.5.2.%20%20Behavior%20of%20Responding%20SOAP%20Node"></a><a class="selflink" href="#section-5.5.2" name="section-5.5.2">5.5.2</a>.  Behavior of Responding SOAP Node</span>

   The overall flow of the behavior of a responding SOAP node follows a
   state machine description consistent with Section 6.2 of [<a href="#ref-3" title='"SOAP Version 1.2 Part 2: Adjuncts"'>3</a>]

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.5.2.1.%20%20Init"></a><a class="selflink" href="#section-5.5.2.1" name="section-5.5.2.1">5.5.2.1</a>.  Init</span>

   In the "Init" state, the binding awaits the start of the inbound
   request.  In this state, it may only generate ERR messages (in
   accordance with <a href="#section-4.4">Section 4.4</a>).

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.5.2.2.%20%20Receiving"></a><a class="selflink" href="#section-5.5.2.2" name="section-5.5.2.2">5.5.2.2</a>.  Receiving</span>

   The binding begins to receive the request message and prepares the
   start of the response, in accordance with <a href="#section-3">Section 3</a>.  When ready to
   transmit the response, the state transitions to "Receiving+Sending".

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.5.2.3.%20%20Receiving%2BSending"></a><a class="selflink" href="#section-5.5.2.3" name="section-5.5.2.3">5.5.2.3</a>.  Receiving+Sending</span>

   The binding completes the receiving of the request and sending of the
   response and then transitions to "Success" state.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.5.2.4.%20%20Success%20and%20Fail"></a><a class="selflink" href="#section-5.5.2.4" name="section-5.5.2.4">5.5.2.4</a>.  Success and Fail</span>

   "Success" and "Fail" are the terminal states that indicate completion
   of the message exchange.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20URL%20Schemes"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  URL Schemes</span>

   This memo defines two URL schemes, "soap.beep" and "soap.beeps",
   which identify the use of SOAP over BEEP over TCP.  Note that, at
   present, a "generic" URL scheme for SOAP is not defined.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20The%20soap.beep%20URL%20Scheme"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  The soap.beep URL Scheme</span>

   The "soap.beep" URL scheme uses the "generic URI" syntax defined in
   Section 3 of [<a href="#ref-10" title='"Uniform Resource Identifier (URI): Generic Syntax"'>10</a>], specifically:

   o  the value "soap.beep" is used for the scheme component and

   o  the server-based naming authority defined in Section 3.2.2 of [<a href="#ref-10" title='"Uniform Resource Identifier (URI): Generic Syntax"'>10</a>]
      is used for the authority component.





<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   o  the path component maps to the "resource" component of the boot
      message sent during profile initialization (if absent, it defaults
      to "/").

   The values of both the scheme and authority components are case-
   insensitive.

   For example, the URL

       soap.beep://stockquoteserver.example.com/StockQuote

   might result in the example shown in <a href="#section-2.1">Section 2.1</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.1.%20%20Resolving%20IP%2FTCP%20Address%20Information"></a><a class="selflink" href="#section-6.1.1" name="section-6.1.1">6.1.1</a>.  Resolving IP/TCP Address Information</span>

   The "soap.beep" URL scheme indicates the use of the BEEP profile for
   SOAP running over TCP/IP.

   If the authority component contains a domain name and a port number,
   e.g.,

       soap.beep://stockquoteserver.example.com:1026

   then the DNS is queried for the A Resource Records corresponding to
   the domain name, and the port number is used directly.

   If the authority component contains a domain name and no port number,
   e.g.,

       soap.beep://stockquoteserver.example.com

   the Service Record algorithm [<a href="#ref-11" title='"A DNS RR for specifying the location of services (DNS SRV)"'>11</a>] is used with a service parameter of
   "soap-beep" and a protocol parameter of "tcp" to determine the IP/TCP
   addressing information.  If no appropriate SRV RRs are found (e.g.,
   for "_soap-beep._tcp.stockquoteserver.example.com"), then the DNS is
   queried for the A RRs corresponding to the domain name and the port
   number used is assigned by the IANA for the registration in <a href="#section-8.4">Section</a>
   <a href="#section-8.4">8.4</a>.

   If the authority component contains an IP address, e.g.,

       soap.beep://192.0.2.0:1026

   then the DNS is not queried, and the IP address is used directly.  If
   a port number is present, it is used directly; otherwise, the port
   number used is assigned by the IANA for the registration in <a href="#section-8.4">Section</a>
   <a href="#section-8.4">8.4</a>.




<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   While the use of literal IPv6 addresses in URLs is discouraged, if a
   literal IPv6 address is used in a "soap.beep" URL, it must conform to
   the syntax specified in [<a href="#ref-12" title='"Uniform Resource Identifier (URI): Generic Syntax"'>12</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20The%20soap.beeps%20URL%20Scheme"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  The soap.beeps URL Scheme</span>

   The "soap.beeps" URL scheme is identical, in all ways, to the
   "soap.beep" URL scheme specified in <a href="#section-6.1">Section 6.1</a>, with the exception
   that prior to starting the BEEP profile for SOAP, the BEEP session
   must be tuned for privacy.  In particular, note that both URL schemes
   use the identical algorithms and parameters for address resolution as
   specified in <a href="#section-6.1.1">Section 6.1.1</a> (e.g., the same service name for SRV
   lookups, the same port number for TCP, and so on).

   There are two ways to perform privacy tuning on a BEEP session,
   either

   o  a transport security profile may be successfully started or

   o  a user authentication profile that supports transport security may
      be successfully started.

   Regardless, upon completion of the negotiation process, a tuning
   reset occurs in which both BEEP peers issue a new greeting.  Consult
   Section 3 of [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>] for an example of how a BEEP peer may choose to
   issue different greetings based on whether privacy is in use.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Registration%20Templates"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Registration Templates</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20SOAP%20Profile%20Feature%20Registration%20Template"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  SOAP Profile Feature Registration Template</span>

   When a feature for the BEEP profile for SOAP is registered, the
   following information is supplied:

   Feature Identification: specify a string that identifies this
      feature.  Unless the feature is registered with the IANA, the
      feature's identification must start with "x-".

   Feature Semantics: specify the semantics of the feature.

   Contact Information: specify the electronic contact information for
      the author of the feature.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Initial%20Registrations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Initial Registrations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Registration%3A%20The%20SOAP%20Profile"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Registration: The SOAP Profile</span>

   Profile Identification: <a href="http://iana.org/beep/soap/VERSION">http://iana.org/beep/soap/VERSION</a>



<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   Messages exchanged during Channel Creation: bootmsg, bootrpy

   Messages starting one-to-one exchanges: bootmsg, a SOAP "envelope"

   Messages in positive replies: bootrpy, a SOAP "envelope"

   Messages in negative replies: error

   Messages in one-to-many exchanges: a SOAP "envelope"

   Message Syntax: a SOAP envelope

   Message Semantics: corresponds to the relevant SOAP specification,
      e.g., for SOAP version 1.2, cf. [<a href="#ref-2" title='"SOAP Version 1.2 Part 1: Messaging Framework"'>2</a>].

   Contact Information: Eamon O'Tuathail &lt;eamon.otuathail@clipcode.com&gt;,
      Marshall Rose &lt;mrose@dbc.mtview.ca.us&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Registration%3A%20The%20soap.beep%20URL%20Scheme"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Registration: The soap.beep URL Scheme</span>

   URL scheme name: soap.beep

   URL scheme syntax: cf. <a href="#section-6.1">Section 6.1</a>

   Character encoding considerations: cf. the "generic URI" syntax
      defined in Section 3 of [<a href="#ref-10" title='"Uniform Resource Identifier (URI): Generic Syntax"'>10</a>]

   Intended usage: identifies a SOAP resource made available using the
      BEEP profile for SOAP

   Applications using this scheme: cf. "Intended usage", above

   Interoperability considerations: n/a

   Security Considerations: cf. <a href="#section-9">Section 9</a>

   Relevant Publications: cf. [<a href="#ref-2" title='"SOAP Version 1.2 Part 1: Messaging Framework"'>2</a>] for SOAP version 1.2

   Contact Information: Eamon O'Tuathail &lt;eamon.otuathail@clipcode.com&gt;,
      Marshall Rose &lt;mrose@dbc.mtview.ca.us&gt;

   Author/Change controller: the IESG

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.3.%20%20Registration%3A%20The%20soap.beeps%20URL%20Scheme"></a><a class="selflink" href="#section-8.3" name="section-8.3">8.3</a>.  Registration: The soap.beeps URL Scheme</span>

   URL scheme name: soap.beeps

   URL scheme syntax: cf. <a href="#section-6.2">Section 6.2</a>



<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   Character encoding considerations: cf. the "generic URI" syntax
      defined in Section 3 of [<a href="#ref-10" title='"Uniform Resource Identifier (URI): Generic Syntax"'>10</a>]

   Intended usage: identifies a SOAP resource made available using the
      BEEP profile for SOAP after the BEEP session has been tuned for
      privacy

   Applications using this scheme: cf. "Intended usage", above

   Interoperability considerations: n/a

   Security Considerations: cf. <a href="#section-9">Section 9</a>

   Relevant Publications: cf. [<a href="#ref-2" title='"SOAP Version 1.2 Part 1: Messaging Framework"'>2</a>] for SOAP version 1.2

   Contact Information: Eamon O'Tuathail &lt;eamon.otuathail@clipcode.com&gt;,
      Marshall Rose &lt;mrose@dbc.mtview.ca.us&gt;

   Author/Change controller: the IESG

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.4.%20%20Registration%3A%20The%20System%20%28Well-Known%29%20TCP%20Port%20Number%20for%20SOAP"></a><a class="selflink" href="#section-8.4" name="section-8.4">8.4</a>.  Registration: The System (Well-Known) TCP Port Number for SOAP</span>
<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/over%20BEEP"></a>      over BEEP</span>

   Protocol Number: TCP

   Message Formats, Types, Opcodes, and Sequences: cf. <a href="#section-2.1">Section 2.1</a>

   Functions: cf. [<a href="#ref-2" title='"SOAP Version 1.2 Part 1: Messaging Framework"'>2</a>] for SOAP version 1.2

   Use of Broadcast/Multicast: none

   Proposed Name: SOAP over BEEP

   Short name: soap-beep

   Contact Information: Eamon O'Tuathail &lt;eamon.otuathail@clipcode.com&gt;,
      Marshall Rose &lt;mrose@dbc.mtview.ca.us&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   Although service provisioning is a policy matter, at a minimum, all
   implementations MUST provide the following tuning profiles:

   for authentication: <a href="http://iana.org/beep/SASL/DIGEST-MD5">http://iana.org/beep/SASL/DIGEST-MD5</a>

   for confidentiality: <a href="http://iana.org/beep/TLS">http://iana.org/beep/TLS</a> (using the
      TLS_RSA_WITH_AES_EDE_CBC_SHA cipher)




<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   for both: <a href="http://iana.org/beep/TLS">http://iana.org/beep/TLS</a> (using the
      TLS_RSA_WITH_AES_EDE_CBC_SHA cipher supporting client-side
      certificates)

   Furthermore, implementations may choose to offer MIME-based security
   services providing message integrity and confidentiality, such as
   OpenPGP [<a href="#ref-13" title='"MIME Security with OpenPGP"'>13</a>] or S/MIME [<a href="#ref-14" title='"Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.1 Message Specification"'>14</a>].

   Regardless, consult [<a href="#ref-1" title='"The Blocks Extensible Exchange Protocol Core"'>1</a>]'s <a href="#section-9">Section 9</a> for a discussion of BEEP-specific
   security issues.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  IANA Considerations</span>

   Previously, the IANA registered "<a href="http://iana.org/beep/soap">http://iana.org/beep/soap</a>" for use
   with <a href="rfc3288.html">RFC 3288</a> [<a href="#ref-16" title='"Using the Simple Object Access Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)"'>16</a>].  This memo requires that the IANA register a
   URI-prefix of

       <a href="http://iana.org/beep/soap/VERSION">http://iana.org/beep/soap/VERSION</a>

   to correspond to the family of profiles defined <a href="#section-8.1">Section 8.1</a>.

   The IANA has registered "soap.beep" and "soap.beeps" as URL schemes,
   as specified in <a href="#section-8.2">Section 8.2</a> and <a href="#section-8.3">Section 8.3</a>, respectively.

   The IANA has also registered "SOAP over BEEP" as a TCP port number,
   as specified in <a href="#section-8.4">Section 8.4</a>.

   The IANA now broadens these three registries to support the family of
   BEEP profiles defined by this URI prefix.

   Finally, the IANA maintains a list of SOAP profile features, cf.
   <a href="#section-7.1">Section 7.1</a>.  The IESG is responsible for assigning a designated
   expert to review the specification prior to the IANA making the
   assignment.  Prior to contacting the IESG, developers of SOAP profile
   features must use the mailing list beepwg@lists.beepcore.org to
   solicit commentary.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Changes%20from%20RFC%203288"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Changes from <a href="rfc3288.html">RFC 3288</a></span>

   This memo differs from <a href="rfc3288.html">RFC 3288</a> [<a href="#ref-16" title='"Using the Simple Object Access Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)"'>16</a>] in one substantive way: a URL
   prefix is defined to support a family of BEEP profiles corresponding
   to different versions of SOAP.  Similarly, the IANA registrations in
   <a href="#section-8.1">Section 8.1</a>, <a href="#section-8.3">Section 8.3</a>, and <a href="#section-8.4">Section 8.4</a> are updated to reflect this
   broadening.

   Support for W3C MTOM/XOP packaging has been added.





<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   A new section was added to discuss the distributed state machine of
   the Request-Response MEP.

   In non-substantive ways, a small number of typographical errors were
   corrected.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Acknowledgements"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Acknowledgements</span>

   The authors gratefully acknowledge the contributions of: Christopher
   Ferris, Huston Franklin, Alexey Melnikov, Bill Mills, and Roy T.
   Fielding.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20References"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.1.%20%20Normative%20References"></a><a class="selflink" href="#section-13.1" name="section-13.1">13.1</a>.  Normative References</span>

   [<a id="ref-1" name="ref-1">1</a>]   Rose, M., "The Blocks Extensible Exchange Protocol Core", <a href="rfc3080.html">RFC</a>
         <a href="rfc3080.html">3080</a>, March 2001.

   [<a id="ref-2" name="ref-2">2</a>]   Nielsen, H., Mendelsohn, N., Gudgin, M., Hadley, M., and J.
         Moreau, "SOAP Version 1.2 Part 1: Messaging Framework", W3C REC
         REC-soap12-part1-20030624, June 2003.

   [<a id="ref-3" name="ref-3">3</a>]   Nielsen, H., Hadley, M., Moreau, J., Mendelsohn, N., and M.
         Gudgin, "SOAP Version 1.2 Part 2: Adjuncts", W3C REC REC-
         soap12-part2-20030624, June 2003.

   [<a id="ref-4" name="ref-4">4</a>]   Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L.,
         Leach, P., and T. Berners-Lee, "Hypertext Transfer Protocol --
         HTTP/1.1", <a href="rfc2616.html">RFC 2616</a>, June 1999.

   [<a id="ref-5" name="ref-5">5</a>]   Baker, M. and M. Nottingham, "The "application/soap+xml" media
         type", <a href="rfc3902.html">RFC 3902</a>, September 2004.

   [<a id="ref-6" name="ref-6">6</a>]   Murata, M., St. Laurent, S., and D. Kohn, "XML Media Types",
         <a href="rfc3023.html">RFC 3023</a>, January 2001.

   [<a id="ref-7" name="ref-7">7</a>]   Nottingham, M., Mendelsohn, N., Gudgin, M., and H. Ruellan,
         "SOAP Message Transmission Optimization Mechanism", W3C REC
         REC-soap12-mtom-20050125, January 2005.

   [<a id="ref-8" name="ref-8">8</a>]   Nottingham, M., Mendelsohn, N., Gudgin, M., and H. Ruellan,
         "XML-binary Optimized Packaging", W3C REC REC-xop10-20050125,
         January 2005.

   [<a id="ref-9" name="ref-9">9</a>]   Freed, N. and N. Borenstein, "Multipurpose Internet Mail
         Extensions (MIME) Part One: Format of Internet Message Bodies",
         <a href="rfc2045.html">RFC 2045</a>, November 1996.



<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


   [<a id="ref-10" name="ref-10">10</a>]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform
         Resource Identifier (URI): Generic Syntax", STD 66, <a href="rfc3986.html">RFC 3986</a>,
         January 2005.

   [<a id="ref-11" name="ref-11">11</a>]  Gulbrandsen, A., Vixie, P., and L. Esibov, "A DNS RR for
         specifying the location of services (DNS SRV)", <a href="rfc2782.html">RFC 2782</a>,
         February 2000.

   [<a id="ref-12" name="ref-12">12</a>]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform
         Resource Identifier (URI): Generic Syntax", STD 66, <a href="rfc3986.html">RFC 3986</a>,
         January 2005.

   [<a id="ref-13" name="ref-13">13</a>]  Elkins, M., Del Torto, D., Levien, R., and T. Roessler, "MIME
         Security with OpenPGP", <a href="rfc3156.html">RFC 3156</a>, August 2001.

   [<a id="ref-14" name="ref-14">14</a>]  Ramsdell, B., "Secure/Multipurpose Internet Mail Extensions
         (S/MIME) Version 3.1 Message Specification", <a href="rfc3851.html">RFC 3851</a>, July
         2004.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.2.%20%20Informative%20References"></a><a class="selflink" href="#section-13.2" name="section-13.2">13.2</a>.  Informative References</span>

   [<a id="ref-15" name="ref-15">15</a>]  Mitra, N., "SOAP Version 1.2 Part 0: Primer", W3C REC REC-
         soap12-part0-20030624, June 2003.

   [<a id="ref-16" name="ref-16">16</a>]  O'Tuathail, E. and M. Rose, "Using the Simple Object Access
         Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)",
         <a href="rfc3288.html">RFC 3288</a>, June 2002.

   [<a id="ref-17" name="ref-17">17</a>]  Box, D., Ehnebuske, D., Kakivaya, G., Layman, A., Mendelsohn,
         N., Nielsen, H., Thatte, S., and D. Winer, "Simple Object
         Access Protocol (SOAP) 1.1", W3C NOTE NOTE-SOAP-20000508, May
         2000.

   [<a id="ref-18" name="ref-18">18</a>]  Levinson, E., "The MIME Multipart/Related Content-type", <a href="rfc2387.html">RFC</a>
         <a href="rfc2387.html">2387</a>, August 1998.

   [<a id="ref-19" name="ref-19">19</a>]  Barton, J., Thatte, S., and H. Nielsen, "SOAP Messages with
         Attachments", W3C NOTE NOTE-SOAP-attachments-20001211, December
         2000.

   [<a id="ref-20" name="ref-20">20</a>]  Levinson, E., "Content-ID and Message-ID Uniform Resource
         Locators", <a href="rfc2392.html">RFC 2392</a>, August 1998.

   [<a id="ref-21" name="ref-21">21</a>]  Palme, J., Hopmann, A., and N. Shelness, "MIME Encapsulation of
         Aggregate Documents, such as HTML (MHTML)", <a href="rfc2557.html">RFC 2557</a>, March
         1999.





<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20SOAP%20with%20Attachments%20%28Informative%29"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  SOAP with Attachments (Informative)</span>

   To provide compatibility with <a href="rfc3288.html">RFC3288</a> [<a href="#ref-16" title='"Using the Simple Object Access Protocol (SOAP) in Blocks Extensible Exchange Protocol (BEEP)"'>16</a>], a BEEP profile for SOAP
   MAY allow envelopes to be transmitted as the root part of a
   "multipart/related" [<a href="#ref-18" title='"The MIME Multipart/Related Content-type"'>18</a>] content, and with subordinate parts
   referenced using the rules of Section 3 of [<a href="#ref-19" title='"SOAP Messages with Attachments"'>19</a>] (i.e., using either
   the "Content-ID:" [<a href="#ref-20" title='"Content-ID and Message-ID Uniform Resource Locators"'>20</a>] or "Content-Location:" [<a href="#ref-21" title='"MIME Encapsulation of Aggregate Documents, such as HTML (MHTML)"'>21</a>] headers), e.g.,

    MSG 1 2 . 278 657
    Content-Type: multipart/related; boundary="MIME_boundary";
                  type=application/xml;
                  start="&lt;claim061400a.xml@claiming-it.com&gt;"

    --MIME_boundary
    Content-Type: application/xml
    Content-ID: &lt;claim061400a.xml@claiming-it.com&gt;

    &lt;?xml version='1.0' ?&gt;
    &lt;env:Envelope
         xmlns:env="http://www.w3.org/2003/05/soap-envelope"&gt;
     ..
    &lt;/env:Header&gt;
    &lt;env:Body&gt;
    &lt;theSignedForm href="cid:claim061400a.tiff@claiming-it.com" /&gt;
     ..
    &lt;/env:Body&gt;
    &lt;/env:Envelope&gt;

    --MIME_boundary
    Content-Type: image/tiff
    Content-Transfer-Encoding: binary
    Content-ID: &lt;claim061400a.tiff@claiming-it.com&gt;

     ...binary TIFF image...
    --MIME_boundary--
    END

   Consistent with Section 2 of [<a href="#ref-19" title='"SOAP Messages with Attachments"'>19</a>], it is strongly recommended that
   the multipart contain a "start" parameter, and that the root part
   contain a "Content-ID:" header.  However, because BEEP provides an
   8bit-wide path, a "transformative" Content-Transfer-Encoding (e.g.,
   "base64" or "quoted-printable") should not be used.  Further note
   that MIME [<a href="#ref-9" title='"Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies"'>9</a>] requires that the value of the "Content-ID" header be
   globally unique.







<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


Authors' Addresses

   Eamon O'Tuathail
   Clipcode.com
   24 Thomastown Road
   Dun Laoghaire
   Dublin
   IE

   Phone: +353 1 2350 424
   EMail: eamon.otuathail@clipcode.com
   URI:   <a href="http://www.clipcode.com/">http://www.clipcode.com/</a>


   Marshall T. Rose
   Dover Beach Consulting, Inc.
   POB 255268
   Sacramento, CA  95865-5268
   US

   Phone: +1 916 483 8878
   EMail: mrose@dbc.mtview.ca.us





























<span class="grey">O'Tuathail &amp; Rose           Standards Track                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc4227.html">RFC 4227</a>                   Using SOAP in BEEP               January 2006</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2006).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).







O'Tuathail &amp; Rose           Standards Track                    [Page 21]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.119, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4227 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 23 Aug 2016 18:45:19 GMT --></html>