<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from tools.ietf.org/html/rfc5323 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 13:01:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129c" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Identifier" content="urn:ietf:rfc:5323" />
<meta name="DC.Description.Abstract" content="This document specifies a set of methods, headers, properties and
content-types composing WebDAV SEARCH, an application of the HTTP/1.1
protocol to efficiently search for DAV resources based upon a set of
client-supplied criteria." />
<meta name="DC.Creator" content="Babich, Alan" />
<meta name="DC.Creator" content="Davis, Jim" />
<meta name="DC.Creator" content="Reddy, Surendra" />
<meta name="DC.Creator" content="Reschke, Julian F." />
<meta name="DC.Date.Issued" content="November, 2008" />
<meta name="DC.Title" content="Web Distributed Authoring and Versioning (WebDAV) SEARCH" />

    <link rel="icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <title>RFC 5323 - Web Distributed Authoring and Versioning (WebDAV) SEARCH</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgblue"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5323.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5323" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-reschke-webdav-search" title="draft-reschke-webdav-search">draft-reschke-w...</a>] [<a href='https://datatracker.ietf.org/doc/rfc5323' title='IESG Datatracker information for this document'>Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5323" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5323" title="Side-by-side diff">Diff2</a>]         </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Network Working Group                                    J. Reschke, Ed.
Request for Comments: 5323                                    greenbytes
Category: Standards Track                                       S. Reddy
                                                                  Mitrix
                                                                J. Davis

                                                               A. Babich
                                                                     IBM
                                                           November 2008


        <span class="h1">Web Distributed Authoring and Versioning (WebDAV) SEARCH</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (c) 2008 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/</a>
   <a href="http://trustee.ietf.org/license-info">license-info</a>) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   This document specifies a set of methods, headers, and properties
   composing Web Distributed Authoring and Versioning (WebDAV) SEARCH,
   an application of the HTTP/1.1 protocol to efficiently search for DAV
   resources based upon a set of client-supplied criteria.













<span class="grey">Reschke, et al.             Standards Track                     [Page 1]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-1.1">1.1</a>.  DASL . . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-1.2">1.2</a>.  Relationship to DAV  . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-1.3">1.3</a>.  Terms  . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
     <a href="#section-1.4">1.4</a>.  Notational Conventions . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-1.5">1.5</a>.  Note on Usage of 'DAV:' XML Namespace  . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-1.6">1.6</a>.  An Overview of DASL at Work  . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
   <a href="#section-2">2</a>.  The SEARCH Method  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-2.1">2.1</a>.  Overview . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-2.2">2.2</a>.  The Request  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
       <a href="#section-2.2.1">2.2.1</a>.  The Request-URI  . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
       <a href="#section-2.2.2">2.2.2</a>.  The Request Body . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-2.3">2.3</a>.  The Successful 207 (Multistatus) Response  . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-2.3.1">2.3.1</a>.  Result Set Truncation  . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-2.3.2">2.3.2</a>.  Extending the PROPFIND Response  . . . . . . . . . . . <a href="#page-10">10</a>
       <a href="#section-2.3.3">2.3.3</a>.  Example: A Simple Request and Response . . . . . . . . <a href="#page-10">10</a>
       <a href="#section-2.3.4">2.3.4</a>.  Example: Result Set Truncation . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-2.4">2.4</a>.  Unsuccessful Responses . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
       <a href="#section-2.4.1">2.4.1</a>.  Example of an Invalid Scope  . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-3">3</a>.  Discovery of Supported Query Grammars  . . . . . . . . . . . . <a href="#page-13">13</a>
     <a href="#section-3.1">3.1</a>.  The OPTIONS Method . . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
     <a href="#section-3.2">3.2</a>.  The DASL Response Header . . . . . . . . . . . . . . . . . <a href="#page-14">14</a>
     <a href="#section-3.3">3.3</a>.  DAV:supported-query-grammar-set (Protected)  . . . . . . . <a href="#page-14">14</a>
     <a href="#section-3.4">3.4</a>.  Example: Grammar Discovery . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
   <a href="#section-4">4</a>.  Query Schema Discovery: QSD  . . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-4.1">4.1</a>.  Additional SEARCH Semantics  . . . . . . . . . . . . . . . <a href="#page-17">17</a>
       <a href="#section-4.1.1">4.1.1</a>.  Example of Query Schema Discovery  . . . . . . . . . . <a href="#page-18">18</a>
   <a href="#section-5">5</a>.  The DAV:basicsearch Grammar  . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-5.1">5.1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-19">19</a>
     <a href="#section-5.2">5.2</a>.  The DAV:basicsearch DTD  . . . . . . . . . . . . . . . . . <a href="#page-20">20</a>
       <a href="#section-5.2.1">5.2.1</a>.  Example Query  . . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
     <a href="#section-5.3">5.3</a>.  DAV:select . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-23">23</a>
     <a href="#section-5.4">5.4</a>.  DAV:from . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-23">23</a>
       <a href="#section-5.4.1">5.4.1</a>.  Relationship to the Request-URI  . . . . . . . . . . . <a href="#page-23">23</a>
       <a href="#section-5.4.2">5.4.2</a>.  Scope  . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     <a href="#section-5.5">5.5</a>.  DAV:where  . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
       <a href="#section-5.5.1">5.5.1</a>.  Use of Three-Valued Logic in Queries . . . . . . . . . <a href="#page-24">24</a>
       <a href="#section-5.5.2">5.5.2</a>.  Handling Optional Operators  . . . . . . . . . . . . . <a href="#page-24">24</a>
       <a href="#section-5.5.3">5.5.3</a>.  Treatment of NULL Values . . . . . . . . . . . . . . . <a href="#page-24">24</a>
       <a href="#section-5.5.4">5.5.4</a>.  Treatment of Properties with Mixed/Element Content . . <a href="#page-25">25</a>
       <a href="#section-5.5.5">5.5.5</a>.  Example: Testing for Equality  . . . . . . . . . . . . <a href="#page-25">25</a>
       <a href="#section-5.5.6">5.5.6</a>.  Example: Relative Comparisons  . . . . . . . . . . . . <a href="#page-25">25</a>
     <a href="#section-5.6">5.6</a>.  DAV:orderby  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-26">26</a>
       <a href="#section-5.6.1">5.6.1</a>.  Example of Sorting . . . . . . . . . . . . . . . . . . <a href="#page-26">26</a>
     <a href="#section-5.7">5.7</a>.  Boolean Operators: DAV:and, DAV:or, and DAV:not  . . . . . <a href="#page-26">26</a>
     <a href="#section-5.8">5.8</a>.  DAV:eq . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-27">27</a>



<span class="grey">Reschke, et al.             Standards Track                     [Page 2]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


     <a href="#section-5.9">5.9</a>.  DAV:lt, DAV:lte, DAV:gt, DAV:gte . . . . . . . . . . . . . <a href="#page-27">27</a>
     <a href="#section-5.10">5.10</a>. DAV:literal  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-27">27</a>
     <a href="#section-5.11">5.11</a>. DAV:typed-literal (Optional) . . . . . . . . . . . . . . . <a href="#page-28">28</a>
       <a href="#section-5.11.1">5.11.1</a>. Example for Typed Numerical Comparison . . . . . . . . <a href="#page-28">28</a>
     <a href="#section-5.12">5.12</a>. Support for Matching xml:lang Attributes on Properties . . <a href="#page-29">29</a>
       <a href="#section-5.12.1">5.12.1</a>. DAV:language-defined (Optional)  . . . . . . . . . . . <a href="#page-29">29</a>
       <a href="#section-5.12.2">5.12.2</a>. DAV:language-matches (Optional)  . . . . . . . . . . . <a href="#page-29">29</a>
       <a href="#section-5.12.3">5.12.3</a>. Example of Language-Aware Matching . . . . . . . . . . <a href="#page-29">29</a>
     <a href="#section-5.13">5.13</a>. DAV:is-collection  . . . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>
       <a href="#section-5.13.1">5.13.1</a>. Example of DAV:is-collection . . . . . . . . . . . . . <a href="#page-30">30</a>
     <a href="#section-5.14">5.14</a>. DAV:is-defined . . . . . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>
     <a href="#section-5.15">5.15</a>. DAV:like . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>
       <a href="#section-5.15.1">5.15.1</a>. Syntax for the Literal Pattern . . . . . . . . . . . . <a href="#page-31">31</a>
       <a href="#section-5.15.2">5.15.2</a>. Example of DAV:like  . . . . . . . . . . . . . . . . . <a href="#page-31">31</a>
     <a href="#section-5.16">5.16</a>. DAV:contains . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-31">31</a>
       <a href="#section-5.16.1">5.16.1</a>. Result Scoring (DAV:score Element) . . . . . . . . . . <a href="#page-32">32</a>
       <a href="#section-5.16.2">5.16.2</a>. Ordering by Score  . . . . . . . . . . . . . . . . . . <a href="#page-33">33</a>
       <a href="#section-5.16.3">5.16.3</a>. Examples . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-33">33</a>
     <a href="#section-5.17">5.17</a>. Limiting the Result Set  . . . . . . . . . . . . . . . . . <a href="#page-33">33</a>
       <a href="#section-5.17.1">5.17.1</a>. Relationship to Result Ordering  . . . . . . . . . . . <a href="#page-33">33</a>
     <a href="#section-5.18">5.18</a>. The 'caseless' XML Attribute . . . . . . . . . . . . . . . <a href="#page-34">34</a>
     <a href="#section-5.19">5.19</a>. Query Schema for DAV:basicsearch . . . . . . . . . . . . . <a href="#page-34">34</a>
       <a href="#section-5.19.1">5.19.1</a>. DTD for DAV:basicsearch QSD  . . . . . . . . . . . . . <a href="#page-34">34</a>
       <a href="#section-5.19.2">5.19.2</a>. DAV:propdesc Element . . . . . . . . . . . . . . . . . <a href="#page-35">35</a>
       <a href="#section-5.19.3">5.19.3</a>. The DAV:datatype Property Description  . . . . . . . . <a href="#page-35">35</a>
       <a href="#section-5.19.4">5.19.4</a>. The DAV:searchable Property Description  . . . . . . . <a href="#page-36">36</a>
       <a href="#section-5.19.5">5.19.5</a>. The DAV:selectable Property Description  . . . . . . . <a href="#page-36">36</a>
       <a href="#section-5.19.6">5.19.6</a>. The DAV:sortable Property Description  . . . . . . . . <a href="#page-36">36</a>
       <a href="#section-5.19.7">5.19.7</a>. The DAV:caseless Property Description  . . . . . . . . <a href="#page-36">36</a>
       <a href="#section-5.19.8">5.19.8</a>. The DAV:operators XML Element  . . . . . . . . . . . . <a href="#page-37">37</a>
       <a href="#section-5.19.9">5.19.9</a>. Example of Query Schema for DAV:basicsearch  . . . . . <a href="#page-38">38</a>
   <a href="#section-6">6</a>.  Internationalization Considerations  . . . . . . . . . . . . . <a href="#page-39">39</a>
   <a href="#section-7">7</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-39">39</a>
     <a href="#section-7.1">7.1</a>.  Implications of XML External Entities  . . . . . . . . . . <a href="#page-39">39</a>
   <a href="#section-8">8</a>.  Scalability  . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-40">40</a>
   <a href="#section-9">9</a>.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <a href="#page-40">40</a>
     <a href="#section-9.1">9.1</a>.  HTTP Headers . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-40">40</a>
       <a href="#section-9.1.1">9.1.1</a>.  DASL . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-40">40</a>
   <a href="#section-10">10</a>. Contributors . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-41">41</a>
   <a href="#section-11">11</a>. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-41">41</a>
   <a href="#section-12">12</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-41">41</a>
     <a href="#section-12.1">12.1</a>. Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-41">41</a>
     <a href="#section-12.2">12.2</a>. Informative References . . . . . . . . . . . . . . . . . . <a href="#page-42">42</a>
   <a href="#appendix-A">Appendix A</a>.  Three-Valued Logic in DAV:basicsearch . . . . . . . . <a href="#page-44">44</a>
   <a href="#appendix-B">Appendix B</a>.  Candidates for Future Protocol Extensions . . . . . . <a href="#page-45">45</a>
     <a href="#appendix-B.1">B.1</a>.  Collation Support  . . . . . . . . . . . . . . . . . . . . <a href="#page-45">45</a>
     <a href="#appendix-B.2">B.2</a>.  Count  . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-46">46</a>
     <a href="#appendix-B.3">B.3</a>.  Diagnostics for Unsupported Queries  . . . . . . . . . . . <a href="#page-46">46</a>



<span class="grey">Reschke, et al.             Standards Track                     [Page 3]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


     <a href="#appendix-B.4">B.4</a>.  Language Matching  . . . . . . . . . . . . . . . . . . . . <a href="#page-46">46</a>
     <a href="#appendix-B.5">B.5</a>.  Matching Media Types . . . . . . . . . . . . . . . . . . . <a href="#page-46">46</a>
     <a href="#appendix-B.6">B.6</a>.  Query by Name  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-46">46</a>
     <a href="#appendix-B.7">B.7</a>.  Result Paging  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-46">46</a>
     <a href="#appendix-B.8">B.8</a>.  Search Scope Discovery . . . . . . . . . . . . . . . . . . <a href="#page-47">47</a>
   Index  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-47">47</a>

<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>.  Introduction</span>

<span class="h3"><a class="selflink" name="section-1.1" href="#section-1.1">1.1</a>.  DASL</span>

   This document defines Web Distributed Authoring and Versioning
   (WebDAV) SEARCH, an application of HTTP/1.1 forming a lightweight
   search protocol to transport queries and result sets that allows
   clients to make use of server-side search facilities.  It is based on
   earlier work done in the IETF DASL Working Group (see <a href="#section-10">Section 10</a>).
   In this specification, the terms "WebDAV SEARCH" and "DASL" are used
   interchangeably.

   DASL minimizes the complexity of clients so as to facilitate
   widespread deployment of applications capable of utilizing the DASL
   search mechanisms.

   DASL consists of:

   o  the SEARCH method and the request/response formats defined for it
      (<a href="#section-2">Section 2</a>),

   o  feature discovery through the "DASL" response header and the
      optional DAV:supported-grammar-set property (<a href="#section-3">Section 3</a>),

   o  optional grammar schema discovery (<a href="#section-4">Section 4</a>), and

   o  one mandatory grammar: DAV:basicsearch (<a href="#section-5">Section 5</a>).

<span class="h3"><a class="selflink" name="section-1.2" href="#section-1.2">1.2</a>.  Relationship to DAV</span>

   DASL relies on the resource and property model defined by [<a href="rfc4918.html" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>].
   DASL does not alter this model.  Instead, DASL allows clients to
   access DAV-modeled resources through server-side search.











<span class="grey">Reschke, et al.             Standards Track                     [Page 4]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="section-1.3" href="#section-1.3">1.3</a>.  Terms</span>

   This document uses the terms defined in [<a href="rfc2616.html" title="&quot;Hypertext Transfer Protocol -- HTTP/1.1&quot;">RFC2616</a>], [<a href="rfc4918.html" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>],
   [<a href="rfc3253.html" title="&quot;Versioning Extensions to WebDAV (Web Distributed Authoring and Versioning)&quot;">RFC3253</a>], and in this section.

   Criteria

      An expression against which each resource in the search scope is
      evaluated.

   Query

      A query is a combination of a search scope, search criteria,
      result record definition, sort specification, and a search
      modifier.

   Query Grammar

      A set of definitions of XML elements, attributes, and constraints
      on their relations and values that defines a set of queries and
      the intended semantics.

   Query Schema

      A listing, for any given grammar and scope, of the properties and
      operators that may be used in a query with that grammar and scope.

   Result

      A result is a result set, optionally augmented with other
      information describing the search as a whole.

   Result Record

      A description of a resource.  A result record is a set of
      properties, and possibly other descriptive information.

   Result Record Definition

      A specification of the set of properties to be returned in the
      result record.

   Result Set

      A set of records, one for each resource for which the search
      criteria evaluated to True.





<span class="grey">Reschke, et al.             Standards Track                     [Page 5]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-6" id="page-6" href="#page-6" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   Scope

      A set of resources to be searched.

   Search Arbiter

      A resource that supports the SEARCH method.

   Search Modifier

      An instruction that governs the execution of the query but is not
      part of the search scope, result record definition, the search
      criteria, or the sort specification.  An example of a search
      modifier is one that controls how much time the server can spend
      on the query before giving a response.

   Sort Specification

      A specification of an ordering on the result records in the result
      set.

<span class="h3"><a class="selflink" name="section-1.4" href="#section-1.4">1.4</a>.  Notational Conventions</span>

   This specification uses the Augmented Backus-Naur Form (ABNF)
   notation of [<a href="rfc5234.html" title="&quot;Augmented BNF for Syntax Specifications: ABNF&quot;">RFC5234</a>], unless explicitly stated otherwise.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

   This document uses XML DTD fragments ([<a href="#ref-XML" title="&quot;Extensible Markup Language (XML) 1.0 (Fourth Edition)&quot;">XML</a>], Section 3.2) as a purely
   notational convention.  WebDAV request and response bodies cannot be
   validated by a DTD due to the specific extensibility rules defined in
   <a href="rfc4918.html#section-17">Section&nbsp;17 of [RFC4918]</a> and due to the fact that all XML elements
   defined by this specification use the XML namespace name "DAV:".  In
   particular:

   1.  element names use the "DAV:" namespace,

   2.  element ordering is irrelevant unless explicitly stated,

   3.  extension elements (elements not already defined as valid child
       elements) may be added anywhere, except when explicitly stated
       otherwise,

   4.  extension attributes (attributes not already defined as valid for
       this element) may be added anywhere, except when explicitly
       stated otherwise.



<span class="grey">Reschke, et al.             Standards Track                     [Page 6]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-7" id="page-7" href="#page-7" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   When an XML element type in the "DAV:" namespace is referenced in
   this document outside of the context of an XML fragment, the string
   "DAV:" will be prefixed to the element type.

   Similarly, when an XML element type in the namespace
   "<a href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>" is referenced in this document
   outside of the context of an XML fragment, the string "xs:" will be
   prefixed to the element type.

   This document inherits, and sometimes extends, DTD productions from
   <a href="rfc4918.html#section-14">Section&nbsp;14 of [RFC4918]</a>.

<span class="h3"><a class="selflink" name="section-1.5" href="#section-1.5">1.5</a>.  Note on Usage of 'DAV:' XML Namespace</span>

   This specification defines elements, properties, and condition names
   in the XML namespace "DAV:".  In general, only specifications
   authored by IETF working groups are supposed to do this.  In this
   case an exception was made, because WebDAV SEARCH started its life in
   the IETF DASL working group (&lt;<a href="http://www.webdav.org/dasl/">http://www.webdav.org/dasl/</a>&gt;, and at
   the time the working group closed down there was already significant
   deployment of this specification.

<span class="h3"><a class="selflink" name="section-1.6" href="#section-1.6">1.6</a>.  An Overview of DASL at Work</span>

   One can express the basic usage of DASL in the following steps:

   o  The client constructs a query using the DAV:basicsearch grammar.

   o  The client invokes the SEARCH method on a resource that will
      perform the search (the search arbiter) and includes a text/xml or
      application/xml request entity that contains the query.

   o  The search arbiter performs the query.

   o  The search arbiter sends the results of the query back to the
      client in the response.  The server MUST send an entity that
      matches the WebDAV multistatus format (<a href="rfc4918.html#section-13">[RFC4918], Section&nbsp;13</a>).

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>.  The SEARCH Method</span>

<span class="h3"><a class="selflink" name="section-2.1" href="#section-2.1">2.1</a>.  Overview</span>

   The client invokes the SEARCH method to initiate a server-side
   search.  The body of the request defines the query.  The server MUST
   emit an entity matching the WebDAV multistatus format (<a href="rfc4918.html#section-13">[RFC4918],
   Section&nbsp;13</a>).





<span class="grey">Reschke, et al.             Standards Track                     [Page 7]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-8" id="page-8" href="#page-8" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   The SEARCH method plays the role of transport mechanism for the query
   and the result set.  It does not define the semantics of the query.
   The type of the query defines the semantics.

   SEARCH is a safe method; it does not have any significance other than
   executing a query and returning a query result (see <a href="rfc2616.html#section-9.1.1">[RFC2616],
   Section&nbsp;9.1.1</a>).

<span class="h3"><a class="selflink" name="section-2.2" href="#section-2.2">2.2</a>.  The Request</span>

   The client invokes the SEARCH method on the resource named by the
   Request-URI.

<span class="h4"><a class="selflink" name="section-2.2.1" href="#section-2.2.1">2.2.1</a>.  The Request-URI</span>

   The Request-URI identifies the search arbiter.  Any HTTP resource may
   function as search arbiter.  It is not a new type of resource (in the
   sense of DAV:resourcetype as defined in <a href="rfc4918.html#section-15.9">[RFC4918], Section&nbsp;15.9</a>), nor
   does it have to be a WebDAV-compliant resource.

   The SEARCH method defines no relationship between the arbiter and the
   scope of the search; rather, the particular query grammar used in the
   query defines the relationship.  For example, a query grammar may
   force the Request-URI to correspond exactly to the search scope.

<span class="h4"><a class="selflink" name="section-2.2.2" href="#section-2.2.2">2.2.2</a>.  The Request Body</span>

   The server MUST process a text/xml or application/xml request body,
   and MAY process request bodies in other formats.  See [<a href="rfc3023.html" title="&quot;XML Media Types&quot;">RFC3023</a>] for
   guidance on packaging XML in requests.

   Marshalling:

      If a request body with content type text/xml or application/xml is
      included, it MUST be either a DAV:searchrequest or a DAV:query-
      schema-discovery XML element.  Its single child element identifies
      the query grammar.

      For DAV:searchrequest, the definition of search criteria, the
      result record, and any other details needed to perform the search
      depend on the individual search grammar.

      For DAV:query-schema-discovery, the semantics is defined in
      <a href="#section-4">Section 4</a>.







<span class="grey">Reschke, et al.             Standards Track                     [Page 8]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-9" id="page-9" href="#page-9" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   Preconditions:

      (DAV:search-grammar-discovery-supported): when an XML request body
      is present and has a DAV:query-schema-discovery document element,
      the server MUST support the query schema discovery mechanism
      described in <a href="#section-4">Section 4</a>.

      (DAV:search-grammar-supported): when an XML request body is
      present, the search grammar identified by the document element's
      child element must be a supported search grammar.

      (DAV:search-multiple-scope-supported): if the SEARCH request
      specified multiple scopes, the server MUST support this optional
      feature.

      (DAV:search-scope-valid): the supplied search scope must be valid.
      There can be various reasons for a search scope to be invalid,
      including unsupported URI schemes and communication problems.
      Servers MAY add [<a href="rfc4918.html" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>] compliant DAV:response elements as
      content to the condition element indicating the precise reason for
      the failure.

<span class="h3"><a class="selflink" name="section-2.3" href="#section-2.3">2.3</a>.  The Successful 207 (Multistatus) Response</span>

   If the server returns 207 (Multistatus), then the search proceeded
   successfully, and the response MUST use the WebDAV multistatus format
   (<a href="rfc4918.html#section-13">[RFC4918], Section&nbsp;13</a>).  The results of this method SHOULD NOT be
   cached.

   There MUST be one DAV:response for each resource that matched the
   search criteria.  For each such response, the DAV:href element
   contains the URI of the resource, and the response MUST include a
   DAV:propstat element.

      Note: the WebDAV multistatus format requires at least one DAV:
      response child element.  This specification relaxes that
      restriction so that empty results can be represented.

   Note that for each matching resource found, there may be multiple
   URIs within the search scope mapped to it.  In this case, a server
   SHOULD report only one of these URIs.  Clients can use the live
   property DAV:resource-id, defined in Section 3.1 of [<a href="#ref-WEBDAV-BIND" title="&quot;Binding Extensions to Web Distributed Authoring and Versioning (WebDAV)&quot;">WEBDAV-BIND</a>] to
   identify possible duplicates.

<span class="h4"><a class="selflink" name="section-2.3.1" href="#section-2.3.1">2.3.1</a>.  Result Set Truncation</span>

   A server MAY limit the number of resources in a reply, for example,
   to limit the amount of resources expended in processing a query.  If



<span class="grey">Reschke, et al.             Standards Track                     [Page 9]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-10" id="page-10" href="#page-10" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   it does so, the reply MUST use status code 207, return a DAV:
   multistatus response body, and indicate a status of 507 (Insufficient
   Storage) for the search arbiter URI.  It SHOULD include the partial
   results.

   When a result set is truncated, there may be many more resources that
   satisfy the search criteria but that were not examined.

   If partial results are included and the client requested an ordered
   result set in the original request, then any partial results that are
   returned MUST be ordered as the client directed.

   Note that the partial results returned MAY be any subset of the
   result set that would have satisfied the original query.

<span class="h4"><a class="selflink" name="section-2.3.2" href="#section-2.3.2">2.3.2</a>.  Extending the PROPFIND Response</span>

   A response MAY include more information than PROPFIND defines, so
   long as the extra information does not invalidate the PROPFIND
   response.  Query grammars SHOULD define how the response matches the
   PROPFIND response.

<span class="h4"><a class="selflink" name="section-2.3.3" href="#section-2.3.3">2.3.3</a>.  Example: A Simple Request and Response</span>

   This example demonstrates the request and response framework.  The
   following XML document shows a simple (hypothetical) natural language
   query.  The name of the query element is natural-language-query in
   the XML namespace "http://example.com/foo".  The actual query is
   "Find the locations of good Thai restaurants in Los Angeles".  For
   this hypothetical query, the arbiter returns two properties for each
   selected resource.

   &gt;&gt; Request:

   SEARCH / HTTP/1.1
   Host: example.org
   Content-Type: application/xml; charset="utf-8"
   Content-Length: 252

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;D:searchrequest xmlns:D="DAV:" xmlns:F="http://example.com/foo"&gt;
     &lt;F:natural-language-query&gt;
       Find the locations of good Thai restaurants in Los Angeles
     &lt;/F:natural-language-query&gt;
   &lt;/D:searchrequest&gt;






<span class="grey">Reschke, et al.             Standards Track                    [Page 10]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-11" id="page-11" href="#page-11" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   &gt;&gt; Response:

   HTTP/1.1 207 Multi-Status
   Content-Type: text/xml; charset="utf-8"
   Content-Length: 429

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;D:multistatus xmlns:D="DAV:"
      xmlns:R="http://example.org/propschema"&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;http://siamiam.example/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;R:location&gt;259 W. Hollywood&lt;/R:location&gt;
           &lt;R:rating&gt;&lt;R:stars&gt;4&lt;/R:stars&gt;&lt;/R:rating&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
   &lt;/D:multistatus&gt;

<span class="h4"><a class="selflink" name="section-2.3.4" href="#section-2.3.4">2.3.4</a>.  Example: Result Set Truncation</span>

   In the example below, the server returns just two results, and then
   indicates that the result is truncated by adding a DAV:response
   element for the search arbiter resource with 507 (Insufficient
   Storage) status.

   &gt;&gt; Request:

   SEARCH / HTTP/1.1
   Host: example.net
   Content-Type: text/xml; charset="utf-8"
   Content-Length: xxx

    ... the query goes here ...















<span class="grey">Reschke, et al.             Standards Track                    [Page 11]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-12" id="page-12" href="#page-12" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   &gt;&gt; Response:

   HTTP/1.1 207 Multistatus
   Content-Type: text/xml; charset="utf-8"
   Content-Length: 640

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:multistatus xmlns:D="DAV:"&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;http://www.example.net/sounds/unbrokenchain.au&lt;/D:href&gt;
       &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
     &lt;/D:response&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;http://tech.mit.example/arch96/photos/Lesh1.jpg&lt;/D:href&gt;
       &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
     &lt;/D:response&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;http://example.net&lt;/D:href&gt;
       &lt;D:status&gt;HTTP/1.1 507 Insufficient Storage&lt;/D:status&gt;
       &lt;D:responsedescription xml:lang="en"&gt;
          Only first two matching records were returned
       &lt;/D:responsedescription&gt;
     &lt;/D:response&gt;
   &lt;/D:multistatus&gt;

<span class="h3"><a class="selflink" name="section-2.4" href="#section-2.4">2.4</a>.  Unsuccessful Responses</span>

   If a SEARCH request could not be executed or the attempt to execute
   it resulted in an error, the server MUST indicate the failure with an
   appropriate status code and SHOULD add a response body as defined in
   <a href="rfc3253.html#section-1.6">Section&nbsp;1.6 of [RFC3253]</a>.  Unless otherwise stated, condition
   elements are empty; however, specific condition elements MAY include
   additional child elements that describe the error condition in more
   detail.

<span class="h4"><a class="selflink" name="section-2.4.1" href="#section-2.4.1">2.4.1</a>.  Example of an Invalid Scope</span>

   In the example below, a request failed because the scope identifies a
   HTTP resource that was not found.












<span class="grey">Reschke, et al.             Standards Track                    [Page 12]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-13" id="page-13" href="#page-13" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   &gt;&gt; Response:

   HTTP/1.1 409 Conflict
   Content-Type: text/xml; charset="utf-8"
   Content-Length: 275

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;d:error xmlns:d="DAV:"&gt;
     &lt;d:search-scope-valid&gt;
       &lt;d:response&gt;
         &lt;d:href&gt;http://www.example.com/X&lt;/d:href&gt;
         &lt;d:status&gt;HTTP/1.1 404 Object Not Found&lt;/d:status&gt;
       &lt;/d:response&gt;
     &lt;/d:search-scope-valid&gt;
   &lt;/d:error&gt;

<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>.  Discovery of Supported Query Grammars</span>

   Servers MUST support discovery of the query grammars supported by a
   search arbiter resource.

   Clients can determine which query grammars are supported by an
   arbiter by invoking OPTIONS on the search arbiter.  If the resource
   supports SEARCH, then the DASL response header will appear in the
   response.  The DASL response header lists the supported grammars.

   Servers supporting the WebDAV extensions [<a href="rfc3253.html" title="&quot;Versioning Extensions to WebDAV (Web Distributed Authoring and Versioning)&quot;">RFC3253</a>] and/or [<a href="rfc3744.html" title="&quot;Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol&quot;">RFC3744</a>]
   MUST also:

   o  report SEARCH in the live property DAV:supported-method-set for
      all search arbiter resources, and

   o  support the live property DAV:supported-query-grammar-set as
      defined in <a href="#section-3.3">Section 3.3</a>.

<span class="h3"><a class="selflink" name="section-3.1" href="#section-3.1">3.1</a>.  The OPTIONS Method</span>

   The OPTIONS method allows the client to discover if a resource
   supports the SEARCH method and to determine the list of search
   grammars supported for that resource.

   The client issues the OPTIONS method against a resource named by the
   Request-URI.  This is a normal invocation of OPTIONS as defined in
   <a href="rfc2616.html#section-9.2">Section&nbsp;9.2 of [RFC2616]</a>.







<span class="grey">Reschke, et al.             Standards Track                    [Page 13]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-14" id="page-14" href="#page-14" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   If a resource supports the SEARCH method, then the server MUST list
   SEARCH in the Allow header defined in <a href="rfc2616.html#section-14.7">Section&nbsp;14.7 of [RFC2616]</a>.

   DASL servers MUST include the DASL header in the OPTIONS response.
   This header identifies the search grammars supported by that
   resource.

<span class="h3"><a class="selflink" name="section-3.2" href="#section-3.2">3.2</a>.  The DASL Response Header</span>

   DASLHeader = "DASL" ":" 1#Coded-URL
   Coded-URL  = &lt;defined in <a href="rfc4918.html#section-10.1">Section&nbsp;10.1 of [RFC4918]</a>&gt;

   (This grammar uses the augmented BNF format defined in <a href="rfc2616.html#section-2.1">Section&nbsp;2.1 of
   [RFC2616]</a>.)

   The DASL response header indicates server support for query grammars
   in the OPTIONS method.  The value is a list of URIs that indicate the
   types of supported grammars.  Note that although the URIs can be used
   to identify each supported search grammar, there is not necessarily a
   direct relationship between the URI and the XML element name that can
   be used in XML based SEARCH requests (the element name itself is
   identified by its namespace name (a URI reference) and the element's
   local name).

      Note: this header field value is defined as a comma-separated list
      (<a href="rfc2616.html#section-4.2">[RFC2616], Section&nbsp;4.2</a>); thus, grammar URIs can appear in
      multiple header instances, separated by commas, or both.

   For example:

   DASL: &lt;http://foobar.example/syntax1&gt;,
         &lt;http://akuma.example/syntax2&gt;, &lt;DAV:basicsearch&gt;
   DASL: &lt;http://example.com/foo/natural-language-query&gt;

<span class="h3"><a class="selflink" name="section-3.3" href="#section-3.3">3.3</a>.  DAV:supported-query-grammar-set (Protected)</span>

   This WebDAV property is required for any server supporting either
   [<a href="rfc3253.html" title="&quot;Versioning Extensions to WebDAV (Web Distributed Authoring and Versioning)&quot;">RFC3253</a>] and/or [<a href="rfc3744.html" title="&quot;Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol&quot;">RFC3744</a>] and identifies the XML-based query
   grammars that are supported by the search arbiter resource.

   &lt;!ELEMENT supported-query-grammar-set (supported-query-grammar*)&gt;
   &lt;!ELEMENT supported-query-grammar (grammar)&gt;
   &lt;!ELEMENT grammar ANY&gt;
   &lt;!-- ANY value: a query grammar element type --&gt;







<span class="grey">Reschke, et al.             Standards Track                    [Page 14]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-15" id="page-15" href="#page-15" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="section-3.4" href="#section-3.4">3.4</a>.  Example: Grammar Discovery</span>

   This example shows that the server supports search on the /somefolder
   resource with the query grammars: DAV:basicsearch,
   http://foobar.example/syntax1 and http://akuma.example/syntax2.  Note
   that servers supporting WebDAV SEARCH MUST support DAV:basicsearch.

   &gt;&gt; Request:

   OPTIONS /somefolder HTTP/1.1
   Host: example.org

   &gt;&gt; Response:

   HTTP/1.1 200 OK
   Allow: OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, COPY, MOVE
   Allow: MKCOL, PROPFIND, PROPPATCH, LOCK, UNLOCK, SEARCH
   DASL: &lt;DAV:basicsearch&gt;
   DASL: &lt;http://foobar.example/syntax1&gt;, &lt;http://akuma.example/syntax2&gt;

   This example shows the equivalent taking advantage of a server's
   support for DAV:supported-method-set and DAV:supported-query-grammar-
   set.

   &gt;&gt; Request:

   PROPFIND /somefolder HTTP/1.1
   Host: example.org
   Depth: 0
   Content-Type: text/xml; charset="utf-8"
   Content-Length: 165

   &lt;?xml version="1.0" encoding="UTF-8" ?&gt;
   &lt;propfind xmlns="DAV:"&gt;
     &lt;prop&gt;
       &lt;supported-query-grammar-set/&gt;
       &lt;supported-method-set/&gt;
     &lt;/prop&gt;
   &lt;/propfind&gt;












<span class="grey">Reschke, et al.             Standards Track                    [Page 15]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-16" id="page-16" href="#page-16" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   &gt;&gt; Response:

   HTTP/1.1 207 Multi-Status
   Content-Type: text/xml; charset="utf-8"
   Content-Length: 1349

   &lt;?xml version="1.0" encoding="utf-8" ?&gt;
   &lt;multistatus xmlns="DAV:"&gt;
    &lt;response&gt;
     &lt;href&gt;http://example.org/somefolder&lt;/href&gt;
     &lt;propstat&gt;
      &lt;prop&gt;
       &lt;supported-query-grammar-set&gt;
        &lt;supported-query-grammar&gt;
         &lt;grammar&gt;&lt;basicsearch/&gt;&lt;/grammar&gt;
        &lt;/supported-query-grammar&gt;
        &lt;supported-query-grammar&gt;
         &lt;grammar&gt;&lt;syntax1 xmlns="http://foobar.example/"/&gt;&lt;/grammar&gt;
        &lt;/supported-query-grammar&gt;
        &lt;supported-query-grammar&gt;
         &lt;grammar&gt;&lt;syntax2 xmlns="http://akuma.example/"/&gt;&lt;/grammar&gt;
        &lt;/supported-query-grammar&gt;
       &lt;/supported-query-grammar-set&gt;
       &lt;supported-method-set&gt;
        &lt;supported-method name="COPY" /&gt;
        &lt;supported-method name="DELETE" /&gt;
        &lt;supported-method name="GET" /&gt;
        &lt;supported-method name="HEAD" /&gt;
        &lt;supported-method name="LOCK" /&gt;
        &lt;supported-method name="MKCOL" /&gt;
        &lt;supported-method name="MOVE" /&gt;
        &lt;supported-method name="OPTIONS" /&gt;
        &lt;supported-method name="POST" /&gt;
        &lt;supported-method name="PROPFIND" /&gt;
        &lt;supported-method name="PROPPATCH" /&gt;
        &lt;supported-method name="PUT" /&gt;
        &lt;supported-method name="SEARCH" /&gt;
        &lt;supported-method name="TRACE" /&gt;
        &lt;supported-method name="UNLOCK" /&gt;
       &lt;/supported-method-set&gt;
      &lt;/prop&gt;
      &lt;status&gt;HTTP/1.1 200 OK&lt;/status&gt;
     &lt;/propstat&gt;
    &lt;/response&gt;
   &lt;/multistatus&gt;






<span class="grey">Reschke, et al.             Standards Track                    [Page 16]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-17" id="page-17" href="#page-17" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   Note that the query grammar element names marshalled as part of the
   DAV:supported-query-grammar-set can be directly used as element names
   in an XML-based query.

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>.  Query Schema Discovery: QSD</span>

   Servers MAY support the discovery of the schema for a query grammar.

   The DASL response header and the DAV:supported-query-grammar-set
   property provide means for clients to discover the set of query
   grammars supported by a resource.  This alone is not sufficient
   information for a client to generate a query.  For example, the DAV:
   basicsearch grammar defines a set of queries consisting of a set of
   operators applied to a set of properties and values, but the grammar
   itself does not specify which properties may be used in the query.
   QSD for the DAV:basicsearch grammar allows a client to discover the
   set of properties that are searchable, selectable, and sortable.
   Moreover, although the DAV:basicsearch grammar defines a minimal set
   of operators, it is possible that a resource might support additional
   operators in a query.  For example, a resource might support an
   optional operator that can be used to express content-based queries
   in a proprietary syntax.  QSD allows a client to discover these
   operators and their syntax.  The set of discoverable quantities will
   differ from grammar to grammar, but each grammar can define a means
   for a client to discover what can be discovered.

   In general, the schema for a given query grammar depends on both the
   resource (the arbiter) and the scope.  A given resource might have
   access to one set of properties for one potential scope, and another
   set for a different scope.  For example, consider a server able to
   search two distinct collections: one holding cooking recipes, the
   other design documents for nuclear weapons.  While both collections
   might support properties such as author, title, and date, the first
   might also define properties such as calories and preparation time,
   while the second defined properties such as yield and applicable
   patents.  Two distinct arbiters indexing the same collection might
   also have access to different properties.  For example, the recipe
   collection mentioned above might also be indexed by a value-added
   server that also stored the names of chefs who had tested the recipe.
   Note also that the available query schema might also depend on other
   factors, such as the identity of the principal conducting the search,
   but these factors are not exposed in this protocol.

<span class="h3"><a class="selflink" name="section-4.1" href="#section-4.1">4.1</a>.  Additional SEARCH Semantics</span>

   Each query grammar supported by DASL defines its own syntax for
   expressing the possible query schema.  A client retrieves the schema
   for a given query grammar on an arbiter resource with a given scope



<span class="grey">Reschke, et al.             Standards Track                    [Page 17]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-18" id="page-18" href="#page-18" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   by invoking the SEARCH method on that arbiter with that grammar and
   scope and with a root element of DAV:query-schema-discovery rather
   than DAV:searchrequest.

   Marshalling:

      The request body MUST be a DAV:query-schema-discovery element.

      &lt;!ELEMENT query-schema-discovery ANY&gt;
      &lt;!-- ANY value: XML element specifying the query grammar
                      and the scope --&gt;

      The response body takes the form of a DAV:multistatus element
      (<a href="rfc4918.html#section-13">[RFC4918], Section&nbsp;13</a>), where DAV:response is extended to hold
      the returned query grammar inside a DAV:query-schema container
      element.

      &lt;!ELEMENT response (href, status, query-schema?,
        responsedescription?) &gt;
      &lt;!ELEMENT query-schema ANY&gt;

   The content of this container is an XML element whose name and syntax
   depend upon the grammar, and whose value may (and likely will) vary
   depending upon the grammar, arbiter, and scope.

<span class="h4"><a class="selflink" name="section-4.1.1" href="#section-4.1.1">4.1.1</a>.  Example of Query Schema Discovery</span>

   In this example, the arbiter is recipes.example, the grammar is DAV:
   basicsearch, the scope is also recipes.example.

   &gt;&gt; Request:

   SEARCH / HTTP/1.1
   Host: recipes.example
   Content-Type: application/xml; charset="utf-8"
   Content-Length: 258

   &lt;?xml version="1.0"?&gt;
   &lt;query-schema-discovery xmlns="DAV:"&gt;
     &lt;basicsearch&gt;
       &lt;from&gt;
         &lt;scope&gt;
           &lt;href&gt;http://recipes.example&lt;/href&gt;
           &lt;depth&gt;infinity&lt;/depth&gt;
         &lt;/scope&gt;
       &lt;/from&gt;
     &lt;/basicsearch&gt;
   &lt;/query-schema-discovery&gt;



<span class="grey">Reschke, et al.             Standards Track                    [Page 18]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-19" id="page-19" href="#page-19" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   &gt;&gt; Response:

   HTTP/1.1 207 Multistatus
   Content-Type: application/xml; charset="utf-8"
   Content-Length: xxx

   &lt;?xml version="1.0"?&gt;
   &lt;multistatus xmlns="DAV:"&gt;
     &lt;response&gt;
       &lt;href&gt;http://recipes.example&lt;/href&gt;
       &lt;status&gt;HTTP/1.1 200 OK&lt;/status&gt;
       &lt;query-schema&gt;
         &lt;basicsearchschema&gt;
           &lt;!-- (See <a href="#section-5.19">Section 5.19</a> for
           the actual contents) --&gt;
         &lt;/basicsearchschema&gt;
       &lt;/query-schema&gt;
     &lt;/response&gt;
   &lt;/multistatus&gt;

   The query schema for DAV:basicsearch is defined in <a href="#section-5.19">Section 5.19</a>.

<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>.  The DAV:basicsearch Grammar</span>

<span class="h3"><a class="selflink" name="section-5.1" href="#section-5.1">5.1</a>.  Introduction</span>

   DAV:basicsearch uses an extensible XML syntax that allows clients to
   express search requests that are generally useful for WebDAV
   scenarios.  DASL-extended servers MUST accept this grammar, and MAY
   accept other grammars.

   DAV:basicsearch has several components:

   o  DAV:select provides the result record definition.

   o  DAV:from defines the scope.

   o  DAV:where defines the criteria.

   o  DAV:orderby defines the sort order of the result set.

   o  DAV:limit provides constraints on the query as a whole.









<span class="grey">Reschke, et al.             Standards Track                    [Page 19]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-20" id="page-20" href="#page-20" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="section-5.2" href="#section-5.2">5.2</a>.  The DAV:basicsearch DTD</span>

   &lt;!-- "basicsearch" element --&gt;

   &lt;!ELEMENT basicsearch   (select, from, where?, orderby?, limit?) &gt;

   &lt;!-- "select" element --&gt;

   &lt;!ELEMENT select        (allprop | prop) &gt;

   &lt;!-- "from" element --&gt;

   &lt;!ELEMENT from          (scope+) &gt;
   &lt;!ELEMENT scope         (href, depth, include-versions?) &gt;
   &lt;!ELEMENT include-versions EMPTY &gt;

   &lt;!-- "where" element --&gt;


































<span class="grey">Reschke, et al.             Standards Track                    [Page 20]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-21" id="page-21" href="#page-21" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   &lt;!ENTITY % comp_ops     "eq | lt | gt| lte | gte"&gt;
   &lt;!ENTITY % log_ops      "and | or | not"&gt;
   &lt;!ENTITY % special_ops  "is-collection | is-defined |
                            language-defined | language-matches"&gt;
   &lt;!ENTITY % string_ops   "like"&gt;
   &lt;!ENTITY % content_ops  "contains"&gt;

   &lt;!ENTITY % all_ops      "%comp_ops; | %log_ops; | %special_ops; |
                            %string_ops; | %content_ops;"&gt;

   &lt;!ELEMENT where         ( %all_ops; ) &gt;

   &lt;!ELEMENT and           ( %all_ops; )+ &gt;

   &lt;!ELEMENT or            ( %all_ops; )+ &gt;

   &lt;!ELEMENT not           ( %all_ops; ) &gt;

   &lt;!ELEMENT lt            (prop, (literal|typed-literal)) &gt;
   &lt;!ATTLIST lt            caseless   (yes|no) #IMPLIED&gt;

   &lt;!ELEMENT lte           (prop, (literal|typed-literal)) &gt;
   &lt;!ATTLIST lte           caseless   (yes|no) #IMPLIED&gt;

   &lt;!ELEMENT gt            (prop, (literal|typed-literal)) &gt;
   &lt;!ATTLIST gt            caseless   (yes|no) #IMPLIED&gt;

   &lt;!ELEMENT gte           (prop, (literal|typed-literal)) &gt;
   &lt;!ATTLIST gte           caseless   (yes|no) #IMPLIED&gt;

   &lt;!ELEMENT eq            (prop, (literal|typed-literal)) &gt;
   &lt;!ATTLIST eq            caseless   (yes|no) #IMPLIED&gt;

   &lt;!ELEMENT literal       (#PCDATA)&gt;
   &lt;!ELEMENT typed-literal (#PCDATA)&gt;
   &lt;!ATTLIST typed-literal xsi:type CDATA #IMPLIED&gt;

   &lt;!ELEMENT is-collection EMPTY &gt;
   &lt;!ELEMENT is-defined    (prop) &gt;

   &lt;!ELEMENT language-defined    (prop) &gt;
   &lt;!ELEMENT language-matches    (prop, literal) &gt;

   &lt;!ELEMENT like          (prop, literal) &gt;
   &lt;!ATTLIST like          caseless   (yes|no) #IMPLIED&gt;

   &lt;!ELEMENT contains      (#PCDATA)&gt;




<span class="grey">Reschke, et al.             Standards Track                    [Page 21]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-22" id="page-22" href="#page-22" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   &lt;!-- "orderby" element --&gt;

   &lt;!ELEMENT orderby       (order+) &gt;
   &lt;!ELEMENT order         ((prop | score), (ascending | descending)?)&gt;
   &lt;!ATTLIST order         caseless   (yes|no) #IMPLIED&gt;
   &lt;!ELEMENT ascending     EMPTY&gt;
   &lt;!ELEMENT descending    EMPTY&gt;

   &lt;!-- "limit" element --&gt;

   &lt;!ELEMENT limit         (nresults) &gt;
   &lt;!ELEMENT nresults      (#PCDATA) &gt;

<span class="h4"><a class="selflink" name="section-5.2.1" href="#section-5.2.1">5.2.1</a>.  Example Query</span>

   This query retrieves the content length values for all resources
   located under the server's "/container1/" URI namespace whose length
   exceeds 10000 sorted ascending by size.

   &lt;d:searchrequest xmlns:d="DAV:"&gt;
     &lt;d:basicsearch&gt;
       &lt;d:select&gt;
         &lt;d:prop&gt;&lt;d:getcontentlength/&gt;&lt;/d:prop&gt;
       &lt;/d:select&gt;
       &lt;d:from&gt;
         &lt;d:scope&gt;
           &lt;d:href&gt;/container1/&lt;/d:href&gt;
           &lt;d:depth&gt;infinity&lt;/d:depth&gt;
         &lt;/d:scope&gt;
       &lt;/d:from&gt;
       &lt;d:where&gt;
         &lt;d:gt&gt;
           &lt;d:prop&gt;&lt;d:getcontentlength/&gt;&lt;/d:prop&gt;
           &lt;d:literal&gt;10000&lt;/d:literal&gt;
         &lt;/d:gt&gt;
       &lt;/d:where&gt;
       &lt;d:orderby&gt;
         &lt;d:order&gt;
           &lt;d:prop&gt;&lt;d:getcontentlength/&gt;&lt;/d:prop&gt;
           &lt;d:ascending/&gt;
         &lt;/d:order&gt;
       &lt;/d:orderby&gt;
     &lt;/d:basicsearch&gt;
   &lt;/d:searchrequest&gt;







<span class="grey">Reschke, et al.             Standards Track                    [Page 22]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-23" id="page-23" href="#page-23" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="section-5.3" href="#section-5.3">5.3</a>.  DAV:select</span>

   DAV:select defines the result record, which is a set of properties
   and values.  This document defines two possible values: DAV:allprop
   and DAV:prop, both defined in <a href="rfc4918.html#section-14">Section&nbsp;14 of [RFC4918]</a>.

<span class="h3"><a class="selflink" name="section-5.4" href="#section-5.4">5.4</a>.  DAV:from</span>

   &lt;!ELEMENT scope            (href, depth, include-versions?) &gt;
   &lt;!ELEMENT include-versions EMPTY &gt;

   DAV:from defines the query scope.  This contains one or more DAV:
   scope elements.  Support for multiple scope elements is optional,
   however servers MUST fail a request specifying multiple DAV:scope
   elements if they can't support it (see <a href="#section-2.2.2">Section 2.2.2</a>, precondition
   DAV:search-multiple-scope-supported).  The scope element contains
   mandatory DAV:href and DAV:depth elements.

   DAV:href indicates the URI reference (<a href="rfc3986.html#section-4.1">[RFC3986], Section&nbsp;4.1</a>) to use
   as a scope.

   When the scope is a collection, if DAV:depth is "0", the search
   includes only the collection.  When it is "1", the search includes
   the collection and its immediate children.  When it is "infinity", it
   includes the collection and all its progeny.

   When the scope is not a collection, the depth is ignored and the
   search applies just to the resource itself.

   If the server supports WebDAV Redirect Reference Resources
   ([<a href="rfc4437.html" title="&quot;Web Distributed Authoring and Versioning (WebDAV) Redirect Reference Resources&quot;">RFC4437</a>]) and the search scope contains a redirect reference
   resource, then it applies only to that resource, not to its target.

   When the child element DAV:include-versions is present, the search
   scope will include all versions (see <a href="rfc3253.html#section-2.2.1">[RFC3253], Section&nbsp;2.2.1</a>) of all
   version-controlled resources in scope.  Servers that do support
   versioning but do not support the DAV:include-versions feature MUST
   signal an error if it is used in a query (see <a href="#section-2.2.2">Section 2.2.2</a>,
   precondition DAV:search-scope-valid).

<span class="h4"><a class="selflink" name="section-5.4.1" href="#section-5.4.1">5.4.1</a>.  Relationship to the Request-URI</span>

   If the DAV:scope element is a URI (<a href="rfc3986.html#section-3">[RFC3986], Section&nbsp;3</a>), the scope
   is exactly that URI.

   If the DAV:scope element is a relative reference ([<a href="rfc3986.html" title="&quot;Uniform Resource Identifier (URI): Generic Syntax&quot;">RFC3986</a>], <a href="#section-4.2">Section</a>
   <a href="#section-4.2">4.2</a>), the scope is taken to be relative to the Request-URI.




<span class="grey">Reschke, et al.             Standards Track                    [Page 23]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-24" id="page-24" href="#page-24" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h4"><a class="selflink" name="section-5.4.2" href="#section-5.4.2">5.4.2</a>.  Scope</span>

   A Scope can be an arbitrary URI reference.

   Servers, of course, may support only particular scopes.  This may
   include limitations for particular schemes such as "http:" or "ftp:"
   or certain URI namespaces.  However, WebDAV-compliant search arbiters
   minimally SHOULD support scopes that match their own URI.

<span class="h3"><a class="selflink" name="section-5.5" href="#section-5.5">5.5</a>.  DAV:where</span>

   The DAV:where element defines the search condition for inclusion of
   resources in the result set.  The value of this element is an XML
   element that defines a search operator that evaluates to one of the
   Boolean truth values TRUE, FALSE, or UNKNOWN.  The search operator
   contained by DAV:where may itself contain and evaluate additional
   search operators as operands, which in turn may contain and evaluate
   additional search operators as operands, etc., recursively.

<span class="h4"><a class="selflink" name="section-5.5.1" href="#section-5.5.1">5.5.1</a>.  Use of Three-Valued Logic in Queries</span>

   Each operator defined for use in the where clause that returns a
   Boolean value MUST evaluate to TRUE, FALSE, or UNKNOWN.  The resource
   under scan is included as a member of the result set if and only if
   the search condition evaluates to TRUE.

   Consult <a href="#appendix-A">Appendix A</a> for details on the application of three-valued
   logic in query expressions.

<span class="h4"><a class="selflink" name="section-5.5.2" href="#section-5.5.2">5.5.2</a>.  Handling Optional Operators</span>

   If a query contains an operator that is not supported by the server,
   then the server MUST respond with a 422 (Unprocessable Entity) status
   code.

<span class="h4"><a class="selflink" name="section-5.5.3" href="#section-5.5.3">5.5.3</a>.  Treatment of NULL Values</span>

   If a PROPFIND for a property value would yield a non-2xx (see <a href="rfc2616.html#section-10.2">Section</a>
   <a href="rfc2616.html#section-10.2">10.2 of [RFC2616]</a>) response for that property, then that property is
   considered NULL.

   NULL values are "less than" all other values in comparisons.

   Empty strings (zero length strings) are not NULL values.  An empty
   string is "less than" a string with length greater than zero.

   The DAV:is-defined operator is defined to test if the value of a
   property is not NULL.



<span class="grey">Reschke, et al.             Standards Track                    [Page 24]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-25" id="page-25" href="#page-25" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h4"><a class="selflink" name="section-5.5.4" href="#section-5.5.4">5.5.4</a>.  Treatment of Properties with Mixed/Element Content</span>

   Comparisons of properties that do not have simple types (text-only
   content) is out of scope for the standard operators defined for DAV:
   basicsearch and therefore is defined to be UNKNOWN (as per
   <a href="#appendix-A">Appendix A</a>).  For querying the DAV:resourcetype property, see
   <a href="#section-5.13">Section 5.13</a>.

<span class="h4"><a class="selflink" name="section-5.5.5" href="#section-5.5.5">5.5.5</a>.  Example: Testing for Equality</span>

   The example shows a single operator (DAV:eq) applied in the criteria.

   &lt;d:where xmlns:d='DAV:'&gt;
     &lt;d:eq&gt;
       &lt;d:prop&gt;
         &lt;d:getcontentlength/&gt;
       &lt;/d:prop&gt;
       &lt;d:literal&gt;100&lt;/d:literal&gt;
     &lt;/d:eq&gt;
   &lt;/d:where&gt;

<span class="h4"><a class="selflink" name="section-5.5.6" href="#section-5.5.6">5.5.6</a>.  Example: Relative Comparisons</span>

   The example shows a more complex operation involving several
   operators (DAV:and, DAV:eq, DAV:gt) applied in the criteria.  This
   DAV:where expression matches those resources of type "image/gif" over
   4K in size.

   &lt;D:where xmlns:D='DAV:'&gt;
     &lt;D:and&gt;
       &lt;D:eq&gt;
         &lt;D:prop&gt;
           &lt;D:getcontenttype/&gt;
         &lt;/D:prop&gt;
         &lt;D:literal&gt;image/gif&lt;/D:literal&gt;
       &lt;/D:eq&gt;
       &lt;D:gt&gt;
         &lt;D:prop&gt;
           &lt;D:getcontentlength/&gt;
         &lt;/D:prop&gt;
         &lt;D:literal&gt;4096&lt;/D:literal&gt;
       &lt;/D:gt&gt;
     &lt;/D:and&gt;
   &lt;/D:where&gt;







<span class="grey">Reschke, et al.             Standards Track                    [Page 25]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-26" id="page-26" href="#page-26" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="section-5.6" href="#section-5.6">5.6</a>.  DAV:orderby</span>

   The DAV:orderby element specifies the ordering of the result set.  It
   contains one or more DAV:order elements, each of which specifies a
   comparison between two items in the result set.  Informally, a
   comparison specifies a test that determines whether one resource
   appears before another in the result set.  Comparisons are applied in
   the order they occur in the DAV:orderby element, earlier comparisons
   being more significant.

   The comparisons defined here use only a single property from each
   resource, compared using the same ordering as the DAV:lt operator
   (ascending) or DAV:gt operator (descending).  If neither direction is
   specified, the default is DAV:ascending.

   In the context of the DAV:orderby element, null values are considered
   to collate before any actual (i.e., non-null) value, including
   strings of zero length (this is compatible with [<a href="#ref-SQL99" title="&quot;Database Language SQL Part 2: Foundation (SQL/Foundation)&quot;">SQL99</a>]).

   The "caseless" attribute may be used to indicate case-sensitivity for
   comparisons (<a href="#section-5.18">Section 5.18</a>).

<span class="h4"><a class="selflink" name="section-5.6.1" href="#section-5.6.1">5.6.1</a>.  Example of Sorting</span>

   This sort orders first by last name of the author and then by size,
   in descending order, so that for each author, the largest works
   appear first.

   &lt;d:orderby xmlns:d='DAV:' xmlns:r='http://example.com/ns'&gt;
     &lt;d:order&gt;
       &lt;d:prop&gt;&lt;r:lastname/&gt;&lt;/d:prop&gt;
       &lt;d:ascending/&gt;
     &lt;/d:order&gt;
     &lt;d:order&gt;
       &lt;d:prop&gt;&lt;d:getcontentlength/&gt;&lt;/d:prop&gt;
       &lt;d:descending/&gt;
     &lt;/d:order&gt;
   &lt;/d:orderby&gt;

<span class="h3"><a class="selflink" name="section-5.7" href="#section-5.7">5.7</a>.  Boolean Operators: DAV:and, DAV:or, and DAV:not</span>

   The DAV:and operator performs a logical AND operation on the
   expressions it contains.

   The DAV:or operator performs a logical OR operation on the values it
   contains.





<span class="grey">Reschke, et al.             Standards Track                    [Page 26]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-27" id="page-27" href="#page-27" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   The DAV:not operator performs a logical NOT operation on the values
   it contains.

<span class="h3"><a class="selflink" name="section-5.8" href="#section-5.8">5.8</a>.  DAV:eq</span>

   The DAV:eq operator provides simple equality matching on property
   values.

   The "caseless" attribute may be used with this element
   (<a href="#section-5.18">Section 5.18</a>).

<span class="h3"><a class="selflink" name="section-5.9" href="#section-5.9">5.9</a>.  DAV:lt, DAV:lte, DAV:gt, DAV:gte</span>

   The DAV:lt, DAV:lte, DAV:gt, and DAV:gte operators provide
   comparisons on property values, using less-than, less-than or equal,
   greater-than, and greater-than or equal, respectively.  The
   "caseless" attribute may be used with these elements (<a href="#section-5.18">Section 5.18</a>).

<span class="h3"><a class="selflink" name="section-5.10" href="#section-5.10">5.10</a>.  DAV:literal</span>

   DAV:literal allows literal values to be placed in an expression.

   White space in literal values is significant in comparisons.  For
   consistency with [<a href="rfc4918.html" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>], clients SHOULD NOT specify the attribute
   "xml:space" (Section 2.10 of [<a href="#ref-XML" title="&quot;Extensible Markup Language (XML) 1.0 (Fourth Edition)&quot;">XML</a>]) to override this behavior.

   In comparisons, the contents of DAV:literal SHOULD be treated as
   string, with the following exceptions:

   o  when operand for a comparison with a DAV:getcontentlength
      property, it SHOULD be treated as an unsigned integer value (the
      behavior for values not in this format is undefined),

   o  when operand for a comparison with a DAV:creationdate or DAV:
      getlastmodified property, it SHOULD be treated as a date value in
      the ISO-8601 subset defined for the DAV:creationdate property (see
      <a href="rfc4918.html#section-15.1">Section&nbsp;15.1 of [RFC4918]</a>; the behavior of values not in this
      format is undefined),

   o  when operand for a comparison with a property for which the type
      is known and when compatible with that type, it MAY be treated
      according to this type.









<span class="grey">Reschke, et al.             Standards Track                    [Page 27]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-28" id="page-28" href="#page-28" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="section-5.11" href="#section-5.11">5.11</a>.  DAV:typed-literal (Optional)</span>

   There are situations in which a client may want to force a comparison
   not to be string-based (as defined for DAV:literal).  In these cases,
   a typed comparison can be enforced by using DAV:typed-literal
   instead.

   &lt;!ELEMENT typed-literal (#PCDATA)&gt;

   The data type is specified using the xsi:type attribute defined in
   Section 2.6.1 of [<a href="#ref-XS1" title="&quot;XML Schema Part 1: Structures&quot;">XS1</a>].  If the type is not specified, it defaults to
   "xs:string".

   A server MUST reject a request using an unknown type with a status of
   422 (Unprocessable Entity).  It SHOULD reject a request if the value
   provided in DAV:typed-literal cannot be cast to the specified type.

   The comparison evaluates to UNKNOWN if the property value cannot be
   cast to the specified datatype (see [<a href="#ref-XPATHFUNC" title="&quot;XQuery 1.0 and XPath 2.0 Functions and Operators&quot;">XPATHFUNC</a>], Section 17).

<span class="h4"><a class="selflink" name="section-5.11.1" href="#section-5.11.1">5.11.1</a>.  Example for Typed Numerical Comparison</span>

   Consider a set of resources with the dead property "edits" in the
   namespace "http://ns.example.org":

                         +-----+----------------+
                         | URI | property value |
                         +-----+----------------+
                         | /a  | "-1"           |
                         | /b  | "01"           |
                         | /c  | "3"            |
                         | /d  | "test"         |
                         | /e  | (undefined)    |
                         +-----+----------------+

   The expression

   &lt;lt xmlns="DAV:"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
     &lt;prop&gt;&lt;edits xmlns="http://ns.example.org"/&gt;&lt;/prop&gt;
     &lt;typed-literal xsi:type="xs:integer"&gt;3&lt;/typed-literal&gt;
   &lt;/lt&gt;

   will evaluate to TRUE for the resources "/a" and "/b" (their property
   values can be parsed as type xs:integer, and the numerical comparison
   evaluates to true), to FALSE for "/c" (property value is compatible,
   but numerical comparison evaluates to false), and UNKNOWN for "/d"



<span class="grey">Reschke, et al.             Standards Track                    [Page 28]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-29" id="page-29" href="#page-29" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   and "/e" (the property either is undefined, or its value cannot be
   parsed as xs:integer).

<span class="h3"><a class="selflink" name="section-5.12" href="#section-5.12">5.12</a>.  Support for Matching xml:lang Attributes on Properties</span>

   The following two optional operators can be used to express
   conditions on the language of a property value (as expressed using
   the xml:lang attribute).

<span class="h4"><a class="selflink" name="section-5.12.1" href="#section-5.12.1">5.12.1</a>.  DAV:language-defined (Optional)</span>

   &lt;!ELEMENT language-defined (prop)&gt;

   This operator evaluates to TRUE if the language for the value of the
   given property is known, FALSE if it isn't, and UNKNOWN if the
   property itself is not defined.

<span class="h4"><a class="selflink" name="section-5.12.2" href="#section-5.12.2">5.12.2</a>.  DAV:language-matches (Optional)</span>

   &lt;!ELEMENT language-matches (prop, literal)&gt;

   This operator evaluates to TRUE if the language for the value of the
   given property is known and matches the language name given in the
   &lt;literal&gt; element, FALSE if it doesn't match, and UNKNOWN if the
   property itself is not defined.

   Languages are considered to match if they are the same, or if the
   language of the property value is a sublanguage of the language
   specified in the &lt;literal&gt; element (see Section 4.3 of [<a href="#ref-XPATH" title="&quot;XML Path Language (XPath) Version 1.0&quot;">XPATH</a>], "lang
   function").

<span class="h4"><a class="selflink" name="section-5.12.3" href="#section-5.12.3">5.12.3</a>.  Example of Language-Aware Matching</span>

   The expression below will evaluate to TRUE if the property "foobar"
   exists and its language is either unknown, English, or a sublanguage
   of English.

   &lt;or xmlns="DAV:"&gt;
     &lt;not&gt;
       &lt;language-defined&gt;
         &lt;prop&gt;&lt;foobar/&gt;&lt;/prop&gt;
       &lt;/language-defined&gt;
     &lt;/not&gt;
     &lt;language-matches&gt;
       &lt;prop&gt;&lt;foobar/&gt;&lt;/prop&gt;
       &lt;literal&gt;en&lt;/literal&gt;
     &lt;/language-matches&gt;
   &lt;/or&gt;



<span class="grey">Reschke, et al.             Standards Track                    [Page 29]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-30" id="page-30" href="#page-30" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="section-5.13" href="#section-5.13">5.13</a>.  DAV:is-collection</span>

   The DAV:is-collection operator allows clients to determine whether a
   resource is a collection (that is, whether its DAV:resourcetype
   element contains the element DAV:collection).

   Rationale: This operator is provided in lieu of defining generic
   structure queries, which would suffice for this and for many more
   powerful queries, but seems inappropriate to standardize at this
   time.

<span class="h4"><a class="selflink" name="section-5.13.1" href="#section-5.13.1">5.13.1</a>.  Example of DAV:is-collection</span>

   This example shows a search criterion that picks out all, and only,
   the resources in the scope that are collections.

   &lt;where xmlns="DAV:"&gt;
     &lt;is-collection/&gt;
   &lt;/where&gt;

<span class="h3"><a class="selflink" name="section-5.14" href="#section-5.14">5.14</a>.  DAV:is-defined</span>

   The DAV:is-defined operator allows clients to determine whether a
   property is defined on a resource.  The meaning of "defined on a
   resource" is found in <a href="#section-5.5.3">Section 5.5.3</a>.

   Example:

   &lt;d:is-defined xmlns:d='DAV:' xmlns:x='http://example.com/ns'&gt;
     &lt;d:prop&gt;&lt;x:someprop/&gt;&lt;/d:prop&gt;
   &lt;/d:is-defined&gt;

<span class="h3"><a class="selflink" name="section-5.15" href="#section-5.15">5.15</a>.  DAV:like</span>

   The DAV:like is an optional operator intended to give simple
   wildcard-based pattern matching ability to clients.

   The operator takes two arguments.

   The first argument is a DAV:prop element identifying a single
   property to evaluate.

   The second argument is a DAV:literal element that gives the pattern
   matching string.







<span class="grey">Reschke, et al.             Standards Track                    [Page 30]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-31" id="page-31" href="#page-31" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h4"><a class="selflink" name="section-5.15.1" href="#section-5.15.1">5.15.1</a>.  Syntax for the Literal Pattern</span>

   pattern       = [wildcard] 0*( text [wildcard] )

   wildcard      = exactlyone / zeroormore
   text          = 1*( character / escapeseq )

   exactlyone    = "_"
   zeroormore    = "%"
   escapechar    = "\"
   escapeseq     = escapechar ( exactlyone / zeroormore / escapechar )

   ; character: see [<a href="#ref-XML" title="&quot;Extensible Markup Language (XML) 1.0 (Fourth Edition)&quot;">XML</a>], Section 2.2, minus wildcard / escapechar
   character     = HTAB / LF / CR ; whitespace
   character     =/ %x20-24 / %x26-5B / %x5D-5E / %x60-D7FF
   character     =/ %xE000-FFFD / %x10000-10FFFF

   (Note that the ABNF above is defined in terms of Unicode code points
   ([<a href="#ref-UNICODE5" title="&quot;The Unicode Standard - Version 5.0&quot;">UNICODE5</a>]); when a query is transmitted as an XML document over
   WebDAV, these characters are typically encoded in UTF-8 or UTF-16.)

   The value for the literal is composed of wildcards separated by
   segments of text.  Wildcards may begin or end the literal.

   The "_" wildcard matches exactly one character.

   The "%" wildcard matches zero or more characters.

   The "\" character is an escape sequence so that the literal can
   include "_" and "%".  To include the "\" character in the pattern,
   the escape sequence "\\" is used.

<span class="h4"><a class="selflink" name="section-5.15.2" href="#section-5.15.2">5.15.2</a>.  Example of DAV:like</span>

   This example shows how a client might use DAV:like to identify those
   resources whose content type was a subtype of image.

   &lt;D:where xmlns:D='DAV:'&gt;
     &lt;D:like caseless="yes"&gt;
       &lt;D:prop&gt;&lt;D:getcontenttype/&gt;&lt;/D:prop&gt;
       &lt;D:literal&gt;image/%&lt;/D:literal&gt;
     &lt;/D:like&gt;
   &lt;/D:where&gt;

<span class="h3"><a class="selflink" name="section-5.16" href="#section-5.16">5.16</a>.  DAV:contains</span>

   The DAV:contains operator is an optional operator that provides
   content-based search capability.  This operator implicitly searches



<span class="grey">Reschke, et al.             Standards Track                    [Page 31]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-32" id="page-32" href="#page-32" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   against the text content of a resource, not against the content of
   properties.  The DAV:contains operator is intentionally not overly
   constrained, in order to allow the server to do the best job it can
   in performing the search.

   The DAV:contains operator evaluates to a Boolean value.  It evaluates
   to TRUE if the content of the resource satisfies the search.
   Otherwise, it evaluates to FALSE.

   Within the DAV:contains XML element, the client provides a phrase: a
   single word or whitespace delimited sequence of words.  Servers MAY
   ignore punctuation in a phrase.  Case-sensitivity is at the
   discretion of the server implementation.

   The following non-exhaustive list enumerates things that may or may
   not be done as part of the search: Phonetic methods such as "soundex"
   may or may not be used.  Word stemming may or may not be performed.
   Thesaurus expansion of words may or may not be done.  Right or left
   truncation may or may not be performed.  The search may be case
   insensitive or case sensitive.  The word or words may or may not be
   interpreted as names.  Multiple words may or may not be required to
   be adjacent or "near" each other.  Multiple words may or may not be
   required to occur in the same order.  Multiple words may or may not
   be treated as a phrase.  The search may or may not be interpreted as
   a request to find documents "similar" to the string operand.
   Character canonicalization such as that done by the Unicode collation
   algorithm may or may not be applied.

<span class="h4"><a class="selflink" name="section-5.16.1" href="#section-5.16.1">5.16.1</a>.  Result Scoring (DAV:score Element)</span>

   Servers SHOULD indicate scores for the DAV:contains condition by
   adding a DAV:score XML element to the DAV:response element.  Its
   value is defined only in the context of a particular query result.
   The value is a string representing the score, an integer from zero to
   10000 inclusive, where a higher value indicates a higher score (e.g.,
   more relevant).

   Modified DTD fragment for DAV:propstat:

   &lt;!ELEMENT response (href, ((href*, status)|(propstat+)),
                       responsedescription?, score?) &gt;
   &lt;!ELEMENT score    (#PCDATA) &gt;

   Clients should note that, in general, it is not meaningful to compare
   the numeric values of scores from two different query results unless
   both were executed by the same underlying search system on the same
   collection of resources.




<span class="grey">Reschke, et al.             Standards Track                    [Page 32]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-33" id="page-33" href="#page-33" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h4"><a class="selflink" name="section-5.16.2" href="#section-5.16.2">5.16.2</a>.  Ordering by Score</span>

   To order search results by their score, the DAV:score element may be
   added as child to the DAV:orderby element (in place of a DAV:prop
   element).

<span class="h4"><a class="selflink" name="section-5.16.3" href="#section-5.16.3">5.16.3</a>.  Examples</span>

   The example below shows a search for the phrase "Peter Forsberg".

   Depending on its support for content-based searching, a server MAY
   treat this as a search for documents that contain the words "Peter"
   and "Forsberg".

   &lt;D:where xmlns:D='DAV:'&gt;
     &lt;D:contains&gt;Peter Forsberg&lt;/D:contains&gt;
   &lt;/D:where&gt;

   The example below shows a search for resources that contain "Peter"
   and "Forsberg".

   &lt;D:where xmlns:D='DAV:'&gt;
     &lt;D:and&gt;
       &lt;D:contains&gt;Peter&lt;/D:contains&gt;
       &lt;D:contains&gt;Forsberg&lt;/D:contains&gt;
     &lt;/D:and&gt;
   &lt;/D:where&gt;

<span class="h3"><a class="selflink" name="section-5.17" href="#section-5.17">5.17</a>.  Limiting the Result Set</span>

   &lt;!ELEMENT limit (nresults) &gt;
   &lt;!ELEMENT nresults (#PCDATA)&gt; &lt;!-- only digits --&gt;

   The DAV:limit XML element contains requested limits from the client
   to limit the size of the reply or amount of effort expended by the
   server.  The DAV:nresults XML element contains a requested maximum
   number of DAV:response elements to be returned in the response body.
   The server MAY disregard this limit.  The value of this element is an
   unsigned integer.

<span class="h4"><a class="selflink" name="section-5.17.1" href="#section-5.17.1">5.17.1</a>.  Relationship to Result Ordering</span>

   If the result set is both limited by DAV:limit and ordered according
   to DAV:orderby, the results that are included in the response
   document SHOULD be those that order highest.






<span class="grey">Reschke, et al.             Standards Track                    [Page 33]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-34" id="page-34" href="#page-34" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="section-5.18" href="#section-5.18">5.18</a>.  The 'caseless' XML Attribute</span>

   The "caseless" attribute allows clients to specify caseless matching
   behavior instead of character-by-character matching for DAV:
   basicsearch operators.

   The possible values for "caseless" are "yes" or "no".  The default
   value is server-specified.  Caseless matching SHOULD be implemented
   as defined in <a href="#section-5.18">Section 5.18</a> of the Unicode Standard ([<a href="#ref-UNICODE5" title="&quot;The Unicode Standard - Version 5.0&quot;">UNICODE5</a>]).

   Support for the "caseless" attribute is optional.  A server should
   respond with a status of 422 if it is used but cannot be supported.

<span class="h3"><a class="selflink" name="section-5.19" href="#section-5.19">5.19</a>.  Query Schema for DAV:basicsearch</span>

   The DAV:basicsearch grammar defines a search criteria that is a
   Boolean-valued expression, and allows for an arbitrary set of
   properties to be included in the result record.  The result set may
   be sorted on a set of property values.  Accordingly, the DTD for
   schema discovery for this grammar allows the server to express:

   1.  the set of properties that may be either searched, returned, or
       used to sort, and a hint about the data type of such properties.

   2.  the set of optional operators defined by the resource.

<span class="h4"><a class="selflink" name="section-5.19.1" href="#section-5.19.1">5.19.1</a>.  DTD for DAV:basicsearch QSD</span>

   &lt;!ELEMENT basicsearchschema  (properties, operators)&gt;
   &lt;!ELEMENT any-other-property EMPTY&gt;
   &lt;!ELEMENT properties         (propdesc*)&gt;
   &lt;!ELEMENT propdesc           ((prop|any-other-property), datatype?,
                                 searchable?, selectable?, sortable?,
                                 caseless?)&gt;
   &lt;!ELEMENT operators          (opdesc*)&gt;
   &lt;!ELEMENT opdesc             ANY&gt;
   &lt;!ATTLIST opdesc             allow-pcdata (yes|no) #IMPLIED&gt;
   &lt;!ELEMENT operand-literal    EMPTY&gt;
   &lt;!ELEMENT operand-typed-literal EMPTY&gt;
   &lt;!ELEMENT operand-property   EMPTY&gt;

   The DAV:properties element holds a list of descriptions of
   properties.

   The DAV:operators element describes the optional operators that may
   be used in a DAV:where element.





<span class="grey">Reschke, et al.             Standards Track                    [Page 34]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-35" id="page-35" href="#page-35" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h4"><a class="selflink" name="section-5.19.2" href="#section-5.19.2">5.19.2</a>.  DAV:propdesc Element</span>

   Each instance of a DAV:propdesc element describes the property or
   properties in the DAV:prop element it contains.  All subsequent
   elements are descriptions that apply to those properties.  All
   descriptions are optional and may appear in any order.  Servers
   SHOULD support all the descriptions defined here, and MAY define
   others.

   DASL defines five descriptions.  The first, DAV:datatype, provides a
   hint about the type of the property value, and may be useful to a
   user interface prompting for a value.  The remaining four (DAV:
   searchable, DAV:selectable, DAV:sortable, and DAV:caseless) identify
   portions of the query (DAV:where, DAV:select, and DAV:orderby,
   respectively).  If a property has a description for a section, then
   the server MUST allow the property to be used in that section.  These
   descriptions are optional.  If a property does not have such a
   description, or is not described at all, then the server MAY still
   allow the property to be used in the corresponding section.

<span class="h5"><a class="selflink" name="section-5.19.2.1" href="#section-5.19.2.1">5.19.2.1</a>.  DAV:any-other-property</span>

   This element can be used in place of DAV:prop to describe properties
   of WebDAV properties not mentioned in any other DAV:prop element.
   For instance, this can be used to indicate that all other properties
   are searchable and selectable without giving details about their
   types (a typical scenario for dead properties).

<span class="h4"><a class="selflink" name="section-5.19.3" href="#section-5.19.3">5.19.3</a>.  The DAV:datatype Property Description</span>

   The DAV:datatype element contains a single XML element that provides
   a hint about the domain of the property, which may be useful to a
   user interface prompting for a value to be used in a query.  Data
   types are identified by an element name.  Where appropriate, a server
   SHOULD use the simple data types defined in [<a href="#ref-XS2" title="&quot;XML Schema Part 2: Datatypes Second Edition&quot;">XS2</a>].

   &lt;!ELEMENT datatype ANY &gt;














<span class="grey">Reschke, et al.             Standards Track                    [Page 35]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-36" id="page-36" href="#page-36" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   Examples from [<a href="#ref-XS2" title="&quot;XML Schema Part 2: Datatypes Second Edition&quot;">XS2</a>], Section 3:

                 +----------------+---------------------+
                 | Qualified name | Example             |
                 +----------------+---------------------+
                 | xs:boolean     | true, false, 1, 0   |
                 | xs:string      | Foobar              |
                 | xs:dateTime    | 1994-11-05T08:15:5Z |
                 | xs:float       | .314159265358979E+1 |
                 | xs:integer     | -259, 23            |
                 +----------------+---------------------+

   If the data type of a property is not given, then the data type
   defaults to xs:string.

<span class="h4"><a class="selflink" name="section-5.19.4" href="#section-5.19.4">5.19.4</a>.  The DAV:searchable Property Description</span>

   &lt;!ELEMENT searchable EMPTY&gt;

   If this element is present, then the server MUST allow this property
   to appear within a DAV:where element where an operator allows a
   property.  Allowing a search does not mean that the property is
   guaranteed to be defined on every resource in the scope, it only
   indicates the server's willingness to check.

<span class="h4"><a class="selflink" name="section-5.19.5" href="#section-5.19.5">5.19.5</a>.  The DAV:selectable Property Description</span>

   &lt;!ELEMENT selectable EMPTY&gt;

   This element indicates that the property may appear in the DAV:select
   element.

<span class="h4"><a class="selflink" name="section-5.19.6" href="#section-5.19.6">5.19.6</a>.  The DAV:sortable Property Description</span>

   This element indicates that the property may appear in the DAV:
   orderby element.

   &lt;!ELEMENT sortable EMPTY&gt;

<span class="h4"><a class="selflink" name="section-5.19.7" href="#section-5.19.7">5.19.7</a>.  The DAV:caseless Property Description</span>

   This element only applies to properties whose data type is "xs:
   string" and derived data types as per the DAV:datatype property
   description.  Its presence indicates that comparisons performed for
   searches, and the comparisons for ordering results on the string
   property will be caseless (the default is character by character).

   &lt;!ELEMENT caseless EMPTY&gt;



<span class="grey">Reschke, et al.             Standards Track                    [Page 36]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-37" id="page-37" href="#page-37" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h4"><a class="selflink" name="section-5.19.8" href="#section-5.19.8">5.19.8</a>.  The DAV:operators XML Element</span>

   The DAV:operators element describes every optional operator supported
   in a query.  (Mandatory operators are not listed since they are
   mandatory and permit no variation in syntax.)  All optional operators
   that are supported MUST be listed in the DAV:operators element.

   The listing for an operator, contained in an DAV:opdesc element,
   consists of the operator (as an empty element), followed by one
   element for each operand.  The operand MUST be either DAV:operand-
   property, DAV:operand-literal, or DAV:operand-typed-literal, which
   indicate that the operand in the corresponding position is a
   property, a literal value, or a typed literal value, respectively.
   If an operator is polymorphic (allows more than one operand syntax)
   then each permitted syntax MUST be listed separately.

   The DAV:opdesc element MAY have a "allow-pcdata" attribute
   (defaulting to "no").  A value of "yes" indicates that the operator
   can contain character data, as it is the case with DAV:contains (see
   <a href="#section-5.16">Section 5.16</a>).  Definition of additional operators using this format
   is NOT RECOMMENDED.

   &lt;operators xmlns='DAV:'&gt;
     &lt;opdesc&gt;
       &lt;like/&gt;&lt;operand-property/&gt;&lt;operand-literal/&gt;
     &lt;/opdesc&gt;
   &lt;/operators&gt;
























<span class="grey">Reschke, et al.             Standards Track                    [Page 37]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-38" id="page-38" href="#page-38" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h4"><a class="selflink" name="section-5.19.9" href="#section-5.19.9">5.19.9</a>.  Example of Query Schema for DAV:basicsearch</span>

   &lt;D:basicsearchschema xmlns:D="DAV:"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
     &lt;D:properties&gt;
       &lt;D:propdesc&gt;
         &lt;D:prop&gt;&lt;D:getcontentlength/&gt;&lt;/D:prop&gt;
         &lt;D:datatype&gt;&lt;xs:nonNegativeInteger/&gt;&lt;/D:datatype&gt;
         &lt;D:searchable/&gt;&lt;D:selectable/&gt;&lt;D:sortable/&gt;
       &lt;/D:propdesc&gt;
       &lt;D:propdesc&gt;
         &lt;D:prop&gt;&lt;D:getcontenttype/&gt;&lt;D:displayname/&gt;&lt;/D:prop&gt;
         &lt;D:searchable/&gt;&lt;D:selectable/&gt;&lt;D:sortable/&gt;
       &lt;/D:propdesc&gt;
       &lt;D:propdesc&gt;
         &lt;D:prop&gt;&lt;fstop xmlns="http://ns.example.org"/&gt;&lt;/D:prop&gt;
         &lt;D:selectable/&gt;
       &lt;/D:propdesc&gt;
       &lt;D:propdesc&gt;
         &lt;D:any-other-property/&gt;
         &lt;D:searchable/&gt;&lt;D:selectable/&gt;
       &lt;/D:propdesc&gt;
     &lt;/D:properties&gt;
     &lt;D:operators&gt;
       &lt;D:opdesc&gt;
         &lt;D:like/&gt;&lt;D:operand-property/&gt;&lt;D:operand-literal/&gt;
       &lt;/D:opdesc&gt;
       &lt;D:opdesc allow-pcdata="yes"&gt;
         &lt;D:contains/&gt;
       &lt;/D:opdesc&gt;
     &lt;/D:operators&gt;
   &lt;/D:basicsearchschema&gt;

   This response lists four properties.  The data type of the last three
   properties is not given, so it defaults to xs:string.  All are
   selectable, and the first three may be searched.  All but the last
   may be used in a sort.  Of the optional DAV operators, DAV:contains
   and DAV:like are supported.

      Note: The schema discovery defined here does not provide for
      discovery of supported values of the "caseless" attribute.  This
      may require that the reply also list the mandatory operators.









<span class="grey">Reschke, et al.             Standards Track                    [Page 38]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-39" id="page-39" href="#page-39" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>.  Internationalization Considerations</span>

   Properties may be language-tagged using the xml:lang attribute (see
   <a href="rfc4918.html#section-4.3">[RFC4918], Section&nbsp;4.3</a>).  The optional operators DAV:language-defined
   (<a href="#section-5.12.1">Section 5.12.1</a>) and DAV:language-matches (<a href="#section-5.12.2">Section 5.12.2</a>) allow the
   expression of conditions on the language tagging information.

<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>.  Security Considerations</span>

   This section is provided to detail issues concerning security
   implications of which DASL applications need to be aware.  All of the
   security considerations of HTTP/1.1 ([<a href="rfc2616.html" title="&quot;Hypertext Transfer Protocol -- HTTP/1.1&quot;">RFC2616</a>] and WebDAV ([<a href="rfc4918.html" title="&quot;HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)&quot;">RFC4918</a>])
   also apply to DASL.  In addition, this section will include security
   risks inherent in the search and retrieval of resource properties and
   content.

   A query MUST NOT allow clients to retrieve information that wouldn't
   have been available through the GET or PROPFIND methods in the first
   place.  In particular:

   o  Query constraints on WebDAV properties for which the client does
      not have read access need to be evaluated as if the property did
      not exist (see <a href="#section-5.5.3">Section 5.5.3</a>).

   o  Query constraints on content (as with DAV:contains, defined in
      <a href="#section-5.16">Section 5.16</a>) for which the client does not have read access need
      to be evaluated as if a GET would return a 4xx status code.

   A server should prepare for denial-of-service attacks.  For example a
   client may issue a query for which the result set is expensive to
   calculate or transmit because many resources match or must be
   evaluated.

<span class="h3"><a class="selflink" name="section-7.1" href="#section-7.1">7.1</a>.  Implications of XML External Entities</span>

   XML supports a facility known as "external entities", defined in
   Section 4.2.2 of [<a href="#ref-XML" title="&quot;Extensible Markup Language (XML) 1.0 (Fourth Edition)&quot;">XML</a>], which instruct an XML processor to retrieve
   and perform an inline include of XML located at a particular URI.  An
   external XML entity can be used to append or modify the document type
   declaration (DTD) associated with an XML document.  An external XML
   entity can also be used to include XML within the content of an XML
   document.  For non-validating XML, such as the XML used in this
   specification, including an external XML entity is not required by
   [<a href="#ref-XML" title="&quot;Extensible Markup Language (XML) 1.0 (Fourth Edition)&quot;">XML</a>].  However, [<a href="#ref-XML" title="&quot;Extensible Markup Language (XML) 1.0 (Fourth Edition)&quot;">XML</a>] does state that an XML processor may, at its
   discretion, include the external XML entity.

   External XML entities have no inherent trustworthiness and are
   subject to all the attacks that are endemic to any HTTP GET request.



<span class="grey">Reschke, et al.             Standards Track                    [Page 39]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-40" id="page-40" href="#page-40" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   Furthermore, it is possible for an external XML entity to modify the
   DTD, and hence affect the final form of an XML document, in the worst
   case significantly modifying its semantics, or exposing the XML
   processor to the security risks discussed in [<a href="rfc3023.html" title="&quot;XML Media Types&quot;">RFC3023</a>].  Therefore,
   implementers must be aware that external XML entities should be
   treated as untrustworthy.

   There is also the scalability risk that would accompany a widely
   deployed application that made use of external XML entities.  In this
   situation, it is possible that there would be significant numbers of
   requests for one external XML entity, potentially overloading any
   server that fields requests for the resource containing the external
   XML entity.

<span class="h2"><a class="selflink" name="section-8" href="#section-8">8</a>.  Scalability</span>

   Query grammars are identified by URIs.  Applications SHOULD NOT
   attempt to retrieve these URIs even if they appear to be retrievable
   (for example, those that begin with "http://").

<span class="h2"><a class="selflink" name="section-9" href="#section-9">9</a>.  IANA Considerations</span>

   This document uses the namespace defined in <a href="rfc4918.html#section-21">Section&nbsp;21 of [RFC4918]</a>
   for XML elements.

<span class="h3"><a class="selflink" name="section-9.1" href="#section-9.1">9.1</a>.  HTTP Headers</span>

   This document specifies the HTTP header listed below, which has been
   added to the permanent HTTP header registry defined in [<a href="rfc3864.html" title="&quot;Registration Procedures for Message Header Fields&quot;">RFC3864</a>].

<span class="h4"><a class="selflink" name="section-9.1.1" href="#section-9.1.1">9.1.1</a>.  DASL</span>

   Header field name:  DASL

   Applicable protocol:  http

   Status:  standard

   Author/Change controller:  IETF

   Specification document:  this specification (<a href="#section-3.2">Section 3.2</a>)










<span class="grey">Reschke, et al.             Standards Track                    [Page 40]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-41" id="page-41" href="#page-41" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h2"><a class="selflink" name="section-10" href="#section-10">10</a>.  Contributors</span>

   This document is based on prior work on the DASL protocol done by the
   WebDAV DASL working group until the year 2000 -- namely by Alan
   Babich, Jim Davis, Rick Henderson, Dale Lowry, Saveen Reddy, Surendra
   Reddy, and Judith Slein (see &lt;<a href="http://www.webdav.org/dasl/">http://www.webdav.org/dasl/</a>&gt; for the
   working group's web site,
   &lt;<a href="http://purl.org/NET/webdav/dasl-references/reqs">http://purl.org/NET/webdav/dasl-references/reqs</a>&gt; for a requirements
   document, and
   &lt;<a href="http://purl.org/NET/webdav/dasl-references/dasl-protocol-00">http://purl.org/NET/webdav/dasl-references/dasl-protocol-00</a>&gt; for an
   early version of the specification).

<span class="h2"><a class="selflink" name="section-11" href="#section-11">11</a>.  Acknowledgements</span>

   This document has benefited from thoughtful discussion by Lisa
   Dusseault, Javier Godoy, Sung Kim, Chris Newman, Elias Sinderson,
   Martin Wallmer, Keith Wannamaker, Jim Whitehead, and Kevin Wiggen.

<span class="h2"><a class="selflink" name="section-12" href="#section-12">12</a>.  References</span>

<span class="h3"><a class="selflink" name="section-12.1" href="#section-12.1">12.1</a>.  Normative References</span>

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]      Bradner, S., "Key words for use in RFCs to Indicate
                  Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a name="ref-RFC2616" id="ref-RFC2616">RFC2616</a>]      Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
                  Masinter, L., Leach, P., and T. Berners-Lee,
                  "Hypertext Transfer Protocol -- HTTP/1.1", <a href="rfc2616.html">RFC 2616</a>,
                  June 1999.

   [<a name="ref-RFC3023" id="ref-RFC3023">RFC3023</a>]      Murata, M., St. Laurent, S., and D. Kohn, "XML Media
                  Types", <a href="rfc3023.html">RFC 3023</a>, January 2001.

   [<a name="ref-RFC3253" id="ref-RFC3253">RFC3253</a>]      Clemm, G., Amsden, J., Ellison, T., Kaler, C., and J.
                  Whitehead, "Versioning Extensions to WebDAV (Web
                  Distributed Authoring and Versioning)", <a href="rfc3253.html">RFC 3253</a>,
                  March 2002.

   [<a name="ref-RFC3744" id="ref-RFC3744">RFC3744</a>]      Clemm, G., Reschke, J., Sedlar, E., and J. Whitehead,
                  "Web Distributed Authoring and Versioning (WebDAV)
                  Access Control Protocol", <a href="rfc3744.html">RFC 3744</a>, May 2004.

   [<a name="ref-RFC3986" id="ref-RFC3986">RFC3986</a>]      Berners-Lee, T., Fielding, R., and L. Masinter,
                  "Uniform Resource Identifier (URI): Generic Syntax",
                  STD 66, <a href="rfc3986.html">RFC 3986</a>, January 2005.






<span class="grey">Reschke, et al.             Standards Track                    [Page 41]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-42" id="page-42" href="#page-42" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   [<a name="ref-RFC4918" id="ref-RFC4918">RFC4918</a>]      Dusseault, L., Ed., "HTTP Extensions for Web
                  Distributed Authoring and Versioning (WebDAV)",
                  <a href="rfc4918.html">RFC 4918</a>, June 2007.

   [<a name="ref-RFC5234" id="ref-RFC5234">RFC5234</a>]      Crocker, D., Ed. and P. Overell, "Augmented BNF for
                  Syntax Specifications: ABNF", STD 68, <a href="rfc5234.html">RFC 5234</a>,
                  January 2008.

   [<a name="ref-XML" id="ref-XML">XML</a>]          Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E.,
                  and F. Yergeau, "Extensible Markup Language (XML) 1.0
                  (Fourth Edition)", W3C REC-xml-20060816, August 2006,
                  &lt;<a href="http://www.w3.org/TR/2006/REC-xml-20060816">http://www.w3.org/TR/2006/REC-xml-20060816</a>&gt;.

   [<a name="ref-XPATH" id="ref-XPATH">XPATH</a>]        Clark, J. and S. DeRose, "XML Path Language (XPath)
                  Version 1.0", W3C REC-xpath-19991116, November 1999,
                  &lt;<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">http://www.w3.org/TR/1999/REC-xpath-19991116</a>&gt;.

   [<a name="ref-XPATHFUNC" id="ref-XPATHFUNC">XPATHFUNC</a>]    Malhotra, A., Melton, J., and N. Walsh, "XQuery 1.0
                  and XPath 2.0 Functions and Operators", W3C REC-xpath-
                  functions-20070123, January 2007, &lt;<a href="http://www.w3.org/TR/2007/REC-xpath-functions-20070123/">http://www.w3.org/</a>
                  <a href="http://www.w3.org/TR/2007/REC-xpath-functions-20070123/">TR/2007/REC-xpath-functions-20070123/</a>&gt;.

   [<a name="ref-XS1" id="ref-XS1">XS1</a>]          Thompson, H., Beech, D., Maloney, M., Mendelsohn, N.,
                  and World Wide Web Consortium, "XML Schema Part 1:
                  Structures", W3C REC-xmlschema-1-20041028,
                  October 2004,
                  &lt;<a href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/</a>&gt;.

   [<a name="ref-XS2" id="ref-XS2">XS2</a>]          Biron, P., Malhotra, A., and World Wide Web
                  Consortium, "XML Schema Part 2: Datatypes Second
                  Edition", W3C REC-xmlschema-2-20041028, October 2004,
                  &lt;<a href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-2-20041028/</a>&gt;.

<span class="h3"><a class="selflink" name="section-12.2" href="#section-12.2">12.2</a>.    Informative References</span>

   [<a name="ref-BCP47" id="ref-BCP47">BCP47</a>]        Phillips, A. and M. Davis, "Matching of Language
                  Tags", <a href="https://tools.ietf.org/html/bcp47">BCP 47</a>, <a href="rfc4647.html">RFC 4647</a>, September 2006.

   [<a name="ref-RFC3864" id="ref-RFC3864">RFC3864</a>]      Klyne, G., Nottingham, M., and J. Mogul, "Registration
                  Procedures for Message Header Fields", <a href="https://tools.ietf.org/html/bcp90">BCP 90</a>,
                  <a href="rfc3864.html">RFC 3864</a>, September 2004.

   [<a name="ref-RFC4437" id="ref-RFC4437">RFC4437</a>]      Whitehead, J., Clemm, G., and J. Reschke, Ed., "Web
                  Distributed Authoring and Versioning (WebDAV) Redirect
                  Reference Resources", <a href="rfc4437.html">RFC 4437</a>, March 2006.






<span class="grey">Reschke, et al.             Standards Track                    [Page 42]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-43" id="page-43" href="#page-43" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   [<a name="ref-RFC4790" id="ref-RFC4790">RFC4790</a>]      Newman, C., Duerst, M., and A. Gulbrandsen, "Internet
                  Application Protocol Collation Registry", <a href="rfc4790.html">RFC 4790</a>,
                  March 2007.

   [<a name="ref-SQL99" id="ref-SQL99">SQL99</a>]        Milton, J., "Database Language SQL Part 2:  Foundation
                  (SQL/Foundation)", ISO ISO/IEC 9075-2:1999 (E),
                  July 1999.

   [<a name="ref-UNICODE5" id="ref-UNICODE5">UNICODE5</a>]     The Unicode Consortium, "The Unicode Standard -
                  Version 5.0", Addison-Wesley , November 2006,
                  &lt;<a href="http://www.unicode.org/versions/Unicode5.0.0/">http://www.unicode.org/versions/Unicode5.0.0/</a>&gt;.

                  ISBN 0321480910 [<a href="#ref-1">1</a>]

   [<a name="ref-WEBDAV-BIND" id="ref-WEBDAV-BIND">WEBDAV-BIND</a>]  Clemm, G., Crawford, J., Reschke, J., Ed., and J.
                  Whitehead, "Binding Extensions to Web Distributed
                  Authoring and Versioning (WebDAV)", October 2008.

URIs

   [<a name="ref-1" id="ref-1">1</a>]  &lt;urn:isbn:0321480910&gt;






























<span class="grey">Reschke, et al.             Standards Track                    [Page 43]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-44" id="page-44" href="#page-44" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h2"><a class="selflink" name="appendix-A" href="#appendix-A">Appendix A</a>.  Three-Valued Logic in DAV:basicsearch</span>

   ANSI standard three-valued logic is used when evaluating the search
   condition (as defined in the ANSI standard SQL specifications, for
   example, in ANSI X3.135-1992, <a href="#section-8.12">Section 8.12</a>, pp. 188-189, <a href="#section-8.2">Section 8.2</a>,
   p. 169, General Rule 1)a), etc.).

   ANSI standard three-valued logic is undoubtedly the most widely
   practiced method of dealing with the issues of properties in the
   search condition not having a value (e.g., being null or not defined)
   for the resource under scan, and with undefined expressions in the
   search condition (e.g., division by zero, etc.).  Three valued logic
   works as follows.

   Undefined expressions are expressions for which the value of the
   expression is not defined.  Undefined expressions are a completely
   separate concept from the truth value UNKNOWN, which is, in fact,
   well defined.  Property names and literal constants are considered
   expressions for purposes of this section.  If a property in the
   current resource under scan has not been set to a value, then the
   value of that property is undefined for the resource under scan.
   DASL 1.0 has no arithmetic division operator, but if it did, division
   by zero would be an undefined arithmetic expression.

   If any subpart of an arithmetic, string, or datetime subexpression is
   undefined, the whole arithmetic, string, or datetime subexpression is
   undefined.

   There are no manifest constants to explicitly represent undefined
   number, string, or datetime values.

   Since a Boolean value is ultimately returned by the search condition,
   arithmetic, string, and datetime expressions are always arguments to
   other operators.  Examples of operators that convert arithmetic,
   string, and datetime expressions to Boolean values are the six
   relational operators ("greater than", "less than", "equals", etc.).
   If either or both operands of a relational operator have undefined
   values, then the relational operator evaluates to UNKNOWN.
   Otherwise, the relational operator evaluates to TRUE or FALSE,
   depending upon the outcome of the comparison.

   The Boolean operators DAV:and, DAV:or, and DAV:not are evaluated
   according to the following rules:

   not UNKNOWN = UNKNOWN

   UNKNOWN and TRUE = UNKNOWN




<span class="grey">Reschke, et al.             Standards Track                    [Page 44]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-45" id="page-45" href="#page-45" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   UNKNOWN and FALSE = FALSE

   UNKNOWN and UNKNOWN = UNKNOWN

   UNKNOWN or TRUE = TRUE

   UNKNOWN or FALSE = UNKNOWN

   UNKNOWN or UNKNOWN = UNKNOWN

<span class="h2"><a class="selflink" name="appendix-B" href="#appendix-B">Appendix B</a>.  Candidates for Future Protocol Extensions</span>

   This section summarizes issues that have been raised during the
   development of this specification, but for which no resolution could
   be found with the constraints in place.  Future revisions of this
   specification should revisit these issues, though.

<span class="h3"><a class="selflink" name="appendix-B.1" href="#appendix-B.1">B.1</a>.  Collation Support</span>

   Matching and sorting of textual data relies on collations.  With
   respect to WebDAV SEARCH, a combination of various design approaches
   could be used:

   o  Require server support for specific collations.

   o  Require that the server can advertise which collations it
      supports.

   o  Allow a client to select the collation to be used.

   In practice, the current implementations of WebDAV SEARCH usually
   rely on backends they do not control, and for which collation
   information may not be available.  To make things worse,
   implementations of the DAV:basicsearch grammar frequently need to
   combine data from multiple underlying stores (such as properties and
   full text content), and thus collation support may vary based on the
   operator or property.

   Another open issue is what collation formalism to support.  At the
   time of this writing, the two specifications below seem to provide
   the necessary framework and thus may be the base for future work on
   collation support in WebDAV SEARCH:

   1.  "Internet Application Protocol Collation Registry" ([<a href="rfc4790.html" title="&quot;Internet Application Protocol Collation Registry&quot;">RFC4790</a>]).

   2.  "XQuery 1.0 and XPath 2.0 Functions and Operators" ([<a href="#ref-XPATHFUNC" title="&quot;XQuery 1.0 and XPath 2.0 Functions and Operators&quot;">XPATHFUNC</a>],
       Section 7.3.1).




<span class="grey">Reschke, et al.             Standards Track                    [Page 45]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-46" id="page-46" href="#page-46" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


<span class="h3"><a class="selflink" name="appendix-B.2" href="#appendix-B.2">B.2</a>.  Count</span>

   DAV:basicsearch does not allow a request that returns the count of
   matching resources.

   A protocol extension would need to extend DAV:select, and also modify
   the DAV:multistatus response format.

<span class="h3"><a class="selflink" name="appendix-B.3" href="#appendix-B.3">B.3</a>.  Diagnostics for Unsupported Queries</span>

   There are many reasons why a given query may not be supported by a
   server.  Query Schema Discovery (<a href="#section-4">Section 4</a>) can be used to discover
   some constraints, but not all.

   Future revisions should consider the introduction of specific
   condition codes (<a href="rfc4918.html#section-16">[RFC4918], Section&nbsp;16</a>) to these situations.

<span class="h3"><a class="selflink" name="appendix-B.4" href="#appendix-B.4">B.4</a>.  Language Matching</span>

   <a href="#section-5.12.2">Section 5.12.2</a> defines language matching in terms of the XPath "lang"
   function ([<a href="#ref-XPATH" title="&quot;XML Path Language (XPath) Version 1.0&quot;">XPATH</a>], Section 4.3).  Future revisions should consider
   building on [<a href="#ref-BCP47" title="&quot;Matching of Language Tags&quot;">BCP47</a>] instead.

<span class="h3"><a class="selflink" name="appendix-B.5" href="#appendix-B.5">B.5</a>.  Matching Media Types</span>

   Matching media types using the DAV:getcontenttype property and the
   DAV:like operator is hard due to DAV:getcontenttype also allowing
   parameters.  A new operator specifically designed for the purpose of
   matching media types probably would simplify things a lot.  See &lt;http
   ://lists.w3.org/Archives/Public/www-webdav-dasl/2003OctDec/0109.html&gt;
   for a specific proposal.

<span class="h3"><a class="selflink" name="appendix-B.6" href="#appendix-B.6">B.6</a>.  Query by Name</span>

   DAV:basicsearch operates on the properties (and optionally the
   contents) of resources, and thus doesn't really allow matching on
   parts of the resource's URI.  See &lt;<a href="http://lists.w3.org/Archives/Public/www-webdav-dasl/2003OctDec/0100.html">http://lists.w3.org/Archives/</a>
   <a href="http://lists.w3.org/Archives/Public/www-webdav-dasl/2003OctDec/0100.html">Public/www-webdav-dasl/2003OctDec/0100.html</a>&gt; for a proposed extension
   covering this use case.

<span class="h3"><a class="selflink" name="appendix-B.7" href="#appendix-B.7">B.7</a>.  Result Paging</span>

   A frequently discussed feature is the ability to specifically request
   the "next" set of results, when either the server decided to truncate
   the result, or the client explicitly asked for a limited set (for
   instance, using the DAV:limit element defined in <a href="#section-5.17">Section 5.17</a>).





<span class="grey">Reschke, et al.             Standards Track                    [Page 46]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-47" id="page-47" href="#page-47" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


   In this case, it would be desirable if the server could keep the full
   query result, and provide a new URI identifying a separate result
   resource, allowing the client to retrieve additional data through GET
   requests, and remove the result through a DELETE request.

<span class="h3"><a class="selflink" name="appendix-B.8" href="#appendix-B.8">B.8</a>.  Search Scope Discovery</span>

   Given a Search Arbiter resource, there's currently no way to discover
   programmatically the supported sets of search scopes.  Future
   revisions of this specification could specify a scope discovery
   mechanism, similar to the Query Schema Discovery defined in
   <a href="#section-4">Section 4</a>.

Index

   C
      caseless attribute  26-27, 34
      Condition Names
         DAV:search-grammar-discovery-supported (pre)  9
         DAV:search-grammar-supported (pre)  9
         DAV:search-multiple-scope-supported (pre)  9
         DAV:search-scope-valid (pre)  9
      Criteria  5

   D
      DAV:and  26
      DAV:ascending  26
      DAV:contains  31
      DAV:depth  23
      DAV:descending  26
      DAV:eq  27
         caseless attribute  27
      DAV:from  23
      DAV:gt  27
      DAV:gte  27
      DAV:include-versions  23
      DAV:is-collection  30
      DAV:is-defined  30
      DAV:language-defined  29
      DAV:language-matches  29
      DAV:like  30
      DAV:limit  33
      DAV:literal  27
      DAV:lt  27
      DAV:lte  27
      DAV:not  26
      DAV:nresults  33
      DAV:or  26



<span class="grey">Reschke, et al.             Standards Track                    [Page 47]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-48" id="page-48" href="#page-48" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


      DAV:orderby  26
      DAV:scope  23
      DAV:score  32
         relationship to DAV:orderby  33
      DAV:search-grammar-discovery-supported precondition  9
      DAV:search-grammar-supported precondition  9
      DAV:search-multiple-scope-supported precondition  9
      DAV:search-scope-valid precondition  9
      DAV:select  23
      DAV:supported-query-grammar-set property  14
      DAV:typed-literal  28
      DAV:where  24

   M
      Methods
         SEARCH  7

   O
      OPTIONS method  13
         DASL response header  14

   P
      Properties
         DAV:supported-query-grammar-set  14

   Q
      Query  5
      Query Grammar  5
      Query Grammar Discovery  13
         using live property  13
         using OPTIONS  13
      Query Schema  5

   R
      Result  5
      Result Record  5
      Result Record Definition  5
      Result Set  5
      Result Set Truncation
         Example  10

   S
      Scope  6
      Search Arbiter  6
      SEARCH method  7
      Search Modifier  6
      Sort Specification  6




<span class="grey">Reschke, et al.             Standards Track                    [Page 48]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-49" id="page-49" href="#page-49" class="invisible"> </a>
<span class="grey"><a href="rfc5323.html">RFC 5323</a>                     WebDAV SEARCH                 November 2008</span>


Authors' Addresses

   Julian F. Reschke (editor)
   greenbytes GmbH
   Hafenweg 16
   Muenster, NW  48155
   Germany

   Phone: +49 251 2807760
   EMail: julian.reschke@greenbytes.de
   URI:   <a href="http://greenbytes.de/tech/webdav/">http://greenbytes.de/tech/webdav/</a>


   Surendra Reddy
   Mitrix, Inc.
   303 Twin Dolphin Drive, Suite 600-37
   Redwood City, CA  94065
   U.S.A.

   Phone: +1 408 500 1135
   EMail: Surendra.Reddy@mitrix.com


   Jim Davis
   27 Borden Street
   Toronto, Ontario  M5S 2M8
   Canada

   Phone: +1 416 929 5854
   EMail: jrd3@alum.mit.edu
   URI:   <a href="http://www.econetwork.net/~jdavis">http://www.econetwork.net/~jdavis</a>

   Alan Babich
   IBM Corporation
   3565 Harbor Blvd.
   Costa Mesa, CA  92626
   U.S.A.

   Phone: +1 714 327 3403
   EMail: ababich@us.ibm.com











Reschke, et al.             Standards Track                    [Page 49]

</pre><br />
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.129c, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>
</body>

<!-- Mirrored from tools.ietf.org/html/rfc5323 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 13:01:42 GMT -->
</html>
