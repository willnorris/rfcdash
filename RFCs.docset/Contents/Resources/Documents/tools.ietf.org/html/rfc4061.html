<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4061 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:43 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4061" name="DC.Identifier"/>
<meta content='This document provides suggestions for measuring OSPF single router
control plane convergence. Its initial emphasis is on the control
plane of a single OSPF router. We do not address forwarding plane
performance.  NOTE: In this document, the word "convergence" relates
to single router control plane convergence only. This memo provides
information for the Internet community.' name="DC.Description.Abstract"/>
<meta content="Shaikh, Aman" name="DC.Creator"/>
<meta content="White, Russ" name="DC.Creator"/>
<meta content="Manral, Vishwas" name="DC.Creator"/>
<meta content="April, 2005" name="DC.Date.Issued"/>
<meta content="Benchmarking Basic OSPF Single Router Control Plane Convergence" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4061 - Benchmarking Basic OSPF Single Router Control Plane Convergence</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4061.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4061" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-bmwg-ospfconv-intraarea" title="draft-ietf-bmwg-ospfconv-intraarea">draft-ietf-bmwg...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4061" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4061" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4061" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                          V. Manral
Request for Comments: 4061                                  SiNett Corp.
Category: Informational                                         R. White
                                                           Cisco Systems
                                                               A. Shaikh
                                                    AT&amp;T Labs (Research)
                                                              April 2005


    <span class="h1">Benchmarking Basic OSPF Single Router Control Plane Convergence</span>

Status of This Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This document provides suggestions for measuring OSPF single router
   control plane convergence.  Its initial emphasis is on the control
   plane of a single OSPF router.  We do not address forwarding plane
   performance.

   NOTE: In this document, the word "convergence" relates to single
   router control plane convergence only.

Table of Contents

   <a href="#section-1">1</a>.  Introduction....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Specification of Requirements...................................<a href="#page-2">2</a>
   <a href="#section-3">3</a>.  Overview and Scope..............................................<a href="#page-3">3</a>
   <a href="#section-4">4</a>.  Reference Topologies............................................<a href="#page-4">4</a>
   <a href="#section-5">5</a>.  Basic Performance Tests.........................................<a href="#page-5">5</a>
       <a href="#section-5.1">5.1</a>.  Time Required to Process an LSA...........................<a href="#page-5">5</a>
       <a href="#section-5.2">5.2</a>.  Flooding Time.............................................<a href="#page-6">6</a>
       <a href="#section-5.3">5.3</a>.  Shortest Path First Computation Time......................<a href="#page-6">6</a>
   <a href="#section-6">6</a>.  Basic Intra-area OSPF Tests.....................................<a href="#page-8">8</a>
       6.1.  Forming Adjacencies on Point-to-Point Links
             (Initialization)..........................................<a href="#page-9">9</a>
       <a href="#section-6.2">6.2</a>.  Forming Adjacencies on Point-to-Point Links...............<a href="#page-9">9</a>
       6.3.  Forming Adjacencies with Information Already in the
             Database.................................................<a href="#page-10">10</a>
       <a href="#section-6.4">6.4</a>.  Designated Router Election Time on a Broadcast Network...<a href="#page-11">11</a>



<span class="grey">Manral, et al.               Informational                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


       6.5.  Initial Convergence Time on a Broadcast Network,
             Test 1...................................................<a href="#page-11">11</a>
       6.6.  Initial Convergence Time on a Broadcast Network,
             Test 2...................................................<a href="#page-12">12</a>
       <a href="#section-6.7">6.7</a>.  Link Down with Layer Two Detection.......................<a href="#page-12">12</a>
       <a href="#section-6.8">6.8</a>.  Link Down with Layer Three Detection.....................<a href="#page-13">13</a>
   <a href="#section-7">7</a>.  Security Considerations........................................<a href="#page-13">13</a>
   <a href="#section-8">8</a>.  Acknowledgements...............................................<a href="#page-13">13</a>
   <a href="#section-9">9</a>.  Normative References...........................................<a href="#page-14">14</a>
   <a href="#section-10">10</a>. Informative References.........................................<a href="#page-14">14</a>
   Authors' Addresses.................................................<a href="#page-15">15</a>
   Full Copyright Statement...........................................<a href="#page-16">16</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   There is a growing interest in routing protocol convergence testing,
   with many people looking at various tests to determine how long it
   takes for a network to converge after various conditions occur.  The
   major problem with this sort of testing is that the framework of the
   tests has a major impact on the results; for instance, determining
   when a network is converged, what parts of the router's operation are
   considered within the testing, and other such things will have a
   major impact on the apparent performance that routing protocols
   provide.

   This document attempts to provide a framework for Open Shortest Path
   First [<a href="#ref-OSPF" title='"OSPF Version 2"'>OSPF</a>] performance testing, and to provide some tests for
   measuring some aspects of OSPF performance.  The motivation of the
   document is to provide a set of tests that can provide the user
   comparable data from various vendors with which to evaluate the OSPF
   protocol performance on the devices.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Specification%20of%20Requirements"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Specification of Requirements</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].  <a href="rfc2119.html">RFC 2119</a>
   key words in this document are used to ensure methodological control,
   which is very important in the specification of benchmarks.  This
   document does not specify a network-related protocol.











<span class="grey">Manral, et al.               Informational                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Overview%20and%20Scope"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Overview and Scope</span>

   Although this document describes a specific set of tests aimed at
   characterizing the single router control plane convergence
   performance of OSPF processes in routers or other boxes that
   incorporate OSPF functionality, a key objective is to propose
   methodologies that produce directly comparable convergence-related
   measurements.

   The following considerations are outside the scope of this document:

   o  The interactions of convergence and forwarding; testing is
      restricted to events occurring within the control plane.
      Forwarding performance is the primary focus in [<a href="#ref-INTERCONNECT" title='"Benchmarking Methodology for Network Interconnect Devices"'>INTERCONNECT</a>], and
      it is expected to be dealt with in work that ensues from [FIB-
      TERM].

   o  Inter-area route generation, AS-external route generation, and
      simultaneous traffic on the control and data paths within the DUT.
      Although the tests outlined in this document measure SPF time,
      flooding times, and other aspects of OSPF convergence performance,
      this document does not provide tests for measuring external or
      summary route generation, route translation, or other OSPF inter-
      area and external routing performance.  These areas are expected
      to be dealt with in a later document.

      The tests should be run more than once, since a single test run
      cannot be relied on to produce statistically sound results.  The
      number of test runs and any variations between the tests should be
      recorded in the test results (see [<a href="#ref-TERM" title='"OSPF Benchmarking Terminology and Concepts"'>TERM</a>] for more information on
      what items should be recorded in the test results).




















<span class="grey">Manral, et al.               Informational                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Reference%20Topologies"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Reference Topologies</span>

   Several reference topologies that are used throughout the tests are
   described in the remaining sections of this document.  All of the
   topologies have been collectively placed in one section to avoid
   repetition.

   o  Reference Topology 1 (Emulated Topology)

                           (                   )
      DUT----Generator----(  emulated topology  )
                           (                   )

      A simple back-to-back configuration.  It's assumed that the link
      between the generator and the DUT is a point-to-point link, while
      the connections within the generator represent some emulated
      topology.

   o  Reference Topology 2 (Generator and Collector)

                                        (                   )
      Collector-----DUT-----Generator--(  emulated topology  )
             \              /           (                   )
              \------------/

      All routers are connected through point-to-point links.  The cost
      of all links is assumed to be the same unless otherwise noted.

   o  Reference Topology 3 (Broadcast Network)

      DUT     R1     R2
       |      |      |
      -+------+------+-----.....

      Any number of routers could be included on the common broadcast
      network.

   o  Reference Topology 4 (Parallel Links)

        /--(link 1)-----\           (                   )
      DUT               Generator--(  emulated topology  )
        \--(link 2)-----/           (                   )

   In all cases the tests and topologies are designed to allow
   performance measurements to be taken all on a single device, whether
   this is the DUT or some other device in the network.  This eliminates
   the need for synchronized clocks within the test networks.




<span class="grey">Manral, et al.               Informational                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Basic%20Performance%20Tests"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Basic Performance Tests</span>

   These tests will measure aspects of the OSPF implementation as a
   process on the device under test, including

   o  time required to process an LSA,

   o  flooding time, and

   o  Shortest Path First computation.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Time%20Required%20to%20Process%20an%20LSA"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Time Required to Process an LSA</span>

   o  Using reference topology 1 (Emulated Topology), begin with all
      links up and a full adjacency established between the DUT and the
      generator.

      Note: The generator does not have direct knowledge of the state of
      the adjacency on the DUT.  The fact that the adjacency may be in
      Full state on the generator does not mean that the DUT is ready.
      It may still (and is likely to) be requesting LSAs from the
      generator.  This process, involving processing of requested LSAs,
      will affect the results of the test.  The generator should either
      wait until it sees the DUT's router-LSA listing the adjacency with
      the generator or introduce a configurable delay before starting
      the test.

   o  Send an LSA that is already in the DUT (a duplicate LSA), note the
      time difference between when the LSA is sent and when the ack is
      received.  This measures the time taken to propagate the LSA and
      the ack, as well as the processing time of the duplicate LSA.
      This is dupLSAprocTime.

   o  Send a new LSA from the generator to the DUT, followed immediately
      by a duplicate LSA (LSA that already resides in the database of
      DUT, but not the same as the one just sent).

   o  The DUT will acknowledge this second LSA immediately; note the
      time of this acknowledgement.  This is newLSAprocTime.

      The amount of time required for an OSPF implementation to process
      the new LSA can be computed by subtracting dupLSAprocTime from
      newLSAprocTime.

      Note: The duplicate LSA cannot be the same as the one just sent
      because of the MinLSInterval restriction [<a href="#ref-OSPF" title='"OSPF Version 2"'>OSPF</a>].  This test is
      taken from [<a href="#ref-BLACKBOX" title='"Experience in Black- box OSPF measurement"'>BLACKBOX</a>].




<span class="grey">Manral, et al.               Informational                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


      Note: This time may or may not include the time required to
      perform flooding-related operations, depending on when the
      implementation sends the ack: before it floods the LSA further, or
      after it does, or anywhere in between.  In other words, this
      measurement may not mean the same thing in all implementations.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Flooding%20Time"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Flooding Time</span>

   o  Using reference topology 2 (Generator and Collector), enable OSPF
      on all links and allow the devices to build full adjacencies.
      Configure the collector so that it will block all flooding toward
      the DUT (but so that it continues receiving advertisements from
      the DUT).

   o  Inject a new set of LSAs from the generator toward the collector
      and the DUT.

   o  On the collector, note the time the flooding is complete across
      the link to the generator.  Also note the time the flooding is
      complete across the link from the DUT.

   The time from when the last LSA is received on the collector from the
   generator to when the last LSA is received on the collector from the
   DUT should be measured during this test.  This time is important in
   link state protocols, since the loop-free nature of the network is
   reliant on the speed at which revised topology information is
   flooded.

   Depending on the number of LSAs flooded, the sizes of the LSAs, the
   number of LSUs, and the rate of flooding, these numbers could vary by
   some amount.  The settings and variances of these numbers should be
   reported with the test results.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Shortest%20Path%20First%20Computation%20Time"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Shortest Path First Computation Time</span>

   o  Use reference topology 1 (Emulated Topology), beginning with the
      DUT and the generator fully adjacent.

   o  The default SPF timer on the DUT should be set to 0 so that any
      new LSA that arrives immediately results in the SPF calculation
      [<a href="#ref-BLACKBOX" title='"Experience in Black- box OSPF measurement"'>BLACKBOX</a>].

   o  The generator should inject a set of LSAs toward the DUT; the DUT
      should be allowed to converge and install all best paths in the
      local routing table, etc.






<span class="grey">Manral, et al.               Informational                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


   o  Send an LSA that is already in the DUT (a duplicate LSA), note the
      time difference between when the LSA is sent and when the ack is
      received.  This measures the time taken to propagate the LSA and
      the ack, as well as the processing time of the duplicate LSA.
      This is dupLSAprocTime.

   o  Change the link cost between the generator and the emulated
      network it is advertising, and transmit the new LSA to the DUT.

   o  Immediately inject another LSA that is a duplicate of some other
      LSA the generator has previously injected (preferably a stub
      network someplace within the emulated network).

      Note: The generator should make sure that outbound LSA packing is
      not performed for the duplicate LSAs and that they are always sent
      in a separate Link-state Update packet.  Otherwise, if the LSA
      carrying the topology change and the duplicate LSA are in the same
      packet, the SPF starts after the duplicate LSA is acked.

   o  Measure the time between transmitting the second (duplicate) LSA
      and the acknowledgement for that LSA; this is the totalSPFtime.
      The total time required to run SPF can be computed by subtracting
      dupLSAprocTime from totalSPFtime.

   The accuracy of this test is crucially dependent on the amount of
   time between the transmissions of the first and second LSAs.  If too
   much time elapsed, the test is meaningless because the SPF run will
   complete before the second (duplicate) LSA is received.  If the time
   elapsed is less, then both LSAs will be handled before the SPF run is
   scheduled and started, and thus the measurement would only be for the
   handling of the duplicate LSA.

   This test is also specified in [<a href="#ref-BLACKBOX" title='"Experience in Black- box OSPF measurement"'>BLACKBOX</a>].

   Note: This test may not be accurate on systems that implement OSPF as
   a multithreaded process, where the flooding takes place in a separate
   process (or on a different processor) than shortest path first
   computations.

   It is also possible to measure the SPF time using white box tests
   (using output supplied by the OSPF software implementer), such as the
   following:

   o  Using reference topology 1 (Emulated Topology), establish a full
      adjacency between the generator and the DUT.






<span class="grey">Manral, et al.               Informational                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


   o  Inject a set of LSAs from the generator toward the DUT.  Allow the
      DUT to stabilize and install all best paths in the routing table,
      etc.

   o  Change the link cost between the DUT and the generator (or the
      link between the generator and the emulated network it is
      advertising), such that a full SPF is required to run, although
      only one piece of information is changed.

   o  Measure the amount of time required for the DUT to compute a new
      shortest path tree as a result of the topology changes injected by
      the generator.  These measurements should be taken using available
      show and debug information on the DUT.

   Several caveats MUST be mentioned when a white box method of
   measuring SPF time is used.  For instance, such white box tests are
   only applicable when testing various versions or variations within a
   single implementation of the OSPF protocol.  Further, the same set of
   commands MUST be used in each iteration of such a test to ensure
   consistent results.

   There is an interesting relationship between the SPF times reported
   by white box (internal) testing and black box (external) testing;
   each of these two types of tests may be used as a "sanity check" on
   the other by comparing results.

   See [<a href="#ref-CONSIDERATIONS" title='"Considerations When Using Basic OSPF Convergence Benchmarks"'>CONSIDERATIONS</a>] for further discussion.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Basic%20Intra-area%20OSPF%20Tests"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Basic Intra-area OSPF Tests</span>

   These tests measure the performance of an OSPF implementation for
   basic intra-area tasks, including:

   o  Forming Adjacencies on Point-to-Point Link (Initialization)

   o  Forming Adjacencies on Point-to-Point Links

   o  Link Up with Information Already in the Database

   o  Initial convergence Time on a Designated Router Electing
      (Broadcast) Network

   o  Link Down with Layer 2 Detection

   o  Link Down with Layer 3 Detection

   o  Designated Router Election Time on A Broadcast Network




<span class="grey">Manral, et al.               Informational                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Forming%20Adjacencies%20on%20Point-to-Point%20Link%20%28Initialization%29"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Forming Adjacencies on Point-to-Point Link (Initialization)</span>

   This test measures the time required to form an OSPF adjacency from
   the time a layer two (data link) connection is formed between two
   devices running OSPF.

   o  Use reference topology 1 (Emulated Topology), beginning with the
      link between the generator and DUT disabled on the DUT.  OSPF
      should be configured and operating on both devices.

   o  Inject a set of LSAs from the generator toward the DUT.

   o  Bring the link up at the DUT, noting the time when the link
      carrier is established on the generator.

   o  Note the time when the acknowledgement for the last LSA
      transmitted from the DUT is received on the generator.

   The time between the carrier establishment and the acknowledgement
   for the last LSA transmitted by the generator should be taken as the
   total amount of time required for the OSPF process on the DUT to
   react to a link up event with the set of LSAs injected, including the
   time required for the operating system to notify the OSPF process
   about the link up, etc.  The acknowledgement for the last LSA
   transmitted is used instead of the last acknowledgement received in
   order to prevent timing skews due to retransmitted acknowledgements
   or LSAs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Forming%20Adjacencies%20on%20Point-to-Point%20Links"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Forming Adjacencies on Point-to-Point Links</span>

   This test measures the time required to form an adjacency from the
   time the first communication occurs between two devices running OSPF.

   o  Using reference topology 1 (Emulated Topology), configure the DUT
      and the generator so that traffic can be passed along the link
      between them.

   o  Configure the generator so that OSPF is running on the point-to-
      point link toward the DUT, and inject a set of LSAs.

   o  Configure the DUT so that OSPF is initialized, but not running on
      the point-to-point link between the DUT and the generator.

   o  Enable OSPF on the interface between the DUT and the generator on
      the DUT.

   o  Note the time of the first hello received from the DUT on the
      generator.



<span class="grey">Manral, et al.               Informational                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


   o  Note the time of the acknowledgement from the DUT for the last LSA
      transmitted on the generator.

   The time between the first hello received and the acknowledgement for
   the last LSA transmitted by the generator should be taken as the
   total amount of time required for the OSPF process on the DUT to
   build a FULL neighbor adjacency with the set of LSAs injected.  The
   acknowledgement for the last LSA transmitted is used instead of the
   last acknowledgement received in order to prevent timing skews due to
   retransmitted acknowledgements or LSAs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Forming%20Adjacencies%20with%20Information%20Already%20in%20the%20Database"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Forming Adjacencies with Information Already in the Database</span>

   o  Using reference topology 2 (Generator and Collector), configure
      all three devices to run OSPF.

   o  Configure the DUT so that the link between the DUT and the
      generator is disabled.

   o  Inject a set of LSAs into the network from the generator; the DUT
      should receive these LSAs through normal flooding from the
      collector.

   o  Enable the link between the DUT and the generator.

   o  Note the time of the first hello received from the DUT on the
      generator.

   o  Note the time of the last DBD (Database Description) received on
      the generator.

   o  Note the time of the acknowledgement from the DUT for the last LSA
      transmitted on the generator.

   The time between the hello received by the generator from the DUT and
   the acknowledgement for the last LSA transmitted by the generator
   should be taken as the total amount of time required for the OSPF
   process on the DUT to build a FULL neighbor adjacency with the set of
   LSAs injected.  In this test, the DUT is already aware of the entire
   network topology, so the time required should only include the
   processing of DBDs exchanged when in EXCHANGE state, the time to
   build a new router LSA containing the new connection information, and
   the time required to flood and acknowledge this new router LSA.

   The acknowledgement for the last LSA transmitted is used instead of
   the last acknowledgement received in order to prevent timing skews
   due to retransmitted acknowledgements or LSAs.




<span class="grey">Manral, et al.               Informational                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4.%20%20Designated%20Router%20Election%20Time%20on%20a%20Broadcast%20Network"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a>.  Designated Router Election Time on a Broadcast Network</span>

   o  Using reference topology 3 (Broadcast Network), configure R1 to be
      the designated router on the link, and the DUT to be the backup
      designated router.

   o  Enable OSPF on the common broadcast link on all the routers in the
      test bed.

   o  Disable the broadcast link on R1.

   o  Note the time of the last hello received from R1 on R2.

   o  Note the time of the first network LSA generated by the DUT as
      received on R2.

   The time between the last hello received on R2 and the first network
   LSA generated by the DUT should be taken as the amount of time
   required for the DUT to complete a designated router election
   computation.  Note that this test includes the dead interval timer at
   the DUT, so this time may be factored out, or the hello and dead
   intervals may be reduced to lessen these timers' impact on the
   overall test times.  All changed timers, the number of routers
   connected to the link, and other variable factors should be noted in
   the test results.

   Note: If R1 sends a "goodbye hello", typically a hello with its
   neighbor list empty, in the process of shutting down its interface,
   using the time when this hello is received instead of the time when
   the last one was would provide a more accurate measurement.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.5.%20%20Initial%20Convergence%20Time%20on%20a%20Broadcast%20Network%2C%20Test%201"></a><a class="selflink" href="#section-6.5" name="section-6.5">6.5</a>.  Initial Convergence Time on a Broadcast Network, Test 1</span>

   o  Using reference topology 3 (Broadcast Network), begin with the DUT
      connected to the network with OSPF enabled.  OSPF should be
      enabled on R1, but the broadcast link should be disabled.

   o  Enable the broadcast link between R1 and the DUT.  Note the time
      of the first hello received by R1.

   o  Note the time when the first network LSA is flooded by the DUT at
      R1.

   o  The difference between the first hello and the first network LSA
      is the time required by the DUT to converge on this new topology.






<span class="grey">Manral, et al.               Informational                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


   This test assumes that the DUT will be the designated router on the
   broadcast link.  A similar test could be designed to test the
   convergence time when the DUT is not the designated router.

   This test maybe performed with a varying number of devices attached
   to the broadcast network, and with varying sets of LSAs being
   advertised to the DUT from the routers attached to the broadcast
   network.  Variations in the LSA sets and other factors should be
   noted in the test results.

   The time required to elect a designated router, as measured in
   <a href="#section-6.4">Section 6.4</a>, above, may be subtracted from the results of this test
   to provide just the convergence time across a broadcast network.

   Note that although all the other tests in this document include route
   calculation time in the convergence time, as described in [<a href="#ref-TERM" title='"OSPF Benchmarking Terminology and Concepts"'>TERM</a>],
   this test may not include route calculation time in the resulting
   measured convergence time, because initial route calculation may
   occur after the first network LSA is flooded.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.6.%20%20Initial%20Convergence%20Time%20on%20a%20Broadcast%20Network%2C%20Test%202"></a><a class="selflink" href="#section-6.6" name="section-6.6">6.6</a>.  Initial Convergence Time on a Broadcast Network, Test 2</span>

   o  Using reference topology 3 (Broadcast Network), begin with the DUT
      connected to the network with OSPF enabled.  OSPF should be
      enabled on R1, but the broadcast link should be disabled.

   o  Enable the broadcast link between R1 and the DUT.  Note the time
      of the first hello transmitted by the DUT with a designated router
      listed.

   o  Note the time when the first network LSA is flooded by the DUT at
      R1.

   o  The time difference between the first hello with a designated
      router lists and the first network LSA is the period required by
      the DUT to converge on this new topology.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.7.%20%20Link%20Down%20with%20Layer%202%20Detection"></a><a class="selflink" href="#section-6.7" name="section-6.7">6.7</a>.  Link Down with Layer 2 Detection</span>

   o  Using reference topology 4 (Parallel Links), begin with OSPF in
      the Full state between the generator and the DUT.  Both links
      should be point-to-point links with the ability to notify the
      operating system immediately upon link failure.

   o  Disable link 1; this should be done in such a way that the
      keepalive timers at the data link layer will have no impact on the
      DUT recognizing the link failure (the operating system in the DUT




<span class="grey">Manral, et al.               Informational                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


      should recognize this link failure immediately).  Disconnecting
      the cable on the generator end would be one possibility; shutting
      the link down would be another.

   o  Note the time of the link failure on the generator.

   o  At the generator, note the time of the receipt of the new router
      LSA from the DUT notifying the generator of the link 2 failure.

      The difference in the time between the initial link failure and
      the receipt of the LSA on the generator across link 2 should be
      taken as the time required for an OSPF implementation to recognize
      and process a link failure, including the time required to
      generate and flood an LSA describing the link down event to an
      adjacent neighbor.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.8.%20%20Link%20Down%20with%20Layer%203%20Detection"></a><a class="selflink" href="#section-6.8" name="section-6.8">6.8</a>.  Link Down with Layer 3 Detection</span>

   o  Using reference topology 4 (Parallel Links), begin with OSPF in
      the Full state between the generator and the DUT.

   o  Disable OSPF processing on link 1 from the generator.  This should
      be done in such a way that it does not affect link status; the DUT
      MUST note the failure of the adjacency through the dead interval.

   o  At the generator, note the time of the receipt of the new router
      LSA from the DUT notifying the generator of the link 2 failure.

   The difference in the time between the initial link failure and the
   receipt of the LSA on the generator across link 2 should be taken as
   the time required for an OSPF implementation to recognize and process
   an adjacency failure.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   This document does not modify the underlying security considerations
   in [<a href="#ref-OSPF" title='"OSPF Version 2"'>OSPF</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Acknowledgements"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Acknowledgements</span>

   Thanks to Howard Berkowitz (hcb@clark.net) for his encouragement and
   support.  Thanks also to Alex Zinin (zinin@psg.net), Gurpreet Singh
   (Gurpreet.Singh@SpirentCom.com), and Yasuhiro Ohara
   (yasu@sfc.wide.ad.jp) for their comments.







<span class="grey">Manral, et al.               Informational                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Normative%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Normative References</span>

   [<a id="ref-OSPF" name="ref-OSPF">OSPF</a>]           Moy, J., "OSPF Version 2", STD 54, <a href="rfc2328.html">RFC 2328</a>, April
                    1998.

   [<a id="ref-TERM" name="ref-TERM">TERM</a>]           Manral, V., White, R., and A. Shaikh, "OSPF
                    Benchmarking Terminology and Concepts", <a href="rfc4062.html">RFC 4062</a>,
                    April 2005.

   [<a id="ref-CONSIDERATIONS" name="ref-CONSIDERATIONS">CONSIDERATIONS</a>] Manral, V., White, R., and A. Shaikh,
                    "Considerations When Using Basic OSPF Convergence
                    Benchmarks", <a href="rfc4063.html">RFC 4063</a>, April 2005.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]        Bradner, S., "Key words for use in RFCs to Indicate
                    Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Informative%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Informative References</span>

   [<a id="ref-INTERCONNECT" name="ref-INTERCONNECT">INTERCONNECT</a>]   Bradner, S. and J. McQuaid, "Benchmarking
                    Methodology for Network Interconnect Devices", <a href="rfc2544.html">RFC</a>
                    <a href="rfc2544.html">2544</a>, March 1999.

   [<a id="ref-FIB-TERM" name="ref-FIB-TERM">FIB-TERM</a>]       Trotter, G., "Terminology for Forwarding Information
                    Base (FIB) based Router Performance", <a href="rfc3222.html">RFC 3222</a>,
                    December 2001.

   [<a id="ref-BLACKBOX" name="ref-BLACKBOX">BLACKBOX</a>]       Shaikh, A. and Greenberg, A., "Experience in Black-
                    box OSPF measurement", Proc. ACM SIGCOMM Internet
                    Measurement Workshop (IMW), November 2001






















<span class="grey">Manral, et al.               Informational                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


Authors' Addresses

   Vishwas Manral
   SiNett Corp,
   Ground Floor,
   Embassy Icon Annexe,
   2/1, Infantry Road,
   Bangalore, India

   EMail: vishwas@sinett.com


   Russ White
   Cisco Systems, Inc.
   7025 Kit Creek Rd.
   Research Triangle Park, NC 27709

   EMail: riw@cisco.com


   Aman Shaikh
   AT&amp;T Labs (Research)
   180 Park Av, PO Box 971
   Florham Park, NJ 07932

   EMail: ashaikh@research.att.com

























<span class="grey">Manral, et al.               Informational                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc4061.html">RFC 4061</a>                Basic OSPF Benchmarking               April 2005</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2005).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Manral, et al.               Informational                     [Page 16]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4061 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:43 GMT --></html>