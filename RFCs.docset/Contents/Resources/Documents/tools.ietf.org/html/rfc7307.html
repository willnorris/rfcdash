<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc7307 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:22 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-zhao-mpls-ldp-multi-topology" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:7307" name="DC.Identifier"/>
<meta content="July, 2014" name="DC.Date.Issued"/>
<meta content="Zhou, Chao" name="DC.Creator"/>
<meta content="King, Daniel" name="DC.Creator"/>
<meta content="Zhao, Quintin" name="DC.Creator"/>
<meta content="Raza, Kamran" name="DC.Creator"/>
<meta content="Li, Lianyuan" name="DC.Creator"/>
<meta content="Fang, Luyuan" name="DC.Creator"/>
<meta content="Multi-Topology (MT) routing is supported in IP networks with the use
of MT-aware IGPs. In order to provide MT routing within Multiprotocol
Label Switching (MPLS) Label Distribution Protocol (LDP) networks, new
extensions are required.  This document describes the LDP protocol
extensions required to support MT routing in an MPLS environment." name="DC.Description.Abstract"/>
<meta content="LDP Extensions for Multi-Topology" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 7307 - LDP Extensions for Multi-Topology</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7307.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7307" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-mpls-ldp-multi-topology" title="draft-ietf-mpls-ldp-multi-topology">draft-ietf-mpls...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7307" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7307" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7307" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=7307&amp;submit=rfc" title="IPR disclosures related to this document">IPR</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=7307">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Internet Engineering Task Force (IETF)                           Q. Zhao
Request for Comments: 7307                             Huawei Technology
Category: Standards Track                                        K. Raza
ISSN: 2070-1721                                                  C. Zhou
                                                           Cisco Systems
                                                                 L. Fang
                                                               Microsoft
                                                                   L. Li
                                                            China Mobile
                                                                 D. King
                                                      Old Dog Consulting
                                                               July 2014


                   <span class="h1">LDP Extensions for Multi-Topology</span>

Abstract

   Multi-Topology (MT) routing is supported in IP networks with the use
   of MT-aware IGPs.  In order to provide MT routing within
   Multiprotocol Label Switching (MPLS) Label Distribution Protocol
   (LDP) networks, new extensions are required.

   This document describes the LDP protocol extensions required to
   support MT routing in an MPLS environment.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7307">http://www.rfc-editor.org/info/rfc7307</a>.












<span class="grey">Zhao, et al.                 Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





































<span class="grey">Zhao, et al.                 Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Signaling Extensions ............................................<a href="#page-5">5</a>
      <a href="#section-3.1">3.1</a>. Topology-Scoped Forwarding Equivalence Class (FEC) .........<a href="#page-5">5</a>
      <a href="#section-3.2">3.2</a>. New Address Families: MT IP ................................<a href="#page-5">5</a>
      <a href="#section-3.3">3.3</a>. LDP FEC Elements with MT IP AF .............................<a href="#page-6">6</a>
      <a href="#section-3.4">3.4</a>. IGP MT-ID Mapping and Translation ..........................<a href="#page-7">7</a>
      <a href="#section-3.5">3.5</a>. LDP MT Capability Advertisement ............................<a href="#page-7">7</a>
           <a href="#section-3.5.1">3.5.1</a>. Protocol Extension ..................................<a href="#page-7">7</a>
           <a href="#section-3.5.2">3.5.2</a>. Procedures ..........................................<a href="#page-9">9</a>
      <a href="#section-3.6">3.6</a>. Label Spaces ..............................................<a href="#page-10">10</a>
      <a href="#section-3.7">3.7</a>. Reserved MT-ID Values .....................................<a href="#page-10">10</a>
   <a href="#section-4">4</a>. MT Applicability on FEC-Based Features .........................<a href="#page-10">10</a>
      <a href="#section-4.1">4.1</a>. Typed Wildcard FEC Element ................................<a href="#page-10">10</a>
      <a href="#section-4.2">4.2</a>. Signaling LDP Label Advertisement Completion ..............<a href="#page-11">11</a>
      <a href="#section-4.3">4.3</a>. LSP Ping ..................................................<a href="#page-11">11</a>
           <a href="#section-4.3.1">4.3.1</a>. New FEC Sub-Types ..................................<a href="#page-11">11</a>
           <a href="#section-4.3.2">4.3.2</a>. MT LDP IPv4 FEC Sub-TLV ............................<a href="#page-12">12</a>
           <a href="#section-4.3.3">4.3.3</a>. MT LDP IPv6 FEC Sub-TLV ............................<a href="#page-13">13</a>
           <a href="#section-4.3.4">4.3.4</a>. Operation Considerations ...........................<a href="#page-13">13</a>
   <a href="#section-5">5</a>. Error Handling .................................................<a href="#page-14">14</a>
      <a href="#section-5.1">5.1</a>. MT Error Notification for Invalid Topology ID .............<a href="#page-14">14</a>
   <a href="#section-6">6</a>. Backwards Compatibility ........................................<a href="#page-14">14</a>
   <a href="#section-7">7</a>. MPLS Forwarding in MT ..........................................<a href="#page-14">14</a>
   <a href="#section-8">8</a>. Security Considerations ........................................<a href="#page-14">14</a>
   <a href="#section-9">9</a>. IANA Considerations ............................................<a href="#page-15">15</a>
   <a href="#section-10">10</a>. Manageability Considerations ..................................<a href="#page-17">17</a>
      <a href="#section-10.1">10.1</a>. Control of Function and Policy ...........................<a href="#page-17">17</a>
      <a href="#section-10.2">10.2</a>. Information and Data Models ..............................<a href="#page-17">17</a>
      <a href="#section-10.3">10.3</a>. Liveness Detection and Monitoring ........................<a href="#page-17">17</a>
      <a href="#section-10.4">10.4</a>. Verify Correct Operations ................................<a href="#page-17">17</a>
      <a href="#section-10.5">10.5</a>. Requirements on Other Protocols ..........................<a href="#page-17">17</a>
      <a href="#section-10.6">10.6</a>. Impact on Network Operations .............................<a href="#page-17">17</a>
   <a href="#section-11">11</a>. Contributors ..................................................<a href="#page-18">18</a>
   <a href="#section-12">12</a>. Acknowledgements ..............................................<a href="#page-19">19</a>
   <a href="#section-13">13</a>. References ....................................................<a href="#page-19">19</a>
      <a href="#section-13.1">13.1</a>. Normative References .....................................<a href="#page-19">19</a>
      <a href="#section-13.2">13.2</a>. Informative References ...................................<a href="#page-19">19</a>











<span class="grey">Zhao, et al.                 Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Multi-Topology (MT) routing is supported in IP networks with the use
   of MT-aware IGPs.  It would be advantageous for Communications
   Service Providers (CSPs) to support an MPLS Multi-Topology (MPLS-MT)
   environment.  The benefits of MPLS-MT technology are features for
   various network scenarios, including:

   o  A CSP may want to assign varying Quality of Service (QoS) profiles
      to different traffic classes, based on a specific topology in an
      MT routing network;

   o  Separate routing and MPLS domains may be used to isolate multicast
      and IPv6 islands within the backbone network;

   o  Specific IP address space could be routed across an MT based on
      security or operational isolation requirements;

   o  Low-latency links could be assigned to an MT for delay-sensitive
      traffic;

   o  Management traffic may be divided from customer traffic using
      different MTs utilizing separate links, thus ensuring that
      management traffic is separated from customer traffic.

   This document describes the Label Distribution Protocol (LDP)
   procedures and protocol extensions required to support MT routing in
   an MPLS environment.

   This document defines two new Forwarding Equivalence Class (FEC)
   types for use in Label Switched Path (LSP) ping [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   This document uses MPLS terminology defined in [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>].  Additional
   terms are defined below:

   o  MT-ID: A 16-bit value used to represent the Multi-Topology ID.

   o  Default MT Topology: A topology that is built using the MT-ID
      default value of 0.

   o  MT Topology: A topology that is built using the corresponding MT-
      ID.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].



<span class="grey">Zhao, et al.                 Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Signaling%20Extensions"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Signaling Extensions</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Topology-Scoped%20Forwarding%20Equivalence%20Class%20%28FEC%29"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Topology-Scoped Forwarding Equivalence Class (FEC)</span>

   LDP assigns and binds a label to a FEC, where a FEC is a list of one
   or more FEC elements.  To set up LSPs for unicast IP routing paths,
   LDP assigns local labels for IP prefixes and advertises these labels
   to its peers so that an LSP is set up along the routing path.  To set
   up MT LSPs for IP prefixes under a given topology scope, the LDP
   prefix-related FEC element must be extended to include topology
   information.  This implies that the MT-ID becomes an attribute of the
   prefix-related FEC element, and all FEC-Label binding operations are
   performed under the context of a given topology (MT-ID).

   The following section ("New Address Families: MT IP") defines the
   extension required to bind the prefix-related FEC to a topology.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20New%20Address%20Families%3A%20MT%20IP"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  New Address Families: MT IP</span>

   <a href="#section-2.1">Section 2.1</a> of the LDP base specification [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>] defines the
   Address Prefix FEC element.  The Prefix encoding is defined for a
   given "Address Family" (AF), and has length (in bits) specified by
   the "PreLen" field.

   To extend IP address families for MT, two new Address Families named
   "MT IP" and "MT IPv6" are used to specify IPv4 and IPv6 prefixes
   within a topology scope.

   The format of data associated with these new Address Families is
   described below:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     IPv4 Address                              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          Reserved             |        MT-ID                  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Figure 1: MT IP Address Family Format











<span class="grey">Zhao, et al.                 Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     IPv6 Address                              |
   |                                                               |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          Reserved             |        MT-ID                  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 2: MT IPv6 Address Family Format

   Where "IP Address" is an IPv4 and IPv6 address/prefix for "MT IP" and
   "MT IPv6" AF respectively, and the field "MT-ID" corresponds to the
   16-bit Topology ID for a given address.

   The definition and usage for the remaining fields in the FEC elements
   are as defined for IP/IPv6 AF.  The value of MT-ID 0 corresponds to
   the default topology and MUST be ignored on receipt so as to not
   cause any conflict/confusion with existing non-MT procedures.

   The defined FEC elements with "MT IP" Address Family can be used in
   any LDP message and procedures that currently specify and allow the
   use of FEC elements with IP/IPv6 Address Family.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20LDP%20FEC%20Elements%20with%20MT%20IP%20AF"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  LDP FEC Elements with MT IP AF</span>

   The following section specifies the format extensions of the existing
   LDP FEC elements to support MT.  The "Address Family" of these FEC
   elements will be set to "MT IP" or "MT IPv6".

   The MT Prefix FEC element encoding is as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Prefix (2)   | Address Family (MT IP/MT IPv6)|     PreLen    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Prefix                                    |
   ~                                                               ~
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          Reserved             |        MT-ID                  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Figure 3: MT Prefix FEC Element Format





<span class="grey">Zhao, et al.                 Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


   The MT Typed Wildcard FEC element encoding is as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Typed Wcard (5)|    FEC Type   |   Len = 6     |  AF = MT IP ..|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |... or MT IPv6 |         MT-ID                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 4: MT Typed Wildcard FEC Element

   The above format can be used for any LDP FEC element that allows use
   of the IP/IPv6 Address Family.  In the scope of this document, the
   allowed "FEC Type" in a MT Typed Wildcard FEC element is the Prefix
   FEC element.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.4.%20%20IGP%20MT-ID%20Mapping%20and%20Translation"></a><a class="selflink" href="#section-3.4" name="section-3.4">3.4</a>.  IGP MT-ID Mapping and Translation</span>

   The non-reserved non-special IGP MT-ID values can be used and carried
   in LDP without the need for translation.  However, there is a need
   for translating reserved or special IGP MT-ID values to corresponding
   LDP MT-IDs.  The assigned, unassigned, and special LDP MT-ID values
   have been assigned as described in <a href="#section-9">Section 9</a> ("IANA Considerations").

   How future LDP MT-ID values are allocated is outside the scope of
   this document.  Instead, a separate document will be created to
   detail the allocation policy and process for requesting new MT-ID
   values.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.5.%20%20LDP%20MT%20Capability%20Advertisement"></a><a class="selflink" href="#section-3.5" name="section-3.5">3.5</a>.  LDP MT Capability Advertisement</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.5.1.%20%20Protocol%20Extension"></a><a class="selflink" href="#section-3.5.1" name="section-3.5.1">3.5.1</a>.  Protocol Extension</span>

   We specify a new LDP capability, named "Multi-Topology (MT)", which
   is defined in accordance with the LDP capability guidelines
   [<a href="rfc5561.html" title='"LDP Capabilities"'>RFC5561</a>].  The LDP "MT" capability can be advertised by an LDP
   speaker to its peers either during the LDP session initialization or
   after the LDP session is set up.  The advertisement is to announce
   the capability of the Label Switching Router (LSR) to support MT for
   the given IP address family.  An LDP speaker MUST NOT send messages
   containing MT FEC elements unless the peer has said it can handle it.

   The MT capability is specified using the Multi-Topology Capability
   TLV.  The Multi-Topology Capability TLV format is in accordance with
   the LDP capability guidelines as defined in [<a href="rfc5561.html" title='"LDP Capabilities"'>RFC5561</a>].  To be able to





<span class="grey">Zhao, et al.                 Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


   specify IP address family, the capability-specific data (i.e., the
   "Capability Data" field of Capability TLV) is populated using the
   "Typed Wildcard FEC element" as defined in [<a href="rfc5918.html" title="&quot;Label Distribution Protocol (LDP) 'Typed Wildcard' Forward Equivalence Class (FEC)&quot;">RFC5918</a>].

   The format of the Multi-Topology Capability TLV is as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |U|F| Multi-Topology Cap.(IANA) |            Length             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |S| Reserved    |                                               |
   +-+-+-+-+-+-+-+-+                                               |
   ~                Typed Wildcard FEC element(s)                  ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

             Figure 5: Multi-Topology Capability TLV Format

   Where:

   o  U-bit: MUST be 1 so that the TLV will be silently ignored by a
      recipient if it is unknown, according to the rules of [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>].

   o  F-bit: MUST be 0 as per <a href="#section-3">Section 3</a> ("Specifying Capabilities in LDP
      Messages") of LDP Capabilities [<a href="rfc5561.html" title='"LDP Capabilities"'>RFC5561</a>].

   o  Multi-Topology Capability: Capability TLV type (IANA assigned)

   o  S-bit: MUST be 1 if used in LDP "Initialization" message.  MAY be
      set to 0 or 1 in dynamic "Capability" message to advertise or
      withdraw the capability, respectively.

   o  Typed Wildcard FEC element(s): One or more elements specified as
      the "Capability data".

   o  Length: length of Value field, starting from the S-bit, in octets.

   o  The encoding of the Typed Wildcard FEC element, as defined in
      [<a href="rfc5918.html" title="&quot;Label Distribution Protocol (LDP) 'Typed Wildcard' Forward Equivalence Class (FEC)&quot;">RFC5918</a>], is defined in <a href="#section-4.1">Section 4.1</a> ("Typed Wildcard FEC
      element") of this document.  The MT-ID field of the MT Typed
      Wildcard FEC element MUST be set to "Wildcard Topology" when it is
      specified in the MT Capability TLV.








<span class="grey">Zhao, et al.                 Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.5.2.%20%20Procedures"></a><a class="selflink" href="#section-3.5.2" name="section-3.5.2">3.5.2</a>.  Procedures</span>

   To announce its MT capability for an IP address family, LDP FEC type,
   and Multi-Topology, an LDP speaker sends an "MT Capability" including
   the exact Typed Wildcard FEC element with the corresponding
   "AddressFamily" field (i.e., set to "MT IP" for IPv4 and set to "MT
   IPv6" for IPv6 address family), corresponding "FEC Type" field (i.e.,
   set to "Prefix"), and corresponding "MT-ID".  To announce its MT
   capability for both the IPv4 and IPv6 address family, or for multiple
   FEC types, or for multiple Multi-Topologies, an LDP speaker sends an
   "MT Capability" with one or more MT Typed FEC elements in it.

   o  The capability for supporting multi-topology in LDP can be
      advertised during LDP session initialization stage by including
      the LDP MT capability TLV in LDP Initialization message.  After an
      LDP session is established, the MT capability can also be
      advertised or withdrawn using the Capability message (only if the
      "Dynamic Capability Announcement" capability [<a href="rfc5561.html" title='"LDP Capabilities"'>RFC5561</a>] has already
      been successfully negotiated).

   o  If an LSR has not advertised MT capability, its peer MUST NOT send
      to this LSR any LDP messages with FEC elements that include an MT
      identifier.

   o  If an LSR is changed from non-MT capable to MT capable, it sets
      the S-bit in the MT capability TLV and advertises via the
      Capability message (if it supports Dynamic Capability
      Announcement).  The existing LSP is treated as an LSP for default
      MT (ID 0).

   o  If an LSR is changed from LDP-MT capable to non-MT capable, it
      initiates withdrawal of all label mapping for existing LSPs of all
      non-default MTs.  It also cleans up all the LSPs of all non-
      default MTs locally.  Then, it clears the S-bit in the MT
      capability TLV and advertises via the Capability message (if it
      supports Dynamic Capability Announcement).  When an LSR knows the
      peer node is changed from LDP-MT capable to non-MT capable, it
      cleans up all the LSPs of all non-default MTs locally and
      initiates withdrawal of all label mapping for existing LSPs of all
      non-default MTs.  Each side of the node sends a label release to
      its peer once it receives the label release messages even though
      each side has already cleaned up all the LSPs locally.

   o  If an LSR does not support "Dynamic Capability Announcement", it
      MUST reset the session with its peer whenever the LSR changes its
      local capability with regards to supporting LDP MT.





<span class="grey">Zhao, et al.                 Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


   o  If an LSR is changed from IGP-MT capable to non-MT capable, it may
      wait until the routes update to withdraw the FEC and release the
      label mapping for existing LSPs of a specific MT.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.6.%20%20Label%20Spaces"></a><a class="selflink" href="#section-3.6" name="section-3.6">3.6</a>.  Label Spaces</span>

   The use of multiple topologies for LDP does not require different
   label spaces for each topology.  An LSR can use the same label space
   for all MT FECs as for the default topology.

   Similarly, signaling for different topologies can and should be done
   within a single LDP session.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.7.%20%20Reserved%20MT-ID%20Values"></a><a class="selflink" href="#section-3.7" name="section-3.7">3.7</a>.  Reserved MT-ID Values</span>

   Certain MT topologies are assigned to serve predetermined purposes.

   In <a href="#section-9">Section 9</a> ("IANA Considerations"), this document defines a new
   IANA registry "MPLS Multi-Topology Identifiers" to keep LDP MT-ID
   reserved values.

   If an LSR receives a FEC element with an "MT-ID" value that is
   "Unassigned" for future use (and not IANA allocated yet), the LSR
   MUST abort the processing of the FEC element and SHOULD send a
   notification message with status code "Invalid Topology ID" to the
   sender.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20MT%20Applicability%20on%20FEC-Based%20Features"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  MT Applicability on FEC-Based Features</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Typed%20Wildcard%20FEC%20Element"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Typed Wildcard FEC Element</span>

   [<a id="ref-RFC5918" name="ref-RFC5918">RFC5918</a>] extends base LDP and defines the Typed Wildcard FEC element
   framework.  The Typed Wildcard FEC element can be used in any LDP
   message to specify a wildcard operation/action for a given type of
   FEC.

   The MT extensions defined in this document do not require any
   extension to procedures for the Typed Wildcard FEC element, and these
   procedures apply as is to MT wildcarding.  The MT extensions, though,
   allow use of "MT IP" or "MT IPv6" in the Address Family field of the
   Typed Wildcard FEC element in order to use wildcard operations in the
   context of a given topology.  The use of MT-scoped address family
   also allows us to specify MT-ID in these operations.

   The defined format in <a href="#section-4.1">Section 4.1</a> ("Typed Wildcard FEC element")
   allows an LSR to perform wildcard FEC operations under the scope of a
   topology.  If an LSR wishes to perform a wildcard operation that
   applies to all topologies, it can use a "Wildcard Topology" MT-ID.



<span class="grey">Zhao, et al.                 Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


   For example, upon local de-configuration of a topology "x", an LSR
   may send a typed wildcard Label Withdraw message with MT-ID "x" to
   withdraw all its labels from the peer that advertised under the scope
   of topology "x".  Additionally, upon a global configuration change,
   an LSR may send a typed wildcard Label Withdraw message with the
   MT-ID set to "Wildcard Topology" to withdraw all its labels under all
   topologies from the peer.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Signaling%20LDP%20Label%20Advertisement%20Completion"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Signaling LDP Label Advertisement Completion</span>

   [<a id="ref-RFC5919" name="ref-RFC5919">RFC5919</a>] specifies extensions and procedures for an LDP speaker to
   signal its convergence for a given FEC type towards a peer.  The
   procedures defined in [<a href="rfc5919.html" title='"Signaling LDP Label Advertisement Completion"'>RFC5919</a>] apply as they are to an MT FEC
   element.  This allows an LDP speaker to signal its IP convergence
   using Typed Wildcard FEC element, and its MT IP convergence per
   topology using a MT Typed Wildcard FEC element.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20LSP%20Ping"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  LSP Ping</span>

   [<a id="ref-RFC4379" name="ref-RFC4379">RFC4379</a>] defines procedures to detect data-plane failures in MPLS
   LSPs via LSP ping.  That specification defines a "Target FEC Stack"
   TLV that describes the FEC stack being tested.  This TLV is sent in
   an MPLS Echo Request message towards the LSP's egress LSR and is
   forwarded along the same data path as other packets belonging to the
   FEC.

   "Target FEC Stack" TLV contains one or more sub-TLVs pertaining to
   different FEC types.  <a href="rfc4379.html#section-3.2">Section 3.2 of [RFC4379]</a> defines the Sub-Types
   and format of the FEC.  To support LSP ping for MT LDP LSPs, this
   document defines the following extensions to [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.1.%20%20New%20FEC%20Sub-Types"></a><a class="selflink" href="#section-4.3.1" name="section-4.3.1">4.3.1</a>.  New FEC Sub-Types</span>

   We define two new FEC types for LSP ping:

   o  MT LDP IPv4 FEC

   o  MT LDP IPv6 FEC

   We also define the following new sub-types for sub-TLVs to specify
   these FECs in the "Target FEC Stack" TLV of [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>]:

         Sub-Type       Length            Value Field
         --------       ------            -----------------
               31            8            MT LDP IPv4 prefix
               32           20            MT LDP IPv6 prefix

                   Figure 6: New Sub-Types for Sub-TLVs



<span class="grey">Zhao, et al.                 Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


   The rules and procedures of using these sub-TLVs in an MPLS echo
   request message are the same as defined for LDP IPv4/IPv6 FEC sub-TLV
   types in [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.2.%20%20MT%20LDP%20IPv4%20FEC%20Sub-TLV"></a><a class="selflink" href="#section-4.3.2" name="section-4.3.2">4.3.2</a>.  MT LDP IPv4 FEC Sub-TLV</span>

   The format of the "MT LDP IPv4 FEC" sub-TLV to be used in a "Target
   FEC Stack" [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>] is:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Type = 31 (MT LDP IPv4 FEC)  |          Length = 8           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                          IPv4 prefix                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Prefix Length |      MBZ      |       MT-ID                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 Figure 7: MT LDP IPv4 FEC Sub-TLV

   The format of this sub-TLV is similar to the LDP IPv4 FEC sub-TLV as
   defined in [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>].  In addition to "IPv4 prefix" and "Prefix
   Length" fields, this new sub-TLV also specifies the MT-ID (Multi-
   Topology ID).  The Length for this sub-TLV is 5.

   The term "Must Be Zero" (MBZ) is used in object descriptions for
   reserved fields.  These fields MUST be set to zero when sent and
   ignored on receipt.






















<span class="grey">Zhao, et al.                 Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.3.%20%20MT%20LDP%20IPv6%20FEC%20Sub-TLV"></a><a class="selflink" href="#section-4.3.3" name="section-4.3.3">4.3.3</a>.  MT LDP IPv6 FEC Sub-TLV</span>

   The format of the "MT LDP IPv6 FEC" sub-TLV to be used in a "Target
   FEC Stack" [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>] is:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Type = 32 (MT LDP IPv6 FEC)  |          Length = 20          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                          IPv6 prefix                          |
   |                                                               |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Prefix Length |     MBZ       |       MT-ID                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 Figure 8: MT LDP IPv6 FEC Sub-TLV

   The format of this sub-TLV is similar to the LDP IPv6 FEC sub-TLV as
   defined in [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>].  In addition to the "IPv6 prefix" and "Prefix
   Length" fields, this new sub-TLV also specifies the MT-ID (Multi-
   Topology ID).  The Length for this sub-TLV is 17.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.4.%20%20Operation%20Considerations"></a><a class="selflink" href="#section-4.3.4" name="section-4.3.4">4.3.4</a>.  Operation Considerations</span>

   To detect data-plane failures using LSP ping for a specific topology,
   the router will initiate an LSP ping request with the target FEC
   stack TLV containing the LDP MT IP Prefix Sub-TLV in the Echo Request
   packet.  The Echo Request packet is sent with the label bound to the
   IP Prefix in the topology.  Once the Echo Request packet reaches the
   target router, it will process the packet and perform checks for the
   LDP MT IP Prefix sub-TLV present in the Target FEC Stack as described
   in [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>] and respond according to the processing rules in
   [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>].  For the case that the LSP ping with return path is not
   specified, the reply packet must go through the default topology
   instead of the topology where the Echo Request goes through.

   It should be noted that the existing MIB modules for an MPLS LSR
   [<a href="rfc3813.html" title='"Multiprotocol Label Switching (MPLS) Label Switching Router (LSR) Management Information Base (MIB)"'>RFC3813</a>] and MPLS LDP managed objects [<a href="rfc3815.html" title='"Definitions of Managed Objects for the Multiprotocol Label Switching (MPLS), Label Distribution Protocol (LDP)"'>RFC3815</a>] do not provide the
   necessary information to support the extensions in this document.
   For example, the absence of the MT-ID as an index into the MIB
   modules means that there is no way to disambiguate different topology
   instances.






<span class="grey">Zhao, et al.                 Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Error%20Handling"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Error Handling</span>

   The extensions defined in this document utilize the existing LDP
   error handling defined in [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>].  If an LSR receives an error
   notification from a peer for a session, it terminates the LDP session
   by closing the TCP transport connection for the session and
   discarding all multi-topology label mappings learned via the session.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20MT%20Error%20Notification%20for%20Invalid%20Topology%20ID"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  MT Error Notification for Invalid Topology ID</span>

   An LSR should respond with an "Invalid Topology ID" status code in
   the LDP Notification message when it receives an LDP message with a
   FEC element specifying an MT-ID that is not locally known or not
   supported.  The LSR MUST also discard the entire message before
   sending the Notification message.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Backwards%20Compatibility"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Backwards Compatibility</span>

   The MPLS-MT solution is backwards compatible with existing LDP
   enhancements defined in [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>], including message authenticity,
   integrity of message, and topology loop detection.

   The legacy node that does not support MT should not receive any
   MT-related LDP messages.  In case bad things happen, according to
   [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>], processing of such messages should be aborted.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20MPLS%20Forwarding%20in%20MT"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  MPLS Forwarding in MT</span>

   Although forwarding is out of the scope of this document, we include
   some forwarding consideration for informational purposes here.

   The specified signaling mechanisms allow all the topologies to share
   the platform-specific label space.  This feature allows the existing
   data-plane techniques to be used.  Also, there is no way for the data
   plane to associate a received packet with any one topology, meaning
   that topology-specific label spaces cannot be used.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Security Considerations</span>

   The use of MT over existing MPLS solutions does not offer any
   specific security benefit.

   General LDP communication security threats and how these may be
   mitigated are described in [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>]; these threats include:

   o  spoofing

   o  privacy



<span class="grey">Zhao, et al.                 Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


   o  denial of service

   For further discussion regarding possible LDP communication threats
   and mitigation techniques, see [<a href="rfc5920.html" title='"Security Framework for MPLS and GMPLS Networks"'>RFC5920</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  IANA Considerations</span>

   This document introduces the following new protocol elements, which
   have been assigned by IANA:

   o  New LDP Capability TLV: "Multi-Topology Capability" TLV (0x050C)
      from the LDP Parameters registry "TLV Type Name Space".

   o  New Status Code: "Invalid Topology ID" (0x00000031) from the LDP
      Parameters registry "Status Code Name Space").

        Registry:
        Range/Value          Description
        --------------       ------------------------------
        0x00000031           Invalid Topology ID

      Figure 9: New Code Point for LDP Multi-Topology Extensions

   o  New address families under the IANA registry "Address Family
      Numbers":

         Number       Description
         --------     ------------------------------------
         29           MT IP: Multi-Topology IP version 4
         30           MT IPv6: Multi-Topology IP version 6

                Figure 10: Address Family Numbers



















<span class="grey">Zhao, et al.                 Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


   o  New registry "MPLS Multi-Topology Identifiers".

      This is a registry of the "Multiprotocol Label Switching
      Architecture (MPLS)" category.

      The initial registrations and allocation policies for this
      registry are:

      Range/Value  Purpose                                 Reference
      -----------  -------------------------------------  ----------
      0            Default/standard topology               <a href="rfc7307.html">RFC 7307</a>
      1            IPv4 in-band management                 <a href="rfc7307.html">RFC 7307</a>
      2            IPv6 routing topology                   <a href="rfc7307.html">RFC 7307</a>
      3            IPv4 multicast topology                 <a href="rfc7307.html">RFC 7307</a>
      4            IPv6 multicast topology                 <a href="rfc7307.html">RFC 7307</a>
      5            IPv6 in-band management                 <a href="rfc7307.html">RFC 7307</a>
      6-3995       Unassigned for future IGP topologies    <a href="rfc7307.html">RFC 7307</a>
                   Assigned by Standards Action            <a href="rfc7307.html">RFC 7307</a>
      3996-4095    Experimental                            <a href="rfc7307.html">RFC 7307</a>
      4096-65534   Unassigned for MPLS topologies          <a href="rfc7307.html">RFC 7307</a>
                   Assigned by Standards Action
      65535        Wildcard Topology                       <a href="rfc7307.html">RFC 7307</a>

          Figure 11: MPLS Multi-Topology Identifier Registry

   o  New Sub-TLV Types for LSP ping: The following new sub-type values
      under TLV type 1 (Target FEC Stack) have been registered from the
      "Sub-TLVs for TLV Types 1, 16, and 21" sub-registry within the
      "Multi-Protocol Label Switching (MPLS) Label Switched Paths (LSPs)
      Ping Parameters" registry.

               Sub-Type      Value Field
               --------      ------------------
               31            MT LDP IPv4 prefix
               32            MT LDP IPv6 prefix

            Figure 12: New Sub-TLV Types for LSP Ping

   As highlighted at the end of <a href="#section-3.4">Section 3.4</a> ("IGP MT-ID Mapping and
   Translation"), a new document will be created to detail the policy
   and process for allocating new MT-ID values.










<span class="grey">Zhao, et al.                 Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Manageability%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Manageability Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Control%20of%20Function%20and%20Policy"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Control of Function and Policy</span>

   There are capabilities that should be configurable to enable good
   manageability.  One such example is to allow that the LDP Multi-
   Topology capability be enabled or disabled.  It is assumed that the
   mapping of the LDP MT-ID and IGP MT-ID is manually configured on
   every router by default.  If an automatic mapping between IGP MT-IDs
   and LDP MT-IDs is needed, there must be explicit configuration to do
   so.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Information%20and%20Data%20Models"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Information and Data Models</span>

   Any extensions that may be required for existing MIBs are beyond the
   scope of this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.3.%20%20Liveness%20Detection%20and%20Monitoring"></a><a class="selflink" href="#section-10.3" name="section-10.3">10.3</a>.  Liveness Detection and Monitoring</span>

   Mechanisms defined in this document do not imply any new liveness
   detection and monitoring requirements.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.4.%20%20Verify%20Correct%20Operations"></a><a class="selflink" href="#section-10.4" name="section-10.4">10.4</a>.  Verify Correct Operations</span>

   In order to debug an LDP-MT-enabled network, it may be necessary to
   associate between the LDP label advertisement and the IGP routing
   advertisement.  In this case, the user MUST understand the mapping
   mechanism to convert the IGP MT-ID to the LDP MT-ID.  The method and
   type of mapping mechanism is out of the scope of this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.5.%20%20Requirements%20on%20Other%20Protocols"></a><a class="selflink" href="#section-10.5" name="section-10.5">10.5</a>.  Requirements on Other Protocols</span>

   If the LDP MT-ID has an implicit dependency on IGP MT-ID, then the
   corresponding IGP MT features will need to be supported.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.6.%20%20Impact%20on%20Network%20Operations"></a><a class="selflink" href="#section-10.6" name="section-10.6">10.6</a>.  Impact on Network Operations</span>

   Mechanisms defined in this document do not have any impact on network
   operations.












<span class="grey">Zhao, et al.                 Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Contributors"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Contributors</span>

   Ning So
   Tata Communications
   2613 Fairbourne Cir.
   Plano, TX  75082
   USA

   EMail: ning.so@tatacommunications.com


   Raveendra Torvi
   Juniper Networks
   10 Technology Park Drive
   Westford, MA  01886-3140
   US

   EMail: rtorvi@juniper.net


   Huaimo Chen
   Huawei Technology
   125 Nagog Technology Park
   Acton, MA  01719
   US

   Emily Chen
   2717 Seville Blvd, Apt. 1205
   Clearwater, FL 33764
   US

   EMail: emily.chen220@gmail.com


   Chen Li
   China Mobile
   53A, Xibianmennei Ave.
   Xunwu District, Beijing  01719
   China

   EMail: lichenyj@chinamobile.com


   Lu Huang
   China Mobile
   53A, Xibianmennei Ave.
   Xunwu District, Beijing  01719
   China



<span class="grey">Zhao, et al.                 Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Acknowledgements"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Acknowledgements</span>

   The authors would like to thank Dan Tappan, Nabil Bitar, Huang Xin,
   Eric Rosen, IJsbrand Wijnands, Dimitri Papadimitriou, Yiqun Chai,
   Pranjal Dutta, George Swallow, Curtis Villamizar, Adrian Farrel, Alia
   Atlas, and Loa Anderson for their valuable comments on this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20References"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.1.%20%20Normative%20References"></a><a class="selflink" href="#section-13.1" name="section-13.1">13.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC4379" name="ref-RFC4379">RFC4379</a>]  Kompella, K. and G. Swallow, "Detecting Multi-Protocol
              Label Switched (MPLS) Data Plane Failures", <a href="rfc4379.html">RFC 4379</a>,
              February 2006.

   [<a id="ref-RFC5036" name="ref-RFC5036">RFC5036</a>]  Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,
              "LDP Specification", <a href="rfc5036.html">RFC 5036</a>, October 2007.

   [<a id="ref-RFC5561" name="ref-RFC5561">RFC5561</a>]  Thomas, B., Raza, K., Aggarwal, S., Aggarwal, R., and JL.
              Le Roux, "LDP Capabilities", <a href="rfc5561.html">RFC 5561</a>, July 2009.

   [<a id="ref-RFC5918" name="ref-RFC5918">RFC5918</a>]  Asati, R., Minei, I., and B. Thomas, "Label Distribution
              Protocol (LDP) 'Typed Wildcard' Forward Equivalence Class
              (FEC)", <a href="rfc5918.html">RFC 5918</a>, August 2010.

   [<a id="ref-RFC5919" name="ref-RFC5919">RFC5919</a>]  Asati, R., Mohapatra, P., Chen, E., and B. Thomas,
              "Signaling LDP Label Advertisement Completion", <a href="rfc5919.html">RFC 5919</a>,
              August 2010.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.2.%20%20Informative%20References"></a><a class="selflink" href="#section-13.2" name="section-13.2">13.2</a>.  Informative References</span>

   [<a id="ref-RFC5920" name="ref-RFC5920">RFC5920</a>]  Fang, L., Ed., "Security Framework for MPLS and GMPLS
              Networks", <a href="rfc5920.html">RFC 5920</a>, July 2010.

   [<a id="ref-RFC3813" name="ref-RFC3813">RFC3813</a>]  Srinivasan, C., Viswanathan, A., and T. Nadeau,
              "Multiprotocol Label Switching (MPLS) Label Switching
              Router (LSR) Management Information Base (MIB)", <a href="rfc3813.html">RFC 3813</a>,
              June 2004.  Srinivasan, C., Viswanathan, A., and T.
              Nadeau,

   [<a id="ref-RFC3815" name="ref-RFC3815">RFC3815</a>]  Cucchiara, J., Sjostrand, H., and J. Luciani, "Definitions
              of Managed Objects for the Multiprotocol Label Switching
              (MPLS), Label Distribution Protocol (LDP)", <a href="rfc3815.html">RFC 3815</a>, June
              2004.




<span class="grey">Zhao, et al.                 Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc7307.html">RFC 7307</a>              LDP Multi-Topology Extensions            July 2014</span>


Authors' Addresses

   Quintin Zhao
   Huawei Technology
   125 Nagog Technology Park
   Acton, MA  01719
   US
   EMail: quintin.zhao@huawei.com


   Kamran Raza
   Cisco Systems
   2000 Innovation Drive
   Kanata, ON K2K-3E8
   Canada
   EMail: skraza@cisco.com


   Chao Zhou
   Cisco Systems
   300 Beaver Brook Road
   Boxborough, MA  01719
   US
   EMail: czhou@cisco.com


   Luyuan Fang
   Microsoft
   5600 148th Ave NE
   Redmond, WA  98052
   US
   EMail: lufang@microsoft.com


   Lianyuan Li
   China Mobile
   53A, Xibianmennei Ave.
   Xunwu District, Beijing  01719
   China
   EMail: lilianyuan@chinamobile.com


   Daniel King
   Old Dog Consulting
   EMail: daniel@olddog.co.uk






Zhao, et al.                 Standards Track                   [Page 20]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc7307 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:22 GMT --></html>