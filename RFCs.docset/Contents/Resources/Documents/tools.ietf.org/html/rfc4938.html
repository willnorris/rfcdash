<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4938 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:38 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4938" name="DC.Identifier"/>
<meta content="This document extends the Point-to-Point over Ethernet (PPPoE)
Protocol with a credit-based flow control mechanism and Link Quality
Metric report. This optional extension should improve the performance
of PPPoE over media with variable bandwidth and limited buffering,
such as mobile radio links. This memo provides information for the
Internet community." name="DC.Description.Abstract"/>
<meta content="Berry, Bo" name="DC.Creator"/>
<meta content="Holgate, Howard" name="DC.Creator"/>
<meta content="June, 2007" name="DC.Date.Issued"/>
<meta content="PPP Over Ethernet (PPPoE) Extensions for Credit Flow and Link Metrics" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4938 - PPP Over Ethernet (PPPoE) Extensions for Credit Flow and Link Metrics</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgbrown" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4938.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4938" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-bberry-pppoe-credit" title="draft-bberry-pppoe-credit">draft-bberry-pp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4938" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4938" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4938" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=4938">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Obsoleted by: <a href="rfc5578.html">5578</a>                                         INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                           B. Berry
Request for Comments: 4938                                    H. Holgate
Category: Informational                               Cisco Systems,Inc.
                                                               June 2007


                 <span class="h1">PPP Over Ethernet (PPPoE) Extensions</span>
                   <span class="h1">for Credit Flow and Link Metrics</span>

Status of This Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The IETF Trust (2007).

IESG Note

   The PPP Extensions Working Group (PPPEXT) has reservations about the
   desirability of the feature described in this document.  In
   particular, it solves a general problem at an inappropriate layer and
   it may have unpredictable interactions with higher and lower level
   protocols.  The techniques described in this document are intended
   for use with a particular deployment technique that uses a PPP
   termination separated from a radio termination by an Ethernet, and
   that has radio-side flow control for a slower PPP-only link to remote
   nodes.  Implementors are better advised to avoid split termination
   with inter-media protocol translation, and use standard Internet
   Protocol routing instead.

Abstract

   This document extends the Point-to-Point over Ethernet (PPPoE)
   Protocol with a credit-based flow control mechanism and Link Quality
   Metric report.  This optional extension should improve the
   performance of PPPoE over media with variable bandwidth and limited
   buffering, such as mobile radio links.











<span class="grey">Berry &amp; Holgate              Informational                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Payload .........................................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Overview of Protocol Extensions .................................<a href="#page-3">3</a>
   <a href="#section-4">4</a>. Discovery Stage .................................................<a href="#page-3">3</a>
      <a href="#section-4.1">4.1</a>. PPPoE Active Discovery Request (PADR) ......................<a href="#page-4">4</a>
      <a href="#section-4.2">4.2</a>. PPPoE Active Discovery Session-confirmation (PADS) .........<a href="#page-4">4</a>
      <a href="#section-4.3">4.3</a>. PPPoE Active Discovery Session-Grant (PADG) ................<a href="#page-5">5</a>
      <a href="#section-4.4">4.4</a>. PPPoE Active Discovery Session-Credit Response (PADC) ......<a href="#page-5">5</a>
      <a href="#section-4.5">4.5</a>. PPPoE Active Discovery Quality (PADQ) ......................<a href="#page-6">6</a>
   <a href="#section-5">5</a>. PPP Session Stage ...............................................<a href="#page-7">7</a>
   <a href="#section-6">6</a>. Credit Flow Considerations ......................................<a href="#page-7">7</a>
   <a href="#section-7">7</a>. PADG and PADC Retransmission ....................................<a href="#page-8">8</a>
   <a href="#section-8">8</a>. Other Considerations ............................................<a href="#page-9">9</a>
   <a href="#section-9">9</a>. IANA Considerations .............................................<a href="#page-9">9</a>
   <a href="#section-10">10</a>. Security Considerations ........................................<a href="#page-9">9</a>
   <a href="#appendix-A">Appendix A</a>: Tag Values.............................................<a href="#page-10">10</a>
   <a href="#appendix-B">Appendix B</a>: Example Message Formats................................<a href="#page-11">11</a>
   Acknowledgements...................................................<a href="#page-15">15</a>
   Normative References...............................................<a href="#page-15">15</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   PPP over Ethernet (PPPoE) [<a href="#ref-2" title='"A Method for Transmitting PPP Over Ethernet (PPPoE)"'>2</a>] is a protocol for establishing and
   encapsulating sessions between hosts and traffic aggregators (Access
   Concentrators) for PPP [<a href="#ref-1" title='"The Point-to-Point Protocol (PPP)"'>1</a>] transport over real or emulated Ethernet.
   PPPoE works well when both session endpoints have similar bandwidth,
   forwarding, and buffering capabilities that do not vary over time.
   However, it is insufficient for applications with variable bandwidth
   and limited buffering (for example, mobile radio links).  This
   document addresses this problem by suggesting an extension to PPPoE
   to support credit-based session flow control and session-based link
   metric exchanges.

   The diagram below illustrates the problem that this extension is
   intended to solve, for the case of a radio link.  Here PPPoE sessions
   are used between access concentrators (routers) and radio
   transmission systems that are shown as radio neighbors.  Each radio
   transmission system establishes point-to-point Radio Link Protocol
   (RLP) sessions with its neighbors and establishes a corresponding
   PPPoE session for each neighbor with the transmission system's
   associated access concentrator (router).  The radio logically
   associates the PPPoE session with the corresponding RLP session.







<span class="grey">Berry &amp; Holgate              Informational                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   +--------+       +-------+       +-------+       +--------+
   | Access |       | Host  |       | Host  |       | Access |
   | Conc.  |=======| Radio |~~~~~~~| Radio |=======| Conc.  |
   +--------+       +-------+       +-------+       +--------+
            |       |       |       |       |       |
            |-PPPoE-|       |--RLP--|       |-PPPoE-|
            |                                       |
            |-------------PPP Session---------------|

                     Figure 1. PPPoE Network

   The capabilities of the RF links between RLP neighbors may vary over
   time due to mobility and environmental conditions.  In many
   instances, the Host Radio has limited buffering capability to handle
   capacity changes in the RLP sessions.  To limit buffering in the Host
   Radio, the PPPoE credit flow control mechanism provides dynamic
   buffering feedback to the access concentrator.

   In the diagram above, from the access concentrator's perspective,
   each PPPoE session between it and the Host Radio represent a
   connection to a remote routable peer.  For efficient routing, the
   local Host Radio uses the link metric mechanism to dynamically update
   the access concentrator route cost of the associated link.

   While the example shows an RF-based application, the extensions are
   applicable to other media.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Payload"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Payload</span>

   The Ethernet payload version field retains its value of 0x01.  The
   extensions for credit flow control and link quality metrics are
   optional and backward compatible.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Overview%20of%20Protocol%20Extensions"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Overview of Protocol Extensions</span>

   PPPoE has two distinct stages.  There is a Discovery Stage and a PPP
   Session Stage.  During the Discovery Stage, the Host can optionally
   request a flow controlled PPP Session Stage.  Once the Access
   Concentrator acknowledges the Host flow control request, all PPP
   Session Stage traffic must be flow controlled.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Discovery%20Stage"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Discovery Stage</span>

   The packet exchange of the Discovery Stage is unchanged by this
   specification.  The specifications of the Session Request (PADR) and
   the Session Confirmation (PADS) packets are extended to include the
   optional Credit Tag Type-Length-Value (TLV).




<span class="grey">Berry &amp; Holgate              Informational                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   In addition, the optional Credit Grant (PADG) packet, the Credit
   Response (PADC) packet, and the Link Quality Metric (PADQ) packets
   are introduced.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20PPPoE%20Active%20Discovery%20Request%20%28PADR%29"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  PPPoE Active Discovery Request (PADR)</span>

   The PADR packet is extended to optionally contain a single Credit Tag
   TLV, indicating that the Host requests credit flow control for this
   session.  The Credit Tag contains the Forward Credit Notification
   (FCN) and the Backward Credit Notification (BCN) to be applied to the
   PPP Session Stage.  The FCN provides the initial credits granted to
   the Access Concentrator by the Host.  The BCN value is set to 0.

   An example packet is shown in <a href="#appendix-B">Appendix B</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20PPPoE%20Active%20Discovery%20Session-confirmation%20%28PADS%29"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  PPPoE Active Discovery Session-confirmation (PADS)</span>

   The PADS packet is extended to optionally contain a single Credit Tag
   TLV, indicating the Forward Credit Notification (FCN) and the
   Backward Credit Notification (BCN) of the PPP Session Stage.

   If the PADR contained a Credit Tag, then the Access Concentrator PADS
   packet indicates support for credit flow control by including a
   Credit Tag.  The PADS Credit Tag FCN represents the number of credits
   being initially granted to the Host.  The Credit Tag BCN is an echo
   of the number of credits that the Host had granted to the Access
   Concentrator in the previous PADR packet.

   Exchange of the Credit Tag TLV in the PADR and PADS indicates that
   credit flow control is supported by both the Access Concentrator and
   the Host for the designated PPP Session Stage.  This is binding and
   must be followed for the entire duration of the PPP Session Stage.  A
   session's credit binding must be established prior to any other
   credit indications can be exchanged.

   The Access Concentrator PADS should only carry the Credit Tag in
   response to a Host PADR with Credits.  If the Access Concentrator
   does not support credit flow, it should not include the Credit Tag in
   its PADS response.  The Host must terminate a credit-based session
   that cannot be supported by the Access Concentrator.  Credit Tags
   transmitted outside an established credit based session must be
   ignored.

   An example packet is shown in <a href="#appendix-B">Appendix B</a>.







<span class="grey">Berry &amp; Holgate              Informational                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20PPPoE%20Active%20Discovery%20Session-Grant%20%28PADG%29"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  PPPoE Active Discovery Session-Grant (PADG)</span>

   The PPPoE Active Discovery Session-Grant (PADG) is a new packet
   defined in this specification.  An Access Concentrator or Host MAY
   send a PADG at any time after the PADR/PADS exchange to grant
   incremental flow control credits.  The CODE field is set to 0x0A and
   the SESSION_ID must be set to the unique value generated for this
   PPPoE Session.

   The peer may then transmit data until the credits are exhausted.

   When the peer receives a PADG packet, it adds the incremental credits
   to its working credit count and responds with a PPPoE Active
   Discovery Session-Credit (PADC) packet indicating the accumulated
   credits.

   The PADG packet must contain a single Credit Tag TLV, indicating the
   Forward Credit Notification (FCN) and the Backward Credit
   Notification (BCN) of the PPP Session.

   The Credit Tag FCN indicates the number of incremental credits being
   granted to the peer by the node.  A value between 1 and 0xffff
   represents an incremental credit grant.  The peer must add these
   credits to its accumulated transmit credit count.  A value of 0x0000
   represents a NULL grant, meaning that there are no additional credits
   being granted.

   The Credit Tag BCN indicates the remaining absolute credits that have
   been granted by the peer to the node.

   Once a credit has been granted, it must be honored.  The largest
   number of outstanding credits at any time is 0xffff.


   The PADG packet must contain a single Sequence Number Tag TLV.  This
   tag is used to carry a unique 16-bit sequence number to uniquely
   identify each request.  The sequence number should be initialized to
   zero and incremented by one for each new PADG.  For retransmitted
   PADGs, the same sequence number that was used in the previous packet
   transmission is repeated.

   An example packet is shown in <a href="#appendix-B">Appendix B</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20PPPoE%20Active%20Discovery%20Session-Credit%20Response%20%28PADC%29"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  PPPoE Active Discovery Session-Credit Response (PADC)</span>

   The PPPoE Active Discovery Session-Credit Response (PADC) is a new
   packet defined in this specification.  An Access Concentrator or Host
   must send a PADC in response to a PADG.  The CODE field is set to



<span class="grey">Berry &amp; Holgate              Informational                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   0x0B, and the SESSION_ID must be set to the unique value generated
   for this PPPoE session.

   The PADC packet must contain a single Credit Tag TLV, indicating the
   Forward Credit Notification (FCN) and the Backward Credit
   Notification (BCN) of the PPPoE session, and any number of other Tag
   types.

   The Credit Tag FCN represents the absolute credits remaining that
   have been granted to the peer by the node.  The Credit Tag BCN
   represents the remaining absolute credits that have been granted to
   the node from the peer.

   The PADC packet must contain a single Sequence Number Tag.  The
   sequence number must be the sequence number associated with the PADG.

   An example packet is shown in <a href="#appendix-B">Appendix B</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20PPPoE%20Active%20Discovery%20Quality%20%28PADQ%29"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  PPPoE Active Discovery Quality (PADQ)</span>

   The PPPoE Active Discovery Quality (PADQ) is a new packet defined in
   this specification.  An Access Concentrator or Host may send an
   optional PADQ at any time to query or report link quality metrics.

   When transmitting PPP [<a href="#ref-1" title='"The Point-to-Point Protocol (PPP)"'>1</a>] streams over wireless links through radio
   modems, the quality of the RF link directly affects the throughput.
   The PPPoE Active Discovery Quality (PADQ) packet can be used by the
   radio modem to report RF link metrics.  The CODE field is set to
   0x0C, and the SESSION_ID must be set to the unique value generated
   for this PPPoE session.

   The PADQ must carry a single Metric Tag TYPE, which contains the
   following fields:

       Receive only - a bit that indicates whether the link is bi-
       directional or receive only.  A value of -1- indicates that the
       link is receive-only.

       Maximum data rate - the maximum theoretical data rate, in
       kilobits per second (kbps), that the Host link is capable of
       providing.  When metrics are reported, the maximum data rate must
       be reported.

       Current data rate - the current data rate, in kilobits per second
       (kbps), achieved on the Host link.  If there is no distinction
       between maximum data rate and current data rate, current data
       rate should equal to the maximum data rate.




<span class="grey">Berry &amp; Holgate              Informational                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


       Latency - the transmission delay that a packet encounters as it
       is transmitted over the Host link.  This is reported in absolute
       delay, milliseconds.  If latency cannot be calculated, a value of
       0 should be reported.

       Resources - a percentage, 0-100, representing the amount of
       remaining or available resources, such as battery power.  If
       resources cannot be calculated, a value of 100 should be
       reported.

       Relative Link Quality (RLQ) - a non-dimensional number, 0-100,
       representing the relative link quality.  A value of 100
       represents a link of the highest quality.  If the RLQ cannot be
       calculated, a value of 100 should be reported.

   The PPPoE Active Discovery Quality (PADQ) packet can be used to query
   link metrics by setting the PADQ Metric Tag Length to zero.

   An example packet is shown in <a href="#appendix-B">Appendix B</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20PPP%20Session%20Stage"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  PPP Session Stage</span>

   This specification defines the optional use of TLV Tags in the PPP
   Session Stage.  The first field following the PPP Session Stage
   LENGTH must be checked.  If the value is equal to the PPP Protocol
   identifier (0xc021), then normal packet (payload) processing occurs.
   When the field following the PPP Session Stage LENGTH is not the PPP
   Protocol identifier (0xc021), a TLV is assumed.  In this case, the
   Tag length is subtracted from the overall payload length.

   The Credit Tag is the only optional TLV permitted in the PPP Session
   Stage.  The Credit Tag TLV is used to support in-band flow control.

   A PPP Session Stage packet with Credits is shown in <a href="#appendix-B">Appendix B</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Credit%20Flow%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Credit Flow Considerations</span>

   For a given session, credit grants exchanged in the Discovery Stage,
   PADG-PADC, are referred to as out-of-band.  Credit grants exchanged
   in the PPP Session Stage are referred to as in-band.  Credit
   processing is only applied to the packets transmitted in the PPP
   Session Stage.

   Out-of-band credit management is handled by periodic exchange of the
   PPPoE Active Discovery Grant (PADG) and PPPoE Active Discovery Credit
   (PADC) packets.





<span class="grey">Berry &amp; Holgate              Informational                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   In-band credit management allows credits to be incrementally granted
   with each PPP Session Stage packet.  These in-band incremental credit
   grants are not explicitly unacknowledged.  However, they are
   reflected in the in-band credit flow from the peer node.  This offers
   the greatest credit granting efficiency when traffic rates are high.

   Once agreed upon during the Discovery Stage, credit grants are
   required to transmit packets in the PPP Session Stage.  A node must
   grant credits to its peer, before the peer can transmit packets to
   the granting node.

   Credits are granted incrementally in the forward direction.  Locally,
   a node manages the credits that it has granted to a peer, as well as
   the credits that a peer has granted to it.

   Grants received from a peer are added to a local running credit
   counter.  The accumulated credits are decremented with each packet
   the node transmits to the peer.  When the running counter reaches
   zero, the node stops transmitting packets to the peer.  The values of
   the PADC are not simply an echo of the PADG.  They represent the
   current internal FCN/BCN values of that node.

   To manage the credits that a node has granted, the node maintains a
   running counter.  With each PPP Session Stage packet received from
   the peer, the running counter is decremented.  When the running
   counter reaches zero, no additional packets are expected.  The node
   incrementally grants more credits to the peer to maintain packet
   flow.  Packets received when granted credits that have been exhausted
   are discarded.

   The largest possible credit limit is 0x0ffff.  If an incremental
   credit grant causes the accumulated count to exceed this value, the
   max value is used.

   One unit of credit represents 64-bytes, so a grant of 4 credits
   translates to 256 bytes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20PADG%20and%20PADC%20Retransmission"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  PADG and PADC Retransmission</span>

   When a node does not receive a PADC packet in response to a PADG
   within a specified amount of time, it should transmit a new PADG
   packet with zero credits, using the same sequence number and double
   the waiting period.  A PADC response with the associated sequence
   number will indicate whether or not the previously granted credits
   were accumulated.  If they were not, a PADG with credits, with an
   incremented sequence number, should be transmitted.  This process
   should be repeated until granted credits are properly acknowledged or
   as many times as desired.



<span class="grey">Berry &amp; Holgate              Informational                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   When a node does not receive a PADQ metric packet within a specified
   amount of time, it should resend the PADQ query packet and double the
   waiting period.  This can be repeated as many times as desired.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Other%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Other Considerations</span>

   A node may autonomously generate PADQ metric packets.  The rate of
   autonomously generated PADQ metric packets may need to be throttled
   so as not to overrun the peer.

   The sending and receiving of PPPoE control packets are independent of
   credit counts.  For example, a node must always be able to receive a
   PADG and send a PADC.

   During normal operation, nodes may disagree about the number of
   credits.  Operational credit mismatches would occur due to packets in
   transit on the wire.  Much larger credit mismatches can occur if
   there are transmission errors.  To correct these larger errors, the
   BCN fields of the PADG and PADC packets and in-band credit grants
   from a peer should be used by the receiving node to set the credit
   values of its peer.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  IANA Considerations</span>

   IANA has assigned the following PPPoE TAG Values as noted in [<a href="#ref-3" title='"IANA Considerations for PPP over Ethernet (PPPoE)"'>3</a>]:

   TAG Value     TAG Name              Tag Description         Reference
   -----------   -------------------   ---------------------   ---------
   262  0x0106   Credits               See the reference       [<a href="rfc4938.html">RFC4938</a>]
   263  0x0107   Metrics               See the reference       [<a href="rfc4938.html">RFC4938</a>]
   264  0x0108   Sequence Number       See the reference       [<a href="rfc4938.html">RFC4938</a>]

   IANA has assigned the following PPPoE Code fields as noted in [<a href="#ref-3" title='"IANA Considerations for PPP over Ethernet (PPPoE)"'>3</a>]:

   Code      PPPoE Packet Name              Description        Reference
   --------  -----------------------------  -----------------  ---------
   10  0x0a  PADG, Session-Grant            See the reference  [<a href="rfc4938.html">RFC4938</a>]
   11  0x0b  PADC, Session-Credit Response  See the reference  [<a href="rfc4938.html">RFC4938</a>]
   12  0x0c  PADQ, Quality                  See the reference  [<a href="rfc4938.html">RFC4938</a>]

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Security%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Security Considerations</span>

   This memo defines a mechanism for adding flow control to the existing
   PPP Over Ethernet (PPPoE) sessions.  These extensions are subsequent
   to the existing PPPoE security mechanisms as described in <a href="rfc2516.html">RFC 2516</a>
   [<a href="#ref-2" title='"A Method for Transmitting PPP Over Ethernet (PPPoE)"'>2</a>].  It is required that the Service Tag and Session ID always be
   validated prior to processing credits.




<span class="grey">Berry &amp; Holgate              Informational                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


Appendix A: Tag Values

   Feature Tag_Types and Tag_Values

   0x0106 Credits

   This tag contains the Forward Credit Notification (FCN) and the
   Backward Credit Notification (BCN).  The Credit Tag TLV is OPTIONAL
   with the PADR, PADS, and the PPPoE data payload packet
   (ETHER_TYPE=8864).

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0106       |        Tag Length=0x04        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              FCN              |              BCN              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   0x0107 Metrics

   This tag is used to report the link quality and performance.  The
   Metrics Tag TLV contains the Receive Only indicator, Resource status,
   Latency, Relative Link Quality (RLQ), Current data rate, and Maximum
   data rate.  The Metrics TLV is required by the PADQ packet.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0107       |        Tag Length=0x0A        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Reserved          |R|      RLQ      |    Resource   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Latency (MS)          |   Current Datarate (kbps)     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Maximum Datarate (kbps)    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   0x0108 Sequence Number

   This tag is used to carry a unique 16-bit sequence number in order to
   identify a specific request and the associated response.  The
   sequence number should be initialized to zero and incremented by one
   for each new request.  For retransmitted packets, the same sequence
   number that was used in the previous packet transmission is repeated.
   The PADG and PADC packets require the Sequence Number Tag.





<span class="grey">Berry &amp; Holgate              Informational                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   For example, the sequence number sent in the PADG request is echoed
   in the PADC response.  This ties a specific PADC response to a
   specific PADG request.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0108       |        Tag Length=0x02        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Sequence Number         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Appendix B: Example Message Formats

   A PADR packet with OPTIONAL Credit Tag Type 0x0106:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Access_Concentrator_mac_addr                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Host_mac_addr (cont)                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x19  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     SESSION_ID = 0x1234       |      LENGTH = 0x0C            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0101       |        Tag Length=0x00        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0106       |        Tag Length=0x04        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              FCN              |              BCN              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
















<span class="grey">Berry &amp; Holgate              Informational                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   A PADS packet with OPTIONAL Credit Tag Type 0x0106:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Access_Concentrator_mac_addr                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Host_mac_addr (cont)                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x65  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     SESSION_ID = 0x1234       |      LENGTH = 0x0C            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0101       |        Tag Length=0x00        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0106       |        Tag Length=0x04        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              FCN              |              BCN              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   A PADG packet with Credit Tag Type 0x0106:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Destination_mac_addr                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Destination_mac_addr(c)    |       Source_mac_addr         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Source mac_addr (cont)                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x0A  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     SESSION_ID = 0x1234       |      LENGTH = 0x0E            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0108       |        Tag Length=0x02        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Sequence Number         |       Tag Type = 0x0106       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        Tag Length=0x04        |               FCN             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              BCN              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+





<span class="grey">Berry &amp; Holgate              Informational                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   A PADC packet with Credit Tag Type 0x0106:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Destination_mac_addr                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Destination_mac_addr(c)    |       Source_mac_addr         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Source mac_addr (cont)                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x0B  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     SESSION_ID = 0x1234       |      LENGTH = 0x0E            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0108       |        Tag Length=0x02        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Sequence Number         |       Tag Type = 0x0106       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        Tag Length=0x04        |               FCN             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              BCN              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   A PADQ packet to query for the link metrics: This is indicated by
   the Metric Tag Length=0.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Access_Concentrator_mac_addr                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Host_mac_addr (cont)                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x0C  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     SESSION_ID = 0x1234       |      LENGTH = 0x08            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0101       |        Tag Length=0x00        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0107       |        Tag Length=0x00        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+






<span class="grey">Berry &amp; Holgate              Informational                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   A PADQ packet with Metric Tag Type 0x0107:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Access_Concentrator_mac_addr                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Host_mac_addr (cont)                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    ETHER_TYPE = 0x8863        | v = 1 | t = 1 |  CODE = 0x0C  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     SESSION_ID = 0x1234       |      LENGTH = 0x12            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0101       |        Tag Length=0x00        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0107       |        Tag Length=0x0A        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Reserved          |R|      RLQ      |    Resource   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Latency (MS)          |   Current Datarate (kbps)     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Maximum Datarate (kbps)    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


























<span class="grey">Berry &amp; Holgate              Informational                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


   A PPP LCP packet with optional Credit Tag Type 0x0106:

   While the PPP protocol value is shown (0xc021), the PPP payload is
   left to the reader.  This is a packet from the Host to the Access
   Concentrator.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Access_Concentrator_mac_addr                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Access_Concentrator_mac_addr(c)|        Host_mac_addr          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Host_mac_addr (cont)                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    ETHER_TYPE = 0x8864        | v = 1 | t = 1 |  CODE = 0x00  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     SESSION_ID = 0x1234       |      LENGTH = (payload)       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Tag Type = 0x0106       |        Tag Length=0x04        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              FCN              |              BCN              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    PPP PROTOCOL = 0xc021      |        PPP payload           ~
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Acknowledgements

   The authors would like to acknowledge the influence and contributions
   from Billy Moon, Fred Baker, Stan Ratliff, and Ed Paradise.

Normative References

   [<a id="ref-1" name="ref-1">1</a>] Simpson, W., Ed., "The Point-to-Point Protocol (PPP)", STD 51,
       <a href="rfc1661.html">RFC 1661</a>, July 1994.

   [<a id="ref-2" name="ref-2">2</a>] Mamakos, L., Lidl, K., Evarts, J., Carrel, D., Simone, D., and R.
       Wheeler, "A Method for Transmitting PPP Over Ethernet (PPPoE)",
       <a href="rfc2516.html">RFC 2516</a>, February 1999.

   [<a id="ref-3" name="ref-3">3</a>] Arberg, P. and V. Mammoliti, "IANA Considerations for PPP over
       Ethernet (PPPoE)", <a href="rfc4937.html">RFC 4937</a>, June 2007.









<span class="grey">Berry &amp; Holgate              Informational                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


Authors' Addresses

   Bo Berry
   Cisco
   170 West Tasman Drive
   San Jose, CA  95134
   USA
   EMail: bberry@cisco.com


   Howard Holgate
   Cisco
   170 West Tasman Drive
   San Jose, CA  95134
   USA
   EMail: hholgate@cisco.com



































<span class="grey">Berry &amp; Holgate              Informational                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc4938.html">RFC 4938</a>           PPPoE with Credit Flow and Metrics          June 2007</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and at www.rfc-editor.org/copyright.html, and
   except as set forth therein, the authors retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Berry &amp; Holgate              Informational                     [Page 17]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4938 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:38 GMT --></html>