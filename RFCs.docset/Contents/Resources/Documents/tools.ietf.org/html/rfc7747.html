<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc7747 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:19 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:7747" name="DC.Identifier"/>
<meta content="BGP is widely deployed and used by several service providers as the
default inter-AS (Autonomous System) routing protocol. It is of utmost
importance to ensure that when a BGP peer or a downstream link of a
BGP peer fails, the alternate paths are rapidly used and routes via
these alternate paths are installed. This document provides the basic
BGP benchmarking methodology using existing BGP convergence
terminology as defined in RFC 4098." name="DC.Description.Abstract"/>
<meta content="Hares, Susan" name="DC.Creator"/>
<meta content="Varlashkin, Ilya" name="DC.Creator"/>
<meta content="Papneja, Rajiv" name="DC.Creator"/>
<meta content="Parise, Bhavani" name="DC.Creator"/>
<meta content="Lee, Dean" name="DC.Creator"/>
<meta content="April, 2016" name="DC.Date.Issued"/>
<meta content="Basic BGP Convergence Benchmarking Methodology for Data-Plane Convergence" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 7747 - Basic BGP Convergence Benchmarking Methodology for Data-Plane Convergence</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7747.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7747" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-bmwg-bgp-basic-convergence" title="draft-ietf-bmwg-bgp-basic-convergence">draft-ietf-bmwg...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7747" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7747" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7747" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                        R. Papneja
Request for Comments: 7747                           Huawei Technologies
Category: Informational                                        B. Parise
ISSN: 2070-1721                                          Skyport Systems
                                                                S. Hares
                                                     Huawei Technologies
                                                                  D. Lee
                                                                    IXIA
                                                           I. Varlashkin
                                                                  Google
                                                              April 2016


             <span class="h1">Basic BGP Convergence Benchmarking Methodology</span>
                       <span class="h1">for Data-Plane Convergence</span>

Abstract

   BGP is widely deployed and used by several service providers as the
   default inter-AS (Autonomous System) routing protocol.  It is of
   utmost importance to ensure that when a BGP peer or a downstream link
   of a BGP peer fails, the alternate paths are rapidly used and routes
   via these alternate paths are installed.  This document provides the
   basic BGP benchmarking methodology using existing BGP convergence
   terminology as defined in <a href="rfc4098.html">RFC 4098</a>.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7747">http://www.rfc-editor.org/info/rfc7747</a>.










<span class="grey">Papneja, et al.               Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

























<span class="grey">Papneja, et al.               Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-1.1">1.1</a>.  Benchmarking Definitions  . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-1.2">1.2</a>.  Purpose of BGP FIB (Data-Plane) Convergence . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-1.3">1.3</a>.  Control-Plane Convergence . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-1.4">1.4</a>.  Benchmarking Testing  . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-2">2</a>.  Existing Definitions and Requirements . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-3">3</a>.  Test Topologies . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-3.1">3.1</a>.  General Reference Topologies  . . . . . . . . . . . . . .   <a href="#page-7">7</a>
   <a href="#section-4">4</a>.  Test Considerations . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
     <a href="#section-4.1">4.1</a>.  Number of Peers . . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-4.2">4.2</a>.  Number of Routes per Peer . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-4.3">4.3</a>.  Policy Processing/Reconfiguration . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-4.4">4.4</a>.  Configured Parameters (Timers, etc.)  . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-4.5">4.5</a>.  Interface Types . . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-4.6">4.6</a>.  Measurement Accuracy  . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-4.7">4.7</a>.  Measurement Statistics  . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-4.8">4.8</a>.  Authentication  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-4.9">4.9</a>.  Convergence Events  . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
     <a href="#section-4.10">4.10</a>. High Availability . . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
   <a href="#section-5">5</a>.  Test Cases  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
     <a href="#section-5.1">5.1</a>.  Basic Convergence Tests . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
       <a href="#section-5.1.1">5.1.1</a>.  RIB-IN Convergence  . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
       <a href="#section-5.1.2">5.1.2</a>.  RIB-OUT Convergence . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
       <a href="#section-5.1.3">5.1.3</a>.  eBGP Convergence  . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
       <a href="#section-5.1.4">5.1.4</a>.  iBGP Convergence  . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
       <a href="#section-5.1.5">5.1.5</a>.  eBGP Multihop Convergence . . . . . . . . . . . . . .  <a href="#page-17">17</a>
     <a href="#section-5.2">5.2</a>.  BGP Failure/Convergence Events  . . . . . . . . . . . . .  <a href="#page-18">18</a>
       <a href="#section-5.2.1">5.2.1</a>.  Physical Link Failure on DUT End  . . . . . . . . . .  <a href="#page-18">18</a>
       <a href="#section-5.2.2">5.2.2</a>.  Physical Link Failure on Remote/Emulator End  . . . .  <a href="#page-19">19</a>
       <a href="#section-5.2.3">5.2.3</a>.  ECMP Link Failure on DUT End  . . . . . . . . . . . .  <a href="#page-20">20</a>
     5.3.  BGP Adjacency Failure (Non-Physical Link Failure) on
           Emulator  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-20">20</a>
     <a href="#section-5.4">5.4</a>.  BGP Hard Reset Test Cases . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>
       <a href="#section-5.4.1">5.4.1</a>.  BGP Non-Recovering Hard Reset Event on DUT  . . . . .  <a href="#page-21">21</a>
     <a href="#section-5.5">5.5</a>.  BGP Soft Reset  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-22">22</a>
     <a href="#section-5.6">5.6</a>.  BGP Route Withdrawal Convergence Time . . . . . . . . . .  <a href="#page-24">24</a>
     <a href="#section-5.7">5.7</a>.  BGP Path Attribute Change Convergence Time  . . . . . . .  <a href="#page-26">26</a>
     <a href="#section-5.8">5.8</a>.  BGP Graceful Restart Convergence Time . . . . . . . . . .  <a href="#page-27">27</a>
   <a href="#section-6">6</a>.  Reporting Format  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-29">29</a>
   <a href="#section-7">7</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-32">32</a>
   <a href="#section-8">8</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-32">32</a>
     <a href="#section-8.1">8.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-32">32</a>
     <a href="#section-8.2">8.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-33">33</a>
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-34">34</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-35">35</a>




<span class="grey">Papneja, et al.               Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document defines the methodology for benchmarking data-plane
   Forwarding Information Base (FIB) convergence performance of BGP in
   routers and switches using topologies of three or four nodes.  The
   methodology proposed in this document applies to both IPv4 and IPv6,
   and if a particular test is unique to one version, it is marked
   accordingly.  For IPv6 benchmarking, the Device Under Test (DUT) will
   require the support of Multiprotocol BGP (MP-BGP) [<a href="rfc4760.html" title='"Multiprotocol Extensions for BGP-4"'>RFC4760</a>]
   [<a href="rfc2545.html" title='"Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing"'>RFC2545</a>].  Similarly, both Internal BGP (iBGP) and External BGP
   (eBGP) are covered in the tests as applicable.

   The scope of this document is to provide methodology for BGP FIB
   convergence measurements with BGP functionality limited to IPv4 and
   IPv6 as defined in [<a href="rfc4271.html" title='"A Border Gateway Protocol 4 (BGP-4)"'>RFC4271</a>] and MP-BGP [<a href="rfc4760.html" title='"Multiprotocol Extensions for BGP-4"'>RFC4760</a>] [<a href="rfc2545.html" title='"Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing"'>RFC2545</a>].  Other
   BGP extensions to support Layer 2 and Layer 3 Virtual Private
   Networks (VPNs) are outside the scope of this document.  Interaction
   with IGPs (IGP interworking) is outside the scope of this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Benchmarking%20Definitions"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Benchmarking Definitions</span>

   The terminology used in this document is defined in [<a href="rfc4098.html" title='"Terminology for Benchmarking BGP Device Convergence in the Control Plane"'>RFC4098</a>].  One
   additional term is defined in this document as follows.

   FIB (data-plane) convergence is defined as the completion of all FIB
   changes so that all forwarded traffic then takes the newly proposed
   route.  <a href="rfc4098.html">RFC 4098</a> defines the terms 'BGP device', 'FIB', and
   'forwarded traffic'.  Data-plane convergence is different than
   control-plane convergence within a node.

   This document defines methodology to test

   o  data-plane convergence on a single BGP device that supports the
      BGP functionality with a scope as outlined above; and

   o  using test topology of three or four nodes that are sufficient to
      recreate the convergence events used in the various tests of this
      document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Purpose%20of%20BGP%20FIB%20%28Data-Plane%29%20Convergence"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Purpose of BGP FIB (Data-Plane) Convergence</span>

   In the current Internet architecture, the inter-AS transit is
   primarily available through BGP.  To maintain reliable connectivity
   within intra-domains or across inter-domains, fast recovery from
   failures remains most critical.  To ensure minimal traffic losses,
   many service providers are requiring BGP implementations to converge
   the entire Internet routing table within sub-seconds at FIB level.




<span class="grey">Papneja, et al.               Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   Furthermore, to compare these numbers amongst various devices,
   service providers are also looking at ways to standardize the
   convergence measurement methods.  This document offers test methods
   for simple topologies.  These simple tests will provide a quick high-
   level check of BGP data-plane convergence across multiple
   implementations from different vendors.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.3.%20%20Control-Plane%20Convergence"></a><a class="selflink" href="#section-1.3" name="section-1.3">1.3</a>.  Control-Plane Convergence</span>

   The convergence of BGP occurs at two levels: Routing Information Base
   (RIB) and FIB convergence.  <a href="rfc4098.html">RFC 4098</a> defines terms for BGP control-
   plane convergence.  Methodologies that test control-plane convergence
   are out of scope for this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.4.%20%20Benchmarking%20Testing"></a><a class="selflink" href="#section-1.4" name="section-1.4">1.4</a>.  Benchmarking Testing</span>

   In order to ensure that the results obtained in tests are repeatable,
   careful setup of initial conditions and exact steps are required.

   This document proposes these initial conditions, test steps, and
   result checking.  To ensure uniformity of the results, all optional
   parameters SHOULD be disabled and all settings SHOULD be changed to
   default; these may include BGP timers as well.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Existing%20Definitions%20and%20Requirements"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Existing Definitions and Requirements</span>

   "Benchmarking Terminology for Network Interconnect Devices" [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>]
   and "Benchmarking Terminology for LAN Switching Devices" [<a href="rfc2285.html" title='"Benchmarking Terminology for LAN Switching Devices"'>RFC2285</a>]
   SHOULD be reviewed in conjunction with this document.  WLAN-specific
   terms and definitions are also provided in Clauses 3 and 4 of the
   IEEE 802.11 standard [<a href="#ref-IEEE.802.11">IEEE.802.11</a>].  Commonly used terms may also be
   found in <a href="rfc1983.html">RFC 1983</a> [<a href="rfc1983.html" title="&quot;Internet Users' Glossary&quot;">RFC1983</a>].

   For the sake of clarity and continuity, this document adopts the
   general template for benchmarking terminology set out in <a href="rfc1242.html#section-2">Section 2 of
   [RFC1242]</a>.  Definitions are organized in alphabetical order and
   grouped into sections for ease of reference.  The following terms are
   assumed to be taken as defined in <a href="rfc1242.html">RFC 1242</a> [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>]: Throughput,
   Latency, Constant Load, Frame Loss Rate, and Overhead Behavior.  In
   addition, the following terms are taken as defined in [<a href="rfc2285.html" title='"Benchmarking Terminology for LAN Switching Devices"'>RFC2285</a>]:
   Forwarding Rates, Maximum Forwarding Rate, Loads, Device Under Test
   (DUT), and System Under Test (SUT).

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].





<span class="grey">Papneja, et al.               Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Test%20Topologies"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Test Topologies</span>

   This section describes the test setups for use in BGP benchmarking
   tests measuring convergence of the FIB (data-plane) after BGP updates
   have been received.

   These test setups have three or four nodes with the following
   configuration:

   1.  Basic test setup

   2.  Three-node setup for iBGP or eBGP convergence

   3.  Setup for eBGP multihop test Scenario

   4.  Four-node setup for iBGP or eBGP convergence

   Individual tests refer to these topologies.

   Figures 1 through 4 use the following conventions:

   o  AS-X: Autonomous System X

   o  Loopback Int: Loopback interface on a BGP-enabled device

   o  HLP, HLP1, HLP2: Helper routers running the same version of BGP as
      the DUT

   o  All devices MUST be synchronized using NTP or some other clock
      synchronization mechanism





















<span class="grey">Papneja, et al.               Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20General%20Reference%20Topologies"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  General Reference Topologies</span>

   Emulator acts as one or more BGP peers for different test cases.

           +----------+                             +------------+
           |          |   Traffic Interfaces        |            |
           |          |-----------------------1---- | tx         |
           |          |-----------------------2---- | tr1        |
           |          |-----------------------3-----| tr2        |
           |    DUT   |                             | Emulator   |
           |          |    Routing Interfaces       |            |
           |      Dp1 |---------------------------  |Emp1        |
           |          |      BGP Peering            |            |
           |      Dp2 |---------------------------- |Emp2        |
           |          |      BGP Peering            |            |
           +----------+                             +------------+

                        Figure 1: Basic Test Setup


         +------------+        +-----------+           +-----------+
         |            |        |           |           |           |
         |            |        |           |           |           |
         |   HLP      |        |  DUT      |           | Emulator  |
         |  (AS-X)    |--------| (AS-Y)    |-----------|  (AS-Z)   |
         |            |        |           |           |           |
         |            |        |           |           |           |
         |            |        |           |           |           |
         +------------+        +-----------+           +-----------+
                 |                                            |
                 |                                            |
                 +--------------------------------------------+

         Figure 2: Three-Node Setup for eBGP and iBGP Convergence

















<span class="grey">Papneja, et al.               Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


              +----------------------------------------------+
              |                                              |
              |                                              |
         +------------+        +-----------+           +-----------+
         |            |        |           |           |           |
         |            |        |           |           |           |
         |   HLP      |        |  DUT      |           | Emulator  |
         |  (AS-X)    |--------| (AS-Y)    |-----------|  (AS-Z)   |
         |            |        |           |           |           |
         |            |        |           |           |           |
         |            |        |           |           |           |
         +------------+        +-----------+           +-----------+
              |Loopback-Int         |Loopback-Int
              |                     |
              +                     +

           Figure 3: BGP Convergence for eBGP Multihop Scenario


          +---------+     +--------+     +--------+     +---------+
          |         |     |        |     |        |     |         |
          |         |     |        |     |        |     |         |
          |  HLP1   |     |  DUT   |     |  HLP2  |     |Emulator |
          | (AS-X)  |-----| (AS-X) |-----| (AS-Y) |-----| (AS-Z)  |
          |         |     |        |     |        |     |         |
          |         |     |        |     |        |     |         |
          |         |     |        |     |        |     |         |
          +---------+     +--------+     +--------+     +---------+
               |                                             |
               |                                             |
               +---------------------------------------------+

          Figure 4: Four-Node Setup for eBGP and iBGP Convergence

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Test%20Considerations"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Test Considerations</span>

   The test cases for measuring convergence for iBGP and eBGP are
   different.  Both iBGP and eBGP use different mechanisms to advertise,
   install, and learn the routes.  Typically, an iBGP route on the DUT
   is installed and exported when the next hop is valid.  For eBGP, the
   route is installed on the DUT with the remote interface address as
   the next hop, with the exception of the multihop test case (as
   specified in the test).








<span class="grey">Papneja, et al.               Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Number%20of%20Peers"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Number of Peers</span>

   "Number of Peers" is defined as the number of BGP neighbors or
   sessions the DUT has at the beginning of the test.  The peers are
   established before the tests begin.  The relationship could be either
   iBGP or eBGP peering depending upon the test case requirement.

   The DUT establishes one or more BGP peer sessions with one or more
   emulated routers or Helper Nodes.  Additional peers can be added
   based on the testing requirements.  The number of peers enabled
   during the testing should be well documented in the report matrix.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Number%20of%20Routes%20per%20Peer"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Number of Routes per Peer</span>

   "Number of Routes per Peer" is defined as the number of routes
   advertised or learned by the DUT per session or through a neighbor
   relationship with an emulator or Helper Node.  The Tester, emulating
   as a BGP neighbor, MUST advertise at least one route per BGP peer.

   Each test run must identify the route stream in terms of route
   packing, route mixture, and number of routes.  This route stream must
   be well documented in the reporting stream.  <a href="rfc4098.html">RFC 4098</a> defines these
   terms.

   It is RECOMMENDED that the user consider advertising the entire
   current Internet routing table per peering session using an Internet
   route mixture with unique or non-unique routes.  If multiple peers
   are used, it is important to precisely document the timing sequence
   between the peer sending routes (as defined in <a href="rfc4098.html">RFC 4098</a>).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Policy%20Processing%2FReconfiguration"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Policy Processing/Reconfiguration</span>

   The DUT MUST run one baseline test where policy is the Minimal policy
   as defined in <a href="rfc4098.html">RFC 4098</a>.  Additional runs may be done with the policy
   that was set up before the tests began.  Exact policy settings MUST
   be documented as part of the test.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Configured%20Parameters%20%28Timers%2C%20etc.%29"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Configured Parameters (Timers, etc.)</span>

   There are configured parameters and timers that may impact the
   measured BGP convergence times.

   The benchmark metrics MAY be measured at any fixed values for these
   configured parameters.







<span class="grey">Papneja, et al.               Informational                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   It is RECOMMENDED these configure parameters have the following
   settings: a) default values specified by the respective RFC, b)
   platform-specific default parameters, and c) values as expected in
   the operational network.  All optional BGP settings MUST be kept
   consistent across iterations of any specific tests

   Examples of the configured parameters that may impact measured BGP
   convergence time include, but are not limited to:

      1.  Interface failure detection timer

      2.  BGP keepalive timer

      3.  BGP holdtime

      4.  BGP update delay timer

      5.  ConnectRetry timer

      6.  TCP segment size

      7.  Minimum Route Advertisement Interval (MRAI)

      8.  MinASOriginationInterval (MAOI)

      9.  Route flap damping parameters

      10.  TCP Authentication Option (TCP AO or TCP MD5)

      11.  Maximum TCP window size

      12.  MTU

   The basic-test settings for the parameters should be:

      1.  Interface failure detection timer (0 ms)

      2.  BGP keepalive timer (1 min)

      3.  BGP holdtime (3 min)

      4.  BGP update delay timer (0 s)

      5.  ConnectRetry timer (1 s)

      6.  TCP segment size (4096 bytes)

      7.  Minimum Route Advertisement Interval (MRAI) (0 s)



<span class="grey">Papneja, et al.               Informational                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


      8.  MinASOriginationInterval (MAOI) (0 s)

      9.  Route flap damping parameters (off)

      10.  TCP Authentication Option (off)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20Interface%20Types"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  Interface Types</span>

   The type of media dictates which test cases may be executed; each
   interface type has a unique mechanism for detecting link failures,
   and the speed at which that mechanism operates will influence the
   measurement results.  All interfaces MUST be of the same media and
   throughput for all iterations of each test case.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6.%20%20Measurement%20Accuracy"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a>.  Measurement Accuracy</span>

   Since observed packet loss is used to measure the route convergence
   time, the time between two successive packets offered to each
   individual route is the highest possible accuracy of any packet-loss-
   based measurement.  When packet jitter is much less than the
   convergence time, it is a negligible source of error, and hence, it
   will be treated as within tolerance.

   Other options to measure convergence are the Time-Based Loss Method
   (TBLM) and Timestamp-Based Method (TBM) [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

   An exterior measurement on the input media (such as Ethernet) is
   defined by this specification.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.7.%20%20Measurement%20Statistics"></a><a class="selflink" href="#section-4.7" name="section-4.7">4.7</a>.  Measurement Statistics</span>

   The benchmark measurements may vary for each trial due to the
   statistical nature of timer expirations, CPU scheduling, etc.  It is
   recommended to repeat the test multiple times.  Evaluation of the
   test data must be done with an understanding of generally accepted
   testing practices regarding repeatability, variance, and statistical
   significance of a small number of trials.

   For any repeated tests that are averaged to remove variance, all
   parameters MUST remain the same.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.8.%20%20Authentication"></a><a class="selflink" href="#section-4.8" name="section-4.8">4.8</a>.  Authentication</span>

   Authentication in BGP is done using the TCP Authentication Option
   [<a href="rfc5925.html" title='"The TCP Authentication Option"'>RFC5925</a>].  (In some legacy situations, the authentication may still
   be with TCP MD5).  The processing of the authentication hash,
   particularly in devices with a large number of BGP peers and a large
   amount of update traffic, can have an impact on the control plane of



<span class="grey">Papneja, et al.               Informational                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   the device.  If authentication is enabled, it MUST be documented
   correctly in the reporting format.

   Also, it is recommended that trials MUST be with the same Secure
   Inter-Domain Routing (SIDR) features [<a href="rfc7115.html" title='"Origin Validation Operation Based on the Resource Public Key Infrastructure (RPKI)"'>RFC7115</a>] [<a href="#ref-BGPsec" title='"BGPsec Protocol Specification"'>BGPsec</a>].  The best
   convergence tests would be with no SIDR features and then to repeat
   the convergence tests with the same SIDR features.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.9.%20%20Convergence%20Events"></a><a class="selflink" href="#section-4.9" name="section-4.9">4.9</a>.  Convergence Events</span>

   Convergence events or triggers are defined as abnormal occurrences in
   the network, which initiate route flapping in the network and hence
   forces the reconvergence of a steady state network.  In a real
   network, a series of convergence events may cause convergence latency
   operators desire to test.

   These convergence events must be defined in terms of the sequences
   defined in <a href="rfc4098.html">RFC 4098</a>.  This basic document begins all tests with a
   router initial setup.  Additional documents will define BGP data-
   plane convergence based on peer initialization.

   The convergence events may or may not be tied to the actual failure.
   A soft reset [<a href="rfc4098.html" title='"Terminology for Benchmarking BGP Device Convergence in the Control Plane"'>RFC4098</a>] does not clear the RIB or FIB tables.  A hard
   reset clears BGP peer sessions, RIB tables, and FIB tables.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.10.%20%20High%20Availability"></a><a class="selflink" href="#section-4.10" name="section-4.10">4.10</a>.  High Availability</span>

   Due to the different Non-Stop-Routing (sometimes referred to High-
   Availability) solutions available from different vendors, it is
   RECOMMENDED that any redundancy available in the routing processors
   should be disabled during the convergence measurements.  For cases
   where the redundancy cannot be disabled, the results are no longer
   comparable and the level of impact on the measurements is out of
   scope of this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Test%20Cases"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Test Cases</span>

   All tests defined under this section assume the following:

   a.  BGP peers are in Established state.

   b.  BGP state should be cleared from Established state to Idle prior
       to each test.  This is recommended to ensure that all tests start
       with BGP peers being forced back to Idle state and databases
       flushed.






<span class="grey">Papneja, et al.               Informational                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   c.  Furthermore, the traffic generation and routing should be
       verified in the topology to ensure there is no packet loss
       observed on any advertised routes.

   d.  The arrival timestamp of advertised routes can be measured by
       installing an inline monitoring device between the emulator and
       the DUT or by using the span port of the DUT connected with an
       external analyzer.  The time base of such an inline monitor or
       external analyzer needs to be synchronized with the protocol and
       traffic emulator.  Some modern emulators may have the capability
       to capture and timestamp every NLRI packet leaving and arriving
       at the emulator ports.  The timestamps of these NLRI packets will
       be almost identical to the arrival time at the DUT if the cable
       distance between the emulator and DUT is relatively short.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Basic%20Convergence%20Tests"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Basic Convergence Tests</span>

   These test cases measure characteristics of a BGP implementation in
   non-failure scenarios like:

   1.  RIB-IN Convergence

   2.  RIB-OUT Convergence

   3.  eBGP Convergence

   4.  iBGP Convergence

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.1.%20%20RIB-IN%20Convergence"></a><a class="selflink" href="#section-5.1.1" name="section-5.1.1">5.1.1</a>.  RIB-IN Convergence</span>

   Objective:

      This test measures the convergence time taken to receive and
      install a route in RIB using BGP.

   Reference Test Setup:

      This test uses the setup as shown in Figure 1

   Procedure:

   A.  All variables affecting convergence should be set to a basic test
       state (as defined in <a href="#section-4.4">Section 4.4</a>).

   B.  Establish BGP adjacency between the DUT and one peer of the
       emulator, Emp1.





<span class="grey">Papneja, et al.               Informational                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   C.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test.

   D.  Start the traffic from the emulator tx towards the DUT targeted
       at a route specified in the route mixture (e.g., routeA).
       Initially, no traffic SHOULD be observed on the egress interface
       as routeA is not installed in the forwarding database of the DUT.

   E.  Advertise routeA from the peer (Emp1) to the DUT and record the
       time.

          This is Tup(Emp1,Rt-A), also named XMT-Rt-time(Rt-A).

   F.  Record the time when routeA from Emp1 is received at the DUT.

          This is Tup(DUT,Rt-A), also named RCV-Rt-time(Rt-A).

   G.  Record the time when the traffic targeted towards routeA is
       received by the emulator on the appropriate traffic egress
       interface.

          This is TR(TDr,Rt-A), also named DUT-XMT-Data-Time(Rt-A).

   H.  The difference between the Tup(DUT,RT-A) and traffic received
       time (TR (TDr, Rt-A) is the FIB convergence time for routeA in
       the route mixture.  A full convergence for the route update is
       the measurement between the first route (Rt-A) and the last route
       (Rt-last).

          Route update convergence is

          TR(TDr, Rt-last)- Tup(DUT, Rt-A), or

          (DUT-XMT-Data-Time - RCV-Rt-Time)(Rt-A).

   Note: It is recommended that a single test with the same route
   mixture be repeated several times.  A report should provide the
   standard deviation and the average of all tests.

   Running tests with a varying number of routes and route mixtures is
   important to get a full characterization of a single peer.









<span class="grey">Papneja, et al.               Informational                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.2.%20%20RIB-OUT%20Convergence"></a><a class="selflink" href="#section-5.1.2" name="section-5.1.2">5.1.2</a>.  RIB-OUT Convergence</span>

   Objective:

      This test measures the convergence time taken by an implementation
      to receive, install, and advertise a route using BGP.

   Reference Test Setup:

      This test uses the setup as shown in Figure 2.

   Procedure:

   A.  The Helper Node (HLP) MUST run same version of BGP as the DUT.

   B.  All devices MUST be synchronized using NTP or some local
       reference clock.

   C.  All configuration variables for the Helper Node, DUT, and
       emulator SHOULD be set to the same values.  These values MAY be
       basic test or a unique set completely described in the test
       setup.

   D.  Establish BGP adjacency between the DUT and the emulator.

   E.  Establish BGP adjacency between the DUT and the Helper Node.

   F.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test.

   G.  Start the traffic from the emulator towards the Helper Node
       targeted at a specific route (e.g., routeA).  Initially, no
       traffic SHOULD be observed on the egress interface as routeA is
       not installed in the forwarding database of the DUT.

   H.  Advertise routeA from the emulator to the DUT and note the time.

          This is Tup(EMx, Rt-A), also named EM-XMT-Data-Time(Rt-A).

   I.  Record when routeA is received by the DUT.

          This is Tup(DUTr, Rt-A), also named DUT-RCV-Rt-Time(Rt-A).

   J.  Record the time when routeA is forwarded by the DUT towards the
       Helper Node.

          This is Tup(DUTx, Rt-A), also named DUT-XMT-Rt-Time(Rt-A).



<span class="grey">Papneja, et al.               Informational                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   K.  Record the time when the traffic targeted towards routeA is
       received on the Route Egress Interface.  This is TR(EMr, Rt-A),
       also named DUT-XMT-Data Time(Rt-A).

          FIB convergence = (DUT-XMT-Data-Time -DUT-RCV-Rt-Time)(Rt-A)

          RIB convergence = (DUT-XMT-Rt-Time - DUT-RCV-Rt-Time)(Rt-A)

          Convergence for a route stream is characterized by

          a) individual route convergence for FIB and RIB, and

          b) all route convergence of

          FIB-convergence = DUT-XMT-Data-Time(last) - DUT-RCV-Rt-
          Time(first), and

          RIB-convergence = DUT-XMT-Rt-Time(last) - DUT-RCV-Rt-
          Time(first).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.3.%20%20eBGP%20Convergence"></a><a class="selflink" href="#section-5.1.3" name="section-5.1.3">5.1.3</a>.  eBGP Convergence</span>

   Objective:

      This test measures the convergence time taken by an implementation
      to receive, install, and advertise a route in an eBGP Scenario.

   Reference Test Setup:

      This test uses the setup as shown in Figure 2, and the scenarios
      described in RIB-IN and RIB-OUT are applicable to this test case.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.4.%20%20iBGP%20Convergence"></a><a class="selflink" href="#section-5.1.4" name="section-5.1.4">5.1.4</a>.  iBGP Convergence</span>

   Objective:

      This test measures the convergence time taken by an implementation
      to receive, install, and advertise a route in an iBGP Scenario.

   Reference Test Setup:

      This test uses the setup as shown in Figure 2, and the scenarios
      described in RIB-IN and RIB-OUT are applicable to this test case.








<span class="grey">Papneja, et al.               Informational                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.5.%20%20eBGP%20Multihop%20Convergence"></a><a class="selflink" href="#section-5.1.5" name="section-5.1.5">5.1.5</a>.  eBGP Multihop Convergence</span>

   Objective:

      This test measures the convergence time taken by an implementation
      to receive, install, and advertise a route in an eBGP Multihop
      Scenario.

   Reference Test Setup:

      This test uses the setup as shown in Figure 3.  The DUT is used
      along with a Helper Node.

   Procedure:

   A.  The Helper Node MUST run the same version of BGP as the DUT.

   B.  All devices MUST be synchronized using NTP or some local
       reference clock.

   C.  All variables affecting convergence, like authentication,
       policies, and timers, SHOULD be set to basic settings.

   D.  All three devices, the DUT, emulator, and Helper Node, are
       configured with different ASs.

   E.  Loopback interfaces are configured on the DUT and Helper Node,
       and connectivity is established between them using any config
       options available on the DUT.

   F.  Establish BGP adjacency between the DUT and the emulator.

   G.  Establish BGP adjacency between the DUT and the Helper Node.

   H.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test

   I.  Start the traffic from the emulator towards the DUT targeted at a
       specific route (e.g., routeA).

   J.  Initially, no traffic SHOULD be observed on the egress interface
       as routeA is not installed in the forwarding database of the DUT.

   K.  Advertise routeA from the emulator to the DUT and note the time
       (Tup(EMx,RouteA), also named Route-Tx-time(Rt-A).





<span class="grey">Papneja, et al.               Informational                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   L.  Record the time when the route is received by the DUT.  This is
       Tup(EMr,DUT), also named Route-Rcv-time(Rt-A).

   M.  Record the time when the traffic targeted towards routeA is
       received from the egress interface of the DUT on the emulator.
       This is Tup(EMd,DUT) named Data-Rcv-time(Rt-A)

   N.  Record the time when routeA is forwarded by the DUT towards the
       Helper Node.  This is Tup(EMf,DUT), also named Route-Fwd-time(Rt-
       A).

          FIB Convergence = (Data-Rcv-time - Route-Rcv-time)(Rt-A)

          RIB Convergence = (Route-Fwd-time - Route-Rcv-time)(Rt-A)

   Note: It is recommended that the test be repeated with a varying
   number of routes and route mixtures.  With each set route mixture,
   the test should be repeated multiple times.  The results should
   record the average, mean, standard deviation.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20BGP%20Failure%2FConvergence%20Events"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  BGP Failure/Convergence Events</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.%20%20Physical%20Link%20Failure%20on%20DUT%20End"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a>.  Physical Link Failure on DUT End</span>

   Objective:

      This test measures the route convergence time due to a local link
      failure event at the DUT's Local Interface.

   Reference Test Setup:

      This test uses the setup as shown in Figure 1.  The shutdown event
      is defined as an administrative shutdown event on the DUT.

   Procedure:

   A.  All variables affecting convergence, like authentication,
       policies, and timers, should be set to basic-test policy.

   B.  Establish two BGP adjacencies from the DUT to the emulator, one
       over the peer interface and the other using a second peer
       interface.

   C.  Advertise the same route, routeA, over both adjacencies with
       preferences so that the Best Egress Interface for the preferred
       next hop is (Emp1) interface.





<span class="grey">Papneja, et al.               Informational                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   D.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test.

   E.  Start the traffic from the emulator towards the DUT targeted at a
       specific route (e.g., routeA).  Initially, traffic would be
       observed on the best egress route, Emp1, instead of Emp2.

   F.  Trigger the shutdown event of Best Egress Interface on the DUT
       (Dp1).  This time is called Shutdown time.

   G.  Measure the convergence time for the event to be detected and
       traffic to be forwarded to Next-Best Egress Interface (Dp2).

          Time = Data-detect(Emp2) - Shutdown time

   H.  Stop the offered load and wait for the queues to drain.  Restart
       the data flow.

   I.  Bring up the link on the DUT's Best Egress Interface.

   J.  Measure the convergence time taken for the traffic to be rerouted
       from Dp2 to Best Egress Interface, Dp1.

          Time = Data-detect(Emp1) - Bring Up time

   K.  It is recommended that the test be repeated with a varying number
       of routes and route mixtures or with a number of routes and route
       mixtures closer to what is deployed in operational networks.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2.%20%20Physical%20Link%20Failure%20on%20Remote%2FEmulator%20End"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a>.  Physical Link Failure on Remote/Emulator End</span>

   Objective:

      This test measures the route convergence time due to a local link
      failure event at the Tester's Local Interface.

   Reference Test Setup:

      This test uses the setup as shown in Figure 1.  The shutdown event
      is defined as a shutdown of the local interface of the Tester via
      a logical shutdown event.  The procedure used in <a href="#section-5.2.1">Section 5.2.1</a> is
      used for the termination.








<span class="grey">Papneja, et al.               Informational                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.3.%20%20ECMP%20Link%20Failure%20on%20DUT%20End"></a><a class="selflink" href="#section-5.2.3" name="section-5.2.3">5.2.3</a>.  ECMP Link Failure on DUT End</span>

   Objective:

      This test measures the route convergence time due to a local link
      failure event at the ECMP member.  The FIB configuration and BGP
      are set to allow two ECMP routes to be installed.  However, policy
      directs the routes to be sent only over one of the paths.

   Reference Test Setup:

      This test uses the setup as shown in Figure 1, and the procedure
      used in <a href="#section-5.2.1">Section 5.2.1</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20BGP%20Adjacency%20Failure%20%28Non-Physical%20Link%20Failure%29%20on%20Emulator"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  BGP Adjacency Failure (Non-Physical Link Failure) on Emulator</span>

   Objective:

      This test measures the route convergence time due to BGP Adjacency
      Failure on the emulator.

   Reference Test Setup:

      This test uses the setup as shown in Figure 1.

   Procedure:

   A.  All variables affecting convergence, like authentication,
       policies, and timers, should be set to basic-policy.

   B.  Establish two BGP adjacencies from the DUT to the emulator: one
       over the Best Egress Interface and the other using the Next-Best
       Egress Interface.

   C.  Advertise the same route, routeA, over both adjacencies with
       preferences so that the Best Egress Interface for the preferred
       next hop is (Emp1) interface.

   D.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test.

   E.  Start the traffic from the emulator towards the DUT targeted at a
       specific route (e.g., routeA).  Initially, traffic would be
       observed on the Best Egress Interface.






<span class="grey">Papneja, et al.               Informational                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   F.  Remove BGP adjacency via a software adjacency down on the
       emulator on the Best Egress Interface.  This time is called
       BGPadj-down-time, also termed BGPpeer-down.

   G.  Measure the convergence time for the event to be detected and
       traffic to be forwarded to Next-Best Egress Interface.  This time
       is Tr-rr2, also called TR2-traffic-on.

          Convergence = TR2-traffic-on - BGPpeer-down

   H.  Stop the offered load and wait for the queues to drain and
       restart the data flow.

   I.  Bring up BGP adjacency on the emulator over the Best Egress
       Interface.  This time is BGP-adj-up, also called BGPpeer-up.

   J.  Measure the convergence time taken for the traffic to be rerouted
       to the Best Egress Interface.  This time is Tr-rr1, also called
       TR1-traffic-on.

          Convergence = TR1-traffic-on - BGPpeer-up

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20BGP%20Hard%20Reset%20Test%20Cases"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  BGP Hard Reset Test Cases</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.4.1.%20%20BGP%20Non-Recovering%20Hard%20Reset%20Event%20on%20DUT"></a><a class="selflink" href="#section-5.4.1" name="section-5.4.1">5.4.1</a>.  BGP Non-Recovering Hard Reset Event on DUT</span>

   Objective:

      This test measures the route convergence time due to a hard reset
      on the DUT.

   Reference Test Setup:

      This test uses the setup as shown in Figure 1.

   Procedure:

   A.  The requirement for this test case is that the hard reset event
       should be non-recovering and should affect only the adjacency
       between the DUT and the emulator on the Best Egress Interface.

   B.  All variables affecting the test SHOULD be set to basic-test
       values.

   C.  Establish two BGP adjacencies from the DUT to the emulator: one
       over the Best Egress Interface and the other using the Next-Best
       Egress Interface.




<span class="grey">Papneja, et al.               Informational                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   D.  Advertise the same route, routeA, over both adjacencies with
       preferences so that the Best Egress Interface for the preferred
       next hop is (Emp1) interface.

   E.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test.

   F.  Start the traffic from the emulator towards the DUT targeted at a
       specific route (e.g., routeA).  Initially, traffic would be
       observed on the Best Egress Interface.

   G.  Trigger the hard reset event of the Best Egress Interface on the
       DUT.  This time is called time reset.

   H.  This event is detected and traffic is forwarded to the Next-Best
       Egress Interface.  This time is called time-traffic flow.

   I.  Measure the convergence time for the event to be detected and
       traffic to be forwarded to Next-Best Egress Interface.

          Time of convergence = time-traffic flow - time-reset

   J.  Stop the offered load and wait for the queues to drain and
       restart.

   K.  It is recommended that the test be repeated with a varying number
       of routes and route mixtures or with a number of routes and route
       mixtures closer to what is deployed in operational networks.

   L.  When varying number of routes are used, convergence time is
       measured using the Loss-Derived method [<a href="rfc6412.html" title='"Terminology for Benchmarking Link-State IGP Data-Plane Route Convergence"'>RFC6412</a>].

   M.  Convergence time in this scenario is influenced by failure
       detection time on the Tester, BGP keepalive time and routing, and
       forwarding table update time.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20BGP%20Soft%20Reset"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  BGP Soft Reset</span>

   Objective:

      This test measures the route convergence time taken by an
      implementation to service a BGP Route Refresh message and
      advertise a route.

   Reference Test Setup:

      This test uses the setup as shown in Figure 2.



<span class="grey">Papneja, et al.               Informational                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   Procedure:

   A.  The BGP implementation on the DUT and Helper Node needs to
       support BGP Route Refresh Capability [<a href="rfc2918.html" title='"Route Refresh Capability for BGP-4"'>RFC2918</a>].

   B.  All devices MUST be synchronized using NTP or some local
       reference clock.

   C.  All variables affecting convergence, like authentication,
       policies, and timers, should be set to basic-test defaults.

   D.  The DUT and the Helper Node are configured in the same AS,
       whereas the emulator is configured under a different AS.

   E.  Establish BGP adjacency between the DUT and the emulator.

   F.  Establish BGP adjacency between the DUT and the Helper Node.

   G.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test.

   H.  Configure a policy under the BGP on the Helper Node to deny
       routes received from the DUT.

   I.  Advertise routeA from the emulator to the DUT.

   J.  The DUT will try to advertise the route to the Helper Node; it
       will be denied.

   K.  Wait for three keepalives.

   L.  Start the traffic from the emulator towards the Helper Node
       targeted at a specific route, say routeA.  Initially, no traffic
       would be observed on the egress interface, as routeA is not
       present.

   M.  Remove the policy on the Helper Node and issue a route refresh
       request towards the DUT.  Note the timestamp of this event.  This
       is the RefreshTime.

   N.  Record the time when the traffic targeted towards routeA is
       received on the egress interface.  This is RecTime.

   O.  The following equation represents the Route Refresh Convergence
       Time per route.

          Route Refresh Convergence Time = (RecTime - RefreshTime)



<span class="grey">Papneja, et al.               Informational                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.6.%20%20BGP%20Route%20Withdrawal%20Convergence%20Time"></a><a class="selflink" href="#section-5.6" name="section-5.6">5.6</a>.  BGP Route Withdrawal Convergence Time</span>

   Objective:

      This test measures the route convergence time taken by an
      implementation to service a BGP withdraw message and advertise the
      withdraw.

   Reference Test Setup:

      This test uses the setup as shown in Figure 2.

   Procedure:

   A.  This test consists of two steps to determine the Total Withdraw
       Processing Time.

   B.  Step 1:

       (1)   All devices MUST be synchronized using NTP or some local
             reference clock.

       (2)   All variables should be set to basic-test parameters.

       (3)   The DUT and Helper Node are configured in the same AS,
             whereas the emulator is configured under a different AS.

       (4)   Establish BGP adjacency between the DUT and the emulator.

       (5)   To ensure adjacency establishment, wait for three
             keepalives to be received from the DUT or a configurable
             delay before proceeding with the rest of the test.

       (6)   Start the traffic from the emulator towards the DUT
             targeted at a specific route (e.g., routeA).  Initially, no
             traffic would be observed on the egress interface as routeA
             is not present on the DUT.

       (7)   Advertise routeA from the emulator to the DUT.

       (8)   The traffic targeted towards routeA is received on the
             egress interface.

       (9)   Now the Tester sends a request to withdraw routeA to the
             DUT.  TRx(Awith) is also called WdrawTime1(Rt-A).

       (10)  Record the time when no traffic is observed as determined
             by the emulator.  This is the RouteRemoveTime1(Rt-A).



<span class="grey">Papneja, et al.               Informational                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


       (11)  The difference between the RouteRemoveTime1 and WdrawTime1
             is the WdrawConvTime1.

                WdrawConvTime1(Rt-A) = RouteRemoveTime1(Rt-A) -
                WdrawTime1(Rt-A)

   C.  Step 2:

       (1)  Continuing from Step 1, re-advertise routeA back to the DUT
            from the Tester.

       (2)  The DUT will try to advertise routeA to the Helper Node
            (this assumes there exists a session between the DUT and
            Helper Node).

       (3)  Start the traffic from the emulator towards the Helper Node
            targeted at a specific route (e.g., routeA).  Traffic would
            be observed on the egress interface after routeA is received
            by the Helper Node.

               WATime=time traffic first flows

       (4)  Now the Tester sends a request to withdraw routeA to DUT.
            This is the WdrawTime2(Rt-A).

               WAWtime-TRx(Rt-A) = WdrawTime2(Rt-A)

       (5)  DUT processes the withdraw and sends it to the Helper Node.

       (6)  Record the time when no traffic is observed as determined by
            the emulator.  This is:

               TR-WAW(DUT,RouteA) = RouteRemoveTime2(Rt-A)

       (7)  Total Withdraw Processing Time is:

               TotalWdrawTime(Rt-A) = ((RouteRemoveTime2(Rt-A) -
               WdrawTime2(Rt-A)) - WdrawConvTime1(Rt-A))













<span class="grey">Papneja, et al.               Informational                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.7.%20%20BGP%20Path%20Attribute%20Change%20Convergence%20Time"></a><a class="selflink" href="#section-5.7" name="section-5.7">5.7</a>.  BGP Path Attribute Change Convergence Time</span>

   Objective:

      This test measures the convergence time taken by an implementation
      to service a BGP Path Attribute Change.

   Reference Test Setup:

      This test uses the setup as shown in Figure 1.

   Procedure:

   A.  This test only applies to Well-Known Mandatory Attributes like
       origin, AS path, and next hop.

   B.  In each iteration of the test, only one of these mandatory
       attributes need to be varied whereas the others remain the same.

   C.  All devices MUST be synchronized using NTP or some local
       reference clock.

   D.  All variables should be set to basic-test parameters.

   E.  Advertise the same route, routeA, over both adjacencies with
       preferences so that the Best Egress Interface for the preferred
       next hop is (Emp1) interface.

   F.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test.

   G.  Start the traffic from the emulator towards the DUT targeted at
       the specific route (e.g., routeA).  Initially, traffic would be
       observed on the Best Egress Interface.

   H.  Now advertise the same route, routeA, on the Next-Best Egress
       Interface but by varying one of the well-known mandatory
       attributes to have a preferred value over that interface.  We
       call this Tbetter.  The other values need to be the same as what
       was advertised on the Best-Egress adjacency.

          TRx(Path-Change(Rt-A)) = Path Change Event Time(Rt-A)








<span class="grey">Papneja, et al.               Informational                    [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   I.  Measure the convergence time for the event to be detected and
       traffic to be forwarded to Next-Best Egress Interface.

          DUT(Path-Change, Rt-A) = Path-switch time(Rt-A)

          Convergence = Path-switch time(Rt-A) - Path Change Event
          Time(Rt-A)

   J.  Stop the offered load and wait for the queues to drain and
       restart.

   K.  Repeat the test for various attributes.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.8.%20%20BGP%20Graceful%20Restart%20Convergence%20Time"></a><a class="selflink" href="#section-5.8" name="section-5.8">5.8</a>.  BGP Graceful Restart Convergence Time</span>

   Objective:

      This test measures the route convergence time taken by an
      implementation during a Graceful Restart Event as detailed in the
      terminology document [<a href="rfc4098.html" title='"Terminology for Benchmarking BGP Device Convergence in the Control Plane"'>RFC4098</a>].

   Reference Test Setup:

      This test uses the setup as shown in Figure 4.

   Procedure:

   A.  It measures the time taken by an implementation to service a BGP
       Graceful Restart Event and advertise a route.

   B.  The Helper Nodes are the same model as the DUT and run the same
       BGP implementation as the DUT.

   C.  The BGP implementation on the DUT and Helper Node needs to
       support the BGP Graceful Restart Mechanism [<a href="rfc4724.html" title='"Graceful Restart Mechanism for BGP"'>RFC4724</a>].

   D.  All devices MUST be synchronized using NTP or some local
       reference clock.

   E.  All variables are set to basic-test values.

   F.  The DUT and Helper Node 1 (HLP1) are configured in the same AS,
       whereas the emulator and Helper Node 2 (HLP2) are configured
       under different ASs.

   G.  Establish BGP adjacency between the DUT and Helper Nodes.





<span class="grey">Papneja, et al.               Informational                    [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   H.  Establish BGP adjacency between the Helper Node 2 and the
       emulator.

   I.  To ensure adjacency establishment, wait for three keepalives to
       be received from the DUT or a configurable delay before
       proceeding with the rest of the test.

   J.  Configure a policy under the BGP on Helper Node 1 to deny routes
       received from the DUT.

   K.  Advertise routeA from the emulator to Helper Node 2.

   L.  Helper Node 2 advertises the route to the DUT and the DUT will
       try to advertise the route to Helper Node 1, which will be
       denied.

   M.  Wait for three keepalives.

   N.  Start the traffic from the emulator towards the Helper Node 1
       targeted at the specific route (e.g., routeA).  Initially, no
       traffic would be observed on the egress interface as routeA is
       not present.

   O.  Perform a Graceful Restart Trigger Event on the DUT and note the
       time.  This is the GREventTime.

   P.  Remove the policy on Helper Node 1.

   Q.  Record the time when the traffic targeted towards routeA is
       received on the egress interface.

          This is TRr(DUT, routeA), also called RecTime(Rt-A).

   R.  The following equation represents the Graceful Restart
       Convergence Time.

          Graceful Restart Convergence Time(Rt-A) = ((RecTime(Rt-A) -
          GREventTime) - RIB-IN)

   S.  It is assumed in this test case that after a switchover is
       triggered on the DUT, it will not have any cycles to process the
       BGP Refresh messages.  The reason for this assumption is that
       there is a narrow window of time where after switchover, when we
       remove the policy from Helper Node 1, implementations might
       generate Route Refresh automatically and this request might be
       serviced before the DUT actually switches over and re-establishes
       BGP adjacencies with the peers.




<span class="grey">Papneja, et al.               Informational                    [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Reporting%20Format"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Reporting Format</span>

   For each test case, it is recommended that the reporting tables below
   are completed, and all time values SHOULD be reported with resolution
   as specified in [<a href="rfc4098.html" title='"Terminology for Benchmarking BGP Device Convergence in the Control Plane"'>RFC4098</a>].

 Parameter                        Units or Description
 ===========================      ==========================
 Test case                        Test case number

 Test topology                    1, 2, 3, or 4

 Parallel links                   Number of parallel links

 Interface type                   Gigabit Ethernet (GigE),
                                  Packet over SONET (POS), ATM, other

 Convergence Event                Hard reset, soft reset, link
                                  failure, or other defined

 eBGP sessions                    Number of eBGP sessions

 iBGP sessions                    Number of iBGP sessions

 eBGP neighbor                    Number of eBGP neighbors

 iBGP neighbor                    Number of iBGP neighbors

 Routes per peer                  Number of routes

 Total unique routes              Number of routes

 Total non-unique routes          Number of routes

 IGP configured                   IS-IS, OSPF, static, or other

 Route mixture                    Description of route mixture

 Route packing                    Number of routes included in an update

 Policy configured                Yes, No

 SIDR origin authentication       Yes, No
 [<a href="rfc7115.html" title='"Origin Validation Operation Based on the Resource Public Key Infrastructure (RPKI)"'>RFC7115</a>]

 bgp-sec [<a href="#ref-BGPsec" title='"BGPsec Protocol Specification"'>BGPsec</a>]                 Yes, No





<span class="grey">Papneja, et al.               Informational                    [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


 Packet size offered              Bytes
 to the DUT

 Offered load                     Packets per second

 Packet sampling interval         Seconds
 on Tester

 Forwarding delay threshold       Seconds

 Timer values configured on DUT

   Interface failure              Seconds
    indication delay
   Hold time                      Seconds
   MinRouteAdvertisementInterval  Seconds
      (MRAI)
   MinASOriginationInterval       Seconds
      (MAOI)
   Keepalive time                 Seconds
   ConnectRetry                   Seconds

 TCP parameters for DUT and Tester
   Maximum Segment Size (MSS)     Bytes
   Slow start threshold           Bytes
   Maximum window size            Bytes

   Test Details:

   a.  If the Offered Load matches a subset of routes, describe how this
       subset is selected.

   b.  Describe how the convergence event is applied; does it cause
       instantaneous traffic loss or not?

   c.  If there is any policy configured, describe the configured
       policy.














<span class="grey">Papneja, et al.               Informational                    [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   Complete the table below for the initial convergence event and the
   reversion convergence event.

        Parameter                        Unit
        ===========================      ==========================
        Convergence Event                Initial or reversion

        Traffic Forwarding Metrics
          Total number of packets        Number of packets
           offered to the DUT
          Total number of packets        Number of packets
           forwarded by the DUT
          Connectivity packet loss       Number of packets
          Convergence packet loss        Number of packets
          Out-of-order packets           Number of packets
          Duplicate packets              Number of packets

        Convergence Benchmarks

          Rate-Derived Method [<a href="rfc6412.html" title='"Terminology for Benchmarking Link-State IGP Data-Plane Route Convergence"'>RFC6412</a>]:
           First route convergence       Seconds
            time
           Full convergence time         Seconds

          Loss-Derived Method [<a href="rfc6412.html" title='"Terminology for Benchmarking Link-State IGP Data-Plane Route Convergence"'>RFC6412</a>]:
           Loss-Derived convergence      Seconds
            time

          Route-Specific (R-S) Loss-Derived
          Method:
           Minimum R-S convergence       Seconds
            time
           Maximum R-S convergence       Seconds
            time
           Median R-S convergence        Seconds
            time
           Average R-S convergence       Seconds
            time

        Loss of Connectivity (LoC) Benchmarks

          Loss-Derived Method:
           Loss-Derived loss of          Seconds
            connectivity period







<span class="grey">Papneja, et al.               Informational                    [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


          Route-Specific Loss-Derived
           Method:
           Minimum LoC period [n]        Array of seconds
           Minimum Route LoC period      Seconds
           Maximum Route LoC period      Seconds
           Median Route LoC period       Seconds
           Average Route LoC period      Seconds

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   Benchmarking activities as described in this memo are limited to
   technology characterization using controlled stimuli in a laboratory
   environment, with dedicated address space and the constraints
   specified in the sections above.

   The benchmarking network topology is an independent test setup and
   MUST NOT be connected to devices that may forward the test traffic
   into a production network or misroute traffic to the test management
   network.

   Further, benchmarking is performed on a "black-box" basis, relying
   solely on measurements observable and external to the DUT/SUT.

   Special capabilities SHOULD NOT exist in the DUT/SUT specifically for
   benchmarking purposes.  Any implications for network security arising
   from the DUT/SUT SHOULD be identical in the lab and in production
   networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-IEEE.802.11" name="ref-IEEE.802.11">IEEE.802.11</a>]
              IEEE, "IEEE Standard for Information technology --
              Telecommunications and information exchange between
              systems Local and metropolitan area networks -- Specific
              requirements Part 11: Wireless LAN Medium Access Control
              (MAC) and Physical Layer (PHY) Specifications",
              IEEE 802.11-2012, DOI 10.1109/ieeestd.2012.6178212, April
              2012, &lt;<a href="http://ieeexplore.ieee.org/servlet/opac?punumber=6178209">http://ieeexplore.ieee.org/servlet/</a>
              <a href="http://ieeexplore.ieee.org/servlet/opac?punumber=6178209">opac?punumber=6178209</a>&gt;.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.





<span class="grey">Papneja, et al.               Informational                    [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   [<a id="ref-RFC2918" name="ref-RFC2918">RFC2918</a>]  Chen, E., "Route Refresh Capability for BGP-4", <a href="rfc2918.html">RFC 2918</a>,
              DOI 10.17487/RFC2918, September 2000,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2918">http://www.rfc-editor.org/info/rfc2918</a>&gt;.

   [<a id="ref-RFC4098" name="ref-RFC4098">RFC4098</a>]  Berkowitz, H., Davies, E., Ed., Hares, S., Krishnaswamy,
              P., and M. Lepp, "Terminology for Benchmarking BGP Device
              Convergence in the Control Plane", <a href="rfc4098.html">RFC 4098</a>,
              DOI 10.17487/RFC4098, June 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4098">http://www.rfc-editor.org/info/rfc4098</a>&gt;.

   [<a id="ref-RFC4271" name="ref-RFC4271">RFC4271</a>]  Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., "A
              Border Gateway Protocol 4 (BGP-4)", <a href="rfc4271.html">RFC 4271</a>,
              DOI 10.17487/RFC4271, January 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4271">http://www.rfc-editor.org/info/rfc4271</a>&gt;.

   [<a id="ref-RFC6412" name="ref-RFC6412">RFC6412</a>]  Poretsky, S., Imhoff, B., and K. Michielsen, "Terminology
              for Benchmarking Link-State IGP Data-Plane Route
              Convergence", <a href="rfc6412.html">RFC 6412</a>, DOI 10.17487/RFC6412, November
              2011, &lt;<a href="http://www.rfc-editor.org/info/rfc6412">http://www.rfc-editor.org/info/rfc6412</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-BGPsec" name="ref-BGPsec">BGPsec</a>]   Lepinski, M. and K. Sriram, "BGPsec Protocol
              Specification", Work in Progress, <a href="https://tools.ietf.org/html/draft-ietf-sidr-bgpsec-protocol-15">draft-ietf-sidr-bgpsec-</a>
              <a href="https://tools.ietf.org/html/draft-ietf-sidr-bgpsec-protocol-15">protocol-15</a>, March 2016.

   [<a id="ref-RFC1242" name="ref-RFC1242">RFC1242</a>]  Bradner, S., "Benchmarking Terminology for Network
              Interconnection Devices", <a href="rfc1242.html">RFC 1242</a>, DOI 10.17487/RFC1242,
              July 1991, &lt;<a href="http://www.rfc-editor.org/info/rfc1242">http://www.rfc-editor.org/info/rfc1242</a>&gt;.

   [<a id="ref-RFC1983" name="ref-RFC1983">RFC1983</a>]  Malkin, G., Ed., "Internet Users' Glossary", FYI 18,
              <a href="rfc1983.html">RFC 1983</a>, DOI 10.17487/RFC1983, August 1996,
              &lt;<a href="http://www.rfc-editor.org/info/rfc1983">http://www.rfc-editor.org/info/rfc1983</a>&gt;.

   [<a id="ref-RFC2285" name="ref-RFC2285">RFC2285</a>]  Mandeville, R., "Benchmarking Terminology for LAN
              Switching Devices", <a href="rfc2285.html">RFC 2285</a>, DOI 10.17487/RFC2285,
              February 1998, &lt;<a href="http://www.rfc-editor.org/info/rfc2285">http://www.rfc-editor.org/info/rfc2285</a>&gt;.

   [<a id="ref-RFC2545" name="ref-RFC2545">RFC2545</a>]  Marques, P. and F. Dupont, "Use of BGP-4 Multiprotocol
              Extensions for IPv6 Inter-Domain Routing", <a href="rfc2545.html">RFC 2545</a>,
              DOI 10.17487/RFC2545, March 1999,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2545">http://www.rfc-editor.org/info/rfc2545</a>&gt;.

   [<a id="ref-RFC4724" name="ref-RFC4724">RFC4724</a>]  Sangli, S., Chen, E., Fernando, R., Scudder, J., and Y.
              Rekhter, "Graceful Restart Mechanism for BGP", <a href="rfc4724.html">RFC 4724</a>,
              DOI 10.17487/RFC4724, January 2007,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4724">http://www.rfc-editor.org/info/rfc4724</a>&gt;.




<span class="grey">Papneja, et al.               Informational                    [Page 33]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-34" id="page-34" name="page-34"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


   [<a id="ref-RFC4760" name="ref-RFC4760">RFC4760</a>]  Bates, T., Chandra, R., Katz, D., and Y. Rekhter,
              "Multiprotocol Extensions for BGP-4", <a href="rfc4760.html">RFC 4760</a>,
              DOI 10.17487/RFC4760, January 2007,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4760">http://www.rfc-editor.org/info/rfc4760</a>&gt;.

   [<a id="ref-RFC5925" name="ref-RFC5925">RFC5925</a>]  Touch, J., Mankin, A., and R. Bonica, "The TCP
              Authentication Option", <a href="rfc5925.html">RFC 5925</a>, DOI 10.17487/RFC5925,
              June 2010, &lt;<a href="http://www.rfc-editor.org/info/rfc5925">http://www.rfc-editor.org/info/rfc5925</a>&gt;.

   [<a id="ref-RFC6414" name="ref-RFC6414">RFC6414</a>]  Poretsky, S., Papneja, R., Karthik, J., and S. Vapiwala,
              "Benchmarking Terminology for Protection Performance",
              <a href="rfc6414.html">RFC 6414</a>, DOI 10.17487/RFC6414, November 2011,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6414">http://www.rfc-editor.org/info/rfc6414</a>&gt;.

   [<a id="ref-RFC7115" name="ref-RFC7115">RFC7115</a>]  Bush, R., "Origin Validation Operation Based on the
              Resource Public Key Infrastructure (RPKI)", <a href="https://tools.ietf.org/html/bcp185">BCP 185</a>,
              <a href="rfc7115.html">RFC 7115</a>, DOI 10.17487/RFC7115, January 2014,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7115">http://www.rfc-editor.org/info/rfc7115</a>&gt;.

Acknowledgements

   We would like to thank Anil Tandon, Arvind Pandey, Mohan Nanduri, Jay
   Karthik, and Eric Brendel for their input and discussions on various
   sections in the document.  We also like to acknowledge Will Liu,
   Hubert Gee, Semion Lisyansky, and Faisal Shah for their review and
   feedback on the document.

























<span class="grey">Papneja, et al.               Informational                    [Page 34]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-35" id="page-35" name="page-35"> </a>
<span class="grey"><a href="rfc7747.html">RFC 7747</a>               BGP Convergence Methodology            April 2016</span>


Authors' Addresses

   Rajiv Papneja
   Huawei Technologies

   Email: rajiv.papneja@huawei.com


   Bhavani Parise
   Skyport Systems

   Email: bparise@skyportsystems.com


   Susan Hares
   Huawei Technologies

   Email: shares@ndzh.com


   Dean Lee
   IXIA

   Email: dlee@ixiacom.com

   Ilya Varlashkin
   Google

   Email: ilya@nobulus.com






















Papneja, et al.               Informational                    [Page 35]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc7747 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:19 GMT --></html>