<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from tools.ietf.org/html/rfc729 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 13:17:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129c" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Identifier" content="urn:ietf:rfc:729" />
<meta name="DC.Creator" content="D. Crocker" />
<meta name="DC.Date.Issued" content="May, 1977" />
<meta name="DC.Title" content="Telnet byte macro option" />

    <link rel="icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <title>RFC 729 - Telnet byte macro option</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgbrown"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc729.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc729" title="PDF version of this document">pdf</a>] [<a href='https://datatracker.ietf.org/doc/rfc729' title='IESG Datatracker information for this document'>Tracker</a>]                                              </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">Obsoleted by: <a href="rfc735.html">735</a>                                                      </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Network Working Group                            Dave Crocker, Rand-ISD
Request for Comments: 729                        (Dcrocker at Rand-Unix)
NlC: 40306                                       13 May l977




                        TELNET Byte Macro Option


<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>. Command name and code:</span>

   BM 19

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>. Command Meanings:</span>

   IAC WILL BM

        The sender of this  command REQUESTS or AGREES  to use the  BM
        option, and will send sing1e  data characters which are to  be
        interpreted as if longer data strings had been sent.

   IAC WON'T BM

        The  sender  of  this  option  REFUSES  to  send  single  data
        characters which  are  to be  interpreted  as if  longer  data
        strings had been sent.

   IAC DO BM

        The sender REQUESTS or AGREES to have the other side (send  of
        WILL BM) issue  send single  data characters which  are to  be
        interpreted as if longer data strings had been sent.

   IAC DON'T BM

        The sender REFUSES to allow the other side to send single data
        characters which  are  to be  interpreted  as if  longer  data
        strings had been sent.

   IAC SB BM &lt;DEFINE&gt; &lt;macro byte&gt; &lt;count&gt;
                   &lt;expansion string&gt; IAC SE
        where:

           &lt;macro byte&gt; is the  data byte actually  to be sent  across
           the network; it may NOT be Telnet IAC (decimal 255).


RFC #729 Telnet Byte Macro Option                                Page 2



           &lt;count&gt; is a  one-byte binary number,  indicating how  many
           &lt;expansion string&gt; characters follow, up to the ending  IAC
           SE, but not including it.

           &lt;expansion string&gt; is a string of one or more Telnet  ASCII
           characters and/or commands,  which the &lt;macro  byte&gt; is  to
           represent; any  character may  occur within  an  &lt;expansion
           string&gt;.

        The indicated  &lt;macro  byte&gt;  will  be  sent  instead  of  the
        indicated &lt;expansion string&gt;. The receiver of the &lt;macro byte&gt;
        (the sender  of the  DO BM)  is to  behave EXACTLY  as if  the
        &lt;expansion string&gt; of bytes had instead been received from the
        network. This  interpretation is  to  occur before  any  other
        Telnet interpretations, unless the &lt;macro byte&gt; occurs as part
        of a BM subcommand; in this case no special interpretation  is
        to be made.

        Note that the effect of a particular &lt;macro byte&gt; may be
        negated by reseting it to "expand" into itself.

        &lt;DEFINE&gt; is decimal 01.


   IAC SB BM &lt;ACCEPT&gt; &lt;macro byte&gt; IAC SE

        The receiver  of the  &lt;DEFINE&gt; for  &lt;macro byte&gt;  accepts  the
        requested definition and will perform the indicating expansion
        whenever a &lt;macro byte&gt;  is received and is  not part of a  BM
        subcommand.

        &lt;ACCEPT&gt; is decimal 02.


   IAC SB BM &lt;REFUSE&gt; &lt;macro byte&gt; &lt;REASON&gt; IAC SE

        The receive  of  the  &lt;DEFINE&gt; for  &lt;macro  byte&gt;  refuses  to
        perform  the  indicated  translation  from  &lt;macro  byte&gt;   to
        &lt;expansion string&gt; either because the particular &lt;macro  byte&gt;
        is not  an acceptable  choice  or because  the length  of  the
        &lt;expansion string&gt; exceeds available storage.

   &lt;REFUSE&gt; is decimal 03.

   &lt;REASON&gt; may be

           &lt;BAD CHOICE&gt; which is decimal 01; or

           &lt;TOO LONG&gt; which is decimal 02.


RFC #729 Telnet Byte Macro Option                                Page 3




   IAC SB BM &lt;LITERAL&gt; &lt;macro byte&gt; IAC SE

        The &lt;macro byte&gt; is to be treated as real data, rather than as
        representative of the &lt;expansion string&gt;

        &lt;LITERAL&gt; is decimal 03.




<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>. Default:</span>

   WON'T BM -- DON'T BM

        No reinterpretation of data is allowed.

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>. Motivation for the option:</span>

   Subcommands for Telnet options currently require a minimum of  five
   characters to be sent over the network (i.e., IAC SB &lt;Option  name&gt;
   IAC SE).   For sub-commands  which  are employed  infrequently,  in
   absolute numbers and in relation  to normal data, this overhead  is
   tolerable. In other cases,  however, it is  not. For example,  data
   which is  sent  in  a  block-oriented fashion  may  need  a  "block
   separator" mark. If  blocks are commonly  as small as  five or  ten
   bytes, then most of the cross-net data will be control information.
   The BM option is intended  as a simple data compression  technique,
   to remove this overhead from the communication channel.


<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>. Description of the option</span>

   The  option  is   enabled  through  the   standard  Telnet   Option
   negotiation process. Afterwards, the SENDER of data (the side which
   sends the IAC WILL BM) is  free to define and use mappings  between
   single and multiple NOT characters. Except for the ability to offer
   a blanket refusal,  the receiver of  data has no  control over  the
   definition and use of mappings.

   The sender (of the WILL BM) is prohibited from using or  redefining
   a &lt;macro byte&gt; until  it has received an  &lt;ACCEPT&gt; or &lt;REFUSE&gt;,  in
   reply to a &lt;DEFINE&gt;.

   NOTE: The  Telnet command  character  IAC (decimal  255) may  be  a
   member of an &lt;expansion string&gt; but is the ONLY character which may
   NOT be  defined  as  a  &lt;macro  byte&gt;.  ALL  OTHER  Telnet  command
   characters use IAC  as a  preface and therefore  occupy a  SEPARATE
   portion of the data space than do regular data bytes.

RFC #729 Telnet Byte Macro Option Page 4



   With  the  exception  of  IAC,  data  transfered  as  part  of   BM
   subcommands are NOT to be interpreted. They are to be taken only as
   their  normal  character  values.   This  avoids  the  problem   of
   distinguishing between a character which is to be taken as a &lt;macro
   byte&gt;, and interpreted as its corresponding &lt;expansion string&gt;, and
   that same character to be taken  as its usual Telnet NVT value.  In
   all other  cases,  however, &lt;macro  byte&gt;s  are to  be  interpreted
   immediately, as if  the &lt;expansion string&gt;  had actually been  sent
   across  the  network.    Expanded  strings  are   not  subject   to
   reinterpretation, so that recursive definitions cannot be made.

   The &lt;count&gt;  in  the &lt;DEFINE&gt;  subcommand  allows the  receiver  to
   allocate storage. IAC interpretation  is not over-ridden during  BM
   subcommands so  that  IAC  SE will  continue  to  safely  terminate
   malformed subcommands. To include  IAC as part  of a &lt;DEFINE&gt;,  the
   string "IAC IAC" must be sent.

   The BM option is notably inefficient with regard to problems during
   &lt;macro byte&gt; definition and use of  &lt;macro byte&gt;s as real data.  It
   is expected that relatively few  &lt;macro byte&gt;s will be defined  and
   that they will represent relatively short strings. Since the Telnet
   data space  between decimal  128 and  decimal 254  is not  normally
   used, except  by  implementations  employing  the  original  Telnet
   protocol, it is  recommended that &lt;macro  byte&gt;s normally be  drawn
   from that pool.

</pre><br />
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.129c, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>
</body>

<!-- Mirrored from tools.ietf.org/html/rfc729 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 13:17:31 GMT -->
</html>
