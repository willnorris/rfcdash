<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3623 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:45 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:3623" name="DC.Identifier"/>
<meta content="This memo documents an enhancement to the OSPF routing protocol,
whereby an OSPF router can stay on the forwarding path even as its
OSPF software is restarted. This is called &quot;graceful restart&quot; or &quot;non-
stop forwarding&quot;. A restarting router may not be capable of adjusting
its forwarding in a timely manner when the network topology changes.
In order to avoid the possible resulting routing loops, the procedure
in this memo automatically reverts to a normal OSPF restart when such
a topology change is detected, or when one or more of the restarting
router's neighbors do not support the enhancements in this memo.
Proper network operation during a graceful restart makes assumptions
upon the operating environment of the restarting router; these
assumptions are also documented." name="DC.Description.Abstract"/>
<meta content="Pillay-Esnault, Padma" name="DC.Creator"/>
<meta content="Moy, J." name="DC.Creator"/>
<meta content="November, 2003" name="DC.Date.Issued"/>
<meta content="Graceful OSPF Restart" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3623 - Graceful OSPF Restart</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc3623.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc3623" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-ospf-hitless-restart" title="draft-ietf-ospf-hitless-restart">draft-ietf-ospf...</a>] [<a href="https://datatracker.ietf.org/doc/rfc3623" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3623" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc3623" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                             J. Moy
Request for Comments: 3623                             Sycamore Networks
Category: Standards Track                              P. Pillay-Esnault
                                                        Juniper Networks
                                                               A. Lindem
                                                        Redback Networks
                                                           November 2003


                         <span class="h1">Graceful OSPF Restart</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

Abstract

   This memo documents an enhancement to the OSPF routing protocol,
   whereby an OSPF router can stay on the forwarding path even as its
   OSPF software is restarted.  This is called "graceful restart" or
   "non-stop forwarding".  A restarting router may not be capable of
   adjusting its forwarding in a timely manner when the network topology
   changes.  In order to avoid the possible resulting routing loops, the
   procedure in this memo automatically reverts to a normal OSPF restart
   when such a topology change is detected, or when one or more of the
   restarting router's neighbors do not support the enhancements in this
   memo.  Proper network operation during a graceful restart makes
   assumptions upon the operating environment of the restarting router;
   these assumptions are also documented.














<span class="grey">Moy, et al.                 Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


Table of Contents

   <a href="#section-1">1</a>.  Overview . . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Operation of Restarting Router . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
       <a href="#section-2.1">2.1</a>.  Entering Graceful Restart. . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
       <a href="#section-2.2">2.2</a>.  When to Exit Graceful Restart. . . . . . . . . . . . . .  <a href="#page-5">5</a>
       <a href="#section-2.3">2.3</a>.  Actions on Exiting Graceful Restart. . . . . . . . . . .  <a href="#page-6">6</a>
   <a href="#section-3">3</a>.  Operation of Helper Neighbor . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
       <a href="#section-3.1">3.1</a>.  Entering Helper Mode . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
       <a href="#section-3.2">3.2</a>.  Exiting Helper Mode. . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
   <a href="#section-4">4</a>.  Backward Compatibility . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-5">5</a>.  Unplanned Outages. . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
   <a href="#section-6">6</a>.  Interaction with Traffic Engineering . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-7">7</a>.  Possible Future Work . . . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-8">8</a>.  Intellectual Property Rights Notice. . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-9">9</a>.  References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
       <a href="#section-9.1">9.1</a>.  Normative References . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
       <a href="#section-9.2">9.2</a>.  Informative References . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#appendix-A">A</a>.  Grace-LSA Format . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
   <a href="#appendix-B">B</a>.  Configurable Parameters. . . . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
   Security Considerations. . . . . . . . . . . . . . . . . . . . . . <a href="#page-16">16</a>
   Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-16">16</a>
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
   Full Copyright Statement . . . . . . . . . . . . . . . . . . . . . <a href="#page-18">18</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Overview"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Overview</span>

   Today many Internet routers implement a separation of control and
   forwarding functions.  Certain processors are dedicated to control
   and management tasks such as OSPF routing, while other processors
   perform the data forwarding tasks.  This separation creates the
   possibility of maintaining a router's data forwarding capability
   while the router's control software is restarted/reloaded.  We call
   such a possibility "graceful restart" or "non-stop forwarding".

   The OSPF protocol presents a problem to graceful restart whereby,
   under normal operation, OSPF intentionally routes around a restarting
   router while it rebuilds its link-state database.  OSPF avoids the
   restarting router to minimize the possibility of routing loops and/or
   black holes caused by lack of database synchronization.  Avoidance is
   accomplished by having the router's neighbors reissue their LSAs,
   omitting links to the restarting router.

   However, if (a) the network topology remains stable and (b) the
   restarting router is able to keep its forwarding table(s) across the
   restart, it would be safe to keep the restarting router on the
   forwarding path.  This memo documents an enhancement to OSPF that
   makes such graceful restart possible, and automatically reverts back



<span class="grey">Moy, et al.                 Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


   to a standard OSPF restart for safety when network topology changes
   are detected.

   In a nutshell, the OSPF enhancements for graceful restart are as
   follows:

   -  The router attempting a graceful restart originates link-local
      Opaque-LSAs, herein called Grace-LSAs, announcing its intention to
      perform a graceful restart within a specified amount of time or
      "grace period".

   -  During the grace period, its neighbors continue to announce the
      restarting router in their LSAs as if it were fully adjacent
      (i.e., OSPF neighbor state Full), but only if the network topology
      remains static (i.e., the contents of the LSAs in the link-state
      database having LS types 1-5,7 remain unchanged and periodic
      refreshes are allowed).

   There are two roles being played by OSPF routers during graceful
   restart.  First there is the router that is being restarted.  The
   operation of this router during graceful restart, including how the
   router enters and exits graceful restart, is the subject of <a href="#section-2">Section</a>
   <a href="#section-2">2</a>.  Then there are the router's neighbors, which must cooperate in
   order for the restart to be graceful.  During graceful restart, we
   say that the neighbors are running in "helper mode".  <a href="#section-3">Section 3</a>
   covers the responsibilities of a router running in helper mode,
   including entering and exiting helper mode.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Operation%20of%20Restarting%20Router"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Operation of Restarting Router</span>

   After the router restarts/reloads, it must change its OSPF processing
   somewhat until it re-establishes full adjacencies with all its former
   fully-adjacent neighbors.  This time period, between the
   restart/reload and the reestablishment of adjacencies, is called
   "graceful restart".  During graceful restart:

      1) The restarting router does not originate LSAs with LS types 1-
         5,7.  Instead, the restarting router wants the other routers in
         the OSPF domain to calculate routes using the LSAs that it
         originated prior to its restart.   During this time, the
         restarting router does not modify or flush received self-
         originated LSAs, (see Section 13.4 of [<a href="#ref-1" title='"OSPF Version 2"'>1</a>]). Instead they are
         accepted as valid.  In particular, the grace-LSAs that the
         restarting router originated before the restart are left in
         place.  Received self-originated LSAs will be dealt with when
         the router exits graceful restart (see <a href="#section-2.3">Section 2.3</a>).





<span class="grey">Moy, et al.                 Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


      2) The restarting router runs its OSPF routing calculations, as
         specified in Section 16 of [<a href="#ref-1" title='"OSPF Version 2"'>1</a>].  This is necessary to return
         any OSPF virtual links to operation.  However, the restarting
         router does *not* install OSPF routes into the system's
         forwarding table(s) and relies on the forwarding entries that
         it installed prior to the restart.

      3) If the restarting router determines that it was the Designated
         Router on a given segment prior to the restart, it elects
         itself as the Designated Router again.  The restarting router
         knows that it was the Designated Router if, while the
         associated interface is in Waiting state, a Hello packet is
         received from a neighbor listing the router as the Designated
         Router.

   Otherwise, the restarting router operates the same as any other OSPF
   router.  It discovers neighbors using OSPF's Hello protocol, elects
   Designated and Backup Designated Routers, performs the Database
   Exchange procedure to initially synchronize link-state databases with
   its neighbors, and maintains this synchronization through flooding.

   The processes of entering graceful restart, and of exiting graceful
   restart (either successfully or not) are covered in the following
   sections.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Entering%20Graceful%20Restart"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Entering Graceful Restart</span>

   The router (call it Router X) is informed of the desire for its
   graceful restart when an appropriate command is issued by the network
   operator.  The network operator may also specify the length of the
   grace period, or the necessary grace period may be calculated by the
   router's OSPF software.  In order to avoid the restarting router's
   LSAs from aging out, the grace period should not exceed LSRefreshTime
   (1800 second) [<a href="#ref-1" title='"OSPF Version 2"'>1</a>].

   In preparation for the graceful restart, Router X must perform the
   following actions before its software is restarted/reloaded:

      (Note that common OSPF shutdown procedures are *not* performed,
      since we want the other OSPF routers to act as if Router X remains
      in continuous service.  For example, Router X does not flush its
      locally originated LSAs, since we want them to remain in other
      routers' link-state databases throughout the restart period.)

      1) Router X must ensure that its forwarding table(s) is/are up-
         to-date and will remain in place across the restart.





<span class="grey">Moy, et al.                 Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


      2) The router may need to preserve the cryptographic sequence
         numbers being used on each interface in non-volatile storage.
         An alternative is to use the router's clock for cryptographic
         sequence number generation and ensure that the clock is
         preserved across restarts (either on the same or redundant
         route processors).  If neither of these can be guaranteed, it
         can take up to RouterDeadInterval seconds after the restart
         before adjacencies can be reestablished and this would force
         the grace period to be lengthened greatly.

   Router X then originates the grace-LSAs.  These are link-local
   Opaque-LSAs (see <a href="#appendix-A">Appendix A</a>).  Their LS Age field is set to 0, and
   the requested grace period (in seconds) is inserted into the body of
   the grace-LSA.  The precise contents of the grace-LSA are described
   in <a href="#appendix-A">Appendix A</a>.

   A grace-LSA is originated for each of the router's OSPF interfaces.
   If Router X wants to ensure that its neighbors receive the grace-
   LSAs, it should retransmit the grace-LSAs until they are acknowledged
   (i.e., perform standard OSPF reliable flooding of the grace-LSAs).
   If one or more fully adjacent neighbors do not receive grace-LSAs,
   they will more than likely cause premature termination of the
   graceful restart procedure (see <a href="#section-4">Section 4</a>).

   After the grace-LSAs have been sent, the router should store the fact
   that it is performing graceful restart along with the length of the
   requested grace period in non-volatile storage.  (Note to
   implementors: It may be easiest to simply store the absolute time of
   the end of the grace period).  The OSPF software should then be
   restarted/reloaded.  When the reloaded software starts executing the
   graceful restart, the protocol modifications in <a href="#section-2">Section 2</a> are
   followed.  (Note that prior to the restart, the router does not know
   whether its neighbors are going to cooperate as "helpers"; the mere
   reception of grace-LSAs does not imply acceptance of helper
   responsibilities.  This memo assumes that the router would want to
   restart anyway, even if the restart is not going to be graceful).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20When%20to%20Exit%20Graceful%20Restart"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  When to Exit Graceful Restart</span>

   A Router X exits graceful restart when any of the following occurs:

      1) Router X has reestablished all its adjacencies.  Router X can
         determine this by examining the router-LSAs that it last
         originated before the restart (called the "pre-restart router-
         LSA"), and, on those segments where the router is the
         Designated Router, the pre-restart network-LSAs.  These LSAs
         will have been received from the helping neighbors, and need
         not have been stored in non-volatile storage across the



<span class="grey">Moy, et al.                 Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


         restart.  All previous adjacencies will be listed as type-1 and
         type-2 links in the router-LSA, and as neighbors in the body of
         the network-LSA.

      2) Router X receives an LSA that is inconsistent with its pre-
         restart router-LSA.  For example, X receives a router-LSA
         originated by router Y that does not contain a link to X, even
         though X's pre-start router-LSA did contain a link to Y.  This
         indicates that either a) Y does not support graceful restart,
         b) Y never received the grace-LSA or c) Y has terminated its
         helper mode for some reason (<a href="#section-3.2">Section 3.2</a>).  A special case of
         LSA inconsistency is when Router X establishes an adjacency
         with router Y and doesn't receive an instance of its own pre-
         restart router LSA.

      3) The grace period expires.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3.%20%20Actions%20on%20Exiting%20Graceful%20Restart"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a>.  Actions on Exiting Graceful Restart</span>

   Upon exiting "graceful restart", the restarting router reverts back
   to completely normal OSPF operation, reoriginating LSAs based on the
   router's current state and updating its forwarding table(s) based on
   the current contents of the link-state database.  In particular, the
   following actions should be performed when exiting, either
   successfully or unsuccessfully, graceful restart:

      1) The router should reoriginate its router-LSAs for all attached
         areas in order to make sure they have the correct contents.

      2) The router should reoriginate network-LSAs on all segments
         where it is the Designated Router.

      3) The router reruns its OSPF routing calculations (Section 16 of
         [<a href="#ref-1" title='"OSPF Version 2"'>1</a>]), this time installing the results into the system
         forwarding table, and originating summary-LSAs, Type-7 LSAs and
         AS-external-LSAs as necessary.

      4) Any remnant entries in the system forwarding table that were
         installed before the restart, but that are no longer valid,
         should be removed.

      5) Any received self-originated LSAs that are no longer valid
         should be flushed.

      6) Any grace-LSAs that the router originated should be flushed.






<span class="grey">Moy, et al.                 Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Operation%20of%20Helper%20Neighbor"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Operation of Helper Neighbor</span>

   The helper relationship is per network segment.  As a "helper
   neighbor" on a segment S for a restarting router X, router Y has
   several duties.  It monitors the network for topology changes, and as
   long as there are none, continues to advertise its LSAs as if X had
   remained in continuous OSPF operation.  This means that Y's LSAs
   continue to list an adjacency to X over network segment S, regardless
   of the adjacency's current synchronization state.  This logic affects
   the contents of both router-LSAs and network-LSAs, and also depends
   on the type of network segment S (see Sections <a href="#section-12.4.1.1">12.4.1.1</a> through
   12.4.1.5 and Section 12.4.2 of [<a href="#ref-1" title='"OSPF Version 2"'>1</a>]).  When helping over a virtual
   link, the helper must also continue to set bit V in its router-LSA
   for the virtual link's transit area (Section 12.4.1 of [<a href="#ref-1" title='"OSPF Version 2"'>1</a>]).

   Also, if X was the Designated Router on network segment S when the
   helping relationship began, Y maintains X as the Designated Router
   until the helping relationship is terminated.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Entering%20Helper%20Mode"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Entering Helper Mode</span>

   When a router Y receives a grace-LSA from router X, it enters helper
   mode for X on the associated network segment, as long as all the
   following checks pass:

      1) Y currently has a full adjacency with X (neighbor state Full)
         over the associated network segment.  On broadcast, NBMA and
         Point-to-MultiPoint segments, the neighbor relationship with X
         is identified by the IP interface address in the body of the
         grace-LSA (see <a href="#appendix-A">Appendix A</a>).  On all other segment types, X is
         identified by the grace-LSA's Advertising Router field.

      2) There have been no changes in content to the link-state
         database (LS types 1-5,7) since router X restarted.  This is
         determined as follows:

         -  Router Y examines the link-state retransmission list for X
            over the associated network segment.

            -  If there are any LSAs with LS types 1-5,7 on the list,
               then they all must be periodic refreshes.

            -  If there are instead LSAs on the list whose contents have
               changed (see Section 3.3 of [<a href="#ref-7" title='"Extending OSPF to Support Demand Circuits"'>7</a>]), Y must refuse to enter
               helper mode.

            Router Y may optionally disallow graceful restart with
            Router X on other network segments.  Determining whether



<span class="grey">Moy, et al.                 Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


            changed LSAs have been successfully flooded to router Y on
            other network segments is feasible but beyond the scope of
            this document.

      3) The grace period has not yet expired.  This means that the LS
         age of the grace-LSA is less than the grace period specified in
         the body of the grace-LSA (Appendix A).

      4) Local policy allows Y to act as the helper for X.  Examples of
         configured policies might be a) never act as helper, b) never
         allow the grace period to exceed a Time T, c) only help on
         software reloads/upgrades, or d) never act as a helper for
         specific routers (specified by OSPF Router ID).

      5) Router Y is not in the process of graceful restart.

   There is one exception to the above requirements.  If Y was already
   helping X on the associated network segment, the new grace-LSA should
   be accepted and the grace period should be updated accordingly.

   Note that Router Y may be helping X on some network segments, and not
   on others.  However, that circumstance will probably lead to the
   premature termination of X's graceful restart, as Y will not continue
   to advertise adjacencies on the segments where it is not helping (see
   <a href="#section-2.2">Section 2.2</a>).

   Alternately, Router Y may choose to enter helper mode when a grace-
   LSA is received and the above checks pass for all adjacencies with
   Router X.  This implementation alternative of aggregating the
   adjacencies with respect to helper mode is compatible with
   implementations considering each adjacency independently.

   A single router is allowed to simultaneously serve as a helper for
   multiple restarting neighbors.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Exiting%20Helper%20Mode"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Exiting Helper Mode</span>

   Router Y ceases to perform the helper function for its neighbor
   Router X on a given segment when one of the following events occurs:

      1) The grace-LSA originated by X on the segment is flushed.  This
         indicates the successful termination of graceful restart.

      2) The grace-LSA's grace period expires.

      3) A change in link-state database contents indicates a network
         topology change, which forces termination of a graceful
         restart.  Specifically, if router Y installs a new LSA in its



<span class="grey">Moy, et al.                 Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


         database with LS types 1-5,7 and having the following two
         properties, it should cease helping X.  The two properties of
         the LSA are:

         a) the contents of the LSA have changed; this includes LSAs
            with no previous link-state database instance and the
            flushing of LSAs from the database, but excludes periodic
            LSA refreshes (see Section 3.3 of [<a href="#ref-7" title='"Extending OSPF to Support Demand Circuits"'>7</a>]), and

         b) the LSA would have been flooded to X, had Y and X been fully
            adjacent.  As an example of the second property, if Y
            installs a changed AS-external-LSA, it should not terminate
            a helping relationship with a neighbor belonging to a stub
            area, as that neighbor would not see the AS-external-LSA in
            any case.  An implementation MAY provide a configuration
            option to disable link-state database options from
            terminating graceful restart.  Such an option will, however,
            increase the risk of transient routing loops and black
            holes.

   When Router Y exits helper mode for X on a given network segment, it
   reoriginates its LSAs based on the current state of its adjacency to
   Router X over the segment.  In detail, Y takes the following actions:

      a) Y recalculates the Designated Router for the segment,

      b) Y reoriginates its router-LSA for the segment's OSPF area,

      c) if Y is Designated Router for the segment, it reoriginates the
         network-LSA for the segment and

      d) if the segment was a virtual link, Y reoriginates its router-
         LSA for the virtual link's transit area.

   If Router Y aggregated adjacencies with Router X when entering helper
   mode (as described in <a href="#section-3.1">section 3.1</a>), it must also exit helper mode for
   all adjacencies with Router X when any one of the exit events occurs
   for an adjacency with Router X.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Backward%20Compatibility"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Backward Compatibility</span>

   Backward-compatibility with unmodified OSPF routers is an automatic
   consequence of the functionality documented above.  If one or more
   neighbors of a router requesting graceful restart are unmodified, or
   if they do not receive the grace-LSA, the graceful restart reverts to
   a normal OSPF restart.





<span class="grey">Moy, et al.                 Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


   The unmodified routers will start routing around the restarted router
   X as it performs initial database synchronization by reissuing their
   LSAs with links to X omitted.  These LSAs will be interpreted by
   helper neighbors as a topology change, and by X as an LSA
   inconsistency, in either case, reverting to normal OSPF operation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Unplanned%20Outages"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Unplanned Outages</span>

   The graceful restart mechanisms in this memo can be used for
   unplanned outages.  (Examples of unplanned outages include the crash
   of a router's control software, an unexpected switchover to a
   redundant control processor, etc).  However, implementors and network
   operators should note that attempting graceful restart from an
   unplanned outage may not be a good idea, owing to the router's
   inability to properly prepare for the restart (see <a href="#section-2.1">Section 2.1</a>).  In
   particular, it seems unlikely that a router could guarantee the
   sanity of its forwarding table(s) across an unplanned restart.  In
   any event, implementors providing the option to recover gracefully
   from unplanned outages must allow a network operator to turn the
   option off.

   In contrast to the procedure for planned restart/reloads that was
   described in <a href="#section-2.1">Section 2.1</a>, a router attempting graceful restart after
   an unplanned outage must originate grace-LSAs *after* its control
   software resumes operation.  The following points must be observed
   during this grace-LSA origination.

   o  The grace-LSAs must be originated and be sent *before* the
      restarted router sends any OSPF Hello Packets.  On broadcast
      networks, this LSA must be flooded to the AllSPFRouters multicast
      address (224.0.0.5) since the restarting router is not aware of
      its previous DR state.

   o  The grace-LSAs are encapsulated in Link State Update Packets and
      sent out to all interfaces, even though the restarted router has
      no adjacencies and no knowledge of previous adjacencies.

   o  To improve the probability that grace-LSAs will be delivered, an
      implementation may send them multiple times (see for example the
      Robustness Variable in [<a href="#ref-8" title='"Internet Group Management Protocol, Version 3"'>8</a>]).

   o  The restart reason in the grace-LSAs must be set to 0 (unknown) or
      3 (switch to redundant control processor).  This enables the
      neighbors to decide whether they want to help the router through
      an unplanned restart.






<span class="grey">Moy, et al.                 Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Interaction%20with%20Traffic%20Engineering"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Interaction with Traffic Engineering</span>

   The operation of the Traffic Engineering Extensions to OSPF [<a href="#ref-4" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>4</a>]
   during OSPF Graceful Restart is specified in [<a href="#ref-6" title='"Routing Extensions in Support of Generalized MPLS"'>6</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Possible%20Future%20Work"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Possible Future Work</span>

   Devise a less conservative algorithm for graceful restart helper
   termination that provides a comparable level of black hole and
   routing loop avoidance.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Intellectual%20Property%20Rights%20Notice"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Intellectual Property Rights Notice</span>

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in <a href="https://tools.ietf.org/html/bcp11">BCP-11</a>.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Normative%20References"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-1" name="ref-1">1</a>] Moy, J., "OSPF Version 2", STD 54, <a href="rfc2328.html">RFC 2328</a>, April 1998.

   [<a id="ref-2" name="ref-2">2</a>] Coltun, R., "The OSPF Opaque LSA Option", <a href="rfc2370.html">RFC 2370</a>, July 1998.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20Informative%20References"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-3" name="ref-3">3</a>] Murphy, S., Badger, M. and B. Wellington, "OSPF with Digital
       Signatures", <a href="rfc2154.html">RFC 2154</a>, June 1997.

   [<a id="ref-4" name="ref-4">4</a>] Katz, D., Kompella, K. and D. Yeung, "Traffic Engineering (TE)
       Extensions to OSPF Version 2", <a href="rfc3630.html">RFC 3630</a>, September 2003.



<span class="grey">Moy, et al.                 Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


   [<a id="ref-5" name="ref-5">5</a>] Murphy, P., "The OSPF Not-So-Stubby Area (NSSA) Option", <a href="rfc3101.html">RFC</a>
       <a href="rfc3101.html">3101</a>, January 2003.

   [<a id="ref-6" name="ref-6">6</a>] Kompella, K., et al., "Routing Extensions in Support of
       Generalized MPLS", Work in Progress.

   [<a id="ref-7" name="ref-7">7</a>] Moy, J., "Extending OSPF to Support Demand Circuits", <a href="rfc1793.html">RFC 1793</a>,
       April 1995.

   [<a id="ref-8" name="ref-8">8</a>] Cain, B., Deering, S., Kouvelas, I., Fenner, B. and A.
       Thyagarajan, "Internet Group Management Protocol, Version 3", <a href="rfc3376.html">RFC</a>
       <a href="rfc3376.html">3376</a>, October 2002.







































<span class="grey">Moy, et al.                 Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/A.%20%20Grace-LSA%20Format"></a><a class="selflink" href="#appendix-A" name="appendix-A">A</a>.  Grace-LSA Format</span>

   The grace-LSA is a link-local scoped Opaque-LSA [<a href="#ref-2" title='"The OSPF Opaque LSA Option"'>2</a>], having an Opaque
   Type of 3 and an Opaque ID equal to 0.  Grace-LSAs are originated by
   a router that wishes to execute a graceful restart of its OSPF
   software.  A grace-LSA requests that the router's neighbors aid in
   its graceful restart by continuing to advertise the router as fully
   adjacent during a specified grace period.

   Each grace-LSA has an LS age field set to 0 when the LSA is first
   originated; the current value of the LS age then indicates how long
   ago the restarting router made its request.  The body of the LSA is
   TLV-encoded.  The TLV-encoded information includes the length of the
   grace period, the reason for the graceful restart and, when the
   grace-LSA is associated with a broadcast, NBMA or Point-to-MultiPoint
   network segment, the IP interface address of the restarting router.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            LS age             |     Options   |       9       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       3       |                    0                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Advertising Router                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     LS sequence number                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         LS checksum           |             length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +-                            TLVs                             -+
      |                             ...                               |

   The format of the TLVs within the body of a grace-LSA is the same as
   the format used by the Traffic Engineering Extensions to OSPF [<a href="#ref-4" title='"Traffic Engineering (TE) Extensions to OSPF Version 2"'>4</a>].
   The LSA payload consists of one or more nested Type/Length/Value
   (TLV) triplets.  The format of each TLV is:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Type             |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                            Value...                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+





<span class="grey">Moy, et al.                 Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


   The Length field defines the length of the value portion in octets
   (thus a TLV with no value portion would have a length of zero).  The
   TLV is padded to four-octet alignment; padding is not included in the
   length field (so a three octet value would have a length of three,
   but the total size of the TLV would be eight octets).  Nested TLVs
   are also 32-bit aligned.  For example, a one byte value would have
   the length field set to 1, and three bytes of padding would be added
   to the end of the value portion of the TLV.  Unrecognized types are
   ignored.

   The following is the list of TLVs that can appear in the body of a
   grace-LSA:

   o  Grace Period (Type=1, length=4).  The number of seconds that the
      router's neighbors should continue to advertise the router as
      fully adjacent, regardless of the state of database
      synchronization between the router and its neighbors.  Since this
      time period began when grace-LSA's LS age was equal to 0, the
      grace period terminates when either:

      a) the LS age of the grace-LSA exceeds the value of a Grace Period
         or

      b) the grace-LSA is flushed.  See <a href="#section-3.2">Section 3.2</a> for other conditions
         that terminate graceful restart.

      This TLV must always appear in a grace-LSA.

   o  Graceful restart reason (Type=2, length=1).  Encodes the reason
      for the router restart as one of the following: 0 (unknown), 1
      (software restart), 2 (software reload/upgrade) or 3 (switch to
      redundant control processor).  This TLV must always appear in a
      grace-LSA.

   o  IP interface address (Type=3, length=4).  The router's IP
      interface address on the subnet associated with the grace-LSA.
      Required on broadcast, NBMA and Point-to-MultiPoint segments,
      where the helper uses the IP interface address to identify the
      restarting router (see <a href="#section-3.1">Section 3.1</a>).

   DoNotAge is never set in a grace-LSA, even if the grace-LSA is
   flooded over a demand circuit [<a href="#ref-7" title='"Extending OSPF to Support Demand Circuits"'>7</a>].  This is because the grace-LSA's
   LS age field is used to calculate the duration of the grace period.

   Grace-LSAs have link-local scope because they only need to be seen by
   the router's direct neighbors.





<span class="grey">Moy, et al.                 Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


   Additional Grace-LSA TLVs must be described in an Internet Draft and
   will be subject to the expert review of the OSPF Working Group.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/B.%20%20Configurable%20Parameters"></a><a class="selflink" href="#appendix-B" name="appendix-B">B</a>.  Configurable Parameters</span>

   OSPF graceful restart parameters are suggested below.  Section B.1
   contains a minimum subset of parameters that should be supported.
   B.2 includes some additional configuration parameters that an
   implementation may choose to support.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/B.1.%20%20Global%20Parameters%20%28Minimum%20subset%29"></a><a class="selflink" href="#appendix-B.1" name="appendix-B.1">B.1</a>.  Global Parameters (Minimum subset)</span>

   RestartSupport

      The router's level of support for OSPF graceful restart.
      Allowable values are none, planned restart only, and
      planned/unplanned.

   RestartInterval

      The graceful restart interval in seconds.  The range is from 1 to
      1800 seconds, with a suggested default of 120 seconds.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/B.2.%20%20Global%20Parameters%20%28Optional%29"></a><a class="selflink" href="#appendix-B.2" name="appendix-B.2">B.2</a>.  Global Parameters (Optional)</span>

   RestartHelperSupport

      The router's support for acting as an OSPF restart helper.
      Allowable values are none, planned restart only, and
      planned/unplanned.

   RestartHelperStrictLSAChecking

      Indicates whether or not an OSPF restart helper should terminate
      graceful restart when there is a change to an LSA that would be
      flooded to the restarting router or when there is a changed LSA on
      the restarting router's retransmission list when graceful restart
      is initiated.  The suggested default is enabled.













<span class="grey">Moy, et al.                 Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


Security Considerations

   One of the ways to attack a link-state protocol such as OSPF is to
   inject false LSAs into, or corrupt existing LSAs in, the link-state
   database.  Injecting a false grace-LSA would allow an attacker to
   spoof a router that, in reality, has been withdrawn from service.
   The standard way to prevent such corruption of the link-state
   database is to secure OSPF protocol exchanges using the cryptographic
   authentication specified in [<a href="#ref-1" title='"OSPF Version 2"'>1</a>].  An even stronger way of securing
   link-state database contents has been proposed in [<a href="#ref-3" title='"OSPF with Digital Signatures"'>3</a>].

   When cryptographic authentication [<a href="#ref-1" title='"OSPF Version 2"'>1</a>] is used on the restarting
   router the preservation of received sequence numbers in non-volatile
   storage is not mandatory.  There is a risk that a replayed Hello
   packet could cause neighbor state for a deceased neighbor to be
   created.  However, the risk is no greater than during normal
   operation.

Acknowledgments

   The authors wish to thank John Drake, Vishwas Manral, Kent Wong, and
   Don Goodspeed for their helpful comments.  We also wish to thank Alex
   Zinin and Bill Fenner for their thorough review.




























<span class="grey">Moy, et al.                 Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


Authors' Addresses

   J. Moy
   Sycamore Networks, Inc.
   150 Apollo Drive
   Chelmsford, MA 01824

   Phone: (978) 367-2505
   Fax:   (978) 256-4203
   EMail: jmoy@sycamorenet.com


   Padma Pillay-Esnault
   Juniper Networks
   1194 N, Mathilda Avenue
   Sunnyvale, CA 94089-1206

   EMail: padma@juniper.net


   Acee Lindem
   Redback Networks
   102 Carric Bend Court
   Cary, NC 27519

   EMail: acee@redback.com

























<span class="grey">Moy, et al.                 Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc3623.html">RFC 3623</a>                 Graceful OSPF Restart             November 2003</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2003).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Moy, et al.                 Standards Track                    [Page 18]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc3623 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:45 GMT --></html>