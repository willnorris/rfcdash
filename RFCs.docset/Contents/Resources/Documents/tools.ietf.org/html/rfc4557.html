<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4557 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 07 Jun 2014 20:18:46 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.107" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4557" name="DC.Identifier"/>
<meta content="This document defines a mechanism to enable in-band transmission of\nOnline Certificate Status Protocol (OCSP) responses in the Kerberos\nnetwork authentication protocol. These responses are used to verify\nthe validity of the certificates used in Public Key Cryptography for\nInitial Authentication in Kerberos (PKINIT), which is the Kerberos\nVersion 5 extension that provides for the use of public key\ncryptography. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Zhu, Larry" name="DC.Creator"/>
<meta content="Williams, Nicolas" name="DC.Creator"/>
<meta content="Jaganathan, Karthik" name="DC.Creator"/>
<meta content="June, 2006" name="DC.Date.Issued"/>
<meta content="Online Certificate Status Protocol (OCSP) Support for Public Key Cryptography for Initial Authentication in Kerberos (PKINIT)" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4557 - Online Certificate Status Protocol (OCSP) Support for Public Key Cryptography for Initial Authentication in Kerberos (PKINIT)</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc4557.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc4557" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-ietf-krb-wg-ocsp-for-pkinit" title="draft-ietf-krb-wg-ocsp-for-pkinit">draft-ietf-krb-wg...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4557" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc4557" title="Side-by-side diff">Diff2</a>] [<a href="http://www.rfc-editor.org/errata_search.php?rfc=4557">Errata</a>]        </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                             L. Zhu
Request for Comments: 4557                                 K. Jaganathan
Category: Standards Track                          Microsoft Corporation
                                                             N. Williams
                                                        Sun Microsystems
                                                               June 2006


         <span class="h1">Online Certificate Status Protocol (OCSP) Support for</span>
                      <span class="h1">Public Key Cryptography for</span>
              <span class="h1">Initial Authentication in Kerberos (PKINIT)</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This document defines a mechanism to enable in-band transmission of
   Online Certificate Status Protocol (OCSP) responses in the Kerberos
   network authentication protocol.  These responses are used to verify
   the validity of the certificates used in Public Key Cryptography for
   Initial Authentication in Kerberos (PKINIT), which is the Kerberos
   Version 5 extension that provides for the use of public key
   cryptography.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Conventions Used in This Document ...............................<a href="#page-2">2</a>
   <a href="#section-3">3</a>. Message Definition ..............................................<a href="#page-2">2</a>
   <a href="#section-4">4</a>. Security Considerations .........................................<a href="#page-3">3</a>
   <a href="#section-5">5</a>. Acknowledgements ................................................<a href="#page-4">4</a>
   <a href="#section-6">6</a>. References ......................................................<a href="#page-4">4</a>
      <a href="#section-6.1">6.1</a>. Normative References .......................................<a href="#page-4">4</a>
      <a href="#section-6.2">6.2</a>. Informative References .....................................<a href="#page-4">4</a>







<span class="grey">Zhu, et al.                 Standards Track                     [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4557.html">RFC 4557</a>                OCSP Support for PKINIT                June 2006</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Online Certificate Status Protocol (OCSP) [<a href="rfc2560.html" title='"X.509 Internet Public Key Infrastructure Online Certificate Status Protocol - OCSP"'>RFC2560</a>] enables
   applications to obtain timely information regarding the revocation
   status of a certificate.  Because OCSP responses are well bounded and
   small in size, constrained clients may wish to use OCSP to check the
   validity of the certificates for Kerberos Key Distribution Center
   (KDC) in order to avoid transmission of large Certificate Revocation
   Lists (CRLs) and therefore save bandwidth on constrained networks
   [<a href="#ref-OCSP-PROFILE" title='"Lightweight OCSP Profile for High Volume Environments"'>OCSP-PROFILE</a>].

   This document defines a pre-authentication type [<a href="rfc4120.html" title='"The Kerberos Network Authentication Service (V5)"'>RFC4120</a>], where the
   client and the KDC MAY piggyback OCSP responses for certificates used
   in authentication exchanges, as defined in [<a href="rfc4556.html" title='"Public Key Cryptography for Initial Authentication in Kerberos (PKINIT)"'>RFC4556</a>].

   By using this OPTIONAL extension, PKINIT clients and the KDC can
   maximize the reuse of cached OCSP responses.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions Used in This Document</span>

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Message%20Definition"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Message Definition</span>

   A pre-authentication type identifier is defined for this mechanism:

              PA-PK-OCSP-RESPONSE              18

   The corresponding padata-value field [<a href="rfc4120.html" title='"The Kerberos Network Authentication Service (V5)"'>RFC4120</a>] contains the DER [X60]
   encoding of the following ASN.1 type:

          PKOcspData ::= SEQUENCE OF OcspResponse
                         -- If more than one OcspResponse is
                         -- included, the first OcspResponse
                         -- MUST contain the OCSP response
                         -- for the signer's certificate.
                         -- The signer refers to the client for
                         -- AS-REQ, and the KDC for the AS-REP,
                         -- respectively.

          OcspResponse ::= OCTET STRING
                         -- Contains a complete OCSP response,
                         -- as defined in [<a href="rfc2560.html" title='"X.509 Internet Public Key Infrastructure Online Certificate Status Protocol - OCSP"'>RFC2560</a>].

   The client MAY send OCSP responses for certificates used in PA-PK-
   AS-REQ [<a href="rfc4556.html" title='"Public Key Cryptography for Initial Authentication in Kerberos (PKINIT)"'>RFC4556</a>] via a PA-PK-OCSP-RESPONSE.



<span class="grey">Zhu, et al.                 Standards Track                     [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4557.html">RFC 4557</a>                OCSP Support for PKINIT                June 2006</span>


   The KDC that receives a PA-PK-OCSP-RESPONSE SHOULD send a PA-PK-
   OCSP-RESPONSE containing OCSP responses for certificates used in the
   KDC's PA-PK-AS-REP.  The client can request a PA-PK-OCSP-RESPONSE by
   using a PKOcspData containing an empty sequence.

   The KDC MAY send a PA-PK-OCSP-RESPONSE when it does not receive a
   PA-PK-OCSP-RESPONSE from the client.

   The PA-PK-OCSP-RESPONSE sent by the KDC contains OCSP responses for
   certificates used in PA-PK-AS-REP [<a href="rfc4556.html" title='"Public Key Cryptography for Initial Authentication in Kerberos (PKINIT)"'>RFC4556</a>].

   Note the lack of integrity protection for the empty or missing OCSP
   response; lack of an expected OCSP response from the KDC for the
   KDC's certificates SHOULD be treated as an error by the client,
   unless it is configured otherwise.

   When using OCSP, the response is signed by the OCSP server, which is
   trusted by the receiver.  Depending on local policy, further
   verification of the validity of the OCSP servers may be needed

   The client and the KDC SHOULD ignore invalid OCSP responses received
   via this mechanism, and they MAY implement CRL processing logic as a
   fall-back position, if the OCSP responses received via this mechanism
   alone are not sufficient for the verification of certificate
   validity.  The client and/or the KDC MAY ignore a valid OCSP response
   and perform its own revocation status verification independently.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Security%20Considerations"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Security Considerations</span>

   The pre-authentication data in this document do not actually
   authenticate any principals, but are designed to be used in
   conjunction with PKINIT.

   There is no binding between PA-PK-OCSP-RESPONSE pre-authentication
   data and PKINIT pre-authentication data other than a given OCSP
   response corresponding to a certificate used in a PKINIT pre-
   authentication data element.  Attacks involving removal or
   replacement of PA-PK-OCSP-RESPONSE pre-authentication data elements
   are, at worst, downgrade attacks, where a PKINIT client or KDC would
   proceed without use of CRLs or OCSP for certificate validation, or
   denial-of-service attacks, where a PKINIT client or KDC that cannot
   validate the other's certificate without an accompanying OCSP
   response might reject the AS exchange or might have to download very
   large CRLs in order to continue.  Kerberos V does not protect against
   denial-of-service attacks; therefore, the denial-of-service aspect of
   these attacks is acceptable.





<span class="grey">Zhu, et al.                 Standards Track                     [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4557.html">RFC 4557</a>                OCSP Support for PKINIT                June 2006</span>


   If a PKINIT client or KDC cannot validate certificates without the
   aid of a valid PA-PK-OCSP-RESPONSE, then it SHOULD fail the AS
   exchange, possibly according to local configuration.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Acknowledgements"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Acknowledgements</span>

   This document was based on conversations among the authors, Jeffrey
   Altman, Sam Hartman, Martin Rex, and other members of the Kerberos
   working group.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20References"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Normative%20References"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]      Bradner, S., "Key words for use in RFCs to Indicate
                  Requirement Levels", <a href="http://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2560" name="ref-RFC2560">RFC2560</a>]      Myers, M., Ankney, R., Malpani, A., Galperin, S., and
                  C. Adams, "X.509 Internet Public Key Infrastructure
                  Online Certificate Status Protocol - OCSP", <a href="rfc2560.html">RFC 2560</a>,
                  June 1999.

   [<a id="ref-RFC4120" name="ref-RFC4120">RFC4120</a>]      Neuman, C., Yu, T., Hartman, S., and K. Raeburn, "The
                  Kerberos Network Authentication Service (V5)", <a href="rfc4120.html">RFC</a>
                  <a href="rfc4120.html">4120</a>, July 2005.

   [<a id="ref-RFC4556" name="ref-RFC4556">RFC4556</a>]      Zhu, L. and B. Tung, "Public Key Cryptography for
                  Initial Authentication in Kerberos (PKINIT)", <a href="rfc4556.html">RFC</a>
                  <a href="rfc4556.html">4556</a>, June 2006.

   [<a id="ref-X690" name="ref-X690">X690</a>]         ASN.1 encoding rules: Specification of Basic Encoding
                  Rules (BER), Canonical Encoding Rules (CER) and
                  Distinguished Encoding Rules (DER), ITU-T
                  Recommendation X.690 (1997) | ISO/IEC International
                  Standard 8825-1:1998.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Informative%20References"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Informative References</span>

   [<a id="ref-OCSP-PROFILE" name="ref-OCSP-PROFILE">OCSP-PROFILE</a>] Deacon, A. and R. Hurst, "Lightweight OCSP Profile for
                  High Volume Environments", Work in Progress, May 2006.











<span class="grey">Zhu, et al.                 Standards Track                     [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4557.html">RFC 4557</a>                OCSP Support for PKINIT                June 2006</span>


Authors' Addresses

   Larry Zhu
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA  98052
   US

   EMail: lzhu@microsoft.com


   Karthik Jaganathan
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA  98052
   US

   EMail: karthikj@microsoft.com


   Nicolas Williams
   Sun Microsystems
   5300 Riata Trace Ct
   Austin, TX  78727
   US

   EMail: Nicolas.Williams@sun.com
























<span class="grey">Zhu, et al.                 Standards Track                     [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4557.html">RFC 4557</a>                OCSP Support for PKINIT                June 2006</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2006).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="http://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="http://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="http://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).







Zhu, et al.                 Standards Track                     [Page 6]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>



</body><!-- Mirrored from tools.ietf.org/html/rfc4557 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 07 Jun 2014 20:18:46 GMT --></html>