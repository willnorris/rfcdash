<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5063 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:37 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-aruns-ccamp-rsvp-restart-ext" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:5063" name="DC.Identifier"/>
<meta content="October, 2007" name="DC.Date.Issued"/>
<meta content="Rahman, Reshad" name="DC.Creator"/>
<meta content="Satyanarayana, Arun" name="DC.Creator"/>
<meta content="This document describes extensions to the Resource Reservation
Protocol (RSVP) Graceful Restart mechanisms defined in RFC 3473. The
extensions enable the recovery of RSVP signaling state based on the
Path message last sent by the node being restarted.  Previously
defined Graceful Restart mechanisms, also called recovery from nodal
faults, permit recovery of signaling state from adjacent nodes when
the data plane has retained the associated forwarding state across a
restart. Those mechanisms do not fully support signaling state
recovery on ingress nodes or recovery of all RSVP objects.  The
extensions defined in this document build on the RSVP Hello extensions
defined in RFC 3209, and extensions for state recovery on nodal faults
defined in RFC 3473. Using these extensions, the restarting node can
recover all previously transmitted Path state, including the Explicit
Route Object and the downstream (outgoing) interface identifiers. The
extensions can also be used to recover signaling state after the
restart of an ingress node.  These extensions are not used to create
or restore data plane state.  The extensions optionally support the
use of Summary Refresh, defined in RFC 2961, to reduce the number of
messages exchanged during the Recovery Phase when the restarting node
has recovered signaling state locally for one or more Label Switched
Paths (LSPs). [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5063 - Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5063.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5063" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-ccamp-rsvp-restart-ext" title="draft-ietf-ccamp-rsvp-restart-ext">draft-ietf-ccam...</a>] [<a href="https://datatracker.ietf.org/doc/rfc5063" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5063" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5063" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=5063">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                              A. Satyanarayana, Ed.
Request for Comments: 5063                                R. Rahman, Ed.
Updates: <a href="rfc2961.html">2961</a>, <a href="rfc3473.html">3473</a>                                        Cisco Systems
Category: Standards Track                                   October 2007


        <span class="h1">Extensions to GMPLS Resource Reservation Protocol (RSVP)</span>
                            <span class="h1">Graceful Restart</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Abstract

   This document describes extensions to the Resource Reservation
   Protocol (RSVP) Graceful Restart mechanisms defined in <a href="rfc3473.html">RFC 3473</a>.  The
   extensions enable the recovery of RSVP signaling state based on the
   Path message last sent by the node being restarted.

   Previously defined Graceful Restart mechanisms, also called recovery
   from nodal faults, permit recovery of signaling state from adjacent
   nodes when the data plane has retained the associated forwarding
   state across a restart.  Those mechanisms do not fully support
   signaling state recovery on ingress nodes or recovery of all RSVP
   objects.

   The extensions defined in this document build on the RSVP Hello
   extensions defined in <a href="rfc3209.html">RFC 3209</a>, and extensions for state recovery on
   nodal faults defined in <a href="rfc3473.html">RFC 3473</a>.  Using these extensions, the
   restarting node can recover all previously transmitted Path state,
   including the Explicit Route Object and the downstream (outgoing)
   interface identifiers.  The extensions can also be used to recover
   signaling state after the restart of an ingress node.

   These extensions are not used to create or restore data plane state.

   The extensions optionally support the use of Summary Refresh, defined
   in <a href="rfc2961.html">RFC 2961</a>, to reduce the number of messages exchanged during the
   Recovery Phase when the restarting node has recovered signaling state
   locally for one or more Label Switched Paths (LSPs).






<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Conventions Used in This Document ...............................<a href="#page-5">5</a>
   <a href="#section-3">3</a>. Terminology .....................................................<a href="#page-5">5</a>
   <a href="#section-4">4</a>. Extensions to Nodal Fault Handling ..............................<a href="#page-5">5</a>
      <a href="#section-4.1">4.1</a>. RecoveryPath Message Format ................................<a href="#page-5">5</a>
      <a href="#section-4.2">4.2</a>. Capability Object ..........................................<a href="#page-6">6</a>
           <a href="#section-4.2.1">4.2.1</a>. Conformance .........................................<a href="#page-7">7</a>
      <a href="#section-4.3">4.3</a>. Related Procedures .........................................<a href="#page-7">7</a>
      <a href="#section-4.4">4.4</a>. Procedures for the Capability Object .......................<a href="#page-8">8</a>
           <a href="#section-4.4.1">4.4.1</a>. Procedures for the Downstream Neighbor ..............<a href="#page-8">8</a>
           <a href="#section-4.4.2">4.4.2</a>. Procedures for the Restarting Node ..................<a href="#page-8">8</a>
      <a href="#section-4.5">4.5</a>. Procedures for the RecoveryPath Message ....................<a href="#page-9">9</a>
           <a href="#section-4.5.1">4.5.1</a>. Procedures for the Downstream Neighbor ..............<a href="#page-9">9</a>
           <a href="#section-4.5.2">4.5.2</a>. Procedures for the Restarting Node .................<a href="#page-10">10</a>
                  <a href="#section-4.5.2.1">4.5.2.1</a>. Path and RecoveryPath Message Procedures ..11
                  <a href="#section-4.5.2.2">4.5.2.2</a>. Re-Synchronization Procedures .............<a href="#page-12">12</a>
                  4.5.2.3. Procedures on Expiration of
                           Recovery Period ...........................<a href="#page-13">13</a>
      <a href="#section-4.6">4.6</a>. Compatibility .............................................<a href="#page-13">13</a>
   <a href="#section-5">5</a>. RecoveryPath Summary Refresh ...................................<a href="#page-14">14</a>
      <a href="#section-5.1">5.1</a>. MESSAGE_ID ACK/NACK and MESSAGE_ID LIST Objects ...........<a href="#page-15">15</a>
      <a href="#section-5.2">5.2</a>. RecoveryPath Srefresh Capable Bit .........................<a href="#page-16">16</a>
           <a href="#section-5.2.1">5.2.1</a>. Procedures .........................................<a href="#page-16">16</a>
           <a href="#section-5.2.2">5.2.2</a>. Compatibility ......................................<a href="#page-17">17</a>
      <a href="#section-5.3">5.3</a>. RecoveryPath Summary Refresh Procedures ...................<a href="#page-17">17</a>
           5.3.1. Generation of RecoveryPath-Related Srefresh
                  Messages ...........................................<a href="#page-17">17</a>
           5.3.2. RecoveryPath-Related Srefresh Receive
                  Processing and NACK Generation .....................<a href="#page-19">19</a>
           5.3.3. RecoveryPath-Related MESSAGE_ID NACK
                  Receive Processing .................................<a href="#page-19">19</a>
   <a href="#section-6">6</a>. Security Considerations ........................................<a href="#page-20">20</a>
   <a href="#section-7">7</a>. Acknowledgments ................................................<a href="#page-21">21</a>
   <a href="#section-8">8</a>. IANA Considerations ............................................<a href="#page-21">21</a>
   <a href="#section-9">9</a>. Normative References ...........................................<a href="#page-22">22</a>














<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   RSVP Graceful Restart is defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and uses mechanisms
   defined in [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>].  When data/forwarding plane state can be
   retained across the restart of the RSVP agent that established such
   state, RSVP Graceful Restart provides the ability for the RSVP agent
   to resynchronize its state based on updates received from its
   neighboring RSVP agents, and, reconcile such state with the retained
   data/forwarding plane state.  [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>] describes a mechanism, using
   RSVP Hello messages, to detect the state of an adjacent RSVP agent.
   [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] extends this mechanism to advertise the capability of
   retaining data/forwarding plane state across the restart of a node or
   a "nodal fault".  [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] also defines the Recovery Label object
   for use in the Path message of the RSVP neighbor upstream of a
   restarting node, to indicate that the Path message is for existing
   data plane state.

   This document presents extensions to address two aspects of graceful
   restart not previously supported.  The presented extensions enable a
   restarting node to recover all objects in previously transmitted Path
   messages, including the Explicit Route Object (ERO), from its
   downstream neighbors, thus recovering the control plane state.  The
   extensions do not facilitate the recovery or creation of
   data/forwarding plane state, and can only be used to reestablish
   control plane state that matches in-place data/forwarding state.  The
   extensions also enable graceful restart of an ingress node that does
   not preserve full RSVP state across restarts.  The presented
   extensions are equally applicable to LSPs of various switching types
   as defined in [<a href="rfc3471.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Functional Description"'>RFC3471</a>].

   Per [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], a restarting node can distinguish Path messages
   associated with LSPs being recovered by the presence of the Recovery
   Label object.  To determine the downstream (outgoing) interface and
   associated label(s), the restarting node must consult the data plane.
   This may not be possible for all types of nodes.  Furthermore, data
   plane information is not sufficient to reconstruct all previously
   transmitted Path state.  In these cases, the only source of RSVP
   state is the downstream RSVP neighbor.

   For example, when the restarting node is an ingress node, all
   previously transmitted Path state may need to be recovered.  Such
   Path state may include (but is not restricted to) the Protection
   object, the Admin Status object, the Session Attribute object, the
   Notify Request object, and the Sender Tspec object.  A restarting
   transit node may have modified received Path state in its previously
   transmitted Path message, which cannot be reconstructed internally
   during recovery.




<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   Another example of state that cannot be completely recovered from the
   data plane in some cases is the previously transmitted ERO.  Recovery
   of the previously transmitted ERO minimizes subsequent change of
   downstream LSP state.  On a restarting ingress node, the ERO may have
   been based on configuration or the result of a previous path
   computation.  A restarting transit node may have previously performed
   some form of path computation as a result of not receiving an ERO or
   receiving a loose hop in the ERO.  In addition to the ERO, the
   restarting node may have modified other received Path state in its
   previously transmitted Path state, which cannot be reconstructed
   internally during recovery.

   The defined extensions provide a restarting upstream node with all
   information previously transmitted by the node in Path messages.
   This is accomplished by the downstream RSVP neighbor sending a new
   message for every Path message it has previously received from the
   restarting node, after reestablishing RSVP communication with a
   restarted node that supports the recovery procedures defined in
   <a href="#section-4.5.2">Section 4.5.2</a> of this document.

   The new message is called the RecoveryPath message.  The message
   conveys the contents of the last received Path message back to the
   restarting node.  The restarting node can use the RecoveryPath
   message, along with the state in the received Path message to
   associate control and data plane state and to validate the forwarding
   state with the state presented by the neighboring RSVP nodes.

   The restarting node indicates its desire to receive and process the
   RecoveryPath message by including a new object called the Capability
   object with the RecoveryPath Desired bit set, in its Hello messages
   sent to the downstream RSVP neighbor.  The downstream RSVP neighbor
   can indicate its ability to send RecoveryPath messages by including
   the Capability object with the RecoveryPath Transmit Enabled set in
   its Hello messages to the restarting node.  Thus, both the restarting
   node and its RSVP neighbor, with the help of the Capability object,
   can detect if the RecoveryPath message extensions defined in this
   document can be used to recover signaling state after a restart.

   If the restarting node is a transit node, it will receive a Path
   message with a Recovery Label object from its upstream RSVP neighbor.
   In addition, the RecoveryPath message allows such transit nodes to
   reconstruct any state that was previously dynamically constructed by
   the node, e.g., ERO sub-objects.  If the restarting node is an
   ingress node, all significant signaling state can be recovered based
   on the RecoveryPath message.






<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   Selective transmission of the RecoveryPath message is supported by
   enhancing the Summary Refresh mechanisms defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>].  When
   Recovery Summary Refresh is supported, the restarting node can select
   the LSPs for which it would like to receive RecoveryPath messages.
   This is useful when the restarting node is able to locally recover
   the signaling state for a subset of the previously active LSPs.

   Restarting egress nodes, and Resv message processing are not impacted
   by the presented extensions, see [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] for details.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions Used in This Document</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Terminology"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Terminology</span>

   The reader is assumed to be familiar with the terminology defined in
   [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>] and [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].

   Throughout this document, the term "node", when used in the context
   of a restarting or restarted node, generally refers to the control
   plane component, which is the signaling controller for a data plane
   switch.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Extensions%20to%20Nodal%20Fault%20Handling"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Extensions to Nodal Fault Handling</span>

   This section presents the protocol modifications to <a href="rfc3473.html#section-9">Section 9 of
   [RFC3473]</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20RecoveryPath%20Message%20Format"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  RecoveryPath Message Format</span>

   The format of a RecoveryPath message is the same as the format of a
   Path message, as defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], but uses a new message number
   (30) so that it can be identified correctly.

      &lt;RecoveryPath Message&gt; ::= &lt;Path Message&gt;

   The destination address used in the IP header of a RecoveryPath
   message MUST be the same as the destination address used in the IP
   header of the corresponding Resv message last generated by the
   sending node.  Except as specified below, all objects in a
   RecoveryPath message are identical to the objects in the
   corresponding Path message last received by the sending node.






<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Capability%20Object"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Capability Object</span>

   Capability objects are carried in RSVP Hello messages.  The
   Capability object uses Class-Number 134 (of form 10bbbbbb) and C-Type
   of 1.

   The message format of a Hello message is modified to be:

      &lt;Hello Message&gt; ::= &lt;Common Header&gt; [ &lt;INTEGRITY&gt; ] &lt;HELLO&gt;
                          [ &lt;RESTART_CAP&gt; ] [ &lt;CAPABILITY&gt; ]

   The format of a Capability object is:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            Length             | Class-Num(134)|  C-Type  (1)  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Reserved                        |T|R|S|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      RecoveryPath Transmit Enabled (T): 1 bit

         When set (1), indicates that the sending node is enabled to
         send RecoveryPath messages.  Absence of the Capability object
         MUST be treated as if the T-bit is cleared (0).

      RecoveryPath Desired (R): 1 bit

         When set (1), indicates that the sending node desires to
         receive RecoveryPath messages.  Absence of the Capability
         object MUST be treated as if the R-bit is cleared (0).

      RecoveryPath Srefresh Capable (S): 1 bit

         When set (1), along with the R-bit, indicates that the sending
         node is capable of receiving and processing Srefresh messages
         with the RecoveryPath Flag set (1) in the MESSAGE_ID LIST
         object.  Absence of the Capability object MUST be treated as if
         the S-bit is cleared (0).  Related procedures are defined in
         <a href="#section-5.2.1">Section 5.2.1</a>.

      Reserved bits

         Reserved bits MUST be set to zero on transmission and MUST be
         ignored on receipt.





<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.1.%20%20Conformance"></a><a class="selflink" href="#section-4.2.1" name="section-4.2.1">4.2.1</a>.  Conformance</span>

   All nodes supporting the extensions defined in this document MUST be
   able to transmit, and properly receive and process RecoveryPath
   messages.  All nodes MUST be able to set both the T and R bits.  Both
   the T and R bits SHOULD be set (1) by default.  A node MAY allow
   RecoveryPath message transmission and reception to be independently
   disabled based on local policy.  When RecoveryPath message
   transmission is disabled, the T-bit MUST be set to zero (0).  When
   RecoveryPath message reception is not desired, the R-bit MUST be set
   to zero (0).

   Any node that supports the extensions defined in this document and
   sets the Refresh-Reduction-Capable bit [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>] SHOULD support
   setting of the S-bit and support the mechanisms defined in <a href="#section-5">Section 5</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Related%20Procedures"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Related Procedures</span>

   This document does not modify existing procedures for sending and
   receiving RSVP Hello messages, as defined in [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>], and the
   Restart_Cap object in RSVP Hello messages as defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].
   The procedures for control channel faults are defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>]
   and are not changed by this document.

   The presented extensions require the use of RSVP Hellos, as defined
   in [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>], and the use of the Restart_Cap object extension as
   defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  The presented extensions address only "Nodal
   Faults" as defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  Control channel faults are fully
   addressed in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].

   Note: There are no changes to the procedures defined in <a href="rfc3473.html#section-9.5.3">Section 9.5.3
   in [RFC3473]</a> (Procedures for the Neighbor of a Restarting node).
   There are no changes to the procedures defined in <a href="rfc3473.html#section-9.5.2">Section 9.5.2 in
   [RFC3473]</a> if the restarting node is an egress node.

   There are no changes to the procedures with respect to the
   data/forwarding plane as described in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  In particular, a
   restarting node MUST NOT create data/forwarding plane state as the
   result of any of the extensions defined in this document.

   The following sections assume previously defined procedures are
   followed, except where explicitly modified.









<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Procedures%20for%20the%20Capability%20Object"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Procedures for the Capability Object</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.4.1.%20%20Procedures%20for%20the%20Downstream%20Neighbor"></a><a class="selflink" href="#section-4.4.1" name="section-4.4.1">4.4.1</a>.  Procedures for the Downstream Neighbor</span>

   If a node is capable of sending RecoveryPath messages, it MUST
   include the Capability object with the RecoveryPath Transmit Enabled
   (T) bit set (1) in all its Hello messages.

   If the downstream RSVP neighbor receives Hello messages from a
   restarting node, with the Restart_Cap object, as defined in
   [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], and with the Capability object with the RecoveryPath
   Desired (R) bit set (1), it MUST treat the restarting node as capable
   of receiving and processing RecoveryPath messages as defined in this
   document.

   If the downstream RSVP neighbor receives a Capability object in a
   Hello message with the RecoveryPath Desired (R) bit set (1), but
   without the Restart_Cap object, it MUST process the Hello message as
   if the RecoveryPath Receive Desired (R) bit is cleared (0) in the
   Hello message.

   If the downstream RSVP neighbor does not receive the Capability
   object in Hello messages sent by the restarting node or the
   RecoveryPath Desired (R) bit is cleared (0) in the Capability object,
   it MUST treat the restarting node as not capable of supporting the
   RecoveryPath message procedures defined in this document, and MUST
   revert to recovery procedures as defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.4.2.%20%20Procedures%20for%20the%20Restarting%20Node"></a><a class="selflink" href="#section-4.4.2" name="section-4.4.2">4.4.2</a>.  Procedures for the Restarting Node</span>

   A node that expects to recover RSVP state by the receipt and
   processing of RecoveryPath messages according to procedures defined
   in this document, MUST include the Capability object with the
   RecoveryPath Desired (R) bit set (1) in its RSVP Hello messages to
   its neighbors.  The node MUST also include the Restart_Cap object, as
   defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], in all those Hello messages.

   If the Recovery Time is zero (0) or the restarting node does not
   support/desire the use of RecoveryPath messages, the RecoveryPath
   Desired (R) bit MUST be cleared (0) in the Capability object included
   in Hello messages, or the Capability object MAY be omitted from Hello
   messages sent by the restarting node.

   During the Recovery Period, if the restarting node receives Hello
   messages from a downstream RSVP neighbor with the RecoveryPath
   Transmit Enabled (T) bit set (1) in the Capability object and the
   Restart_Cap object, as defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], it MUST treat the
   downstream RSVP neighbor as capable of sending RecoveryPath messages



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   according to procedures defined in <a href="#section-4.5.1">Section 4.5.1</a>.  If the restarting
   node expects to recover RSVP state by the receipt and processing of
   RecoveryPath messages, it MUST follow procedures defined in <a href="#section-4.5.2">Section</a>
   <a href="#section-4.5.2">4.5.2</a>, with the downstream RSVP neighbor.

   During the Recovery Period, if the restarting node receives Hello
   messages from a downstream RSVP neighbor with the RecoveryPath
   Transmit Enabled (T) bit cleared (0) in the Capability object, or,
   with the Capability object not present, it MUST treat the downstream
   RSVP neighbor as not capable of the RecoveryPath message procedures
   defined in this document, and, it MUST revert to the recovery
   procedures defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] immediately, with the downstream RSVP
   neighbor.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20Procedures%20for%20the%20RecoveryPath%20Message"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  Procedures for the RecoveryPath Message</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.5.1.%20%20Procedures%20for%20the%20Downstream%20Neighbor"></a><a class="selflink" href="#section-4.5.1" name="section-4.5.1">4.5.1</a>.  Procedures for the Downstream Neighbor</span>

   After a downstream RSVP neighbor has detected that its upstream node
   has restarted, is capable of recovery as defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], and,
   is capable of receiving RecoveryPath messages as defined in <a href="#section-4.4">Section</a>
   <a href="#section-4.4">4.4</a>, the downstream RSVP neighbor MUST send a RecoveryPath message
   for each LSP associated with the restarting node for which it has
   sent a Resv message.  During the Recovery Period, if the downstream
   RSVP neighbor detects that the restarting node is not capable of
   receiving RecoveryPath messages by the absence of the Capability
   object or the RecoveryPath Desired (R) bit cleared (0) in the
   Capability object in the restarting node's Hello messages, the
   downstream RSVP neighbor SHOULD NOT send the RecoveryPath messages to
   the restarting node.

   The RecoveryPath message is constructed by copying all objects from
   the last received associated Path message, with the following
   exceptions:

      The MESSAGE_ID, MESSAGE_ID_ACK and MESSAGE_ID_NACK objects are not
      copied.  Any MESSAGE_ID, MESSAGE_ID_ACK and MESSAGE_ID_NACK
      objects used in RecoveryPath messages are generated based on
      procedures defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>].

      The Integrity object is not copied.  Any Integrity objects used in
      RecoveryPath messages are generated based on procedures defined in
      [<a href="rfc2747.html" title='"RSVP Cryptographic Authentication"'>RFC2747</a>].

      The RSVP Hop object is copied from the most recent associated Resv
      message sent to the restarted node for the LSP being recovered.





<span class="grey">Satyanarayana &amp; Rahman      Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


      In the sender descriptor, the Recovery Label object MUST be
      included, with the label value copied from the label value in the
      Label object in the most recent associated Resv message sent to
      the restarted node, for the LSP being recovered.

   All other objects from the most recent received Path message MUST be
   included in the RecoveryPath message.

   All RecoveryPath messages SHOULD be sent at least once within
   approximately 1/2 of the Recovery Time advertised by the restarted
   neighbor.  If there are many LSPs to be recovered by the restarted
   node, the downstream RSVP neighbor should avoid sending RecoveryPath
   messages in a short time interval to avoid overloading the restarted
   node's CPU.  Instead, it should spread the messages across 1/2 the
   Recovery Time interval.  The range of Recovery Time is dependent on
   many factors including, but not limited to, the CPU processing power
   on the restarting node as well as the upstream and downstream
   neighbors, the amount of CPU available for processing RSVP recovery
   procedures, and the implementation specifics that affect the amount
   of time taken to verify the received recovery state against existing
   forwarding plane state.  Such discussion is out of scope of this
   document.

   After sending a RecoveryPath message and during the Recovery Period,
   the node SHOULD periodically resend the RecoveryPath message until it
   receives a corresponding response.  A corresponding response is a
   Message ID acknowledgment or a Path message for the LSP the
   RecoveryPath message represents.  Each such resend attempt is at the
   end of any Message ID rapid retransmissions, if the Message ID
   mechanism is used.  If the Message ID mechanism is not in use, the
   period between resend attempts SHOULD be such that at least 3
   attempts are completed before the expiry of 3/4 the Recovery Time
   interval.  Each such resend attempt MUST treat the RecoveryPath
   message as a new message and update the MESSAGE_ID object according
   to procedures defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>].  Note, per [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], Resv
   messages are suppressed during this recovery period until a
   corresponding Path message is received.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.5.2.%20%20Procedures%20for%20the%20Restarting%20Node"></a><a class="selflink" href="#section-4.5.2" name="section-4.5.2">4.5.2</a>.  Procedures for the Restarting Node</span>

   These procedures apply during the "state recovery process" and
   "Recovery Period" as defined in <a href="rfc3473.html#section-9.5.2">Section 9.5.2 of [RFC3473]</a>.  Any
   RecoveryPath message received after the Recovery Period has expired
   SHOULD be matched against local LSP state.  If matching fully
   resynchronized state is located, the node SHOULD send a Path message
   downstream.  If non-resynchronized or no LSP state matching the
   RecoveryPath message is located, the restarted node MAY send a
   PathTear message constructed from the RecoveryPath message to



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   expedite the cleanup of unrecovered RSVP and associated forwarding
   state downstream of the restarted node.  The restarting node MUST NOT
   create data plane or forwarding state to match the received
   RecoveryPath message.

   The remaining procedures are broken down into three sub-sections.
   The term "resynchronized state", originally defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], is
   used and modified in these sections.  This term refers to LSP state
   that is fully recovered.

   Signaling state may be recovered from sources other than the
   mechanisms defined in this document.  The restarting node SHOULD
   consider signaling state as resynchronized for all such LSPs and
   follow corresponding procedures defined below.  Further, recovery
   procedures defined below may be overridden by local policy.

   Again, there are no changes to the procedures defined in <a href="rfc3473.html#section-9.5.2">Section</a>
   <a href="rfc3473.html#section-9.5.2">9.5.2 in [RFC3473]</a> if the restarting node is an egress node.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.5.2.1.%20%20Path%20and%20RecoveryPath%20Message%20Procedures"></a><a class="selflink" href="#section-4.5.2.1" name="section-4.5.2.1">4.5.2.1</a>.  Path and RecoveryPath Message Procedures</span>

   When a node receives a RecoveryPath message during the Recovery
   Period, the node first checks if it has resynchronized RSVP state
   associated with the message.  If there is resynchronized state, and
   when both reliable message delivery [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>] is supported and a
   MESSAGE_ID object is present in the RecoveryPath message, the node
   MUST follow Message ID acknowledgment procedures, as defined in
   [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>], and consider the message as processed.  If there is
   resynchronized state and there is no MESSAGE_ID object or reliable
   message delivery [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>] is not supported, the node SHOULD send a
   trigger Path message, and, consider the message as processed.

   If a non-resynchronized state is found or the node is the ingress,
   the node saves the information contained in the RecoveryPath message
   and continues with processing as defined in <a href="#section-4.5.2.2">Section 4.5.2.2</a>.

   If no associated RSVP state is found and the node is not the ingress
   node, the node saves the information contained in the RecoveryPath
   message for later use.

   Note the following modifies <a href="rfc3473.html#section-9.5.2">Section 9.5.2 of [RFC3473]</a>:

   When a node receives a Path message during the Recovery Period, the
   node first locates any RSVP state associated with the message.  If
   resynchronized RSVP state is found, then the node handles this
   message according to previously defined procedures.





<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   If a non-resynchronized state is found, the node saves the
   information contained in the Path message, including the
   Recovery_Label object, and continues with processing as defined in
   <a href="#section-4.5.2.2">Section 4.5.2.2</a>.

   Per [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], if matching RSVP state is not found, and the message
   does not carry a Recovery_Label object, the node treats this as a
   setup for a new LSP, and handles it according to previously defined
   procedures.

   If a matching RSVP state is not found and the message carries a
   Recovery_Label object, the node saves the information contained in
   the Path message, including the Recovery_Label object for later use.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.5.2.2.%20%20Re-Synchronization%20Procedures"></a><a class="selflink" href="#section-4.5.2.2" name="section-4.5.2.2">4.5.2.2</a>.  Re-Synchronization Procedures</span>

   After receipt of the RecoveryPath message and, for non-ingress LSPs,
   the corresponding Path message with a Recovery Label object, the
   restarting node SHOULD locate and associate corresponding forwarding
   state using the received information.  The restarting node associates
   the corresponding active forwarding plane state from the following
   signaled information:

      The upstream data interface is recovered from the RSVP HOP object
      in the received Path message.

      The label on the upstream data interface is recovered from the
      Recovery Label object in the received Path message.  If the LSP is
      bidirectional, the label for the upstream direction is recovered
      from the Upstream Label object in the received Path message.

      The downstream data interface is recovered from the RSVP HOP
      object in the received RecoveryPath message.

      The label on the downstream data interface is recovered from the
      Recovery Label object in the received RecoveryPath message.  If
      the LSP is bidirectional, the label for the upstream direction is
      recovered from the Upstream Label object in the RecoveryPath
      message.

   If complete forwarding state is located, the restarted node MUST
   treat the LSP as resynchronized and MUST send a trigger Path message
   downstream.  The Explicit Route object in the Path message SHOULD
   match the Explicit Route object received in the RecoveryPath message.
   In addition, the restarted node SHOULD recover state from the other
   objects received in the RecoveryPath message.  Optimally, the
   resulting Path message should not cause any redundant or unnecessary
   reprocessing of state along the remaining downstream nodes.  Ideally,



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   except for MESSAGE_ID processing and recovery processing, the
   transmitted Path message will be treated as a refresh by the
   downstream RSVP neighbor (and hence, should not trigger any
   generation of Path messages with changed state further downstream).

   If no forwarding state is located, the node treats the received Path
   message as a setup request for a new LSP.  The outgoing interface and
   label(s) indicated in the RecoveryPath message SHOULD be reused when
   possible.  All other information contained in the RecoveryPath
   message MAY also be used.  That is, forwarding state MUST NOT be
   created except after receipt of a Path message from upstream or, at
   an ingress node, the receipt of a command from the management plane.
   Further, the forwarding state created is subject to local policy and
   the information received from downstream in the RecoveryPath message
   is treated only as advisory.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.5.2.3.%20%20Procedures%20on%20Expiration%20of%20Recovery%20Period"></a><a class="selflink" href="#section-4.5.2.3" name="section-4.5.2.3">4.5.2.3</a>.  Procedures on Expiration of Recovery Period</span>

   There are several cleanup steps to follow at the end of the Recovery
   Period.  At the end of the Recovery Period, any state that was
   installed as the result of a received RecoveryPath message that is
   not resynchronized SHOULD be discarded.

   Any Path messages that were received containing a Recovery_Label that
   has not been resynchronized, MUST be treated as being received during
   the Recovery Period and processed as per [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].

   Per [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], any other state that is not resynchronized during the
   Recovery Period SHOULD be removed at the end of the Period.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6.%20%20Compatibility"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a>.  Compatibility</span>

   This document introduces a new RSVP signaling message called the
   RecoveryPath message to be generated by the downstream RSVP neighbor
   of a restarting node.  To advertise the capability of sending and
   receiving RecoveryPath messages, this document introduces the
   Capability object to be included in Hello messages by a restarting
   node and its downstream RSVP neighbors.

   If a restarting node does not support the Capability object, it will
   discard the object, as the Class-Number is of the form 10bbbbbb, and
   revert to recovery processing as defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  The
   restarting node will not include the Capability object in its Hello
   messages.  Hence, all downstream RSVP neighbors that detect that the
   restarting node is not capable of supporting the extensions defined
   in this document will not send the RecoveryPath messages to the
   restarting node and will revert to recovery processing as defined in
   [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   If a downstream RSVP neighbor does not support the Capability object,
   it will discard the object received in Hello messages and revert to
   recovery processing as defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  The downstream RSVP
   neighbor will not include the Capability object in its Hello
   messages.  Hence, the restarting node will detect that the downstream
   RSVP neighbor is not capable of supporting the extensions defined in
   this document and will revert to recovery processing as defined in
   [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20RecoveryPath%20Summary%20Refresh"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  RecoveryPath Summary Refresh</span>

   This section describes a mechanism to control which LSP state is
   communicated in RecoveryPath messages.  This mechanism enhances the
   Summary Refresh mechanism defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>], and uses the
   RecoveryPath Srefresh Capable (S) bit in the Capability object, as
   defined in <a href="#section-4.2">Section 4.2</a>, carried in the Hello message defined in
   [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>] and [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  The described mechanism is referred to as
   RecoveryPath Summary Refresh.

   Selective transmission of RecoveryPath messages is controlled much
   the same way transmission of Path or Resv messages is controlled with
   standard Summary Refresh, see [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>].  In standard Summary
   Refresh, an Srefresh message is sent by a node to identify to its
   neighbor about Path and Resv state that is locally installed and
   available.  The receiver of the Srefresh message can then attempt to
   locate matching Path and Resv state.  If no matching state is found,
   the receiver can request that the missing state be sent to it by
   sending an Srefresh NACK to the sender of the Srefresh message.  When
   the Srefresh NACK is received, the corresponding Path or Resv message
   is sent.  MESSAGE_ID information is used to identify Path and Resv
   state in this process.

   The mechanism described in this section extends the Summary Refresh
   process to the Path state that can be represented in RecoveryPath
   messages.  In this case, the Srefresh messages represent previously
   received Path messages, rather than previously transmitted Path
   messages.  This is the primary difference between standard Summary
   Refresh and RecoveryPath Summary Refresh described in this section.

   When a node restarts, and is capable of supporting the mechanisms
   described in this section, it includes the Capability object with the
   RecoveryPath Desired (R) bit set and the RecoveryPath Srefresh
   Capable (S) bit set in Hello messages it sends to its RSVP neighbors.

   When a neighbor of the restarting node detects a restart (see
   [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>]), it detects that the restarted node is capable of
   receiving RecoveryPath messages, as defined in <a href="#section-4.4">Section 4.4</a>, and that
   the restarted node is requesting RecoveryPath Srefresh messages by



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   the RecoveryPath Srefresh Capable (S) bit set in the Capability
   object.  When such an indication is found, the neighbor generates one
   or more Srefresh messages.  Each message indicates the Path state
   that can be represented in a RecoveryPath message.  Within such
   Srefresh messages, the Path state that can be represented in
   RecoveryPath messages is represented using MESSAGE_ID information,
   and this information is communicated within MESSAGE_ID LIST objects.
   To indicate that the MESSAGE_ID LIST object is for recovery purposes,
   a new flag is set in the MESSAGE_ID LIST object.  This flag is called
   the RecoveryPath Flag and is defined below.

   The restarted node can then use the Srefresh message and the
   MESSAGE_ID LIST object to try to identify matching transmitted Path
   state.  The node identifies local state by matching Epoch and Message
   ID tuples against Path messages transmitted downstream prior to the
   restart.

   If matching state is located, then the restarted node operates as if
   a RecoveryPath message has been received, per <a href="#section-4.5.2">Section 4.5.2</a>.  If no
   matching state can be located, the restarted node generates a
   Srefresh NACK, see <a href="rfc2961.html#section-5.4">Section 5.4 of [RFC2961]</a>.  The Srefresh NACK is
   also marked with the new RecoveryPath Flag to indicate that the NACK
   is related to RecoveryPath messages.

   Upon receiving a Srefresh NACK, the downstream node generates a
   RecoveryPath message for the Path state indicated by each entry in
   the MESSAGE_ID LIST.  The procedures defined in <a href="#section-4">Section 4</a> above are
   then followed by the restarted node and the downstream RSVP neighbor.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20MESSAGE_ID%20ACK%2FNACK%20and%20MESSAGE_ID%20LIST%20Objects"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  MESSAGE_ID ACK/NACK and MESSAGE_ID LIST Objects</span>

   The MESSAGE_ID ACK/NACK objects and the MESSAGE_ID LIST object,
   defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>], are updated by this document.  A new bit within
   the existing Flags field of each object is defined.  This bit
   indicates that the object carries MESSAGE_ID information related to
   Path state that can be recovered using RecoveryPath messages.  The
   same flag value is used in all the objects for consistency.














<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   MESSAGE_ID_ACK object
   MESSAGE_ID_NACK object

      See <a href="rfc2961.html#section-4.3">Section 4.3 of [RFC2961]</a> for definition of other fields.

   MESSAGE_ID LIST object

      See <a href="rfc2961.html#section-5.1">Section 5.1 of [RFC2961]</a> for definition of other fields.

      Flags: 8 bits

      0x02: RecoveryPath Flag

         Indicates that the associated object carries MESSAGE_ID
         information related to one or more Path messages that can be
         recovered using a RecoveryPath message.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20RecoveryPath%20Srefresh%20Capable%20Bit"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  RecoveryPath Srefresh Capable Bit</span>

   The Capability object and the RecoveryPath Srefresh Capable (S) bit
   are defined in <a href="#section-4.2">Section 4.2</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.%20%20Procedures"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a>.  Procedures</span>

   To support the selective receipt of RecoveryPath messages as defined
   in this section, a restarting node MUST support the receipt and
   processing of RecoveryPath messages as defined in <a href="#section-4.5.2">Section 4.5.2</a>, and
   MUST indicate this capability by including the Capability object with
   the RecoveryPath Desired (R) bit set as defined in <a href="#section-4.4.2">Section 4.4.2</a> in
   its Hello messages.

   To indicate to an RSVP neighbor that selective transmission of
   RecoveryPath messages is desired, a node MUST set (1) the S-bit in
   the Capability object in all Hello messages it sends.  When the
   restarting node does not desire the receipt of RecoveryPath messages
   (see <a href="#section-4.4.2">Section 4.4.2</a>) or the selective transmission mechanism defined
   in this section, it MUST clear (0) the S-bit in the Capability object
   if included in Hello messages.

   The downstream RSVP neighbor checks the R-bit and the S-bit upon
   detecting a restart of a node that supports state recovery with
   RecoveryPath messages.  Detection of neighbor restarts with state
   recovery using RecoveryPath messages is defined in <a href="#section-4">Section 4</a>.  If
   both the R-bit and the S-bit are set, then the procedures defined
   below in <a href="#section-5.3.1">Section 5.3.1</a> MUST be followed.  If the S-bit is cleared,
   the downstream RSVP neighbor MUST revert to normal procedures defined
   in <a href="#section-4.5.1">Section 4.5.1</a>.  If the R-bit is cleared, but the S-bit is set, the




<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   downstream RSVP neighbor MUST treat it as if the Capability object
   was received with the S-bit cleared.  See <a href="#section-4.4">Section 4.4</a> for handling of
   Hello messages without the Capability object.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2.%20%20Compatibility"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a>.  Compatibility</span>

   There are no compatibility issues introduced in the procedures
   defined in <a href="#section-5.2.1">Section 5.2.1</a>.

   The restarting node will detect that its neighbor does not support
   selective transmission of RecoveryPath messages when a RecoveryPath
   message is received prior to the receipt of a Srefresh message
   containing a MESSAGE_ID LIST object with the RecoveryPath Flag set
   (1).  When this occurs, any received RecoveryPath messages MUST be
   processed as defined in <a href="#section-4">Section 4</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20RecoveryPath%20Summary%20Refresh%20Procedures"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  RecoveryPath Summary Refresh Procedures</span>

   Related processing occurs in the following logical order:

   o  Generation of RecoveryPath-related Srefresh messages

   o  RecoveryPath-related Srefresh message receive processing and NACK
      generation

   o  Message ID NACK receive processing and generation of RecoveryPath
      messages

   o  Receive processing of RecoveryPath messages

   Actual processing MAY result in the above occurring in an interlaced
   fashion when multiple LSPs are being recovered.  Both the restarted
   node and the downstream RSVP neighbor MUST be able to process in this
   fashion.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.1.%20%20Generation%20of%20RecoveryPath-Related%20Srefresh%20Messages"></a><a class="selflink" href="#section-5.3.1" name="section-5.3.1">5.3.1</a>.  Generation of RecoveryPath-Related Srefresh Messages</span>

   A neighbor of a restarting node generates one or more RecoveryPath-
   related Srefresh messages when the S-bit is set in the restarted
   node's Hello messages as described in <a href="#section-5.2.1">Section 5.2.1</a>.  The procedures
   for generating an Srefresh message are defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>].  Only
   modifications to these procedures are described in this section.
   Also, Srefresh message transmit and receive processing may occur
   simultaneously during the Recovery Period and are not impacted by the
   procedures defined in this section.

   To generate RecoveryPath-related Srefresh messages, a node must
   identify which Path state can be represented in RecoveryPath messages



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   and which Srefresh message or messages can be used to carry the
   related information.  As previously mentioned, the Path state that
   can be represented in RecoveryPath messages is indicated in Srefresh
   messages using the MESSAGE_ID information from the most recently
   received Path message associated with the state.

   After processing the S-bit as described in <a href="#section-5.2.1">Section 5.2.1</a>, the node
   identifies all state associated with Path messages received from the
   restarted neighbor.  Only a Path state that has not been updated
   since the restart may be represented in the Srefresh messages.
   Received Path state containing a MESSAGE_ID object whose Epoch value
   matches the Epoch received in the most recent Hello message is
   considered as updated after the upstream neighbor has restarted.
   Such Path state MUST NOT be represented in the Srefresh messages.
   Each Srefresh message contains one or more MESSAGE_ID LIST objects.
   Each such MESSAGE_ID LIST object MUST have the RecoveryPath Flag set
   (1).

   Multiple MESSAGE_ID LIST objects MAY be included in order to
   accommodate multiple Epoch values.  The MESSAGE_ID LIST objects
   represent the identified, non-updated, Path state.  A
   Message_Identifier field created for each identified, non-updated
   Path state MUST be included in an appropriate MESSAGE_ID LIST object.
   The Message_Identifier field is created based on the MESSAGE_ID
   object from the most recently received Path message associated with
   identified Path state.  If any identified Path state does not have an
   associated MESSAGE_ID object, this state MUST be processed as defined
   above in <a href="#section-4.5.1">Section 4.5.1</a>.

   The source IP address for the Srefresh message SHOULD be the source
   IP address in the IP header of the corresponding Resv messages
   previously sent to the restarted node.  The Srefresh message SHOULD
   be destined to the IP address in the HOP object in the corresponding
   Path messages.  This may result in multiple Srefresh messages being
   generated.  Per [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>], implementations may choose to limit each
   Srefresh message to the MTU size of the outgoing link, and to not
   bundle Srefresh messages.  RecoveryPath-related Srefresh messages
   SHOULD be sent using reliable delivery, as defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>].

   During the Recovery Period, unacknowledged RecoveryPath-related
   Srefresh messages SHOULD be periodically transmitted.  The
   retransmission algorithm used can be the same algorithm used for
   retransmitting RecoveryPath messages during the Recovery Period (see
   <a href="#section-4.5.1">Section 4.5.1</a>).  Note that prior to each such periodic
   retransmission, the Srefresh message SHOULD be updated to exclude the
   Message ID's of Path state that has been updated by the receipt of a
   Path message.




<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   To allow sufficient processing time for the restarted node, the
   downstream RSVP neighbor MAY choose to generate multiple
   RecoveryPath-related Srefresh messages containing partial but
   mutually exclusive sets of Message Identifiers spread across 1/4 of
   the Recovery Time advertised by the restarted node.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.2.%20%20RecoveryPath-Related%20Srefresh%20Receive%20Processing%20and%20NACK"></a><a class="selflink" href="#section-5.3.2" name="section-5.3.2">5.3.2</a>.  RecoveryPath-Related Srefresh Receive Processing and NACK</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Generation"></a>        Generation</span>

   Upon receiving an Srefresh message containing a MESSAGE_ID LIST
   object with the RecoveryPath Flag set), the restarted node attempts
   to locate matching previously transmitted Path state.  The Epoch in
   the MESSAGE_ID LIST object, along with each Message Identifier in the
   object, is used to match against the MESSAGE_ID object in Path
   messages previously transmitted to the downstream RSVP neighbor.  For
   each Message Identifier in the MESSAGE_ID LIST:

      If matching transmitted Path state is found, the restarting node
      treats the corresponding LSP state as having received and
      processed a RecoveryPath message and perform any further
      processing necessary as defined in <a href="#section-4.5.2">Section 4.5.2</a>.  Specifically,
      it MUST generate a trigger Path message for the LSP as defined in
      <a href="#section-4.5.2.2">Section 4.5.2.2</a>.  The restarted node MAY spread the transmission
      of such trigger Path messages across 1/2 of the remaining Recovery
      Period to allow the downstream RSVP neighbor sufficient processing
      time.

      If matching transmitted Path state is not found, the restarting
      node MUST generate a MESSAGE_ID NACK as defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>].
      Each generated MESSAGE_ID NACK MUST have the RecoveryPath Flag set
      (1).

   It is recommended that the restarted node combine multiple such
   MESSAGE_ID NACKs into a single ACK message, per [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.3.%20%20RecoveryPath-Related%20MESSAGE_ID%20NACK%20Receive%20Processing"></a><a class="selflink" href="#section-5.3.3" name="section-5.3.3">5.3.3</a>.  RecoveryPath-Related MESSAGE_ID NACK Receive Processing</span>

   This section defines the procedures associated with the processing of
   received MESSAGE_ID NACKs that have the RecoveryPath Flag set (1).
   Procedures for processing of MESSAGE_ID NACKs without the
   RecoveryPath Flag present are defined in [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>] and not modified
   in this document.  Processing of MESSAGE_ID NACKs with the
   RecoveryPath Flag set (1) also follows procedures defined in
   [<a href="rfc2961.html" title='"RSVP Refresh Overhead Reduction Extensions"'>RFC2961</a>] unless explicitly modified in this section.

   For each MESSAGE_ID NACK with the RecoveryPath Flag set (1), the
   downstream RSVP neighbor must locate the matching received Path
   message.  If a matching Path message is found, the downstream RSVP



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   neighbor MUST generate a RecoveryPath message as defined in <a href="#section-4.5.1">Section</a>
   <a href="#section-4.5.1">4.5.1</a>.  If a matching Path message is not found, the MESSAGE_ID NACK
   is ignored.  An example where this may occur is when the restarted
   node has already generated an updated Path message after its restart.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   This document introduces a new RSVP message that is restricted to one
   RSVP hop.  This document introduces no new security considerations
   beyond those already addressed for existing RSVP hop-by-hop messages.

   This document introduces a new RSVP object to be included in RSVP
   Hello messages.  This document introduces no new security
   considerations beyond those already addressed for existing objects in
   RSVP Hello messages.

   This document introduces new procedures to be performed on RSVP
   agents that neighbor a restarting RSVP agent.  In situations where
   the control plane in general, and the RSVP agent in particular, of a
   node carrying one or more LSPs is restarted due to external attacks,
   the procedures introduced in this document provide the ability for
   the restarting RSVP agent to recover the RSVP state corresponding to
   the LSPs with the least possible perturbation to the rest of the
   network.  Ideally, only the neighboring RSVP agents should notice the
   restart and hence need to perform additional processing.  This allows
   for a network with active LSPs to recover LSP state gracefully from
   an external attack without perturbing the data/forwarding plane
   state.

   [<a id="ref-RFC2747" name="ref-RFC2747">RFC2747</a>] provides mechanisms to protect against external agents
   compromising the RSVP signaling state in an RSVP agent.  These
   mechanisms, when used with the new message and procedures introduced
   in this document, provide the same degree of protection to the
   restarting RSVP agent against installing compromised signaling state
   from an external agent during its RSVP signaling state recovery.

   Note that the procedures assume a full trust model between RSVP
   neighbors.  That is, although the protocol exchanges before and after
   restart can be secured, and although it is possible to authenticate
   the identity of the neighbors, no mechanism is provided to verify
   that the restart information is correctly mapped from the protocol
   information exchanged before the restart.  This is considered
   acceptable because a similar trust model is required for normal
   operation of the protocol.

   The procedures defined in this document introduce additional
   processing overhead for the RSVP agents that neighbor a restarting
   RSVP agent.  If an RSVP agent restarts due to external attacks, such



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   added processing on the neighboring RSVP agents may impact their
   ability to perform other control plane tasks, including any
   processing for other LSPs that do not involve the restarting node.
   Such impact can be minimalized by the restarting RSVP agent using a
   large enough Recovery Time, so that its neighbors are provided
   sufficient time to handle the additional processing involved while
   continuing to perform their other control plane functions normally
   during the Recovery Period.

   Note that the procedures defined in this document cannot be used to
   create false forwarding state.  The restarting node that receives a
   RecoveryPath message that does not match the existing forwarding
   state MUST NOT create or modify its forwarding state to match.  A
   restarting node SHOULD log such an event or otherwise notify the
   operator since it might represent an attack.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Acknowledgments"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Acknowledgments</span>

   The authors would like to thank participants of the CCAMP WG for
   comments and suggestions.  Also thanks to Arthi Ayyangar, Adrian
   Farrel, Nick Neate, and Pavan Beeram for their helpful comments and
   feedback.

   Derek Atkins provided useful discussion during SecDir review.  Sam
   Hartman gave careful scrutiny of the security considerations and the
   potential impact on the RSVP-TE security trust model.

   Adrian Farrel edited the final revisions of this document as it
   progressed through IESG review.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  IANA Considerations</span>

   [<a id="ref-RFC2205" name="ref-RFC2205">RFC2205</a>] defines the Class-Number name space for RSVP objects.  The
   name space is managed by IANA.

   A new RSVP object using a Class-Number of form 10bbbbbb called the
   Capability Object is defined in <a href="#section-4.2">Section 4.2</a> in this document.  The
   Class-Number is 134.

   A new RSVP message type called a RecoveryPath message is defined in
   <a href="#section-4.1">Section 4.1</a> of this document.  The RSVP message type is 30.

   This document creates a new name space in the Capability object
   defined in <a href="#section-4.2">Section 4.2</a>.  The new name space is a 32-bit-wide field.
   New registrations in this name space are to be allocated by IANA
   through an IETF Consensus action, per [<a href="rfc2434.html" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC2434</a>].  IANA also serves as
   the repository for this name space.




<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


   <a href="#section-4.2">Section 4.2</a> defines the following bits in the 32-bit field of the
   Capability Object (134):

      RecoveryPath Transmit Enabled (T): 1 bit
      RecoveryPath Desired (R): 1 bit
      RecoveryPath Srefresh Capable (S): 1 bit

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Normative%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2205" name="ref-RFC2205">RFC2205</a>]  Braden, B., Zhang, L., Berson, S., Herzog, S., and S.
              Jamin, "Resource ReSerVation Protocol (RSVP) -- Version 1
              Functional Specification", <a href="rfc2205.html">RFC 2205</a>, September 1997.

   [<a id="ref-RFC2434" name="ref-RFC2434">RFC2434</a>]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", <a href="https://tools.ietf.org/html/bcp26">BCP 26</a>, <a href="rfc2434.html">RFC 2434</a>,
              October 1998.

   [<a id="ref-RFC2747" name="ref-RFC2747">RFC2747</a>]  Baker, F., Lindell, B., and M. Talwar, "RSVP Cryptographic
              Authentication", <a href="rfc2747.html">RFC 2747</a>, January 2000.

   [<a id="ref-RFC2961" name="ref-RFC2961">RFC2961</a>]  Berger, L., Gan, D., Swallow, G., Pan, P., Tommasi, F.,
              and S. Molendini, "RSVP Refresh Overhead Reduction
              Extensions", <a href="rfc2961.html">RFC 2961</a>, April 2001.

   [<a id="ref-RFC3209" name="ref-RFC3209">RFC3209</a>]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", <a href="rfc3209.html">RFC 3209</a>, December 2001.

   [<a id="ref-RFC3471" name="ref-RFC3471">RFC3471</a>]  Berger, L., "Generalized Multi-Protocol Label Switching
              (GMPLS) Signaling Functional Description", <a href="rfc3471.html">RFC 3471</a>,
              January 2003.

   [<a id="ref-RFC3473" name="ref-RFC3473">RFC3473</a>]  Berger, L., "Generalized Multi-Protocol Label Switching
              (GMPLS) Signaling Resource ReserVation Protocol-Traffic
              Engineering (RSVP-TE) Extensions", <a href="rfc3473.html">RFC 3473</a>, January 2003.













<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


Editors' Addresses

   Arun Satyanarayana (editor)
   Cisco Systems, Inc.
   170 West Tasman Dr.
   San Jose, CA  95134
   USA
   Phone: +1 408 853 3206
   EMail: asatyana@cisco.com

   Reshad Rahman (editor)
   Cisco Systems, Inc.
   2000 Innovation Dr.
   Kanata, Ontario  K2K 3E8
   Canada
   Phone: 613 254 3519
   EMail: rrahman@cisco.com

Authors' Addresses

   Dimitri Papadimitriou
   Alcatel
   Francis Wellesplein 1
   B-2018 Antwerpen
   Belgium
   Phone: +32 3 240-8491
   EMail: dimitri.papadimitriou@alcatel-lucent.be

   Lou Berger
   LabN Consulting, L.L.C.
   Phone: +1 301 468 9228
   EMail: lberger@labn.net

   Anca Zamfir
   Cisco Systems, Inc.
   2000 Innovation Dr.
   Kanata, Ontario  K2K 3E8
   Canada
   Phone: 613 254 3484
   EMail: ancaz@cisco.com

   Junaid Israr
   Cisco Systems, Inc.
   2000 Innovation Dr.
   Kanata, Ontario  K2K 3E8
   Canada
   Phone: 613 254 3693
   EMail: jisrar@cisco.com



<span class="grey">Satyanarayana &amp; Rahman      Standards Track                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc5063.html">RFC 5063</a>         GMPLS RSVP Graceful Restart Extensions     October 2007</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.












Satyanarayana &amp; Rahman      Standards Track                    [Page 24]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc5063 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:37 GMT --></html>