<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4864 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:39 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-vandevelde-v6ops-nap" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:4864" name="DC.Identifier"/>
<meta content="May, 2007" name="DC.Date.Issued"/>
<meta content="Carpenter, Brian" name="DC.Creator"/>
<meta content="Klein, Eric" name="DC.Creator"/>
<meta content="Hain, Tony" name="DC.Creator"/>
<meta content="Velde, Gunter Van de" name="DC.Creator"/>
<meta content="Droms, Ralph" name="DC.Creator"/>
<meta content="Although there are many perceived benefits to Network Address
Translation (NAT), its primary benefit of &quot;amplifying&quot; available
address space is not needed in IPv6. In addition to NAT's many
serious disadvantages, there is a perception that other benefits
exist, such as a variety of management and security attributes that
could be useful for an Internet Protocol site. IPv6 was designed with
the intention of making NAT unnecessary, and this document shows how
Local Network Protection (LNP) using IPv6 can provide the same or more
benefits without the need for address translation. This memo provides
information for the Internet community." name="DC.Description.Abstract"/>
<meta content="Local Network Protection for IPv6" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4864 - Local Network Protection for IPv6</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4864.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4864" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-v6ops-nap" title="draft-ietf-v6ops-nap">draft-ietf-v6op...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4864" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4864" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4864" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=4864&amp;submit=rfc" title="IPR disclosures related to this document">IPR</a>]   </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                    G. Van de Velde
Request for Comments: 4864                                       T. Hain
Category: Informational                                         R. Droms
                                                           Cisco Systems
                                                            B. Carpenter
                                                                     IBM
                                                                E. Klein
                                                     Tel Aviv University
                                                                May 2007


                   <span class="h1">Local Network Protection for IPv6</span>

Status of This Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The IETF Trust (2007).

Abstract

   Although there are many perceived benefits to Network Address
   Translation (NAT), its primary benefit of "amplifying" available
   address space is not needed in IPv6.  In addition to NAT's many
   serious disadvantages, there is a perception that other benefits
   exist, such as a variety of management and security attributes that
   could be useful for an Internet Protocol site.  IPv6 was designed
   with the intention of making NAT unnecessary, and this document shows
   how Local Network Protection (LNP) using IPv6 can provide the same or
   more benefits without the need for address translation.

















<span class="grey">Van de Velde, et al.         Informational                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Perceived Benefits of NAT and Its Impact on IPv4 . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-2.1">2.1</a>.  Simple Gateway between Internet and Private Network  . . .  <a href="#page-6">6</a>
     <a href="#section-2.2">2.2</a>.  Simple Security Due to Stateful Filter Implementation  . .  <a href="#page-6">6</a>
     <a href="#section-2.3">2.3</a>.  User/Application Tracking  . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     <a href="#section-2.4">2.4</a>.  Privacy and Topology Hiding  . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-2.5">2.5</a>.  Independent Control of Addressing in a Private Network . .  <a href="#page-9">9</a>
     <a href="#section-2.6">2.6</a>.  Global Address Pool Conservation . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-2.7">2.7</a>.  Multihoming and Renumbering with NAT . . . . . . . . . . . <a href="#page-10">10</a>
   <a href="#section-3">3</a>.  Description of the IPv6 Tools  . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-3.1">3.1</a>.  Privacy Addresses (<a href="rfc3041.html">RFC 3041</a>) . . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-3.2">3.2</a>.  Unique Local Addresses . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
     <a href="#section-3.3">3.3</a>.  DHCPv6 Prefix Delegation . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
     <a href="#section-3.4">3.4</a>.  Untraceable IPv6 Addresses . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
   4.  Using IPv6 Technology to Provide the Market Perceived
       Benefits of NAT  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-14">14</a>
     <a href="#section-4.1">4.1</a>.  Simple Gateway between Internet and Internal Network . . . <a href="#page-14">14</a>
     <a href="#section-4.2">4.2</a>.  IPv6 and Simple Security . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
     <a href="#section-4.3">4.3</a>.  User/Application Tracking  . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-4.4">4.4</a>.  Privacy and Topology Hiding Using IPv6 . . . . . . . . . . <a href="#page-17">17</a>
     <a href="#section-4.5">4.5</a>.  Independent Control of Addressing in a Private Network . . <a href="#page-20">20</a>
     <a href="#section-4.6">4.6</a>.  Global Address Pool Conservation . . . . . . . . . . . . . <a href="#page-21">21</a>
     <a href="#section-4.7">4.7</a>.  Multihoming and Renumbering  . . . . . . . . . . . . . . . <a href="#page-21">21</a>
   <a href="#section-5">5</a>.  Case Studies . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
     <a href="#section-5.1">5.1</a>.  Medium/Large Private Networks  . . . . . . . . . . . . . . <a href="#page-22">22</a>
     <a href="#section-5.2">5.2</a>.  Small Private Networks . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     <a href="#section-5.3">5.3</a>.  Single User Connection . . . . . . . . . . . . . . . . . . <a href="#page-25">25</a>
     <a href="#section-5.4">5.4</a>.  ISP/Carrier Customer Networks  . . . . . . . . . . . . . . <a href="#page-26">26</a>
   <a href="#section-6">6</a>.  IPv6 Gap Analysis  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-27">27</a>
     <a href="#section-6.1">6.1</a>.  Simple Security  . . . . . . . . . . . . . . . . . . . . . <a href="#page-27">27</a>
     <a href="#section-6.2">6.2</a>.  Subnet Topology Masking  . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>
     <a href="#section-6.3">6.3</a>.  Minimal Traceability of Privacy Addresses  . . . . . . . . <a href="#page-28">28</a>
     <a href="#section-6.4">6.4</a>.  Site Multihoming . . . . . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>
   <a href="#section-7">7</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
   <a href="#section-8">8</a>.  Conclusion . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
   <a href="#section-9">9</a>.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
   <a href="#section-10">10</a>. Informative References . . . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>
   <a href="#appendix-A">Appendix A</a>.  Additional Benefits Due to Native IPv6 and
                Universal Unique Addressing . . . . . . . . . . . . . <a href="#page-32">32</a>
     <a href="#appendix-A.1">A.1</a>.  Universal Any-to-Any Connectivity  . . . . . . . . . . . . <a href="#page-32">32</a>
     <a href="#appendix-A.2">A.2</a>.  Auto-Configuration . . . . . . . . . . . . . . . . . . . . <a href="#page-32">32</a>
     <a href="#appendix-A.3">A.3</a>.  Native Multicast Services  . . . . . . . . . . . . . . . . <a href="#page-33">33</a>
     <a href="#appendix-A.4">A.4</a>.  Increased Security Protection  . . . . . . . . . . . . . . <a href="#page-33">33</a>
     <a href="#appendix-A.5">A.5</a>.  Mobility . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-34">34</a>
     <a href="#appendix-A.6">A.6</a>.  Merging Networks . . . . . . . . . . . . . . . . . . . . . <a href="#page-34">34</a>




<span class="grey">Van de Velde, et al.         Informational                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   There have been periodic claims that IPv6 will require a Network
   Address Translation (NAT), because network administrators use NAT to
   meet a variety of needs when using IPv4 and those needs will also
   have to be met when using IPv6.  Although there are many perceived
   benefits to NAT, its primary benefit of "amplifying" available
   address space is not needed in IPv6.  The serious disadvantages and
   impact on applications by ambiguous address space and Network Address
   Translation [<a href="#ref-1" title='"Address Allocation for Private Internets"'>1</a>] [<a href="#ref-5" title='"Traditional IP Network Address Translator (Traditional NAT)"'>5</a>] have been well documented [<a href="#ref-4" title='"Architectural Implications of NAT"'>4</a>] [<a href="#ref-6" title='"Protocol Complications with the IP Network Address Translator"'>6</a>], so there will
   not be much additional discussion here.  However, given its wide
   deployment NAT undoubtedly has some perceived benefits, though the
   bulk of those using it have not evaluated the technical trade-offs.
   Indeed, it is often claimed that some connectivity and security
   concerns can only be solved by using a NAT device, without any
   mention of the negative impacts on applications.  This is amplified
   through the widespread sharing of vendor best practice documents and
   sample configurations that do not differentiate the translation
   function of address expansion from the state function of limiting
   connectivity.

   This document describes the uses of a NAT device in an IPv4
   environment that are regularly cited as 'solutions' for perceived
   problems.  It then shows how the goals of the network manager can be
   met in an IPv6 network without using the header modification feature
   of NAT.  It should be noted that this document is 'informational', as
   it discusses approaches that will work to accomplish the goals of the
   network manager.  It is specifically not a Best Current Practice
   (BCP) that is recommending any one approach or a manual on how to
   configure a network.

   As far as security and privacy are concerned, this document considers
   how to mitigate a number of threats.  Some are obviously external,
   such as having a hacker or a worm-infected machine outside trying to
   penetrate and attack the local network.  Some are local, such as a
   disgruntled employee disrupting business operations or the
   unintentional negligence of a user downloading some malware, which
   then proceeds to attack from within.  Some may be inherent in the
   device hardware ("embedded"), such as having some firmware in a
   domestic appliance "call home" to its manufacturer without the user's
   consent.

   Another consideration discussed is the view that NAT can be used to
   fulfill the goals of a security policy.  On the one hand, NAT does
   satisfy some policy goals, such as topology hiding; at the same time
   it defeats others, such as the ability to produce an end-to-end audit
   trail at network level.  That said, there are artifacts of NAT
   devices that do provide some value.



<span class="grey">Van de Velde, et al.         Informational                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   1.  The need to establish state before anything gets through from
       outside to inside solves one set of problems.

   2.  The expiration of state to stop receiving any packets when
       finished with a flow solves a set of problems.

   3.  The ability for nodes to appear to be attached at the edge of the
       network solves a set of problems.

   4.  The ability to have addresses that are not publicly routed solves
       yet another set (mostly changes where the state is and scale
       requirements for the first one).

   This document describes several techniques that may be combined in an
   IPv6 deployment to protect the integrity of its network architecture.
   It will focus on the 'how to accomplish a goal' perspective, leaving
   most of the 'why that goal is useful' perspective for other
   documents.  These techniques, known collectively as Local Network
   Protection (LNP), retain the concept of a well-defined boundary
   between "inside" and "outside" the private network, while allowing
   firewalling, topology hiding, and privacy.  LNP will achieve these
   security goals without address translation while regaining the
   ability for arbitrary any-to-any connectivity.

   IPv6 Local Network Protection can be summarized in the following
   table.  It presents the marketed benefits of IPv4+NAT with a cross-
   reference of how those are delivered in both the IPv4 and IPv6
   environments.























<span class="grey">Van de Velde, et al.         Informational                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


          Goal                 IPv4                    IPv6
   +------------------+-----------------------+-----------------------+
   | Simple Gateway   |  DHCP - single        |  DHCP-PD - arbitrary  |
   | as default router|  address upstream     |  length customer      |
   | and address pool |  DHCP - limited       |  prefix upstream      |
   | manager          |  number of individual |  SLAAC via RA         |
   |                  |  devices downstream   |  downstream           |
   |                  |  see <a href="#section-2.1">Section 2.1</a>      |  see <a href="#section-4.1">Section 4.1</a>      |
   +------------------|-----------------------|-----------------------+
   |  Simple Security |  Filtering side       |  Explicit Context     |
   |                  |  effect due to lack   |  Based Access Control |
   |                  |  of translation state |  (Reflexive ACL)      |
   |                  |  see <a href="#section-2.2">Section 2.2</a>      |  see <a href="#section-4.2">Section 4.2</a>      |
   +------------------|-----------------------|-----------------------+
   |  Local Usage     |  NAT state table      |  Address uniqueness   |
   |  Tracking        |                       |                       |
   |                  |  see <a href="#section-2.3">Section 2.3</a>      |  see <a href="#section-4.3">Section 4.3</a>      |
   +------------------|-----------------------|-----------------------+
   |  End-System      |  NAT transforms       |  Temporary use        |
   |  Privacy         |  device ID bits in    |  privacy addresses    |
   |                  |  the address          |                       |
   |                  |  see <a href="#section-2.4">Section 2.4</a>      |  see <a href="#section-4.4">Section 4.4</a>      |
   +------------------|-----------------------|-----------------------+
   |  Topology Hiding |  NAT transforms       |  Untraceable addresses|
   |                  |  subnet bits in the   |  using IGP host routes|
   |                  |  address              |  /or MIPv6 tunnels    |
   |                  |  see <a href="#section-2.4">Section 2.4</a>      |  see <a href="#section-4.4">Section 4.4</a>      |
   +------------------|-----------------------|-----------------------+
   |  Addressing      |  <a href="rfc1918.html">RFC 1918</a>             |  <a href="rfc3177.html">RFC 3177</a> &amp; 4193      |
   |  Autonomy        |  see <a href="#section-2.5">Section 2.5</a>      |  see <a href="#section-4.5">Section 4.5</a>      |
   +------------------|-----------------------|-----------------------+
   |  Global Address  |  <a href="rfc1918.html">RFC 1918</a>             |  17*10^18 subnets     |
   |  Pool            |  &lt;&lt; 2^48 application  |  3.4*10^38 addresses  |
   |  Conservation    |  end points           | full port list / addr |
   |                  |  topology restricted  | unrestricted topology |
   |                  |  see <a href="#section-2.6">Section 2.6</a>      |  see <a href="#section-4.6">Section 4.6</a>      |
   +------------------|-----------------------|-----------------------+
   |  Renumbering and |  Address translation  |  Preferred lifetime   |
   |  Multihoming     |  at border            |  per prefix &amp; multiple|
   |                  |                       |  addresses per        |
   |                  |                       |  interface            |
   |                  |  see <a href="#section-2.7">Section 2.7</a>      |  see <a href="#section-4.7">Section 4.7</a>      |
   +------------------+-----------------------+-----------------------+








<span class="grey">Van de Velde, et al.         Informational                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   This document first identifies the perceived benefits of NAT in more
   detail, and then shows how IPv6 LNP can provide each of them.  It
   concludes with an IPv6 LNP case study and a gap analysis of standards
   work that remains to be done for an optimal LNP solution.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Perceived%20Benefits%20of%20NAT%20and%20Its%20Impact%20on%20IPv4"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Perceived Benefits of NAT and Its Impact on IPv4</span>

   This section provides insight into the generally perceived benefits
   of the use of IPv4 NAT.  The goal of this description is not to
   analyze these benefits or the accuracy of the perception (detailed
   discussions in [<a href="#ref-4" title='"Architectural Implications of NAT"'>4</a>]), but to describe the deployment requirements and
   set a context for the later descriptions of the IPv6 approaches for
   dealing with those requirements.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Simple%20Gateway%20between%20Internet%20and%20Private%20Network"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Simple Gateway between Internet and Private Network</span>

   A NAT device can connect a private network with addresses allocated
   from any part of the space (ambiguous [<a href="#ref-1" title='"Address Allocation for Private Internets"'>1</a>]or global registered and
   unregistered addresses) towards the Internet, though extra effort is
   needed when the same range exists on both sides of the NAT.  The
   address space of the private network can be built from globally
   unique addresses, from ambiguous address space, or from both
   simultaneously.  In the simple case of private use addresses, without
   needing specific configuration the NAT device enables access between
   the client side of a distributed client-server application in the
   private network and the server side located in the public Internet.

   Wide-scale deployments have shown that using NAT to act as a simple
   gateway attaching a private IPv4 network to the Internet is simple
   and practical for the non-technical end user.  Frequently, a simple
   user interface or even a default configuration is sufficient for
   configuring both device and application access rights.

   This simplicity comes at a price, as the resulting topology puts
   restrictions on applications.  The NAT simplicity works well when the
   applications are limited to a client/server model with the server
   deployed on the public side of the NAT.  For peer-to-peer, multi-
   party, or servers deployed on the private side of the NAT, helper
   technologies must also be deployed.  These helper technologies are
   frequently complex to develop and manage, creating a hidden cost to
   this 'simple gateway'.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Simple%20Security%20Due%20to%20Stateful%20Filter%20Implementation"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Simple Security Due to Stateful Filter Implementation</span>

   It is frequently believed that through its session-oriented
   operation, NAT puts in an extra barrier to keep the private network
   protected from outside influences.  Since a NAT device typically
   keeps state only for individual sessions, attackers, worms, etc.,



<span class="grey">Van de Velde, et al.         Informational                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   cannot exploit this state to attack a specific host on any other
   port.  However, in the port overload case of Network Address Port
   Translation (NAPT) attacking all active ports will impact a
   potentially wide number of hosts.  This benefit may be partially
   real; however, experienced hackers are well aware of NAT devices and
   are very familiar with private address space, and they have devised
   methods of attack (such as trojan horses) that readily penetrate NAT
   boundaries.  While the stateful filtering offered by NAT offers a
   measure of protection against a variety of straightforward network
   attacks, it does not protect against all attacks despite being
   presented as a one-size-fits-all answer.

   The act of translating address bits within the header does not
   provide security in itself.  For example, consider a configuration
   with static NAT and all inbound ports translating to a single
   machine.  In such a scenario, the security risk for that machine is
   identical to the case with no NAT device in the communication path,
   as any connection to the public address will be delivered to the
   mapped target.

   The perceived security of NAT comes from the lack of pre-established
   or permanent mapping state.  This is often used as a 'better than
   nothing' level of protection because it doesn't require complex
   management to filter out unwanted traffic.  Dynamically establishing
   state in response to internal requests reduces the threat of
   unexpected external connections to internal devices, and this level
   of protection would also be available from a basic firewall.  (A
   basic firewall, supporting clients accessing public side servers,
   would improve on that level of protection by avoiding the problem of
   state persisting as different clients use the same private side
   address over time.)  This role, often marketed as a firewall, is
   really an arbitrary artifact, while a real firewall often offers
   explicit and more comprehensive management controls.

   In some cases, NAT operators (including domestic users) may be
   obliged to configure quite complex port mapping rules to allow
   external access to local applications such as a multi-player game or
   web servers.  In this case, the NAT actually adds management
   complexity compared to the simple router discussed in <a href="#section-2.1">Section 2.1</a>.
   In situations where two or more devices need to host the same
   application or otherwise use the same public port, this complexity
   shifts from difficult to impossible.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3.%20%20User%2FApplication%20Tracking"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a>.  User/Application Tracking</span>

   One usage of NAT is for the local network administrator to track user
   and application traffic.  Although NATs create temporary state for
   active sessions, in general they provide limited capabilities for the



<span class="grey">Van de Velde, et al.         Informational                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   administrator of the NAT to gather information about who in the
   private network is requesting access to which Internet location.
   This is done by periodically logging the network address translation
   details of the private and the public addresses from the NAT device's
   state database.

   The subsequent checking of this database is not always a simple task,
   especially if Port Address Translation is used.  It also has an
   unstated assumption that the administrative instance has a mapping
   between a private IPv4-address and a network element or user at all
   times, or the administrator has a time-correlated list of the
   address/port mappings.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.4.%20%20Privacy%20and%20Topology%20Hiding"></a><a class="selflink" href="#section-2.4" name="section-2.4">2.4</a>.  Privacy and Topology Hiding</span>

   One goal of 'topology hiding' is to prevent external entities from
   making a correlation between the topological location of devices on
   the local network.  The ability of NAT to provide Internet access to
   a large community of users by the use of a single (or a few) globally
   routable IPv4 address(es) offers a simple mechanism to hide the
   internal topology of a network.  In this scenario, the large
   community will be represented in the Internet by a single (or a few)
   IPv4 address(es).

   By using NAT, a system appears to the Internet as if it originated
   inside the NAT box itself; i.e., the IPv4 address that appears on the
   Internet is only sufficient to identify the NAT so all internal nodes
   appear to exist at the demarcation edge.  When concealed behind a
   NAT, it is impossible to tell from the outside which member of a
   family, which customer of an Internet cafe, or which employee of a
   company generated or received a particular packet.  Thus, although
   NATs do nothing to provide application level privacy, they do prevent
   the external tracking and profiling of individual systems by means of
   their IP addresses, usually known as 'device profiling'.

   There is a similarity with privacy based on application level
   proxies.  When using an application level gateway for browsing the
   web for example, the 'privacy' of a web user can be provided by
   masking the true identity of the original web user towards the
   outside world (although the details of what is -- or is not -- logged
   at the NAT/proxy will be different).

   Some network managers prefer to hide as much as possible of their
   internal network topology from outsiders as a useful precaution to
   mitigate scanning attacks.  Mostly, this is achieved by blocking
   "traceroute", etc., though NAT entirely hides the internal subnet
   topology.  Scanning is a particular concern in IPv4 networks because
   the subnet size is small enough that once the topology is known, it



<span class="grey">Van de Velde, et al.         Informational                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   is easy to find all the hosts, then start scanning them for
   vulnerable ports.  Once a list of available devices has been mapped,
   a port-scan on these IP addresses can be performed.  Scanning works
   by tracking which ports do not receive unreachable errors from either
   the firewall or host.  With the list of open ports, an attacker can
   optimize the time needed for a successful attack by correlating it
   with known vulnerabilities to reduce the number of attempts.  For
   example, FTP usually runs on port 21, and HTTP usually runs on port
   80.  Any vulnerable open ports could be used for access to an end-
   system to command it to start initiating attacks on others.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.5.%20%20Independent%20Control%20of%20Addressing%20in%20a%20Private%20Network"></a><a class="selflink" href="#section-2.5" name="section-2.5">2.5</a>.  Independent Control of Addressing in a Private Network</span>

   Many private IPv4 networks make use of the address space defined in
   <a href="rfc1918.html">RFC 1918</a> to enlarge the available addressing space for their private
   network, and at the same time reduce their need for globally routable
   addresses.  This type of local control of address resources allows a
   sufficiently large pool for a clean and hierarchical addressing
   structure in the local network.

   Another benefit is the ability to change providers with minimal
   operational difficulty due to the usage of independent addresses on a
   majority of the network infrastructure.  Changing the addresses on
   the public side of the NAT avoids the administrative challenge of
   changing every device in the network.

   <a href="#section-2.7">Section 2.7</a> describes some disadvantages that appear if independent
   networks using ambiguous addresses [<a href="#ref-1" title='"Address Allocation for Private Internets"'>1</a>] have to be merged.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.6.%20%20Global%20Address%20Pool%20Conservation"></a><a class="selflink" href="#section-2.6" name="section-2.6">2.6</a>.  Global Address Pool Conservation</span>

   While the widespread use of IPv4+NAT has reduced the potential
   consumption rate, the ongoing depletion of the IPv4 address range has
   already taken the remaining pool of unallocated IPv4 addresses well
   below 20%.  While mathematical models based on historical IPv4 prefix
   consumption periodically attempt to predict the future exhaustion
   date of the IPv4 address pool, a possible result of this continuous
   resource consumption is that the administrative overhead for
   acquiring globally unique IPv4 addresses will at some point increase
   noticeably due to tightening allocation policies.

   In response to the increasing administrative overhead, many Internet
   Service Providers (ISPs) have already resorted to the ambiguous
   addresses defined in <a href="rfc1918.html">RFC 1918</a> behind a NAT for the various services
   they provide as well as connections for their end customers.  This
   happens even though the private use address space is strictly limited
   in size.  Some deployments have already outgrown that space and have
   begun cascading NAT to continue expanding, though this practice



<span class="grey">Van de Velde, et al.         Informational                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   eventually breaks down over routing ambiguity.  Additionally, while
   we are unlikely to know the full extent of the practice (because it
   is hidden behind a NAT), service providers have been known to
   announce previously unallocated public space to their customers (to
   avoid the problems associated with the same address space appearing
   on both sides), only to find that once that space was formally
   allocated and being publicly announced, their customers couldn't
   reach the registered networks.

   The number of and types of applications that can be deployed by these
   ISPs and their customers are restricted by the ability to overload
   the port range on the public side of the most public NAT in the path.
   The limit of this approach is something substantially less than 2^48
   possible active *application* endpoints (approximately [2^32 minus
   2^29] * [2* 2^16 minus well-known port space]), as distinct from
   addressable devices each with its own application endpoint range.
   Those who advocate layering of NAT frequently forget to mention that
   there are topology restrictions placed on the applications.  Forced
   into this limiting situation, such customers can rightly claim that
   despite the optimistic predictions of mathematical models, the global
   pool of IPv4 addresses is effectively already exhausted.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.7.%20%20Multihoming%20and%20Renumbering%20with%20NAT"></a><a class="selflink" href="#section-2.7" name="section-2.7">2.7</a>.  Multihoming and Renumbering with NAT</span>

   Allowing a network to be multihomed and renumbering a network are
   quite different functions.  However, these are argued together as
   reasons for using NAT, because making a network multihomed is often a
   transitional state required as part of network renumbering, and NAT
   interacts with both in the same way.

   For enterprise networks, it is highly desirable to provide resiliency
   and load-balancing to be connected to more than one Internet Service
   Provider (ISP) and to be able to change ISPs at will.  This means
   that a site must be able to operate under more than one Classless
   Inter-Domain Routing (CIDR) prefix [<a href="#ref-18" title='"Classless Inter-domain Routing (CIDR): The Internet Address Assignment and Aggregation Plan"'>18</a>] and/or readily change its
   CIDR prefix.  Unfortunately, IPv4 was not designed to facilitate
   either of these maneuvers.  However, if a site is connected to its
   ISPs via NAT boxes, only those boxes need to deal with multihoming
   and renumbering issues.

   Similarly, if two enterprise IPv4 networks need to be merged and <a href="rfc1918.html">RFC</a>
   <a href="rfc1918.html">1918</a> addresses are used, there is a high probability of address
   overlaps.  In those situations, it may well be that installing a NAT
   box between them will avoid the need to renumber one or both.  For
   any enterprise, this can be a short-term financial saving and allows
   more time to renumber the network components.  The long-term solution
   is a single network without usage of NAT to avoid the ongoing
   operational complexity of overlapping addresses.



<span class="grey">Van de Velde, et al.         Informational                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   The addition of an extra NAT as a solution may be sufficient for some
   networks; however, when the merging networks were already using
   address translation it will create major problems due to
   administrative difficulties of overlapping address spaces in the
   merged networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Description%20of%20the%20IPv6%20Tools"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Description of the IPv6 Tools</span>

   This section describes several features that can be used as part of
   the LNP solution to replace the protection features associated with
   IPv4 NAT.

   The reader must clearly distinguish between features of IPv6 that
   were fully defined when this document was drafted and those that were
   potential features that still required more work to define them.  The
   latter are summarized later in the 'Gap Analysis' section of this
   document.  However, we do not distinguish in this document between
   fully defined features of IPv6 and those that were already widely
   implemented at the time of writing.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Privacy%20Addresses%20%28RFC%203041%29"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Privacy Addresses (<a href="rfc3041.html">RFC 3041</a>)</span>

   There are situations where it is desirable to prevent device
   profiling, for example, by web sites that are accessed from the
   device as it moves around the Internet.  IPv6 privacy addresses were
   defined to provide that capability.  IPv6 addresses consist of a
   routing prefix, a subnet-id (SID) part, and an interface identifier
   (IID) part.  As originally defined, IPv6 stateless address auto-
   configuration (SLAAC) will typically embed the IEEE Link Identifier
   of the interface as the IID part, though this practice facilitates
   tracking and profiling of a device through the consistent IID.  <a href="rfc3041.html">RFC</a>
   <a href="rfc3041.html">3041</a> [<a href="#ref-7" title='"Privacy Extensions for Stateless Address Autoconfiguration in IPv6"'>7</a>] describes an extension to SLAAC to enhance device privacy.
   Use of the privacy address extension causes nodes to generate global-
   scope addresses from interface identifiers that change over time,
   consistent with system administrator policy.  Changing the interface
   identifier (thus the global-scope addresses generated from it) over
   time makes it more difficult for eavesdroppers and other information
   collectors to identify when addresses used in different transactions
   actually correspond to the same node.  A relatively short valid
   lifetime for the privacy address also has the effect of reducing the
   attack profile of a device, as it is not directly attackable once it
   stops answering at the temporary use address.

   While the primary implementation and source of randomized <a href="rfc3041.html">RFC 3041</a>
   addresses are expected to be from end-systems running stateless auto-
   configuration, there is nothing that prevents a Dynamic Host
   Configuration Protocol (DHCP) server from running the <a href="rfc3041.html">RFC 3041</a>
   algorithm for any new IEEE identifier it hears in a request, then



<span class="grey">Van de Velde, et al.         Informational                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   remembering that for future queries.  This would allow using them in
   DNS for registered services since the assumption of a DHCP server-
   based deployment would be a persistent value that minimizes DNS
   churn.  A DHCP-based deployment would also allow for local policy to
   periodically change the entire collection of end-device addresses
   while maintaining some degree of central knowledge and control over
   which addresses should be in use at any point in time.

   Randomizing the IID, as defined in <a href="rfc3041.html">RFC 3041</a>, is effectively a sparse
   allocation technique that only precludes tracking of the lower 64
   bits of the IPv6 address.  Masking of the subnet ID will require
   additional approaches as discussed below in <a href="#section-3.4">Section 3.4</a>.  Additional
   considerations are discussed in [<a href="#ref-19" title='"RFC 3041 Considered Harmful"'>19</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Unique%20Local%20Addresses"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Unique Local Addresses</span>

   Achieving the goal of autonomy, that many perceive as a value of NAT,
   is required for local network and application services stability
   during periods of intermittent connectivity or moving between one or
   more providers.  Such autonomy in a single routing prefix environment
   would lead to massive expansion of the global routing tables (as seen
   in IPv4), so IPv6 provides for simultaneous use of multiple prefixes.
   The Unique Local Address (ULA) prefix [<a href="#ref-17" title='"Unique Local IPv6 Unicast Addresses"'>17</a>] has been set aside for use
   in local communications.  The ULA prefix for any network is routable
   over a locally defined collection of routers.  These prefixes are not
   intended to be routed on the public global Internet as large-scale
   inter-domain distribution of routes for ULA prefixes would have a
   negative impact on global route aggregation.

   ULAs have the following characteristics:

   o  For all practical purposes, a globally unique prefix

      *  allows networks to be combined or privately interconnected
         without creating address conflicts or requiring renumbering of
         interfaces using these prefixes, and

      *  if accidentally leaked outside of a network via routing or DNS,
         is highly unlikely that there will be a conflict with any other
         addresses.

   o  They are ISP independent and can be used for communications inside
      of a network without having any permanent or only intermittent
      Internet connectivity.







<span class="grey">Van de Velde, et al.         Informational                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   o  They have a well-known prefix to allow for easy filtering at
      network boundaries preventing leakage of routes and packets that
      should remain local.

   o  In practice, applications may treat these addresses like global-
      scope addresses, but address selection algorithms may need to
      distinguish between ULAs and ordinary global-scope unicast
      addresses to ensure stability.  The policy table defined in [<a href="#ref-11" title='"Default Address Selection for Internet Protocol version 6 (IPv6)"'>11</a>]
      is one way to bias this selection, by giving higher preference to
      FC00::/7 over 2001::/3.  Mixing the two kinds of addresses may
      lead to undeliverable packets during times of instability, but
      that mixing is not likely to happen when the rules of <a href="rfc3484.html">RFC 3484</a> are
      followed.

   o  ULAs have no intrinsic security properties.  However, they have
      the useful property that their routing scope is limited by default
      within an administrative boundary.  Their usage is suggested at
      several points in this document, as a matter of administrative
      convenience.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20DHCPv6%20Prefix%20Delegation"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  DHCPv6 Prefix Delegation</span>

   One of the functions of a simple gateway is managing the local use
   address range.  The Prefix Delegation (DHCP-PD) options [<a href="#ref-12" title='"IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6"'>12</a>] provide
   a mechanism for automated delegation of IPv6 prefixes using the DHCP
   [<a href="#ref-10" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>10</a>].  This mechanism (DHCP-PD) is intended for delegating a long-
   lived prefix from a delegating router (possibly incorporating a
   DHCPv6 server) to a requesting router, possibly across an
   administrative boundary, where the delegating router does not require
   knowledge about the topology of the links in the network to which the
   prefixes will be assigned.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.4.%20%20Untraceable%20IPv6%20Addresses"></a><a class="selflink" href="#section-3.4" name="section-3.4">3.4</a>.  Untraceable IPv6 Addresses</span>

   The main goal of untraceable IPv6 addresses is to create an
   apparently amorphous network infrastructure, as seen from external
   networks, to protect the local infrastructure from malicious outside
   influences and from mapping of any correlation between the network
   activities of multiple devices from external networks.  When using
   untraceable IPv6 addresses, it could be that two apparently
   sequential addresses are allocated to devices on very different parts
   of the local network instead of belonging to devices adjacent to each
   other on the same subnet.

   Since IPv6 addresses will not be in short supply even within a single
   /64 (or shorter) prefix, it is possible to generate them effectively
   at random when untraceability is required.  They will be globally
   routable IPv6 addresses under the site's prefix, which can be



<span class="grey">Van de Velde, et al.         Informational                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   randomly and independently assigned to IPv6 devices.  The random
   assignment is intended to mislead the outside world about the
   structure of the local network.  In particular, the subnet structure
   may be invisible in the address.  Thus, a flat routing mechanism will
   be needed within the site.  The local routers need to maintain a
   correlation between the topological location of the device and the
   untraceable IPv6 address.  For smaller deployments, this correlation
   could be done by generating IPv6 host route entries, or for larger
   ones by utilizing an indirection device such as a Mobile IPv6 Home
   Agent.  Additional details are in <a href="#section-4.7">Section 4.7</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Using%20IPv6%20Technology%20to%20Provide%20the%20Market%20Perceived%20Benefits%20of"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Using IPv6 Technology to Provide the Market Perceived Benefits of</span>
<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/NAT"></a>    NAT</span>

   The facilities in IPv6 described in <a href="#section-3">Section 3</a> can be used to provide
   the protection perceived to be associated with IPv4 NAT.  This
   section gives some examples of how IPv6 can be used securely.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Simple%20Gateway%20between%20Internet%20and%20Internal%20Network"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Simple Gateway between Internet and Internal Network</span>

   As a simple gateway, the device manages both packet routing and local
   address management.  A basic IPv6 router should have a default
   configuration to advertise inside the site a locally generated random
   ULA prefix, independently from the state of any external
   connectivity.  This would allow local nodes in a topology more
   complex than a single link to communicate amongst themselves
   independent of the state of a global connection.  If the network
   happened to concatenate with another local network, the randomness in
   ULA creation is highly unlikely to result in address collisions.

   With external connectivity, the simple gateway should use DHCP-PD to
   acquire a routing prefix from the service provider for use when
   connecting to the global Internet.  End-system connections involving
   other nodes on the global Internet that follow the policy table in
   <a href="rfc3484.html">RFC 3484</a> will always use the global IPv6 addresses derived from this
   prefix delegation.  It should be noted that the address selection
   policy table should be configured to prefer the ULA prefix range over
   the DHCP-PD prefix range when the goal is to keep local
   communications stable during periods of transient external
   connectivity.

   In the very simple case, there is no explicit routing protocol on
   either side of the gateway, and a single default route is used
   internally pointing out to the global Internet.  A slightly more
   complex case might involve local internal routing protocols, but with
   the entire local network sharing a common global prefix there would





<span class="grey">Van de Velde, et al.         Informational                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   still not be a need for an external routing protocol as the service
   provider could install a route for the prefix delegated via DHCP-PD
   pointing toward the connecting link.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20IPv6%20and%20Simple%20Security"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  IPv6 and Simple Security</span>

   The vulnerability of an IPv6 host directly connected to the Internet
   is similar to that of an IPv4 host.  The use of firewalls and
   Intrusion Detection Systems (IDSs) is recommended for those that want
   boundary protection in addition to host defenses.  A proxy may be
   used for certain applications, but with the caveat that the end-to-
   end transparency is broken.  However, with IPv6, the following
   protections are available without the use of NAT while maintaining
   end-to-end reachability:

   1.  Short lifetimes on privacy extension suffixes reduce the attack
       profile since the node will not respond to the address once its
       lifetime becomes invalid.

   2.  IP security (IPsec) is often cited as the reason for improved
       security because it is a mandatory service for IPv6
       implementations.  Broader availability does not by itself improve
       security because its use is still regulated by the availability
       of a key infrastructure.  IPsec functions to authenticate the
       correspondent, prevent session hijacking, prevent content
       tampering, and optionally mask the packet contents.  While IPsec
       is commonly available in some IPv4 implementations and with
       extensions can support NAT traversals, NAT support has
       limitations and does not work in all situations.  The use of
       IPsec with NATs requires an additional UDP encapsulation and
       keepalive overhead [<a href="#ref-13" title='"UDP Encapsulation of IPsec ESP Packets"'>13</a>].  In the IPv4/NAT environment, the usage
       of IPsec has been largely limited to edge-to-edge Virtual Private
       Network (VPN) deployments.  The potential for end-to-end IPsec
       use is significantly enhanced when NAT is removed from the
       network, as connections can be initiated from either end.  It
       should be noted that encrypted IPsec traffic will bypass content-
       aware firewalls, which is presumed to be acceptable for parties
       with whom the site has established a security association.

   3.  The size of the address space of a typical subnet (64 bits of
       IID) will make a complete subnet ping sweep usually significantly
       harder and more expensive than for IPv4 [<a href="#ref-20" title='"IPv6 Implications for TCP/UDP Port Scanning"'>20</a>].  Reducing the
       security threat of port scans on identified nodes requires sparse
       distribution within the subnet to minimize the probability of
       scans finding adjacent nodes.  This scanning protection will be
       nullified if IIDs are configured in any structured groupings
       within the IID space.  Provided that IIDs are essentially
       randomly distributed across the available space, address



<span class="grey">Van de Velde, et al.         Informational                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


       scanning-based attacks will effectively fail.  This protection
       exists if the attacker has no direct access to the specific
       subnet and therefore is trying to scan it remotely.  If an
       attacker has local access, then he could use Neighbor Discovery
       (ND) [<a href="#ref-3" title='"Neighbor Discovery for IP Version 6 (IPv6)"'>3</a>] and ping6 to the link-scope multicast ff02::1 to detect
       the IEEE-based address of local neighbors, then apply the global
       prefix to those to simplify its search (of course, a locally
       connected attacker has many scanning options with IPv4 as well).

   Assuming the network administrator is aware of [<a href="#ref-20" title='"IPv6 Implications for TCP/UDP Port Scanning"'>20</a>] the increased
   size of the IPv6 address will make topology probing much harder, and
   almost impossible for IPv6 devices.  The intention of topology
   probing is to identify a selection of the available hosts inside an
   enterprise.  This mostly starts with a ping sweep.  Since the IPv6
   subnets are 64 bits worth of address space, this means that an
   attacker has to simply send out an unrealistic number of pings to map
   the network, and virus/worm propagation will be thwarted in the
   process.  At full-rate full-duplex 40 Gbps (400 times the typical 100
   Mbps LAN, and 13,000 times the typical DSL/cable access link), it
   takes over 5,000 years to scan the entirety of a single 64-bit
   subnet.

   IPv4 NAT was not developed as a security mechanism.  Despite
   marketing messages to the contrary, it is not a security mechanism,
   and hence it will offer some security holes while many people assume
   their network is secure due to the usage of NAT.  IPv6 security best
   practices will avoid this kind of illusory security, but can only
   address the same threats if correctly configured firewalls and IDSs
   are used at the perimeter.

      It must be noted that even a firewall doesn't fully secure a
      network.  Many attacks come from inside or are at a layer higher
      than the firewall can protect against.  In the final analysis,
      every system has to be responsible for its own security, and every
      process running on a system has to be robust in the face of
      challenges like stack overflows, etc.  What a firewall does is
      prevent a network administration from having to carry unauthorized
      traffic, and in so doing reduce the probability of certain kinds
      of attacks across the protected boundary.

   To implement simple security for IPv6 in, for example, a DSL or cable
   modem-connected home network, the broadband gateway/router should be
   equipped with stateful firewall capabilities.  These should provide a
   default configuration where incoming traffic is limited to return
   traffic resulting from outgoing packets (sometimes known as
   reflective session state).  There should also be an easy interface
   that allows users to create inbound 'pinholes' for specific purposes
   such as online gaming.



<span class="grey">Van de Velde, et al.         Informational                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   Administrators and the designers of configuration interfaces for
   simple IPv6 firewalls need to provide a means of documenting the
   security caveats that arise from a given set of configuration rules
   so that users (who are normally oblivious to such things) can be made
   aware of the risks.  As rules are improved iteratively, the goal will
   be to make use of the IPv6 Internet more secure without increasing
   the perceived complexity for users who just want to accomplish a
   task.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20User%2FApplication%20Tracking"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  User/Application Tracking</span>

   IPv6 enables the collection of information about data flows.  Because
   all addresses used for Internet and intra-/inter-site communication
   are unique, it is possible for an enterprise or ISP to get very
   detailed information on any communication exchange between two or
   more devices.  Unless privacy addresses [<a href="#ref-7" title='"Privacy Extensions for Stateless Address Autoconfiguration in IPv6"'>7</a>] are in use, this enhances
   the capability of data-flow tracking for security audits compared
   with IPv4 NAT, because in IPv6 a flow between a sender and receiver
   will always be uniquely identified due to the unique IPv6 source and
   destination addresses.

   At the same time, this tracking is per address.  In environments
   where the goal is tracking back to the user, additional external
   information will be necessary correlating a user with an address.  In
   the case of short-lifetime privacy address usage, this external
   information will need to be based on more stable information such as
   the layer 2 media address.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Privacy%20and%20Topology%20Hiding%20Using%20IPv6"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Privacy and Topology Hiding Using IPv6</span>

   Partial host privacy is achieved in IPv6 using <a href="rfc3041.html">RFC 3041</a> pseudo-random
   privacy addresses [<a href="#ref-7" title='"Privacy Extensions for Stateless Address Autoconfiguration in IPv6"'>7</a>] which are generated as required, so that a
   session can use an address that is valid only for a limited time.
   This only allows such a session to be traced back to the subnet that
   originates it, but not immediately to the actual host, where IPv4 NAT
   is only traceable to the most public NAT interface.

   Due to the large IPv6 address space available, there is plenty of
   freedom to randomize subnet allocations.  By doing this, it is
   possible to reduce the correlation between a subnet and its location.
   When doing both subnet and IID randomization, a casual snooper won't
   be able to deduce much about the network's topology.  The obtaining
   of a single address will tell the snooper very little about other
   addresses.  This is different from IPv4 where address space
   limitations cause this not to be true.  In most usage cases, this
   concept should be sufficient for address privacy and topology hiding,
   with the cost being a more complex internal routing configuration.




<span class="grey">Van de Velde, et al.         Informational                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   As discussed in <a href="#section-3.1">Section 3.1</a>, there are multiple parts to the IPv6
   address, and different techniques to manage privacy for each which
   may be combined to protect the entire address.  In the case where a
   network administrator wishes to fully isolate the internal IPv6
   topology, and the majority of its internal use addresses, one option
   is to run all internal traffic using Unique Local Addresses (ULAs).
   By definition, this prefix block is not to be advertised in the
   public routing system, so without a routing path external traffic
   will never reach the site.  For the set of hosts that do in fact need
   to interact externally, by using multiple IPv6 prefixes (ULAs and one
   or more global addresses) all of the internal nodes that do not need
   external connectivity, and the internally used addresses of those
   that do, will be masked from the outside.  The policy table defined
   in [<a href="#ref-11" title='"Default Address Selection for Internet Protocol version 6 (IPv6)"'>11</a>] provides a mechanism to bias the selection process when
   multiple prefixes are in use such that the ULA would be preferred
   when the correspondent is also local.

   There are other scenarios for the extreme situation when a network
   manager also wishes to fully conceal the internal IPv6 topology.  In
   these cases, the goal in replacing the IPv4 NAT approach is to make
   all of the topology hidden nodes appear from the outside to logically
   exist at the edge of the network, just as they would when behind a
   NAT.  This figure shows the relationship between the logical subnets
   and the topology masking router discussed in the bullet points that
   follow.

                             Internet
                                 |
                                 \
                                 |
                       +------------------+
                       |     topology     |-+-+-+-+-+-+-+-+--
                       |     masking      |  Logical subnets
                       |     router       |-+-+-+-+-+-+-+-+--
                       +------------------+  for topology
                                 |           hidden nodes
                                 |
               Real internal  -------------+-
               topology       |            |
                              |           -+----------
                   -----------+--------+
                                       |
                                       |
                                       |







<span class="grey">Van de Velde, et al.         Informational                     [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   o  One approach uses explicit host routes in the Interior Gateway
      Protocol (IGP) to remove the external correlation between physical
      topology attachment point and end-to-end IPv6 address.  In the
      figure above the hosts would be allocated prefixes from one or
      more logical subnets, and would inject host routes into the IGP to
      internally identify their real attachment point.  This solution
      does however show severe scalability issues and requires hosts to
      securely participate in the IGP, as well as have the firewall
      block all external to internal traceroutes for the logical subnet.
      The specific limitations are dependent on the IGP protocol, the
      physical topology, and the stability of the system.  In any case,
      the approach should be limited to uses with substantially fewer
      than the maximum number of routes that the IGP can support
      (generally between 5,000 and 50,000 total entries including subnet
      routes).  Hosts should also listen to the IGP for duplicate use
      before finalizing an interface address assignment as the duplicate
      address detection will only check for use on the attached segment,
      not the logical subnet.

   o  Another technical approach to fully hide the internal topology is
      use of a tunneling mechanism.  Mobile IPv6 without route
      optimization is one approach for using an automated tunnel, as it
      always starts in tunnel mode via the Home Agent (HA).  In this
      deployment model, the application perceived addresses of the nodes
      are routed via the edge HA acting as the topology masking router
      (above).  This indirection method truly masks the internal
      topology, as from outside the local network all nodes with global
      access appear to share the prefix of one or more logical subnets
      attached to the HA rather than their real attachment point.  Note
      that in this usage context, the HA is replacing the NAT function
      at the edge of the network, so concerns about additional latency
      for routing through a tunnel to the HA do not apply because it is
      effectively on the same path that the NAT traffic would have
      taken.  Duplicate address detection is handled as a normal process
      of the HA binding update.  While turning off all binding updates
      with the correspondent node would appear to be necessary to
      prevent leakage of topology information, that approach would also
      force all internal traffic using the home address to route via the
      HA tunnel, which may be undesirable.  A more efficient method
      would be to allow internal route optimizations while dropping
      outbound binding update messages at the firewall.  Another
      approach for the internal traffic would be to use the policy table
      of <a href="rfc3484.html">RFC 3484</a> to bias a ULA prefix as preferred internally, leaving
      the logical subnet Home Address external for use.  The downside to
      a Mobile IPv6-based solution is that it requires a Home Agent in
      the network and the configuration of a security association with
      the HA for each hidden node, and it consumes some amount of
      bandwidth for tunnel overhead.



<span class="grey">Van de Velde, et al.         Informational                     [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   o  Another method (where the layer 2 topology allows) uses a virtual
      LAN approach to logically attach the devices to one or more
      subnets on the edge router.  This approach leads the end nodes to
      believe they actually share a common segment.  The downside of
      this approach is that all internal traffic would be directed over
      suboptimal paths via the edge router, as well as the complexity of
      managing a distributed logical LAN.

   One issue to be aware of is that subnet scope multicast will not work
   for the logical hidden subnets, except in the VLAN case.  While a
   limited scope multicast to a collection of nodes that are arbitrarily
   scattered makes no technical sense, care should be exercised to avoid
   deploying applications that expect limited scope multicast in
   conjunction with topology hiding.

   Another issue that this document will not define is the mechanism for
   a topology hidden node to learn its logical subnet.  While manual
   configuration would clearly be sufficient, DHCP could be used for
   address assignment, with the recipient node discovering it is in a
   hidden mode when the attached subnet prefix doesn't match the one
   assigned.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20Independent%20Control%20of%20Addressing%20in%20a%20Private%20Network"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  Independent Control of Addressing in a Private Network</span>

   IPv6 provides for autonomy in local use addresses through ULAs.  At
   the same time, IPv6 simplifies simultaneous use of multiple addresses
   per interface so that an IPv6 NAT is not required between the ULA and
   the public Internet because nodes that need access to the public
   Internet will have a global use address as well.  When using IPv6,
   the need to ask for more address space will become far less likely
   due to the increased size of the subnets, along with an allocation
   policy that recognizes that table fragmentation is also an important
   consideration.  While global IPv6 allocation policy is managed
   through the Regional Internet Registries (RIRs), it is expected that
   they will continue with derivatives of [<a href="#ref-8" title='"IAB/IESG Recommendations on IPv6 Address Allocations to Sites"'>8</a>] for the foreseeable future
   so the number of subnet prefixes available to an organization should
   not be a limitation that would create an artificial demand for NAT.

   Ongoing subnet address maintenance may become simpler when IPv6
   technology is utilized.  Under IPv4 address space policy
   restrictions, each subnet must be optimized, so one has to look
   periodically into the number of hosts on a segment and the subnet
   size allocated to the segment and rebalance.  For example, an
   enterprise today may have a mix of IPv4 /28 - /23 size subnets, and
   may shrink/grow these as its network user base changes.  For IPv6,
   all subnets have /64 prefixes, which will reduce the operational and
   configuration overhead.




<span class="grey">Van de Velde, et al.         Informational                     [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6.%20%20Global%20Address%20Pool%20Conservation"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a>.  Global Address Pool Conservation</span>

   IPv6 provides sufficient space to completely avoid the need for
   overlapping address space.  Since allocations in IPv6 are based on
   subnets rather than hosts, a reasonable way to look at the pool is
   that there are about 17*10^18 unique subnet values where sparse
   allocation practice within those provides for new opportunities such
   as SEcure Neighbor Discovery (SEND) [<a href="#ref-15" title='"SEcure Neighbor Discovery (SEND)"'>15</a>].  As previously discussed,
   the serious disadvantages of ambiguous address space have been well
   documented, and with sufficient space there is no need to continue
   the increasingly aggressive conservation practices that are necessary
   with IPv4.  While IPv6 allocation policies and ISP business practice
   will continue to evolve, the recommendations in <a href="rfc3177.html">RFC 3177</a> are based on
   the technical potential of the vast IPv6 address space.  That
   document demonstrates that there is no resource limitation that will
   require the adoption of the IPv4 workaround of ambiguous space behind
   a NAT.  As an example of the direct contrast, many expansion-oriented
   IPv6 deployment scenarios result in multiple IPv6 addresses per
   device, as opposed to the constriction of IPv4 scenarios where
   multiple devices are forced to share a scarce global address through
   a NAT.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.7.%20%20Multihoming%20and%20Renumbering"></a><a class="selflink" href="#section-4.7" name="section-4.7">4.7</a>.  Multihoming and Renumbering</span>

   IPv6 was designed to allow sites and hosts to run with several
   simultaneous CIDR-allocated prefixes, and thus with several
   simultaneous ISPs.  An address selection mechanism [<a href="#ref-11" title='"Default Address Selection for Internet Protocol version 6 (IPv6)"'>11</a>] is specified
   so that hosts will behave consistently when several addresses are
   simultaneously valid.  The fundamental difficulty that IPv4 has in
   regard to multiple addresses therefore does not apply to IPv6.  IPv6
   sites can and do run today with multiple ISPs active, and the
   processes for adding, removing, and renumbering active prefixes at a
   site have been documented in [<a href="#ref-16" title='"Procedures for Renumbering an IPv6 Network without a Flag Day"'>16</a>] and [<a href="#ref-21" title='"Things to think about when Renumbering an IPv6 network"'>21</a>].  However, multihoming and
   renumbering remain technically challenging even with IPv6 with
   regards to session continuity across multihoming events or
   interactions with ingress filtering (see the Gap Analysis below).

   The IPv6 address space allocated by the ISP will be dependent upon
   the connecting service provider.  This will likely result in a
   renumbering effort when the network changes between service
   providers.  When changing ISPs or ISPs readjust their addressing
   pool, DHCP-PD [<a href="#ref-12" title='"IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6"'>12</a>] can be used as an almost zero-touch external
   mechanism for prefix change in conjunction with a ULA prefix for
   internal connection stability.  With appropriate management of the
   lifetime values and overlap of the external prefixes, a smooth make-
   before-break transition is possible as existing communications will
   continue on the old prefix as long as it remains valid, while any new
   communications will use the new prefix.



<span class="grey">Van de Velde, et al.         Informational                     [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Case%20Studies"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Case Studies</span>

   In presenting these case studies, we have chosen to consider
   categories of networks divided first according to their function
   either as carrier/ISP networks or end user (such as enterprise)
   networks with the latter category broken down according to the number
   of connected end hosts.  For each category of networks, we can use
   IPv6 Local Network Protection to achieve a secure and flexible
   infrastructure, which provides an enhanced network functionality in
   comparison with the usage of address translation.

   o  Medium/Large Private Networks (typically &gt;10 connections)

   o  Small Private Networks (typically 1 to 10 connections)

   o  Single User Connection (typically 1 connection)

   o  ISP/Carrier Customer Networks

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Medium%2FLarge%20Private%20Networks"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Medium/Large Private Networks</span>

   The majority of private enterprise, academic, research, or government
   networks fall into this category.  Many of these networks have one or
   more exit points to the Internet.  Though these organizations have
   sufficient resources to acquire addressing independence when using
   IPv4, there are several reasons why they might choose to use NAT in
   such a network.  For the ISP, there is no need to import the IPv4
   address range from the remote end-customer, which facilitates IPv4
   route summarization.  The customer can use a larger IPv4 address
   range (probably with less administrative overhead) by the use of <a href="rfc1918.html">RFC</a>
   <a href="rfc1918.html">1918</a> and NAT.  The customer also reduces the overhead in changing to
   a new ISP, because the addresses assigned to devices behind the NAT
   do not need to be changed when the customer is assigned a different
   address by a new ISP.  By using address translation in IPv4, one
   avoids the expensive process of network renumbering.  Finally, the
   customer can provide privacy for its hosts and the topology of its
   internal network if the internal addresses are mapped through NAT.

   It is expected that there will be enough IPv6 addresses available for
   all networks and appliances for the foreseeable future.  The basic
   IPv6 address range an ISP allocates for a private network is large
   enough (currently /48) for most of the medium and large enterprises,
   while for the very large private enterprise networks address ranges
   can be concatenated.  The goal of this assignment mechanism is to
   decrease the total amount of entries in the public Internet routing
   table.  A single /48 allocation provides an enterprise network with
   65,536 different /64 subnet prefixes.




<span class="grey">Van de Velde, et al.         Informational                     [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   To mask the identity of a user on a network of this type, the usage
   of IPv6 privacy extensions may be advised.  This technique is useful
   when an external element wants to track and collect all information
   sent and received by a certain host with a known IPv6 address.
   Privacy extensions add a random time-limited factor to the host part
   of an IPv6 address and will make it very hard for an external element
   to keep correlating the IPv6 address to a specific host on the inside
   network.  The usage of IPv6 privacy extensions does not mask the
   internal network structure of an enterprise network.

   When there is a need to mask the internal structure towards the
   external IPv6 Internet, then some form of 'untraceable' addresses may
   be used.  These addresses will appear to exist at the external edge
   of the network, and may be assigned to those hosts for which topology
   masking is required or that want to reach the IPv6 Internet or other
   external networks.  The technology to assign these addresses to the
   hosts could be based on DHCPv6 or static configuration.  To
   complement the 'Untraceable' addresses, it is necessary to have at
   least awareness of the IPv6 address location when routing an IPv6
   packet through the internal network.  This could be achieved by 'host
   based route-injection' in the local network infrastructure.  This
   route-injection could be done based on /128 host-routes to each
   device that wants to connect to the Internet using an untraceable
   address.  This will provide the most dynamic masking, but will have a
   scalability limitation, as an IGP is typically not designed to carry
   many thousands of IPv6 prefixes.  A large enterprise may have
   thousands of hosts willing to connect to the Internet.

   An alternative for larger deployments is to leverage the tunneling
   aspect of MIPv6 even for non-mobile devices.  With the logical subnet
   being allocated as attached to the edge Home Agent, the real
   attachment and internal topology are masked from the outside.
   Dropping outbound binding updates at the firewall is also necessary
   to avoid leaking the attachment information.

   Less flexible masking could be to have time-based IPv6 prefixes per
   link or subnet.  This may reduce the amount of route entries in the
   IGP by a significant factor, but has as a trade-off that masking is
   time and subnet based, which will complicate auditing systems.  The
   dynamic allocation of 'Untraceable' addresses can also limit the IPv6
   access between local and external hosts to those local hosts being
   authorized for this capability.









<span class="grey">Van de Velde, et al.         Informational                     [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   The use of permanent ULA addresses on a site provides the benefit
   that even if an enterprise changes its ISP, the renumbering will only
   affect those devices that have a wish to connect beyond the site.
   Internal servers and services would not change their allocated IPv6
   ULA address, and the service would remain available even during
   global address renumbering.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Small%20Private%20Networks"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Small Private Networks</span>

   Also known as SOHO (Small Office/Home Office) networks, this category
   describes those networks that have few routers in the topology and
   usually have a single network egress point.  Typically, these
   networks:

   o  are connected via either a dial-up connection or broadband access,

   o  don't have dedicated Network Operation Center (NOC), and

   o  today, typically use NAT as the cheapest available solution for
      connectivity and address management

   In most cases, the received global IPv4 prefix is not fixed over time
   and is too long (very often a /32 giving just a single address) to
   provide every node in the private network with a unique, globally
   usable address.  Fixing either of those issues typically adds an
   administrative overhead for address management to the user.  This
   category may even be limited to receiving ambiguous IPv4 addresses
   from the service provider based on <a href="rfc1918.html">RFC 1918</a>.  An ISP will typically
   pass along the higher administration cost attached to larger address
   blocks, or IPv4 prefixes that are static over time, due to the larger
   public address pool each of those requires.

   As a direct response to explicit charges per public address, most of
   this category has deployed NAPT (port demultiplexing NAT) to minimize
   the number of addresses in use.  Unfortunately, this also limits the
   Internet capability of the equipment to being mainly a receiver of
   Internet data (client), and it makes it quite hard for the equipment
   to become a worldwide Internet server (HTTP, FTP, etc.) due to the
   stateful operation of the NAT equipment.  Even when there is
   sufficient technical knowledge to manage the NAT to enable external
   access to a server, only one server can be mapped per protocol/port
   number per address, and then only when the address from the ISP is
   publicly routed.  When there is an upstream NAT providing private
   address space to the ISP side of the private NAT, additional
   negotiation with the ISP will be necessary to provide an inbound
   mapping, if that is even possible.





<span class="grey">Van de Velde, et al.         Informational                     [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   When deploying IPv6 LNP in this environment, there are two approaches
   possible with respect to IPv6 addressing.

   o  DHCPv6 Prefix-Delegation (PD)

   o  ISP provides a static IPv6 address range

   For the DHCPv6-PD solution, a dynamic address allocation approach is
   chosen.  By means of the enhanced DHCPv6 protocol, it is possible to
   have the ISP push down an IPv6 prefix range automatically towards the
   small private network and populate all interfaces in that small
   private network dynamically.  This reduces the burden for
   administrative overhead because everything happens automatically.

   For the static configuration, the mechanisms used could be the same
   as for the medium/large enterprises.  Typically, the need for masking
   the topology will not be of high priority for these users, and the
   usage of IPv6 privacy extensions could be sufficient.

   For both alternatives, the ISP has the unrestricted capability for
   summarization of its RIR-allocated IPv6 prefix, while the small
   private network administrator has all flexibility in using the
   received IPv6 prefix to its advantage because it will be of
   sufficient size to allow all the local nodes to have a public address
   and full range of ports available whenever necessary.

   While a full prefix is expected to be the primary deployment model,
   there may be cases where the ISP provides a single IPv6 address for
   use on a single piece of equipment (PC, PDA, etc.).  This is expected
   to be rare, though, because in the IPv6 world the assumption is that
   there is an unrestricted availability of a large amount of globally
   routable and unique address space.  If scarcity was the motivation
   with IPv4 to provide <a href="rfc1918.html">RFC 1918</a> addresses, in this environment the ISP
   will not be motivated to allocate private addresses to the single
   user connection because there are enough global addresses available
   at essentially the same cost.  Also, it will be likely that the
   single device wants to mask its identity to the called party or its
   attack profile over a shorter time than the life of the ISP
   attachment, so it will need to enable IPv6 privacy extensions.  In
   turn, this leads to the need for a minimum allocation of a /64 prefix
   rather than a single address.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Single%20User%20Connection"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Single User Connection</span>

   This group identifies the users that are connected via a single IPv4
   address and use a single piece of equipment (PC, PDA, etc.).  This
   user may get an ambiguous IPv4 address (frequently imposed by the
   ISP) from the service provider that is based on <a href="rfc1918.html">RFC 1918</a>.  If



<span class="grey">Van de Velde, et al.         Informational                     [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   ambiguous addressing is utilized, the service provider will execute
   NAT on the allocated IPv4 address for global Internet connectivity.
   This also limits the Internet capability of the equipment to being
   mainly a receiver of Internet data, and it makes it quite hard for
   the equipment to become a worldwide Internet server (HTTP, FTP, etc.)
   due to the stateful operation of the NAT equipment.

   When using IPv6 LNP, this group will identify the users that are
   connected via a single IPv6 address and use a single piece of
   equipment (PC, PDA, etc.).

   In the IPv6 world, the assumption is that there is unrestricted
   availability of a large amount of globally routable and unique IPv6
   addresses.  The ISP will not be motivated to allocate private
   addresses to the single user connection because he has enough global
   addresses available, if scarcity was the motivation with IPv4 to
   provide <a href="rfc1918.html">RFC 1918</a> addresses.  If the single user wants to mask his
   identity, he may choose to enable IPv6 privacy extensions.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20ISP%2FCarrier%20Customer%20Networks"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  ISP/Carrier Customer Networks</span>

   This group refers to the actual service providers that are providing
   the IP access and transport services.  They tend to have three
   separate IP domains that they support:

   o  For the first, they fall into the medium/large private networks
      category (above) for their own internal networks, LANs, etc.

   o  The second is the Operations address domain, which addresses their
      backbone and access switches, and other hardware.  This address
      domain is separate from the other address domains for engineering
      reasons as well as simplicity in managing the security of the
      backbone.

   o  The third is the IP addresses (single or blocks) that they assign
      to customers.  These can be registered addresses (usually given to
      category 5.1 and 5.2 and sometimes 5.3) or can be from a pool of
      <a href="rfc1918.html">RFC 1918</a> addresses used with IPv4 NAT for single user connections.
      Therefore they can actually have two different NAT domains that
      are not connected (internal LAN and single user customers).

   When IPv6 LNP is utilized in these three domains, then for the first
   category it will be possible to use the same solutions as described
   in <a href="#section-5.1">Section 5.1</a>.  The second domain of the ISP/carrier is the
   Operations network.  This environment tends to be a closed
   environment, and consequently communication can be done based on
   ULAs.  However, in this environment, stable IPv6 Provider Independent
   addresses can be used.  This would give a solid and scalable



<span class="grey">Van de Velde, et al.         Informational                     [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   configuration with respect to a local IPv6 address plan.  By the
   usage of proper network edge filters, outside access to the closed
   environment can be avoided.  The third is the IPv6 addresses that
   ISP/carrier network assign to customers.  These will typically be
   assigned with prefix lengths terminating on nibble boundaries to be
   consistent with the DNS PTR records.  As scarcity of IPv6 addresses
   is not a concern, it will be possible for the ISP to provide globally
   routable IPv6 prefixes without a requirement for address translation.
   An ISP may for commercial reasons still decide to restrict the
   capabilities of the end users by other means like traffic and/or
   route filtering, etc.

   If the carrier network is a mobile provider, then IPv6 is encouraged
   in comparison with the combination of IPv4+NAT for Third Generation
   Partnership Project (3GPP)-attached devices.  In Section 2.3 of <a href="rfc3314.html">RFC</a>
   <a href="rfc3314.html">3314</a>, 'Recommendations for IPv6 in 3GPP Standards' [<a href="#ref-9" title='"Recommendations for IPv6 in Third Generation Partnership Project (3GPP) Standards"'>9</a>], it is found
   that the IPv6 WG recommends that one or more /64 prefixes should be
   assigned to each primary Protocol Data Packet (PDP) context.  This
   will allow sufficient address space for a 3GPP-attached node to
   allocate privacy addresses and/or route to a multi-link subnet, and
   it will discourage the use of NAT within 3GPP-attached devices.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20IPv6%20Gap%20Analysis"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  IPv6 Gap Analysis</span>

   Like IPv4 and any major standards effort, IPv6 standardization work
   continues as deployments are ongoing.  This section discusses several
   topics for which additional standardization, or documentation of best
   practice, is required to fully realize the benefits or provide
   optimizations when deploying LNP.  From a standardization
   perspective, there is no obstacle to immediate deployment of the LNP
   approach in many scenarios, though product implementations may lag
   behind the standardization efforts.  That said, the list below
   identifies additional work that should be undertaken to cover the
   missing scenarios.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Simple%20Security"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Simple Security</span>

   Firewall traversal by dynamic pinhole management requires further
   study.  Several partial solutions exist including Interactive
   Connectivity Establishment (ICE) [<a href="#ref-23" title='"Interactive Connectivity Establishment (ICE): A Methodology for Network Address Translator (NAT) Traversal for Offer/Answer Protocols"'>23</a>], and Universal Plug and Play
   (UPNP) [<a href="#ref-24" title='"Universal Plug and Play Web Site"'>24</a>].  Alternative approaches are looking to define service
   provider mediated pinhole management, where things like voice call
   signaling could dynamically establish pinholes based on predefined
   authentication rules.  The basic security provided by a stateful
   firewall will require some degree of default configuration and
   automation to mask the technical complexity from a consumer who
   merely wants a secure environment with working applications.  There
   is no reason a stateful IPv6 firewall product cannot be shipped with



<span class="grey">Van de Velde, et al.         Informational                     [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   default protection that is equal to or better than that offered by
   today's IPv4/NAT products.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Subnet%20Topology%20Masking"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Subnet Topology Masking</span>

   There really is no functional standards gap here as a centrally
   assigned pool of addresses in combination with host routes in the IGP
   is an effective way to mask topology for smaller deployments.  If
   necessary, a best practice document could be developed describing the
   interaction between DHCP and various IGPs that would in effect define
   Untraceable Addresses.

   As an alternative for larger deployments, there is no gap in the HA
   tunneling approach when firewalls are configured to block outbound
   binding update messages.  A border Home Agent using internal
   tunneling to the logical mobile (potentially rack mounted) node can
   completely mask all internal topology, while avoiding the strain from
   a large number of host routes in the IGP.  Some optimization work
   could be done in Mobile IP to define a policy message where a mobile
   node would learn from the Home Agent that it should not try to inform
   its correspondent about route optimization and thereby expose its
   real location.  This optimization, which reduces the load on the
   firewall, would result in less optimal internal traffic routing as
   that would also transit the HA unless ULAs were used internally.
   Trade-offs for this optimization work should be investigated in the
   IETF.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Minimal%20Traceability%20of%20Privacy%20Addresses"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Minimal Traceability of Privacy Addresses</span>

   Privacy addresses [<a href="#ref-7" title='"Privacy Extensions for Stateless Address Autoconfiguration in IPv6"'>7</a>] may certainly be used to limit the traceability
   of external traffic flows back to specific hosts, but lacking a
   topology masking component above they would still reveal the subnet
   address bits.  For complete privacy, a best practice document
   describing the combination of privacy addresses and topology masking
   may be required.  This work remains to be done and should be pursued
   by the IETF.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4.%20%20Site%20Multihoming"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a>.  Site Multihoming</span>

   This complex problem has never been completely solved for IPv4, which
   is exactly why NAT has been used as a partial solution.  For IPv6,
   after several years of work, the IETF has converged on an
   architectural approach intended with service restoration as initial
   aim [<a href="#ref-22" title='"Architectural Commentary on Site Multi-homing using a Level 3 Shim"'>22</a>].  When this document was drafted, the IETF was actively
   defining the details of this approach to the multihoming problem.
   The approach appears to be most suitable for small and medium sites,
   though it will conflict with existing firewall state procedures.  At
   this time, there are also active discussions in the address



<span class="grey">Van de Velde, et al.         Informational                     [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   registries investigating the possibility of assigning provider-
   independent address space.  Their challenge is finding a reasonable
   metric for limiting the number of organizations that would qualify
   for a global routing entry.  Additional work appears to be necessary
   to satisfy the entire range of requirements.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   While issues that are potentially security related are discussed
   throughout the document, the approaches herein do not introduce any
   new security concerns.  IPv4 NAT has been widely sold as a security
   tool, and suppliers have been implementing address translation
   functionality in their firewalls, though the true impact of NATs on
   security has been previously documented in [<a href="#ref-2" title='"IP Network Address Translator (NAT) Terminology and Considerations"'>2</a>] and [<a href="#ref-4" title='"Architectural Implications of NAT"'>4</a>].

   This document defines IPv6 approaches that collectively achieve the
   goals of the network manager without the negative impact on
   applications or security that are inherent in a NAT approach.  While
   <a href="#section-6">Section 6</a> identifies additional optimization work, to the degree that
   these techniques improve a network manager's ability to explicitly
   audit or control access, and thereby manage the overall attack
   exposure of local resources, they act to improve local network
   security.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Conclusion"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Conclusion</span>

   This document has described a number of techniques that may be
   combined on an IPv6 site to protect the integrity of its network
   architecture.  These techniques, known collectively as Local Network
   Protection, retain the concept of a well-defined boundary between
   "inside" and "outside" the private network and allow firewalling,
   topology hiding, and privacy.  However, because they preserve address
   transparency where it is needed, they achieve these goals without the
   disadvantage of address translation.  Thus, Local Network Protection
   in IPv6 can provide the benefits of IPv4 Network Address Translation
   without the corresponding disadvantages.

   The document has also identified a few ongoing IETF work items that
   are needed to realize 100% of the benefits of LNP.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Acknowledgements"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Acknowledgements</span>

   Christian Huitema has contributed during the initial round table to
   discuss the scope and goal of the document, while the European Union
   IST 6NET project acted as a catalyst for the work documented in this
   note.  Editorial comments and contributions have been received from:
   Fred Templin, Chao Luo, Pekka Savola, Tim Chown, Jeroen Massar,
   Salman Asadullah, Patrick Grossetete, Fred Baker, Jim Bound, Mark



<span class="grey">Van de Velde, et al.         Informational                     [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   Smith, Alain Durand, John Spence, Christian Huitema, Mark Smith,
   Elwyn Davies, Daniel Senie, Soininen Jonne, Kurt Erik Lindqvist,
   Cullen Jennings, and other members of the v6ops WG and IESG.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Informative%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Informative References</span>

   [<a id="ref-1" name="ref-1">1</a>]   Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G., and E.
         Lear, "Address Allocation for Private Internets", <a href="https://tools.ietf.org/html/bcp5">BCP 5</a>,
         <a href="rfc1918.html">RFC 1918</a>, February 1996.

   [<a id="ref-2" name="ref-2">2</a>]   Srisuresh, P. and M. Holdrege, "IP Network Address Translator
         (NAT) Terminology and Considerations", <a href="rfc2663.html">RFC 2663</a>, August 1999.

   [<a id="ref-3" name="ref-3">3</a>]   Narten, T., Nordmark, E., and W. Simpson, "Neighbor Discovery
         for IP Version 6 (IPv6)", <a href="rfc2461.html">RFC 2461</a>, December 1998.

   [<a id="ref-4" name="ref-4">4</a>]   Hain, T., "Architectural Implications of NAT", <a href="rfc2993.html">RFC 2993</a>,
         November 2000.

   [<a id="ref-5" name="ref-5">5</a>]   Srisuresh, P. and K. Egevang, "Traditional IP Network Address
         Translator (Traditional NAT)", <a href="rfc3022.html">RFC 3022</a>, January 2001.

   [<a id="ref-6" name="ref-6">6</a>]   Holdrege, M. and P. Srisuresh, "Protocol Complications with the
         IP Network Address Translator", <a href="rfc3027.html">RFC 3027</a>, January 2001.

   [<a id="ref-7" name="ref-7">7</a>]   Narten, T. and R. Draves, "Privacy Extensions for Stateless
         Address Autoconfiguration in IPv6", <a href="rfc3041.html">RFC 3041</a>, January 2001.

   [<a id="ref-8" name="ref-8">8</a>]   IAB and IESG, "IAB/IESG Recommendations on IPv6 Address
         Allocations to Sites", <a href="rfc3177.html">RFC 3177</a>, September 2001.

   [<a id="ref-9" name="ref-9">9</a>]   Wasserman, M., "Recommendations for IPv6 in Third Generation
         Partnership Project (3GPP) Standards", <a href="rfc3314.html">RFC 3314</a>,
         September 2002.

   [<a id="ref-10" name="ref-10">10</a>]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C., and M.
         Carney, "Dynamic Host Configuration Protocol for IPv6
         (DHCPv6)", <a href="rfc3315.html">RFC 3315</a>, July 2003.

   [<a id="ref-11" name="ref-11">11</a>]  Draves, R., "Default Address Selection for Internet Protocol
         version 6 (IPv6)", <a href="rfc3484.html">RFC 3484</a>, February 2003.

   [<a id="ref-12" name="ref-12">12</a>]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic Host
         Configuration Protocol (DHCP) version 6", <a href="rfc3633.html">RFC 3633</a>,
         December 2003.






<span class="grey">Van de Velde, et al.         Informational                     [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   [<a id="ref-13" name="ref-13">13</a>]  Huttunen, A., Swander, B., Volpe, V., DiBurro, L., and M.
         Stenberg, "UDP Encapsulation of IPsec ESP Packets", <a href="rfc3948.html">RFC 3948</a>,
         January 2005.

   [<a id="ref-14" name="ref-14">14</a>]  Savola, P. and B. Haberman, "Embedding the Rendezvous Point
         (RP) Address in an IPv6 Multicast Address", <a href="rfc3956.html">RFC 3956</a>,
         November 2004.

   [<a id="ref-15" name="ref-15">15</a>]  Arkko, J., Kempf, J., Zill, B., and P. Nikander, "SEcure
         Neighbor Discovery (SEND)", <a href="rfc3971.html">RFC 3971</a>, March 2005.

   [<a id="ref-16" name="ref-16">16</a>]  Baker, F., Lear, E., and R. Droms, "Procedures for Renumbering
         an IPv6 Network without a Flag Day", <a href="rfc4192.html">RFC 4192</a>, September 2005.

   [<a id="ref-17" name="ref-17">17</a>]  Hinden, R. and B. Haberman, "Unique Local IPv6 Unicast
         Addresses", <a href="rfc4193.html">RFC 4193</a>, October 2005.

   [<a id="ref-18" name="ref-18">18</a>]  Fuller, V. and T. Li, "Classless Inter-domain Routing (CIDR):
         The Internet Address Assignment and Aggregation Plan", <a href="https://tools.ietf.org/html/bcp122">BCP 122</a>,
         <a href="rfc4632.html">RFC 4632</a>, August 2006.

   [<a id="ref-19" name="ref-19">19</a>]  Dupont, F. and P. Savola, <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22RFC+3041+Considered+Harmful%22" style="text-decoration: none">"RFC 3041 Considered Harmful"</a>, Work
         in Progress, June 2004.

   [<a id="ref-20" name="ref-20">20</a>]  Chown, T., <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22IPv6+Implications+for+TCP%2FUDP+Port+Scanning%22" style="text-decoration: none">"IPv6 Implications for TCP/UDP Port Scanning"</a>, Work
         in Progress, October 2005.

   [<a id="ref-21" name="ref-21">21</a>]  Chown, T., Tompson, M., Ford, A., and S. Venaas, "Things to
         think about when Renumbering an IPv6 network", Work
         in Progress, September 2006.

   [<a id="ref-22" name="ref-22">22</a>]  Huston, G., "Architectural Commentary on Site Multi-homing
         using a Level 3 Shim", Work in Progress, July 2005.

   [<a id="ref-23" name="ref-23">23</a>]  Rosenberg, J., "Interactive Connectivity Establishment (ICE): A
         Methodology for Network  Address Translator (NAT) Traversal for
         Offer/Answer Protocols", Work in Progress, October 2006.

   [<a id="ref-24" name="ref-24">24</a>]  "Universal Plug and Play Web Site", July 2005,
         &lt;<a href="http://www.upnp.org/">http://www.upnp.org/</a>&gt;.











<span class="grey">Van de Velde, et al.         Informational                     [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Additional%20Benefits%20Due%20to%20Native%20IPv6%20and%20Universal%20Unique"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Additional Benefits Due to Native IPv6 and Universal Unique</span>
             Addressing

   The users of native IPv6 technology and globally unique IPv6
   addresses have the potential to make use of the enhanced IPv6
   capabilities, in addition to the benefits offered by the IPv4
   technology.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.1.%20%20Universal%20Any-to-Any%20Connectivity"></a><a class="selflink" href="#appendix-A.1" name="appendix-A.1">A.1</a>.  Universal Any-to-Any Connectivity</span>

   One of the original design points of the Internet was any-to-any
   connectivity.  The dramatic growth of Internet-connected systems
   coupled with the limited address space of the IPv4 protocol spawned
   address conservation techniques.  NAT was introduced as a tool to
   reduce demand on the limited IPv4 address pool, but the side effect
   of the NAT technology was to remove the any-to-any connectivity
   capability.  By removing the need for address conservation (and
   therefore NAT), IPv6 returns the any-to-any connectivity model and
   removes the limitations on application developers.  With the freedom
   to innovate unconstrained by NAT traversal efforts, developers will
   be able to focus on new advanced network services (i.e., peer-to-peer
   applications, IPv6-embedded IPsec communication between two
   communicating devices, instant messaging, Internet telephony, etc.)
   rather than focusing on discovering and traversing the increasingly
   complex NAT environment.

   It will also allow application and service developers to rethink the
   security model involved with any-to-any connectivity, as the current
   edge firewall solution in IPv4 may not be sufficient for any-to-any
   service models.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.2.%20%20Auto-Configuration"></a><a class="selflink" href="#appendix-A.2" name="appendix-A.2">A.2</a>.  Auto-Configuration</span>

   IPv6 offers a scalable approach to minimizing human interaction and
   device configuration.  IPv4 implementations require touching each end
   system to indicate the use of DHCP vs. a static address and
   management of a server with the pool size large enough for the
   potential number of connected devices.  Alternatively, IPv6 uses an
   indication from the router to instruct the end systems to use DHCP or
   the stateless auto-configuration approach supporting a virtually
   limitless number of devices on the subnet.  This minimizes the number
   of systems that require human interaction as well as improves
   consistency between all the systems on a subnet.  In the case that
   there is no router to provide this indication, an address for use
   only on the local link will be derived from the interface media layer
   address.





<span class="grey">Van de Velde, et al.         Informational                     [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.3.%20%20Native%20Multicast%20Services"></a><a class="selflink" href="#appendix-A.3" name="appendix-A.3">A.3</a>.  Native Multicast Services</span>

   Multicast services in IPv4 were severely restricted by the limited
   address space available to use for group assignments and an implicit
   locally defined range for group membership.  IPv6 multicast corrects
   this situation by embedding explicit scope indications as well as
   expanding to 4 billion groups per scope.  In the source-specific
   multicast case, this is further expanded to 4 billion groups per
   scope per subnet by embedding the 64 bits of subnet identifier into
   the multicast address.

   IPv6 allows also for innovative usage of the IPv6 address length and
   makes it possible to embed the multicast Rendezvous Point (RP) [<a href="#ref-14" title='"Embedding the Rendezvous Point (RP) Address in an IPv6 Multicast Address"'>14</a>]
   directly in the IPv6 multicast address when using Any-Source
   Multicast (ASM).  This is not possible with the limited size of the
   IPv4 address.  This approach also simplifies the multicast model
   considerably, making it easier to understand and deploy.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.4.%20%20Increased%20Security%20Protection"></a><a class="selflink" href="#appendix-A.4" name="appendix-A.4">A.4</a>.  Increased Security Protection</span>

   The security protection offered by native IPv6 technology is more
   advanced than IPv4 technology.  There are various transport
   mechanisms enhanced to allow a network to operate more securely with
   less performance impact:

   o  IPv6 has the IPsec technology directly embedded into the IPv6
      protocol.  This allows for simpler peer-to-peer authentication and
      encryption, once a simple key/trust management model is developed,
      while the usage of some other less secure mechanisms is avoided
      (e.g., MD5 password hash for neighbor authentication).

   o  While a firewall is specifically designed to disallow applications
      based on local policy, it does not interfere with those that are
      allowed.  This is a security improvement over NAT, where the work-
      arounds to enable applications allowed by local policy are
      effectively architected man-in-the-middle attacks on the packets,
      which precludes end-to-end auditing or IP level identification.

   o  All flows on the Internet will be better traceable due to a unique
      and globally routable source and destination IPv6 address.  This
      may facilitate an easier methodology for back-tracing Denial of
      Service (DoS) attacks and avoid illegal access to network
      resources by simpler traffic filtering.








<span class="grey">Van de Velde, et al.         Informational                     [Page 33]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-34" id="page-34" name="page-34"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


   o  The usage of private address space in IPv6 is now provided by
      Unique Local Addresses, which will avoid conflict situations when
      merging networks and securing the internal communication on a
      local network infrastructure due to simpler traffic filtering
      policy.

   o  The technology to enable source-routing on a network
      infrastructure has been enhanced to allow this feature to
      function, without impacting the processing power of intermediate
      network devices.  The only devices impacted with the source-
      routing will be the source and destination node and the
      intermediate source-routed nodes.  This impact behavior is
      different if IPv4 is used, because then all intermediate devices
      would have had to look into the source route header.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.5.%20%20Mobility"></a><a class="selflink" href="#appendix-A.5" name="appendix-A.5">A.5</a>.  Mobility</span>

   Anytime, anywhere, universal access requires MIPv6 services in
   support of mobile nodes.  While a Home Agent is required for initial
   connection establishment in either protocol version, IPv6 mobile
   nodes are able to optimize the path between them using the MIPv6
   option header, while IPv4 mobile nodes are required to triangle route
   all packets.  In general terms, this will minimize the network
   resources used and maximize the quality of the communication.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.6.%20%20Merging%20Networks"></a><a class="selflink" href="#appendix-A.6" name="appendix-A.6">A.6</a>.  Merging Networks</span>

   When two IPv4 networks want to merge, it is not guaranteed that both
   networks are using different address ranges on some parts of the
   network infrastructure due to the usage of <a href="rfc1918.html">RFC 1918</a> private
   addressing.  This potential overlap in address space may complicate a
   merging of two and more networks dramatically due to the additional
   IPv4 renumbering effort, i.e., when the first network has a service
   running (NTP, DNS, DHCP, HTTP, etc.) that needs to be accessed by the
   second merging network.  Similar address conflicts can happen when
   two network devices from these merging networks want to communicate.

   With the usage of IPv6, the addressing overlap will not exist because
   of the existence of the Unique Local Address usage for private and
   local addressing.











<span class="grey">Van de Velde, et al.         Informational                     [Page 34]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-35" id="page-35" name="page-35"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


Authors' Addresses

   Gunter Van de Velde
   Cisco Systems
   De Kleetlaan 6a
   Diegem  1831
   Belgium

   Phone: +32 2704 5473
   EMail: gunter@cisco.com


   Tony Hain
   Cisco Systems
   500 108th Ave. NE
   Bellevue, Wa.
   USA

   EMail: alh-ietf@tndh.net


   Ralph Droms
   Cisco Systems
   1414 Massachusetts Avenue
   Boxborough, MA  01719
   USA

   EMail: rdroms@cisco.com


   Brian Carpenter
   IBM
   8 Chemin de Blandonnet
   1214 Vernier,
   CH

   EMail: brc@zurich.ibm.com


   Eric Klein
   Tel Aviv University
   Tel Aviv,
   Israel

   EMail: ericlklein.ipv6@gmail.com






<span class="grey">Van de Velde, et al.         Informational                     [Page 35]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-36" id="page-36" name="page-36"> </a>
<span class="grey"><a href="rfc4864.html">RFC 4864</a>           Local Network Protection for IPv6            May 2007</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Van de Velde, et al.         Informational                     [Page 36]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4864 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:39 GMT --></html>