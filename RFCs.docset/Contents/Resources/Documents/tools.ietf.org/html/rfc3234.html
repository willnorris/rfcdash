<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3234 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 07 Jun 2014 20:18:50 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.107" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:3234" name="DC.Identifier"/>
<meta content='This document is intended as part of an IETF discussion about\n"middleboxes" - defined as any intermediary box performing functions\napart from normal, standard functions of an IP router on the data path\nbetween a source host and destination host. This document establishes\na catalogue or taxonomy of middleboxes, cites previous and current\nIETF work concerning middleboxes, and attempts to identify some\npreliminary conclusions. It does not, however, claim to be definitive.\nThis memo provides information for the Internet community.' name="DC.Description.Abstract"/>
<meta content="Brim, Scott W." name="DC.Creator"/>
<meta content="Carpenter, Brian E." name="DC.Creator"/>
<meta content="February, 2002" name="DC.Date.Issued"/>
<meta content="Middleboxes: Taxonomy and Issues" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3234 - Middleboxes: Taxonomy and Issues</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc3234.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc3234" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-carpenter-midtax" title="draft-carpenter-midtax">draft-carpenter-m...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3234" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc3234" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                       B. Carpenter
Request for Comments: 3234                IBM Zurich Research Laboratory
Category: Informational                                          S. Brim
                                                           February 2002


                    <span class="h1">Middleboxes: Taxonomy and Issues</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

Abstract

   This document is intended as part of an IETF discussion about
   "middleboxes" - defined as any intermediary box performing functions
   apart from normal, standard functions of an IP router on the data
   path between a source host and destination host.  This document
   establishes a catalogue or taxonomy of middleboxes, cites previous
   and current IETF work concerning middleboxes, and attempts to
   identify some preliminary conclusions.  It does not, however, claim
   to be definitive.























<span class="grey">Carpenter &amp; Brim             Informational                      [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction and Goals.........................................  <a href="#page-3">3</a>
   <a href="#section-1.1">1.1</a>. Terminology..................................................  <a href="#page-3">3</a>
   <a href="#section-1.2">1.2</a>. The Hourglass Model, Past and Future.........................  <a href="#page-3">3</a>
   <a href="#section-1.4">1.4</a>. Goals of this Document.......................................  <a href="#page-4">4</a>
   <a href="#section-2">2</a>. A catalogue of middleboxes.....................................  <a href="#page-5">5</a>
   <a href="#section-2.1">2.1</a> NAT...........................................................  <a href="#page-6">6</a>
   <a href="#section-2.2">2.2</a> NAT-PT........................................................  <a href="#page-7">7</a>
   <a href="#section-2.3">2.3</a> SOCKS gateway.................................................  <a href="#page-7">7</a>
   <a href="#section-2.4">2.4</a> IP Tunnel Endpoints...........................................  <a href="#page-8">8</a>
   <a href="#section-2.5">2.5</a>. Packet classifiers, markers and schedulers...................  <a href="#page-8">8</a>
   <a href="#section-2.6">2.6</a> Transport relay...............................................  <a href="#page-9">9</a>
   <a href="#section-2.7">2.7</a>. TCP performance enhancing proxies............................ <a href="#page-10">10</a>
   <a href="#section-2.8">2.8</a>. Load balancers that divert/munge packets..................... <a href="#page-10">10</a>
   <a href="#section-2.9">2.9</a>. IP Firewalls................................................. <a href="#page-11">11</a>
   <a href="#section-2.10">2.10</a>. Application Firewalls....................................... <a href="#page-11">11</a>
   <a href="#section-2.11">2.11</a>. Application-level gateways.................................. <a href="#page-12">12</a>
   <a href="#section-2.12">2.12</a>. Gatekeepers/ session control boxes.......................... <a href="#page-12">12</a>
   <a href="#section-2.13">2.13</a>. Transcoders................................................. <a href="#page-12">12</a>
   <a href="#section-2.14">2.14</a>. Proxies..................................................... <a href="#page-13">13</a>
   <a href="#section-2.15">2.15</a>. Caches...................................................... <a href="#page-14">14</a>
   <a href="#section-2.16">2.16</a>. Modified DNS servers........................................ <a href="#page-14">14</a>
   <a href="#section-2.17">2.17</a>. Content and applications distribution boxes................. <a href="#page-15">15</a>
   <a href="#section-2.18">2.18</a>. Load balancers that divert/munge URLs....................... <a href="#page-16">16</a>
   <a href="#section-2.19">2.19</a>. Application-level interceptors.............................. <a href="#page-16">16</a>
   <a href="#section-2.20">2.20</a>. Application-level multicast................................. <a href="#page-16">16</a>
   <a href="#section-2.21">2.21</a>. Involuntary packet redirection.............................. <a href="#page-16">16</a>
   <a href="#section-2.22">2.22</a>. Anonymisers................................................. <a href="#page-17">17</a>
   <a href="#section-2.23">2.23</a>. Not included................................................ <a href="#page-17">17</a>
   <a href="#section-2.24">2.24</a>. Summary of facets........................................... <a href="#page-17">17</a>
   <a href="#section-3">3</a>. Ongoing work in the IETF and elsewhere......................... <a href="#page-18">18</a>
   <a href="#section-4">4</a>. Comments and Issues............................................ <a href="#page-19">19</a>
   <a href="#section-4.1">4.1</a>. The end to end principle under challenge..................... <a href="#page-19">19</a>
   <a href="#section-4.2">4.2</a>. Failure handling............................................. <a href="#page-20">20</a>
   <a href="#section-4.3">4.3</a>. Failures at multiple layers.................................. <a href="#page-21">21</a>
   <a href="#section-4.4">4.4</a>. Multihop application protocols............................... <a href="#page-21">21</a>
   <a href="#section-4.5">4.5</a>. Common features.............................................. <a href="#page-22">22</a>
   <a href="#section-5">5</a>. Security Considerations........................................ <a href="#page-22">22</a>
   <a href="#section-6">6</a>. Acknowledgements............................................... <a href="#page-23">23</a>
   <a href="#section-7">7</a>. References..................................................... <a href="#page-23">23</a>
   Authors' Addresses................................................ <a href="#page-26">26</a>
   Acknowledgement................................................... <a href="#page-26">26</a>
   Full Copyright Statement.......................................... <a href="#page-27">27</a>







<span class="grey">Carpenter &amp; Brim             Informational                      [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20Introduction%20and%20Goals"></a><a class="selflink" href="#section-1" name="section-1">1</a>. Introduction and Goals</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20Terminology"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>. Terminology</span>

   The phrase "middlebox" was coined by Lixia Zhang as a graphic
   description of a recent phenomenon in the Internet.  A middlebox is
   defined as any intermediary device performing functions other than
   the normal, standard functions of an IP router on the datagram path
   between a source host and destination host.

   In some discussions, especially those concentrating on HTTP traffic,
   the word "intermediary" is used.  For the present document, we prefer
   the more graphic phrase.  Of course, a middlebox can be virtual,
   i.e., an embedded function of some other box.  It should not be
   interpreted as necessarily referring to a separate physical box.  It
   may be a device that terminates one IP packet flow and originates
   another, or a device that transforms or diverts an IP packet flow in
   some way, or a combination.  In any case it is never the ultimate
   end-system of an applications session.

   Normal, standard IP routing functions (i.e., the route discovery and
   selection functions described in [<a href="rfc1812.html">RFC 1812</a>], and their equivalent for
   IPv6) are not considered to be middlebox functions; a standard IP
   router is essentially transparent to IP packets.  Other functions
   taking place within the IP layer may be considered to be middlebox
   functions, but functions below the IP layer are excluded from the
   definition.

   There is some discrepancy in the way the word "routing" is used in
   the community.  Some people use it in the narrow, traditional sense
   of path selection based on IP address, i.e., the decision-making
   action of an IP router.  Others use it in the sense of higher layer
   decision-making (based perhaps on a URL or other applications layer
   string).  In either case it implies a choice of outbound direction,
   not the mere forwarding of a packet in the only direction available.
   In this document, the traditional sense is always qualified as "IP
   routing."

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20The%20Hourglass%20Model%2C%20Past%20and%20Future"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>. The Hourglass Model, Past and Future</span>

   The classical description of the Internet architecture is based
   around the hourglass model [<a href="#ref-HOURG" title='"Realizing the Information Future: The Internet and Beyond"'>HOURG</a>] and the end-to-end principle
   [Clark88, Saltzer].  The hourglass model depicts the protocol
   architecture as a narrow-necked hourglass, with all upper layers
   riding over a single IP protocol, which itself rides over a variety
   of hardware layers.





<span class="grey">Carpenter &amp; Brim             Informational                      [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   The end-to-end principle asserts that some functions (such as
   security and reliability) can only be implemented completely and
   correctly end-to-end, with the help of the end points.  The end-to-
   end principle notes that providing an incomplete version of such
   functions in the network itself can sometimes be useful as a
   performance enhancement, but not as a substitute for the end-to-end
   implementation of the function.  The references above, and [RFC
   1958], go into more detail.

   In this architecture, the only boxes in the neck of the hourglass are
   IP routers, and their only function is to determine routes and
   forward packets (while also updating fields necessary for the
   forwarding process).  This is why they are not classed as
   middleboxes.

   Today, we observe deviations from this model, caused by the insertion
   in the network of numerous middleboxes performing functions other
   than IP forwarding.  Viewed in one way, these boxes are a challenge
   to the transparency of the network layer [<a href="rfc2775.html">RFC 2775</a>].  Viewed another
   way, they are a challenge to the hourglass model: although the IP
   layer does not go away, middleboxes dilute its significance as the
   single necessary feature of all communications sessions.  Instead of
   concentrating diversity and function at the end systems, they spread
   diversity and function throughout the network.

   This is a matter of concern for several reasons:

   *  New middleboxes challenge old protocols.  Protocols designed
      without consideration of middleboxes may fail, predictably or
      unpredictably, in the presence of middleboxes.

   *  Middleboxes introduce new failure modes; rerouting of IP packets
      around crashed routers is no longer the only case to consider.
      The fate of sessions involving crashed middleboxes must also be
      considered.

   *  Configuration is no longer limited to the two ends of a session;
      middleboxes may also require configuration and management.

   *  Diagnosis of failures and misconfigurations is more complex.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.4.%20Goals%20of%20this%20Document"></a><a class="selflink" href="#section-1.4" name="section-1.4">1.4</a>. Goals of this Document</span>

   The principle goal of this document is to describe and analyse the
   current impact of middleboxes on the architecture of the Internet and
   its applications.  From this, we attempt to identify some general
   conclusions.




<span class="grey">Carpenter &amp; Brim             Informational                      [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   Goals that might follow on from this work are:

   *  to identify harmful and harmless practices,

   *  to suggest architectural guidelines for application protocol and
      middlebox design,

   *  to identify requirements and dependencies for common functions in
      the middlebox environment,

   *  to derive a system design for standardisation of these functions,

   *  to identify additional work that should be done in the IETF and
      IRTF.

   An implied goal is to identify any necessary updates to the
   Architectural Principles of the Internet [<a href="rfc1958.html">RFC 1958</a>].

   The document initially establishes a catalogue of middleboxes, and
   cites previous or current IETF work concerning middleboxes, before
   proceeding to discussion and conclusions.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20A%20catalogue%20of%20middleboxes"></a><a class="selflink" href="#section-2" name="section-2">2</a>. A catalogue of middleboxes</span>

   The core of this document is a catalogue of a number of types of
   middlebox.  There is no obvious way of classifying them to form a
   hierarchy or other simple form of taxonomy.  Middleboxes have a
   number of facets that might be used to classify them in a
   multidimensional taxonomy.

   DISCLAIMER: These facets, many of distinctions between different
   types of middlebox, and the decision to include or exclude a
   particular type of device, are to some extent subjective.  Not
   everyone who commented on drafts of this document agrees with our
   classifications and descriptions.  We do not claim that the following
   catalogue is mathematically complete and consistent, and in some
   cases purely arbitrary choices have been made, or ambiguity remains.
   Thus, this document makes no claim to be definitive.

   The facets considered are:

   1. Protocol layer.  Does the box act at the IP layer, the transport
      layer, the upper layers, or a mixture?

   2. Explicit versus implicit.  Is the middlebox function an explicit
      design feature of the protocol(s) in use, like an SMTP relay? Or
      is it an add-on not foreseen by the protocol design, probably
      attempting to be invisible, like a network address translator?



<span class="grey">Carpenter &amp; Brim             Informational                      [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   3. Single hop versus multi-hop.  Can there be only one box in the
      path, or can there be several?

   4. In-line versus call-out.  The middlebox function may be executed
      in-line on the datapath, or it may involve a call-out to an
      ancillary box.

   5. Functional versus optimising.  Does the box perform a function
      without which the application session cannot run, or is the
      function only an optimisation?

   6. Routing versus processing.  Does the box simply choose which way
      to send the packets of a session, or does it actually process them
      in some way (i.e., change them or create a side-effect)?

   7. Soft state versus hard state.  If the box loses its state
      information, does the session continue to run in a degraded mode
      while reconstructing necessary state (soft state), or does it
      simply fail (hard state)?

   8. Failover versus restart.  In the event that a hard state box
      fails, is the session redirected to an alternative box that has a
      copy of the state information, or is it forced to abort and
      restart?

   One possible classification is deliberately excluded: "good" versus
   "evil".  While analysis shows that some types of middlebox come with
   a host of complications and disadvantages, no useful purpose would be
   served by simply deprecating them.  They have been invented for
   compelling reasons, and it is instructive to understand those
   reasons.

   The types of box listed below are in an arbitrary order, although
   adjacent entries may have some affinity.  At the end of each entry is
   an attempt to characterise it in terms of the facets identified
   above.  These characterisations should not be interpreted as rigid;
   in many cases they are a gross simplification.

   Note: many types of middlebox may need to perform IP packet
   fragmentation and re-assembly.  This is mentioned only in certain
   cases.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1%20NAT"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a> NAT</span>

   Network Address Translator.  A function, often built into a router,
   that dynamically assigns a globally unique address to a host that
   doesn't have one, without that host's knowledge.  As a result, the
   appropriate address field in all packets to and from that host is



<span class="grey">Carpenter &amp; Brim             Informational                      [Page 6]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   translated on the fly.  Because NAT is incompatible with application
   protocols with IP address dependencies, a NAT is in practice always
   accompanied by an ALG (Application Level Gateway - see below).  It
   also touches the transport layer to the extent of fixing up
   checksums.

   NATs have been extensively analysed in the IETF [RFC 2663, <a href="rfc2993.html">RFC 2993</a>,
   <a href="rfc3022.html">RFC 3022</a>, <a href="rfc3027.html">RFC 3027</a>, etc.]

   The experimental RSIP proposal complements NAT with a dynamic tunnel
   mechanism inserting a stateful RSIP server in place of the NAT
   [<a href="#ref-RSIP" title='"Realm Specific IP: Framework"'>RSIP</a>].

   {1 IP layer, 2 implicit, 3 multihop, 4 in-line, 5 functional, 6
   processing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2%20NAT-PT"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a> NAT-PT</span>

   NAT with Protocol Translator.  A function, normally built into a
   router, that performs NAT between an IPv6 host and an IPv4 network,
   additionally translating the entire IP header between IPv6 and IPv4
   formats.

   NAT-PT itself depends on the Stateless IP/ICMP Translation Algorithm
   (SIIT) mechanism [<a href="rfc2765.html">RFC 2765</a>] for its protocol translation function.
   In practice, SIIT and NAT-PT will both need an associated ALG and
   will need to touch transport checksums.  Due to the permitted absence
   of a UDP checksum in IPv4, translation of fragmented unchecksummed
   UDP from IPv4 to IPv6 is hopeless.  NAT-PT and SIIT also have other
   potential fragmentation/MTU problems, particularly when dealing with
   endpoints that don't do path MTU discovery (or when transiting other
   middleboxes that break path MTU discovery).  ICMP translation also
   has some intractable difficulties.

   NAT-PT is a Proposed Standard from the NGTRANS WG [<a href="rfc2766.html">RFC 2766</a>].  The
   Dual Stack Transition Mechanism adds a second related middlebox, the
   DSTM server [<a href="#ref-DSTM" title='"Dual Stack Transition Mechanism (DSTM)"'>DSTM</a>].

   {1 IP layer, 2 implicit, 3 multihop, 4 in-line, 5 functional, 6
   processing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3%20SOCKS%20gateway"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a> SOCKS gateway</span>

   SOCKSv5 [<a href="rfc1928.html">RFC 1928</a>] is a stateful mechanism for authenticated firewall
   traversal, in which the client host must communicate first with the
   SOCKS server in the firewall before it is able to traverse the
   firewall.  It is the SOCKS server, not the client, that determines
   the source IP address and port number used outside the firewall.  The



<span class="grey">Carpenter &amp; Brim             Informational                      [Page 7]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   client's stack must be "SOCKSified" to take account of this, and
   address-sensitive applications may get confused, rather as with NAT.
   However, SOCKS gateways do not require ALGs.

   SOCKS is maintained by the AFT (Authenticated Firewall Traversal) WG.

   {1 multi-layer, 2 explicit, 3 multihop, 4 in-line, 5 functional, 6
   routing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.4%20IP%20Tunnel%20Endpoints"></a><a class="selflink" href="#section-2.4" name="section-2.4">2.4</a> IP Tunnel Endpoints</span>

   Tunnel endpoints, including virtual private network endpoints, use
   basic IP services to set up tunnels with their peer tunnel endpoints
   which might be anywhere in the Internet.  Tunnels create entirely new
   "virtual" networks and network interfaces based on the Internet
   infrastructure, and thereby open up a number of new services.  Tunnel
   endpoints base their forwarding decisions at least partly on their
   own policies, and only partly if at all on information visible to
   surrounding routers.

   To the extent that they deliver packets intact to their destinations,
   tunnel endpoints appear to follow the end-to-end principle in the
   outer Internet.  However, the destination may be completely different
   from what a router near the tunnel entrance might expect.  Also, the
   per-hop treatment a tunneled packet receives, for example in terms of
   QoS, may not be what it would have received had the packet traveled
   untunneled [<a href="rfc2983.html">RFC2983</a>].

   Tunnels also cause difficulties with MTU size (they reduce it) and
   with ICMP replies (they may lack necessary diagnostic information).

   When a tunnel fails for some reason, this may cause the user session
   to abort, or an alternative IP route may prove to be available, or in
   some cases the tunnel may be re-established automatically.

   {1 multi-layer, 2 implicit, 3 multihop, 4 in-line, 5 functional, 6
   processing, 7 hard, 8 restart or failover}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.5.%20Packet%20classifiers%2C%20markers%20and%20schedulers"></a><a class="selflink" href="#section-2.5" name="section-2.5">2.5</a>. Packet classifiers, markers and schedulers</span>

   Packet classifiers classify packets flowing through them according to
   policy and either select them for special treatment or mark them, in
   particular for differentiated services [Clark95, <a href="rfc2475.html">RFC 2475</a>].  They may
   alter the sequence of packet flow through subsequent hops, since they
   control the behaviour of traffic conditioners.






<span class="grey">Carpenter &amp; Brim             Informational                      [Page 8]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   Schedulers or traffic conditioners (in routers, hosts, or specialist
   boxes inserted in the data path) may alter the time sequence of
   packet flow, the order in which packets are sent, and which packets
   are dropped.  This can significantly impact end-to-end performance.
   It does not, however, fundamentally change the unreliable datagram
   model of the Internet.

   When a classifier or traffic conditioner fails, the user session may
   see any result between complete loss of connectivity (all packets are
   dropped), through best-effort service (all packets are given default
   QOS), up to automatic restoration of the original service level.

   {1 multi-layer, 2 implicit, 3 multihop, 4 in-line, 5 optimising, 6
   processing, 7 soft, 8 failover or restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.6%20Transport%20relay"></a><a class="selflink" href="#section-2.6" name="section-2.6">2.6</a> Transport relay</span>

   Transport relays are basically the transport layer equivalent of an
   ALG; another (less common) name for them is a TLG.  As with ALGs,
   they're used for a variety of purposes, some well established and
   meeting needs not otherwise met.  Early examples of transport relays
   were those that ran on MIT's ITS and TOPS-20 PDP-10s on the ARPANET
   and allowed Chaosnet-only hosts to make outgoing connections from
   Chaosnet onto TCP/IP.  Later there were some uses of TCP-TP4 relays.
   A transport relay between IPv6-only and IPv4-only hosts is one of the
   tools of IPv6 transition [<a href="#ref-TRANS64" title='"Overview of Transition Techniques for IPv6-only to Talk to IPv4-only Communication"'>TRANS64</a>].  TLGs are sometimes used in
   combination with simple packet filtering firewalls to enforce
   restrictions on which hosts can talk to the outside world or to
   kludge around strange IP routing configurations.  TLGs are also
   sometimes used to gateway between two instances of the same transport
   protocol with significantly different connection characteristics; it
   is in this sense that a TLG may also be called a TCP or transport
   spoofer.  In this role, the TLG may shade into being an optimising
   rather than a functional middlebox, but it is distinguished from
   Transport Proxies (next section) by the fact that it makes its
   optimisations only by creating back-to- back connections, and not by
   modification or re-timing of TCP messages.

   Terminating one TCP connection and starting another mid-path means
   that the TCP checksum does not cover the sender's data end-to-end.
   Data corruptions or modifications may be introduced in the processing
   when the data is transferred from the first to the second connection.
   Some TCP relays are split relays and have even more possibility of
   lost data integrity, because the there may be more than two TCP
   connections, and multiple nodes and network paths involved.  In all
   cases, the sender has less than the expected assurance of data
   integrity that is the TCP reliable byte stream service.  Note that




<span class="grey">Carpenter &amp; Brim             Informational                      [Page 9]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   this problem is not unique to middleboxes, but can also be caused by
   checksum offloading TCP implementations within the sender, for
   example.

   In some such cases, other session layer mechanisms such as SSH or
   HTTPS would detect any loss of data integrity at the TCP level,
   leading not to retransmission as with TCP, but to session failure.
   However, there is no general session mechanism to add application
   data integrity so one can detect or mitigate possible lack of TCP
   data integrity.

   {1 Transport layer, 2 implicit, 3 multihop, 4 in-line, 5 functional
   (mainly), 6 routing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.7.%20TCP%20performance%20enhancing%20proxies"></a><a class="selflink" href="#section-2.7" name="section-2.7">2.7</a>. TCP performance enhancing proxies</span>

   "TCP spoofer" is often used as a term for middleboxes that modify the
   timing or action of the TCP protocol in flight for the purposes of
   enhancing performance.  Another, more accurate name is TCP
   performance enhancing proxy (PEP).  Many TCP PEPs are proprietary and
   have been characterised in the open Internet primarily when they
   introduce interoperability errors with standard TCP.  As with TLGs,
   there are circumstances in which a TCP PEP is seen to meet needs not
   otherwise met.  For example, a TCP PEP may provide re-spacing of ACKs
   that have been bunched together by a link with bursty service, thus
   avoiding undesireable data segment bursts.  The PILC (Performance
   Implications of Link Characteristics) working group has analyzed
   types of TCP PEPs and their applicability [<a href="#ref-PILCPEP" title='"Performance Enhancing Proxies Intended to Mitigate Link-Related Degradations"'>PILCPEP</a>].  TCP PEPs can
   introduce not only TCP errors, but also unintended changes in TCP
   adaptive behavior.

   {1 Transport layer, 2 implicit, 3 multihop, 4 in-line, 5 optimising,
   6 routing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.8.%20Load%20balancers%20that%20divert%2Fmunge%20packets."></a><a class="selflink" href="#section-2.8" name="section-2.8">2.8</a>. Load balancers that divert/munge packets.</span>

   There is a variety of techniques that divert packets from their
   intended IP destination, or make that destination ambiguous.  The
   motivation is typically to balance load across servers, or even to
   split applications across servers by IP routing based on the
   destination port number.  Except for rare instances of one-shot UDP
   protocols, these techniques are inevitably stateful as all packets
   from the same application session need to be directed to the same
   physical server.  (However, a sophisticated solution would also be
   able to handle failover.)

   To date these techniques are proprietary and can therefore only be
   applied in closely managed environments.



<span class="grey">Carpenter &amp; Brim             Informational                     [Page 10]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   {1 multi-layer, 2 implicit, 3 single hop, 4 in-line, 5 optimising, 6
   routing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.9.%20IP%20Firewalls"></a><a class="selflink" href="#section-2.9" name="section-2.9">2.9</a>. IP Firewalls</span>

   The simplest form of firewall is a router that screens and rejects
   packets based purely on fields in the IP and Transport headers (e.g.,
   disallow incoming traffic to certain port numbers, disallow any
   traffic to certain subnets, etc.)

   Although firewalls have not been the subject of standardisation, some
   analysis has been done [<a href="rfc2979.html">RFC 2979</a>].

   Although a pure IP firewall does not alter the packets flowing
   through it, by rejecting some of them it may cause connectivity
   problems that are very hard for a user to understand and diagnose.

   "Stateless" firewalls typically allow all IP fragments through since
   they do not contain enough upper-layer header information to make a
   filtering decision.  Many "stateful" firewalls therefore reassemble
   IP fragments (and re-fragment if necessary) in order to avoid leaking
   fragments, particularly fragments that may exploit bugs in the
   reassembly implementations of end receivers.

   {1 IP layer, 2 implicit, 3 multihop, 4 in-line, 5 functional, 6
   routing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.10.%20Application%20Firewalls"></a><a class="selflink" href="#section-2.10" name="section-2.10">2.10</a>. Application Firewalls</span>

   Application-level firewalls act as a protocol end point and relay
   (e.g., an SMTP client/server or a Web proxy agent).  They may

      (1) implement a "safe" subset of the protocol,

      (2) perform extensive protocol validity checks,

      (3) use an implementation methodology designed to minimize the
          likelihood of bugs,

      (4) run in an insulated, "safe" environment, or

      (5) use some combination of these techniques in tandem.

   Although firewalls have not been the subject of standardisation, some
   analysis has been done [<a href="rfc2979.html">RFC 2979</a>].  The issue of firewall traversal
   using HTTP has been discussed [<a href="#ref-HTTPSUB" title='"On the use of HTTP as a Substrate"'>HTTPSUB</a>].





<span class="grey">Carpenter &amp; Brim             Informational                     [Page 11]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   {1 Application layer, 2 implicit, 3 multihop, 4 in-line, 5
   functional, 6 processing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.11.%20Application-level%20gateways"></a><a class="selflink" href="#section-2.11" name="section-2.11">2.11</a>. Application-level gateways</span>

   These come in many shapes and forms.  NATs require ALGs for certain
   address-dependent protocols such as FTP; these do not change the
   semantics of the application protocol, but carry out mechanical
   substitution of fields.  At the other end of the scale, still using
   FTP as an example, gateways have been constructed between FTP and
   other file transfer protocols such as the OSI and DECnet (R)
   equivalents.  In any case, such gateways need to maintain state for
   the sessions they are handling, and if this state is lost, the
   session will normally break irrevocably.

   Some ALGs are also implemented in ways that create fragmentation
   problems, although in this case the problem is arguably the result of
   a deliberate layer violation (e.g., mucking with the application data
   stream of an FTP control connection by twiddling TCP segments on the
   fly).

   {1 Application layer, 2 implicit or explicit, 3 multihop, 4 in-line,
   5 functional, 6 processing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.12.%20Gatekeepers%2F%20session%20control%20boxes"></a><a class="selflink" href="#section-2.12" name="section-2.12">2.12</a>. Gatekeepers/ session control boxes</span>

   Particularly with the rise of IP Telephony, the need to create and
   manage sessions other than TCP connections has arisen.  In a
   multimedia environment that has to deal with name lookup,
   authentication, authorization, accounting, firewall traversal, and
   sometimes media conversion, the establishment and control of a
   session by a third-party box seems to be the inevitable solution.
   Examples include H.323 gatekeepers [<a href="#ref-H323" title='"Packet Based Multimedia Communication Systems"'>H323</a>], SIP servers [<a href="rfc2543.html">RFC 2543</a>] and
   MEGACO controllers [<a href="rfc3015.html">RFC 3015</a>].

   {1 Application layer, 2 explicit, 3 multihop, 4 in-line or call-out,
   5 functional, 6 processing, 7 hard, 8 restart?}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.13.%20Transcoders"></a><a class="selflink" href="#section-2.13" name="section-2.13">2.13</a>. Transcoders</span>

   Transcoders are boxes performing some type of on-the-fly conversion
   of application level data.  Examples include the transcoding of
   existing web pages for display on hand-held wireless devices, and
   transcoding between various audio formats for interconnecting digital
   mobile phones with voice-over-IP services.  In many cases, such
   transcoding cannot be done by the end-systems, and at least in the
   case of voice, it must be done in strict real time with extremely
   rapid failure recovery.



<span class="grey">Carpenter &amp; Brim             Informational                     [Page 12]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   Not all media translators are mandatory.  They may simply be an
   optimisation.  For example, in the case of multicast, if all the
   low-bandwidth receivers sit in one "corner" of the network, it would
   be inefficient for the sender to generate two streams or send both
   stream all the way across the network if the "thin" one is only
   needed far away from the sender.  Generally, media translators are
   only useful if the two end systems don't have overlapping codecs or
   if the overlapping set is not a good network match.

   {1 Application layer, 2 explicit or implicit, 3 single hop, 4 in-
   line, 5 functional, 6 processing, 7 hard?, 8 restart or failover}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.14.%20Proxies"></a><a class="selflink" href="#section-2.14" name="section-2.14">2.14</a>. Proxies</span>

   HTTP1.1 [<a href="rfc2616.html">RFC 2616</a>] defines a Web proxy as follows:

      "An intermediary program which acts as both a server and a client
      for the purpose of making requests on behalf of other clients.
      Requests are serviced internally or by passing them on, with
      possible translation, to other servers.  A proxy MUST implement
      both the client and server requirements of this specification.  A
      "transparent proxy" is a proxy that does not modify the request or
      response beyond what is required for proxy authentication and
      identification.  A "non-transparent proxy" is a proxy that
      modifies the request or response in order to provide some added
      service to the user agent, such as group annotation services,
      media type transformation, protocol reduction, or anonymity
      filtering."

   A Web proxy may be associated with a firewall, when the firewall does
   not allow outgoing HTTP packets.  However, HTTP makes the use of a
   proxy "voluntary": the client must be configured to use the proxy.

   Note that HTTP proxies do in fact terminate an IP packet flow and
   recreate another one, but they fall under the definition of
   "middlebox" given in <a href="#section-1.1">Section 1.1</a> because the actual applications
   sessions traverse them.

   SIP proxies [<a href="rfc2543.html">RFC 2543</a>] also raise some interesting issues, since they
   can "bend" the media pipe to also serve as media translators.  (A
   proxy can modify the session description so that media no longer
   travel end-to-end but to a designated intermediate box.)

   {1 Application layer, 2 explicit (HTTP) or implicit (interception), 3
   multihop, 4 in-line, 5 functional, 6 processing, 7 soft, 8 restart}.






<span class="grey">Carpenter &amp; Brim             Informational                     [Page 13]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   Note: Some so-called Web proxies have been implemented as
   "interception" devices that intercept HTTP packets and re-issue them
   with their own source address; like NAT and SOCKs, this can disturb
   address-sensitive applications.  Unfortunately some vendors have
   caused confusion by mis-describing these as "transparent" proxies.
   Interception devices are anything but transparent.  See [<a href="#ref-WREC" title='"Internet Web Replication and Caching Taxonomy"'>WREC</a>] for a
   full discussion.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.15.%20Caches"></a><a class="selflink" href="#section-2.15" name="section-2.15">2.15</a>. Caches</span>

   Caches are of course used in many shapes and forms in the Internet,
   and are in principle distinct from proxies.  Here we refer mainly to
   content caches, intended to optimise user response times.  HTTP makes
   provision for proxies to act as caches, by providing for both
   expiration and re-validation mechanisms for cached content.  These
   mechanisms may be used to guarantee that specific content is not
   cached, which is a requirement for transient content, particularly in
   transactional applications.  HTTP caching is well described in
   <a href="rfc2616.html#section-13">SectionÂ 13 of [RFC 2616]</a>, and in the HTTP case caches and proxies are
   inextricably mixed.

   To improve optimisation, caching is not uniquely conducted between
   the origin server and the proxy cache directly serving the user.  If
   there is a network of caches, the nearest copy of the required
   content may be in a peer cache.  For this an inter-cache protocol is
   required.  At present the most widely deployed solution is Internet
   Cache Protocol (ICP) [<a href="rfc2186.html">RFC 2186</a>] although there have been alternative
   proposals such as [<a href="rfc2756.html">RFC 2756</a>].

   It can be argued that caches terminate the applications sessions, and
   should not be counted as middleboxes (any more than we count SMTP
   relays).  However, we have arbitrarily chosen to include them since
   they do in practice re-issue the client's HTTP request in the case of
   a cache miss, and they are not the ultimate source of the application
   data.

   {1 Application layer, 2 explicit (if HTTP proxy caches), 3 multihop,
   4 in-line, 5 functional, 6 processing, 7 soft, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.16.%20Modified%20DNS%20servers"></a><a class="selflink" href="#section-2.16" name="section-2.16">2.16</a>. Modified DNS servers</span>

   DNS servers can play games.  As long as they appear to deliver a
   syntactically correct response to every query, they can fiddle the
   semantics.  For example, names can be made into "anycast" names by
   arranging for them to resolve to different IP addresses in different
   parts of the network.  Or load can be shared among different members
   of a server farm by having the local DNS server return the address of




<span class="grey">Carpenter &amp; Brim             Informational                     [Page 14]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   different servers in turn.  In a NAT environment, it is not uncommon
   for the FQDN-to-address mapping to be quite different outside and
   inside the NAT ("two-faced DNS").

   Modified DNS servers are not intermediaries in the application data
   flow of interest.  They are included here because they mean that
   independent sessions that at one level appear to involve a single
   host actually involve multiple hosts, which can have subtle effects.
   State created in host A.FOR.EXAMPLE by one session may turn out not
   to be there when a second session apparently to the same host is
   started, because the DNS server has directed the second session
   elsewhere.

   If such a DNS server fails, users may fail over to an alternate DNS
   server that doesn't know the same tricks, with unpredicatble results.

   {1 Application layer, 2 implicit, 3 multihop, 4 in-line (on DNS query
   path), 5 functional or optimising, 6 processing, 7 soft, 8 failover}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.17.%20Content%20and%20applications%20distribution%20boxes"></a><a class="selflink" href="#section-2.17" name="section-2.17">2.17</a>. Content and applications distribution boxes</span>

   An emerging generalisation of caching is content distribution and
   application distribution.  In this model, content (such as static web
   content or streaming multimedia content) is replicated in advance to
   many widely distributed servers.  Further, interactive or even
   transactional applications may be remotely replicated, with some of
   their associated data.  Since this is a recent model, it cannot be
   said that there is an industry standard practice in this area.  Some
   of the issues are discussed in [<a href="#ref-WREC" title='"Internet Web Replication and Caching Taxonomy"'>WREC</a>] and several new IETF activities
   have been proposed in this area.

   Content distribution solutions tend to play with URLs in one way or
   another, and often involve a system of middleboxes - for example
   using HTTP redirects to send a request for WWW.EXAMPLE.COM off to
   WWW.EXAMPLE.NET, where the latter name may be an "anycast" name as
   mentioned above, and will actually resolve in DNS to the nearest
   instance of a content distribution box.

   As with caches, it is an arbitrary choice to include these devices,
   on the grounds that although they terminate the client session, they
   are not the ultimate origin of the applications data.

   {1 Application layer, 2 implicit or explicit, 3 multihop, 4 in-line
   or call-out, 5 optimising, 6 routing or processing, 7 soft, 8
   restart?}






<span class="grey">Carpenter &amp; Brim             Informational                     [Page 15]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.18.%20Load%20balancers%20that%20divert%2Fmunge%20URLs"></a><a class="selflink" href="#section-2.18" name="section-2.18">2.18</a>. Load balancers that divert/munge URLs</span>

   Like DNS tricks, URL redirects can be used to balance load among a
   pool of servers - essentially a local version of a content
   distribution network.  Alternatively, an HTTP proxy can rewrite HTTP
   requests to direct them to a particular member of a pool of servers.

   These devices are included as middleboxes because they divert an
   applications session in an arbitrary way.

   {1 Application layer, 2 explicit, 3 single hop, 4 in-line, 5
   functional, 6 routing, 7 soft, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.19.%20Application-level%20interceptors"></a><a class="selflink" href="#section-2.19" name="section-2.19">2.19</a>. Application-level interceptors</span>

   Some forms of pseudo-proxy intercept HTTP packets and deliver them to
   a local proxy server instead of forwarding them to the intended
   destination.  Thus the destination IP address in the packet is
   ignored.  It is hard to state whether this is a functional box (i.e.,
   a non-standard proxy) or an optimising box (i.e., a way of forcing
   the user to use a cache).  Like any non-standard proxy, it has
   undefined consequences in the case of dynamic or non-cacheable
   content.

   {1 Application layer, 2 implicit, 3 single hop, 4 in-line, 5
   functional or optimising, 6 routing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.20.%20Application-level%20multicast"></a><a class="selflink" href="#section-2.20" name="section-2.20">2.20</a>. Application-level multicast</span>

   Some (mainly proprietary) applications, including some approaches to
   instant messaging, use an application-level mechanism to replicate
   packets to multiple destinations.

   An example is given in [<a href="#ref-CHU" title="and H. Zhang">CHU</a>].

   {1 Application layer, 2 explicit, 3 multihop, 4 in-line, 5
   functional, 6 routing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.21.%20Involuntary%20packet%20redirection"></a><a class="selflink" href="#section-2.21" name="section-2.21">2.21</a>. Involuntary packet redirection</span>

   There appear to be a few instances of boxes that (based on
   application level content or other information above the network
   layer) redirect packets for functional reasons.  For example, more
   than one "high speed Internet" service offered in hotel rooms
   intercepts initial HTTP requests and diverts them to an HTTP server
   that demands payment before opening access to the Internet.  These
   boxes usually also perform NAT functions.




<span class="grey">Carpenter &amp; Brim             Informational                     [Page 16]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   {1 multi-layer, 2 implicit, 3 single hop, 4 call-out, 5 functional, 6
   routing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.22.%20Anonymisers"></a><a class="selflink" href="#section-2.22" name="section-2.22">2.22</a>. Anonymisers</span>

   Anonymiser boxes can be implemented in various ways that hide the IP
   address of the data sender or receiver.  Although the implementation
   may be distinct, this is in practice very similar to a NAT plus ALG.

   {1 multi-layer, 2 implicit or explicit, 3 multihop, 4 in-line, 5
   functional, 6 processing, 7 hard, 8 restart}

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.23.%20Not%20included"></a><a class="selflink" href="#section-2.23" name="section-2.23">2.23</a>. Not included</span>

   Some candidates suggested for the above list were excluded for the
   reasons given below.  In general, they do not fundamentally change
   the architectural model of packet delivery from source to
   destination.

   Bridges and switches that snoop ARP, IGMP etc.  These are below the
   IP layer, but use a layer violation to emulate network layer
   functions.  They do not change IP layer functions.

   Wiretaps and snoopers in general - if they are working correctly,
   they have no impact on traffic, so do not require analysis.

   Mobile IP home agents are intended to assist packet delivery to the
   originally desired destination, so they are excluded on the same
   grounds as standard routers.

   Relays in interplanetary networks - although these would certainly
   appear to be middleboxes, they are not currently deployed.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.24.%20Summary%20of%20facets"></a><a class="selflink" href="#section-2.24" name="section-2.24">2.24</a>. Summary of facets</span>

   By tabulating the rough classifications above, we observe that of the
   22 classes of middlebox described:

   17 are application or multi-layer
   16 are implicit (and others are explicit OR implicit)
   17 are multi-hop
   21 are in-line; call-out is rare
   18 are functional; pure optimisation is rare
   Routing &amp; processing are evenly split
   16 have hard state
   21 must restart session on failure





<span class="grey">Carpenter &amp; Brim             Informational                     [Page 17]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   We can deduce that current types of middlebox are predominantly
   application layer devices not designed as part of the relevant
   protocol, performing required functions, maintaining hard state, and
   aborting user sessions when they crash.  Indeed this represents a
   profound challenge to the end-to-end hourglass model.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20Ongoing%20work%20in%20the%20IETF%20and%20elsewhere"></a><a class="selflink" href="#section-3" name="section-3">3</a>. Ongoing work in the IETF and elsewhere</span>

   Apart from work cited in references above, current or planned work in
   the IETF includes:

   MIDCOM - a working group with focus on the architectural framework
   and the requirements for the protocol between a requesting device and
   a middlebox and the architectural framework for the interface between
   a middlebox and a policy entity [<a href="#ref-MIDFRAME" title='"Middlebox Communication: Framework and Requirements"'>MIDFRAME</a>, <a href="#ref-MIDARCH" title='"A Middlebox Architectural Framework"'>MIDARCH</a>].  This may
   interact with session control issues [<a href="#ref-SIPFIRE" title='"Framework Draft for Networked Appliances Using the Session Initiation Protocol"'>SIPFIRE</a>].

   Work is also proceeding outside the MIDCOM group on middlebox
   discovery [<a href="#ref-MIDDISC" title='"Requirements for Discovering Middleboxes"'>MIDDISC</a>].

   WEBI (Web Intermediaries) - a working group that addresses specific
   issues in the world wide web infrastructure (as identified by the
   WREC working group), by providing generic mechanisms which are useful
   in several application domains (e.g., proxies, content delivery
   surrogates).  Specific mechanisms will be Intermediary Discovery and
   Description and a Resource Update Protocol.

   Intermediaries are also an important focus in the development of XML
   Protocol by the World-Wide Web Consortium, who have published an
   interesting analysis [<a href="#ref-XMLPI" title="Mark Nottingham">XMLPI</a>].

   OPES (Open Pluggable Extension Services) - a proposed  working group
   whose output will enable construction of services executed on
   application data by participating transit intermediaries.  Caching is
   the most basic intermediary service, one that requires a basic
   understanding of application semantics by the cache server.

   CDI (Content Distribution Internetworking) is a potential working
   group for allowing cooperation between different Content Distribution
   Networks and cache clusters [<a href="#ref-CDNP" title='"A Model for Content Internetworking (CDI)"'>CDNP</a>].

   RSERPOOL (Reliable Server Pooling) is a working group that will
   define architecture and requirements for management and access to
   server pools, including requirements from a variety of applications,
   building blocks and interfaces, different styles of pooling, security
   requirements and performance requirements, such as failover times and
   coping with heterogeneous latencies.




<span class="grey">Carpenter &amp; Brim             Informational                     [Page 18]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20Comments%20and%20Issues"></a><a class="selflink" href="#section-4" name="section-4">4</a>. Comments and Issues</span>

   A review of the list in <a href="#section-2">Section 2</a> suggests that middleboxes fit into
   one or more of three broad categories:

   1) mechanisms to connect dissimilar networks to enable cross-protocol
      interoperability;

   2) mechanisms to separate similar networks into zones, especially
      security zones;

   3) performance enhancement.

   As observed in [<a href="rfc2775.html">RFC 2775</a>], the rise of middleboxes puts into question
   the general applicability of the end-to-end principle [<a href="rfc1958.html">RFC 1958</a>].
   Middleboxes introduce dependencies and hidden points of failure that
   violate the fate-sharing aspect of the end-to-end principle.  Can we
   define architectural principles that guarantee robustness in the
   presence of middleboxes?

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20The%20end%20to%20end%20principle%20under%20challenge"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>. The end to end principle under challenge</span>

   Many forms of middlebox are explicitly addressed at the IP level, and
   terminate a transport connection (or act as a final destination for
   UDP packets) in a normal way.  Although they are potential single
   points of failure, they do not otherwise interfere with the end to
   end principle [<a href="rfc1958.html">RFC 1958</a>].  (This statement does not apply to
   transport relays or TCP spoofers; they do not terminate a transport
   connection at the expected destination in the normal way.)

   However, there is a general feeling that middleboxes that divert an
   IP packet from its intended destination, or substantively modify its
   content on the fly, are fundamentally different from those that
   correctly terminate a transport connection and carry out their
   manipulations at applications level.  Such diversion or modification
   violates the basic architectural assumption that packets flow from
   source to destination essentially unchanged (except for time-to-live
   and QOS-related fields).  The effects of such changes on transport
   and applications is unpredictable in the general case.  Much of the
   analysis that applies to NAT [RFC 2993, <a href="rfc3027.html">RFC 3027</a>] will also apply to
   RSIP, NAT-PT, DSTM, SOCKS, and involuntary packet redirectors.
   Interception proxies, anonymisers, and some types of load balancer
   can also have subtle effects on address-sensitive applications, when
   they cause packets to be delivered to or from a different address.
   Transport relays and TCP spoofers may deceive applications by
   delivering an unreliable service on a TCP socket.





<span class="grey">Carpenter &amp; Brim             Informational                     [Page 19]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   We conclude that:

      Although the rise of middleboxes has negative impact on the end to
      end principle at the packet level, it does not nullify it as a
      useful or desirable principle of applications protocol design.
      However, future application protocols should be designed in
      recognition of the likely presence of network address translation,
      packet diversion, and packet level firewalls, along the data path.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20Failure%20handling"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>. Failure handling</span>

   If a middlebox fails, it is desirable that the effect on sessions
   currently in progress should be inconvenient rather than
   catastrophic.  There appear to be three approaches to achieve this:

      Soft state mechanisms.  The session continues in the absence of
      the box, probably with reduced performance, until the necessary
      session state is recreated automatically in an alternative box (or
      the original one, restarted).  In other words the state
      information optimises the user session but is not essential.  An
      example might be a true caching mechanism, whose temporary failure
      only reduces performance.

      Rapid failover mechanisms.  The session is promptly redirected to
      a hot spare box, which already has a copy of the necessary session
      state.

      Rapid restart mechanisms.  The two ends of the session promptly
      detect the failure and themselves restart the session via a spare
      box, without being externally redirected.  Enough session state is
      kept at each end to recover from the glitch.

   It appears likely that "optimising" middleboxes are suitable
   candidates for the soft state approach and for non-real-time data
   streams, since the consequence of failure of the box is not
   catastrophic for the user.  (Configured HTTP proxies used as caches
   are an awkward case, as their failure causes client failure.)  On the
   other hand, "functional" middleboxes must be present for the session
   to continue, so they are candidates for rapid failover or rapid
   restart mechanisms.  We conclude that:

      Middlebox design should include a clear mechanism for dealing with
      failure.








<span class="grey">Carpenter &amp; Brim             Informational                     [Page 20]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20Failures%20at%20multiple%20layers"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>. Failures at multiple layers</span>

   Difficulties occur when middlebox functions occur at different
   layers, for example the following situation, where B and C are not in
   the same physical box:

      Apps layer:     A ------------------------&gt; C ------&gt; D

      Lower layer:    A -----&gt; B -------------------------&gt; D

   When all is well, i.e., there is an IP path from A to B to C to D and
   both B and C are working, this may appear quite workable.  But the
   failure modes are very challenging.  For example, if there is a
   network failure between C and D, how is B instructed to divert the
   session to a backup box for C?.  Since C and B function at different
   protocol layers, there is no expectation that they will have
   coordinated failure recovery mechanisms.  Unless this is remedied in
   some general way, we conclude that

      Middlebox failure recovery mechanisms cannot currently assume they
      will get any help from other layers, and must have their own means
      of dealing with failures in other layers.

      In the long term future, we should be able to state clearly for
      each middlebox function what it expects from its environment, and
      make recommendations about which middlebox functions should be
      bound together if deployed.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20Multihop%20application%20protocols"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>. Multihop application protocols</span>

   We can also observe that protocols such as SMTP, UUCP, and NNTP have
   always worked hop-by-hop, i.e., via multiple middleboxes.  Nobody
   considers this to be an issue or a problem.  Difficulties arise when
   inserting a middlebox in an application protocol stream that was not
   designed for it.  We conclude that:

      New application protocol designs should include explicit
      mechanisms for the insertion of middleboxes, and should consider
      the facets identified in <a href="#section-2">Section 2</a> above as part of the design.

   A specific challenge is how to make interactive or real-time
   applications ride smoothly over middleboxes.  This will put
   particular stress on the failure handling aspects.








<span class="grey">Carpenter &amp; Brim             Informational                     [Page 21]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20Common%20features"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>. Common features</span>

   Given that the IP layer - the neck of the hourglass - is no longer
   alone in its role supporting end-to-end connectivity, it would be
   desirable to define requirements and features that are common to
   middlebox intermediaries.  It would then be possible to implement
   middleboxes, and in particular the protocols that communicate with
   them, fully from the stance of supporting the end-to-end principle.
   Conceptually, this would extend the neck of the hourglass upwards to
   include a set of common features available to all (or many)
   applications.  In the context of middleboxes and multihop protocols,
   this would require common features addressing at least:

      Middlebox discovery and monitoring
      Middlebox configuration and control
      Call-out
      Routing preferences
      Failover and restart handling
      Security, including mutual authentication

   As far as possible, the solutions in these areas being developed in
   the IETF and W3C should be sufficiently general to cover all types of
   middlebox; if not, the work will be done several times.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20Security%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>. Security Considerations</span>

   Security risks are specific to each type of middlebox, so little can
   be said in general.  Of course, adding extra boxes in the
   communication path creates extra points of attack, reduces or
   eliminates the ability to perform end to end encryption, and
   complicates trust models and key distribution models.  Thus, every
   middlebox design requires particular attention to security analysis.
   A few general points can be made:

   1. The interference with end-to-end packet transmission by many types
      of middlebox is a crippling impediment to generalised use of IPSEC
      in its present form, and also invalidates transport layer security
      in many scenarios.

   2. Middleboxes require us to move definitively from a two-way to an
      N-way approach to trust relationships and key sharing.

   3. The management and configuration mechanisms of middleboxes are a
      tempting point of attack, and must be strongly defended.

   These points suggest that we need a whole new approach to security
   solutions as the middlebox paradigm ends up being deployed in lots of
   different technologies, if only to avoid each new technology



<span class="grey">Carpenter &amp; Brim             Informational                     [Page 22]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   designing a end-to-end security solution appropriate to its
   particular impact on the data stream.

   Additionally, content caches and content distribution mechanisms
   raise the issue of access control for content that is subject to
   copyright or other rights.  Distributed authentication, authorisation
   and accounting are required.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20Acknowledgements"></a><a class="selflink" href="#section-6" name="section-6">6</a>. Acknowledgements</span>

   Steve Bellovin, Jon Crowcroft, Steve Deering, Patrik Faltstrom,
   Henning Schulzrinne, and Lixia Zhang all gave valuable feedback on
   early versions of this document.  Rob Austein and Allison Mankin
   drafted the text on transport relays and TCP spoofers, and Rob
   Austein made other substantial contributions.  Participants in the
   MIDTAX BOF at the 50th IETF and on the MIDTAX mailing list, including
   Harald Alverstrand, Stanislav Shalunov, Michael Smirnov, Jeff Parker,
   Sandy Murphy, David Martin, Phil Neumiller, Eric Travis, Ed Bowen,
   Sally Floyd, Ian Cooper, Mike Fisk and Eric Fleischman gave
   invaluable input.  Mark Nottingham brought the W3C work to our
   attention.  Melinda Shore suggested using a facet-based
   categorization.  Patrik Faltstrom inspired <a href="#section-4.3">section 4.3</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20References"></a><a class="selflink" href="#section-7" name="section-7">7</a>. References</span>

   [<a id="ref-RFC 1812" name="ref-RFC 1812">RFC 1812</a>] Baker, F., "Requirements for IP Version 4 Routers", <a href="rfc1812.html">RFC</a>
              <a href="rfc1812.html">1812</a>, June 1995.

   [<a id="ref-RFC 1928" name="ref-RFC 1928">RFC 1928</a>] Leech, M., Ganis, M., Lee, Y., Kuris, R., Koblas, D. and
              L. Jones, "SOCKS Protocol Version 5", March 1996.

   [<a id="ref-RFC 1958" name="ref-RFC 1958">RFC 1958</a>] Carpenter, B., "Architectural Principles of the Internet",
              <a href="rfc1958.html">RFC 1958</a>, June 1996.

   [<a id="ref-RFC 2186" name="ref-RFC 2186">RFC 2186</a>] Wessels, D. and K. Claffy, "Internet Cache Protocol (ICP),
              version 2", <a href="rfc2186.html">RFC 2186</a>, September 1997.

   [<a id="ref-RFC 2475" name="ref-RFC 2475">RFC 2475</a>] Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.
              and W. Weiss, "An Architecture for Differentiated
              Service", <a href="rfc2475.html">RFC 2475</a>, December 1998.

   [<a id="ref-RFC 2543" name="ref-RFC 2543">RFC 2543</a>] Handley, M., Schulzrinne, H., Schooler, E. and J.
              Rosenberg, "SIP: Session Initiation Protocol", <a href="rfc2543.html">RFC 2543</a>,
              March 1999.

   [<a id="ref-RFC 2616" name="ref-RFC 2616">RFC 2616</a>] Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,
              Masinter, L., Leach, P. and T. Berners-Lee, "Hypertext
              Transfer Protocol -- HTTP/1.1", <a href="rfc2616.html">RFC 2616</a>, June 1999.



<span class="grey">Carpenter &amp; Brim             Informational                     [Page 23]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   [<a id="ref-RFC 2663" name="ref-RFC 2663">RFC 2663</a>] Srisuresh, P. and M. Holdrege, "IP Network Address
              Translator (NAT) Terminology and Considerations", <a href="rfc2663.html">RFC</a>
              <a href="rfc2663.html">2663</a>, August 1999.

   [<a id="ref-RFC 2756" name="ref-RFC 2756">RFC 2756</a>] Vixie, P. and D. Wessels, "Hyper Text Caching Protocol
              (HTCP/0.0)", <a href="rfc2756.html">RFC 2756</a>, January 2000.

   [<a id="ref-RFC 2766" name="ref-RFC 2766">RFC 2766</a>] Tsirtsis, G. and P. Srisuresh, "Network Address
              Translation - Protocol Translation (NAT-PT)", <a href="rfc2766.html">RFC 2766</a>,
              February 2000.

   [<a id="ref-RFC 2775" name="ref-RFC 2775">RFC 2775</a>] Carpenter, B., "Internet Transparency", <a href="rfc2775.html">RFC 2775</a>, February
              2000.

   [<a id="ref-RFC 2979" name="ref-RFC 2979">RFC 2979</a>] Freed, N., "Behavior of and Requirements for Internet
              Firewalls", <a href="rfc2979.html">RFC 2979</a>, October 2000.

   [<a id="ref-RFC 2983" name="ref-RFC 2983">RFC 2983</a>] Black, D., "Differentiated Services and Tunnels", <a href="rfc2983.html">RFC</a>
              <a href="rfc2983.html">2983</a>, October 2000.

   [<a id="ref-RFC 2993" name="ref-RFC 2993">RFC 2993</a>] Hain, T., "Architectural Implications of NAT", <a href="rfc2993.html">RFC 2993</a>,
              November 2000.

   [<a id="ref-RFC 3015" name="ref-RFC 3015">RFC 3015</a>] Cuervo, F., Greene, N., Rayhan, A., Huitema, C., Rosen, B.
              and J. Segers, "Megaco Protocol 1.0", <a href="rfc3015.html">RFC 3015</a>, November
              2000.

   [<a id="ref-RFC 3022" name="ref-RFC 3022">RFC 3022</a>] Srisuresh, P. and K. Egevang, "Traditional IP Network
              Address Translator (Traditional NAT)", <a href="rfc3022.html">RFC 3022</a>, January
              2001.

   [<a id="ref-RFC 3027" name="ref-RFC 3027">RFC 3027</a>] Holdrege, M. and P. Srisuresh, "Protocol Complications
              with the IP Network Address Translator", <a href="rfc3027.html">RFC 3027</a>, January
              2001.

   [<a id="ref-CHU" name="ref-CHU">CHU</a>]      Y. Chu, S. Rao, and H. Zhang, A Case for End System
              Multicast, SIGMETRICS, June 2000.
              <a href="http://citeseer.nj.nec.com/chu00case.html">http://citeseer.nj.nec.com/chu00case.html</a>

   [<a id="ref-CLARK88" name="ref-CLARK88">CLARK88</a>]  The Design Philosophy of the DARPA Internet Protocols,
              D.D.Clark, Proc SIGCOMM 88, ACM CCR Vol 18, Number 4,
              August 1988, pages 106-114 (reprinted in ACM CCR Vol 25,
              Number 1, January 1995, pages 102-111).

   [<a id="ref-CLARK95" name="ref-CLARK95">CLARK95</a>]  "Adding Service Discrimination to the Internet", D.D.
              Clark, Proceedings of the 23rd Annual Telecommunications
              Policy Research Conference (TPRC), Solomons, MD, October
              1995.



<span class="grey">Carpenter &amp; Brim             Informational                     [Page 24]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   [<a id="ref-CDNP" name="ref-CDNP">CDNP</a>]     M. Day, et al., "A Model for Content Internetworking
              (CDI)", Work in Progress.

   [<a id="ref-DSTM" name="ref-DSTM">DSTM</a>]     J. Bound, L. Toutain, F. Dupont, O. Medina, H. Afifi, A.
              Durand, "Dual Stack Transition Mechanism (DSTM)", Work in
              Progress.

   [<a id="ref-H323" name="ref-H323">H323</a>]     ITU-T Recommendation H.323: "Packet Based Multimedia
              Communication Systems".

   [<a id="ref-HOURG" name="ref-HOURG">HOURG</a>]    "Realizing the Information Future: The Internet and
              Beyond", Computer Science and Telecommunications Board,
              National Research Council, Washington, D.C., National
              Academy Press, 1994. However, the "hourglass" metaphor was
              first used by John Aschenbrenner in 1979, with reference
              to the ISO Open Systems Interconnection model.

   [<a id="ref-HTTPSUB" name="ref-HTTPSUB">HTTPSUB</a>]  Moore, K., "On the use of HTTP as a Substrate", <a href="http://tools.ietf.org/html/bcp56">BCP 56</a>,
              <a href="rfc3205.html">RFC 3205</a>, February 2002.

   [<a id="ref-MIDARCH" name="ref-MIDARCH">MIDARCH</a>]  E. Lear, <a href="http://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22A+Middlebox+Architectural+Framework%22" style="text-decoration: none">"A Middlebox Architectural Framework"</a>, Work in
              Progress.

   [<a id="ref-MIDDISC" name="ref-MIDDISC">MIDDISC</a>]  E. Lear, <a href="http://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22Requirements+for+Discovering+Middleboxes%22" style="text-decoration: none">"Requirements for Discovering Middleboxes"</a>, Work
              in Progress.

   [<a id="ref-MIDFRAME" name="ref-MIDFRAME">MIDFRAME</a>] P. Srisuresh, J. Kuthan, J. Rosenberg, A. Molitor, A.
              Rayhan, "Middlebox Communication: Framework and
              Requirements", Work in Progress.

   [<a id="ref-PILCPEP" name="ref-PILCPEP">PILCPEP</a>]  Border, J., Kojo, M., Griner, J., Montenegro, G. and Z.
              Shelby, "Performance Enhancing Proxies Intended to
              Mitigate Link-Related Degradations", <a href="rfc3135.html">RFC 3135</a>, June 2001.

   [<a id="ref-RSIP" name="ref-RSIP">RSIP</a>]     Borella, M., Lo, J., Grabelsky, D. and G. Montenegro,
              "Realm Specific IP: Framework", <a href="rfc3102.html">RFC 3102</a>, October 2001.

   [<a id="ref-SALTZER" name="ref-SALTZER">SALTZER</a>]  End-To-End Arguments in System Design, J.H. Saltzer,
              D.P.Reed, D.D.Clark, ACM TOCS, Vol 2, Number 4, November
              1984, pp 277-288.

   [<a id="ref-SIPFIRE" name="ref-SIPFIRE">SIPFIRE</a>]  S. Moyer, D. Marples, S. Tsang, J. Katz, P. Gurung, T.
              Cheng, A. Dutta, H. Schulzrinne, A. Roychowdhury,
              "Framework Draft for Networked Appliances Using the
              Session Initiation Protocol", Work in Progress.






<span class="grey">Carpenter &amp; Brim             Informational                     [Page 25]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


   [<a id="ref-SOCKS6" name="ref-SOCKS6">SOCKS6</a>]   Kitamura, H., "A SOCKS-based IPv6/IPv4 Gateway Mechanism",
              <a href="rfc3089.html">RFC 3089</a>, April 2001.

   [<a id="ref-TRANS64" name="ref-TRANS64">TRANS64</a>]  "Overview of Transition Techniques for IPv6-only to Talk
              to IPv4-only Communication", Work in Progress.

   [<a id="ref-WREC" name="ref-WREC">WREC</a>]     Cooper, I, Melve, I. and G. Tomlinson, "Internet Web
              Replication and Caching Taxonomy", <a href="rfc3040.html">RFC 3040</a>, January 2001.

   [<a id="ref-XMLPI" name="ref-XMLPI">XMLPI</a>]    Intermediaries and XML Protocol, Mark Nottingham, Work in
              Progress at <a href="http://lists.w3.org/Archives/Public/xml-dist-app/2001Mar/0045.html">http://lists.w3.org/Archives/Public/xml-dist-</a>
              <a href="http://lists.w3.org/Archives/Public/xml-dist-app/2001Mar/0045.html">app/2001Mar/0045.html</a>

Authors' Addresses

   Brian E. Carpenter
   IBM Zurich Research Laboratory
   Saeumerstrasse 4 / Postfach
   8803 Rueschlikon
   Switzerland

   EMail: brian@hursley.ibm.com


   Scott W. Brim
   146 Honness Lane
   Ithaca, NY 14850
   USA

   EMail: sbrim@cisco.com





















<span class="grey">Carpenter &amp; Brim             Informational                     [Page 26]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc3234.html">RFC 3234</a>            Middleboxes: Taxonomy and Issues       February 2002</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Carpenter &amp; Brim             Informational                     [Page 27]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.107, available from
<a href="http://tools.ietf.org/tools/rfcmarkup/">http://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>



</body><!-- Mirrored from tools.ietf.org/html/rfc3234 by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 07 Jun 2014 20:18:50 GMT --></html>