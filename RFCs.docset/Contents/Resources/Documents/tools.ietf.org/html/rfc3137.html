<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3137 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:48 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-zinin-ospf-stub-adv" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:3137" name="DC.Identifier"/>
<meta content="June, 2001" name="DC.Date.Issued"/>
<meta content="White, Russ" name="DC.Creator"/>
<meta content="Zinin, Alex D." name="DC.Creator"/>
<meta content="McPherson, Danny" name="DC.Creator"/>
<meta content="Retana, Alvaro" name="DC.Creator"/>
<meta content="Nguyen, Liem" name="DC.Creator"/>
<meta content="This memo describes a backward-compatible technique that may be used
by OSPF (Open Shortest Path First) implementations to advertise
unavailability to forward transit traffic or to lower the preference
level for the paths through such a router. This memo provides
information for the Internet community." name="DC.Description.Abstract"/>
<meta content="OSPF Stub Router Advertisement" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3137 - OSPF Stub Router Advertisement</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgbrown" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc3137.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc3137" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-ospf-stub-adv" title="draft-ietf-ospf-stub-adv">draft-ietf-ospf...</a>] [<a href="https://datatracker.ietf.org/doc/rfc3137" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3137" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc3137" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Obsoleted by: <a href="rfc6987.html">6987</a>                                         INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                          A. Retana
Request for Comments: 3137                                     L. Nguyen
Category: Informational                                         R. White
                                                           Cisco Systems
                                                                A. Zinin
                                                           Nexsi Systems
                                                            D. McPherson
                                                          Amber Networks
                                                               June 2001


                     <span class="h1">OSPF Stub Router Advertisement</span>

Status of this Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2001).  All Rights Reserved.

Abstract

   This memo describes a backward-compatible technique that may be used
   by OSPF (Open Shortest Path First) implementations to advertise
   unavailability to forward transit traffic or to lower the preference
   level for the paths through such a router.  In some cases, it is
   desirable not to route transit traffic via a specific OSPF router.
   However, OSPF does not specify a standard way to accomplish this.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20Motivation"></a><a class="selflink" href="#section-1" name="section-1">1</a>. Motivation</span>

   In some situations, it may be advantageous to inform routers in a
   network not to use a specific router as a transit point, but still
   route to it.  Possible situations include the following.

      o  The router is in a critical condition (for example, has very
         high CPU load or does not have enough memory to store all LSAs
         or build the routing table).

      o  Graceful introduction and removal of the router to/from the
         network.

      o  Other (administrative or traffic engineering) reasons.





<span class="grey">Retana, et al.               Informational                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3137.html">RFC 3137</a>             OSPF Stub Router Advertisement            June 2001</span>


   Note that the proposed solution does not remove the router from the
   topology view of the network (as could be done by just flushing that
   router's router-LSA), but prevents other routers from using it for
   transit routing, while still routing packets to router's own IP
   addresses, i.e., the router is announced as stub.

   It must be emphasized that the proposed solution provides real
   benefits in networks designed with at least some level of redundancy
   so that traffic can be routed around the stub router.  Otherwise,
   traffic destined for the networks reachable through such a stub
   router will be still routed through it.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20Proposed%20Solution"></a><a class="selflink" href="#section-2" name="section-2">2</a>. Proposed Solution</span>

   The solution described in this document solves two challenges
   associated with the outlined problem.  In the description below,
   router X is the router announcing itself as a stub.

      1) Making other routers prefer routes around router X while
         performing the Dijkstra calculation.

      2) Allowing other routers to reach IP prefixes directly connected
         to router X.

   Note that it would be easy to address issue 1) alone by just flushing
   router X's router-LSA from the domain.  However, it does not solve
   problem 2), since other routers will not be able to use links to
   router X in Dijkstra (no back link), and because router X will not
   have links to its neighbors.

   To address both problems, router X announces its router-LSA to the
   neighbors as follows.

      o  costs of all non-stub links (links of the types other than 3)
         are set to LSInfinity (16-bit value 0xFFFF, rather than 24-bit
         value 0xFFFFFF used in summary and AS-external LSAs).

      o  costs of stub links (type 3) are set to the interface output
         cost.

   This addresses issues 1) and 2).










<span class="grey">Retana, et al.               Informational                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3137.html">RFC 3137</a>             OSPF Stub Router Advertisement            June 2001</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20Compatibility%20issues"></a><a class="selflink" href="#section-3" name="section-3">3</a>. Compatibility issues</span>

   Some inconsistency may be seen when the network is constructed of the
   routers that perform intra-area Dijkstra calculation as specified in
   [<a href="rfc1247.html" title='"OSPF Version 2"'>RFC1247</a>] (discarding link records in router-LSAs that have
   LSInfinity cost value) and routers that perform it as specified in
   [<a href="rfc1583.html" title='"OSPF Version 2"'>RFC1583</a>] and higher (do not treat links with LSInfinity cost as
   unreachable).  Note that this inconsistency will not lead to routing
   loops, because if there are some alternate paths in the network, both
   types of routers will agree on using them rather than the path
   through the stub router.  If the path through the stub router is the
   only one, the routers of the first type will not use the stub router
   for transit (which is the desired behavior), while the routers of the
   second type will still use this path.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20Acknowledgements"></a><a class="selflink" href="#section-4" name="section-4">4</a>. Acknowledgements</span>

   The authors of this document do not make any claims on the
   originality of the ideas described.  Among other people, we would
   like to acknowledge Henk Smit for being part of one of the initial
   discussions around this topic.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20Security%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>. Security Considerations</span>

   The technique described in this document does not introduce any new
   security issues into OSPF protocol.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20References"></a><a class="selflink" href="#section-6" name="section-6">6</a>. References</span>

   [<a id="ref-RFC2328" name="ref-RFC2328">RFC2328</a>] Moy, J., "OSPF Version 2", STD 54, <a href="rfc2328.html">RFC 2328</a>, April 1998.

   [<a id="ref-RFC1247" name="ref-RFC1247">RFC1247</a>] Moy, J., "OSPF Version 2", <a href="rfc1247.html">RFC 1247</a>, July 1991.

   [<a id="ref-RFC1583" name="ref-RFC1583">RFC1583</a>] Moy, J., "OSPF Version 2", <a href="rfc1583.html">RFC 1583</a>, March 1994.

















<span class="grey">Retana, et al.               Informational                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3137.html">RFC 3137</a>             OSPF Stub Router Advertisement            June 2001</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20Authors%27%20Addresses"></a><a class="selflink" href="#section-7" name="section-7">7</a>. Authors' Addresses</span>

   Alvaro Retana
   7025 Kit Creek Rd.
   Research Triangle Park, NC 27709
   USA

   EMail: aretana@cisco.com


   Liem Nguyen
   7025 Kit Creek Rd.
   Research Triangle Park, NC 27709
   USA

   EMail: lhnguyen@cisco.com


   Russ White
   Cisco Systems, Inc.
   7025 Kit Creek Rd.
   Research Triangle Park, NC 27709

   EMail: riw@cisco.com


   Alex Zinin
   Nexsi Systems
   1959 Concourse Drive
   San Jose,CA 95131

   EMail: azinin@nexsi.com


   Danny McPherson
   Amber Networks
   48664 Milmont Drive
   Fremont, CA 94538

   EMail: danny@ambernetworks.com











<span class="grey">Retana, et al.               Informational                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3137.html">RFC 3137</a>             OSPF Stub Router Advertisement            June 2001</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-8" name="section-8">8</a>. Full Copyright Statement</span>

   Copyright (C) The Internet Society (2001).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Retana, et al.               Informational                      [Page 5]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc3137 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:48 GMT --></html>