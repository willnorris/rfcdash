<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5194 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:37 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-manyfolks-sipping-toip" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:5194" name="DC.Identifier"/>
<meta content="June, 2008" name="DC.Date.Issued"/>
<meta content="Wijk, Arnoud van" name="DC.Creator"/>
<meta content="Gybels, Guido" name="DC.Creator"/>
<meta content="This document lists the essential requirements for real-time Text-
over-IP (ToIP) and defines a framework for implementation of all
required functions based on the Session Initiation Protocol (SIP) and
the Real-Time Transport Protocol (RTP). This includes interworking
between Text-over-IP and existing text telephony on the Public
Switched Telephone Network (PSTN) and other networks. This memo
provides information for the Internet community." name="DC.Description.Abstract"/>
<meta content="Framework for Real-Time Text over IP Using the Session Initiation Protocol (SIP)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5194 - Framework for Real-Time Text over IP Using the Session Initiation Protocol (SIP)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5194.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5194" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-sipping-toip" title="draft-ietf-sipping-toip">draft-ietf-sipp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc5194" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5194" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5194" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                   A. van Wijk, Ed.
Request for Comments: 5194                                G. Gybels, Ed.
Category: Informational                                        June 2008


              <span class="h1">Framework for Real-Time Text over IP Using</span>
                 <span class="h1">the Session Initiation Protocol (SIP)</span>

Status of This Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Abstract

   This document lists the essential requirements for real-time Text-
   over-IP (ToIP) and defines a framework for implementation of all
   required functions based on the Session Initiation Protocol (SIP) and
   the Real-Time Transport Protocol (RTP).  This includes interworking
   between Text-over-IP and existing text telephony on the Public
   Switched Telephone Network (PSTN) and other networks.





























<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Scope ...........................................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Terminology .....................................................<a href="#page-4">4</a>
   <a href="#section-4">4</a>. Definitions .....................................................<a href="#page-4">4</a>
   <a href="#section-5">5</a>. Requirements ....................................................<a href="#page-6">6</a>
      <a href="#section-5.1">5.1</a>. General Requirements for ToIP ..............................<a href="#page-6">6</a>
      <a href="#section-5.2">5.2</a>. Detailed Requirements for ToIP .............................<a href="#page-8">8</a>
           <a href="#section-5.2.1">5.2.1</a>. Session Setup and Control Requirements ..............<a href="#page-9">9</a>
           <a href="#section-5.2.2">5.2.2</a>. Transport Requirements .............................<a href="#page-10">10</a>
           <a href="#section-5.2.3">5.2.3</a>. Transcoding Service Requirements ...................<a href="#page-10">10</a>
           <a href="#section-5.2.4">5.2.4</a>. Presentation and User Control Requirements .........<a href="#page-11">11</a>
           <a href="#section-5.2.5">5.2.5</a>. Interworking Requirements ..........................<a href="#page-13">13</a>
                  <a href="#section-5.2.5.1">5.2.5.1</a>. PSTN Interworking Requirements ............<a href="#page-13">13</a>
                  <a href="#section-5.2.5.2">5.2.5.2</a>. Cellular Interworking Requirements ........<a href="#page-14">14</a>
                  5.2.5.3. Instant Messaging Interworking
                           Requirements ..............................<a href="#page-14">14</a>
   <a href="#section-6">6</a>. Implementation Framework .......................................<a href="#page-15">15</a>
      <a href="#section-6.1">6.1</a>. General Implementation Framework ..........................<a href="#page-15">15</a>
      <a href="#section-6.2">6.2</a>. Detailed Implementation Framework .........................<a href="#page-15">15</a>
           <a href="#section-6.2.1">6.2.1</a>. Session Control and Setup ..........................<a href="#page-15">15</a>
                  <a href="#section-6.2.1.1">6.2.1.1</a>. Pre-Session Setup .........................<a href="#page-15">15</a>
                  <a href="#section-6.2.1.2">6.2.1.2</a>. Session Negotiations ......................<a href="#page-16">16</a>
           <a href="#section-6.2.2">6.2.2</a>. Transport ..........................................<a href="#page-17">17</a>
           <a href="#section-6.2.3">6.2.3</a>. Transcoding Services ...............................<a href="#page-18">18</a>
           <a href="#section-6.2.4">6.2.4</a>. Presentation and User Control Functions ............<a href="#page-18">18</a>
                  <a href="#section-6.2.4.1">6.2.4.1</a>. Progress and Status Information ...........<a href="#page-18">18</a>
                  <a href="#section-6.2.4.2">6.2.4.2</a>. Alerting ..................................<a href="#page-18">18</a>
                  <a href="#section-6.2.4.3">6.2.4.3</a>. Text Presentation .........................<a href="#page-19">19</a>
                  <a href="#section-6.2.4.4">6.2.4.4</a>. File Storage ..............................<a href="#page-19">19</a>
           <a href="#section-6.2.5">6.2.5</a>. Interworking Functions .............................<a href="#page-19">19</a>
                  <a href="#section-6.2.5.1">6.2.5.1</a>. PSTN Interworking .........................<a href="#page-20">20</a>
                  <a href="#section-6.2.5.2">6.2.5.2</a>. Mobile Interworking .......................<a href="#page-22">22</a>
                           <a href="#section-6.2.5.2.1">6.2.5.2.1</a>. Cellular "No-gain" .............<a href="#page-22">22</a>
                           6.2.5.2.2. Cellular Text Telephone
                                      Modem (CTM) ....................<a href="#page-22">22</a>
                           <a href="#section-6.2.5.2.3">6.2.5.2.3</a>. Cellular "Baudot mode" .........<a href="#page-22">22</a>
                           <a href="#section-6.2.5.2.4">6.2.5.2.4</a>. Mobile Data Channel Mode .......<a href="#page-23">23</a>
                           <a href="#section-6.2.5.2.5">6.2.5.2.5</a>. Mobile ToIP ....................<a href="#page-23">23</a>
                  <a href="#section-6.2.5.3">6.2.5.3</a>. Instant Messaging Interworking ............<a href="#page-23">23</a>
                  <a href="#section-6.2.5.4">6.2.5.4</a>. Multi-Functional Combination Gateways .....<a href="#page-24">24</a>
                  <a href="#section-6.2.5.5">6.2.5.5</a>. Character Set Transcoding .................<a href="#page-25">25</a>
   7. Further Recommendations for Implementers and Service
      Providers ......................................................<a href="#page-25">25</a>
      <a href="#section-7.1">7.1</a>. Access to Emergency Services ..............................<a href="#page-25">25</a>
      <a href="#section-7.2">7.2</a>. Home Gateways or Analog Terminal Adapters .................<a href="#page-25">25</a>
      <a href="#section-7.3">7.3</a>. User Mobility .............................................<a href="#page-26">26</a>



<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


      <a href="#section-7.4">7.4</a>. Firewalls and NATs ........................................<a href="#page-26">26</a>
      <a href="#section-7.5">7.5</a>. Quality of Service ........................................<a href="#page-26">26</a>
   <a href="#section-8">8</a>. Security Considerations ........................................<a href="#page-26">26</a>
   <a href="#section-9">9</a>. Contributors ...................................................<a href="#page-27">27</a>
   <a href="#section-10">10</a>. References ....................................................<a href="#page-27">27</a>
      <a href="#section-10.1">10.1</a>. Normative References .....................................<a href="#page-27">27</a>
      <a href="#section-10.2">10.2</a>. Informative References ...................................<a href="#page-29">29</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   For many years, real-time text has been in use as a medium for
   conversational, interactive dialogue between users in a similar way
   to how voice telephony is used.  Such interactive text is different
   from messaging and semi-interactive solutions like Instant Messaging
   in that it offers an equivalent conversational experience to users
   who cannot, or do not wish to, use voice.  It therefore meets a
   different set of requirements from other text-based solutions already
   available on IP networks.

   Traditionally, deaf, hard-of-hearing, and speech-impaired people are
   amongst the most prolific users of real-time, conversational, text
   but, because of its interactivity, it is becoming popular amongst
   mainstream users as well.  Real-time text conversation can be
   combined with other conversational media like video or voice.

   This document describes how existing IETF protocols can be used to
   implement a Text-over-IP solution (ToIP).  Therefore, this document
   describes how to use a set of existing components and protocols and
   provides the requirements and rules for that resulting structure,
   which is why it is called a "framework", fitting commonly accepted
   dictionary definitions of that term.

   This ToIP framework is specifically designed to be compatible with
   Voice-over-IP (VoIP), Video-over-IP, and Multimedia-over-IP (MoIP)
   environments.  This ToIP framework also builds upon, and is
   compatible with, the high-level user requirements of deaf, hard-of-
   hearing and speech-impaired users as described in <a href="rfc3351.html">RFC3351</a> [<a href="#ref-22" title='"User Requirements for the Session Initiation Protocol (SIP) in Support of Deaf, Hard of Hearing and Speech-impaired Individuals"'>22</a>].  It
   also meets real-time text requirements of mainstream users.

   ToIP also offers an IP equivalent of analog text telephony services
   as used by deaf, hard-of-hearing, speech-impaired, and mainstream
   users.

   The Session Initiation Protocol (SIP) [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>] is the protocol of choice
   for control of Multimedia communications and Voice-over-IP (VoIP) in
   particular.  It offers all the necessary control and signalling
   required for the ToIP framework.




<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   The Real-Time Transport Protocol (RTP) [<a href="#ref-3" title='"RTP: A Transport Protocol for Real-Time Applications"'>3</a>] is the protocol of choice
   for real-time data transmission, and its use for real-time text
   payloads is described in <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>].

   This document defines a framework for ToIP to be used either by
   itself or as part of integrated, multi-media services, including
   Total Conversation [<a href="#ref-5" title='"Multimedia Conversational Services"'>5</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Scope"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Scope</span>

   This document defines a framework for the implementation of real-time
   ToIP, either stand-alone or as a part of multimedia services,
   including Total Conversation [<a href="#ref-5" title='"Multimedia Conversational Services"'>5</a>].  It provides the:

   a. requirements for real-time text;

   b. requirements for ToIP interworking;

   c. description of ToIP implementation using SIP and RTP;

   d. description of ToIP interworking with other text services.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Terminology"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in <a href="rfc2119.html">RFC</a>
   <a href="rfc2119.html">2119</a> [<a href="#ref-6" title='"Key words for use in RFCs to Indicate Requirement Levels"'>6</a>] and indicate requirement levels for compliant
   implementations.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Definitions"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Definitions</span>

   Audio bridging: a function of an audio media bridge server, gateway,
   or relay service that sends to each destination the combination of
   audio from all participants in a conference, excluding the
   participant(s) at that destination.  At the RTP level, this is an
   instance of the mixer function as defined in <a href="rfc3550.html">RFC 3550</a> [<a href="#ref-3" title='"RTP: A Transport Protocol for Real-Time Applications"'>3</a>].

   Cellular: a telecommunication network that has wireless access and
   can support voice and data services over very large geographical
   areas.  Also called Mobile.

   Full duplex: media is sent independently in both directions.

   Half duplex: media can only be sent in one direction at a time, or if
   an attempt to send information in both directions is made, errors may
   be introduced into the presented media.




<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   Interactive text: another term for real-time text, as defined below.

   Real-time text: a term for real-time transmission of text in a
   character-by-character fashion for use in conversational services,
   often as a text equivalent to voice-based conversational services.
   Conversational text is defined in the ITU-T Framework for multimedia
   services, Recommendation F.700 [<a href="#ref-21" title='"Framework Recommendation for Multimedia Services"'>21</a>].

   Text gateway: a function that transcodes between different forms of
   text transport methods, e.g., between ToIP in IP networks and Baudot
   or ITU-T V.21 text telephony in the PSTN.

   Textphone: also "text telephone".  A terminal device that allows
   end-to-end real-time text communication using analog transmission.  A
   variety of PSTN textphone protocols exists world-wide.  A textphone
   can often be combined with a voice telephone, or include voice
   communication functions for simultaneous or alternating use of text
   and voice in a call.

   Text bridging: a function of the text media bridge server, gateway
   (including transcoding gateways), or relay service analogous to that
   of audio bridging as defined above, except that text is the medium of
   conversation.

   Text relay service: a third-party or intermediary that enables
   communications between deaf, hard-of-hearing, and speech-impaired
   people and voice telephone users by translating between voice and
   real-time text in a call.

   Text telephony: analog textphone service.

   Total Conversation: a multimedia service offering real-time
   conversation in video, real-time text and voice according to
   interoperable standards.  All media streams flow in real time.  (See
   ITU-T F.703, "Multimedia conversational services" [<a href="#ref-5" title='"Multimedia Conversational Services"'>5</a>].)

   Transcoding service: a service provided by a third-party User Agent
   that transcodes one stream into another.  Transcoding can be done by
   human operators, in an automated manner, or by a combination of both
   methods.  Within this document, the term particularly applies to
   conversion between different types of media.  A text relay service is
   an example of a transcoding service that converts between real-time
   text and audio.

   TTY: originally, an abbreviation for "teletype".  Often used in North
   America as an alternative designation for a text telephone or
   textphone.  Also called TDD, Telecommunication Device for the Deaf.




<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   Video relay service: a service that enables communications between
   deaf and hard-of-hearing people and hearing persons with voice
   telephones by translating between sign language and spoken language
   in a call.

   Acronyms:

     2G      Second generation cellular (mobile)
     2.5G    Enhanced second generation cellular (mobile)
     3G      Third generation cellular (mobile)
     ATA     Analog Telephone Adaptor
     CDMA    Code Division Multiple Access
     CLI     Calling Line Identification
     CTM     Cellular Text Telephone Modem
     ENUM    E.164 number storage in DNS (see <a href="rfc3761.html">RFC3761</a>)
     GSM     Global System for Mobile Communications
     ISDN    Integrated Services Digital Network
     ITU-T   International Telecommunications
             Union-Telecommunications Standardisation Sector
     NAT     Network Address Translation
     PSTN    Public Switched Telephone Network
     RTP     Real-Time Transport Protocol
     SDP     Session Description Protocol
     SIP     Session Initiation Protocol
     SRTP    Secure Real Time Transport Protocol
     TDD     Telecommunication Device for the Deaf
     TDMA    Time Division Multiple Access
     TTY     Analog textphone (Teletypewriter)
     ToIP    Real-time Text over Internet Protocol
     URI     Uniform Resource Identifier
     UTF-8   UCS/Unicode Transformation Format-8
     VCO/HCO Voice Carry Over/Hearing Carry Over
     VoIP    Voice over Internet Protocol

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Requirements"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Requirements</span>

   The framework described in <a href="#section-6">Section 6</a> defines a real-time text-based
   conversational service that is the text equivalent of voice-based
   telephony.  This section describes the requirements that the
   framework is designed to meet and the functionality it should offer.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20General%20Requirements%20for%20ToIP"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  General Requirements for ToIP</span>

   Any framework for ToIP must be derived from the requirements of <a href="rfc3351.html">RFC</a>
   <a href="rfc3351.html">3351</a> [<a href="#ref-22" title='"User Requirements for the Session Initiation Protocol (SIP) in Support of Deaf, Hard of Hearing and Speech-impaired Individuals"'>22</a>].  A basic requirement is that it must provide a
   standardized way for offering real-time text-based conversational
   services that can be used as an equivalent to voice telephony by
   deaf, hard-of-hearing, speech-impaired, and mainstream users.



<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   It is important to understand that real-time text conversations are
   significantly different from other text-based communications like
   email or Instant Messaging.  Real-time text conversations deliver an
   equivalent mode to voice conversations by providing transmission of
   text character by character as it is entered, so that the
   conversation can be followed closely and that immediate interaction
   takes place.

   Store-and-forward systems like email or messaging on mobile networks,
   or non-streaming systems like instant messaging, are unable to
   provide that functionality.  In particular, they do not allow for
   smooth communication through a Text Relay Service.

   In order to make ToIP the text equivalent of voice services, ToIP
   needs to offer equivalent features in terms of conversationality to
   those provided by voice.  To achieve that, ToIP needs to:

   a. offer real-time transport and presentation of the conversation;

   b. provide simultaneous transmission in both directions;

   c. support both point-to-point and multipoint communication;

   d. allow other media, like audio and video, to be used in conjunction
      with ToIP;

   e. ensure that the real-time text service is always available.

   Real-time text is a useful subset of Total Conversation as defined in
   ITU-T F.703 [<a href="#ref-5" title='"Multimedia Conversational Services"'>5</a>].  Total Conversation allows participants to use
   multiple modes of communication during the conversation, either at
   the same time or by switching between modes, e.g., between real-time
   text and audio.

   Deaf, hard-of-hearing, and mainstream users may invoke ToIP services
   for many different reasons:

   - because they are in a noisy environment, e.g., in a machine room of
     a factory where listening is difficult;

   - because they are busy with another call and want to participate in
     two calls at the same time;

   - for implementing text and/or speech recording services (e.g., text
     documentation/audio recording) for legal purposes, for clarity, or
     for flexibility;





<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   - to overcome language barriers through speech translation and/or
     transcoding services;

   - because of hearing loss, deafness, or tinnitus as a result of the
     aging process or for any other reason, creating a need to replace
     or complement voice with real-time text in conversational sessions.

   In many of the above examples, real-time text may accompany speech.
   The text could be displayed side by side, or in a manner similar to
   subtitling in broadcasting environments, or in any other suitable
   manner.  This could occur with users who are hard of hearing and also
   for mixed media calls with both hearing and deaf people participating
   in the call.

   A ToIP user may wish to call another ToIP user, join a conference
   session involving several users, or initiate or join a multimedia
   session, such as a Total Conversation session.

   A common scenario for multipoint real-time text is conference calling
   with many participants.  Implementers could, for example, use
   different colours to render different participants' text, or could
   create separate windows or rendering areas for each participant.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Detailed%20Requirements%20for%20ToIP"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Detailed Requirements for ToIP</span>

   The following sections list individual requirements for ToIP.  Each
   requirement has been given a unique identifier (R1, R2, etc.).
   <a href="#section-6">Section 6</a> (Implementation Framework) describes how to implement ToIP
   based on these requirements by using existing protocols and
   techniques.

   The requirements are organized under the following headings:

   - session setup and session control;

   - transport;

   - use of transcoding services;

   - presentation and user control;

   - interworking.









<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.%20%20Session%20Setup%20and%20Control%20Requirements"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a>.  Session Setup and Control Requirements</span>

   Conversations could be started using a mode other than real-time
   text.  Simultaneous or alternating voice and real-time text is used
   by a large number of people who can send voice but must receive text
   (due to a hearing impairment), or who can hear but must send text
   (due to a speech impairment).

   R1: It SHOULD be possible to start conversations in any mode (real-
   time text, voice, video) or combination of modes.

   R2: It MUST be possible for the users to switch to real-time text, or
   add real-time text as an additional modality, during the
   conversation.

   R3: Systems supporting ToIP MUST allow users to select any of the
   supported conversation modes at any time, including in mid-
   conversation.

   R4: Systems SHOULD allow the user to specify a preferred mode of
   communication in each direction, with the ability to fall back to
   alternatives that the user has indicated are acceptable.

   R5: If the user requests simultaneous use of real-time text and
   audio, and this is not possible because of constraints in the
   network, the system SHOULD try to establish text-only communication
   if that is what the user has specified as his/her preference.

   R6: If the user has expressed a preference for real-time text,
   establishment of a connection including real-time text MUST have
   priority over other outcomes of the session setup.

   R7: It MUST be possible to use real-time text in conferences both as
   a medium of discussion between individual participants (for example,
   for sidebar discussions in real-time text while listening to the main
   conference audio) and for central support of the conference with
   real-time text interpretation of speech.

   R8: Session setup and negotiation of modalities MUST allow users to
   specify the language of the real-time text to be used.  (It is
   RECOMMENDED that similar functionality be provided for the video part
   of the conversation, i.e., to specify the sign language being used).

   R9: Where certain session services are available for the audio media
   part of a session, these functions MUST also be supported for the
   real-time text media part of the same session.  For example, call
   transfer must act on all media in the session.




<span class="grey">van Wijk &amp; Gybels            Informational                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2.%20%20Transport%20Requirements"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a>.  Transport Requirements</span>

   ToIP will often be used to access a relay service [<a href="#ref-24" title='"Human Factors (HF); Guidelines for Telecommunication Relay Services for Text Telephones"'>24</a>], allowing
   real-time text users to communicate with voice users.  With relay
   services, as well as in direct user-to-user conversation, it is
   crucial that text characters are sent as soon as possible after they
   are entered.  While buffering may be done to improve efficiency, the
   delays SHOULD be kept minimal.  In particular, buffering of whole
   lines of text will not meet character delay requirements.

   R10: Characters must be transmitted soon after entry of each
   character so that the maximum delay requirement can be met.  An end-
   to-end delay time of one second is regarded as good, while users note
   and appreciate shorter delays, down to 300ms.  A delay of up to two
   seconds is possible to use.

   R11: Real-time text transmission from a terminal SHALL be performed
   character by character as entered, or in small groups of characters,
   so that no character is delayed from entry to transmission by more
   than 300 milliseconds.

   R12: It MUST be possible to transmit characters at a rate sufficient
   to support fast human typing as well as speech-to-text methods of
   generating real-time text.  A rate of 30 characters per second is
   regarded as sufficient.

   R13: A ToIP service MUST be able to deal with international character
   sets.

   R14: Where it is possible, loss or corruption of real-time text
   during transport SHOULD be detected and the user should be informed.

   R15: Transport of real-time text SHOULD be as robust as possible, so
   as to minimize loss of characters.

   R16: It SHOULD be possible to send and receive real-time text
   simultaneously.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.3.%20%20Transcoding%20Service%20Requirements"></a><a class="selflink" href="#section-5.2.3" name="section-5.2.3">5.2.3</a>.  Transcoding Service Requirements</span>

   If the User Agents of different participants indicate that there is
   an incompatibility between their capabilities to support certain
   media types, e.g., one User Agent only offering T.140 over IP, as
   described in <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>], and the other one only supporting audio,
   the user might want to invoke a transcoding service.

   Some users may indicate their preferred modality to be audio while
   others may indicate real-time text.  In this case, transcoding



<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   services might be needed for text-to-speech (TTS) and speech-to-text
   (STT).  Other examples of possible scenarios for including a relay
   service in the conversation are: text bridging after conversion from
   speech, audio bridging after conversion from real-time text, etc.

   A number of requirements, motivations, and implementation guidelines
   for relay service invocation can be found in <a href="rfc3351.html">RFC 3351</a> [<a href="#ref-22" title='"User Requirements for the Session Initiation Protocol (SIP) in Support of Deaf, Hard of Hearing and Speech-impaired Individuals"'>22</a>].

   R17: It MUST be possible for users to invoke a transcoding service
   where such service is available.

   R18: It MUST be possible for users to indicate their preferred
   modality (e.g., ToIP).

   R19: It MUST be possible to negotiate the requirements for
   transcoding services in real time in the process of setting up a
   call.

   R20: It MUST be possible to negotiate the requirements for
   transcoding services in mid-call, for the immediate addition of those
   services to the call.

   R21: Communication between the end participants SHOULD continue after
   the addition or removal of a text relay service, and the effect of
   the change should be limited in the users' perception to the direct
   effect of having or not having the transcoding service in the
   connection.

   R22: When setting up a session, it MUST be possible for a user to
   specify the type of relay service requested (e.g., speech to text or
   text to speech).  The specification of a type of relay SHOULD include
   a language specifier.

   R23: It SHOULD be possible to route the session to a preferred relay
   service even if the user invokes the session from another region or
   network than that usually used.

   R24: It is RECOMMENDED that ToIP implementations make the invocation
   and use of relay services as easy as possible.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.4.%20%20Presentation%20and%20User%20Control%20Requirements"></a><a class="selflink" href="#section-5.2.4" name="section-5.2.4">5.2.4</a>.  Presentation and User Control Requirements</span>

   A user should never be in doubt about the status of the session, even
   if the user is unable to make use of the audio or visual indication.
   For example, tactile indications could be used by deaf-blind
   individuals.





<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   R25: User Agents for ToIP services MUST have alerting methods (e.g.,
   for incoming sessions) that can be used by deaf and hard-of-hearing
   people or provide a range of alternative, but equivalent, alerting
   methods that can be selected by all users, regardless of their
   abilities.

   R26: Where real-time text is used in conjunction with other media,
   exposure of user control functions through the User Interface needs
   to be done in an equivalent manner for all supported media.  For
   example, it must be possible for the user to select between audio,
   visual, or tactile prompts, or all must be supplied.

   R27: If available, identification of the originating party (e.g., in
   the form of a URI or a Calling Line Identification (CLI)) MUST be
   clearly presented to the user in a form suitable for the user BEFORE
   the session invitation is answered.

   R28: When a session invitation involving ToIP originates from a
   Public Switched Telephone Network (PSTN) text telephone (e.g.,
   transcoded via a text gateway), this SHOULD be indicated to the user.
   The ToIP client MAY adjust the presentation of the real-time text to
   the user as a consequence.

   R29: An indication SHOULD be given to the user when real-time text is
   available during the call, even if it is not invoked at call setup
   (e.g., when only voice and/or video is used initially).

   R30: The user MUST be informed of any change in modalities.

   R31: Users MUST be presented with appropriate session progress
   information at all times.

   R32: Systems for ToIP SHOULD support an answering machine function,
   equivalent to answering machines on telephony networks.

   R33: If an answering machine function is supported, it MUST support
   at least 160 characters for the greeting message.  It MUST support
   incoming text message storage of a minimum of 4096 characters,
   although systems MAY support much larger storage.  It is RECOMMENDED
   that systems support storage of at least 20 incoming messages of up
   to 16000 characters per message.

   R34: When the answering machine is activated, user alerting SHOULD
   still take place.  The user SHOULD be allowed to monitor the auto-
   answer progress, and where this is provided, the user SHOULD be
   allowed to intervene during any stage of the answering machine
   procedure and take control of the session.




<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   R35: It SHOULD be possible to save the text portion of a
   conversation.

   R36: The presentation of the conversation SHOULD be done in such a
   way that users can easily identify which party generated any given
   portion of text.

   R37: ToIP SHOULD handle characters such as new line, erasure, and
   alerting during a session as specified in ITU-T T.140 [<a href="#ref-8" title='"Protocol for Multimedia Application Text Conversation"'>8</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.5.%20%20Interworking%20Requirements"></a><a class="selflink" href="#section-5.2.5" name="section-5.2.5">5.2.5</a>.  Interworking Requirements</span>

   There is a range of existing real-time text services.  There is also
   a range of network technologies that could support real-time text
   services.

   Real-time/interactive texting facilities exist already in various
   forms and on various networks.  In the PSTN, they are commonly
   referred to as text telephony.

   Text gateways are used for converting between different protocols for
   text conversation.  They can be used between networks or within
   networks where different transport technologies are used.

   R38: ToIP SHOULD provide interoperability with text conversation
   features in other networks, for instance the PSTN.

   R39: When communicating via a gateway to other networks and
   protocols, the ToIP service SHOULD support the functionality for
   alternating or simultaneous use of modalities as offered by the
   interworking network.

   R40: Calling party identification information, such as CLI, MUST be
   passed by gateways and converted to an appropriate form, if required.

   R41: When interworking with other networks and services, the ToIP
   service SHOULD provide buffering mechanisms to deal with delays in
   call setup and with differences in transmission speeds, and/or to
   interwork with half-duplex services.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.2.5.1.%20%20PSTN%20Interworking%20Requirements"></a><a class="selflink" href="#section-5.2.5.1" name="section-5.2.5.1">5.2.5.1</a>.  PSTN Interworking Requirements</span>

   Analog text telephony is used in many countries, mainly by deaf,
   hard-of-hearing and speech-impaired individuals.

   R42: ToIP services MUST provide interworking with PSTN legacy text
   telephony devices.




<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   R43: When interworking with PSTN legacy text telephony services,
   alternating text and voice function MAY be supported.  (Called "voice
   carry over (VCO) and hearing carry over (HCO)").

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.2.5.2.%20%20Cellular%20Interworking%20Requirements"></a><a class="selflink" href="#section-5.2.5.2" name="section-5.2.5.2">5.2.5.2</a>.  Cellular Interworking Requirements</span>

   As mobile communications have been adopted widely, various solutions
   for real-time texting while on the move were developed.  ToIP
   services should provide interworking with such services as well.

   Alternative means of transferring the text telephony data have been
   developed when TTY services over cellular were mandated by the FCC in
   the USA.  They are the a) "No-gain" codec solution, and b) the
   Cellular Text Telephony Modem (CTM) solution [<a href="#ref-7" title='"Cellular Text Telephone Modem Description"'>7</a>], both collectively
   called "Baudot mode" solution in the USA.

   The GSM and 3G standards from 3GPP make use of the CTM modem in the
   voice channel for text telephony.  However, implementations also
   exist that use the data channel to provide such functionality.
   Interworking with these solutions should be done using text gateways
   that set up the data channel connection at the GSM side and provide
   ToIP at the other side.

   R44: a ToIP service SHOULD provide interworking with mobile text
   conversation services.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/5.2.5.3.%20%20Instant%20Messaging%20Interworking%20Requirements"></a><a class="selflink" href="#section-5.2.5.3" name="section-5.2.5.3">5.2.5.3</a>.  Instant Messaging Interworking Requirements</span>

   Many people use Instant Messaging to communicate via the Internet
   using text.  Instant Messaging usually transfers blocks of text
   rather than streaming as is used by ToIP.  Usually a specific action
   is required by the user to activate transmission, such as pressing
   the ENTER key or a send button.  As such, it is not a replacement for
   ToIP; in particular, it does not meet the needs for real-time
   conversations including those of deaf, hard-of-hearing, and speech-
   impaired users as defined in <a href="rfc3351.html">RFC 3351</a> [<a href="#ref-22" title='"User Requirements for the Session Initiation Protocol (SIP) in Support of Deaf, Hard of Hearing and Speech-impaired Individuals"'>22</a>].  It is less suitable for
   communications through a relay service [<a href="#ref-24" title='"Human Factors (HF); Guidelines for Telecommunication Relay Services for Text Telephones"'>24</a>].

   The streaming nature of ToIP provides a more direct conversational
   user experience and, when given the choice, users may prefer ToIP.

   R45: a ToIP service MAY provide interworking with Instant Messaging
   services.








<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Implementation%20Framework"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Implementation Framework</span>

   This section describes an implementation framework for ToIP that
   meets the requirements and offers the functionality as set out in
   <a href="#section-5">Section 5</a>.  The framework presented here uses existing standards that
   are already commonly used for voice-based conversational services on
   IP networks.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20General%20Implementation%20Framework"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  General Implementation Framework</span>

   This framework specifies the use of the Session Initiation Protocol
   (SIP) [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>] to set up, control, and tear down the connections between
   ToIP users whilst the media is transported using the Real-Time
   Transport Protocol (RTP) [<a href="#ref-3" title='"RTP: A Transport Protocol for Real-Time Applications"'>3</a>] as described in <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>].

   <a href="rfc4504.html">RFC 4504</a> describes how to implement support for real-time text in SIP
   telephony devices [<a href="#ref-23" title='"SIP Telephony Device Requirements and Configuration"'>23</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Detailed%20Implementation%20Framework"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Detailed Implementation Framework</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.1.%20%20Session%20Control%20and%20Setup"></a><a class="selflink" href="#section-6.2.1" name="section-6.2.1">6.2.1</a>.  Session Control and Setup</span>

   ToIP services MUST use the Session Initiation Protocol (SIP) [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>] for
   setting up, controlling, and terminating sessions for real-time text
   conversation with one or more participants and possibly including
   other media like video or audio.  The Session Description Protocol
   (SDP) used in SIP to describe the session is used to express the
   attributes of the session and to negotiate a set of compatible media
   types.

   SIP [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>] allows participants to negotiate all media, including real-
   time text conversation [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>].  ToIP services can provide the ability to
   set up conversation sessions from any location as well as provision
   for privacy and security through the application of standard SIP
   techniques.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.1.1.%20%20Pre-Session%20Setup"></a><a class="selflink" href="#section-6.2.1.1" name="section-6.2.1.1">6.2.1.1</a>.  Pre-Session Setup</span>

   The requirements of the user to be reached at a consistent address
   and to store preferences for evaluation at session setup are met by
   pre-session setup actions.  That includes storing of registration
   information in the SIP registrar to provide information about how a
   user can be contacted.  This will allow sessions to be set up rapidly
   and with proper routing and addressing.

   The need to use real-time text as a medium of communications can be
   expressed by users during registration time.  Two situations need to
   be considered in the pre-session setup environment:



<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   a. User Preferences: It MUST be possible for a user to indicate a
      preference for real-time text by registering that preference with
      a SIP server that is part of the ToIP service.

   b. Server Support of User Preferences: SIP servers that support ToIP
      services MUST have the capability to act on calling user
      preferences for real-time text in order to accept or reject the
      session.  The actions taken can be based on the called users
      preferences defined as part of the pre-session setup registration.
      For example, if the user is called by another party, and it is
      determined that a transcoding server is needed, the session should
      be re-directed or otherwise handled accordingly.

   The ability to include a transcoding service MUST NOT require user
   registration in any specific SIP registrar, but MAY require
   authorisation of the SIP registrar to invoke the service.

   A point-to-point session takes place between two parties.  For ToIP,
   one or both of the communicating parties will indicate real-time text
   as a possible or preferred medium for conversation using SIP in the
   session setup.

   The following features MAY be implemented to facilitate the session
   establishment using ToIP:

   a. Caller Preferences: SIP headers (e.g., Contact) [<a href="#ref-10" title='"Indicating User Agent Capabilities in the Session Initiation Protocol (SIP)"'>10</a>] can be used
      to show that real-time text is the medium of choice for
      communications.

   b. Called Party Preferences [<a href="#ref-11" title='"Caller Preferences for the Session Initiation Protocol (SIP)"'>11</a>]: The called party being passive can
      formulate a clear rule indicating how a session should be handled,
      either using real-time text as a preferred medium or not, and
      whether this session needs to be handled by a designated SIP proxy
      or the SIP User Agent.

   c. SIP Server Support for User Preferences: It is RECOMMENDED that
      SIP servers also handle the incoming sessions in accordance with
      preferences expressed for real-time text.  The SIP server can also
      enforce ToIP policy rules for communications (e.g., use of the
      transcoding server for ToIP).

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.1.2.%20%20Session%20Negotiations"></a><a class="selflink" href="#section-6.2.1.2" name="section-6.2.1.2">6.2.1.2</a>.  Session Negotiations</span>

   The Session Description Protocol (SDP) used in SIP [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>] provides the
   capabilities to indicate real-time text as a medium in the session
   setup.  <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>] uses the RTP payload types "text/red" and
   "text/t140" for support of ToIP, which can be indicated in the SDP as
   a part of the SIP INVITE, OK, and SIP/200/ACK media negotiations.  In



<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   addition, SIP's offer/answer model [<a href="#ref-12" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>12</a>] can also be used in
   conjunction with other capabilities, including the use of a
   transcoding server for enhanced session negotiations [<a href="#ref-28" title='"Framework for Transcoding with the Session Initiation Protocol"'>28</a>,<a href="#ref-29" title='"The SIP Conference Bridge Transcoding Model"'>29</a>,<a href="#ref-13" title='"Transcoding Services Invocation in the Session Initiation Protocol (SIP) Using Third Party Call Control (3pcc)"'>13</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.2.%20%20Transport"></a><a class="selflink" href="#section-6.2.2" name="section-6.2.2">6.2.2</a>.  Transport</span>

   ToIP services MUST support the Real-Time Transport Protocol (RTP) [<a href="#ref-3" title='"RTP: A Transport Protocol for Real-Time Applications"'>3</a>]
   according to the specification of <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>] for the transport of
   real-time text between participants.

   <a href="rfc4103.html">RFC 4103</a> describes the transmission of T.140 [<a href="#ref-8" title='"Protocol for Multimedia Application Text Conversation"'>8</a>] real-time text on IP
   networks.

   In order to enable the use of international character sets, the
   transmission format for real-time text conversation SHALL be UTF-8
   [<a href="#ref-14" title='"UTF-8, a transformation format of ISO 10646"'>14</a>], in accordance with ITU-T T.140.

   If real-time text is detected to be missing after transmission, there
   SHOULD be a "text loss" indication in the real-time text as specified
   in T.140 Addendum 1 [<a href="#ref-8" title='"Protocol for Multimedia Application Text Conversation"'>8</a>].

   The redundancy method of <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>] SHOULD be used to significantly
   increase the reliability of the real-time text transmission.  A
   redundancy level using 2 generations gives very reliable results and
   is therefore strongly RECOMMENDED.

   In order to avoid exceeding the capabilities of the sender, receiver,
   or network (congestion), the transmission rate SHOULD be kept at or
   below 30 characters per second, which is the default maximum rate
   specified in <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>].  Lower rates MAY be negotiated when needed
   through the "cps" parameter as specified in <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>].

   Real-time text capability is announced in SDP by a declaration
   similar to this example:

   m=text 11000 RTP/AVP 100 98
   a=rtpmap:98 t140/1000
   a=rtpmap:100 red/1000
   a=fmtp:100 98/98/98

   By having this single coding and transmission scheme for real-time
   text defined in the SIP session control environment, the opportunity
   for interoperability is optimized.  However, if good reasons exist,
   other transport mechanisms MAY be offered and used for the T.140-
   coded text, provided that proper negotiation is introduced, but the
   <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>] transport MUST be used as both the default and the
   fallback transport.




<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.3.%20%20Transcoding%20Services"></a><a class="selflink" href="#section-6.2.3" name="section-6.2.3">6.2.3</a>.  Transcoding Services</span>

   Invocation of a transcoding service MAY happen automatically when the
   session is being set up based on any valid indication or negotiation
   of supported or preferred media types.  A transcoding framework
   document using SIP [<a href="#ref-28" title='"Framework for Transcoding with the Session Initiation Protocol"'>28</a>] describes invoking relay services, where the
   relay acts as a conference bridge or uses the third-party control
   mechanism.  ToIP implementations SHOULD support this transcoding
   framework.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.%20%20Presentation%20and%20User%20Control%20Functions"></a><a class="selflink" href="#section-6.2.4" name="section-6.2.4">6.2.4</a>.  Presentation and User Control Functions</span>

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.1.%20%20Progress%20and%20Status%20Information"></a><a class="selflink" href="#section-6.2.4.1" name="section-6.2.4.1">6.2.4.1</a>.  Progress and Status Information</span>

   Session progress information SHOULD use simple language so that as
   many users as possible can understand it.  The use of jargon or
   ambiguous terminology SHOULD be avoided.  It is RECOMMENDED that text
   information be used together with icons to symbolise the session
   progress information.

   In summary, it SHOULD be possible to observe indicators about:

   - Incoming session

   - Availability of real-time text, voice, and video channels

   - Session progress

   - Incoming real-time text

   - Any loss in incoming real-time text

   - Typed and transmitted real-time text

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.2.%20%20Alerting"></a><a class="selflink" href="#section-6.2.4.2" name="section-6.2.4.2">6.2.4.2</a>.  Alerting</span>

   For users who cannot use the audible alerter for incoming sessions,
   it is RECOMMENDED to include a tactile, as well as a visual,
   indicator.

   Among the alerting options are alerting by the User Agent's User
   Interface and specific alerting User Agents registered to the same
   registrar as the main User Agent.

   It should be noted that external alerting systems exist and one
   common interface for triggering the alerting action is a contact
   closure between two conductors.




<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.3.%20%20Text%20Presentation"></a><a class="selflink" href="#section-6.2.4.3" name="section-6.2.4.3">6.2.4.3</a>.  Text Presentation</span>

   Requirement R32 states that, in the display of text conversations,
   users must be able to distinguish easily between different speakers.
   This could be done using color, positioning of the text (i.e.,
   incoming real-time text and outgoing real-time text in different
   display areas), in-band identifiers of the parties, or a combination
   of any of these techniques.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.4.%20%20File%20Storage"></a><a class="selflink" href="#section-6.2.4.4" name="section-6.2.4.4">6.2.4.4</a>.  File Storage</span>

   Requirement R31 recommends that ToIP systems allow the user to save
   text conversations.  This SHOULD be done using a standard file
   format.  For example: a UTF-8 text file in XHTML format [<a href="#ref-15" title='"XHTML 1.0: The Extensible HyperText Markup Language: A Reformulation of HTML 4 in XML 1.0"'>15</a>],
   including timestamps, party names (or addresses), and the
   conversation text.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.%20%20Interworking%20Functions"></a><a class="selflink" href="#section-6.2.5" name="section-6.2.5">6.2.5</a>.  Interworking Functions</span>

   A number of systems for real-time text conversation already exist as
   well as a number of message-oriented text communication systems.
   Interoperability is of interest between ToIP and some of these
   systems.

   Interoperation of half-duplex and full-duplex protocols, and between
   protocols that have different data rates, may require text buffering.
   Some intelligence will be needed to determine when to change
   direction when operating in half-duplex mode.  Identification may be
   required of half-duplex operation either at the "user" level (i.e.,
   users must inform each other) or at the "protocol" level (where an
   indication must be sent back to the gateway).  However, special care
   needs to be taken to provide the best possible real-time performance.

   Buffering schemes SHOULD be dimensioned to adjust for receiving at 30
   characters per second and transmitting at 6 characters per second for
   up to 4 minutes (i.e., less than 3000 characters).

   When converting between simultaneous voice and text on the IP side,
   and alternating voice and text on the other side of a gateway, a
   conflict can occur if the IP user transmits both audio and text at
   the same time.  In such situations, text transmission SHOULD have
   precedence, so that while text is transmitted, audio is lost.

   Transcoding of text to and from other coding formats may need to take
   place in gateways between ToIP and other forms of text conversation,
   for example, to connect to a PSTN text telephone.





<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   Session setup through gateways to other networks may require the use
   of specially formatted addresses or other mechanisms for invoking
   those gateways.

   ToIP interworking requires a method to invoke a text gateway.  These
   text gateways act as User Agents at the IP side.  The capabilities of
   the gateway during the call will be determined by the call
   capabilities of the terminal that is using the gateway.  For example,
   a PSTN textphone is generally only able to receive voice and real-
   time text, so the gateway will only allow ToIP and audio.

   Examples of possible scenarios for invocation of the text gateway
   are:

   a. PSTN textphone users dial a prefix number before dialing out.

   b. Separate real-time text subscriptions, linked to the phone number
      or terminal identifier/ IP address.

   c. Real-time text capability indicators.

   d. Real-time text preference indicators.

   e. Listen for V.18 modem modulation text activity in all PSTN calls
      and routing of the call to an appropriate gateway.

   f. Call transfer request by the called user.

   g. Placing a call via the Web, and using one of the methods described
      here

   h. A text gateway with its own telephone number and/or SIP address
      (this requires user interaction with the gateway to place a call).

   i. ENUM address analysis and number plan.

   j. Number or address analysis leads to a gateway for all PSTN calls.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.1.%20%20PSTN%20Interworking"></a><a class="selflink" href="#section-6.2.5.1" name="section-6.2.5.1">6.2.5.1</a>.  PSTN Interworking</span>

   Analog text telephony is cumbersome because of incompatible national
   implementations where interworking was never considered.  A large
   number of these implementations have been documented in ITU-T V.18
   [<a href="#ref-16" title='"Operational and Interworking Requirements for DCEs operating in Text Telephone Mode"'>16</a>], which also defines the modem detection sequences for the
   different text protocols.  In rare cases, the modem type
   identification may take considerable time, depending on user actions.





<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   To resolve analog textphone incompatibilities, text telephone
   gateways are needed to transcode incoming analog signals into T.140
   and vice versa.  The modem capability exchange time can be reduced by
   the text telephone gateways initially assuming the analog text
   telephone protocol used in the region where the gateway is located.
   For example, in the USA, Baudot [<a href="#ref-25" title='"A Frequency Shift Keyed Modem for Use on the Public Switched Telephone Network."'>25</a>] might be tried as the initial
   protocol.  If negotiation for Baudot fails, the full V.18 modem
   capability exchange will take place.  In the UK, ITU-T V.21 [<a href="#ref-26" title='"300 bits per second duplex modem standardized for use in the general switched telephone network"'>26</a>]
   might be the first choice.

   In particular, transmission of real-time text on PSTN networks takes
   place using a variety of codings and modulations, including ITU-T
   V.21 [<a href="#ref-26" title='"300 bits per second duplex modem standardized for use in the general switched telephone network"'>26</a>], Baudot [<a href="#ref-25" title='"A Frequency Shift Keyed Modem for Use on the Public Switched Telephone Network."'>25</a>], dual-tone multi-frequency (DTMF), V.23 [<a href="#ref-27" title='"600/1200-baud modem standardized for use in the general switched telephone network"'>27</a>],
   and others.  Many difficulties have arisen as a result of this
   variety in text telephony protocols and the ITU-T V.18 [<a href="#ref-16" title='"Operational and Interworking Requirements for DCEs operating in Text Telephone Mode"'>16</a>] standard
   was developed to address some of these issues.

   ITU-T V.18 [<a href="#ref-16" title='"Operational and Interworking Requirements for DCEs operating in Text Telephone Mode"'>16</a>] offers a native text telephony method, plus it
   defines interworking with current protocols.  In the interworking
   mode, it will recognise one of the older protocols and fall back to
   that transmission method when required.

   Text gateways MUST use the ITU-T V.18 [<a href="#ref-16" title='"Operational and Interworking Requirements for DCEs operating in Text Telephone Mode"'>16</a>] standard at the PSTN side.
   A text gateway MUST act as a SIP User Agent on the IP side and
   support <a href="rfc4103.html">RFC 4103</a> real-time text transport.

   While ToIP allows receiving and sending real-time text simultaneously
   and is displayed on a split screen, many analog text telephones
   require users to take turns typing.  This is because many text
   telephones operate strictly half duplex.  Only one can transmit text
   at a time.  The users apply strict turn-taking rules.

   There are several text telephones which communicate in full duplex,
   but merge transmitted text and received text in the same line in the
   same display window.  Here too the users apply strict turn taking
   rules.

   Native V.18 text telephones support full duplex and separate display
   from reception and transmission so that the full duplex capability
   can be used fully.  Such devices could use the ToIP split screen as
   well, but almost all text telephones use a restricted character set
   and many use low text transmission speeds (4 to 7 characters per
   second).

   That is why it is important for the ToIP user to know that he or she
   is connected with an analog text telephone.  The session description
   [<a href="#ref-9" title='"SDP: Session Description Protocol"'>9</a>] SHOULD contain an indication that the other endpoint for the call




<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   is a PSTN textphone (e.g., connected via an ATA or through a text
   gateway).  This means that the textphone user may be used to formal
   turn taking during the call.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.2.%20%20Mobile%20Interworking"></a><a class="selflink" href="#section-6.2.5.2" name="section-6.2.5.2">6.2.5.2</a>.  Mobile Interworking</span>

   Mobile wireless (or cellular) circuit switched connections provide a
   digital real-time transport service for voice or data.  The access
   technologies include GSM, CDMA, TDMA, iDen, and various 3G
   technologies, as well as WiFi or WiMAX.

   ToIP may be supported over the cellular wireless packet-switched
   service.  It interfaces to the Internet.

   The following sections describe how mobile text telephony is
   supported.

<span class="h6"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.2.1.%20%20Cellular%20%22No-gain%22"></a><a class="selflink" href="#section-6.2.5.2.1" name="section-6.2.5.2.1">6.2.5.2.1</a>.  Cellular "No-gain"</span>

   The "No-gain" text telephone transporting technology uses specially
   modified Enhanced Full Rate (EFR) [<a href="#ref-17">17</a>] and Enhanced Variable Rate
   (EVR) [<a href="#ref-18" title='"Enhanced Variable Rate Codec'>18</a>] speech vocoders in mobile terminals used to provide a text
   telephony call.  It provides full duplex operation and supports
   alternating between voice and text ("VCO/HCO").  It is dedicated to
   CDMA and TDMA mobile technologies and the US Baudot (i.e., 45 bit/s)
   type of text telephones.

<span class="h6"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.2.2.%20%20Cellular%20Text%20Telephone%20Modem%20%28CTM%29"></a><a class="selflink" href="#section-6.2.5.2.2" name="section-6.2.5.2.2">6.2.5.2.2</a>.  Cellular Text Telephone Modem (CTM)</span>

   CTM [<a href="#ref-7" title='"Cellular Text Telephone Modem Description"'>7</a>] is a technology-independent modem technology that provides
   the transport of text telephone characters at up to 10 characters/sec
   using modem signals that can be carried by many voice codecs and uses
   a highly redundant encoding technique to overcome the fading and cell
   changing losses.

<span class="h6"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.2.3.%20%20Cellular%20%22Baudot%20mode%22"></a><a class="selflink" href="#section-6.2.5.2.3" name="section-6.2.5.2.3">6.2.5.2.3</a>.  Cellular "Baudot mode"</span>

   This term is often used by cellular terminal suppliers for a cellular
   phone mode that allows TTYs to operate into a cellular phone and to
   communicate with a fixed-line TTY.  Thus it is a common name for the
   "No-Gain" and the CTM solutions when applied to the Baudot-type
   textphones.









<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


<span class="h6"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.2.4.%20%20Mobile%20Data%20Channel%20Mode"></a><a class="selflink" href="#section-6.2.5.2.4" name="section-6.2.5.2.4">6.2.5.2.4</a>.  Mobile Data Channel Mode</span>

   Many mobile terminals allow the use of the circuit-switched data
   channel to transfer data in real time.  Data rates of 9600 bit/s are
   usually supported on the 2G mobile network.  Gateways provide
   interoperability with PSTN textphones.

<span class="h6"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.2.5.%20%20Mobile%20ToIP"></a><a class="selflink" href="#section-6.2.5.2.5" name="section-6.2.5.2.5">6.2.5.2.5</a>.  Mobile ToIP</span>

   ToIP could be supported over mobile wireless packet-switched services
   that interface to the Internet.  For 3GPP 3G services, ToIP support
   is described in 3G TS 26.235 [<a href="#ref-19" title='"IP Multimedia default codecs"'>19</a>].

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.3.%20%20Instant%20Messaging%20Interworking"></a><a class="selflink" href="#section-6.2.5.3" name="section-6.2.5.3">6.2.5.3</a>.  Instant Messaging Interworking</span>

   Text gateways MAY be used to allow interworking between Instant
   Messaging systems and ToIP solutions.  Because Instant Messaging is
   based on blocks of text, rather than on a continuous stream of
   characters like ToIP, gateways MUST transcode between the two
   formats.  Text gateways for interworking between Instant Messaging
   and ToIP MUST apply a procedure for bridging the different
   conversational formats of real-time text versus text messaging.  The
   following advice may improve user experience for both parties in a
   call through a messaging gateway.

   a. Concatenate individual characters originating at the ToIP side
      into blocks of text.

   b. When the length of the concatenated message becomes longer than 50
      characters, the buffered text SHOULD be transmitted to the Instant
      Messaging side as soon as any non-alphanumerical character is
      received from the ToIP side.

   c. When a new line indicator is received from the ToIP side, the
      buffered characters up to that point, including the carriage
      return and/or line-feed characters, SHOULD be transmitted to the
      Instant Messaging side.

   d. When the ToIP side has been idle for at least 5 seconds, all
      buffered text up to that point SHOULD be transmitted to the
      Instant Messaging side.

   e. Text Gateways must be capable of maintaining the real-time
      performance for ToIP while providing the interworking services.

   It is RECOMMENDED that during the session, both users be constantly
   updated on the progress of the text input.  Many Instant Messaging
   protocols signal that a user is typing to the other party in the



<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   conversation.  Text gateways between such Instant Messaging protocols
   and ToIP MUST provide this signalling to the Instant Messaging side
   when characters start being received, or at the beginning of the
   conversation.

   At the ToIP side, an indicator of writing the Instant Message MUST be
   present where the Instant Messaging protocol provides one.  For
   example, the real-time text user MAY see ". . . waiting for replying
   IM. . . " and when 5 seconds have passed another . (dot) can be
   shown.

   Those solutions will reduce the difficulties between streaming and
   blocked text services.

   Even though the text gateway can connect Instant Messaging and ToIP,
   the best solution is to take advantage of the fact that the user
   interfaces and the user communities for instant messaging and ToIP
   telephony are very similar.  After all, the character input,
   character display, Internet connectivity, and SIP stack can be the
   same for Instant Messaging (SIMPLE) and ToIP.  Thus, the user may
   simply use different applications for ToIP and text messaging in the
   same terminal.

   Devices that implement Instant Messaging SHOULD implement ToIP as
   described in this document so that a more complete text communication
   service can be provided.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.4.%20%20Multi-Functional%20Combination%20Gateways"></a><a class="selflink" href="#section-6.2.5.4" name="section-6.2.5.4">6.2.5.4</a>.  Multi-Functional Combination Gateways</span>

   In practice, many interworking gateways will be implemented as
   gateways that combine different functions.  As such, a text gateway
   could be built to have modems to interwork with the PSTN and support
   both Instant Messaging as well as ToIP.  Such interworking functions
   are called combination gateways.

   Combination gateways could provide interworking between all of their
   supported text-based functions.  For example, a text gateway that has
   modems to interwork with the PSTN and that support both Instant
   Messaging and ToIP could support the following interworking
   functions:

   - PSTN text telephony to ToIP

   - PSTN text telephony to Instant Messaging

   - Instant Messaging to ToIP





<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/6.2.5.5.%20%20Character%20Set%20Transcoding"></a><a class="selflink" href="#section-6.2.5.5" name="section-6.2.5.5">6.2.5.5</a>.  Character Set Transcoding</span>

   Gateways between the ToIP network and other networks MAY need to
   transcode text streams.  ToIP makes use of the ISO 10646 character
   set.  Most PSTN textphones use a 7-bit character set, or a character
   set that is converted to a 7-bit character set by the V.18 modem.

   When transcoding between character sets and T.140 in gateways,
   special consideration MUST be given to the national variants of the
   7-bit codes, with national characters mapping into different codes in
   the ISO 10646 code space.  The national variant to be used could be
   selectable by the user on a per-call basis, or be configured as a
   national default for the gateway.

   The indicator of missing text in T.140, specified in T.140 amendment
   1, cannot be represented in the 7-bit character codes.  Therefore the
   indicator of missing text SHOULD be transcoded to the ' (apostrophe)
   character in legacy text telephone systems, where this character
   exists.  For legacy systems where the ' character does not exist, the
   .  (full stop) character SHOULD be used instead.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Further%20Recommendations%20for%20Implementers%20and%20Service%20Providers"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Further Recommendations for Implementers and Service Providers</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Access%20to%20Emergency%20Services"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Access to Emergency Services</span>

   It must be possible to place an emergency call using ToIP and it must
   be possible to use a relay service in such a call.  The emergency
   service provided to users utilising the real-time text medium must be
   equivalent to the emergency service provided to users utilising
   speech or other media.

   A text gateway must be able to route real-time text calls to
   emergency service providers when any of the recognised emergency
   numbers that support text communications for the country or region
   are called, e.g., "911" in the USA and "112" in Europe.  Routing
   real-time text calls to emergency services may require the use of a
   transcoding service.

   A text gateway with cellular wireless packet-switched services must
   be able to route real-time text calls to emergency service providers
   when any of the recognized emergency numbers that support real-time
   text communication for the country is called.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Home%20Gateways%20or%20Analog%20Terminal%20Adapters"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Home Gateways or Analog Terminal Adapters</span>

   Analog terminal adapters (ATA) using SIP-based IP communication and
   RJ-11 connectors for connecting traditional PSTN devices SHOULD
   enable connection of legacy PSTN text telephones [<a href="#ref-23" title='"SIP Telephony Device Requirements and Configuration"'>23</a>].



<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   These adapters SHOULD contain V.18 modem functionality, voice
   handling functionality, and conversion functions to/from SIP-based
   ToIP with T.140 transported according to <a href="rfc4103.html">RFC 4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>], in a similar
   way as it provides interoperability for voice sessions.

   If a session is set up and text/t140 capability is not declared by
   the destination endpoint (by the endpoint terminal or the text
   gateway in the network at the endpoint), a method for invoking a
   transcoding server SHALL be used.  If no such server is available,
   the signals from the textphone MAY be transmitted in the voice
   channel as audio with a high quality of service.

   NOTE: It is preferred that such analog terminal adaptors do use <a href="rfc4103.html">RFC</a>
   <a href="rfc4103.html">4103</a> [<a href="#ref-4" title='"RTP Payload for Text Conversation"'>4</a>] on board and thus act as a text gateway.  Sending textphone
   signals over the voice channel is undesirable due to possible
   filtering and compression and packet loss between the endpoints.
   This can result in character loss in the textphone conversation or
   even not allowing the textphones to connect to each other.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.3.%20%20User%20Mobility"></a><a class="selflink" href="#section-7.3" name="section-7.3">7.3</a>.  User Mobility</span>

   ToIP User Agents SHOULD use the same mechanisms as other SIP User
   Agents to resolve mobility issues.  It is RECOMMENDED that users use
   a SIP address, resolved by a SIP registrar, to enable basic user
   mobility.  Further mechanisms are defined for all session types for
   3G IP multimedia systems.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.4.%20%20Firewalls%20and%20NATs"></a><a class="selflink" href="#section-7.4" name="section-7.4">7.4</a>.  Firewalls and NATs</span>

   ToIP uses the same signalling and transport protocols as VoIP.
   Hence, the same firewall and NAT solutions and network functionality
   that apply to VoIP MUST also apply to ToIP.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.5.%20%20Quality%20of%20Service"></a><a class="selflink" href="#section-7.5" name="section-7.5">7.5</a>.  Quality of Service</span>

   Where Quality of Service (QoS) mechanisms are used, the real-time
   text streams should be assigned appropriate QoS characteristics, so
   that the performance requirements can be met and the real-time text
   stream is not degraded unfavourably in comparison to voice
   performance in congested situations.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Security Considerations</span>

   User confidentiality and privacy need to be met as described in SIP
   [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>].  For example, nothing should reveal in an obvious way the fact
   that the ToIP user might be a person with a hearing or speech
   impairment.  It is up to the ToIP user to make his or her hearing or
   speech impairment public.  If a transcoding server is being used,



<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   this SHOULD be as transparent as possible.  However, it might still
   be possible to discern that a user might be hearing or speech
   impaired based on the attributes present in SDP, although the
   intention is that mainstream users might also choose to use ToIP.
   Encryption SHOULD be used on an end-to-end or hop-by-hop basis as
   described in SIP [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>] and SRTP [<a href="#ref-20" title='"The Secure Real-time Transport Protocol (SRTP)"'>20</a>].

   Authentication MUST be provided for users in addition to message
   integrity and access control.

   Protection against Denial-of-Service (DoS) attacks needs to be
   provided, considering the case that the ToIP users might need
   transcoding servers.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Contributors"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Contributors</span>

   The following people contributed to this document: Willem Dijkstra,
   Barry Dingle, Gunnar Hellstrom, Radhika R. Roy, Henry Sinnreich, and
   Gregg C. Vanderheiden.

   The content and concepts within are a product of the SIPPING Working
   Group.  Tom Taylor (Nortel) acted as independent reviewer and
   contributed significantly to the structure and content of this
   document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-1" name="ref-1">1</a>]   Bradner, S., Ed., "Intellectual Property Rights in IETF
         Technology", <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>, <a href="rfc3979.html">RFC 3979</a>, March 2005.

   [<a id="ref-2" name="ref-2">2</a>]   Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,
         Peterson, J., Sparks, R., Handley, M., and E. Schooler, "SIP:
         Session Initiation Protocol", <a href="rfc3261.html">RFC 3261</a>, June 2002.

   [<a id="ref-3" name="ref-3">3</a>]   Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson,
         "RTP: A Transport Protocol for Real-Time Applications", STD 64,
         <a href="rfc3550.html">RFC 3550</a>, July 2003.

   [<a id="ref-4" name="ref-4">4</a>]   Hellstrom, G. and P. Jones, "RTP Payload for Text
         Conversation", <a href="rfc4103.html">RFC 4103</a>, June 2005.

   [<a id="ref-5" name="ref-5">5</a>]   ITU-T Recommendation F.703,"Multimedia Conversational
         Services", November 2000.

   [<a id="ref-6" name="ref-6">6</a>]   Bradner, S., "Key words for use in RFCs to Indicate Requirement
         Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.



<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   [<a id="ref-7" name="ref-7">7</a>]   3GPP TS 26.226, "Cellular Text Telephone Modem Description"
         (CTM).

   [<a id="ref-8" name="ref-8">8</a>]   ITU-T Recommendation T.140, "Protocol for Multimedia
         Application Text Conversation" (February 1998) and Addendum 1
         (February 2000).

   [<a id="ref-9" name="ref-9">9</a>]   Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
         Description Protocol", <a href="rfc4566.html">RFC 4566</a>, July 2006.

   [<a id="ref-10" name="ref-10">10</a>]  Rosenberg, J., Schulzrinne, H., and P. Kyzivat, "Indicating
         User Agent Capabilities in the Session Initiation Protocol
         (SIP)", <a href="rfc3840.html">RFC 3840</a>, August 2004.

   [<a id="ref-11" name="ref-11">11</a>]  Rosenberg, J., Schulzrinne, H., and P. Kyzivat, "Caller
         Preferences for the Session Initiation Protocol (SIP)", <a href="rfc3841.html">RFC</a>
         <a href="rfc3841.html">3841</a>, August 2004.

   [<a id="ref-12" name="ref-12">12</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model with
         Session Description Protocol (SDP)", <a href="rfc3264.html">RFC 3264</a>, June 2002.

   [<a id="ref-13" name="ref-13">13</a>]  Camarillo, G., Burger, E., Schulzrinne, H., and A. van Wijk,
         "Transcoding Services Invocation in the Session Initiation
         Protocol (SIP) Using Third Party Call Control (3pcc)", <a href="rfc4117.html">RFC</a>
         <a href="rfc4117.html">4117</a>, June 2005.

   [<a id="ref-14" name="ref-14">14</a>]  Yergeau, F., "UTF-8, a transformation format of ISO 10646", STD
         63, <a href="rfc3629.html">RFC 3629</a>, November 2003.

   [<a id="ref-15" name="ref-15">15</a>]  "XHTML 1.0: The Extensible HyperText Markup Language: A
         Reformulation of HTML 4 in XML 1.0", W3C Recommendation,
         Available at <a href="http://www.w3.org/TR/xhtml1">http://www.w3.org/TR/xhtml1</a>.

   [<a id="ref-16" name="ref-16">16</a>]  ITU-T Recommendation V.18, "Operational and Interworking
         Requirements for DCEs operating in Text Telephone Mode",
         November 2000.

   [<a id="ref-17" name="ref-17">17</a>]  TIA/EIA/IS-823-A, "TTY/TDD Extension to TIA/EIA-136-410
         Enhanced Full Rate Speech Codec (must used in conjunction with
         TIA/EIA/IS-840)"

   [<a id="ref-18" name="ref-18">18</a>]  TIA/EIA/IS-127-2, "Enhanced Variable Rate Codec, Speech Service
         Option 3 for Wideband Spread Spectrum Digital Systems, Addendum
         2."

   [<a id="ref-19" name="ref-19">19</a>]  "IP Multimedia default codecs", 3GPP TS 26.235





<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


   [<a id="ref-20" name="ref-20">20</a>]  Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K.
         Norrman, "The Secure Real-time Transport Protocol (SRTP)", <a href="rfc3711.html">RFC</a>
         <a href="rfc3711.html">3711</a>, March 2004.

   [<a id="ref-21" name="ref-21">21</a>]  ITU-T Recommendation F.700, "Framework Recommendation for
         Multimedia Services", November 2000.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-22" name="ref-22">22</a>]  Charlton, N., Gasson, M., Gybels, G., Spanner, M., and A. van
         Wijk, "User Requirements for the Session Initiation Protocol
         (SIP) in Support of Deaf, Hard of Hearing and Speech-impaired
         Individuals", <a href="rfc3351.html">RFC 3351</a>, August 2002.

   [<a id="ref-23" name="ref-23">23</a>]  Sinnreich, H., Ed., Lass, S., and C. Stredicke, "SIP Telephony
         Device Requirements and Configuration", <a href="rfc4504.html">RFC 4504</a>, May 2006.

   [<a id="ref-24" name="ref-24">24</a>]  European Telecommunications Standards Institute (ETSI), "Human
         Factors (HF); Guidelines for Telecommunication Relay Services
         for Text Telephones". TR 101 806, June 2000.

   [<a id="ref-25" name="ref-25">25</a>]  TIA/EIA/825 "A Frequency Shift Keyed Modem for Use on the
         Public Switched Telephone Network." (The specification for
         45.45 and 50 bit/s TTY modems.)

   [<a id="ref-26" name="ref-26">26</a>]  International Telecommunication Union (ITU), "300 bits per
         second duplex modem standardized for use in the general
         switched telephone network". ITU-T Recommendation V.21,
         November 1988.

   [<a id="ref-27" name="ref-27">27</a>]  International Telecommunication Union (ITU), "600/1200-baud
         modem standardized for use in the general switched telephone
         network", ITU-T Recommendation V.23, November 1988.

   [<a id="ref-28" name="ref-28">28</a>]  Camarillo, G., "Framework for Transcoding with the Session
         Initiation Protocol", Work in Progress, May 2006.

   [<a id="ref-29" name="ref-29">29</a>]  Camarillo, G., <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22The+SIP+Conference+Bridge+Transcoding+Model%22" style="text-decoration: none">"The SIP Conference Bridge Transcoding Model"</a>,
         Work in Progress, January 2006.












<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


Authors' Addresses

   Guido Gybels
   Department of New Technologies
   RNID, 19-23 Featherstone Street
   London EC1Y 8SL, UK

   Tel +44-20-7294 3713
   Txt +44-20-7296 8001 Ext 3713
   Fax +44-20-7296 8069
   EMail: guido.gybels@rnid.org.uk
   <a href="http://www.ictrnid.org.uk/">http://www.ictrnid.org.uk</a>


   Arnoud A. T. van Wijk
   Real-Time Text Taskforce (R3TF)

   EMail: arnoud@realtimetext.org
   <a href="http://www.realtimetext.org/">http://www.realtimetext.org</a>
































<span class="grey">van Wijk &amp; Gybels            Informational                     [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc5194.html">RFC 5194</a>              Framework for TOIP using SIP             June 2008</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.












van Wijk &amp; Gybels            Informational                     [Page 31]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc5194 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:37 GMT --></html>