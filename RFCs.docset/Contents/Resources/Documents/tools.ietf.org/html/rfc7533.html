<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc7533 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:21 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-ellard-nfsv4-federated-fs-admin" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:7533" name="DC.Identifier"/>
<meta content="March, 2015" name="DC.Date.Issued"/>
<meta content="Lentini, James" name="DC.Creator"/>
<meta content="Tewari, Renu" name="DC.Creator"/>
<meta content="Lever, Chuck" name="DC.Creator"/>
<meta content="This document describes the administration protocol for a federated
file system (FedFS) that enables file access and namespace traversal
across collections of independently administered fileservers. The
protocol specifies a set of interfaces by which fileservers with
different administrators can form a fileserver federation that
provides a namespace composed of the file systems physically hosted on
and exported by the constituent fileservers." name="DC.Description.Abstract"/>
<meta content="Administration Protocol for Federated File Systems" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 7533 - Administration Protocol for Federated File Systems</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7533.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7533" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-nfsv4-federated-fs-admin" title="draft-ietf-nfsv4-federated-fs-admin">draft-ietf-nfsv...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7533" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7533" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7533" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                        J. Lentini
Request for Comments: 7533                                        NetApp
Category: Standards Track                                      R. Tewari
ISSN: 2070-1721                                              IBM Almaden
                                                           C. Lever, Ed.
                                                      Oracle Corporation
                                                              March 2015


           <span class="h1">Administration Protocol for Federated File Systems</span>

Abstract

   This document describes the administration protocol for a federated
   file system (FedFS) that enables file access and namespace traversal
   across collections of independently administered fileservers.  The
   protocol specifies a set of interfaces by which fileservers with
   different administrators can form a fileserver federation that
   provides a namespace composed of the file systems physically hosted
   on and exported by the constituent fileservers.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7533">http://www.rfc-editor.org/info/rfc7533</a>.

















<span class="grey">Lentini, et al.              Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


Copyright Notice

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

























<span class="grey">Lentini, et al.              Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-4">4</a>
      <a href="#section-1.1">1.1</a>. Definitions ................................................<a href="#page-4">4</a>
      <a href="#section-1.2">1.2</a>. Requirements Language ......................................<a href="#page-6">6</a>
   <a href="#section-2">2</a>. Protocol ........................................................<a href="#page-7">7</a>
   <a href="#section-3">3</a>. Error Values ...................................................<a href="#page-12">12</a>
   <a href="#section-4">4</a>. Data Types .....................................................<a href="#page-15">15</a>
      <a href="#section-4.1">4.1</a>. FedFsNsdbName Equality ....................................<a href="#page-17">17</a>
   <a href="#section-5">5</a>. Procedures .....................................................<a href="#page-17">17</a>
      <a href="#section-5.1">5.1</a>. FEDFS_NULL ................................................<a href="#page-18">18</a>
           <a href="#section-5.1.1">5.1.1</a>. Synopsis ...........................................<a href="#page-18">18</a>
           <a href="#section-5.1.2">5.1.2</a>. Description ........................................<a href="#page-18">18</a>
           <a href="#section-5.1.3">5.1.3</a>. Errors .............................................<a href="#page-18">18</a>
      <a href="#section-5.2">5.2</a>. FEDFS_CREATE_JUNCTION .....................................<a href="#page-18">18</a>
           <a href="#section-5.2.1">5.2.1</a>. Synopsis ...........................................<a href="#page-18">18</a>
           <a href="#section-5.2.2">5.2.2</a>. Description ........................................<a href="#page-18">18</a>
           <a href="#section-5.2.3">5.2.3</a>. Errors .............................................<a href="#page-20">20</a>
      <a href="#section-5.3">5.3</a>. FEDFS_DELETE_JUNCTION .....................................<a href="#page-20">20</a>
           <a href="#section-5.3.1">5.3.1</a>. Synopsis ...........................................<a href="#page-20">20</a>
           <a href="#section-5.3.2">5.3.2</a>. Description ........................................<a href="#page-20">20</a>
           <a href="#section-5.3.3">5.3.3</a>. Errors .............................................<a href="#page-22">22</a>
      <a href="#section-5.4">5.4</a>. FEDFS_LOOKUP_JUNCTION .....................................<a href="#page-22">22</a>
           <a href="#section-5.4.1">5.4.1</a>. Synopsis ...........................................<a href="#page-22">22</a>
           <a href="#section-5.4.2">5.4.2</a>. Description ........................................<a href="#page-22">22</a>
           <a href="#section-5.4.3">5.4.3</a>. Errors .............................................<a href="#page-25">25</a>
      <a href="#section-5.5">5.5</a>. FEDFS_CREATE_REPLICATION ..................................<a href="#page-26">26</a>
           <a href="#section-5.5.1">5.5.1</a>. Synopsis ...........................................<a href="#page-26">26</a>
           <a href="#section-5.5.2">5.5.2</a>. Description ........................................<a href="#page-26">26</a>
           <a href="#section-5.5.3">5.5.3</a>. Errors .............................................<a href="#page-27">27</a>
      <a href="#section-5.6">5.6</a>. FEDFS_DELETE_REPLICATION ..................................<a href="#page-27">27</a>
           <a href="#section-5.6.1">5.6.1</a>. Synopsis ...........................................<a href="#page-27">27</a>
           <a href="#section-5.6.2">5.6.2</a>. Description ........................................<a href="#page-27">27</a>
           <a href="#section-5.6.3">5.6.3</a>. Errors .............................................<a href="#page-28">28</a>
      <a href="#section-5.7">5.7</a>. FEDFS_LOOKUP_REPLICATION ..................................<a href="#page-28">28</a>
           <a href="#section-5.7.1">5.7.1</a>. Synopsis ...........................................<a href="#page-28">28</a>
           <a href="#section-5.7.2">5.7.2</a>. Description ........................................<a href="#page-28">28</a>
           <a href="#section-5.7.3">5.7.3</a>. Errors .............................................<a href="#page-29">29</a>
      <a href="#section-5.8">5.8</a>. FEDFS_SET_NSDB_PARAMS .....................................<a href="#page-30">30</a>
           <a href="#section-5.8.1">5.8.1</a>. Synopsis ...........................................<a href="#page-30">30</a>
           <a href="#section-5.8.2">5.8.2</a>. Description ........................................<a href="#page-30">30</a>
           <a href="#section-5.8.3">5.8.3</a>. Errors .............................................<a href="#page-31">31</a>
      <a href="#section-5.9">5.9</a>. FEDFS_GET_NSDB_PARAMS .....................................<a href="#page-31">31</a>
           <a href="#section-5.9.1">5.9.1</a>. Synopsis ...........................................<a href="#page-31">31</a>
           <a href="#section-5.9.2">5.9.2</a>. Description ........................................<a href="#page-31">31</a>
           <a href="#section-5.9.3">5.9.3</a>. Errors .............................................<a href="#page-32">32</a>
      <a href="#section-5.10">5.10</a>. FEDFS_GET_LIMITED_NSDB_PARAMS ............................<a href="#page-32">32</a>
           <a href="#section-5.10.1">5.10.1</a>. Synopsis ..........................................<a href="#page-32">32</a>



<span class="grey">Lentini, et al.              Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


           <a href="#section-5.10.2">5.10.2</a>. Description .......................................<a href="#page-32">32</a>
           <a href="#section-5.10.3">5.10.3</a>. Errors ............................................<a href="#page-33">33</a>
   <a href="#section-6">6</a>. Security Considerations ........................................<a href="#page-33">33</a>
   <a href="#section-7">7</a>. IANA Considerations ............................................<a href="#page-34">34</a>
   <a href="#section-8">8</a>. References .....................................................<a href="#page-34">34</a>
      <a href="#section-8.1">8.1</a>. Normative References ......................................<a href="#page-34">34</a>
      <a href="#section-8.2">8.2</a>. Informative References ....................................<a href="#page-35">35</a>
   Acknowledgments ...................................................<a href="#page-36">36</a>
   Authors' Addresses ................................................<a href="#page-37">37</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   A federated file system enables file access and namespace traversal
   in a uniform, secure, and consistent manner across multiple
   independent fileservers within an enterprise (and possibly across
   multiple enterprises) with reasonably good performance.

   Traditionally, building a namespace that spans multiple fileservers
   has been difficult for two reasons.  First, the fileservers that
   export pieces of the namespace are often not in the same
   administrative domain.  Second, there is no standard mechanism for
   the fileservers to cooperatively present the namespace.  Fileservers
   might provide proprietary management tools, and in some cases, an
   administrator might be able to use the proprietary tools to build a
   shared namespace out of the exported file systems.  Relying on
   vendor-proprietary tools does not work in larger enterprises or when
   collaborating across enterprises because it is likely that the system
   will contain fileservers running different software, each with their
   own protocols, with no common protocol to manage the namespace or
   exchange namespace information.

   The requirements for federated namespaces are described in [<a href="rfc5716.html" title='"Requirements for Federated File Systems"'>RFC5716</a>].

   The protocol for federated file systems described in [<a href="rfc7532.html" title='"Namespace Database (NSDB) Protocol for Federated File Systems"'>RFC7532</a>] allows
   fileservers from different vendors and/or with different
   administrators to cooperatively build a namespace.

   This document describes the protocol used by administrators to
   configure the fileservers and construct the namespace.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Definitions"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Definitions</span>

   Administrator:  A user with the necessary authority to initiate
      administrative tasks on one or more servers.

   Admin Entity:  A server or agent that administers a collection of
      fileservers and persistently stores the namespace information.




<span class="grey">Lentini, et al.              Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   File-Access Client:  Standard off-the-shelf, network-attached storage
      (NAS) client software that communicates with fileservers using a
      standard file-access protocol.

   Federation:  A set of fileserver collections and singleton
      fileservers that use a common set of interfaces and protocols in
      order to provide to file-access clients a federated namespace
      accessible through a file system access protocol.

   Fileserver:  A server that stores physical fileset data or refers
      file-access clients to other fileservers.  A fileserver provides
      access to its shared file system data via a file-access protocol.

   Fileset:  The abstraction of a set of files and the directory tree
      that contains them.  A fileset is the fundamental unit of data
      management in the federation.

      Note that all files within a fileset are descendants of one
      directory and that filesets do not span file systems.

   File System:  A self-contained unit of export for a fileserver and
      the mechanism used to implement filesets.  The fileset does not
      need to be rooted at the root of the file system, nor at the
      export point for the file system.

      A single file system MAY implement more than one fileset, if the
      file-access protocol and the fileserver permit this.

   File-Access Protocol:  A network file system access protocol such as
      the Network File System (NFS) version 4 [<a href="rfc7530.html" title='"Network File System (NFS) Version 4 Protocol"'>RFC7530</a>] or the Common
      Internet File System (CIFS) [<a href="#ref-MS-SMB" title='"Server Message Block (SMB) Protocol Specification"'>MS-SMB</a>] [<a href="#ref-MS-SMB2" title='"Server Message Block (SMB) Version 2 Protocol Specification"'>MS-SMB2</a>] [<a href="#ref-MS-CIFS" title='"Common Internet File System (CIFS) Protocol Specification"'>MS-CIFS</a>].

   FSL (Fileset Location):  The location of the implementation of a
      fileset at a particular moment in time.  An FSL MUST be something
      that can be translated into a protocol-specific description of a
      resource that a file-access client can access directly, such as an
      fs_locations attribute (for NFSv4) or a share name (for CIFS).

   FSN (Fileset Name):  A platform-independent and globally unique name
      for a fileset.  Two FSLs that implement replicas of the same
      fileset MUST have the same FSN, and if a fileset is migrated from
      one location to another, the FSN of that fileset MUST remain the
      same.

   Junction:  A file system object used to link a directory name in the
      current fileset with an object within another fileset.  The
      server-side "link" from a leaf node in one fileset to the root of
      another fileset.



<span class="grey">Lentini, et al.              Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   Namespace:  A filename/directory tree that a sufficiently authorized
      file-access client can observe.

   NSDB (Namespace Database) Service:  A service that maps FSNs to FSLs.
      The NSDB may also be used to store other information, such as
      annotations for these mappings and their components.

   NSDB Node:  The name or location of a server that implements part of
      the NSDB service and is responsible for keeping track of the FSLs
      (and related information) that implement a given partition of the
      FSNs.

   Referral:  A server response to a file-access client access that
      directs the client to evaluate the current object as a reference
      to an object at a different location (specified by an FSL) in
      another fileset and possibly hosted on another fileserver.  The
      client re-attempts the access to the object at the new location.

   Replica:  A redundant implementation of a fileset.  Each replica
      shares the same FSN but has a different FSL.

      Replicas may be used to increase availability or performance.
      Updates to replicas of the same fileset MUST appear to occur in
      the same order; therefore, each replica is self-consistent at any
      moment.

      We do not assume that updates to each replica occur
      simultaneously.  If a replica is offline or unreachable, the other
      replicas may be updated.

   Server Collection:  A set of fileservers administered as a unit.  A
      server collection may be administered with vendor-specific
      software.

      The namespace provided by a server collection could be part of the
      federated namespace.

   Singleton Server:  A server collection containing only one server; a
      stand-alone fileserver.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Requirements%20Language"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].






<span class="grey">Lentini, et al.              Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Protocol"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Protocol</span>

   The Remote Procedure Call (RPC) protocol used to convey
   administration operations is the Open Network Computing (ONC) RPC
   protocol [<a href="rfc5531.html" title='"RPC: Remote Procedure Call Protocol Specification Version 2"'>RFC5531</a>].  The data structures used for the parameters and
   return values of these procedures are expressed in this document in
   External Data Representation (XDR) [<a href="rfc4506.html" title='"XDR: External Data Representation Standard"'>RFC4506</a>].

   The XDR definitions below are formatted to allow the reader to easily
   extract them from the document.  The reader can use the following
   shell script to extract the definitions:

             &lt;CODE BEGINS&gt;

             #!/bin/sh
             grep '^ *///' | sed 's?^ */// ??' | sed 's?^ *///$??'

             &lt;CODE ENDS&gt;

   If the above script is stored in a file called "extract.sh" and this
   document is in a file called "spec.txt", then the reader can do:

             &lt;CODE BEGINS&gt;

             sh extract.sh &lt; spec.txt &gt; admin1.xdr

             &lt;CODE ENDS&gt;

   The effect of the script is to remove leading white space from each
   line, plus a sentinel sequence of "///".

   The protocol definition in XDR notation is shown below.  We begin by
   defining basic constants and structures used by the protocol.  We
   then present the procedures defined by the protocol.

   &lt;CODE BEGINS&gt;

    /// /*
    ///  * Copyright (c) 2015 IETF Trust and the persons identified
    ///  * as authors of the code.  All rights reserved.
    ///  *
    ///  * The authors of the code are:
    ///  * J. Lentini, C. Everhart, D. Ellard, R. Tewari, and M. Naik.
    ///  *
    ///  * Redistribution and use in source and binary forms, with
    ///  * or without modification, are permitted provided that the
    ///  * following conditions are met:
    ///  *



<span class="grey">Lentini, et al.              Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


    ///  * - Redistributions of source code must retain the above
    ///  *   copyright notice, this list of conditions and the
    ///  *   following disclaimer.
    ///  *
    ///  * - Redistributions in binary form must reproduce the above
    ///  *   copyright notice, this list of conditions and the
    ///  *   following disclaimer in the documentation and/or other
    ///  *   materials provided with the distribution.
    ///  *
    ///  * - Neither the name of Internet Society, IETF or IETF
    ///  *   Trust, nor the names of specific contributors, may be
    ///  *   used to endorse or promote products derived from this
    ///  *   software without specific prior written permission.
    ///  *
    ///  *   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS
    ///  *   AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED
    ///  *   WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
    ///  *   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
    ///  *   FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO
    ///  *   EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
    ///  *   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
    ///  *   EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
    ///  *   NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
    ///  *   SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
    ///  *   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
    ///  *   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
    ///  *   OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
    ///  *   IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
    ///  *   ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    ///  */
    ///
    /// enum FedFsStatus {
    ///  FEDFS_OK                                 = 0,
    ///  FEDFS_ERR_ACCESS                         = 1,
    ///  FEDFS_ERR_BADCHAR                        = 2,
    ///  FEDFS_ERR_BADNAME                        = 3,
    ///  FEDFS_ERR_NAMETOOLONG                    = 4,
    ///  FEDFS_ERR_LOOP                           = 5,
    ///  FEDFS_ERR_BADXDR                         = 6,
    ///  FEDFS_ERR_EXIST                          = 7,
    ///  FEDFS_ERR_INVAL                          = 8,
    ///  FEDFS_ERR_IO                             = 9,
    ///  FEDFS_ERR_NOSPC                          = 10,
    ///  FEDFS_ERR_NOTJUNCT                       = 11,
    ///  FEDFS_ERR_NOTLOCAL                       = 12,
    ///  FEDFS_ERR_PERM                           = 13,
    ///  FEDFS_ERR_ROFS                           = 14,
    ///  FEDFS_ERR_SVRFAULT                       = 15,



<span class="grey">Lentini, et al.              Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


    ///  FEDFS_ERR_NOTSUPP                        = 16,
    ///  FEDFS_ERR_NSDB_ROUTE                     = 17,
    ///  FEDFS_ERR_NSDB_DOWN                      = 18,
    ///  FEDFS_ERR_NSDB_CONN                      = 19,
    ///  FEDFS_ERR_NSDB_AUTH                      = 20,
    ///  FEDFS_ERR_NSDB_LDAP                      = 21,
    ///  FEDFS_ERR_NSDB_LDAP_VAL                  = 22,
    ///  FEDFS_ERR_NSDB_NONCE                     = 23,
    ///  FEDFS_ERR_NSDB_NOFSN                     = 24,
    ///  FEDFS_ERR_NSDB_NOFSL                     = 25,
    ///  FEDFS_ERR_NSDB_RESPONSE                  = 26,
    ///  FEDFS_ERR_NSDB_FAULT                     = 27,
    ///  FEDFS_ERR_NSDB_PARAMS                    = 28,
    ///  FEDFS_ERR_NSDB_LDAP_REFERRAL             = 29,
    ///  FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL         = 30,
    ///  FEDFS_ERR_NSDB_LDAP_REFERRAL_NOTFOLLOWED = 31,
    ///  FEDFS_ERR_NSDB_PARAMS_LDAP_REFERRAL      = 32,
    ///  FEDFS_ERR_PATH_TYPE_UNSUPP               = 33,
    ///  FEDFS_ERR_DELAY                          = 34,
    ///  FEDFS_ERR_NO_CACHE                       = 35,
    ///  FEDFS_ERR_UNKNOWN_CACHE                  = 36,
    ///  FEDFS_ERR_NO_CACHE_UPDATE                = 37
    /// };
    ///
    /// typedef opaque                 utf8string&lt;&gt;;
    /// typedef utf8string             ascii_REQUIRED4;
    /// typedef utf8string             utf8val_REQUIRED4;
    ///
    /// typedef opaque FedFsUuid[16];
    ///
    /// struct FedFsNsdbName {
    ///         unsigned int           port;
    ///         utf8val_REQUIRED4      hostname;
    /// };
    ///
    /// typedef ascii_REQUIRED4 FedFsPathComponent;
    /// typedef FedFsPathComponent FedFsPathName&lt;&gt;;
    ///
    /// struct FedFsFsn {
    ///         FedFsUuid              fsnUuid;
    ///         FedFsNsdbName          nsdbName;
    /// };
    ///
    /// enum FedFsFslType {
    ///  FEDFS_NFS_FSL = 0
    /// };
    ///
    /// struct FedFsNfsFsl {



<span class="grey">Lentini, et al.              Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


    ///         FedFsUuid              fslUuid;
    ///         unsigned int           port;
    ///         utf8val_REQUIRED4      hostname;
    ///         FedFsPathName          path;
    /// };
    ///
    /// union FedFsFsl switch(FedFsFslType type) {
    ///  case FEDFS_NFS_FSL:
    ///         FedFsNfsFsl            nfsFsl;
    /// };
    ///
    /// enum FedFsPathType {
    ///  FEDFS_PATH_SYS = 0,
    ///  FEDFS_PATH_NFS = 1
    /// };
    ///
    /// union FedFsPath switch(FedFsPathType type) {
    ///  case FEDFS_PATH_SYS: /* administrative path */
    ///         FedFsPathName          adminPath;
    ///  case FEDFS_PATH_NFS: /* NFS namespace path */
    ///         FedFsPathName          nfsPath;
    /// };
    ///
    /// struct FedFsCreateArgs {
    ///         FedFsPath              path;
    ///         FedFsFsn               fsn;
    /// };
    ///
    /// enum FedFsResolveType {
    ///  FEDFS_RESOLVE_NONE  = 0,
    ///  FEDFS_RESOLVE_CACHE = 1,
    ///  FEDFS_RESOLVE_NSDB  = 2
    /// };
    ///
    /// struct FedFsLookupArgs {
    ///         FedFsPath              path;
    ///         FedFsResolveType       resolve;
    /// };
    ///
    /// struct FedFsLookupResOk {
    ///         FedFsFsn               fsn;
    ///         FedFsFsl               fsl&lt;&gt;;
    /// };
    ///
    /// struct FedFsLookupResReferralVal {
    ///         FedFsNsdbName          targetNsdb;
    ///         unsigned int           ldapResultCode;
    /// };



<span class="grey">Lentini, et al.              Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


    ///
    /// union FedFsLookupRes switch (FedFsStatus status) {
    ///  case FEDFS_OK:
    ///  case FEDFS_ERR_NO_CACHE_UPDATE:
    ///         FedFsLookupResOk           resok;
    ///  case FEDFS_ERR_NSDB_LDAP_VAL:
    ///         unsigned int               ldapResultCode;
    ///  case FEDFS_ERR_NSDB_LDAP_REFERRAL:
    ///  case FEDFS_ERR_NSDB_PARAMS_LDAP_REFERRAL:
    ///         FedFsNsdbName              targetNsdb;
    ///  case FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL:
    ///         FedFsLookupResReferralVal  resReferralVal;
    ///  default:
    ///         void;
    /// };
    ///
    /// enum FedFsConnectionSec {
    ///  FEDFS_SEC_NONE = 0,
    ///  FEDFS_SEC_TLS = 1 /* StartTLS mechanism; <a href="rfc4513.html#section-3">RFC 4513, Section 3</a> */
    /// };
    ///
    /// union FedFsNsdbParams switch (FedFsConnectionSec secType) {
    ///  case FEDFS_SEC_TLS:
    ///         opaque                   secData&lt;&gt;;
    ///  default:
    ///         void;
    /// };
    ///
    /// struct FedFsSetNsdbParamsArgs {
    ///         FedFsNsdbName            nsdbName;
    ///         FedFsNsdbParams          params;
    /// };
    ///
    /// union FedFsGetNsdbParamsRes switch (FedFsStatus status) {
    ///  case FEDFS_OK:
    ///         FedFsNsdbParams          params;
    ///  default:
    ///         void;
    /// };
    ///
    /// union FedFsGetLimitedNsdbParamsRes switch (FedFsStatus status) {
    ///  case FEDFS_OK:
    ///         FedFsConnectionSec       secType;
    ///  default:
    ///         void;
    /// };
    ///
    /// program FEDFS_PROG {



<span class="grey">Lentini, et al.              Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


    ///  version FEDFS_V1 {
    ///      void FEDFS_NULL(void) = 0;
    ///      FedFsStatus FEDFS_CREATE_JUNCTION(
    ///                   FedFsCreateArgs) = 1;
    ///      FedFsStatus FEDFS_DELETE_JUNCTION(
    ///                   FedFsPath) = 2;
    ///      FedFsLookupRes FEDFS_LOOKUP_JUNCTION(
    ///                   FedFsLookupArgs) = 3;
    ///      FedFsStatus FEDFS_CREATE_REPLICATION(
    ///                   FedFsCreateArgs) = 7;
    ///      FedFsStatus FEDFS_DELETE_REPLICATION(
    ///                   FedFsPath) = 8;
    ///      FedFsLookupRes FEDFS_LOOKUP_REPLICATION(
    ///                   FedFsLookupArgs) = 9;
    ///      FedFsStatus FEDFS_SET_NSDB_PARAMS(
    ///                   FedFsSetNsdbParamsArgs) = 4;
    ///      FedFsGetNsdbParamsRes FEDFS_GET_NSDB_PARAMS(
    ///                   FedFsNsdbName) = 5;
    ///      FedFsGetLimitedNsdbParamsRes FEDFS_GET_LIMITED_NSDB_PARAMS(
    ///                   FedFsNsdbName) = 6;
    ///  } = 1;
    /// } = 100418;

   &lt;CODE ENDS&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Error%20Values"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Error Values</span>

   The results of successful operations will consist of a status of
   FEDFS_OK.  The results of unsuccessful operations will begin with a
   status, other than FEDFS_OK, that indicates the reason why the
   operation failed.

   Many of the error status names and meanings (and the prose for their
   descriptions) are taken from the specification for NFSv4 [<a href="rfc7530.html" title='"Network File System (NFS) Version 4 Protocol"'>RFC7530</a>].
   Note, however, that the numeric values for the status codes are
   different.  For example, the name and meaning of FEDFS_ERR_ACCESS was
   inspired by NFSv4's NFS4ERR_ACCESS, but their numeric values are
   different.

   The status of an unsuccessful operation will generally only indicate
   the first error encountered during the attempt to execute the
   operation.

   FEDFS_OK:  No errors were encountered.  The operation was a success.

   FEDFS_ERR_ACCESS:  Permission denied.  The caller does not have the
      correct permission to perform the requested operation.




<span class="grey">Lentini, et al.              Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   FEDFS_ERR_BADCHAR:  A UTF-8 string contains a character that is not
      supported by the server in the context in which it being used.

   FEDFS_ERR_BADNAME:  A name string in a request consisted of valid
      UTF-8 characters supported by the server, but the name is not
      supported by the server as a valid name for the current operation.

   FEDFS_ERR_NAMETOOLONG:  Returned when the pathname in an operation
      exceeds the server's implementation limit.

   FEDFS_ERR_LOOP:  Returned when too many symbolic links were
      encountered in resolving pathname.

   FEDFS_ERR_BADXDR:  The server encountered an XDR decoding error while
      processing an operation.

   FEDFS_ERR_EXIST:  The junction specified already exists.

   FEDFS_ERR_INVAL:  Invalid argument for an operation.

   FEDFS_ERR_IO:  A hard error occurred while processing the requested
      operation.

   FEDFS_ERR_NOSPC:  The requested operation would have caused the
      server's file system to exceed some limit (for example, if there
      is a fixed number of junctions per fileset or per server).

   FEDFS_ERR_NOTJUNCT:  The caller specified a path that does not end in
      a junction as the operand for an operation that requires the last
      component of the path to be a junction.

   FEDFS_ERR_NOTLOCAL:  The caller specified a path that contains a
      junction in any position other than the last component.

   FEDFS_ERR_PERM:  The operation was not allowed because the caller is
      either not a privileged user or not the owner of an object that
      would be modified by the operation.

   FEDFS_ERR_ROFS:  A modifying operation was attempted on a read-only
      file system.

   FEDFS_ERR_SVRFAULT:  An unanticipated non-protocol error occurred on
      the server.

   FEDFS_ERR_NSDB_ROUTE:  The fileserver was unable to find a route to
      the NSDB.





<span class="grey">Lentini, et al.              Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   FEDFS_ERR_NSDB_DOWN:  The fileserver determined that the NSDB was
      down.

   FEDFS_ERR_NSDB_CONN:  The fileserver was unable to establish a
      connection with the NSDB.

   FEDFS_ERR_NSDB_AUTH:  The fileserver was unable to authenticate and
      establish a secure connection with the NSDB.

   FEDFS_ERR_NSDB_LDAP:  A Lightweight Directory Access Protocol (LDAP)
      error occurred on the connection between the fileserver and NSDB.

   FEDFS_ERR_NSDB_LDAP_VAL:  Indicates the same error as
      FEDFS_ERR_NSDB_LDAP and allows the LDAP protocol error value to be
      returned back to an ADMIN protocol client.

   FEDFS_ERR_NSDB_NONCE:  The fileserver was unable to locate the NSDB
      Container Entry (NCE) in the appropriate NSDB.

   FEDFS_ERR_NSDB_NOFSN:  The fileserver was unable to locate the given
      FSN in the appropriate NSDB.

   FEDFS_ERR_NSDB_NOFSL:  The fileserver was unable to locate any FSLs
      for the given FSN in the appropriate NSDB.

   FEDFS_ERR_NSDB_RESPONSE:  The fileserver received a malformed
      response from the NSDB.  This includes situations when an NSDB
      entry (e.g., FSN or FSL) is missing a required attribute.

   FEDFS_ERR_NSDB_FAULT:  An unanticipated error related to the NSDB
      occurred.

   FEDFS_ERR_NSDB_PARAMS:  The fileserver does not have any connection
      parameters on record for the specified NSDB.

   FEDFS_ERR_NSDB_LDAP_REFERRAL:  The fileserver received an LDAP
      referral that it was unable to follow.

   FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL:  Indicates the same error as
      FEDFS_ERR_NSDB_LDAP_REFERRAL and allows the LDAP protocol error
      value to be returned back to an ADMIN protocol client.

   FEDFS_ERR_NSDB_LDAP_REFERRAL_NOTFOLLOWED:  The fileserver received an
      LDAP referral that it chose not to follow, either because the
      fileserver does not support following LDAP referrals or LDAP
      referral following is disabled.





<span class="grey">Lentini, et al.              Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   FEDFS_ERR_NSDB_PARAMS_LDAP_REFERRAL:  The fileserver received an LDAP
      referral that it chose not to follow because the fileserver had no
      NSDB parameters for the NSDB targeted by the LDAP referral.

   FEDFS_ERR_PATH_TYPE_UNSUPP:  The fileserver does not support the
      specified FedFsPathType value.

   FEDFS_ERR_NOTSUPP:  The fileserver does not support the specified
      procedure.

   FEDFS_ERR_DELAY:  The fileserver initiated the request but was not
      able to complete it in a timely fashion.  The ADMIN protocol
      client should wait and then try the request with a new RPC
      transaction ID.

   FEDFS_ERR_NO_CACHE:  The fileserver does not implement an FSN-to-FSL
      cache.

   FEDFS_ERR_UNKNOWN_CACHE:  The software receiving the ONC RPC request
      is unaware if the fileserver implements an FSN-to-FSL cache or is
      unable to communicate with the FSN-to-FSL cache if it exists.

   FEDFS_ERR_NO_CACHE_UPDATE:  The fileserver was unable to update its
      FSN-to-FSL cache.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Data%20Types"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Data Types</span>

   The basic data types defined above are formatted as follows:

   FedFsUuid:  A universally unique identifier (UUID) as described in
      [<a href="rfc4122.html" title='"A Universally Unique IDentifier (UUID) URN Namespace"'>RFC4122</a>] as a version 4 UUID.  The UUID MUST be formatted in
      network byte order.

   FedFsNsdbName:  A (hostname, port) pair.

      The hostname is a variable-length UTF-8 string that represents an
      NSDB's network location in DNS name notation.  It SHOULD be
      prepared using the domain name rules defined in <a href="#section-12.6">Section 12.6</a>
      ("Types with Processing Defined by Other Internet Areas") of
      [<a href="rfc7530.html" title='"Network File System (NFS) Version 4 Protocol"'>RFC7530</a>].  The DNS name MUST be represented using a fully
      qualified domain name.

      The port value in the FedFsNsdbName indicates the LDAP port on the
      NSDB (see [<a href="rfc4511.html" title='"Lightweight Directory Access Protocol (LDAP): The Protocol"'>RFC4511</a>]).  The value MUST be in the range 0 to 65535.
      A value of 0 indicates that the standard LDAP port number, 389,
      MUST be assumed.





<span class="grey">Lentini, et al.              Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


      FSNs are immutable and invariant.  The attributes of an FSN,
      including the fedfsNsdbName, are expected to remain constant.
      Therefore, a FedFsNsdbName MUST NOT contain a network address,
      such as an IPv4 or IPv6 address, as this would indefinitely assign
      the network address.

   FedFsPathComponent:  A case-sensitive UTF-8 string containing a file
      system path component.  The component names of an NFSv4 pathname
      MUST be prepared using the component name rules defined in
      <a href="#section-12">Section 12</a> ("Internationalization") of [<a href="rfc7530.html" title='"Network File System (NFS) Version 4 Protocol"'>RFC7530</a>] prior to encoding
      the path component of an NFS URI.

   FedFsPathName:  A variable-length array of FedFsPathComponent values
      representing a file system path.  The path's first component is
      stored at the first position of the array, the second component is
      stored at the second position of the array, and so on.

      The path "/" MUST be encoded as an array with zero components.

      A FedFsPathName MUST NOT contain any zero-length components.

   FedFsPath:  A pathname container.  The format and semantics of the
      pathname are defined by the FedFsPathType value.

   FedFsPathType:  The type-specific description of a pathname.

      A FEDFS_PATH_SYS is an implementation-dependent administrative
      pathname.  For example, it could be a local file system path.

      A FEDFS_PATH_NFS is a pathname in the NFSv4 server's single-server
      namespace.

   FedFsNsdbParams:  A set of parameters for connecting to an NSDB.
      Conceptually, the fileserver contains a data structure that maps
      an NSDB name (DNS name and port value) to these LDAP connection
      parameters.

      The secType field indicates the security mechanism that MUST be
      used to protect all connections to the NSDB with the connection
      parameters.

      A value of FEDFS_SEC_NONE indicates that a transport security
      mechanism MUST NOT be used when connecting to the NSDB.  In this
      case, the secData array will have a length of zero.

      A value of FEDFS_SEC_TLS indicates that the StartTLS security
      mechanism [<a href="rfc4513.html" title='"Lightweight Directory Access Protocol (LDAP): Authentication Methods and Security Mechanisms"'>RFC4513</a>] MUST be used to protect all connections to the
      NSDB.  In this case, the secData array will contain an X.509v3



<span class="grey">Lentini, et al.              Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


      root certificate in binary DER format [<a href="rfc5280.html" title='"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"'>RFC5280</a>] fulfilling the
      Transport Layer Security (TLS) requirement that root keys be
      distributed independently from the TLS protocol.  The certificate
      MUST be used by the fileserver as a trust anchor to validate the
      NSDB's TLS server certificate list chain (see <a href="rfc5246.html#section-7.4.2">Section 7.4.2 of
      [RFC5246]</a>) and thus authenticate the identity of the NSDB.  The
      certificate could be that of a certificate authority or a self-
      signed certificate.  To ensure that this security configuration
      information does not cause vulnerabilities for other services,
      trust anchors provided through secData MUST only be used for the
      NSDB service (as opposed to being installed as system-wide trust
      anchors for other services).  Most popular TLS libraries provide
      ways in which this can be done, such as denoting a private file
      system location for the certificates.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20FedFsNsdbName%20Equality"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  FedFsNsdbName Equality</span>

   Two FedFsNsdbNames are considered equal if their respective hostname
   and port fields contain the same values.  The only exception to this
   rule is that a value of 0 in the port field always matches the
   standard LDAP port number, 389.

   Therefore, the FedFsNsdbName "(nsdb.example.com, 0)" is considered
   equal to "(nsdb.example.com, 389)" but not equal to
   "(nsdb.example.com, 1066)" since the port numbers are different or
   "(nsdb.foo.example.com, 389)" since the hostnames are different.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Procedures"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Procedures</span>

   The procedures defined in <a href="#section-2">Section 2</a> are described in detail in the
   following sections.

   Fileservers that participate as "internal" nodes in the federated
   namespace MUST implement the following procedures:

      FEDFS_NULL
      FEDFS_CREATE_JUNCTION
      FEDFS_DELETE_JUNCTION
      FEDFS_LOOKUP_JUNCTION
      FEDFS_SET_NSDB_PARAMS
      FEDFS_GET_NSDB_PARAMS
      FEDFS_GET_LIMITED_NSDB_PARAMS

   Furthermore, they SHOULD implement the following procedures:

      FEDFS_CREATE_REPLICATION
      FEDFS_DELETE_REPLICATION
      FEDFS_LOOKUP_REPLICATION



<span class="grey">Lentini, et al.              Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   Fileservers that participate as "leaf" nodes in the namespace (i.e.,
   fileservers that host filesets that are the target of junctions but
   that do not contain any junctions) are not required to implement any
   of these operations.

   Operations that modify the state of a replicated fileset MUST result
   in the update of all of the replicas in a consistent manner.
   Ideally, all of the replicas SHOULD be updated before any operation
   returns.  If one or more of the replicas are unavailable, the
   operation MAY succeed, but the changes MUST be applied before the
   unavailable replicas are brought back online.  We assume that
   replicas are updated via some protocol that permits state changes to
   be reflected consistently across the set of replicas in such a manner
   that the replicas will converge to a consistent state within a
   bounded number of successful message exchanges between the servers
   hosting the replicas.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20FEDFS_NULL"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  FEDFS_NULL</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.1.1" name="section-5.1.1">5.1.1</a>.  Synopsis</span>

   The standard NULL procedure.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.2.%20%20Description"></a><a class="selflink" href="#section-5.1.2" name="section-5.1.2">5.1.2</a>.  Description</span>

   The null RPC, which is included, by convention, in every ONC RPC
   protocol.  This procedure does not take any arguments and does not
   produce a result.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.1.3.%20%20Errors"></a><a class="selflink" href="#section-5.1.3" name="section-5.1.3">5.1.3</a>.  Errors</span>

      None.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20FEDFS_CREATE_JUNCTION"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  FEDFS_CREATE_JUNCTION</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a>.  Synopsis</span>

   Create a new junction from some location on the server (defined as a
   pathname) to an FSN.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2.%20%20Description"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a>.  Description</span>

   This operation creates a junction from a server-relative path to a
   (potentially) remote fileset named by the given FSN.

   The junction directory on the server is identified by a pathname in
   the form of an array of one or more UTF-8 path component strings.  It
   is not required that this path be accessible in any other manner



<span class="grey">Lentini, et al.              Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   (e.g., to a file-access client).  This path does not appear in the
   federated namespace, except by coincidence; there is no requirement
   that the global namespace parallel the server namespace, nor is it
   required that this path be relative to the server pseudo-root.  It
   does not need to be a path that is accessible via NFS (although the
   junction will be of limited utility if the directory specified by the
   path is not also accessible via NFS).

   If the fileset is read-only, then this operation MUST indicate this
   with a status of FEDFS_ERR_ROFS.

   If the path contains a character that is not supported by the server,
   then status FEDFS_ERR_BADCHAR MUST be returned.

   The path is REQUIRED to exist and be completely local to the server.
   It MUST NOT contain a junction.  If the last component of the path is
   a junction (i.e., this operation is attempting to create a junction
   where one already exists), then this operation MUST return the error
   FEDFS_ERR_EXIST (even if the requested junction is identical to the
   current junction).  If any other component of the path is a junction,
   then this operation MUST fail with status FEDFS_ERR_NOTLOCAL.  The
   path might contain a symbolic link (if supported by the local
   server), but the traversal of the path MUST remain within the server-
   local namespace.

   If any component of the path does not exist, then the operation MUST
   fail with status FEDFS_ERR_INVAL.

   The server MAY enforce the local permissions on the path, including
   the final component.  If a server wishes to report that a path cannot
   be traversed because of insufficient permissions, or the final
   component is an unexecutable or unwritable directory, then the
   operation MUST fail with status FEDFS_ERR_ACCESS.

   The operation SHOULD fail with status FEDFS_ERR_NSDB_PARAMS if the
   fileserver does not have any connection parameters on record for the
   specified NSDB, or the server may allow the operation to proceed
   using some set of default NSDB connection parameters.

   The association between the path and the FSN MUST be durable before
   the operation returns successfully.  If the operation return code
   indicates success, then the junction was successfully created and is
   immediately accessible.

   If successful, subsequent references via NFSv4.0 [<a href="rfc7530.html" title='"Network File System (NFS) Version 4 Protocol"'>RFC7530</a>] or NFSv4.1
   [<a href="rfc5661.html" title='"Network File System (NFS) Version 4 Minor Version 1 Protocol"'>RFC5661</a>] clients to the directory that has been replaced by the
   junction will result in a referral to a current location of the
   target fileset [<a href="rfc7532.html" title='"Namespace Database (NSDB) Protocol for Federated File Systems"'>RFC7532</a>].



<span class="grey">Lentini, et al.              Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   The effective permissions of the directory that is converted, by this
   operation, into a junction are the permissions of the root directory
   of the target fileset.  The original permissions of the directory
   (and any other attributes it might have) are subsumed by the
   junction.

   This operation does not create a fileset at the location targeted by
   the junction.  If the target fileset does not exist, the junction
   will still be created.  An NFS client will discover the missing
   fileset when it traverses the junction.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.3.%20%20Errors"></a><a class="selflink" href="#section-5.2.3" name="section-5.2.3">5.2.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_NAMETOOLONG
      FEDFS_ERR_LOOP
      FEDFS_ERR_BADXDR
      FEDFS_ERR_EXIST
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_NOSPC
      FEDFS_ERR_NOTLOCAL
      FEDFS_ERR_PERM
      FEDFS_ERR_ROFS
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_PATH_TYPE_UNSUPP
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20FEDFS_DELETE_JUNCTION"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  FEDFS_DELETE_JUNCTION</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.3.1" name="section-5.3.1">5.3.1</a>.  Synopsis</span>

   Delete an existing junction from some location on the server (defined
   as a pathname).

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.2.%20%20Description"></a><a class="selflink" href="#section-5.3.2" name="section-5.3.2">5.3.2</a>.  Description</span>

   This operation removes a junction specified by a server-relative
   path.

   As with FEDFS_CREATE_JUNCTION, the junction on the server is
   identified by a pathname in the form of an array of one or more UTF-8
   path component strings.  It is not required that this path be
   accessible in any other manner (e.g., to a file-access client).  This
   path does not appear in the federated namespace, except by



<span class="grey">Lentini, et al.              Standards Track                   [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   coincidence; there is no requirement that the global namespace
   reflect the server namespace, nor is it required that this path be
   relative to the server pseudo-root.  It does not need to be a path
   that is accessible via NFS.

   If the fileset is read-only, then this operation MUST indicate this
   with a status of FEDFS_ERR_ROFS.

   If the path contains a character that is not supported by the server,
   then status FEDFS_ERR_BADCHAR MUST be returned.

   The path used to delete a junction might not be the same path that
   was used to create the junction.  If the namespace on the server has
   changed, then the junction might now appear at a different path than
   where it was created.  If there is more than one valid path to the
   junction, any of them can be used.

   The path is REQUIRED to exist and be completely local to the server.
   It MUST NOT contain a junction, except as the final component, which
   MUST be a junction.  If any other component of the path is a
   junction, then this operation MUST fail with status
   FEDFS_ERR_NOTLOCAL.  If the last component of the path is not a
   junction, then this operation MUST return status FEDFS_ERR_NOTJUNCT.
   The path might contain a symbolic link (if supported by the local
   server), but the traversal of the path MUST remain within the server-
   local namespace.

   The server MAY enforce the local permissions on the path, including
   the final component.  If a server wishes to report that a path cannot
   be traversed because of insufficient permissions, or the final
   component is an unexecutable or unwritable directory, then the
   operation MUST fail with status FEDFS_ERR_ACCESS.

   The removal of the association between the path and the FSN MUST be
   durable before the operation returns successfully.  If the operation
   return code indicates success, then the junction was successfully
   destroyed.

   The effective permissions and other attributes of the directory that
   is restored by this operation SHOULD be identical to their value
   prior to the creation of the junction.

   After removal of the junction, the fileserver MAY check if any of its
   existing junctions reference the NSDB specified in the removed
   junction's FSN.  If the NSDB is not referenced, the fileserver MAY
   delete the connection parameters of the unreferenced NSDB.





<span class="grey">Lentini, et al.              Standards Track                   [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.3.%20%20Errors"></a><a class="selflink" href="#section-5.3.3" name="section-5.3.3">5.3.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_NAMETOOLONG
      FEDFS_ERR_LOOP
      FEDFS_ERR_BADXDR
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_NOTJUNCT
      FEDFS_ERR_NOTLOCAL
      FEDFS_ERR_PERM
      FEDFS_ERR_ROFS
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_PATH_TYPE_UNSUPP
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20FEDFS_LOOKUP_JUNCTION"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  FEDFS_LOOKUP_JUNCTION</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.4.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.4.1" name="section-5.4.1">5.4.1</a>.  Synopsis</span>

   Query the server to discover the current value of the junction (if
   any) at a given path in the server namespace.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.4.2.%20%20Description"></a><a class="selflink" href="#section-5.4.2" name="section-5.4.2">5.4.2</a>.  Description</span>

   This operation queries a server to determine whether a given path
   ends in a junction.  If it does, the FSN to which the junction refers
   and the fileserver's ability to resolve the junction is returned.

   Ordinary NFSv4 operations do not provide any general mechanism to
   determine whether an object is a junction -- there is no encoding
   specified by the NFSv4 protocol that can represent this information.

   As with FEDFS_CREATE_JUNCTION, the pathname MUST be in the form of an
   array of one or more UTF-8 path component strings.  It is not
   required that this path be accessible in any other manner (e.g., to a
   file-access client).  This path does not appear in the federated
   namespace, except by coincidence; there is no requirement that the
   global namespace reflect the server namespace, nor is it required
   that this path be relative to the server pseudo-root.  It does not
   need to be a path that is accessible via NFS.

   If the path contains a character that is not supported by the server,
   then status FEDFS_ERR_BADCHAR MUST be returned.




<span class="grey">Lentini, et al.              Standards Track                   [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   The path used to look up a junction might not be the same path that
   was used to create the junction.  If the namespace on the server has
   changed, then a junction might now appear at a different path than
   where it was created.  If there is more than one valid path to the
   junction, any of them might be used.

   The path is REQUIRED to exist and be completely local to the server.
   It MUST NOT contain a junction, except as the final component.  If
   any other component of the path is a junction, then this operation
   MUST fail with status FEDFS_ERR_NOTLOCAL.  If the last component of
   the path is not a junction, then this operation MUST return the
   status FEDFS_ERR_NOTJUNCT.  The path might contain a symbolic link
   (if supported by the local server), but the traversal of the path
   MUST remain within the server-local namespace.

   The server MAY enforce the local permissions on the path, including
   the final component.  If a server wishes to report that a path cannot
   be traversed because of insufficient permissions, or the final
   component is an unexecutable or unwritable directory, then the
   operation MUST fail with status FEDFS_ERR_ACCESS.

   If the junction exists, the resolve parameter allows for testing the
   fileserver's ability to resolve the junction.  If the junction does
   not exist, the fileserver will ignore the resolve parameter.

   If the junction exists and the resolve parameter is set to
   FEDFS_RESOLVE_NONE, the fileserver MUST NOT attempt to resolve the
   FSN.  This will allow an administrator to obtain the junction's FSN
   even if the resolution would fail.  Therefore, on success, the result
   of a FEDFS_RESOLVE_NONE call will return a zero-length fsl list in
   the FedFsLookupResOk structure.

   If the junction exists and the resolve parameter is set to
   FEDFS_RESOLVE_CACHE, the fileserver MUST attempt to resolve the FSN
   using its FSL cache, if one exists.  The fileserver MUST NOT resolve
   the FSN by contacting the appropriate NSDB.  If the fileserver's
   cache does not have a mapping for the FSN in question, the result of
   the operation MUST be FEDFS_OK with 0 elements in the
   FedFsLookupResOk structure's fsl array.  The operation MAY fail with
   status FEDFS_ERR_NO_CACHE if the fileserver does not contain an FSN-
   to-FSL cache or with status FEDFS_ERR_UNKNOWN_CACHE if the state of
   the cache is unknown.

   If the junction exists and the resolve parameter is set to
   FEDFS_RESOLVE_NSDB, the fileserver MUST attempt to resolve the FSN by
   contacting the appropriate NSDB.  The FSN MUST NOT be resolved using
   cached information.  The resolution MAY fail with
   FEDFS_ERR_NSDB_ROUTE, FEDFS_ERR_NSDB_DOWN, FEDFS_ERR_NSDB_CONN,



<span class="grey">Lentini, et al.              Standards Track                   [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   FEDFS_ERR_NSDB_AUTH, FEDFS_ERR_NSDB_LDAP, FEDFS_ERR_NSDB_LDAP_VAL,
   FEDFS_ERR_NSDB_NOFSN, FEDFS_ERR_NSDB_NOFSL, FEDFS_ERR_NSDB_NONCE,
   FEDFS_ERR_NSDB_RESPONSE, FEDFS_ERR_NSDB_FAULT,
   FEDFS_ERR_NSDB_LDAP_REFERRAL, FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL,
   FEDFS_ERR_NSDB_LDAP_REFERRAL_NOTFOLLOWED, or
   FEDFS_ERR_NSDB_PARAMS_LDAP_REFERRAL, depending on the nature of the
   failure.

   In the case of an LDAP failure, the fileserver MUST return either
   FEDFS_ERR_NSDB_LDAP or FEDFS_ERR_NSDB_LDAP_VAL.  FEDFS_ERR_NSDB_LDAP
   indicates that an LDAP protocol error occurred during the resolution.
   FEDFS_ERR_NSDB_LDAP_VAL also indicates that an LDAP protocol error
   occurred during the resolution and allows the LDAP protocol error
   value to be returned in the FedFsLookupRes's ldapResultCode field
   (see the resultCode values in <a href="rfc4511.html#section-4.1.9">Section 4.1.9 of [RFC4511]</a>).

   If the NSDB responds with an LDAP referral, either the Referral type
   defined in <a href="rfc4511.html#section-4.1.10">Section 4.1.10 of [RFC4511]</a> or the SearchResultReference
   type defined in <a href="rfc4511.html#section-4.5.3">Section 4.5.3 of [RFC4511]</a>, the fileserver SHOULD
   process the LDAP referral using the same policies as the fileserver's
   file-access protocol server.  The fileserver MUST indicate a failure
   while processing the LDAP referral using
   FEDFS_ERR_NSDB_LDAP_REFERRAL, FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL,
   FEDFS_ERR_NSDB_LDAP_REFERRAL_NOTFOLLOWED, or
   FEDFS_ERR_NSDB_PARAMS_LDAP_REFERRAL.  The
   FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL is analogous to the
   FEDFS_ERR_NSDB_LDAP_VAL error and allows the LDAP protocol error
   value to be returned in the FedFsLookupResReferralVal's
   ldapResultCode field.  The FEDFS_ERR_NSDB_LDAP_REFERRAL and
   FEDFS_ERR_NSDB_PARAMS_LDAP_REFERRAL errors allow the NSDB targeted by
   the LDAP referral to be returned in the FedFsLookupRes's targetNsdb
   field.  Similarly, the FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL error
   includes this information in the FedFsLookupResReferralVal's
   targetNsdb.

   If the fileserver has a cache of FSL records, the process of
   resolving an FSN using an NSDB SHOULD result in the cache being
   updated.  A failure to update the cache MAY be indicated with the
   FEDFS_ERR_NO_CACHE_UPDATE status value, or the operation may complete
   successfully.

   When updating the cache, new FSLs for the given FSN SHOULD be added
   to the cache, and deleted FSLs SHOULD be removed from the cache.
   This behavior is desirable because it allows an administrator to
   proactively request that the fileserver refresh its FSL cache.  For
   example, an administrator might like to refresh the fileserver's
   cache when changes are made to an FSN's FSLs.




<span class="grey">Lentini, et al.              Standards Track                   [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   If the junction is resolved, the fileserver will include a list of
   UUIDs for the FSN's FSLs in the FedFsLookupResOk structure's fsl
   array.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.4.3.%20%20Errors"></a><a class="selflink" href="#section-5.4.3" name="section-5.4.3">5.4.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_NAMETOOLONG
      FEDFS_ERR_LOOP
      FEDFS_ERR_BADXDR
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_NOTJUNCT
      FEDFS_ERR_NOTLOCAL
      FEDFS_ERR_PERM
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_NSDB_ROUTE
      FEDFS_ERR_NSDB_DOWN
      FEDFS_ERR_NSDB_CONN
      FEDFS_ERR_NSDB_AUTH
      FEDFS_ERR_NSDB_LDAP
      FEDFS_ERR_NSDB_LDAP_VAL
      FEDFS_ERR_NSDB_NONCE
      FEDFS_ERR_NSDB_NOFSN
      FEDFS_ERR_NSDB_NOFSL
      FEDFS_ERR_NSDB_RESPONSE
      FEDFS_ERR_NSDB_FAULT
      FEDFS_ERR_NSDB_PARAMS
      FEDFS_ERR_NSDB_LDAP_REFERRAL
      FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL
      FEDFS_ERR_NSDB_LDAP_REFERRAL_NOTFOLLOWED
      FEDFS_ERR_NSDB_PARAMS_LDAP_REFERRAL
      FEDFS_ERR_PATH_TYPE_UNSUPP
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY
      FEDFS_ERR_NO_CACHE
      FEDFS_ERR_UNKNOWN_CACHE
      FEDFS_ERR_NO_CACHE_UPDATE











<span class="grey">Lentini, et al.              Standards Track                   [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20FEDFS_CREATE_REPLICATION"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  FEDFS_CREATE_REPLICATION</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.5.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.5.1" name="section-5.5.1">5.5.1</a>.  Synopsis</span>

   Set an FSN representing the replication information for the fileset
   containing the pathname.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.5.2.%20%20Description"></a><a class="selflink" href="#section-5.5.2" name="section-5.5.2">5.5.2</a>.  Description</span>

   This operation indicates the replication information to be returned
   for a particular fileset.  An NFSv4 client might request fs_locations
   or fs_locations_info at any time to detect other copies of this
   fileset, and this operation supports this by supplying the FSN the
   fileserver should use to respond.  This FSN should be associated with
   the entire fileset in which the path resides and should be used to
   satisfy fs_locations or fs_locations_info attribute requests whenever
   no junction is being accessed; if a junction is being accessed, the
   FSN specified by FEDFS_CREATE_JUNCTION will take precedence.  Setting
   the replication FSN on a fileset that already has a replication FSN
   set is allowed.

   This operation differs from FEDFS_CREATE_JUNCTION in that it controls
   a fileset-wide attribute not associated with a junction.

   The server SHOULD permit this operation even on read-only filesets
   but MUST return FEDFS_ERR_ROFS if this is not possible.

   If the path contains a character that is not supported by the server,
   then status FEDFS_ERR_BADCHAR MUST be returned.

   The path is REQUIRED to exist and be completely local to the server.
   It MUST NOT contain a junction.  If any component of the path is a
   junction, then this operation MUST fail with status
   FEDFS_ERR_NOTLOCAL.  The path might contain a symbolic link (if
   supported by the local server), but the traversal of the path MUST
   remain within the server-local namespace.

   The server MAY enforce the local permissions on the path, including
   the final component.  If a server wishes to report that a path cannot
   be traversed because of insufficient permissions, or the final
   component is an unexecutable or unwritable directory, then the
   operation MUST fail with status FEDFS_ERR_ACCESS.

   The operation SHOULD fail with status FEDFS_ERR_NSDB_PARAMS if the
   fileserver does not have any connection parameters on record for the
   specified NSDB, or the server may allow the operation to proceed
   using some set of default NSDB connection parameters.




<span class="grey">Lentini, et al.              Standards Track                   [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   The same FSN value SHOULD be associated with all replicas of a file
   system.  Depending on the underlying representation, the FSN
   associated with a file system might or might not be replicated
   automatically with the file system replication mechanism.  Therefore,
   if FEDFS_CREATE_REPLICATION is used on one replica of a file system,
   it SHOULD be used on all replicas.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.5.3.%20%20Errors"></a><a class="selflink" href="#section-5.5.3" name="section-5.5.3">5.5.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_NAMETOOLONG
      FEDFS_ERR_LOOP
      FEDFS_ERR_BADXDR
      FEDFS_ERR_EXIST
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_NOSPC
      FEDFS_ERR_NOTLOCAL
      FEDFS_ERR_PERM
      FEDFS_ERR_ROFS
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_PATH_TYPE_UNSUPP
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.6.%20%20FEDFS_DELETE_REPLICATION"></a><a class="selflink" href="#section-5.6" name="section-5.6">5.6</a>.  FEDFS_DELETE_REPLICATION</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.6.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.6.1" name="section-5.6.1">5.6.1</a>.  Synopsis</span>

   Remove the replication information for the fileset containing the
   pathname.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.6.2.%20%20Description"></a><a class="selflink" href="#section-5.6.2" name="section-5.6.2">5.6.2</a>.  Description</span>

   This operation removes any replication information from the fileset
   in which the path resides, such that NFSv4 client requests for
   fs_locations or fs_locations_info in the absence of a junction will
   not be satisfied.

   This operation differs from FEDFS_DELETE_JUNCTION in that it controls
   a fileset-wide attribute not associated with a junction.

   The server SHOULD permit this operation even on read-only filesets
   but MUST return FEDFS_ERR_ROFS if this is not possible.





<span class="grey">Lentini, et al.              Standards Track                   [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   If the path contains a character that is not supported by the server,
   then status FEDFS_ERR_BADCHAR MUST be returned.

   The path is REQUIRED to exist and be completely local to the server.
   It MUST NOT contain a junction.  If any component of the path is a
   junction, then this operation MUST fail with status
   FEDFS_ERR_NOTLOCAL.

   The server MAY enforce the local permissions on the path, including
   the final component.  If a server wishes to report that a path cannot
   be traversed because of insufficient permissions, or the final
   component is an unexecutable or unwritable directory, then the
   operation MUST fail with status FEDFS_ERR_ACCESS.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.6.3.%20%20Errors"></a><a class="selflink" href="#section-5.6.3" name="section-5.6.3">5.6.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_NAMETOOLONG
      FEDFS_ERR_LOOP
      FEDFS_ERR_BADXDR
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_NOTJUNCT
      FEDFS_ERR_NOTLOCAL
      FEDFS_ERR_PERM
      FEDFS_ERR_ROFS
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_PATH_TYPE_UNSUPP
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.7.%20%20FEDFS_LOOKUP_REPLICATION"></a><a class="selflink" href="#section-5.7" name="section-5.7">5.7</a>.  FEDFS_LOOKUP_REPLICATION</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.7.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.7.1" name="section-5.7.1">5.7.1</a>.  Synopsis</span>

   Query the server to discover the current replication information (if
   any) at the given path.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.7.2.%20%20Description"></a><a class="selflink" href="#section-5.7.2" name="section-5.7.2">5.7.2</a>.  Description</span>

   This operation queries a server to determine whether a fileset
   containing the given path has replication information associated with
   it.  If it does, the FSN for that replication information is
   returned.





<span class="grey">Lentini, et al.              Standards Track                   [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   This operation differs from FEDFS_LOOKUP_JUNCTION in that it inquires
   about a fileset-wide attribute not associated with a junction.

   If the path contains a character that is not supported by the server,
   then status FEDFS_ERR_BADCHAR MUST be returned.

   The path is REQUIRED to exist and be completely local to the server.
   It MUST NOT contain a junction.  If any component of the path is a
   junction, then this operation MUST fail with status
   FEDFS_ERR_NOTLOCAL.

   The server MAY enforce the local permissions on the path, including
   the final component.  If a server wishes to report that a path cannot
   be traversed because of insufficient permissions, or the final
   component is an unexecutable or unwritable directory, then the
   operation MUST fail with status FEDFS_ERR_ACCESS.

   Interpretation of the resolve parameter and the procedure's results
   shall be the same as specified in <a href="#section-5.4">Section 5.4</a> for the
   FEDFS_LOOKUP_JUNCTION operation.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.7.3.%20%20Errors"></a><a class="selflink" href="#section-5.7.3" name="section-5.7.3">5.7.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_NAMETOOLONG
      FEDFS_ERR_LOOP
      FEDFS_ERR_BADXDR
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_NOTJUNCT
      FEDFS_ERR_NOTLOCAL
      FEDFS_ERR_PERM
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_NSDB_ROUTE
      FEDFS_ERR_NSDB_DOWN
      FEDFS_ERR_NSDB_CONN
      FEDFS_ERR_NSDB_AUTH
      FEDFS_ERR_NSDB_LDAP
      FEDFS_ERR_NSDB_LDAP_VAL
      FEDFS_ERR_NSDB_NONCE
      FEDFS_ERR_NSDB_NOFSN
      FEDFS_ERR_NSDB_NOFSL
      FEDFS_ERR_NSDB_RESPONSE
      FEDFS_ERR_NSDB_FAULT
      FEDFS_ERR_NSDB_PARAMS
      FEDFS_ERR_NSDB_LDAP_REFERRAL



<span class="grey">Lentini, et al.              Standards Track                   [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


      FEDFS_ERR_NSDB_LDAP_REFERRAL_VAL
      FEDFS_ERR_NSDB_LDAP_REFERRAL_NOTFOLLOWED
      FEDFS_ERR_NSDB_PARAMS_LDAP_REFERRAL
      FEDFS_ERR_PATH_TYPE_UNSUPP
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY
      FEDFS_ERR_NO_CACHE
      FEDFS_ERR_UNKNOWN_CACHE

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.8.%20%20FEDFS_SET_NSDB_PARAMS"></a><a class="selflink" href="#section-5.8" name="section-5.8">5.8</a>.  FEDFS_SET_NSDB_PARAMS</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.8.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.8.1" name="section-5.8.1">5.8.1</a>.  Synopsis</span>

   Set the connection parameters for the specified NSDB.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.8.2.%20%20Description"></a><a class="selflink" href="#section-5.8.2" name="section-5.8.2">5.8.2</a>.  Description</span>

   This operation allows an administrator to set the connection
   parameters for a given NSDB.

   If a record for the given NSDB does not exist, a new record is
   created with the specified connection parameters.

   If a record for the given NSDB does exist, the existing connection
   parameters are replaced with the specified connection parameters.

   An NSDB is specified using a FedFsNsdbName.  The rules in <a href="#section-4.1">Section 4.1</a>
   define when two FedFsNsdbNames are considered equal.

   The given NSDB need not be referenced by any junctions on the
   fileserver.  This situation will occur when connection parameters for
   a new NSDB are installed.

   The format of the connection parameters is described in <a href="#section-4">Section 4</a>.

   On success, this operation returns FEDFS_OK.  When the operation
   returns, the new connection parameters SHOULD be used for all
   subsequent LDAP connections to the given NSDB.  Existing connections
   MAY be terminated and re-established using the new connection
   parameters.  The connection parameters SHOULD be durable across
   fileserver reboots.

   On failure, an error value indicating the type of error is returned.
   If the operation's associated user does not have sufficient
   permissions to create/modify NSDB connection parameters, the
   operation MUST return FEDFS_ERR_ACCESS.





<span class="grey">Lentini, et al.              Standards Track                   [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.8.3.%20%20Errors"></a><a class="selflink" href="#section-5.8.3" name="section-5.8.3">5.8.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_BADXDR
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_NOSPC
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.9.%20%20FEDFS_GET_NSDB_PARAMS"></a><a class="selflink" href="#section-5.9" name="section-5.9">5.9</a>.  FEDFS_GET_NSDB_PARAMS</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.9.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.9.1" name="section-5.9.1">5.9.1</a>.  Synopsis</span>

   Get the connection parameters for the specified NSDB.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.9.2.%20%20Description"></a><a class="selflink" href="#section-5.9.2" name="section-5.9.2">5.9.2</a>.  Description</span>

   This operations allows an administrator to retrieve connection
   parameters, if they exist, for the given NSDB.

   An NSDB is specified using a FedFsNsdbName.  The rules in <a href="#section-4.1">Section 4.1</a>
   define when two FedFsNsdbNames are considered equal.

   A set of connection parameters is considered a match if their
   associated NSDB is equal (as defined in <a href="#section-4.1">Section 4.1</a>) to the
   operation's NSDB argument.  Therefore, there is at most one set of
   connection parameters that can match the query described by this
   operation.

   The format of the connection parameters is described in <a href="#section-4">Section 4</a>.

   On success, this operation returns FEDFS_OK and the connection
   parameters on record for the given NSDB.

   On failure, an error value indicating the type of error is returned.
   This operation MUST return FEDFS_ERR_NSDB_PARAMS to indicate that
   there are no connection parameters on record for the given NSDB.  If
   the operation's associated user does not have sufficient permissions
   to view NSDB connection parameters, the operation MUST return
   FEDFS_ERR_ACCESS.







<span class="grey">Lentini, et al.              Standards Track                   [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.9.3.%20%20Errors"></a><a class="selflink" href="#section-5.9.3" name="section-5.9.3">5.9.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_BADXDR
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_NSDB_PARAMS
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.10.%20%20FEDFS_GET_LIMITED_NSDB_PARAMS"></a><a class="selflink" href="#section-5.10" name="section-5.10">5.10</a>.  FEDFS_GET_LIMITED_NSDB_PARAMS</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.10.1.%20%20Synopsis"></a><a class="selflink" href="#section-5.10.1" name="section-5.10.1">5.10.1</a>.  Synopsis</span>

   Get a limited subset of the connection parameters for the specified
   NSDB.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.10.2.%20%20Description"></a><a class="selflink" href="#section-5.10.2" name="section-5.10.2">5.10.2</a>.  Description</span>

   This operation allows an administrator to retrieve a limited subset
   of information on the connection parameters, if they exist, for the
   given NSDB.

   An NSDB is specified using a FedFsNsdbName.  The rules in <a href="#section-4.1">Section 4.1</a>
   define when two FedFsNsdbNames are considered equal.

   A set of connection parameters is considered a match if their
   associated NSDB is equal (as defined in <a href="#section-4.1">Section 4.1</a>) to the
   operation's NSDB argument.  Therefore, there is at most one set of
   connection parameters that can match the query described by this
   operation.

   This operation returns a limited subset of the connection parameters.
   Only the FedFsConnectionSec mechanism that is used to protect
   communication between the fileserver and NSDB is returned.

   Viewing the limited subset of NSDB connection parameters returned by
   FEDFS_GET_LIMITED_NSDB_PARAMS MAY be a less privileged operation than
   viewing the entire set of NSDB connection parameters returned by
   FEDFS_GET_NSDB_PARAMS.  For example, the full contents of an NSDB's
   connection parameters could contain sensitive information for some
   security mechanisms.  FEDFS_GET_LIMITED_NSDB_PARAMS allows the
   fileserver to communicate a subset of the connection parameters (the
   security mechanism) to users with sufficient permissions without
   revealing more sensitive information.



<span class="grey">Lentini, et al.              Standards Track                   [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   On success, this operation returns FEDFS_OK and the
   FedFsConnectionSec value on record for the given NSDB.

   On failure, an error value indicating the type of error is returned.
   This operation MUST return FEDFS_ERR_NSDB_PARAMS to indicate that
   there are no connection parameters on record for the given NSDB.  If
   the operation's associated user does not have sufficient permissions
   to view the subset of NSDB connection parameters returned by this
   procedure, the operation MUST return FEDFS_ERR_ACCESS.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.10.3.%20%20Errors"></a><a class="selflink" href="#section-5.10.3" name="section-5.10.3">5.10.3</a>.  Errors</span>

      FEDFS_ERR_ACCESS
      FEDFS_ERR_BADCHAR
      FEDFS_ERR_BADNAME
      FEDFS_ERR_BADXDR
      FEDFS_ERR_INVAL
      FEDFS_ERR_IO
      FEDFS_ERR_SVRFAULT
      FEDFS_ERR_NSDB_PARAMS
      FEDFS_ERR_NOTSUPP
      FEDFS_ERR_DELAY

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   The security considerations of [<a href="rfc5531.html" title='"RPC: Remote Procedure Call Protocol Specification Version 2"'>RFC5531</a>] apply to the protocol
   described in this document.  The ONC RPC protocol supports
   authentication, integrity, and privacy via the RPCSEC_GSS framework
   [<a href="rfc2203.html" title='"RPCSEC_GSS Protocol Specification"'>RFC2203</a>].  Fileservers that support the FedFS administration
   protocol described in this document MUST support RPCSEC_GSS.

   As with NFSv4.1 (see <a href="rfc5661.html#section-2.2.1.1.1.1">Section 2.2.1.1.1.1 of [RFC5661]</a>), FedFS
   administration protocol clients and servers MUST support RPCSEC_GSS's
   integrity and authentication services.  FedFS administration protocol
   servers MUST support RPCSEC_GSS's privacy service.  FedFS
   administration protocol clients SHOULD support RPCSEC_GSS's privacy
   service.  When RPCSEC_GSS is employed on behalf of the FedFS
   administration protocol, RPCSEC_GSS data integrity SHOULD be used.

   It is strongly RECOMMENDED that an Access Control Service be employed
   to restrict access to a fileserver's FedFS administration
   configuration data via the FedFS administrative protocol to prevent
   FedFS namespace corruption and protect NSDB communication parameters.

   For example, when the FedFsNsdbParams secType field value
   FEDFS_SEC_TLS is chosen, the payload is used to provision the trust
   anchor root certificate for TLS secure communication between the




<span class="grey">Lentini, et al.              Standards Track                   [Page 33]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-34" id="page-34" name="page-34"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   fileserver and the NSDB.  In this case, RPCSEC_GSS with data
   integrity SHOULD be employed along with an Access Control Service to
   restrict access to domain administrators.

   FEDFS_GET_LIMITED_NSDB_PARAMS's interaction with the NSDB's
   connection parameters is discussed in <a href="#section-5.10.2">Section 5.10.2</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  IANA Considerations</span>

   A range of ONC RPC program numbers were assigned for use by FedFS
   using the procedure described in <a href="#section-8.3">Section 8.3</a> ("Program Number
   Assignment") of [<a href="rfc5531.html" title='"RPC: Remote Procedure Call Protocol Specification Version 2"'>RFC5531</a>].  The FedFS range is:

      IETF NFSv4 Working Group - FedFS 100418 - 100421

   Program 100418 has been removed from the reserved FedFS range and
   assigned to version 1 of the ONC RPC program (100418) described in
   this document with the short name "fedfs_admin", a Description of
   "FedFS Administration", and a reference to <a href="rfc7533.html">RFC 7533</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC2203" name="ref-RFC2203">RFC2203</a>]  Eisler, M., Chiu, A., and L. Ling, "RPCSEC_GSS Protocol
              Specification", <a href="rfc2203.html">RFC 2203</a>, September 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2203">http://www.rfc-editor.org/info/rfc2203</a>&gt;.

   [<a id="ref-RFC4122" name="ref-RFC4122">RFC4122</a>]  Leach, P., Mealling, M., and R. Salz, "A Universally
              Unique IDentifier (UUID) URN Namespace", <a href="rfc4122.html">RFC 4122</a>, July
              2005, &lt;<a href="http://www.rfc-editor.org/info/rfc4122">http://www.rfc-editor.org/info/rfc4122</a>&gt;.

   [<a id="ref-RFC4506" name="ref-RFC4506">RFC4506</a>]  Eisler, M., Ed., "XDR: External Data Representation
              Standard", STD 67, <a href="rfc4506.html">RFC 4506</a>, May 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4506">http://www.rfc-editor.org/info/rfc4506</a>&gt;.

   [<a id="ref-RFC4511" name="ref-RFC4511">RFC4511</a>]  Sermersheim, J., Ed., "Lightweight Directory Access
              Protocol (LDAP): The Protocol", <a href="rfc4511.html">RFC 4511</a>, June 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4511">http://www.rfc-editor.org/info/rfc4511</a>&gt;.

   [<a id="ref-RFC4513" name="ref-RFC4513">RFC4513</a>]  Harrison, R., Ed., "Lightweight Directory Access Protocol
              (LDAP): Authentication Methods and Security Mechanisms",
              <a href="rfc4513.html">RFC 4513</a>, June 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4513">http://www.rfc-editor.org/info/rfc4513</a>&gt;.



<span class="grey">Lentini, et al.              Standards Track                   [Page 34]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-35" id="page-35" name="page-35"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


   [<a id="ref-RFC5246" name="ref-RFC5246">RFC5246</a>]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", <a href="rfc5246.html">RFC 5246</a>, August 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.

   [<a id="ref-RFC5280" name="ref-RFC5280">RFC5280</a>]  Cooper, D., Santesson, S., Farrell, S., Boeyen, S.,
              Housley, R., and W. Polk, "Internet X.509 Public Key
              Infrastructure Certificate and Certificate Revocation List
              (CRL) Profile", <a href="rfc5280.html">RFC 5280</a>, May 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5280">http://www.rfc-editor.org/info/rfc5280</a>&gt;.

   [<a id="ref-RFC5531" name="ref-RFC5531">RFC5531</a>]  Thurlow, R., "RPC: Remote Procedure Call Protocol
              Specification Version 2", <a href="rfc5531.html">RFC 5531</a>, May 2009,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5531">http://www.rfc-editor.org/info/rfc5531</a>&gt;.

   [<a id="ref-RFC7530" name="ref-RFC7530">RFC7530</a>]  Haynes, T., Ed. and D. Noveck, Ed., "Network File System
              (NFS) Version 4 Protocol", <a href="rfc7530.html">RFC 7530</a>, March 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7530">http://www.rfc-editor.org/info/rfc7530</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-MS-CIFS" name="ref-MS-CIFS">MS-CIFS</a>]  Microsoft Corporation, "Common Internet File System (CIFS)
              Protocol Specification", MS-CIFS 24.0, May 2014.

   [<a id="ref-MS-SMB" name="ref-MS-SMB">MS-SMB</a>]   Microsoft Corporation, "Server Message Block (SMB)
              Protocol Specification", MS-SMB 43.0, May 2014.

   [<a id="ref-MS-SMB2" name="ref-MS-SMB2">MS-SMB2</a>]  Microsoft Corporation, "Server Message Block (SMB) Version
              2 Protocol Specification", MS-SMB2 46.0, May 2014.

   [<a id="ref-RFC5661" name="ref-RFC5661">RFC5661</a>]  Shepler, S., Ed., Eisler, M., Ed., and D. Noveck, Ed.,
              "Network File System (NFS) Version 4 Minor Version 1
              Protocol", <a href="rfc5661.html">RFC 5661</a>, January 2010,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5661">http://www.rfc-editor.org/info/rfc5661</a>&gt;.

   [<a id="ref-RFC5662" name="ref-RFC5662">RFC5662</a>]  Shepler, S., Ed., Eisler, M., Ed., and D. Noveck, Ed.,
              "Network File System (NFS) Version 4 Minor Version 1
              External Data Representation Standard (XDR) Description",
              <a href="rfc5662.html">RFC 5662</a>, January 2010,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5662">http://www.rfc-editor.org/info/rfc5662</a>&gt;.

   [<a id="ref-RFC5716" name="ref-RFC5716">RFC5716</a>]  Lentini, J., Everhart, C., Ellard, D., Tewari, R., and M.
              Naik, "Requirements for Federated File Systems", <a href="rfc5716.html">RFC 5716</a>,
              January 2010, &lt;<a href="http://www.rfc-editor.org/info/rfc5716">http://www.rfc-editor.org/info/rfc5716</a>&gt;.

   [<a id="ref-RFC7532" name="ref-RFC7532">RFC7532</a>]  Lentini, J., Tewari, R., and C. Lever, Ed., "Namespace
              Database (NSDB) Protocol for Federated File Systems", <a href="rfc7532.html">RFC</a>
              <a href="rfc7532.html">7532</a>, March 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7532">http://www.rfc-editor.org/info/rfc7532</a>&gt;.



<span class="grey">Lentini, et al.              Standards Track                   [Page 35]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-36" id="page-36" name="page-36"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


Acknowledgments

   Daniel Ellard contributed significant parts of this document.

   The authors and editor would like to thank Craig Everhart and Manoj
   Naik, who were co-authors of an earlier draft version of this
   document.  In addition, we would like to thank Paul Lemahieu, Mario
   Wurzl, and Robert Thurlow for helping to author this document.

   We would like to thank Trond Myklebust for suggesting improvements to
   the FSL pathname format, David Noveck for his suggestions on
   internationalization and path encoding rules, and Nicolas Williams
   for his suggestions.

   The editor gratefully acknowledges the IESG reviewers, whose
   constructive comments helped make this a much stronger document.

   Finally, we would like to thank Andy Adamson, Rob Thurlow, and Tom
   Haynes for helping to get this document out the door.

   The extract.sh shell script and formatting conventions were first
   described by the authors of the NFSv4.1 XDR specification [<a href="rfc5662.html" title='"Network File System (NFS) Version 4 Minor Version 1 External Data Representation Standard (XDR) Description"'>RFC5662</a>].





























<span class="grey">Lentini, et al.              Standards Track                   [Page 36]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-37" id="page-37" name="page-37"> </a>
<span class="grey"><a href="rfc7533.html">RFC 7533</a>        Admin Protocol for Federated File Systems     March 2015</span>


Authors' Addresses

   James Lentini
   NetApp
   1601 Trapelo Rd, Suite 16
   Waltham, MA  02451
   United States

   Phone: +1 781-768-5359
   EMail: jlentini@netapp.com


   Renu Tewari
   IBM Almaden
   650 Harry Rd
   San Jose, CA  95120
   United States

   EMail: tewarir@us.ibm.com


   Charles Lever (editor)
   Oracle Corporation
   1015 Granger Avenue
   Ann Arbor, MI  48104
   United States

   Phone: +1 248-614-5091
   EMail: chuck.lever@oracle.com






















Lentini, et al.              Standards Track                   [Page 37]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc7533 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:21 GMT --></html>