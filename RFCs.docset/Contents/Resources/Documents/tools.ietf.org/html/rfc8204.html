<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc8204 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:57 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.127" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-vsperf-bmwg-vswitch-opnfv" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:8204" name="DC.Identifier"/>
<meta content="September, 2017" name="DC.Date.Issued"/>
<meta content="Maryam Tahhan &lt;maryam.tahhan@intel.com&gt;" name="DC.Creator"/>
<meta content='This memo describes the contributions of the Open Platform for NFV
(OPNFV) project on Virtual Switch Performance (VSPERF), particularly
in the areas of test setups and configuration parameters for the
system under test. This project has extended the current and completed
work of the Benchmarking Methodology Working Group in the IETF and
references existing literature. The Benchmarking Methodology Working
Group has traditionally conducted laboratory characterization of
dedicated physical implementations of internetworking functions.
Therefore, this memo describes the additional considerations when
virtual switches are implemented on general-purpose hardware. The
expanded tests and benchmarks are also influenced by the OPNFV mission
to support virtualization of the "telco" infrastructure.' name="DC.Description.Abstract"/>
<meta content="Benchmarking Virtual Switches in the Open Platform for NFV (OPNFV)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 8204 - Benchmarking Virtual Switches in the Open Platform for NFV (OPNFV)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8204.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8204" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-bmwg-vswitch-opnfv" title="draft-ietf-bmwg-vswitch-opnfv">draft-ietf-bmwg...</a>] [<a href="https://datatracker.ietf.org/doc/rfc8204" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8204" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8204" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                         M. Tahhan
Request for Comments: 8204                                   B. O'Mahony
Category: Informational                                            Intel
ISSN: 2070-1721                                                A. Morton
                                                               AT&amp;T Labs
                                                          September 2017


   <span class="h1">Benchmarking Virtual Switches in the Open Platform for NFV (OPNFV)</span>

Abstract

   This memo describes the contributions of the Open Platform for NFV
   (OPNFV) project on Virtual Switch Performance (VSPERF), particularly
   in the areas of test setups and configuration parameters for the
   system under test.  This project has extended the current and
   completed work of the Benchmarking Methodology Working Group in the
   IETF and references existing literature.  The Benchmarking
   Methodology Working Group has traditionally conducted laboratory
   characterization of dedicated physical implementations of
   internetworking functions.  Therefore, this memo describes the
   additional considerations when virtual switches are implemented on
   general-purpose hardware.  The expanded tests and benchmarks are also
   influenced by the OPNFV mission to support virtualization of the
   "telco" infrastructure.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc7841.html#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8204">https://www.rfc-editor.org/info/rfc8204</a>.










<span class="grey">Tahhan, et al.                Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-1.1">1.1</a>.  Requirements Language . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-1.2">1.2</a>.  Abbreviations . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Scope . . . . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-3">3</a>.  Benchmarking Considerations . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.1">3.1</a>.  Comparison with Physical Network Functions  . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.2">3.2</a>.  Continued Emphasis on Black-Box Benchmarks  . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-3.3">3.3</a>.  New Configuration Parameters  . . . . . . . . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-3.4">3.4</a>.  Flow Classification . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
     <a href="#section-3.5">3.5</a>.  Benchmarks Using Baselines with Resource Isolation  . . .   <a href="#page-9">9</a>
   <a href="#section-4">4</a>.  VSPERF Specification Summary  . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-5">5</a>.  3x3 Matrix Coverage . . . . . . . . . . . . . . . . . . . . .  <a href="#page-18">18</a>
     <a href="#section-5.1">5.1</a>.  Speed of Activation . . . . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
     <a href="#section-5.2">5.2</a>.  Accuracy of Activation  . . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
     <a href="#section-5.3">5.3</a>.  Reliability of Activation . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
     <a href="#section-5.4">5.4</a>.  Scale of Activation . . . . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
     <a href="#section-5.5">5.5</a>.  Speed of Operation  . . . . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
     <a href="#section-5.6">5.6</a>.  Accuracy of Operation . . . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
     <a href="#section-5.7">5.7</a>.  Reliability of Operation  . . . . . . . . . . . . . . . .  <a href="#page-20">20</a>
     <a href="#section-5.8">5.8</a>.  Scalability of Operation  . . . . . . . . . . . . . . . .  <a href="#page-20">20</a>
     <a href="#section-5.9">5.9</a>.  Summary . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-20">20</a>
   <a href="#section-6">6</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>
   <a href="#section-7">7</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>
     <a href="#section-7.1">7.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>
     <a href="#section-7.2">7.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-22">22</a>
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-23">23</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-24">24</a>







<span class="grey">Tahhan, et al.                Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The Benchmarking Methodology Working Group (BMWG) has traditionally
   conducted laboratory characterization of dedicated physical
   implementations of internetworking functions.  The black-box
   benchmarks of throughput, latency, forwarding rates, and others have
   served our industry for many years.  Now, Network Function
   Virtualization (NFV) has the goal of transforming how internetwork
   functions are implemented and therefore has garnered much attention.

   A virtual switch (vSwitch) is an important aspect of the NFV
   infrastructure; it provides connectivity between and among physical
   network functions and virtual network functions.  As a result, there
   are many vSwitch benchmarking efforts but few specifications to guide
   the many new test design choices.  This is a complex problem and an
   industry-wide work in progress.  In the future, several of BMWG's
   fundamental specifications will likely be updated as more testing
   experience helps to form consensus around new methodologies, and BMWG
   should continue to collaborate with all organizations that share the
   same goal.

   This memo describes the contributions of the Open Platform for NFV
   (OPNFV) project on Virtual Switch Performance (VSPERF)
   characterization through the Danube 3.0 (fourth) release [<a href="#ref-DanubeRel" title='"Danube"'>DanubeRel</a>]
   to the chartered work of the BMWG (with stable references to their
   test descriptions).  This project has extended the current and
   completed work of the BMWG IETF and references existing literature.
   For example, the most often referenced RFC is [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>] (which
   depends on [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>]), so the foundation of the benchmarking work in
   OPNFV is common and strong.  The recommended extensions are
   specifically in the areas of test setups and configuration parameters
   for the system under test.

   See [<a href="#ref-VSPERFhome" title='"VSPERF Home"'>VSPERFhome</a>] for more background and the OPNFV website for
   general information [<a href="#ref-OPNFV" title='"OPNFV"'>OPNFV</a>].

   The authors note that OPNFV distinguishes itself from other open
   source compute and networking projects through its emphasis on
   existing "telco" services as opposed to cloud computing.  There are
   many ways in which telco requirements have different emphasis on
   performance dimensions when compared to cloud computing: support for
   and transfer of isochronous media streams is one example.









<span class="grey">Tahhan, et al.                Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Requirements%20Language"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="rfc8174.html" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Abbreviations"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Abbreviations</span>

   For the purposes of this document, the following abbreviations apply:

    ACK      Acknowledge
    ACPI     Advanced Configuration and Power Interface
    BIOS     Basic Input Output System
    BMWG     Benchmarking Methodology Working Group
    CPDP     Control Plane Data Plane
    CPU      Central Processing Unit
    DIMM     Dual In-line Memory Module
    DPDK     Data Plane Development Kit
    DUT      Device Under Test
    GRUB     Grand Unified Bootloader
    ID       Identification
    IMIX     Internet Mix
    IP       Internet Protocol
    IPPM     IP Performance Metrics
    LAN      Local Area Network
    LTD      Level Test Design
    NFV      Network Functions Virtualization
    NIC      Network Interface Card
    NUMA     Non-uniform Memory Access
    OPNFV    Open Platform for NFV
    OS       Operating System
    PCI      Peripheral Component Interconnect
    PDV      Packet Delay Variation
    SR/IOV   Single Root / Input Output Virtualization
    SUT      System Under Test
    TCP      Transmission Control Protocol
    TSO      TCP Segment Offload
    UDP      User Datagram Protocol
    VM       Virtual Machine
    VNF      Virtualised Network Function
    VSPERF   OPNFV vSwitch Performance Project








<span class="grey">Tahhan, et al.                Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Scope"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Scope</span>

   The primary purpose and scope of the memo is to describe key aspects
   of vSwitch benchmarking, particularly in the areas of test setups and
   configuration parameters for the system under test, and extend the
   body of extensive BMWG literature and experience.  Initial feedback
   indicates that many of these extensions may be applicable beyond this
   memo's current scope (to hardware switches in the NFV infrastructure
   and to virtual routers, for example).  Additionally, this memo serves
   as a vehicle to include more detail and relevant commentary from BMWG
   and other open source communities under BMWG's chartered work to
   characterize the NFV infrastructure.

   The benchmarking covered in this memo should be applicable to many
   types of vSwitches and remain vSwitch agnostic to a great degree.
   There has been no attempt to track and test all features of any
   specific vSwitch implementation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Benchmarking%20Considerations"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Benchmarking Considerations</span>

   This section highlights some specific considerations (from [<a href="rfc8172.html" title='"Considerations for Benchmarking Virtual Network Functions and Their Infrastructure"'>RFC8172</a>])
   related to benchmarks for virtual switches.  The OPNFV project is
   sharing its present view on these areas as they develop their
   specifications in the Level Test Design (LTD) document as defined by
   [<a href="#ref-IEEE829" title='"IEEE Standard for Software and System Test Documentation"'>IEEE829</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Comparison%20with%20Physical%20Network%20Functions"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Comparison with Physical Network Functions</span>

   To compare the performance of virtual designs and implementations
   with their physical counterparts, identical benchmarks are needed.
   BMWG has developed specifications for many physical network
   functions.  The BMWG has recommended reusing existing benchmarks and
   methods in [<a href="rfc8172.html" title='"Considerations for Benchmarking Virtual Network Functions and Their Infrastructure"'>RFC8172</a>], and the OPNFV LTD expands on them as described
   here.  A key configuration aspect for vSwitches is the number of
   parallel CPU cores required to achieve comparable performance with a
   given physical device or whether some limit of scale will be reached
   before the vSwitch can achieve the comparable performance level.

   It's unlikely that the virtual switch will be the only application
   running on the SUT, so CPU utilization, cache utilization, and memory
   footprint should also be recorded for the virtual implementations of
   internetworking functions.  However, internally measured metrics such
   as these are not benchmarks; they may be useful for the audience
   (e.g., operations) to know and may also be useful if there is a
   problem encountered during testing.






<span class="grey">Tahhan, et al.                Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


   Benchmark comparability between virtual and physical/hardware
   implementations of equivalent functions will likely place more
   detailed and exact requirements on the "testing systems" (in terms of
   stream generation, algorithms to search for maximum values, and their
   configurations).  This is another area for standards development to
   appreciate; however, this is a topic for a future document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Continued%20Emphasis%20on%20Black-Box%20Benchmarks"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Continued Emphasis on Black-Box Benchmarks</span>

   External observations remain essential as the basis for benchmarks.
   Internal observations with a fixed specification and interpretation
   will be provided in parallel to assist the development of operations
   procedures when the technology is deployed.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20New%20Configuration%20Parameters"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  New Configuration Parameters</span>

   A key consideration when conducting any sort of benchmark is trying
   to ensure the consistency and repeatability of test results.  When
   benchmarking the performance of a vSwitch, there are many factors
   that can affect the consistency of results; one key factor is
   matching the various hardware and software details of the SUT.  This
   section lists some of the many new parameters that this project
   believes are critical to report in order to achieve repeatability.

   It has been the goal of the project to produce repeatable results,
   and a large set of the parameters believed to be critical is provided
   so that the benchmarking community can better appreciate the increase
   in configuration complexity inherent in this work.  The parameter set
   below is assumed sufficient for the infrastructure in use by the
   VSPERF project to obtain repeatable results from test to test.

   Hardware details (platform, processor, memory, and network)
   including:

   o  BIOS version, release date, and any configurations that were
      modified

   o  Power management at all levels (ACPI sleep states, processor
      package, OS, etc.)

   o  CPU microcode level

   o  Number of enabled cores

   o  Number of cores used for the test

   o  Memory information (type and size)




<span class="grey">Tahhan, et al.                Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


   o  Memory DIMM configurations (quad rank performance may not be the
      same as dual rank) in size, frequency, and slot locations

   o  Number of physical NICs and their details (manufacturer, versions,
      type, and the PCI slot they are plugged into)

   o  NIC interrupt configuration (and any special features in use)

   o  PCI configuration parameters (payload size, early ACK option,
      etc.)

   Software details including:

   o  OS RunLevel

   o  OS version (for host and VNF)

   o  Kernel version (for host and VNF)

   o  GRUB boot parameters (for host and VNF)

   o  Hypervisor details (type and version)

   o  Selected vSwitch, version number, or commit ID used

   o  vSwitch launch command line if it has been parameterized

   o  Memory allocation to the vSwitch

   o  Which NUMA node it is using and how many memory channels

   o  DPDK or any other software dependency version number or commit ID
      used

   o  Memory allocation to a VM - if it's from Hugepages/elsewhere

   o  VM storage type - snapshot, independent persistent, independent
      non-persistent

   o  Number of VMs

   o  Number of virtual NICs (vNICs) - versions, type, and driver

   o  Number of virtual CPUs and their core affinity on the host

   o  Number of vNICs and their interrupt configurations





<span class="grey">Tahhan, et al.                Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


   o  Thread affinitization for the applications (including the vSwitch
      itself) on the host

   o  Details of resource isolation, such as CPUs designated for Host/
      Kernel (isolcpu) and CPUs designated for specific processes
      (taskset).

   Test traffic information:

   o  Test duration

   o  Number of flows

   o  Traffic type - UDP, TCP, and others

   o  Frame Sizes - fixed or IMIX [<a href="rfc6985.html" title='"IMIX Genome: Specification of Variable Packet Sizes for Additional Testing"'>RFC6985</a>] (note that with
      [<a href="#ref-IEEE802.1ac" title='"IEEE Standard for Local and metropolitan area networks -- Media Access Control (MAC) Service Definition"'>IEEE802.1ac</a>], frames may be longer than 1500 bytes and up to 2000
      bytes)

   o  Deployment Scenario - defines the communications path in the SUT

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.4.%20%20Flow%20Classification"></a><a class="selflink" href="#section-3.4" name="section-3.4">3.4</a>.  Flow Classification</span>

   Virtual switches group packets into flows by processing and matching
   particular packet or frame header information, or by matching packets
   based on the input ports.  Thus, a flow can be thought of as a
   sequence of packets that have the same set of header field values or
   have arrived on the same physical or logical port.  Performance
   results can vary based on the parameters the vSwitch uses to match
   for a flow.  The recommended flow classification parameters for any
   vSwitch performance tests are: the input port (physical or logical),
   the source MAC address, the destination MAC address, the source IP
   address, the destination IP address, and the Ethernet protocol type
   field (although classification may take place on other fields, such
   as source and destination transport port numbers).  It is essential
   to increase the flow timeout time on a vSwitch before conducting any
   performance tests that do not intend to measure the flow setup time
   (see <a href="rfc2889.html#section-3">Section 3 of [RFC2889]</a>).  Normally, the first packet of a
   particular stream will install the flow in the virtual switch, which
   introduces additional latency; subsequent packets of the same flow
   are not subject to this latency if the flow is already installed on
   the vSwitch.









<span class="grey">Tahhan, et al.                Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.5.%20%20Benchmarks%20Using%20Baselines%20with%20Resource%20Isolation"></a><a class="selflink" href="#section-3.5" name="section-3.5">3.5</a>.  Benchmarks Using Baselines with Resource Isolation</span>

   This outline describes the measurement of baselines with isolated
   resources at a high level, which is the intended approach at this
   time.

   1.  Baselines:

       *  Optional: Benchmark platform forwarding capability without a
          vSwitch or VNF for at least 72 hours (serves as a means of
          platform validation and a means to obtain the base performance
          for the platform in terms of its maximum forwarding rate and
          latency).

                                                              __
          +--------------------------------------------------+   |
          |   +------------------------------------------+   |   |
          |   |                                          |   |   |
          |   |          Simple Forwarding App           |   |  Host
          |   |                                          |   |   |
          |   +------------------------------------------+   |   |
          |   |                 NIC                      |   |   |
          +---+------------------------------------------+---+ __|
                     ^                           :
                     |                           |
                     :                           v
          +--------------------------------------------------+
          |                                                  |
          |                Traffic Generator                 |
          |                                                  |
          +--------------------------------------------------+

            Figure 1: Benchmark Platform Forwarding Capability


















<span class="grey">Tahhan, et al.                Informational                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


       *  Benchmark VNF forwarding capability with direct connectivity
          (vSwitch bypass, e.g., SR/IOV) for at least 72 hours (serves
          as a means of VNF validation and a means to obtain the base
          performance for the VNF in terms of its maximum forwarding
          rate and latency).  The metrics gathered from this test will
          serve as a key comparison point for vSwitch bypass
          technologies performance and vSwitch performance.

                                                                   __
         +--------------------------------------------------+ __     |
         |   +------------------------------------------+   |   |    |
         |   |                                          |   | Host/  |
         |   |                 VNF                      |   | Guest  |
         |   |                                          |   |   |    |
         |   +------------------------------------------+   | __|    |
         |   |          Passthrough/SR-IOV              |   |       Host
         |   +------------------------------------------+   |        |
         |   |                 NIC                      |   |        |
         +---+------------------------------------------+---+      __|
                    ^                           :
                    |                           |
                    :                           v
         +--------------------------------------------------+
         |                                                  |
         |                Traffic Generator                 |
         |                                                  |
         +--------------------------------------------------+

               Figure 2: Benchmark VNF Forwarding Capability

       *  Benchmarking with isolated resources alone and with other
          resources (both hardware and software) disabled; for example,
          vSwitch and VM are SUT.

       *  Benchmarking with isolated resources alone, thus leaving some
          resources unused.

       *  Benchmarking with isolated resources and all resources
          occupied.

   2.  Next Steps:

       *  Limited sharing

       *  Production scenarios

       *  Stressful scenarios




<span class="grey">Tahhan, et al.                Informational                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20VSPERF%20Specification%20Summary"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  VSPERF Specification Summary</span>

   The overall specification in preparation is referred to as a Level
   Test Design (LTD) document, which will contain a suite of performance
   tests.  The base performance tests in the LTD are based on the
   pre-existing specifications developed by the BMWG to test the
   performance of physical switches.  These specifications include:

   o  Benchmarking Methodology for Network Interconnect Devices
      [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>]

   o  Benchmarking Methodology for LAN Switching [<a href="rfc2889.html" title='"Benchmarking Methodology for LAN Switching Devices"'>RFC2889</a>]

   o  Device Reset Characterization [<a href="rfc6201.html" title='"Device Reset Characterization"'>RFC6201</a>]

   o  Packet Delay Variation Applicability Statement [<a href="rfc5481.html" title='"Packet Delay Variation Applicability Statement"'>RFC5481</a>]

   The two most recent RFCs above ([<a href="rfc6201.html" title='"Device Reset Characterization"'>RFC6201</a>] and [<a href="rfc5481.html" title='"Packet Delay Variation Applicability Statement"'>RFC5481</a>]) are being
   applied in benchmarking for the first time and represent a
   development challenge for test equipment developers.  Fortunately,
   many members of the testing system community have engaged on the
   VSPERF project, including an open source test system.

   In addition to this, the LTD also reuses the terminology defined by:

   o  Benchmarking Terminology for LAN Switching Devices [<a href="rfc2285.html" title='"Benchmarking Terminology for LAN Switching Devices"'>RFC2285</a>]

   It is recommended that these references be included in future
   benchmarking specifications:

   o  Methodology for IP Multicast Benchmarking [<a href="rfc3918.html" title='"Methodology for IP Multicast Benchmarking"'>RFC3918</a>]

   o  Packet Reordering Metrics [<a href="rfc4737.html" title='"Packet Reordering Metrics"'>RFC4737</a>]

   As one might expect, the most fundamental internetworking
   characteristics of throughput and latency remain important when the
   switch is virtualized, and these benchmarks figure prominently in the
   specification.

   When considering characteristics important to "telco" network
   functions, additional performance metrics are needed.  In this case,
   the project specifications have referenced metrics from the IETF IP
   Performance Metrics (IPPM) literature.  This means that the latency
   test described in [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>] is replaced by measurement of a metric
   derived from IPPM's [<a href="rfc7679.html" title='"A One-Way Delay Metric for IP Performance Metrics (IPPM)"'>RFC7679</a>], where a set of statistical summaries
   will be provided (mean, max, min, and percentiles).  Further metrics
   planned to be benchmarked include packet delay variation as defined
   by [<a href="rfc5481.html" title='"Packet Delay Variation Applicability Statement"'>RFC5481</a>], reordering, burst behaviour, DUT availability, DUT



<span class="grey">Tahhan, et al.                Informational                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


   capacity, and packet loss in long-term testing at the throughput
   level, where some low level of background loss may be present and
   characterized.

   Tests have been designed to collect the metrics below:

   o  Throughput tests are designed to measure the maximum forwarding
      rate (in frames per second, fps) and bit rate (in Mbps) for a
      constant load (as defined by [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>]) without traffic loss.

   o  Packet and frame-delay distribution tests are designed to measure
      the average minimum and maximum packet (and/or frame) delay for
      constant loads.

   o  Packet delay tests are designed to understand latency distribution
      for different packet sizes and to uncover outliers over an
      extended test run.

   o  Scalability tests are designed to understand how the virtual
      switch performs with an increasing number of flows, number of
      active ports, configuration complexity of the forwarding logic,
      etc.

   o  Stream performance tests (with TCP or UDP) are designed to measure
      bulk data transfer performance, i.e., how fast systems can send
      and receive data through the switch.

   o  Control-path and data-path coupling tests are designed to
      understand how closely the data path and the control path are
      coupled, as well as the effect of this coupling on the performance
      of the DUT (for example, delay of the initial packet of a flow).

   o  CPU and memory consumption tests are designed to understand the
      virtual switch's footprint on the system and are conducted as
      auxiliary measurements with the benchmarks above.  They include
      CPU utilization, cache utilization, and memory footprint.

   o  The so-called "soak" tests, where the selected test is conducted
      over a long period of time (with an ideal duration of 24 hours but
      only long enough to determine that stability issues exist when
      found; there is no requirement to continue a test when a DUT
      exhibits instability over time).  The key performance
      characteristics and benchmarks for a DUT are determined (using
      short duration tests) prior to conducting soak tests.  The purpose
      of soak tests is to capture transient changes in performance,
      which may occur due to infrequent processes, memory leaks, or the
      low-probability coincidence of two or more processes.  The
      stability of the DUT is the paramount consideration, so



<span class="grey">Tahhan, et al.                Informational                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


      performance must be evaluated periodically during continuous
      testing, and this results in use of frame rate metrics [<a href="rfc2889.html" title='"Benchmarking Methodology for LAN Switching Devices"'>RFC2889</a>]
      instead of throughput [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>] (which requires stopping traffic
      to allow time for all traffic to exit internal queues), for
      example.

   Additional test specification development should include:

   o  Request/response performance tests (with TCP or UDP), which
      measure the transaction rate through the switch.

   o  Noisy neighbor tests, in order to understand the effects of
      resource sharing on the performance of a virtual switch.

   o  Tests derived from examination of ETSI NFV Draft GS IFA003
      requirements [<a href="#ref-IFA003" title='"Network Functions Virtualisation (NFV); Acceleration Technologies; vSwitch Benchmarking and Acceleration Specification"'>IFA003</a>] on characterization of acceleration
      technologies applied to vSwitches.

   The flexibility of deployment of a virtual switch within a network
   means that it is necessary to characterize the performance of a
   vSwitch in various deployment scenarios.  The deployment scenarios
   under consideration are shown in the following figures:

                                                         __
     +--------------------------------------------------+   |
     |              +--------------------+              |   |
     |              |                    |              |   |
     |              |                    v              |   |  Host
     |   +--------------+            +--------------+   |   |
     |   |   PHY Port   |  vSwitch   |   PHY Port   |   |   |
     +---+--------------+------------+--------------+---+ __|
                ^                           :
                |                           |
                :                           v
     +--------------------------------------------------+
     |                                                  |
     |                Traffic Generator                 |
     |                                                  |
     +--------------------------------------------------+

        Figure 3: Physical Port to Virtual Switch to Physical Port










<span class="grey">Tahhan, et al.                Informational                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


                                                         __
     +---------------------------------------------------+   |
     |                                                   |   |
     |   +-------------------------------------------+   |   |
     |   |                 Application               |   |   |
     |   +-------------------------------------------+   |   |
     |       ^                                  :        |   |
     |       |                                  |        |   |  Guest
     |       :                                  v        |   |
     |   +---------------+           +---------------+   |   |
     |   | Logical Port 0|           | Logical Port 1|   |   |
     +---+---------------+-----------+---------------+---+ __|
             ^                                  :
             |                                  |
             :                                  v         __
     +---+---------------+----------+---------------+---+   |
     |   | Logical Port 0|          | Logical Port 1|   |   |
     |   +---------------+          +---------------+   |   |
     |       ^                                  :       |   |
     |       |                                  |       |   |  Host
     |       :                                  v       |   |
     |   +--------------+            +--------------+   |   |
     |   |   PHY Port   |  vSwitch   |   PHY Port   |   |   |
     +---+--------------+------------+--------------+---+ __|
                ^                           :
                |                           |
                :                           v
     +--------------------------------------------------+
     |                                                  |
     |                Traffic Generator                 |
     |                                                  |
     +--------------------------------------------------+

   Figure 4: Physical Port to Virtual Switch to VNF to Virtual Switch to
                               Physical Port
















<span class="grey">Tahhan, et al.                Informational                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


                                                      __
     +----------------------+  +----------------------+  |
     |   Guest 1            |  |   Guest 2            |  |
     |   +---------------+  |  |   +---------------+  |  |
     |   |  Application  |  |  |   |  Application  |  |  |
     |   +---------------+  |  |   +---------------+  |  |
     |       ^       |      |  |       ^       |      |  |
     |       |       v      |  |       |       v      |  |  Guests
     |   +---------------+  |  |   +---------------+  |  |
     |   | Logical Ports |  |  |   | Logical Ports |  |  |
     |   |   0       1   |  |  |   |   0       1   |  |  |
     +---+---------------+--+  +---+---------------+--+__|
             ^       :                 ^       :
             |       |                 |       |
             :       v                 :       v       _
     +---+---------------+---------+---------------+--+ |
     |   |   0       1   |         |   3       4   |  | |
     |   | Logical Ports |         | Logical Ports |  | |
     |   +---------------+         +---------------+  | |
     |       ^       |                 ^       |      | |  Host
     |       |       \-----------------/       v      | |
     |   +--------------+          +--------------+   | |
     |   |   PHY Ports  | vSwitch  |   PHY Ports  |   | |
     +---+--------------+----------+--------------+---+_|
             ^                                 :
             |                                 |
             :                                 v
     +--------------------------------------------------+
     |                                                  |
     |                Traffic Generator                 |
     |                                                  |
     +--------------------------------------------------+

   Figure 5: Physical Port to Virtual Switch to VNF to Virtual Switch to
                  VNF to Virtual Switch to Physical Port
















<span class="grey">Tahhan, et al.                Informational                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


                                                          __
     +---------------------------------------------------+   |
     |                                                   |   |
     |   +-------------------------------------------+   |   |
     |   |                 Application               |   |   |
     |   +-------------------------------------------+   |   |
     |       ^                                           |   |
     |       |                                           |   |  Guest
     |       :                                           |   |
     |   +---------------+                               |   |
     |   | Logical Port 0|                               |   |
     +---+---------------+-------------------------------+ __|
             ^
             |
             :                                            __
     +---+---------------+------------------------------+   |
     |   | Logical Port 0|                              |   |
     |   +---------------+                              |   |
     |       ^                                          |   |
     |       |                                          |   |  Host
     |       :                                          |   |
     |   +--------------+                               |   |
     |   |   PHY Port   |  vSwitch                      |   |
     +---+--------------+------------ -------------- ---+ __|
                ^
                |
                :
     +--------------------------------------------------+
     |                                                  |
     |                Traffic Generator                 |
     |                                                  |
     +--------------------------------------------------+

             Figure 6: Physical Port to Virtual Switch to VNF

















<span class="grey">Tahhan, et al.                Informational                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


                                                          __
     +---------------------------------------------------+   |
     |                                                   |   |
     |   +-------------------------------------------+   |   |
     |   |                 Application               |   |   |
     |   +-------------------------------------------+   |   |
     |                                          :        |   |
     |                                          |        |   |  Guest
     |                                          v        |   |
     |                               +---------------+   |   |
     |                               | Logical Port  |   |   |
     +-------------------------------+---------------+---+ __|
                                                :
                                                |
                                                v         __
     +------------------------------+---------------+---+   |
     |                              | Logical Port  |   |   |
     |                              +---------------+   |   |
     |                                          :       |   |
     |                                          |       |   |  Host
     |                                          v       |   |
     |                               +--------------+   |   |
     |                     vSwitch   |   PHY Port   |   |   |
     +-------------------------------+--------------+---+ __|
                                            :
                                            |
                                            v
     +--------------------------------------------------+
     |                                                  |
     |                Traffic Generator                 |
     |                                                  |
     +--------------------------------------------------+

             Figure 7: VNF to Virtual Switch to Physical Port

















<span class="grey">Tahhan, et al.                Informational                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


                                                      __
     +----------------------+  +----------------------+  |
     |   Guest 1            |  |   Guest 2            |  |
     |   +---------------+  |  |   +---------------+  |  |
     |   |  Application  |  |  |   |  Application  |  |  |
     |   +---------------+  |  |   +---------------+  |  |
     |              |       |  |       ^              |  |
     |              v       |  |       |              |  |  Guests
     |   +---------------+  |  |   +---------------+  |  |
     |   | Logical Ports |  |  |   | Logical Ports |  |  |
     |   |           0   |  |  |   |   0           |  |  |
     +---+---------------+--+  +---+---------------+--+__|
                     :                 ^
                     |                 |
                     v                 :               _
     +---+---------------+---------+---------------+--+ |
     |   |           1   |         |   1           |  | |
     |   | Logical Ports |         | Logical Ports |  | |
     |   +---------------+         +---------------+  | |
     |               |                 ^              | |  Host
     |               \-----------------/              | |
     |                                                | |
     |                    vSwitch                     | |
     +------------------------------------------------+_|

                  Figure 8: VNF to Virtual Switch to VNF

   A set of deployment scenario figures is available on the VSPERF "Test
   Methodology" wiki page [<a href="#ref-TestTopo" title='"Test Methodology"'>TestTopo</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%203x3%20Matrix%20Coverage"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  3x3 Matrix Coverage</span>

   This section organizes the many existing test specifications into the
   "3x3" matrix (introduced in [<a href="rfc8172.html" title='"Considerations for Benchmarking Virtual Network Functions and Their Infrastructure"'>RFC8172</a>]).  Because the LTD
   specification ID names are quite long, this section is organized into
   lists for each occupied cell of the matrix (not all are occupied;
   also, the matrix has grown to 3x4 to accommodate scale metrics when
   displaying the coverage of many metrics/benchmarks).  The current
   version of the LTD specification is available; see [<a href="#ref-LTD" title='"VSPERF Level Test Design (LTD)"'>LTD</a>].

   The tests listed below assess the activation of paths in the data
   plane rather than the control plane.

   A complete list of tests with short summaries is available on the
   VSPERF "LTD Test Spec Overview" wiki page [<a href="#ref-LTDoverV" title='"LTD Test Spec Overview"'>LTDoverV</a>].






<span class="grey">Tahhan, et al.                Informational                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Speed%20of%20Activation"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Speed of Activation</span>

   o  Activation.<a href="rfc2889.html">RFC2889</a>.AddressLearningRate

   o  PacketLatency.InitialPacketProcessingLatency

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Accuracy%20of%20Activation"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Accuracy of Activation</span>

   o  CPDP.Coupling.Flow.Addition

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Reliability%20of%20Activation"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Reliability of Activation</span>

   o  Throughput.<a href="rfc2544.html">RFC2544</a>.SystemRecoveryTime

   o  Throughput.<a href="rfc2544.html">RFC2544</a>.ResetTime

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Scale%20of%20Activation"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Scale of Activation</span>

   o  Activation.<a href="rfc2889.html">RFC2889</a>.AddressCachingCapacity

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20Speed%20of%20Operation"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  Speed of Operation</span>

   o  Throughput.<a href="rfc2544.html">RFC2544</a>.PacketLossRate

   o  Stress.<a href="rfc2544.html">RFC2544</a>.0PacketLoss

   o  Throughput.<a href="rfc2544.html">RFC2544</a>.PacketLossRateFrameModification

   o  Throughput.<a href="rfc2544.html">RFC2544</a>.BackToBackFrames

   o  Throughput.<a href="rfc2889.html">RFC2889</a>.MaxForwardingRate

   o  Throughput.<a href="rfc2889.html">RFC2889</a>.ForwardPressure

   o  Throughput.<a href="rfc2889.html">RFC2889</a>.BroadcastFrameForwarding

   o  Throughput.<a href="rfc2544.html">RFC2544</a>.WorstN-BestN

   o  Throughput.Overlay.Network.&lt;tech&gt;.<a href="rfc2544.html">RFC2544</a>.PacketLossRatio

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.6.%20%20Accuracy%20of%20Operation"></a><a class="selflink" href="#section-5.6" name="section-5.6">5.6</a>.  Accuracy of Operation</span>

   o  Throughput.<a href="rfc2889.html">RFC2889</a>.ErrorFramesFiltering

   o  Throughput.<a href="rfc2544.html">RFC2544</a>.Profile






<span class="grey">Tahhan, et al.                Informational                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.7.%20%20Reliability%20of%20Operation"></a><a class="selflink" href="#section-5.7" name="section-5.7">5.7</a>.  Reliability of Operation</span>

   o  Throughput.<a href="rfc2889.html">RFC2889</a>.Soak

   o  Throughput.<a href="rfc2889.html">RFC2889</a>.SoakFrameModification

   o  PacketDelayVariation.<a href="rfc3393.html">RFC3393</a>.Soak

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.8.%20%20Scalability%20of%20Operation"></a><a class="selflink" href="#section-5.8" name="section-5.8">5.8</a>.  Scalability of Operation</span>

   o  Scalability.<a href="rfc2544.html">RFC2544</a>.0PacketLoss

   o  MemoryBandwidth.<a href="rfc2544.html">RFC2544</a>.0PacketLoss.Scalability

   o  Scalability.VNF.<a href="rfc2544.html">RFC2544</a>.PacketLossProfile

   o  Scalability.VNF.<a href="rfc2544.html">RFC2544</a>.PacketLossRatio

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.9.%20%20Summary"></a><a class="selflink" href="#section-5.9" name="section-5.9">5.9</a>.  Summary</span>

 |---------------------------------------------------------------------|
 |              |           |            |               |             |
 |              |   SPEED   |  ACCURACY  |  RELIABILITY  |    SCALE    |
 |              |           |            |               |             |
 |---------------------------------------------------------------------|
 |              |           |            |               |             |
 |  Activation  |     X     |     X      |       X       |      X      |
 |              |           |            |               |             |
 |---------------------------------------------------------------------|
 |              |           |            |               |             |
 |  Operation   |     X     |     X      |       X       |      X      |
 |              |           |            |               |             |
 |---------------------------------------------------------------------|
 |              |           |            |               |             |
 | De-activation|           |            |               |             |
 |              |           |            |               |             |
 |---------------------------------------------------------------------|














<span class="grey">Tahhan, et al.                Informational                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   Benchmarking activities as described in this memo are limited to
   technology characterization of a Device Under Test/System Under Test
   (DUT/SUT) using controlled stimuli in a laboratory environment with
   dedicated address space and the constraints specified in the sections
   above.

   The benchmarking network topology will be an independent test setup
   and MUST NOT be connected to devices that may forward the test
   traffic into a production network or misroute traffic to the test
   management network.

   Further, benchmarking is performed on a "black-box" basis and relies
   solely on measurements observable external to the DUT/SUT.

   Special capabilities SHOULD NOT exist in the DUT/SUT specifically for
   benchmarking purposes.  Any implications for network security arising
   from the DUT/SUT SHOULD be identical in the lab and in production
   networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20References"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Normative%20References"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC2285" name="ref-RFC2285">RFC2285</a>]  Mandeville, R., "Benchmarking Terminology for LAN
              Switching Devices", <a href="rfc2285.html">RFC 2285</a>, DOI 10.17487/RFC2285,
              February 1998, &lt;<a href="https://www.rfc-editor.org/info/rfc2285">https://www.rfc-editor.org/info/rfc2285</a>&gt;.

   [<a id="ref-RFC2544" name="ref-RFC2544">RFC2544</a>]  Bradner, S. and J. McQuaid, "Benchmarking Methodology for
              Network Interconnect Devices", <a href="rfc2544.html">RFC 2544</a>,
              DOI 10.17487/RFC2544, March 1999,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2544">https://www.rfc-editor.org/info/rfc2544</a>&gt;.

   [<a id="ref-RFC2889" name="ref-RFC2889">RFC2889</a>]  Mandeville, R. and J. Perser, "Benchmarking Methodology
              for LAN Switching Devices", <a href="rfc2889.html">RFC 2889</a>,
              DOI 10.17487/RFC2889, August 2000,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2889">https://www.rfc-editor.org/info/rfc2889</a>&gt;.

   [<a id="ref-RFC3918" name="ref-RFC3918">RFC3918</a>]  Stopp, D. and B. Hickman, "Methodology for IP Multicast
              Benchmarking", <a href="rfc3918.html">RFC 3918</a>, DOI 10.17487/RFC3918, October
              2004, &lt;<a href="https://www.rfc-editor.org/info/rfc3918">https://www.rfc-editor.org/info/rfc3918</a>&gt;.




<span class="grey">Tahhan, et al.                Informational                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


   [<a id="ref-RFC4737" name="ref-RFC4737">RFC4737</a>]  Morton, A., Ciavattone, L., Ramachandran, G., Shalunov,
              S., and J. Perser, "Packet Reordering Metrics", <a href="rfc4737.html">RFC 4737</a>,
              DOI 10.17487/RFC4737, November 2006,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4737">https://www.rfc-editor.org/info/rfc4737</a>&gt;.

   [<a id="ref-RFC6201" name="ref-RFC6201">RFC6201</a>]  Asati, R., Pignataro, C., Calabria, F., and C. Olvera,
              "Device Reset Characterization", <a href="rfc6201.html">RFC 6201</a>,
              DOI 10.17487/RFC6201, March 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6201">https://www.rfc-editor.org/info/rfc6201</a>&gt;.

   [<a id="ref-RFC6985" name="ref-RFC6985">RFC6985</a>]  Morton, A., "IMIX Genome: Specification of Variable Packet
              Sizes for Additional Testing", <a href="rfc6985.html">RFC 6985</a>,
              DOI 10.17487/RFC6985, July 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6985">https://www.rfc-editor.org/info/rfc6985</a>&gt;.

   [<a id="ref-RFC7679" name="ref-RFC7679">RFC7679</a>]  Almes, G., Kalidindi, S., Zekauskas, M., and A. Morton,
              Ed., "A One-Way Delay Metric for IP Performance Metrics
              (IPPM)", STD 81, <a href="rfc7679.html">RFC 7679</a>, DOI 10.17487/RFC7679, January
              2016, &lt;<a href="https://www.rfc-editor.org/info/rfc7679">https://www.rfc-editor.org/info/rfc7679</a>&gt;.

   [<a id="ref-RFC8174" name="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="rfc2119.html">RFC</a>
              <a href="rfc2119.html">2119</a> Key Words", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc8174.html">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Informative%20References"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-BENCHMARK-METHOD" name="ref-BENCHMARK-METHOD">BENCHMARK-METHOD</a>]
              Huang, L., Ed., Rong, G., Ed., Mandeville, B., and B.
              Hickman, "Benchmarking Methodology for Virtualization
              Network Performance", Work in Progress, <a href="https://tools.ietf.org/html/draft-huang-bmwg-virtual-network-performance-03">draft-huang-bmwg-</a>
              <a href="https://tools.ietf.org/html/draft-huang-bmwg-virtual-network-performance-03">virtual-network-performance-03</a>, July 2017.

   [<a id="ref-DanubeRel" name="ref-DanubeRel">DanubeRel</a>]
              OPNFV, "Danube",
              &lt;<a href="https://wiki.opnfv.org/display/SWREL/Danube">https://wiki.opnfv.org/display/SWREL/Danube</a>&gt;.

   [<a id="ref-IEEE802.1ac" name="ref-IEEE802.1ac">IEEE802.1ac</a>]
              IEEE, "IEEE Standard for Local and metropolitan area
              networks -- Media Access Control (MAC) Service
              Definition", IEEE 802.1AC-2016,
              DOI 10.1109/IEEESTD.2017.7875381, 2016,
              &lt;<a href="https://standards.ieee.org/findstds/standard/802.1AC-2016.html">https://standards.ieee.org/findstds/</a>
              <a href="https://standards.ieee.org/findstds/standard/802.1AC-2016.html">standard/802.1AC-2016.html</a>&gt;.

   [<a id="ref-IEEE829" name="ref-IEEE829">IEEE829</a>]  IEEE, "IEEE Standard for Software and System Test
              Documentation", IEEE 829-2008,
              DOI 10.1109/IEEESTD.2008.4578383,
              &lt;<a href="http://ieeexplore.ieee.org/document/4578383/">http://ieeexplore.ieee.org/document/4578383/</a>&gt;.



<span class="grey">Tahhan, et al.                Informational                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


   [<a id="ref-IFA003" name="ref-IFA003">IFA003</a>]   ETSI, "Network Functions Virtualisation (NFV);
              Acceleration Technologies; vSwitch Benchmarking and
              Acceleration Specification", ETSI GS NFV-IFA 003 V2.1.1,
              April 2016, &lt;<a href="http://www.etsi.org/deliver/etsi_gs/NFV-IFA/001_099/003/02.01.01_60/gs_NFV-IFA003v020101p.pdf">http://www.etsi.org/deliver/etsi_gs/</a>
              <a href="http://www.etsi.org/deliver/etsi_gs/NFV-IFA/001_099/003/02.01.01_60/gs_NFV-IFA003v020101p.pdf">NFV-IFA/001_099/003/02.01.01_60/</a>
              <a href="http://www.etsi.org/deliver/etsi_gs/NFV-IFA/001_099/003/02.01.01_60/gs_NFV-IFA003v020101p.pdf">gs_NFV-IFA003v020101p.pdf</a>&gt;.

   [<a id="ref-LTD" name="ref-LTD">LTD</a>]      Tahhan, M., "VSPERF Level Test Design (LTD)",
              &lt;<a href="http://docs.opnfv.org/en/stable-danube/submodules/vswitchperf/docs/testing/developer/requirements/vswitchperf_ltd.html#">http://docs.opnfv.org/en/stable-danube/</a>
              <a href="http://docs.opnfv.org/en/stable-danube/submodules/vswitchperf/docs/testing/developer/requirements/vswitchperf_ltd.html#">submodules/vswitchperf/docs/testing/developer/</a>
              <a href="http://docs.opnfv.org/en/stable-danube/submodules/vswitchperf/docs/testing/developer/requirements/vswitchperf_ltd.html#">requirements/vswitchperf_ltd.html#</a>&gt;.

   [<a id="ref-LTDoverV" name="ref-LTDoverV">LTDoverV</a>] Morton, A., "LTD Test Spec Overview",
              &lt;<a href="https://wiki.opnfv.org/display/vsperf/">https://wiki.opnfv.org/display/vsperf/</a>
              LTD+Test+Spec+Overview&gt;.

   [<a id="ref-OPNFV" name="ref-OPNFV">OPNFV</a>]    OPNFV, "OPNFV", &lt;<a href="https://www.opnfv.org/">https://www.opnfv.org/</a>&gt;.

   [<a id="ref-RFC1242" name="ref-RFC1242">RFC1242</a>]  Bradner, S., "Benchmarking Terminology for Network
              Interconnection Devices", <a href="rfc1242.html">RFC 1242</a>, DOI 10.17487/RFC1242,
              July 1991, &lt;<a href="https://www.rfc-editor.org/info/rfc1242">https://www.rfc-editor.org/info/rfc1242</a>&gt;.

   [<a id="ref-RFC5481" name="ref-RFC5481">RFC5481</a>]  Morton, A. and B. Claise, "Packet Delay Variation
              Applicability Statement", <a href="rfc5481.html">RFC 5481</a>, DOI 10.17487/RFC5481,
              March 2009, &lt;<a href="https://www.rfc-editor.org/info/rfc5481">https://www.rfc-editor.org/info/rfc5481</a>&gt;.

   [<a id="ref-RFC8172" name="ref-RFC8172">RFC8172</a>]  Morton, A., "Considerations for Benchmarking Virtual
              Network Functions and Their Infrastructure", <a href="rfc8172.html">RFC 8172</a>,
              DOI 10.17487/RFC8172, July 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8172">https://www.rfc-editor.org/info/rfc8172</a>&gt;.

   [<a id="ref-TestTopo" name="ref-TestTopo">TestTopo</a>] Snyder, E., "Test Methodology",
              &lt;<a href="https://wiki.opnfv/">https://wiki.opnfv</a>.org/display/vsperf/Test+Methodology&gt;.

   [<a id="ref-VSPERFhome" name="ref-VSPERFhome">VSPERFhome</a>]
              Tahhan, M., "VSPERF Home",
              &lt;<a href="https://wiki.opnfv/">https://wiki.opnfv</a>.org/display/vsperf/VSperf+Home&gt;.

Acknowledgements

   The authors appreciate and acknowledge comments from Scott Bradner,
   Marius Georgescu, Ramki Krishnan, Doug Montgomery, Martin Klozik,
   Christian Trautman, Benoit Claise, and others for their reviews.

   We also acknowledge the early work in [<a href="#ref-BENCHMARK-METHOD" title='"Benchmarking Methodology for Virtualization Network Performance"'>BENCHMARK-METHOD</a>] and useful
   discussion with the authors.





<span class="grey">Tahhan, et al.                Informational                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc8204.html">RFC 8204</a>                 Benchmarking vSwitches           September 2017</span>


Authors' Addresses

   Maryam Tahhan
   Intel

   Email: maryam.tahhan@intel.com


   Billy O'Mahony
   Intel

   Email: billy.o.mahony@intel.com


   Al Morton
   AT&amp;T Labs
   200 Laurel Avenue South
   Middletown, NJ  07748
   United States of America

   Phone: +1 732 420 1571
   Fax:   +1 732 368 1192
   Email: acmorton@att.com




























Tahhan, et al.                Informational                    [Page 24]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc8204 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:57 GMT --></html>