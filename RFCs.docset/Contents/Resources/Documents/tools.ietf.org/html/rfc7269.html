<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc7269 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:23 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-chen-v6ops-nat64-experience" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:7269" name="DC.Identifier"/>
<meta content="June, 2014" name="DC.Date.Issued"/>
<meta content="Binet, David" name="DC.Creator"/>
<meta content="Chen, Gang" name="DC.Creator"/>
<meta content="Cao, Zhen" name="DC.Creator"/>
<meta content="Xie, Chongfeng" name="DC.Creator"/>
<meta content="This document summarizes NAT64 function deployment scenarios and
operational experience. Both NAT64 Carrier-Grade NAT (NAT64-CGN) and
NAT64 server Front End (NAT64-FE) are considered in this document." name="DC.Description.Abstract"/>
<meta content="NAT64 Deployment Options and Experience" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 7269 - NAT64 Deployment Options and Experience</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7269.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7269" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-v6ops-nat64-experience" title="draft-ietf-v6ops-nat64-experience">draft-ietf-v6op...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7269" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7269" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7269" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                           G. Chen
Request for Comments: 7269                                        Z. Cao
Category: Informational                                     China Mobile
ISSN: 2070-1721                                                   C. Xie
                                                           China Telecom
                                                                D. Binet
                                                   France Telecom-Orange
                                                               June 2014


                <span class="h1">NAT64 Deployment Options and Experience</span>

Abstract

   This document summarizes NAT64 function deployment scenarios and
   operational experience.  Both NAT64 Carrier-Grade NAT (NAT64-CGN) and
   NAT64 server Front End (NAT64-FE) are considered in this document.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7269">http://www.rfc-editor.org/info/rfc7269</a>.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



<span class="grey">Chen, et al.                  Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-3">3</a>.  NAT64 Networking Experience . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-3.1">3.1</a>.  NAT64-CGN Consideration . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-3.1.1">3.1.1</a>.  NAT64-CGN Usages  . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-3.1.2">3.1.2</a>.  DNS64 Deployment  . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-3.1.3">3.1.3</a>.  NAT64 Placement . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
       <a href="#section-3.1.4">3.1.4</a>.  Coexistence of NAT64 and NAT44  . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.2">3.2</a>.  NAT64-FE Consideration  . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-4">4</a>.  High Availability . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-4.1">4.1</a>.  Redundancy Design . . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-4.2">4.2</a>.  Load Balancing  . . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
   <a href="#section-5">5</a>.  Source-Address Transparency . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-5.1">5.1</a>.  Traceability  . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-5.2">5.2</a>.  Geolocation . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
   <a href="#section-6">6</a>.  Quality of Experience . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-6.1">6.1</a>.  Service Reachability  . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-6.2">6.2</a>.  Resource Reservation  . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
   <a href="#section-7">7</a>.  MTU Considerations  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
   <a href="#section-8">8</a>.  ULA Usages  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-9">9</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
   <a href="#section-10">10</a>. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
   <a href="#section-11">11</a>. Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   <a href="#section-12">12</a>. References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
     <a href="#section-12.1">12.1</a>.  Normative References . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
     <a href="#section-12.2">12.2</a>.  Informative References . . . . . . . . . . . . . . . . .  <a href="#page-18">18</a>
   <a href="#appendix-A">Appendix A</a>.  Test Results for Application Behavior  . . . . . . .  <a href="#page-21">21</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   IPv6 is the only sustainable solution for numbering nodes on the
   Internet due to the IPv4 depletion.  Network operators have to deploy
   IPv6-only networks in order to meet the needs of the expanding
   Internet without available IPv4 addresses.

   Single-stack IPv6 network deployment can simplify network
   provisioning; some justification was provided in 464XLAT [<a href="rfc6877.html" title='"464XLAT: Combination of Stateful and Stateless Translation"'>RFC6877</a>].
   IPv6-only connectivity confers some benefits to mobile operators as
   an example.  In the mobile context, IPv6-only usage enables the use
   of a single IPv6 Packet Data Protocol (PDP) context or Evolved Packet
   System (EPS) bearer on Long Term Evolution (LTE) networks.  This
   eliminates significant network costs (caused by employing two PDP
   contexts in some cases) and the need for IPv4 addresses to be
   assigned to customers.  In broadband networks overall, it can allow
   for the scaling of edge-network growth to be decoupled from IPv4
   numbering limitations.



<span class="grey">Chen, et al.                  Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   In transition scenarios, some existing networks are likely to be IPv4
   only for quite a long time.  IPv6 networks and IPv6-only hosts will
   need to coexist with IPv4 numbered resources.  Widespread dual-stack
   deployments have not materialized at the anticipated rate over the
   last 10 years, one possible conclusion being that legacy networks
   will not make the jump quickly.  The Internet will include nodes that
   are dual stack, nodes that remain IPv4 only, and nodes that can be
   deployed as IPv6-only nodes.  A translation mechanism based on a
   NAT64 function [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>] [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>] is likely to be a key element of
   Internet connectivity for IPv6-IPv4 interoperability.

   [<a id="ref-RFC6036" name="ref-RFC6036">RFC6036</a>] reports at least 30% of operators plan to run some kind of
   translator (presumably NAT64/DNS64).  Advice on NAT64 deployment and
   operations are therefore of some importance.  [<a href="rfc6586.html" title='"Experiences from an IPv6-Only Network"'>RFC6586</a>] documents the
   implications for IPv6-only networks.  This document intends to be
   specific to NAT64 network planning.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   Regarding IPv4/IPv6 translation, [<a href="rfc6144.html" title='"Framework for IPv4/IPv6 Translation"'>RFC6144</a>] has described a framework
   for enabling networks to make interworking possible between IPv4 and
   IPv6 networks.  Two operation modes (i.e., stateful translation and
   stateless translation) have been described in <a href="rfc6144.html#section-3.2">Section 3.2 of
   [RFC6144]</a>.  This document describes the usage of those two operation
   modes and has further categorized different NAT64 functions,
   locations, and use cases.  The principal distinction of location is
   whether the NAT64 is located in a Carrier-Grade NAT or server Front
   End. The terms "NAT-CGN" and "NAT-FE" are understood to be a
   topological distinction indicating different features employed in a
   NAT64 deployment.

   NAT64 Carrier Grade NAT (NAT64-CGN):  A NAT64-CGN is placed in an ISP
      network.  IPv6-enabled subscribers leverage the NAT64-CGN to
      access existing IPv4 Internet services.  The ISP as an
      administrative entity takes full control of the IPv6 side, but it
      has limited or no control on the IPv4 Internet side.  NAT64-CGN
      deployments may have to consider the IPv4 Internet environment and
      services, and make appropriate configuration choices accordingly.

   NAT64 server Front End (NAT64-FE):  A NAT64-FE is generally a device
      with NAT64 functionality in a content provider or data center
      network.  It could be, for example, a traffic load balancer or a
      firewall.  The operator of the NAT64-FE has full control over the
      IPv4 network within the data center but only limited influence or
      control over the external Internet IPv6 network.






<span class="grey">Chen, et al.                  Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20NAT64%20Networking%20Experience"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  NAT64 Networking Experience</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20NAT64-CGN%20Consideration"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  NAT64-CGN Consideration</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.1.%20%20NAT64-CGN%20Usages"></a><a class="selflink" href="#section-3.1.1" name="section-3.1.1">3.1.1</a>.  NAT64-CGN Usages</span>

   Fixed network operators and mobile operators may locate NAT64
   translators in access networks or in mobile core networks.  NAT64 can
   be built into various devices, including routers, gateways, or
   firewalls, in order to connect IPv6 users to the IPv4 Internet.  With
   regard to the numbers of users and the shortage of public IPv4
   addresses, stateful NAT64 [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>] is more suited to maximize
   sharing of public IPv4 addresses.  The usage of stateless NAT64 can
   provide better transparency features [<a href="#ref-MOTIVATION">MOTIVATION</a>], but it has to be
   coordinated with Address plus Port (A+P) processes [<a href="rfc6346.html" title='"The Address plus Port (A+P) Approach to the IPv4 Address Shortage"'>RFC6346</a>] as
   specified in [<a href="#ref-MAP-T" title='"Mapping of Address and Port using Translation (MAP-T)"'>MAP-T</a>] in order to deal with an IPv4 address shortage.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.2.%20%20DNS64%20Deployment"></a><a class="selflink" href="#section-3.1.2" name="section-3.1.2">3.1.2</a>.  DNS64 Deployment</span>

   DNS64 [<a href="rfc6147.html" title='"DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>] is recommended for use in combination with stateful
   NAT64, and it will likely be an essential part of an IPv6 single-
   stack network that couples to the IPv4 Internet. 464XLAT [<a href="rfc6877.html" title='"464XLAT: Combination of Stateful and Stateless Translation"'>RFC6877</a>]
   can enable access of IPv4-only applications or applications that call
   IPv4 literal addresses.  Using DNS64 will help 464XLAT to
   automatically discover NAT64 prefixes through [<a href="rfc7050.html" title='"Discovery of the IPv6 Prefix Used for IPv6 Address Synthesis"'>RFC7050</a>].  Berkeley
   Internet Name Daemon (BIND) software supports that function.  It's
   important to note that DNS64 generates the synthetic AAAA reply when
   services only provide A records.  Operators should not expect to
   access IPv4 parts of a dual-stack server using NAT64/DNS64.  The
   traffic is forwarded on IPv6 paths if dual-stack servers are
   targeted.  IPv6 traffic may be routed around rather than going
   through NAT64.  Only the traffic going to IPv4-only services would
   traverse the NAT64 translator.  In some sense, it encourages IPv6
   usage and limits NAT translation compared to employing NAT44, where
   all traffic flows have to be translated.  In some cases, NAT64-CGNs
   may serve double roles, i.e., as a translator and IPv6 forwarder.  In
   mobile networks, NAT64 may be deployed as the default gateway serving
   all the IPv6 traffic.  The traffic heading to a dual-stack server is
   only forwarded on the NAT64.  Therefore, both IPv6 and IPv4 are
   suggested to be configured on the Internet-facing interfaces of
   NAT64.  We tested on the top 100 websites (referring to [<a href="#ref-Alexa" title='"Top 500 Global Sites"'>Alexa</a>]
   statistics). 43% of websites are connected and forwarded on NAT64
   since those websites have both AAAA and A records.  With expansion of
   IPv6 support, the translation process on NAT64 will likely become
   less important over time.  It should be noted that the DNS64-DNSSEC
   interaction [<a href="rfc6147.html" title='"DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>] may impact validation of Resource Records
   retrieved from the DNS64 process.  In particular, DNSSEC validation




<span class="grey">Chen, et al.                  Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   will fail when DNS64 synthesizes AAAA records where there is a DNS
   query received with the "DNSSEC OK" (DO) bit set and the "Checking
   Disabled" (CD) bit set.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.3.%20%20NAT64%20Placement"></a><a class="selflink" href="#section-3.1.3" name="section-3.1.3">3.1.3</a>.  NAT64 Placement</span>

   All connections to IPv4 services from IPv6-only clients must traverse
   the NAT64-CGN.  It can be advantageous from the viewpoint of
   troubleshooting and traffic engineering to carry the IPv6 traffic
   natively for as long as possible within an access network and
   translate packets only at or near the network egress.  NAT64 may be a
   feature of the Autonomous System (AS) border in fixed networks.  It
   may be deployed in an IP node beyond the Gateway GPRS Support Node
   (GGSN) or Packet Data Network Gateway (PDN-GW) in mobile networks or
   directly as part of the gateway itself in some situations.  This
   allows consistent attribution and traceability within the service
   provider network.  It has been observed that the process of
   correlating log information is problematic from multiple vendors'
   equipment due to inconsistent formats of log records.  Placing NAT64
   in a centralized location may reduce diversity of log format and
   simplify the network provisioning.  Moreover, since NAT64 is only
   targeted at serving traffic flows from IPv6 to IPv4-only services,
   the user traffic volume should not be as high as in a NAT44 scenario,
   and therefore, the gateway's capacity in such a location may be less
   of a concern or a hurdle to deployment.  On the other hand, placement
   in a centralized fashion would require more strict high-availability
   (HA) design.  It would also make geolocation based on IPv4 addresses
   rather inaccurate as is currently the case for NAT44 CGNs already
   deployed in ISP networks.  More considerations or workarounds on HA
   and traceability can be found in Sections <a href="#section-4">4</a> and <a href="#section-5">5</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.4.%20%20Coexistence%20of%20NAT64%20and%20NAT44"></a><a class="selflink" href="#section-3.1.4" name="section-3.1.4">3.1.4</a>.  Coexistence of NAT64 and NAT44</span>

   NAT64 will likely coexist with NAT44 in a dual-stack network where
   IPv4 private addresses are allocated to customers.  The coexistence
   has already been observed in mobile networks, in which dual-stack
   mobile phones normally initiate some dual-stack PDN/PDP Type
   [<a href="rfc6459.html" title='"IPv6 in 3rd Generation Partnership Project (3GPP) Evolved Packet System (EPS)"'>RFC6459</a>] to query both IPv4/IPv6 addresses and IPv4-allocated
   addresses (which are very often private ones).  [<a href="rfc6724.html" title='"Default Address Selection for Internet Protocol Version 6 (IPv6)"'>RFC6724</a>] always
   prioritizes IPv6 connections regardless of whether the end-to-end
   path is native IPv6 or IPv6 translated to IPv4 via NAT64/DNS64.
   Conversely, a "Happy Eyeballs" [<a href="rfc6555.html" title='"Happy Eyeballs: Success with Dual-Stack Hosts"'>RFC6555</a>] algorithm will direct some
   IP flows across IPv4 paths.  The selection of IPv4/IPv6 paths may
   depend on particular implementation choices or settings on a host-by-
   host basis, and it may differ from an operator's deterministic
   scheme.  Our tests verified that hosts may find themselves switching
   between IPv4 and IPv6 paths as they access identical services, but at
   different times [<a href="#ref-COEXIST" title='"Co-existence of both dual- stack and IPv6-only hosts"'>COEXIST</a>].  Since the topology on each path is



<span class="grey">Chen, et al.                  Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   potentially different, it may cause unstable user experience and some
   degradation of Quality of Experience (QoE) when falling back to the
   other protocol.  It's also difficult for operators to find a solution
   to make a stable network with optimal resource utilization.  In
   general, it's desirable to figure out the solution that will
   introduce IPv6/IPv4 translation service to IPv6-only hosts connecting
   to IPv4 servers, while making sure dual-stack hosts have at least one
   address family accessible via native service if possible.  With the
   end-to-end native IPv6 environment available, hosts should be
   upgraded aggressively to migrate in favor of IPv6 only.  There are
   ongoing efforts to detect host connectivity and propose a new DHCPv6
   option [<a href="#ref-CONN-STATUS">CONN-STATUS</a>] to convey appropriate configuration information
   to the hosts.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20NAT64-FE%20Consideration"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  NAT64-FE Consideration</span>

   Some Internet Content Providers (ICPs) may locate NAT64 in front of
   an Internet Data Center (IDC), for example, co-located with a load-
   balancing function.  Load balancers are employed to connect different
   IP family domains and distribute workloads across multiple domains or
   internal servers.  In some cases, IPv4 address exhaustion may not be
   a problem in an IDC's internal network.  IPv6 support for some
   applications may require increased investment and workload, so IPv6
   support may not be a priority.  NAT64 can be used to support
   widespread IPv6 adoption on the Internet while maintaining access to
   IPv4-only applications.

   Different strategies have been described in [<a href="rfc6883.html" title='"IPv6 Guidance for Internet Content Providers and Application Service Providers"'>RFC6883</a>]; they are
   referred to as "inside out" and "outside in".  An IDC operator may
   implement the following practices in the NAT64-FE networking
   scenario.

   o  Some ICPs who already have satisfactory operational experience
      might adopt single-stack IPv6 operation in building data center
      networks, servers, and applications, as it allows new services to
      be delivered without having to consider IPv4 NAT or the address
      limitations of IPv4 networks.  Stateless NAT64 [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>] can used
      to provide services for IPv4-only customers.  [<a href="#ref-SIIT" title='"Stateless IP/ICMP Translation in IPv6 Data Centre Environments"'>SIIT</a>] has provided
      further descriptions and guidelines.

   o  ICPs who attempt to offer customers IPv6 support in their
      application farms at an early stage will likely run proxies, load
      balancers, or translators that are configured to handle incoming
      IPv6 flows and proxy them to IPv4 back-end systems.  Many load
      balancers integrate proxy functionality.  IPv4 addresses
      configured in the proxy may be multiplexed like a stateful NAT64
      translator.  A similar challenge exists as more users with IPv6
      connectivity access IPv4 networks.  High loads on load balancers



<span class="grey">Chen, et al.                  Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


      may be apt to cause additional latency, IPv4 pool exhaustion, etc.
      Therefore, this approach is only reasonable at an early stage.
      ICPs may employ dual stack or IPv6 single stack in a further
      stage, since native IPv6 is frequently more desirable than any of
      the transition solutions.

   [<a id="ref-RFC6144" name="ref-RFC6144">RFC6144</a>] recommends that AAAA records of load balancers or
   application servers can be directly registered in the authoritative
   DNS servers.  In this case, there is no need to deploy DNS64 name
   servers.  Those AAAA records can point to natively assigned IPv6
   addresses or IPv4-converted IPv6 addresses [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>].  Hosts are not
   aware of the NAT64 translator on the communication path.  For testing
   purposes, operators could employ an independent subdomain, e.g.,
   ipv6exp.example.com, to identify experimental IPv6 services to users.
   How to design the Fully Qualified Domain Name (FQDN) for the IPv6
   service is outside the scope of this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20High%20Availability"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  High Availability</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Redundancy%20Design"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Redundancy Design</span>

   High Availability (HA) is a major requirement for every service and
   network service.  Deploying redundancy mechanisms is essential to
   avoiding failure and significantly increasing the network
   reliability.  It's useful not only to stateful NAT64 cases but also
   to stateless NAT64 gateways.

   Three redundancy modes are mainly used: Cold Standby, Warm Standby,
   and Hot Standby.

   o  Cold Standby HA devices do not replicate the NAT64 states from the
      primary equipment to the backup.  Administrators switch on the
      backup NAT64 only if the primary NAT64 fails.  As a result, all
      existing established sessions through a failed translator will be
      disconnected.  The translated flows will need to be recreated by
      end systems.  Since the backup NAT64 is manually configured to
      switch over to active NAT64, it may have unpredictable impacts to
      the ongoing services.

   o  Warm Standby is a flavor of the Cold Standby mode.  Backup NAT64
      would keep running once the primary NAT64 is working.  This makes
      Warm Standby less time-consuming during the traffic failover.  The
      Virtual Router Redundancy Protocol (VRRP)[<a href="rfc5798.html" title='"Virtual Router Redundancy Protocol (VRRP) Version 3 for IPv4 and IPv6"'>RFC5798</a>] can be a
      solution to enable automatic handover during Warm Standby.  During
      testing, the handover took a maximum of 1 minute if the backup
      NAT64 had to take over routing and reconstruct the Binding





<span class="grey">Chen, et al.                  Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


      Information Bases (BIBs) for 30 million sessions.  In the
      deployment phase, operators could balance loads on distinct NAT64
      devices.  Those NAT64 devices make a warm backup of each other.

   o  Hot Standby must synchronize the BIBs between the primary NAT64
      and backup.  When the primary NAT64 fails, the backup NAT64 takes
      over and maintains the state of all existing sessions.  The
      internal hosts don't have to reconnect the external hosts.  The
      handover time is extremely reduced.  During testing that employed
      Bidirectional Forwarding Detection (BFD) [<a href="rfc5880.html" title='"Bidirectional Forwarding Detection (BFD)"'>RFC5880</a>] combined with
      VRRP, a handover time of only 35 ms for 30 million sessions was
      observed.  Under ideal conditions, Hot Standby deployments could
      guarantee the session continuity for every service.  In order to
      transmit session states in a timely manner, operators may have to
      deploy extra transport links between the primary NAT64 and the
      distant backup.  The scale of synchronization of the data instance
      depends on the particular deployment.  For example, if a NAT64-CGN
      serves 200,000 users, an average amount of 800,000 sessions per
      second is a rough estimate of the newly created and expired
      sessions.  A physical 10 Gbit/s transport link may have to be
      deployed for the sync data transmission considering the amount of
      sync sessions at the peak and the capacity redundancy.

   In general, Cold Standby and Warm Standby are simpler and less
   resource intensive, but they require clients to re-establish sessions
   when a failover occurs.  Hot Standby increases resource consumption
   in order to synchronize state, but it potentially achieves seamless
   handover.  For stateless NAT64, considerations are simple because
   state synchronization is unnecessary.  Regarding stateful NAT64, it
   may be useful to investigate the performance tolerance of
   applications and the traffic characteristics in a particular network.
   Some test results are shown in the <a href="#appendix-A">Appendix A</a>.

   Our statistics in a mobile network shown that almost 91.21% of
   traffic is accounted by HTTP/HTTPS services.  These services
   generally don't require session continuity.  Hot Standby does not
   offer much benefit for those sessions on this point.  In fixed
   networks, HTTP streaming, P2P, and online games would be the major
   traffic beneficiaries of Hot Standby replication [<a href="#ref-Cisco-VNI">Cisco-VNI</a>].
   Consideration should be given to the importance of maintaining
   bindings for those sessions across failover.  Operators may also
   consider the Average Revenue Per User (ARPU) when deploying a
   suitable redundancy mode.  Warm Standby may still be adopted to cover
   most services, while Hot Standby could be used to upgrade the Quality
   of Experience (QoE) and using DNS64 to generate different synthetic
   responses for limited traffic or destinations.  Further
   considerations are discussed at <a href="#section-6">Section 6</a>.




<span class="grey">Chen, et al.                  Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Load%20Balancing"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Load Balancing</span>

   Load balancing is used to accompany redundancy design so that better
   scalability and resiliency can be achieved.  Stateless NAT64s allow
   asymmetric routing, while anycast-based solutions are recommended in
   [<a href="#ref-MAP-DEPLOY">MAP-DEPLOY</a>].  The deployment of load balancing may make more sense
   to stateful NAT64s for the sake of avoiding single-point failures.
   Since the NAT64-CGN and NAT64-FE have distinct facilities, the
   following lists the considerations for each case.

   o  NAT64-CGN normally doesn't implement load-balancing functions;
      they may be implemented in other dedicated equipment.  Therefore,
      the gateways have to resort to DNS64 or an internal host's
      behavior.  Once DNS64 is deployed, the load balancing can be
      performed by synthesizing the AAAA response with different IPv6
      prefixes.  For the applications not requiring a DNS resolver,
      internal hosts could learn multiple IPv6 prefixes through the
      approaches defined in [<a href="rfc7050.html" title='"Discovery of the IPv6 Prefix Used for IPv6 Address Synthesis"'>RFC7050</a>] and then select one based on a
      given prefix selection policy.

   o  A dedicated load balancer could be deployed at the front of a
      NAT64-FE farm.  The load balancer could use proxy mode to redirect
      the flows to the appropriate NAT64 instance.  Stateful NAT64s
      require a deterministic pattern to arrange the traffic in order to
      ensure outbound/inbound flows traverse the identical NAT64.
      Therefore, static scheduling algorithms, for example, a source-
      address-based policy, is preferred.  A dynamic algorithm, for
      example, Round-Robin, may have impacts on applications seeking
      session continuity, which are described in Table 1.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Source-Address%20Transparency"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Source-Address Transparency</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Traceability"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Traceability</span>

   Traceability is required in many cases, such as meeting accounting
   requirements and identifying the sources of malicious attacks.
   Operators are asked to record the NAT64 log information for specific
   periods of time.  In our lab testing, the log information from
   200,000 subscribers was collected from a stateful NAT64 gateway for
   60 days.  Syslog [<a href="rfc5424.html" title='"The Syslog Protocol"'>RFC5424</a>] has been adopted to transmit log messages
   from NAT64 to a log station.  Each log message contains the transport
   protocol, source IPv6 address:port, translated IPv4 address:port, and
   timestamp.  It takes almost 125 bytes in ASCII format.  It has been
   verified that the rate of traffic flow is around 72,000 flows per
   second, and the volume of recorded information reaches up to 42.5
   terabytes in the raw format.  The volume is 29.07 terabytes in a





<span class="grey">Chen, et al.                  Informational                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   compact format.  At scale, operators have to build up dedicated
   transport links, storage systems, and servers for the purpose of
   managing such logging.

   There are also several improvements that can be made to mitigate the
   issue.  For example, stateful NAT64 could be configured with the bulk
   port allocation method.  Once a subscriber creates the first session,
   a number of ports are pre-allocated.  A bulk allocation message is
   logged indicating this allocation.  Subsequent session creations will
   use one of the pre-allocated ports and hence do not require logging.
   The log volume in this case may be only one thousandth of that of
   dynamic port allocation.  Some implementations may adopt static port-
   range allocations [<a href="#ref-DET-CGN" title='"Deterministic Address Mapping to Reduce Logging in Carrier Grade NAT Deployments"'>DET-CGN</a>] that eliminate the need for per-
   subscriber logging.  As a side effect of those methods, the IPv4
   multiplexing efficiency is decreased.  For example, the utilization
   ratio of public IPv4 addresses drops to approximately 75% when the
   NAT64 gateway is configured with bulk port allocation.  (The lab
   testing allocates each subscriber with 400 ports.)  In addition,
   port-range-based allocation should consider port randomization as
   described in [<a href="rfc6056.html" title='"Recommendations for Transport- Protocol Port Randomization"'>RFC6056</a>].  The trade-off among address multiplexing
   efficiency, logging storage compression, and port allocation
   complexity should be considered.  More discussions can be found in
   [<a href="#ref-PORT-ALLOC">PORT-ALLOC</a>].  The decision can balance usable IPv4 resources against
   investments in log systems.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Geolocation"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Geolocation</span>

   IP addresses are usually used as inputs to geolocation services.  The
   use of address sharing prevents these systems from resolving the
   location of a host based on IP address alone.  Applications that
   assume such geographic information may not work as intended.  The
   possible solutions listed in [<a href="rfc6967.html" title='"Analysis of Potential Solutions for Revealing a Host Identifier (HOST_ID) in Shared Address Deployments"'>RFC6967</a>] are intended to bridge the
   gap.  However, those solutions can only provide a suboptimal
   substitution to solve the problem of host identification; in
   particular, it may not solve today's problems with source
   identification through translation.  The following lists current
   practices to mitigate the issue.

   o  Operators who adopt NAT64-FE may leverage the application-layer
      proxies, e.g., X-Forwarded-For (XFF) [<a href="rfc7239.html" title='"Forwarded HTTP Extension"'>RFC7239</a>], to convey the IPv6
      source address in HTTP headers.  Those messages would be passed on
      to web servers.  The log parsing tools are required to be able to
      support IPv6 and may lookup RADIUS servers for the target
      subscribers based on IPv6 addresses included in XFF HTTP headers.
      XFF is the de facto standard that has been integrated in most load
      balancers.  Therefore, it may be superior to use in a NAT-FE
      environment.  On the downside, XFF is specific to HTTP.  It




<span class="grey">Chen, et al.                  Informational                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


      restricts usage so that the solution can't be applied to requests
      made over HTTPS.  This makes geolocation problematic for HTTPS-
      based services.

   o  The NAT64-CGN equipment may not implement XFF.  Geolocation based
      on shared IPv4 addresses is rather inaccurate in that case.
      Operators could subdivide the outside IPv4 address pool so an IPv6
      address can be translated depending on the IPv6 subscriber's
      geographical locations.  As a consequence, location information
      can be identified from a certain IPv4 address range.  [<a href="rfc6967.html" title='"Analysis of Potential Solutions for Revealing a Host Identifier (HOST_ID) in Shared Address Deployments"'>RFC6967</a>]
      also enumerates several options to reveal the host identifier.
      Each solution likely has its own specific usage.  For the
      geolocation systems relying on a RADIUS database [<a href="rfc5580.html" title='"Carrying Location Objects in RADIUS and Diameter"'>RFC5580</a>], we
      have investigated delivering NAT64 BIBs and Session Table Entries
      (STEs) to a RADIUS server [<a href="#ref-NAT64-RADIUS">NAT64-RADIUS</a>].  This method could
      provide a geolocation system with an internal IPv6 address to
      identify each user.  It can be paired with [<a href="rfc5580.html" title='"Carrying Location Objects in RADIUS and Diameter"'>RFC5580</a>] to convey the
      original source address through the same message bus.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Quality%20of%20Experience"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Quality of Experience</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Service%20Reachability"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Service Reachability</span>

   NAT64 is providing a translation capability between IPv6 and IPv4 end
   nodes.  In order to provide reachability between two IP address
   families, NAT64-CGN has to implement appropriate application-aware
   functions, i.e., Application Layer Gateways (ALGs), where address
   translation is not sufficient and security mechanisms do not render
   the functions infeasible.  Most NAT64-CGNs mainly provide FTP-ALG
   [<a href="rfc6384.html" title='"An FTP Application Layer Gateway (ALG) for IPv6-to-IPv4 Translation"'>RFC6384</a>].  NAT64-FEs may have functional richness on the load
   balancer; for example, HTTP-ALG, HTTPS-ALG, RTSP-ALG, and SMTP-ALG
   have been supported.  Those application protocols exchange IP address
   and port parameters within a control session, for example, using the
   "Via" field in a HTTP header, "Transport" field in an RTSP SETUP
   message, or "Received:" header in a SMTP message.  ALG functions will
   detect those fields and make IP address translations.  It should be
   noted that ALGs may impact the performance on a NAT64 box to some
   extent.  ISPs as well as content providers might choose to avoid
   situations where the imposition of an ALG might be required.  At the
   same time, it is also important to remind customers and application
   developers that IPv6 end-to-end usage does not require ALG imposition
   and therefore results in a better overall user experience.

   The service reachability is also subject to the IPv6 support in the
   client side.  We tested several kinds of applications as shown in the
   below table to verify the IPv6 support.  The experiences of some
   applications are still aligned with [<a href="rfc6586.html" title='"Experiences from an IPv6-Only Network"'>RFC6586</a>].  For example, we
   tested P2P file sharing and streaming applications including eMule



<span class="grey">Chen, et al.                  Informational                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   v0.50a, Thunder v7.9, and PPS TV v3.2.0.  It has been found there are
   some software issues with the support of IPv6 at this time.  The
   application software would benefit from 464XLAT [<a href="rfc6877.html" title='"464XLAT: Combination of Stateful and Stateless Translation"'>RFC6877</a>] until the
   software adds IPv6 support.  A SIP-based voice call has been tested
   in the LTE mobile environment as specified in [<a href="#ref-IR.92" title='"IMS Profile for Voice and SMS Version 7.0"'>IR.92</a>].  The voice
   call failed due to the lack of NAT64 traversal when an IPv6 SIP user
   agent communicates with an IPv4 SIP user agent.  In order to address
   the failure, Interactive Connectivity Establishment (ICE) as
   described in [<a href="rfc5245.html" title='"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols"'>RFC5245</a>] is recommended to be supported for the SIP
   IPv6 transition.  [<a href="rfc6157.html" title='"IPv6 Transition in the Session Initiation Protocol (SIP)"'>RFC6157</a>] describes both signaling and the media-
   layer process, which should be followed.  In addition, it is worth
   noting that ICE is not only useful for NAT traversal, but also for
   firewall [<a href="rfc6092.html" title='"Recommended Simple Security Capabilities in Customer Premises Equipment (CPE) for Providing Residential IPv6 Internet Service"'>RFC6092</a>] traversal in a native IPv6 deployment.

   Different IPsec modes for VPN services have been tested, including
   IPsec Authentication Header (AH) and IPsec Encapsulating Security
   Payload (ESP).  It has been shown that IPsec AH fails because the
   destination host detects the IP header changes and invalidates the
   packets.  IPsec ESP failed in our testing because the NAT64 does not
   translate IPsec ESP (i.e., protocol 50) packets.  It has been
   suggested that IPsec ESP would succeed if the IPsec client supports
   NAT traversal in the Internet Key Exchange Protocol (IKE) [<a href="rfc3947.html" title='"Negotiation of NAT-Traversal in the IKE"'>RFC3947</a>]
   and uses IPsec ESP over UDP [<a href="rfc3948.html" title='"UDP Encapsulation of IPsec ESP Packets"'>RFC3948</a>].

                    Table 1: The Tested Applications

 +----------------+----------------------------------------------------+
 | Application    |            Results and Issues Found                |
 +----------------+----------------------------------------------------+
 | Web service    | Mostly pass; some failures due to IPv4 literals    |
 +----------------+----------------------------------------------------+
 |Instant Message | Mostly fail; software can't support IPv6           |
 +----------------+----------------------------------------------------+
 |     Games      | Mostly pass for web-based games; mostly fail for   |
 |                | standalone games due to the lack of IPv6 support   |
 |                | in software                                        |
 +----------------+----------------------------------------------------+
 |  SIP VoIP      | Fail, due to the lack of NAT64 traversal           |
 +----------------+----------------------------------------------------+
 |  IPsec VPN     | Fail; the translated IPsec packets are invalidated |
 +----------------+----------------------------------------------------+
 |P2P file sharing| Mostly fail; software can't support IPv6,          |
 |and streaming   | e.g., eMule, Thunder, and PPS TV                   |
 +----------------+----------------------------------------------------+
 |      FTP       | Pass                                               |
 +----------------+----------------------------------------------------+
 |     Email      | Pass                                               |
 +----------------+----------------------------------------------------+



<span class="grey">Chen, et al.                  Informational                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Resource%20Reservation"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Resource Reservation</span>

   Session status normally is managed by a static timer.  For example,
   the value of the "established connection idle-timeout" must not be
   less than 2 hours 4 minutes [<a href="rfc5382.html" title='"NAT Behavioral Requirements for TCP"'>RFC5382</a>] for TCP sessions and 5 minutes
   for UDP sessions [<a href="rfc4787.html" title='"Network Address Translation (NAT) Behavioral Requirements for Unicast UDP"'>RFC4787</a>].  In some cases, NAT resources may be
   significantly consumed by largely inactive users.  The NAT and other
   customers would suffer from service degradation due to port
   consumption by other subscribers using the same NAT64 device.  A
   flexible NAT session control is desirable to resolve these issues.
   The Port Control Protocol (PCP) [<a href="rfc6887.html" title='"Port Control Protocol (PCP)"'>RFC6887</a>] could be a candidate to
   provide such capability.  A NAT64-CGN should integrate with a PCP
   server to allocate available IPv4 address/port resources.  Resources
   could be assigned to PCP clients through PCP MAP/PEER mode.  Doing so
   might improve user experiences, for example, by assigning different
   sizes of port ranges for different subscribers.  Those mechanisms are
   also helpful to minimize terminal battery consumption and reduce the
   number of keep-alive messages sent by mobile terminal devices.

   Subscribers can also benefit from network reliability.  It has been
   discussed that Hot Standby offers a satisfactory experience after
   outage of the primary NAT64 has occurred.  Operators may rightly be
   concerned about the considerable investment required for NAT64
   equipment relative to low ARPU.  For example, transport links may be
   expensive, because the primary NAT64 and the backup are normally
   located at different locations, separated by a relatively large
   distance.  Additional cost would be incurred to ensure the
   connectivity quality.  However, that may be necessary to applications
   that are delay-sensitive and seek session continuity, for example,
   online games and live streaming.  Operators may be able to get added
   value from those services by offering first-class services.  The
   service sessions can be pre-configured on the gateway to Hot Standby
   mode depending on the subscriber's profile.  The rest of the sessions
   can be covered by Cold or Warm Standby.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20MTU%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  MTU Considerations</span>

   IPv6 requires that every link in the Internet have a Maximum
   Transmission Unit (MTU) of 1280 octets or greater [<a href="rfc2460.html" title='"Internet Protocol, Version 6 (IPv6) Specification"'>RFC2460</a>].
   However, if NAT64 translation is deployed, some IPv4 MTU constrained
   link will be used in a communication path and the originating IPv6
   nodes may therefore receive an ICMP Packet Too Big (PTB) message,
   reporting a Next-Hop MTU less than 1280 bytes.  The result would be
   that IPv6 allows packets to contain a fragmentation header, without
   the packet being fragmented into multiple pieces.  A NAT64 would
   receive IPv6 packets with a fragmentation header in which the "M"
   flag is set to 0 and the "Fragment Offset" is set to 0.  Those
   packets likely impact other fragments already queued with the same



<span class="grey">Chen, et al.                  Informational                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   set of {IPv6 Source Address, IPv6 Destination Address, Fragment
   Identification}.  If the NAT64 box is compliant with [<a href="rfc5722.html" title='"Handling of Overlapping IPv6 Fragments"'>RFC5722</a>], there
   is a risk that all the fragments will have to be dropped.

   [<a id="ref-RFC6946" name="ref-RFC6946">RFC6946</a>] discusses how this situation could be exploited by an
   attacker to perform fragmentation-based attacks and also proposes
   improved handling of such packets.  It requires enhancements on NAT64
   gateway implementations to isolate the processing of packets.  NAT64
   devices should follow the recommendations and take steps to prevent
   the risks of fragmentation.

   Another approach that potentially avoids this issue is to configure
   the IPv4 MTU to more than 1260 bytes.  This would prevent getting a
   PTB message for an MTU smaller than 1280 bytes.  Such an operational
   consideration is hard to universally apply to the legacy "IPv4
   Internet" that is bridged by NAT64-CGNs.  However, it's a feasible
   approach in NAT64-FE cases, since an IPv4 network NAT64-FE is rather
   well-organized and operated by an IDC operator or content provider.
   Therefore, the MTU of an IPv4 network in NAT64-FE case is strongly
   recommended to be set to more than 1260 bytes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20ULA%20Usages"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  ULA Usages</span>

   Unique Local Addresses (ULAs) are defined in [<a href="rfc4193.html" title='"Unique Local IPv6 Unicast Addresses"'>RFC4193</a>] to be
   renumbered within a network site for local communications.  Operators
   may use ULAs as NAT64 prefixes to provide site-local IPv6
   connectivity.  Those ULA prefixes are stripped when the packets go to
   the IPv4 Internet; therefore, ULAs are only valid in the IPv6 site.
   The use of ULAs could help in identifying the translation traffic.
   [<a href="#ref-ULA-USAGE">ULA-USAGE</a>] provides further guidance on using ULAs.

   We configure ULAs as NAT64 prefixes on a NAT64-CGN.  If a host is
   assigned with only an IPv6 address and connected to a NAT64-CGN, when
   it connects to an IPv4 service, it would receive a AAAA record
   generated by the DNS64 with the ULA prefix.  A Global Unicast Address
   (GUA) will be selected as the source address to the ULA destination
   address.  When the host has both IPv4 and IPv6 addresses, it would
   initiate both A and AAAA record lookup, then both the original A
   record and DNS64-generated AAAA record would be received.  A host
   that is compliant with [<a href="rfc6724.html" title='"Default Address Selection for Internet Protocol Version 6 (IPv6)"'>RFC6724</a>] will never prefer a ULA over an IPv4
   address.  An IPv4 path will always be selected.  It may be
   undesirable because the NAT64-CGN will never be used.  Operators may
   consider adding additional site-specific rows into the default policy
   table for host address selection in order to steer traffic flows
   through the NAT64-CGN.  However, it involves significant costs to
   change a terminal's behavior.  Therefore, it is not suggested that
   operators configure ULAs on a NAT64-CGN.




<span class="grey">Chen, et al.                  Informational                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   ULAs can't work when hosts transit the Internet to connect with
   NAT64.  Therefore, ULAs are not applicable to the case of NAT64-FE.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   This document presents the deployment experiences of NAT64 in CGN and
   FE scenarios.  In general, <a href="rfc6146.html">RFC 6146</a> [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>] provides TCP-tracking,
   address-dependent filtering mechanisms to protect NAT64 from
   Distributed Denial of Service (DDoS).  In NAT64-CGN cases, operators
   could also adopt unicast Reverse Path Forwarding (uRPF) [<a href="rfc3704.html" title='"Ingress Filtering for Multihomed Networks"'>RFC3704</a>] and
   blacklisting and whitelisting to enhance security by specifying
   access policies.  For example, NAT64-CGN should forbid establishing
   NAT64 BIB for incoming IPv6 packets if they do not pass the uRPF
   check in Strict or Loose mode or if their source IPv6 address is
   blacklisted.

   Stateful NAT64-FE creates state and maps that connection to an
   internally facing IPv4 address and port.  An attacker can consume the
   resources of the NAT64-FE device by sending an excessive number of
   connection attempts.  Without a DDoS limitation mechanism, the
   NAT64-FE is exposed to attacks.  The load balancer is recommended to
   enable the capabilities for line-rate DDOS defense, such as the
   employment of SYN proxy/cookie.  In this case, division of the
   security domain is necessary as well.  Therefore, load balancers
   could not only optimize the traffic distribution but also prevent
   service from quality deterioration due to security attacks.

   The DNS64 process will potentially interfere with the DNSSEC
   functions [<a href="rfc4035.html" title='"Protocol Modifications for the DNS Security Extensions"'>RFC4035</a>], since the DNS response is modified and DNSSEC
   intends to prevent such changes.  More detailed discussions can be
   found in [<a href="rfc6147.html" title='"DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Acknowledgements"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Acknowledgements</span>

   The authors would like to thank Jari Arkko, Dan Wing, Remi Despres,
   Fred Baker, Hui Deng, Iljitsch van Beijnum, Philip Matthews, Randy
   Bush, Mikael Abrahamsson, Lorenzo Colitti, Sheng Jiang, Nick Heatley,
   Tim Chown, Gert Doering, and Simon Perreault for their helpful
   comments.

   Many thanks to Wesley George, Lee Howard, and Satoru Matsushima for
   their detailed reviews.

   The authors especially thank Joel Jaeggli and Ray Hunter for their
   efforts and contributions on editing, which substantially improved
   the readability of the document.





<span class="grey">Chen, et al.                  Informational                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   Thanks to Cameron Byrne who was an active coauthor of some earlier
   draft versions of this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Contributors"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Contributors</span>

   The following individuals contributed extensively to the effort:

     Qiong Sun
     China Telecom
     Room 708, No. 118, Xizhimennei Street
     Beijing 100035
     P.R. China
     Phone: +86-10-58552936
     EMail: sunqiong@ctbri.com.cn

     QiBo Niu
     ZTE
     50 RuanJian Road
     YuHua District,
     Nan Jing  210012
     P.R. China
     EMail: niu.qibo@zte.com.cn

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20References"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.1.%20%20Normative%20References"></a><a class="selflink" href="#section-12.1" name="section-12.1">12.1</a>.  Normative References</span>

   [<a id="ref-RFC2460" name="ref-RFC2460">RFC2460</a>]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", <a href="rfc2460.html">RFC 2460</a>, December 1998.

   [<a id="ref-RFC3704" name="ref-RFC3704">RFC3704</a>]  Baker, F. and P. Savola, "Ingress Filtering for Multihomed
              Networks", <a href="https://tools.ietf.org/html/bcp84">BCP 84</a>, <a href="rfc3704.html">RFC 3704</a>, March 2004.

   [<a id="ref-RFC3947" name="ref-RFC3947">RFC3947</a>]  Kivinen, T., Swander, B., Huttunen, A., and V. Volpe,
              "Negotiation of NAT-Traversal in the IKE", <a href="rfc3947.html">RFC 3947</a>,
              January 2005.

   [<a id="ref-RFC3948" name="ref-RFC3948">RFC3948</a>]  Huttunen, A., Swander, B., Volpe, V., DiBurro, L., and M.
              Stenberg, "UDP Encapsulation of IPsec ESP Packets", <a href="rfc3948.html">RFC</a>
              <a href="rfc3948.html">3948</a>, January 2005.

   [<a id="ref-RFC4035" name="ref-RFC4035">RFC4035</a>]  Arends, R., Austein, R., Larson, M., Massey, D., and S.
              Rose, "Protocol Modifications for the DNS Security
              Extensions", <a href="rfc4035.html">RFC 4035</a>, March 2005.

   [<a id="ref-RFC4193" name="ref-RFC4193">RFC4193</a>]  Hinden, R. and B. Haberman, "Unique Local IPv6 Unicast
              Addresses", <a href="rfc4193.html">RFC 4193</a>, October 2005.




<span class="grey">Chen, et al.                  Informational                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   [<a id="ref-RFC4787" name="ref-RFC4787">RFC4787</a>]  Audet, F. and C. Jennings, "Network Address Translation
              (NAT) Behavioral Requirements for Unicast UDP", <a href="https://tools.ietf.org/html/bcp127">BCP 127</a>,
              <a href="rfc4787.html">RFC 4787</a>, January 2007.

   [<a id="ref-RFC5245" name="ref-RFC5245">RFC5245</a>]  Rosenberg, J., "Interactive Connectivity Establishment
              (ICE): A Protocol for Network Address Translator (NAT)
              Traversal for Offer/Answer Protocols", <a href="rfc5245.html">RFC 5245</a>, April
              2010.

   [<a id="ref-RFC5382" name="ref-RFC5382">RFC5382</a>]  Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P.
              Srisuresh, "NAT Behavioral Requirements for TCP", <a href="https://tools.ietf.org/html/bcp142">BCP 142</a>,
              <a href="rfc5382.html">RFC 5382</a>, October 2008.

   [<a id="ref-RFC5424" name="ref-RFC5424">RFC5424</a>]  Gerhards, R., "The Syslog Protocol", <a href="rfc5424.html">RFC 5424</a>, March 2009.

   [<a id="ref-RFC5580" name="ref-RFC5580">RFC5580</a>]  Tschofenig, H., Adrangi, F., Jones, M., Lior, A., and B.
              Aboba, "Carrying Location Objects in RADIUS and Diameter",
              <a href="rfc5580.html">RFC 5580</a>, August 2009.

   [<a id="ref-RFC5722" name="ref-RFC5722">RFC5722</a>]  Krishnan, S., "Handling of Overlapping IPv6 Fragments",
              <a href="rfc5722.html">RFC 5722</a>, December 2009.

   [<a id="ref-RFC5798" name="ref-RFC5798">RFC5798</a>]  Nadas, S., "Virtual Router Redundancy Protocol (VRRP)
              Version 3 for IPv4 and IPv6", <a href="rfc5798.html">RFC 5798</a>, March 2010.

   [<a id="ref-RFC5880" name="ref-RFC5880">RFC5880</a>]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD)", <a href="rfc5880.html">RFC 5880</a>, June 2010.

   [<a id="ref-RFC6052" name="ref-RFC6052">RFC6052</a>]  Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and X.
              Li, "IPv6 Addressing of IPv4/IPv6 Translators", <a href="rfc6052.html">RFC 6052</a>,
              October 2010.

   [<a id="ref-RFC6145" name="ref-RFC6145">RFC6145</a>]  Li, X., Bao, C., and F. Baker, "IP/ICMP Translation
              Algorithm", <a href="rfc6145.html">RFC 6145</a>, April 2011.

   [<a id="ref-RFC6146" name="ref-RFC6146">RFC6146</a>]  Bagnulo, M., Matthews, P., and I. van Beijnum, "Stateful
              NAT64: Network Address and Protocol Translation from IPv6
              Clients to IPv4 Servers", <a href="rfc6146.html">RFC 6146</a>, April 2011.

   [<a id="ref-RFC6147" name="ref-RFC6147">RFC6147</a>]  Bagnulo, M., Sullivan, A., Matthews, P., and I. van
              Beijnum, "DNS64: DNS Extensions for Network Address
              Translation from IPv6 Clients to IPv4 Servers", <a href="rfc6147.html">RFC 6147</a>,
              April 2011.

   [<a id="ref-RFC6157" name="ref-RFC6157">RFC6157</a>]  Camarillo, G., El Malki, K., and V. Gurbani, "IPv6
              Transition in the Session Initiation Protocol (SIP)", <a href="rfc6157.html">RFC</a>
              <a href="rfc6157.html">6157</a>, April 2011.




<span class="grey">Chen, et al.                  Informational                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   [<a id="ref-RFC6384" name="ref-RFC6384">RFC6384</a>]  van Beijnum, I., "An FTP Application Layer Gateway (ALG)
              for IPv6-to-IPv4 Translation", <a href="rfc6384.html">RFC 6384</a>, October 2011.

   [<a id="ref-RFC6555" name="ref-RFC6555">RFC6555</a>]  Wing, D. and A. Yourtchenko, "Happy Eyeballs: Success with
              Dual-Stack Hosts", <a href="rfc6555.html">RFC 6555</a>, April 2012.

   [<a id="ref-RFC6724" name="ref-RFC6724">RFC6724</a>]  Thaler, D., Draves, R., Matsumoto, A., and T. Chown,
              "Default Address Selection for Internet Protocol Version 6
              (IPv6)", <a href="rfc6724.html">RFC 6724</a>, September 2012.

   [<a id="ref-RFC6887" name="ref-RFC6887">RFC6887</a>]  Wing, D., Cheshire, S., Boucadair, M., Penno, R., and P.
              Selkirk, "Port Control Protocol (PCP)", <a href="rfc6887.html">RFC 6887</a>, April
              2013.

   [<a id="ref-RFC6946" name="ref-RFC6946">RFC6946</a>]  Gont, F., "Processing of IPv6 "Atomic" Fragments", <a href="rfc6946.html">RFC</a>
              <a href="rfc6946.html">6946</a>, May 2013.

   [<a id="ref-RFC7050" name="ref-RFC7050">RFC7050</a>]  Savolainen, T., Korhonen, J., and D. Wing, "Discovery of
              the IPv6 Prefix Used for IPv6 Address Synthesis", <a href="rfc7050.html">RFC</a>
              <a href="rfc7050.html">7050</a>, November 2013.

   [<a id="ref-RFC7239" name="ref-RFC7239">RFC7239</a>]  Petersson, A. and M. Nilsson, "Forwarded HTTP Extension",
              <a href="rfc7239.html">RFC 7239</a>, June 2014.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.2.%20%20Informative%20References"></a><a class="selflink" href="#section-12.2" name="section-12.2">12.2</a>.  Informative References</span>

   [<a id="ref-Alexa" name="ref-Alexa">Alexa</a>]    Alexa, "Top 500 Global Sites", April 2013,
              &lt;<a href="http://www.alexa.com/topsites">http://www.alexa.com/topsites</a>&gt;.

   [<a id="ref-COEXIST" name="ref-COEXIST">COEXIST</a>]  Kaliwoda, A. and D. Binet, "Co-existence of both dual-
              stack and IPv6-only hosts", Work in Progress, October
              2012.

   [<a id="ref-CONN-STATUS" name="ref-CONN-STATUS">CONN-STATUS</a>]
              Patil, P., Boucadair, M., Wing, D., and T. Reddy, "IP
              Connectivity Status Notifications for DHCPv6", Work in
              Progress, February 2014.

   [<a id="ref-Cisco-VNI" name="ref-Cisco-VNI">Cisco-VNI</a>]
              Cisco, "Cisco VNI Global Mobile Data Traffic Forecast,
              2012-2018", February 2014,
              &lt;<a href="http://ciscovni.com/forecast-widget/index.html">http://ciscovni.com/forecast-widget/index.html</a>&gt;.

   [<a id="ref-DET-CGN" name="ref-DET-CGN">DET-CGN</a>]  Donley, C., Grundemann, C., Sarawat, V., Sundaresan, K.,
              and O. Vautrin, "Deterministic Address Mapping to Reduce
              Logging in Carrier Grade NAT Deployments", Work in
              Progress, January 2014.




<span class="grey">Chen, et al.                  Informational                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   [<a id="ref-IR.92" name="ref-IR.92">IR.92</a>]    Global System for Mobile Communications Association
              (GSMA), "IMS Profile for Voice and SMS Version 7.0", March
              2013.

   [<a id="ref-MAP-DEPLOY" name="ref-MAP-DEPLOY">MAP-DEPLOY</a>]
              Qiong, Q., Chen, M., Chen, G., Tsou, T., and S. Perreault,
              "Mapping of Address and Port (MAP) - Deployment
              Considerations", Work in Progress, April 2014.

   [<a id="ref-MAP-T" name="ref-MAP-T">MAP-T</a>]    Li, X., Bao, C., Dec, W., Troan, O., Matsushima, S., and
              T. Murakami, "Mapping of Address and Port using
              Translation (MAP-T)", Work in Progress, February 2014.

   [<a id="ref-MOTIVATION" name="ref-MOTIVATION">MOTIVATION</a>]
              Boucadair, M., Matsushima, S., Lee, Y., Bonness, O.,
              Borges, I., and G. Chen, "Motivations for Carrier-side
              Stateless IPv4 over IPv6 Migration Solutions", Work in
              Progress, November 2012.

   [<a id="ref-NAT64-RADIUS" name="ref-NAT64-RADIUS">NAT64-RADIUS</a>]
              Chen, G. and D. Binet, "Radius Attributes for Stateful
              NAT64", Work in Progress, July 2013.

   [<a id="ref-PORT-ALLOC" name="ref-PORT-ALLOC">PORT-ALLOC</a>]
              Chen, G., Tsou, T., Donley, C., and T. Taylor, "Analysis
              of NAT64 Port Allocation Methods for Shared IPv4
              Addresses", Work in Progress, April 2014.

   [<a id="ref-RFC6036" name="ref-RFC6036">RFC6036</a>]  Carpenter, B. and S. Jiang, "Emerging Service Provider
              Scenarios for IPv6 Deployment", <a href="rfc6036.html">RFC 6036</a>, October 2010.

   [<a id="ref-RFC6056" name="ref-RFC6056">RFC6056</a>]  Larsen, M. and F. Gont, "Recommendations for Transport-
              Protocol Port Randomization", <a href="https://tools.ietf.org/html/bcp156">BCP 156</a>, <a href="rfc6056.html">RFC 6056</a>, January
              2011.

   [<a id="ref-RFC6092" name="ref-RFC6092">RFC6092</a>]  Woodyatt, J., "Recommended Simple Security Capabilities in
              Customer Premises Equipment (CPE) for Providing
              Residential IPv6 Internet Service", <a href="rfc6092.html">RFC 6092</a>, January
              2011.

   [<a id="ref-RFC6144" name="ref-RFC6144">RFC6144</a>]  Baker, F., Li, X., Bao, C., and K. Yin, "Framework for
              IPv4/IPv6 Translation", <a href="rfc6144.html">RFC 6144</a>, April 2011.

   [<a id="ref-RFC6346" name="ref-RFC6346">RFC6346</a>]  Bush, R., "The Address plus Port (A+P) Approach to the
              IPv4 Address Shortage", <a href="rfc6346.html">RFC 6346</a>, August 2011.






<span class="grey">Chen, et al.                  Informational                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


   [<a id="ref-RFC6459" name="ref-RFC6459">RFC6459</a>]  Korhonen, J., Soininen, J., Patil, B., Savolainen, T.,
              Bajko, G., and K. Iisakkila, "IPv6 in 3rd Generation
              Partnership Project (3GPP) Evolved Packet System (EPS)",
              <a href="rfc6459.html">RFC 6459</a>, January 2012.

   [<a id="ref-RFC6586" name="ref-RFC6586">RFC6586</a>]  Arkko, J. and A. Keranen, "Experiences from an IPv6-Only
              Network", <a href="rfc6586.html">RFC 6586</a>, April 2012.

   [<a id="ref-RFC6877" name="ref-RFC6877">RFC6877</a>]  Mawatari, M., Kawashima, M., and C. Byrne, "464XLAT:
              Combination of Stateful and Stateless Translation", <a href="rfc6877.html">RFC</a>
              <a href="rfc6877.html">6877</a>, April 2013.

   [<a id="ref-RFC6883" name="ref-RFC6883">RFC6883</a>]  Carpenter, B. and S. Jiang, "IPv6 Guidance for Internet
              Content Providers and Application Service Providers", <a href="rfc6883.html">RFC</a>
              <a href="rfc6883.html">6883</a>, March 2013.

   [<a id="ref-RFC6967" name="ref-RFC6967">RFC6967</a>]  Boucadair, M., Touch, J., Levis, P., and R. Penno,
              "Analysis of Potential Solutions for Revealing a Host
              Identifier (HOST_ID) in Shared Address Deployments", <a href="rfc6967.html">RFC</a>
              <a href="rfc6967.html">6967</a>, June 2013.

   [<a id="ref-SIIT" name="ref-SIIT">SIIT</a>]     Anderson, T., "Stateless IP/ICMP Translation in IPv6 Data
              Centre Environments", Work in Progress, November 2012.

   [<a id="ref-ULA-USAGE" name="ref-ULA-USAGE">ULA-USAGE</a>]
              Liu, B. and S. Jiang, "Recommendations of Using Unique
              Local Addresses", Work in Progress, February 2014.
























<span class="grey">Chen, et al.                  Informational                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Test%20Results%20for%20Application%20Behavior"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Test Results for Application Behavior</span>

   We tested several application behaviors in a lab environment to
   evaluate the impact when a primary NAT64 is out of service.  In this
   testing, participants were asked to connect an IPv6-only WiFi network
   using laptops, tablets, or mobile phones.  NAT64 was deployed as the
   gateway to provide Internet service.  The tested applications are
   shown in the table below.  Cold Standby, Warm Standby, and Hot
   Standby were each tested.  The participants may have experienced
   service interruption due to the NAT64 handover.  Different
   interruption intervals were tested to gauge application behaviors.
   The results are shown below.

                  Table 2: The Acceptable Delay of Applications

   +----------------+------------------------+-------------------------+
   | Application    | Acceptable Interrupt   |   Session Continuity    |
   |                |        Recovery        |                         |
   +----------------+------------------------+-------------------------+
   | Web browsing   | Maximum of 6 s         |  No                     |
   +----------------+------------------------+-------------------------+
   | HTTP streaming | Maximum of 10 s (cache)|  Yes                    |
   +----------------+------------------------+-------------------------+
   | Games          | 200-400 ms             |  Yes                    |
   +----------------+------------------------+-------------------------+
   |P2P file sharing| 10-16 s                |  Yes                    |
   |and streaming   |                        |                         |
   +----------------+------------------------+-------------------------+
   | Instant Message| 1 minute               |  Yes                    |
   +----------------+------------------------+-------------------------+
   | Email          | 30 s                   |  No                     |
   +----------------+------------------------+-------------------------+
   | Downloading    | 1 minute               |  No                     |
   +----------------+------------------------+-------------------------+

















<span class="grey">Chen, et al.                  Informational                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc7269.html">RFC 7269</a>                    NAT64 Experience                   June 2014</span>


Authors' Addresses

   Gang Chen
   China Mobile
   Xuanwumenxi Ave. No. 32
   Xuanwu District
   Beijing  100053
   P.R. China

   EMail: chengang@chinamobile.com, phdgang@gmail.com

   Zhen Cao
   China Mobile
   Xuanwumenxi Ave. No. 32
   Xuanwu District
   Beijing  100053
   P.R. China

   EMail: caozhen@chinamobile.com, zehn.cao@gmail.com


   Chongfeng Xie
   China Telecom
   Room 708, No. 118, Xizhimennei Street
   Beijing  100035
   P.R. China

   EMail: xiechf@ctbri.com.cn


   David Binet
   France Telecom-Orange
   Rennes
   35000
   France

   EMail: david.binet@orange.com














Chen, et al.                  Informational                    [Page 22]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc7269 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:23 GMT --></html>