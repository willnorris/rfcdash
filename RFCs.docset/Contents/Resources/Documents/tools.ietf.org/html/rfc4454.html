<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4454 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:41 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4454" name="DC.Identifier"/>
<meta content="The Layer 2 Tunneling Protocol, Version 3 (L2TPv3) defines an
extensible tunneling protocol to transport layer 2 services over IP
networks. This document describes the specifics of how to use the L2TP
control plane for Asynchronous Transfer Mode (ATM) Pseudowires and
provides guidelines for transporting various ATM services over an IP
network. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Townsley, W. Mark" name="DC.Creator"/>
<meta content="Singh, Sanjeev" name="DC.Creator"/>
<meta content="Pignataro, Carlos" name="DC.Creator"/>
<meta content="May, 2006" name="DC.Date.Issued"/>
<meta content="Asynchronous Transfer Mode (ATM) over Layer 2 Tunneling Protocol Version 3 (L2TPv3)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4454 - Asynchronous Transfer Mode (ATM) over Layer 2 Tunneling Protocol Version 3 (L2TPv3)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4454.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4454" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-l2tpext-pwe3-atm" title="draft-ietf-l2tpext-pwe3-atm">draft-ietf-l2tp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4454" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4454" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4454" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Updated by: <a href="rfc5641.html">5641</a>                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                           S. Singh
Request for Comments: 4454                                   M. Townsley
Category: Standards Track                                   C. Pignataro
                                                           Cisco Systems
                                                                May 2006


                 <span class="h1">Asynchronous Transfer Mode (ATM) over</span>
             <span class="h1">Layer 2 Tunneling Protocol Version 3 (L2TPv3)</span>


Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   The Layer 2 Tunneling Protocol, Version 3 (L2TPv3) defines an
   extensible tunneling protocol to transport layer 2 services over IP
   networks.  This document describes the specifics of how to use the
   L2TP control plane for Asynchronous Transfer Mode (ATM) Pseudowires
   and provides guidelines for transporting various ATM services over an
   IP network.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
      <a href="#section-1.1">1.1</a>. Abbreviations ..............................................<a href="#page-3">3</a>
      <a href="#section-1.2">1.2</a>. Specification of Requirements ..............................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Control Connection Establishment ................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Session Establishment and ATM Circuit Status Notification .......<a href="#page-4">4</a>
      <a href="#section-3.1">3.1</a>. L2TPv3 Session Establishment ...............................<a href="#page-4">4</a>
      <a href="#section-3.2">3.2</a>. L2TPv3 Session Teardown ....................................<a href="#page-6">6</a>
      <a href="#section-3.3">3.3</a>. L2TPv3 Session Maintenance .................................<a href="#page-6">6</a>
   <a href="#section-4">4</a>. Encapsulation ...................................................<a href="#page-6">6</a>
      <a href="#section-4.1">4.1</a>. ATM-Specific Sublayer ......................................<a href="#page-7">7</a>
      <a href="#section-4.2">4.2</a>. Sequencing .................................................<a href="#page-9">9</a>
   <a href="#section-5">5</a>. ATM Transport ...................................................<a href="#page-9">9</a>
      <a href="#section-5.1">5.1</a>. ATM AAL5-SDU Mode .........................................<a href="#page-10">10</a>
      <a href="#section-5.2">5.2</a>. ATM Cell Mode .............................................<a href="#page-10">10</a>



<span class="grey">Singh, et al.               Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


           <a href="#section-5.2.1">5.2.1</a>. ATM VCC Cell Relay Service .........................<a href="#page-11">11</a>
           <a href="#section-5.2.2">5.2.2</a>. ATM VPC Cell Relay Service .........................<a href="#page-12">12</a>
           <a href="#section-5.2.3">5.2.3</a>. ATM Port Cell Relay Service ........................<a href="#page-12">12</a>
      <a href="#section-5.3">5.3</a>. OAM Cell Support ..........................................<a href="#page-12">12</a>
           <a href="#section-5.3.1">5.3.1</a>. VCC Switching ......................................<a href="#page-12">12</a>
           <a href="#section-5.3.2">5.3.2</a>. VPC Switching ......................................<a href="#page-13">13</a>
   <a href="#section-6">6</a>. ATM Maximum Concatenated Cells AVP .............................<a href="#page-13">13</a>
   <a href="#section-7">7</a>. OAM Emulation Required AVP .....................................<a href="#page-14">14</a>
   <a href="#section-8">8</a>. ATM Defects Mapping and Status Notification ....................<a href="#page-14">14</a>
      <a href="#section-8.1">8.1</a>. ATM Alarm Status AVP ......................................<a href="#page-14">14</a>
   <a href="#section-9">9</a>. Applicability Statement ........................................<a href="#page-15">15</a>
      <a href="#section-9.1">9.1</a>. ATM AAL5-SDU Mode .........................................<a href="#page-16">16</a>
      <a href="#section-9.2">9.2</a>. ATM Cell Relay Mode .......................................<a href="#page-18">18</a>
   <a href="#section-10">10</a>. Congestion Control ............................................<a href="#page-20">20</a>
   <a href="#section-11">11</a>. Security Considerations .......................................<a href="#page-21">21</a>
   <a href="#section-12">12</a>. IANA Considerations ...........................................<a href="#page-21">21</a>
      <a href="#section-12.1">12.1</a>. L2-Specific Sublayer Type ................................<a href="#page-21">21</a>
      <a href="#section-12.2">12.2</a>. Control Message Attribute Value Pairs (AVPs) .............<a href="#page-21">21</a>
      <a href="#section-12.3">12.3</a>. Result Code AVP Values ...................................<a href="#page-22">22</a>
      <a href="#section-12.4">12.4</a>. ATM Alarm Status AVP Values ..............................<a href="#page-22">22</a>
      <a href="#section-12.5">12.5</a>. ATM-Specific Sublayer Bits ...............................<a href="#page-23">23</a>
   <a href="#section-13">13</a>. Acknowledgements ..............................................<a href="#page-23">23</a>
   <a href="#section-14">14</a>. References ....................................................<a href="#page-23">23</a>
      <a href="#section-14.1">14.1</a>. Normative References .....................................<a href="#page-23">23</a>
      <a href="#section-14.2">14.2</a>. Informative References ...................................<a href="#page-24">24</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document describes the specifics of how to use the Layer 2
   Tunneling Protocol (L2TP) for Asynchronous Transfer Mode (ATM)
   Pseudowires, including encapsulation, carrying various ATM services,
   such as AAL5 SDU, ATM VCC/VPC/Port cell relay over L2TP, and mapping
   ATM defects to L2TP Set-Link-Info (SLI) messages to notify the peer
   L2TP Control Connection Endpoint (LCCE).

   Any ATM-specific AVPs or other L2TP constructs for ATM Pseudowire
   (ATMPW) support are defined here as well.  Support for ATM Switched
   Virtual Path/Connection (SVP/SVC) and Soft Permanent Virtual
   Path/Connection (SPVP/SPVC) are outside the scope of this document.

   The reader is expected to be very familiar with the terminology and
   protocol constructs defined in [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>].









<span class="grey">Singh, et al.               Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Abbreviations"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Abbreviations</span>

   AIS     Alarm Indication Signal
   ATMPW   ATM Pseudowire
   AVP     Attribute Value Pair
   CC      Continuity Check OAM Cell
   CE      Customer Edge
   HEC     Header Error Checksum
   LAC     L2TP Access Concentrator (see [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>])
   LCCE    L2TP Control Connection Endpoint (see [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>])
   MSB     Most Significant Byte
   OAM     Operation, Administration, and Maintenance
   PE      Provider Edge
   PSN     Packet Switched Network
   PWE3    Pseudowire Emulation Edge to Edge
   RDI     Remote Defect Indicator
   SAR     Segmentation and Reassembly
   SDU     Service Data Unit
   SLI     Set-Link-Info, an L2TP control message
   SVC     Switched Virtual Connection
   SVP     Switched Virtual Path
   SPVC    Soft Permanent Virtual Connection
   SPVP    Soft Permanent Virtual Path
   VC      Virtual Circuit
   VCC     Virtual Channel Connection
   VCI     Virtual Channel Identifier
   VPC     Virtual Path Connection
   VPI     Virtual Path Identifier

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Specification%20of%20Requirements"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Specification of Requirements</span>

   In this document, several words are used to signify the requirements
   of the specification.  These words are often capitalized.  The key
   words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
   "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document
   are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Control%20Connection%20Establishment"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Control Connection Establishment</span>

   To emulate ATM Pseudowires using L2TP, an L2TP Control Connection as
   described in <a href="rfc3931.html#section-3.3">Section 3.3 of [RFC3931]</a> MUST be established.

   The Start-Control-Connection-Request (SCCRQ) and corresponding
   Start-Control-Connection-Reply (SCCRP) MUST include the supported ATM
   Pseudowire types (see <a href="#section-3.1">Section 3.1</a>), in the Pseudowire Capabilities
   List as defined in <a href="rfc3931.html#section-5.4.3">Section 5.4.3 of [RFC3931]</a>.  This identifies the
   Control Connection as able to establish L2TP sessions in support of
   the ATM Pseudowires.



<span class="grey">Singh, et al.               Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   An LCCE MUST be able to uniquely identify itself in the SCCRQ and
   SCCRP messages via a globally unique value.  By default, this is
   advertised via the structured Router ID AVP [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>], though the
   unstructured Hostname AVP [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>] MAY be used to identify LCCEs as
   well.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Session%20Establishment%20and%20ATM%20Circuit%20Status%20Notification"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Session Establishment and ATM Circuit Status Notification</span>

   This section describes how L2TP ATMPWs or sessions are established
   between two LCCEs.  This includes what will happen when an ATM
   circuit (e.g., AAL5 PVC) is created, deleted, or changes state when
   circuit state is in alarm.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20L2TPv3%20Session%20Establishment"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  L2TPv3 Session Establishment</span>

   ATM circuit (e.g., an AAL5 PVC) creation triggers establishment of an
   L2TP session using three-way handshake described in <a href="rfc3931.html#section-3.4.1">Section 3.4.1 of
   [RFC3931]</a>.  An LCCE MAY initiate the session immediately upon ATM
   circuit creation, or wait until the circuit state transitions to
   ACTIVE before attempting to establish a session for the ATM circuit.
   It MAY be preferred to wait until circuit status transitions to
   ACTIVE in order to delay the allocation of resources until absolutely
   necessary.

   The Circuit Status AVP (see <a href="#section-8">Section 8</a>) MUST be present in the
   Incoming-Call-Request (ICRQ) and Incoming-Call-Reply (ICRP) messages,
   and MAY be present in the SLI message for ATMPWs.

   The following figure shows how L2TP messages are exchanged to set up
   an ATMPW after the ATM circuit (e.g., an AAL5 PVC) becomes ACTIVE.

          LCCE (LAC) A                                  LCCE (LAC) B
      ------------------                            --------------------

       ATM Ckt Provisioned
                                                    ATM Ckt Provisioned
       ATM Ckt ACTIVE
                       ICRQ (status = 0x03) ----&gt;
                                                    ATM Ckt ACTIVE
                       &lt;----- ICRP (status = 0x03)
       L2TP session established
       OK to send data into PW

                       ICCN -----&gt;
                                               L2TP session established
                                               OK to send data into PW





<span class="grey">Singh, et al.               Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   The following signaling elements are required for the ATMPW
   establishment.

   a. Pseudowire Type: One of the supported ATM-related PW types should
      be present in the Pseudowire Type AVP of [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>].

      0x0002  ATM AAL5 SDU VCC transport
      0x0003  ATM Cell transport Port Mode
      0x0009  ATM Cell transport VCC Mode
      0x000A  ATM Cell transport VPC Mode

   The above cell relay modes can also signal the ATM Maximum
   Concatenated Cells AVP as described in <a href="#section-6">Section 6</a>.

   b. Remote End ID: Each PW is associated with a Remote End ID akin to
      the VC-ID in [<a href="#ref-PWE3ATM" title='"Encapsulation Methods for Transport of ATM Over MPLS Networks"'>PWE3ATM</a>].  Two LCCEs of a PW would have the same
      Remote End ID, and its format is described in <a href="rfc3931.html#section-5.4.4">Section 5.4.4 of
      [RFC3931]</a>.

      This Remote End ID AVP MUST be present in the ICRQ in order for
      the remote LCCE to associate the session to the ATM circuit.  The
      Remote End Identifier AVP defined in [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>] is of opaque form,
      though ATMPW implementations MAY simply use a 4-octet value
      that is known to both LCCEs (either by direct configuration or
      some other means).  The exact method of how this value is
      configured, retrieved, discovered, or otherwise determined at
      each LCCE is outside the scope of this document.

   As with the ICRQ, the ICRP is sent only after the ATM circuit
   transitions to ACTIVE.  If LCCE B had not been provisioned yet for
   the ATM circuit identified in the ICRQ, a Call-Disconnect-Notify
   (CDN) would have been immediately returned indicating that the
   circuit either was not provisioned or was not available at this LCCE.
   LCCE A SHOULD then exhibit a periodic retry mechanism.  If so, the
   period and maximum number of retries MUST be configurable.

   An implementation MAY send an ICRQ or ICRP before a PVC is ACTIVE, as
   long as the Circuit Status AVP reflects that the ATM circuit is
   INACTIVE and an SLI is sent when the ATM circuit becomes ACTIVE (see
   <a href="#section-8">Section 8</a>).

   The ICCN is the final stage in the session establishment.  It
   confirms the receipt of the ICRP with acceptable parameters to allow
   bidirectional traffic.







<span class="grey">Singh, et al.               Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20L2TPv3%20Session%20Teardown"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  L2TPv3 Session Teardown</span>

   When an ATM circuit is unprovisioned (deleted) at either LCCE, the
   associated L2TP session MUST be torn down via the CDN message defined
   in <a href="rfc3931.html#section-3.4.3">Section 3.4.3 of [RFC3931]</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20L2TPv3%20Session%20Maintenance"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  L2TPv3 Session Maintenance</span>

   All sessions established by a given Control Connection utilize the
   L2TP Hello facility defined in <a href="rfc3931.html#section-4.4">Section 4.4 of [RFC3931]</a> for session
   keepalive.  This gives all sessions basic dead peer and path
   detection between LCCEs.

   If the control channel utilizing the Hello message is not in-band
   with data traffic over the PSN, then other method MAY be used to
   detect the session failure, and it is left for further study.

   ATMPWs over L2TP use the Set-Link-Info (SLI) control message as
   defined in [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>] to signal ATM circuit status between LCCEs after
   initial session establishment.  This includes ACTIVE or INACTIVE
   notifications of the ATM circuit, or any other parameters that may
   need to be shared between the LCCEs in order to provide proper PW
   emulation.

   The SLI message MUST be sent whenever there is a status change that
   may be reported by any values identified in the Circuit Status AVP.
   The only exceptions to this are the initial ICRQ, ICRP, and CDN
   messages, which establish and tear down the L2TP session itself when
   the ATM circuit is created or deleted.  The SLI message may be sent
   from either LCCE at any time after the first ICRQ is sent (and
   perhaps before an ICRP is received, requiring the peer to perform a
   reverse Session ID lookup).

   The other application of the SLI message is to map the ATM OAM or
   physical layer alarms into Circuit Status AVP as described in <a href="#section-8">Section</a>
   <a href="#section-8">8</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Encapsulation"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Encapsulation</span>

   This section describes the general encapsulation format for ATM
   services over L2TP.










<span class="grey">Singh, et al.               Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     PSN Transport Header                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                       Session Header                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    ATM-Specific Sublayer                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                      ATM Service Payload                      |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Figure 1: General Format for ATM Encapsulation over L2TPv3 over IP

   The PSN Transport header is specific to IP and its underlying
   transport header.  This header is used to transport the encapsulated
   ATM payload through the IP network.

   The Session Header is a non-zero 32-bit Session ID with an optional
   Cookie up to 64-bits.  This Session ID is exchanged during session
   setup.

   The ATM-Specific Sublayer is REQUIRED for AAL5 SDU Mode and OPTIONAL
   for ATM Cell Mode.  Please refer to <a href="#section-4.1">Section 4.1</a> for more details.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20ATM-Specific%20Sublayer"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  ATM-Specific Sublayer</span>

   This section defines a new ATM-Specific Sublayer, an alternative to
   the Default L2-Specific Sublayer as mentioned in <a href="rfc3931.html#section-4.6">Section 4.6 of
   [RFC3931]</a>.  Four new flag bits (T, G, C, and U) are defined that
   concur with Section 8.2 of [<a href="#ref-PWE3ATM" title='"Encapsulation Methods for Transport of ATM Over MPLS Networks"'>PWE3ATM</a>].

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |x|S|B|E|T|G|C|U|          Sequence Number                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                  Figure 2: ATM-Specific Sublayer Format

   The meaning of the fields of the ATM-Specific Sublayer is as follows:

      * S bit

      Definition of this bit is as per <a href="rfc3931.html#section-4.6">Section 4.6 of [RFC3931]</a>.




<span class="grey">Singh, et al.               Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


      * B and E bits

      Definitions of these bits are as per Section 5.5 of [<a href="#ref-L2TPFRAG" title='"PWE3 Fragmentation and Reassembly"'>L2TPFRAG</a>].

      If these bits are not used as per [<a href="#ref-L2TPFRAG" title='"PWE3 Fragmentation and Reassembly"'>L2TPFRAG</a>], they MUST be set to
      0 upon transmission and ignored upon reception.

      * T (Transport type) bit

      Bit (T) of the ATM-Specific Sublayer indicates whether the packet
      contains an ATM admin cell or an AAL5 payload.  If T = 1, the
      packet contains an ATM admin cell, encapsulated according to the
      VCC cell relay encapsulation of <a href="#section-5.2">Section 5.2</a>.

      If not set, the PDU contains an AAL5 payload.  The ability to
      transport an ATM cell in the AAL5 SDU Mode is intended to provide
      a means of enabling administrative functionality over the AAL5 VCC
      (though it does not endeavor to preserve user-cell and admin-cell
      arrival/transport ordering, as described in <a href="#section-9.1">Section 9.1</a>).

      * G (EFCI) Bit

      The ingress LCCE device SHOULD set this bit to 1 if the Explicit
      Forward Congestion Indication (EFCI) bit of the final cell of the
      incoming AAL5 payload is set to 1, or if the EFCI bit of the
      single ATM cell to be transported in the packet is set to 1.
      Otherwise, this bit SHOULD be set to 0.  The egress LCCE device
      SHOULD set the EFCI bit of all the outgoing cells that transport
      the AAL5 payload to the value contained in this field.

      * C (CLP) Bit

      The ingress LCCE device SHOULD set this bit to 1 if the Cell Loss
      Priority (CLP) bit of any of the incoming ATM cells of the AAL5
      payload is set to 1, or if the CLP bit of the single ATM cell that
      is to be transported in the packet is set to 1.  Otherwise this
      bit SHOULD be set to 0.  The egress LCCE device SHOULD set the CLP
      bit of all outgoing cells that transport the AAL5 CPCS-PDU to the
      value contained in this field.












<span class="grey">Singh, et al.               Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


      * U (Command/Response) Bit

      When FRF.8.1 Frame Relay / ATM PVC Service Interworking (see
      [<a href="#ref-FRF8.1" title='"Frame Relay / ATM PVC Service Interworking Implementation Agreement (FRF 8.1)"'>FRF8.1</a>]) traffic is being transported, the CPCS-UU Least
      Significant Bit (LSB) of the AAL5 CPCS-PDU may contain the Frame
      Relay C/R bit.  The ingress LCCE device SHOULD copy this bit to
      the U bit of the ATM-Specific Sublayer.  The egress LCCE device
      SHOULD copy the U bit to the CPCS-UU Least Significant Bit (LSB)
      of the AAL5 payload.

      The Sequence Number field is used in sequencing, as described in
      <a href="#section-4.2">Section 4.2</a>.

   In case of a reassembly timeout, the encapsulating LCCE should
   discard all component cells of the AAL5 frame.

   An additional enumeration is added to the L2-Specific Sublayer AVP to
   identify the ATM-Specific Sublayer:

         0 - There is no L2-Specific Sublayer present.
         1 - The Default L2-Specific Sublayer (defined in <a href="rfc3931.html#section-4.6">Section 4.6
             of [RFC3931]</a>) is used.
         2 - The ATM-Specific Sublayer is used.

   The first two values are already defined in the L2TPv3 base
   specification [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Sequencing"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Sequencing</span>

   Data Packet Sequencing MAY be enabled for ATMPWs.  The sequencing
   mechanisms described in [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>] MUST be used to signal sequencing
   support.  ATMPWs over L2TPv3 MUST request the presence of the ATM-
   Specific Sublayer when sequencing is enabled, and MAY request its
   presence at all times.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20ATM%20Transport"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  ATM Transport</span>

   There are two encapsulations supported for ATM transport as described
   below.

   The ATM-Specific Sublayer is prepended to the AAL5-SDU.  The other
   cell mode encapsulation consists of the OPTIONAL ATM-Specific
   Sublayer, followed by a 4-byte ATM cell header and a 48-byte ATM
   cell-payload.







<span class="grey">Singh, et al.               Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20ATM%20AAL5-SDU%20Mode"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  ATM AAL5-SDU Mode</span>

   In this mode, each AAL5 VC is mapped to an L2TP session.  The Ingress
   LCCE reassembles the AAL5 CPCS-SDU without the AAL5 trailer and any
   padding bytes.  Incoming EFCI, CLP, and C/R (if present) are carried
   in an ATM-Specific Sublayer across ATMPWs to the egress LCCE.  The
   processing of these bits on ingress and egress LCCEs is defined in
   <a href="#section-4.1">Section 4.1</a>.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |x|S|x|x|T|G|C|U|             Sequence Number                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                                                               |
   |                         AAL5 CPCS-SDU                         |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 Figure 3: ATM AAL5-SDU Mode Encapsulation

   If the ingress LCCE determines that an encapsulated AAL5 SDU exceeds
   the MTU size of the L2TPv3 session, then AAL5 SDU may be fragmented
   as per [<a href="#ref-L2TPFRAG" title='"PWE3 Fragmentation and Reassembly"'>L2TPFRAG</a>] or underneath the transport layer (IP, etc.).  F5
   OAM cells that arrive during the reassembly of an AAL5 SDU are sent
   immediately on the PW followed by the AAL5 SDU payload.  In this
   case, OAM cells' relative order with respect to user data cells is
   not maintained.

   Performance Monitoring OAM, as specified in ITU-T 610 [<a href="#ref-I610-1">I610-1</a>],
   [<a href="#ref-I610-2">I610-2</a>], [<a href="#ref-I610-3">I610-3</a>] and security OAM cells as specified in [<a href="#ref-ATMSEC">ATMSEC</a>],
   should not be used in combination with AAL5 SDU Mode.  These cells
   MAY be dropped at the ingress LCCE because cell sequence integrity is
   not maintained.

   The Pseudowire Type AVP defined in <a href="rfc3931.html#section-5.4.4">Section 5.4.4 of [RFC3931]</a>,
   Attribute Type 68, MUST be present in the ICRQ messages and MUST
   include the ATM AAL5 SDU VCC transport PW Type of 0x0002.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20ATM%20Cell%20Mode"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  ATM Cell Mode</span>

   In this mode, ATM cells skip the reassembly process at the ingress
   LCCE.  These cells are transported over an L2TP session, either as a
   single cell or as concatenated cells, into a single packet.  Each ATM
   cell consists of a 4-byte ATM cell header and a 48-byte ATM cell-
   payload; the HEC is not included.




<span class="grey">Singh, et al.               Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   In ATM Cell Mode encapsulation, the ATM-Specific Sublayer is
   OPTIONAL.  It can be included, if sequencing support is required.  It
   is left to the implementation to choose to signal the Default L2-
   Specific Sublayer or the ATM-Specific Sublayer.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |x|S|x|x|x|x|x|x|          Sequence Number (Optional)           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        VPI            |           VCI                 |PTI  |C|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                    ATM Cell Payload (48-bytes)                |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                               "
                               "
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        VPI            |           VCI                 |PTI  |C|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   |                    ATM Cell Payload (48-bytes)                |
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                   Figure 4: ATM Cell Mode Encapsulation

   In the simplest case, this encapsulation can be used to transmit a
   single ATM cell per Pseudowire PDU.  However, in order to provide
   better Pseudowire bandwidth efficiency, several ATM cells may be
   optionally encapsulated into a single Pseudowire PDU.

   The maximum number of concatenated cells in a packet is limited by
   the MTU size of the session and also by the ability of the egress
   LCCE to process them.  For more details about ATM Maximum
   Concatenated Cells, please refer to <a href="#section-6">Section 6</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.%20%20ATM%20VCC%20Cell%20Relay%20Service"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a>.  ATM VCC Cell Relay Service</span>

   A VCC cell relay service may be provided by mapping an ATM Virtual
   Channel Connection to a single Pseudowire using cell mode
   encapsulation as defined in <a href="#section-5.2">Section 5.2</a>.

   An LCCE may map one or more VCCs to a single PW.  However, a service
   provider may wish to provision a single VCC to a PW in order to
   satisfy QOS or restoration requirements.




<span class="grey">Singh, et al.               Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   The Pseudowire Type AVP defined in <a href="rfc3931.html#section-5.4.4">Section 5.4.4 of [RFC3931]</a>,
   Attribute Type 68, MUST be present in the ICRQ messages and MUST
   include the ATM cell transport VCC Mode PW Type of 0x0009.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2.%20%20ATM%20VPC%20Cell%20Relay%20Service"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a>.  ATM VPC Cell Relay Service</span>

   A Virtual Path Connection cell relay service may be provided by
   mapping an ATM Virtual Path Connection to a single Pseudowire using
   cell mode encapsulation as defined in <a href="#section-5.2">Section 5.2</a>.

   An LCCE may map one or more VPCs to a single Pseudowire.

   The Pseudowire Type AVP defined in <a href="rfc3931.html#section-5.4.4">Section 5.4.4 of [RFC3931]</a>,
   Attribute Type 68, MUST be present in the ICRQ messages and MUST
   include the ATM cell transport VPC Mode PW Type of 0x000A.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.3.%20%20ATM%20Port%20Cell%20Relay%20Service"></a><a class="selflink" href="#section-5.2.3" name="section-5.2.3">5.2.3</a>.  ATM Port Cell Relay Service</span>

   ATM port cell relay service allows an ATM port to be connected to
   another ATM port.  All ATM cells that are received at the ingress ATM
   port on the LCCE are encapsulated as per <a href="#section-5.2">Section 5.2</a>, into Pseudowire
   PDU and sent to peer LCCE.

   Each LCCE MUST discard any idle/unassigned cells received on an ATM
   port associated with ATMPWs.

   The Pseudowire Type AVP defined in <a href="rfc3931.html#section-5.4.4">Section 5.4.4 of [RFC3931]</a>,
   Attribute Type 68, MUST be present in the ICRQ messages and MUST
   include the ATM Cell transport Port Mode PW Type of 0x0003.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20OAM%20Cell%20Support"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  OAM Cell Support</span>

   The OAM cells are defined in [<a href="#ref-I610-1">I610-1</a>], [<a href="#ref-I610-2">I610-2</a>], [<a href="#ref-I610-3">I610-3</a>] and
   [<a href="#ref-ATMSEC">ATMSEC</a>] can be categorized as follows:

      a.  Fault Management
      b.  Performance monitoring and reporting
      c.  Activation/deactivation
      d.  System Management (e.g., security OAM cells)

   OAM Cells are always encapsulated using cell mode encapsulation,
   regardless of the encapsulation format used for user data.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.1.%20%20VCC%20Switching"></a><a class="selflink" href="#section-5.3.1" name="section-5.3.1">5.3.1</a>.  VCC Switching</span>

   The LCCEs SHOULD be able to pass the F5 segment and end-to-end Fault
   Management, Resource Management (RM cells), Performance Management,
   Activation/deactivation, and System Management OAM cells.



<span class="grey">Singh, et al.               Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   F4 OAM cells are inserted or extracted at the VP link termination.
   These OAM cells are not seen at the VC link termination and are
   therefore not sent across the PW.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.3.2.%20%20VPC%20Switching"></a><a class="selflink" href="#section-5.3.2" name="section-5.3.2">5.3.2</a>.  VPC Switching</span>

   The LCCEs MUST be able to pass the F4 segment and end-to-end Fault
   Management, Resource Management (RM cells), Performance Management,
   Activation/deactivation, and System Management OAM cells
   transparently according to [<a href="#ref-I610-1">I610-1</a>].

   F5 OAM cells are not inserted or extracted at the VP cross-connect.
   The LCCEs MUST be able to pass the F5 OAM cells transparently across
   the PW.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20ATM%20Maximum%20Concatenated%20Cells%20AVP"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  ATM Maximum Concatenated Cells AVP</span>

   The "ATM Maximum Concatenated Cells AVP", Attribute Type 86,
   indicates that the egress LCCE node can process a single PDU with
   concatenated cells up to a specified number of cells.  An LCCE node
   transmitting concatenated cells on this PW MUST NOT exceed the
   maximum number of cells as specified in this AVP.  This AVP is
   applicable only to ATM Cell Relay PW Types (VCC, VPC, Port Cell
   Relay).  This Attribute value may not be same in both directions of
   the specific PW.

   The Attribute Value field for this AVP has the following format:

    0                   1
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | ATM Maximum Concatenated Cells|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   This AVP MAY be hidden (the H bit MAY be 0 or 1).  The M bit for this
   AVP MAY be set to 0, but MAY vary (see <a href="rfc3931.html#section-5.2">Section 5.2 of [RFC3931]</a>).
   The length (before hiding) of this AVP is 8.

   This AVP is sent in an ICRQ, ICRP during session negotiation or via
   SLI control messages when LCCE changes the maximum number of
   concatenated cells configuration for a given ATM cell relay circuit.

   This AVP is OPTIONAL.  If the egress LCCE is configured with a
   maximum number of cells to be concatenated by the ingress LCCE, it
   SHOULD signal this value to the ingress LCCE.






<span class="grey">Singh, et al.               Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20OAM%20Emulation%20Required%20AVP"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  OAM Emulation Required AVP</span>

   An "OAM Emulation Required AVP", Attribute Type 87, MAY be needed to
   signal OAM emulation in AAL5 SDU Mode, if an LCCE cannot support the
   transport of OAM cells across L2TP sessions.  If OAM cell emulation
   is configured or detected via some other means on one side, the other
   LCCE MUST support OAM cell emulation as well.

   This AVP is exchanged during session negotiation (in ICRQ and ICRP)
   or during the life of the session via SLI control messages.  If the
   other LCCE cannot support the OAM cell emulation, the associated L2TP
   session MUST be torn down via CDN message with result code 22.

   OAM Emulation AVP is a boolean AVP, having no Attribute Value.  Its
   absence is FALSE and its presence is TRUE.  This AVP MAY be hidden
   (the H bit MAY be 0 or 1).  The M bit for this AVP SHOULD be set to
   0, but MAY vary (see <a href="rfc3931.html#section-5.2">Section 5.2 of [RFC3931]</a>).  The Length (before
   hiding) of this AVP is 6.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20ATM%20Defects%20Mapping%20and%20Status%20Notification"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  ATM Defects Mapping and Status Notification</span>

   ATM OAM alarms or circuit status is indicated via the Circuit Status
   AVP as defined in <a href="rfc3931.html#section-5.4.5">Section 5.4.5 of [RFC3931]</a>.  For reference, usage
   of this AVP is shown below.

    0                   1
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Reserved        |N|A|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The Value is a 16-bit mask with the two least significant bits
   defined, and the remaining bits are reserved for future use.
   Reserved bits MUST be set to 0 when sending and ignored upon receipt.

   The A (Active) bit indicates whether the ATM circuit is ACTIVE (1) or
   INACTIVE (0).

   The N (New) bit indicates whether the ATM circuit status indication
   is for a new ATM circuit (1) or an existing ATM circuit (0).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20ATM%20Alarm%20Status%20AVP"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  ATM Alarm Status AVP</span>

   An "ATM Alarm Status AVP", Attribute Type 88, indicates the reason
   for the ATM circuit status and specific alarm type, if any, to its
   peer LCCE node.  This OPTIONAL AVP MAY be present in the SLI message
   with the Circuit Status AVP.




<span class="grey">Singh, et al.               Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   The Attribute Value field for this AVP has the following format:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Circuit Status Reason     |            Alarm              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The Circuit Status Reason is a 2-octet unsigned integer, and the
   Alarm Type is also a 2-octet unsigned integer.

   This AVP MAY be hidden (the H bit MAY be 0 or 1).  The M bit for this
   AVP SHOULD be set to 0, but MAY vary (see <a href="rfc3931.html#section-5.2">Section 5.2 of [RFC3931]</a>).
   The Length (before hiding) of this AVP is 10 octets.

   This AVP is sent in the SLI message to indicate additional
   information about the ATM circuit status.

   Circuit Status Reason values for the SLI message are as follows:

           0 - Reserved
           1 - No alarm or alarm cleared (default for Active Status)
           2 - Unspecified or unknown Alarm Received (default for
               Inactive Status)
           3 - ATM Circuit received F1 Alarm on ingress LCCE
           4 - ATM Circuit received F2 Alarm on ingress LCCE
           5 - ATM Circuit received F3 Alarm on ingress LCCE
           6 - ATM Circuit received F4 Alarm on ingress LCCE
           7 - ATM Circuit received F5 Alarm on ingress LCCE
           8 - ATM Circuit down due to ATM Port shutdown on Peer LCCE
           9 - ATM Circuit down due to loop-back timeout on ingress LCCE

   The general ATM Alarm failures are encoded as below:

           0 - Reserved
           1 - No Alarm type specified (default)
           2 - Alarm Indication Signal (AIS)
           3 - Remote Defect Indicator (RDI)
           4 - Loss of Signal (LOS)
           5 - Loss of Pointer (LOP)
           6 - Loss of Framer (LOF)
           7 - Loopback cells (LB)
           8 - Continuity Check (CC)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Applicability%20Statement"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Applicability Statement</span>

   The ATM Pseudowire emulation described in this document allows for
   carrying various ATM services across an IP packet switched network



<span class="grey">Singh, et al.               Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   (PSN).  These ATM services can be PVC-based, PVP-based, or port-
   based.  In all cases, ATMPWs operate in a point-to-point deployment
   model.

   ATMPWs support two modes of encapsulation: ATM AAL5-SDU Mode and ATM
   Cell Relay Mode.  The following sections list their respective
   characteristics in relationship to the native service.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20ATM%20AAL5-SDU%20Mode"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  ATM AAL5-SDU Mode</span>

   ATMPWs operating in AAL5-SDU Mode only support the transport of PVC-
   based services.  In this mode, the AAL5 CPCS-PDU from a single VCC is
   reassembled at the ingress LCCE, and the AAL5 CPCS-SDU (i.e., the
   AAL5 CPCS-PDU without CPCS-PDU Trailer or PAD octets, also referred
   to as AAL5 CPCS-PDU Payload) is transported over the Pseudowire.
   Therefore, Segmentation and Reassembly (SAR) functions are required
   at the LCCEs.  There is a one-to-one mapping between an ATM PVC and
   an ATMPW operating in AAL5-SDU Mode, supporting bidirectional
   transport of variable length frames.  With the exception of
   optionally transporting OAM cells, only ATM Adaptation Layer (AAL)
   Type 5 frames are carried in this mode, including multiprotocol over
   AAL5 packets [<a href="rfc2684.html" title='"Multiprotocol Encapsulation over ATM Adaptation Layer 5"'>RFC2684</a>].

   The following considerations stem from ATM AAL5-SDU Mode Pseudowires
   not transporting the ATM cell headers and AAL5 CPCS-PDU Trailer (see
   <a href="#section-5.1">Section 5.1</a>):

      o An ATMPW operating in AAL5-SDU Mode conveys EFCI and CLP
        information using the G and C bits in the ATM-Specific Sublayer.
        In consequence, the EFCI and CLP values of individual ATM cells
        that constitute the AAL5 frame may be lost across the ATMPW, and
        CLP and EFCI transparency may not be maintained.  The AAL5-SDU
        Mode does not preserve EFCI and CLP values for every ATM cell
        within the AAL5 PDU.  The processing of these bits on ingress
        and egress is defined in <a href="#section-4.1">Section 4.1</a>.

      o Only the least significant bit (LSB) from the CPCS-UU (User-to-
        User indication) field in the CPCS-PDU Trailer is transported
        using the ATM-Specific Sublayer (see <a href="#section-4.1">Section 4.1</a>).  This bit
        contains the Frame Relay C/R bit when FRF.8.1 Frame Relay / ATM
        PVC Service Interworking [<a href="#ref-FRF8.1" title='"Frame Relay / ATM PVC Service Interworking Implementation Agreement (FRF 8.1)"'>FRF8.1</a>] is used.  The CPCS-UU field is
        not used in multiprotocol over AAL5 [<a href="rfc2684.html" title='"Multiprotocol Encapsulation over ATM Adaptation Layer 5"'>RFC2684</a>].  However,
        applications that transfer user to user information using the
        CPCS-UU octet would fail to operate.







<span class="grey">Singh, et al.               Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


      o The CPI (Common Part Indicator) field in the CPCS-PDU Trailer is
        also not transported across the ATMPW.  This does not affect
        multiprotocol over AAL5 applications since the field is used for
        alignment and MUST be coded as 0x00 [<a href="rfc2684.html" title='"Multiprotocol Encapsulation over ATM Adaptation Layer 5"'>RFC2684</a>].

      o The trailing CRC field in the CPCS-PDU is stripped at the
        ingress LCCE and not transported over the ATMPW operating in
        AAL5-SDU Mode.  It is in turn regenerated at the egress LCCE.
        Since the CRC has end-to-end significance, this means that
        errors introduced in the ATMPW payload during encapsulation or
        transit across the packet switched network may not be detected.
        To allow for payload integrity checking transparency on ATMPWs
        operating in AAL5-SDU Mode using L2TP over IP or L2TP over
        UDP/IP, the L2TPv3 session can utilize IPsec as specified in
        <a href="rfc3931.html#section-4.1.3">Section 4.1.3 of [RFC3931]</a>.

   Some additional characteristics of the AAL5-SDU Mode are the
   following:

      o The status of the ATM PVC is signaled between LCCEs using the
        Circuit Status AVP.  More granular cause values for the ATM
        circuit status and specific ATM alarm types are signaled using
        the ATM Alarm Status AVP (see <a href="#section-8.1">Section 8.1</a>).  Additionally, loss
        of connectivity between LCCEs can be detected by the L2TPv3
        keepalive mechanism (see <a href="rfc3931.html#section-4.4">Section 4.4 in [RFC3931]</a>).

      o F5 OAM cells' relative order with respect to user data cells may
        not be maintained.  F5 OAM cells that arrive during the
        reassembly of an AAL5 SDU are sent immediately over the PW and
        before the AAL5 SDU payload.  At egress, these OAM cells are
        sent before the cells that comprise the AAL5-SDU.  Therefore,
        applications that rely on cell sequence integrity between OAM
        and user data cells may not work.  This includes Performance
        Monitoring and Security OAM cells (see <a href="#section-5.1">Section 5.1</a>).  In
        addition, the AAL5-SDU service allows for OAM emulation in which
        OAM cells are not transported over the ATMPW (see <a href="#section-7">Section 7</a>).
        This is advantageous for AAL5-SDU Mode ATMPW implementations
        that do not support cell transport using the T-bit.

      o Fragmentation and Reassembly procedures MAY be used for managing
        mismatched MTUs, as specified in Section 5 of [<a href="#ref-L2TPFRAG" title='"PWE3 Fragmentation and Reassembly"'>L2TPFRAG</a>] or in
        the underlying PSN (IP, etc.) between tunnel endpoints as
        discussed in <a href="rfc3931.html#section-4.1.4">Section 4.1.4 of [RFC3931]</a>.  Only one of these
        methods SHOULD be used for a given AAL5-SDU Mode ATMPW.  The
        procedures described in [<a href="#ref-L2TPFRAG" title='"PWE3 Fragmentation and Reassembly"'>L2TPFRAG</a>] can be used to support the
        maximum size of an AAL5 SDU, 2 ^ 16 - 1 (65535) octets.
        However, relying on fragmentation on the L2TP/IPv4 packet
        between tunnel endpoints limits the maximum size of the AAL5 SDU



<span class="grey">Singh, et al.               Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


        that can be transported, because the maximum total length of an
        IPv4 datagram is already 65535 octets.  In this case, the
        maximum AAL5 SDU that can be transported is limited to 65535
        minus the encapsulating headers, 24-36 octets for L2TP-over-IPv4
        or 36-48 octets for L2TP-over-UDP/IPv4.  When the AAL5 payload
        is IPv4, an additional option is to fragment IP packets before
        tunnel encapsulation with L2TP/IP (see <a href="rfc3931.html#section-4.1.4">Section 4.1.4 of
        [RFC3931]</a>).

      o Sequencing may be enabled on the ATMPW using the ATM-Specific
        Sublayer Sequence Number field, to detect lost, duplicate, or
        out-of-order frames on a per-session basis (see <a href="#section-4.2">Section 4.2</a>).

      o Quality of Service characteristics such as throughput (cell
        rates), burst sizes and delay variation can be provided by
        leveraging Quality of Service features of the LCCEs and the
        underlying PSN, increasing the faithfulness of ATMPWs.  This
        includes mapping ATM service categories to a compatible PSN
        class of service.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20ATM%20Cell%20Relay%20Mode"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  ATM Cell Relay Mode</span>

   In this mode, no reassembly takes place at the ingress LCCE.  There
   are no SAR requirements for LCCEs.  Instead, ATM-layer cells are
   transported over the ATMPW.  Consequently, all AAL types can be
   transported over ATMPWs operating in Cell Relay Mode.  ATM Cell Relay
   Pseudowires can operate in three different modes (see <a href="#section-5.2">Section 5.2</a>):
   ATM VCC, ATM VPC, and ATM Port Cell Relay Services.  The following
   are some of their characteristics:

      o The ATM cells transported over Cell Relay Mode ATMPWs consist of
        a 4-byte ATM cell header and a 48-byte ATM cell-payload (see
        <a href="#section-5.2">Section 5.2</a>).  The ATM Service Payload of a Cell Relay Mode
        ATMPW is a multiple of 52 bytes.  The Header Error Checksum
        (HEC) in the ATM cell header containing a Cyclic Redundancy
        Check (CRC) calculated over the first 4 bytes of the ATM cell
        header is not transported.  Accordingly, the HEC field may not
        accurately reflect errors on an end-to-end basis; errors or
        corruption in the 4-byte ATM cell header introduced in the ATMPW
        payload during encapsulation or transit across the PSN may not
        be detected.  To allow for payload integrity checking
        transparency on ATMPWs operating in Cell Relay Mode using L2TP
        over IP or L2TP over UDP/IP, the L2TPv3 session can utilize
        IPsec as specified in <a href="rfc3931.html#section-4.1.3">Section 4.1.3 of [RFC3931]</a>.







<span class="grey">Singh, et al.               Standards Track                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


      o ATM PWs operating in Cell Relay Mode can transport a single ATM
        cell or multiple concatenated cells (see <a href="#section-6">Section 6</a>).  Cell
        concatenation improves the bandwidth efficiency of the ATMPW (by
        decreasing the overhead) but introduces latency and delay
        variation.

      o The status of the ATM PVC is signaled between LCCEs using the
        Circuit Status AVP.  More granular cause values for the ATM
        circuit status and specific ATM alarm types are signaled using
        the ATM Alarm Status AVP (see <a href="#section-8.1">Section 8.1</a>).  Additionally, loss
        of connectivity between LCCEs can be detected by the L2TPv3
        keepalive mechanism (see <a href="rfc3931.html#section-4.4">Section 4.4 in [RFC3931]</a>).

      o ATM OAM cells are transported in the same fashion as user cells,
        and in the same order as they are received.  Therefore,
        applications that rely on cell sequence integrity between OAM
        and user data cells are not adversely affected.  This includes
        performance management and security applications that utilize
        OAM cells (see <a href="#section-5.3">Section 5.3</a>).

      o The maximum number of concatenated cells is limited by the MTU
        size of the session (see <a href="#section-5.2">Section 5.2</a> and <a href="#section-6">Section 6</a>).  Therefore,
        Fragmentation and Reassembly procedures are not used for Cell
        Relay ATMPWs.  Concatenating cells to then fragment the
        resulting packet defeats the purpose of cell concatenation.
        Concatenation of cells and fragmentation act as inverse
        functions, with additional processing but null net effect, and
        should not be used together.

      o Sequencing may be enabled on the ATMPW to detect lost,
        duplicate, or out-of-order packets on a per-session basis (see
        <a href="#section-4.2">Section 4.2</a>).

      o Quality of Service characteristics such as throughput (cell
        rates), burst sizes, and delay variation can be provided by
        leveraging Quality of Service features of the LCCEs and the
        underlying PSN, increasing the faithfulness of ATMPWs.  This
        includes mapping ATM service categories to a compatible PSN
        class of service, and mapping CLP and EFCI bits to PSN classes
        of service.  For example, mapping a Constant Bit Rate (CBR) PVC
        to a class of service with tight loss and delay characteristics,
        such as an Expedited Forwarding (EF) Per-Hop Behavior (PHB) if
        the PSN is an IP DiffServ-enabled domain.  The following
        characteristics of ATMPWs operating in Cell Relay Mode include
        additional QoS considerations:

           - ATM Cell transport VCC Pseudowires allow for mapping
             multiple ATM VCCs to a single ATMPW.  However, a user may



<span class="grey">Singh, et al.               Standards Track                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


             wish to map a single ATM VCC per ATMPW to satisfy QoS
             requirements (see <a href="#section-5.2.1">Section 5.2.1</a>).

           - Cell Relay ATMPWs allow for concatenating multiple cells in
             a single Pseudowire PDU to improve bandwidth efficiency,
             but may introduce latency and delay variation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Congestion%20Control"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Congestion Control</span>

   As explained in [<a href="rfc3985.html" title='"Pseudo Wire Emulation Edge-to- Edge (PWE3) Architecture"'>RFC3985</a>], the PSN carrying the PW may be subject to
   congestion, with congestion characteristics depending on PSN type,
   network architecture, configuration, and loading.  During congestion
   the PSN may exhibit packet loss and packet delay variation (PDV) that
   will impact the timing and data integrity of the ATMPW.  During
   intervals of acute congestion, some Cell Relay ATMPWs may not be able
   to maintain service.  The inelastic nature of some ATM services
   reduces the risk of congestion because the rates will not expand to
   consume all available bandwidth, but on the other hand, those ATM
   services cannot arbitrarily reduce their load on the network to
   eliminate congestion when it occurs.

   Whenever possible, Cell Relay ATMPWs should be run over traffic-
   engineered PSNs providing bandwidth allocation and admission control
   mechanisms.  IntServ-enabled domains providing the Guaranteed Service
   (GS) or DiffServ-enabled domains using Expedited Forwarding (EF) are
   examples of traffic-engineered PSNs.  Such PSNs will minimize loss
   and delay while providing some degree of isolation of the Cell Relay
   ATMPW's effects from neighboring streams.

   If the PSN is providing a best-effort service, then the following
   best-effort service congestion avoidance considerations apply: Those
   ATMPWs that carry constant bit rate (CBR) and variable bit rate-real
   time (VBR-rt) services across the PSN will most probably not behave
   in a TCP-friendly manner prescribed by [<a href="rfc2914.html" title='"Congestion Control Principles"'>RFC2914</a>].  In the presence of
   services that reduce transmission rate, ATMPWs carrying CBR and VBR-
   rt traffic SHOULD be halted when acute congestion is detected, in
   order to allow for other traffic or the network infrastructure itself
   to continue.  ATMPWs carrying unspecified bit rate (UBR) traffic,
   which are equivalent to best-effort IP service, need not be halted
   during acute congestion and MAY have cells delayed or dropped by the
   ingress PE if necessary.  ATMPWs carrying variable bit rate-non real
   time (VBR-nrt) services may or may not behave in a TCP-friendly
   manner, depending on the end user application, but are most likely
   safe to continue operating, since the end-user application is
   expected to be delay-insensitive and may also be somewhat loss-
   insensitive.





<span class="grey">Singh, et al.               Standards Track                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   LCCEs SHOULD monitor for congestion (for example, by measuring packet
   loss or as specified in <a href="rfc3985.html#section-6.5">Section 6.5 of [RFC3985]</a>) in order to ensure
   that the ATM service may be maintained.  When severe congestion is
   detected (for example, when enabling sequencing and detecting that
   the packet loss is higher than a threshold), the ATM service SHOULD
   be terminated by tearing down the L2TP session via a CDN message.
   The PW may be restarted by manual intervention, or by automatic means
   after an appropriate waiting time.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Security%20Considerations"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Security Considerations</span>

   ATM over L2TPv3 is subject to the security considerations defined in
   [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>].  There are no additional considerations specific to
   carrying ATM that are not present carrying other data link types.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  IANA Considerations</span>

   The signaling mechanisms defined in this document rely upon the
   allocation of the following ATM Pseudowire Types (see Pseudowire
   Capabilities List as defined in 5.4.3 of [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>] and L2TPv3
   Pseudowire Types in 10.6 of [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>]) by the IANA (number space
   created as part of publication of [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>]):

      Pseudowire Types
      ----------------

      0x0002  ATM AAL5 SDU VCC transport
      0x0003  ATM Cell transparent Port Mode
      0x0009  ATM Cell transport VCC Mode
      0x000A  ATM Cell transport VPC Mode

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.1.%20%20L2-Specific%20Sublayer%20Type"></a><a class="selflink" href="#section-12.1" name="section-12.1">12.1</a>.  L2-Specific Sublayer Type</span>

   This number space is created and maintained per [<a href="rfc3931.html" title='"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"'>RFC3931</a>].

      L2-Specific Sublayer Type
      -------------------------

      2 - ATM L2-Specific Sublayer present

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.2.%20%20Control%20Message%20Attribute%20Value%20Pairs%20%28AVPs%29"></a><a class="selflink" href="#section-12.2" name="section-12.2">12.2</a>.  Control Message Attribute Value Pairs (AVPs)</span>

   This number space is managed by IANA as per [<a href="#ref-BCP0068" title='"Layer Two Tunneling Protocol (L2TP) Internet Assigned Numbers Authority (IANA) Considerations Update"'>BCP0068</a>].

   A summary of the three new AVPs follows:

   Control Message Attribute Value Pairs




<span class="grey">Singh, et al.               Standards Track                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


      Attribute
      Type        Description
      ---------   ----------------------------------
      86          ATM Maximum Concatenated Cells AVP
      87          OAM Emulation Required AVP
      88          ATM Alarm Status AVP

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.3.%20%20Result%20Code%20AVP%20Values"></a><a class="selflink" href="#section-12.3" name="section-12.3">12.3</a>.  Result Code AVP Values</span>

   This number space is managed by IANA as per [<a href="#ref-BCP0068" title='"Layer Two Tunneling Protocol (L2TP) Internet Assigned Numbers Authority (IANA) Considerations Update"'>BCP0068</a>].

   A new Result Code value for the CDN message is defined in <a href="#section-7">Section 7</a>.
   Following is a summary:

   Result Code AVP (Attribute Type 1) Values
   -----------------------------------------

   General Error Codes

         22 - Session not established due to other LCCE
              cannot support the OAM Cell Emulation

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.4.%20%20ATM%20Alarm%20Status%20AVP%20Values"></a><a class="selflink" href="#section-12.4" name="section-12.4">12.4</a>.  ATM Alarm Status AVP Values</span>

   This is a new registry for IANA to maintain.

   New Attribute values for the ATM Alarm Status AVP in the SLI message
   are defined in <a href="#section-8.1">Section 8.1</a>.  Additional values may be assigned by
   Expert Review [<a href="rfc2434.html" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC2434</a>].  Following is a summary:

   ATM Alarm Status AVP (Attribute Type 88) Values
   -----------------------------------------------

   Circuit Status Reason values for the SLI message are as follows:

           0 - Reserved
           1 - No alarm or alarm cleared (default for Active Status)
           2 - Unspecified or unknown Alarm Received (default for
               Inactive Status)
           3 - ATM Circuit received F1 Alarm on ingress LCCE
           4 - ATM Circuit received F2 Alarm on ingress LCCE
           5 - ATM Circuit received F3 Alarm on ingress LCCE
           6 - ATM Circuit received F4 Alarm on ingress LCCE
           7 - ATM Circuit received F5 Alarm on ingress LCCE
           8 - ATM Circuit down due to ATM Port shutdown on Peer LCCE
           9 - ATM Circuit down due to loop-back timeout on ingress LCCE





<span class="grey">Singh, et al.               Standards Track                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


   The general ATM Alarm failures are encoded as below:

           0 - Reserved
           1 - No Alarm type specified (default)
           2 - Alarm Indication Signal (AIS)
           3 - Remote Defect Indicator (RDI)
           4 - Loss of Signal (LOS)
           5 - Loss of Pointer (LOP)
           6 - Loss of Framer (LOF)
           7 - Loopback cells (LB)
           8 - Continuity Check (CC)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.5.%20%20ATM-Specific%20Sublayer%20Bits"></a><a class="selflink" href="#section-12.5" name="section-12.5">12.5</a>.  ATM-Specific Sublayer Bits</span>

   This is a new registry for IANA to maintain.

   The ATM-Specific Sublayer contains 8 bits in the low-order portion of
   the header.  Reserved bits may be assigned by IETF Consensus
   [<a href="rfc2434.html" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC2434</a>].

      Bit 0 - Reserved
      Bit 1 - S (Sequence) bit
      Bit 2 - B (Fragmentation) bit
      Bit 3 - E (Fragmentation) bit
      Bit 4 - T (Transport type) bit
      Bit 5 - G (EFCI) bit
      Bit 6 - C (CLP) bit
      Bit 7 - U (Command/Response) bit

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Acknowledgements"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Acknowledgements</span>

   Thanks for the contributions from Jed Lau, Pony Zhu, Prasad Yaditi,
   Durai, and Jaya Kumar.

   Many thanks to Srinivas Kotamraju for editorial review.

   Thanks to Shoou Yiu and Fred Shu for giving their valuable time to
   review this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20References"></a><a class="selflink" href="#section-14" name="section-14">14</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/14.1.%20%20Normative%20References"></a><a class="selflink" href="#section-14.1" name="section-14.1">14.1</a>.  Normative References</span>

   [<a id="ref-RFC3931" name="ref-RFC3931">RFC3931</a>]  Lau, J., Townsley, M., and I. Goyret, "Layer Two Tunneling
              Protocol - Version 3 (L2TPv3)", <a href="rfc3931.html">RFC 3931</a>, March 2005.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.



<span class="grey">Singh, et al.               Standards Track                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/14.2.%20%20Informative%20References"></a><a class="selflink" href="#section-14.2" name="section-14.2">14.2</a>.  Informative References</span>

   [<a id="ref-PWE3ATM" name="ref-PWE3ATM">PWE3ATM</a>]  Martini, L., "Encapsulation Methods for Transport of ATM
              Over MPLS Networks", Work in Progress, September 2005.

   [<a id="ref-L2TPFRAG" name="ref-L2TPFRAG">L2TPFRAG</a>] Malis, A. and M. Townsley, "PWE3 Fragmentation and
              Reassembly", Work in Progress, November 2005.

   [<a id="ref-FRF8.1" name="ref-FRF8.1">FRF8.1</a>]   "Frame Relay / ATM PVC Service Interworking Implementation
              Agreement (FRF 8.1)", Frame Relay Forum 2000.

   [<a id="ref-BCP0068" name="ref-BCP0068">BCP0068</a>]  Townsley, W., "Layer Two Tunneling Protocol (L2TP)
              Internet Assigned Numbers Authority (IANA) Considerations
              Update", <a href="https://tools.ietf.org/html/bcp68">BCP 68</a>, <a href="rfc3438.html">RFC 3438</a>, December 2002.

   [<a id="ref-RFC2434" name="ref-RFC2434">RFC2434</a>]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", <a href="https://tools.ietf.org/html/bcp26">BCP 26</a>, <a href="rfc2434.html">RFC 2434</a>,
              October 1998.

   [<a id="ref-I610-1" name="ref-I610-1">I610-1</a>]   ITU-T Recommendation I.610 (1999): B-ISDN operation and
              maintenance principles and functions

   [<a id="ref-I610-2" name="ref-I610-2">I610-2</a>]   ITU-T Recommendation I.610, Corrigendum 1 (2000): B-ISDN
              operation and maintenance principles and functions
              (corrigendum 1)

   [<a id="ref-I610-3" name="ref-I610-3">I610-3</a>]   ITU-T Recommendation I.610, Amendment 1 (2000): B-ISDN
              operation and maintenance principles and functions
              (Amendment 1)

   [<a id="ref-ATMSEC" name="ref-ATMSEC">ATMSEC</a>]   ATM Forum Specification, af-sec-0100.002 (2001): ATM
              Security Specification version 1.1

   [<a id="ref-RFC2684" name="ref-RFC2684">RFC2684</a>]  Grossman, D. and J. Heinanen, "Multiprotocol Encapsulation
              over ATM Adaptation Layer 5", <a href="rfc2684.html">RFC 2684</a>, September 1999.

   [<a id="ref-RFC3985" name="ref-RFC3985">RFC3985</a>]  Bryant, S. and P. Pate, "Pseudo Wire Emulation Edge-to-
              Edge (PWE3) Architecture", <a href="rfc3985.html">RFC 3985</a>, March 2005.

   [<a id="ref-RFC2914" name="ref-RFC2914">RFC2914</a>]  Floyd, S., "Congestion Control Principles", <a href="https://tools.ietf.org/html/bcp41">BCP 41</a>, <a href="rfc2914.html">RFC</a>
              <a href="rfc2914.html">2914</a>, September 2000.










<span class="grey">Singh, et al.               Standards Track                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


Authors' Addresses

   Sanjeev Singh
   Cisco Systems
   170 W. Tasman Drive
   San Jose, CA  95134

   EMail: sanjeevs@cisco.com


   W. Mark Townsley
   Cisco Systems
   7025 Kit Creek Road
   PO Box 14987
   Research Triangle Park, NC 27709

   EMail: mark@townsley.net


   Carlos Pignataro
   Cisco Systems
   7025 Kit Creek Road
   PO Box 14987
   Research Triangle Park, NC 27709

   EMail: cpignata@cisco.com

























<span class="grey">Singh, et al.               Standards Track                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc4454.html">RFC 4454</a>                    ATM over L2TPv3                     May 2006</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2006).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).







Singh, et al.               Standards Track                    [Page 26]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4454 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:41 GMT --></html>