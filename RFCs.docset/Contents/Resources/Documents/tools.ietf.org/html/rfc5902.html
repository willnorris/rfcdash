<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from tools.ietf.org/html/rfc5902 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 12:52:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129c" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Identifier" content="urn:ietf:rfc:5902" />
<meta name="DC.Description.Abstract" content="There has been much recent discussion on the topic of whether the IETF
should develop standards for IPv6 Network Address Translators (NATs).
This document articulates the architectural issues raised by IPv6
NATs, the pros and cons of having IPv6 NATs, and provides the IAB's
thoughts on the current open issues and the solution space." />
<meta name="DC.Creator" content="Zhang, Lixia" />
<meta name="DC.Creator" content="Lebovitz, Gregory" />
<meta name="DC.Creator" content="Thaler, Dave" />
<meta name="DC.Date.Issued" content="July, 2010" />
<meta name="DC.Title" content="IAB Thoughts on IPv6 Network Address Translation" />

    <link rel="icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <title>RFC 5902 - IAB Thoughts on IPv6 Network Address Translation</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgorange"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5902.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5902" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-iab-ipv6-nat" title="draft-iab-ipv6-nat">draft-iab-ipv6-nat</a>] [<a href='https://datatracker.ietf.org/doc/rfc5902' title='IESG Datatracker information for this document'>Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5902" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5902" title="Side-by-side diff">Diff2</a>]         </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Internet Architecture Board (IAB)                              D. Thaler
Request for Comments: 5902                                      L. Zhang
Category: Informational                                      G. Lebovitz
ISSN: 2070-1721                                                July 2010


            <span class="h1">IAB Thoughts on IPv6 Network Address Translation</span>

Abstract

   There has been much recent discussion on the topic of whether the
   IETF should develop standards for IPv6 Network Address Translators
   (NATs).  This document articulates the architectural issues raised by
   IPv6 NATs, the pros and cons of having IPv6 NATs, and provides the
   IAB's thoughts on the current open issues and the solution space.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Architecture Board (IAB)
   and represents information that the IAB has deemed valuable to
   provide for permanent record.  Documents approved for publication by
   the IAB are not a candidate for any level of Internet Standard; see
   <a href="rfc5741.html#section-2">Section&nbsp;2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc5902">http://www.rfc-editor.org/info/rfc5902</a>.

Copyright Notice

   Copyright (c) 2010 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.









<span class="grey">Thaler, et al.                Informational                     [Page 1]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  What is the problem? . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-2.1">2.1</a>.  Avoiding Renumbering . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-2.2">2.2</a>.  Site Multihoming . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-2.3">2.3</a>.  Homogenous Edge Network Configurations . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-2.4">2.4</a>.  Network Obfuscation  . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
       <a href="#section-2.4.1">2.4.1</a>.  Hiding Hosts . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
       <a href="#section-2.4.2">2.4.2</a>.  Topology Hiding  . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
       2.4.3.  Summary Regarding NAT as a Tool for Network
               Obfuscation  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-2.5">2.5</a>.  Simple Security  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-2.6">2.6</a>.  Discussion . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-3">3</a>.  Architectural Considerations of IPv6 NAT . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-4">4</a>.  Solution Space . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
     <a href="#section-4.1">4.1</a>.  Discussion . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-5">5</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
   <a href="#section-6">6</a>.  IAB Members at the Time of Approval  . . . . . . . . . . . . . <a href="#page-13">13</a>
   <a href="#section-7">7</a>.  Informative References . . . . . . . . . . . . . . . . . . . . <a href="#page-14">14</a>

<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>.  Introduction</span>

   In the past, the IAB has published a number of documents relating to
   Internet transparency and the end-to-end principle, and other IETF
   documents have also touched on these issues as well.  These documents
   articulate the general principles on which the Internet architecture
   is based, as well as the core values that the Internet community
   seeks to protect going forward.  Most recently, <a href="rfc4924.html">RFC 4924</a> [<a href="rfc4924.html" title="&quot;Reflections on Internet Transparency&quot;">RFC4924</a>]
   reaffirms these principles and provides a review of the various
   documents in this area.

   Facing imminent IPv4 address space exhaustion, recently there have
   been increased efforts in IPv6 deployment.  However, since late 2008
   there have also been increased discussions about whether the IETF
   should standardize network address translation within IPv6.  People
   who are against standardizing IPv6 NAT argue that there is no
   fundamental need for IPv6 NAT, and that as IPv6 continues to roll
   out, the Internet should converge towards reinstallation of the end-
   to-end reachability that has been a key factor in the Internet's
   success.  On the other hand, people who are for IPv6 NAT believe that
   NAT vendors would provide IPv6 NAT implementations anyway as NAT can
   be a solution to a number of problems, and that the IETF should avoid
   repeating the same mistake as with IPv4 NAT, where the lack of
   protocol standards led to different IPv4 NAT implementations, making
   NAT traversal difficult.





<span class="grey">Thaler, et al.                Informational                     [Page 2]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   An earlier effort, [<a href="rfc4864.html" title="&quot;Local Network Protection for IPv6&quot;">RFC4864</a>], provides a discussion of the real or
   perceived benefits of NAT and suggests alternatives for most of them,
   with the intent of showing that NAT is not required to get the
   desired benefits.  However, it also identifies several gaps remaining
   to be filled.

   This document provides the IAB's current thoughts on this debate.  We
   believe that the issue at hand must be viewed from an overall
   architectural standpoint in order to fully assess the pros and cons
   of IPv6 NAT on the global Internet and its future development.

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>.  What is the problem?</span>

   The discussions on the desire for IPv6 NAT can be summarized as
   follows.  Network address translation is viewed as a solution to
   achieve a number of desired properties for individual networks:
   avoiding renumbering, facilitating multihoming, making configurations
   homogenous, hiding internal network details, and providing simple
   security.

<span class="h3"><a class="selflink" name="section-2.1" href="#section-2.1">2.1</a>.  Avoiding Renumbering</span>

   As discussed in <a href="rfc4864.html#section-2.5">[RFC4864], Section&nbsp;2.5</a>, the ability to change service
   providers with minimal operational difficulty is an important
   requirement in many networks.  However, renumbering is still quite
   painful today, as discussed in [<a href="rfc5887.html" title="&quot;Renumbering Still Needs Work&quot;">RFC5887</a>].  Currently it requires
   reconfiguring devices that deal with IP addresses or prefixes,
   including DNS servers, DHCP servers, firewalls, IPsec policies, and
   potentially many other systems such as intrusion detection systems,
   inventory management systems, patch management systems, etc.

   In practice today, renumbering does not seem to be a significant
   problem in consumer networks, such as home networks, where addresses
   or prefixes are typically obtained through DHCP and are rarely
   manually configured in any component.  However, in managed networks,
   renumbering can be a serious problem.

   We also note that many, if not most, large enterprise networks avoid
   the renumbering problem by using provider-independent (PI) IP address
   blocks.  The use of PI addresses is inherent in today's Internet
   operations.  However, in smaller managed networks that cannot get
   provider-independent IP address blocks, renumbering remains a serious
   issue.  Regional Internet Registries (RIRs) constantly receive
   requests for PI address blocks; one main reason that they hesitate in
   assigning PI address blocks to all users is the concern about the PI
   addresses' impact on the routing system scalability.





<span class="grey">Thaler, et al.                Informational                     [Page 3]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


<span class="h3"><a class="selflink" name="section-2.2" href="#section-2.2">2.2</a>.  Site Multihoming</span>

   Another important requirement in many networks is site multihoming.
   A multihomed site essentially requires that its IP prefixes be
   present in the global routing table to achieve the desired
   reliability in its Internet connectivity as well as load balancing.
   In today's practice, multihomed sites with PI addresses announce
   their PI prefixes to the global routing system; multihomed sites with
   provider-allocated (PA) addresses also announce the PA prefix they
   obtained from one service provider to the global routing system
   through another service provider, effectively disabling provider-
   based prefix aggregation.  This practice makes the global routing
   table scale linearly with the number of multihomed user networks.

   This issue was identified in <a href="rfc4864.html#section-6.4">[RFC4864], Section&nbsp;6.4</a>.  Unfortunately,
   no solution except NAT has been deployed today that can insulate the
   global routing system from the growing number of multihomed sites,
   where a multihomed site simply assigns multiple IPv4 addresses (one
   from each of its service providers) to its exit router, which is an
   IPv4 NAT box.  Using address translation to facilitate multihoming
   support has one unique advantage: there is no impact on the routing
   system scalability, as the NAT box simply takes one address from each
   service provider, and the multihomed site does not inject its own
   routes into the system.  Intuitively, it also seems straightforward
   to roll the same solution into multihoming support in the IPv6
   deployment.  However, one should keep in mind that this approach
   brings all the drawbacks of putting a site behind a NAT box,
   including the loss of reachability to the servers behind the NAT box.

   It is also important to point out that a multihomed site announcing
   its own prefix(es) achieves two important benefits that NAT-based
   multihoming support does not provide.  First, end-to-end
   communications can be preserved in face of connectivity failures of
   individual service providers, as long as the site remains connected
   through at least one operational service provider.  Second,
   announcing one's prefixes also gives a multihomed site the ability to
   perform traffic engineering and load balancing.

<span class="h3"><a class="selflink" name="section-2.3" href="#section-2.3">2.3</a>.  Homogenous Edge Network Configurations</span>

   Service providers supporting residential customers need to minimize
   support costs (e.g., help desk calls).  Often a key factor in
   minimizing support costs is ensuring customers have homogenous
   configurations, including the addressing architecture.  Today, when
   IPv4 NATs are provided by a service provider, all customers get the
   same address space on their home networks, and hence the home gateway





<span class="grey">Thaler, et al.                Informational                     [Page 4]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   always has the same address.  From a customer-support perspective,
   this perhaps represents the most important property of NAT usage
   today.

   In IPv6, link-local addresses can be used to ensure that all home
   gateways have the same address, and to provide homogenous addresses
   to any other devices supported by the service provider.  Unlike IPv4,
   having a globally unique address does not prevent the use of a
   homogenous address within the subnet.  It is only in the case of
   multi-subnet customers that IPv6 NAT would provide some homogeneity
   that wouldn't be provided by link-local addresses.  For multi-subnet
   customers (e.g., a customer using a wireless access point behind the
   service provider router/modem), service providers today might only
   discuss problems (for IPv4 or IPv6) from computers connected directly
   to the service provider router.

   It is currently unknown whether IPv6 link-local addresses provide
   sufficient homogeneity to minimize help desk calls.  If they do not,
   providers might still desire IPv6 NATs in the residential gateways
   they provide.

<span class="h3"><a class="selflink" name="section-2.4" href="#section-2.4">2.4</a>.  Network Obfuscation</span>

   Most network administrators want to hide the details of the computing
   resources, information infrastructure, and communications networks
   within their borders.  This desire is rooted in the basic security
   principle that an organization's assets are for its sole use and all
   information about those assets, their operation, and the methods and
   tactics of their use are proprietary secrets.  Some organizations use
   their information and communication technologies as a competitive
   advantage in their industries.  It is a generally held belief that
   measures must be taken to protect those secrets.  The first layer of
   protection of those secrets is preventing access to the secrets or
   knowledge about the secrets whenever possible.  It is understandable
   why network administrators would want to keep the details about the
   hosts on their network, as well as the network infrastructure itself,
   private.  They believe that NAT helps achieve this goal.

<span class="h4"><a class="selflink" name="section-2.4.1" href="#section-2.4.1">2.4.1</a>.  Hiding Hosts</span>

   As a specific measure of network obfuscation, network administrators
   wish to keep secret any and all information about the computer
   systems residing within their network boundaries.  Such computer
   systems include workstations, laptops, servers, function-specific
   end-points (e.g., printers, scanners, IP telephones, point-of-sale
   machines, building door access-control devices), and such.  They want
   to prevent an external entity from counting the number of hosts on
   the network.  They also want to prevent host fingerprinting, i.e.,



<span class="grey">Thaler, et al.                Informational                     [Page 5]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-6" id="page-6" href="#page-6" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   gaining information about the constitution, contents, or function of
   a host.  For example, they want to hide the role of a host, as
   whether it is a user workstation, a finance server, a source code
   build server, or a printer.  A second element of host-fingerprinting
   prevention is to hide details that could aid an attacker in
   compromising the host.  Such details might include the type of
   operating system, its version number, any patches it may or may not
   have, the make and model of the device hardware, any application
   software packages loaded, those version numbers and patches, and so
   on.  With such information about hosts, an attacker can launch a more
   focused, targeted attack.  Operators want to stop both host counting
   and host fingerprinting.

   Where host counting is a concern, it is worth pointing out some of
   the challenges in preventing it.  [<a href="#ref-Bellovin" title="&quot;A Technique for Counting NATted Hosts&quot;">Bellovin</a>] showed how one can
   successfully count the number of hosts behind a certain type of
   simple NAT box.  More complex NAT deployments, e.g., ones employing
   Network Address Port Translators (NAPTs) with a pool of public
   addresses that are randomly bound to internal hosts dynamically upon
   receipt of any new connection, and do so without persistency across
   connections from the same host are more successful in preventing host
   counting.  However, the more complex the NAT deployment, the less
   likely that complex connection types like the Session Initiation
   Protocol (SIP) [<a href="rfc3261.html" title="&quot;SIP: Session Initiation Protocol&quot;">RFC3261</a>] and the Stream Control Transmission Protocol
   (SCTP) [<a href="rfc4960.html" title="&quot;Stream Control Transmission Protocol&quot;">RFC4960</a>] will be able to successfully traverse the NAT.  This
   observation follows the age-old axiom for networked computer systems:
   for every unit of security you gain, you give up a unit of
   convenience, and for every unit of convenience you hope to gain, you
   must give up a unit of security.

   If fields such as fragment ID, TCP initial sequence number, or
   ephemeral port number are chosen in a predictable fashion (e.g.,
   sequentially), then an attacker may correlate packets or connections
   coming from the same host.

   To prevent counting hosts by counting addresses, one might be tempted
   to use a separate IP address for each transport-layer connection.
   Such an approach introduces other architectural problems, however.
   Within the host's subnet, various devices including switches,
   routers, and even the host's own hardware interface often have a
   limited amount of state available before causing communication that
   uses a large number of addresses to suffer significant performance
   problems.  In addition, if an attacker can somehow determine an
   average number of connections per host, the attacker can still
   estimate the number of hosts based on the number of connections
   observed.  Hence, such an approach can adversely affect legitimate
   communication at all times, simply to raise the bar for an attacker.




<span class="grey">Thaler, et al.                Informational                     [Page 6]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-7" id="page-7" href="#page-7" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   Where host fingerprinting is concerned, even a complex NAT cannot
   prevent fingerprinting completely.  The way that different hosts
   respond to different requests and sequences of events will indicate
   consistently the type of a host that it is, its OS, version number,
   and sometimes applications installed, etc.  Products exist that do
   this for network administrators as a service, as part of a
   vulnerability assessment.

   These scanning tools initiate connections of various types across a
   range of possible IP addresses reachable through that network.  They
   observe what returns, and then send follow-up messages accordingly
   until they "fingerprint" the host thoroughly.  When run as part of a
   network assessment process, these tools are normally run from the
   inside of the network, behind the NAT.  If such a tool is set outside
   a network boundary (as part of an external vulnerability assessment
   or penetration test) along the path of packets, and is passively
   observing and recording connection exchanges, over time it can
   fingerprint hosts only if it has a means of determining which
   externally viewed connections are originating from the same internal
   host.  If the NATing is simple and static, and each host's internal
   address is always mapped to the same external address and vice versa,
   the tool has 100% success fingerprinting the host.  With the internal
   hosts mapped to their external IP addresses and fingerprinted, the
   attacker can launch targeted attacks into those hosts, or reliably
   attempt to hijack those hosts' connections.  If the NAT uses a single
   external IP, or a pool of dynamically assigned IP addresses for each
   host, but does so in a deterministic and predictable way, then the
   operation of fingerprinting is more complex, but quite achievable.

   If the NAT uses dynamically assigned addresses, with short-term
   persistency, but no externally learnable determinism, then the
   problem gets harder for the attacker.  The observer may be able to
   fingerprint a host during the lifetime of a particular IP address
   mapping, and across connections, but once that IP mapping is
   terminated, the observer doesn't immediately know which new mapping
   will be that same host.  After much observation and correlation, the
   attacker could sometimes determine if an observed new connection in
   flight is from a familiar host.  With that information, and a good
   set of man-in-the-middle attack tools, the attacker could attempt to
   compromise the host by hijacking a new connection of adequately long
   duration.  If temporal persistency is not deployed on the NAT, then
   this tactic becomes almost impossible.  As the difficulty and cost of
   the attack increases, the number of attackers attempting to employ it
   decreases.  And certainly the attacker would not be able to initiate
   a connection toward a host for which the attacker does not know the
   current IP address binding.  So, the attacker is limited to hijacking
   observed connections thought to be from a familiar host, or to
   blindly initiating attacks on connections in flight.  This is why



<span class="grey">Thaler, et al.                Informational                     [Page 7]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-8" id="page-8" href="#page-8" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   network administrators appreciate complex NATs' ability to deter host
   counting and fingerprinting, but such deterrence comes at a cost of
   host reachability.

<span class="h4"><a class="selflink" name="section-2.4.2" href="#section-2.4.2">2.4.2</a>.  Topology Hiding</span>

   It is perceived that a network operator may want to hide the details
   of the network topology, the size of the network, the identities of
   the internal routers, and the interconnection among the routers.
   This desire has been discussed in [<a href="rfc4864.html" title="&quot;Local Network Protection for IPv6&quot;">RFC4864</a>], Sections <a href="#section-4.4">4.4</a> and <a href="#section-6.2">6.2</a>.

   However, the success of topology hiding is dependent upon the
   complexity, dynamism, and pervasiveness of bindings the NAT employs
   (all of which were described above).  The more complex, the more the
   topology will be hidden, but the less likely that complex connection
   types will successfully traverse the NAT barrier.  Thus, the trade-
   off is reachability across applications.

   Even if one can hide the actual addresses of internal hosts through
   address translation, this does not necessarily prove sufficient to
   hide internal topology.  It may be possible to infer some aspects of
   topological information from passively observing packets.  For
   example, based on packet timing, delay measurements, the Hop Limit
   field, or other fields in the packet header, one could infer the
   relative distance between multiple hosts.  Once an observed session
   is believed to match a previously fingerprinted host, that host's
   distance from the NAT device may be learned, but not its exact
   location or particular internal subnet.

   Host fingerprinting is required in order to do a thorough distance
   mapping.  An attacker might then use message contents to lump certain
   types of devices into logical clusters, and take educated guesses at
   attacks.  This is not, however, a thorough mapping.  Some NATs change
   the TTL hop counts, much like an application-layer proxy would, while
   others don't; this is an administrative setting on more advanced
   NATs.  The simpler and more static the NAT, the more possible this
   is.  The more complex and dynamic and non-persistent the NAT
   bindings, the more difficult.

<span class="h4"><a class="selflink" name="section-2.4.3" href="#section-2.4.3">2.4.3</a>.  Summary Regarding NAT as a Tool for Network Obfuscation</span>

   The degree of obfuscation a NAT can achieve will be a function of its
   complexity as measured by:

   o  The use of one-to-many NAPT mappings;






<span class="grey">Thaler, et al.                Informational                     [Page 8]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-9" id="page-9" href="#page-9" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   o  The randomness over time of the mappings from internal to external
      IP addresses, i.e., non-deterministic mappings from an outsider's
      perspective;

   o  The lack of persistence of mappings, i.e., the shortness of
      mapping lifetimes and not using the same mapping repeatedly;

   o  The use of re-writing in IP header fields such as TTL.

   However, deployers be warned: as obfuscation increases, host
   reachability decreases.  Mechanisms such as STUN [<a href="rfc5389.html" title="&quot;Session Traversal Utilities for NAT (STUN)&quot;">RFC5389</a>] and Teredo
   [<a href="rfc4380.html" title="&quot;Teredo: Tunneling IPv6 over UDP through Network Address Translations (NATs)&quot;">RFC4380</a>] fail with the more complex NAT mechanisms.

<span class="h3"><a class="selflink" name="section-2.5" href="#section-2.5">2.5</a>.  Simple Security</span>

   It is commonly perceived that a NAT box provides one level of
   protection because external hosts cannot directly initiate
   communication with hosts behind a NAT.  However, one should not
   confuse NAT boxes with firewalls.  As discussed in [<a href="rfc4864.html" title="&quot;Local Network Protection for IPv6&quot;">RFC4864</a>], <a href="#section-2.2">Section</a>
   <a href="#section-2.2">2.2</a>, the act of translation does not provide security in itself.  The
   stateful filtering function can provide the same level of protection
   without requiring a translation function.  For further discussion,
   see <a href="rfc4864.html#section-4.2">[RFC4864], Section&nbsp;4.2</a>.

<span class="h3"><a class="selflink" name="section-2.6" href="#section-2.6">2.6</a>.  Discussion</span>

   At present, the primary benefits one may receive from deploying NAT
   appear to be avoiding renumbering, facilitating multihoming without
   impacting routing scalability, and making edge consumer network
   configurations homogenous.

   Network obfuscation (host hiding, both counting and fingerprinting
   prevention, and topology hiding) may well be achieved with more
   complex NATs, but at the cost of losing some reachability and
   application success.  Again, when it comes to security, this is often
   the case: to gain security one must give up some measure of
   convenience.

<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>.  Architectural Considerations of IPv6 NAT</span>

   First, it is important to distinguish between the effects of a NAT
   box vs. the effects of a firewall.  A firewall is intended to prevent
   unwanted traffic [<a href="rfc4948.html" title="&quot;Report from the IAB workshop on Unwanted Traffic March 9-10, 2006&quot;">RFC4948</a>] without impacting wanted traffic, whereas
   a NAT box also interferes with wanted traffic.  In the remainder of
   this section, the term "reachability" is used with respect to wanted
   traffic.





<span class="grey">Thaler, et al.                Informational                     [Page 9]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-10" id="page-10" href="#page-10" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   The discussions on IPv6 NAT often refer to the wide deployment of
   IPv4 NAT, where people have both identified tangible benefits and
   gained operational experience.  However, the discussions so far seem
   mostly focused on the potential benefits that IPv6 NAT may, or may
   not, bring.  Little attention has been paid to the bigger picture, as
   we elaborate below.

   When considering the benefits that IPv6 NAT may bring to a site that
   deploys it, we must not overlook a bigger question: if one site
   deploys IPv6 NAT, what is the potential impact it brings to the rest
   of the Internet that does not do IPv6 NAT?  By "the rest of the
   Internet", we mean the Internet community that develops, deploys, and
   uses end-to-end applications and protocols and hence is affected by
   any loss of transparency (see [<a href="rfc2993.html" title="&quot;Architectural Implications of NAT&quot;">RFC2993</a>] and [<a href="rfc4924.html" title="&quot;Reflections on Internet Transparency&quot;">RFC4924</a>] for further
   discussion).  This important question does not seem to have been
   addressed, or addressed adequately.

   We believe that the discussions on IPv6 NAT should be put in the
   context of the overall Internet architecture.  The foremost question
   is not how many benefits one may derive from using IPv6 NAT, but more
   fundamentally, whether a significant portion of parties on the
   Internet are willing to deploy IPv6 NAT, and hence whether we want to
   make IP address translation a permanent building block in the
   Internet architecture.

   One may argue that the answers to the above questions depend on
   whether we can find adequate solutions to the renumbering, site
   multihoming, and edge network configuration problems, and whether the
   solutions provide transparency or not.  If transparency is not
   provided, making NAT a permanent building block in the Internet would
   represent a fundamental architectural change.

   It is desirable that IPv6 users and applications be able to reach
   each other directly without having to worry about address translation
   boxes between the two ends.  IPv6 application developers in general
   should be able to program based on the assumption of end-to-end
   reachability (of wanted traffic), without having to address the issue
   of traversing NAT boxes.  For example, referrals and multi-party
   conversations are straightforward with end-to-end addressing, but
   vastly complicated in the presence of address translation.
   Similarly, network administrators should be able to run their
   networks without the added complexity of NATs, which can bring not
   only the cost of additional boxes, but also increased difficulties in
   network monitoring and problem debugging.







<span class="grey">Thaler, et al.                Informational                    [Page 10]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-11" id="page-11" href="#page-11" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   Given the diversity of the Internet user populations and the
   diversity in today's operational practice, it is conceivable that
   some parties may have a strong desire to deploy IPv6 NAT, and the
   Internet should accommodate different views that lead to different
   practices (i.e., some using IPv6 NAT, others not).

   If we accept the view that some, but not all, parties want IPv6 NAT,
   then the real debate should not be on what benefits IPv6 NAT may
   bring to the parties who deploy it.  It is undeniable that network
   address translation can bring certain benefits to its users.
   However, the real challenge we should address is how to design IPv6
   NAT in such a way that it can hide its impact within some localized
   scope.  If IPv6 NAT design can achieve this goal, then the Internet
   as a whole can strive for (reinstalling) the end-to-end reachability
   model.

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>.  Solution Space</span>

   From an end-to-end perspective, the solution space for renumbering
   and multihoming can be broadly divided into three classes:


   1.  Endpoints get a stable, globally reachable address: In this class
       of solutions, end sites use provider-independent addressing and
       hence endpoints are unaffected by changing service providers.
       For this to be a complete solution, provider-independent
       addressing must be available to all managed networks (i.e., all
       networks that use manual configuration of addresses or prefixes
       in any type of system).  However, in today's practice, assigning
       provider-independent addresses to all networks, including small
       ones, raises concerns with the scalability of the global routing
       system.  This is an area of ongoing research and experimentation.
       In practice, network administrators have also been developing
       short-term approaches to resolve today's gap between the
       continued routing table growth and limitations in existing router
       capacity [<a href="#ref-NANOG" title="&quot;Extending the Life of Layer 3 Switches in a 256k+ Route World&quot;">NANOG</a>].

   2.  Endpoints get a stable but non-globally-routable address on
       physical interfaces but a dynamic, globally routable address
       inside a tunnel: In this class of solutions, hosts use locally-
       scoped (and hence provider-independent) addresses for
       communication within the site using their physical interfaces.
       As a result, managed systems such as routers, DHCP servers, etc.,
       all see stable addresses.  Tunneling from the host to some
       infrastructure device is then used to communicate externally.
       Tunneling provides the host with globally routable addresses that
       may change, but address changes are constrained to systems that
       operate over or beyond the tunnel, including DNS servers and



<span class="grey">Thaler, et al.                Informational                    [Page 11]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-12" id="page-12" href="#page-12" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


       applications.  These systems, however, are the ones that often
       can already deal with changes today using mechanisms such as DNS
       dynamic update.  However, if endpoints and the tunnel
       infrastructure devices are owned by different organizations, then
       solutions are harder to incrementally deploy due to the incentive
       and coordination issues involved.

   3.  Endpoints get a stable address that gets translated in the
       network: In this class of solutions, end sites use non-globally-
       routable addresses within the site, and translate them to
       globally routable addresses somewhere in the network.  In
       general, this causes the loss of end-to-end transparency, which
       is the subject of [<a href="rfc4924.html" title="&quot;Reflections on Internet Transparency&quot;">RFC4924</a>] and the documents it surveys.  If the
       translation is reversible, and the translation is indeed reversed
       by the time it reaches the other end of communication, then end-
       to-end transparency can be provided.  However, if the two
       translators involved are owned by different organizations, then
       solutions are harder to incrementally deploy due to the incentive
       and coordination issues involved.

   Concerning routing scalability, although there is no immediate
   danger, routing scalability has been a longtime concern in
   operational communities, and an effective and deployable solution
   must be found.  We observe that the question at hand is not about
   whether some parties can run NAT, but rather, whether the Internet as
   a whole would be willing to rely on NAT to curtail the routing
   scalability problem, and whether we have investigated all the
   potential impacts of doing so to understand its cost on the overall
   architecture.  If effective solutions can be deployed in time to
   allow assigning provider-independent IPv6 addresses to all user
   communities, the Internet can avoid the complexity and fragility and
   other unforeseen problems introduced by NAT.

<span class="h3"><a class="selflink" name="section-4.1" href="#section-4.1">4.1</a>.  Discussion</span>

   As [<a href="rfc4924.html" title="&quot;Reflections on Internet Transparency&quot;">RFC4924</a>] states:

      A network that does not filter or transform the data that it
      carries may be said to be "transparent" or "oblivious" to the
      content of packets.  Networks that provide oblivious transport
      enable the deployment of new services without requiring changes to
      the core.  It is this flexibility that is perhaps both the
      Internet's most essential characteristic as well as one of the
      most important contributors to its success.

   We believe that providing end-to-end transparency, as defined above,
   is key to the success of the Internet.  While some fields of traffic
   (e.g., Hop Limit) are defined to be mutable, transparency requires



<span class="grey">Thaler, et al.                Informational                    [Page 12]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-13" id="page-13" href="#page-13" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


   that fields not defined as such arrive un-transformed.  Currently,
   the source and destination addresses are defined as immutable fields,
   and are used as such by many protocols and applications.

   Each of the three classes of solution can be defined in a way that
   preserves end-to-end transparency.

   While we do not consider IPv6 NATs to be desirable, we understand
   that some deployment of them is likely unless workable solutions to
   avoiding renumbering, facilitating multihoming without adversely
   impacting routing scalability, and homogeneity are generally
   recognized as useful and appropriate.

   As such, we strongly encourage the community to consider end-to-end
   transparency as a requirement when proposing any solution, whether it
   be based on tunneling or translation or some other technique.
   Solutions can then be compared based on other aspects such as
   scalability and ease of deployment.

<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>.  Security Considerations</span>

   <a href="#section-2">Section 2</a> discusses potential privacy concerns as part of the Host
   Counting and Topology Hiding problems.

<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>.  IAB Members at the Time of Approval</span>

   Marcelo Bagnulo
   Gonzalo Camarillo
   Stuart Cheshire
   Vijay Gill
   Russ Housley
   John Klensin
   Olaf Kolkman
   Gregory Lebovitz
   Andrew Malis
   Danny McPherson
   David Oran
   Jon Peterson
   Dave Thaler












<span class="grey">Thaler, et al.                Informational                    [Page 13]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-14" id="page-14" href="#page-14" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>.  Informative References</span>

   [<a name="ref-Bellovin" id="ref-Bellovin">Bellovin</a>]  Bellovin, S., "A Technique for Counting NATted Hosts",
               Proc. Second Internet Measurement Workshop,
               November 2002,
               &lt;<a href="http://www.cs.columbia.edu/~smb/papers/fnat.pdf">http://www.cs.columbia.edu/~smb/papers/fnat.pdf</a>&gt;.

   [<a name="ref-NANOG" id="ref-NANOG">NANOG</a>]     "Extending the Life of Layer 3 Switches in a 256k+ Route
               World", NANOG 44, October 2008, &lt;<a href="http://www.nanog.org/meetings/nanog44/presentations/Monday/Roisman_lightning.pdf">http://www.nanog.org/</a>
               <a href="http://www.nanog.org/meetings/nanog44/presentations/Monday/Roisman_lightning.pdf">meetings/nanog44/presentations/Monday/</a>
               <a href="http://www.nanog.org/meetings/nanog44/presentations/Monday/Roisman_lightning.pdf">Roisman_lightning.pdf</a>&gt;.

   [<a name="ref-RFC2993" id="ref-RFC2993">RFC2993</a>]   Hain, T., "Architectural Implications of NAT", <a href="rfc2993.html">RFC 2993</a>,
               November 2000.

   [<a name="ref-RFC3261" id="ref-RFC3261">RFC3261</a>]   Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
               A., Peterson, J., Sparks, R., Handley, M., and E.
               Schooler, "SIP: Session Initiation Protocol", <a href="rfc3261.html">RFC 3261</a>,
               June 2002.

   [<a name="ref-RFC4380" id="ref-RFC4380">RFC4380</a>]   Huitema, C., "Teredo: Tunneling IPv6 over UDP through
               Network Address Translations (NATs)", <a href="rfc4380.html">RFC 4380</a>,
               February 2006.

   [<a name="ref-RFC4864" id="ref-RFC4864">RFC4864</a>]   Van de Velde, G., Hain, T., Droms, R., Carpenter, B., and
               E. Klein, "Local Network Protection for IPv6", <a href="rfc4864.html">RFC 4864</a>,
               May 2007.

   [<a name="ref-RFC4924" id="ref-RFC4924">RFC4924</a>]   Aboba, B. and E. Davies, "Reflections on Internet
               Transparency", <a href="rfc4924.html">RFC 4924</a>, July 2007.

   [<a name="ref-RFC4948" id="ref-RFC4948">RFC4948</a>]   Andersson, L., Davies, E., and L. Zhang, "Report from the
               IAB workshop on Unwanted Traffic March 9-10, 2006",
               <a href="rfc4948.html">RFC 4948</a>, August 2007.

   [<a name="ref-RFC4960" id="ref-RFC4960">RFC4960</a>]   Stewart, R., "Stream Control Transmission Protocol",
               <a href="rfc4960.html">RFC 4960</a>, September 2007.

   [<a name="ref-RFC5389" id="ref-RFC5389">RFC5389</a>]   Rosenberg, J., Mahy, R., Matthews, P., and D. Wing,
               "Session Traversal Utilities for NAT (STUN)", <a href="rfc5389.html">RFC 5389</a>,
               October 2008.

   [<a name="ref-RFC5887" id="ref-RFC5887">RFC5887</a>]   Carpenter, B., Atkinson, R., and H. Flinck, "Renumbering
               Still Needs Work", <a href="rfc5887.html">RFC 5887</a>, May 2010.







<span class="grey">Thaler, et al.                Informational                    [Page 14]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-15" id="page-15" href="#page-15" class="invisible"> </a>
<span class="grey"><a href="rfc5902.html">RFC 5902</a>                 IPv6 NAT Considerations               July 2010</span>


Authors' Addresses

   Dave Thaler
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA  98052
   USA

   Phone: +1 425 703 8835
   EMail: dthaler@microsoft.com


   Lixia Zhang
   UCLA Computer Science Department
   3713 Boelter Hall
   Los Angeles, CA  90095
   USA

   Phone: +1 310 825 2695
   EMail: lixia@cs.ucla.edu


   Gregory Lebovitz
   Juniper Networks, Inc.
   1194 North Mathilda Ave.
   Sunnyvale, CA  94089
   USA

   EMail: gregory.ietf@gmail.com


   Internet Architecture Board

   EMail: iab@iab.org

















Thaler, et al.                Informational                    [Page 15]

</pre><br />
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.129c, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>
</body>

<!-- Mirrored from tools.ietf.org/html/rfc5902 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 12:52:06 GMT -->
</html>
