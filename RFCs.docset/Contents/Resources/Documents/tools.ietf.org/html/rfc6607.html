<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6607 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:27 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6607" name="DC.Identifier"/>
<meta content="This memo defines existing usage for the Virtual Subnet Selection
(VSS) information option. It is intended for use primarily by DHCP
proxy clients in situations where VSS information needs to be passed
to the DHCP server for proper address allocation to take place.  The
option number currently in use is 221. This memo documents the current
usage of the option in agreement with [8], which declares that any
pre-existing usages of option numbers in the range 128 - 223 should be
documented and the working group will try to officially assign those
numbers to those options." name="DC.Description.Abstract"/>
<meta content="Johnson, Richard" name="DC.Creator"/>
<meta content="Kinnear, Kim" name="DC.Creator"/>
<meta content="Stapp, Mark" name="DC.Creator"/>
<meta content="April, 2012" name="DC.Date.Issued"/>
<meta content="Virtual Subnet Selection Options for DHCPv4 and DHCPv6" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6607 - Virtual Subnet Selection Options for DHCPv4 and DHCPv6</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6607.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6607" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-dhc-vpn-option" title="draft-ietf-dhc-vpn-option">draft-ietf-dhc-...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6607" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6607" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6607" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=6607&amp;submit=rfc" title="IPR disclosures related to this document">IPR</a>]   </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                        K. Kinnear
Request for Comments: 6607                                    R. Johnson
Updates: <a href="rfc3046.html">3046</a>                                                   M. Stapp
Category: Standards Track                                  Cisco Systems
ISSN: 2070-1721                                               April 2012


         <span class="h1">Virtual Subnet Selection Options for DHCPv4 and DHCPv6</span>

Abstract

   This memo defines a DHCPv4 Virtual Subnet Selection (VSS) option, a
   DHCPv6 VSS option, and the DHCPv4 VSS and VSS-Control sub-options
   carried in the DHCPv4 Relay Agent Information option.  These are
   intended for use by DHCP clients, relay agents, and proxy clients in
   situations where VSS information needs to be passed to the DHCP
   server for proper address or prefix allocation to take place.

   For the DHCPv4 option and Relay Agent Information sub-options, this
   memo documents and extends existing usage as per <a href="rfc3942.html">RFC 3942</a>.  This memo
   updates <a href="rfc3046.html">RFC 3046</a> regarding details relating to the copying of sub-
   options (see <a href="#section-8">Section 8</a>).

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6607">http://www.rfc-editor.org/info/rfc6607</a>.















<span class="grey">Kinnear, et al.              Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

























<span class="grey">Kinnear, et al.              Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Virtual Subnet Selection Options and Sub-Options: Definitions ...<a href="#page-6">6</a>
      <a href="#section-3.1">3.1</a>. DHCPv4 Virtual Subnet Selection Option .....................<a href="#page-6">6</a>
      <a href="#section-3.2">3.2</a>. DHCPv4 Virtual Subnet Selection Sub-Option .................<a href="#page-6">6</a>
      <a href="#section-3.3">3.3</a>. DHCPv4 Virtual Subnet Selection Control Sub-Option .........<a href="#page-7">7</a>
      <a href="#section-3.4">3.4</a>. DHCPv6 Virtual Subnet Selection Option .....................<a href="#page-7">7</a>
      <a href="#section-3.5">3.5</a>. Virtual Subnet Selection Type and Information ..............<a href="#page-8">8</a>
   <a href="#section-4">4</a>. Overview of Virtual Subnet Selection Usage ......................<a href="#page-8">8</a>
      <a href="#section-4.1">4.1</a>. VPN Assignment by the DHCP Relay Agent .....................<a href="#page-9">9</a>
      <a href="#section-4.2">4.2</a>. VPN Assignment by the DHCP Server .........................<a href="#page-12">12</a>
      <a href="#section-4.3">4.3</a>. Required Support ..........................................<a href="#page-14">14</a>
      <a href="#section-4.4">4.4</a>. Alternative VPN Assignment Approaches .....................<a href="#page-14">14</a>
   <a href="#section-5">5</a>. Relay Agent Behavior ...........................................<a href="#page-15">15</a>
      <a href="#section-5.1">5.1</a>. VPN Assignment by the DHCP Server .........................<a href="#page-16">16</a>
      <a href="#section-5.2">5.2</a>. DHCP Leasequery ...........................................<a href="#page-17">17</a>
   <a href="#section-6">6</a>. Client Behavior ................................................<a href="#page-17">17</a>
   <a href="#section-7">7</a>. Server Behavior ................................................<a href="#page-19">19</a>
      <a href="#section-7.1">7.1</a>. Returning the DHCPv4 or DHCPv6 Option .....................<a href="#page-20">20</a>
      <a href="#section-7.2">7.2</a>. Returning the DHCPv4 Sub-Option ...........................<a href="#page-20">20</a>
      <a href="#section-7.3">7.3</a>. Making Sense of Conflicting VSS Information ...............<a href="#page-21">21</a>
   <a href="#section-8">8</a>. Update to <a href="rfc3046.html">RFC 3046</a> .............................................<a href="#page-22">22</a>
   <a href="#section-9">9</a>. Security Considerations ........................................<a href="#page-22">22</a>
   <a href="#section-10">10</a>. IANA Considerations ...........................................<a href="#page-23">23</a>
   <a href="#section-11">11</a>. Acknowledgments ...............................................<a href="#page-24">24</a>
   <a href="#section-12">12</a>. References ....................................................<a href="#page-25">25</a>
      <a href="#section-12.1">12.1</a>. Normative References .....................................<a href="#page-25">25</a>
      <a href="#section-12.2">12.2</a>. Informative References ...................................<a href="#page-25">25</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   There is a growing use of Virtual Private Network (VPN)
   configurations.  This growth comes from many areas: individual client
   systems needing to appear to be on the home corporate network even
   when traveling, ISPs providing extranet connectivity for customer
   companies, etc.  In some of these cases, there is a need for the DHCP
   server to know the VPN (also called a "Virtual Subnet Selector" or
   "VSS" in this document) from which an address, and other resources,
   should be allocated.

   This memo defines a DHCPv4 Virtual Subnet Selection (VSS) option, a
   DHCPv6 VSS option, and two VSS sub-options carried in the DHCPv4
   Relay Agent Information option.  These are intended for use by DHCP
   clients, relay agents, and proxy clients in situations where VSS
   information needs to be passed to the DHCP server for proper address
   or prefix allocation to take place.  If the receiving DHCP server



<span class="grey">Kinnear, et al.              Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   understands the VSS option or sub-options, this information may be
   used in conjunction with other information in determining the subnet
   on which to select an address, as well as other information such as
   DNS server, default router, etc.

   If the allocation is being done through a DHCPv4 relay, then the
   Relay Agent Information sub-options defined here should be included.
   In some cases, however, an IP address is being sought by a DHCPv4
   proxy on behalf of a client (which may be assigned the address via a
   different protocol).  In this case, there is a need to include VSS
   information relating to the client as a DHCPv4 option.

   If the allocation is being done through a DHCPv6 relay, then the
   DHCPv6 VSS option defined in this document should be included in the
   Relay-forward and Relay-reply messages going between the DHCPv6 relay
   and server.  In some cases, addresses or prefixes are being sought by
   a DHCPv6 proxy on behalf of a client.  In this case, there is a need
   for the client itself to supply the VSS information using the DHCPv6
   VSS option in the messages that it sends to the DHCPv6 server.

   In the remaining text of this document, when a DHCPv6 address is
   indicated, the same information applies to DHCPv6 prefix delegation
   [<a href="rfc3633.html" title='"IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6"'>RFC3633</a>] as well.

   In the remaining text of this document, when the term "VSS
   sub-option" is used, it refers to the VSS sub-option carried in the
   DHCPv4 Relay Agent Information option.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   This document uses the following terms:

   o  DHCP client

      A DHCP client is a host using DHCP to obtain configuration
      parameters such as a network address.

   o  DHCP proxy

      A DHCP proxy is a DHCP client that acquires IP addresses not for
      its own use but rather on behalf of another entity.  There are a
      variety of ways that a DHCP proxy can supply the addresses it
      acquires to other entities that need them.




<span class="grey">Kinnear, et al.              Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   o  DHCP relay agent

      A DHCP relay agent is an agent that transfers BOOTP and DHCP
      messages between clients and servers residing on different
      subnets, per [<a href="rfc951.html" title='"Bootstrap Protocol"'>RFC951</a>], [<a href="rfc1542.html" title='"Clarifications and Extensions for the Bootstrap Protocol"'>RFC1542</a>], and [<a href="rfc3315.html" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>RFC3315</a>].

   o  DHCP server

      A DHCP server is a host that returns configuration parameters to
      DHCP clients.

   o  DHCPv4 option

      A DHCPv4 option is an option used to implement a capability
      defined by the DHCPv4 RFCs ([<a href="rfc2131.html" title='"Dynamic Host Configuration Protocol"'>RFC2131</a>] [<a href="rfc2132.html" title='"DHCP Options and BOOTP Vendor Extensions"'>RFC2132</a>]).  This option has
      one-octet code and size fields.

   o  DHCPv4 sub-option

      As used in this document, a DHCPv4 sub-option refers to a
      sub-option of the Relay Agent Information option [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>].  This
      sub-option has one-octet code and size fields.

   o  DHCPv6 option

      A DHCPv6 option is an option used to implement a capability
      defined by the DHCPv6 RFC [<a href="rfc3315.html" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>RFC3315</a>].  This option has two-octet
      code and size fields.

   o  Global VPN

      This term indicates that the address being described belongs to
      the set of addresses not part of any VPN -- in other words, the
      normal address space operated on by DHCP.  This includes private
      addresses -- for example, the 10.x.x.x addresses as well as the
      other private subnets that are not routed on the open Internet.

   o  NVT ASCII identifier

      A Network Virtual Terminal (NVT) identifier is an identifier
      containing only characters from the ASCII repertoire and using the
      Network Virtual Terminal encoding (see <a href="rfc5198.html#appendix-B">Appendix B of [RFC5198]</a>).

   o  VSS information

      VSS information provides information about a VPN necessary to
      allocate an address to a DHCP client on that VPN and necessary to
      forward a DHCP reply packet to a DHCP client on that VPN.



<span class="grey">Kinnear, et al.              Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   o  VPN

      This term refers to a virtual private network.  A VPN appears to
      the client to be a private network.

   o  VPN identifier

      The VPN-ID is defined by [<a href="rfc2685.html" title='"Virtual Private Networks Identifier"'>RFC2685</a>] to be a sequence of 7 octets.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Virtual%20Subnet%20Selection%20Options%20and%20Sub-Options%3A%20Definitions"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Virtual Subnet Selection Options and Sub-Options: Definitions</span>

   The VSS options and sub-options contain a generalized way to specify
   the VSS information about a VPN.  There are two options and two
   sub-options defined in this section.  The actual VSS information is
   identical for both options and for one of the two sub-options.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20DHCPv4%20Virtual%20Subnet%20Selection%20Option"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  DHCPv4 Virtual Subnet Selection Option</span>

   The format of the option is shown below.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Code      |    Length     |     Type      | VSS Info. ...
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

           Code     The option code (221).

           Length   The option length, minimum 1 octet.

           Type and VSS Information -- see <a href="#section-3.5">Section 3.5</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20DHCPv4%20Virtual%20Subnet%20Selection%20Sub-Option"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  DHCPv4 Virtual Subnet Selection Sub-Option</span>

   This is a sub-option of the Relay Agent Information option [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>].
   The format of the sub-option is shown below.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Code      |    Length     |     Type      | VSS Info. ...
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

           Code     The sub-option code (151).

           Length   The sub-option length, minimum 1 octet.

           Type and VSS Information -- see <a href="#section-3.5">Section 3.5</a>.



<span class="grey">Kinnear, et al.              Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20DHCPv4%20Virtual%20Subnet%20Selection%20Control%20Sub-Option"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  DHCPv4 Virtual Subnet Selection Control Sub-Option</span>

   This is a sub-option of the Relay Agent Information option [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>].
   The format of the sub-option is shown below.

       0                   1
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Code      |    Length     |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Code     The sub-option code (152).

              Length   The sub-option length, 0.

   This sub-option only appears in the DHCPv4 Relay Agent Information
   option.  In a DHCP request, it indicates that a DHCPv4 VSS sub-option
   is also present in the Relay Agent Information option.  In a DHCP
   reply, if it appears in the Relay Agent Information option, it
   indicates that the DHCP server did not understand any DHCPv4 VSS
   sub-option that also appears in the Relay Agent Information option.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.4.%20%20DHCPv6%20Virtual%20Subnet%20Selection%20Option"></a><a class="selflink" href="#section-3.4" name="section-3.4">3.4</a>.  DHCPv6 Virtual Subnet Selection Option</span>

   The format of the DHCPv6 VSS option is shown below.  This option may
   be included by a client or relay agent (or both).

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           OPTION_VSS          |           option-len          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Type    |   VSS Information ...                         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   option-code       OPTION_VSS (68).

   option-len        The number of octets in the option, minimum 1.

   Type and VSS Information -- see <a href="#section-3.5">Section 3.5</a>.











<span class="grey">Kinnear, et al.              Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.5.%20%20Virtual%20Subnet%20Selection%20Type%20and%20Information"></a><a class="selflink" href="#section-3.5" name="section-3.5">3.5</a>.  Virtual Subnet Selection Type and Information</span>

   All of the (sub-)options defined above that carry VSS information use
   identical payloads consisting of a Type value and additional VSS
   information, as follows:

       Type     VSS Information Format
       ------------------------------------------------------------
        0       Network Virtual Terminal (NVT) ASCII VPN identifier
        1       <a href="rfc2685.html">RFC 2685</a> VPN-ID
        2-254   Unassigned
        255     Global, default VPN

   o  Type 0 -- Network Virtual Terminal (NVT) ASCII VPN identifier

      Indicates that the VSS information consists of an NVT ASCII
      string.  It MUST NOT be terminated with a zero byte.

   o  Type 1 -- <a href="rfc2685.html">RFC 2685</a> VPN-ID

      Indicates that the VSS information consists of an <a href="rfc2685.html">RFC 2685</a> VPN-ID
      [<a href="rfc2685.html" title='"Virtual Private Networks Identifier"'>RFC2685</a>], which is defined to be 7 octets in length.

   o  Type 255 -- Global, default VPN

      Indicates that there is no explicit, non-default VSS information
      but rather that this option references the normal, global, default
      address space.  In this case, there MUST NOT be any VSS
      information included in the VSS option or sub-option, and the
      length of the option or sub-option MUST be 1.

   All other values of the Type field are unassigned.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Overview%20of%20Virtual%20Subnet%20Selection%20Usage"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Overview of Virtual Subnet Selection Usage</span>

   At the highest level, the VSS option or sub-option determines the VPN
   on which a DHCP client is supposed to receive an IP address.  How the
   option or sub-option is entered and processed is discussed below, but
   the point of all of the discussion is to determine the VPN on which
   the DHCP client resides.  This will affect a relay agent, in that it
   will have to ensure that DHCP packets sent to and received from the
   DHCP client flow over the correct VPN.  This will affect the DHCP
   server in that it determines the IP address space used for the IP
   address allocation.







<span class="grey">Kinnear, et al.              Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   A DHCP server has as part of its configuration some IP address space
   from which it allocates IP addresses to DHCP clients.  These
   allocations are typically for a limited time, and thus the DHCP
   client gets a lease on the IP address.  In the absence of any VPN
   information, the IP address space is in the global or default VPN
   used throughout the Internet.  When a DHCP server deals with VPN
   information, each VPN defines a new address space inside the server,
   one distinct from the global or default IP address space.  A server
   that supports the VSS option or sub-option thereby supports
   allocation of IP addresses from multiple different VPNs.  Supporting
   IP address allocation from multiple different VPNs means that the
   DHCP server must be prepared to configure multiple different address
   spaces (one per distinct VPN) and allocate IP addresses from these
   different address spaces.

   These address spaces are typically independent, so that the same IP
   address (consisting of the same string of bytes) could be allocated
   to one client in the global, default VPN, and to a different client
   residing in a different VPN.  There is no conflict in this
   allocation, since the clients have essentially different addresses,
   even though these addresses consist of the same string of bytes,
   because the IPv4 or IPv6 address is qualified by the VPN.

   Thus, a VSS option or sub-option is a way of signaling the use of a
   VPN other than the global or default VPN.  This brings up the
   question of who decides what VPN a DHCP client should be using.

   There are three entities that can insert either a VSS option or
   sub-option into a DHCPv4 packet or DHCPv6 message: a DHCP client, a
   relay agent, or a DHCPv4 or DHCPv6 server.  While all of these
   entities could include a different VSS option or sub-option in every
   request or response, this situation is neither typical nor useful.
   There are two known paradigms for use of the VSS option or
   sub-option; these are discussed below.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20VPN%20Assignment%20by%20the%20DHCP%20Relay%20Agent"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  VPN Assignment by the DHCP Relay Agent</span>

   The typical use of the VSS option or sub-option is for the relay
   agent to know the VPN on which the DHCP client is operating.  The
   DHCP client itself does not, in this approach, know the VPN on which
   it resides.  The relay agent is responsible for mediating the access
   between the VPN on which the DHCP client resides and the DHCP server.
   In this situation, the relay agent will insert two DHCPv4
   Relay Agent Information sub-options (one VSS sub-option, and one
   VSS-Control sub-option) into the Relay Agent Information option, or a
   DHCPv6 VSS option into the Relay-forward message of every request it





<span class="grey">Kinnear, et al.              Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   forwards from the DHCP client.  The server will use the DHCPv6 VSS
   option or DHCPv4 VSS sub-option to determine the VPN on which the
   client resides and will use that VPN information to select the
   address space within its configuration from which to allocate an IP
   address to the DHCP client.

   When, using this approach, a DHCPv4 relay agent inserts a VSS
   sub-option into the Relay Agent Information option, it MUST also
   insert a VSS-Control sub-option into the Relay Agent Information
   option.  This is to allow the determination of whether or not the
   DHCPv4 server actually processes the VSS information provided by the
   DHCPv4 relay agent.  If the DHCPv4 server supports the VSS
   capabilities described in this document, it will remove the
   VSS-Control sub-option from the Relay Agent Information option that
   it returns to the DHCPv4 relay agent.  See <a href="#section-5">Section 5</a> for more
   information.

   In this approach, the relay agent might also send a VSS option or
   sub-option in either a DHCPv4 or DHCPv6 Leasequery request [<a href="rfc4388.html" title='"Dynamic Host Configuration Protocol (DHCP) Leasequery"'>RFC4388</a>]
   [<a href="rfc5007.html" title='"DHCPv6 Leasequery"'>RFC5007</a>], but in this case, it would use the VSS option in the
   Leasequery request to select the correct address space for the
   Leasequery.  In this approach, the relay agent would be acting as a
   DHCP client from a leasequery standpoint, but it would not be as if a
   DHCP client were sending in a VSS option in a standard DHCP address
   allocation request, say a DHCPDISCOVER.

   In this approach, only one relay agent would mediate the VPN access
   for the DHCP client to the DHCP server, and it would be the relay
   agent that inserts the VSS information into the request packet and
   that would remove it prior to forwarding the response packet.





















<span class="grey">Kinnear, et al.              Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   The diagram below shows an example of a DHCPv4 client, DHCPv4 relay
   agent, and DHCPv4 server.  The DHCPv6 situation is similar but uses
   the DHCPv6 VSS option.

                                DHCPv4
           DHCPv4               Relay                    DHCPv4
           Client               Agent                    Server

             |                     |                       |
             | &gt;--DHCPDISCOVER--&gt;  |                       |
             |    on VPN "abc"     |                       |
             |                     | &gt;--DHCPDISCOVER----&gt;  |
             |                     |   Relay Agent Info:   |
             |                     |     VSS type 0:"abc"  |
             |                     |     VSS-Control       |
             |                     |                       |
             |                     | &lt;----DHCPOFFER-----&lt;  |
             |                     |   Relay Agent Info:   |
             |                     |     VSS type 0:"abc"  |
             |                     |                       |
             | &lt;---DHCPOFFER----&lt;  |                       |
             |    on VPN "abc"     |                       |
             |                     |                       |
             | &gt;--DHCPREQUEST---&gt;  |                       |
             |    on VPN "abc"     |                       |
             |                     | &gt;--DHCPREQUEST-----&gt;  |
             |                     |   Relay Agent Info:   |
             |                     |     VSS type 0:"abc"  |
             |                     |     VSS-Control       |
             |                     |                       |
             |                     | &lt;----DHCPACK-------&lt;  |
             |                     |   Relay Agent Info:   |
             |                     |     VSS type 0:"abc"  |
             |                     |                       |
             | &lt;---DHCPACK------&lt;  |                       |
             |    on VPN "abc"     |                       |
             |                     |                       |
            ...                   ...                     ...

               Figure 4.1-1:  DHCPv4 - Relay Agent Knows VPN

   The DHCP server would know that it should respond to VPN information
   specified in a VSS option or sub-option, and it would be configured
   with appropriate VPN address spaces to service the projected client
   requirements.  Thus, in this common approach, the DHCP client knows
   nothing of any VPN access, the relay agent has been configured in
   some way that allows it to determine the VPN of the DHCP client and
   transmit that using a VSS option or sub-option to the DHCP server,



<span class="grey">Kinnear, et al.              Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   and the DHCP server responds to the VPN specified by the relay agent.
   There is no conflict between different entities trying to specify
   different VSS information -- each entity knows its role through
   policy or configuration external to this document.

   If any misconfiguration exists, it SHOULD result in a DHCP client
   being unable to acquire an IP address.  For instance, a relay agent
   that supports VPN access SHOULD couple transmission of VSS options or
   sub-options to the configuration of VPN support and not allow one
   without the other.

   It is important to ensure that the relay agent and DHCP server both
   support the VSS option and sub-options (for DHCPv4) or the VSS option
   (for DHCPv6).  Deploying DHCPv4 relay agents that support and emit
   VSS sub-options in concert with DHCPv4 servers that do not support
   the VSS option or sub-option as defined in this document SHOULD NOT
   be done, as such an ensemble will not operate correctly.  Should this
   situation occur, however, the relay agent can detect the problem
   (since the VSS-Control sub-option will appear in the packets it
   receives from the DHCPv4 server, indicating the server did not
   effectively process the VSS sub-option), and it can issue appropriate
   diagnostic messages.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20VPN%20Assignment%20by%20the%20DHCP%20Server"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  VPN Assignment by the DHCP Server</span>

   In this approach, the DHCP server would be configured in some way to
   know the VPN on which a particular DHCP client should be given
   access.  The DHCP server would in this case include the VSS
   sub-option in the Relay Agent Information option for DHCPv4 or the
   VSS option in the Relay-reply message for DHCPv6.  The relay agent
   responsible for mediating VPN access would use this information to
   select the correct VPN for the DHCP client.  In the unusual event
   that there were more than one relay agent involved in this
   transaction, some external configuration or policy would be needed to
   inform the DHCPv6 server into which Relay-reply message the VSS
   option should go.

   Once the relay agent has placed the DHCP client into the proper VPN,
   it SHOULD begin including VSS information in requests that it
   forwards to the DHCP server.  Since this information does not
   conflict with the DHCP server's idea of the proper VPN for the
   client, everything works correctly.









<span class="grey">Kinnear, et al.              Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   The diagram below shows this approach using DHCPv4.  The DHCPv6
   situation is similar but uses the DHCPv6 VSS option instead.

                                DHCPv4
           DHCPv4               Relay                    DHCPv4
           Client               Agent                    Server

             |                     |                       |
             | &gt;--DHCPDISCOVER--&gt;  |                       |
             |    on unknown VPN   |                       |
             |                     | &gt;--DHCPDISCOVER----&gt;  |
             |                     |                       |
             |                     | &lt;----DHCPOFFER-----&lt;  |
             |                     |   Relay Agent Info:   |
             |                     |     VSS type 0:"abc"  |
             |                     |                       |
             | &lt;---DHCPOFFER----&lt;  |                       |
             |    on VPN "abc"     |                       |
             |                     |                       |
             | &gt;--DHCPREQUEST---&gt;  |                       |
             |    on VPN "abc"     |                       |
             |                     | &gt;--DHCPREQUEST-----&gt;  |
             |                     |   Relay Agent Info:   |
             |                     |     VSS type 0:"abc"  |
             |                     |     VSS-Control       |
             |                     |                       |
             |                     | &lt;----DHCPACK-------&lt;  |
             |                     |   Relay Agent Info:   |
             |                     |     VSS type 0:"abc"  |
             |                     |                       |
             | &lt;---DHCPACK------&lt;  |                       |
             |    on VPN "abc"     |                       |
             |                     |                       |
             |                     |                       |
            ...                   ...                     ...

              Figure 4.2-1:  DHCPv4 - DHCPv4 Server Knows VPN

   In this approach, the DHCP client is again unaware of any VPN
   activity.  In this case, however, the DHCP server knows the VPN for
   the client, and the relay agent responds to the VSS information
   specified by the DHCP server.  Similar to the previous approach, each
   entity knows its role through a means external to this document, and
   no two entities try to specify VSS information in conflict.







<span class="grey">Kinnear, et al.              Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   It is important that both the relay agent and the DHCP server support
   the VSS option and sub-options (for DHCPv4) and the VSS option (for
   DHCPv6).  Deploying and configuring VPN support in one element and
   not in the other is not a practical approach.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Required%20Support"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Required Support</span>

   DHCP relay agents and servers MUST support the approach discussed in
   <a href="#section-4.1">Section 4.1</a>.  DHCP relay agents and servers SHOULD support the
   approach discussed in <a href="#section-4.2">Section 4.2</a>.  DHCP relay agents and servers
   SHOULD NOT be configured to operate with both approaches
   simultaneously.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Alternative%20VPN%20Assignment%20Approaches"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Alternative VPN Assignment Approaches</span>

   There are many other approaches that can be created with multiple
   relay agents each inserting VSS information into different
   Relay-forward messages, relay agent VSS information conflicting with
   client VSS information, or DHCP server VSS information conflicting
   with relay agent and client VSS information.  Since these approaches
   do not describe situations that are useful today, specifying
   precisely how to resolve all of these conflicts is not likely to be
   valuable in the event that these approaches actually become practical
   in the future.

   The current use of the VSS option and sub-option requires that each
   entity know the part that it plays in dealing with VPN data.  Each
   entity -- client, relay agent or agents, and server -- SHOULD know
   through some policy or configuration beyond the scope of this
   document whether it is responsible for specifying VPN information
   using the VSS option or sub-option or responsible for responding to
   VSS information specified by another entity, or whether it should
   simply ignore any VSS information that it might see.

   Some simple conflict-resolution approaches are discussed below, in
   the hopes that they will cover simple cases that may arise from
   situations beyond those envisioned today.  However, for more complex
   situations, or simple situations where appropriate conflict-
   resolution strategies differ from those discussed in this document, a
   document detailing the usage situations and appropriate conflict-
   resolution strategies SHOULD be created and submitted for discussion
   and approval.









<span class="grey">Kinnear, et al.              Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Relay%20Agent%20Behavior"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Relay Agent Behavior</span>

   Implementers MAY provide a policy or configuration capability to
   enable or disable VSS support.

   A relay agent that receives a DHCP request from a DHCP client on a
   VPN SHOULD include VSS information in the DHCP packet prior to
   forwarding the packet to the DHCP server unless inhibited from doing
   so by configuration information or policy to the contrary.

   In this situation, a DHCPv4 relay agent MUST include a DHCPv4 VSS
   sub-option in a Relay Agent Information option [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>], while a
   DHCPv6 relay agent MUST include a DHCPv6 VSS option in the
   Relay-forward message.

   The value placed in the VSS sub-option or option would typically be
   sufficient for the relay agent to properly route any DHCP reply
   packet returned from the DHCP server to the DHCP client for which it
   is destined.  In some cases, the information in the VSS sub-option or
   option might be an index to some internal table held in the relay
   agent, though this document places no requirement on a relay agent to
   have any such internal state.

   A DHCPv4 relay agent MUST, in addition, include a DHCPv4 VSS-Control
   sub-option (which has a length of zero) in the
   Relay Agent Information option [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>] whenever it includes a VSS
   sub-option in the Relay Agent Information option.  The inclusion of
   the VSS sub-option and the VSS-Control sub-option in the
   Relay Agent Information option will allow the DHCPv4 relay agent to
   determine whether the DHCPv4 server actually processed the
   information in the VSS sub-option when it receives the
   Relay Agent Information option in the reply from the DHCPv4 server.

   The reason to include this additional VSS DHCPv4 sub-option is that
   [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>] specifies (essentially) that a DHCPv4 server should copy
   all sub-options that it receives in a Relay Agent Information option
   in a request into a corresponding Relay Agent Information option in
   the response.  Thus, a server that didn't support the DHCPv4 VSS
   sub-option would normally just copy it to the response packet,
   leaving the relay agent to wonder if in fact the DHCPv4 server
   actually used the VSS information when processing the request.

   To alleviate this potential confusion, a DHCPv4 relay agent instead
   sends in two sub-options: one VSS sub-option, and one VSS-Control
   sub-option.  If both sub-options appear in the response from the
   DHCPv4 server, then the DHCPv4 relay agent MUST assume that the
   DHCPv4 server did not act on the VSS information in the VSS
   sub-option.  If only the VSS sub-option appears in the response from



<span class="grey">Kinnear, et al.              Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   the DHCPv4 server and no VSS-Control sub-option appears in the
   response from the DHCPv4 server, then the relay agent SHOULD assume
   that the DHCPv4 server acted successfully on the VSS sub-option.

   Any time a relay agent places a VSS option or sub-option in a DHCP
   request, it SHOULD send it only to a DHCP server that supports the
   VSS option or sub-option, and it MUST check the response to determine
   if the DHCP server actually honored the requested VSS information.

   In the DHCPv6 case, the appearance of the option in the Relay-reply
   packet indicates that the DHCPv6 server understood and acted upon the
   contents of the VSS option in the Relay-forward packet.  In the
   DHCPv4 case, as discussed above, the appearance of the VSS sub-option
   without the appearance of a VSS-Control sub-option indicates that the
   DHCPv4 server successfully acted upon the VSS sub-option.

   This document does not create a requirement that a relay agent
   remember the contents of a VSS DHCPv4 sub-option or VSS DHCPv6 option
   sent to a DHCP server.  In many cases, the relay agent may simply use
   the value of the VSS option or sub-option returned by the DHCP server
   to forward the response to the DHCP client.  If the VSS information,
   the IP address allocated, and the VPN capabilities of the relay agent
   all interoperate correctly, then the DHCP client will receive a
   working IP address.  Alternatively, if any of these items don't
   interoperate with the others, the DHCP client will not receive a
   working address.

   Note that in some environments a relay agent may choose to always
   place a VSS option or sub-option into packets and messages that it
   forwards in order to forestall any attempt by a relay agent closer to
   the client or the client itself to specify VSS information.  In this
   case, a Type field of 255 is used to denote the global, default VPN.
   When the Type field of 255 is used, there MUST NOT be any additional
   VSS information in the VSS option or sub-option.  In the DHCPv4 case,
   an additional VSS-Control sub-option would be required, as discussed
   above.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20VPN%20Assignment%20by%20the%20DHCP%20Server"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  VPN Assignment by the DHCP Server</span>

   In some cases, a DHCP server may use the VSS sub-option or option to
   inform a relay agent that a particular DHCP client is associated with
   a particular VPN.  It does this by sending the VSS sub-option or
   option with the appropriate information to the relay agent in the
   Relay Agent Information option for DHCPv4 or the Relay-reply message
   in DHCPv6.  If the relay agent cannot respond correctly to the DHCP
   server's requirement to place the DHCP client into that VPN (perhaps





<span class="grey">Kinnear, et al.              Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   because it has not been configured with a VPN that matches the VSS
   information received from the DHCP server), it MUST drop the packet
   and not send it to the DHCP client.

   In this situation, once the relay agent has placed the DHCP client
   into the VPN specified by the DHCP server, it will insert a VSS
   option or sub-option when forwarding packets from the client.  The
   DHCP server in normal operation will echo this VSS information into
   the outgoing replies.

   In the event that the relay agent doesn't include VSS information on
   subsequent requests after the DHCP server has included VSS
   information in a reply to the relay agent, the DHCP server can
   conclude that the relay agent doesn't support VSS processing, and the
   DHCP server SHOULD stop processing this transaction and not respond
   to the request.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20DHCP%20Leasequery"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  DHCP Leasequery</span>

   A relay agent sometimes needs to submit a DHCP Leasequery [<a href="rfc4388.html" title='"Dynamic Host Configuration Protocol (DHCP) Leasequery"'>RFC4388</a>]
   [<a href="rfc5007.html" title='"DHCPv6 Leasequery"'>RFC5007</a>] packet to the DHCP server in order to recover information
   about existing DHCP-allocated IP addresses on networks other than the
   normal, global VPN.  In the context of a DHCP Leasequery, the relay
   agent is a direct client of the DHCP server and is not relaying a
   packet for another DHCP client.  Thus, the instructions in <a href="#section-6">Section 6</a>
   ("Client Behavior") should be followed to include the necessary VSS
   information.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Client%20Behavior"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Client Behavior</span>

   Typically, DHCPv4 and DHCPv6 clients have no interaction with VSS
   options or sub-options.  The VSS information is handled by exchanges
   between a DHCPv4 or DHCPv6 relay agent and the corresponding DHCPv4
   or DHCPv6 server.

   However, there are times when an entity is acting as a DHCPv4 or
   DHCPv6 client in that it is communicating directly with a DHCPv4 or
   DHCPv6 server.  In these instances -- where communication is
   occurring without employing the DHCPv4 Relay Agent Information option
   or the DHCPv6 Relay-forward or Relay-reply messages -- the entity is
   acting as a DHCPv4 or DHCPv6 client with regard to its communication
   with the DHCPv4 or DHCPv6 server, but not necessarily as a DHCP
   client that is requesting a DHCPv4 or DHCPv6 address for its own use.

   The client, in this context, may be requesting an IP address for
   another entity, thus acting as a DHCP proxy.  The client may be
   requesting information about another client-to-address binding, using
   the DHCPv4 [<a href="rfc4388.html" title='"Dynamic Host Configuration Protocol (DHCP) Leasequery"'>RFC4388</a>] or DHCPv6 [<a href="rfc5007.html" title='"DHCPv6 Leasequery"'>RFC5007</a>] leasequery protocol.



<span class="grey">Kinnear, et al.              Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   In the rest of this section, the term "client" refers to an entity
   communicating VSS information directly to a DHCPv4 or DHCPv6 server
   without using the DHCPv4 Relay Agent Information option or the DHCPv6
   Relay-forward or Relay-reply messages, and there is no requirement
   that such a client be a traditional DHCPv4 or DHCPv6 client
   requesting an IP address binding for itself.

   DHCPv4 or DHCPv6 clients will employ the VSS option to communicate
   VSS information to their respective servers.  This information MUST
   be included in every message concerning any IP address on a different
   VPN than the global or default VPN.  A DHCPv4 client will place the
   DHCPv4 VSS option in its packets, and a DHCPv6 client will place the
   DHCPv6 VSS option in its messages.

   A DHCPv6 client that needs to place a VSS option into a DHCPv6
   message SHOULD place a single VSS option into the DHCPv6 message at
   the same level as the Client Identifier option.  A DHCPv6 client MUST
   NOT include different VSS options in the same DHCPv6 message.

   Note that -- as mentioned in <a href="#section-1">Section 1</a> -- throughout this document,
   when a DHCPv6 address is indicated, the same information applies to
   DHCPv6 prefix delegation [<a href="rfc3633.html" title='"IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6"'>RFC3633</a>] as well.

   Since this option is placed in the packet in order to change the VPN
   on which an IP address is allocated for a particular DHCP client, one
   presumes that an allocation on that VPN is necessary for correct
   operation.  Thus, a client that places this option in a packet and
   doesn't receive it or receives a different value in a returning
   packet SHOULD drop the packet, since the IP address that was
   allocated will not be in the requested VPN.

   Clients should be aware that some DHCP servers will return a VSS
   option with different values than the values sent by the client.  In
   addition, a client may receive a response from a DHCP server with a
   VSS option when none was sent by the client.

   Note that when sending a DHCP Leasequery request, a relay agent is
   acting as a DHCP client, and so it SHOULD include the respective
   DHCPv4 or DHCPv6 VSS option in its DHCPv4 or DHCPv6 Leasequery packet
   if the DHCP Leasequery request is generated for other than the
   default, global VPN.  It SHOULD NOT include a DHCPv4 sub-option in
   this case.









<span class="grey">Kinnear, et al.              Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Server%20Behavior"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Server Behavior</span>

   A DHCP server receiving the VSS option or sub-option SHOULD allocate
   an IP address (or use the VSS information to access an already
   allocated IP address) from the VPN specified by the included VSS
   information.

   In the case where the Type field of the VSS option or sub-option is
   255, the VSS option denotes the global, default VPN.  In this case,
   there is no explicit VSS information beyond the Type field.

   This document does not prescribe any particular address allocation
   policy.  A DHCP server may choose to attempt to allocate an address
   using the VSS information and, if this is impossible, to not allocate
   an address.  Alternatively, a DHCP server may choose to attempt
   address allocation based on the VSS information and, if that is not
   possible, it may fall back to allocating an address on the global or
   default VPN.  This, of course, is also the apparent behavior of any
   DHCP server that doesn't implement support for the VSS option and
   sub-option.  Thus, DHCP clients and relay agents SHOULD be prepared
   for either of these alternatives.

   In some cases, a DHCP server may use the VSS sub-option or option to
   inform a relay agent that a particular DHCP client is associated with
   a particular VPN.  It does this by sending the VSS sub-option or
   option with the appropriate information to the relay agent in the
   Relay Agent Information option for DHCPv4 or the Relay-reply message
   in DHCPv6.

   In this situation, the relay agent will place the client in the
   proper VPN, and then it will insert a VSS option or sub-option in
   subsequent forwarded requests.  The DHCP server will see this VSS
   information, and since it doesn't conflict in any way with the
   server's notion of the VPN on which the client is supposed to reside,
   it will process the requests based on the VPN specified in the VSS
   option or sub-option, and echo the same VSS information in the
   outgoing replies.

   The relay agent receiving a reply containing a VSS option should
   support the VSS option.  Otherwise, the relay agent will end up
   attempting to use the address as though it were a global address.
   Should this happen, the subsequent DHCPREQUEST will not contain any
   VSS information, in which case the DHCP server SHOULD NOT respond
   with a DHCPACK.







<span class="grey">Kinnear, et al.              Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   If a server uses a different VPN than what was specified in the VSS
   option or sub-option, it SHOULD send back the VPN information using
   the same type as the received type.  It MAY send back a different
   type if it is not possible to use the same type (such as the <a href="rfc2685.html">RFC2685</a>
   VPN-ID if no ASCII VPN identifier exists).

   A server that receives a VSS sub-option in the DHCPv4
   Relay Agent Information option and does not receive a VSS-Control
   sub-option in the Relay Agent Information option MUST process the
   information specified in the VSS sub-option in the same fashion as it
   would have if it received both sub-options.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Returning%20the%20DHCPv4%20or%20DHCPv6%20Option"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Returning the DHCPv4 or DHCPv6 Option</span>

   DHCPv4 or DHCPv6 servers receiving a VSS option (for sub-option
   processing, see below) MUST return an instance of this option in the
   reply packet or message if the server successfully uses this option
   to allocate an IP address, and it MUST NOT include an instance of
   this option if the server is unable to support, is not configured to
   support, or does not implement support for VSS information in general
   or the requested VPN in particular.

   If they echo the option (based on the criteria above), servers SHOULD
   return an exact copy of the option unless they desire to change the
   VPN on which a client was configured.

   The appearance of the DHCPv4 VSS option code in the DHCPv4 Parameter
   Request List option [<a href="rfc2132.html" title='"DHCP Options and BOOTP Vendor Extensions"'>RFC2132</a>] should not change the processing or
   decision to return or not return the VSS option as specified in this
   document.  The appearance of the DHCPv6 VSS option in the OPTION_ORO
   [<a href="rfc3315.html" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>RFC3315</a>] or the OPTION_ERO [<a href="rfc4994.html" title='"DHCPv6 Relay Agent Echo Request Option"'>RFC4994</a>] should not change the
   processing or decision to return (or not to return) the VSS option as
   specified in this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Returning%20the%20DHCPv4%20Sub-Option"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Returning the DHCPv4 Sub-Option</span>

   The case of the DHCPv4 sub-option is a bit more complicated.  Note
   that [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>] specifies that a DHCPv4 server that supports the
   Relay Agent Information option SHALL copy all sub-options received in
   a Relay Agent Information option into any outgoing
   Relay Agent Information option.  Thus, the default behavior for any
   DHCPv4 server is to return any VSS sub-option received to the relay
   agent whether or not the DHCPv4 server understands the VSS
   sub-option.

   In order to distinguish a DHCPv4 server that is simply copying
   Relay Agent Information option sub-options from an incoming to an
   outgoing Relay Agent Information option from a DHCPv4 server that



<span class="grey">Kinnear, et al.              Standards Track                   [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   successfully acted upon the information in the VSS sub-option, DHCPv4
   relay agents MUST include a VSS-Control sub-option in the
   Relay Agent Information any time that it includes a VSS sub-option in
   the Relay Agent Information option.

   A DHCPv4 server that does not support the VSS sub-option will copy
   both sub-options into the outgoing Relay Agent Information option,
   thus signaling to the DHCPv4 relay agent that it did not understand
   the VSS sub-option.

   A DHCPv4 server that supports the VSS sub-option

   o  MUST copy the VSS sub-option into the outgoing
      Relay Agent Information option

   o  MUST NOT copy the VSS-Control sub-option into the outgoing
      Relay Agent Information option

   Moreover, if a server uses different VSS information to allocate an
   IP address than it receives in a particular DHCPv4 sub-option, it
   MUST include that alternative VSS information in the VSS sub-option
   that it returns to the DHCPv4 relay agent instead of the original VSS
   information it was given.

   If a DHCPv4 server supports this sub-option and for some reason
   (perhaps administrative control) does not honor this sub-option from
   the request, then it MUST NOT echo either sub-option into the
   outgoing Relay Agent Information option.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.3.%20%20Making%20Sense%20of%20Conflicting%20VSS%20Information"></a><a class="selflink" href="#section-7.3" name="section-7.3">7.3</a>.  Making Sense of Conflicting VSS Information</span>

   It is possible for a DHCPv4 server to receive both a VSS option and
   VSS sub-options in the same packet.  Likewise, a DHCPv6 server can
   receive multiple VSS options in nested Relay-forward messages as well
   as in the client message itself.  In either of these cases, the VSS
   information from the relay agent closest to the DHCP server SHOULD be
   used in preference to all other VSS information received.  In the
   DHCPv4 case, this means that the VSS sub-option takes precedence over
   the VSS option, and in the DHCPv6 case, this means that the VSS
   option from the outermost Relay-forward message in which a VSS option
   appears takes precedence.

   The reasoning behind this approach is that the relay agent closer to
   the DHCP server is almost certainly more trusted than the DHCP client
   or more distant relay agents, and therefore information in the
   Relay Agent Information option or the Relay-forward message is more
   likely to be correct.




<span class="grey">Kinnear, et al.              Standards Track                   [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   In general, relay agents SHOULD be aware through configuration or
   policy external to this document whether or not they should be
   including VSS information in packets that they forward, and so these
   relay agents should not specify any conflicting VSS information.

   In situations where multiple VSS options or sub-options appear in the
   incoming packet or message, when the DHCP server constructs the
   response to be sent to the DHCP client or relay agent, all existing
   VSS options or sub-options MUST be replicated in the appropriate
   places in the response and MUST contain only the VSS information that
   was used by the DHCP server to allocate the IP address (with, of
   course, the exception of a VSS-Control sub-option of a DHCPv4
   Relay Agent Information option).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Update%20to%20RFC%203046"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Update to <a href="rfc3046.html">RFC 3046</a></span>

   This document updates the specification of the
   Relay Agent Information option in <a href="rfc3046.html#section-2.2">Section 2.2 of RFC 3046</a>, in the
   first sentence of the second paragraph, as follows:

   o  OLD:

      DHCP servers claiming to support the Relay Agent Information
      option SHALL echo the entire contents of the Relay Agent
      Information option in all replies.

   o  NEW:

      DHCP servers claiming to support the Relay Agent Information
      option SHALL echo the entire contents of the
      Relay Agent Information option in all replies, except if otherwise
      specified in the definition of specific Relay Agent Information
      sub-options.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   Message authentication in DHCPv4 for intradomain use where the out-
   of-band exchange of a shared secret is feasible is defined in
   [<a href="rfc3118.html" title='"Authentication for DHCP Messages"'>RFC3118</a>].  Potential exposures to attack are discussed in <a href="#section-7">Section 7</a>
   of the DHCP protocol specification [<a href="rfc2131.html" title='"Dynamic Host Configuration Protocol"'>RFC2131</a>].

   Implementations should consider using the DHCPv4 Authentication
   option [<a href="rfc3118.html" title='"Authentication for DHCP Messages"'>RFC3118</a>] to protect DHCPv4 client access in order to provide
   a higher level of security if it is deemed necessary in their
   environment.






<span class="grey">Kinnear, et al.              Standards Track                   [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   Message authentication in DHCPv4 relay agents as defined in [<a href="rfc4030.html" title='"The Authentication Suboption for the Dynamic Host Configuration Protocol (DHCP) Relay Agent Option"'>RFC4030</a>]
   should be considered for DHCPv4 relay agents employing the
   sub-options defined in this document.  Potential exposures to attack
   are discussed in <a href="#section-7">Section 7</a> of the DHCP protocol specification
   [<a href="rfc2131.html" title='"Dynamic Host Configuration Protocol"'>RFC2131</a>].

   For use of the VSS option by DHCPv6, the Security Considerations
   section of [<a href="rfc3315.html" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>RFC3315</a>] details the general threats to DHCPv6, and thus
   to messages using the VSS option.  The "Authentication of DHCP
   Messages" section of [<a href="rfc3315.html" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>RFC3315</a>] describes securing communication
   between relay agents and servers, as well as clients and servers.

   The VSS option could be used by a client in order to obtain an IP
   address from any VPN.  This option would allow a client to perform a
   more complete address-pool exhaustion attack, since the client would
   no longer be restricted to attacking address pools on just its local
   subnet.

   A DHCP server that implements these VSS options and the VSS
   sub-option should be aware of this possibility and use whatever
   techniques can be devised to prevent such an attack.  Information
   such as the giaddr in DHCPv4 or link address in the Relay-forward
   DHCPv6 message might be used to detect and prevent this sort of
   attack.

   One possible defense would be for the DHCP relay agent to insert a
   VSS option or sub-option to override the DHCP client's VSS option.

   Servers that implement the VSS option and sub-option MUST by default
   disable use of the feature; it must specifically be enabled through
   configuration.  Moreover, a server SHOULD provide the ability to
   selectively enable use of the feature under restricted conditions,
   e.g., by enabling use of the option only from explicitly configured
   client-ids, enabling its use only by clients on a particular subnet,
   or restricting the VSSs from which addresses may be requested.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  IANA Considerations</span>

   IANA has assigned DHCPv4 option number 221 to the DHCPv4 Virtual
   Subnet Selection option defined in <a href="#section-3.1">Section 3.1</a>, in accordance with
   [<a href="rfc3942.html" title='"Reclassifying Dynamic Host Configuration Protocol version 4 (DHCPv4) Options"'>RFC3942</a>].

   IANA has assigned sub-option number 151 to the DHCPv4 Virtual Subnet
   Selection sub-option defined in <a href="#section-3.2">Section 3.2</a> from the DHCP Relay Agent
   Sub-options space [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>], in accordance with the spirit of
   [<a href="rfc3942.html" title='"Reclassifying Dynamic Host Configuration Protocol version 4 (DHCPv4) Options"'>RFC3942</a>].  While [<a href="rfc3942.html" title='"Reclassifying Dynamic Host Configuration Protocol version 4 (DHCPv4) Options"'>RFC3942</a>] doesn't explicitly mention the sub-option
   space for the DHCP Relay Agent Information option [<a href="rfc3046.html" title='"DHCP Relay Agent Information Option"'>RFC3046</a>],




<span class="grey">Kinnear, et al.              Standards Track                   [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   sub-option 151 is already in use by existing implementations of this
   sub-option, and this document is essentially upward-compatible with
   these current implementations.

   IANA has assigned the value of 152 to the DHCPv4 Virtual Subnet
   Selection Control sub-option defined in <a href="#section-3.3">Section 3.3</a>.

   IANA has assigned the value of 68 for the DHCPv6 Virtual Subnet
   Selection option defined in <a href="#section-3.4">Section 3.4</a> from the DHCP Option Codes
   registry.

   The Type byte defined in <a href="#section-3.5">Section 3.5</a> defines a number space for which
   IANA has created and will maintain a new sub-registry entitled "VSS
   Type Options".  This sub-registry needs to be related to both the
   DHCPv4 and DHCPv6 VSS options and the DHCPv4 Relay Agent Information
   option sub-option (all defined by this document), since the Type byte
   in these two options and the VSS sub-option MUST have identical
   definitions.

   New values for the Type byte may only be defined by IETF Review, as
   described in [<a href="rfc5226.html" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC5226</a>].  Basically, this means that they are defined
   by RFCs approved by the IESG.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Acknowledgments"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Acknowledgments</span>

   Jay Kumarasamy contributed to earlier versions of this document.
   Bernie Volz recommended consolidation of the DHCPv4 option and
   sub-option documents after extensive review of those former
   documents, and provided valuable assistance in structuring and
   reviewing this document.  Alper Yegin expressed interest in the
   DHCPv6 VSS option, resulting in this combined document covering all
   three areas.  Alfred Hoenes provided assistance with editorial review
   and also raised substantive protocol issues.  David Hankins and
   Bernie Volz each raised important protocol issues that resulted in a
   clarified document.  Josh Littlefield provided editorial assistance.
   Several IESG reviewers took the time to substantially review this
   document, resulting in much-improved clarity.














<span class="grey">Kinnear, et al.              Standards Track                   [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20References"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.1.%20%20Normative%20References"></a><a class="selflink" href="#section-12.1" name="section-12.1">12.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]   Bradner, S., "Key words for use in RFCs to Indicate
               Requirement Levels", <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2131" name="ref-RFC2131">RFC2131</a>]   Droms, R., "Dynamic Host Configuration Protocol",
               <a href="rfc2131.html">RFC 2131</a>, March 1997.

   [<a id="ref-RFC2132" name="ref-RFC2132">RFC2132</a>]   Alexander, S. and R. Droms, "DHCP Options and BOOTP
               Vendor Extensions", <a href="rfc2132.html">RFC 2132</a>, March 1997.

   [<a id="ref-RFC2685" name="ref-RFC2685">RFC2685</a>]   Fox, B. and B. Gleeson, "Virtual Private Networks
               Identifier", <a href="rfc2685.html">RFC 2685</a>, September 1999.

   [<a id="ref-RFC3046" name="ref-RFC3046">RFC3046</a>]   Patrick, M., "DHCP Relay Agent Information Option",
               <a href="rfc3046.html">RFC 3046</a>, January 2001.

   [<a id="ref-RFC3315" name="ref-RFC3315">RFC3315</a>]   Droms, R., Ed., Bound, J., Volz, B., Lemon, T., Perkins,
               C., and M. Carney, "Dynamic Host Configuration Protocol
               for IPv6 (DHCPv6)", <a href="rfc3315.html">RFC 3315</a>, July 2003.

   [<a id="ref-RFC3633" name="ref-RFC3633">RFC3633</a>]   Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
               Host Configuration Protocol (DHCP) version 6", <a href="rfc3633.html">RFC 3633</a>,
               December 2003.

   [<a id="ref-RFC4994" name="ref-RFC4994">RFC4994</a>]   Zeng, S., Volz, B., Kinnear, K. and J. Brzozowski,
               "DHCPv6 Relay Agent Echo Request Option", <a href="rfc4994.html">RFC 4994</a>,
               September 2007.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/12.2.%20%20Informative%20References"></a><a class="selflink" href="#section-12.2" name="section-12.2">12.2</a>.  Informative References</span>

   [<a id="ref-RFC951" name="ref-RFC951">RFC951</a>]    Croft, W. and J. Gilmore, "Bootstrap Protocol", <a href="rfc951.html">RFC 951</a>,
               September 1985.

   [<a id="ref-RFC1542" name="ref-RFC1542">RFC1542</a>]   Wimer, W., "Clarifications and Extensions for the
               Bootstrap Protocol", <a href="rfc1542.html">RFC 1542</a>, October 1993.

   [<a id="ref-RFC3118" name="ref-RFC3118">RFC3118</a>]   Droms, R., Ed., and W. Arbaugh, Ed., "Authentication for
               DHCP Messages", <a href="rfc3118.html">RFC 3118</a>, June 2001.

   [<a id="ref-RFC3942" name="ref-RFC3942">RFC3942</a>]   Volz, B., "Reclassifying Dynamic Host Configuration
               Protocol version 4 (DHCPv4) Options", <a href="rfc3942.html">RFC 3942</a>,
               November 2004.






<span class="grey">Kinnear, et al.              Standards Track                   [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc6607.html">RFC 6607</a>            Virtual Subnet Selection Options          April 2012</span>


   [<a id="ref-RFC4030" name="ref-RFC4030">RFC4030</a>]   Stapp, M. and T. Lemon, "The Authentication Suboption for
               the Dynamic Host Configuration Protocol (DHCP) Relay
               Agent Option", <a href="rfc4030.html">RFC 4030</a>, March 2005.

   [<a id="ref-RFC4388" name="ref-RFC4388">RFC4388</a>]   Woundy, R. and K. Kinnear, "Dynamic Host Configuration
               Protocol (DHCP) Leasequery", <a href="rfc4388.html">RFC 4388</a>, February 2006.

   [<a id="ref-RFC5007" name="ref-RFC5007">RFC5007</a>]   Brzozowski, J., Kinnear, K., Volz, B., and S. Zeng,
               "DHCPv6 Leasequery", <a href="rfc5007.html">RFC 5007</a>, September 2007.

   [<a id="ref-RFC5198" name="ref-RFC5198">RFC5198</a>]   Klensin, J. and M. Padlipsky, "Unicode Format for Network
               Interchange", <a href="rfc5198.html">RFC 5198</a>, March 2008.

   [<a id="ref-RFC5226" name="ref-RFC5226">RFC5226</a>]   Narten, T. and H. Alvestrand, "Guidelines for Writing an
               IANA Considerations Section in RFCs", <a href="https://tools.ietf.org/html/bcp26">BCP 26</a>, <a href="rfc5226.html">RFC 5226</a>,
               May 2008.

Authors' Addresses

   Kim Kinnear
   Cisco Systems
   1414 Massachusetts Ave.
   Boxborough, MA  01719

   Phone: (978) 936-0000
   EMail: kkinnear@cisco.com


   Richard Johnson
   Cisco Systems
   170 W. Tasman Dr.
   San Jose, CA  95134

   Phone: (408) 526-4000
   EMail: raj@cisco.com


   Mark Stapp
   Cisco Systems
   1414 Massachusetts Ave.
   Boxborough, MA  01719

   Phone: (978) 936-0000
   EMail: mjs@cisco.com







Kinnear, et al.              Standards Track                   [Page 26]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6607 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:27 GMT --></html>