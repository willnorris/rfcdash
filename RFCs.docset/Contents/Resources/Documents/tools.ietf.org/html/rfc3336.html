<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3336 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Apr 2015 16:02:16 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.111" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:3336" name="DC.Identifier"/>
<meta content="Thompson, Bruce" name="DC.Creator"/>
<meta content="Koren, Tmima" name="DC.Creator"/>
<meta content="Buffam, Bruce" name="DC.Creator"/>
<meta content="December, 2002" name="DC.Date.Issued"/>
<meta content="PPP Over Asynchronous Transfer Mode Adaptation Layer 2 (AAL2)" name="DC.Title"/>

    <link href="http://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="http://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3336 - PPP Over Asynchronous Transfer Mode Adaptation Layer 2 (AAL2)</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="http://tools.ietf.org/rfc/rfc3336.txt" title="Plaintext version of this document">txt</a>|<a href="http://tools.ietf.org/pdf/rfc3336" title="PDF version of this document">pdf</a>] [<a href="http://tools.ietf.org/html/draft-ietf-pppext-ppp-over-aal2" title="draft-ietf-pppext-ppp-over-aal2">draft-ietf-pppext...</a>] [<a href="http://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3336" title="Inline diff (wdiff)">Diff1</a>] [<a href="http://tools.ietf.org/rfcdiff?url2=rfc3336" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                        B. Thompson
Request for Comments: 3336                                      T. Koren
Category: Standards Track                                  Cisco Systems
                                                               B. Buffam
                                                         Seaway Networks
                                                           December 2002


     <span class="h1">PPP Over Asynchronous Transfer Mode Adaptation Layer 2 (AAL2)</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

Abstract

   The Point-to-Point Protocol (PPP) provides a standard method for
   transporting multi-protocol datagrams over point-to-point links.

   This document describes the use of ATM Adaptation Layer 2 (AAL2) for
   framing PPP encapsulated packets.

Applicability

   This specification is intended for those implementations which desire
   to use the facilities which are defined for PPP, such as the Link
   Control Protocol, Network-layer Control Protocols, authentication,
   and compression.  These capabilities require a point-to-point
   relationship between the peers, and are not designed for the multi-
   point relationships which are available in ATM and other multi-access
   environments.












<span class="grey">Thompson, et. al.           Standards Track                     [Page 1]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>. Introduction</span>

   PPP over AAL5 [<a href="#ref-2" title='"PPP over AAL5"'>2</a>] describes the encapsulation format and operation of
   PPP when used with the ATM AAL5 adaptation layer.  While this
   encapsulation format is well suited to PPP transport of IP, it is
   bandwidth inefficient when used for transporting small payloads such
   as voice.  PPP over AAL5 is especially bandwidth inefficient when
   used with RTP header compression [<a href="#ref-3" title='"Compressing IP/UDP/RTP Headers for Low-Speed Serial Links"'>3</a>].

   PPP over AAL2 addresses the bandwidth efficiency issues of PPP over
   AAL5 for small packet transport by making use of the AAL2 Common Part
   Sublayer (CPS) [<a href="#ref-4" title='"BISDN ATM Adaptation layer specification: Type 2 AAL(AAL2)"'>4</a>] to allow multiple PPP payloads to be multiplexed
   into a set of ATM cells.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20Conventions"></a><a class="selflink" href="#section-2" name="section-2">2</a>. Conventions</span>

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, when they appear in this
   document, are to be interpreted as described in [<a href="#ref-6" title='"Key words for use in RFCs to Indicate Requirement Levels"'>6</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20AAL2%20Layer%20Service%20Interface"></a><a class="selflink" href="#section-3" name="section-3">3</a>. AAL2 Layer Service Interface</span>

   The PPP layer treats the underlying ATM AAL2 layer service as a bit-
   synchronous point-to-point link.  In this context, the PPP link
   corresponds to an ATM AAL2 virtual connection.  The virtual
   connection MUST be full-duplex, point to point, and it MAY be either
   dedicated (i.e., permanent, set up by provisioning) or switched (set
   up on demand).  In addition, the PPP/AAL2 service interface boundary
   MUST meet the following requirements.

      Interface Format - The PPP/AAL2 layer boundary presents an octet
      service interface to the AAL2 layer.  There is no provision for
      sub-octets to be supplied or accepted.

      Transmission Rate - The PPP layer does not impose any
      restrictions regarding transmission rate on the underlying ATM
      layer traffic descriptor parameters.

      Control Signals - The AAL2 layer MUST provide control signals to
      the PPP layer which indicate when the virtual connection link has
      become connected or disconnected.  These provide the "Up" and
      "Down" events to the LCP state machine [<a href="#ref-1" title='"The Point-to-Point Protocol (PPP)"'>1</a>] within the PPP layer.

      In the case of PPP over AAL2, the state of the link can be derived
      from the type 3 fault management packets carried in-band within a
      given AAL2 CID flow.





<span class="grey">Thompson, et. al.           Standards Track                     [Page 2]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20PPP%20Operation%20with%20AAL2"></a><a class="selflink" href="#section-4" name="section-4">4</a>. PPP Operation with AAL2</span>

   PPP over AAL2 defines an encapsulation that uses the Service Specific
   Segmentation and Reassembly Sublayer (SSSAR) [<a href="#ref-5" title='"Segmentation and Reassembly Service Specific Convergence Sublayer for the AAL type 2"'>5</a>] for AAL type 2.  The
   SSSAR sub-layer is used to segment PPP packets into frames that can
   be transported using the AAL2 CPS.  The SSSAR sub-layer uses
   different AAL2 UUI code-points to indicate whether a segment is the
   last segment of a packet or not.

   The encapsulation of PPP over AAL2 provides a 16-bit CRC for PPP
   payloads.  There are 2 UUI code points assigned from SSSAR to
   indicate intermediate fragments of a packet and the last fragment of
   a packet.  Code point 27 indicates intermediate frames of a
   fragmented packet and code point 26 indicates the last frame of a
   packet.  The encapsulation format is more fully described in <a href="#section-6.2.1">section</a>
   <a href="#section-6.2.1">6.2.1</a>.

   An implementation of PPP over AAL2 MAY use one or more AAL2 Channel
   Identifiers (CIDs) for transport of PPP packets associated with each
   PPP session.  Multiple CIDs could be used to implement a multiple
   class real time transport service for PPP using the AAL2 layer for
   link fragmentation and interleaving.  A companion document [<a href="#ref-10" title='"Class Extensions for PPP over Asynchronous Transfer Mode Adaptation Layer 2"'>10</a>]
   describes class extensions for PPP over AAL2 using multiple AAL2
   CIDs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20Comparison%20of%20PPP%20Over%20AAL2%20with%20Existing%20Encapsulations"></a><a class="selflink" href="#section-5" name="section-5">5</a>. Comparison of PPP Over AAL2 with Existing Encapsulations</span>

   This document proposes the substitution of AAL2 transport for PPP in
   scenarios where small packets are being transported over an ATM
   network.  This is most critical in applications such as voice
   transport using RTP [<a href="#ref-9" title='"RTP: A Transport Protocol for Real-Time Applications"'>9</a>] where RTP Header compression [<a href="#ref-3" title='"Compressing IP/UDP/RTP Headers for Low-Speed Serial Links"'>3</a>] is used.  In
   applications such as voice transport, both bandwidth efficiency and
   low delay are very important.

   This section provides justification for the PPP over AAL2 service for
   ATM transport by comparing it to existing PPP encapsulation formats
   used for transport over ATM.  Two encapsulation formats will be
   examined here:  PPP over AAL5 [<a href="#ref-2" title='"PPP over AAL5"'>2</a>], and PPP with PPPMUX [<a href="#ref-8" title='"PPP Multiplexing"'>8</a>] over AAL5.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1%20Comparison%20With%20PPP%20Over%20AAL5"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a> Comparison With PPP Over AAL5</span>

   This proposal uses ATM AAL2 [<a href="#ref-4" title='"BISDN ATM Adaptation layer specification: Type 2 AAL(AAL2)"'>4</a>] rather than AAL5 as the transport for
   PPP.  SSSAR along with the AAL2 CPS generates less ATM encapsulation
   overhead per PPP payload.  The payload encapsulation consists of a 2
   byte CRC.  The AAL2 CPS header consists of 3 bytes, and the AAL2
   Start Field (STF) is 1 byte.  This is a total encapsulation overhead
   of 6 bytes.  This compares to 8 bytes of overhead for the AAL5
   trailer used for PPP over AAL5.



<span class="grey">Thompson, et. al.           Standards Track                     [Page 3]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


   The multiplexing function of the AAL2 CPS layer allows more bandwidth
   efficient transport of PPP frames by multiplexing multiple PPP frames
   into one or more ATM cells using the AAL2 CPS function.  This removes
   the pad overhead of AAL5 when used to transport short frames.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2%20Comparison%20with%20PPPMUX%20over%20AAL5"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a> Comparison with PPPMUX over AAL5</span>

   PPP Multiplexing (PPPMUX) [<a href="#ref-8" title='"PPP Multiplexing"'>8</a>] is a new method for doing multiplexing
   in the PPP layer. PPPMUX provides functionality similar to the CPS
   based multiplexing function of AAL2.  Using PPP multiplexing, a PPP
   stack would look like PPP/PPPMUX/AAL5.

   Both PPP/PPPMUX/AAL5 and PPP/AAL2 use multiplexing to reduce the
   overhead of cell padding when frames are sent over an ATM virtual
   circuit.  However, the bandwidth utilization of PPP/AAL2 will
   typically be better than the bandwidth used by PPP/PPPMUX/AAL5.  This
   is because multiplexed frames in PPP/PPPMUX/AAL5 must always be
   encapsulated within an AAL5 frame before being sent.  This
   encapsulation causes an additional 8 bytes of AAL5 trailer to be
   added to the PPPMUX encapsulation.  In addition to the 8 bytes of
   AAL5 trailer, PPPMUX will incur an average of 24 additional bytes of
   AAL5 PAD.  These 2 factors will end up reducing the effective
   efficiency of PPPMUX when it is used over AAL5.

   With PPP/AAL2, the AAL2 CPS layer treats individual PPP frames as a
   series of CPS payloads that can be multiplexed.  As long as PPP
   frames arrive at the CPS layer before the CPS TIMER_CU expires, all
   ATM cells coming from the CPS layer will be filled.  Under these
   conditions, PPP/AAL2 will have no PAD associated with it.  When the
   AAL2 CPS function causes no PAD to be generated, PPP/AAL2 will be
   more bandwidth efficient than PPP/PPPMUX/AAL5.

   In PPP/PPPMUX/AAL5, the AAL5 SAR and the PPP MUX/DEMUX are performed
   in two different layers.  Thus, the PPPMUX/AAL5 receiver must
   reassemble a full AAL5 frame from the ATM layer before the PPPMUX
   layer can extract the PPP payloads.  To derive maximum PPP
   Multiplexing efficiency, many PPP payloads may be multiplexed
   together.  This increases the size of the multiplexed frame to many
   ATM cells.  If one of these ATM cells is lost, the whole PPPMUX
   packet will be discarded.  Also, there may be a significant delay
   incurred while the AAL5 layer waits for many ATM cell arrival times
   until a full frame has been assembled before the full frame is passed
   up to the PPP Multiplexing layer where the inverse PPP demux then
   occurs.  This same issue also applies to PPPMUX/AAL5 frames
   progressing down the stack.






<span class="grey">Thompson, et. al.           Standards Track                     [Page 4]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


   With AAL2, both the segmentation and reassembly and multiplexing
   functions are performed in the AAL2 CPS layer.  Because of the
   definition of the AAL2 CPS function, a multiplexed payload will be
   extracted as soon as it is received.  The CPS receiver does not wait
   until the many payloads of an AAL2 multiplexed frame are received
   before removing payloads from the multiplexed stream.  The same
   benefit also applies to AAL2 CPS sender implementations.  Also, the
   loss of an ATM cell causes the loss of the packets that are included
   in that cell only.

   The AAL2 CPS function provides multiplexing in AAL2.  This function
   often needs to be implemented in hardware for performance reasons.
   Because of this, a PPP/AAL2 implementation that takes advantage of an
   AAL2 SAR implemented in hardware will have significant performance
   benefits over a PPP/PPPMUX/AAL5 implementation where PPPMUX is
   implemented in software.  Also, the AAL2 specification has been
   available significantly longer than the PPP Multiplexing
   specification and because of this, optimized software and hardware
   implementations of the AAL2 CPS function are further in development
   than PPP Multiplexing implementations.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20Detailed%20Protocol%20Operation%20Description"></a><a class="selflink" href="#section-6" name="section-6">6</a>. Detailed Protocol Operation Description</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1%20Background"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a> Background</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.1%20AAL2%20Multiplexing"></a><a class="selflink" href="#section-6.1.1" name="section-6.1.1">6.1.1</a> AAL2 Multiplexing</span>

   ITU-T I.363.2 specifies ATM Adaptation Layer Type 2.  This AAL type
   provides for bandwidth efficient transmission of low-rate, short and
   variable length packets in delay sensitive applications.  More than
   one AAL type 2 user information stream can be supported on a single
   ATM connection.  There is only one definition for the sub-layer
   because it implements the interface to the ATM layer and is shared by
   more than one SSCS layer.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.2%20AAL2%20Service%20Specific%20Convergence%20Sub-layers"></a><a class="selflink" href="#section-6.1.2" name="section-6.1.2">6.1.2</a> AAL2 Service Specific Convergence Sub-layers</span>

   ITU-T I.366.1 and I.366.2 define Service Specific Convergence Sub-
   layers (SSCS) that operate above the Common Part Sub-layer defined in
   I.363.2.  This layer specifies packet formats and procedures to
   encode the different information streams in bandwidth efficient
   transport.  As the name implies, this sub-layer implements those
   elements of service specific transport.  While there is only one
   definition of the Common Part Sublayer for AAL2, there can be
   multiple SSCS functions defined to run over this CPS layer.
   Different CIDs within an AAL2 virtual circuit may run different
   SSCSs.




<span class="grey">Thompson, et. al.           Standards Track                     [Page 5]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.3%20AAL2%20CPS%20Packet%20%28CPS-PKT%29%20Format"></a><a class="selflink" href="#section-6.1.3" name="section-6.1.3">6.1.3</a> AAL2 CPS Packet (CPS-PKT) Format</span>

   The CPS-PKT format over AAL2 as defined in I.363.2:

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           +          +         +         +                          |
|    CID    +    LI    +   UUI   +   HEC   +        CPS-INFO          |
|           +          +         +         +                          |
|           +          +         +         +                          |
|    (8)    +    (6)   +   (5)   +   (5)   +       (45/64 * 8)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Note: The size of the fields denote bit-width

   The Channel ID (CID) identifies the sub-stream within the AAL2
   connection. The Length indication (LI) indicates the length of the
   CPS-INFO payload.  The User-to-User Indication (UUI) carries
   information between the SSCS/Application running above the CPS.  The
   SSSAR sub-layer as defined in I.366.1 uses the following code points:

      UUI Code-point       Packet Content
      ++++++++++++++       ++++++++++++++

      0-26              Framed mode data, final packet.

      27                Framed mode data, more to come.

   This proposal uses two UUI code-points as follows:

      UUI Code-point       Packet Content
      ++++++++++++++       ++++++++++++++

      27                   non-final packet.

      26                   final packet.
















<span class="grey">Thompson, et. al.           Standards Track                     [Page 6]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.4%20AAL2%20CPS-PDU%20Format"></a><a class="selflink" href="#section-6.1.4" name="section-6.1.4">6.1.4</a> AAL2 CPS-PDU Format</span>

   The CPS-PDU format over AAL2 as defined in I.363.2:

                      +-+-+-+~+~+-+-+
                      |CPS| CPS-INFO|
                      |PKT|         |
                      |HDR|         |
                      +-+-+-+~+~+-+-+
                      |  CPS-PKT    |

                      |             +-+-+-+~+~+-+-+
                                    |CPS| CPS-INFO|
                      |             |PKT|         |
                                    |HDR|         |
                      |             +-+-+-+~+~+-+-+
                                        CPS-PKT
                      |             |             +-+-+-+~+~+-+-+
                                                  |CPS| CPS-INFO|
                      |             |             |PKT|         |
                                                  |HDR|         |
                      |             |             +-+-+-+~+~+-+-+
                                                      CPS-PKT
                      V             V             V             V
+-+-+-+-+-+-+-+~+~+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  Cell    |           |                                         |     |
  Header  |    STF    |             CPS-PDU Payload             | PAD |
          |           |                                         |     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+~+~+

              Note: The size of the fields denote bitwidth

   The CPS-PDU format is used to carry one or more CPS-PKT's multiplexed
   on a single CPS-PDU. The CPS header contains enough information to
   identify the CPS packets within a CPS-PDU. In the event of cell loss,
   the STF field is used to find the first CPS-PKT in the current cell.















<span class="grey">Thompson, et. al.           Standards Track                     [Page 7]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2%20PPP%20Over%20AAL2%20Encapsulation"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a> PPP Over AAL2 Encapsulation</span>

   PPP encapsulation over AAL2 uses the AAL2 CPS with no change.

   Some PPP encapsulated protocols such as RTP header compression
   require that the link layer provide packet error detection.  Because
   of this, PPP over AAL2 defines a 16-bit CRC that is used along with
   the SSSAR sub-layer of I.366.1 to provide packet error detection.
   The encapsulation format is described below.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.1%20PPP%20Payload%20Encapsulation%20Over%20AAL2%20with%2016-bit%20CRC%20%28CRC-16%29."></a><a class="selflink" href="#section-6.2.1" name="section-6.2.1">6.2.1</a> PPP Payload Encapsulation Over AAL2 with 16-bit CRC (CRC-16).</span>

   The payload encapsulation of PPP appends a two byte CRC to each PPP
   frame before using the SSSAR layer to send the PPP packet as a series
   of AAL2 frames.

   The format of a PPP over AAL2 packet is shown in the diagram below.
   Note that the diagram below shows the payload encapsulation when the
   packet is not segmented (UUI=26).  When the PPP packet is segmented,
   the PPP Protocol ID, Information field, and CRC-16 fields will be
   split across multiple SSSAR frames.  In this case, the UUI field will
   be set to 27 for all frames except the last frame. In the last frame,
   the UUI field will be set to 26.

Payload Encapsulation
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         +       +       +       +           +             +         |
|   CID   +   LI  +  UUI  +  HEC  + Protocol  +             +         |
|         +       +       +       +    ID     + Information + CRC-16  |
|         +       +       +       +           +             +         |
|   (8)   +  (6)  +  (5)  +  (5)  +  (8/16)   +             +  (16)   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

             Note: The size of the fields denote bit-width

   The algorithms used for computing and verifying the CRC-16 field are
   identical to the algorithms specified for the Frame Check Sequence
   (FCS) field in Q.921 [<a href="#ref-13" title="ISDN User-Network Interface-Data Link Layer Specification">13</a>]. The algorithms from Q.921 are included in
   this section for ease of access.

   The CRC-16 field is filled with the value of a CRC calculation which
   is performed over the contents of the PPP packet, including the PPP
   Protocol ID and the information field.  The CRC field shall contain
   the ones complement of the sum (modulo 2) of:

   1) the remainder of x^k (x^15 + x^14 + ... + x + 1) divided (modulo
      2) by the generator polynomial, where k is the number of bits of
      the information over which the CRC is calculated; and



<span class="grey">Thompson, et. al.           Standards Track                     [Page 8]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


   2) the remainder of the division (modulo 2) by the generator
      polynomial of the product of x^16 by the information over which
      the CRC is calculated.

   The CRC-16 generator polynomial is:

      G(x) = x^16 + x^12 + x^5 + 1

   The result of the CRC calculation is placed with the least
   significant bit right justified in the CRC field.

   As a typical implementation at the transmitter, the initial content
   of the register of the device computing the remainder of the division
   is preset to all "1"s and is then modified by division by the
   generator polynomial (as described above) on the information over
   which the CRC is to be calculated; the ones complement of the
   resulting remainder is put into the CRC field.

   As a typical implementation at the receiver, the initial content of
   the register of the device computing the remainder of the division is
   preset to all "1"s.  The final remainder, after multiplication by
   x^16 and then division (modulo 2) by the generator polynomial of the
   serial incoming PPP packet (including the Protocol ID, the
   information and the CRC fields), will be 0001110100001111 (x^15
   through x^0, respectively) in the absence of transmission errors.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3%20Use%20of%20AAL2%20CPS-PKT%20CIDs"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a> Use of AAL2 CPS-PKT CIDs</span>

   An implementation of PPP over AAL2 MAY use a single AAL2 Channel
   Identifier (CID) or multiple CIDs for transport of all PPP packets.
   In order for the endpoints of a PPP session to work with AAL2, they
   MUST both agree on the number, SSCS mapping, and values of AAL2 CIDs
   that will be used for a PPP session.  The values of AAL2 CIDs to be
   used for a PPP session MAY be obtained from either static
   provisioning in the case of a dedicated AAL2 connection (PVC) or from
   Q.2630.2 [<a href="#ref-7" title='"ITU-T RECOMMENDATION Q.2630.2"'>7</a>] signaling in the case of an AAL2 switched virtual
   circuit (SPVC or SVC).

   Using this proposal it is possible to support the use of conventional
   AAL2 in CIDs that are not used to support PPP over AAL2.  This
   proposal allows the co-existence of multiple types of SSCS function
   within the same AAL2 VCC.









<span class="grey">Thompson, et. al.           Standards Track                     [Page 9]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4%20PPP%20over%20AAL2%20Operation"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a> PPP over AAL2 Operation</span>

   PPP operation with AAL2 will perform basic PPP encapsulation with the
   PPP protocol ID. A 16-bit CRC is calculated as described above and
   appended to the payload.  The SSSAR sub-layer of AAL2 is used for
   transport.

   Applications implementing PPP over AAL2 MUST meet all the
   requirements of PPP [<a href="#ref-1" title='"The Point-to-Point Protocol (PPP)"'>1</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20Example%20implementation%20of%20PPP%2FAAL2"></a><a class="selflink" href="#section-7" name="section-7">7</a>. Example implementation of PPP/AAL2</span>

   This section describes an example implementation of how PPP can be
   encapsulated over AAL2.  The example shows two application stacks
   generating IP packets that are sent to the same interface running
   PPP/AAL2.  One Application stack is generating RTP packets and
   another application is generating IP Datagrams.  The PPP/AAL2
   interface shown in this example is running an <a href="rfc2508.html">RFC 2508</a> compliant
   version of RTP header compression.
































<span class="grey">Thompson, et. al.           Standards Track                    [Page 10]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


   Here are the paths an Application packet can take in this
   implementation:

       +---+---+---+---+--+                                        +
       |   Application A  |                                        |
       +---+---+---+---+--+                                        |
       |       RTP        |                                        |
       +---+---+---+---+--+       +---+---+---+---+---+      Application
       |       UDP        |       |   Application B   |            |
       +---+---+---+---+--+       +---+---+---+---+---+            |
       |        IP        |       |        IP         |            |
       +---+---+---+---+--+       +---+---+---+---+---+            +
               |                            |
               +---------------+------------+
                               |
                               |
                     +---+---+---+---+---+--+                      +
                     |  Compression Filter  |                      |
                     +---+---+---+---+---+--+                      |
                               |                                   |
                               |                                   |
                     +---------+-----------+                       |
                     |                     |                       |
             RTP     |                     |   Non-RTP             |
           Packets   V                     |   Packets             |
       +---+---+---+---+---+---+           |                       |
       |            CRTP       |           |                       |
       +---+---+---+---+---+---+---+---+---+---+---+---+       Transport
       |                      PPP                      |           |
       +---+---+---+---+---+---+---+---+---+---+---+---+           |
                               |                                   |
       +---+---+---+---+---+---+---+ +--+---+---+---+---+--+--+-+  |
       |               Segmentation (SSSAR)                     |  |
       +---+---+---+---+---+---+---+ +--+---+---+---+---+--+--+-+  |
       +---+---+---+---+---+---+---+---+---+---+---+---+---+----+  |
       |                   AAL2 CPS                             |  |
       +---+---+---+---+---+---+---+---+---+---+---+---+---+----+  |
       |                   ATM Layer                            |  |
       +---+---+---+---+---+---+---+---+---+---+---+---+---+----+  +

   In the picture above, application A is an RTP application generating
   RTP packets.  Application B is an IP application generating IP
   datagrams.  Application A gathers the RTP data and formats an RTP
   packet.  Lower level layers of application A add UDP and IP headers
   to form a complete IP packet.  Application B is generating datagrams
   to the IP layer.  These datagrams may not have UDP or RTP headers.





<span class="grey">Thompson, et. al.           Standards Track                    [Page 11]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


   In the above picture, a protocol stack is configured to apply
   CRTP/PPP/AAL2 compression on an interface to a destination host.  All
   packets that are sent to this interface will be tested to see if they
   can be compressed using RTP header compression.  As packets appear at
   the interface, they will be tested by a compression filter to
   determine if they are candidates for header compression.  If the
   compression filter determines that the packet is a candidate for
   compression, the packet will be sent to the CRTP compressor. If the
   packet is not a candidate for compression, it will be sent directly
   to the PPP layer for encapsulation as an IP packet encapsulated in
   PPP.

   The destination UDP port number and packet length are examples of
   criteria that may be used by the compression filter to select the
   interface.

   In this example, packets from application A will be passed to the
   CRTP compressor which then hands the compressed packet to the PPP
   layer for encapsulation as one of the compressed header types of
   CRTP.  The PPP layer will add the appropriate CRTP payload type for
   the compressed packet.

   Packets from application B will be sent directly to the PPP layer for
   encapsulation as an IP/PPP packet.  The PPP layer will add the PPP
   payload type for an IP packet encapsulated in PPP.

   PPP packets are then segmented using I.366.1 segmentation with SSSAR.

   The resulting AAL2 frame mode PDU is passed down as a CPS SDU to the
   CPS Layer for multiplexing accompanied by the CPS-UUI and the CPS-
   CID.  The CPS Layer multiplexes the CPS-PKT onto a CPS-PDU.  CPS-PDUs
   are passed to the ATM layer as ATM SDUs to be carried end-to-end
   across the ATM network.

   At the receiving end, the ATM SDU's arrive and are passed up to the
   AAL2 CPS.  As the AAL2 CPS PDU is accumulated, complete CPS-PKT's are
   reassembled by the SSSAR SSCS.  Reassembled packets are checked for
   errors using the CRC algorithm.

   At this point, the PPP layer on the receiving side uses the PPP
   payload type to deliver the packet to either the CRTP decompressor or
   the IP layer depending on the value of the PPP payload type.









<span class="grey">Thompson, et. al.           Standards Track                    [Page 12]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20LCP%20Configuration%20Options"></a><a class="selflink" href="#section-8" name="section-8">8</a>. LCP Configuration Options</span>

   By default, PPP over AAL2 will use the 16 bit CRC encapsulation for
   all packets.

   The default Maximum-Receive-Unit (MRU) is 1500 bytes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>. Security Considerations</span>

   This memo defines mechanisms for PPP encapsulation over ATM.  There
   is an element of trust in any encapsulation protocol: a receiver
   should be able to trust that the sender has correctly identified the
   protocol being encapsulated and that the sender has not been spoofed
   or compromised.  A receiver should also be able to trust that the
   transport network between sender and receiver has not been
   compromised.

   A PPP session that runs over an ATM Virtual Circuit must follow the
   PPP link operation state machine described in <a href="rfc1661.html">RFC 1661</a> [<a href="#ref-1" title='"The Point-to-Point Protocol (PPP)"'>1</a>].  This
   state machine includes the ability to enforce the use of an
   authentication phase using the PAP/CHAP authentication protocols
   before any network layer packets are exchanged.  Using PPP level
   authentication, a PPP receiver can authenticate a PPP sender.

   System security may also be compromised by the attacks of the ATM
   transport network itself.  The ATM Forum has published a security
   framework [<a href="#ref-11" title='"ATM Security Framework Version 1.0"'>11</a>] and a security specification [<a href="#ref-12" title='"ATM Security Specification v1.1"'>12</a>] that define
   procedures to guard against common threats to an ATM transport
   network.

   PPP level authentication does not guard against man in the middle
   attacks.  These attacks could occur if an attacker was able to
   compromise the security infrastructure of an ATM switching network.
   Applications that require protection against threats to an ATM
   switching network are encouraged to use authentication headers, or
   encrypted payloads, and/or the ATM-layer security services described
   in [<a href="#ref-12" title='"ATM Security Specification v1.1"'>12</a>].

   When PPP over AAL2 is used on a set of CIDs in a virtual connection,
   there may be other non PPP encapsulated AAL2 CIDs running on the same
   virtual connection.  Because of this, an end point cannot assume that
   the PPP session authentication and related security mechanisms also
   secure the non PPP encapsulated CIDs on that same virtual connection.








<span class="grey">Thompson, et. al.           Standards Track                    [Page 13]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20Acknowledgements"></a><a class="selflink" href="#section-10" name="section-10">10</a>. Acknowledgements</span>

   The authors would like to thank Rajesh Kumar, Mike Mclaughlin, Pietro
   Schicker, James Carlson and John O'Neil for their contributions to
   this proposal.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20References"></a><a class="selflink" href="#section-11" name="section-11">11</a>. References</span>

   [<a id="ref-1" name="ref-1">1</a>]  Simpson, W., Editor, "The Point-to-Point Protocol (PPP)", STD
        51, <a href="rfc1661.html">RFC 1661</a>, July 1994.

   [<a id="ref-2" name="ref-2">2</a>]  Gross, G., Kaycee, M., Li, A., Malis, A. and J. Stephens, "PPP
        over AAL5", STD 51, <a href="rfc2364.html">RFC 2364</a>, July 1998.

   [<a id="ref-3" name="ref-3">3</a>]  Casner, S. and V. Jacobson, "Compressing IP/UDP/RTP Headers for
        Low-Speed Serial Links", <a href="rfc2508.html">RFC 2508</a>, February 1999.

   [<a id="ref-4" name="ref-4">4</a>]  International Telecommunications Union, "BISDN ATM Adaptation
        layer specification: Type 2 AAL(AAL2)", ITU-T Recommendation
        I.363.2, September 1997.

   [<a id="ref-5" name="ref-5">5</a>]  International Telecommunications Union, "Segmentation and
        Reassembly Service Specific Convergence Sublayer for the AAL
        type 2", ITU-T Recommendation I.366.1, June 1998.

   [<a id="ref-6" name="ref-6">6</a>]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", <a href="http://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-7" name="ref-7">7</a>]  ITU-T, "ITU-T RECOMMENDATION Q.2630.2", December 2000.

   [<a id="ref-8" name="ref-8">8</a>]  Pazhyannur, R, Ali, I. and C. Fox, "PPP Multiplexing", <a href="rfc3153.html">RFC 3153</a>,
        August 2001.

   [<a id="ref-9" name="ref-9">9</a>]  Schulzrinne, H., Casner, S., Frederick, R. and V. Jacobson,
        "RTP:  A Transport Protocol for Real-Time Applications", <a href="rfc1889.html">RFC</a>
        <a href="rfc1889.html">1889</a>, January 1996.

   [<a id="ref-10" name="ref-10">10</a>] Thompson, B., Koren, T. and B. Buffam, "Class Extensions for PPP
        over Asynchronous Transfer Mode Adaptation Layer 2", <a href="rfc3337.html">RFC 3337</a>,
        December 2002.

   [<a id="ref-11" name="ref-11">11</a>] The ATM Forum, "ATM Security Framework Version 1.0", af-sec-
        0096.000, February 1998.

   [<a id="ref-12" name="ref-12">12</a>] The ATM Forum, "ATM Security Specification v1.1", af-sec-
        0100.002, March 2001.





<span class="grey">Thompson, et. al.           Standards Track                    [Page 14]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


   [<a id="ref-13" name="ref-13">13</a>] International Telecommunications Union, ISDN User-Network
        Interface-Data Link Layer Specification, ITU-T Recommendation
        Q.921, March 1993.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20Authors%27%20Addresses"></a><a class="selflink" href="#section-12" name="section-12">12</a>. Authors' Addresses</span>

   Bruce Thompson
   Cisco Systems, Inc.
   170 West Tasman Drive
   San Jose, CA 95134
   USA

   Phone: +1 408 527-0446
   EMail: brucet@cisco.com


   Tmima Koren
   Cisco Systems, Inc.
   170 West Tasman Drive
   San Jose, CA 95134
   USA

   Phone: +1 408 527-6169
   EMail: tmima@cisco.com


   Bruce Buffam
   Seaway Networks
   One Chrysalis Way,
   Suite 300,
   Ottawa, Canada
   K2G-6P9

   Phone: +1 613 723-9161
   EMail: bruce@seawaynetworks.com
















<span class="grey">Thompson, et. al.           Standards Track                    [Page 15]</span>
</pre><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc3336.html">RFC 3336</a>                     PPP Over AAL2                 December 2002</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Thompson, et. al.           Standards Track                    [Page 16]

</pre><br/>
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.111, available from
<a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>



</body><!-- Mirrored from tools.ietf.org/html/rfc3336 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 28 Apr 2015 16:02:16 GMT --></html>