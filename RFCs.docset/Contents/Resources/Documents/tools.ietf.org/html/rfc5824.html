<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5824 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:33 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-kumaki-l3vpn-e2e-rsvp-te-reqts" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:5824" name="DC.Identifier"/>
<meta content="April, 2010" name="DC.Date.Issued"/>
<meta content="Kamite, Yuji" name="DC.Creator"/>
<meta content="Kumaki, Kenji" name="DC.Creator"/>
<meta content="Zhang, Raymond" name="DC.Creator"/>
<meta content="Today, customers expect to run triple-play services through BGP/MPLS
IP-VPNs. Some service providers will deploy services that request
Quality of Service (QoS) guarantees from a local Customer Edge (CE) to
a remote CE across the network. As a result, the application (e.g.,
voice, video, bandwidth-guaranteed data pipe, etc.) requirements for
an end-to-end QoS and reserving an adequate bandwidth continue to
increase.  Service providers can use both an MPLS and an MPLS Traffic
Engineering (MPLS-TE) Label Switched Path (LSP) to meet their service
objectives. This document describes service-provider requirements for
supporting a customer Resource ReSerVation Protocol (RSVP) and RSVP-TE
over a BGP/MPLS IP-VPN. This document is not an Internet Standards
Track specification; it is published for informational purposes." name="DC.Description.Abstract"/>
<meta content="Requirements for Supporting Customer Resource ReSerVation Protocol (RSVP) and RSVP Traffic Engineering (RSVP-TE) over a BGP/MPLS IP-VPN" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5824 - Requirements for Supporting Customer Resource ReSerVation Protocol (RSVP) and RSVP Traffic Engineering (RSVP-TE) over a BGP/MPLS IP-VPN</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5824.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5824" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-l3vpn-e2e-rsvp-te-reqts" title="draft-ietf-l3vpn-e2e-rsvp-te-reqts">draft-ietf-l3vp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc5824" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5824" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5824" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                    K. Kumaki, Ed.
Request for Comments: 5824                              KDDI Corporation
Category: Informational                                         R. Zhang
ISSN: 2070-1721                                                       BT
                                                               Y. Kamite
                                          NTT Communications Corporation
                                                              April 2010


                      <span class="h1">Requirements for Supporting</span>
             <span class="h1">Customer Resource ReSerVation Protocol (RSVP)</span>
     <span class="h1">and RSVP Traffic Engineering (RSVP-TE) over a BGP/MPLS IP-VPN</span>

Abstract

   Today, customers expect to run triple-play services through BGP/MPLS
   IP-VPNs.  Some service providers will deploy services that request
   Quality of Service (QoS) guarantees from a local Customer Edge (CE)
   to a remote CE across the network.  As a result, the application
   (e.g., voice, video, bandwidth-guaranteed data pipe, etc.)
   requirements for an end-to-end QoS and reserving an adequate
   bandwidth continue to increase.

   Service providers can use both an MPLS and an MPLS Traffic
   Engineering (MPLS-TE) Label Switched Path (LSP) to meet their service
   objectives.  This document describes service-provider requirements
   for supporting a customer Resource ReSerVation Protocol (RSVP) and
   RSVP-TE over a BGP/MPLS IP-VPN.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc5824">http://www.rfc-editor.org/info/rfc5824</a>.







<span class="grey">Kumaki, et al.                Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


Copyright Notice

   Copyright (c) 2010 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

























<span class="grey">Kumaki, et al.                Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. Requirements Language ...........................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Terminology .....................................................<a href="#page-5">5</a>
   <a href="#section-4">4</a>. Problem Statement ...............................................<a href="#page-5">5</a>
   <a href="#section-5">5</a>. Application Scenarios ...........................................<a href="#page-7">7</a>
      <a href="#section-5.1">5.1</a>. Scenario I: Fast Recovery over BGP/MPLS IP-VPNs ............<a href="#page-8">8</a>
      <a href="#section-5.2">5.2</a>. Scenario II: Strict C-TE LSP QoS Guarantees ................<a href="#page-8">8</a>
      <a href="#section-5.3">5.3</a>. Scenario III: Load Balance of CE-to-CE Traffic .............<a href="#page-9">9</a>
      <a href="#section-5.4">5.4</a>. Scenario IV: RSVP Aggregation over MPLS-TE Tunnels ........<a href="#page-11">11</a>
      <a href="#section-5.5">5.5</a>. Scenario V: RSVP over Non-TE LSPs .........................<a href="#page-12">12</a>
      <a href="#section-5.6">5.6</a>. Scenario VI: RSVP-TE over Non-TE LSPs .....................<a href="#page-13">13</a>
   <a href="#section-6">6</a>. Detailed Requirements for C-TE LSP Model .......................<a href="#page-14">14</a>
      <a href="#section-6.1">6.1</a>. Selective P-TE LSPs .......................................<a href="#page-14">14</a>
      <a href="#section-6.2">6.2</a>. Graceful Restart Support for C-TE LSPs ....................<a href="#page-14">14</a>
      <a href="#section-6.3">6.3</a>. Rerouting Support for C-TE LSPs ...........................<a href="#page-15">15</a>
      <a href="#section-6.4">6.4</a>. FRR Support for C-TE LSPs .................................<a href="#page-15">15</a>
      <a href="#section-6.5">6.5</a>. Admission Control Support on P-TE LSP Head-Ends ...........<a href="#page-15">15</a>
      6.6. Admission Control Support for C-TE LSPs in
           LDP-Based Core Networks ...................................<a href="#page-16">16</a>
      <a href="#section-6.7">6.7</a>. Policy Control Support for C-TE LSPs ......................<a href="#page-16">16</a>
      <a href="#section-6.8">6.8</a>. PCE Features Support for C-TE LSPs ........................<a href="#page-16">16</a>
      <a href="#section-6.9">6.9</a>. Diversely Routed C-TE LSP Support .........................<a href="#page-16">16</a>
      <a href="#section-6.10">6.10</a>. Optimal Path Support for C-TE LSPs .......................<a href="#page-17">17</a>
      <a href="#section-6.11">6.11</a>. Reoptimization Support for C-TE LSPs .....................<a href="#page-17">17</a>
      <a href="#section-6.12">6.12</a>. DS-TE Support for C-TE LSPs ..............................<a href="#page-17">17</a>
   <a href="#section-7">7</a>. Detailed Requirements for C-RSVP Path Model ....................<a href="#page-18">18</a>
      <a href="#section-7.1">7.1</a>. Admission Control between PE-CE for C-RSVP Paths ..........<a href="#page-18">18</a>
      <a href="#section-7.2">7.2</a>. Aggregation of C-RSVP Paths by P-TE LSPs ..................<a href="#page-18">18</a>
      <a href="#section-7.3">7.3</a>. Non-TE LSP Support for C-RSVP Paths .......................<a href="#page-18">18</a>
      <a href="#section-7.4">7.4</a>. Transparency of C-RSVP Paths ..............................<a href="#page-18">18</a>
   <a href="#section-8">8</a>. Commonly Detailed Requirements for Two Models ..................<a href="#page-18">18</a>
      <a href="#section-8.1">8.1</a>. CE-PE Routing .............................................<a href="#page-18">18</a>
      <a href="#section-8.2">8.2</a>. Complexity and Risks ......................................<a href="#page-19">19</a>
      <a href="#section-8.3">8.3</a>. Backward Compatibility ....................................<a href="#page-19">19</a>
      <a href="#section-8.4">8.4</a>. Scalability Considerations ................................<a href="#page-19">19</a>
      <a href="#section-8.5">8.5</a>. Performance Considerations ................................<a href="#page-19">19</a>
      <a href="#section-8.6">8.6</a>. Management Considerations .................................<a href="#page-20">20</a>
   <a href="#section-9">9</a>. Security Considerations ........................................<a href="#page-20">20</a>
   <a href="#section-10">10</a>. References ....................................................<a href="#page-21">21</a>
      <a href="#section-10.1">10.1</a>. Normative References .....................................<a href="#page-21">21</a>
      <a href="#section-10.2">10.2</a>. Informative References ...................................<a href="#page-22">22</a>
   Acknowledgments....................................................<a href="#page-23">23</a>
   <a href="#appendix-A">Appendix A</a>. Reference Model........................................<a href="#page-24">24</a>
      <a href="#appendix-A.1">A.1</a> End-to-End C-RSVP Path Model................................<a href="#page-24">24</a>
      <a href="#appendix-A.2">A.2</a> End-to-End C-TE LSP Model...................................<a href="#page-25">25</a>




<span class="grey">Kumaki, et al.                Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Some service providers want to build a service that guarantees
   Quality of Service (QoS) and a bandwidth from a local Customer Edge
   (CE) to a remote CE through the network.  A CE includes the network
   client equipment owned and operated by the service provider.
   However, the CE may not be part of the MPLS provider network.

   Today, customers expect to run triple-play services such as Internet
   access, telephone, and television through BGP/MPLS IP-VPNs [<a href="rfc4364.html" title='"BGP/MPLS IP Virtual Private Networks (VPNs)"'>RFC4364</a>].

   As these services evolve, the requirements for an end-to-end QoS to
   meet the application requirements also continue to grow.  Depending
   on the application (e.g., voice, video, bandwidth-guaranteed data
   pipe, etc.), a native IP using an RSVP and/or an end-to-end
   constrained MPLS Traffic Engineering (MPLS-TE) Label Switched Path
   (LSP) may be required.  The RSVP path may be used to provide QoS
   guarantees and reserve an adequate bandwidth for the data.  An end-
   to-end MPLS-TE LSP may also be used to guarantee a bandwidth, and
   provide extended functionality like MPLS fast reroute (FRR) [<a href="rfc4090.html" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>]
   for maintaining the service continuity around node and link,
   including the CE-PE link, failures.  It should be noted that an RSVP
   session between two CEs may also be mapped and tunneled into an MPLS-
   TE LSP across an MPLS provider network.

   A number of advantages exist for deploying the model previously
   mentioned.  The first is that customers can use these network
   services while being able to use both private addresses and global
   addresses.  The second advantage is that the traffic is tunneled
   through the service-provider backbone so that customer traffic and
   route confidentiality are maintained.

   This document defines a reference model, example application
   scenarios, and detailed requirements for a solution supporting a
   customer RSVP and RSVP-TE over a BGP/MPLS IP-VPN.

   A specification for a solution is out of scope in this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Requirements%20Language"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].








<span class="grey">Kumaki, et al.                Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Terminology"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Terminology</span>

   This document uses the BGP/MPLS IP-VPN terminology defined in
   [<a href="rfc4364.html" title='"BGP/MPLS IP Virtual Private Networks (VPNs)"'>RFC4364</a>] and also uses Path Computation Element (PCE) terms defined
   in [<a href="rfc4655.html" title='"A Path Computation Element (PCE)-Based Architecture"'>RFC4655</a>].

   TE LSP: Traffic Engineering Label Switched Path

   MPLS-TE LSP: Multiprotocol Label Switching TE LSP

   C-RSVP path: Customer RSVP path: a native RSVP path with the
                bandwidth reservation of X for customers

   C-TE LSP: Customer Traffic Engineering Label Switched Path: an end-
             to-end MPLS-TE LSP for customers

   P-TE LSP: Provider Traffic Engineering Label Switched Path: a
             transport TE LSP between two Provider Edges (PEs)

   LSR: a Label Switched Router

   Head-end LSR: an ingress LSR

   Tail-end LSR: an egress LSR

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Problem%20Statement"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Problem Statement</span>

   Service providers want to deliver triple-play services with QoS
   guarantees to their customers.  Various techniques are available to
   achieve this.  Some service providers will wish to offer advanced
   services using an RSVP signaling for native IP flows (C-RSVP) or an
   RSVP-TE signaling for Customer TE LSPs (C-TE LSPs) over BGP/MPLS
   IP-VPNs.

   The following examples outline each method:

   A C-RSVP path with the bandwidth reservation of X can be used to
   transport voice traffic.  In order to achieve recovery in under 50 ms
   during link, node, and Shared Risk Link Group (SRLG) failures, and to
   provide strict QoS guarantees, a C-TE LSP with bandwidth X between
   data centers or customer sites can be used to carry voice and video
   traffic.  Thus, service providers or customers can choose a C-RSVP
   path or a C-TE LSP to meet their requirements.

   When service providers offer a C-RSVP path between hosts or CEs over
   BGP/MPLS IP-VPNs, the CE/host requests an end-to-end C-RSVP path with
   the bandwidth reservation of X to the remote CE/host.  However, if a
   C-RSVP signaling is to send within a VPN, the service-provider



<span class="grey">Kumaki, et al.                Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   network will face scalability issues because routers need to retain
   the RSVP state per a customer.  Therefore, in order to solve
   scalability issues, multiple C-RSVP reservations can be aggregated at
   a PE, where a P-TE LSP head-end can perform admission control using
   the aggregated C-RSVP reservations.  The method that is described in
   [<a href="rfc4804.html" title='"Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels"'>RFC4804</a>] can be considered as a useful approach.  In this case, a
   reservation request from within the context of a Virtual Routing and
   Forwarding (VRF) instance can get aggregated onto a P-TE LSP.  The
   P-TE LSP can be pre-established, resized based on the request, or
   triggered by the request.  Service providers, however, cannot provide
   a C-RSVP path over the VRF instance as defined in [<a href="rfc4364.html" title='"BGP/MPLS IP Virtual Private Networks (VPNs)"'>RFC4364</a>].  The
   current BGP/MPLS IP-VPN architecture also does not support an RSVP
   instance running in the context of a VRF to process RSVP messages and
   integrated services (int-serv) ([<a href="rfc1633.html" title='"Integrated Services in the Internet Architecture: an Overview"'>RFC1633</a>], [<a href="rfc2210.html" title='"The Use of RSVP with IETF Integrated Services"'>RFC2210</a>]).  One solution
   is described in [<a href="#ref-RSVP-L3VPN" title='"Support for RSVP in Layer 3 VPNs"'>RSVP-L3VPN</a>].

   If service providers offer a C-TE LSP from a CE to a CE over the
   BGP/MPLS IP-VPN, they require that an MPLS-TE LSP from a local CE to
   a remote CE be established.  However, if a C-TE LSP signaling is to
   send within the VPN, the service-provider network may face the
   following scalability issues:

   - A C-TE LSP can be aggregated by a P-TE LSP at a PE (i.e.,
     hierarchical LSPs).  In this case, only a PE maintains the state of
     customer RSVP sessions.

   - A C-TE LSP cannot be aggregated by a P-TE LSP at a PE, depending on
     some policies (i.e., continuous LSPs).  In this case, both Ps and
     PEs maintain the state of customer RSVP sessions.

   - A C-TE LSP can be aggregated by the non-TE LSP (i.e., LDP).
     In this case, only a PE maintains the state of customer RSVP-TE
     sessions.  Note that it is assumed that there is always enough
     bandwidth available in the service-provider core network.

   Furthermore, if service providers provide the C-TE LSP over the
   BGP/MPLS IP-VPN, they currently cannot provide it over the VRF
   instance as defined in [<a href="rfc4364.html" title='"BGP/MPLS IP Virtual Private Networks (VPNs)"'>RFC4364</a>].  Specifically, the current BGP/MPLS
   IP-VPN architecture does not support the RSVP-TE instance running in
   the context of a VRF to process RSVP messages and trigger the
   establishment of the C-TE LSP over the service-provider core network.
   If every C-TE LSP is to trigger the establishment or resizing of a
   P-TE LSP, the service-provider network will also face scalability
   issues that arise from maintaining a large number of P-TE LSPs and/or







<span class="grey">Kumaki, et al.                Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   the dynamic signaling of these P-TE LSPs.  <a href="#section-8.4">Section 8.4</a> of this
   document, "Scalability Considerations", provides detailed scalability
   requirements.

   Two different models have been described above.  The differences
   between C-RSVP paths and C-TE LSPs are as follows:

   - C-RSVP path model: data packets among CEs are forwarded by "native
     IP packets" (i.e., not labeled packets).

   - C-TE LSP model: data packets among CEs are forwarded by "labeled IP
     packets".

   Depending on the service level and the need to meet specific
   requirements, service providers should be able to choose P-TE LSPs or
   non-TE LSPs in the backbone network.  The selection may be dependent
   on the service provider's policy and the node's capability to support
   the mechanisms described.

   The items listed below are selectively required to support C-RSVP
   paths and C-TE LSPs over BGP/MPLS IP-VPNs based on the service level.
   For example, some service providers need all of the following items
   to provide a service, and some service providers need only some of
   them to provide the service.  It depends on the service level and
   policy of service providers.  Detailed requirements are described in
   Sections <a href="#section-6">6</a>, <a href="#section-7">7</a>, and <a href="#section-8">8</a>.

   - C-RSVP path QoS guarantees.

   - Fast recovery over the BGP/MPLS IP-VPN to protect traffic for the
     C-TE LSP against CE-PE link failure and PE node failure.

   - Strict C-TE LSP bandwidth and QoS guarantees.

   - Resource optimization for C-RSVP paths and C-TE LSPs.

   - Scalability for C-RSVP paths and C-TE LSPs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Application%20Scenarios"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Application Scenarios</span>

   The following sections present a few application scenarios for C-RSVP
   paths and C-TE LSPs in BGP/MPLS IP-VPN environments.  <a href="#appendix-A">Appendix A</a>,
   "Reference Model", describes a C-RSVP path, a C-TE LSP, and a
   P-TE LSP.

   In all scenarios, it is the responsibility of the service provider to
   ensure that enough bandwidth is available to meet the customers'
   application requirements.



<span class="grey">Kumaki, et al.                Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Scenario%20I%3A%20Fast%20Recovery%20over%20BGP%2FMPLS%20IP-VPNs"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Scenario I: Fast Recovery over BGP/MPLS IP-VPNs</span>

   In this scenario, as shown in Figure 1, a customer uses a VoIP
   application between its sites (i.e., between CE1 and CE2).  H0 and H1
   represent voice equipment.

   In this case, the customer establishes C-TE LSP1 as a primary path
   and C-TE LSP2 as a backup path.  If the link between PE1 and CE1 or
   the node of PE1 fails, C-TE LSP1 needs C-TE LSP2 as a path
   protection.

   Generally speaking, C-RSVP paths are used by customers, and P-TE LSPs
   are used by service providers.

                                C-TE LSP1
             &lt;----------------------------------------------&gt;
                                P-TE LSP1
                      &lt;---------------------------&gt;
   .............                                         .............
   . ---   --- .     ---      ---       ---      ---     . ---   --- .
   .|H0 | |CE1|-----|PE1|----|P1 |-----|P2 |----|PE2|-----|CE2| |H1 |.
   . ---   --- .     ---      ---       ---      ---     . ---   --- .
   .........|...     ---      ---       ---      ---     ...|.........
            +-------|PE3|----|P3 |-----|P4 |----|PE4|-------+
                     ---      ---       ---      ---

                      &lt;---------------------------&gt;
                                P-TE LSP2
             &lt;----------------------------------------------&gt;
                                C-TE LSP2

   &lt;--customer--&gt;    &lt;--------BGP/MPLS IP-VPN-------&gt;    &lt;--customer-&gt;
      network                                               network

                           Figure 1.  Scenario I

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Scenario%20II%3A%20Strict%20C-TE%20LSP%20QoS%20Guarantees"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Scenario II: Strict C-TE LSP QoS Guarantees</span>

   In this scenario, as shown in Figure 2, service provider B (SP B)
   transports voice and video traffic between its sites (i.e., between
   CE1 and CE2).  In this case, service provider B establishes C-TE LSP1
   with preemption priority 0 and 100-Mbps bandwidth for the voice
   traffic, and C-TE LSP2 with preemption priority 1 and 200-Mbps
   bandwidth for the unicast video traffic.  On the other hand, service
   provider A (SP A) also pre-establishes P-TE LSP1 with preemption
   priority 0 and 1-Gbps bandwidth for the voice traffic, and P-TE LSP2
   with preemption priority 1 and 2-Gbps bandwidth for the video




<span class="grey">Kumaki, et al.                Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   traffic.  In this scenario, P-TE LSP1 and P-TE LSP2 should support
   Diffserv-aware MPLS Traffic Engineering (DS-TE) [<a href="rfc4124.html" title='"Protocol Extensions for Support of Diffserv-aware MPLS Traffic Engineering"'>RFC4124</a>].

   PE1 and PE3 should choose an appropriate P-TE LSP based on the
   preemption priority.  In this case, C-TE LSP1 must be associated with
   P-TE LSP1 at PE1, and C-TE LSP2 must be associated with P-TE LSP2 at
   PE3.

   Furthermore, PE1 and PE3 head-ends should control the bandwidth of
   C-TE LSPs.  In this case, PE1 and PE3 can choose C-TE LSPs by the
   amount of maximum available bandwidth for each P-TE LSP,
   respectively.

                                C-TE LSP1
             &lt;----------------------------------------------&gt;
                                P-TE LSP1
                      &lt;---------------------------&gt;
   .............                                         .............
   . ---   --- .     ---      ---       ---      ---     . ---   --- .
   .|CE0| |CE1|-----|PE1|----|P1 |-----|P2 |----|PE2|-----|CE2| |CE3|.
   . ---   --- .     ---      ---       ---      ---     . ---   --- .
   .........|...     ---      ---       ---      ---     ...|.........
            +-------|PE3|----|P3 |-----|P4 |----|PE4|-------+
                     ---      ---       ---      ---

                      &lt;---------------------------&gt;
                                P-TE LSP2
             &lt;----------------------------------------------&gt;
                                C-TE LSP2

    &lt;---SP B----&gt;    &lt;--------BGP/MPLS IP-VPN-------&gt;     &lt;---SP B---&gt;
       network                 SP A network                 network

                          Figure 2.  Scenario II

   It's possible that the customer and the service provider have
   differing preemption priorities.  In this case, the PE policy will
   override the customers.  In the case where the service provider does
   not support preemption priorities, then such priorities should be
   ignored.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Scenario%20III%3A%20Load%20Balance%20of%20CE-to-CE%20Traffic"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Scenario III: Load Balance of CE-to-CE Traffic</span>

   In this scenario, as shown in Figure 3, service provider C (SP C)
   uses voice and video traffic between its sites (i.e., between CE0 and
   CE5/CE7, between CE2 and CE5/CE7, between CE5 and CE0/CE2, and
   between CE7 and CE0/CE2).  H0 and H1 represent voice and video
   equipment.  In this case, service provider C establishes C-TE LSP1,



<span class="grey">Kumaki, et al.                Informational                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   C-TE LSP3, C-TE LSP5, and C-TE LSP7 with preemption priority 0 and
   100-Mbps bandwidth for the voice traffic, and establishes C-TE LSP2,
   C-TE LSP4, C-TE LSP6, and C-TE LSP8 with preemption priority 1 and
   200-Mbps bandwidth for the video traffic.  On the other hand, service
   provider A also pre-establishes P-TE LSP1 and P-TE LSP3 with
   preemption priority 0 and 1-Gbps bandwidth for the voice traffic, and
   P-TE LSP2 and P-TE LSP4 with preemption priority 1 and 2-Gbps
   bandwidth for the video traffic.  In this scenario, P-TE LSP1,
   P-TE LSP2, P-TE LSP3, and P-TE LSP4 should support DS-TE [<a href="rfc4124.html" title='"Protocol Extensions for Support of Diffserv-aware MPLS Traffic Engineering"'>RFC4124</a>].

   All PEs should choose an appropriate P-TE LSP based on the preemption
   priority.  To minimize the traffic disruption due to a single network
   failure, diversely routed C-TE LSPs are established.  In this case,
   the FRR [<a href="rfc4090.html" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] is not necessarily required.

   Also, unconstrained TE LSPs (i.e., C-TE LSPs/P-TE LSPs with
   0 bandwidth) [<a href="rfc5330.html" title='"A Link-Type sub-TLV to Convey the Number of Traffic Engineering Label Switched Paths Signalled with Zero Reserved Bandwidth across a Link"'>RFC5330</a>] are applicable to this scenario.

   Furthermore, the load balancing for any communication between H0 and
   H1 can be done by setting up full-mesh C-TE LSPs between CE0/CE2 and
   CE5/CE7.






























<span class="grey">Kumaki, et al.                Informational                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


             C-TE LSP1(P=0),2(P=1) (CE0-&gt;CE1-&gt;...-&gt;CE4-&gt;CE5)
                                   (CE0&lt;-CE1&lt;-...&lt;-CE4&lt;-CE5)
            &lt;----------------------------------------------&gt;

             C-TE LSP3(P=0),4(P=1) (CE2-&gt;CE1-&gt;...-&gt;CE4-&gt;CE7)
                                   (CE2&lt;-CE1&lt;-...&lt;-CE4&lt;-CE7)
            &lt;----------------------------------------------&gt;
                             P-TE LSP1 (p=0)
                         &lt;--------------------&gt;
                             P-TE LSP2 (p=1)
                         &lt;--------------------&gt;
   ..................                             ..................
   .      ---   --- .  ---    ---     ---    ---  . ---   ---      .
   .     |CE0|-|CE1|--|PE1|--|P1 |---|P2 |--|PE2|--|CE4|-|CE5|     .
   . --- /---   --- .  ---     ---    ---    ---  . ---   ---\ --- .
   .|H0 |     +     .              +              .     +     |H1 |.
   . --- \---   --- .  ---    ---     ---    ---  . ---   ---/ --- .
   .     |CE2|-|CE3|--|PE3|--|P3 |---|P4 |--|PE4|--|CE6|-|CE7|     .
   .      ---   --- .  ---    ---     ---    ---  . ---   ---      .
   ..................                             ..................
                         &lt;--------------------&gt;
                             P-TE LSP3 (p=0)
                         &lt;--------------------&gt;
                             P-TE LSP4 (p=1)
            &lt;----------------------------------------------&gt;
             C-TE LSP5(P=0),6(P=1)  (CE0-&gt;CE3-&gt;...-&gt;CE6-&gt;CE5)
                                    (CE0&lt;-CE3&lt;-...&lt;-CE6&lt;-CE5)

            &lt;----------------------------------------------&gt;
             C-TE LSP7(P=0),8(P=1)  (CE2-&gt;CE3-&gt;...-&gt;CE6-&gt;CE7)
                                    (CE2&lt;-CE3&lt;-...&lt;-CE6&lt;-CE7)

    &lt;-----SP C-----&gt;   &lt;----BGP/MPLS IP-VPN----&gt;   &lt;-----SP C-----&gt;
         network               SP A network             network

                          Figure 3.  Scenario III

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Scenario%20IV%3A%20RSVP%20Aggregation%20over%20MPLS-TE%20Tunnels"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Scenario IV: RSVP Aggregation over MPLS-TE Tunnels</span>

   In this scenario, as shown in Figure 4, the customer has two hosts
   connecting to CE1 and CE2, respectively.  CE1 and CE2 are connected
   to PE1 and PE2, respectively, within a VRF instance belonging to the
   same VPN.  The requesting host (H1) may request from H2 an RSVP path
   with the bandwidth reservation of X.  This reservation request from
   within the context of VRF will get aggregated onto a pre-established
   P-TE/DS-TE LSP based upon procedures similar to [<a href="rfc4804.html" title='"Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels"'>RFC4804</a>].  As in the
   case of [<a href="rfc4804.html" title='"Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels"'>RFC4804</a>], there may be multiple P-TE LSPs belonging to
   different DS-TE class-types.  Local policies can be implemented to



<span class="grey">Kumaki, et al.                Informational                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   map the incoming RSVP path request from H1 to the P-TE LSP with the
   appropriate class-type.  Please note that the end-to-end (e2e) RSVP
   path request may also be initiated by the CE devices themselves.

                                C-RSVP path
        &lt;-----------------------------------------------------&gt;

                                P-TE LSP
                     &lt;---------------------------&gt;
    .............                                     .............
    . ---   --- .   ---      ---       ---      ---   . ---   --- .
    .|H1 | |CE1|---|PE1|----|P1 |-----|P2 |----|PE2|---|CE2| |H2 |.
    . ---   --- .   ---      ---       ---      ---   . ---   --- .
    .............                                     .............
                   ^                               ^
                   |                               |
               VRF instance                    VRF instance

     &lt;-customer-&gt;   &lt;--------BGP/MPLS IP-VPN-------&gt;   &lt;-customer-&gt;
       network                                           network

                          Figure 4.  Scenario IV

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20Scenario%20V%3A%20RSVP%20over%20Non-TE%20LSPs"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  Scenario V: RSVP over Non-TE LSPs</span>

   In this scenario, as shown in Figure 5, a customer has two hosts
   connecting to CE1 and CE2, respectively.  CE1 and CE2 are connected
   to PE1 and PE2, respectively, within a VRF instance belonging to the
   same VPN.  The requesting host (H1) may request from H2 an RSVP path
   with the bandwidth reservation of X.  In this case, a non-TE LSP
   (i.e., LDP, etc.) is provided between PEs and has LDP, which supports
   MPLS Diffserv [<a href="rfc3270.html" title='"Multi-Protocol Label Switching (MPLS) Support of Differentiated Services"'>RFC3270</a>].

   Note that this only provides Diffserv, and not the bandwidth
   reservation as is done with RSVP-TE.

   Local policies can be implemented to map the customer's reserved flow
   to the LSP with the appropriate Traffic Class [<a href="rfc5462.html" title='"Multiprotocol Label Switching (MPLS) Label Stack Entry: "'>RFC5462</a>] at PE1.













<span class="grey">Kumaki, et al.                Informational                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


                               C-RSVP path
              &lt;------------------------------------------&gt;

                               Non-TE LSP
                     &lt;---------------------------&gt;
    .............                                     .............
    . ---   --- .   ---      ---       ---      ---   . ---   --- .
    .|H1 | |CE1|---|PE1|----|P1 |-----|P2 |----|PE2|---|CE2| |H2 |.
    . ---   --- .   ---      ---       ---      ---   . ---   --- .
    .............                                     .............
                   ^                               ^
                   |                               |
               VRF instance                    VRF instance

     &lt;-customer-&gt;   &lt;-------BGP/MPLS IP-VPN-------&gt;   &lt;-customer-&gt;
       network                                          network

                           Figure 5.  Scenario V

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.6.%20%20Scenario%20VI%3A%20RSVP-TE%20over%20Non-TE%20LSPs"></a><a class="selflink" href="#section-5.6" name="section-5.6">5.6</a>.  Scenario VI: RSVP-TE over Non-TE LSPs</span>

   In this scenario, as shown in Figure 6, a customer uses a VoIP
   application between its sites (i.e., between CE1 and CE2).  H0 and H1
   represent voice equipment.  In this case, a non-TE LSP means LDP, and
   the customer establishes C-TE LSP1 as a primary path and C-TE LSP2 as
   a backup path.  If the link between PE1 and CE1 or the node of PE1
   fails, C-TE LSP1 needs C-TE LSP2 as a path protection.
























<span class="grey">Kumaki, et al.                Informational                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


                               C-TE LSP1
               &lt;-----------------------------------------&gt;
                               Non-TE LSP
                      &lt;--------------------------&gt;
     .............                                     .............
     . ---   --- .   ---      ---       ---      ---   . ---   --- .
     .|H0 | |CE1|---|PE1|----|P1 |-----|P2 |----|PE2|---|CE2| |H1 |.
     . ---   --- .   ---      ---       ---      ---   . ---   --- .
     .........|...   ---      ---       ---      ---   ...|.........
              +-----|PE3|----|P3 |-----|P4 |----|PE4|-----+
                     ---      ---       ---      ---

                      &lt;--------------------------&gt;
                               Non-TE LSP
               &lt;-----------------------------------------&gt;
                               C-TE LSP2

     &lt;-customer-&gt;     &lt;------BGP/MPLS IP-VPN------&gt;    &lt;-customer-&gt;
        network                                           network

                          Figure 6.  Scenario VI

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Detailed%20Requirements%20for%20the%20C-TE%20LSP%20Model"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Detailed Requirements for the C-TE LSP Model</span>

   This section describes detailed requirements for C-TE LSPs in
   BGP/MPLS IP-VPN environments.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20%20Selective%20P-TE%20LSPs"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.   Selective P-TE LSPs</span>

   The solution MUST provide the ability to decide which P-TE LSPs a PE
   uses for a C-RSVP path and a C-TE LSP.  When a PE receives a native
   RSVP and/or a path message from a CE, it MUST be able to decide which
   P-TE LSPs it uses.  In this case, various kinds of P-TE LSPs exist in
   the service-provider network.  For example, the PE MUST choose an
   appropriate P-TE LSP based on local policies such as:

   1. preemption priority
   2. affinity
   3. class-type
   4. on the data plane: (Differentiated Services Code Point (DSCP) or
      Traffic Class bits)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Graceful%20Restart%20Support%20for%20C-TE%20LSPs"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Graceful Restart Support for C-TE LSPs</span>

   The solution SHOULD support the graceful restart capability, where
   the C-TE LSP traffic continues to be forwarded during a PE graceful
   restart.  Graceful restart mechanisms related to this architecture
   are described in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], [<a href="rfc3623.html" title='"Graceful OSPF Restart"'>RFC3623</a>], and [<a href="rfc4781.html" title='"Graceful Restart Mechanism for BGP with MPLS"'>RFC4781</a>].



<span class="grey">Kumaki, et al.                Informational                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Rerouting%20Support%20for%20C-TE%20LSPs"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Rerouting Support for C-TE LSPs</span>

   The solution MUST provide the rerouting of a C-TE LSP in case of
   link, node, and SRLG failures, or in case of preemption.  Such
   rerouting may be controlled by a CE or by a PE, depending on the
   failure.  In a dual-homed environment, the ability to perform
   rerouting MUST be provided against a CE-PE link failure or a PE
   failure, if another CE-PE link or PE is available between the head-
   end and the tail-end of the C-TE LSP.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4.%20%20FRR%20Support%20for%20C-TE%20LSPs"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a>.  FRR Support for C-TE LSPs</span>

   The solution MUST support FRR [<a href="rfc4090.html" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] features for a C-TE LSP over
   a VRF instance.

   In BGP/MPLS IP-VPN environments, a C-TE LSP from a CE traverses
   multiple PEs and Ps, albeit tunneled over a P-TE LSP.  In order to
   avoid PE-CE link/PE node/SRLG failures, a CE (a customer's head-end
   router) needs to support link protection or node protection.

   The following protection MUST be supported:

   1. CE link protection
   2. PE node protection
   3. CE node protection

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.5.%20%20Admission%20Control%20Support%20on%20P-TE%20LSP%20Head-Ends"></a><a class="selflink" href="#section-6.5" name="section-6.5">6.5</a>.  Admission Control Support on P-TE LSP Head-Ends</span>

   The solution MUST support admission control on a P-TE LSP tunnel
   head-end for C-TE LSPs.  C-TE LSPs may potentially try to reserve the
   bandwidth that exceeds the bandwidth of the P-TE LSP.  The P-TE LSP
   tunnel head-end SHOULD control the number of C-TE LSPs and/or the
   bandwidth of C-TE LSPs.  For example, the transport TE LSP head-end
   SHOULD have a configurable limit on the maximum number of C-TE LSPs
   that it can admit from a CE.  As for the amount of bandwidth that can
   be reserved by C-TE LSPs, there could be two situations:

   1. Let the P-TE LSP do its natural bandwidth admission
   2. Set a cap on the amount of bandwidth, and have the configuration
      option to:

      a. Reserve the minimum cap bandwidth or the C-TE LSP bandwidth on
         the P-TE LSP if the required bandwidth is available
      b. Reject the C-TE LSP if the required bandwidth by the C-TE LSP
         is not available






<span class="grey">Kumaki, et al.                Informational                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.6.%20%20Admission%20Control%20Support%20for%20C-TE%20LSPs%20in%20LDP-Based%20Core"></a><a class="selflink" href="#section-6.6" name="section-6.6">6.6</a>.  Admission Control Support for C-TE LSPs in LDP-Based Core</span>
<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/Networks"></a>      Networks</span>

   The solution MUST support admission control for a C-TE LSP at a PE in
   the LDP-based core network.  Specifically, PEs MUST have a
   configurable limit on the maximum amount of bandwidth that can be
   reserved by C-TE LSPs for a given VRF instance (i.e., for a given
   customer).  Also, a PE SHOULD have a configurable limit on the total
   amount of bandwidth that can be reserved by C-TE LSPs between PEs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.7.%20%20Policy%20Control%20Support%20for%20C-TE%20LSPs"></a><a class="selflink" href="#section-6.7" name="section-6.7">6.7</a>.  Policy Control Support for C-TE LSPs</span>

   The solution MUST support the policy control for a C-TE LSP at a PE.

   The PE MUST be able to perform the following:

   1. Limit the rate of RSVP messages per CE link.
   2. Accept and map, or reject, requests for a given affinity.
   3. Accept and map, or reject, requests with a specified setup and/or
      preemption priorities.
   4. Accept or reject requests for fast reroutes.
   5. Ignore the requested setup and/or preemption priorities, and
      select a P-TE LSP based on a local policy that applies to the
      CE-PE link or the VRF.
   6. Ignore the requested affinity, and select a P-TE LSP based on a
      local policy that applies to the CE-PE link or the VRF.
   7. Perform mapping in the data plane between customer Traffic Class
      bits and transport P-TE LSP Traffic Class bits, as signaled per
      [<a href="rfc3270.html" title='"Multi-Protocol Label Switching (MPLS) Support of Differentiated Services"'>RFC3270</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.8.%20%20PCE%20Features%20Support%20for%20C-TE%20LSPs"></a><a class="selflink" href="#section-6.8" name="section-6.8">6.8</a>.  PCE Features Support for C-TE LSPs</span>

   The solution SHOULD support the PCE architecture for a C-TE LSP
   establishment in the context of a VRF instance.  When a C-TE LSP is
   provided, CEs, PEs, and Ps may support PCE features ([<a href="rfc4655.html" title='"A Path Computation Element (PCE)-Based Architecture"'>RFC4655</a>],
   [<a href="rfc5440.html" title='"Path Computation Element (PCE) Communication Protocol (PCEP)"'>RFC5440</a>]).

   In this case, CE routers or PE routers may be Path Computation
   Clients (PCCs), and PE routers and/or P routers may be PCEs.
   Furthermore, the solution SHOULD support a mechanism for dynamic PCE
   discovery.  Specifically, all PCEs are not necessarily discovered
   automatically, and only specific PCEs that know VPN routes should be
   discovered automatically.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.9.%20%20Diversely%20Routed%20C-TE%20LSP%20Support"></a><a class="selflink" href="#section-6.9" name="section-6.9">6.9</a>.  Diversely Routed C-TE LSP Support</span>

   The solution MUST provide for setting up diversely routed C-TE LSPs
   over the VRF instance.  These diverse C-TE LSPs MAY be traversing



<span class="grey">Kumaki, et al.                Informational                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   over two different P-TE LSPs that are fully disjoint within a
   service-provider network.  When a single CE has multiple uplinks that
   connect to different PEs, it is desirable that multiple C-TE LSPs
   over the VRF instance be established between a pair of LSRs.  When
   two CEs have multiple uplinks that connect to different PEs, it is
   desirable that multiple C-TE LSPs over the VRF instance be
   established between two different pairs of LSRs.  In these cases, for
   example, the following points will be beneficial to customers.

   1. load balance of the CE-to-CE traffic across diverse C-TE LSPs so
      as to minimize the traffic disruption in case of a single network
      element failure
   2. path protection (e.g., 1:1, 1:N)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.10.%20%20Optimal%20Path%20Support%20for%20C-TE%20LSPs"></a><a class="selflink" href="#section-6.10" name="section-6.10">6.10</a>.  Optimal Path Support for C-TE LSPs</span>

   The solution MUST support the optimal path for a C-TE LSP over the
   VRF instance.  Depending on an application (e.g., voice and video),
   an optimal path is needed for a C-TE LSP over the VRF instance.  In
   the case of a TE LSP, an optimal route may be the shortest path based
   on the TE metric applied.  For a non-TE LSP using LDP, the IGP metric
   may be used to compute optimal paths.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.11.%20%20Reoptimization%20Support%20for%20C-TE%20LSPs"></a><a class="selflink" href="#section-6.11" name="section-6.11">6.11</a>.  Reoptimization Support for C-TE LSPs</span>

   The solution MUST support the reoptimization of a C-TE LSP over the
   VRF instance.  These LSPs MUST be reoptimized using "make-before-
   break" [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>].

   In this case, it is desirable for a CE to be configured with regard
   to the timer-based or event-driven reoptimization.  Furthermore,
   customers SHOULD be able to reoptimize a C-TE LSP manually.  To
   provide for delay-sensitive or jitter-sensitive traffic (i.e., voice
   traffic), C-TE LSP path computation and route selection are expected
   to be optimal for the specific application.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.12.%20%20DS-TE%20Support%20for%20C-TE%20LSPs"></a><a class="selflink" href="#section-6.12" name="section-6.12">6.12</a>.  DS-TE Support for C-TE LSPs</span>

   The solution MUST support DS-TE [<a href="rfc4124.html" title='"Protocol Extensions for Support of Diffserv-aware MPLS Traffic Engineering"'>RFC4124</a>] for a C-TE LSP over the VRF
   instance.  In the event that the service provider and the customer
   have differing bandwidth constraint models, then only the service-
   provider bandwidth model should be supported.

   Applications, which have different traffic characteristics, are used
   in BGP/MPLS IP-VPN environments.  Service providers try to achieve
   the fine-grained optimization of transmission resources, efficiency,
   and further-enhanced network performance.  It may be desirable to
   perform TE at a per-class level.



<span class="grey">Kumaki, et al.                Informational                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   By mapping the traffic from a given Diffserv class of service on a
   separate C-TE LSP, DS-TE allows this traffic to utilize resources
   available to the given class on both shortest paths and non-shortest
   paths, and also to follow paths that meet TE constraints that are
   specific to the given class.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Detailed%20Requirements%20for%20the%20C-RSVP%20Path%20Model"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Detailed Requirements for the C-RSVP Path Model</span>

   This section describes detailed requirements for C-RSVP paths in
   BGP/MPLS IP-VPN environments.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Admission%20Control%20between%20PE%20and%20CE%20for%20C-RSVP%20Paths"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Admission Control between PE and CE for C-RSVP Paths</span>

   The solution MUST support admission control at the ingress PE.  PEs
   MUST control RSVP messages per a VRF instance.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Aggregation%20of%20C-RSVP%20Paths%20by%20P-TE%20LSPs"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Aggregation of C-RSVP Paths by P-TE LSPs</span>

   The solution SHOULD support C-RSVP paths aggregated by P-TE LSPs.
   P-TE LSPs SHOULD be pre-established manually or dynamically by
   operators and MAY be established if triggered by C-RSVP messages.
   Also, the P-TE LSP SHOULD support DS-TE.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.3.%20%20Non-TE%20LSP%20Support%20for%20C-RSVP%20Paths"></a><a class="selflink" href="#section-7.3" name="section-7.3">7.3</a>.  Non-TE LSP Support for C-RSVP Paths</span>

   The solution SHOULD support non-TE LSPs (i.e., LDP-based LSP, etc.).
   Non-TE LSPs are established by LDP [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>] between PEs and support
   MPLS Diffserv [<a href="rfc3270.html" title='"Multi-Protocol Label Switching (MPLS) Support of Differentiated Services"'>RFC3270</a>].  The solution MAY support local policies to
   map the customer's reserved flow to the LSP with the appropriate
   Traffic Class at the PE.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.4.%20%20Transparency%20of%20C-RSVP%20Paths"></a><a class="selflink" href="#section-7.4" name="section-7.4">7.4</a>.  Transparency of C-RSVP Paths</span>

   The solution SHOULD NOT change RSVP messages from the local CE to the
   remote CE (Path, Resv, Path Error, Resv Error, etc.).  The solution
   SHOULD allow customers to receive RSVP messages transparently between
   CE sites.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Commonly%20Detailed%20Requirements%20for%20Two%20Models"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Commonly Detailed Requirements for Two Models</span>

   This section describes commonly detailed requirements for C-TE LSPs
   and C-RSVP paths in BGP/MPLS IP-VPN environments.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20CE-PE%20Routing"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  CE-PE Routing</span>

   The solution SHOULD support the following routing configuration on
   the CE-PE links with either RSVP or RSVP-TE on the CE-PE link:




<span class="grey">Kumaki, et al.                Informational                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   1. static routing
   2. BGP routing
   3. OSPF
   4. OSPF-TE (RSVP-TE case only)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Complexity%20and%20Risks"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Complexity and Risks</span>

   The solution SHOULD avoid introducing unnecessary complexity to the
   current operating network to such a degree that it would affect the
   stability and diminish the benefits of deploying such a solution over
   SP networks.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.3.%20%20Backward%20Compatibility"></a><a class="selflink" href="#section-8.3" name="section-8.3">8.3</a>.  Backward Compatibility</span>

   The deployment of C-RSVP paths and C-TE LSPs SHOULD avoid impacting
   existing RSVP and MPLS-TE mechanisms, respectively, but should allow
   for a smooth migration or co-existence.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.4.%20%20Scalability%20Considerations"></a><a class="selflink" href="#section-8.4" name="section-8.4">8.4</a>.  Scalability Considerations</span>

   The solution SHOULD minimize the impact on network scalability from a
   C-RSVP path and a C-TE LSP over the VRF instance.  As identified in
   earlier sections, PCE provides a method for offloading computation of
   C-TE LSPs and helps with the solution scalability.

   The solution MUST address the scalability of C-RSVP paths and
   C-TE LSPs for the following protocols.

   1. RSVP (e.g., number of RSVP messages, retained state, etc.).
   2. RSVP-TE (e.g., number of RSVP control messages, retained state,
      message size, etc.).
   3. BGP (e.g., number of routes, flaps, overload events, etc.).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.5.%20%20Performance%20Considerations"></a><a class="selflink" href="#section-8.5" name="section-8.5">8.5</a>.  Performance Considerations</span>

   The solution SHOULD be evaluated with regard to the following
   criteria.

   1. Degree of path optimality of the C-TE LSP.
   2. TE LSP setup time.
   3. Failure and restoration time.
   4. Impact and scalability of the control plane due to added overhead.
   5. Impact and scalability of the data/forwarding plane due to added
      overhead.







<span class="grey">Kumaki, et al.                Informational                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.6.%20%20Management%20Considerations"></a><a class="selflink" href="#section-8.6" name="section-8.6">8.6</a>.  Management Considerations</span>

   The solution MUST address the manageability of C-RSVP paths and
   C-TE LSPs for the following considerations.

   1. Need for a MIB module for the control plane (including mapping of
      P-TE LSPs and C-TE LSPs) and bandwidth monitoring.
   2. Need for diagnostic tools (this includes traceroute and Ping).

   The solution MUST allow routers to support the MIB module for C-RSVP
   paths and C-TE LSPs per a VRF instance.  If a CE is managed by
   service providers, the solution MUST allow service providers to
   collect MIB information for C-RSVP paths and C-TE LSPs from the CE
   per a customer.

   Diagnostic tools can detect failures of the control plane and data
   plane for general MPLS-TE LSPs [<a href="rfc4379.html" title='"Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures"'>RFC4379</a>].  The solution MUST allow
   routers to be able to detect failures of the control plane and the
   data plane for C-TE LSPs over a VRF instance.

   MPLS Operations, Administration, and Maintenance (OAM) for C-TE LSPs
   MUST be supported within the context of VRF, except for the above.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   Any solution should consider the following general security
   requirements:

   1. The solution SHOULD NOT divulge the service-provider topology
      information to the customer network.
   2. The solution SHOULD minimize the service-provider network's
      vulnerability to Denial of Service (DoS) attacks.
   3. The solution SHOULD minimize the misconfiguration of DSCP marking,
      preemption, and holding priorities of the customer traffic.

   The following additional security issues for C-TE LSPs relate to both
   the control plane and the data plane.

   In terms of the control plane, in both the C-RSVP path and C-TE LSP
   models, a PE receives IPv4 or IPv6 RSVP control packets from a CE.
   If the CE is a router that is not trusted by service providers, the
   PE MUST be able to limit the rate and number of IPv4 or IPv6 RSVP
   control packets.

   In terms of the data plane, in the C-TE LSP model, a PE receives
   labeled IPv4 or IPv6 data packets from a CE.  If the CE is a router
   that is not trusted by service providers, the PE MUST be able to
   limit the rate of labeled IPv4 or IPv6 data packets.  If the CE is a



<span class="grey">Kumaki, et al.                Informational                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   trusted router for service providers, the PE MAY be able to limit the
   rate of labeled IPv4 or IPv6 data packets.  Specifically, the PE must
   drop MPLS-labeled packets if the MPLS label was not assigned over the
   PE-CE link on which the packet was received.  The PE must also be
   able to police traffic to the traffic profile associated with the LSP
   on which traffic is received on the PE-CE link.

   Moreover, flooding RSVP/RSVP-TE control packets from malicious
   customers must be avoided.  Therefore, a PE MUST isolate the impact
   of such customers' RSVP/RSVP-TE packets from other customers.

   In the event that C-TE LSPs are diversely routed over VRF instances,
   the VRF should indicate to the CE how such diversity was provided.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC1633" name="ref-RFC1633">RFC1633</a>]      Braden, R., Clark, D., and S. Shenker, "Integrated
                  Services in the Internet Architecture: an Overview",
                  <a href="rfc1633.html">RFC 1633</a>, June 1994.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]      Bradner, S., "Key words for use in RFCs to Indicate
                  Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2210" name="ref-RFC2210">RFC2210</a>]      Wroclawski, J., "The Use of RSVP with IETF Integrated
                  Services", <a href="rfc2210.html">RFC 2210</a>, September 1997.

   [<a id="ref-RFC3209" name="ref-RFC3209">RFC3209</a>]      Awduche, D., Berger, L., Gan, D., Li, T.,
                  Srinivasan, V., and G. Swallow, "RSVP-TE: Extensions
                  to RSVP for LSP Tunnels", <a href="rfc3209.html">RFC 3209</a>, December 2001.

   [<a id="ref-RFC3270" name="ref-RFC3270">RFC3270</a>]      Le Faucheur, F., Wu, L., Davie, B., Davari, S.,
                  Vaananen, P., Krishnan, R., Cheval, P., and
                  J. Heinanen, "Multi-Protocol Label Switching (MPLS)
                  Support of Differentiated Services", <a href="rfc3270.html">RFC 3270</a>,
                  May 2002.

   [<a id="ref-RFC3473" name="ref-RFC3473">RFC3473</a>]      Berger, L., Ed., "Generalized Multi-Protocol Label
                  Switching (GMPLS) Signaling Resource ReserVation
                  Protocol-Traffic Engineering (RSVP-TE) Extensions",
                  <a href="rfc3473.html">RFC 3473</a>, January 2003.

   [<a id="ref-RFC3623" name="ref-RFC3623">RFC3623</a>]      Moy, J., Pillay-Esnault, P., and A. Lindem, "Graceful
                  OSPF Restart", <a href="rfc3623.html">RFC 3623</a>, November 2003.






<span class="grey">Kumaki, et al.                Informational                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   [<a id="ref-RFC4090" name="ref-RFC4090">RFC4090</a>]      Pan, P., Ed., Swallow, G., Ed., and A. Atlas, Ed.,
                  "Fast Reroute Extensions to RSVP-TE for LSP Tunnels",
                  <a href="rfc4090.html">RFC 4090</a>, May 2005.

   [<a id="ref-RFC4124" name="ref-RFC4124">RFC4124</a>]      Le Faucheur, F., Ed., "Protocol Extensions for Support
                  of Diffserv-aware MPLS Traffic Engineering", <a href="rfc4124.html">RFC 4124</a>,
                  June 2005.

   [<a id="ref-RFC4364" name="ref-RFC4364">RFC4364</a>]      Rosen, E. and Y. Rekhter, "BGP/MPLS IP Virtual Private
                  Networks (VPNs)", <a href="rfc4364.html">RFC 4364</a>, February 2006.

   [<a id="ref-RFC4379" name="ref-RFC4379">RFC4379</a>]      Kompella, K. and G. Swallow, "Detecting Multi-Protocol
                  Label Switched (MPLS) Data Plane Failures", <a href="rfc4379.html">RFC 4379</a>,
                  February 2006.

   [<a id="ref-RFC4655" name="ref-RFC4655">RFC4655</a>]      Farrel, A., Vasseur, J.-P., and J. Ash, "A Path
                  Computation Element (PCE)-Based Architecture",
                  <a href="rfc4655.html">RFC 4655</a>, August 2006.

   [<a id="ref-RFC4781" name="ref-RFC4781">RFC4781</a>]      Rekhter, Y. and R. Aggarwal, "Graceful Restart
                  Mechanism for BGP with MPLS", <a href="rfc4781.html">RFC 4781</a>, January 2007.

   [<a id="ref-RFC5036" name="ref-RFC5036">RFC5036</a>]      Andersson, L., Ed., Minei, I., Ed., and B. Thomas,
                  Ed., "LDP Specification", <a href="rfc5036.html">RFC 5036</a>, October 2007.

   [<a id="ref-RFC5462" name="ref-RFC5462">RFC5462</a>]      Andersson, L. and R. Asati, "Multiprotocol Label
                  Switching (MPLS) Label Stack Entry: "EXP" Field
                  Renamed to "Traffic Class" Field", <a href="rfc5462.html">RFC 5462</a>,
                  February 2009.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-RSVP-L3VPN" name="ref-RSVP-L3VPN">RSVP-L3VPN</a>]   Davie, B., Le Faucheur, F., and A. Narayanan, "Support
                  for RSVP in Layer 3 VPNs", Work in Progress,
                  November 2009.

   [<a id="ref-RFC4804" name="ref-RFC4804">RFC4804</a>]      Le Faucheur, F., Ed., "Aggregation of Resource
                  ReSerVation Protocol (RSVP) Reservations over MPLS
                  TE/DS-TE Tunnels", <a href="rfc4804.html">RFC 4804</a>, February 2007.

   [<a id="ref-RFC5330" name="ref-RFC5330">RFC5330</a>]      Vasseur, JP., Ed., Meyer, M., Kumaki, K., and
                  A. Bonda, "A Link-Type sub-TLV to Convey the Number of
                  Traffic Engineering Label Switched Paths Signalled
                  with Zero Reserved Bandwidth across a Link", <a href="rfc5330.html">RFC 5330</a>,
                  October 2008.






<span class="grey">Kumaki, et al.                Informational                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


   [<a id="ref-RFC5440" name="ref-RFC5440">RFC5440</a>]      Vasseur, JP., Ed., and JL. Le Roux, Ed., "Path
                  Computation Element (PCE) Communication Protocol
                  (PCEP)", <a href="rfc5440.html">RFC 5440</a>, March 2009.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Acknowledgments"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Acknowledgments</span>

   The authors would like to express thanks to Nabil Bitar,
   David McDysan, and Daniel King for their helpful and useful comments
   and feedback.










































<span class="grey">Kumaki, et al.                Informational                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Reference%20Model"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Reference Model</span>

   In this appendix, a C-RSVP path, a C-TE LSP, and a P-TE LSP are
   explained.

   All scenarios in this appendix assume the following:

   - A P-TE LSP is established between PE1 and PE2.  This LSP is used by
     the VRF instance to forward customer packets within a BGP/MPLS
     IP-VPN.

   - The service provider has ensured that enough bandwidth is available
     to meet the service requirements.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.1.%20%20End-to-End%20C-RSVP%20Path%20Model"></a><a class="selflink" href="#appendix-A.1" name="appendix-A.1">A.1</a>.  End-to-End C-RSVP Path Model</span>

   A C-RSVP path and a P-TE LSP are shown in Figure 7, in the context of
   a BGP/MPLS IP-VPN.  A P-TE LSP may be a non-TE LSP (i.e., LDP) in
   some cases.  In the case of a non-TE mechanism, however, it may be
   difficult to guarantee an end-to-end bandwidth, as resources are
   shared.

   CE0/CE1 requests an e2e C-RSVP path to CE3/CE2 with the bandwidth
   reservation of X.  At PE1, this reservation request received in the
   context of a VRF will get aggregated onto a pre-established P-TE LSP,
   or trigger the establishment of a new P-TE LSP.  It should be noted
   that C-RSVP sessions across different BGP/MPLS IP-VPNs can be
   aggregated onto the same P-TE LSP between the same PE pair, achieving
   further scalability.  [<a href="rfc4804.html" title='"Aggregation of Resource ReSerVation Protocol (RSVP) Reservations over MPLS TE/DS-TE Tunnels"'>RFC4804</a>] defines this scenario in more detail.

   The RSVP control messages (e.g., an RSVP PATH message and an RSVP
   RESV message) exchanged among CEs are forwarded by IP packets through
   the BGP/MPLS IP-VPN.  After CE0 and/or CE1 receive a reservation
   message from CE2 and/or CE3, CE0/CE1 establishes a C-RSVP path
   through the BGP/MPLS IP-VPN.
















<span class="grey">Kumaki, et al.                Informational                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


                              C-RSVP path
                &lt;------------------------------------------&gt;

                               P-TE LSP
                     &lt;---------------------------&gt;
    .............                                     .............
    . ---   --- .   ---      ---       ---      ---   . ---   --- .
    .|CE0| |CE1|---|PE1|----|P1 |-----|P2 |----|PE2|---|CE2| |CE3|.
    . ---   --- .   ---      ---       ---      ---   . ---   --- .
    .............                                     .............
                   ^                               ^
                   |                               |
              VRF instance                    VRF instance

     &lt;-customer-&gt;    &lt;------BGP/MPLS IP-VPN------&gt;     &lt;-customer-&gt;
       network                                           network
         or                                                or
       another                                           another
   service-provider                                  service-provider
       network                                           network

                     Figure 7.  e2e C-RSVP Path Model

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.2.%20%20End-to-End%20C-TE%20LSP%20Model"></a><a class="selflink" href="#appendix-A.2" name="appendix-A.2">A.2</a>.  End-to-End C-TE LSP Model</span>

   A C-TE LSP and a P-TE LSP are shown in Figure 8, in the context of a
   BGP/MPLS IP-VPN.  A P-TE LSP may be a non-TE LSP (i.e., LDP) in some
   cases.  As described in the previous sub-section, it may be difficult
   to guarantee an end-to-end QoS in some cases.

   CE0/CE1 requests an e2e TE LSP path to CE3/CE2 with the bandwidth
   reservation of X.  At PE1, this reservation request received in the
   context of a VRF will get aggregated onto a pre-established P-TE LSP,
   or trigger the establishment of a new P-TE LSP.  It should be noted
   that C-TE LSPs across different BGP/MPLS IP-VPNs can be aggregated
   onto the same P-TE LSP between the same PE pair, achieving further
   scalability.

   The RSVP-TE control messages (e.g., an RSVP PATH message and an RSVP
   RESV message) exchanged among CEs are forwarded by a labeled packet
   through the BGP/MPLS IP-VPN.  After CE0 and/or CE1 receive a
   reservation message from CE2 and/or CE3, CE0/CE1 establishes a
   C-TE LSP through the BGP/MPLS IP-VPN.

   A P-TE LSP is established between PE1 and PE2.  This LSP is used by
   the VRF instance to forward customer packets within the BGP/MPLS
   IP-VPN.




<span class="grey">Kumaki, et al.                Informational                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


                                 C-TE LSP
        &lt;-------------------------------------------------------&gt;

                                    or

                                 C-TE LSP
               &lt;-----------------------------------------&gt;

                                 P-TE LSP
                      &lt;---------------------------&gt;
     .............                                     .............
     . ---   --- .   ---      ---       ---      ---   . ---   --- .
     .|CE0| |CE1|---|PE1|----|P1 |-----|P2 |----|PE2|---|CE2| |CE3|.
     . ---   --- .   ---      ---       ---      ---   . ---   --- .
     .............                                     .............
                    ^                               ^
                    |                               |
               VRF instance                    VRF instance

      &lt;-customer-&gt;   &lt;-------BGP/MPLS IP-VPN-------&gt;    &lt;-customer-&gt;
        network                                           network
           or                                                or
        another                                           another
    service-provider                                  service-provider
        network                                           network

                       Figure 8.  e2e C-TE LSP Model
























<span class="grey">Kumaki, et al.                Informational                    [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc5824.html">RFC 5824</a>      Supporting RSVP/RSVP-TE over BGP/MPLS IP-VPN    April 2010</span>


Authors' Addresses

   Kenji Kumaki (Editor)
   KDDI Corporation
   Garden Air Tower
   Iidabashi, Chiyoda-ku
   Tokyo 102-8460, JAPAN
   EMail: ke-kumaki@kddi.com


   Raymond Zhang
   BT
   Farady Building, PP1.21
   1 Knightrider Street
   London EC4V 5BT
   UK
   EMail: raymond.zhang@bt.com


   Yuji Kamite
   NTT Communications Corporation
   Granpark Tower
   3-4-1 Shibaura, Minato-ku
   Tokyo  108-8118
   Japan
   EMail: y.kamite@ntt.com

























Kumaki, et al.                Informational                    [Page 27]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc5824 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:33 GMT --></html>