<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc7466 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:21 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-dearlove-manet-nhdp-optimization" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:7466" name="DC.Identifier"/>
<meta content="March, 2015" name="DC.Date.Issued"/>
<meta content="Clausen, Thomas Heide" name="DC.Creator"/>
<meta content="Dearlove, Christopher" name="DC.Creator"/>
<meta content='The link quality mechanism of the Mobile Ad Hoc Network (MANET)
Neighborhood Discovery Protocol (NHDP) enables "ignoring" some 1-hop
neighbors if the measured link quality from that 1-hop neighbor is
below an acceptable threshold while still retaining the corresponding
link information as acquired from the HELLO message exchange. This
allows immediate reinstatement of the 1-hop neighbor if the link
quality later improves sufficiently.  NHDP also collects information
about symmetric 2-hop neighbors. However, it specifies that if a link
from a symmetric 1-hop neighbor ceases being symmetric, including
while "ignored" (as described above), then corresponding symmetric
2-hop neighbors are removed. This may lead to symmetric 2-hop
neighborhood information being permanently removed (until further
HELLO messages are received) if the link quality of a symmetric 1-hop
neighbor drops below the acceptable threshold, even if only for a
moment.  This specification updates RFC 6130 "Mobile Ad Hoc Network
(MANET) Neighborhood Discovery Protocol (NHDP)" and RFC 7181 "The
Optimized Link State Routing Protocol Version 2 (OLSRv2)" to permit,
as an option, retaining, but ignoring, symmetric 2-hop information
when the link quality from the corresponding 1-hop neighbor drops
below the acceptable threshold. This allows immediate reinstatement of
the symmetric 2-hop neighbor if the link quality later improves
sufficiently, thus making the symmetric 2-hop neighborhood more
"robust".' name="DC.Description.Abstract"/>
<meta content="An Optimization for the Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 7466 - An Optimization for the Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7466.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7466" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-manet-nhdp-optimization" title="draft-ietf-manet-nhdp-optimization">draft-ietf-mane...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7466" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7466" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7466" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                       C. Dearlove
Request for Comments: 7466                               BAE Systems ATC
Updates: <a href="rfc6130.html">6130</a>, <a href="rfc7181.html">7181</a>                                           T. Clausen
Category: Standards Track                       LIX, Ecole Polytechnique
ISSN: 2070-1721                                               March 2015


         <span class="h1">An Optimization for the Mobile Ad Hoc Network (MANET)</span>
                 <span class="h1">Neighborhood Discovery Protocol (NHDP)</span>

Abstract

   The link quality mechanism of the Mobile Ad Hoc Network (MANET)
   Neighborhood Discovery Protocol (NHDP) enables "ignoring" some 1-hop
   neighbors if the measured link quality from that 1-hop neighbor is
   below an acceptable threshold while still retaining the corresponding
   link information as acquired from the HELLO message exchange.  This
   allows immediate reinstatement of the 1-hop neighbor if the link
   quality later improves sufficiently.

   NHDP also collects information about symmetric 2-hop neighbors.
   However, it specifies that if a link from a symmetric 1-hop neighbor
   ceases being symmetric, including while "ignored" (as described
   above), then corresponding symmetric 2-hop neighbors are removed.
   This may lead to symmetric 2-hop neighborhood information being
   permanently removed (until further HELLO messages are received) if
   the link quality of a symmetric 1-hop neighbor drops below the
   acceptable threshold, even if only for a moment.

   This specification updates <a href="rfc6130.html">RFC 6130</a> "Mobile Ad Hoc Network (MANET)
   Neighborhood Discovery Protocol (NHDP)" and <a href="rfc7181.html">RFC 7181</a> "The Optimized
   Link State Routing Protocol Version 2 (OLSRv2)" to permit, as an
   option, retaining, but ignoring, symmetric 2-hop information when the
   link quality from the corresponding 1-hop neighbor drops below the
   acceptable threshold.  This allows immediate reinstatement of the
   symmetric 2-hop neighbor if the link quality later improves
   sufficiently, thus making the symmetric 2-hop neighborhood more
   "robust".













<span class="grey">Dearlove &amp; Clausen           Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc7466.html">RFC 7466</a>                    NHDP Optimization                 March 2015</span>


Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7466">http://www.rfc-editor.org/info/rfc7466</a>.

Copyright Notice

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Applicability Statement .........................................<a href="#page-4">4</a>
   <a href="#section-4">4</a>. Changes to NHDP .................................................<a href="#page-4">4</a>
      <a href="#section-4.1">4.1</a>. Interface Information Bases ................................<a href="#page-5">5</a>
      <a href="#section-4.2">4.2</a>. HELLO Message Processing ...................................<a href="#page-5">5</a>
      <a href="#section-4.3">4.3</a>. Information Base Changes ...................................<a href="#page-5">5</a>
      <a href="#section-4.4">4.4</a>. Constraints ................................................<a href="#page-6">6</a>
   <a href="#section-5">5</a>. Changes to OLSRv2 ...............................................<a href="#page-6">6</a>
   <a href="#section-6">6</a>. Security Considerations .........................................<a href="#page-8">8</a>
   <a href="#section-7">7</a>. References ......................................................<a href="#page-8">8</a>
      <a href="#section-7.1">7.1</a>. Normative References .......................................<a href="#page-8">8</a>
      <a href="#section-7.2">7.2</a>. Informative References .....................................<a href="#page-8">8</a>
   Acknowledgements ...................................................<a href="#page-9">9</a>
   Authors' Addresses .................................................<a href="#page-9">9</a>





<span class="grey">Dearlove &amp; Clausen           Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc7466.html">RFC 7466</a>                    NHDP Optimization                 March 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   <a href="#section-14">Section 14</a> of the MANET Neighborhood Discovery Protocol (NHDP)
   [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] contains a link admission mechanism known as "link quality"
   that allows a router using that protocol to "take considerations
   other than message exchange into account for determining when a link
   is and is not a candidate for being considered as HEARD or
   SYMMETRIC."  Specifically, [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] permits a router to disallow
   consideration of some of its 1-hop neighbors for as long as the
   quality of the link from that 1-hop neighbor is below an acceptable
   link quality threshold.

   A feature of this mechanism is that while the link quality remains
   too low, the link information, established by the exchange of HELLO
   messages, is retained.  Thus, if the link quality later goes above
   the required threshold (note that a hysteresis mechanism means that
   two thresholds are used), then the link is immediately established
   and will be immediately available for use.

   [<a id="ref-RFC6130" name="ref-RFC6130">RFC6130</a>] collects not only 1-hop neighbor information, but also
   information about symmetric 2-hop neighbors.  However, [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>]
   specifies that if a 1-hop neighbor was, but no longer is, considered
   symmetric, then the corresponding 2-Hop Tuples that may have been
   recorded for that 2-hop neighbor are to be removed without a
   retention mechanism for a (possibly temporary) loss due to link
   quality.

   This means that if there is a short period in which link quality is
   too low, then when the link quality is re-established all 1-hop
   neighbor information is immediately available for use again.
   However, the corresponding symmetric 2-hop neighbor information has
   been removed and is not available for use until restored by receipt
   of the next corresponding HELLO message.

   This specification describes how [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] can be modified to avoid
   this situation by retaining (but not using) 2-hop information,
   similar to what is done with 1-hop information.  This modification is
   strictly optional, and routers that do and do not implement it can
   interwork entirely successfully (as they also can with different link
   quality specifications).  In addition, by a suitable interpretation
   (that ignored 2-Hop Tuples are not externally advertised), this
   change can be invisible to any other protocols using [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>], in
   particular [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>].  However, the impact on [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>] when 2-Hop
   Tuples are not so handled is also described (owing to the existence
   of implementations of that protocol that are not modularly separated
   from [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>]).

   This specification therefore updates [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] and [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>].



<span class="grey">Dearlove &amp; Clausen           Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc7466.html">RFC 7466</a>                    NHDP Optimization                 March 2015</span>


   This update to [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] does not change the definition of a
   symmetric 2-hop neighbor but adds new state information to each 2-Hop
   Tuple of [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>].  This is to retain some 2-hop neighbor
   information while recording it as currently not to be used.  The new
   state information and retained 2-Hop Tuples are reflected in the
   corresponding tables of the updated NHDP-MIB module [<a href="#ref-NHDP-MIB">NHDP-MIB</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   Additionally, this document uses the terminology of [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] and
   [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Applicability%20Statement"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Applicability Statement</span>

   This specification updates [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>].  The optimization presented in
   this specification is simply permissive, as it allows retaining
   information that otherwise would have been removed but does not use
   that information except when it could have been used by [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>].

   This can, in some cases, ensure that the symmetric 2-hop neighborhood
   is more robust against temporary link quality changes and
   consequently yields a more stable network.  The only other
   consequence of this optimization is that state for some otherwise
   expired 2-Hop Tuples may be maintained for longer.

   This specification also updates [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>].  This could have been
   avoided had instead [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] been updated so as to make the changes
   to it invisible to any other protocol using it.  However, as it is
   known that some implementations of [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>] are not independent of
   the implementation of [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] that they use, it is useful to
   indicate the direct impact on [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>].

   A router that implements the optimization described in this
   specification will interoperate successfully with routers that
   implement [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] but do not implement this optimization.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Changes%20to%20NHDP"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Changes to NHDP</span>

   The following changes are made to [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] if using this
   specification.  Note that while this specification is OPTIONAL, if
   any of these changes are made, then all of these changes MUST be
   made.




<span class="grey">Dearlove &amp; Clausen           Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc7466.html">RFC 7466</a>                    NHDP Optimization                 March 2015</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Interface%20Information%20Bases"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Interface Information Bases</span>

   The 2-Hop Set is modified by adding this additional element to each
   2-Hop Tuple:

      N2_lost is a boolean flag, which indicates the state of the
      corresponding Link Tuple.  If L_status = SYMMETRIC (and thus
      L_lost = false), then N2_lost = false.  If L_SYM_time has not
      expired, and L_lost = true (and hence L_status = LOST), then
      N2_lost = true.

   In all other cases, including other cases with L_status = LOST, there
   will be no such 2-Hop Tuples.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20HELLO%20Message%20Processing"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  HELLO Message Processing</span>

   In <a href="rfc6130.html#section-12.6">Section 12.6 of [RFC6130]</a>, make the following changes:

   o  In point 2, change "L_status = SYMMETRIC" to "L_SYM_time not
      expired".

   o  In point 2, point 1, point 1, under "then create a 2-Hop Tuple
      with:", add a second bullet point "N2_lost: = L_lost".  (Note that
      "2-Hop Neighbor Tuple" has been corrected here to "2-Hop Tuple"
      per [<a href="#ref-Err4276" title="Errata ID 4276">Err4276</a>].)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Information%20Base%20Changes"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Information Base Changes</span>

   In <a href="#section-13">Section 13</a>, replace the second bullet point with:

   o  A Link Tuple's L_status changes from SYMMETRIC, L_SYM_time
      expires, or the Link Tuple is removed.  In this case, the actions
      specified in <a href="#section-13.2">Section 13.2</a> are performed.

   Replace the paragraph after the bullet points with:

   If a Link Tuple is removed, or if L_HEARD_time expires and either
   L_status changes from SYMMETRIC or L_SYM_time expires, then the
   actions specified in <a href="#section-13.2">Section 13.2</a> MUST be performed before the
   actions specified in <a href="#section-13.3">Section 13.3</a> are performed for that Link Tuple.











<span class="grey">Dearlove &amp; Clausen           Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc7466.html">RFC 7466</a>                    NHDP Optimization                 March 2015</span>


   In <a href="rfc6130.html#section-13.2">Section 13.2 of [RFC6130]</a>, add the following before all other
   text:

   For each Link Tuple that has L_SYM_time not expired:

   1.  If L_SYM_time then expires, or if the Link Tuple is removed:

       1.  Remove each 2-Hop Tuple for the same MANET interface with:

           +  N2_neighbor_iface_addr_list contains one or more network
              addresses in L_neighbor_iface_addr_list.

   2.  If L_status then changes from SYMMETRIC to LOST because L_lost is
       set to true:

       1.  For each 2-Hop Tuple for the same MANET interface with:

           +  N2_neighbor_iface_addr_list contains one or more network
              addresses in L_neighbor_iface_addr_list;

           set N2_lost := true.

   Also, in <a href="rfc6130.html#section-13.2">Section 13.2 of [RFC6130]</a>, remove point 1 and renumber point
   2 as point 1.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Constraints"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Constraints</span>

   In <a href="rfc6130.html#appendix-B">Appendix B of [RFC6130]</a>, under "In each 2-Hop Tuple:", change the
   first bullet point to:

   o  There MUST be a Link Tuple associated with the same MANET
      interface with:

      *  L_neighbor_iface_addr_list = N2_neighbor_iface_addr_list; AND

      *  L_SYM_time not expired; AND

      *  L_lost = N2_lost.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Changes%20to%20OLSRv2"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Changes to OLSRv2</span>

   If the implementation of [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] conceals from any protocol using
   it the existence of all 2-Hop Tuples with N2_lost = true, then no
   changes are required to any protocol using [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>]; in particular,
   no changes are required to [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>].






<span class="grey">Dearlove &amp; Clausen           Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc7466.html">RFC 7466</a>                    NHDP Optimization                 March 2015</span>


   However, if instead the implementation of [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] makes all 2-Hop
   Tuples visible, including those with N2_lost = true, then protocols
   using [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] MUST ignore such 2-Hop Tuples.

   For [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>], given that this protocol uses 2-hop information for
   Multipoint Relay (MPR) Set and Routing Set calculation but does not
   include that information in control traffic, this means that an
   implementation must be behaving (i) as if a 2-Hop Tuple only exists
   if N2_lost=false and (ii) as if a change of N2_lost (from false to
   true, or true to false) corresponds to a 2-Hop Tuple appearing or
   being removed.  Specifically, this means behaving as if all of the
   following changes were to be made to [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>]:

   o  In <a href="rfc7181.html#section-17.6">Section 17.6 of [RFC7181]</a>, point 1, replace the final two
      bullet points with:

      *  A 2-Hop Tuple with N2_out_metric != UNKNOWN_METRIC and N2_lost
         = false is added or removed; OR

      *  A 2-Hop Tuple with N2_out_metric != UNKNOWN_METRIC has N2_lost
         changed; OR

      *  The N2_out_metric of any 2-Hop Tuple with N2_lost = false
         changes, and either the flooding MPR selection process uses
         metric values (see <a href="#section-18.4">Section 18.4</a>), or the change is to or from
         UNKNOWN_METRIC.

   o  In <a href="rfc7181.html#section-17.6">Section 17.6 of [RFC7181]</a>, point 3, replace the final two
      bullet points with:

      *  A 2-Hop Tuple with N2_in_metric != UNKNOWN_METRIC and N2_lost =
         false is added or removed; OR

      *  A 2-Hop Tuple with N2_in_metric != UNKNOWN_METRIC has N2_lost
         changed; OR

      *  The N2_in_metric of any 2-Hop Tuple with N2_lost = false
         changes.

   o  In <a href="rfc7181.html#section-17.7">Section 17.7 of [RFC7181]</a>, in the fifth bullet point, add "and
      N2_lost = false" after "N2_out_metric != UNKNOWN_METRIC".

   o  In <a href="rfc7181.html#section-18.4">Section 18.4 of [RFC7181]</a>, in the third bullet point, add ",
      N2_lost = false" after "N2_out_metric != UNKNOWN_METRIC".

   o  In <a href="rfc7181.html#section-18.5">Section 18.5 of [RFC7181]</a>, in the third bullet point, add ",
      N2_lost = false" after "N2_in_metric != UNKNOWN_METRIC".




<span class="grey">Dearlove &amp; Clausen           Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc7466.html">RFC 7466</a>                    NHDP Optimization                 March 2015</span>


   o  In <a href="rfc7181.html#section-19.1">Section 19.1 of [RFC7181]</a>, in the final main bullet point
      (marked as "(OPTIONAL)"), add "and N2_lost = false" after
      "N2_out_metric != UNKNOWN_METRIC".

   o  In <a href="rfc7181.html#appendix-C.7">Appendix C.7 of [RFC7181]</a>, in point 1, add "and N2_lost =
      false" after "N2_out_metric != UNKNOWN_METRIC".

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   The update to [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>] enables the retention and reuse of some
   information collected by that protocol, for only the duration that it
   could have been used in any case.  As such, this protocol introduces
   no new security considerations to an implementation of [<a href="rfc6130.html" title='"Mobile Ad Hoc Network (MANET) Neighborhood Discovery Protocol (NHDP)"'>RFC6130</a>]  or
   of any other protocol that uses it, such as [<a href="rfc7181.html" title='"The Optimized Link State Routing Protocol Version 2"'>RFC7181</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20References"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Normative%20References"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC6130" name="ref-RFC6130">RFC6130</a>]  Clausen, T., Dean, J., and C. Dearlove, "Mobile Ad Hoc
              Network (MANET) Neighborhood Discovery Protocol (NHDP)",
              <a href="rfc6130.html">RFC 6130</a>, April 2011,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6130">http://www.rfc-editor.org/info/rfc6130</a>&gt;.

   [<a id="ref-RFC7181" name="ref-RFC7181">RFC7181</a>]  Clausen, T., Dearlove, C., Jacquet, P., and U. Herberg,
              "The Optimized Link State Routing Protocol Version 2", <a href="rfc7181.html">RFC</a>
              <a href="rfc7181.html">7181</a>, April 2014,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7181">http://www.rfc-editor.org/info/rfc7181</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Informative%20References"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-Err4276" name="ref-Err4276">Err4276</a>]  RFC Errata, Errata ID 4276, <a href="rfc6130.html">RFC 6130</a>.

   [<a id="ref-NHDP-MIB" name="ref-NHDP-MIB">NHDP-MIB</a>]
              Herberg, U., Cole, R., Chakeres, I., and T. Clausen,
              "Definition of Managed Objects for the Neighborhood
              Discovery Protocol", Work in Progress, <a href="https://tools.ietf.org/html/draft-ietf-manet-rfc6779bis">draft-ietf-manet-</a>
              <a href="https://tools.ietf.org/html/draft-ietf-manet-rfc6779bis">rfc6779bis</a>, August 2014.









<span class="grey">Dearlove &amp; Clausen           Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc7466.html">RFC 7466</a>                    NHDP Optimization                 March 2015</span>


Acknowledgements

   The authors would like to thank Liz Cullen (BAE Systems) for first
   illustrating the issue addressed in this specification.

Authors' Addresses

   Christopher Dearlove
   BAE Systems Advanced Technology Centre
   West Hanningfield Road
   Great Baddow, Chelmsford
   United Kingdom

   Phone: +44 1245 242194
   EMail: chris.dearlove@baesystems.com
   URI:   <a href="http://www.baesystems.com/">http://www.baesystems.com/</a>


   Thomas Heide Clausen
   LIX, Ecole Polytechnique

   Phone: +33 6 6058 9349
   EMail: T.Clausen@computer.org
   URI:   <a href="http://www.thomasclausen.org/">http://www.ThomasClausen.org/</a>



























Dearlove &amp; Clausen           Standards Track                    [Page 9]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc7466 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:21 GMT --></html>