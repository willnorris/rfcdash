<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc8161 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:50:33 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.127" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-cerveny-bmwg-ipv6-nd" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:8161" name="DC.Identifier"/>
<meta content="May, 2017" name="DC.Date.Issued"/>
<meta content="Bonica, Ron" name="DC.Creator"/>
<meta content="Cerveny, William" name="DC.Creator"/>
<meta content="Thomas, Reji" name="DC.Creator"/>
<meta content="This document provides benchmarking procedures for the Neighbor
Discovery Protocol (NDP). It also proposes metrics by which an NDP
implementation's scaling capabilities can be measured." name="DC.Description.Abstract"/>
<meta content="Benchmarking the Neighbor Discovery Protocol" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 8161 - Benchmarking the Neighbor Discovery Protocol</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8161.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8161" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-bmwg-ipv6-nd" title="draft-ietf-bmwg-ipv6-nd">draft-ietf-bmwg...</a>] [<a href="https://datatracker.ietf.org/doc/rfc8161" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8161" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8161" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                        W. Cerveny
Request for Comments: 8161                                Arbor Networks
Category: Informational                                        R. Bonica
ISSN: 2070-1721                                                R. Thomas
                                                        Juniper Networks
                                                                May 2017


              <span class="h1">Benchmarking the Neighbor Discovery Protocol</span>

Abstract

   This document provides benchmarking procedures for the Neighbor
   Discovery Protocol (NDP).  It also proposes metrics by which an NDP
   implementation's scaling capabilities can be measured.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc7841.html#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc8161">http://www.rfc-editor.org/info/rfc8161</a>.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





<span class="grey">Cerveny, et al.               Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
      <a href="#section-1.1">1.1</a>. Requirements Language ......................................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. Test Setup ......................................................<a href="#page-4">4</a>
      <a href="#section-2.1">2.1</a>. Device Under Test (DUT) ....................................<a href="#page-4">4</a>
           <a href="#section-2.1.1">2.1.1</a>. Interfaces ..........................................<a href="#page-4">4</a>
           <a href="#section-2.1.2">2.1.2</a>. Neighbor Discovery Protocol (NDP) ...................<a href="#page-5">5</a>
           <a href="#section-2.1.3">2.1.3</a>. Routing .............................................<a href="#page-5">5</a>
      <a href="#section-2.2">2.2</a>. Tester .....................................................<a href="#page-6">6</a>
           <a href="#section-2.2.1">2.2.1</a>. Interfaces ..........................................<a href="#page-6">6</a>
           <a href="#section-2.2.2">2.2.2</a>. Neighbor Discovery Protocol (NDP) ...................<a href="#page-6">6</a>
           <a href="#section-2.2.3">2.2.3</a>. Routing .............................................<a href="#page-6">6</a>
           <a href="#section-2.2.4">2.2.4</a>. Test Traffic ........................................<a href="#page-7">7</a>
           <a href="#section-2.2.5">2.2.5</a>. Counters ............................................<a href="#page-8">8</a>
   <a href="#section-3">3</a>. Tests ...........................................................<a href="#page-8">8</a>
      <a href="#section-3.1">3.1</a>. Baseline Test ..............................................<a href="#page-8">8</a>
           <a href="#section-3.1.1">3.1.1</a>. Procedure ...........................................<a href="#page-9">9</a>
           <a href="#section-3.1.2">3.1.2</a>. Baseline Test Procedure Flow Chart ..................<a href="#page-9">9</a>
           <a href="#section-3.1.3">3.1.3</a>. Results ............................................<a href="#page-11">11</a>
      <a href="#section-3.2">3.2</a>. Scaling Test ..............................................<a href="#page-11">11</a>
           <a href="#section-3.2.1">3.2.1</a>. Procedure ..........................................<a href="#page-11">11</a>
           <a href="#section-3.2.2">3.2.2</a>. Scaling Test Procedure Flow Chart ..................<a href="#page-13">13</a>
           <a href="#section-3.2.3">3.2.3</a>. Results ............................................<a href="#page-15">15</a>
   <a href="#section-4">4</a>. Measurements Explicitly Excluded ...............................<a href="#page-15">15</a>
      <a href="#section-4.1">4.1</a>. DUT CPU Utilization .......................................<a href="#page-15">15</a>
      <a href="#section-4.2">4.2</a>. Malformed Packets .........................................<a href="#page-15">15</a>
   <a href="#section-5">5</a>. IANA Considerations ............................................<a href="#page-16">16</a>
   <a href="#section-6">6</a>. Security Considerations ........................................<a href="#page-16">16</a>
   <a href="#section-7">7</a>. Normative References ...........................................<a href="#page-16">16</a>
   Acknowledgments ...................................................<a href="#page-16">16</a>
   Authors' Addresses ................................................<a href="#page-17">17</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   When an IPv6 node forwards a packet, it executes the following
   procedure:

   o  Identifies the outbound interface and IPv6 next hop.

   o  Queries a local Neighbor Cache (NC) to determine the IPv6 next
      hop's link-layer address.

   o  Encapsulates the packet in a link-layer header.  The link-layer
      header includes the IPv6 next hop's link-layer address.

   o  Forwards the packet to the IPv6 next hop.




<span class="grey">Cerveny, et al.               Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


   IPv6 nodes use the Neighbor Discovery Protocol (NDP) [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>] to
   maintain the NC.  Operational experience [<a href="rfc6583.html" title='"Operational Neighbor Discovery Problems"'>RFC6583</a>] shows that when an
   implementation cannot maintain a sufficiently complete NC, its
   ability to forward packets is impaired.

   NDP, like any other protocol, consumes processing, memory, and
   bandwidth resources.  Its ability to maintain a sufficiently complete
   NC depends upon the availability of the above-mentioned resources.

   This document provides benchmarking procedures for NDP.  Benchmarking
   procedures include a Baseline Test and an NDP Scaling Test.  In both
   tests, the Device Under Test (DUT) is an IPv6 router.  Two physical
   links (A and B) connect the DUT to a Tester.  The Tester sends
   traffic through Link A to the DUT.  The DUT forwards that traffic,
   through Link B, back to the Tester.

   The above-mentioned traffic stream contains one or more interleaved
   flows.  An IPv6 Destination Address uniquely identifies each flow.
   Or, said another way, every packet within a flow has the same IPv6
   Destination Address.

   In the Baseline Test, the traffic stream contains exactly one flow.
   Because every packet in the stream has the same IPv6 Destination
   Address, the DUT can forward the entire stream using exactly one NC
   entry.  NDP is exercised minimally, and no packet loss should be
   observed.

   The NDP Scaling Test is identical to the Baseline Test, except that
   the traffic stream contains many flows.  In order to forward the
   stream without loss, the DUT must maintain one NC entry for each
   flow.  If the DUT cannot maintain one NC entry for each flow, packet
   loss will be observed and attributed to NDP scaling limitations.

   This document proposes an NDP scaling metric, called NDP-MAX-
   NEIGHBORS.  NDP-MAX-NEIGHBORS is the maximum number of neighbors to
   which an IPv6 node can send traffic during periods of high NDP
   activity.

   The procedures described herein reveal how many IPv6 neighbors an NDP
   implementation can discover.  They also provide a rough estimate of
   the time required to discover those neighbors.  However, that
   estimate does not reflect the maximum rate at which the
   implementation can discover neighbors.  Maximum rate discovery is a
   topic for further exploration.







<span class="grey">Cerveny, et al.               Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


   The test procedures described herein assume that NDP does not compete
   with other applications for resources on the DUT.  When NDP competes
   for resources, its scaling characteristics may differ from those
   reported by the benchmarks described and may vary over time.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Requirements%20Language"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Test%20Setup"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Test Setup</span>

                +---------------+             +-----------+
                |               |             |           |
                |               |   Link A    |   Device  |
                |               |------------&gt;|   Under   |
                |    Tester     |             |   Test    |
                |               |&lt;------------|   (DUT)   |
                |               |   Link B    |           |
                +---------------+             +-----------+

                           Figure 1: Test Setup

   The DUT is an IPv6 router.  Two links (A and B) connect the DUT to
   the Tester.  Link A capabilities must be identical to Link B
   capabilities.  For example, if the interface to Link A is a 10
   Gigabit Ethernet port, the interface to Link B must also be a 10
   Gigabit Ethernet port.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Device%20Under%20Test%20%28DUT%29"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Device Under Test (DUT)</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.1.1.%20%20Interfaces"></a><a class="selflink" href="#section-2.1.1" name="section-2.1.1">2.1.1</a>.  Interfaces</span>

   DUT interfaces are numbered as follows:

   o  Link A - 2001:2:0:0::2/64

   o  Link B - 2001:2:0:1::1/64

   Both DUT interfaces should be configured with a 1500-byte MTU.
   However, if they cannot support a 1500-byte MTU, they may be
   configured with a 1280-byte MTU.








<span class="grey">Cerveny, et al.               Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.1.2.%20%20Neighbor%20Discovery%20Protocol%20%28NDP%29"></a><a class="selflink" href="#section-2.1.2" name="section-2.1.2">2.1.2</a>.  Neighbor Discovery Protocol (NDP)</span>

   NDP is enabled on both DUT interfaces.  Therefore, the DUT emits both
   solicited and unsolicited Router Advertisement (RA) messages.  The
   DUT emits an RA message at least once every 600 seconds and no more
   frequently than once every 200 seconds.

   When the DUT sends an RA message, it includes the following
   information:

   o  Router Lifetime - 1800 seconds

   o  Reachable Time - 0 seconds

   o  Retrans Time - 0 seconds

   o  Source Link-Layer Address - link-layer address of DUT interface

   o  M-bit is clear (0)

   o  O-bit is clear (0)

   The above-mentioned values are chosen because they are the default
   values specified in <a href="rfc4861.html">RFC 4861</a>.

   NDP manages the NC.  Each NC entry represents an on-link neighbor and
   is identified by the neighbor's on-link unicast IP address.  As per
   <a href="rfc4861.html">RFC 4861</a>, each NC entry needs to be refreshed periodically.  NDP
   refreshes NC entries by exchanging Neighbor Solicitation (NS) and
   Neighbor Advertisement (NA) messages.

   No static NC entries are configured on the DUT.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.1.3.%20%20Routing"></a><a class="selflink" href="#section-2.1.3" name="section-2.1.3">2.1.3</a>.  Routing</span>

   The DUT maintains a direct route to 2001:2:0:0/64 through Link A.  It
   also maintains a direct route to 2001:2:0:1/64 through Link B.  No
   static routes or dynamic routing protocols are configured on the DUT.













<span class="grey">Cerveny, et al.               Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Tester"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Tester</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.2.1.%20%20Interfaces"></a><a class="selflink" href="#section-2.2.1" name="section-2.2.1">2.2.1</a>.  Interfaces</span>

   Interfaces are numbered as follows:

   o  Link A - 2001:2:0:0::1/64

   o  Link B - Multiple addresses are configured on Link B.  These
      addresses are drawn sequentially from the 2001:2:0:1::/64 address
      block.  The first address is 2001:2:0:1::2/64.  Subsequent
      addresses are 2001:2:0:1::3/64, 2001:2:0:1::4/64,
      2001:2:0:1::5/64, etc.  The number of configured addresses should
      be the expected value of NDP-MAX-NEIGHBORS times 1.1.

   Both Tester interfaces should be configured with a 1500-byte MTU.
   However, if they cannot support a 1500-byte MTU, they may be
   configured with a 1280-byte MTU.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.2.2.%20%20Neighbor%20Discovery%20Protocol%20%28NDP%29"></a><a class="selflink" href="#section-2.2.2" name="section-2.2.2">2.2.2</a>.  Neighbor Discovery Protocol (NDP)</span>

   NDP is enabled on both Tester interfaces.  Therefore, upon
   initiation, the Tester sends Router Solicitation (RS) messages and
   waits for Router Advertisement (RA) messages.  The Tester also
   exchanges Neighbor Solicitation (NS) and Neighbor Advertisement (NA)
   messages with the DUT.

   No static NC entries are configured on the Tester.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.2.3.%20%20Routing"></a><a class="selflink" href="#section-2.2.3" name="section-2.2.3">2.2.3</a>.  Routing</span>

   The Tester maintains a direct route to 2001:2:0:0/64 through Link A.
   It also maintains a direct route to 2001:2:0:1/64 through Link B.  No
   static routes or dynamic routing protocols are configured on the
   Tester.
















<span class="grey">Cerveny, et al.               Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.2.4.%20%20Test%20Traffic"></a><a class="selflink" href="#section-2.2.4" name="section-2.2.4">2.2.4</a>.  Test Traffic</span>

   The Tester sends a stream of test traffic through Link A to the DUT.
   The test traffic stream contains one or more interleaved flows.
   Flows are numbered 1 through N, sequentially.

   Within each flow, each packet contains an IPv6 header, and each IPv6
   header contains the following information:

   o  Version - 6

   o  Traffic Class - 0

   o  Flow Label - 0

   o  Payload Length - 0

   o  Next Header - IPv6-NoNxt (59)

   o  Hop Limit - 255

   o  Source Address - 2001:2:0:0::1

   o  Destination Address - The first 64 bits of the Destination Address
      are 2001:2:0:1::.  The next 64 are uniquely associated with the
      flow.  Every packet in the first flow carries the Destination
      Address 2001:2:0:1::2.  Every subsequent flow has an IP address
      one greater than the last (i.e., 2001:2:0:1::3, 2001:2:0:1::4,
      etc.).

   In order to avoid link congestion, test traffic is offered at a rate
   not to exceed 50% of available link bandwidth.  In order to avoid
   burstiness and buffer occupancy, every packet in the stream is
   exactly 40 bytes long (i.e., the length of an IPv6 header with no
   IPv6 payload).  Furthermore, the gap between packets is identical.

   During the course of a test, the number of flows that the test stream
   contains may increase.  When this occurs, the rate at which test
   traffic is offered remains constant.  For example, assume that a test
   stream is offered at a rate of 1,000 packets per second.  This stream
   contains two flows, each contributing 500 packets per second to the
   1,000 packet per second aggregate.  When a third stream is added to
   the flow, all three streams must contribute 333 packets per second in
   order to maintain the 1,000 packet per second limit.  (As in this
   example, rounding error is acceptable.)






<span class="grey">Cerveny, et al.               Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


   The DUT attempts to forward every packet in the test stream through
   Link B to the Tester.  It does this because:

   o  Every packet in the test stream has a Destination Address drawn
      from the 2001:2:0:1::/64 address block.

   o  The DUT has a direct route to 2001:2:0:1/64 through Link B.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/2.2.5.%20%20Counters"></a><a class="selflink" href="#section-2.2.5" name="section-2.2.5">2.2.5</a>.  Counters</span>

   On the Tester, two counters are configured for each flow.  One
   counter, configured on Link A, increments when the Tester sends a
   packet belonging to the flow.  The other counter, configured on Link
   B, increments when the Tester receives a packet from the flow.  In
   order for a packet to be associated with a flow, the following
   conditions must all be true:

   o  The IPv6 Destination Address must be that of the flow.

   o  The IPv6 Next Header must be IPv6-NoNxt (59).

   The following counters also are configured on both Tester Interfaces:

   o  RS packets sent

   o  RA packets received

   o  NS packets sent

   o  NS packets received

   o  NA packets sent

   o  NA packets received

   o  Total packets sent

   o  Total packets received

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Tests"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Tests</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Baseline%20Test"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Baseline Test</span>

   The purpose of the Baseline Test is to ensure that the DUT can
   forward every packet in the test stream, without loss, when NDP is
   minimally exercised and not operating near its scaling limit.





<span class="grey">Cerveny, et al.               Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.1.%20%20Procedure"></a><a class="selflink" href="#section-3.1.1" name="section-3.1.1">3.1.1</a>.  Procedure</span>

   o  On the DUT, clear the NC.

   o  On the Tester, clear all counters.

   o  On the Tester, set a timer to expire in 60 seconds.

   o  On the Tester, start the test stream with exactly one flow (i.e.,
      IPv6 Destination Address equals 2001:2:0:1::2).

   o  Wait for either the timer to expire or the packets-received
      counter associated with the flow to increment.

   o  If the timer expires, stop the test stream and end the test.

   o  If the packets-received counter increments, pause the traffic
      stream, log the initial counter values, clear the counters, reset
      the timer to expire in 1800 seconds, and restart the traffic
      stream.

   o  When the timer expires, stop the test stream, wait sufficient time
      for any queued packets to exit, log the final counter values, and
      end the test.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.2.%20%20Baseline%20Test%20Procedure%20Flow%20Chart"></a><a class="selflink" href="#section-3.1.2" name="section-3.1.2">3.1.2</a>.  Baseline Test Procedure Flow Chart</span>

                      +--------------------------+
                      | On the DUT, clear the NC |
                      +-------------|------------+
                                    |
                 +------------------v------------------+
                 |  On the Tester, clear all counters  |
                 +------------------|------------------+
                                    |
                 +------------------v-----------------+
                 |        On the Tester, set a        |
                 |        timer to expire in          |
                 |        60 seconds                  |
                 +------------------|-----------------+
                                    |
                 +------------------v-----------------+
                 |On the Tester, start the test stream|
                 |with exactly one flow (i.e., IPv6   |
                 |Destination Address equals          |
                 |2001:2:0:0:1::2)                    |
                 +------------------|-----------------+
                                    |



<span class="grey">Cerveny, et al.               Informational                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


                                    |
                 +------------------v-----------------+
                 |Wait for either the timer to expire |
                 |or packets-received counter         |
                 |associated with the flow to         |
                 |increment                           |
                 +------------------|-----------------+
                                    |
                            /-------v-------\
                           /                 \  Yes  +--------------+
                           |Did timer expire?|-------| End the test |
                           \                 /       +--------------+
                            \-------|-------/
                                    | No
                                    |
                          /---------v--------\
                         /                    \  No  +--------------+
                         |Did packets-received|------| End the test |
                         |counter increment?  |      +--------------+
                         \                    /
                          \---------|--------/
                                    | Yes
                                    |
                 +------------------v-----------------+
                 |Pause traffic stream, log initial   |
                 |counter values, clear the counters, |
                 |reset the timer to expire in 1800   |
                 |seconds, and restart traffic stream |
                 +------------------|-----------------+
                                    |
                 +------------------v-----------------+
                 |When timer expires, stop the test   |
                 |stream, wait sufficient time for    |
                 |any queued packets to exit, log the |
                 |final counter values                |
                 +------------------|-----------------+
                                    |
                               +----v---+
                               |End test|
                               +--------+

               Figure 2: Baseline Test Procedure Flow Chart









<span class="grey">Cerveny, et al.               Informational                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.3.%20%20Results"></a><a class="selflink" href="#section-3.1.3" name="section-3.1.3">3.1.3</a>.  Results</span>

   The log contains initial and final values for the following counters:

   o  packets-sent

   o  packets-received

   The initial values of packets-sent and packets-received may be equal
   to one another.  If these values are identical, none of the initial
   packets belonging to the flow were lost.  However, if the initial
   value of packets-sent is greater than the initial value of packets-
   received, initial packets were lost.  This loss of initial packets is
   acceptable.

   The final values of packets-sent and packets-received should be equal
   to one another.  If they are not, an error has occurred.  Because
   this error is likely to affect Scaling Test results, the error must
   be corrected before the Scaling Test is executed.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Scaling%20Test"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Scaling Test</span>

   The purpose of the Scaling Test is to discover the number of
   neighbors to which an IPv6 node can send traffic during periods of
   high NDP activity.  We call this number NDP-MAX-NEIGHBORS.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.%20%20Procedure"></a><a class="selflink" href="#section-3.2.1" name="section-3.2.1">3.2.1</a>.  Procedure</span>

   Execute the following procedure:

   o  On the DUT, clear the NC.

   o  On the Tester, clear all counters.

   o  On the Tester, set a timer to expire in 60 seconds.

   o  On the Tester, start the test stream with exactly one flow (i.e.,
      IPv6 Destination Address equals 2001:2:0:1::2).

   o  Wait for either the timer to expire or the packets-received
      counter associated with the flow to increment.

   o  If the timer expires, stop the test stream and end the test.








<span class="grey">Cerveny, et al.               Informational                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


   o  If the packets-received counter increments, execute the following
      procedure N times, starting at 2 and ending at the expected value
      of NDP-MAX-NEIGHBORS times 1.1.

      *  Pause the test stream.

      *  Log the time and the value of N minus one.

      *  Clear the packets-sent and packets-received counters associated
         with the previous flow (i.e., N minus one).

      *  Reset the timer to expire in 60 seconds.

      *  Add the next flow to the test stream (i.e., IPv6 Destination
         Address is a function of N).

      *  Restart the test stream.

      *  Wait for either the timer to expire or the packets-received
         counter associated with the new flow to increment.

   After the procedure described above has been executed N times, clear
   the timer and reset it to expire in 1800 seconds.  When the timer
   expires, stop the stream, log all counters, and end the test (after
   waiting sufficient time for any queued packets to exit).


























<span class="grey">Cerveny, et al.               Informational                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.2.%20%20Scaling%20Test%20Procedure%20Flow%20Chart"></a><a class="selflink" href="#section-3.2.2" name="section-3.2.2">3.2.2</a>.  Scaling Test Procedure Flow Chart</span>

                      +--------------------------+
                      | On the DUT, clear the NC |
                      +-------------|------------+
                                    |
                 +------------------v------------------+
                 |  On the Tester, clear all counters  |
                 +------------------|------------------+
                                    |
                 +------------------v-----------------+
                 |        On the Tester, set a        |
                 |        timer to expire in          |
                 |        60 seconds                  |
                 +------------------|-----------------+
                                    |
                 +------------------v-----------------+
                 |On the Tester, start the test stream|
                 |with exactly one flow (i.e., IPv6   |
                 |Destination Address equals          |
                 |2001:2:0:0:1::2)                    |
                 +------------------|-----------------+
                                    |
                 +------------------v-----------------+
                 |Wait for either the timer to expire |
                 |or packets-received counter         |
                 |associated with the flow to         |
                 |increment                           |
                 +------------------|-----------------+
                                    |
                            /-------v-------\
                           /                 \  Yes  +--------------+
                           |Did timer expire?|-------|   End test   |
                           \                 /       |   and return |
                            \-------|-------/        +--------------+
                                    | No
                                    |
                          /---------v--------\
                         /                    \  No  +--------------+
                         |Did packets-received|------|   End test   |
                         |counter increment?  |      |   and return |
                         \                    /      +--------------+
                          \---------|--------/
                                    |  Yes
                                    |
                             +------v------+
                             |     N=2     |
                             +------|------+



<span class="grey">Cerveny, et al.               Informational                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


                                    |
                     /--------------v-------------\
                    /              Is              \ No +----------+
                    |      N &lt; NDP-MAX-NEIGHBORS   |----| End test |
             -------|         times 1.1            |    +----------+
             |      \                              /
             |       \--------------|-------------/
             |                      |    Yes
             |          +-----------v----------+
             |          |Pause the test stream |
             |          +-----------|----------+
             |                      |
             |           +----------v----------+
             |           |Log the time and the |
             |           |value of N minus one |
             |           +----------|----------+
             |                      |
             |          +-----------v-----------+
             |          |Clear the packets-sent |
             |          |and packets-received   |
             |          |counters associated    |
             |          |with the previous flow |
             |          |(i.e., N minus one)    |
             |          +-----------|-----------+
             |                      |
             |           +----------v----------+
             |           |Reset the timer to   |
             |           |expire in 60 seconds |
             |           +----------|----------+
             |                      |
             |       +--------------v---------------+
             |       |Add the next flow to the test |
             |       |stream (i.e., IPv6 Destination|
             |       |Address is a function of N)   |
             |       +--------------|---------------+
             |                      |
             |               +------v------+
             |               |     N=N+1   |
             |               +------|------+
             |                      |
             |           +----------v------------+
             ------------|Restart the test stream|
                         +-----------------------+

                Figure 3: Scaling Test Procedure Flow Chart






<span class="grey">Cerveny, et al.               Informational                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.3.%20%20Results"></a><a class="selflink" href="#section-3.2.3" name="section-3.2.3">3.2.3</a>.  Results</span>

   The test report includes the following:

   o  A description of the DUT (make, model, processor, memory, and
      interfaces)

   o  Rate at which the Tester offers test traffic to the DUT (measured
      in packets per second)

   o  A log that records the time at which each flow was introduced to
      the test stream and the final value of all counters

   o  The expected value of NDP-MAX-NEIGHBORS

   o  The actual value of NDP-MAX-NEIGHBORS

   NDP-MAX-NEIGHBORS is equal to the number of counter pairs where
   packets-sent is equal to packets-received.  Two counters are members
   of a pair if they are both associated with the same flow.  If
   packets-sent is equal to packets-received for every counter pair, the
   test should be repeated with a larger expected value of NDP-MAX-
   NEIGHBORS.

   If an implementation abides by the recommendation of <a href="rfc6583.html#section-7.1">Section 7.1 of
   RFC 6583</a>, for any given counter pair, packets-received will either be
   equal to zero or packets-sent.

   The log documents the time at which each flow was introduced to the
   test stream.  This log reveals the effect of NC size to the time
   required to discover a new IPv6 neighbor.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Measurements%20Explicitly%20Excluded"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Measurements Explicitly Excluded</span>

   These measurements aren't recommended because of the itemized reasons
   below:

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20DUT%20CPU%20Utilization"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  DUT CPU Utilization</span>

   This measurement relies on the DUT to provide utilization
   information, which is not externally observable (not black-box).
   However, some testing organizations may find the CPU utilization is
   useful auxiliary information specific to the DUT model, etc.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Malformed%20Packets"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Malformed Packets</span>

   This benchmarking test is not intended to test DUT behavior in the
   presence of malformed packets.



<span class="grey">Cerveny, et al.               Informational                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  IANA Considerations</span>

   This document does not require any IANA actions.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   Benchmarking activities as described in this memo are limited to
   technology characterization using controlled stimuli in a laboratory
   environment, with dedicated address space and the constraints
   specified in the sections above.

   The benchmarking network topology will be an independent test setup
   and MUST NOT be connected to devices that may forward the test
   traffic into a production network or misroute traffic to the test
   management network.

   Further, benchmarking is performed on a "black-box" basis, relying
   solely on measurements observable external to the DUT or System Under
   Test (SUT).  Special capabilities SHOULD NOT exist in the DUT/SUT
   specifically for benchmarking purposes.

   Any implications for network security arising from the DUT/SUT SHOULD
   be identical in the lab and in production networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Normative%20References"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC4861" name="ref-RFC4861">RFC4861</a>]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", <a href="rfc4861.html">RFC 4861</a>,
              DOI 10.17487/RFC4861, September 2007,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4861">http://www.rfc-editor.org/info/rfc4861</a>&gt;.

   [<a id="ref-RFC6583" name="ref-RFC6583">RFC6583</a>]  Gashinsky, I., Jaeggli, J., and W. Kumari, "Operational
              Neighbor Discovery Problems", <a href="rfc6583.html">RFC 6583</a>,
              DOI 10.17487/RFC6583, March 2012,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6583">http://www.rfc-editor.org/info/rfc6583</a>&gt;.

Acknowledgments

   Helpful comments and suggestions were offered by Al Morton, Joel
   Jaeggli, Nalini Elkins, Scott Bradner, and Ram Krishnan on the BMWG
   email list and at BMWG meetings.  Precise grammatical corrections and
   suggestions were offered by Ann Cerveny.




<span class="grey">Cerveny, et al.               Informational                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc8161.html">RFC 8161</a>                    NDP Benchmarking                    May 2017</span>


Authors' Addresses

   Bill Cerveny
   Arbor Networks
   2727 South State Street
   Ann Arbor, MI  48104
   United States of America

   Email: wcerveny@arbor.net


   Ron Bonica
   Juniper Networks
   2251 Corporate Park Drive
   Herndon, VA  20170
   United States of America

   Email: rbonica@juniper.net


   Reji Thomas
   Juniper Networks
   Elnath-Exora Business Park Survey
   Bangalore, KA  560103
   India

   Email: rejithomas@juniper.net
























Cerveny, et al.               Informational                    [Page 17]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc8161 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:50:33 GMT --></html>