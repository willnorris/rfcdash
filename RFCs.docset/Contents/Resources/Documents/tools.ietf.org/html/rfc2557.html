<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc2557 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:52 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="rfc2110" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:2557" name="DC.Identifier"/>
<meta content="March, 1999" name="DC.Date.Issued"/>
<meta content="Jacob Palme" name="DC.Creator"/>
<meta content="This document a) defines the use of a MIME multipart/related structure
to aggregate a text/html root resource and the subsidiary resources it
references, and b) specifies a MIME content-header (Content-Location)
that allow URIs in a multipart/related text/html root body part to
reference subsidiary resources in other body parts of the same
multipart/related structure. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="MIME Encapsulation of Aggregate Documents, such as HTML (MHTML)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 2557 - MIME Encapsulation of Aggregate Documents, such as HTML (MHTML)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc2557.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc2557" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-mhtml-rev" title="draft-ietf-mhtml-rev">draft-ietf-mhtm...</a>] [<a href="https://datatracker.ietf.org/doc/rfc2557" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc2557" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc2557" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=2557">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                         J. Palme
Request for Comments: 2557                    Stockholm University/KTH
Obsoletes: <a href="rfc2110.html">2110</a>                                             A. Hopmann
Category: Standards Track                        Microsoft Corporation
                                                           N. Shelness
                                         Lotus Development Corporation
                                                            March 1999


    <span class="h1">MIME Encapsulation of Aggregate Documents, such as HTML (MHTML)</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

Abstract

   HTML [<a href="rfc1866.html">RFC 1866</a>] defines a powerful means of specifying multimedia
   documents. These multimedia documents consist of a text/html root
   resource (object) and other subsidiary resources (image, video clip,
   applet, etc. objects) referenced by Uniform Resource Identifiers
   (URIs) within the text/html root resource. When an HTML multimedia
   document is retrieved by a browser, each of these component resources
   is individually retrieved in real time from a location, and using a
   protocol, specified by each URI.

   In order to transfer a complete HTML multimedia document in a single
   e-mail message, it is necessary to: a) aggregate a text/html root
   resource and all of the subsidiary resources it references into a
   single composite message structure, and b) define a means by which
   URIs in the text/html root can reference subsidiary resources within
   that composite message structure.

   This document a) defines the use of a MIME multipart/related
   structure to aggregate a text/html root resource and the subsidiary
   resources it references, and b) specifies a MIME content-header
   (Content-Location) that allow URIs in a multipart/related text/html
   root body part to reference subsidiary resources in other body parts
   of the same multipart/related structure.




<span class="grey">Palme, et al.               Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   While initially designed to support e-mail transfer of complete
   multi-resource HTML multimedia documents, these conventions can also
   be employed to resources retrieved by other transfer protocols such
   as HTTP and FTP to retrieve a complete multi-resource HTML multimedia
   document in a single transfer or for storage and archiving of
   complete HTML-documents.

   Differences between this and a previous version of this standard,
   which was published as <a href="rfc2110.html">RFC 2110</a>, are summarized in chapter 12.

Table of Contents

   <a href="#section-1">1</a>. Introduction .................................................   <a href="#page-3">3</a>
   <a href="#section-2">2</a>. Terminology  .................................................   <a href="#page-4">4</a>
      <a href="#section-2.1">2.1</a> Conformance requirement terminology ......................   <a href="#page-4">4</a>
      <a href="#section-2.2">2.2</a> Other terminology ........................................   <a href="#page-4">4</a>
   <a href="#section-3">3</a>. Overview .....................................................   <a href="#page-6">6</a>
   <a href="#section-4">4</a>. The Content-Location MIME Content Header .....................   <a href="#page-6">6</a>
      <a href="#section-4.1">4.1</a> MIME content headers .....................................   <a href="#page-6">6</a>
      <a href="#section-4.2">4.2</a> The Content-Location Header ..............................   <a href="#page-7">7</a>
      <a href="#section-4.3">4.3</a> URIs of MHTML aggregates .................................   <a href="#page-8">8</a>
      <a href="#section-4.4">4.4</a> Encoding and decoding of URIs in MIME header fields ......   <a href="#page-8">8</a>
   <a href="#section-5">5</a>. Base URIs for resolution of relative URIs ....................   <a href="#page-9">9</a>
   <a href="#section-6">6</a>. Sending documents without linked objects .....................  <a href="#page-10">10</a>
   <a href="#section-7">7</a>. Use of the Content-Type "multipart/related" ..................  <a href="#page-11">11</a>
   <a href="#section-8">8</a>. Usage of Links to Other Body Parts ...........................  <a href="#page-13">13</a>
      <a href="#section-8.1">8.1</a> General principle ........................................  <a href="#page-13">13</a>
      <a href="#section-8.2">8.2</a> Resolution of URIs in text/html body parts ...............  <a href="#page-13">13</a>
      <a href="#section-8.3">8.3</a> Use of the Content-ID header and CID URLs ................  <a href="#page-14">14</a>
   <a href="#section-9">9</a>. Examples .....................................................  <a href="#page-14">14</a>
      <a href="#section-9.1">9.1</a> Example of a HTML body without included linked objects ...  <a href="#page-15">15</a>
      <a href="#section-9.2">9.2</a> Example with an absolute URI to an embedded GIF picture ..  <a href="#page-15">15</a>
      <a href="#section-9.3">9.3</a> Example with relative URIs to embedded GIF pictures ......  <a href="#page-16">16</a>
      <a href="#section-9.4">9.4</a> Example with a relative URI and no BASE available ........  <a href="#page-17">17</a>
      9.5 Example using CID URL and Content-ID header to an embedded
          GIF picture ..............................................  <a href="#page-18">18</a>
      9.6 Example showing permitted and forbidden references between
          nested body parts ........................................  <a href="#page-19">19</a>
   <a href="#section-10">10</a>. Character encoding issues and end-of-line issues ............  <a href="#page-21">21</a>
   <a href="#section-11">11</a>. Security Considerations .....................................  <a href="#page-22">22</a>
      <a href="#section-11.1">11.1</a> Security considerations not related to caching ..........  <a href="#page-22">22</a>
      <a href="#section-11.2">11.2</a> Security considerations related to caching ..............  <a href="#page-23">23</a>
   12. Differences as compared to the previous version of this
       proposed standard in <a href="rfc2110.html">RFC 2110</a> ...............................  <a href="#page-24">24</a>
   <a href="#section-13">13</a>. Acknowledgments .............................................  <a href="#page-24">24</a>
   <a href="#section-14">14</a>. References ..................................................  <a href="#page-25">25</a>
   <a href="#section-15">15</a>. Authors' Addresses ..........................................  <a href="#page-27">27</a>
   <a href="#section-16">16</a>. Full Copyright Statement ....................................  <a href="#page-28">28</a>



<span class="grey">Palme, et al.               Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   There are a number of document formats (Hypertext Markup Language
   [<a href="#ref-HTML2" title='"Hypertext Markup Language - 2.0"'>HTML2</a>], Extended Markup Language [<a href="#ref-XML" title="published by the World Wide Web Consortium">XML</a>], Portable Document format
   [<a href="#ref-PDF" title='"Portable Document Format Reference Manual"'>PDF</a>] and Virtual Reality Markup Language [<a href="#ref-VRML" title='"Virtual Reality Modeling Language (VRML) Version 1.0 Language Specification."'>VRML</a>]) that specify
   documents consisting of a root resource and a number of distinct
   subsidiary resources referenced by URIs within that root resource.
   There is an obvious need to be able to send such multi-resource
   documents in e-mail [<a href="#ref-SMTP" title='"Simple Mail Transfer Protocol"'>SMTP</a>], [<a href="rfc822.html" title='"Standard for the format of ARPA Internet text messages."'>RFC822</a>] messages.

   The standard defined in this document specifies how to aggregate such
   multi-resource documents in MIME-formatted [MIME1 to MIME5] messages
   for precisely this purpose.

   While this specification was developed to satisfy the specific
   aggregation requirements of multi-resource HTML documents, it may
   also be applicable to other multi-resource document representations
   linked by URIs. While this is the case, there is no requirement that
   implementations claiming conformance to this standard be able to
   handle any URI linked document representations other than those whose
   root is HTML.

   This aggregation into a single message of a root resource and the
   subsidiary resources it references may also be applicable to
   resources retrieved by other protocols such as HTTP or FTP, or to the
   archiving of complete web pages as they appeared at a particular
   point in time.

   An informational RFC will be published as a supplement to this
   standard. The informational RFC will discuss implementation methods
   and some implementation problems. Implementers are strongly
   recommended to read this informational RFC when developing
   implementations of this standard. You can find it through URL
   <a href="http://www.dsv.su.se/~jpalme/ietf/mhtml.html">http://www.dsv.su.se/~jpalme/ietf/mhtml.html</a>.

   This standard specifies that body parts to be referenced can be
   identified either by a Content-ID (containing a Message-ID value) or
   by a Content-Location (containing an arbitrary URL). The reason why
   this standard does not only recommend the use of Content-ID-s is that
   it should be possible to forward existing web pages via e-mail
   without having to rewrite the source text of the web pages. Such
   rewriting has several disadvantages, one of them that security
   checksums will probably be invalidated.








<span class="grey">Palme, et al.               Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1%20Conformance%20requirement%20terminology"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a> Conformance requirement terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="#ref-IETF-TERMS" title='"Key words for use in RFCs to Indicate Requirements Levels"'>IETF-TERMS</a>].

   An implementation is not compliant if it fails to satisfy one or more
   of the MUST requirements for the protocols it implements. An
   implementation that satisfies all the MUST and all the SHOULD
   requirements for its protocols is said to be "unconditionally
   compliant"; one that satisfies all the MUST requirements but not all
   the SHOULD requirements for its protocols is said to be
   "conditionally compliant."

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2%20Other%20terminology"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a> Other terminology</span>

   Most of the terms used in this document are defined in other RFCs.

   Absolute URI,         See Relative Uniform Resource Locators
   AbsoluteURI           [<a href="#ref-RELURL" title='"Relative Uniform Resource Locators"'>RELURL</a>].

   CID                   See Message/External Body Content-ID [<a href="#ref-MIDCID" title='"Content-ID and Message-ID Uniform Resource Locators"'>MIDCID</a>].

   Content-Base          This header was specified in <a href="rfc2110.html">RFC 2110</a>, but has
                         been removed in this new version of the MHTML
                         standard.

   Content-ID            See Message/External Body Content-ID [<a href="#ref-MIDCID" title='"Content-ID and Message-ID Uniform Resource Locators"'>MIDCID</a>].

   Content-Location      MIME message or content part header with one
                         URI of the MIME message or content part body,
                         defined in <a href="#section-4.2">section 4.2</a> below.

   Content-Transfer-     Conversion of a text into 7-bit octets as
   Encoding              specified in [<a href="#ref-MIME1" title='"Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies"'>MIME1</a>] chapter 6.

   CR                    See [<a href="rfc822.html" title='"Standard for the format of ARPA Internet text messages."'>RFC822</a>].

   CRLF                  See [<a href="rfc822.html" title='"Standard for the format of ARPA Internet text messages."'>RFC822</a>].

   Displayed text        The text shown to the user reading a document
                         with a web browser. This may be different from
                         the HTML markup, see the definition of HTML
                         markup below.





<span class="grey">Palme, et al.               Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   Header                Field in a message or content heading
                         specifying the value of one attribute.

   Heading               Part of a message or content before the first
                         CRLFCRLF, containing formatted fields with
                         attributes of the message or content.

   HTML                  See HTML 2 specification [<a href="#ref-HTML2" title='"Hypertext Markup Language - 2.0"'>HTML2</a>].

   HTML Aggregate        HTML objects together with some or all objects,
   objects               to which the HTML object contains hyperlinks,
                         directly or indirectly.

   HTML markup           A file containing HTML encodings as specified
                         in [HTML] which may be different from the
                         displayed text which a person using a web
                         browser sees. For example, the HTML markup may
                         contain "&amp;lt;" where the displayed text
                         contains the character "&lt;".

   LF                    See [<a href="rfc822.html" title='"Standard for the format of ARPA Internet text messages."'>RFC822</a>].

   MIC                   Message Integrity Codes, codes use to verify
                         that a message has not been modified.

   MIME                  See the MIME specifications [MIME1 to MIME5].

   MUA                   Messaging User Agent.

   PDF                   Portable Document Format, see [<a href="#ref-PDF" title='"Portable Document Format Reference Manual"'>PDF</a>].

   Relative URI,         See HTML 2 [<a href="#ref-HTML2" title='"Hypertext Markup Language - 2.0"'>HTML2</a>] and <a href="rfc1808.html">RFC 1808</a> [<a href="#ref-RELURL" title='"Relative Uniform Resource Locators"'>RELURL</a>].
   RelativeURI

   URI, absolute and     See <a href="rfc1866.html">RFC 1866</a> [<a href="#ref-HTML2" title='"Hypertext Markup Language - 2.0"'>HTML2</a>].
   relative

   URL                   See <a href="rfc1738.html">RFC 1738</a> [<a href="#ref-URL" title='"Uniform Resource Locators (URL)"'>URL</a>].

   URL, relative         See Relative Uniform Resource Locators [<a href="#ref-RELURL" title='"Relative Uniform Resource Locators"'>RELURL</a>].

   VRML                  See Virtual Reality Markup Language [<a href="#ref-VRML" title='"Virtual Reality Modeling Language (VRML) Version 1.0 Language Specification."'>VRML</a>].









<span class="grey">Palme, et al.               Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Overview"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Overview</span>

   An aggregate document is a MIME-encoded message that contains a root
   resource (object) as well as other resources linked to it via URIs.
   These other resources may be required to display a multimedia
   document based on the root resource (inline pictures, style sheets,
   applets, etc.), or be the root resources of other multimedia
   documents. It is important to keep in mind that aggregate documents
   need to satisfy the differing needs of several audiences.

   Mail sending agents might send aggregate documents as an encoding of
   normal day-to-day electronic mail. Mail sending agents might also
   send aggregate documents when a user wishes to mail a particular
   document from the web to someone else. Finally mail sending agents
   might send aggregate documents as automatic responders, providing
   access to WWW resources for non-IP connected clients. Also with other
   protocols such as HTTP or FTP, there may sometimes be a need to
   retrieve aggregate documents. Receiving agents also have several
   differing needs. Some receiving agents might be able to receive an
   aggregate document and display it just as any other text content type
   would be displayed.  Others might have to pass this aggregate
   document to a browsing program, and provisions need to be made to
   make this possible.

   Finally several other constraints on the problem arise. It is
   important that it be possible for a document to be signed and for it
   to be transmitted and displayed without breaking the message
   integrity (MIC) checksum that is part of the signature.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20The%20Content-Location%20MIME%20Content%20Header"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  The Content-Location MIME Content Header</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1%20MIME%20content%20headers"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a> MIME content headers</span>

   In order to resolve URI references to resources in other body parts,
   one MIME content header is defined, Content-Location. This header can
   occur in any message or content heading.

   The syntax for this header is, using the syntax definition tools from
   [<a href="#ref-ABNF" title='"Augmented BNF for Syntax Specifications: ABNF"'>ABNF</a>]:

   quoted-pair      =   ("\" text)

   text             =   %d1-9 / ; Characters excluding CR and LF
                        %d11-12 /
                        %d14-127

   WSP              =   SP / HTAB ; Whitespace characters




<span class="grey">Palme, et al.               Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   FWS              =   ([*WSP CRLF] 1*WSP) ; Folding white-space

   ctext            =   NO-WS-CTL / ; Non-white-space controls
                        %d33-39 / ; The rest of the US-ASCII
                        %d42-91 / ; characters not including "(",
                        %d93-127 ; ")", or "\"

   comment          =  "(" *([FWS] (ctext / quoted-pair / comment))
                        [FWS] ")"

   CFWS             =   *([FWS] comment) (([FWS] comment) / FWS)

   content-location =   "Content-Location:" [CFWS] URI [CFWS]

   URI              =   absoluteURI | relativeURI

   where URI is restricted to the syntax for URLs as defined in Uniform
   Resource Locators [<a href="#ref-URL" title='"Uniform Resource Locators (URL)"'>URL</a>] until IETF specifies other kinds of URIs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2%20The%20Content-Location%20Header"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a> The Content-Location Header</span>

   A Content-Location header specifies an URI that labels the content of
   a body part in whose heading it is placed. Its value CAN be an
   absolute or a relative URI. Any URI or URL scheme may be used, but
   use of non-standardized URI or URL schemes might entail some risk
   that recipients cannot handle them correctly.

   An URI in a Content-Location header need not refer to an resource
   which is globally available for retrieval using this URI (after
   resolution of relative URIs). However, URI-s in Content-Location
   headers (if absolute, or resolvable to absolute URIs) SHOULD still be
   globally unique.

   A Content-Location header can thus be used to label a resource which
   is not retrievable by some or all recipients of a message. For
   example a Content-Location header may label an object which is only
   retrievable using this URI in a restricted domain, such as within a
   company-internal web space. A Content-Location header can even
   contain a fictitious URI. Such an URI need not be globally unique.

   A single Content-Location header field is allowed in any message or
   content heading, in addition to a Content-ID header (as specified in
   [<a href="#ref-MIME1" title='"Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies"'>MIME1</a>]) and, in Message headings, a Message-ID (as specified in
   [<a href="rfc822.html" title='"Standard for the format of ARPA Internet text messages."'>RFC822</a>]). All of these constitute different, equally valid body part
   labels, and any of them may be used to satisfy a reference to a body
   part. Multiple Content-Location header fields in the same message
   heading are not allowed.




<span class="grey">Palme, et al.               Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   Example of a multipart/related structure containing body parts with
   both Content-Location and Content-ID labels:

      Content-Type: multipart/related; boundary="boundary-example";
                    type="text/html"

      --boundary-example

      Content-Type: text/html; charset="US-ASCII"

      ... ... &lt;IMG SRC="fiction1/fiction2"&gt; ... ...
      ... ... &lt;IMG SRC="cid:97116092811xyz@foo.bar.net"&gt; ... ...

      --boundary-example
      Content-Type: image/gif
      Content-ID: &lt;97116092511xyz@foo.bar.net&gt;
      Content-Location: fiction1/fiction2

      --boundary-example
      Content-Type: image/gif
      Content-ID: &lt;97116092811xyz@foo.bar.net&gt;
      Content-Location: fiction1/fiction3

      --boundary-example--

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3%20URIs%20of%20MHTML%20aggregates"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a> URIs of MHTML aggregates</span>

   The URI of an MHTML aggregate is not the same as the URI of its root.
   The URI of its root will directly retrieve only the root resource
   itself, even if it may cause a web browser to separately retrieve
   in-line linked resources. If a Content-Location header field is used
   in the heading of a multipart/related, this Content-Location SHOULD
   apply to the whole aggregate, not to its root part.

   When an URI referring to an MHTML aggregate is used to retrieve this
   aggregate, the set of resources retrieved can be different from the
   set of resources retrieved using the Content-Locations of its parts.
   For example, retrieving an MHTML aggregate may return an old version,
   while retrieving the root URI and its in-line linked objects may
   return a newer version.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4%20Encoding%20and%20decoding%20of%20URIs%20in%20MIME%20header%20fields"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a> Encoding and decoding of URIs in MIME header fields</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.4.1%20Encoding%20of%20URIs%20containing%20inappropriate%20characters"></a><a class="selflink" href="#section-4.4.1" name="section-4.4.1">4.4.1</a> Encoding of URIs containing inappropriate characters</span>

   Some documents may contain URIs with characters that are
   inappropriate for an <a href="rfc822.html">RFC 822</a> header, either because the URI itself
   has an incorrect syntax according to [<a href="#ref-URL" title='"Uniform Resource Locators (URL)"'>URL</a>] or the URI syntax standard



<span class="grey">Palme, et al.               Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   has been changed to allow characters not previously allowed in MIME
   headers. These URIs cannot be sent directly in a message header. If
   such a URI occurs, all spaces and other illegal characters in it must
   be encoded using one of the methods described in [<a href="#ref-MIME3" title='"MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text"'>MIME3</a>] <a href="#section-4">section 4</a>.
   This encoding MUST only be done in the header, not in the HTML text.
   Receiving clients MUST decode the [<a href="#ref-MIME3" title='"MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text"'>MIME3</a>] encoding in the heading
   before comparing URIs in body text to URIs in Content-Location
   headers.

   The charset parameter value "US-ASCII" SHOULD be used if the URI
   contains no octets outside of the 7-bit range. If such octets are
   present, the correct charset parameter value (derived e.g. from
   information about the HTML document the URI was found in) SHOULD be
   used. If this cannot be safely established, the value "UNKNOWN-8BIT"
   [<a href="rfc1428.html">RFC 1428</a>] MUST be used.

   Note, that for the matching of URIs in text/html body parts to URIs
   in Content-Location headers, the value of the charset parameter is
   irrelevant, but that it may be relevant for other purposes, and that
   incorrect labeling MUST, therefore, be avoided. Warning: Irrelevance
   of the charset parameter may not be true in the future, if different
   character encodings of the same non-English filename are used in
   HTML.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.4.2%20Folding%20of%20long%20URIs"></a><a class="selflink" href="#section-4.4.2" name="section-4.4.2">4.4.2</a> Folding of long URIs</span>

   Since MIME header fields have a limited length and long URIs can
   result in Content-Location headers that exceed this length, Content-
   Location headers may have to be folded.

   Encoding as discussed in clause 4.4.1 MUST be done before such
   folding.  After that, the folding can be done, using the algorithm
   defined in [<a href="#ref-URLBODY" title='"Definition of the URL MIME External-Body Access-Type"'>URLBODY</a>] <a href="#section-3.1">section 3.1</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.4.3%20Unfolding%20and%20decoding%20of%20received%20URLs%20in%20MIME%20header%20fields"></a><a class="selflink" href="#section-4.4.3" name="section-4.4.3">4.4.3</a> Unfolding and decoding of received URLs in MIME header fields</span>

   Upon receipt, folded MIME header fields should be unfolded, and then
   any MIME encoding should be removed, to retrieve the original URI.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Base%20URIs%20for%20resolution%20of%20relative%20URIs"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Base URIs for resolution of relative URIs</span>

   Relative URIs inside the contents of MIME body parts are resolved
   relative to a base URI using the methods for resolving relative URIs
   described in [<a href="#ref-RELURL" title='"Relative Uniform Resource Locators"'>RELURL</a>]. In order to determine this base URI, the
   first-applicable method in the following list applies.






<span class="grey">Palme, et al.               Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   (a) There is a base specification inside the MIME body part
       containing the relative URI which resolves relative URIs into
       absolute URIs.  For example, HTML provides the BASE element for
       this purpose.

   (b) There is a Content-Location header in the immediately surrounding
       heading of the body part and it contains an absolute URI. This
       URI can serve as a base in the same way as a requested URI can
       serve as a base for relative URIs within a file retrieved via
       HTTP [<a href="#ref-HTTP" title='"Hypertext Transfer Protocol -- HTTP/1.0"'>HTTP</a>].

   (c) If necessary, step (b) can be repeated recursively to find a
       suitable Content-Location header in a surrounding multi-part or
       message heading.

   (d) If the MIME object is returned in a HTTP response, use the URI
       used to initiate the request

   (e) When the methods above do not yield an absolute URI, a base URL
       of "thismessage:/" MUST be employed. This base URL has been
       defined for the sole purpose of resolving relative references
       within a multipart/related structure when no other base URI is
       specified.

   This is also described in other words in <a href="#section-8.2">section 8.2</a> below.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Sending%20documents%20without%20linked%20objects"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Sending documents without linked objects</span>

   If a text/html resource (object) is sent without subsidiary
   resources, to which it refers, it MAY be sent by itself. In this
   case, embedding it in a multipart/related structure is not necessary.

   Such a text/html resource may either contain no URIs, or URIs which
   the recipient is expected to retrieve (if possible) via a URI
   specified protocol. A text/html resource may also be sent with
   unresolvable links in special cases, such as when two authors
   exchange drafts of unfinished resources.

   Inclusion of URIs referencing resources which the recipient has to
   retrieve via an URI specified protocol may not work for some
   recipients. This is because not all e-mail recipients have full
   Internet connectivity, or because URIs which work for a sender will
   not work for a recipient. This occurs, for example, when an URI
   refers to a resource within a company-internal network that is not
   accessible from outside the company.






<span class="grey">Palme, et al.               Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Use%20of%20the%20Content-Type%20%22multipart%2Frelated%22"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Use of the Content-Type "multipart/related"</span>

   If a message contains one or more MIME body parts containing URIs and
   also contains as separate body parts, resources, to which these URIs
   (as defined, for example, in HTML 2.0 [<a href="#ref-HTML2" title='"Hypertext Markup Language - 2.0"'>HTML2</a>]) refer, then this whole
   set of body parts (referring body parts and referred-to body parts)
   SHOULD be sent within a multipart/related structure as defined in
   [<a href="#ref-REL" title='"The MIME Multipart/Related Content- Type"'>REL</a>].

   Even though headers can occur in a message that lacks an associated
   multipart/related structure, this standard only covers their use for
   resolution of URIs between body parts inside a multipart/related
   structure. This standard does cover the case where a resource in a
   nested multipart/related structure contains URIs that reference MIME
   body parts in another  multipart/related structure, in which it is
   enclosed. This standard does not cover the case where a resource in a
   multipart/related structure contains URIs that reference MIME body
   parts in another parallel or nested multipart/related structure, or
   in another MIME message, even if methods similar to those described
   in this standard are used. Implementers who employ such URIs are
   warned that receiving agents implementing this standard may not be
   able to process such references.

   When the start body part of a multipart/related structure is an
   atomic object, such as a text/html resource, it SHOULD be employed as
   the root resource of that multipart/related structure. When the start
   body part of a multipart/related structure is a multipart/alternative
   structure, and that structure contains at least one alternative body
   part which is a suitable atomic object, such as a text/html resource,
   then that body part SHOULD be employed as the root resource of the
   aggregate document.  Implementers are warned, however, that some
   receiving agents treat multipart/alternative as if it had been
   multipart/mixed (even though MIME [<a href="#ref-MIME1" title='"Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies"'>MIME1</a>] requires support for
   multipart/alternative).

   [<a id="ref-REL" name="ref-REL">REL</a>] specifies that a type parameter is mandatory in a "Content-
   Type:  multipart/related" header, and requires that it be employed to
   specify the type of the multipart/related start object. Thus, the
   type parameter value shall be "multipart/alternative", when the start
   part is of "Content-type multipart/alternative", even if the actual
   root resource is of type "text/html". In addition, if the
   multipart/related start object is not the first body part in a
   multipart/related structure, [<a href="#ref-REL" title='"The MIME Multipart/Related Content- Type"'>REL</a>] further requires that its
   Content-ID MUST be specified as the value of a start parameter in the
   "Content-Type:  multipart/related" header.






<span class="grey">Palme, et al.               Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   When rendering a resource in a multipart/related structure, URI
   references within that resource can be satisfied by body parts within
   the same multipart/related structure (see <a href="#section-8.2">section 8.2</a> below). This is
   useful:

   (a) For those recipients who only have email but not full Internet
       access.

   (b) For those recipients who for other reasons, such as firewalls or
       the use of company-internal links, cannot retrieve URI referenced
       resources via URI specified protocols.

       Note, that this means that you can, via e-mail, send text/html
       objects which includes URIs which the recipient cannot resolve
       via HTTP or other connectivity-requiring URIs.

   (c) To send a document whose content is preserved even if the
       resources to which embedded URIs refer are later changed or
       deleted.

   (d) For resources which are not available for protocol based
       retrieval.

   (e) To speed up access.

   When a sending MUA sends objects which were retrieved from the WWW,
   it SHOULD maintain their WWW URIs. It SHOULD not transform these URIs
   into some other URI form prior to transmitting them. This will allow

   the receiving MUA to both verify MICs included with the message, as
   well as verify the documents against their WWW counterpoints, if this
   is appropriate.

   In certain cases this will not work - for example, if a resource
   contains URIs as parameters to objects and applets. In such a case,
   it might be better to rewrite the document before sending it. This
   problem is discussed in more detail in the informational RFC which
   will be published as a supplement to this standard.

   Within a multipart/related structure, each body part MUST have, if
   assigned, a different Content-ID header value and a Content-Location
   header field values which resolve to a different URI.

   Two body parts in the same multipart/related structure can have the
   same relative Content-Location header value, only if when resolved to
   absolute URIs they become different.





<span class="grey">Palme, et al.               Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Usage%20of%20Links%20to%20Other%20Body%20Parts"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Usage of Links to Other Body Parts</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1%20General%20principle"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a> General principle</span>

   A body part, such as a text/html body part, may contain URIs that
   reference resources which are included as body parts in the same
   message -- in detail, as body parts within the same multipart/related
   structure. Often such URI linked resources are meant to be displayed
   inline to the viewer of the referencing body part; for example,
   objects referenced with the SRC attribute of the IMG element in HTML
   2.0 [<a href="#ref-HTML2" title='"Hypertext Markup Language - 2.0"'>HTML2</a>]. New elements and attributes with this property are
   proposed in the ongoing development of HTML (examples: applet, frame,
   profile, OBJECT, classid, codebase, data, SCRIPT). A sender might
   also want to send a set of HTML documents which the reader can
   traverse, and which are related with the attribute href of the A
   element.

   If a user retrieves and displays a web page formed from a text/html
   resource, and the subsidiary resources it references, and merely
   saves the text/html resource, that user may not at a later time be
   able to retrieve and display the web page as it appeared when saved.
   The format described in this standard can be used to archive and
   retrieve all of the resources required to display the web page, as it
   originally appeared at a certain moment of time, in one aggregate
   file.

   In order to send or store complete such messages, there is a need to
   specify how a URI in one body part can reference a resource in
   another body part.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2%20Resolution%20of%20URIs%20in%20text%2Fhtml%20body%20parts"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a> Resolution of URIs in text/html body parts</span>

   The resolution of inline, retrieval and other kinds of URIs in
   text/html body parts is performed in the following way:

   (a) Unfold multiple line header values according to [<a href="#ref-URLBODY" title='"Definition of the URL MIME External-Body Access-Type"'>URLBODY</a>]. Do NOT
       however translate character encodings of the kind described in
       [<a href="#ref-URL" title='"Uniform Resource Locators (URL)"'>URL</a>]. Example: Do not transform "a%2eb/c%20d" into "a/b/c d".

   (b) Remove all MIME encodings, such as content-transfer encoding and
       header encodings as defined in MIME part 3 [<a href="#ref-MIME3" title='"MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text"'>MIME3</a>] Do NOT however
       translate character encodings of the kind described in [<a href="#ref-URL" title='"Uniform Resource Locators (URL)"'>URL</a>].
       Example: Do not transform "a%2eb/c%20d" into "a/b/c d".

   (c) Try to resolve all relative URIs in the HTML content and in
       Content-Location headers using the procedure described in chapter
       5 above. The result of this resolution can be an absolute URI, or
       an absolute URI with the base "thismessage:/" as specified in



<span class="grey">Palme, et al.               Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


       chapter 5.

   (d) For each referencing URI in a text/html body part, compare the
       value of the referencing URI after resolution as described in (a)
       and (b), with the URI derived from Content-ID and Content-
       Location headers for other body parts within the same or a
       surrounding Multipart/related structure. If the strings are
       identical, octet by octet, then the referencing URI references
       that body part. This comparison will only succeed if the two URIs
       are identical. This means that if one of the two URIs to be
       compared was a fictitious absolute URI with the base
       "thismessage:/", the other must also be such a fictitious
       absolute URI, and not resolvable to a real absolute URI.

   (e) If (d) fails, try to retrieve the URI referenced resource
       hyperlink through ordinary Internet lookup. Resolution of URIs of
       the URL-types "mid" or "cid" to other content-parts, outside the
       same multipart/related structure, or in other separately sent
       messages, is not covered by this standard, and is thus neither
       encouraged nor forbidden.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.3%20Use%20of%20the%20Content-ID%20header%20and%20CID%20URLs"></a><a class="selflink" href="#section-8.3" name="section-8.3">8.3</a> Use of the Content-ID header and CID URLs</span>

   When URIs employing a CID (Content-ID) scheme as defined in [<a href="#ref-URL" title='"Uniform Resource Locators (URL)"'>URL</a>] and
   [<a href="#ref-MIDCID" title='"Content-ID and Message-ID Uniform Resource Locators"'>MIDCID</a>] are used to reference other body parts in an MHTML
   multipart/related structure, they MUST only be matched against
   Content-ID header values, and not against Content-Location header
   with CID: values. Thus, even though the following two headers are
   identical in meaning, only the Content-ID value will be matched, and
   the Content-Location value will be ignored.

      Content-ID: &lt;foo@bar.net&gt;
      Content-Location: CID: foo@bar.net

   Note: Content-IDs MUST be globally unique [<a href="#ref-MIME1" title='"Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies"'>MIME1</a>]. It is thus not
   permitted to make them unique only within a message or within a
   single multipart/related structure.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Examples"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Examples</span>

   Warning: The examples are provided for illustrative purposes only. If
   there is a contradiction between the explanatory text and the
   examples in this standard, then the explanatory text is normative.

   Notation: The examples contain indentation to show the structure, the
   real objects should not be indented in this way.





<span class="grey">Palme, et al.               Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1%20Example%20of%20a%20HTML%20body%20without%20included%20linked%20objects"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a> Example of a HTML body without included linked objects</span>

   The first example is the simplest form of an HTML email message. This
   message does not contain an aggregate HTML object, but simply a
   message with a single HTML body part. This body part contains a URI
   but the messages does not contain the resource referenced by that
   URI. To retrieve the resource referenced by the URI the receiving
   client would need either IP access to the Internet, or an electronic
   mail web gateway.

      From: foo1@bar.net
      To: foo2@bar.net
      Subject: A simple example
      Mime-Version: 1.0
      Content-Type: text/html; charset="iso-8859-1"
      Content-Transfer-Encoding: 8bit

      &lt;HTML&gt;
      &lt;head&gt;&lt;/head&gt;
      &lt;body&gt;
      &lt;h1&gt;Acute accent&lt;/h1&gt;
      The following two lines look have the same screen rendering:&lt;p&gt;
      E with acute accent becomes É.&lt;br&gt;
      E with acute accent becomes &amp;Eacute;.&lt;p&gt;
      Try clicking &lt;a href="http://www.ietf.cnri.reston.va.us/"&gt;
      here.&lt;/a&gt;&lt;p&gt;
      &lt;/body&gt;&lt;/HTML&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2%20Example%20with%20an%20absolute%20URI%20to%20an%20embedded%20GIF%20picture"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a> Example with an absolute URI to an embedded GIF picture</span>

   The second example is an HTML message which includes a single image,
   referenced using the Content-Location mechanism.

      From: foo1@bar.net
      To: foo2@bar.net
      Subject: A simple example
      Mime-Version: 1.0
      Content-Type: multipart/related; boundary="boundary-example";
              type="text/html"; start="&lt;foo3@foo1@bar.net&gt;"

      --boundary-example
      Content-Type: text/html;charset="US-ASCII"
      Content-ID: &lt;foo3@foo1@bar.net&gt;

      ... text of the HTML document, which might contain a URI
      referencing a resource in another body part, for example
      through a statement such as:
      &lt;IMG SRC="http://www.ietf.cnri.reston.va.us/images/ietflogo.gif"



<span class="grey">Palme, et al.               Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


       ALT="IETF logo"&gt;

      --boundary-example
      Content-Location:
         <a href="http://www.ietf.cnri.reston.va.us/images/ietflogo.gif">http://www.ietf.cnri.reston.va.us/images/ietflogo.gif</a>
      Content-Type: IMAGE/GIF
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgAPEAAP/////ZRaCgoAAAACH+PUNvcHlyaWdodCAoQykgMTk5
      NSBJRVRGLiBVbmF1dGhvcml6ZWQgZHVwbGljYXRpb24gcHJvaGliaXRlZC4A
      etc...

      --boundary-example--

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.3%20Example%20with%20relative%20URIs%20to%20embedded%20GIF%20pictures"></a><a class="selflink" href="#section-9.3" name="section-9.3">9.3</a> Example with relative URIs to embedded GIF pictures</span>

   In this example, a Content-Location header field in the outermost
   heading will be a base to all relative URLs, also inside the HTML
   text being sent.

      From: foo1@bar.net
      To: foo2@bar.net
      Subject: A simple example
      Mime-Version: 1.0
      Content-Location: <a href="http://www.ietf.cnri.reston.va.us/">http://www.ietf.cnri.reston.va.us/</a>
      Content-Type: multipart/related; boundary="boundary-example";
              type="text/html"

      --boundary-example
      Content-Type: text/html; charset="ISO-8859-1"
      Content-Transfer-Encoding: QUOTED-PRINTABLE

      ... text of the HTML document, which might contain URIs
      referencing resources in other body parts, for example through
      statements such as:

      &lt;IMG SRC="images/ietflogo1.gif" ALT="IETF logo1"&gt;
      &lt;IMG SRC="images/ietflogo2.gif" ALT="IETF logo2"&gt;
      &lt;IMG SRC="images/ietflogo3.gif" ALT="IETF logo3"&gt;

      Example of a copyright sign encoded with Quoted-Printable: =A9
      Example of a copyright sign mapped onto HTML markup: &amp;#168;

      --boundary-example
      Content-Location:
               <a href="http://www.ietf.cnri.reston.va.us/images/ietflogo1.gif">http://www.ietf.cnri.reston.va.us/images/ietflogo1.gif</a>
      ; Note - Absolute Content-Location does not require a
      ; base



<span class="grey">Palme, et al.               Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


      Content-Type: IMAGE/GIF
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgAPEAAP/////ZRaCgoAAAACH+PUNvcHlyaWdodCAoQykgMTk5
      NSBJRVRGLiBVbmF1dGhvcml6ZWQgZHVwbGljYXRpb24gcHJvaGliaXRlZC4A
      etc...

      --boundary-example
      Content-Location: images/ietflogo2.gif
      ; Note - Relative Content-Location is resolved by base
      ; specified in the Multipart/Related Content-Location heading
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgAPEAAP/////ZRaCgoAAAACH+PUNvcHlyaWdodCAoQykgMTk5
      NSBJRVRGLiBVbmF1dGhvcml6ZWQgZHVwbGljYXRpb24gcHJvaGliaXRlZC4A
      etc...

      --boundary-example
      Content-Location:
               <a href="http://www.ietf.cnri.reston.va.us/images/ietflogo3.gif">http://www.ietf.cnri.reston.va.us/images/ietflogo3.gif</a>
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgAPEAAP/////ZRaCgoAAAACH+PUNvcHlyaWdodCAoQykgMTk5
      NSBJRVRGLiBVbmF1dGhvcml6ZWQgZHVwbGljYXRpb24gcHJvaGliaXRlZC4A
      etc...

      --boundary-example--

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.4%20Example%20with%20a%20relative%20URI%20and%20no%20BASE%20available"></a><a class="selflink" href="#section-9.4" name="section-9.4">9.4</a> Example with a relative URI and no BASE available</span>

      From: foo1@bar.net
      To: foo2@bar.net
      Subject: A simple example
      Mime-Version: 1.0
      Content-Type: multipart/related; boundary="boundary-example";
              type="text/html"

      --boundary-example
      Content-Type: text/html; charset="iso-8859-1"
      Content-Transfer-Encoding: QUOTED-PRINTABLE

      ... text of the HTML document, which might contain a URI
      referencing a resource in another body part, for example
      through a statement such as:
      &lt;IMG SRC="ietflogo.gif" ALT="IETF logo"&gt;
      Example of a copyright sign encoded with Quoted-Printable: =A9
      Example of a copyright sign mapped onto HTML markup: &amp;#168;




<span class="grey">Palme, et al.               Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


      --boundary-example
      Content-Location: ietflogo.gif
      Content-Type: IMAGE/GIF
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgAPEAAP/////ZRaCgoAAAACH+PUNvcHlyaWdodCAoQykgMTk5
      NSBJRVRGLiBVbmF1dGhvcml6ZWQgZHVwbGljYXRpb24gcHJvaGliaXRlZC4A
      etc...

      --boundary-example--

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.5%20Example%20using%20CID%20URL%20and%20Content-ID%20header%20to%20an%20embedded%20GIF"></a><a class="selflink" href="#section-9.5" name="section-9.5">9.5</a> Example using CID URL and Content-ID header to an embedded GIF</span>
<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/picture"></a>    picture</span>

      From: foo1@bar.net
      To: foo2@bar.net
      Subject: A simple example
      Mime-Version: 1.0
      Content-Type: multipart/related; boundary="boundary-example";
              type="text/html"

      --boundary-example
      Content-Type: text/html; charset="US-ASCII"

      ... text of the HTML document, which might contain a URI
      referencing a resource in another body part, for example
      through a statement such as:
      &lt;IMG SRC="cid:foo4@foo1@bar.net" ALT="IETF logo"&gt;

      --boundary-example
      Content-Location: CID:something@else ; this header is disregarded
      Content-ID: &lt;foo4@foo1@bar.net&gt;
      Content-Type: IMAGE/GIF
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgAPEAAP/////ZRaCgoAAAACH+PUNvcHlyaWdodCAoQykgMTk5
      NSBJRVRGLiBVbmF1dGhvcml6ZWQgZHVwbGljYXRpb24gcHJvaGliaXRlZC4A
      etc...

      --boundary-example--











<span class="grey">Palme, et al.               Standards Track                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.6%20Example%20showing%20permitted%20and%20forbidden%20references%20between%20nested"></a><a class="selflink" href="#section-9.6" name="section-9.6">9.6</a> Example showing permitted and forbidden references between nested</span>
<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/body%20parts"></a>    body parts</span>

   This example shows in which cases references are allowed between
   multiple multipart/related body parts in a message.

      From: foo1@bar.net
      To: foo2@bar.net
      Subject: A simple example
      Mime-Version: 1.0
      Content-Type: multipart/related; boundary="boundary-example-1";
                type="text/html"

      --boundary-example-1
      Content-Type: text/html;charset="US-ASCII"
      Content-ID: &lt;foo3@foo1@bar.net&gt;

      The image reference below will be resolved with the image
      in the next body part.
      &lt;IMG SRC="http://www.ietf.cnri.reston.va.us/images/ietflogo.gif"
      ALT="IETF logo with white background"&gt;

      The image reference below cannot be resolved within this
      MIME message, since it contains a reference from an outside
      body part to an inside body part, which is not supported
      by this standard.
      &lt;IMG SRC=images/ietflogo2e.gif"
      ALT="IETF logo with transparent background"&gt;

      The anchor reference immediately below will be resolved with
      the nested text/html body part below:
      &lt;A HREF="http://www.ietf.cnri.reston.va.us/more-info&gt;
      More info&lt;/A&gt;

      The anchor reference immediately below will be resolved with
      the nested text/html body part below:
      &lt;A HREF="http://www.ietf.cnri.reston.va.us/even-more-info&gt;
      Even more info&lt;/A&gt;

      --boundary-example-1
      Content-Location:
               <a href="http://www.ietf.cnri.reston.va.us/images/ietflogo.gif">http://www.ietf.cnri.reston.va.us/images/ietflogo.gif</a>
      Content-Type: IMAGE/GIF
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgAPEAAP/////ZRaCgoAAAACH+PUNvcHlyaWdodCAoQykgMTk5
      NSBJRVRGLiBVbmF1dGhvcml6ZWQgZHVwbGljYXRpb24gcHJvaGliaXRlZC4A
      etc...



<span class="grey">Palme, et al.               Standards Track                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


      --boundary-example-1
      Content-Location:
           <a href="http://www.ietf.cnri.reston.va.us/more-info">http://www.ietf.cnri.reston.va.us/more-info</a>
      Content-Type: multipart/related; boundary="boundary-example-2";
                 type="text/html"
      --boundary-example-2
      Content-Type: text/html;charset="US-ASCII"
      Content-ID: &lt;foo4@foo1@bar.net&gt;

      The image reference below will be resolved with the image
      in the surrounding multipart/related above.
      &lt;IMG SRC="images/ietflogo.gif"
      ALT="IETF logo with white background"&gt;

      The image reference below will be resolved with the image
      inside the current nested multipart/related below.
      &lt;IMG SRC=images/ietflogo2e.gif"
      ALT="IETF logo with transparent background"&gt;

      --boundary-example-2
      Content-Location: http:images/ietflogo2.gif
      Content-Type: IMAGE/GIF
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgANX/ACkpKTExMTk5OUJCQkpKSlJSUlpaWmNjY2tra3Nzc3t7e4
      SEhIyMjJSUlJycnKWlpa2trbW1tcDAwM7Ozv/eQnNzjHNzlGtrjGNjhFpae1pa
      etc...

      --boundary-example-2--
      --boundary-example-1
      Content-Location:
                 <a href="http://www.ietf.cnri.reston.va.us/even-more-info">http://www.ietf.cnri.reston.va.us/even-more-info</a>
      Content-Type: multipart/related; boundary="boundary-example-3";
                 type="text/html"
      --boundary-example-3
      Content-Type: text/html;charset="US-ASCII"
      Content-ID: &lt;4@foo@bar.net&gt;

      The image reference below will be resolved with the image
      inside the current nested multipart/related below.
      &lt;IMG SRC=images/ietflogo2d.gif"
      ALT="IETF logo with shadows"&gt;

      The image reference below cannot be resolved according to
      this standard since references between parallel multipart/
      related structures are not supported.
      &lt;IMG SRC=images/ietflogo2e.gif"
      ALT="IETF logo with transparent background"&gt;



<span class="grey">Palme, et al.               Standards Track                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


      --boundary-example-3
      Content-Location: http:images/ietflogo2d.gif
      Content-Type: IMAGE/GIF
      Content-Transfer-Encoding: BASE64

      R0lGODlhGAGgANX/AMDAwCkpKTExMTk5OUJCQkpKSlJSUlpaWmNjY2tra3Nz
      c3t7e4SEhIyMjJSUlJycnKWlpa2trbW1tb29vcbGxs7OztbW1t7e3ufn5+/v
      etc...

      --boundary-example-3--
      --boundary-example-1--

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Character%20encoding%20issues%20and%20end-of-line%20issues"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Character encoding issues and end-of-line issues</span>

   For the encoding of characters in HTML documents and other text
   documents into a MIME-compatible octet stream, the following
   mechanisms are relevant:

   -  HTML [<a href="#ref-HTML2" title='"Hypertext Markup Language - 2.0"'>HTML2</a>], [<a href="#ref-HTML-I18N" title='"Internationalization of the Hypertext Markup Language"'>HTML-I18N</a>] as an application of SGML [<a href="#ref-SGML">SGML</a>] allows
      characters to be denoted by character entities as well as by
      numeric character references (e.g. "Latin small letter a with
      acute accent" may be represented by "&amp;aacute;" or "&amp;#225;") in the
      HTML markup.

   -  HTML documents, in common with other documents of the MIME
      Content-Type "text", can be represented in MIME using one of
      several character encodings. The MIME Content-Type "charset"
      parameter value indicates the particular encoding used. For the
      exact meaning and use of the "charset" parameter, please see
      [<a href="#ref-MIME2" title='"Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"'>MIME2</a>] chapter 4.

      Note that the "charset" parameter refers only to the MIME
      character encoding. For example, the string "&amp;aacute;" can be sent
      in MIME with "charset=US-ASCII", while the raw character "Latin
      small letter a with acute accent" cannot.

   The above mechanisms are well defined and documented, and therefore
   not further explained here. In sending a message, all the above
   mentioned mechanisms MAY be used, and any mixture of them MAY occur
   when sending the document in MIME format. Receiving user agents
   (together with any Web browser they may use to display the document)
   MUST be capable of handling any combinations of these mechanisms.

   Also note that:

   -  Any documents including HTML documents that contain octet values
      outside the 7-bit range need a content-transfer-encoding applied
      before transmission over certain transport protocols [MIME1,



<span class="grey">Palme, et al.               Standards Track                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


      chapter 5].

   -  The MIME standard [<a href="#ref-MIME2" title='"Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"'>MIME2</a>] requires that e-mailed documents of
      "Content-Type: Text/ MUST be in canonical form before a Content-
      Transfer-Encoding is applied, i.e. that line breaks are encoded as
      CRLFs, not as bare CRs or bare LFs or something else.  This is in
      contrast to [<a href="#ref-HTTP" title='"Hypertext Transfer Protocol -- HTTP/1.0"'>HTTP</a>] where <a href="#section-3.6.1">section 3.6.1</a> allows other
      representations of line breaks.

   Note that this might cause problems with integrity checks based on
   checksums, which might not be preserved when moving a document from
   the HTTP to the MIME environment. If a document has to be converted
   in such a way that a checksum based message integrity check becomes
   invalid, then this integrity check header SHOULD be removed from the
   document.

   Other sources of problems are Content-Encoding used in HTTP but not
   allowed in MIME, and character sets that are not able to represent
   line breaks as CRLF. A good overview of the differences between HTTP
   and MIME with regards to Content-Type: "text" can be found in [<a href="#ref-HTTP" title='"Hypertext Transfer Protocol -- HTTP/1.0"'>HTTP</a>],
   <a href="#appendix-C">appendix C</a>.

   Some transport mechanisms may specify a default "charset" parameter
   if none is supplied [<a href="#ref-HTTP" title='"Hypertext Transfer Protocol -- HTTP/1.0"'>HTTP</a>, <a href="#ref-MIME1" title='"Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies"'>MIME1</a>]. Because the default differs for
   different mechanisms, when HTML is transferred through e-mail, the
   charset parameter SHOULD be included, rather than relying on the
   default.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Security%20Considerations"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Security Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.1%20Security%20considerations%20not%20related%20to%20caching"></a><a class="selflink" href="#section-11.1" name="section-11.1">11.1</a> Security considerations not related to caching</span>

   It is possible for a message sender to misrepresent the source of a
   multipart/related body part to a message recipient by labeling it
   with a Content-Location URI that references another resource.
   Therefore, message recipients should only interpret Content-Location
   URIs as labeling a body part for the resolution of references from
   body parts in the same multipart/related message structure, and not
   as the source of a resource, unless this can be verified by other
   means.

   URIs, especially File URIs, if used without change in a message, may
   inadvertently reveal information that was not intended to be revealed
   outside a particular security context. Message senders should take
   care when constructing messages containing the new header fields,
   defined in this standard, that they are not revealing information
   outside of any security contexts to which they belong.




<span class="grey">Palme, et al.               Standards Track                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   Some resource servers hide passwords and tickets (access tokens to
   information which should not be reveled to others) and other
   sensitive information in non-visible  fields or URIs within a
   text/html resource.  If such a text/html resource is forwarded in an
   email message, this sensitive information may be inadvertently
   revealed to others.

   Since HTML documents can either directly contain executable content
   (i.e., JavaScript) or indirectly reference executable content (The
   "INSERT" specification, Java). It is exceedingly dangerous for a
   receiving User Agent to execute content received in a mail message
   without careful attention to restrictions on the capabilities of that
   executable content.

   HTML-formatted messages can be used to investigate user behaviour,
   for example to break anonymity, in ways which invade the privacy of
   individuals. If you send a message with a inline link to an object
   which is not itself included in the message, the recipients mailer or
   browser may request that object through HTTP. The HTTP transaction
   will then reveal who is reading the message. Example: A person who
   wants to find out who is behind an anonymous user identity, or from
   which workstation a user is reading his mail, can do this by sending
   a message with an inline link and then observe from where this link
   is used to request the object.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.2%20Security%20considerations%20related%20to%20caching"></a><a class="selflink" href="#section-11.2" name="section-11.2">11.2</a> Security considerations related to caching</span>

   There is a well-known problem with the caching of directly retrieved
   web resources. A resource retrieved from a cache may differ from that
   re-retrieved from its source. This problem, also manifests itself
   when a copy of a resource is delivered in a multipart/related
   structure.

   When processing (rendering) a text/html body part in an MHTML
   multipart/related structure, all URIs in that text/html body part
   which reference subsidiary resources within the same
   multipart/related structure SHALL be satisfied by those resources and
   not by resources from any another local or remote source.

   Therefore, if a sender wishes a recipient to always retrieve an URI
   referenced resource from its source, an URI labeled copy of that
   resource MUST NOT be included in the same multipart/related
   structure.

   In addition, since the source of a resource received in a
   multipart/related structure can be misrepresented (see 11.1 above),
   if a resource received in multipart/related structure is stored in a
   cache, it MUST NOT be retrieved from that cache other than by a



<span class="grey">Palme, et al.               Standards Track                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   reference contained in a body part of the same multipart/related
   structure. Failure to honor this directive will allow a
   multipart/related structure to be employed as a Trojan Horse. For
   example, to inject bogus resources (i.e. a misrepresentation of a
   competitor's Web site) into a recipient's generally accessible Web
   cache.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Differences%20as%20compared%20to%20the%20previous%20version%20of%20this%20proposed"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Differences as compared to the previous version of this proposed</span>
<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/standard%20in%20RFC%202110"></a>     standard in <a href="rfc2110.html">RFC 2110</a></span>

   The specification has been changed to show that the formats described
   do not only apply to multipart MIME in email, but also to multipart
   MIME transferred through other protocols such as HTTP or FTP.

   In order to agree with [<a href="#ref-RELURL" title='"Relative Uniform Resource Locators"'>RELURL</a>], Content-Location headers in
   multipart Content-Headings can now be used as a base to resolve
   relative URIs in their component parts, but only if no base URI can
   be derived from the component part itself. Base URIs in Content-
   Location header fields in inner headings have precedence over base
   URIs in outer multipart headings.

   The Content-Base header, which was present in <a href="rfc2110.html">RFC 2110</a>, has been
   removed. A conservative implementor may choose to accept this header
   in input for compatibility with implementations of <a href="rfc2110.html">RFC 2110</a>, but MUST
   never send any Content-Base header, since this header is not any more
   a part of this standard.

   A <a href="#section-4.4.1">section 4.4.1</a> has been added, specifying how to handle the case of
   sending a body part whose URI does not agree with the correct URI
   syntax.

   The handling of relative and absolute URIs for matching between body
   parts have been merged into a single description, by specifying that
   relative URIs, which cannot be resolved otherwise, should be handled
   as if they had been given the URL "thismessage:/".

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20%20Acknowledgments"></a><a class="selflink" href="#section-13" name="section-13">13</a>.   Acknowledgments</span>

   Harald T. Alvestrand, Richard Baker, Isaac Chan, Dave Crocker, Martin
   J. Duerst, Lewis Geer, Roy Fielding, Ned Freed, Al Gilman, Paul
   Hoffman, Andy Jacobs, Richard W. Jesmajian, Mark K. Joseph, Greg
   Herlihy, Valdis Kletnieks, Daniel LaLiberte, Ed Levinson, Jay Levitt,
   Albert Lunde, Larry Masinter, Keith Moore, Gavin Nicol, Martyn W.
   Peck, Pete Resnick, Jon Smirl, Einar Stefferud, Jamie Zawinski, Steve
   Zilles and several other people have helped us with preparing this
   document. We alone take responsibility for any errors which may still
   be in the document.




<span class="grey">Palme, et al.               Standards Track                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20%20References"></a><a class="selflink" href="#section-14" name="section-14">14</a>.   References</span>

   [<a id="ref-ABNF" name="ref-ABNF">ABNF</a>]          Crocker, D. and P. Overell, "Augmented BNF for Syntax
                   Specifications: ABNF", <a href="rfc2234.html">RFC 2234</a>, November 1997.

   [<a id="ref-CONDISP" name="ref-CONDISP">CONDISP</a>]       Troost, R. and S. Dorner, "Communicating Presentation
                   Information in Internet Messages: The Content-
                   Disposition Header", <a href="rfc2183.html">RFC 2183</a>, August 1997.

   [<a id="ref-HOSTS" name="ref-HOSTS">HOSTS</a>]         Braden, R., Ed.,  "Requirements for Internet Hosts --
                   Application and Support", STD 3, <a href="rfc1123.html">RFC 1123</a>, October
                   1989.

   [<a id="ref-HTML-I18N" name="ref-HTML-I18N">HTML-I18N</a>]     Yergeau, F., Nicol, G. Adams, G. and M. Duerst:
                   "Internationalization of the Hypertext Markup
                   Language", <a href="rfc2070.html">RFC 2070</a>, January 1997.

   [<a id="ref-HTML2" name="ref-HTML2">HTML2</a>]         Berners-Lee, T. and D. Connolly: "Hypertext Markup
                   Language - 2.0", <a href="rfc1866.html">RFC 1866</a>, November 1995.

   [<a id="ref-HTML3.2" name="ref-HTML3.2">HTML3.2</a>]       Dave Raggett: HTML 3.2 Reference Specification, W3C
                   Recommendation, January 1997, at URL
                   <a href="http://www.w3.org/TR/REC-html32.html">http://www.w3.org/TR/REC-html32.html</a>

   [<a id="ref-HTTP" name="ref-HTTP">HTTP</a>]          Berners-Lee, T., Fielding, R. and H. Frystyk,
                   "Hypertext Transfer Protocol -- HTTP/1.0", <a href="rfc1945.html">RFC 1945</a>,
                   May 1996.

   [<a id="ref-IETF-TERMS" name="ref-IETF-TERMS">IETF-TERMS</a>]    Bradner, S., "Key words for use in RFCs to Indicate
                   Requirements Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-INFO" name="ref-INFO">INFO</a>]          J. Palme: Sending HTML in MIME, an informational
                   supplement to the RFC: MIME Encapsulation of
                   Aggregate Documents, such as HTML (MHTML), Work in
                   Progress.

   [<a id="ref-MD5" name="ref-MD5">MD5</a>]           Rivest, R., "The MD5 Message-Digest Algorithm", <a href="rfc1321.html">RFC</a>
                   <a href="rfc1321.html">1321</a>, April 1992.

   [<a id="ref-MIDCID" name="ref-MIDCID">MIDCID</a>]        Levinson, E., "Content-ID and Message-ID Uniform
                   Resource Locators", <a href="rfc2387.html">RFC 2387</a>, August 1998.

   [<a id="ref-MIME1" name="ref-MIME1">MIME1</a>]         Freed, N. and N. Borenstein, "Multipurpose Internet
                   Mail Extensions (MIME) Part One: Format of Internet
                   Message Bodies", <a href="rfc2045.html">RFC 2045</a>, December 1996.






<span class="grey">Palme, et al.               Standards Track                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   [<a id="ref-MIME2" name="ref-MIME2">MIME2</a>]         Freed, N. and N. Borenstein, "Multipurpose Internet
                   Mail Extensions (MIME) Part Two: Media Types", <a href="rfc2046.html">RFC</a>
                   <a href="rfc2046.html">2046</a>, December 1996.

   [<a id="ref-MIME3" name="ref-MIME3">MIME3</a>]         Moore, K., "MIME (Multipurpose Internet Mail
                   Extensions) Part Three: Message Header Extensions for
                   Non-ASCII Text", <a href="rfc2047.html">RFC 2047</a>, December 1996.

   [<a id="ref-MIME4" name="ref-MIME4">MIME4</a>]         Freed, N., Klensin, J. and J. Postel, "Multipurpose
                   Internet Mail Extensions (MIME) Part Four:
                   Registration Procedures", <a href="rfc2048.html">RFC 2048</a>, January 1997.

   [<a id="ref-MIME5" name="ref-MIME5">MIME5</a>]         Freed, N. and N. Borenstein, "Multipurpose Internet
                   Mail Extensions (MIME) Part Five:  Conformance
                   Criteria and Examples", <a href="rfc2049.html">RFC 2049</a>, November 1996.

   [<a id="ref-NEWS" name="ref-NEWS">NEWS</a>]          Horton, M. and R. Adams: "Standard for interchange of
                   USENET messages", <a href="rfc1036.html">RFC 1036</a>, December 1987.

   [<a id="ref-PDF" name="ref-PDF">PDF</a>]           Tim Bienz and Richar Cohn: "Portable Document Format
                   Reference Manual", Addison-Wesley, Reading, MA, USA,
                   1993, ISBN 0-201-62628-4.

   [<a id="ref-REL" name="ref-REL">REL</a>]           Levinson, E., "The MIME Multipart/Related Content-
                   Type", <a href="rfc2389.html">RFC 2389</a>, August 1998.

   [<a id="ref-RELURL" name="ref-RELURL">RELURL</a>]        Fielding, R., "Relative Uniform Resource Locators",
                   <a href="rfc1808.html">RFC 1808</a>, June 1995.

   [<a id="ref-RFC822" name="ref-RFC822">RFC822</a>]        Crocker, D., "Standard for the format of ARPA
                   Internet text messages." STD 11, <a href="rfc822.html">RFC 822</a>, August
                   1982.

   [<a id="ref-SGML" name="ref-SGML">SGML</a>]          ISO 8879. Information Processing -- Text and Office -
                   Standard Generalized Markup Language (SGML), 1986.
                   &lt;URL:http://www.iso.ch/cate/d16387.html&gt;

   [<a id="ref-SMTP" name="ref-SMTP">SMTP</a>]          Postel, J., "Simple Mail Transfer Protocol", STD 10,
                   <a href="rfc821.html">RFC 821</a>, August 1982.

   [<a id="ref-URL" name="ref-URL">URL</a>]           Berners-Lee, T., Masinter, L. and M. McCahill,
                   "Uniform Resource Locators (URL)", <a href="rfc1738.html">RFC 1738</a>, December
                   1994.

   [<a id="ref-URLBODY" name="ref-URLBODY">URLBODY</a>]       Freed, N. and K. Moore, "Definition of the URL MIME
                   External-Body Access-Type", <a href="rfc2017.html">RFC 2017</a>, October 1996.





<span class="grey">Palme, et al.               Standards Track                    [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


   [<a id="ref-VRML" name="ref-VRML">VRML</a>]          Gavin Bell, Anthony Parisi, Mark Pesce: "Virtual
                   Reality Modeling Language (VRML) Version 1.0 Language
                   Specification." May 1995,
                   <a href="http://www.vrml.org/Specifications/">http://www.vrml.org/Specifications/</a>.

   [<a id="ref-XML" name="ref-XML">XML</a>]           Extensible Markup Language, published by the World
                   Wide Web Consortium, URL <a href="http://www.w3.org/XML/">http://www.w3.org/XML/</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/15.%20%20Authors%27%20Addresses"></a><a class="selflink" href="#section-15" name="section-15">15</a>.  Authors' Addresses</span>

   For contacting the editors, preferably write to Jacob Palme.

   Jacob Palme
   Stockholm University and KTH
   Electrum 230
   S-164 40 Kista, Sweden

   Phone: +46-8-16 16 67
   Fax: +46-8-783 08 29
   EMail: jpalme@dsv.su.se


   Alex Hopmann
   Microsoft Corporation
   One Microsoft Way
   Redmond WA 98052

   Phone: +1-425-703-8238
   EMail: alexhop@microsoft.com


   Nick Shelness
   Lotus Development Corporation
   55 Cambridge Parkway
   Cambridge MA  02142-1295

   EMail: Shelness@lotus.com


   Working group chairman:

   Einar Stefferud
   EMail: stef@nma.com








<span class="grey">Palme, et al.               Standards Track                    [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc2557.html">RFC 2557</a>       MIME Encapsulation of Aggregate Documents      March 1999</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/16.%20%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-16" name="section-16">16</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
























Palme, et al.               Standards Track                    [Page 28]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc2557 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:52 GMT --></html>