<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5215 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:36 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-kerr-avt-vorbis-rtp" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:5215" name="DC.Identifier"/>
<meta content="August, 2008" name="DC.Date.Issued"/>
<meta content="Luca Barbato &lt;lu_zero@gentoo.org&gt;" name="DC.Creator"/>
<meta content="This document describes an RTP payload format for transporting Vorbis
encoded audio. It details the RTP encapsulation mechanism for raw
Vorbis data and details the delivery mechanisms for the decoder
probability model, referred to as a codebook and other setup
information.  Also included within this memo are media type
registrations, and the details necessary for the use of Vorbis with
the Session Description Protocol (SDP)." name="DC.Description.Abstract"/>
<meta content="RTP Payload Format for Vorbis Encoded Audio" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5215 - RTP Payload Format for Vorbis Encoded Audio</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5215.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5215" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-avt-rtp-vorbis" title="draft-ietf-avt-rtp-vorbis">draft-ietf-avt-...</a>] [<a href="https://datatracker.ietf.org/doc/rfc5215" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5215" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5215" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=5215">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                         L. Barbato
Request for Comments: 5215                                          Xiph
Category: Standards Track                                    August 2008


              <span class="h1">RTP Payload Format for Vorbis Encoded Audio</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Abstract

   This document describes an RTP payload format for transporting Vorbis
   encoded audio.  It details the RTP encapsulation mechanism for raw
   Vorbis data and the delivery mechanisms for the decoder probability
   model (referred to as a codebook), as well as other setup
   information.

   Also included within this memo are media type registrations and the
   details necessary for the use of Vorbis with the Session Description
   Protocol (SDP).

























<span class="grey">Barbato                     Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-1.1">1.1</a>.  Conformance and Document Conventions . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Payload Format . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-2.1">2.1</a>.  RTP Header . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-2.2">2.2</a>.  Payload Header . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
     <a href="#section-2.3">2.3</a>.  Payload Data . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-2.4">2.4</a>.  Example RTP Packet . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
   <a href="#section-3">3</a>.  Configuration Headers  . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-3.1">3.1</a>.  In-band Header Transmission  . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-3.1.1">3.1.1</a>.  Packed Configuration . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-3.2">3.2</a>.  Out of Band Transmission . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
       <a href="#section-3.2.1">3.2.1</a>.  Packed Headers . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
     <a href="#section-3.3">3.3</a>.  Loss of Configuration Headers  . . . . . . . . . . . . . . <a href="#page-13">13</a>
   <a href="#section-4">4</a>.  Comment Headers  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
   <a href="#section-5">5</a>.  Frame Packetization  . . . . . . . . . . . . . . . . . . . . . <a href="#page-14">14</a>
     <a href="#section-5.1">5.1</a>.  Example Fragmented Vorbis Packet . . . . . . . . . . . . . <a href="#page-15">15</a>
     <a href="#section-5.2">5.2</a>.  Packet Loss  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-17">17</a>
   <a href="#section-6">6</a>.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <a href="#page-18">18</a>
     <a href="#section-6.1">6.1</a>.  Packed Headers IANA Considerations . . . . . . . . . . . . <a href="#page-19">19</a>
   <a href="#section-7">7</a>.  SDP Related Considerations . . . . . . . . . . . . . . . . . . <a href="#page-20">20</a>
     <a href="#section-7.1">7.1</a>.  Mapping Media Type Parameters into SDP . . . . . . . . . . <a href="#page-20">20</a>
       <a href="#section-7.1.1">7.1.1</a>.  SDP Example  . . . . . . . . . . . . . . . . . . . . . <a href="#page-21">21</a>
     <a href="#section-7.2">7.2</a>.  Usage with the SDP Offer/Answer Model  . . . . . . . . . . <a href="#page-22">22</a>
   <a href="#section-8">8</a>.  Congestion Control . . . . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
   <a href="#section-9">9</a>.  Example  . . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
     <a href="#section-9.1">9.1</a>.  Stream Radio . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-22">22</a>
   <a href="#section-10">10</a>. Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-23">23</a>
   <a href="#section-11">11</a>. Copying Conditions . . . . . . . . . . . . . . . . . . . . . . <a href="#page-23">23</a>
   <a href="#section-12">12</a>. Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-23">23</a>
   <a href="#section-13">13</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     <a href="#section-13.1">13.1</a>. Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-24">24</a>
     <a href="#section-13.2">13.2</a>. Informative References . . . . . . . . . . . . . . . . . . <a href="#page-25">25</a>

















<span class="grey">Barbato                     Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Vorbis is a general purpose perceptual audio codec intended to allow
   maximum encoder flexibility, thus allowing it to scale competitively
   over an exceptionally wide range of bit rates.  At the high quality/
   bitrate end of the scale (CD or DAT rate stereo, 16/24 bits), it is
   in the same league as MPEG-4 AAC.  Vorbis is also intended for lower
   and higher sample rates (from 8kHz telephony to 192kHz digital
   masters) and a range of channel representations (monaural,
   polyphonic, stereo, quadraphonic, 5.1, ambisonic, or up to 255
   discrete channels).

   Vorbis encoded audio is generally encapsulated within an Ogg format
   bitstream [<a href="rfc3533.html" title='"The Ogg Encapsulation Format Version 0"'>RFC3533</a>], which provides framing and synchronization.  For
   the purposes of RTP transport, this layer is unnecessary, and so raw
   Vorbis packets are used in the payload.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Conformance%20and%20Document%20Conventions"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Conformance and Document Conventions</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] and
   indicate requirement levels for compliant implementations.
   Requirements apply to all implementations unless otherwise stated.

   An implementation is a software module that supports one of the media
   types defined in this document.  Software modules may support
   multiple media types, but conformance is considered individually for
   each type.

   Implementations that fail to satisfy one or more "MUST" requirements
   are considered non-compliant.  Implementations that satisfy all
   "MUST" requirements, but fail to satisfy one or more "SHOULD"
   requirements, are said to be "conditionally compliant".  All other
   implementations are "unconditionally compliant".

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Payload%20Format"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Payload Format</span>

   For RTP-based transport of Vorbis-encoded audio, the standard RTP
   header is followed by a 4-octet payload header, and then the payload
   data.  The payload headers are used to associate the Vorbis data with
   its associated decoding codebooks as well as indicate if the
   following packet contains fragmented Vorbis data and/or the number of
   whole Vorbis data frames.  The payload data contains the raw Vorbis
   bitstream information.  There are 3 types of Vorbis data; an RTP
   payload MUST contain just one of them at a time.





<span class="grey">Barbato                     Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20RTP%20Header"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  RTP Header</span>

   The format of the RTP header is specified in [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and shown in
   Figure 1.  This payload format uses the fields of the header in a
   manner consistent with that specification.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X|  CC   |M|     PT      |       sequence number         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                           timestamp                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |            contributing source (CSRC) identifiers             |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                           Figure 1: RTP Header

   The RTP header begins with an octet of fields (V, P, X, and CC) to
   support specialized RTP uses (see [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and [<a href="rfc3551.html" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>] for
   details).  For Vorbis RTP, the following values are used.

   Version (V): 2 bits

   This field identifies the version of RTP.  The version used by this
   specification is two (2).

   Padding (P): 1 bit

   Padding MAY be used with this payload format according to <a href="rfc3550.html#section-5.1">Section 5.1
   of [RFC3550]</a>.

   Extension (X): 1 bit

   The Extension bit is used in accordance with [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   CSRC count (CC): 4 bits

   The CSRC count is used in accordance with [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   Marker (M): 1 bit

   Set to zero.  Audio silence suppression is not used.  This conforms
   to Section 4.1 of [<a href="#ref-VORBIS-SPEC-REF" title='"Ogg Vorbis I specification: Codec setup and packet decode. Available from the Xiph website, http://xiph.org/vorbis/doc/Vorbis_I_spec.html"'>VORBIS-SPEC-REF</a>].




<span class="grey">Barbato                     Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   Payload Type (PT): 7 bits

   An RTP profile for a class of applications is expected to assign a
   payload type for this format, or a dynamically allocated payload type
   SHOULD be chosen that designates the payload as Vorbis.

   Sequence number: 16 bits

   The sequence number increments by one for each RTP data packet sent,
   and may be used by the receiver to detect packet loss and to restore
   the packet sequence.  This field is detailed further in [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   Timestamp: 32 bits

   A timestamp representing the sampling time of the first sample of the
   first Vorbis packet in the RTP payload.  The clock frequency MUST be
   set to the sample rate of the encoded audio data and is conveyed out-
   of-band (e.g., as an SDP parameter).

   SSRC/CSRC identifiers:

   These two fields, 32 bits each with one SSRC field and a maximum of
   16 CSRC fields, are as defined in [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Payload%20Header"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Payload Header</span>

   The 4 octets following the RTP Header section are the Payload Header.
   This header is split into a number of bit fields detailing the format
   of the following payload data packets.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Ident                     | F |VDT|# pkts.|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                         Figure 2: Payload Header

   Ident: 24 bits

   This 24-bit field is used to associate the Vorbis data to a decoding
   Configuration.  It is stored as a network byte order integer.

   Fragment type (F): 2 bits







<span class="grey">Barbato                     Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   This field is set according to the following list:

      0 = Not Fragmented

      1 = Start Fragment

      2 = Continuation Fragment

      3 = End Fragment

   Vorbis Data Type (VDT): 2 bits

   This field specifies the kind of Vorbis data stored in this RTP
   packet.  There are currently three different types of Vorbis
   payloads.  Each packet MUST contain only a single type of Vorbis
   packet (e.g., you must not aggregate configuration and comment
   packets in the same RTP payload).

      0 = Raw Vorbis payload

      1 = Vorbis Packed Configuration payload

      2 = Legacy Vorbis Comment payload

      3 = Reserved

   The packets with a VDT of value 3 MUST be ignored.

   The last 4 bits represent the number of complete packets in this
   payload.  This provides for a maximum number of 15 Vorbis packets in
   the payload.  If the payload contains fragmented data, the number of
   packets MUST be set to 0.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.3.%20%20Payload%20Data"></a><a class="selflink" href="#section-2.3" name="section-2.3">2.3</a>.  Payload Data</span>

   Raw Vorbis packets are currently unbounded in length; application
   profiles will likely define a practical limit.  Typical Vorbis packet
   sizes range from very small (2-3 bytes) to quite large (8-12
   kilobytes).  The reference implementation [<a href="#ref-LIBVORBIS" title='"libvorbis: Available from the dedicated website, http://vorbis.com/"'>LIBVORBIS</a>] typically
   produces packets less than ~800 bytes, except for the setup header
   packets, which are ~4-12 kilobytes.  Within an RTP context, to avoid
   fragmentation, the Vorbis data packet size SHOULD be kept
   sufficiently small so that after adding the RTP and payload headers,
   the complete RTP packet is smaller than the path MTU.







<span class="grey">Barbato                     Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            length             |       vorbis packet data     ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                       Figure 3: Payload Data Header

   Each Vorbis payload packet starts with a two octet length header,
   which is used to represent the size in bytes of the following data
   payload, and is followed by the raw Vorbis data padded to the nearest
   byte boundary, as explained by the Vorbis I Specification
   [<a href="#ref-VORBIS-SPEC-REF" title='"Ogg Vorbis I specification: Codec setup and packet decode. Available from the Xiph website, http://xiph.org/vorbis/doc/Vorbis_I_spec.html"'>VORBIS-SPEC-REF</a>].  The length value is stored as a network byte
   order integer.

   For payloads that consist of multiple Vorbis packets, the payload
   data consists of the packet length followed by the packet data for
   each of the Vorbis packets in the payload.

   The Vorbis packet length header is the length of the Vorbis data
   block only and does not include the length field.

   The payload packing of the Vorbis data packets MUST follow the
   guidelines set out in [<a href="rfc3551.html" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>], where the oldest Vorbis packet
   occurs immediately after the RTP packet header.  Subsequent Vorbis
   packets, if any, MUST follow in temporal order.

   Audio channel mapping is in accordance with the Vorbis I
   Specification [<a href="#ref-VORBIS-SPEC-REF" title='"Ogg Vorbis I specification: Codec setup and packet decode. Available from the Xiph website, http://xiph.org/vorbis/doc/Vorbis_I_spec.html"'>VORBIS-SPEC-REF</a>].






















<span class="grey">Barbato                     Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.4.%20%20Example%20RTP%20Packet"></a><a class="selflink" href="#section-2.4" name="section-2.4">2.4</a>.  Example RTP Packet</span>

   Here is an example RTP payload containing two Vorbis packets.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | 2 |0|0|  0    |0|      PT     |       sequence number         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |               timestamp (in sample rate units)                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronisation source (SSRC) identifier            |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |            contributing source (CSRC) identifiers             |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Ident                     | 0 | 0 | 2 pks |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            length             |          vorbis data         ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        vorbis data                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            length             |   next vorbis packet data    ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        vorbis data                          ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..               vorbis data                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Figure 4: Example Raw Vorbis Packet

   The payload data section of the RTP packet begins with the 24-bit
   Ident field followed by the one octet bit field header, which has the
   number of Vorbis frames set to 2.  Each of the Vorbis data frames is
   prefixed by the two octets length field.  The Packet Type and
   Fragment Type are set to 0.  The Configuration that will be used to
   decode the packets is the one indexed by the ident value.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Configuration%20Headers"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Configuration Headers</span>

   Unlike other mainstream audio codecs, Vorbis has no statically
   configured probability model.  Instead, it packs all entropy decoding
   configuration, Vector Quantization and Huffman models into a data
   block that must be transmitted to the decoder with the compressed
   data.  A decoder also requires information detailing the number of
   audio channels, bitrates, and similar information to configure itself
   for a particular compressed data stream.  These two blocks of



<span class="grey">Barbato                     Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   information are often referred to collectively as the "codebooks" for
   a Vorbis stream, and are included as special "header" packets at the
   start of the compressed data.  In addition, the Vorbis I
   specification [<a href="#ref-VORBIS-SPEC-REF" title='"Ogg Vorbis I specification: Codec setup and packet decode. Available from the Xiph website, http://xiph.org/vorbis/doc/Vorbis_I_spec.html"'>VORBIS-SPEC-REF</a>] requires the presence of a comment
   header packet that gives simple metadata about the stream, but this
   information is not required for decoding the frame sequence.

   Thus, these two codebook header packets must be received by the
   decoder before any audio data can be interpreted.  These requirements
   pose problems in RTP, which is often used over unreliable transports.

   Since this information must be transmitted reliably and, as the RTP
   stream may change certain configuration data mid-session, there are
   different methods for delivering this configuration data to a client,
   both in-band and out-of-band, which are detailed below.  In order to
   set up an initial state for the client application, the configuration
   MUST be conveyed via the signalling channel used to set up the
   session.  One example of such signalling is SDP [<a href="rfc4566.html" title='"SDP: Session Description Protocol"'>RFC4566</a>] with the
   Offer/Answer Model [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>].  Changes to the configuration MAY be
   communicated via a re-invite, conveying a new SDP, or sent in-band in
   the RTP channel.  Implementations MUST support an in-band delivery of
   updated codebooks, and SHOULD support out-of-band codebook update
   using a new SDP file.  The changes may be due to different codebooks
   as well as different bitrates of the RTP stream.

   For non-chained streams, the recommended Configuration delivery
   method is inside the Packed Configuration (<a href="#section-3.1.1">Section 3.1.1</a>) in the SDP
   as explained the Mapping Media Type Parameters into SDP
   (<a href="#section-7.1">Section 7.1</a>).

   The 24-bit Ident field is used to map which Configuration will be
   used to decode a packet.  When the Ident field changes, it indicates
   that a change in the stream has taken place.  The client application
   MUST have in advance the correct configuration.  If the client
   detects a change in the Ident value and does not have this
   information, it MUST NOT decode the raw associated Vorbis data until
   it fetches the correct Configuration.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20In-band%20Header%20Transmission"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  In-band Header Transmission</span>

   The Packed Configuration (<a href="#section-3.1.1">Section 3.1.1</a>) Payload is sent in-band with
   the packet type bits set to match the Vorbis Data Type.  Clients MUST
   be capable of dealing with fragmentation and periodic re-transmission
   of [<a href="rfc4588.html" title='"RTP Retransmission Payload Format"'>RFC4588</a>] the configuration headers.  The RTP timestamp value MUST
   reflect the transmission time of the first data packet for which this
   configuration applies.





<span class="grey">Barbato                     Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.1.1.%20%20Packed%20Configuration"></a><a class="selflink" href="#section-3.1.1" name="section-3.1.1">3.1.1</a>.  Packed Configuration</span>

   A Vorbis Packed Configuration is indicated with the Vorbis Data Type
   field set to 1.  Of the three headers defined in the Vorbis I
   specification [<a href="#ref-VORBIS-SPEC-REF" title='"Ogg Vorbis I specification: Codec setup and packet decode. Available from the Xiph website, http://xiph.org/vorbis/doc/Vorbis_I_spec.html"'>VORBIS-SPEC-REF</a>], the Identification and the Setup
   MUST be packed as they are, while the Comment header MAY be replaced
   with a dummy one.

   The packed configuration stores Xiph codec configurations in a
   generic way: the first field stores the number of the following
   packets minus one (count field), the next ones represent the size of
   the headers (length fields), and the headers immediately follow the
   list of length fields.  The size of the last header is implicit.

   The count and the length fields are encoded using the following
   logic: the data is in network byte order; every byte has the most
   significant bit used as a flag, and the following 7 bits are used to
   store the value.  The first 7 most significant bits are stored in the
   first byte.  If there are remaining bits, the flag bit is set to 1
   and the subsequent 7 bits are stored in the following byte.  If there
   are remaining bits, set the flag to 1 and the same procedure is
   repeated.  The ending byte has the flag bit set to 0.  To decode,
   simply iterate over the bytes until the flag bit is set to 0.  For
   every byte, the data is added to the accumulated value multiplied by
   128.

   The headers are packed in the same order as they are present in Ogg
   [<a href="#ref-VORBIS-SPEC-REF" title='"Ogg Vorbis I specification: Codec setup and packet decode. Available from the Xiph website, http://xiph.org/vorbis/doc/Vorbis_I_spec.html"'>VORBIS-SPEC-REF</a>]: Identification, Comment, Setup.

   The 2 byte length tag defines the length of the packed headers as the
   sum of the Configuration, Comment, and Setup lengths.




















<span class="grey">Barbato                     Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X|  CC   |M|     PT      |             xxxx              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             xxxxx                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |            contributing source (CSRC) identifiers             |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Ident                    | 0 | 1 |      1|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           length              | n. of headers |    length1    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    length2    |                  Identification              ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        Identification                       ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        Identification                       ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        Identification                       ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..               Identification                 |    Comment   ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                            Comment                          ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                            Comment                          ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                            Comment                          ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..           Comment            |             Setup            ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                            Setup                            ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                            Setup                            ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                   Figure 5: Packed Configuration Figure

   The Ident field is set with the value that will be used by the Raw
   Payload Packets to address this Configuration.  The Fragment type is
   set to 0 because the packet bears the full Packed configuration.  The
   number of the packet is set to 1.





<span class="grey">Barbato                     Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Out%20of%20Band%20Transmission"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Out of Band Transmission</span>

   The following packet definition MUST be used when Configuration is
   inside in the SDP.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.%20%20Packed%20Headers"></a><a class="selflink" href="#section-3.2.1" name="section-3.2.1">3.2.1</a>.  Packed Headers</span>

   As mentioned above, the RECOMMENDED delivery vector for Vorbis
   configuration data is via a retrieval method that can be performed
   using a reliable transport protocol.  As the RTP headers are not
   required for this method of delivery, the structure of the
   configuration data is slightly different.  The packed header starts
   with a 32-bit (network-byte ordered) count field, which details the
   number of packed headers that are contained in the bundle.  The
   following shows the Packed header payload for each chained Vorbis
   stream.

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Number of packed headers                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Packed header                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Packed header                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                     Figure 6: Packed Headers Overview























<span class="grey">Barbato                     Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Ident                       |    length    ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..              | n. of headers |    length1    |    length2   ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..              |             Identification Header            ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .................................................................
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..              |         Comment Header                       ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .................................................................
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        Comment Header                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Setup Header                        ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .................................................................
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                         Setup Header                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 7: Packed Headers Detail

   The key difference between the in-band format and this one is that
   there is no need for the payload header octet.  In this figure, the
   comment has a size bigger than 127 bytes.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20Loss%20of%20Configuration%20Headers"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  Loss of Configuration Headers</span>

   Unlike the loss of raw Vorbis payload data, loss of a configuration
   header leads to a situation where it will not be possible to
   successfully decode the stream.  Implementations MAY try to recover
   from an error by requesting again the missing Configuration or, if
   the delivery method is in-band, by buffering the payloads waiting for
   the Configuration needed to decode them.  The baseline reaction
   SHOULD either be reset or end the RTP session.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Comment%20Headers"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Comment Headers</span>

   Vorbis Data Type flag set to 2 indicates that the packet contains the
   comment metadata, such as artist name, track title, and so on.  These
   metadata messages are not intended to be fully descriptive but rather
   to offer basic track/song information.  Clients MAY ignore it
   completely.  The details on the format of the comments can be found
   in the Vorbis I Specification [<a href="#ref-VORBIS-SPEC-REF" title='"Ogg Vorbis I specification: Codec setup and packet decode. Available from the Xiph website, http://xiph.org/vorbis/doc/Vorbis_I_spec.html"'>VORBIS-SPEC-REF</a>].



<span class="grey">Barbato                     Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X|  CC   |M|     PT      |             xxxx              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             xxxxx                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |            contributing source (CSRC) identifiers             |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Ident                    | 0 | 2 |      1|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            length             |            Comment           ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                           Comment                           ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                           Comment                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                         Figure 8: Comment Packet

   The 2-byte length field is necessary since this packet could be
   fragmented.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Frame%20Packetization"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Frame Packetization</span>

   Each RTP payload contains either one Vorbis packet fragment or an
   integer number of complete Vorbis packets (up to a maximum of 15
   packets, since the number of packets is defined by a 4-bit value).

   Any Vorbis data packet that is less than path MTU SHOULD be bundled
   in the RTP payload with as many Vorbis packets as will fit, up to a
   maximum of 15, except when such bundling would exceed an
   application's desired transmission latency.  Path MTU is detailed in
   [<a href="rfc1191.html" title='"Path MTU discovery"'>RFC1191</a>] and [<a href="rfc1981.html" title='"Path MTU Discovery for IP version 6"'>RFC1981</a>].

   A fragmented packet has a zero in the last four bits of the payload
   header.  The first fragment will set the Fragment type to 1.  Each
   fragment after the first will set the Fragment type to 2 in the
   payload header.  The consecutive fragments MUST be sent without any
   other payload being sent between the first and the last fragment.
   The RTP payload containing the last fragment of the Vorbis packet
   will have the Fragment type set to 3.  To maintain the correct
   sequence for fragmented packet reception, the timestamp field of
   fragmented packets MUST be the same as the first packet sent, with



<span class="grey">Barbato                     Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   the sequence number incremented as normal for the subsequent RTP
   payloads; this will affect the RTCP jitter measurement.  The length
   field shows the fragment length.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Example%20Fragmented%20Vorbis%20Packet"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Example Fragmented Vorbis Packet</span>

   Here is an example of a fragmented Vorbis packet split over three RTP
   payloads.  Each of them contains the standard RTP headers as well as
   the 4-octet Vorbis headers.

      Packet 1:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X|  CC   |M|     PT      |           1000                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                            12345                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |            contributing source (CSRC) identifiers             |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Ident                   | 1 | 0 |      0|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             length            |            vorbis data       ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        vorbis data                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 9: Example Fragmented Packet (Packet 1)

   In this payload, the initial sequence number is 1000 and the
   timestamp is 12345.  The Fragment type is set to 1, the number of
   packets field is set to 0, and as the payload is raw Vorbis data, the
   VDT field is set to 0.













<span class="grey">Barbato                     Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


      Packet 2:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X|  CC   |M|     PT      |           1001                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             12345                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |            contributing source (CSRC) identifiers             |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Ident                   | 2 | 0 |      0|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             length            |          vorbis data         ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        vorbis data                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 10: Example Fragmented Packet (Packet 2)

   The Fragment type field is set to 2, and the number of packets field
   is set to 0.  For large Vorbis fragments, there can be several of
   these types of payloads.  The maximum packet size SHOULD be no
   greater than the path MTU, including all RTP and payload headers.
   The sequence number has been incremented by one, but the timestamp
   field remains the same as the initial payload.





















<span class="grey">Barbato                     Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


      Packet 3:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |V=2|P|X|  CC   |M|     PT      |           1002                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             12345                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           synchronization source (SSRC) identifier            |
      +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
      |            contributing source (CSRC) identifiers             |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Ident                    | 3 | 0 |      0|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             length            |          vorbis data         ..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ..                        vorbis data                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 11: Example Fragmented Packet (Packet 3)

   This is the last Vorbis fragment payload.  The Fragment type is set
   to 3 and the packet count remains set to 0.  As in the previous
   payloads, the timestamp remains set to the first payload timestamp in
   the sequence and the sequence number has been incremented.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Packet%20Loss"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Packet Loss</span>

   As there is no error correction within the Vorbis stream, packet loss
   will result in a loss of signal.  Packet loss is more of an issue for
   fragmented Vorbis packets as the client will have to cope with the
   handling of the Fragment Type.  In case of loss of fragments, the
   client MUST discard all the remaining Vorbis fragments and decode the
   incomplete packet.  If we use the fragmented Vorbis packet example
   above and the first RTP payload is lost, the client MUST detect that
   the next RTP payload has the packet count field set to 0 and the
   Fragment type 2 and MUST drop it.  The next RTP payload, which is the
   final fragmented packet, MUST be dropped in the same manner.  If the
   missing RTP payload is the last, the two fragments received will be
   kept and the incomplete Vorbis packet decoded.

   Loss of any of the Configuration fragment will result in the loss of
   the full Configuration packet with the result detailed in the Loss of
   Configuration Headers (<a href="#section-3.3">Section 3.3</a>) section.




<span class="grey">Barbato                     Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  IANA Considerations</span>

   Type name:  audio

   Subtype name:  vorbis

   Required parameters:

      rate:  indicates the RTP timestamp clock rate as described in RTP
         Profile for Audio and Video Conferences with Minimal Control
         [<a href="rfc3551.html" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>].

      channels:  indicates the number of audio channels as described in
         RTP Profile for Audio and Video Conferences with Minimal
         Control [<a href="rfc3551.html" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>].

      configuration:  the base64 [<a href="rfc4648.html" title='"The Base16, Base32, and Base64 Data Encodings"'>RFC4648</a>] representation of the Packed
         Headers (<a href="#section-3.2.1">Section 3.2.1</a>).

   Encoding considerations:

      This media type is framed and contains binary data.

   Security considerations:

      See <a href="rfc5215.html#section-10">Section 10 of RFC 5215</a>.

   Interoperability considerations:

      None

   Published specification:

      <a href="rfc5215.html">RFC 5215</a>

      Ogg Vorbis I specification: Codec setup and packet decode.
      Available from the Xiph website, <a href="http://xiph.org/">http://xiph.org/</a>

   Applications which use this media type:

      Audio streaming and conferencing tools

   Additional information:

      None






<span class="grey">Barbato                     Standards Track                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   Person &amp; email address to contact for further information:

      Luca Barbato: &lt;lu_zero@gentoo.org&gt;
      IETF Audio/Video Transport Working Group

   Intended usage:

      COMMON

   Restriction on usage:

      This media type depends on RTP framing, hence is only defined for
      transfer via RTP [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   Author:

      Luca Barbato

   Change controller:

      IETF AVT Working Group delegated from the IESG

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Packed%20Headers%20IANA%20Considerations"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Packed Headers IANA Considerations</span>

   The following IANA considerations refers to the split configuration
   Packed Headers (<a href="#section-3.2.1">Section 3.2.1</a>) used within <a href="rfc5215.html">RFC 5215</a>.

   Type name:  audio

   Subtype name:  vorbis-config

   Required parameters:

      None

   Optional parameters:

      None

   Encoding considerations:

      This media type contains binary data.

   Security considerations:

      See <a href="rfc5215.html#section-10">Section 10 of RFC 5215</a>.





<span class="grey">Barbato                     Standards Track                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   Interoperability considerations:

      None

   Published specification:

      <a href="rfc5215.html">RFC 5215</a>

   Applications which use this media type:

      Vorbis encoded audio, configuration data

   Additional information:

      None

   Person &amp; email address to contact for further information:

      Luca Barbato: &lt;lu_zero@gentoo.org&gt;
      IETF Audio/Video Transport Working Group

   Intended usage:  COMMON

   Restriction on usage:

      This media type doesn't depend on the transport.

   Author:

      Luca Barbato

   Change controller:

      IETF AVT Working Group delegated from the IESG

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20SDP%20Related%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  SDP Related Considerations</span>

   The following paragraphs define the mapping of the parameters
   described in the IANA considerations section and their usage in the
   Offer/Answer Model [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>].  In order to be forward compatible, the
   implementation MUST ignore unknown parameters.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Mapping%20Media%20Type%20Parameters%20into%20SDP"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Mapping Media Type Parameters into SDP</span>

   The information carried in the Media Type specification has a
   specific mapping to fields in the Session Description Protocol (SDP)
   [<a href="rfc4566.html" title='"SDP: Session Description Protocol"'>RFC4566</a>], which is commonly used to describe RTP sessions.  When SDP
   is used to specify sessions, the mapping are as follows:



<span class="grey">Barbato                     Standards Track                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   o  The type name ("audio") goes in SDP "m=" as the media name.

   o  The subtype name ("vorbis") goes in SDP "a=rtpmap" as the encoding
      name.

   o  The parameter "rate" also goes in "a=rtpmap" as the clock rate.

   o  The parameter "channels" also goes in "a=rtpmap" as the channel
      count.

   o  The mandated parameters "configuration" MUST be included in the
      SDP "a=fmtp" attribute.

   If the stream comprises chained Vorbis files and all of them are
   known in advance, the Configuration Packet for each file SHOULD be
   passed to the client using the configuration attribute.

   The port value is specified by the server application bound to the
   address specified in the c= line.  The channel count value specified
   in the rtpmap attribute SHOULD match the current Vorbis stream or
   should be considered the maximum number of channels to be expected.
   The timestamp clock rate MUST be a multiple of the sample rate; a
   different payload number MUST be used if the clock rate changes.  The
   Configuration payload delivers the exact information, thus the SDP
   information SHOULD be considered a hint.  An example is found below.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.1.%20%20SDP%20Example"></a><a class="selflink" href="#section-7.1.1" name="section-7.1.1">7.1.1</a>.  SDP Example</span>

   The following example shows a basic SDP single stream.  The first
   configuration packet is inside the SDP; other configurations could be
   fetched at any time from the URIs provided.  The following base64
   [<a href="rfc4648.html" title='"The Base16, Base32, and Base64 Data Encodings"'>RFC4648</a>] configuration string is folded in this example due to RFC
   line length limitations.

      c=IN IP4 192.0.2.1

      m=audio RTP/AVP 98

      a=rtpmap:98 vorbis/44100/2

      a=fmtp:98 configuration=AAAAAZ2f4g9NAh4aAXZvcmJpcwA...;

   Note that the payload format (encoding) names are commonly shown in
   uppercase.  Media Type subtypes are commonly shown in lowercase.
   These names are case-insensitive in both places.  Similarly,
   parameter names are case-insensitive both in Media Type types and in
   the default mapping to the SDP a=fmtp attribute.  The a=fmtp line is




<span class="grey">Barbato                     Standards Track                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   a single line, even if it is shown as multiple lines in this document
   for clarity.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Usage%20with%20the%20SDP%20Offer%2FAnswer%20Model"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Usage with the SDP Offer/Answer Model</span>

   There are no negotiable parameters.  All of them are declarative.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Congestion%20Control"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Congestion Control</span>

   The general congestion control considerations for transporting RTP
   data apply to Vorbis audio over RTP as well.  See the RTP
   specification [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and any applicable RTP profile (e.g.,
   [<a href="rfc3551.html" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>]).  Audio data can be encoded using a range of different bit
   rates, so it is possible to adapt network bandwidth by adjusting the
   encoder bit rate in real time or by having multiple copies of content
   encoded at different bit rates.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Example"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Example</span>

   The following example shows a common usage pattern that MAY be
   applied in such a situation.  The main scope of this section is to
   explain better usage of the transmission vectors.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Stream%20Radio"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Stream Radio</span>

   This is one of the most common situations: there is one single server
   streaming content in multicast, and the clients may start a session
   at a random time.  The content itself could be a mix of a live stream
   (as the webjockey's voice) and stored streams (as the music she
   plays).

   In this situation, we don't know in advance how many codebooks we
   will use.  The clients can join anytime and users expect to start
   listening to the content in a short time.

   Upon joining, the client will receive the current Configuration
   necessary to decode the current stream inside the SDP so that the
   decoding will start immediately after.

   When the streamed content changes, the new Configuration is sent in-
   band before the actual stream, and the Configuration that has to be
   sent inside the SDP is updated.  Since the in-band method is
   unreliable, an out-of-band fallback is provided.

   The client may choose to fetch the Configuration from the alternate
   source as soon as it discovers a Configuration packet got lost in-
   band, or use selective retransmission [<a href="rfc3611.html" title='"RTP Control Protocol Extended Reports (RTCP XR)"'>RFC3611</a>] if the server
   supports this feature.



<span class="grey">Barbato                     Standards Track                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   A server-side optimization would be to keep a hash list of the
   Configurations per session, which avoids packing all of them and
   sending the same Configuration with different Ident tags.

   A client-side optimization would be to keep a tag list of the
   Configurations per session and not process configuration packets that
   are already known.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Security%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Security Considerations</span>

   RTP packets using this payload format are subject to the security
   considerations discussed in the RTP specification [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>], the
   base64 specification [<a href="rfc4648.html" title='"The Base16, Base32, and Base64 Data Encodings"'>RFC4648</a>], and the URI Generic syntax
   specification [<a href="rfc3986.html" title='"Uniform Resource Identifier (URI): Generic Syntax"'>RFC3986</a>].  Among other considerations, this implies
   that the confidentiality of the media stream is achieved by using
   encryption.  Because the data compression used with this payload
   format is applied end-to-end, encryption may be performed on the
   compressed data.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Copying%20Conditions"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Copying Conditions</span>

   The authors agree to grant third parties the irrevocable right to
   copy, use, and distribute the work, with or without modification, in
   any medium, without royalty, provided that, unless separate
   permission is granted, redistributed modified works do not contain
   misleading author, version, name of work, or endorsement information.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Acknowledgments"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Acknowledgments</span>

   This document is a continuation of the following documents:

   Moffitt, J., "RTP Payload Format for Vorbis Encoded Audio", February
   2001.

   Kerr, R., "RTP Payload Format for Vorbis Encoded Audio", December
   2004.

   The Media Type declaration is a continuation of the following
   document:

   Short, B., "The audio/rtp-vorbis MIME Type", January 2008.

   Thanks to the AVT, Vorbis Communities / Xiph.Org Foundation including
   Steve Casner, Aaron Colwell, Ross Finlayson, Fluendo, Ramon Garcia,
   Pascal Hennequin, Ralph Giles, Tor-Einar Jarnbjo, Colin Law, John
   Lazzaro, Jack Moffitt, Christopher Montgomery, Colin Perkins, Barry
   Short, Mike Smith, Phil Kerr, Michael Sparks, Magnus Westerlund,
   David Barrett, Silvia Pfeiffer, Stefan Ehmann, Gianni Ceccarelli, and



<span class="grey">Barbato                     Standards Track                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


   Alessandro Salvatori.  Thanks to the LScube Group, in particular
   Federico Ridolfo, Francesco Varano, Giampaolo Mancini, Dario
   Gallucci, and Juan Carlos De Martin.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20References"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.1.%20%20Normative%20References"></a><a class="selflink" href="#section-13.1" name="section-13.1">13.1</a>.  Normative References</span>

   [<a id="ref-RFC1191" name="ref-RFC1191">RFC1191</a>]          Mogul, J. and S. Deering, "Path MTU discovery",
                      <a href="rfc1191.html">RFC 1191</a>, November 1990.

   [<a id="ref-RFC1981" name="ref-RFC1981">RFC1981</a>]          McCann, J., Deering, S., and J. Mogul, "Path MTU
                      Discovery for IP version 6", <a href="rfc1981.html">RFC 1981</a>,
                      August 1996.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]          Bradner, S., "Key words for use in RFCs to
                      Indicate Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
                      March 1997.

   [<a id="ref-RFC3264" name="ref-RFC3264">RFC3264</a>]          Rosenberg, J. and H. Schulzrinne, "An Offer/Answer
                      Model with Session Description Protocol (SDP)",
                      <a href="rfc3264.html">RFC 3264</a>, June 2002.

   [<a id="ref-RFC3550" name="ref-RFC3550">RFC3550</a>]          Schulzrinne, H., Casner, S., Frederick, R., and V.
                      Jacobson, "RTP: A Transport Protocol for Real-Time
                      Applications", STD 64, <a href="rfc3550.html">RFC 3550</a>, July 2003.

   [<a id="ref-RFC3551" name="ref-RFC3551">RFC3551</a>]          Schulzrinne, H. and S. Casner, "RTP Profile for
                      Audio and Video Conferences with Minimal Control",
                      STD 65, <a href="rfc3551.html">RFC 3551</a>, July 2003.

   [<a id="ref-RFC3986" name="ref-RFC3986">RFC3986</a>]          Berners-Lee, T., Fielding, R., and L. Masinter,
                      "Uniform Resource Identifier (URI): Generic
                      Syntax", STD 66, <a href="rfc3986.html">RFC 3986</a>, January 2005.

   [<a id="ref-RFC4566" name="ref-RFC4566">RFC4566</a>]          Handley, M., Jacobson, V., and C. Perkins, "SDP:
                      Session Description Protocol", <a href="rfc4566.html">RFC 4566</a>,
                      July 2006.

   [<a id="ref-RFC4648" name="ref-RFC4648">RFC4648</a>]          Josefsson, S., "The Base16, Base32, and Base64
                      Data Encodings", <a href="rfc4648.html">RFC 4648</a>, October 2006.

   [<a id="ref-VORBIS-SPEC-REF" name="ref-VORBIS-SPEC-REF">VORBIS-SPEC-REF</a>]  "Ogg Vorbis I specification:  Codec setup and
                      packet decode.  Available from the Xiph website,
                      <a href="http://xiph.org/vorbis/doc/Vorbis_I_spec.html">http://xiph.org/vorbis/doc/Vorbis_I_spec.html</a>".






<span class="grey">Barbato                     Standards Track                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/13.2.%20%20Informative%20References"></a><a class="selflink" href="#section-13.2" name="section-13.2">13.2</a>.  Informative References</span>

   [<a id="ref-LIBVORBIS" name="ref-LIBVORBIS">LIBVORBIS</a>]        "libvorbis: Available from the dedicated website,
                      <a href="http://vorbis.com/">http://vorbis.com/</a>".

   [<a id="ref-RFC3533" name="ref-RFC3533">RFC3533</a>]          Pfeiffer, S., "The Ogg Encapsulation Format
                      Version 0", <a href="rfc3533.html">RFC 3533</a>, May 2003.

   [<a id="ref-RFC3611" name="ref-RFC3611">RFC3611</a>]          Friedman, T., Caceres, R., and A. Clark, "RTP
                      Control Protocol Extended Reports (RTCP XR)",
                      <a href="rfc3611.html">RFC 3611</a>, November 2003.

   [<a id="ref-RFC4588" name="ref-RFC4588">RFC4588</a>]          Rey, J., Leon, D., Miyazaki, A., Varsa, V., and R.
                      Hakenberg, "RTP Retransmission Payload Format",
                      <a href="rfc4588.html">RFC 4588</a>, July 2006.

Author's Address

   Luca Barbato
   Xiph.Org Foundation

   EMail: lu_zero@gentoo.org
   URI:   <a href="http://xiph.org/">http://xiph.org/</a>




























<span class="grey">Barbato                     Standards Track                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc5215.html">RFC 5215</a>               Vorbis RTP Payload Format             August 2008</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.












Barbato                     Standards Track                    [Page 26]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc5215 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:36 GMT --></html>