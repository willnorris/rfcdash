<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from tools.ietf.org/html/rfc8339 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 12:14:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129c" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Relation.Replaces" content="draft-jain-pals-p2mp-pw-lsp-ping" />
<meta name="DC.Identifier" content="urn:ietf:rfc:8339" />
<meta name="DC.Date.Issued" content="March, 2018" />
<meta name="DC.Creator" content="Boutros, Sami" />
<meta name="DC.Creator" content="Aldrin, Sam" />
<meta name="DC.Creator" content="Jain, Parag" />
<meta name="DC.Description.Abstract" content="Label Switched Path (LSP) Ping is a widely deployed Operation,
Administration, and Maintenance (OAM) mechanism in MPLS networks. This
document describes a mechanism to verify connectivity of Point-to-
Multipoint (P2MP) Pseudowires (PWs) using LSP Ping." />
<meta name="DC.Title" content="Definition of P2MP PW TLV for Label Switched Path (LSP) Ping Mechanisms" />

    <link rel="icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <link rel="shortcut icon" href="https://tools.ietf.org/images/rfc.png" type="image/png" />
    <title>RFC 8339 - Definition of P2MP PW TLV for Label Switched Path (LSP) Ping Mechanisms</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgblue"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8339.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8339" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-pals-p2mp-pw-lsp-ping" title="draft-ietf-pals-p2mp-pw-lsp-ping">draft-ietf-pals...</a>] [<a href='https://datatracker.ietf.org/doc/rfc8339' title='IESG Datatracker information for this document'>Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8339" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8339" title="Side-by-side diff">Diff2</a>]         </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Internet Engineering Task Force (IETF)                      P. Jain, Ed.
Request for Comments: 8339                           Cisco Systems, Inc.
Category: Standards Track                                     S. Boutros
ISSN: 2070-1721                                             VMWare, Inc.
                                                               S. Aldrin
                                                             Google Inc.
                                                              March 2018


Definition of P2MP PW TLV for Label Switched Path (LSP) Ping Mechanisms

Abstract

   Label Switched Path (LSP) Ping is a widely deployed Operation,
   Administration, and Maintenance (OAM) mechanism in MPLS networks.
   This document describes a mechanism to verify connectivity of Point-
   to-Multipoint (P2MP) Pseudowires (PWs) using LSP Ping.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc7841.html#section-2">Section&nbsp;2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8339">https://www.rfc-editor.org/info/rfc8339</a>.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





<span class="grey">Jain, et al.                 Standards Track                    [Page 1]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.1">2.1</a>.  Specification of Requirements . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.2">2.2</a>.  Abbreviations . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  Identifying a P2MP PW . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.1">3.1</a>.  P2MP Pseudowire Sub-TLV . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-4">4</a>.  Encapsulation of OAM Ping Packets . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-5">5</a>.  Operations  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-6">6</a>.  Controlling Echo Responses  . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
   <a href="#section-7">7</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
   <a href="#section-8">8</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-9">9</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
     <a href="#section-9.1">9.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
     <a href="#section-9.2">9.2</a>.  Informative References  . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>

































<span class="grey">Jain, et al.                 Standards Track                    [Page 2]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>.  Introduction</span>

   A Point-to-Multipoint (P2MP) Pseudowire (PW) emulates the essential
   attributes of a unidirectional P2MP Telecommunications service such
   as P2MP ATM over a Public Switched Network (PSN).  Requirements for
   P2MP PWs are described in [<a href="rfc7338.html" title="&quot;Requirements and Framework for Point-to-Multipoint Pseudowires over MPLS Packet Switched Networks&quot;">RFC7338</a>].  P2MP PWs are carried over a
   P2MP MPLS LSP.  The procedures for P2MP PW signaling using BGP are
   described in [<a href="rfc7117.html" title="&quot;Multicast in Virtual Private LAN Service (VPLS)&quot;">RFC7117</a>]; LDP for single segment P2MP PWs is described
   in [<a href="rfc8338.html" title="&quot;Signaling Root- Initiated Point-to-Multipoint Pseudowire Using LDP&quot;">RFC8338</a>].  Many P2MP PWs can share the same P2MP MPLS LSP; this
   arrangement is called an "Aggregate P2MP Tree".  An Aggregate P2MP
   Tree requires an upstream-assigned label so that on the Leaf PE
   (L-PE), the traffic can be associated with a Virtual Private Network
   (VPN) or a Virtual Private LAN Service (VPLS) instance.  When a P2MP
   MPLS LSP carries only one VPN or VPLS service instance, the
   arrangement is called an "Inclusive P2MP Tree".  For an Inclusive
   P2MP Tree, the P2MP MPLS LSP label itself can uniquely identify the
   VPN or VPLS service being carried over the P2MP MPLS LSP.  The P2MP
   MPLS LSP can also be used in the Selective P2MP Tree arrangement to
   carry multicast traffic.  In a Selective P2MP Tree arrangement,
   traffic to each multicast group in a VPN or VPLS instance is carried
   by a separate unique P2MP LSP.  In an Aggregate Selective P2MP Tree
   arrangement, traffic to a set of multicast groups from different VPN
   or VPLS instances is carried over the same shared P2MP LSP.

   The P2MP MPLS LSPs are setup using either P2MP RSVP-TE [<a href="rfc4875.html" title="&quot;Extensions to Resource Reservation Protocol - Traffic Engineering (RSVP-TE) for Point-to- Multipoint TE Label Switched Paths (LSPs)&quot;">RFC4875</a>] or
   Multipoint LDP (mDLP) [<a href="rfc6388.html" title="&quot;Label Distribution Protocol Extensions for Point- to-Multipoint and Multipoint-to-Multipoint Label Switched Paths&quot;">RFC6388</a>].  Mechanisms for fault detection and
   isolation for data-plane failures for P2MP MPLS LSPs are specified in
   [<a href="rfc6425.html" title="&quot;Detecting Data-Plane Failures in Point-to-Multipoint MPLS - Extensions to LSP Ping&quot;">RFC6425</a>].  This document describes a mechanism to detect data-plane
   failures for P2MP PW carried over P2MP MPLS LSPs.

   This document defines a new P2MP Pseudowire sub-TLV for the Target
   Forwarding Equivalence Class (FEC) Stack for P2MP PWs.  The P2MP
   Pseudowire sub-TLV is added in the Target FEC Stack TLV by the
   originator of the echo request at the Root PE (R-PE) to inform the
   receiver at the Leaf PE (L-PE) of the P2MP PW being tested.

   Support for multi-segment PWs is out of scope of this document.

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>.  Terminology</span>

<span class="h3"><a class="selflink" name="section-2.1" href="#section-2.1">2.1</a>.  Specification of Requirements</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="rfc2119.html" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>] [<a href="rfc8174.html" title="&quot;Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words&quot;">RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.




<span class="grey">Jain, et al.                 Standards Track                    [Page 3]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


<span class="h3"><a class="selflink" name="section-2.2" href="#section-2.2">2.2</a>.  Abbreviations</span>

   ACH:        Associated Channel Header

   AGI:        Attachment Group Identifier

   ATM:        Asynchronous Transfer Mode

   CE:         Customer Edge

   FEC:        Forwarding Equivalence Class

   GAL:        Generic Associated Channel Label

   LDP:        Label Distribution Protocol

   L-PE:       Leaf PE (one of many destinations of the P2MP MPLS LSP,
               i.e., egress PE)

   LSP:        Label Switched Path

   LSR:        Label Switching Router

   mLDP:       Multipoint LDP

   MPLS-OAM:   MPLS Operations, Administration, and Maintenance

   P2MP:       Point-to-Multipoint

   P2MP-PW:    Point-to-Multipoint Pseudowire

   PE:         Provider Edge

   PSN:        Public Switched Network

   PW:         Pseudowire

   R-PE:       Root PE (ingress PE, PE initiating P2MP PW setup)

   RSVP:       Resource Reservation Protocol

   TE:         Traffic Engineering

   TLV:        Type, Length, Value

   VPLS:       Virtual Private LAN Service





<span class="grey">Jain, et al.                 Standards Track                    [Page 4]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>.  Identifying a P2MP PW</span>

   This document introduces a new LSP Ping Target FEC Stack sub-TLV, the
   P2MP Pseudowire sub-TLV, to identify the P2MP PW under test at the
   P2MP Leaf PE (L-PE).

<span class="h3"><a class="selflink" name="section-3.1" href="#section-3.1">3.1</a>.  P2MP Pseudowire Sub-TLV</span>

   The P2MP Pseudowire sub-TLV has the format shown in Figure 1.  This
   TLV is included in the echo request sent over P2MP PW by the
   originator of the request.

   The Attachment Group Identifier (AGI), as described in <a href="rfc4446.html#section-3.4.2">Section&nbsp;3.4.2
   of [RFC4446]</a>, in P2MP Pseudowire sub-TLV identifies the VPLS
   instance.  The Originating Router's IP address is the IPv4 or IPv6
   address of the P2MP PW root.  The address family of the IP address is
   determined by the IP Addr Len field.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | AGI Type    |   AGI Length  |                                 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                                 |
       ~                          AGI Value                            ~
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | IP Addr Len |                                                 |
       +-+-+-+-+-+-+-+                                                 |
       ~               Originating Routers IP Addr                     ~
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 Figure 1: P2MP Pseudowire Sub-TLV Format

   For Inclusive and Selective P2MP Trees, the echo request is sent
   using the P2MP MPLS LSP label.

   For Aggregate Inclusive and Aggregate Selective P2MP Trees, the echo
   request is sent using a label stack of [P2MP MPLS LSP label, upstream
   assigned P2MP PW label].  The P2MP MPLS LSP label is the outer label
   and the upstream assigned P2MP PW label is the inner label.










<span class="grey">Jain, et al.                 Standards Track                    [Page 5]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-6" id="page-6" href="#page-6" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>.  Encapsulation of OAM Ping Packets</span>

   The LSP Ping echo request packet is encapsulated with the MPLS label
   stack as described in previous sections, followed by one of the two
   encapsulation options:

   o  GAL [<a href="rfc6426.html" title="&quot;MPLS On-Demand Connectivity Verification and Route Tracing&quot;">RFC6426</a>] followed by an IPv4 (0x0021) or IPv6 (0x0057) type
      Associated Channel Header (ACH) [<a href="rfc4385.html" title="&quot;Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN&quot;">RFC4385</a>]

   o  PW ACH [<a href="rfc4385.html" title="&quot;Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN&quot;">RFC4385</a>]

   To ensure interoperability, implementations of this document MUST
   support both encapsulations.

<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>.  Operations</span>

   In this section, we explain the operation of the LSP Ping over a P2MP
   PW.  Figure 2 shows a P2MP PW PW1 setup from Root PE R-PE1, to Leaf
   PEs (L-PE2, L-PE3, and L-PE4).  The transport LSP associated with the
   P2MP PW1 can be mLDP P2MP MPLS LSP or P2MP TE tunnel.

                 |&lt;--------------P2MP PW----------------&gt;|
          Native |                                       |  Native
         Service |     |&lt;--PSN1-&gt;|      |&lt;--PSN2-&gt;|      |  Service
          (AC)   V     V         V      V         V      V   (AC)
            |    +-----+         +------+         +------+    |
            |    |     |         |   P1 |=========|L-PE2 |AC3 |    +---+
            |    |     |         |   .......PW1.........&gt;|--------&gt;|CE3|
            |    |R-PE1|=========|   .  |=========|      |    |    +---+
            |    |  .......PW1........  |         +------+    |
            |    |  .  |=========|   .  |         +------+    |
            |    |  .  |         |   .  |=========|L-PE3 |AC4 |    +---+
    +---+   |AC1 |  .  |         |   .......PW1.........&gt;|--------&gt;|CE4|
    |CE1|-------&gt;|...  |         |      |=========|      |    |    +---+
    +---+   |    |  .  |         +------+         +------+    |
            |    |  .  |         +------+         +------+    |
            |    |  .  |=========|   P2 |=========|L-PE4 |AC5 |    +---+
            |    |  .......PW1..............PW1.........&gt;|--------&gt;|CE5|
            |    |     |=========|      |=========|      |    |    +---+
            |    +-----+         +------+         +------+    |

                             Figure 2: P2MP PW









<span class="grey">Jain, et al.                 Standards Track                    [Page 6]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-7" id="page-7" href="#page-7" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


   When an operator wants to perform a connectivity check for the P2MP
   PW1, the operator initiates an LSP Ping echo request from Root PE
   R-PE1, with the Target FEC Stack TLV containing the P2MP Pseudowire
   sub-TLV in the echo request packet.  For an Inclusive P2MP Tree
   arrangement, the echo request packet is sent over the P2MP MPLS LSP
   with one of the following two encapsulation options:

   o  {P2MP LSP label, GAL} MPLS label stack and IPv4 or IPv6 ACH.

   o  {P2MP LSP label} MPLS label stack and PW ACH.

   For an Aggregate Inclusive Tree arrangement, the echo request packet
   is sent over the P2MP MPLS LSP with one of the following two
   encapsulation options:

   o  {P2MP LSP label, P2MP PW upstream assigned label, GAL} MPLS label
      stack and IPv4 or IPv6 ACH.

   o  {P2MP LSP label, P2MP PW upstream assigned label} MPLS label stack
      and PW ACH.

   The intermediate P routers do MPLS label swap and replication based
   on the incoming MPLS LSP label.  Once the echo request packet reaches
   L-PEs, L-PEs use the GAL and the IPv4/IPv6 ACH Channel header or PW
   ACH as the case may be, to determine that the packet is an OAM
   Packet.  The L-PEs process the packet and perform checks for the P2MP
   Pseudowire sub-TLV present in the Target FEC Stack TLV as described
   in <a href="rfc8029.html#section-4.4">Section&nbsp;4.4 in [RFC8029]</a> and respond according to the processing
   rules in that document.

<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>.  Controlling Echo Responses</span>

   The procedures described in [<a href="rfc6425.html" title="&quot;Detecting Data-Plane Failures in Point-to-Multipoint MPLS - Extensions to LSP Ping&quot;">RFC6425</a>] for preventing congestion of
   Echo Responses (Echo Jitter TLV in <a href="rfc6425.html#section-3.3">Section&nbsp;3.3 of [RFC6425]</a>) and
   limiting the echo reply to a single L-PE (Node Address P2MP Responder
   Identifier TLV in <a href="rfc6425.html#section-3.2">Section&nbsp;3.2 of [RFC6425]</a>) should be applied to P2MP
   PW LSP Ping.

<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>.  Security Considerations</span>

   The proposal introduced in this document does not introduce any new
   security considerations beyond those that already apply to [<a href="rfc6425.html" title="&quot;Detecting Data-Plane Failures in Point-to-Multipoint MPLS - Extensions to LSP Ping&quot;">RFC6425</a>].









<span class="grey">Jain, et al.                 Standards Track                    [Page 7]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-8" id="page-8" href="#page-8" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


<span class="h2"><a class="selflink" name="section-8" href="#section-8">8</a>.  IANA Considerations</span>

   This document defines a new sub-TLV type included in the Target FEC
   Stack TLV (TLV Type 1) [<a href="rfc8029.html" title="&quot;Detecting Multiprotocol Label Switched (MPLS) Data-Plane Failures&quot;">RFC8029</a>] in LSP Ping.

   IANA has assigned the following sub-TLV type value from the "Sub-TLVs
   for TLV Types 1, 16, and 21" sub-registry within the "Multiprotocol
   Label Switching (MPLS) Label Switched Paths (LSPs) Ping Parameters"
   registry:

      37 P2MP Pseudowire

<span class="h2"><a class="selflink" name="section-9" href="#section-9">9</a>.  References</span>

<span class="h3"><a class="selflink" name="section-9.1" href="#section-9.1">9.1</a>.  Normative References</span>

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a name="ref-RFC4385" id="ref-RFC4385">RFC4385</a>]  Bryant, S., Swallow, G., Martini, L., and D. McPherson,
              "Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for
              Use over an MPLS PSN", <a href="rfc4385.html">RFC 4385</a>, DOI 10.17487/RFC4385,
              February 2006, &lt;<a href="https://www.rfc-editor.org/info/rfc4385">https://www.rfc-editor.org/info/rfc4385</a>&gt;.

   [<a name="ref-RFC4446" id="ref-RFC4446">RFC4446</a>]  Martini, L., "IANA Allocations for Pseudowire Edge to Edge
              Emulation (PWE3)", <a href="https://tools.ietf.org/html/bcp116">BCP 116</a>, <a href="rfc4446.html">RFC 4446</a>,
              DOI 10.17487/RFC4446, April 2006,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4446">https://www.rfc-editor.org/info/rfc4446</a>&gt;.

   [<a name="ref-RFC6425" id="ref-RFC6425">RFC6425</a>]  Saxena, S., Ed., Swallow, G., Ali, Z., Farrel, A.,
              Yasukawa, S., and T. Nadeau, "Detecting Data-Plane
              Failures in Point-to-Multipoint MPLS - Extensions to LSP
              Ping", <a href="rfc6425.html">RFC 6425</a>, DOI 10.17487/RFC6425, November 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6425">https://www.rfc-editor.org/info/rfc6425</a>&gt;.

   [<a name="ref-RFC6426" id="ref-RFC6426">RFC6426</a>]  Gray, E., Bahadur, N., Boutros, S., and R. Aggarwal, "MPLS
              On-Demand Connectivity Verification and Route Tracing",
              <a href="rfc6426.html">RFC 6426</a>, DOI 10.17487/RFC6426, November 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6426">https://www.rfc-editor.org/info/rfc6426</a>&gt;.

   [<a name="ref-RFC7117" id="ref-RFC7117">RFC7117</a>]  Aggarwal, R., Ed., Kamite, Y., Fang, L., Rekhter, Y., and
              C. Kodeboniya, "Multicast in Virtual Private LAN Service
              (VPLS)", <a href="rfc7117.html">RFC 7117</a>, DOI 10.17487/RFC7117, February 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7117">https://www.rfc-editor.org/info/rfc7117</a>&gt;.





<span class="grey">Jain, et al.                 Standards Track                    [Page 8]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-9" id="page-9" href="#page-9" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


   [<a name="ref-RFC8029" id="ref-RFC8029">RFC8029</a>]  Kompella, K., Swallow, G., Pignataro, C., Ed., Kumar, N.,
              Aldrin, S., and M. Chen, "Detecting Multiprotocol Label
              Switched (MPLS) Data-Plane Failures", <a href="rfc8029.html">RFC 8029</a>,
              DOI 10.17487/RFC8029, March 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8029">https://www.rfc-editor.org/info/rfc8029</a>&gt;.

   [<a name="ref-RFC8174" id="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="rfc2119.html">RFC</a>
              <a href="rfc2119.html">2119</a> Key Words", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc8174.html">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a name="ref-RFC8338" id="ref-RFC8338">RFC8338</a>]  Boutros, S., Ed. and S. Sivabalan, Ed., "Signaling Root-
              Initiated Point-to-Multipoint Pseudowire Using LDP",
              <a href="rfc8338.html">RFC 8338</a>, DOI 10.17487/RFC8338, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8338">https://www.rfc-editor.org/info/rfc8338</a>&gt;.

<span class="h3"><a class="selflink" name="section-9.2" href="#section-9.2">9.2</a>.  Informative References</span>

   [<a name="ref-RFC4875" id="ref-RFC4875">RFC4875</a>]  Aggarwal, R., Ed., Papadimitriou, D., Ed., and S.
              Yasukawa, Ed., "Extensions to Resource Reservation
              Protocol - Traffic Engineering (RSVP-TE) for Point-to-
              Multipoint TE Label Switched Paths (LSPs)", <a href="rfc4875.html">RFC 4875</a>,
              DOI 10.17487/RFC4875, May 2007,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4875">https://www.rfc-editor.org/info/rfc4875</a>&gt;.

   [<a name="ref-RFC6388" id="ref-RFC6388">RFC6388</a>]  Wijnands, IJ., Ed., Minei, I., Ed., Kompella, K., and B.
              Thomas, "Label Distribution Protocol Extensions for Point-
              to-Multipoint and Multipoint-to-Multipoint Label Switched
              Paths", <a href="rfc6388.html">RFC 6388</a>, DOI 10.17487/RFC6388, November 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6388">https://www.rfc-editor.org/info/rfc6388</a>&gt;.

   [<a name="ref-RFC7338" id="ref-RFC7338">RFC7338</a>]  Jounay, F., Ed., Kamite, Y., Ed., Heron, G., and M. Bocci,
              "Requirements and Framework for Point-to-Multipoint
              Pseudowires over MPLS Packet Switched Networks", <a href="rfc7338.html">RFC 7338</a>,
              DOI 10.17487/RFC7338, September 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7338">https://www.rfc-editor.org/info/rfc7338</a>&gt;.
















<span class="grey">Jain, et al.                 Standards Track                    [Page 9]</span></pre>
<hr class='noprint' style='width: 96ex;' align='left'/><!--NewPage--><pre class='newpage'><a name="page-10" id="page-10" href="#page-10" class="invisible"> </a>
<span class="grey"><a href="rfc8339.html">RFC 8339</a>                P2MP PW TLV for LSP Ping              March 2018</span>


Acknowledgments

   The authors would like to thank Shaleen Saxena, Greg Mirsky, Andrew
   G. Malis, and Danny Prairie for their valuable input and comments.

Authors' Addresses

   Parag Jain (editor)
   Cisco Systems, Inc.
   2000 Innovation Drive
   Kanata, ON  K2K-3E8
   Canada

   Email: paragj@cisco.com


   Sami Boutros
   VMWare, Inc.
   United States of America

   Email: sboutros@vmware.com


   Sam Aldrin
   Google Inc.
   United States of America

   Email: aldrin.ietf@gmail.com























Jain, et al.                 Standards Track                   [Page 10]

</pre><br />
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.129c, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>
</body>

<!-- Mirrored from tools.ietf.org/html/rfc8339 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 28 Jul 2019 12:14:33 GMT -->
</html>
