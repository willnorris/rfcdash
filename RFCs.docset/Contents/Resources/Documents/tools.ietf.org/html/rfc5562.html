<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5562 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:34 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-ietf-tsvwg-ecnsyn" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:5562" name="DC.Identifier"/>
<meta content="June, 2009" name="DC.Date.Issued"/>
<meta content="Floyd, Sally" name="DC.Creator"/>
<meta content="Kuzmanovic, Aleksandar" name="DC.Creator"/>
<meta content="Mondal, Amit" name="DC.Creator"/>
<meta content="This draft specifies a modification to RFC 3168 to allow TCP SYN/ACK
packets to be ECN-Capable. For TCP, RFC 3168 only specifies setting an
ECN-Capable codepoint on data packets, and not on SYN and SYN/ACK
packets. However, because of the high cost to the TCP transfer of
having a SYN/ACK packet dropped, with the resulting retransmit
timeout, this document specifies the use of ECN for the SYN/ACK packet
itself, when sent in response to a SYN packet with the two ECN flags
set in the TCP header, indicating a willingness to use ECN. Setting
the initial TCP SYN/ACK packet as ECN-Capable can be of great benefit
to the TCP connection, avoiding the severe penalty of a retransmit
timeout for a connection that has not yet started placing a load on
the network. The TCP responder (the sender of the SYN/ACK packet) must
reply to a report of an ECN-marked SYN/ACK packet by resending a
SYN/ACK packet that is not ECN-Capable. If the resent SYN/ACK packet
is acknowledged, then the TCP responder reduces its initial congestion
window from two, three, or four segments to one segment, thereby
reducing the subsequent load from that connection on the network. If
instead the SYN/ACK packet is dropped, or for some other reason the
TCP responder does not receive an acknowledgement in the specified
time, the TCP responder follows TCP standards for a dropped SYN/ACK
packet (setting the retransmit timer). This document updates RFC 3168." name="DC.Description.Abstract"/>
<meta content="Adding Explicit Congestion Notification (ECN) Capability to TCP's SYN/ACK Packets" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5562 - Adding Explicit Congestion Notification (ECN) Capability to TCP's SYN/ACK Packets</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgyellow" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5562.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5562" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-tcpm-ecnsyn" title="draft-ietf-tcpm-ecnsyn">draft-ietf-tcpm...</a>] [<a href="https://datatracker.ietf.org/doc/rfc5562" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5562" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5562" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                            EXPERIMENTAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                      A. Kuzmanovic
Request for Comments: 5562                                     A. Mondal
Category: Experimental                           Northwestern University
                                                                S. Floyd
                                                                    ICSI
                                                         K. Ramakrishnan
                                                      AT&amp;T Labs Research
                                                               June 2009


        <span class="h1">Adding Explicit Congestion Notification (ECN) Capability</span>
                        <span class="h1">to TCP's SYN/ACK Packets</span>

Status of This Memo

   This memo defines an Experimental Protocol for the Internet
   community.  It does not specify an Internet standard of any kind.
   Discussion and suggestions for improvement are requested.
   Distribution of this memo is unlimited.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.









<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


Abstract

   The proposal in this document is Experimental.  While it may be
   deployed in the current Internet, it does not represent a consensus
   that this is the best possible mechanism for the use of Explicit
   Congestion Notification (ECN) in TCP SYN/ACK packets.

   This document describes an optional, experimental modification to <a href="rfc3168.html">RFC</a>
   <a href="rfc3168.html">3168</a> to allow TCP SYN/ACK packets to be ECN-Capable.  For TCP, <a href="rfc3168.html">RFC</a>
   <a href="rfc3168.html">3168</a> specifies setting an ECN-Capable codepoint on data packets, but
   not on SYN and SYN/ACK packets.  However, because of the high cost to
   the TCP transfer of having a SYN/ACK packet dropped, with the
   resulting retransmission timeout, this document describes the use of
   ECN for the SYN/ACK packet itself, when sent in response to a SYN
   packet with the two ECN flags set in the TCP header, indicating a
   willingness to use ECN.  Setting the initial TCP SYN/ACK packet as
   ECN-Capable can be of great benefit to the TCP connection, avoiding
   the severe penalty of a retransmission timeout for a connection that
   has not yet started placing a load on the network.  The TCP responder
   (the sender of the SYN/ACK packet) must reply to a report of an ECN-
   marked SYN/ACK packet by resending a SYN/ACK packet that is not ECN-
   Capable.  If the resent SYN/ACK packet is acknowledged, then the TCP
   responder reduces its initial congestion window from two, three, or
   four segments to one segment, thereby reducing the subsequent load
   from that connection on the network.  If instead the SYN/ACK packet
   is dropped, or for some other reason the TCP responder does not
   receive an acknowledgement in the specified time, the TCP responder
   follows TCP standards for a dropped SYN/ACK packet (setting the
   retransmission timer).






















<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Conventions and Terminology .....................................<a href="#page-5">5</a>
   <a href="#section-3">3</a>. Specification ...................................................<a href="#page-6">6</a>
       <a href="#section-3.1">3.1</a>. SYN/ACK Packets Dropped in the Network ....................<a href="#page-7">7</a>
       <a href="#section-3.2">3.2</a>. SYN/ACK Packets ECN-Marked in the Network .................<a href="#page-8">8</a>
       <a href="#section-3.3">3.3</a>. Management Interface .....................................<a href="#page-10">10</a>
   <a href="#section-4">4</a>. Discussion .....................................................<a href="#page-11">11</a>
       <a href="#section-4.1">4.1</a>. Flooding Attacks .........................................<a href="#page-11">11</a>
       <a href="#section-4.2">4.2</a>. The TCP SYN Packet .......................................<a href="#page-11">11</a>
       <a href="#section-4.3">4.3</a>. SYN/ACK Packets and Packet Size ..........................<a href="#page-12">12</a>
       <a href="#section-4.4">4.4</a>. Response to ECN-Marking of SYN/ACK Packets ...............<a href="#page-12">12</a>
   <a href="#section-5">5</a>. Related Work ...................................................<a href="#page-14">14</a>
   <a href="#section-6">6</a>. Performance Evaluation .........................................<a href="#page-15">15</a>
       <a href="#section-6.1">6.1</a>. The Costs and Benefits of Adding ECN-Capability ..........<a href="#page-15">15</a>
       6.2. An Evaluation of Different Responses to ECN-Marked
            SYN/ACK Packets ..........................................<a href="#page-16">16</a>
       <a href="#section-6.3">6.3</a>. Experiments ..............................................<a href="#page-17">17</a>
   <a href="#section-7">7</a>. Security Considerations ........................................<a href="#page-18">18</a>
       <a href="#section-7.1">7.1</a>. "Bad" Routers or Middleboxes .............................<a href="#page-18">18</a>
       <a href="#section-7.2">7.2</a>. Congestion Collapse ......................................<a href="#page-18">18</a>
   <a href="#section-8">8</a>. Conclusions ....................................................<a href="#page-19">19</a>
   <a href="#section-9">9</a>. Acknowledgements ...............................................<a href="#page-19">19</a>
   <a href="#appendix-A">Appendix A</a>. Report on Simulations .................................<a href="#page-20">20</a>
      <a href="#appendix-A.1">A.1</a>. Simulations with RED in Packet Mode .......................<a href="#page-20">20</a>
      <a href="#appendix-A.2">A.2</a>. Simulations with RED in Byte Mode .........................<a href="#page-25">25</a>
   <a href="#appendix-B">Appendix B</a>. Issues of Incremental Deployment ......................<a href="#page-28">28</a>
   Normative References ..............................................<a href="#page-30">30</a>
   Informative References ............................................<a href="#page-30">30</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   TCP's congestion control mechanism has primarily used packet loss as
   the congestion indication, with packets dropped when buffers
   overflow.  With such tail-drop mechanisms, the packet delay can be
   high, as the queue at bottleneck routers can be fairly large.
   Dropping packets only when the queue overflows, and having TCP react
   only to such losses, results in:

   1) significantly higher packet delay;

   2) unnecessarily many packet losses; and

   3) unfairness due to synchronization effects.






<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   The adoption of Active Queue Management (AQM) mechanisms allows
   better control of bottleneck queues [<a href="rfc2309.html" title='"Recommendations on Queue Management and Congestion Avoidance in the Internet"'>RFC2309</a>].  This use of AQM has
   the following potential benefits:

   1) better control of the queue, with reduced queuing delay;

   2) fewer packet drops; and

   3) better fairness because of fewer synchronization effects.

   With the adoption of ECN, performance may be further improved.  When
   the router detects congestion before buffer overflow, the router can
   provide a congestion indication either by dropping a packet or by
   setting the Congestion Experienced (CE) codepoint in the Explicit
   Congestion Notification (ECN) field in the IP header [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>].  The
   IETF has standardized the use of the Congestion Experienced (CE)
   codepoint in the IP header for routers to indicate congestion.  For
   incremental deployment and backwards compatibility, the RFC on ECN
   [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] specifies that routers may mark ECN-Capable packets that
   would otherwise have been dropped, using the Congestion Experienced
   codepoint in the ECN field.  The use of ECN allows TCP to react to
   congestion while avoiding unnecessary retransmission timeouts.  Thus,
   using ECN has several benefits:

   1) For short transfers, a TCP connection's congestion window may be
      small.  For example, if the current window contains only one
      packet, and that packet is dropped, TCP will have to wait for a
      retransmission timeout to recover, reducing its overall
      throughput.  Similarly, if the current window contains only a few
      packets and one of those packets is dropped, there might not be
      enough duplicate acknowledgements for a fast retransmission, and
      the sender of the data packet might have to wait for a delay of
      several round-trip times (RTT) using Limited Transmit [<a href="rfc3042.html" title="&quot;Enhancing TCP's Loss Recovery Using Limited Transmit&quot;">RFC3042</a>].
      With the use of ECN, short flows are less likely to have packets
      dropped, sometimes avoiding unnecessary delays or costly
      retransmission timeouts.

   2) While longer flows may not see substantially improved throughput
      with the use of ECN, they may experience lower loss.  This may
      benefit TCP applications that are latency- and loss-sensitive,
      because of the avoidance of retransmissions.

   <a href="rfc3168.html">RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] specifies setting the ECN-Capable codepoint on TCP
   data packets, but not on TCP SYN and SYN/ACK packets.  <a href="rfc3168.html">RFC 3168</a>
   [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] specifies the negotiation of the use of ECN between the two
   TCP endpoints in the TCP SYN and SYN-ACK exchange, using flags in the
   TCP header.  Erring on the side of being conservative, <a href="rfc3168.html">RFC 3168</a>
   [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] does not specify the use of ECN for the first SYN/ACK



<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   packet itself.  However, because of the high cost to the TCP transfer
   of having a SYN/ACK packet dropped, with the resulting retransmission
   timeout, this document specifies the use of ECN for the SYN/ACK
   packet itself.  This can be of great benefit to the TCP connection,
   avoiding the severe penalty of a retransmission timeout for a
   connection that has not yet started placing a load on the network.
   The sender of the SYN/ACK packet must respond to a report of an ECN-
   marked SYN/ACK packet (a SYN/ACK packet with the CE codepoint set in
   the ECN field in the IP header) by sending a non-ECN-Capable SYN/ACK
   packet, and by reducing its initial congestion window from two,
   three, or four segments to one segment, reducing the subsequent load
   from that connection on the network.

   The use of ECN for SYN/ACK packets has the following potential
   benefits:

   1) Avoidance of a retransmission timeout;

   2) Improvement in the throughput of short connections.

   This document specifies a modification to <a href="rfc3168.html">RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] to allow
   TCP SYN/ACK packets to be ECN-Capable.  <a href="#section-3">Section 3</a> contains the
   specification of the change, while <a href="#section-4">Section 4</a> discusses some of the
   issues, and <a href="#section-5">Section 5</a> discusses related work.  <a href="#section-6">Section 6</a> contains an
   evaluation of the specified change.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions%20and%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions and Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   We use the following terminology from <a href="rfc3168.html">RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>]:

   The ECN field in the IP header:

   o  CE: the Congestion Experienced codepoint; and

   o  ECT: either one of the two ECN-Capable Transport codepoints.

   The ECN flags in the TCP header:

   o  CWR: the Congestion Window Reduced flag; and

   o  ECE: the ECN-Echo flag.






<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   ECN-setup packets:

   o  ECN-setup SYN packet: a SYN packet with the ECE and CWR flags;

   o  ECN-setup SYN-ACK packet: a SYN-ACK packet with ECE but not CWR.

   In this document, we use the terms "initiator" and "responder" to
   refer to the sender of the SYN packet and of the SYN-ACK packet,
   respectively.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Specification"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Specification</span>

   This section specifies the modification to <a href="rfc3168.html">RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] to
   allow TCP SYN/ACK packets to be ECN-Capable.

   <a href="rfc3168.html#section-6.1.1">Section 6.1.1 of RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] states that "A host MUST NOT set
   ECT on SYN or SYN-ACK packets".  In this section, we specify that a
   TCP node may respond to an initial ECN-setup SYN packet by setting
   ECT in the responding ECN-setup SYN/ACK packet, indicating to routers
   that the SYN/ACK packet is ECN-Capable.  This allows a congested
   router along the path to mark the packet instead of dropping the
   packet as an indication of congestion.

   Assume that TCP node A transmits to TCP node B an ECN-setup SYN
   packet, indicating willingness to use ECN for this connection.  As
   specified by <a href="rfc3168.html">RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>], if TCP node B is willing to use ECN,
   node B responds with an ECN-setup SYN-ACK packet.
























<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20SYN%2FACK%20Packets%20Dropped%20in%20the%20Network"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  SYN/ACK Packets Dropped in the Network</span>

   Figure 1 shows an interchange with the SYN/ACK packet dropped by a
   congested router.  Node B waits for a retransmission timeout, and
   then retransmits the SYN/ACK packet.

      ---------------------------------------------------------------
         TCP Node A             Router                  TCP Node B
         (initiator)                                   (responder)
         ----------             ------                  ----------

         ECN-setup SYN packet ---&gt;
                                          ECN-setup SYN packet ---&gt;

                               &lt;--- ECN-setup SYN/ACK, possibly ECT
                                                 3-second timer set
                             SYN/ACK dropped               .
                                                           .
                                                           .
                                             3-second timer expires
                                    &lt;--- ECN-setup SYN/ACK, not ECT
         &lt;--- ECN-setup SYN/ACK
         Data/ACK ---&gt;
                                                      Data/ACK ---&gt;
                                   &lt;--- Data (one to four segments)
      ---------------------------------------------------------------

            Figure 1: SYN exchange with the SYN/ACK packet dropped

   If the SYN/ACK packet is dropped in the network, the responder (node
   B) responds by waiting three seconds for the retransmission timer to
   expire [<a href="rfc2988.html" title="&quot;Computing TCP's Retransmission Timer&quot;">RFC2988</a>].  If a SYN/ACK packet with the ECT codepoint is
   dropped, the responder should resend the SYN/ACK packet without the
   ECN-Capable codepoint.  (Although we are not aware of any middleboxes
   that drop SYN/ACK packets that contain an ECN-Capable codepoint in
   the IP header, we have learned to design our protocols defensively in
   this regard [<a href="rfc3360.html" title='"Inappropriate TCP Resets Considered Harmful"'>RFC3360</a>].)

   We note that if syn-cookies were used by the responder (node B) in
   the exchange in Figure 1, the responder wouldn't set a timer upon
   transmission of the SYN/ACK packet [<a href="#ref-SYN-COOK" title="1997">SYN-COOK</a>] [<a href="rfc4987.html" title='"TCP SYN Flooding Attacks and Common Mitigations"'>RFC4987</a>].  In this
   case, if the SYN/ACK packet was lost, the initiator (node A) would
   have to timeout and retransmit the SYN packet in order to trigger
   another SYN-ACK.







<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20SYN%2FACK%20Packets%20ECN-Marked%20in%20the%20Network"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  SYN/ACK Packets ECN-Marked in the Network</span>

   Figure 2 shows an interchange with the SYN/ACK packet sent as ECN-
   Capable, and ECN-marked instead of dropped at the congested router.
   This document specifies ECN+/TryOnce, which differs from the original
   proposal for ECN+ in [ECN+]; with ECN+/TryOnce, if the TCP responder
   is informed that the SYN/ACK was ECN-marked, the TCP responder
   immediately sends a SYN/ACK packet that is not ECN-Capable.  The TCP
   responder is only allowed to send data packets after the TCP
   initiator reports the receipt of a SYN/ACK packet that is not ECN-
   marked.

      ---------------------------------------------------------------
         TCP Node A             Router                  TCP Node B
         (initiator)                                   (responder)
         ----------             ------                  ----------

         ECN-setup SYN packet ---&gt;
                                         ECN-setup SYN packet ---&gt;

                                       &lt;--- ECN-setup SYN/ACK, ECT
                                                3-second timer set
                            &lt;--- Sets CE on SYN/ACK
         &lt;--- ECN-setup SYN/ACK, CE

         ACK, ECN-Echo ---&gt;
                                                ACK, ECN-Echo ---&gt;
                                    Window reduced to one segment.
                                   &lt;--- ECN-setup SYN/ACK, not ECT
         &lt;--- ECN-setup SYN/ACK

         Data/ACK, ECT ---&gt;
                                                Data/ACK, ECT ---&gt;
                                 &lt;--- Data, ECT (one segment only)
      ---------------------------------------------------------------

           Figure 2: SYN exchange with the SYN/ACK packet marked -
                                 ECN+/TryOnce

   If the initiator (node A) receives a SYN/ACK packet that has been
   ECN-marked by the congested router, with the CE codepoint set, the
   initiator restarts the retransmission timer.  The initiator responds
   to the ECN-marked SYN/ACK packet by setting the ECN-Echo flag in the
   TCP header of the responding ACK packet.  The initiator uses the
   standard rules in setting the cumulative acknowledgement field in the
   responding ACK packet.





<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   The initiator does not advance from the "SYN-Sent" to the
   "Established" state until it receives a SYN/ACK packet that is not
   ECN-marked.

   When the responder (node B) receives the ECN-Echo packet reporting
   the Congestion Experienced indication in the SYN/ACK packet, the
   responder sets the initial congestion window to one segment, instead
   of two segments as allowed by [<a href="rfc2581.html" title='"TCP Congestion Control"'>RFC2581</a>], or three or four segments
   allowed by [<a href="rfc3390.html" title="&quot;Increasing TCP's Initial Window&quot;">RFC3390</a>].  As illustrated in Figure 2, if the responder
   (node B) receives an ECN-Echo packet informing it of a Congestion
   Experienced indication on its SYN/ACK packet, the responder sends a
   SYN/ACK packet that is not ECN-Capable, in addition to setting the
   initial window to one segment.  The responder does not advance the
   send sequence number.  The responder also sets the retransmission
   timer.  The responder follows <a href="rfc2988.html">RFC 2988</a> [<a href="rfc2988.html" title="&quot;Computing TCP's Retransmission Timer&quot;">RFC2988</a>] in setting the RTO
   (retransmission timeout).

   The TCP hosts follow the standard specification for the response to
   duplicate SYN/ACK packets (e.g., <a href="rfc793.html#section-3.4">Section 3.4 of RFC 793</a> [<a href="rfc793.html" title='"Transmission Control Protocol"'>RFC793</a>]).

   We note that the mechanism in this document differs from <a href="rfc3168.html">RFC 3168</a>
   [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>], which specifies that "the sending TCP MUST restart the
   retransmission timer on receiving the ECN-Echo packet when the
   congestion window is one".  <a href="rfc3168.html">RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] does not allow SYN/ACK
   packets to be ECN-Capable.  <a href="rfc3168.html">RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] specifies that in
   response to an ECN-Echo packet, the TCP responder also sets the CWR
   flag in the TCP header of the next data packet sent, to acknowledge
   its receipt of and reaction to the ECN-Echo flag.  In contrast, in
   response to an ECN-Echo packet acknowledging the receipt of an ECN-
   Capable SYN/ACK packet, the TCP responder doesn't set the CWR flag,
   but simply sends a SYN/ACK packet that is not ECN-Capable.  On
   receiving the non-ECN-Capable SYN/ACK packet, the TCP initiator
   clears the ECN-Echo flag on replying packets.


















<span class="grey">Kuzmanovic, et al.            Experimental                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


      ---------------------------------------------------------------
         TCP Node A             Router                  TCP Node B
         (initiator)                                   (responder)
         ----------             ------                  ----------

         ECN-setup SYN packet ---&gt;
                                         ECN-setup SYN packet ---&gt;

                                       &lt;--- ECN-setup SYN/ACK, ECT
                            &lt;--- Sets CE on SYN/ACK
         &lt;--- ECN-setup SYN/ACK, CE

         ACK, ECN-Echo ---&gt;
                                                ACK, ECN-Echo ---&gt;
                                    Window reduced to one segment.

                                    &lt;--- ECN-setup SYN/ACK, not ECT
                                                 3-second timer set
                             SYN/ACK dropped               .
                                                           .
                                                           .
                                             3-second timer expires
                                    &lt;--- ECN-setup SYN/ACK, not ECT
         &lt;--- ECN-setup SYN/ACK, not ECT
         Data/ACK, ECT ---&gt;
                                                 Data/ACK, ECT ---&gt;
                                  &lt;--- Data, ECT (one segment only)
      ---------------------------------------------------------------

         Figure 3: SYN exchange with the first SYN/ACK packet marked
             and the second SYN/ACK packet dropped - ECN+/TryOnce

   In contrast to Figure 2, Figure 3 shows an interchange where the
   first SYN/ACK packet is ECN-marked and the second SYN/ACK packet is
   dropped in the network.  As in Figure 2, the TCP responder sets a
   timer when the second SYN/ACK packet is sent.  Figure 3 shows that if
   the timer expires before the TCP responder receives an
   acknowledgement for the other end, the TCP responder resends the
   SYN/ACK packet, following the TCP standards.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20Management%20Interface"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  Management Interface</span>

   The TCP implementation using ECN-Capable SYN/ACK packets should
   include a management interface to allow the use of ECN to be turned
   off for SYN/ACK packets.  This is to deal with possible backwards
   compatibility problems such as those discussed in <a href="#appendix-B">Appendix B</a>.





<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Discussion"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Discussion</span>

   The rationale for the specification in this document is the
   following.  When node B receives a TCP SYN packet with ECN-Echo bit
   set in the TCP header, this indicates that node A is ECN-Capable.  If
   node B is also ECN-Capable, there are no obstacles to immediately
   setting one of the ECN-Capable codepoints in the IP header in the
   responding TCP SYN/ACK packet.

   There can be a great benefit in setting an ECN-Capable codepoint in
   SYN/ACK packets, as is discussed further in [ECN+], and reported
   briefly in <a href="#section-5">Section 5</a> below.  Congestion is most likely to occur in
   the server-to-client direction.  As a result, setting an ECN-Capable
   codepoint in SYN/ACK packets can reduce the occurrence of three-
   second retransmission timeouts resulting from the drop of SYN/ACK
   packets.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Flooding%20Attacks"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Flooding Attacks</span>

   Setting an ECN-Capable codepoint in the responding TCP SYN/ACK
   packets does not raise any new or additional security
   vulnerabilities.  For example, provoking servers or hosts to send
   SYN/ACK packets to a third party in order to perform a "SYN/ACK
   flood" attack would be highly inefficient.  Third parties would
   immediately drop such packets, since they would know that they didn't
   generate the TCP SYN packets in the first place.  Moreover, such
   SYN/ACK attacks would have the same signatures as the existing TCP
   SYN attacks.  Provoking servers or hosts to reply with SYN/ACK
   packets in order to congest a certain link would also be highly
   inefficient because SYN/ACK packets are small in size.

   However, the addition of ECN-Capability to SYN/ACK packets could
   allow SYN/ACK packets to persist for more hops along a network path
   before being dropped, thus adding somewhat to the ability of a
   SYN/ACK attack to flood a network link.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20The%20TCP%20SYN%20Packet"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  The TCP SYN Packet</span>

   There are several reasons why an ECN-Capable codepoint must not be
   set in the IP header of the initiating TCP SYN packet.  First, when
   the TCP SYN packet is sent, there are no guarantees that the other
   TCP endpoint (node B in Figure 2) is ECN-Capable, or that it would be
   able to understand and react if the ECN CE codepoint was set by a
   congested router.







<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   Second, the ECN-Capable codepoint in TCP SYN packets could be misused
   by malicious clients to "improve" the well-known TCP SYN attack.  By
   setting an ECN-Capable codepoint in TCP SYN packets, a malicious host
   might be able to inject a large number of TCP SYN packets through a
   potentially congested ECN-enabled router, congesting it even further.

   For both these reasons, we continue the restriction that the TCP SYN
   packet must not have the ECN-Capable codepoint in the IP header set.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20SYN%2FACK%20Packets%20and%20Packet%20Size"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  SYN/ACK Packets and Packet Size</span>

   There are a number of router buffer architectures that have smaller
   dropping rates for small (SYN) packets than for large (data) packets.
   For example, for a Drop-Tail queue in units of packets, where each
   packet takes a single slot in the buffer regardless of packet size,
   small and large packets are equally likely to be dropped.  However,
   for a Drop-Tail queue in units of bytes, small packets are less
   likely to be dropped than are large ones.  Similarly, for Random
   Early Detection (RED) in packet mode, small and large packets are
   equally likely to be dropped or marked, while for RED in byte mode, a
   packet's chance of being dropped or marked is proportional to the
   packet size in bytes.

   For a congested router with an AQM mechanism in byte mode, where a
   packet's chance of being dropped or marked is proportional to the
   packet size in bytes, the drop or marking rate for TCP SYN/ACK
   packets should generally be low.  In this case, the benefit of making
   SYN/ACK packets ECN-Capable should be similarly moderate.  However,
   for a congested router with a Drop-Tail queue in units of packets or
   with an AQM mechanism in packet mode, and with no priority queuing
   for smaller packets, small and large packets should have the same
   probability of being dropped or marked.  In such a case, making
   SYN/ACK packets ECN-Capable should be of significant benefit.

   We believe that there are a wide range of behaviors in the real world
   in terms of the drop or mark behavior at routers as a function of
   packet size (see Section 10 of [<a href="#ref-Tools" title='"Tools for the Evaluation of Simulation and Testbed Scenarios"'>Tools</a>]).  We note that all of these
   alternatives listed above are available in the NS simulator (Drop-
   Tail queues are by default in units of packets, while the default for
   RED queue management has been changed from packet mode to byte mode).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Response%20to%20ECN-Marking%20of%20SYN%2FACK%20Packets"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Response to ECN-Marking of SYN/ACK Packets</span>

   One question is why TCP SYN/ACK packets should be treated differently
   from other packets in terms of the end node's response to an ECN-
   marked packet.  <a href="rfc3168.html#section-5">Section 5 of RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] specifies the
   following:




<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


      Upon the receipt by an ECN-Capable transport of a single CE
      packet, the congestion control algorithms followed at the end-
      systems MUST be essentially the same as the congestion control
      response to a *single* dropped packet.  For example, for ECN-
      Capable TCP the source TCP is required to halve its congestion
      window for any window of data containing either a packet drop or
      an ECN indication.

   In particular, <a href="rfc3168.html#section-6.1.2">Section 6.1.2 of RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] specifies that
   when the TCP congestion window consists of a single packet and that
   packet is ECN-marked in the network, then the data sender must reduce
   the sending rate below one packet per round-trip time, by waiting for
   one RTO before sending another packet.  If the RTO was set to the
   average round-trip time, this would result in halving the sending
   rate; because the RTO is in fact larger than the average round-trip
   time, the sending rate is reduced to less than half of its previous
   value.

   TCP's congestion control response to the *dropping* of a SYN/ACK
   packet is to wait a default time before sending another packet.  This
   document argues that ECN gives end-systems a wider range of possible
   responses to the *marking* of a SYN/ACK packet, and that waiting a
   default time before sending another packet is not the desired
   response.

   On the conservative end, one could assume an effective congestion
   window of one packet for the SYN/ACK packet, and respond to an ECN-
   marked SYN/ACK packet by reducing the sending rate to one packet
   every two round-trip times.  As an approximation, the TCP end node
   could measure the round-trip time T between the sending of the
   SYN/ACK packet and the receipt of the acknowledgement, and reply to
   the acknowledgement of the ECN-marked SYN/ACK packet by waiting T
   seconds before sending a data packet.

   However, we note that for an ECN-marked SYN/ACK packet, halving the
   *congestion window* is not the same as halving the *sending rate*;
   there is no "sending rate" associated with an ECN-Capable SYN/ACK
   packet, as such packets are only sent as the first packet in a
   connection from that host.  Further, a router's marking of a SYN/ACK
   packet is not affected by any past history of that connection.

   Adding ECN-Capability to SYN/ACK packets allows the response of the
   responder setting the initial congestion window to one packet,
   instead of its allowed default value of two, three, or four packets.
   The responder sends a non-ECN-Capable SYN/ACK packet, and proceeds






<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   with a cautious sending rate of one data packet per round-trip time
   after that SYN/ACK packet is acknowledged.  This document argues that
   this approach is useful to users, with no dangers of congestion
   collapse or of starvation of competing traffic.  This is discussed in
   more detail below in <a href="#section-6.2">Section 6.2</a>.

   We note that if the data transfer is entirely from node A to node B,
   there is still a difference in performance between the original
   mechanism ECN+ and the mechanism ECN+/TryOnce specified in this
   document.  In particular, with ECN+/TryOnce, the TCP originator does
   not send data packets until it has received a non-ECN-marked SYN/ACK
   packet from the other end.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Related%20Work"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Related Work</span>

   The addition of ECN-Capability to TCP's SYN/ACK packets was initially
   proposed in [ECN+].  The paper includes an extensive set of
   simulation and testbed experiments to evaluate the effects of the
   proposal, using several Active Queue Management (AQM) mechanisms,
   including Random Early Detection (RED) [<a href="#ref-RED" title='"Random Early Detection gateways for Congestion Avoidance"'>RED</a>], Random Exponential
   Marking (REM) [<a href="#ref-REM" title='"REM: Active Queue Management"'>REM</a>], and Proportional Integrator (PI) [<a href="#ref-PI" title='"On Designing Improved Controllers for AQM Routers Supporting TCP Flows"'>PI</a>].  The
   performance measures were the end-to-end response times for each
   request/response pair, and the aggregate throughput on the bottleneck
   link.  The end-to-end response time was computed as the time from the
   moment when the request for the file is sent to the server, until
   that file is successfully downloaded by the client.

   The measurements from [ECN+] show that setting an ECN-Capable
   codepoint in the IP packet header in TCP SYN/ACK packets
   systematically improves performance with all evaluated AQM schemes.
   When SYN/ACK packets at a congested router are ECN-marked instead of
   dropped, this can avoid a long initial retransmission timeout,
   improving the response time for the affected flow dramatically.

   [ECN+] shows that the impact on aggregate throughput can also be
   quite significant, because marking SYN ACK packets can prevent larger
   flows from suffering long timeouts before being "admitted" into the
   network.  In addition, the testbed measurements from [ECN+] show that
   web servers setting the ECN-Capable codepoint in TCP SYN/ACK packets
   could serve more requests.

   As a final step, [ECN+] explores the coexistence of flows that do and
   don't set the ECN-Capable codepoint in TCP SYN/ACK packets.  The
   results in [ECN+] show that both types of flows can coexist, with
   some performance degradation for flows that don't use ECN+.  Flows






<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   that do use ECN+ improve their end-to-end performance.  At the same
   time, the performance degradation for flows that don't use ECN+, as a
   result of the flows that do use ECN+, increases as a greater fraction
   of flows use ECN+.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Performance%20Evaluation"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Performance Evaluation</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20The%20Costs%20and%20Benefits%20of%20Adding%20ECN-Capability"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  The Costs and Benefits of Adding ECN-Capability</span>

   [ECN+] explores the costs and benefits of adding ECN-Capability to
   SYN/ACK packets with both simulations and experiments.  The addition
   of ECN-Capability to SYN/ACK packets could be of significant benefit
   for those ECN connections that would have had the SYN/ACK packet
   dropped in the network, and for which the ECN-Capability would allow
   the SYN/ACK to be marked rather than dropped.

   The percent of SYN/ACK packets on a link can be quite high.  In
   particular, measurements on links dominated by web traffic indicate
   that 15-20% of the packets can be SYN/ACK packets [<a href="#ref-SCJO01" title='"What TCP/IP Protocol Headers Can Tell us about the Web"'>SCJO01</a>].

   The benefit of adding ECN-Capability to SYN/ACK packets depends in
   part on the size of the data transfer.  The drop of a SYN/ACK packet
   can increase the download time of a short file by an order of
   magnitude, by requiring a three-second retransmission timeout.  For
   longer-lived flows, the effect of a dropped SYN/ACK packet on file
   download time is less dramatic.  However, even for longer-lived
   flows, the addition of ECN-Capability to SYN/ACK packets can improve
   the fairness among long-lived flows, as newly arriving flows would be
   less likely to have to wait for retransmission timeouts.

   One question that arises is what fraction of connections would see
   the benefit from making SYN/ACK packets ECN-Capable in a particular
   scenario.  Specifically:

   (1) What fraction of arriving SYN/ACK packets are dropped at the
       congested router when the SYN/ACK packets are not ECN-Capable?

   (2) Of those SYN/ACK packets that are dropped, what fraction would
       have been ECN-marked instead of dropped if the SYN/ACK packets
       had been ECN-Capable?

   To answer (1), it is necessary to consider not only the level of
   congestion but also the queue architecture at the congested link.  As
   described in <a href="#section-4">Section 4</a> above, for some queue architectures, small
   packets are less likely to be dropped than large ones.  In such an
   environment, SYN/ACK packets would have lower packet drop rates;
   question (1) could not necessarily be inferred from the overall
   packet drop rate, but could be answered by measuring the drop rate



<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   for SYN/ACK packets directly.  In such an environment, adding ECN-
   Capability to SYN/ACK packets would be of less dramatic benefit than
   in environments where all packets are equally likely to be dropped
   regardless of packet size.

   As question (2) implies, even if all of the SYN/ACK packets were
   ECN-Capable, there could still be some SYN/ACK packets dropped
   instead of marked at the congested link; the full answer to question
   (2) depends on the details of the queue management mechanism at the
   router.  If congestion is sufficiently bad, and the queue management
   mechanism cannot prevent the buffer from overflowing, then SYN/ACK
   packets will be dropped rather than marked upon buffer overflow
   whether or not they are ECN-Capable.

   For some AQM mechanisms, ECN-Capable packets are marked instead of
   dropped any time this is possible, that is, any time the buffer is
   not yet full.  For other AQM mechanisms however, such as the RED
   mechanism as recommended in [<a href="#ref-RED" title='"Random Early Detection gateways for Congestion Avoidance"'>RED</a>], packets are dropped rather than
   marked when the packet drop/mark rate exceeds a certain threshold,
   e.g., 10%, even if the packets are ECN-Capable.  For a router with
   such an AQM mechanism, when congestion is sufficiently severe to
   cause a high drop/mark rate, some SYN/ACK packets would be dropped
   instead of marked whether or not they were ECN-Capable.

   Thus, the degree of benefit of adding ECN-Capability to SYN/ACK
   packets depends not only on the overall packet drop rate in the
   network, but also on the queue management architecture at the
   congested link.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20An%20Evaluation%20of%20Different%20Responses%20to%20ECN-Marked%20SYN%2FACK%20Packets"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  An Evaluation of Different Responses to ECN-Marked SYN/ACK Packets</span>

   This document specifies that the end node responds to the report of
   an ECN-marked SYN/ACK packet by setting the initial congestion window
   to one segment, instead of its possible default value of two to four
   segments, and resending a SYN/ACK packet that is not ECN-Capable.  We
   call this ECN+/TryOnce.

   However, <a href="#section-4">Section 4</a> discussed two other possible responses to an ECN-
   marked SYN/ACK packet.  In ECN+, the original proposal from [ECN+],
   the end node responds to the report of an ECN-marked SYN/ACK packet
   by setting the initial congestion window to one segment and
   immediately sending a data packet, if it has one to send.  In
   ECN+/Wait, the end node responds to the report of an ECN-marked
   SYN/ACK packet by setting the initial congestion window to one
   segment and waiting an RTT before sending a data packet.






<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   Simulations comparing the performance with Standard ECN (without
   ECN-marked SYN/ACK packets), ECN+, ECN+/Wait, and ECN/TryOnce show
   little difference, in terms of aggregate congestion, between ECN+ and
   ECN+/Wait.  However, for some scenarios with queues that are packet-
   based rather than byte-based, and with packet drop rates above 25%
   without ECN+, the use of ECN+ or of ECN+/Wait can more than double
   the packet drop rates to greater than 50%.  The details are given in
   Tables 1 and 3 of <a href="#appendix-A">Appendix A</a> below.  ECN+/TryOnce does not increase
   the packet drop rate in scenarios of high congestion.  Therefore,
   ECN+/TryOnce is superior to ECN+ or to ECN+/Wait, which both
   significantly increase the packet drop rate in scenarios of high
   congestion.  At the same time, ECN+/TryOnce gives a performance
   improvement similar to that of ECN+ or ECN+/Wait (Tables 2 and 4 of
   <a href="#appendix-A">Appendix A</a>).

   Our conclusions are that ECN+/TryOnce is safe, and has significant
   benefits to the user, and avoids the problems of ECN+ or ECN+/Wait
   under extreme levels of congestion.  As a consequence, this document
   specifies the use of ECN+/TryOnce.

   Note: We only discovered the occasional congestion-related problems
   of ECN+ and of ECN+/Wait when re-running the simulations with an
   updated version of the ns-2 simulator, after the document had almost
   completed the standardization process.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Experiments"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Experiments</span>

   This section discusses experiments that would be useful before a
   widespread deployment of ECN-Capability for TCP SYN/ACK packets.

   <a href="#section-7.1">Section 7.1</a> below discusses some of the known deployment problems of
   ECN, in terms of routers or middleboxes that react inappropriately to
   packets that use ECN codepoints in the IP or TCP packet headers.  One
   goal of a measurement study of ECN-Capability for TCP SYN/ACK packets
   would be to determine if there were any routers or middleboxes that
   react inappropriately to TCP SYN/ACK packets containing an ECN-
   Capable or CE codepoint in the IP header.  A second goal of a
   measurement study would be to check the deployment status of older
   TCP implementations that are ECN-Capable, but that don't respond to
   ECN-Capability for SYN/ACK packets.  (This is discussed in more
   detail in <a href="#appendix-B">Appendix B</a> below.)

   Following the discussion in <a href="#section-6.2">Section 6.2</a>, an experimental study could
   explore the use of ECN-Capability for TCP SYN/ACK packets in highly
   congested environments with ECN-Capable routers.






<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   TCP packets carrying the ECT codepoint in IP headers can be marked
   rather than dropped by ECN-Capable routers.  This raises several
   security concerns that we discuss below.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20%22Bad%22%20Routers%20or%20Middleboxes"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  "Bad" Routers or Middleboxes</span>

   There are a number of known deployment problems from using ECN with
   TCP traffic in the Internet.  The first reported problem, dating back
   to 2000, is of a small but decreasing number of routers or
   middleboxes that reset a TCP connection in response to TCP SYN
   packets using flags in the TCP header to negotiate ECN-Capability
   [<a href="#ref-Kelson00" title='"8% of the Internet unreachable!"'>Kelson00</a>] [<a href="rfc3360.html" title='"Inappropriate TCP Resets Considered Harmful"'>RFC3360</a>] [<a href="#ref-MAF05" title='"Measuring the Evolution of Transport Protocols in the Internet"'>MAF05</a>].  Dave Thaler reported at the March 2007
   IETF of two new problems encountered by TCP connections using ECN;
   the first of the two problems concerns routers that crash when a TCP
   data packet arrives with the ECN field in the IP header with the
   codepoint ECT(0) or ECT(1), indicating that an ECN-Capable connection
   has been established [<a href="#ref-SBT07" title='"Implementation Report on Experiences with Various TCP RFCs"'>SBT07</a>].

   While there is no evidence that any routers or middleboxes drop
   SYN/ACK packets that contain an ECN-Capable or CE codepoint in the IP
   header, such behavior cannot be excluded.  (There seems to be a
   number of routers or middleboxes that drop TCP SYN packets that
   contain known or unknown IP options (see figure 1 of [<a href="#ref-MAF05" title='"Measuring the Evolution of Transport Protocols in the Internet"'>MAF05</a>].)  Thus,
   as specified in <a href="#section-3">Section 3</a>, if a SYN/ACK packet with the ECT or CE
   codepoint is dropped, the TCP node should resend the SYN/ACK packet
   without the ECN-Capable codepoint.  There is also no evidence that
   any routers or middleboxes crash when a SYN/ACK arrives with an ECN-
   Capable or CE codepoint in the IP header (over and above the routers
   already known to crash when a data packet arrives with either ECT(0)
   or ECT(1)), but we have not conducted any measurement studies of this
   [<a href="#ref-F07" title='"[BEHAVE] Response of firewalls and middleboxes to TCP SYN packets that are ECN-Capable?"'>F07</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Congestion%20Collapse"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Congestion Collapse</span>

   Because TCP SYN/ACK packets carrying an ECT codepoint could be ECN-
   marked instead of dropped at an ECN-Capable router, the concern is
   whether this can either invoke congestion or worsen performance in
   highly congested scenarios.  However, after learning that a SYN/ACK
   packet was ECN-marked, the responder sends a SYN/ACK packet that is
   not ECN-Capable; if this SYN/ACK packet is dropped, the responder
   then waits for a retransmission timeout, as specified in the TCP
   standards.  In addition, routers are free to drop rather than mark
   arriving packets in times of high congestion, regardless of whether
   the packets are ECN-Capable.  When congestion is very high and a
   router's buffer is full, the router has no choice but to drop rather
   than to mark an arriving packet.



<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   The simulations reported in <a href="#appendix-A">Appendix A</a> show that even with demanding
   traffic mixes dominated by short flows and high levels of congestion,
   the aggregate packet dropping rates are not significantly different
   with Standard ECN or with ECN+/TryOnce.  However, in our simulations,
   we have one scenario where ECN+ or ECN+/Wait results in a
   significantly higher packet drop rate than ECN or ECN+/TryOnce
   (Tables 1 and 3 in <a href="#appendix-A">Appendix A</a> below).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Conclusions"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Conclusions</span>

   This document specifies a modification to <a href="rfc3168.html">RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>] to allow
   TCP nodes to send SYN/ACK packets as being ECN-Capable.  Making the
   SYN/ACK packet ECN-Capable avoids the high cost to a TCP transfer
   when a SYN/ACK packet is dropped by a congested router, by avoiding
   the resulting retransmission timeout.  This improves the throughput
   of short connections.  This document specifies the ECN+/TryOnce
   mechanism for ECN-Capability for SYN/ACK packets, where the sender of
   the SYN/ACK packet responds to an ECN mark by reducing its initial
   congestion window from two, three, or four segments to one segment,
   and sending a SYN/ACK packet that is not ECN-Capable.  The addition
   of ECN-Capability to SYN/ACK packets is particularly beneficial in
   the server-to-client direction, where congestion is more likely to
   occur.  In this case, the initial information provided by the ECN
   marking in the SYN/ACK packet enables the server to appropriately
   adjust the initial load it places on the network, while avoiding the
   delay of a retransmission timeout.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Acknowledgements"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Acknowledgements</span>

   We thank Anil Agarwal, Mark Allman, Remi Denis-Courmont, Wesley Eddy,
   Lars Eggert, Alfred Hoenes, Janardhan Iyengar, and Pasi Sarolahti for
   feedback on earlier working drafts of this document.  We thank Adam
   Langley [<a href="#ref-L08" title='"Re: [tcpm] I-D Action:draft-ietf-tcpm- ecnsyn-06.txt"'>L08</a>] for contributing a patch for ECN+/TryOnce for the Linux
   development tree.

















<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Report%20on%20Simulations"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Report on Simulations</span>

   This section reports on simulations showing the costs of adding ECN+
   in highly congested scenarios.  This section also reports on
   simulations for a comparative evaluation between ECN, ECN+,
   ECN+/Wait, and ECN+/TryOnce.

   The simulations are run with a range of file-size distributions,
   using the PackMime traffic generator in the ns-2 simulator.  They all
   use a heavy-tailed distribution of file sizes.  The simulations
   reported in the tables below use a mean file size of 3 Kbytes, to
   show the results with a traffic mix with a large number of small
   transfers.  Other simulations were run with mean file sizes of 5
   Kbytes, 7 Kbytes, 14 Kbytes, and 17 Kbytes.  The title of each chart
   gives the targeted average load from the traffic generator.  Because
   the simulations use a heavy-tailed distribution of file sizes, and
   run for only 85 seconds (including ten seconds of warm-up time), the
   actual load is often much smaller than the targeted load.  The
   congested link is 100 Mbps.  RED is run in gentle mode, and arriving
   ECN-Capable packets are only dropped instead of marked if the buffer
   is full (and the router has no choice).

   We explore three possible mechanisms for a TCP node's response to a
   report of an ECN-marked SYN/ACK packet.  With ECN+, the TCP node
   sends a data packet immediately (with an initial congestion window of
   one segment).  With ECN+/Wait, the TCP node waits a round-trip time
   before sending a data packet; the responder already has one
   measurement of the round-trip time when the acknowledgement for the
   SYN/ACK packet is received.  With ECN+/TryOnce, the mechanism
   standardized in this document, the TCP responder replies to a report
   of an ECN-marked SYN/ACK packet by sending a SYN/ACK packet that is
   not ECN-Capable, and reducing the initial congestion window to one
   segment.

   The simulation scripts are available on [<a href="#ref-ECN-SYN">ECN-SYN</a>], along with graphs
   showing the distribution of response times for the TCP connections.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.1.%20%20Simulations%20with%20RED%20in%20Packet%20Mode"></a><a class="selflink" href="#appendix-A.1" name="appendix-A.1">A.1</a>.  Simulations with RED in Packet Mode</span>

   The simulations with RED in packet mode and with the queue in packets
   show that ECN+ is useful in times of moderate or high congestion.
   However, for the simulations with a target load of 125%, with a
   packet loss rate of over 25% for ECN, ECN+ and ECN+/Wait both result
   in a packet loss rate of over 50%.  (In contrast, the packet loss
   rate with ECN+/TryOnce is less than that of ECN alone.)  For the
   distribution of response times, the simulations show that ECN+,
   ECN+/Wait, and ECN+/TryOnce all significantly improve the response
   times, when compared to the response times with Standard ECN.



<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   Table 1 shows the congestion levels for simulations with RED in
   packet mode, with a queue in packets.  To explore a worst-case
   scenario, these simulations use a traffic mix with an unrealistically
   small flow size distribution, with a mean flow size of 3 Kbytes.  For
   each table showing a particular traffic load, the four rows show the
   number of packets dropped, the number of packets ECN-marked, the
   aggregate packet drop rate, and the aggregate throughput.  The four
   columns show the simulations with Standard ECN, ECN+, ECN+/Wait, and
   ECN+/TryOnce.

   These simulations were run with RED set to mark instead of drop
   packets any time that the queue is not full.  This is a worst-case
   scenario for ECN+ and its variants.  For the default implementation
   of RED in the ns-2 simulator, when the average queue size exceeds a
   configured threshold, the router drops all arriving packets.  For
   scenarios with this RED mechanism, it is less likely that ECN+ or one
   of its variants would increase the average queue size above the
   configured threshold.

   The usefulness of ECN+: The first thing to observe is that for all of
   the simulations, the use of ECN+ or ECN+/Wait significantly increases
   the number of packets marked.  In contrast, the use of ECN+/TryOnce
   significantly increases the number of packets marked in the
   simulations with moderate congestion, and gives a more moderate
   increase in the number of packets marked for the simulations with
   higher levels of congestion.  However, the cumulative distribution
   function (CDF) in Table 2 shows that ECN+, ECN+/Wait, and
   ECN+/TryOnce all improve response times for all of the simulations,
   with moderate or with larger levels of congestion.

   Little increase in congestion, sometimes: The second thing to observe
   is that for the simulations with low or moderate levels of congestion
   (that is, with packet drop rates less than 10%), the use of ECN+,
   ECN+/Wait, and ECN+/TryOnce all decrease the aggregate packet drop
   rate relative to the simulations with ECN.  This makes sense, since
   with low or moderate levels of congestion, ECN+ allows SYN/ACK
   packets to be marked instead of dropped, and the use of ECN+ doesn't
   add to the aggregate congestion.  However, for the simulations with
   packet drop rates of 15% or higher with ECN, the use of ECN+ or
   ECN+/Wait increases the aggregate packet drop rate, sometimes even
   doubling it.

   Comparing ECN+, ECN+/Wait, and ECN+/TryOnce: The aggregate packet
   drop rate is generally higher with ECN+/Wait than with ECN+.  Thus,
   there is no congestion-related reason to prefer ECN+/Wait over ECN+.
   In contrast, the aggregate packet drop rate with ECN+/TryOnce is
   often significantly lower than the aggregate packet drop rate with
   either ECN, ECN+, or ECN+/Wait.



<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


      Target Load = 95%:
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped    20,516      11,226      11,735        16,755`
      Marked     30,586      37,741      37,425        40,764
      Loss rate   1.41%       0.78%       0.81%         1.02%
      Throughput   81%          81%         81%           81%

      Target Load = 110%:
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped    165,566     106,083     147,180       208,422
      Marked     179,735     281,306     308,473       235,483
      Loss rate    9.01%       6.12%       8.02%         6.89%
      Throughput     92%         92%         92%           94%

      Target Load = 125%:
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped    600,628    1,746,768   2,176,530      625,552
      Marked     418,433    1,166,450   1,164,932      439,847
      Loss rate   25.45%       51.73%      56.87%       18.31%
      Throughput     94%          98%         97%          95%

      Target Load =  150%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped  1,449,945  1,565,0517  1,563,0801     1,351,637
      Marked     669,840     583,378     591,315       684,715
      Loss rate    46.7%       59.0%       59.0%         32.7%
      Throughput     88%         94%         94%           92%

   Table 1:  Simulations with an average flow size of 3 Kbytes, a 100
             Mbps link, RED in packet mode, queue in packets

















<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


      Target Load = 95%:
      TIME:    10  100  200  300  400  500 1000 2000 3000 4000 5000
             ------------------------------------------------------
      ECN:   0.00 0.07 0.26 0.51 0.82 0.96 0.97 0.97 0.97 1.00 1.00
      ECN+:  0.00 0.07 0.27 0.53 0.85 0.99 1.00 1.00 1.00 1.00 1.00
      Wait:  0.00 0.07 0.26 0.51 0.83 0.97 1.00 1.00 1.00 1.00 1.00
      Once:  0.00 0.07 0.24 0.49 0.83 0.97 1.00 1.00 1.00 1.00 1.00

      Target Load = 110%:
      TIME:    10  100  200  300  400  500 1000 2000 3000 4000 5000
             ------------------------------------------------------
      ECN:   0.00 0.05 0.19 0.41 0.67 0.79 0.80 0.80 0.80 0.96 0.96
      ECN+:  0.00 0.07 0.22 0.48 0.81 0.96 1.00 1.00 1.00 1.00 1.00
      Wait:  0.00 0.05 0.18 0.38 0.64 0.77 0.95 1.00 1.00 1.00 1.00
      Once:  0.00 0.06 0.19 0.42 0.70 0.86 0.95 0.96 0.96 0.99 0.99

      Target Load = 125%:
      TIME:    10  100  200  300  400  500 1000 2000 3000 4000 5000
             ------------------------------------------------------
      ECN:   0.00 0.04 0.13 0.27 0.46 0.56 0.58 0.59 0.59 0.82 0.82
      ECN+:  0.00 0.06 0.18 0.33 0.58 0.76 0.97 0.99 0.99 1.00 1.00
      Wait:  0.00 0.01 0.06 0.13 0.21 0.27 0.68 0.98 0.99 1.00 1.00
      Once:  0.00 0.05 0.16 0.34 0.58 0.73 0.85 0.87 0.87 0.95 0.96

      Target Load = 150%:
      TIME:    10  100  200  300  400  500 1000 2000 3000 4000 5000
             ------------------------------------------------------
      ECN:   0.00 0.03 0.08 0.18 0.31 0.39 0.42 0.42 0.43 0.68 0.68
      ECN+:  0.00 0.06 0.18 0.39 0.67 0.81 0.83 0.84 0.84 0.93 0.93
      Wait:  0.00 0.06 0.18 0.39 0.67 0.81 0.83 0.84 0.84 0.93 0.94
      Once:  0.00 0.04 0.13 0.27 0.46 0.59 0.72 0.75 0.75 0.88 0.88

   Table 2:  The cumulative distribution function (CDF) for transfer
             times, for simulations with an average flow size of 3
             Kbytes, a 100 Mbps link, RED in packet mode, queue in
             packets  (the graphs are available from
             "<a href="http://www.icir.org/floyd/ecn-syn/">http://www.icir.org/floyd/ecn-syn/</a>")














<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


      Target Load =  95%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped      8,448       6,362       7,740      14,107
      Marked       9,891      16,787      17,456      16,132
      Loss rate     5.5%        4.3%        5.0%        5.0%
      Throughput     78%         78%         78%         81%

      Target Load =  110%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped     31,284      29,773      49,297      45,277
      Marked      28,429      54,729      60,383      34,622
      Loss rate    15.3%       15.2%       21.9%       13.6%
      Throughput     97%         96%         96%         94%

      Target Load =  125%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped     61,433     176,682     214,096      75,612
      Marked      44,408     119,728     117,301      49,442
      Loss rate    25.4%       51.9%       56.0%       22.3%
      Throughput     97%         98%         98%         96%

      Target Load =  150%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped    130,007     251,856     326,845     133,603
      Marked      63,066     146,757     147,239      66,444
      Loss rate    42.5%       61.3%       67.3%       31.7%
      Throughput     93%         99%         99%         94%

   Table 3:  Simulations with an average flow size of 3 Kbytes, a 10
             Mbps link, RED in packet mode, queue in packets

















<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


      Target Load = 95%:
      TIME:    10  100  200  300  400  500 1000 2000 3000 4000 5000
             ------------------------------------------------------
      ECN:   0.00 0.05 0.18 0.42 0.70 0.86 0.88 0.88 0.88 0.98 0.98
      ECN+:  0.00 0.06 0.20 0.45 0.78 0.96 1.00 1.00 1.00 1.00 1.00
      Wait:  0.00 0.05 0.18 0.40 0.68 0.84 0.96 1.00 1.00 1.00 1.00
      Once:  0.00 0.05 0.18 0.40 0.71 0.88 0.96 0.97 0.97 0.99 0.99

      Target Load = 110%:
      TIME:    10  100  200  300  400  500 1000 2000 3000 4000 5000
             ------------------------------------------------------
      ECN:   0.00 0.03 0.13 0.29 0.52 0.66 0.69 0.69 0.69 0.91 0.91
      ECN+:  0.00 0.05 0.17 0.36 0.66 0.88 0.98 0.99 1.00 1.00 1.00
      Wait:  0.00 0.02 0.08 0.20 0.35 0.47 0.76 0.98 1.00 1.00 1.00
      Once:  0.00 0.05 0.15 0.32 0.58 0.75 0.88 0.90 0.90 0.97 0.97


      Target Load = 125%:
      TIME:    10  100  200  300  400  500 1000 2000 3000 4000 5000
             ------------------------------------------------------
      ECN:   0.00 0.03 0.10 0.22 0.40 0.52 0.56 0.56 0.57 0.82 0.82
      ECN+:  0.00 0.03 0.14 0.27 0.49 0.70 0.96 0.99 0.99 0.99 1.00
      Wait:  0.00 0.00 0.03 0.07 0.12 0.18 0.50 0.94 0.99 0.99 1.00
      Once:  0.00 0.04 0.13 0.28 0.51 0.66 0.81 0.84 0.84 0.94 0.94

      Target Load = 150%:
      TIME:    10  100  200  300  400  500 1000 2000 3000 4000 5000
             ------------------------------------------------------
      ECN:   0.00 0.02 0.07 0.15 0.28 0.38 0.42 0.42 0.43 0.67 0.68
      ECN+:  0.00 0.00 0.00 0.00 0.01 0.05 0.68 0.83 0.95 0.97 0.98
      Wait:  0.00 0.00 0.00 0.00 0.00 0.00 0.10 0.62 0.83 0.93 0.97
      Once:  0.00 0.03 0.11 0.24 0.42 0.56 0.71 0.75 0.75 0.88 0.88

   Table 4:  The cumulative distribution function (CDF) for transfer
             times, for simulations with an average flow size of 3
             Kbytes, a 10 Mbps link, RED in packet mode, queue in
             packets  (the graphs are available from
             "<a href="http://www.icir.org/floyd/ecn-syn/">http://www.icir.org/floyd/ecn-syn/</a>")

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.2.%20%20Simulations%20with%20RED%20in%20Byte%20Mode"></a><a class="selflink" href="#appendix-A.2" name="appendix-A.2">A.2</a>.  Simulations with RED in Byte Mode</span>

   Table 5 below shows simulations with RED in byte mode and the queue
   in bytes.  There is no significant increase in aggregate congestion
   with the use of ECN+, ECN+/Wait, or ECN+/TryOnce.

   However, unlike the simulations with RED in packet mode, the
   simulations with RED in byte mode show little benefit from the use of
   ECN+ or ECN+/Wait, in that the packet marking rate with ECN+ or



<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   ECN+/Wait is not much different than the packet marking rate with
   Standard ECN.  This is because with RED in byte mode, small packets
   like SYN/ACK packets are rarely dropped or marked -- that is, there
   is no drawback from the use of ECN+ in these scenarios, but not much
   need for ECN+ either, in a scenario where small packets are unlikely
   to be dropped or marked.

      Target Load = 95%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped        766         446         427             408
      Marked      32,683      34,289      33,412          31,892
      Loss rate    0.05%       0.03%       0.03%           0.03%
      Throughput     81%         81%         81%             81%

      Target Load = 110%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped      2,496       2,110       1,733           2,020
      Marked     220,573     258,696     230,955         214,604
      Loss rate    0.15%       0.13%       0.11%           0.11%
      Throughput     92%         91%         92%             92%

      Target Load = 125%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped     20,032      13,555      13,979          16,918
      Marked     725,165     726,992     726,823         615,235
      Loss rate    1.11%       0.76%       0.78%           0.66%
      Throughput     95%         95%         95%             96%

      Target Load = 150%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped    484,251     483,847     507,727         600,737
      Marked     865,905     872,254     873,317         818,451
      Loss rate   19.09%      19.13%      19.71%          12.66%
      Throughput     99%         98%         99%             99%

   Table 5:  Simulations with an average flow size of 3 Kbytes, a 100
             Mbps link, RED in byte mode, queue in bytes










<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


      Target Load =  95%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped        142          77         103          99
      Marked      11,694      11,387      11,604      12,129
      Loss rate     0.1%        0.1%        0.1%        0.1%
      Throughput     78%         78%         78%         78%

      Target Load =  110%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped        338         210         247         274
      Marked      41,676      40,412      44,173      36,265
      Loss rate     0.2%        0.1%        0.1%        0.1%
      Throughput     94%         94%         94%         96%

      Target Load =  125%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped      1,559         951         978       1,723
      Marked      74,933      75,499      75,481      59,670
      Loss rate     0.8%        0.5%        0.5%        0.6%
      Throughput     99%         99%         99%         96%

      Target Load =  150%
                    ECN        ECN+     ECN+/Wait    ECN+/TryOnce
                 -------     -------     -------      ----------
      Dropped      2,374       1,528       1,515       4,848
      Marked      85,739      86,428      86,144      81,350
      Loss rate     1.2%        0.8%        0.8%        1.4%
      Throughput     99%         98%         98%         98%

   Table 6:  Simulations with an average flow size of 3 Kbytes, a 10
             Mbps link, RED in byte mode, queue in bytes

















<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20B.%20%20Issues%20of%20Incremental%20Deployment"></a><a class="selflink" href="#appendix-B" name="appendix-B">Appendix B</a>.  Issues of Incremental Deployment</span>

   In order for TCP node B to send a SYN/ACK packet as ECN-Capable, node
   B must have received an ECN-setup SYN packet from node A.  However,
   it is possible that node A supports ECN, but either ignores the CE
   codepoint on received SYN/ACK packets, or ignores SYN/ACK packets
   with the ECT or CE codepoint set.  If the TCP initiator ignores the
   CE codepoint on received SYN/ACK packets, this would mean that the
   TCP responder would not respond to this congestion indication.
   However, this seems to us an acceptable cost to pay in the
   incremental deployment of ECN-Capability for TCP's SYN/ACK packets.
   It would mean that the responder would not reduce the initial
   congestion window from two, three, or four segments down to one
   segment, as it should, and would not sent a non-ECN-Capable SYN/ACK
   packet to complete the SYN exchange.  However, the TCP end nodes
   would still respond correctly to any subsequent CE indications on
   data packets later on in the connection.

   Figure 4 shows an interchange with the SYN/ACK packet ECN-marked, but
   with the ECN mark ignored by the TCP originator.

      ---------------------------------------------------------------
         TCP Node A             Router                  TCP Node B
         (initiator)                                   (responder)
         ----------             ------                  ----------

         ECN-setup SYN packet ---&gt;
                                         ECN-setup SYN packet ---&gt;

                                       &lt;--- ECN-setup SYN/ACK, ECT
                            &lt;--- Sets CE on SYN/ACK
         &lt;--- ECN-setup SYN/ACK, CE

         Data/ACK, No ECN-Echo ---&gt;
                                                    Data/ACK ---&gt;
                                   &lt;--- Data (up to four packets)
      ---------------------------------------------------------------

            Figure 4: SYN exchange with the SYN/ACK packet marked,
              but with the ECN mark ignored by the TCP initiator

   Thus, to be explicit, when a TCP connection includes an initiator
   that supports ECN but *does not* support ECN-Capability for SYN/ACK
   packets, in combination with a responder that *does* support ECN-
   Capability for SYN/ACK packets, it is possible that the ECN-Capable
   SYN/ACK packets will be marked rather than dropped in the network,
   and that the responder will not learn about the ECN mark on the
   SYN/ACK packet.  This would not be a problem if most packets from the



<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   responder supporting ECN for SYN/ACK packets were in long-lived TCP
   connections, but it would be more problematic if most of the packets
   were from TCP connections consisting of four data packets, and the
   TCP responder for these connections was ready to send its data
   packets immediately after the SYN/ACK exchange.  Of course, with
   *severe* congestion, the SYN/ACK packets would likely be dropped
   rather than ECN-marked at the congested router, preventing the TCP
   responder from adding to the congestion by sending its initial window
   of four data packets.

   It is also possible that in some older TCP implementation, the
   initiator would ignore arriving SYN/ACK packets that had the ECT or
   CE codepoint set.  This would result in a delay in connection setup
   for that TCP connection, with the initiator re-sending the SYN packet
   after a retransmission timeout.  We are not aware of any TCP
   implementations with this behavior.

   One possibility for coping with problems of backwards compatibility
   would be for TCP initiators to use a TCP flag that means "I
   understand ECN-Capable SYN/ACK packets".  If this document were to
   standardize the use of such an "ECN-SYN" flag, then the TCP responder
   would only send a SYN/ACK packet as ECN-Capable if the incoming SYN
   packet had the "ECN-SYN" flag set.  An ECN-SYN flag would prevent the
   backwards compatibility problems described in the paragraphs above.

   One drawback to the use of an ECN-SYN flag is that it would use one
   of the four remaining reserved bits in the TCP header for a transient
   backwards compatibility problem.  This drawback is limited by the
   fact that the "ECN-SYN" flag would be defined only for use with ECN-
   setup SYN packets;  that bit in the TCP header could be defined to
   have other uses for other kinds of TCP packets.

   Factors in deciding not to use an ECN-SYN flag include the following:

   (1) The limited installed base: At the time that this document was
       written, the TCP implementations in Microsoft Vista and Mac OS X
       included ECN, but ECN was not enabled by default [<a href="#ref-SBT07" title='"Implementation Report on Experiences with Various TCP RFCs"'>SBT07</a>].  Thus,
       there was not a large deployed base of ECN-Capable TCP
       implementations.  This limits the scope of any backwards
       compatibility problems.

   (2) Limits to the scope of the problem: The backwards compatibility
       problem would not be serious enough to cause congestion collapse;
       with severe congestion, the buffer at the congested router will
       overflow, and the congested router will drop rather than ECN-mark






<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


       arriving SYN packets.  Some active queue management mechanisms
       might switch from packet-marking to packet-dropping in times of
       high congestion before buffer overflow, as recommended in <a href="rfc3168.html#section-19.1">Section</a>
       <a href="rfc3168.html#section-19.1">19.1 of RFC 3168</a> [<a href="rfc3168.html" title='"The Addition of Explicit Congestion Notification (ECN) to IP"'>RFC3168</a>].  This helps to prevent congestion
       collapse problems with the use of ECN.

   (3) Detection of and response to backwards-compatibility problems: A
       TCP responder such as a web server can't differentiate between a
       SYN/ACK packet that is not ECN-marked in the network, and a
       SYN/ACK packet that is ECN-marked, but where the ECN mark is
       ignored by the TCP initiator.  However, a TCP responder *can*
       detect if a SYN/ACK packet is sent as ECN-capable and not
       reported as ECN-marked, but data packets are dropped or marked
       from the initial window of data.  We will call this scenario
       "initial-window-congestion".  If a web server frequently
       experienced initial-window-congestion (without SYN/ACK
       congestion), then the web server *might* be experiencing
       backwards compatibility problems with ECN-Capable SYN/ACK
       packets, and could respond by not sending SYN/ACK packets as
       ECN-Capable.

Normative References

   [<a id="ref-RFC793" name="ref-RFC793">RFC793</a>]   Postel, J., "Transmission Control Protocol", STD 7, <a href="rfc793.html">RFC</a>
              <a href="rfc793.html">793</a>, September 1981.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2988" name="ref-RFC2988">RFC2988</a>]  Paxson, V. and M. Allman, "Computing TCP's Retransmission
              Timer", <a href="rfc2988.html">RFC 2988</a>, November 2000.

   [<a id="ref-RFC3168" name="ref-RFC3168">RFC3168</a>]  Ramakrishnan, K., Floyd, S., and D. Black, "The Addition
              of Explicit Congestion Notification (ECN) to IP", <a href="rfc3168.html">RFC</a>
              <a href="rfc3168.html">3168</a>, September 2001.

Informative References

   [ECN+]     A. Kuzmanovic, The Power of Explicit Congestion
              Notification, SIGCOMM 2005.

   [<a id="ref-ECN-SYN" name="ref-ECN-SYN">ECN-SYN</a>]  ECN-SYN web page with simulation scripts,
              <a href="http://www.icir.org/floyd/ecn-syn">http://www.icir.org/floyd/ecn-syn</a>.








<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   [<a id="ref-F07" name="ref-F07">F07</a>]      S. Floyd, "[BEHAVE] Response of firewalls and middleboxes
              to TCP SYN packets that are ECN-Capable?", August 2, 2007,
              email to the BEHAVE mailing list, <a href="http://www1.ietf.org/mail-archive/web/behave/current/msg02644.html">http://www1.ietf.org/</a>
              <a href="http://www1.ietf.org/mail-archive/web/behave/current/msg02644.html">mail-archive/web/behave/current/msg02644.html</a>.

   [<a id="ref-Kelson00" name="ref-Kelson00">Kelson00</a>] Dax Kelson, "8% of the Internet unreachable!", September
              10, 2000, email to the Linux kernel mailing list,
              <a href="http://lkml.indiana.edu/hypermail/linux/kernel/0009.1/0329.html">http://lkml.indiana.edu/hypermail/linux/kernel/</a>
              <a href="http://lkml.indiana.edu/hypermail/linux/kernel/0009.1/0329.html">0009.1/0329.html</a>.

   [<a id="ref-L08" name="ref-L08">L08</a>]      A. Landley, "Re: [tcpm] I-D Action:<a href="https://tools.ietf.org/html/draft-ietf-tcpm-ecnsyn-06.txt">draft-ietf-tcpm-</a>
              <a href="https://tools.ietf.org/html/draft-ietf-tcpm-ecnsyn-06.txt">ecnsyn-06.txt</a>", August 24, 2008, email to the tcpm mailing
              list, <a href="http://www.ietf.org/mail-archive/web/tcpm/current/msg03988.html">http://www.ietf.org/</a>
              <a href="http://www.ietf.org/mail-archive/web/tcpm/current/msg03988.html">mail-archive/web/tcpm/current/msg03988.html</a>.

   [<a id="ref-MAF05" name="ref-MAF05">MAF05</a>]    A. Medina, M. Allman, and S. Floyd, "Measuring the
              Evolution of Transport Protocols in the Internet", ACM
              CCR, April 2005.

   [<a id="ref-PI" name="ref-PI">PI</a>]       C. Hollot, V. Misra, W. Gong, and D. Towsley, "On
              Designing Improved Controllers for AQM Routers Supporting
              TCP Flows", April 1998.

   [<a id="ref-RED" name="ref-RED">RED</a>]      Floyd, S., and Jacobson, V., "Random Early Detection
              gateways for Congestion Avoidance", IEEE/ACM Transactions
              on Networking, V.1 N.4, August 1993.

   [<a id="ref-REM" name="ref-REM">REM</a>]      S. Athuraliya, V. H. Li, S. H. Low and Q. Yin, "REM:
              Active Queue Management", IEEE Network, May 2001.

   [<a id="ref-RFC2309" name="ref-RFC2309">RFC2309</a>]  Braden, B., Clark, D., Crowcroft, J., Davie, B., Deering,
              S., Estrin, D., Floyd, S., Jacobson, V., Minshall, G.,
              Partridge, C., Peterson, L., Ramakrishnan, K., Shenker,
              S., Wroclawski, J., and L. Zhang, "Recommendations on
              Queue Management and Congestion Avoidance in the
              Internet", <a href="rfc2309.html">RFC 2309</a>, April 1998.

   [<a id="ref-RFC2581" name="ref-RFC2581">RFC2581</a>]  Allman, M., Paxson, V., and W. Stevens, "TCP Congestion
              Control", <a href="rfc2581.html">RFC 2581</a>, April 1999.

   [<a id="ref-RFC3042" name="ref-RFC3042">RFC3042</a>]  Allman, M., Balakrishnan, H., and S. Floyd, "Enhancing
              TCP's Loss Recovery Using Limited Transmit", <a href="rfc3042.html">RFC 3042</a>,
              January 2001.

   [<a id="ref-RFC3360" name="ref-RFC3360">RFC3360</a>]  Floyd, S., "Inappropriate TCP Resets Considered Harmful",
              <a href="https://tools.ietf.org/html/bcp60">BCP 60</a>, <a href="rfc3360.html">RFC 3360</a>, August 2002.





<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


   [<a id="ref-RFC3390" name="ref-RFC3390">RFC3390</a>]  Allman, M., Floyd, S., and C. Partridge, "Increasing TCP's
              Initial Window", <a href="rfc3390.html">RFC 3390</a>, October 2002.

   [<a id="ref-RFC4987" name="ref-RFC4987">RFC4987</a>]  Eddy, W., "TCP SYN Flooding Attacks and Common
              Mitigations", <a href="rfc4987.html">RFC 4987</a>, August 2007.

   [<a id="ref-SCJO01" name="ref-SCJO01">SCJO01</a>]   F. Smith, F. Campos, K. Jeffay, and D. Ott, "What TCP/IP
              Protocol Headers Can Tell us about the Web", SIGMETRICS,
              June 2001.

   [<a id="ref-SYN-COOK" name="ref-SYN-COOK">SYN-COOK</a>] Dan J. Bernstein, SYN cookies, 1997, see also
              &lt;<a href="http://cr.yp.to/syncookies.html">http://cr.yp.to/syncookies.html</a>&gt;.

   [<a id="ref-SBT07" name="ref-SBT07">SBT07</a>]    M. Sridharan, D. Bansal, and D. Thaler, "Implementation
              Report on Experiences with Various TCP RFCs", Presentation
              in the TSVAREA, IETF 68, March 2007.
              <a href="http://www3.ietf.org/proceedings/07mar/slides/tsvarea-3/sld6.htm">http://www3.ietf.org/proceedings/07mar/slides/tsvarea-</a>
              <a href="http://www3.ietf.org/proceedings/07mar/slides/tsvarea-3/sld6.htm">3/sld6.htm</a>.

   [<a id="ref-Tools" name="ref-Tools">Tools</a>]    S. Floyd, Ed., and E. Kohler, Ed., "Tools for the
              Evaluation of Simulation and Testbed Scenarios", Work in
              Progress, February 2008.





























<span class="grey">Kuzmanovic, et al.            Experimental                     [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc5562.html">RFC 5562</a>                ECN and SYN/ACK Packets                June 2009</span>


Authors' Addresses

   Aleksandar Kuzmanovic
   Northwestern University

   Phone: +1 (847) 467-5519
   EMail: akuzma@northwestern.edu
   URL: <a href="http://cs.northwestern.edu/~akuzma">http://cs.northwestern.edu/~akuzma</a>


   Amit Mondal
   Northwestern University

   Phone: +1 (847) 467-6455
   EMail: a-mondal@northwestern.edu
   URL: <a href="http://www.cs.northwestern.edu/~akm175/">http://www.cs.northwestern.edu/~akm175/</a>


   Sally Floyd
   ICIR (ICSI Center for Internet Research)

   Phone: +1 (510) 666-2989
   EMail: floyd@icir.org
   URL: <a href="http://www.icir.org/floyd/">http://www.icir.org/floyd/</a>


   K. K. Ramakrishnan
   AT&amp;T Labs Research
   Rm. A161
   180 Park Ave.
   Florham Park, NJ 07932

   Phone: +1 (973) 360-8764
   EMail: kkrama@research.att.com
   URL: <a href="http://www.research.att.com/info/kkrama">http://www.research.att.com/info/kkrama</a>
















Kuzmanovic, et al.            Experimental                     [Page 33]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc5562 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:34 GMT --></html>