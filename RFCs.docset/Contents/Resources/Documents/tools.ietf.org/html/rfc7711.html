<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc7711 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:19 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-miller-posh" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:7711" name="DC.Identifier"/>
<meta content="November, 2015" name="DC.Date.Issued"/>
<meta content="Miller, Matthew" name="DC.Creator"/>
<meta content="Saint-Andre, Peter" name="DC.Creator"/>
<meta content="Experience has shown that it is difficult to deploy proper PKIX
certificates for Transport Layer Security (TLS) in multi-tenanted
environments. As a result, domains hosted in such environments often
deploy applications using certificates that identify the hosting
service, not the hosted domain. Such deployments force end users and
peer services to accept a certificate with an improper identifier,
resulting in degraded security. This document defines methods that
make it easier to deploy certificates for proper server identity
checking in non-HTTP application protocols. Although these methods
were developed for use in the Extensible Messaging and Presence
Protocol (XMPP) as a Domain Name Association (DNA) prooftype, they
might also be usable in other non-HTTP application protocols." name="DC.Description.Abstract"/>
<meta content="PKIX over Secure HTTP (POSH)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 7711 - PKIX over Secure HTTP (POSH)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7711.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7711" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-xmpp-posh" title="draft-ietf-xmpp-posh">draft-ietf-xmpp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7711" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7711" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7711" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                         M. Miller
Request for Comments: 7711                           Cisco Systems, Inc.
Category: Standards Track                                 P. Saint-Andre
ISSN: 2070-1721                                                     &amp;yet
                                                           November 2015


                      <span class="h1">PKIX over Secure HTTP (POSH)</span>

Abstract

   Experience has shown that it is difficult to deploy proper PKIX
   certificates for Transport Layer Security (TLS) in multi-tenanted
   environments.  As a result, domains hosted in such environments often
   deploy applications using certificates that identify the hosting
   service, not the hosted domain.  Such deployments force end users and
   peer services to accept a certificate with an improper identifier,
   resulting in degraded security.  This document defines methods that
   make it easier to deploy certificates for proper server identity
   checking in non-HTTP application protocols.  Although these methods
   were developed for use in the Extensible Messaging and Presence
   Protocol (XMPP) as a Domain Name Association (DNA) prooftype, they
   might also be usable in other non-HTTP application protocols.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7711">http://www.rfc-editor.org/info/rfc7711</a>.














<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


Copyright Notice

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Obtaining Verification Material .................................<a href="#page-5">5</a>
      <a href="#section-3.1">3.1</a>. Source Domain Possesses PKIX Certificate Information .......<a href="#page-6">6</a>
      <a href="#section-3.2">3.2</a>. Source Domain References PKIX Certificate ..................<a href="#page-8">8</a>
      <a href="#section-3.3">3.3</a>. Performing Verification ....................................<a href="#page-9">9</a>
   <a href="#section-4">4</a>. Secure Delegation ...............................................<a href="#page-9">9</a>
   <a href="#section-5">5</a>. Order of Operations ............................................<a href="#page-10">10</a>
   <a href="#section-6">6</a>. Caching Results ................................................<a href="#page-11">11</a>
   <a href="#section-7">7</a>. Guidance for Server Operators ..................................<a href="#page-12">12</a>
   <a href="#section-8">8</a>. Guidance for Protocol Authors ..................................<a href="#page-12">12</a>
   <a href="#section-9">9</a>. IANA Considerations ............................................<a href="#page-13">13</a>
      <a href="#section-9.1">9.1</a>. Well-Known URI ............................................<a href="#page-13">13</a>
      <a href="#section-9.2">9.2</a>. POSH Service Names ........................................<a href="#page-13">13</a>
   <a href="#section-10">10</a>. Security Considerations .......................................<a href="#page-14">14</a>
   <a href="#section-11">11</a>. References ....................................................<a href="#page-15">15</a>
      <a href="#section-11.1">11.1</a>. Normative References .....................................<a href="#page-15">15</a>
      <a href="#section-11.2">11.2</a>. Informative References ...................................<a href="#page-16">16</a>
   Acknowledgements ..................................................<a href="#page-18">18</a>
   Authors' Addresses ................................................<a href="#page-18">18</a>














<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   We begin with a thought experiment.

   Imagine that you work on the operations team of a hosting company
   that provides instances of the hypothetical "Secure Protocol for
   Internet Content Exchange" (SPICE) service for ten thousand different
   customer organizations.  Each customer wants their instance to be
   identified by the customer's domain name (e.g., bar.example.com), not
   the hosting company's domain name (e.g., hosting.example.net).

   In order to properly secure each customer's SPICE instance via
   Transport Layer Security (TLS) [<a href="rfc5246.html" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>], you need to obtain and
   deploy PKIX certificates [<a href="rfc5280.html" title='"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"'>RFC5280</a>] containing identifiers such as
   bar.example.com, as explained in the "CertID" specification
   [<a href="rfc6125.html" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>].  Unfortunately, you can't obtain and deploy such
   certificates because:

   o  Certification authorities won't issue such certificates to you
      because you work for the hosting company, not the customer
      organization.

   o  Customers won't obtain such certificates and then give them (plus
      the associated private keys) to you because their legal department
      is worried about liability.

   o  You don't want to install such certificates (plus the associated
      private keys) on your servers because your legal department is
      worried about liability, too.

   o  Even if your legal department is happy, this still means managing
      one certificate for each customer across the infrastructure,
      contributing to a large administrative load.

   Given your inability to obtain and deploy public keys / certificates
   containing the right identifiers, your back-up approach has always
   been to use a certificate containing hosting.example.net as the
   identifier.  However, more and more customers and end users are
   complaining about warning messages in user agents and the inherent
   security issues involved with taking a "leap of faith" to accept the
   identity mismatch between the source domain (bar.example.com) and the
   delegated domain (hosting.example.net) [<a href="rfc6125.html" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>].

   This situation is both insecure and unsustainable.  You have
   investigated the possibility of using DNS Security [<a href="rfc4033.html" title='"DNS Security Introduction and Requirements"'>RFC4033</a>] and
   DNS-Based Authentication of Named Entities (DANE) [<a href="rfc6698.html" title='"The DNS-Based Authentication of Named Entities (DANE) Transport Layer Security (TLS) Protocol: TLSA"'>RFC6698</a>] to solve
   the problem.  However, your customers and your operations team have
   told you that it will be several years before they will be able to



<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   deploy DNSSEC and DANE for all of your customers (because of tooling
   updates, slow deployment of DNSSEC at some top-level domains, etc.).
   The product managers in your company are pushing you to find a method
   that can be deployed more quickly to overcome the lack of proper
   server identity checking for your hosted customers.

   One possible approach that your team has investigated is to ask each
   customer to provide the public key / certificate for its SPICE
   service at a special HTTPS URI on their website
   ("https://bar.example.com/.well-known/posh/spice.json" is one
   possibility).  This could be a public key that you generate for the
   customer, but because the customer hosts it via HTTPS, any user agent
   can find that public key and check it against the public key you
   provide during TLS negotiation for the SPICE service (as one added
   benefit, the customer never needs to hand you a private key).
   Alternatively, the customer can redirect requests for that special
   HTTPS URI to an HTTPS URI at your own website, thus making it
   explicit that they have delegated the SPICE service to you.

   The approach sketched out above, called POSH ("PKIX over Secure
   HTTP"), is explained in the remainder of this document.  Although
   this approach was developed for use in the Extensible Messaging and
   Presence Protocol (XMPP) as a prooftype for Domain Name Associations
   (DNA) [<a href="rfc7712.html" title='"Domain Name Associations (DNA) in the Extensible Messaging and Presence Protocol (XMPP)"'>RFC7712</a>], it might be usable by any non-HTTP application
   protocol.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   This document inherits security terminology from [<a href="rfc5280.html" title='"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"'>RFC5280</a>].  The
   terms "source domain", "delegated domain", "derived domain", and
   "reference identifier" are used as defined in the "CertID"
   specification [<a href="rfc6125.html" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>].

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   Additionally, this document uses the following terms:

   POSH client:  A client that uses the application service and that
      uses POSH to obtain material for verifying the service's identity.

   POSH server:  A server that hosts the application service and that
      uses POSH to provide material for verifying its identity.






<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Obtaining%20Verification%20Material"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Obtaining Verification Material</span>

   Server identity checking (see [<a href="rfc6125.html" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>]) involves three different
   aspects:

   1.  A proof of the POSH server's identity (in PKIX, this takes the
       form of a PKIX end-entity certificate [<a href="rfc5280.html" title='"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"'>RFC5280</a>]).

   2.  Rules for checking the certificate (which vary by application
       protocol, although [<a href="rfc6125.html" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>] attempts to harmonize those rules).

   3.  The material that a POSH client uses to verify the POSH server's
       identity or check the POSH server's proof (in PKIX, this takes
       the form of chaining the end-entity certificate back to a trusted
       root and performing all validity checks as described in
       [<a href="rfc5280.html" title='"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"'>RFC5280</a>], [<a href="rfc6125.html" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>], and the relevant application protocol
       specification).

   When POSH is used, the first two aspects remain the same: the POSH
   server proves its identity by presenting a PKIX certificate
   [<a href="rfc5280.html" title='"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"'>RFC5280</a>], and the certificate is checked according to the rules
   defined in the appropriate application protocol specification (such
   as [<a href="rfc6120.html" title='"Extensible Messaging and Presence Protocol (XMPP): Core"'>RFC6120</a>] for XMPP).  However, the POSH client obtains the
   material it will use to verify the server's proof by retrieving a
   JSON document [<a href="rfc7159.html" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>] containing hashes of the PKIX certificate
   over HTTPS ([<a href="rfc7230.html" title='"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"'>RFC7230</a>] and [<a href="rfc2818.html" title='"HTTP Over TLS"'>RFC2818</a>]) from a well-known URI [<a href="rfc5785.html" title='"Defining Well-Known Uniform Resource Identifiers (URIs)"'>RFC5785</a>]
   at the source domain.  POSH servers MUST use HTTPS.  This means that
   the POSH client MUST verify the certificate of the HTTPS service at
   the source domain in order to securely "bootstrap" into the use of
   POSH; specifically, the rules of [<a href="rfc2818.html" title='"HTTP Over TLS"'>RFC2818</a>] apply to this
   "bootstrapping" step to provide a secure basis for all subsequent
   POSH operations.

   A PKIX certificate is retrieved over secure HTTP in the
   following way:

   1.  The POSH client performs an HTTPS GET request at the source
       domain to the path "/.well-known/posh/{servicedesc}.json".  The
       value of "{servicedesc}" is application-specific; see <a href="#section-8">Section 8</a>
       of this document for more details.  For example, if the
       application protocol is the hypothetical SPICE service, then
       "{servicedesc}" could be "spice"; thus, if an application client
       were to use POSH to verify an application server for the source
       domain "bar.example.com", the HTTPS GET request would be as
       follows:

       GET /.well-known/posh/spice.json HTTP/1.1
       Host: bar.example.com



<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   2.  The source domain HTTPS server responds in one of three ways:

       *  If it possesses PKIX certificate information for the requested
          path, it responds as detailed in <a href="#section-3.1">Section 3.1</a>.

       *  If it has a reference to where the PKIX certificate
          information can be obtained, it responds as detailed in
          <a href="#section-3.2">Section 3.2</a>.

       *  If it does not have any PKIX certificate information or a
          reference to such information for the requested path, it
          responds with an HTTP 404 Not Found status code [<a href="rfc7231.html" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Source%20Domain%20Possesses%20PKIX%20Certificate%20Information"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Source Domain Possesses PKIX Certificate Information</span>

   If the source domain HTTPS server possesses the certificate
   information, it responds to the HTTPS GET request with a success
   status code and the message body set to a JSON document [<a href="rfc7159.html" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>];
   the document is a "fingerprints document", i.e., a JSON object with
   the following members:

   o  A "fingerprints" member whose value is a JSON array of fingerprint
      descriptors (the member MUST include at least one fingerprint
      descriptor).

   o  An "expires" member whose value is a JSON number specifying the
      number of seconds after which the POSH client ought to consider
      the keying material to be stale (further explained under
      <a href="#section-6">Section 6</a>).

   The JSON document returned MUST NOT contain a "url" member, as
   described in <a href="#section-3.2">Section 3.2</a>.

   Each included fingerprint descriptor is a JSON object, where each
   member name is the textual name of a hash function (as listed in
   [<a href="#ref-HASH-NAMES">HASH-NAMES</a>]) and its associated value is the base64-encoded
   fingerprint hash generated using the named hash function (where the
   encoding adheres to the definition in <a href="rfc4648.html#section-4">Section 4 of [RFC4648]</a> and
   where the padding bits are set to zero).

   The fingerprint hash for a given hash algorithm is generated by
   performing the named hash function over the DER encoding of the PKIX
   X.509 certificate.  (This implies that if the certificate expires or
   is revoked, the fingerprint value will be out of date.)







<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   As an example of the fingerprint format, the "sha-256" and "sha-512"
   fingerprints are generated by performing the SHA-256 and SHA-512 hash
   functions, respectively, over the DER encoding of the PKIX
   certificate, as illustrated below.  Note that for readability
   whitespace has been added to the content portion of the HTTP response
   shown below but is not reflected in the Content-Length.

   Example Fingerprints Response

   HTTP/1.1 200 OK
   Content-Type: application/json
   Content-Length: 195

   {
     "fingerprints": [
       {
         "sha-256": "4/mggdlVx8A3pvHAWW5sD+qJyMtUHgiRuPjVC48N0XQ=",
         "sha-512": "25N+1hB2Vo42l9lSGqw+n3BKFhDHsyork8ou+D9B43TXeJ
                     1J81mdQEDqm39oR/EHkPBDDG1y5+AG94Kec0xVqA=="
       }
     ],
     "expires": 604800
   }

   The "expires" value is a hint regarding the expiration of the keying
   material.  It MUST be a non-negative integer.  If the "expires"
   member has a value of 0 (zero), a POSH client MUST consider the
   verification material to be invalid.  See <a href="#section-6">Section 6</a> for how to
   reconcile this "expires" member with the reference's "expires"
   member.





















<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   To indicate alternate PKIX certificates (such as when an existing
   certificate will soon expire), the returned fingerprints member MAY
   contain multiple fingerprint descriptors.  The fingerprints SHOULD be
   ordered with the most relevant certificate first as determined by the
   application service operator (e.g., the renewed certificate),
   followed by the next most relevant certificate (e.g., the certificate
   soonest to expire).  Here is an example (note that whitespace is
   added for readability):

   {
     "fingerprints": [
       {
         "sha-256": "4/mggdlVx8A3pvHAWW5sD+qJyMtUHgiRuPjVC48N0XQ",
         "sha-512": "25N+1hB2Vo42l9lSGqw+n3BKFhDHsyork8ou+D9B43TXe
                     J1J81mdQEDqm39oR/EHkPBDDG1y5+AG94Kec0xVqA=="
       },
       {
         "sha-256": "otyLADSKjRDjVpj8X7/hmCAD5C7Qe+PedcmYV7cUncE=",
         "sha-512": "MbBD+ausTGJisEXKSynROWrMfHP2xvBnmI79Pr/KXnDyLN
                     +13Jof8/Uq9fj5HZG8Rk1E2fclcivpGdijUsvHRg=="
       }
     ],
     "expires": 806400
   }

   Matching on any of these fingerprints is acceptable.

   Rolling over from one hosting provider to another is best handled by
   updating the relevant SRV records, not primarily by updating the POSH
   documents themselves.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Source%20Domain%20References%20PKIX%20Certificate"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Source Domain References PKIX Certificate</span>

   If the source domain HTTPS server has a reference to the certificate
   information, it responds to the HTTPS GET request with a success
   status code and message body set to a JSON document.  The document is
   a "reference document", i.e., a JSON object with the following
   members:

   o  A "url" member whose value is a JSON string specifying the HTTPS
      URI where POSH clients can obtain the actual certificate
      information.  The URI can be a well-known POSH URI as described in
      <a href="#section-8">Section 8</a>, but it need not be.  (For historical reasons, the
      member name is "url", not "uri".)

   o  An "expires" member whose value is a JSON number specifying the
      number of seconds after which the POSH client ought to consider
      the delegation to be stale (further explained under <a href="#section-6">Section 6</a>).



<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   Example Reference Response

   HTTP/1.1 200 OK
   Content-Type: application/json
   Content-Length: 82

   {
     "url":"https://hosting.example.net/.well-known/posh/spice.json",
     "expires":86400
   }

   In order to process a reference response, the client performs an
   HTTPS GET request for the URI specified in the "url" member value.
   The HTTPS server for the URI to which the client has been referred
   responds to the request with a JSON document containing fingerprints
   as described in <a href="#section-3.1">Section 3.1</a>.  The document retrieved from the
   location specified by the "url" member MUST NOT itself be a reference
   document (i.e., containing a "url" member instead of a "fingerprints"
   member), in order to prevent circular delegations.

      Note: See <a href="#section-10">Section 10</a> for discussion about HTTPS redirects.

   The "expires" value is a hint regarding the expiration of the source
   domain's delegation of service to the delegated domain.  It MUST be a
   non-negative integer.  If the "expires" member has a value of 0
   (zero), a POSH client MUST consider the delegation invalid.  See
   <a href="#section-6">Section 6</a> for guidelines about reconciling this "expires" member with
   the "expires" member of the fingerprints document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20Performing%20Verification"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  Performing Verification</span>

   The POSH client compares the PKIX information presented by the POSH
   server against each fingerprint descriptor object in the POSH
   fingerprints document, until a match is found using the hash
   functions that the client supports, or until the collection of POSH
   verification material is exhausted.  If none of the fingerprint
   descriptor objects match the POSH server PKIX information, the POSH
   client SHOULD reject the connection (however, the POSH client might
   still accept the connection if other verification methods are
   successful, such as DANE [<a href="rfc6698.html" title='"The DNS-Based Authentication of Named Entities (DANE) Transport Layer Security (TLS) Protocol: TLSA"'>RFC6698</a>]).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Secure%20Delegation"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Secure Delegation</span>

   The delegation from the source domain to the delegated domain can be
   considered secure if the credentials offered by the POSH server match
   the verification material obtained by the client, regardless of how
   the material was obtained.




<span class="grey">Miller &amp; Saint-Andre         Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Order%20of%20Operations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Order of Operations</span>

   In order for the POSH client to perform verification of reference
   identifiers without potentially compromising data, POSH operations
   MUST be complete before any application-layer data is exchanged for
   the source domain.  In cases where the POSH client initiates an
   application-layer connection, the client SHOULD perform all POSH
   retrievals before initiating a connection (naturally, this is not
   possible in cases where the POSH client receives instead of initiates
   an application-layer connection).  For application protocols that use
   DNS SRV (including queries for TLSA records in concert with SRV
   records as described in [<a href="rfc7673.html" title='"Using DNS-Based Authentication of Named Entities (DANE) TLSA Records with SRV Records"'>RFC7673</a>]), the POSH operations ideally ought
   to be done in parallel with resolving the SRV records and the
   addresses of any targets, similar to the "Happy Eyeballs" approach
   for IPv4 and IPv6 [<a href="rfc6555.html" title='"Happy Eyeballs: Success with Dual-Stack Hosts"'>RFC6555</a>].

   The following diagram illustrates the possession flow:

    POSH                      Source                      POSH
   Client                     Domain                     Server
   ------                     ------                     ------
     |                          |                          |
     |      POSH Request        |                          |
     |-------------------------&gt;|                          |
     |                          |                          |
     | Return POSH fingerprints |                          |
     |&lt;-------------------------|                          |
     |                                                     |
     |                  Service TLS Handshake              |
     |&lt;===================================================&gt;|
     |                                                     |
     |                     Service Data                    |
     |&lt;===================================================&gt;|
     |                                                     |

               Figure 1: Order of Events for Possession Flow















<span class="grey">Miller &amp; Saint-Andre         Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   While the following diagram illustrates the reference flow:

    POSH              Source       Delegated              POSH
   Client             Domain         Domain              Server
   ------             ------         ------              ------
     |                  |              |                   |
     |  POSH Request    |              |                   |
     |-----------------&gt;|              |                   |
     |                  |              |                   |
     | Return POSH url  |              |                   |
     |&lt;-----------------|              |                   |
     |                                 |                   |
     |            POSH Request         |                   |
     |--------------------------------&gt;|                   |
     |                                 |                   |
     |     Return POSH fingerprints    |                   |
     |&lt;--------------------------------|                   |
     |                                                     |
     |                 Service TLS Handshake               |
     |&lt;===================================================&gt;|
     |                                                     |
     |                     Service Data                    |
     |&lt;===================================================&gt;|
     |                                                     |

               Figure 2: Order of Events for Reference Flow

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Caching%20Results"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Caching Results</span>

   The POSH client MUST NOT cache results (reference or fingerprints)
   indefinitely.  If the source domain returns a reference, the POSH
   client MUST use the lower of the two "expires" values when
   determining how long to cache results (i.e., if the reference
   "expires" value is lower than the fingerprints "expires" value, honor
   the reference "expires" value).  Once the POSH client considers the
   results stale, it needs to perform the entire POSH operation again,
   starting with the HTTPS GET request to the source domain.  The POSH
   client MAY use a lower value than any provided in the "expires"
   member(s), or not cache results at all.

   The foregoing considerations apply to the handling of the "expires"
   values in POSH documents; naturally, a POSH client MUST NOT consider
   an expired PKIX certificate to be valid, in accordance with
   [<a href="rfc5280.html" title='"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"'>RFC5280</a>].







<span class="grey">Miller &amp; Saint-Andre         Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   The POSH client SHOULD NOT rely on HTTP caching mechanisms, instead
   using the expiration hints provided in the POSH reference document or
   fingerprints document.  To that end, the HTTPS servers for source
   domains and derived domains SHOULD specify a 'Cache-Control' header
   indicating a very short duration (e.g., max-age=60) or "no-cache" to
   indicate that the response (redirect, reference, or fingerprints) is
   not appropriate to cache at the HTTP layer.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Guidance%20for%20Server%20Operators"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Guidance for Server Operators</span>

   POSH is intended to ease the operational burden of securing
   application services, especially in multi-tenanted environments.  It
   does so by obviating the need to obtain certificates for hosted
   domains, so that an operator can obtain a certificate only for its
   hosting service (naturally, this certificate needs to be valid
   according to [<a href="rfc5280.html" title='"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"'>RFC5280</a>] and contain the proper identifier(s) in
   accordance with [<a href="rfc6125.html" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>] and the relevant application protocol
   specification).

   However, in order to use POSH, an operator does need to coordinate
   with its customers so that the appropriate POSH documents are
   provided via HTTPS at a well-known URI at each customer's domain
   (i.e., at the source domain), thus ensuring delegation to the
   operator's hosting service (i.e., the delegated domain).  Because
   correct hosting of the POSH document at the source domain is
   essential for successful functioning of the POSH "chain", errors at
   the source domain will result in authentication problems, certificate
   warnings, and other operational issues.

   Furthermore, if the POSH document is a reference document instead of
   a fingerprints document, the operational burden is further decreased
   because the operator does not need to provision its customers with
   updated POSH documents when the certificate for the delegated domain
   expires or is replaced.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Guidance%20for%20Protocol%20Authors"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Guidance for Protocol Authors</span>

   Protocols that use POSH are expected to register with the "POSH
   Service Names" registry defined under <a href="#section-9.2">Section 9.2</a>.

   For POSH-using protocols that rely on DNS SRV records [<a href="rfc2782.html" title='"A DNS RR for specifying the location of services (DNS SRV)"'>RFC2782</a>], the
   service name SHOULD be the same as the DNS SRV "Service".  As an
   example, the POSH service name for XMPP server-to-server connections
   would be "xmpp-server" because [<a href="rfc6120.html" title='"Extensible Messaging and Presence Protocol (XMPP): Core"'>RFC6120</a>] registers a DNS SRV
   "Service" of "xmpp-server".  One example of the resulting well-known
   URI would be "https://example.com/.well-known/posh/xmpp-server.json".





<span class="grey">Miller &amp; Saint-Andre         Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   For other POSH-using protocols, the service name MAY be any unique
   string or identifier for the protocol; for example, it might be a
   service name registered with the IANA in accordance with [<a href="rfc6335.html" title='"Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry"'>RFC6335</a>],
   or it might be an unregistered name.  As an example, the well-known
   URI for the hypothetical SPICE application might be "spice".

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  IANA Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Well-Known%20URI"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Well-Known URI</span>

   IANA has registered "posh" in the "Well-Known URIs" registry as
   defined by [<a href="rfc5785.html" title='"Defining Well-Known Uniform Resource Identifiers (URIs)"'>RFC5785</a>].  The completed template follows.

   URI suffix:  posh

   Change controller:  IETF

   Specification:  <a href="rfc7711.html">RFC 7711</a> (this document)

   Related information:  The suffix "posh" is expected to be followed by
      an additional path component consisting of a service name (say,
      "spice") and a file extension of ".json", resulting in a full path
      of, for instance, "/.well-known/posh/spice.json".  Registration of
      service names shall be requested by developers of the relevant
      application protocols.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20POSH%20Service%20Names"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  POSH Service Names</span>

   IANA has established the "POSH Service Names" registry within the
   "Uniform Resource Identifier (URI) Schemes" group of registries.

   The IANA registration policy [<a href="rfc5226.html" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC5226</a>] is Expert Review or IETF
   Review (this was chosen instead of the more liberal policy of First
   Come First Served to help ensure that POSH services are defined in
   ways that are consistent with this specification).  One or more
   Designated Experts are to be appointed by the IESG or their delegate.

   Registration requests are to be sent to the posh@ietf.org mailing
   list for review and comment, with an appropriate subject (e.g.,
   "Request for POSH service name: example").

   Before a period of 14 days has passed, the Designated Expert(s) will
   either approve or deny the registration request, communicating this
   decision both to the review list and to IANA.  Denials should include
   an explanation and, if applicable, suggestions as to how to make the
   request successful.  Registration requests that are undetermined for
   a period longer than 21 days can be brought to the IESG's attention
   (using the iesg@iesg.org mailing list) for resolution.



<span class="grey">Miller &amp; Saint-Andre         Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/9.2.1.%20%20Registration%20Template"></a><a class="selflink" href="#section-9.2.1" name="section-9.2.1">9.2.1</a>.  Registration Template</span>

   Service name:  The name requested, relative to "/.well-known/posh/";
      e.g., a service name of "example" would result in a well-known URI
      such as "https://example.com/.well-known/posh/example.json".

   Change controller:  For Standards Track RFCs, state "IETF".  In all
      other cases, provide the name and email address of the responsible
      party.  Other details (e.g., postal address or website URI) may
      also be included.

   Definition and usage:  A brief description that defines the service
      name and mentions where and how it is used (e.g., in the context
      of a particular application protocol).

   Specification:  Optionally, reference to a document that specifies
      the service or application protocol that uses the service name,
      preferably including a URI that can be used to retrieve a copy of
      the document.  An indication of the relevant sections may also be
      included but is not required.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Security%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Security Considerations</span>

   This document supplements but does not supersede the security
   considerations provided in specifications for application protocols
   that decide to use POSH (e.g., [<a href="rfc6120.html" title='"Extensible Messaging and Presence Protocol (XMPP): Core"'>RFC6120</a>] and [<a href="rfc6125.html" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>] for XMPP).
   Specifically, the security of requests and responses sent via HTTPS
   depends on checking the identity of the HTTP server in accordance
   with [<a href="rfc2818.html" title='"HTTP Over TLS"'>RFC2818</a>] as well as following the most modern best practices
   for TLS as specified in [<a href="rfc7525.html" title='"Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)"'>RFC7525</a>].  Additionally, the security of
   POSH can benefit from other HTTP-hardening protocols, such as HTTP
   Strict Transport Security (HSTS) [<a href="rfc6797.html" title='"HTTP Strict Transport Security (HSTS)"'>RFC6797</a>] and key pinning [<a href="rfc7469.html" title='"Public Key Pinning Extension for HTTP"'>RFC7469</a>],
   especially if the POSH client shares some information with a common
   HTTPS implementation (e.g., a platform-default web browser).

   Note well that POSH is used by a POSH client to obtain the public key
   of a POSH server to which it might connect for a particular
   application protocol such as IMAP or XMPP.  POSH does not enable a
   hosted domain to transfer private keys to a hosting service via
   HTTPS.  POSH also does not enable a POSH server to engage in
   certificate enrollment with a certification authority via HTTPS, as
   is done in Enrollment over Secure Transport [<a href="rfc7030.html" title='"Enrollment over Secure Transport"'>RFC7030</a>].

   A web server at the source domain might redirect an HTTPS request to
   another HTTPS URI.  The location provided in the redirect response
   MUST specify an HTTPS URI.  Source domains SHOULD use only temporary
   redirect mechanisms, such as HTTP status codes 302 (Found) and 307
   (Temporary Redirect) [<a href="rfc7231.html" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>].  Clients MAY treat any redirect as



<span class="grey">Miller &amp; Saint-Andre         Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   temporary, ignoring the specific semantics for 301 (Moved
   Permanently) [<a href="rfc7231.html" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>] and 308 (Permanent Redirect) [<a href="rfc7538.html" title='"The Hypertext Transfer Protocol Status Code 308 (Permanent Redirect)"'>RFC7538</a>].  To
   protect against circular references, it is RECOMMENDED that POSH
   clients follow no more than 10 redirects, although applications or
   implementations can require that fewer redirects be followed.

   Hash function agility is an important quality to ensure secure
   operations in the face of attacks against the fingerprints obtained
   within verification material.  Because POSH verification material is
   relatively short-lived compared to long-lived credentials such as
   PKIX end-entity certificates (at least as typically deployed),
   entities that deploy POSH are advised to swap out POSH documents if
   the hash functions are found to be subject to practical attacks
   [<a href="rfc4270.html" title='"Attacks on Cryptographic Hashes in Internet Protocols"'>RFC4270</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20References"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.1.%20%20Normative%20References"></a><a class="selflink" href="#section-11.1" name="section-11.1">11.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC2818" name="ref-RFC2818">RFC2818</a>]  Rescorla, E., "HTTP Over TLS", <a href="rfc2818.html">RFC 2818</a>,
              DOI 10.17487/RFC2818, May 2000,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2818">http://www.rfc-editor.org/info/rfc2818</a>&gt;.

   [<a id="ref-RFC4648" name="ref-RFC4648">RFC4648</a>]  Josefsson, S., "The Base16, Base32, and Base64 Data
              Encodings", <a href="rfc4648.html">RFC 4648</a>, DOI 10.17487/RFC4648, October 2006,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4648">http://www.rfc-editor.org/info/rfc4648</a>&gt;.

   [<a id="ref-RFC5246" name="ref-RFC5246">RFC5246</a>]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", <a href="rfc5246.html">RFC 5246</a>,
              DOI 10.17487/RFC5246, August 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.

   [<a id="ref-RFC5280" name="ref-RFC5280">RFC5280</a>]  Cooper, D., Santesson, S., Farrell, S., Boeyen, S.,
              Housley, R., and W. Polk, "Internet X.509 Public Key
              Infrastructure Certificate and Certificate Revocation List
              (CRL) Profile", <a href="rfc5280.html">RFC 5280</a>, DOI 10.17487/RFC5280, May 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5280">http://www.rfc-editor.org/info/rfc5280</a>&gt;.

   [<a id="ref-RFC5785" name="ref-RFC5785">RFC5785</a>]  Nottingham, M. and E. Hammer-Lahav, "Defining Well-Known
              Uniform Resource Identifiers (URIs)", <a href="rfc5785.html">RFC 5785</a>,
              DOI 10.17487/RFC5785, April 2010,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5785">http://www.rfc-editor.org/info/rfc5785</a>&gt;.




<span class="grey">Miller &amp; Saint-Andre         Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   [<a id="ref-RFC6125" name="ref-RFC6125">RFC6125</a>]  Saint-Andre, P. and J. Hodges, "Representation and
              Verification of Domain-Based Application Service Identity
              within Internet Public Key Infrastructure Using X.509
              (PKIX) Certificates in the Context of Transport Layer
              Security (TLS)", <a href="rfc6125.html">RFC 6125</a>, DOI 10.17487/RFC6125,
              March 2011, &lt;<a href="http://www.rfc-editor.org/info/rfc6125">http://www.rfc-editor.org/info/rfc6125</a>&gt;.

   [<a id="ref-RFC7159" name="ref-RFC7159">RFC7159</a>]  Bray, T., Ed., "The JavaScript Object Notation (JSON) Data
              Interchange Format", <a href="rfc7159.html">RFC 7159</a>, DOI 10.17487/RFC7159,
              March 2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7159">http://www.rfc-editor.org/info/rfc7159</a>&gt;.

   [<a id="ref-RFC7230" name="ref-RFC7230">RFC7230</a>]  Fielding, R., Ed., and J. Reschke, Ed., "Hypertext
              Transfer Protocol (HTTP/1.1): Message Syntax and Routing",
              <a href="rfc7230.html">RFC 7230</a>, DOI 10.17487/RFC7230, June 2014,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.

   [<a id="ref-RFC7231" name="ref-RFC7231">RFC7231</a>]  Fielding, R., Ed., and J. Reschke, Ed., "Hypertext
              Transfer Protocol (HTTP/1.1): Semantics and Content",
              <a href="rfc7231.html">RFC 7231</a>, DOI 10.17487/RFC7231, June 2014,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7231">http://www.rfc-editor.org/info/rfc7231</a>&gt;.

   [<a id="ref-RFC7525" name="ref-RFC7525">RFC7525</a>]  Sheffer, Y., Holz, R., and P. Saint-Andre,
              "Recommendations for Secure Use of Transport Layer
              Security (TLS) and Datagram Transport Layer Security
              (DTLS)", <a href="https://tools.ietf.org/html/bcp195">BCP 195</a>, <a href="rfc7525.html">RFC 7525</a>, DOI 10.17487/RFC7525,
              May 2015, &lt;<a href="http://www.rfc-editor.org/info/rfc7525">http://www.rfc-editor.org/info/rfc7525</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.2.%20%20Informative%20References"></a><a class="selflink" href="#section-11.2" name="section-11.2">11.2</a>.  Informative References</span>

   [<a id="ref-HASH-NAMES" name="ref-HASH-NAMES">HASH-NAMES</a>]
              "Hash Function Textual Names",
              &lt;<a href="http://www.iana.org/assignments/hash-function-text-names">http://www.iana.org/assignments/</a>
              <a href="http://www.iana.org/assignments/hash-function-text-names">hash-function-text-names</a>&gt;.

   [<a id="ref-RFC2782" name="ref-RFC2782">RFC2782</a>]  Gulbrandsen, A., Vixie, P., and L. Esibov, "A DNS RR for
              specifying the location of services (DNS SRV)", <a href="rfc2782.html">RFC 2782</a>,
              DOI 10.17487/RFC2782, February 2000,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2782">http://www.rfc-editor.org/info/rfc2782</a>&gt;.

   [<a id="ref-RFC4033" name="ref-RFC4033">RFC4033</a>]  Arends, R., Austein, R., Larson, M., Massey, D., and S.
              Rose, "DNS Security Introduction and Requirements",
              <a href="rfc4033.html">RFC 4033</a>, DOI 10.17487/RFC4033, March 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4033">http://www.rfc-editor.org/info/rfc4033</a>&gt;.

   [<a id="ref-RFC4270" name="ref-RFC4270">RFC4270</a>]  Hoffman, P. and B. Schneier, "Attacks on Cryptographic
              Hashes in Internet Protocols", <a href="rfc4270.html">RFC 4270</a>,
              DOI 10.17487/RFC4270, November 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4270">http://www.rfc-editor.org/info/rfc4270</a>&gt;.



<span class="grey">Miller &amp; Saint-Andre         Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   [<a id="ref-RFC5226" name="ref-RFC5226">RFC5226</a>]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", <a href="https://tools.ietf.org/html/bcp26">BCP 26</a>, <a href="rfc5226.html">RFC 5226</a>,
              DOI 10.17487/RFC5226, May 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5226">http://www.rfc-editor.org/info/rfc5226</a>&gt;.

   [<a id="ref-RFC6120" name="ref-RFC6120">RFC6120</a>]  Saint-Andre, P., "Extensible Messaging and Presence
              Protocol (XMPP): Core", <a href="rfc6120.html">RFC 6120</a>, DOI 10.17487/RFC6120,
              March 2011, &lt;<a href="http://www.rfc-editor.org/info/rfc6120">http://www.rfc-editor.org/info/rfc6120</a>&gt;.

   [<a id="ref-RFC6335" name="ref-RFC6335">RFC6335</a>]  Cotton, M., Eggert, L., Touch, J., Westerlund, M., and S.
              Cheshire, "Internet Assigned Numbers Authority (IANA)
              Procedures for the Management of the Service Name and
              Transport Protocol Port Number Registry", <a href="https://tools.ietf.org/html/bcp165">BCP 165</a>,
              <a href="rfc6335.html">RFC 6335</a>, DOI 10.17487/RFC6335, August 2011,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6335">http://www.rfc-editor.org/info/rfc6335</a>&gt;.

   [<a id="ref-RFC6555" name="ref-RFC6555">RFC6555</a>]  Wing, D. and A. Yourtchenko, "Happy Eyeballs: Success with
              Dual-Stack Hosts", <a href="rfc6555.html">RFC 6555</a>, DOI 10.17487/RFC6555,
              April 2012, &lt;<a href="http://www.rfc-editor.org/info/rfc6555">http://www.rfc-editor.org/info/rfc6555</a>&gt;.

   [<a id="ref-RFC6698" name="ref-RFC6698">RFC6698</a>]  Hoffman, P. and J. Schlyter, "The DNS-Based Authentication
              of Named Entities (DANE) Transport Layer Security (TLS)
              Protocol: TLSA", <a href="rfc6698.html">RFC 6698</a>, DOI 10.17487/RFC6698,
              August 2012, &lt;<a href="http://www.rfc-editor.org/info/rfc6698">http://www.rfc-editor.org/info/rfc6698</a>&gt;.

   [<a id="ref-RFC6797" name="ref-RFC6797">RFC6797</a>]  Hodges, J., Jackson, C., and A. Barth, "HTTP Strict
              Transport Security (HSTS)", <a href="rfc6797.html">RFC 6797</a>,
              DOI 10.17487/RFC6797, November 2012,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6797">http://www.rfc-editor.org/info/rfc6797</a>&gt;.

   [<a id="ref-RFC7030" name="ref-RFC7030">RFC7030</a>]  Pritikin, M., Ed., Yee, P., Ed., and D. Harkins, Ed.,
              "Enrollment over Secure Transport", <a href="rfc7030.html">RFC 7030</a>,
              DOI 10.17487/RFC7030, October 2013,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7030">http://www.rfc-editor.org/info/rfc7030</a>&gt;.

   [<a id="ref-RFC7469" name="ref-RFC7469">RFC7469</a>]  Evans, C., Palmer, C., and R. Sleevi, "Public Key Pinning
              Extension for HTTP", <a href="rfc7469.html">RFC 7469</a>, DOI 10.17487/RFC7469,
              April 2015, &lt;<a href="http://www.rfc-editor.org/info/rfc7469">http://www.rfc-editor.org/info/rfc7469</a>&gt;.

   [<a id="ref-RFC7538" name="ref-RFC7538">RFC7538</a>]  Reschke, J., "The Hypertext Transfer Protocol Status
              Code 308 (Permanent Redirect)", <a href="rfc7538.html">RFC 7538</a>,
              DOI 10.17487/RFC7538, April 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7538">http://www.rfc-editor.org/info/rfc7538</a>&gt;.








<span class="grey">Miller &amp; Saint-Andre         Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc7711.html">RFC 7711</a>                          POSH                     November 2015</span>


   [<a id="ref-RFC7673" name="ref-RFC7673">RFC7673</a>]  Finch, T., Miller, M., and P. Saint-Andre, "Using
              DNS-Based Authentication of Named Entities (DANE) TLSA
              Records with SRV Records", <a href="rfc7673.html">RFC 7673</a>, DOI 10.17487/RFC7673,
              October 2015, &lt;<a href="http://www.rfc-editor.org/info/rfc7673">http://www.rfc-editor.org/info/rfc7673</a>&gt;.

   [<a id="ref-RFC7712" name="ref-RFC7712">RFC7712</a>]  Saint-Andre, P., Miller, M., and P. Hancke, "Domain Name
              Associations (DNA) in the Extensible Messaging and
              Presence Protocol (XMPP)", <a href="rfc7712.html">RFC 7712</a>, DOI 10.17487/RFC7712,
              November 2015, &lt;<a href="http://www.rfc-editor.org/info/rfc7712">http://www.rfc-editor.org/info/rfc7712</a>&gt;.

Acknowledgements

   Thanks to Thijs Alkemade, Philipp Hancke, Joe Hildebrand, and Tobias
   Markmann for their implementation feedback, and to Dave Cridland,
   Chris Newton, Max Pritikin, and Joe Salowey for their input on the
   specification.

   During IESG review, Stephen Farrell, Barry Leiba, and Kathleen
   Moriarty provided helpful input that resulted in improvements in the
   document.

   Thanks also to Dave Cridland as document shepherd, Joe Hildebrand as
   working group chair, and Ben Campbell as area director.

   Peter Saint-Andre wishes to acknowledge Cisco Systems, Inc., for
   employing him during his work on earlier draft versions of this
   document.

Authors' Addresses

   Matthew Miller
   Cisco Systems, Inc.
   1899 Wynkoop Street, Suite 600
   Denver, CO  80202
   United States

   Email: mamille2@cisco.com


   Peter Saint-Andre
   &amp;yet

   Email: peter@andyet.com
   URI:   <a href="https://andyet.com/">https://andyet.com/</a>







Miller &amp; Saint-Andre         Standards Track                   [Page 18]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc7711 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:19 GMT --></html>