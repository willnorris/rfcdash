<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc8384 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:38 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.127" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-perlman-trill-smart-endnodes" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:8384" name="DC.Identifier"/>
<meta content="July, 2018" name="DC.Date.Issued"/>
<meta content="Liao, Ting" name="DC.Creator"/>
<meta content="Perlman, Radia" name="DC.Creator"/>
<meta content='This draft addresses the problem of the size and freshness of the
endnode learning table in edge RBridges, by allowing endnodes to
volunteer for endnode learning and encapsulation/decapsulation. Such
an endnode is known as a "Smart Endnode". Only the attached edge
RBridge can distinguish a "Smart Endnode" from a "normal endnode". The
Smart Endnode uses the nickname of the attached edge RBridge, so this
solution does not consume extra nicknames. The solution also enables
Fine Grained Label aware endnodes.' name="DC.Description.Abstract"/>
<meta content="Transparent Interconnection of Lots of Links (TRILL) Smart Endnodes" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 8384 - Transparent Interconnection of Lots of Links (TRILL) Smart Endnodes</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8384.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8384" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-trill-smart-endnodes" title="draft-ietf-trill-smart-endnodes">draft-ietf-tril...</a>] [<a href="https://datatracker.ietf.org/doc/rfc8384" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8384" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8384" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                        R. Perlman
Request for Comments: 8384                                      Dell EMC
Category: Standards Track                                          F. Hu
ISSN: 2070-1721                                          ZTE Corporation
                                                         D. Eastlake 3rd
                                                                 T. Liao
                                                     Huawei Technologies
                                                               July 2018


  <span class="h1">Transparent Interconnection of Lots of Links (TRILL) Smart Endnodes</span>

Abstract

   This document addresses the problem of the size and freshness of the
   endnode learning table in edge Routing Bridges (RBridges), by
   allowing endnodes to volunteer for endnode learning and
   encapsulation/decapsulation.  Such an endnode is known as a "Smart
   Endnode".  Only the attached edge RBridge can distinguish a "Smart
   Endnode" from a "normal endnode".  The Smart Endnode uses the
   nickname of the attached edge RBridge, so this solution does not
   consume extra nicknames.  The solution also enables endnodes that are
   Fine-Grained Label (FGL) aware.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc7841.html#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8384">https://www.rfc-editor.org/info/rfc8384</a>.














<span class="grey">Perlman, et al.              Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Conventions Used in This Document . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.1">2.1</a>.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.2">2.2</a>.  Requirements Language . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  Solution Overview . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-4">4</a>.  Smart-Hello Mechanism between Smart Endnode and RBridge . . .   <a href="#page-6">6</a>
     <a href="#section-4.1">4.1</a>.  Smart-Hello Encapsulation . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-4.2">4.2</a>.  Edge RBridge's Smart-Hello  . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
     <a href="#section-4.3">4.3</a>.  Smart Endnode's Smart-Hello . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-5">5</a>.  Processing Data Packets . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-5.1">5.1</a>.  Data-Packet Processing for Smart Endnodes . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-5.2">5.2</a>.  Data-Packet Processing for Edge RBridge . . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-6">6</a>.  Multihoming Scenario  . . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
   <a href="#section-7">7</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
   <a href="#section-8">8</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-9">9</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-9.1">9.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-9.2">9.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>














<span class="grey">Perlman, et al.              Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The IETF TRILL (Transparent Interconnection of Lots of Links)
   protocol [<a href="rfc6325.html" title='"Routing Bridges (RBridges): Base Protocol Specification"'>RFC6325</a>] [<a href="rfc7780.html" title='"Transparent Interconnection of Lots of Links (TRILL): Clarifications, Corrections, and Updates"'>RFC7780</a>] provides optimal pair-wise data frame
   forwarding without configuration, safe forwarding even during periods
   of temporary loops, and support for multipathing of both unicast and
   multicast traffic.  TRILL accomplishes this by using IS-IS [<a href="#ref-IS-IS" title='"Information technology -- Telecommunications and information exchange between systems -- Intermediate System to Intermediate System intra-domain routeing information exchange protocol for use in conjunction with the protocol for providing the connectionless-mode network service (ISO 8473)"'>IS-IS</a>]
   [<a href="rfc7176.html" title='"Transparent Interconnection of Lots of Links (TRILL) Use of IS-IS"'>RFC7176</a>] link state routing and encapsulating traffic using a header
   that includes a hop count.  Devices that implement TRILL are called
   "RBridges" (Routing Bridges) or "TRILL Switches".

   An RBridge that attaches to endnodes is called an "edge RBridge" or
   "edge TRILL Switch", whereas one that exclusively forwards
   encapsulated frames is known as a "transit RBridge" or "transit TRILL
   Switch".  An edge RBridge traditionally is the one that encapsulates
   a native Ethernet frame with a TRILL header or that receives a TRILL-
   encapsulated packet and decapsulates the TRILL header.  To
   encapsulate efficiently, the edge RBridge must keep an "endnode
   table" consisting of (Media Access Control (MAC), Data Label, TRILL
   egress switch nickname) sets, for those remote MAC addresses in Data
   Labels currently communicating with endnodes to which the edge
   RBridge is attached.

   These table entries might be configured, received from End Station
   Address Distribution Information (ESADI) [<a href="rfc7357.html" title='"Transparent Interconnection of Lots of Links (TRILL): End Station Address Distribution Information (ESADI) Protocol"'>RFC7357</a>], looked up in a
   directory [<a href="rfc7067.html" title='"Directory Assistance Problem and High-Level Design Proposal"'>RFC7067</a>], or learned from decapsulating received traffic.
   If the edge RBridge has attached endnodes communicating with many
   remote endnodes, this table could become very large.  Also, if a MAC
   address / Data Label pair in the table have moved to a different
   remote TRILL switch, it might be difficult for the edge RBridge to
   notice this quickly; and because the edge RBridge is encapsulating to
   the incorrect egress RBridge, the traffic will get lost.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions Used in This Document</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Terminology"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Terminology</span>

   BUM: Broadcast, Unknown unicast, and Multicast.

   Edge RBridge: An RBridge providing endnode service on at least one of
   its ports.  It is also called an edge TRILL Switch.

   Data Label: VLAN or FGL.

   DRB: Designated RBridge [<a href="rfc6325.html" title='"Routing Bridges (RBridges): Base Protocol Specification"'>RFC6325</a>].

   ESADI: End Station Address Distribution Information [<a href="rfc7357.html" title='"Transparent Interconnection of Lots of Links (TRILL): End Station Address Distribution Information (ESADI) Protocol"'>RFC7357</a>].




<span class="grey">Perlman, et al.              Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   FGL: Fine-Grained Label [<a href="rfc7172.html" title='"Transparent Interconnection of Lots of Links (TRILL): Fine-Grained Labeling"'>RFC7172</a>].

   IS-IS: Intermediate System to Intermediate System [<a href="#ref-IS-IS" title='"Information technology -- Telecommunications and information exchange between systems -- Intermediate System to Intermediate System intra-domain routeing information exchange protocol for use in conjunction with the protocol for providing the connectionless-mode network service (ISO 8473)"'>IS-IS</a>].

   LSP: Link State PDU.

   PDU: Protocol Data Unit.

   RBridge: Routing Bridge, an alternative name for a TRILL switch.

   Smart Endnode: An endnode that has the capability specified in this
   document including learning and maintaining (MAC, Data Label,
   nickname) entries and encapsulating/decapsulating TRILL frame.

   Transit RBridge: An RBridge that exclusively forwards encapsulated
   frames.  It is also called a transit TRILL Switch.

   TRILL: Transparent Interconnection of Lots of Links
   [<a href="rfc6325.html" title='"Routing Bridges (RBridges): Base Protocol Specification"'>RFC6325</a>][RFC7780].

   TRILL ES-IS: TRILL End System to Intermediate System, is a variation
   of TRILL IS-IS designed to operate on a TRILL link among and between
   one or more TRILL switches and end stations on that link [<a href="rfc8171.html" title='"Transparent Interconnection of Lots of Links (TRILL): Edge Directory Assistance Mechanisms"'>RFC8171</a>].

   TRILL Switch: a device that implements the TRILL protocol; an
   alternative term for an RBridge.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Requirements%20Language"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="rfc8174.html" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Solution%20Overview"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Solution Overview</span>

   The Smart Endnode solution defined in this document addresses the
   problem of the size and freshness of the endnode learning table in
   edge RBridges.  An endnode E, attached to an edge RBridge R, tells R
   that E would like to be a "Smart Endnode", which means that E will
   encapsulate and decapsulate the TRILL frame, using R's nickname.
   Because E uses R's nickname, this solution does not consume extra
   nicknames.







<span class="grey">Perlman, et al.              Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   Take Figure 1 as the example Smart Endnode scenario: RB1, RB2, and
   RB3 are the RBridges in the TRILL domain and SE1 and SE2 are the
   Smart Endnodes that can encapsulate and decapsulate the TRILL
   packets.  RB1 is the edge RB to which SE1 and SE2 have attached.  RB1
   assigns one of its nicknames to be used by SE1 and SE2.

   Each Smart Endnode, SE1 and SE2, uses RB1's nickname when
   encapsulating and maintains an endnode table of (MAC, Data Label,
   TRILL egress switch nickname) for remote endnodes that it (SE1 or
   SE2) is corresponding with.  RB1 does not decapsulate packets
   destined for SE1 or SE2 and does not learn (MAC, Data Label, TRILL
   egress switch nickname) for endnodes corresponding with SE1 or SE2,
   but RB1 does decapsulate and does learn (MAC, Data Label, TRILL
   egress switch nickname) for any endnodes attached to RB1 that have
   not declared themselves to be Smart Endnodes.

   Just as an RBridge learns and times out (MAC, Data Label, TRILL
   egress switch nickname), Smart Endnodes SE1 and SE2 also learn and
   time out endnode entries.  However, SE1 and SE2 might also determine,
   through ICMP messages or other techniques that an endnode entry is
   not successfully reaching the destination endnode, and it can be
   deleted, even if the entry has not timed out.

   If SE1 wishes to correspond with destination MAC D, and no endnode
   entry exists, SE1 will encapsulate the packet as an unknown
   destination, or consult a directory [<a href="rfc7067.html" title='"Directory Assistance Problem and High-Level Design Proposal"'>RFC7067</a>] (just as an RBridge
   would do if there was no endnode entry).

 +----------+
 |SE1(Smart |
 |Endnode1) |  \      +------------------------------+
 +----------+   \    /                                \
                 \  /+------+   +------+    +-----+    \   +-----------+
                 /-+-| RB 1 |---|  RB2 |----| RB3 |-----+--|Endnode3   |
                /  | +------+   +------+    +-----+     |  |MAC=D      |
 +----------+ /     \                                  /   +-----------+
 |SE2(Smart |        \                                /
 | Endnode2)|         +------------------------------+
 +----------+

                     Figure 1: Smart Endnode Scenario










<span class="grey">Perlman, et al.              Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   The mechanism in this document is that the Smart Endnode SE1 issues a
   Smart-Hello, indicating SE1's desire to act as a Smart Endnode,
   together with the set of MAC addresses and Data Labels that SE1 owns.
   The Smart-Hello is used to announce the Smart Endnode capability and
   parameters (such as MAC address, Data Label, etc.).  The Smart-Hello
   is a type of TRILL ES-IS PDU, which is specified in <a href="rfc8171.html#section-5">Section 5 of
   [RFC8171]</a>.  The detailed content for a Smart Endnode's Smart-Hello is
   defined in <a href="#section-4">Section 4</a>.

   If RB1 supports having a Smart Endnode neighbor, it also sends Smart-
   Hellos.  The Smart Endnode learns from RB1's Smart-Hellos what RB1's
   nickname is and which trees RB1 can use when RB1 ingresses multi-
   destination frames.  Although Smart Endnode SE1 transmits Smart-
   Hellos, it does not transmit or receive Link State PDUs (LSPs) or
   Extended Level 1 Flooding Scope (E-L1FS) FS LSPs [<a href="rfc7780.html" title='"Transparent Interconnection of Lots of Links (TRILL): Clarifications, Corrections, and Updates"'>RFC7780</a>].

   Since a Smart Endnode can encapsulate TRILL Data packets, it can
   cause the Inner.Label to be a Fine-Grained Label [<a href="rfc7172.html" title='"Transparent Interconnection of Lots of Links (TRILL): Fine-Grained Labeling"'>RFC7172</a>]; thus,
   this method supports FGL-aware endnodes.  When and how a Smart
   Endnode decides to use the FGL instead of VLANs to encapsulate the
   TRILL Data packet is out of scope in this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Smart-Hello%20Mechanism%20between%20Smart%20Endnode%20and%20RBridge"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Smart-Hello Mechanism between Smart Endnode and RBridge</span>

   The subsections below describe Smart-Hello messages.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Smart-Hello%20Encapsulation"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Smart-Hello Encapsulation</span>

   Although a Smart Endnode is not an RBridge, does not send LSPs or
   maintain a copy of the link state database, and does not perform
   routing calculations, it is required to have a "Hello" mechanism (1)
   to announce to edge RBridges that it is a Smart Endnode and (2) to
   tell them what MAC addresses it is handling in what Data Labels.
   Similarly, an edge RBridge that supports Smart Endnodes needs a
   message (1) to announce that support, (2) to inform Smart Endnodes
   what nickname to use for ingress and what nickname(s) can be used as
   egress nickname in a multi-destination TRILL Data packet, and (3) the
   list of Smart Endnodes it knows about on that link.

   The messages sent by Smart Endnodes and by edge RBridges that support
   Smart Endnodes are called "Smart-Hellos".  The Smart-Hello is a type
   of TRILL ES-IS PDU, which is specified in [<a href="rfc8171.html" title='"Transparent Interconnection of Lots of Links (TRILL): Edge Directory Assistance Mechanisms"'>RFC8171</a>].









<span class="grey">Perlman, et al.              Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   The Smart-Hello Payload, both for Smart-Hellos sent by Smart Endnodes
   and for Smart-Hellos sent by edge RBridges, consists of TRILL IS-IS
   TLVs as described in the following two subsections.  The non-extended
   format is used so TLVs, sub-TLVs, and APPsub-TLVs have an 8-bit size
   and type field.  Both types of Smart-Hellos MUST include a Smart-
   Parameters APPsub-TLV as follows inside a TRILL GENINFO TLV:

                 +-+-+-+-+-+-+-+-+-
                 |Smart-Parameters|                 (1 byte)
                 +-+-+-+-+-+-+-+-+-
                 |    Length      |                 (1 byte)
                 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                 |        Holding Time           |  (2 bytes)
                 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                 |             Flags             |  (2 bytes)
                 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                   Figure 2: Smart-Parameters APPsub-TLV

   o  Type: APPsub-TLV type Smart-Parameters, value is 22.

   o  Length: 4.

   o  Holding Time: A time in seconds as an unsigned integer.  It has
      the same meaning as the Holding Time field in IS-IS Hellos
      [<a href="#ref-IS-IS" title='"Information technology -- Telecommunications and information exchange between systems -- Intermediate System to Intermediate System intra-domain routeing information exchange protocol for use in conjunction with the protocol for providing the connectionless-mode network service (ISO 8473)"'>IS-IS</a>].  A Smart Endnode and an edge RBridge supporting Smart
      Endnodes MUST send a Smart-Hello at least three times during their
      Holding Time.  If no Smart-Hellos are received from a Smart
      Endnode or edge RBridge within the most recent Holding Time it
      sent, it is assumed that it is no longer available.

   o  Flags: At this time, all of the Flags are reserved and MUST be
      sent as zero and ignored on receipt.

   o  If more than one Smart-Parameters APPsub-TLV appears in a Smart-
      Hello, the first one is used and any following ones are ignored.
      If no Smart-Parameters APPsub-TLVs appear in a Smart-Hello, that
      Smart-Hello is ignored.













<span class="grey">Perlman, et al.              Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20Edge%20RBridge%27s%20Smart-Hello"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  Edge RBridge's Smart-Hello</span>

   The edge RBridge's Smart-Hello contains the following information in
   addition to the Smart-Parameters APPsub-TLV:

   o  RBridge's nickname.  The nickname sub-TLV, specified in
      <a href="rfc7176.html#section-2.3.2">Section 2.3.2 in [RFC7176]</a>, is reused here carried inside a TLV
      242 (IS-IS router capability) in a Smart-Hello frame.  If more
      than one nickname appears in the Smart-Hello, the first one is
      used and the following ones are ignored.

   o  Trees that RB1 can use when ingressing multi-destination frames.
      The Tree Identifiers sub-TLV, specified in <a href="rfc7176.html#section-2.3.4">Section 2.3.4 in
      [RFC7176]</a>, is reused here.

   o  Smart Endnode neighbor list.  The TRILL Neighbor TLV, specified in
      <a href="rfc7176.html#section-2.5">section 2.5 in [RFC7176]</a>, is reused for this purpose.

   o  An Authentication TLV MAY also be included.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20Smart%20Endnode%27s%20Smart-Hello"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  Smart Endnode's Smart-Hello</span>

   A new APPsub-TLV (Smart-MAC TLV) for use by Smart Endnodes is as
   defined below.  In addition, there will be a Smart-Parameters APPsub-
   TLV and there MAY be an Authentication TLV in a Smart Endnode Smart-
   Hello.

   If there are several VLANs/FGL Data Labels for that Smart Endnode,
   the Smart-MAC APPsub-TLV is included several times in the Smart
   Endnode's Smart-Hello.  This APPsub-TLV appears inside a TRILL
   GENINFO TLV.




















<span class="grey">Perlman, et al.              Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


    +-+-+-+-+-+-+-+-+
    |Type=Smart-MAC |                          (1 byte)
    +-+-+-+-+-+-+-+-+
    |   Length      |                          (1 byte)
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |F|M|   RSV     |  VLAN/FGL Data Label  |  (4 bytes)
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-...+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                          MAC (1)       (6 bytes)                 |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-...+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                      .................                           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-...+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                          MAC (N)       (6 bytes)                 |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-...+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 3: Smart-MAC APPsub-TLV

   o  Type: TRILL APPsub-TLV Type Smart-MAC, value is 23.

   o  Length: Total number of bytes contained in the value field of the
      TLV, that is, the sum of the length of the F/M/RSV/FGL Data Label
      fields and six times the number of MAC addresses present.  So, if
      there are n MAC addresses, this is 4+6*n.

   o  F: 1 bit.  If it is set to 1, it indicates that the endnode
      supports FGL Data Labels [<a href="rfc7172.html" title='"Transparent Interconnection of Lots of Links (TRILL): Fine-Grained Labeling"'>RFC7172</a>], and that this Smart-MAC
      APPsub-TLV has an FGL in the following VLAN/FGL field.  Otherwise,
      the VLAN/FGL Data Label field is a VLAN ID.  (See below for the
      format of the VLAN/FGL Data Label field).

   o  M: 1 bit.  If it is set to 1, it indicates multihoming (see
      <a href="#section-6">Section 6</a>).  If it is set to 0, it indicates that the Smart
      Endnodes are not using multihoming.

   o  RSV: 6 bits; reserved for the future use.

   o  VLAN/FGL Data Label: 24 bits.  If F is 1, this field is a 24-bit
      FGL Data Label for all subsequent MAC addresses in this APPsub-
      TLV.  Otherwise, if F is 0, the lower 12 bits are the VLAN of all
      subsequent MAC addresses in this APPsub-TLV, and the upper 12 bits
      are not used (sent as zero and ignored on receipt).  If there is
      no VLAN/FGL Data Label specified, the VLAN/FGL Data Label is zero.

   o  MAC(i): This is a 48-bit MAC address reachable in the Data Label
      sent by the Smart Endnode that is announcing this APPsub-TLV.







<span class="grey">Perlman, et al.              Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Processing%20Data%20Packets"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Processing Data Packets</span>

   The subsections below specify the processing of Smart Endnode data
   packets.  All TRILL Data packets sent to or from Smart Endnodes are
   sent in the Designated VLAN [<a href="rfc6325.html" title='"Routing Bridges (RBridges): Base Protocol Specification"'>RFC6325</a>] of the local link but do not
   necessarily have to be VLAN tagged.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Data-Packet%20Processing%20for%20Smart%20Endnodes"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Data-Packet Processing for Smart Endnodes</span>

   A Smart Endnode does not issue or receive LSPs or E-L1FS FS LSPs or
   calculate topology.  It does the following:

   o  A Smart Endnode maintains an endnode table of (the MAC address of
      remote endnode, Data Label, the nickname of the edge RBridge's
      attached) entries of end nodes with which the Smart Endnode is
      communicating.  Entries in this table are populated the same way
      that an edge RBridge populates the entries in its table:

      *  learning from (source MAC address ingress nickname) on packets
         it decapsulates.

      *  by querying a directory [<a href="rfc7067.html" title='"Directory Assistance Problem and High-Level Design Proposal"'>RFC7067</a>].

      *  by having some entries configured.

   o  When Smart Endnode SE1 wishes to send unicast frame to remote node
      D, if the (MAC address of remote endnode D, Data Label, nickname)
      entry is in SE1's endnode table, SE1 encapsulates the ingress
      nickname as the nickname of the RBridge (RB1), egress nickname as
      indicated in D's table entry.  If D is unknown, SE1 either queries
      a directory or encapsulates the packet as a multi-destination
      frame, using one of the trees that RB1 has specified in RB1's
      Smart-Hello.  The mechanism for querying a directory is given in
      [<a href="rfc8171.html" title='"Transparent Interconnection of Lots of Links (TRILL): Edge Directory Assistance Mechanisms"'>RFC8171</a>].

   o  When SE1 wishes to send a Broadcast, Unknown Unicast, and
      Multicast (BUM) packet to the TRILL campus, SE1 encapsulates the
      packet using one of the trees that RB1 has specified.

   If the Smart Endnode SE1 sends a multi-destination TRILL Data packet,
   the destination MAC of the outer Ethernet is the All-RBridges
   multicast address.

   The Smart Endnode SE1 need not send Smart-Hellos as frequently as
   normal RBridges.  These Smart-Hellos could be periodically unicast to
   the Appointed Forwarder RB1.  In case RB1 crashes and restarts, or
   the DRB changes and SE1 receives the Smart-Hello without mentioning




<span class="grey">Perlman, et al.              Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   SE1, SE1 SHOULD send a Smart-Hello immediately.  If RB1 is Appointed
   Forwarder for any of the VLANs that SE1 claims, RB1 MUST list SE1 in
   its Smart-Hellos as a Smart Endnode neighbor.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Data-Packet%20Processing%20for%20Edge%20RBridge"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Data-Packet Processing for Edge RBridge</span>

   The attached edge RBridge processes and forwards TRILL Data packets
   based on the endnode property rather than for encapsulation and
   forwarding the native frames the same way as the traditional
   RBridges.  There are several situations for the edge RBridges as
   follows:

   o  If receiving an encapsulated unicast TRILL Data packet from a port
      with a Smart Endnode, with RB1's nickname as ingress, the edge
      RBridge RB1 forwards the frame to the specified egress nickname,
      as with any encapsulated frame.  However, RB1 SHOULD filter the
      encapsulation frame based on the inner source MAC and Data Label
      as specified for the Smart Endnode.  If the MAC (or Data Label) is
      not among the expected entries of the Smart Endnode, the frame
      would be dropped by the edge RBridge.  If the edge RBridge does
      not perform this check, it makes it easier for a rogue end station
      to inject bogus TRILL Data packets into the TRILL campus.

   o  If receiving a unicast TRILL Data packet with RB1's nickname as
      egress from the TRILL campus, and the destination MAC address in
      the enclosed packet is a MAC address that has been listed by a
      Smart Endnode, RB1 leaves the packet encapsulated to that Smart
      Endnode.  The outer Ethernet destination MAC is the destination
      Smart Endnode's MAC address, the inner destination MAC address is
      either the Smart Endnode's MAC address or some other MAC address
      that the Smart Endnode advertised in its Smart Hello, and the
      outer Ethernet source MAC address is the RB1's port MAC address.
      The edge RBridge still decreases the Hop count value by 1, for
      there is one hop between the RB1 and Smart Endnode.

   o  If receiving a multi-destination TRILL Data packet from a port
      with a Smart Endnode, RBridge RB1 forwards the TRILL encapsulation
      to the TRILL campus based on the distribution tree indicated by
      the egress nickname.  If the egress nickname does not correspond
      to a distribution tree, the packet is discarded.  If there are any
      normal endnodes (i.e., endnodes that are not Smart Endnodes)
      attached to the edge RBridge RB1, RB1 decapsulates the frame and
      sends the native frame to these ports possibly pruned based on
      multicast listeners, in addition to forwarding the multi-
      destination TRILL frame to the rest of the campus.






<span class="grey">Perlman, et al.              Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   o  If RB1 receives a native multi-destination data frame, which is
      sent by an endnode that is not a Smart Endnode, from a port,
      including hybrid endnodes (Smart Endnodes and endnodes that are
      not Smart Endnodes), RB1 will encapsulate it as multi-destination
      TRILL Data packet, and send the encapsulated multi-destination
      TRILL Data packet out that same port to the Smart Endnodes
      attached to the port, and also send the encapsulated multi-
      destination TRILL Data packet to the TRILL campus through other
      ports.

   o  If RB1 receives a multi-destination TRILL Data packet from a
      remote RBridge, and the exit port includes hybrid endnodes (Smart
      Endnodes and endnodes that are not Smart Endnodes), it sends two
      copies of multicast frames out the port, one as native and the
      other as a TRILL-encapsulated frame.  When a Smart Endnode
      receives a multi-destination TRILL Data packet, it learns the
      remote (MAC address, Data Label, nickname) entry.  A Smart Endnode
      ignores native data frames.  A normal (non-Smart) endnode receives
      the native frame and learns the remote MAC address and ignores the
      TRILL Data packet.  This transit solution may bring some
      complexity for the edge RBridge and waste network bandwidth
      resource, so avoiding the hybrid endnodes scenario by attaching
      the endnodes that are Smart and non-Smart to different ports is
      RECOMMENDED.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Multihoming%20Scenario"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Multihoming Scenario</span>

   Multihoming is a common scenario for the Smart Endnode.  The Smart
   Endnode is on a link attached to the TRILL domain in two places: edge
   RBridges RB1 and RB2.  Take Figure 4 as an example.  The Smart
   Endnode SE1 is attached to the TRILL domain by RB1 and RB2
   separately.  Both RB1 and RB2 could announce their nicknames to SE1.

                        . .....................
                        .  +------+           .
                        .  | RB1  |           .
                        . /+------+           .
           +----------+ ./            +-----+ .    +----------+
           |SE1(Smart |/.             | RB3 |......| Smart    |
           | Endnode1)| .\            +-----+ .    | Endnode2 |
           +----------+ . \                   .    +----------+
                        .  +-----+            .
                        .  | RB2 |   TRILL    .
                        .  +-----+   Domain   .
                        .......................

                      Figure 4: Multihoming Scenario




<span class="grey">Perlman, et al.              Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   Smart Endnode SE1 can choose either the nickname of RB1 or RB2 when
   encapsulating and forwarding a TRILL Data packet.  If the active-
   active load balance is considered for the multihoming scenario, the

   Smart Endnode SE1 could use both the nickname of RB1 and RB2 to
   encapsulate and forward TRILL Data packet.  SE1 uses RB1's nickname
   when forwarding through RB1 and RB2's nickname when forwarding
   through RB2.  This will cause MAC flip-flopping (see [<a href="rfc7379.html" title='"Problem Statement and Goals for Active-Active Connection at the Transparent Interconnection of Lots of Links (TRILL) Edge"'>RFC7379</a>]) of
   the endnode table entry in the remote RBridges (or Smart Endnodes).
   The solution for the MAC flip-flopping issue is to set a multihoming
   bit in the RSV field of the TRILL Data packet.  When remote RBridge
   RB3 or Smart Endnodes receive a data packet with the multihomed bit
   set, the endnode entries (SE1's MAC address, label, RB1's nickname)
   and (SE1's MAC address, label, RB2's nickname) will coexist as
   endnode entries in the remote RBridge.  (An alternative solution
   would be to use the ESADI protocol to distribute multiple attachments
   of a MAC address of a multihoming group.  The ESADI is deployed among
   the edge RBridges (see <a href="rfc7357.html#section-5.3">Section 5.3 of [RFC7357]</a>).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   Smart-Hellos can be secured by using Authentication TLVs based on
   [<a href="rfc5310.html" title='"IS-IS Generic Cryptographic Authentication"'>RFC5310</a>].  If they are not secured, then it is easier for a rogue
   end station that does not posses the required keying material to be
   falsely recognized as a valid Smart Endnode.

   For general TRILL Security Considerations, see [<a href="rfc6325.html" title='"Routing Bridges (RBridges): Base Protocol Specification"'>RFC6325</a>].  As stated
   there, since end stations are connected to edge RBridge ports by
   Ethernet, those ports MAY require end stations to authenticate
   themselves using [<a href="#ref-IEEE802.1X" title='"IEEE Standard for Local and metropolitan area networks -- Port-Based Network Access Control"'>IEEE802.1X</a>] and authenticate and encrypt traffic
   to/from the RBridge port with [<a href="#ref-IEEE802.1AE" title='"IEEE Standard for Local and metropolitan area networks -- Media Access Control (MAC) Security"'>IEEE802.1AE</a>].

   If they misbehave, Smart Endnodes can forge arbitrary ingress and
   egress nicknames in the TRILL headers of the TRILL Data packets they
   construct.  Decapsulating at egress RBridges or remote Smart Endnodes
   that believe such a forged ingress nickname would send future traffic
   destined for the inner-source MAC address of the TRILL data frame to
   the wrong edge RBridge if data-plane learning is in use.  Because of
   this, an RBridge port should not be configured to support Smart
   Endnodes unless the end stations on that link are trusted or can be
   adequately authenticated.

   As with any end station, Smart Endnodes can forge the outer MAC
   addresses of packets they send (see <a href="rfc6325.html#section-6">Section 6 of [RFC6325]</a>.)  Because
   they encapsulate TRILL Data packets, they can also forge inner MAC
   addresses.  The encapsulation performed by Smart Endnodes also means
   they can send data in any Data Label, which means they must be
   trusted in order to enforce a security policy based on Data Labels.



<span class="grey">Perlman, et al.              Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   The TRILL-Hello is a type of TRILL ES-IS and is defined in [<a href="rfc8171.html" title='"Transparent Interconnection of Lots of Links (TRILL): Edge Directory Assistance Mechanisms"'>RFC8171</a>].
   Receiving and processing TRILL-Hello for RBridges and Smart Endnodes
   would not bring more security and vulnerability issues than the TRILL
   ES-IS security defined in [<a href="rfc8171.html" title='"Transparent Interconnection of Lots of Links (TRILL): Edge Directory Assistance Mechanisms"'>RFC8171</a>].

   For added security against the compromise of data due to its
   misdelivery for any reason, including the above, end-to-end
   encryption and authentication should be considered; that is,
   encryption and authentication from source end station to destination
   end station.

   The mechanism described in this document requires Smart Endnodes to
   be aware of the MAC address(es) of the TRILL edge RBridge(s) to which
   they are attached and the egress RBridge nickname from which the
   destination of the packets is reachable.  With that information,
   Smart Endnodes can learn a substantial amount about the topology of
   the TRILL domain.  Therefore, there could be a potential security
   risk when the Smart Endnodes are not trusted or are compromised.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  IANA Considerations</span>

   IANA has allocated APPsub-TLV type numbers for the Smart-MAC and
   Smart-Parameters APPsub-TLVs.  The "TRILL APPsub-TLV Types under
   IS-IS TLV 251 Application Identifier 1" registry has been updated as
   follows.

              +-----------+-------------------+------------+
              |  Protocol |    Description    | Reference  |
              +-----------+-------------------+------------+
              |     22    |  Smart-Parameters |  <a href="rfc8384.html">RFC 8384</a>  |
              |     23    |     Smart-MAC     |  <a href="rfc8384.html">RFC 8384</a>  |
              +-----------+-------------------+------------+

                                  Table 1

















<span class="grey">Perlman, et al.              Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Normative%20References"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-IS-IS" name="ref-IS-IS">IS-IS</a>]    International Organization for Standardization,
              "Information technology -- Telecommunications and
              information exchange between systems -- Intermediate
              System to Intermediate System intra-domain routeing
              information exchange protocol for use in conjunction with
              the protocol for providing the connectionless-mode network
              service (ISO 8473)", ISO/IEC 10589:2002, Second Edition,
              2002.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC5310" name="ref-RFC5310">RFC5310</a>]  Bhatia, M., Manral, V., Li, T., Atkinson, R., White, R.,
              and M. Fanto, "IS-IS Generic Cryptographic
              Authentication", <a href="rfc5310.html">RFC 5310</a>, DOI 10.17487/RFC5310, February
              2009, &lt;<a href="https://www.rfc-editor.org/info/rfc5310">https://www.rfc-editor.org/info/rfc5310</a>&gt;.

   [<a id="ref-RFC6325" name="ref-RFC6325">RFC6325</a>]  Perlman, R., Eastlake 3rd, D., Dutt, D., Gai, S., and A.
              Ghanwani, "Routing Bridges (RBridges): Base Protocol
              Specification", <a href="rfc6325.html">RFC 6325</a>, DOI 10.17487/RFC6325, July 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6325">https://www.rfc-editor.org/info/rfc6325</a>&gt;.

   [<a id="ref-RFC7172" name="ref-RFC7172">RFC7172</a>]  Eastlake 3rd, D., Zhang, M., Agarwal, P., Perlman, R., and
              D. Dutt, "Transparent Interconnection of Lots of Links
              (TRILL): Fine-Grained Labeling", <a href="rfc7172.html">RFC 7172</a>,
              DOI 10.17487/RFC7172, May 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7172">https://www.rfc-editor.org/info/rfc7172</a>&gt;.

   [<a id="ref-RFC7176" name="ref-RFC7176">RFC7176</a>]  Eastlake 3rd, D., Senevirathne, T., Ghanwani, A., Dutt,
              D., and A. Banerjee, "Transparent Interconnection of Lots
              of Links (TRILL) Use of IS-IS", <a href="rfc7176.html">RFC 7176</a>,
              DOI 10.17487/RFC7176, May 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7176">https://www.rfc-editor.org/info/rfc7176</a>&gt;.

   [<a id="ref-RFC7357" name="ref-RFC7357">RFC7357</a>]  Zhai, H., Hu, F., Perlman, R., Eastlake 3rd, D., and O.
              Stokes, "Transparent Interconnection of Lots of Links
              (TRILL): End Station Address Distribution Information
              (ESADI) Protocol", <a href="rfc7357.html">RFC 7357</a>, DOI 10.17487/RFC7357,
              September 2014, &lt;<a href="https://www.rfc-editor.org/info/rfc7357">https://www.rfc-editor.org/info/rfc7357</a>&gt;.






<span class="grey">Perlman, et al.              Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


   [<a id="ref-RFC7780" name="ref-RFC7780">RFC7780</a>]  Eastlake 3rd, D., Zhang, M., Perlman, R., Banerjee, A.,
              Ghanwani, A., and S. Gupta, "Transparent Interconnection
              of Lots of Links (TRILL): Clarifications, Corrections, and
              Updates", <a href="rfc7780.html">RFC 7780</a>, DOI 10.17487/RFC7780, February 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7780">https://www.rfc-editor.org/info/rfc7780</a>&gt;.

   [<a id="ref-RFC8171" name="ref-RFC8171">RFC8171</a>]  Eastlake 3rd, D., Dunbar, L., Perlman, R., and Y. Li,
              "Transparent Interconnection of Lots of Links (TRILL):
              Edge Directory Assistance Mechanisms", <a href="rfc8171.html">RFC 8171</a>,
              DOI 10.17487/RFC8171, June 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8171">https://www.rfc-editor.org/info/rfc8171</a>&gt;.

   [<a id="ref-RFC8174" name="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="rfc2119.html">RFC</a>
              <a href="rfc2119.html">2119</a> Key Words", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc8174.html">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20Informative%20References"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-IEEE802.1AE" name="ref-IEEE802.1AE">IEEE802.1AE</a>]
              IEEE, "IEEE Standard for Local and metropolitan area
              networks -- Media Access Control (MAC) Security",
              IEEE 802.1AE.

   [<a id="ref-IEEE802.1X" name="ref-IEEE802.1X">IEEE802.1X</a>]
              IEEE, "IEEE Standard for Local and metropolitan area
              networks -- Port-Based Network Access Control",
              IEEE 802.1X.

   [<a id="ref-RFC7067" name="ref-RFC7067">RFC7067</a>]  Dunbar, L., Eastlake 3rd, D., Perlman, R., and I.
              Gashinsky, "Directory Assistance Problem and High-Level
              Design Proposal", <a href="rfc7067.html">RFC 7067</a>, DOI 10.17487/RFC7067, November
              2013, &lt;<a href="https://www.rfc-editor.org/info/rfc7067">https://www.rfc-editor.org/info/rfc7067</a>&gt;.

   [<a id="ref-RFC7379" name="ref-RFC7379">RFC7379</a>]  Li, Y., Hao, W., Perlman, R., Hudson, J., and H. Zhai,
              "Problem Statement and Goals for Active-Active Connection
              at the Transparent Interconnection of Lots of Links
              (TRILL) Edge", <a href="rfc7379.html">RFC 7379</a>, DOI 10.17487/RFC7379, October
              2014, &lt;<a href="https://www.rfc-editor.org/info/rfc7379">https://www.rfc-editor.org/info/rfc7379</a>&gt;.

Acknowledgements

   The contributions of the following persons are gratefully
   acknowledged: Mingui Zhang, Weiguo Hao, Linda Dunbar, Kesava Vijaya
   Krupakaran, and Andrew Qu.







<span class="grey">Perlman, et al.              Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc8384.html">RFC 8384</a>                  TRILL Smart Endnodes                 July 2018</span>


Authors' Addresses

   Radia Perlman
   Dell EMC
   176 South Street
   Hopkinton, MA  01748
   United States of America

   Phone: +1-206-291-367
   Email: radiaperlman@gmail.com


   Fangwei Hu
   ZTE Corporation
   No.889 Bibo Rd
   Shanghai  201203
   China

   Phone: +86 21 68896273
   Email: hu.fangwei@zte.com.cn


   Donald Eastlake
   Huawei Technologies
   1424 Pro Shop Court
   Davenport, FL 33896
   United States of America

   Phone: +1-508-333-2270
   Email: d3e3e3@gmail.com


   Ting Liao
   Huawei Technologies
   Nanjing, Jiangsu  210012
   China

   Email: liaoting1@huawei.com













Perlman, et al.              Standards Track                   [Page 17]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc8384 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:38 GMT --></html>