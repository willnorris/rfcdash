<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6586 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:29 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6586" name="DC.Identifier"/>
<meta content="This document discusses our experiences from moving a small number of
users to an IPv6-only network, with access to the IPv4-only parts of
the Internet via a NAT64 device. The document covers practical
experiences as well as roadblocks and opportunities for this type of a
network setup. The document also makes some recommendations about
where such networks are applicable and what should be taken into
account in the network design. The document also discusses further
work that is needed to make IPv6-only networking applicable in all
environments. This document is not an Internet Standards Track
specification; it is published for informational purposes." name="DC.Description.Abstract"/>
<meta content="Arkko, Jari" name="DC.Creator"/>
<meta content="Keranen, Ari" name="DC.Creator"/>
<meta content="April, 2012" name="DC.Date.Issued"/>
<meta content="Experiences from an IPv6-Only Network" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6586 - Experiences from an IPv6-Only Network</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6586.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6586" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-arkko-ipv6-only-experience" title="draft-arkko-ipv6-only-experience">draft-arkko-ipv...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6586" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6586" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6586" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                          J. Arkko
Request for Comments: 6586                                    A. Keranen
Category: Informational                                         Ericsson
ISSN: 2070-1721                                               April 2012


                 <span class="h1">Experiences from an IPv6-Only Network</span>

Abstract

   This document discusses our experiences from moving a small number of
   users to an IPv6-only network, with access to the IPv4-only parts of
   the Internet via a NAT64 device.  The document covers practical
   experiences as well as roadblocks and opportunities for this type of
   a network setup.  The document also makes some recommendations about
   where such networks are applicable and what should be taken into
   account in the network design.  The document also discusses further
   work that is needed to make IPv6-only networking applicable in all
   environments.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6586">http://www.rfc-editor.org/info/rfc6586</a>.
















<span class="grey">Arkko &amp; Keranen               Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Technology and Terminology ......................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. Network Setup ...................................................<a href="#page-4">4</a>
      <a href="#section-3.1">3.1</a>. The IPv6-Only Network ......................................<a href="#page-5">5</a>
      <a href="#section-3.2">3.2</a>. DNS Operation ..............................................<a href="#page-6">6</a>
   <a href="#section-4">4</a>. General Experiences .............................................<a href="#page-7">7</a>
   <a href="#section-5">5</a>. Experiences with IPv6-Only Networking ...........................<a href="#page-9">9</a>
      <a href="#section-5.1">5.1</a>. Operating Systems ..........................................<a href="#page-9">9</a>
      <a href="#section-5.2">5.2</a>. Programming Languages and APIs ............................<a href="#page-10">10</a>
      <a href="#section-5.3">5.3</a>. Instant Messaging and VoIP ................................<a href="#page-11">11</a>
      <a href="#section-5.4">5.4</a>. Gaming ....................................................<a href="#page-12">12</a>
      <a href="#section-5.5">5.5</a>. Music Services ............................................<a href="#page-13">13</a>
      <a href="#section-5.6">5.6</a>. Appliances ................................................<a href="#page-13">13</a>
      <a href="#section-5.7">5.7</a>. Other Differences .........................................<a href="#page-13">13</a>
   <a href="#section-6">6</a>. Experiences with NAT64 .........................................<a href="#page-13">13</a>
      <a href="#section-6.1">6.1</a>. IPv4 Address Literals .....................................<a href="#page-14">14</a>
      <a href="#section-6.2">6.2</a>. Comparison of Web Access via NAT64 to Other Methods .......<a href="#page-15">15</a>
   <a href="#section-7">7</a>. Future Work ....................................................<a href="#page-15">15</a>
   <a href="#section-8">8</a>. Conclusions and Recommendations ................................<a href="#page-16">16</a>
   <a href="#section-9">9</a>. Security Considerations ........................................<a href="#page-18">18</a>
   <a href="#section-10">10</a>. References ....................................................<a href="#page-19">19</a>
      <a href="#section-10.1">10.1</a>. Normative References .....................................<a href="#page-19">19</a>
      <a href="#section-10.2">10.2</a>. Informative References ...................................<a href="#page-19">19</a>
   <a href="#appendix-A">Appendix A</a>. Acknowledgments .......................................<a href="#page-21">21</a>










<span class="grey">Arkko &amp; Keranen               Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document discusses our experiences from moving a small number of
   users to an IPv6-only network, with access to the IPv4-only parts of
   the Internet via a NAT64 device.  This arrangement has been done with
   a permanent change in mind rather than as a temporary experiment,
   involves both office and home users, heterogeneous computing
   equipment, and varied applications.  We have learned both practical
   details, roadblocks and opportunities, as well as a more general
   understanding of when such a configuration can be recommended and
   what should be taken into account in the network design.  Note that
   this memo documents our experiences primarily from 2010.  As time
   goes by, the situation changes with updated software versions, newer
   products, and so on.

   The networks involved in this setup have been in dual-stack mode for
   a considerable amount of time, in one case, for over ten years.  Our
   IPv6 connectivity is stable and in constant use with no significant
   problems.  Given that the IETF is working on technology such as NAT64
   [<a href="rfc6144.html" title='"Framework for IPv4/IPv6 Translation"'>RFC6144</a>] and several network providers are discussing the
   possibility of employing IPv6-only networking, we decided to take our
   network beyond the "comfort zone" and make sure that we understand
   the implications of having no IPv4 connectivity at all.  This also
   allowed us to test a NAT64 device that is being developed by
   Ericsson.

   The main conclusion is that it is possible to employ IPv6-only
   networking, though there are a number of issues such as lack of IPv6
   support in some applications and bugs in untested parts of code.  As
   a result, dual-stack [<a href="rfc4213.html" title='"Basic Transition Mechanisms for IPv6 Hosts and Routers"'>RFC4213</a>] remains as our recommended model for
   general purpose networking at this time, but IPv6-only networking can
   be employed by early adopters or highly controlled networks.  The
   document also suggests actions to make IPv6-only networking
   applicable in all environments.  In particular, resolving problems
   with a few key applications would have a significant impact for
   enabling IPv6-only networking for large classes of users and
   networks.  It is important that the Internet community understands
   these deployment barriers and works to remove them.

   The rest of this document is organized as follows.  <a href="#section-2">Section 2</a>
   introduces some relevant technology and terms, <a href="#section-3">Section 3</a> describes
   the network setup, <a href="#section-4">Section 4</a> discusses our general experiences,
   <a href="#section-5">Section 5</a> discusses experiences related to having only IPv6
   networking available, and <a href="#section-6">Section 6</a> discusses experiences related to
   NAT64 use.  Finally, <a href="#section-7">Section 7</a> presents some of our ideas for future
   work, <a href="#section-8">Section 8</a> draws conclusions and makes recommendations on when
   and how one should employ IPv6-only networks, and <a href="#section-9">Section 9</a> discusses
   relevant security considerations.



<span class="grey">Arkko &amp; Keranen               Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Technology%20and%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Technology and Terminology</span>

   In this document, the following terms are used.  "NAT44" refers to
   any IPv4-to-IPv4 network address translation algorithm, both "Basic
   NAT" and "Network Address/Port Translator (NAPT)", as defined by
   [<a href="rfc2663.html" title='"IP Network Address Translator (NAT) Terminology and Considerations"'>RFC2663</a>].

   "Dual-stack" refers to a technique for providing complete support for
   both Internet protocols -- IPv4 and IPv6 -- in hosts and routers
   [<a href="rfc4213.html" title='"Basic Transition Mechanisms for IPv6 Hosts and Routers"'>RFC4213</a>].

   "NAT64" refers to a Network Address Translator - Protocol Translator
   defined in [<a href="rfc6144.html" title='"Framework for IPv4/IPv6 Translation"'>RFC6144</a>], [<a href="rfc6145.html" title='"IP/ICMP Translation Algorithm"'>RFC6145</a>], [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>], [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>], [<a href="rfc6147.html" title='"DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>], and
   [<a href="rfc6384.html" title='"An FTP Application Layer Gateway (ALG) for IPv6-to-IPv4 Translation"'>RFC6384</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Network%20Setup"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Network Setup</span>

   We have tested IPv6-only networking in two different network
   environments: office and home.  In both environments, all hosts had
   normal dual-stack native IPv4 and IPv6 Internet access already in
   place.  The networks were also already employing IPv6 in their
   servers and DNS records.  Similarly, the network was a part of
   whitelisting arrangement to ensure that IPv6-capable content
   providers would be able to serve their content to the network over
   IPv6.

   The office environment has heterogeneous hardware with PCs, laptops,
   and routers running Linux, BSD, Mac OS X, and Microsoft Windows
   operating systems.  Common uses of the network include email, Secure
   Shell (SSH), web browsing, and various instant messaging and Voice
   over IP (VoIP) applications.  The hardware in the home environment
   consists of PCs, laptops, and a number of server, camera, and sensor
   appliances.  The primary operating systems in this environment are
   Linux and Microsoft Windows operating systems.  Common applications
   include web browsing, streaming, instant messaging and VoIP
   applications, gaming, file storage, and various home control
   applications.  Both environments employ extensive firewalling
   practices, and filtering is applied for both IPv4 and IPv6 traffic.
   However, firewall capabilities, especially with older versions of
   firewall software, dictate some differences between the filtering
   applied for IPv4 and IPv6 since some features commonly supported for
   IPv4 were not yet implemented for IPv6.  In addition, in the home
   environment, the individual devices are directly accessible from the
   Internet on IPv6 (on select protocols such as SSH) but not on IPv4
   due to lack of available public IPv4 addresses.






<span class="grey">Arkko &amp; Keranen               Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   In both environments, volunteers had the possibility to opt-in for
   the IPv6-only network.  The number of users was small: there were
   roughly five permanent users and a dozen users who had been in the
   network at least for some amount of time.  Each user had to connect
   to the IPv6-only wired or wireless network and, depending on their
   software, possibly configure their computer by indicating that there
   is no IPv4 and/or setting DNS server addresses.  The users were also
   asked to report their experiences back to the organizers.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20The%20IPv6-Only%20Network"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  The IPv6-Only Network</span>

   The IPv6-only network was provided as a parallel network on the side
   of the already existing dual-stack network.  It was important to
   retain the dual-stack network for the benefit of those users who did
   not decide to opt-in and because we knew that there were some IPv4-
   only devices in the network.  A separate wired access network was
   created using Virtual Local Area Networks (VLANs).  This network had
   its own IPv6 prefix.  A separate wireless network, bridged to the
   wired network, was also created.  In our case, the new wireless
   network required additional access point hardware in order to
   accommodate advertising multiple wireless networks.  The simple
   access point model that we employed in these networks did not allow
   this on a single device, although many other access points support
   this.  All the secondary infrastructure resulted in some additional
   management burden and cost, however.  An added complexity was that
   the home network already employed two types of infrastructure, one
   for family members and another one for visitors.  In order to
   duplicate this model for the IPv6-only network, there are now four
   separate networks, with several access points on each.

   A stateful NAT64 [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>] with integrated DNS64 was installed on the
   edge of the IPv6-only networks.  No IPv4 routing or Dynamic Host
   Configuration Protocol (DHCP) was offered on these networks.  The
   NAT64 device sends Router Advertisements (RAs) [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>] from which
   the hosts learn the IPv6 prefix and can automatically configure IPv6
   addresses for them.  Each new IPv6-only network needed one new /64
   prefix to be used in these advertisements.  In addition, each NAT64
   device needed another /64 prefix to be used for the representation of
   IPv4 destinations in the IPv6-only network.  As a result, one IPv6-
   only network requires /63 of address space.  This space was easily
   available in our networks, as IPv6 allocations are purposefully made
   in sufficiently large blocks.  Additional address space needs can be
   accommodated from the existing block without registry involvement.
   Another option would have been to use the Well-Known Prefix [<a href="rfc6052.html" title='"IPv6 Addressing of IPv4/IPv6 Translators"'>RFC6052</a>]
   for the representation of IPv4 destinations in the IPv6-only network.
   In any case, the prefixes have to be listed in the intra-domain
   routing system so that they can be reached.  In one case, the




<span class="grey">Arkko &amp; Keranen               Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   increase from one block to multiple also made it necessary to employ
   an improved routing configuration.  In addition to routing, the new
   prefixes have to be listed in the appropriate firewall rules.

   Setting up NAT64 and DNS64 by themselves is easy and can be done
   quickly by an experienced network manager.  However, when duplicate
   infrastructure is needed for dual-stack and IPv6-only networks, the
   additional switches, cables, access points, etc., will take some
   amount of installation effort.  In addition, if whitelisting
   agreements or IPv6 ISP connectivity is needed, setting these up
   requires negotiations with external partners.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20DNS%20Operation"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  DNS Operation</span>

   Router Advertisements are used to carry DNS Configuration options
   [<a href="rfc6106.html" title='"IPv6 Router Advertisement Options for DNS Configuration"'>RFC6106</a>], listing the DNS64 as the DNS server the hosts should use.
   In addition, aliases were added to the DNS64 device to allow it to
   receive packets on the well-known DNS server addresses that Windows
   operating systems use (fec0:0:0:ffff::1, fec0:0:0:ffff::2, and fec0:
   0:0:ffff::3).  At a later stage, support for stateless DHCPv6
   [<a href="rfc3736.html" title='"Stateless Dynamic Host Configuration Protocol (DHCP) Service for IPv6"'>RFC3736</a>] was added.  We do recommend enabling <a href="rfc6106.html">RFC 6106</a>, well-known
   addresses, and stateless DHCPv6 in order to maximize the likelihood
   of different types of IPv6-only hosts being able to use DNS without
   manual configuration.  DNS server discovery was never a problem in
   dual-stack networks, because DNS servers on the IPv4 side can easily
   provide IPv6 information (AAAA records) as well.  With IPv6-only
   networking, it becomes crucial that the local DNS server can also be
   reached via IPv6.  In principle, this is exactly the same as needing
   IPv4-based DNS and DNS discovery in IPv4-only networks.  However, in
   IPv6, the discovery mechanisms are somewhat more complicated because
   there are several alternative techniques.

   When a host served by the DNS64 asks for a domain name that does not
   have a AAAA (IPv6 address) record, but has an A (IPv4 address)
   record, a AAAA record is synthesized from the A record (as defined
   for DNS64 in [<a href="rfc6147.html" title='"DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>]) and sent in the DNS response to the host.  IP
   packets sent to this synthesized address are routed via the NAT64,
   translated to IPv4 by the NAT64, and forwarded to the queried host's
   IPv4 address; return traffic is translated back from IPv4 to IPv6 and
   forwarded to the host behind the NAT64 (as described in [<a href="rfc6144.html" title='"Framework for IPv4/IPv6 Translation"'>RFC6144</a>]).
   This allows the hosts in the IPv6-only network to contact any host in
   the IPv4 Internet as long as the hosts in the IPv4 Internet have DNS
   address records.

   The NAT64 devices have standard dual-stack connectivity and their
   DNS64 function can use both IPv4 and IPv6 when requesting information
   from DNS.  A destination that has both an A and AAAA records is not
   treated in any special manner, because the hosts in the IPv6-only



<span class="grey">Arkko &amp; Keranen               Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   network can contact the destination over IPv6.  Destinations with
   only an A record will be given a synthesized AAAA record as explained
   above.  However, in one of our open visitor networks that is sharing
   the infrastructure with the home network, we needed a special
   arrangement.  Currently, the home network obtains its IPv6
   connectivity through a tunnel via the office network, and it is
   undesirable to allow outsiders using the visitor network to generate
   traffic through the office network, even if the traffic is just
   passing by and forwarded to the IPv6 Internet.  As a result, in the
   visitor network, there is a special IPv6-only to IPv4-only
   configuration where the DNS64 never asks for AAAA records and always
   generates synthesized records.  Therefore, no traffic from the
   visitor network, even if it is destined to the IPv6 Internet, is
   routed via the office network, but traffic from the home network can
   still use the IPv6 connectivity provided by the office network.

      Note: This configuration may also be useful for other purposes.
      For instance, one drawback of the standard behavior is that if a
      destination publishes AAAA records but has bad IPv6 connectivity,
      the hosts in the IPv6-only network have no fallback.  In the dual-
      stack model, a host can always try IPv4 if the IPv6 connection
      fails.  In the special configuration, IPv6 is only used internally
      at the site but never across the Internet, eliminating this
      problem.  This is not a recommended mode of operation, but it is
      interesting to note that it may solve some issues.

   Note that in NAT64 (unlike in its older variant [<a href="rfc4966.html" title='"Reasons to Move the Network Address Translator - Protocol Translator (NAT-PT) to Historic Status"'>RFC4966</a>]) it is
   possible to decouple the packet translation, IPv6 routing, and DNS64
   functions.  Since clients are configured to use a DNS64 as their DNS
   server, there is no need for having an Application Layer Gateway
   (ALG) on the path sniffing and spoofing DNS packets.  This decoupling
   possibility was implemented by one of our users, as he is outside of
   our physical network and wants to communicate directly on IPv6 where
   it is possible without having to go through our central network
   equipment.  His DNS queries go to our DNS64 and to establish
   communications to an IPv4 destination our central NAT64 is used.  If
   there is a need to translate some packets, these packets find the
   translator device through normal IPv6 routing means since the
   synthesized addresses have our NAT64's prefix.  However, for non-
   synthesized IPv6 addresses the packets are routed directly to the
   destination.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20General%20Experiences"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  General Experiences</span>

   Based on our experiences, it is possible to live (and work) with an
   IPv6-only network.  For instance, at the time of this writing, one of
   the authors has been in an IPv6-only network for about a year and a
   half and has had no major problems.  Most things work well in the new



<span class="grey">Arkko &amp; Keranen               Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   environment; for example, we have been unable to spot any practical
   difference in the web browsing (HTTP and HTTPS) experience.  Also,
   email, software upgrades, operating system services, many chat
   systems, and media streaming work well.  On certain Symbian mobile
   handsets that we tried, all applications work even on an IPv6-only
   network.  In another case, with the Android operating system, all the
   basic applications worked without problems.  In order to make the
   latter handset architecture support IPv6-only networks, however, a
   small change was needed in the operating system so that it could
   discover IPv6-only DNS servers.

   However, in general, there is some pain involved and thus IPv6-only
   networking is not suitable for everyone just yet.  Switching IPv4 off
   does break many things as well.  Some of the users in our environment
   left due to these issues, as they missed some key feature that they
   needed from their computing environment.  These issues fall in
   several categories:

   Bugs

      We saw many issues that can be classified as bugs, likely related
      to so few people having tried the software in question in an IPv6-
      only network.  For instance, some operating system facilities
      support IPv6 but have annoying problems that are only uncovered in
      IPv6-only networking.

   Lack of IPv6 Support

      We also saw many applications that do not support IPv6 at all.
      These range from minor, old tools (such as the Unix dict(1)
      command) to major applications that are important to our users
      (such as Skype) and even to entire classes of applications (many
      games have issues).  As our experiment continued, we have seen
      improvements in some areas, such as gaming.

   Protocol, Format, and Content Problems

      There are many protocols that carry IP addresses in them, and
      using these protocols through a translator can lead to problems.
      In our current network setup, we did not employ any ALGs except
      for FTP [<a href="rfc6384.html" title='"An FTP Application Layer Gateway (ALG) for IPv6-to-IPv4 Translation"'>RFC6384</a>].  However, we have observed a number of protocol
      issues with IPv4 addresses.  For instance, some instant messaging
      services do not work due to this.  Finally, content on some web
      pages may refer to IPv4 address literals (i.e., plain IP addresses
      instead of host and domain names).  This renders some links
      inaccessible in an IPv6-only network.  While this problem is
      easily quantifiable in measurements, the authors have run into it
      only a couple of times during real-life web browsing.



<span class="grey">Arkko &amp; Keranen               Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   Firewall Issues

      We also saw a number of issues related to lack of features in IPv6
      support in firewalls.  In particular, while we did not experience
      any Maximum Transmission Unit (MTU) and fragmentation problems in
      our networks, there is potential for generating problems, as the
      support for IPv6 fragment headers is not complete in all firewalls
      and the NAT64 specifications call for use of the fragment header
      (even in situations where fragmentation has not yet occurred,
      e.g., if an IPv4 packet that is not a fragment does not have the
      Don't Fragment (DF) bit set).

   In general, most of the issues relate to poor testing and lack of
   IPv6 support in some applications.  IPv6 itself and NAT64 did not
   cause any major issues for us, once our setup and NAT64 software was
   stable.  In general, the authors feel that with the exception of some
   applications, our experience with translation to reach the IPv4
   Internet has been equal to our past experiences with NAT44-based
   Internet access.  While translation implies loss of end-to-end
   connectivity, in practice, direct connectivity has also not been
   available to the authors in the IPv4 Internet for a number of years.

   It should be noted that the experience with a properly configured set
   of ALGs and workarounds such as proxies may be different.  Some of
   the problems we encountered can be solved through these means.  For
   instance, a problematic application can be configured to use a proxy
   that in turn has both IPv4 and IPv6 access.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Experiences%20with%20IPv6-Only%20Networking"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Experiences with IPv6-Only Networking</span>

   The overall experience was as explained above.  The remainder of this
   section discusses specific issues with different operating systems,
   programming languages, applications, and appliances.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Operating%20Systems"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Operating Systems</span>

   Even operating systems have some minor problems with IPv6.  For
   example, in Linux, Router Advertisement (RA) information is not
   automatically updated when the network changes while the computer is
   on, and this requires an unnecessary suspend/resume cycle to restore
   its proper state.  We have also had issues with the rdnssd daemon,
   which first does not come as a default feature in Ubuntu and does not
   always appear to work reliably.  To resolve these issues, we had to
   configure the network manager to use a specific server address.
   Later, a new version of the Linux distribution that we used solved
   these problems, even if some problems still remained.  For instance,
   in the latest Ubuntu Long-Term Support release (10.04), we have
   experienced that the network manager by default returns to an



<span class="grey">Arkko &amp; Keranen               Informational                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   available IPv4 wireless network even if there is a previously used
   IPv6-only network available and the IPv4 network has no global
   connectivity before a web-based login is completed.

   In Mac OS X (Snow Leopard), the network manager needed to be
   explicitly told not to expect IPv4.  A more annoying issue was that
   in order to switch between an IPv6-only and IPv4-only network, these
   settings had to be manually changed, making it undesirable for Mac OS
   X users to employ IPv6-only networks.

   Also, on Microsoft Windows 7, we experienced problems when relying on
   default, well-known DNS server addresses: without manual
   configuration, the host was unable to use the DNS addresses, even
   though the system displays them as current DNS server addresses.

   Latest versions of the Android operating system support IPv6 on its
   wireless LAN interface, but due to lack of DNS discovery mechanisms,
   this does not work in IPv6-only networks.  We corrected this,
   however, and prototype phones in our networks work well now, even in
   an IPv6-only environment.  This change, DNS Discovery Daemon (DDD)
   now exists as open source software.  Interestingly, all applications
   that we have tried so far seem to work without problems with IPv6-
   only connectivity, though no exhaustive testing was done, nor did we
   try known troublesome applications.

   While all these operating systems (or their predecessors) have
   already supported IPv6 for a number of years, these kinds of small
   glitches seem to imply that they have not been thoroughly tested in
   networks lacking IPv4 connectivity.  At the very least, their
   usability leaves something to be desired.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Programming%20Languages%20and%20APIs"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Programming Languages and APIs</span>

   For applications to be able to support IPv6, they need access to the
   necessary APIs.  Luckily, IPv6 seems to be well supported by a
   majority of the commonly used APIs.  The Perl programming language
   used to be an exception with only partial IPv6 support up to the
   version 5.14 (released May 14, 2011).  This version finally includes
   full IPv6 support, with that in the core libraries and older modules
   being updated as well.  With previous versions of Perl, while IPv6
   socket support is available as an extension module, it may not be
   possible to install this module without administrative rights.  This
   has also resulted in other networking core libraries (such as FTP and
   SMTP) not being able to fully support IPv6; thus, many existing Perl
   programs using network functionality may not work properly in an
   IPv6-only environment.





<span class="grey">Arkko &amp; Keranen               Informational                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Instant%20Messaging%20and%20VoIP"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Instant Messaging and VoIP</span>

   By far, the biggest complaint from our group of users was that Skype
   stopped working.  In some environments, even Skype can be made to
   work through a proxy configuration, and this was verified in our
   setting but not used as a permanent solution.  More generally, we
   tested a number of instant messaging applications in an IPv6-only
   network with NAT64; the test results can be found in Table 1.  The
   versions used in the tests were the latest versions available in the
   summer of 2010.

     SYSTEM                                 STATUS

     Facebook on the web (http)               OK
     Facebook via a client (xmpp)             OK
     Jabber.org chat service (xmpp)           OK
     Gmail chat on the web (http)             OK
     Gmail chat via a client (xmpp)           OK
     Google Talk client                     NOT OK
     AIM (AOL)                              NOT OK
     ICQ (AOL)                              NOT OK
     Skype                                  NOT OK
     MSN                                    NOT OK
     Webex                                  NOT OK
     Sametime                              OK (NOW)

   Table 1. Instant Messaging Applications in an IPv6-Only Network

   Packet tracing revealed that the issues in AIM, ICQ, and MSN appear
   to be related to passing literal IPv4 addresses in the protocol.  It
   remains to be determined whether this can be solved through
   configuration, proxies, or ALGs.  The problem with the Google Talk
   client is that the software does not support IPv6 connections at this
   time.  We are continuing our tests with additional applications, and
   we have also seen changes over time.  For instance, a new version of
   Sametime suddenly started working with IPv6-only networks, presumably
   due to the new version being more careful with the use of DNS names
   as opposed to IPv4 addresses.  One problem in running these tests is
   to ensure that we can distinguish IPv6 and NAT64 issues from other
   issues, such as a generic issue on a given operating system platform.

   Some of these problems are solvable, however.  For instance, we used
   localhost as a proxy for Skype, and then used SSH to tunnel to an
   external web proxy, bypassing Skype's limitations with regard to
   connecting to IPv6 destinations or even IPv6 proxies.






<span class="grey">Arkko &amp; Keranen               Informational                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Gaming"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Gaming</span>

   Another class of applications that we tried was games.  We tried both
   web-based gaming and standalone gaming applications that have
   "network", "Internet", or "LAN" gaming modes.  The results are shown
   in Table 2.

     SYSTEM                                           STATUS

     Web-based (e.g., armorgames)                       OK
     Runescape (on the web)                           NOT OK
     Flat out 2                                       NOT OK
     Battlefield                                      NOT OK
     Secondlife                                       NOT OK
     Guild Wars                                       NOT OK
     Age of Empires                                   NOT OK
     Star Wars: Empire at War                         NOT OK
     Crysis                                           NOT OK
     Lord of the Rings: Conquest                      NOT OK
     Rome Total War                                   NOT OK
     Lord of the Rings: Battle for Middle Earth 2     NOT OK

   Table 2. Gaming Applications in an IPv6-Only Network

   Most web-based games worked well, as expected from our earlier good
   general web experience.  However, we were also able to find one web-
   based game that failed to work (Runescape).  This particular game is
   a Java application that fails on an attempt to perform a HTTP GET
   request.  The reason remains unclear, but a likely theory is the use
   of an IPv4-literal in the application itself.

   The experience with standalone games was far more discouraging.
   Without exception, all games failed to enable either connections to
   ongoing games in the Internet or even LAN-based connections to other
   computers in the same IPv6-only LAN segment.  This is somewhat
   surprising, and the results require further verification.
   Unfortunately, the games provide no diagnostics about their
   operation, so it is hard to guess what is going on.  It is possible
   that their networking code employs older APIs that cannot use IPv6
   addresses [<a href="rfc4038.html" title='"Application Aspects of IPv6 Transition"'>RFC4038</a>].  The inability to provide any LAN-based
   connectivity is even more surprising, as this must mean that they are
   unable to use IPv4 link local connectivity, which should have been
   available to the devices (IPv4 was not blocked; just that no DHCP
   answers were provided on IPv4).

   While none of the standalone games we tested in the summer of 2010
   were IPv6-capable, the situation improved during the experiment.  For
   instance, a popular online game, World of Warcraft, now has IPv6



<span class="grey">Arkko &amp; Keranen               Informational                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   support in its latest version and some of the older games that have
   been re-released as open source (e.g., Quake) have been patched IPv6-
   capable by the open source community.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20Music%20Services"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  Music Services</span>

   Most of the web-based music services appear to work fine, presumably
   because they employ TCP and HTTP as a transport.  One notable
   exception is Spotify, which requires communication to specific IPv4
   addresses.  A proxy configuration similar to the one we used for
   Skype makes it possible to use Spotify as well.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.6.%20%20Appliances"></a><a class="selflink" href="#section-5.6" name="section-5.6">5.6</a>.  Appliances</span>

   There are also problems with different appliances such as webcams.
   Many of them do not support IPv6; hence, they will not work in an
   IPv6-only network.  Also, not all firewalls support IPv6.  Or even if
   they do, they may still experience issues with some aspects of IPv6
   such as fragments.

   Some of these issues are easily solved when the appliance works as a
   server, such as what most webcams and our sensor gateway devices do.
   We placed the appliance in the IPv4 part of the network (in this
   case, in private address space), added its name to the local DNS, and
   simply allowed devices from the IPv6-only network reach it through
   NAT64.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.7.%20%20Other%20Differences"></a><a class="selflink" href="#section-5.7" name="section-5.7">5.7</a>.  Other Differences</span>

   One thing that becomes simplified in an IPv6-only network is source
   address selection [<a href="rfc3484.html" title='"Default Address Selection for Internet Protocol version 6 (IPv6)"'>RFC3484</a>].  As there is no IPv4 connectivity, the
   host only needs to consider its IPv6 source address.  For global
   communications, there is typically just one possible source address.

   Some networks that advertise IPv6 addresses in their DNS records in
   reality have some problems.  For instance, a popular short URL
   forwarding service has advertised a deprecated IPv4-compatible IPv6
   address [<a href="rfc4291.html" title='"IP Version 6 Addressing Architecture"'>RFC4291</a>] in its AAAA record, making it impossible for this
   site to be reached unless either IPv4 or NAT64 translation to an IPv4
   destination is used.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Experiences%20with%20NAT64"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Experiences with NAT64</span>

   After correcting some initial bugs and stability issues, the NAT64
   operation itself has been relatively problem-free.  There have been
   no unexplained DNS problems or lost sessions.  With the exception of
   the specific applications mentioned above and IPv4 literals, the user




<span class="grey">Arkko &amp; Keranen               Informational                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   experience has been in line with using IPv4 Internet through a NAT44
   device.  These failures with the specific applications are clearly
   very different from the IPv4 experience, however.

   The rest of this section discusses our measurements on specific
   issues.  These tests and measurements were performed during the year
   2011 and present a snapshot of the situation on that time.  More up-
   to-date measurement information can be found from various online
   tools such as [<a href="#ref-HE-IPv6" title='"Global IPv6 Deployment Progress Report"'>HE-IPv6</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20IPv4%20Address%20Literals"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  IPv4 Address Literals</span>

   While browsing in general works, IPv4 literals embedded in the HTML
   code may break some parts of the web pages when using IPv6-only
   access.  This happens because the DNS64 cannot synthesize AAAA
   records for the literals since the addresses are not queried from the
   DNS.  Luckily, the IPv4 literals seem to be fairly rarely
   encountered, at least so that they would be noticed, with regular web
   surfing.  The authors have run into this issue only few times during
   the entire experiment.  Only two of those cases had a practical
   impact (in YouTube, some of the third-party applications for
   downloading content did not work and one hotel's web page had a
   literal link to its reservation system).

   We have attempted to measure the likelihood of running into an IPv4
   literal in the web.  To do this, we took the top 1,000 and 10,000 web
   sites from the Alexa popular web site list.  With 1,000 top sites,
   0.2% needed an IPv4 literal to render all components in their top
   page (e.g., images, videos, JavaScript, and Cascading Style Sheet
   (CSS) files).  With 10,000 top sites, this number increases to 2%.

   However, it is not clear what conclusions can be made about this.  It
   is often the case that there are unresolvable or inaccessible
   components on a web page anyway for various reasons, and to
   understand the true impact we would have to know how "important" a
   given page component was.  Also, we did not measure the number of
   links with IPv4 literals on these pages, nor did we attempt to search
   the site in any thorough manner for these literals.

   As noted, personal anecdotal evidence says that IPv4 literals are not
   a big problem.  But clearly, cleaning the most important parts of the
   web from IPv4 literals would be useful.  With tools such as the
   popular web site list, some user pressure, and co-operation from the
   content providers the most urgent part of the problem could hopefully
   be solved as a one-time effort.  While IPv4 literals still exist in
   the web, using a suitable HTTP proxy (e.g., [<a href="#ref-ADD-LITERALS" title='"Coping with IP Address Literals in HTTP URIs with IPv6/IPv4 Translators"'>ADD-LITERALS</a>]) can help
   to cope with them.




<span class="grey">Arkko &amp; Keranen               Informational                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Comparison%20of%20Web%20Access%20via%20NAT64%20to%20Other%20Methods"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Comparison of Web Access via NAT64 to Other Methods</span>

   We also compared how well the web works behind a NAT64 compared to
   IPv4-only and native IPv6 access.  For this purpose, we used wget to
   go through the same top web site lists as described in <a href="#section-6.1">Section 6.1</a>,
   again downloading everything needed to render their front page.  The
   tests were repeated and average failure rate was calculated over all
   of the runs.  Separate tests were conducted with an IPv4-only
   network, an IPv6-only network, and an IPv6-only network with NAT64.

   When accessed with the IPv4-only network, our tests show that 1.9% of
   the sites experienced some sort of error or failure.  The failure
   could be that the whole site was not accessible, or just that a
   single image (e.g., an advertisement banner) was not loaded properly.
   It should also be noted that access through wget is somewhat
   different from a regular browser: some web sites refuse to serve
   content to wget, browsers typically have DNS heuristics to fill in
   "www." in front of a domain name where needed, and so on.  In
   addition to missing advertisement banners, temporary routing glitches
   and other mistakes, these differences also help to explain the reason
   for the high baseline error rate in this test.  It should also be
   noted that variations in wget configuration options produced highly
   different results, but we believe that the options we settled on bear
   closest resemblance to real-world browsing.

   When we tried to access the same sites with native IPv6 (without
   NAT64), 96% of the sites failed to load correctly.  This was as
   expected, given that most of the Internet content is not available on
   IPv6.  The few exceptions included, for instance, sites managed by
   Google.

   When the sites were accessed from the IPv6-only network via a NAT64
   device, the failure rate increased to 2.1%.  Most of these failures
   appear to be due to IPv4 address literals, and the increased failure
   rate matches that of IPv4 literal occurrence in the same set of top
   web sites.  With the top 10,000 sites, the failure rate with NAT64
   increases similarly to our test on IPv4 address literals.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Future%20Work"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Future Work</span>

   One important set of measurements remains for future work.  It would
   be useful to understand the effect of DNS64 and NAT64 on response
   time and end-to-end communication delays.  Some users have anecdotal
   reports of slow web browsing response times, but we have been unable
   to determine if this was due to the IPv6-only network mechanisms or
   for some other reason.  Measurements on pure DNS response times and
   packet round-trip delays does not show a significant difference from
   a NAT44 environment.  It would be particularly interesting to measure



<span class="grey">Arkko &amp; Keranen               Informational                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   delays in the context of dual-stack versus NAT64-based IPv6-only
   networking.  When using dual-stack, broken IPv6 connectivity can be
   repaired by falling back to IPv4 use.  With NAT64, this is not always
   possible as discussed in <a href="#section-3.2">Section 3.2</a>.

   Also, more programs, especially VoIP and Peer-to-Peer (P2P)
   applications should be tested with NAT64.  In addition, tunneling and
   mobility protocols should be tested and especially Virtual Private
   Network (VPN) protocols and applications would deserve more thorough
   investigation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Conclusions%20and%20Recommendations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Conclusions and Recommendations</span>

   The main conclusion is that it is possible to employ IPv6-only
   networking.  For large classes of applications, there are no
   downsides or the downsides are negligible.  We have been unable to
   spot any practical difference in the web browsing experience, for
   instance.  Additionally, IPv6 usage -- be it in dual-stack or IPv6-
   only form -- comes with inherent advantages, such as enabling direct
   end-to-end connectivity.  In our case, we employed this by enabling
   direct connectivity to devices in a home network from anywhere in the
   (IPv6) Internet.  There are, however, a number of issues as well,
   such as lack of IPv6 support in some applications or bugs in untested
   parts of the code.

   Our experience with IPv6-only networking confirms that dual stack
   should still be our recommended model for general purpose networking
   at this point in time.  However, IPv6-only networking can be employed
   by early adopters or highly controlled networks.  One example of such
   a controlled network is a mobile network with operator-driven
   selection of handsets.  For instance, on some handsets that we
   tested, we were unable to see any functional difference between IPv4
   and IPv6.

   Our recommendations apply at the present time.  With effort and time,
   deployment barriers can be removed and IPv6-only networking becomes
   applicable in all networking situations.

   Some of the improvements are already in process in the form of new
   products and additional IPv6 support.  For instance, we expect that
   the handset market will have a much higher number of IPv6-capable
   devices in the near future.  However, some of the changes do not come
   without the community spending additional effort.  We have identified
   a number of actions that should be taken to improve the state of
   IPv6-only networking.  These include the following:






<span class="grey">Arkko &amp; Keranen               Informational                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   DNS Discovery

      The state of DNS discovery continues to be one of the main
      barriers for easy adoption of IPv6-only networking.  Since DNS
      discovery is not a problem in dual-stack networking, there has
      been too little effort in testing and deploying the necessary
      components.  For instance, it would be useful if RA-based DNS
      discovery came as a standard feature and not as an option in Linux
      distributions.  Our hope is that recent standardization of the RA-
      based DNS discovery at the IETF will help this happen.  Other
      operating systems face similar issues.  The authors believe that
      at this time, prudent operational practices call for maximizing
      the number of offered automatic configuration mechanisms on the
      network side.  It might be useful for an IETF document to provide
      guidance on operating DNS in IPv6-only networks.

   Network Managers

      Other key software components are the various network management
      and attachment tools in operating systems.  These tools generally
      have the required functionality, but do not always appear to have
      been tested very extensively on IPv6, or let alone IPv6-only
      networks.  Further work is required here.

   Firewalls

      More work is needed to ensure that IPv6 is supported in equal
      manner in various firewall products.

   Application Support

      By far, the most important action, at least for our group of
      users, would be to bring some key applications (e.g., instant
      messaging and VoIP applications and games) to a state where they
      can be easily run on IPv6-only networks and behind a NAT64.  To
      facilitate this, application programmers should use IP-version-
      agnostic APIs so that applications automatically use IPv4 or IPv6
      depending on what is available.  In some cases, it may also be
      necessary to add support for new types of ALGs.

   IPv4 Literals

      The web should be cleaned of IPv4 literals.  Also, IPv4 literals
      should be avoided in application protocol signaling messages.







<span class="grey">Arkko &amp; Keranen               Informational                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   Measurements and Analysis

      It is also important to continue with testing, measurement, and
      analysis of which Internet technologies work in IPv6-only
      networks, to what extent, at what speed, and where the remaining
      problems are.

   Guidelines

      It is also useful to provide guidance for network administrators
      and users on how to turn on IPv6-only networking.

   As can be seen from the above list, there are only minor things that
   can be done through standardization.  Most of the effort is practical
   and centers around improving various implementations.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   By itself, the use of IPv6 instead of IPv4 does not make a big
   security difference.  The main security requirement is that,
   naturally, network security devices need to be able to deal with IPv6
   in these networks.  This is already required in all dual-stack
   networks.  As noted, it is important, e.g., to ensure firewall
   capabilities.  Security considerations for NAT64 and DNS64 are
   discussed in [<a href="rfc6146.html" title='"Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers"'>RFC6146</a>] and [<a href="rfc6147.html" title='"DNS64: DNS Extensions for Network Address Translation from IPv6 Clients to IPv4 Servers"'>RFC6147</a>].

   In our experience, many of the critical security functions in a
   network end up being on the dual-stack part of the network anyway.
   For instance, our mail servers obviously still have to be able to
   communicate with both the IPv4 and IPv6 Internet, and as a result,
   they and the associated spam and filtering components are not in the
   IPv6-only part of the network.



















<span class="grey">Arkko &amp; Keranen               Informational                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC2663" name="ref-RFC2663">RFC2663</a>]       Srisuresh, P. and M. Holdrege, "IP Network Address
                   Translator (NAT) Terminology and Considerations",
                   <a href="rfc2663.html">RFC 2663</a>, August 1999.

   [<a id="ref-RFC3484" name="ref-RFC3484">RFC3484</a>]       Draves, R., "Default Address Selection for Internet
                   Protocol version 6 (IPv6)", <a href="rfc3484.html">RFC 3484</a>, February 2003.

   [<a id="ref-RFC3736" name="ref-RFC3736">RFC3736</a>]       Droms, R., "Stateless Dynamic Host Configuration
                   Protocol (DHCP) Service for IPv6", <a href="rfc3736.html">RFC 3736</a>,
                   April 2004.

   [<a id="ref-RFC4213" name="ref-RFC4213">RFC4213</a>]       Nordmark, E. and R. Gilligan, "Basic Transition
                   Mechanisms for IPv6 Hosts and Routers", <a href="rfc4213.html">RFC 4213</a>,
                   October 2005.

   [<a id="ref-RFC6106" name="ref-RFC6106">RFC6106</a>]       Jeong, J., Park, S., Beloeil, L., and S. Madanapalli,
                   "IPv6 Router Advertisement Options for DNS
                   Configuration", <a href="rfc6106.html">RFC 6106</a>, November 2010.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-RFC4038" name="ref-RFC4038">RFC4038</a>]       Shin, M-K., Hong, Y-G., Hagino, J., Savola, P., and
                   E. Castro, "Application Aspects of IPv6 Transition",
                   <a href="rfc4038.html">RFC 4038</a>, March 2005.

   [<a id="ref-RFC4291" name="ref-RFC4291">RFC4291</a>]       Hinden, R. and S. Deering, "IP Version 6 Addressing
                   Architecture", <a href="rfc4291.html">RFC 4291</a>, February 2006.

   [<a id="ref-RFC4861" name="ref-RFC4861">RFC4861</a>]       Narten, T., Nordmark, E., Simpson, W., and H.
                   Soliman, "Neighbor Discovery for IP version 6
                   (IPv6)", <a href="rfc4861.html">RFC 4861</a>, September 2007.

   [<a id="ref-RFC4966" name="ref-RFC4966">RFC4966</a>]       Aoun, C. and E. Davies, "Reasons to Move the Network
                   Address Translator - Protocol Translator (NAT-PT) to
                   Historic Status", <a href="rfc4966.html">RFC 4966</a>, July 2007.

   [<a id="ref-RFC6052" name="ref-RFC6052">RFC6052</a>]       Bao, C., Huitema, C., Bagnulo, M., Boucadair, M., and
                   X. Li, "IPv6 Addressing of IPv4/IPv6 Translators",
                   <a href="rfc6052.html">RFC 6052</a>, October 2010.

   [<a id="ref-RFC6144" name="ref-RFC6144">RFC6144</a>]       Baker, F., Li, X., Bao, C., and K. Yin, "Framework
                   for IPv4/IPv6 Translation", <a href="rfc6144.html">RFC 6144</a>, April 2011.





<span class="grey">Arkko &amp; Keranen               Informational                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


   [<a id="ref-RFC6145" name="ref-RFC6145">RFC6145</a>]       Li, X., Bao, C., and F. Baker, "IP/ICMP Translation
                   Algorithm", <a href="rfc6145.html">RFC 6145</a>, April 2011.

   [<a id="ref-RFC6146" name="ref-RFC6146">RFC6146</a>]       Bagnulo, M., Matthews, P., and I. van Beijnum,
                   "Stateful NAT64: Network Address and Protocol
                   Translation from IPv6 Clients to IPv4 Servers",
                   <a href="rfc6146.html">RFC 6146</a>, April 2011.

   [<a id="ref-RFC6147" name="ref-RFC6147">RFC6147</a>]       Bagnulo, M., Sullivan, A., Matthews, P., and I. van
                   Beijnum, "DNS64: DNS Extensions for Network Address
                   Translation from IPv6 Clients to IPv4 Servers",
                   <a href="rfc6147.html">RFC 6147</a>, April 2011.

   [<a id="ref-RFC6384" name="ref-RFC6384">RFC6384</a>]       van Beijnum, I., "An FTP Application Layer Gateway
                   (ALG) for IPv6-to-IPv4 Translation", <a href="rfc6384.html">RFC 6384</a>,
                   October 2011.

   [<a id="ref-ADD-LITERALS" name="ref-ADD-LITERALS">ADD-LITERALS</a>]  Wing, D., "Coping with IP Address Literals in HTTP
                   URIs with IPv6/IPv4 Translators", Work in Progress,
                   March 2010.

   [<a id="ref-HE-IPv6" name="ref-HE-IPv6">HE-IPv6</a>]       Hurricane Electric, "Global IPv6 Deployment Progress
                   Report", February 2012,
                   &lt;<a href="http://bgp.he.net/ipv6-progress-report.cgi">http://bgp.he.net/ipv6-progress-report.cgi</a>&gt;.



























<span class="grey">Arkko &amp; Keranen               Informational                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6586.html">RFC 6586</a>                  IPv6-Only Experiences               April 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Acknowledgments"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Acknowledgments</span>

   The authors would like to thank the many people who have engaged in
   discussions around this topic, and particularly the people who were
   involved in building some of the new tools used in our network, our
   users who were interested in going where only few had dared to
   venture before, or people who helped us in this effort.  In
   particular, we would like to thank Martti Kuparinen, Tero Kauppinen,
   Heikki Mahkonen, Jan Melen, Fredrik Garneij, Christian Gotare, Teemu
   Rinta-Aho, Petri Jokela, Mikko Sarela, Olli Arkko, Lasse Arkko, and
   Cameron Byrne.  Also, Marcelo Braun, Iljitsch van Beijnum, Miika
   Komu, and Jouni Korhonen have provided useful discussion and comments
   on the document.

Authors' Addresses

   Jari Arkko
   Ericsson
   Jorvas  02420
   Finland

   EMail: jari.arkko@piuha.net


   Ari Keranen
   Ericsson
   Jorvas  02420
   Finland

   EMail: ari.keranen@ericsson.com





















Arkko &amp; Keranen               Informational                    [Page 21]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6586 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:29 GMT --></html>