<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3807 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:44 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-rao-sigtran-v5ua" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:3807" name="DC.Identifier"/>
<meta content="June, 2004" name="DC.Date.Issued"/>
<meta content="Khanchandani, N." name="DC.Creator"/>
<meta content="Rao, S." name="DC.Creator"/>
<meta content="Weilandt, E." name="DC.Creator"/>
<meta content="This document defines a mechanism for the backhauling of V5.2 messages
over IP using the Stream Control Transmission Protocol (SCTP). This
protocol may be used between a Signaling Gateway (SG) and a Media
Gateway controller (MGC). It is assumed that the SG receives V5.2
signaling over a standard V5.2 interface. This document builds on the
ISDN User Adaptation Layer Protocol (RFC 3057). It defines all
necessary extensions to the IUA Protocol needed for the V5UA protocol
implementation. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="V5.2-User Adaptation Layer (V5UA)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3807 - V5.2-User Adaptation Layer (V5UA)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc3807.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc3807" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-sigtran-v5ua" title="draft-ietf-sigtran-v5ua">draft-ietf-sigt...</a>] [<a href="https://datatracker.ietf.org/doc/rfc3807" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3807" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc3807" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=3807&amp;submit=rfc" title="IPR disclosures related to this document">IPR</a>]   </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                        E. Weilandt
Request for Comments: 3807                               N. Khanchandani
Updates: <a href="rfc3057.html">3057</a>                                                     S. Rao
Category: Standards Track                                Nortel Networks
                                                               June 2004


                   <span class="h1">V5.2-User Adaptation Layer (V5UA)</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2004).

Abstract

   This document defines a mechanism for the backhauling of V5.2
   messages over IP using the Stream Control Transmission Protocol
   (SCTP).  This protocol may be used between a Signaling Gateway (SG)
   and a Media Gateway controller (MGC).  It is assumed that the SG
   receives V5.2 signaling over a standard V5.2 interface.

   This document builds on the ISDN User Adaptation Layer Protocol (<a href="rfc3057.html">RFC</a>
   <a href="rfc3057.html">3057</a>).  It defines all necessary extensions to the IUA Protocol
   needed for the V5UA protocol implementation.



















<span class="grey">Weilandt, et al.            Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction .................................................  <a href="#page-2">2</a>
       <a href="#section-1.1">1.1</a>.  Scope ..................................................  <a href="#page-3">3</a>
       <a href="#section-1.2">1.2</a>.  Terminology ............................................  <a href="#page-3">3</a>
       <a href="#section-1.3">1.3</a>.  V5.2 Overview ..........................................  <a href="#page-5">5</a>
       <a href="#section-1.4">1.4</a>.  Distribution of responsibilities between MGC and SG ....  <a href="#page-7">7</a>
       <a href="#section-1.5">1.5</a>.  Client/Server Model ....................................  <a href="#page-7">7</a>
       <a href="#section-1.6">1.6</a>.  Addition to boundary primitives ........................  <a href="#page-7">7</a>
             <a href="#section-1.6.1">1.6.1</a>.  V5 specific boundary primitives ................  <a href="#page-7">7</a>
   <a href="#section-2">2</a>.  Conventions ..................................................  <a href="#page-9">9</a>
   <a href="#section-3">3</a>.  SCTP Stream Management ....................................... <a href="#page-10">10</a>
   <a href="#section-4">4</a>.  Proposed V5.2 Backhaul Architecture .......................... <a href="#page-10">10</a>
       <a href="#section-4.1">4.1</a>.  V5UA Message Header .................................... <a href="#page-11">11</a>
       <a href="#section-4.2">4.2</a>.  V5 Naming Conventions for Interface Identifier ......... <a href="#page-12">12</a>
       <a href="#section-4.3">4.3</a>.  V5 Additions to IUA Boundary Primitives ................ <a href="#page-13">13</a>
       <a href="#section-4.4">4.4</a>.  Link Status Messages ................................... <a href="#page-14">14</a>
       <a href="#section-4.5">4.5</a>.  Sa-Bit Messages ........................................ <a href="#page-16">16</a>
       <a href="#section-4.6">4.6</a>.  Error Indication Message ............................... <a href="#page-17">17</a>
   <a href="#section-5">5</a>.  Procedures ................................................... <a href="#page-18">18</a>
       <a href="#section-5.1">5.1</a>.  V5 Layer 1 failure ..................................... <a href="#page-18">18</a>
       <a href="#section-5.2">5.2</a>.  Loss of V5UA peer ...................................... <a href="#page-19">19</a>
       <a href="#section-5.3">5.3</a>.  C-channel overload on SG ............................... <a href="#page-19">19</a>
   <a href="#section-6">6</a>.  Examples ..................................................... <a href="#page-20">20</a>
       <a href="#section-6.1">6.1</a>.  Link Identification Procedure (successful) ............. <a href="#page-20">20</a>
   <a href="#section-7">7</a>.  Security Considerations ...................................... <a href="#page-21">21</a>
   <a href="#section-8">8</a>.  IANA Considerations .......................................... <a href="#page-21">21</a>
       <a href="#section-8.1">8.1</a>.  SCTP Payload Protocol Identifier ....................... <a href="#page-21">21</a>
       <a href="#section-8.2">8.2</a>.  V5UA Port Number ....................................... <a href="#page-22">22</a>
   <a href="#section-9">9</a>.  Acknowledgements ............................................. <a href="#page-22">22</a>
   <a href="#section-10">10</a>. References ................................................... <a href="#page-22">22</a>
       <a href="#section-10.1">10.1</a>. Normative References ................................... <a href="#page-22">22</a>
       <a href="#section-10.2">10.2</a>. Informative References ................................. <a href="#page-23">23</a>
   <a href="#section-11">11</a>. Authors' Addresses ........................................... <a href="#page-23">23</a>
   <a href="#section-12">12</a>. Full Copyright Statement ..................................... <a href="#page-24">24</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document describes a method of implementing V5.2 backhaul
   messaging over IP using a modified version of the ISDN User
   Adaptation Layer Protocol (IUAP) [<a href="#ref-1" title='"ISDN Q.921-User Adaptation Layer"'>1</a>].  V5UA builds on top of IUA,
   defining the necessary extensions to IUA for a V5.2 implementation.

   Since V5UA is meant to be an extension to IUAP, everything defined in
   [<a href="#ref-1" title='"ISDN Q.921-User Adaptation Layer"'>1</a>] is also valid for V5UA unless otherwise specified in this
   document.





<span class="grey">Weilandt, et al.            Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   This document does not describe the V5 standard itself.  The V5
   protocol is defined by ETSI standards [<a href="#ref-2">2</a>,<a href="#ref-3">3</a>].  Any description of the
   V5 protocol in this document is meant to make the text easier to
   understand.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Scope"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Scope</span>

   There is a need for Switched Circuit Network (SCN) signaling protocol
   delivery from a V5.2 Signaling Gateway (SG) to a Media Gateway
   Controller (MGC), analogous to the implementation of the ISDN Q.921
   User Adaptation Layer (IUA) as described in [<a href="#ref-1" title='"ISDN Q.921-User Adaptation Layer"'>1</a>].

   This document supports analog telephone access, ISDN basic rate
   access and ISDN Primary rate access over a V5.2 interface.

   Since the V5.2 Layer 2, and especially Layer 3, differs from the
   Q.921 [<a href="#ref-4">4</a>] and Q.931 Adaptation layer, the IUA standard must be
   extended to fulfil the needs for supporting V5.2.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Terminology"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Terminology</span>

   Bearer Channel Connection (BCC) protocol - A protocol which allows
      the Local Exchange (LE) to instruct the Access Network (AN) to
      allocate bearer channels, either singularly or in multiples, on
      demand.

   Communication channel (C-channel) - A 64 kbit/s time slot on a V5.2
      interface provisioned to carry communication paths.

   Communication path (C-path) - Any one of the following information
      types:

      - The layer 2 data link carrying the Control protocol

      - The layer 2 data link carrying the Link Control protocol

      - The layer 2 data link carrying the PSTN signaling

      - Each of the layer 2 data links carrying the protection protocol

      - The layer 2 data link carrying the BCC protocol

      - All the ISDN Ds-type data from one or more user ports

      - All the ISDN p-type data from one or more user ports

      - All the ISDN t-type data from one or more user ports




<span class="grey">Weilandt, et al.            Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


      Note: This definition includes the possibility that there may be
      more than one C-path of the same information type, each allocated
      to a different logical C-channel.

   Envelope Function Address (EFA) - 13 bit number, ranging from 0 to
      8191 (decimal).  An EFA uniquely identifies one of the five V5.2
      protocols, or an ISDN agent attached to an AN.  The following list
      contains the possible values for the EFA:

            Definition              Value
            ----------              ------
            ISDN_PROTOCOL           0 - 8175
            PSTN_PROTOCOL           8176
            CONTROL_PROTOCOL        8177
            BCC_PROTOCOL            8178
            PROT_PROTOCOL           8179
            LINK_CONTROL_PROTOCOL   8180
            RESERVED                8181 - 8191

   Layer 1 Functional State Machine (L1 FSM) - Functional State Machine
      in V5 System Management that tracks and controls the states of the
      physical E1 links on the interface.

   Logical Communication channel (Logical C-channel) - A group of one or
      more C-paths, all of different types, but excluding the C-path for
      the protection protocol.

   Multi-link - A collection of more than one 2048 kbit/s link which
      together make up a V5.2 interface.

   Multi-Slot - A group of more than one 64kbit/s channels providing
      8Khz and time slot sequence integrity, generally used together
      within an ISDN Primary Rate Access (ISDN-PRA) user port, in order
      to supply a higher bit-rate service.

   Physical Communication Channel (Physical C-channel) - A 64kbit/s time
      slot on a V5.2 interface which has been assigned for carrying
      logical C-channels.  A physical C-channel may not be used for
      carrying bearer channels.

   Primary Link - A 2048 kbit/s (E1) link in a multi-link V5.2 interface
      whose physical C-channel in time slot 16 carries a C-path for the
      protection protocol and, on V5.2 initialization, also the C-path
      for the control protocol, link control protocol, and the BCC
      protocol.  Other C-paths may also be carried in the time slot 16.






<span class="grey">Weilandt, et al.            Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   Secondary Link  - A 2048 kbit/s (E1) link in a multi-link V5.2
      interface whose time slot 16 carries a C-path for the protection
      protocol, and, on V5.2 initialization, acts as the standby C-
      channel for the control protocol, link control protocol, and BCC
      protocol and any other C-paths initially carried in time slot 16
      of the primary link.

   V5 Link - A 2048 kbits/s E1 (PCM30) link used on a V5 interface.  A
      V5 interface may use up to 16 V5 links.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.3.%20%20V5.2%20Overview"></a><a class="selflink" href="#section-1.3" name="section-1.3">1.3</a>.  V5.2 Overview</span>

   V5.2 is an industry standard ETSI interface (reference ETS 300 347-1
   [<a href="#ref-3">3</a>]) defined between a Local Exchange (LE) and an Access Network (AN)
   providing access to the following types:

      -  Analog telephone access

      -  ISDN Basic rate access

      -  ISDN Primary Rate access

      -  Other analog or digital accesses for semi-permanent connections
         without associated outband signaling information

   The original V5 specification (V5.1 [<a href="#ref-2">2</a>]) uses 2048 kbps links in a
   non-concentrating fashion.  In contrast, V5.2 may use up to 16 such
   interface links and supports concentration.

            ----------              ----------        o--o
            |        |      E1      |        |-------  /
            |        |--------------|        |         --
            |   LE   |      E1      |  AN    |
            |        |--------------|        |        o--o
            |        |              |        |-------  /
            ----------              ----------         --

   The LE and AN are connected with up to 16 E1 (PCM30) links.  Channels
   16, 15 and 31 on any E1 link can be reserved for data communication
   between LE and AN.  The channels reserved for data are called
   "Communication Channels" or "C-channels."

   The C-channels are the physical media that exchange data between the
   V5.2 protocol peer entities, as well as transfer the ISDN BRI
   D-channel messages between the terminals and the LE.  A logical
   communication path between two peer entities for one protocol is
   called a "C-path".




<span class="grey">Weilandt, et al.            Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   The signaling information in V5.2 are defined as:

      -  Analog signals are carried by means of the V5 PSTN protocol
         (L3)

      -  ISDN/analog ports are controlled by the V5 Control protocol
         (L3)

      -  ISDN protocol messages are mapped to LAPD frames, which are
         carried by means of LAPV5-EF sublayer (L2)

      -  V5 protocol messages are mapped to LAPV5-DL frames, which are
         carried by means of LAPV5-EF sublayer (L2)

   In order to support more traffic and dynamic allocation of bearer
   channels, the V5.2 protocol has several additions:

      -  A bearer channel connection protocol establishes and
         disestablishes bearer connections on demand, as determined by
         the signaling information, under the control of the Local
         Exchange.

      -  A link control protocol is defined for multi-link management to
         control link identification, link blocking and link failure
         conditions.

      -  A protection protocol, operating on two separate V5 data links
         is defined to manage the protection switching of communication
         channels in case of link failures.

   The following protocols are defined for the various protocol layers:

   Layer 2:
      - LAPV5-EF
      - LAPV5-DL

   Layer 3:
      - V5-Link Control
      - V5-BCC
      - V5-PSTN
      - V5-Control
      - V5-Protection









<span class="grey">Weilandt, et al.            Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.4.%20%20Distribution%20of%20responsibilities%20between%20MGC%20and%20SG"></a><a class="selflink" href="#section-1.4" name="section-1.4">1.4</a>.  Distribution of responsibilities between MGC and SG</span>

   In the V5UA backhaul architecture, the V5 protocol entities SHALL be
   distributed over SG and MGC as shown below.

        MGC                         SG
   +------------+            +-------+-------+
   | Lnk Cntrl  |            |       |       |
   +------------+            |       |       |
   |   Cntrl    |            |       |       |
   +------------+    V5UA    |       |       |   V5   +------+
   |    BCC     | &lt;--------&gt; | LAPV5 | LAPV5 | &lt;----&gt; |  AN  |
   +------------+            |  -DL  |  -EF  |        +------+
   |   PSTN     |            |       |       |
   +------------+            |       |       |
   | Protection |            |       |       |
   +------------+            +-------+-------+

   V5 System Management SHALL be located on the MGC.  The V5 L1
   Functional State Machine (FSM) SHALL be located on the SG.

   Dynamic TEI Management for V5 BRI over V5UA SHALL be located on the
   MGC.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.5.%20%20Client%2FServer%20Model"></a><a class="selflink" href="#section-1.5" name="section-1.5">1.5</a>.  Client/Server Model</span>

   The Client/Server Model for V5UA shall follow the model as defined
   for IUAP.

   The SCTP [<a href="#ref-6" title='"Stream Control Transmission Protocol"'>6</a>] (and UDP/TCP) registered User Port Number Assignment for
   V5UA is 5675.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.6.%20%20Addition%20to%20boundary%20primitives"></a><a class="selflink" href="#section-1.6" name="section-1.6">1.6</a>.  Addition to boundary primitives</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/1.6.1.%20%20V5%20specific%20boundary%20primitives"></a><a class="selflink" href="#section-1.6.1" name="section-1.6.1">1.6.1</a>.  V5 specific boundary primitives</span>

   Extending IUAP to V5UA to support V5.2 backhaul requires the
   introduction of new boundary primitives for the Q.921/Q.931 boundary,
   in accordance with the definitions in the V5 standards.

   V5UA reuses some IUA primitives from the Q.921/Q.931 boundary: the
   DL-DATA primitive and the DL-UNIT DATA primitive.  The DL-DATA
   primitive is used for the transportation of both V5 Layer 3 messages
   and V5 ISDN Layer 3 messages.  The DL-UNIT DATA primitive is only
   used for V5 ISDN messages and is used and defined as described for
   IUAP.





<span class="grey">Weilandt, et al.            Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   In the V5 standards, V5 system management is responsible for
   establishing and releasing data links.  Therefore, for V5UA the DL-
   Establish and DL-Release primitives defined in IUAP are replaced by
   new primitives between system management and the data link layer in
   accordance with the definitions in [<a href="#ref-2">2</a>]:

   MDL-ESTABLISH

   The MDL-Establish primitives are used to request, indicate and
   confirm the outcome of the procedures for establishing multiple frame
   operation.

   MDL-RELEASE

   The MDL-Release primitive is used to indicate the outcome of the
   procedures for terminating multiple frame operation.

   In contrast to ISDN, the V5 standards demand that V5.2 system
   management interacts directly with V5.2 layer 1.  Since V5.2 Layer 1
   (including the L1 FSM) and parts of V5 system management are
   physically separated in a V5 backhaul scenario, V5UA must support
   some services for the communication between these two entities.
   Specifically, these services include an indication of the status of a
   specific link, and messages to support the link identification
   procedure defined by the V5 standards.

   The new primitive are defined as shown below:

   MPH-LINK STATUS START REPORTING

   The MPH-LINK STATUS START REPORTING primitive is used by V5 system
   management to request that a link be brought into service for use in
   a V5 interface.  On reception of this message, the L1 FSM on the SG
   SHALL start reporting the status of the V5 link to the MGC.  This
   primitive is used similarly to the MPH-proceed primitive defined by
   V5.2, but it has a more extended meaning than MPH-proceed.

   MPH-LINK STATUS STOP REPORTING

   The MPH-LINK STATUS STOP REPORTING primitive is used by V5 system
   management to request that a link be taken out of service on a V5
   interface.  On reception of this message, L1 FSM on the SG SHALL stop
   reporting the status of the V5 link to the GWC.  This primitive is
   used similarly to the MPH-stop primitive defined by V5.2, but it has
   a more extended meaning than MPH-stop.






<span class="grey">Weilandt, et al.            Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   MPH-LINK STATUS INDICATION

   The MPH-LINK STATUS INDICATION primitive is used by L1 FSM on the
   Signaling Gateway to report the status (operational/non-operational)
   of a V5 link to V5 system management.  This primitive is equivalent
   to the MPH-AI and MPH-DI primitives in V5.2.

   MPH-SA-BIT SET

   The MPH-SA-BIT SET primitive is used by system management to request
   that the L1 FSM in the SG sets or resets the value of a specified Sa
   bit on the requested link.  The SG uses it to report the successful
   setting or resetting of this bit back to system management.  For V5,
   this message is used for the V5 specific Link Identification
   procedure to set/reset the value of the Sa7 bit, or to confirm the
   successful setting of the Sa bit.  The MPH-SA BIT SET REQUEST is
   equivalent to the MPH-ID and MPH-NOR primitives in V5.2.

   MPH-SA-BIT STATUS

   The MPH-SA-BIT STATUS primitives are used by system management in the
   MGC to request that the L1 FSM in the SG reports the status of a
   specified Sa bit on the requested link.  The SG uses it to report
   (indicate) the status of this bit back to system management.  For V5,
   these messages are used for the V5 specific Link identification
   procedure to request or report the status of the Sa7 bit.  This is
   equivalent to the MPH-IDR, MPH-IDI or MPH-Elg primitives in V5.2.

   Due to the separation of V5 System Management and V5 Layer1/Layer2 in
   the V5UA backhaul architecture, it may be necessary to report error
   conditions of the SG's V5 stack to V5 System Management.  For this
   purpose, a new primitive is defined:

   MDL-ERROR INDICATION

   The MDL-ERROR INDICATION primitive is used to indicate an error
   condition to V5 System Management.  The only valid reason for this
   primitive is 'Overload', indicating an overload condition of the
   C-channel on the SG.  This reason is not defined in the V5/Q.921
   standards.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions</span>

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, NOT RECOMMENDED, MAY, and OPTIONAL, when
   they appear in this document, are to be interpreted as described in
   [<a href="#ref-7" title='"Key words for use in RFCs to Indicate Requirement Levels"'>7</a>].




<span class="grey">Weilandt, et al.            Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20SCTP%20Stream%20Management"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  SCTP Stream Management</span>

   A single SCTP stream SHOULD be used for grouping all of the following
   protocols together: BCC, Link Control, Control and PSTN protocol on a
   specific C-channel.  A separate SCTP stream SHOULD be used for the
   Protection protocol on a specific C-channel.  One SCTP stream SHOULD
   be used for all ISDN user ports on a specific C-channel.  One single
   stream SHOULD NOT be used to carry data of more than one C-channel.

   In addition, one separate SCTP stream SHOULD be used for all MPH
   (link related) messages.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Proposed%20V5.2%20Backhaul%20Architecture"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Proposed V5.2 Backhaul Architecture</span>

         ******   V5.2        ******      IP      *******
         * AN *---------------* SG *--------------* MGC *
         ******               ******              *******


         +-----+                                  +-----+
         |V5.2 |              (NIF)               |V5.2 |
         +-----+           +----------+           +-----+
         |     |           |     |V5UA|           |V5UA |
         |     |           |     +----+           +-----+
         |LAPV5|           |LAPV5|SCTP|           |SCTP |
         |     |           |     +----+           +-----+
         |     |           |     | IP +           | IP  |
         +-----+           +-----+----+           +-----+

         Figure 1: V5.2 Backhaul Architecture

         AN   - Access Network
         NIF  - Nodal Interworking Function
         SCTP - Stream Control Transmission Protocol

















<span class="grey">Weilandt, et al.            Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20V5UA%20Message%20Header"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  V5UA Message Header</span>

   The original IUA message header must be modified for V5UA.  The
   original header for the integer formatted Interface Identifier is
   shown below:

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Tag (0x1)           |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 Interface Identifier (integer)                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Tag (0x5)           |             Length=8          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |            DLCI               |              Spare            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Figure 2: Original IUA Message Header

   V5UA extends the IUA Message Header by including the Envelope
   Function Address (EFA) in the Spare field.  The V5UA format for the
   integer formatted Interface Identifier is shown below:

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Tag (0x1)           |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 Interface Identifier (integer)                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Tag (0x81)          |             Length=8          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |            DLCI               |                EFA            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Figure 3: V5UA Message Header (Integer-based Interface identifier)














<span class="grey">Weilandt, et al.            Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   The EFA is defined by the V5 standard.  It identifies a C-path, which
   is a 13-bit number, ranging from 0 to 8191 (decimal).  An EFA
   uniquely identifies one of the five V5.2 protocols, or an ISDN agent
   attached to an AN.  The following list contains the possible values
   for the EFA as defined by V5:

         Definition              Value
         ----------              ------
         ISDN_PROTOCOL           0 - 8175
         PSTN_PROTOCOL           8176
         CONTROL_PROTOCOL        8177
         BCC_PROTOCOL            8178
         PROT_PROTOCOL           8179
         LINK_CONTROL_PROTOCOL   8180
         RESERVED                8181 - 8191

   For MPH messages which do not use DLCI and EFA, SAPI, TEI and EFA
   SHALL be set to ZERO and SHALL be ignored by the receiver.  For all
   other messages, the DLCI SHALL be set as defined in the V5.2 standard
   [<a href="#ref-2">2</a>].

   The Interface Identifier SHALL follow the naming conventions for the
   Interface Identifier as defined below.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20V5%20Naming%20Conventions%20for%20Interface%20Identifier"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  V5 Naming Conventions for Interface Identifier</span>

   The V5 standard demands that V5 System Management keep track of the
   states of all links on a V5 interface.  To perform tasks like
   protection switching and bearer channel allocation on the V5 links,
   it is necessary that system management has the full picture of the
   signaling and bearer channels located on each link.

   The IUA protocol identifies C-channels by endpoints without a defined
   association with a specific link.  Since no naming convention exists,
   there is no guarantee that a C-channel is actually located at the
   link it claims to be.  Furthermore the V5 standard requires that the
   MGC receives reports of the status of all links, and it defines a
   link identification procedure to ensure that AN and LE are
   referencing the same link when they address a link with a Link
   Control Protocol message.

   It would clearly be against the concept of V5.2 if there was no clear
   association between E1 links and channels.  To solve this problem, a
   naming convention MUST be used for V5UA.







<span class="grey">Weilandt, et al.            Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   The format of the integer formatted Interface Identifier is shown
   below:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        Link Identifier                              | Chnl ID |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Link Identifier - Identifier for an E1 link on the SG (27 bits).
      MUST be unique on the SG.  This Link Identifier MUST match the
      Link Identifier used in the Link Management Messages defined later
      in this document.

   Chnl ID - Channel Identifier (5 bits).  This is equal to the time-
      slot number of the addressed time slot.  Possible values are 15,
      16 and 31 representing the possible time slots for C-channels on a
      V5 interface.  For Link Management Messages, the Chnl ID MUST be
      set to 0.  All other values are reserved for future use.

   If used, the text formatted interface identifier SHALL be coded as
   the hex representation of the integer formatted interface identifier,
   written as a variable length string.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20V5%20Additions%20to%20IUA%20Boundary%20Primitives"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  V5 Additions to IUA Boundary Primitives</span>

   Some primitives for the V5 interface boundaries are similar to the
   Q.921/Q.931 boundary primitive messages defined in IUA, but they need
   to be handled in a different way.  Therefore it is neccessary to
   distinguish between these two message types by means of the Message
   Class parameter.

   For all V5 interface boundary primitives, a new Message Class is
   introduced:

        14       V5 Boundary Primitives Transport
                 Messages (V5PTM)

   Other valid message classes for V5UA, which are also used by IUA,
   are:

         0       Management (MGMT) Message
         3       ASP State Maintenance (ASPSM) Messages
         4       ASP Traffic Maintenance (ASPTM) Messages







<span class="grey">Weilandt, et al.            Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   Q.921/Q.931 boundary primitive messages reused by V5.2 as V5PTM
   messages are:

         1       Data Request Message         (MGC -&gt; SG)
         2       Data Indication Message      (SG -&gt; MGC)
         3       Unit Data Request Message    (MGC -&gt; SG)
         4       Unit Data Indication Message (SG -&gt; MGC)
         5       Establish Request            (MGC -&gt; SG)
         6       Establish Confirm            (SG -&gt; MGC)
         7       Establish Indication         (SG -&gt; MGC)
         8       Release Request              (MGC -&gt; SG)
         9       Release Confirm              (SG -&gt; MGC)
        10       Release Indication           (SG -&gt; MGC)

   All these messages are defined similarly to the QPTM messages.
   In addition, new boundary primitive messages are defined:

        11       Link Status Start Reporting    (MGC -&gt; SG)
        12       Link Status Stop Reporting     (MGC -&gt; SG)
        13       Link Status Indication         (SG -&gt; MGC)
        14       Sa-Bit Set Request             (MGC -&gt; SG)
        15       Sa-Bit Set Confirm             (SG -&gt; MGC)
        16       Sa-Bit Status Request          (MGC -&gt; SG)
        17       Sa-Bit Status Indication       (SG -&gt; MGC)
        18       Error Indication               (SG -&gt; MGC)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20Link%20Status%20Messages%20%28Start%20Reporting%2C%20Stop%20Reporting%2C%20Indication%29"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  Link Status Messages (Start Reporting, Stop Reporting, Indication)</span>

   The Link Status Messages are used between V5 System Management on the
   MGC and the L1 FSM on the SG to track the status of a particular E1
   link.  This is required whether or not the E1 link carries
   C-channels.

   All Link Status Messages contain the V5UA Message Header.  The Link
   Identifier portion of the Interface Identifier identifies the
   physical link on the SG addressed by the message.  For all link
   status messages, the Chnl ID SHALL be set to '0' and SHALL be ignored
   by the receiver.

   The integer value used for the Link Identifier is of local
   significance only, and is coordinated between the SG and MGC.  It
   MUST be unique for every V5 link on the SG.

   As defined by the V5 standards, V5 System Management must know the
   status of the links on all active V5 interfaces.  The Link Status
   Start Reporting Message is used by V5 System Management on the MGC to
   request that the L1 FSM on the SG starts reporting the status of a
   particular link.



<span class="grey">Weilandt, et al.            Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   V5 system management SHALL send this Message on interface activation
   for all links on the interface.  The SG SHALL respond immediately to
   this request with a Link Status Indication message, and it SHALL then
   send a Link Status Indication message on all subsequent changes of
   the link status.  Since the SG has no other way to determine whether
   a link is on an active interface or not, this message SHALL always be
   sent on interface startup.

   If the L1 FSM in the SG receives a Link Status Start Reporting
   Message for a link that is already active (the link status is
   reported to System Management), the SG SHALL immediately report the
   actual status of this link by sending a Link Status Indication
   Message.  The SG SHALL then proceed with the automatic link status
   reporting as described above.

   To stop this reporting of the status of a link, e.g., at interface
   deactivation, System Management sends a Link Status Stop Reporting
   Message to the L1 FSM.  The SG will then immediately stop reporting
   the status of the particular link and will assume the link to be out
   of service.  It MUST NOT respond in any way to this message.

   Since there is no other way for the SG to know that an interface has
   been deactivated, this message SHALL be sent on interface
   deactivation for all links on the interface.  On reception of this
   message, the SG SHALL take L2 down on this link.

   If the L1 FSM in the SG receives a Link Status Stop Reporting Message
   for a link that is not active (the link status is not reported to
   System Management), the SG SHALL ignore the message.

   The Link Status Start/Stop Reporting Messages contain the common
   message header followed by the V5UA message header.  They do not
   contain any additional parameters.

   The Link Status Indication Message is used by L1 FSM in the SG in
   response to a Link Status Start Reporting Message to indicate the
   status of the particular link.  After a Link Status Start Reporting
   Message has been received by the L1 FSM, it SHALL automatically send
   a Link Status Indication Message every time the status of the
   particular link changes.  It SHALL not stop this reporting until it
   receives a Link Status Stop Report Message from System Management.

   The Link Status Indication Message contains the common message header
   followed by the V5UA message header.  In addition, it contains the
   following link status parameter:






<span class="grey">Weilandt, et al.            Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Tag (0x82)           |             Length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 Link Status                                   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The valid values for Link Status are shown in the following table:

      Define          Value      Description

      OPERATIONAL      0x0       Link operational
      NON-OPERATIONAL  0x1       Link not operational

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.5.%20%20Sa-Bit%20Messages%20%28Set%20Request%2C%20Set%20Confirm%2C%20Status%20Request%2C"></a><a class="selflink" href="#section-4.5" name="section-4.5">4.5</a>.  Sa-Bit Messages (Set Request, Set Confirm, Status Request,</span>
<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/Status%20Indication%29"></a>      Status Indication)</span>

   The Sa-Bit Messages are used between V5 System Management in the MGC
   and the L1 FSM in the SG to set and read the status of Sa bits on the
   E1 links.  For V5, it is only required to set and read the status of
   the Sa7 bit that is used for the Link Identification procedure as
   described by the V5 standards [<a href="#ref-3">3</a>].

   All Sa-Bit Messages SHALL contain the V5UA message header.  The Link
   Identifier portion of the Interface Identifier identifies the
   physical link on the SG addressed by the message.  For all link
   status messages, the Chnl ID SHALL be set to '0' and SHALL be ignored
   by the receiver.

   The Link Identifier MUST be the same as used in the Interface
   Identifier to identify on which link a C-channel is located.

   The Sa-Bit Set Request message is used to set the value of the
   specified Sa-Bit on the defined link.  The value of the Sa7 bit in
   normal operation is ONE.  For the Link Identification procedure, it
   is set to ZERO.

   The Sa-Bit Set Request message for the Sa7 bit with Bit Value ZERO
   corresponds to the V5 defined primitive MPH-ID.  The Sa-Bit Set
   Request message for the Sa7 bit with Bit Value ONE corresponds to the
   V5 defined primitive MPH-NOR.

   The SG MUST answer a Sa-Bit Set Request message with a Sa-Bit Set
   Confirm message when the setting of the bit is complete.  This
   message does not correspond to a V5 defined primitive.





<span class="grey">Weilandt, et al.            Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   The Sa-Bit Status Request message is used by system management to
   request the status of the specified Sa-Bit on the defined link from
   L1 FSM.  The Sa-Bit Status Request message for the Sa7 bit
   corresponds to the V5 defined primitive MPH-IDR.

   L1 FSM answers the Sa-Bit Status request message by a Sa-Bit Status
   Indication message in which the current setting of the bit will be
   reported.  The Sa-Bit Status Indication message for the Sa7 bit with
   Bit Value ZERO corresponds to the V5 defined primitive MPH-IDI.  The
   Sa-Bit Status Indication message for the Sa7 bit with Bit Value ONE
   corresponds to the V5 defined primitive MPH-Elg.

   All Sa-Bit Messages contain the following additional parameter:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Tag (0x83)           |             Length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |             BIT ID             |        Bit Value             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The valid values for Bit Value are shown in the following table:

      Define          Value      Description

      ZERO             0x0       Bit value ZERO
      ONE              0x1       Bit value ONE

   The valid value for BIT ID is shown in the following table:

      Define          Value      Description

      Sa7              0x7       Addresses the Sa7 bit

   There are no other valid values for V5UA.  All other values are
   reserved for future use.

   For the Sa-Bit Status Request and Set Confirm messages, the BIT Value
   SHALL be set to '0' by the sender and SHALL be ignored by the
   receiver.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.6.%20%20Error%20Indication%20Message"></a><a class="selflink" href="#section-4.6" name="section-4.6">4.6</a>.  Error Indication Message</span>

   The Error Indication Message is used between the V5 stack on the SG
   and the V5 System Management in the MGC to indicate an error
   condition at the SG.




<span class="grey">Weilandt, et al.            Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   The only valid reason for the Error Indication Message is Overload.
   The SG SHOULD issue such an Error Indication with reason Overload for
   a C-channel if it is not able to process all Layer 3 messages on this
   C-channel in a timely manner (overload condition of the C-channel).

   The Error Indication message SHALL contain the V5UA message header.

   The Interface Identifier indicates the affected C-channel.  SAPI, TEI
   and EFA SHALL be set to '0' and SHALL be ignored by the receiver.

   The Error Indication message contains the following additional
   parameter:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Tag (0x84)           |             Length           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                 Error Reason                                  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The valid values for Error Reason are shown in the following table:

      Define          Value      Description

      OVERLOAD         0x1       C-channel is in overload state

   There are no other valid values for V5UA.  All other values are
   reserved for future use.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Procedures"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Procedures</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20V5%20Layer%201%20failure"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  V5 Layer 1 failure</span>

   The normal way to handle a V5 Layer 1 failure is described in the V5
   standards[2,3] as follows:

      -  The L1 FSM detects the V5 Layer 1 failure.  It reports this to
         V5 System management by sending a MPH-DI primitive for the
         affected link.

      -  V5 System management notifies V5 Layer 2 of the V5 Layer 1
         outage by sending a MPH-Layer_1 Failure Ind primitive.

   Since V5 Layer1/2 and V5 System Management are no longer co-located
   in the backhaul architecture, it does not make sense to notify V5
   Layer 2 about V5 Layer 1 failure via V5 system management.  Instead,
   V5 Layer 2 SHALL be notified directly by V5 Layer 1 on the SG.  V5



<span class="grey">Weilandt, et al.            Standards Track                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   Layer 1 SHALL report the outage to V5 system management by sending a
   Link Status Indication message with status NON-OPERATIONAL,
   corresponding to an MPH-DI primitive as defined by the V5.2 standard.
   V5 system management SHALL NOT send an MPH-Layer_1 Failure Ind
   primitive to V5 Layer 2 in response to this message.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Loss%20of%20V5UA%20peer"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Loss of V5UA peer</span>

   If SCTP failure is detected or the heartbeat is lost, the following
   procedure SHALL be performed:

   When loss of V5UA peer is reported to the V5UA layer, the ASP SHALL
   behave as if it had received a Link Status Indication (non-
   operational) for all links on this SG.

   The ASP SHALL attempt to re-establish the connection continuously.
   When the connection is re-established, the ASP SHALL send a Link
   Status Start Reporting message to the SG for all links on active V5
   interfaces on the SG.

   An example for the message flow for re-establishment of the
   connection is shown below for one active link on the SG:

      ASP                                               SG

       |                                                 |
       | -------- Link Status Start Reporting ---------&gt; |
       |                                                 |
       | &lt;------ Link Status Ind (operational) --------- |
       |                                                 |

   If the association can be re-established before the V5UA layer is
   notified, communication SHALL proceed as usual and no other action
   SHALL be taken by the ASP.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20C-channel%20overload%20on%20SG"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  C-channel overload on SG</span>

   If the SG detects an overload condition on a C-channel, it SHOULD
   indicate this by sending an Error Indication message, with the reason
   Overload to the MGC.  The MGC SHOULD then take appropriate actions to
   clear this overload condition.

   The SG SHALL resend the Error Indication message with the reason
   Overload as long as the overload condition persists.  An interval of
   120 seconds for resend of this message is RECOMMENDED.






<span class="grey">Weilandt, et al.            Standards Track                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Examples"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Examples</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Link%20Identification%20Procedure%20%28successful%29"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Link Identification Procedure (successful)</span>

   The Link Identification Procedures themselves are described by the
   V5.2 standard [<a href="#ref-3">3</a>].

   A message flow example for an LE initiated Link Identification
   procedure over V5UA is shown below.  An active association between
   ASP and SG is established prior to the following message flows, and
   the V5 interface is already in service:

      ASP                                               SG

       |                                                 |
       | ------ Data Request (LnkCtrl: FE-IDReq) ------&gt; |
       | &lt;-- Data Indication (LnkCtrl Ack: FE-IDReq) --- |
       |                                                 |
       | &lt;---- Data Indication (LnkCtrl: FE-IDAck) ----- |
       | ---- Data Request (LnkCtrl Ack: FE-IDAck) ----&gt; |
       |                                                 |
       | ------ Sa-Bit Status Request ( Sa7 ) ---------&gt; |
       | &lt;--- Sa-Bit Status Indication ( Sa7, ZERO ) --- |
       |                                                 |
       | ------- Data Request (LnkCtrl: FE-IDRel) -----&gt; |
       | &lt;--- Data Indication (LnkCtrl Ack: FE-IDRel) -- |
       |                                                 |
























<span class="grey">Weilandt, et al.            Standards Track                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   The next example also shows a Link Identification procedure, but this
   time it is initiated by the AN.  Again, the ASP association and the
   V5 interface are already in service:

      ASP                                               SG

       |                                                 |
       | &lt;---- Data Indication (LnkCtrl: FE-IDReq) ----- |
       | -- Data Request (LnkCtrl Ack: FE-IDReq) ------&gt; |
       |                                                 |
       | ---------- Sa-Bit Set Req ( Sa7, ZERO ) ------&gt; |
       | &lt;--------- Sa-Bit Set Conf (Sa7) -------------- |
       |                                                 |
       | ------- Data Request (LnkCtrl: FE-IDAck) -----&gt; |
       | &lt;-- Data Indication (LnkCtrl Ack: FE-IDAck) --- |
       |                                                 |
       | &lt;---- Data Indication (LnkCtrl: FE-IDRel) ----- |
       | ---- Data Request (LnkCtrl Ack: FE-IDRel) ----&gt; |
       |                                                 |
       | ------------ Sa-Bit Set Req ( Sa7, ONE ) -----&gt; |
       | &lt;----------- Sa-Bit Set Conf (Sa 7) ----------- |
       |                                                 |

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   The security considerations discussed for the 'Security
   Considerations for SIGTRAN Protocols' [<a href="#ref-5" title='"Security Considerations for Signaling Transport (SIGTRAN) Protocols"'>5</a>] document apply to this
   document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  IANA Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20SCTP%20Payload%20Protocol%20Identifiers"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  SCTP Payload Protocol Identifiers</span>

   IANA has assigned a V5UA value for the Payload Protocol Identifier in
   the SCTP DATA chunk.  The following SCTP Payload Protocol identifier
   is registered:

      V5UA    "6"

   The SCTP Payload Protocol identifier value "6" SHOULD be included in
   each SCTP DATA chunk to indicate that the SCTP is carrying the V5UA
   protocol.  The value "0" (unspecified) is also allowed but any other
   values MUST not be used.  This Payload Protocol Identifier is not
   directly used by SCTP but MAY be used by certain network entities to
   identify the type of information being carried in a Data chunk.






<span class="grey">Weilandt, et al.            Standards Track                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


   The User Adaptation peer MAY use the Payload Protocol Identifier as a
   way of determining additional information about the data being
   presented to it by SCTP.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20V5UA%20Port%20Number"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  V5UA Port Number</span>

   IANA has registered SCTP (and UDP/TCP) Port Number 5675 for V5UA.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Acknowledgements"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Acknowledgements</span>

   The authors would like to thank Fahir Ergincan, Milos Pujic, Graeme
   Currie, Berthold Jaekle, Ken Morneault and Lyndon Ong for their
   valuable comments and suggestions.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-1" name="ref-1">1</a>]  Morneault, K., Rengasami, S., Kalla, M. and G. Sidebottom, "ISDN
        Q.921-User Adaptation Layer", <a href="rfc3057.html">RFC 3057</a>, February 2001.

   [<a id="ref-2" name="ref-2">2</a>]  ETSI EN 300 324-1 (1999): V interfaces at the digital Local
        Exchange (LE); V5.1 interface for the support of Access Network
        (AN); Part 1: V5.1 interface specification.

   [<a id="ref-3" name="ref-3">3</a>]  ETSI EN 300 347-1 (1999): V interfaces at the digital Local
        Exchange (LE); V5.2 interface for the support of Access Network
        (AN); Part 1: V5.2 interface specification.

   [<a id="ref-4" name="ref-4">4</a>]  ETSI ETS 300 125 (1991) : DSS1 protocol; User-Network interface
        data link layer specification; (Standard is based on : ITU
        Q.920, Q.921).

   [<a id="ref-5" name="ref-5">5</a>]  Loughney, J., Tuexen, M., Ed. and J. Pastor-Balbas, "Security
        Considerations for Signaling Transport (SIGTRAN) Protocols", <a href="rfc3788.html">RFC</a>
        <a href="rfc3788.html">3788</a>, May 2004.















<span class="grey">Weilandt, et al.            Standards Track                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-6" name="ref-6">6</a>]  Stewart, R., Xie, Q., Morneault, K., Sharp, C., Schwarzbauer,
        H., Taylor, T., Rytina, I., Kalla, M., Zhang, L. and V. Paxson,
        "Stream Control Transmission Protocol", <a href="rfc2960.html">RFC 2960</a>, October 2000.

   [<a id="ref-7" name="ref-7">7</a>]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Authors%27%20Addresses"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Authors' Addresses</span>

   Dr. Eva Weilandt
   Conti Temic microelectronic GmbH
   An der B31
   88090 Immenstaad
   Germany

   Phone: +49 7545 8-2917
   EMail: eva.weilandt@temic.com


   Sanjay Rao
   Nortel Networks
   35 Davis Drive
   Research Triangle Park, NC 27709
   USA

   Phone: +1-919-991-2251
   EMail: rsanjay@nortelnetworks.com


   Neeraj Khanchandani
   Nortel Networks
   35 Davis Drive
   Research Triangle Park, NC 27709
   USA

   Phone: +1-919-991-2274
   EMail: neerajk@nortelnetworks.com












<span class="grey">Weilandt, et al.            Standards Track                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc3807.html">RFC 3807</a>           V5.2-User Adaptation Layer (V5UA)           June 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Full%20Copyright%20Statement"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (2004).  All Rights Reserved.

   Copyright (C) The Internet Society (2004).  This document is subject
   to the rights, licenses and restrictions contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and
   except as set forth therein, the authors retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Weilandt, et al.            Standards Track                    [Page 24]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc3807 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:44 GMT --></html>