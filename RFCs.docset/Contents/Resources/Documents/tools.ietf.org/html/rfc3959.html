<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3959 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:44 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-camarillo-sipping-early-disposition" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:3959" name="DC.Identifier"/>
<meta content="December, 2004" name="DC.Date.Issued"/>
<meta content="Gonzalo Camarillo &lt;gonzalo.camarillo@ericsson.com&gt;" name="DC.Creator"/>
<meta content='This document defines a new disposition type (early-session) for the
Content-Disposition header field in the Session Initiation Protocol
(SIP). The treatment of "early-session" bodies is similar to the
treatment of "session" bodies. That is, they follow the offer/answer
model. Their only difference is that session descriptions whose
disposition type is "early-session" are used to establish early media
sessions within early dialogs, as opposed to regular sessions within
regular dialogs. [STANDARDS-TRACK]' name="DC.Description.Abstract"/>
<meta content="The Early Session Disposition Type for the Session Initiation Protocol (SIP)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3959 - The Early Session Disposition Type for the Session Initiation Protocol (SIP)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc3959.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc3959" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-sipping-early-disposition" title="draft-ietf-sipping-early-disposition">draft-ietf-sipp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc3959" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3959" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc3959" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=3959">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                       G. Camarillo
Request for Comments: 3959                                      Ericsson
Category: Standards Track                                  December 2004


                <span class="h1">The Early Session Disposition Type for</span>
                 <span class="h1">the Session Initiation Protocol (SIP)</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2004).

Abstract

   This document defines a new disposition type (early-session) for the
   Content-Disposition header field in the Session Initiation Protocol
   (SIP).  The treatment of "early-session" bodies is similar to the
   treatment of "session" bodies.  That is, they follow the offer/answer
   model.  Their only difference is that session descriptions whose
   disposition type is "early-session" are used to establish early media
   sessions within early dialogs, as opposed to regular sessions within
   regular dialogs.

Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-2">2</a>
   <a href="#section-3">3</a>.  Issues Related to Early Media Session Establishment  . . . . .  <a href="#page-2">2</a>
   <a href="#section-4">4</a>.  The Early Session Disposition Type . . . . . . . . . . . . . .  <a href="#page-4">4</a>
   <a href="#section-5">5</a>.  Preconditions  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
   <a href="#section-6">6</a>.  Option tag . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
   <a href="#section-7">7</a>.  Example  . . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
   <a href="#section-8">8</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
   <a href="#section-9">9</a>.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
   <a href="#section-10">10</a>. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-11">11</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-11.1">11.1</a>. Normative References . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-11.2">11.2</a>. Informational References . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       Author's Address . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
       Full Copyright Statement . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>



<span class="grey">Camarillo                   Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Early media refers to media (e.g., audio and video) that is exchanged
   before a particular session is accepted by the called user.  Within a
   dialog, early media occurs from the moment the initial INVITE is sent
   until the User Agent Server (UAS) generates a final response.  It may
   be unidirectional or bidirectional, and can be generated by the
   caller, the callee, or both.  Typical examples of early media
   generated by the callee are ringing tone and announcements (e.g.,
   queuing status).  Early media generated by the caller typically
   consists of voice commands or dual tone multi-frequency (DTMF) tones
   to drive interactive voice response (IVR) systems.

   The basic SIP specification (<a href="rfc3261.html">RFC 3261</a> [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>]) only supports very simple
   early media mechanisms.  These simple mechanisms have a number of
   problems related to forking and security, and do not satisfy the
   requirements of most applications.  <a href="rfc3960.html">RFC 3960</a> [<a href="#ref-8" title='"Early Media and Ringing Tone Generation in the Session Initiation Protocol (SIP)"'>8</a>] goes beyond the
   mechanisms defined in <a href="rfc3261.html">RFC 3261</a> [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>] and describes two models of early
   media using SIP: the gateway model and the application server model.

   Although both early media models described in <a href="rfc3960.html">RFC 3960</a> [<a href="#ref-8" title='"Early Media and Ringing Tone Generation in the Session Initiation Protocol (SIP)"'>8</a>] are
   superior to the one specified in <a href="rfc3261.html">RFC 3261</a> [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>], the gateway model
   still presents a set of issues.  In particular, the gateway model
   does not work well with forking.  Nevertheless, the gateway model is
   needed because some SIP entities (in particular, some gateways)
   cannot implement the application server model.

   The application server model addresses some of the issues present in
   the gateway model.  This model uses the early-session disposition
   type specified in this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
   RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as
   described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a> [<a href="#ref-1" title='"Key words for use in RFCs to Indicate Requirement Levels"'>1</a>] and indicate requirement levels for
   compliant implementations.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Issues%20Related%20to%20Early%20Media%20Session%20Establishment"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Issues Related to Early Media Session Establishment</span>

   Traditionally, early media sessions have been established in the same
   way as regular sessions.  That is, using an offer/answer exchange
   where the disposition type of the session descriptions is "session".
   Application servers perform an offer/answer exchange with the User
   Agent Client (UAC) to exchange early media exclusively, while UASs
   use the same offer/answer exchange, first to exchange early media,
   and once the regular dialog is established, to exchange regular



<span class="grey">Camarillo                   Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


   media.  This way of establishing early media sessions is known as the
   gateway model [<a href="#ref-8" title='"Early Media and Ringing Tone Generation in the Session Initiation Protocol (SIP)"'>8</a>], which presents some issues related to forking and
   security.  These issues exist when this model is used by either an
   application server or by a UAS.

   Application servers may not be able to generate an answer for an
   offer received in the INVITE.  The UAC created the offer for the UAS,
   and so, it may have applied end-to-end encryption or have included
   information (e.g., related to key management) that the application
   server is not supposed to use.  Therefore, application servers need a
   means to perform an offer/answer exchange with the UAC that is
   independent from the offer/answer exchange between both UAs.

   UASs using the offer/answer exchange that will carry regular media
   for sending and receiving early media can cause media clipping, as
   described in Section 2.1.1 of [<a href="#ref-8" title='"Early Media and Ringing Tone Generation in the Session Initiation Protocol (SIP)"'>8</a>].  Some UACs cannot receive early
   media from different UASs at the same time.  So, when an INVITE forks
   and several UASs start sending early media, the UAC mutes all the
   UASs but one (which is usually chosen at random).  If the UAS that
   accepts the INVITE (i.e., sends a 200 OK) was muted, a new
   offer/answer exchange is needed to unmute it.  This usually causes
   media clipping.  Therefore, UASs need a means of performing an
   offer/answer exchange with the UAC to exchange early media that is
   independent from the offer/answer exchanged used to exchange regular
   media.

   A potential solution to this need would be to establish a different
   dialog using a globally routable URI to perform an independent
   offer/answer exchange.  This dialog would be labelled as a dialog for
   early media and would be somehow related to the original dialog at
   the UAC.  However, performing all the offer/answer exchanges within
   the original dialog has many advantages:

   o  It is simpler.

   o  It does not have synchronization problems, because all the early
      dialogs are terminated when the session is accepted.

   o  It does not require globally routable URIs.

   o  It does not introduce service interaction issues related to
      services that may be wrongly applied to the new dialog.

   o  It makes firewall management easier.

   This way of performing offer/answer exchanges for early media is
   referred to as the application server model [<a href="#ref-8" title='"Early Media and Ringing Tone Generation in the Session Initiation Protocol (SIP)"'>8</a>].  This model uses the
   early-session disposition type defined in the following section.



<span class="grey">Camarillo                   Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20The%20Early%20Session%20Disposition%20Type"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  The Early Session Disposition Type</span>

   We define a new disposition type for the Content-Disposition header
   field: early-session.  User agents MUST use early-session bodies to
   establish early media sessions in the same way as they use session
   bodies to establish regular sessions, as described in RFCs 3261 [<a href="#ref-2" title='"SIP: Session Initiation Protocol"'>2</a>]
   and 3264 [<a href="#ref-3" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>3</a>].  Particularly, early-session bodies MUST follow the
   offer/answer model and MAY appear in the same messages as session
   bodies do with the exceptions of 2xx responses for an INVITE and
   ACKs.  Nevertheless, it is NOT RECOMMENDED that early offers in
   INVITEs be included because they can fork, and the UAC could receive
   multiple early answers establishing early media streams at roughly
   the same time.  Also, the use of the same transport address (IP
   address plus port) in a session body and in an early-session body is
   NOT RECOMMENDED.  Using different transport addresses (e.g.,
   different ports) to receive early and regular media makes it easy to
   detect the start of the regular media.

   If a User Agent (UA) needs to refuse an early-session offer, it MUST
   do so by refusing all the media streams in it.  When SDP [<a href="#ref-7" title='"SDP: Session Description Protocol"'>7</a>] is used,
   this is done by setting the port number of all the media streams to
   zero.

      This is the same mechanism that UACs use to refuse regular offers
      that arrive in a response to an empty INVITE.

   An early media session established using early-session bodies MUST be
   terminated when its corresponding early dialog is terminated or it
   transitions to a regular dialog.

   It is RECOMMENDED that UAs generating regular and early session
   descriptions use, as long as it is possible, the same codecs in both.
   This way, the remote UA does not need to change codecs when the early
   session transitions to a regular session.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Preconditions"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Preconditions</span>

   <a href="rfc3312.html">RFC 3312</a> [<a href="#ref-4" title='"Integration of Resource Management and Session Initiation Protocol (SIP)"'>4</a>] defines a framework for preconditions for SDP.  Early-
   sessions MAY contain preconditions, which are treated in the same way
   as preconditions in regular sessions.  That is, the UAs do not
   exchange media, and the called user is not alerted until the
   preconditions are met.









<span class="grey">Camarillo                   Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Option%20Tag"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Option Tag</span>

   We define an option tag to be used in Require and Supported header
   fields: early-session.  A UA adding the early-session option tag to a
   message indicates that it understands the early-session disposition
   type.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Example"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Example</span>

   Figure 1 shows the message flow between two UAs.  INVITE (1) has an
   early-session option tag in its Supported header field and the body
   shown in Figure 2.  The UAS sends back a response with two body
   parts, as shown in Figure 3: one of disposition type session and the
   other early-session.  The session body part is the answer to the
   offer in the INVITE.  The early-session body part is an offer to
   establish an early media session.  When the UAC receives the 183
   (Session Progress) response, it sends the answer to the early-session
   offer in a PRACK, as shown in Figure 4.  This early media session is
   terminated when the early dialog transitions to a regular dialog.
   That is, when the UAS sends the (5) 200 (OK) response for the INVITE.

      A                           B
      |                           |
      |--------(1) INVITE--------&gt;|
      |            offer          |
      |                           |
      |&lt;--(2) Session Progress----|
      |       early-offer         |
      |       answer              |
      |                           |
      |---------(3) PRACK--------&gt;|
      |             early-answer  |
      |                           |
      |&lt;--------(4) 200 OK--------|
      |                           |
      |  *                     *  |
      | ************************* |
      |*       Early Media       *|
      | ************************* |
      |  *                     *  |
      |                           |
      |&lt;--------(5) 200 OK--------|
      |                           |
      |----------(6) ACK---------&gt;|
      |                           |

          Figure 1: Message flow




<span class="grey">Camarillo                   Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


   Content-Type: application/sdp
   Content-Disposition: session

   v=0
   o=alice 2890844730 2890844731 IN IP4 host.example.com
   s=
   c=IN IP4 192.0.2.1
   t=0 0
   m=audio 20000 RTP/AVP 0

          Figure 2: Offer


   Content-Type: multipart/mixed; boundary="boundary1"
   Content-Length: 401

   --boundary1
   Content-Type: application/sdp
   Content-Disposition: session

   v=0
   o=Bob 2890844725 2890844725 IN IP4 host.example.org
   s=
   c=IN IP4 192.0.2.2
   t=0 0
   m=audio 30000 RTP/AVP 0

   --boundary1
   Content-Type: application/sdp
   Content-Disposition: early-session

   v=0
   o=Bob 2890844714 2890844714 IN IP4 host.example.org
   s=
   c=IN IP4 192.0.2.2
   t=0 0
   m=audio 30002 RTP/AVP 0

   --boundary1--

          Figure 3: Early offer and answer










<span class="grey">Camarillo                   Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


   Content-Type: application/sdp
   Content-Disposition: early-session

   v=0
   o=alice 2890844717 2890844717 IN IP4 host.example.com
   s=
   c=IN IP4 192.0.2.1
   t=0 0
   m=audio 20002 RTP/AVP 0

          Figure 4: Early answer

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Security Considerations</span>

   The security implications of using early-session bodies in SIP are
   the same as when using session bodies; they are part of the
   offer/answer model.

   SIP uses the offer/answer model [<a href="#ref-3" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>3</a>] to establish early sessions in
   both the gateway and the application server models.  User Agents
   (UAs) generate a session description, which contains the transport
   address (i.e., IP address plus port) where they want to receive
   media, and send it to their peer in a SIP message.  When media
   packets arrive at this transport address, the UA assumes that they
   come from the receiver of the SIP message carrying the session
   description.  Nevertheless, attackers may attempt to gain access to
   the contents of the SIP message and send packets to the transport
   address contained in the session description.  To prevent this
   situation, UAs SHOULD encrypt their session descriptions (e.g., using
   S/MIME).

   Still, even if a UA encrypts its session descriptions, an attacker
   may try to guess the transport address used by the UA and send media
   packets to that address.  Guessing such a transport address is
   sometimes easier than it may seem because many UAs always pick up the
   same initial media port.  To prevent this situation, UAs SHOULD use
   media-level authentication mechanisms (e.g., Secure Realtime
   Transport Protocol (SRTP)[<a href="#ref-6" title='"The Secure Real-time Transport Protocol (SRTP)"'>6</a>]).  In addition, UAs that wish to keep
   their communications confidential SHOULD use media-level encryption
   mechanisms (e.g, SRTP [<a href="#ref-6" title='"The Secure Real-time Transport Protocol (SRTP)"'>6</a>]).

   Attackers may attempt to make a UA send media to a victim as part of
   a DoS attack.  This can be done by sending a session description with
   the victim's transport address to the UA.  To prevent this attack,
   the UA SHOULD engage in a handshake with the owner of the transport
   address received in a session description (just verifying willingness
   to receive media) before sending a large amount of data to the
   transport address.  This check can be performed by using a connection



<span class="grey">Camarillo                   Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


   oriented transport protocol, by using Simple Traversal of the UDP
   Protocol through NAT (STUN)[<a href="#ref-5" title='"STUN - Simple Traversal of User Datagram Protocol (UDP) Through Network Address Translators (NATs)"'>5</a>] in an end-to-end fashion, or by the
   key exchange in SRTP [<a href="#ref-6" title='"The Secure Real-time Transport Protocol (SRTP)"'>6</a>].

   In any event, note that the previous security considerations are not
   early media specific, but apply to the usage of the offer/answer
   model in SIP to establish sessions in general.

   Additionally, an early media-specific risk (roughly speaking, an
   equivalent to forms of "toll fraud" in the Public Switched Telephone
   Network (PSTN)) attempts to exploit the different charging policies
   some operators apply to early and to regular media.  When UAs are
   allowed to exchange early media for free, but are required to pay for
   regular media sessions, rogue UAs may try to establish a
   bidirectional early media session and never send a 2xx response for
   the INVITE.

   On the other hand, some application servers (e.g., Interactive Voice
   Response systems) use bidirectional early media to obtain information
   from the callers (e.g., the Personal Identification Number (PIN) code
   of a calling card).  So, we do not recommend that operators disallow
   bidirectional early media.  Instead, operators should consider a
   remedy of charging early media exchanges that last too long, or
   stopping them at the media level (according to the operator's
   policy).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  IANA Considerations</span>

   This document defines a new Content-Disposition header field
   disposition type (early-session) in <a href="#section-4">Section 4</a>.  This value has been
   registered in the IANA registry for Content-Dispositions with the
   following description:

      early-session   The body describes an early communications
                      session, for example, an <a href="rfc2327.html">RFC 2327</a> SDP body

   This document defines a SIP option tag (early-session) in <a href="#section-6">Section 6</a>.
   It has been registered in the SIP parameters registry
   (<a href="http://www.iana.org/assignments/sip-parameters">http://www.iana.org/assignments/sip-parameters</a>) under "Option Tags",
   with the following description.

      early-session   A UA adding the early-session option tag to a
                      message indicates that it understands the early-
                      session content disposition.







<span class="grey">Camarillo                   Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Acknowledgements"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Acknowledgements</span>

   Francois Audet, Christer Holmberg, and Allison Mankin provided useful
   comments on this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20References"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.1.%20%20Normative%20References"></a><a class="selflink" href="#section-11.1" name="section-11.1">11.1</a>.  Normative References</span>

   [<a id="ref-1" name="ref-1">1</a>]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-2" name="ref-2">2</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,
        Peterson, J., Sparks, R., Handley, M., and E. Schooler, "SIP:
        Session Initiation Protocol", <a href="rfc3261.html">RFC 3261</a>, June 2002.

   [<a id="ref-3" name="ref-3">3</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model with
        Session Description Protocol (SDP)", <a href="rfc3264.html">RFC 3264</a>, June 2002.

   [<a id="ref-4" name="ref-4">4</a>]  Camarillo, G., Marshall, W., and J. Rosenberg, "Integration of
        Resource Management and Session Initiation Protocol (SIP)", <a href="rfc3312.html">RFC</a>
        <a href="rfc3312.html">3312</a>, October 2002.

   [<a id="ref-5" name="ref-5">5</a>]  Rosenberg, J., Weinberger, J., Huitema, C., and R. Mahy,
        "STUN - Simple Traversal of User Datagram Protocol (UDP) Through
        Network Address Translators (NATs)", <a href="rfc3489.html">RFC 3489</a>, March 2003.

   [<a id="ref-6" name="ref-6">6</a>]  Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K.
        Norrman, "The Secure Real-time Transport Protocol (SRTP)", <a href="rfc3711.html">RFC</a>
        <a href="rfc3711.html">3711</a>, March 2004.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.2.%20%20Informational%20References"></a><a class="selflink" href="#section-11.2" name="section-11.2">11.2</a>.  Informational References</span>

   [<a id="ref-7" name="ref-7">7</a>]  Handley, M. and V. Jacobson, "SDP: Session Description
        Protocol", <a href="rfc2327.html">RFC 2327</a>, April 1998.

   [<a id="ref-8" name="ref-8">8</a>]  Camarillo, G. and H. Schulzrinne, "Early Media and Ringing Tone
        Generation in the Session Initiation Protocol (SIP)", <a href="rfc3960.html">RFC 3960</a>,
        December 2004.












<span class="grey">Camarillo                   Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


Author's Address

   Gonzalo Camarillo
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   EMail: Gonzalo.Camarillo@ericsson.com










































<span class="grey">Camarillo                   Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc3959.html">RFC 3959</a>             Early Session Disposition Type        December 2004</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2004).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the IETF's procedures with respect to rights in IETF Documents can
   be found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Camarillo                   Standards Track                    [Page 11]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc3959 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:44 GMT --></html>