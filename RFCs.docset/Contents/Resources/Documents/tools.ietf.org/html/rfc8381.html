<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc8381 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:35 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.127" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-eastlake-trill-vendor-channel" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:8381" name="DC.Identifier"/>
<meta content="May, 2018" name="DC.Date.Issued"/>
<meta content="Ayan Banerjee &lt;ayabaner@cisco.com&gt;" name="DC.Creator"/>
<meta content="The IETF TRILL (Transparent Interconnection of Lots of Links) protocol
is implemented by devices called TRILL switches or RBridges (Routing
Bridges). TRILL includes a general mechanism, called an RBridge
Channel, for the transmission of typed messages between RBridges in
the same campus and between RBridges and end stations on the same
link. This document specifies a method to send vendor-specific
messages over the RBridge Channel facility." name="DC.Description.Abstract"/>
<meta content="Transparent Interconnection of Lots of Links (TRILL): Vendor-Specific RBridge Channel Protocol" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 8381 - Transparent Interconnection of Lots of Links (TRILL): Vendor-Specific RBridge Channel Protocol</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8381.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8381" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-trill-vendor-channel" title="draft-ietf-trill-vendor-channel">draft-ietf-tril...</a>] [<a href="https://datatracker.ietf.org/doc/rfc8381" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8381" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8381" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                   D. Eastlake 3rd
Request for Comments: 8381                                         Y. Li
Category: Standards Track                                         W. Hao
ISSN: 2070-1721                                                   Huawei
                                                             A. Banerjee
                                                                   Cisco
                                                                May 2018


         <span class="h1">Transparent Interconnection of Lots of Links (TRILL):</span>
                <span class="h1">Vendor-Specific RBridge Channel Protocol</span>

Abstract

   The IETF TRILL (Transparent Interconnection of Lots of Links)
   protocol is implemented by devices called TRILL switches or RBridges
   (Routing Bridges).  TRILL includes a general mechanism, called an
   RBridge Channel, for the transmission of typed messages between
   RBridges in the same campus and between RBridges and end stations on
   the same link.  This document specifies a method to send vendor-
   specific messages over the RBridge Channel facility.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc7841.html#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8381">https://www.rfc-editor.org/info/rfc8381</a>.
















<span class="grey">Eastlake, et al.             Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
      <a href="#section-1.1">1.1</a>. Terminology and Acronyms ...................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Vendor Channel Packet Format ....................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Vendor Channel Errors ...........................................<a href="#page-6">6</a>
      <a href="#section-3.1">3.1</a>. Sending an Error Response ..................................<a href="#page-7">7</a>
   <a href="#section-4">4</a>. IANA Considerations .............................................<a href="#page-9">9</a>
   <a href="#section-5">5</a>. Security Considerations .........................................<a href="#page-9">9</a>
   <a href="#section-6">6</a>. References .....................................................<a href="#page-10">10</a>
      <a href="#section-6.1">6.1</a>. Normative References ......................................<a href="#page-10">10</a>
      <a href="#section-6.2">6.2</a>. Informative References ....................................<a href="#page-10">10</a>
   Authors' Addresses ................................................<a href="#page-11">11</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The IETF TRILL (Transparent Interconnection of Lots of Links)
   protocol [<a href="rfc6325.html" title='"Routing Bridges (RBridges): Base Protocol Specification"'>RFC6325</a>] [<a href="rfc7780.html" title='"Transparent Interconnection of Lots of Links (TRILL): Clarifications, Corrections, and Updates"'>RFC7780</a>] is implemented by devices called TRILL
   switches or RBridges (Routing Bridges).  It provides efficient least-
   cost transparent routing in multi-hop networks with arbitrary
   topologies and link technologies, using link-state routing and a hop
   count.

   The TRILL protocol includes an RBridge Channel facility [<a href="rfc7178.html" title='"Transparent Interconnection of Lots of Links (TRILL): RBridge Channel Support"'>RFC7178</a>] to
   support typed message transmission between RBridges in the same
   campus and between RBridges and end stations on the same link.  This
   document specifies a method of sending messages specified by a
   particular organization, indicated by OUI (Organizationally Unique
   Identifier) [<a href="rfc7042.html" title='"IANA Considerations and IETF Protocol and Documentation Usage for IEEE 802 Parameters"'>RFC7042</a>] or CID (Company Identifier) [<a href="#ref-802" title='"IEEE Standard for Local and Metropolitan Area Networks: Overview and Architecture"'>802</a>], over the
   RBridge Channel facility.  Such organization-specific messages could,
   for example, be used for vendor-specific diagnostic or control
   messages.




<span class="grey">Eastlake, et al.             Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


   However, note that a range of RBridge Channel protocol numbers are
   available based on RFC publication.  Those intending to use the
   RBridge Channel facility are encouraged to document their use in an
   RFC and to use RBridge Channel protocol numbers based on such RFC
   publication.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Terminology%20and%20Acronyms"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Terminology and Acronyms</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="rfc8174.html" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

   This document uses the acronyms defined in [<a href="rfc6325.html" title='"Routing Bridges (RBridges): Base Protocol Specification"'>RFC6325</a>] supplemented by
   the following additional acronyms:

   CID - Company Identifier [<a href="#ref-802" title='"IEEE Standard for Local and Metropolitan Area Networks: Overview and Architecture"'>802</a>]

   FGL - Fine-Grained Labeling

   OUI - Organizationally Unique Identifier [<a href="rfc7042.html" title='"IANA Considerations and IETF Protocol and Documentation Usage for IEEE 802 Parameters"'>RFC7042</a>]

   TRILL switch - An alternative term for an RBridge

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Vendor%20Channel%20Packet%20Format"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Vendor Channel Packet Format</span>

   The general structure of an RBridge Channel packet on a link between
   TRILL switches (RBridges) is shown in Figure 1 below.  When an
   RBridge Channel message is sent between an RBridge and an end station
   on the same link, in either direction, it is called a Native RBridge
   Channel message and the TRILL Header (including the Inner Ethernet
   Addresses and Data Label area) is omitted as shown in Figure 2.  The
   type of RBridge Channel packet is given by a Protocol field in the
   RBridge Channel Header that indicates how to interpret the Channel-
   Protocol-Specific Payload.  See [<a href="rfc7178.html" title='"Transparent Interconnection of Lots of Links (TRILL): RBridge Channel Support"'>RFC7178</a>].















<span class="grey">Eastlake, et al.             Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


                             Packet Structure

                   +-----------------------------------+
                   |           Link Header             |
                   +-----------------------------------+
                   |           TRILL Header            |
                   +-----------------------------------+
                   |     Inner Ethernet Addresses      |
                   +-----------------------------------+
                   |     Data Label (VLAN or FGL)      |
                   +-----------------------------------+
                   |      RBridge Channel Header       |
                   +-----------------------------------+
                   | Channel-Protocol-Specific Payload |
                   +-----------------------------------+
                   |    Link Trailer (FCS if Ethernet) |
                   +-----------------------------------+

                Figure 1: RBridge Channel Packet Structure


                             Message Structure

                   +-----------------------------------+
                   |           Link Header             |
                   +-----------------------------------+
                   |      RBridge Channel Header       |
                   +-----------------------------------+
                   | Channel Protocol Specific Payload |
                   +-----------------------------------+
                   |    Link Trailer (FCS if Ethernet) |
                   +-----------------------------------+

            Figure 2: Native RBridge Channel Message Structure

   Figure 3 below expands the RBridge Channel Header and Channel
   Protocol Specific Payload above for the case of the Vendor-Specific
   RBridge Channel Tunnel Protocol.  0x8946 is the Ethertype [<a href="rfc7042.html" title='"IANA Considerations and IETF Protocol and Documentation Usage for IEEE 802 Parameters"'>RFC7042</a>]
   assigned by the IEEE for the RBridge Channel protocol.












<span class="grey">Eastlake, et al.             Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


                           1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    RBridge Channel Header:
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    RBridge-Channel (0x8946)   |  0x0  | Channel Protocol=0x008|
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Flags        |  ERR  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    RBridge Channel Protocol Specific:
                                      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                      |     Vendor ID = OUI/CID       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |OUI/CID (cont.)|     VERR      | Sub-Protocol  | Sub-Version   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            Vendor-Protocol-Specific Data
      |
      |  ...

                Figure 3: Channel Tunnel Message Structure

   The fields in Figure 3 related to the Vendor RBridge Channel Protocol
   are as follows:

      Channel Protocol:  The RBridge Channel Protocol value allocated
         for the Vendor Channel (see <a href="#section-4">Section 4</a>).

      Vendor ID: This field indicates the vendor specifying the
         particular use or uses of the Vendor Channel.  The vendor to
         whom the OUI or CID in this field has been allocated is in
         charge of specifying Vendor Channel messages using their
         identifier.  Depending on the first byte of this field as
         follows:

         OUI: When the bottom two bits of the first byte of the Vendor
            ID are zero (that is, the first byte is 0bXXXXXX00), the
            Vendor ID is an OUI.

         CID: When the bottom two bits of the first byte are a one
            followed by a zero (that is, the first byte is 0bXXXXXX10),
            the Vendor ID is a CID.

         Other: Other values of the bottom two bits of the first byte of
            the Vendor ID are invalid, and a VERR of 2 MUST be returned,
            subject to possible rate limiting (see <a href="#section-3">Section 3</a>).

      VERR:  Vendor Channel Error.  See <a href="#section-3">Section 3</a>.





<span class="grey">Eastlake, et al.             Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


      Sub-Protocol: Actually, the vendor specifying their use of the
         Vendor Channel can do whatever they want with the bits after
         the VERR field.  But it is strongly RECOMMENDED that they use
         the sub-protocol / sub-version fields indicated so that
         multiple and evolving uses can be specified based on a single
         OUI.

      Sub-Version: See explanation above of the Sub-Protocol field.
         This field is provided to indicate the version of the
         particular vendor's Sub-Protocol.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Vendor%20Channel%20Errors"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Vendor Channel Errors</span>

   The VERR field values from 0x0 through 0x0F (inclusive) and the value
   0xFF are reserved for specification by the IETF.  See <a href="#section-4">Section 4</a>.  All
   other values of VERR are available for whatever use the vendor
   specifies, except that a Vendor Channel implementation MUST NOT send
   a Vendor Channel Error in response to a Vendor Channel message with a
   nonzero VERR.

   The VERR values thus far specified by the IETF are as follows:

   0.  The VERR field is zero in Vendor Channel messages unless the
       Vendor Channel packet is reporting an error.

   1.  The value one indicates that the length of the RBridge-Channel-
       Specific Data is less than 4 bytes.  This means that at least the
       VERR byte and possibly part or all of the OUI is truncated.  If
       an RBridge that implements the Vendor Channel facility receives
       such a Vendor Channel message, it MUST expand it to extend
       through the VERR field, set that field to one, and return the
       packet as described in <a href="#section-3.1">Section 3.1</a>.

   2.  The OUI/CID field value is unknown.  If an RBridge implements the
       Vendor Channel facility and receives a Vendor Channel packet with
       a zero VERR field and an OUI/CID field it does not recognize and
       the SL flag is zero in the RBridge Channel Header, it MUST set
       the VERR field to the value two and return the packet as
       described in <a href="#section-3.1">Section 3.1</a>.












<span class="grey">Eastlake, et al.             Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


   3.  The value 3 indicates that the Sub-Protocol field value is
       unknown.  An RBridge SHOULD set the VERR field to 3 and return
       the packet as described in <a href="#section-3.1">Section 3.1</a> if it implements the
       Vendor Channel facility and it receives a Vendor Channel packet
       meeting the following conditions:
       (a) a zero VERR field in the RBridge Channel Header,
       (b) a zero SL flag in the RBridge Channel Header,
       (c) an OUI/CID that it implements, and
       (d) a Sub-Protocol field value it does not recognize even though
           it implements and uses the Sub-Protocol field.

   4.  The value 4 indicates that the Sub-Version field value is
       unknown.  An RBridge SHOULD set the VERR field to 4 and return
       the packet as described in <a href="#section-3.1">Section 3.1</a> if it implements the
       Vendor RBridge Channel facility and it receives a Vendor Channel
       packet meeting the following conditions:
       (a) a zero VERR field  in the RBridge Channel Header,
       (b) a zero SL flag in the RBridge Channel Header,
       (c) an OUI/CID and Sub-Protocol that it implements, and
       (d) a Sub-Version field value it does not recognize even though
           it implements and uses the Sub-Version field.

   Uniform error handling is generally advisable for the sake of
   maintenance and understandability; however, "SHOULD" is chosen for
   errors 3 and 4 above because, as long as each message is
   distinguished by a vendor's OUI/CID, it is up to that vendor to
   decide between standard and nonstandard error handling.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Sending%20an%20Error%20Response"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Sending an Error Response</span>

   The IETF-specified Vendor Channel errors are sent in response to a
   received RBridge Channel packet by setting the VERR field as
   specified above and modifying the packet as specified below.  (The
   ERR field will be zero because, if it were nonzero, the packet would
   have been handled at the general RBridge Channel level rather than
   being passed down to the Vendor Channel level.)

   The RBridge Channel Header is modified by setting the SL flag.  (The
   flags in the Channel Header and the semantics of the SL flag are
   specified in [<a href="rfc7178.html" title='"Transparent Interconnection of Lots of Links (TRILL): RBridge Channel Support"'>RFC7178</a>].)

   o  If an error 1 is being generated because of truncation, the
      RBridge-Channel-Specific Data area is extended to include the VERR
      byte.







<span class="grey">Eastlake, et al.             Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


   o  If a Vendor Channel message was sent between RBridges, the TRILL
      Header is modified by (1) clearing the M bit, (2) setting the
      egress nickname to the ingress nickname as received, (3) setting
      the ingress nickname to a nickname held by the TRILL switch
      sending the error packet, and (4) setting the hop count to the
      usual value on TRILL Data packets used by the TRILL switch sending
      the error packet.

   o  If a Vendor Channel message was sent between an RBridge and an end
      station in either direction, the outer MAC addresses are modified
      by (1) setting the Outer.MacDA to the Outer.MacSA as received and
      (2) setting the Outer.MacSA to the MAC address of the port of the
      TRILL switch or end station sending the error packet.

   o  The priority of the error response message MAY be reduced from the
      priority of the Vendor Chanel message causing the error, unless it
      was already minimum priority, and the Drop Eligibility Indicator
      bit MAY be set in an error response.  (See <a href="rfc6325.html#section-4.1.1">Section 4.1.1 of
      [RFC6325]</a>.)

   o  Vendor Channel error responses MAY be rate-limited.

   It is generally anticipated that the entire packet in which an error
   was detected would be sent back, modified as above, as the protocol
   specific payload, so that, for example, error responses could more
   easily be matched with messages sent; however, except for errors 1
   and 2, this is up to the vendor specifying how their Vendor RBridge
   Channel messages are to be used.

   Note that if you receive a Vendor Channel error message with error 1,
   indicating a truncation error, you cannot trust the apparent
   "OUI/CID" in that Vendor Channel error message.



















<span class="grey">Eastlake, et al.             Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  IANA Considerations</span>

   IANA has allocated 0x008 for the Vendor-Specific RBridge Channel
   Protocol from the range of RBridge Channel protocols allocated by
   Standards Action.

   IANA has established a subregistry as follows in the TRILL Parameters
   registry (indented under "RBridge Channel Error Codes" after "RBridge
   Channel SubError Codes"):

   Registry: Vendor RBridge Channel Error Codes
   Registration Procedures: Standards Action
   Reference: <a href="rfc8381.html">RFC 8381</a>

          Code      Description                     Reference
          ----      -----------                     ---------
          0x00      No error                        <a href="rfc8381.html">RFC 8381</a>
          0x01      Message too short               <a href="rfc8381.html">RFC 8381</a>
          0x02      Unknown OUI/CID                 <a href="rfc8381.html">RFC 8381</a>
          0x03      Unknown Sub-Protocol            <a href="rfc8381.html">RFC 8381</a>
          0x04      Unknown Sub-Version             <a href="rfc8381.html">RFC 8381</a>
         0x05-0x0F  Unassigned                      -
         0x10-0xFE  Reserved for vendor use         <a href="rfc8381.html">RFC 8381</a>
          0xFF      Reserved                        <a href="rfc8381.html">RFC 8381</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Security%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Security Considerations</span>

   See [<a href="rfc6325.html" title='"Routing Bridges (RBridges): Base Protocol Specification"'>RFC6325</a>] for general TRILL Security Considerations.

   See [<a href="rfc7178.html" title='"Transparent Interconnection of Lots of Links (TRILL): RBridge Channel Support"'>RFC7178</a>] for general RBridge Channel Security Considerations.

   Neither the Vendor-Specific RBridge Channel Protocol nor the basic
   RBridge Channel Protocol [<a href="rfc7178.html" title='"Transparent Interconnection of Lots of Links (TRILL): RBridge Channel Support"'>RFC7178</a>] provide any security assurances or
   features.  (The basic RBridge Channel Protocol's first use was as an
   envelope for Bidirectional Forwarding Detection (BFD) messages
   [<a href="rfc7175.html" title='"Transparent Interconnection of Lots of Links (TRILL): Bidirectional Forwarding Detection (BFD) Support"'>RFC7175</a>], which provide their own security.)  Any needed security
   can be provided by fields or processing within the Vendor-Protocol-
   Specific Data, which is outside the scope of this document.
   Alternatively or in addition, use of a Vendor Channel MAY be nested
   inside the RBridge Channel Header Extension Protocol [<a href="rfc7978.html" title='"Transparent Interconnection of Lots of Links (TRILL): RBridge Channel Header Extension"'>RFC7978</a>]; this
   can provide some security services.










<span class="grey">Eastlake, et al.             Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20References"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Normative%20References"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Normative References</span>

   [<a id="ref-802" name="ref-802">802</a>]      IEEE 802, "IEEE Standard for Local and Metropolitan Area
              Networks: Overview and Architecture",
              DOI 10.1109/IEEESTD.2014.6847097, IEEE Std 802-2014.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC6325" name="ref-RFC6325">RFC6325</a>]  Perlman, R., Eastlake 3rd, D., Dutt, D., Gai, S., and A.
              Ghanwani, "Routing Bridges (RBridges): Base Protocol
              Specification", <a href="rfc6325.html">RFC 6325</a>, DOI 10.17487/RFC6325, July 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6325">https://www.rfc-editor.org/info/rfc6325</a>&gt;.

   [<a id="ref-RFC7042" name="ref-RFC7042">RFC7042</a>]  Eastlake 3rd, D. and J. Abley, "IANA Considerations and
              IETF Protocol and Documentation Usage for IEEE 802
              Parameters", <a href="https://tools.ietf.org/html/bcp141">BCP 141</a>, <a href="rfc7042.html">RFC 7042</a>, DOI 10.17487/RFC7042,
              October 2013, &lt;<a href="https://www.rfc-editor.org/info/rfc7042">https://www.rfc-editor.org/info/rfc7042</a>&gt;.

   [<a id="ref-RFC7178" name="ref-RFC7178">RFC7178</a>]  Eastlake 3rd, D., Manral, V., Li, Y., Aldrin, S., and D.
              Ward, "Transparent Interconnection of Lots of Links
              (TRILL): RBridge Channel Support", <a href="rfc7178.html">RFC 7178</a>,
              DOI 10.17487/RFC7178, May 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7178">https://www.rfc-editor.org/info/rfc7178</a>&gt;.

   [<a id="ref-RFC7780" name="ref-RFC7780">RFC7780</a>]  Eastlake 3rd, D., Zhang, M., Perlman, R., Banerjee, A.,
              Ghanwani, A., and S. Gupta, "Transparent Interconnection
              of Lots of Links (TRILL): Clarifications, Corrections, and
              Updates", <a href="rfc7780.html">RFC 7780</a>, DOI 10.17487/RFC7780, February 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7780">https://www.rfc-editor.org/info/rfc7780</a>&gt;.

   [<a id="ref-RFC8174" name="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="rfc2119.html">RFC</a>
              <a href="rfc2119.html">2119</a> Key Words", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc8174.html">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Informative%20References"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Informative References</span>

   [<a id="ref-RFC7175" name="ref-RFC7175">RFC7175</a>]  Manral, V., Eastlake 3rd, D., Ward, D., and A. Banerjee,
              "Transparent Interconnection of Lots of Links (TRILL):
              Bidirectional Forwarding Detection (BFD) Support", <a href="rfc7175.html">RFC</a>
              <a href="rfc7175.html">7175</a>, DOI 10.17487/RFC7175, May 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7175">https://www.rfc-editor.org/info/rfc7175</a>&gt;.





<span class="grey">Eastlake, et al.             Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc8381.html">RFC 8381</a>                  TRILL: Vendor Channel                 May 2018</span>


   [<a id="ref-RFC7978" name="ref-RFC7978">RFC7978</a>]  Eastlake 3rd, D., Umair, M., and Y. Li, "Transparent
              Interconnection of Lots of Links (TRILL): RBridge Channel
              Header Extension", <a href="rfc7978.html">RFC 7978</a>, DOI 10.17487/RFC7978,
              September 2016, &lt;<a href="https://www.rfc-editor.org/info/rfc7978">https://www.rfc-editor.org/info/rfc7978</a>&gt;.

Authors' Addresses

   Donald Eastlake 3rd
   Huawei Technologies
   155 Beaver Street
   Milford, MA  01757
   United States of America

   Phone: +1-508-333-2270
   EMail: d3e3e3@gmail.com


   Yizhou Li
   Huawei Technologies
   101 Software Avenue,
   Nanjing 210012
   China

   Phone: +86-25-56622310
   Email: liyizhou@huawei.com


   Weiguo Hao
   Huawei Technologies
   101 Software Avenue,
   Nanjing 210012
   China

   Phone: +86-25-56623144
   Email: haoweiguo@huawei.com


   Ayan Banerjee
   Cisco

   Email: ayabaner@cisco.com










Eastlake, et al.             Standards Track                   [Page 11]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc8381 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 13:47:35 GMT --></html>