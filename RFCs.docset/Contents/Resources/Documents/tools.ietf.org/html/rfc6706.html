<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6706 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:26 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6706" name="DC.Identifier"/>
<meta content="Nodes attached to common multi-access link types (e.g., multicast-" name="DC.Description.Abstract"/>
<meta content="Fred Templin &lt;fltemplin@acm.org&gt;" name="DC.Creator"/>
<meta content="2012-06-25" name="DC.Date.Issued"/>
<meta content="Asymmetric Extended Route Optimization (AERO)" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6706 - Asymmetric Extended Route Optimization (AERO)</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgyellow" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6706.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6706" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-templin-aero" title="draft-templin-aero">draft-templin-aero</a>] [<a href="https://datatracker.ietf.org/doc/rfc6706" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6706" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6706" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=6706">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                            EXPERIMENTAL</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Internet Engineering Task Force (IETF)                   F. Templin, Ed.
Request for Comments: 6706                  Boeing Research &amp; Technology
Category: Experimental                                       August 2012
ISSN: 2070-1721


             <span class="h1">Asymmetric Extended Route Optimization (AERO)</span>

Abstract

   Nodes attached to common multi-access link types (e.g., multicast-
   capable, shared media, non-broadcast multiple access (NBMA), etc.)
   can exchange packets as neighbors on the link, but they may not
   always be provisioned with sufficient routing information for optimal
   neighbor selection.  Such nodes should therefore be able to discover
   a trusted intermediate router on the link that provides both
   forwarding services to reach off-link destinations and redirection
   services to inform the node of an on-link neighbor that is closer to
   the final destination.  This redirection can provide a useful route
   optimization, since the triangular path from the ingress link
   neighbor, to the intermediate router, and finally to the egress link
   neighbor may be considerably longer than the direct path from ingress
   to egress.  However, ordinary redirection may lead to operational
   issues on certain link types and/or in certain deployment scenarios.
   This document therefore introduces an Asymmetric Extended Route
   Optimization (AERO) capability that addresses the issues.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for examination, experimental implementation, and
   evaluation.

   This document defines an Experimental Protocol for the Internet
   community.  This document is a product of the Internet Engineering
   Task Force (IETF).  It represents the consensus of the IETF
   community.  It has received public review and has been approved for
   publication by the Internet Engineering Steering Group (IESG).  Not
   all documents approved by the IESG are a candidate for any level of
   Internet Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6706">http://www.rfc-editor.org/info/rfc6706</a>.







<span class="grey">Templin                       Experimental                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


Copyright Notice

   Copyright (c) 2012 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





































<span class="grey">Templin                       Experimental                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-6">6</a>
   <a href="#section-3">3</a>. Motivation ......................................................<a href="#page-7">7</a>
   <a href="#section-4">4</a>. Example Use Cases ...............................................<a href="#page-8">8</a>
   <a href="#section-5">5</a>. Requirements ....................................................<a href="#page-9">9</a>
   <a href="#section-6">6</a>. Asymmetric Extended Route Optimization (AERO) ..................<a href="#page-10">10</a>
      <a href="#section-6.1">6.1</a>. AERO Link Dynamic Routing .................................<a href="#page-10">10</a>
      <a href="#section-6.2">6.2</a>. AERO Node Behavior ........................................<a href="#page-11">11</a>
           <a href="#section-6.2.1">6.2.1</a>. AERO Node Types ....................................<a href="#page-11">11</a>
           <a href="#section-6.2.2">6.2.2</a>. AERO Host Behavior .................................<a href="#page-11">11</a>
           <a href="#section-6.2.3">6.2.3</a>. Edge AERO Router Behavior ..........................<a href="#page-11">11</a>
           <a href="#section-6.2.4">6.2.4</a>. Intermediate AERO Router Behavior ..................<a href="#page-12">12</a>
      <a href="#section-6.3">6.3</a>. AERO Reference Operational Scenario .......................<a href="#page-12">12</a>
      <a href="#section-6.4">6.4</a>. AERO Specification ........................................<a href="#page-14">14</a>
           <a href="#section-6.4.1">6.4.1</a>. Traditional Redirection Approaches .................<a href="#page-14">14</a>
           <a href="#section-6.4.2">6.4.2</a>. AERO Concept of Operations .........................<a href="#page-15">15</a>
           <a href="#section-6.4.3">6.4.3</a>. Conceptual Data Structures and Protocol Constants ..16
           <a href="#section-6.4.4">6.4.4</a>. Data Origin Authentication .........................<a href="#page-17">17</a>
           <a href="#section-6.4.5">6.4.5</a>. AERO Redirection Message Format ....................<a href="#page-18">18</a>
           <a href="#section-6.4.6">6.4.6</a>. Sending Predirects .................................<a href="#page-20">20</a>
           <a href="#section-6.4.7">6.4.7</a>. Processing Predirects and Sending Redirects ........<a href="#page-21">21</a>
           <a href="#section-6.4.8">6.4.8</a>. Forwarding Redirects ...............................<a href="#page-22">22</a>
           <a href="#section-6.4.9">6.4.9</a>. Processing Redirects ...............................<a href="#page-23">23</a>
           <a href="#section-6.4.10">6.4.10</a>. Sending Periodic Predirect Keepalives .............<a href="#page-24">24</a>
           <a href="#section-6.4.11">6.4.11</a>. Neighbor Reachability Considerations ..............<a href="#page-26">26</a>
           <a href="#section-6.4.12">6.4.12</a>. Mobility Considerations ...........................<a href="#page-26">26</a>
           <a href="#section-6.4.13">6.4.13</a>. Link-Layer Address Change Considerations ..........<a href="#page-27">27</a>
           <a href="#section-6.4.14">6.4.14</a>. Prefix Re-provisioning Considerations .............<a href="#page-28">28</a>
           <a href="#section-6.4.15">6.4.15</a>. Backward Compatibility ............................<a href="#page-29">29</a>
   <a href="#section-7">7</a>. IANA Considerations ............................................<a href="#page-29">29</a>
   <a href="#section-8">8</a>. Security Considerations ........................................<a href="#page-29">29</a>
   <a href="#section-9">9</a>. Acknowledgements ...............................................<a href="#page-29">29</a>
   <a href="#section-10">10</a>. References ....................................................<a href="#page-30">30</a>
      <a href="#section-10.1">10.1</a>. Normative References .....................................<a href="#page-30">30</a>
      <a href="#section-10.2">10.2</a>. Informative References ...................................<a href="#page-30">30</a>
   <a href="#appendix-A">Appendix A</a>. Intermediate Router Interworking ......................<a href="#page-32">32</a>













<span class="grey">Templin                       Experimental                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Nodes attached to common multi-access link types (e.g., multicast-
   capable, shared media, non-broadcast multiple access (NBMA), etc.)
   can exchange packets as neighbors on the link, but they may not
   always be provisioned with sufficient routing information for optimal
   neighbor selection.  Such nodes should therefore be able to discover
   a trusted intermediate router on the link that provides both default
   forwarding services to reach off-link destinations and redirection
   services to inform the node of an on-link neighbor that is closer to
   the final destination.

                  +--------------+
                  |   Router A   |
                  |    (D-&gt;C)    |
                  +--------------+
                         |
       X--------+--------+--------+------X
                |                 |
     +----------+---+         +---+----------+
     |    Node B    |         |   Router C   |
     | (default-&gt;A) |         +-------+------+
     +--------------+                .-.
                                  ,-(  _)-.
                               .-(_ IPv6  )-.
                             (__    EUN      )
                                `-(______)-'
                              +-------+------+
                              |    Node D    |
                              +--------------+

            Figure 1: Traditional Multi-Access Link Redirection

   Figure 1 shows a traditional multi-access link redirection scenario.
   In this figure, node ('B') is provisioned with only a default route
   with router ('A') as the next hop.  Router ('A'), in turn, has a more
   specific route that lists router ('C') as the next-hop neighbor on
   the link for the End User Network (EUN) attached to node ('D').

   If node ('B') has a packet to send to node ('D'), node ('B') is
   obliged to send its initial packets via router ('A').  Router ('A')
   then forwards the packet to router ('C') and also returns a
   redirection control message to inform ('B') that ('C') is, in fact,
   an on-link neighbor that is closer to the final destination ('D').
   After receiving the redirection control message, node ('B') can place
   a more specific route in its forwarding table so that future packets
   destined to node ('D') can be sent directly via router ('C'), as
   shown in Figure 2.



<span class="grey">Templin                       Experimental                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


                  +--------------+
                  |   Router A   |
                  |    (D-&gt;C)    |
                  +--------------+
                         |
       X--------+--------+--------+------X
                |                 |
     +----------+---+         +---+----------+
     |    Node B    |         |   Router C   |
     | (default-&gt;A) |         +-------+------+
     |    (D-&gt;C)    |                .-.
     +--------------+             ,-(  _)-.
                               .-(_ IPv6  )-.
                             (__    EUN      )
                                `-(______)-'
                              +-------+------+
                              |    Node D    |
                              +--------------+

            Figure 2: More Specific Route Following Redirection

   This traditional redirection can provide a useful route optimization,
   since the triangular path from the ingress link neighbor, to the
   intermediate router, and finally to the egress link neighbor may be
   considerably longer than the direct path from ingress to egress.
   However, ordinary redirection may lead to operational issues on
   certain link types and/or in certain deployment scenarios.

   For example, when an ingress link neighbor accepts an ordinary
   redirection control message, it has no way of knowing whether the
   egress link neighbor is ready and willing to accept packets directly
   without forwarding through an intermediate router.  Likewise, the
   egress has no way of knowing that the ingress is authorized to
   forward packets from the claimed network-layer source address.  (This
   is especially important for very large links, since any node on the
   link can spoof the network-layer source address with low probability
   of detection even if the link-layer source address cannot be
   spoofed.)  Additionally, the ingress would have no way of knowing
   whether the direct path to the egress has failed, nor whether the
   final destination has moved away from the egress to some other
   network attachment point.

   Therefore, a new approach is required that can enable redirection
   signaling from the egress to the ingress link node under the
   mediation of a trusted intermediate router.  The mechanism is
   asymmetric (since only the forward direction from the ingress to the
   egress is optimized) and extended (since the redirection extends




<span class="grey">Templin                       Experimental                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   forward to the egress before reaching back to the ingress).  This
   document therefore introduces an Asymmetric Extended Route
   Optimization (AERO) capability that addresses the issues.

   While the AERO mechanisms were initially designed for the specific
   purpose of NBMA tunnel virtual interfaces (e.g., see [<a href="rfc2529.html" title='"Transmission of IPv6 over IPv4 Domains without Explicit Tunnels"'>RFC2529</a>],
   [<a href="rfc5214.html" title='"Intra-Site Automatic Tunnel Addressing Protocol (ISATAP)"'>RFC5214</a>], [<a href="rfc5569.html" title='"IPv6 Rapid Deployment on IPv4 Infrastructures (6rd)"'>RFC5569</a>], and [<a href="#ref-VET" title='"Virtual Enterprise Traversal (VET)"'>VET</a>]), they can also be applied to any
   multiple access link types that support redirection.  The AERO
   techniques are discussed herein with reference to IPv6
   [<a href="rfc2460.html" title='"Internet Protocol, Version 6 (IPv6) Specification"'>RFC2460</a>][RFC4861][<a href="rfc4862.html" title='"IPv6 Stateless Address Autoconfiguration"'>RFC4862</a>][RFC3315]; however, they can also be
   applied to any other network-layer protocol (e.g., IPv4
   [<a href="https://tools.ietf.org/html/rfc0791" title='"Internet Protocol"'>RFC0791</a>][RFC0792][<a href="rfc2131.html" title='"Dynamic Host Configuration Protocol"'>RFC2131</a>], etc.) that provides a redirection
   service (details of operation for other network-layer protocols are
   out of scope).

   This document is an Experimental RFC; therefore, it does not seek to
   define a new standard for the Internet.  Experimental status instead
   of Standards Track has been used since the document proposes a new
   and different dynamic routing mechanism.  Experimentation will focus
   on candidate multi-access link types that can connect large numbers
   of neighboring nodes where the use of existing dynamic routing
   protocols may be impractical.  Examples include NBMA tunnel virtual
   links, large bridged campus LANs, etc.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   The terminology in the normative references applies; the following
   terms are defined within the scope of this document:

   AERO link
      any link (either physical or virtual) over which the AERO
      mechanisms can be applied.  (For example, a virtual overlay of
      tunnels can serve as an AERO link.)

   AERO interface
      a node's attachment to an AERO link.

   AERO node
      a router or host that is connected to an AERO link and that
      participates in the AERO protocol on that link.

   intermediate AERO router ("intermediate router")
      a router that configures an advertising router interface on an
      AERO link over which it can provide default forwarding and
      redirection services for other AERO nodes.






<span class="grey">Templin                       Experimental                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   edge AERO router ("edge router")
      a router that configures a non-advertising router interface on an
      AERO link over which it can connect End User Networks (EUNs) to
      the AERO link.

   AERO host
      a simple host on an AERO link.

   ingress AERO node ("ingress node")
      a node that injects packets into an AERO link.

   egress AERO node ("egress node")
      a node that receives packets from an AERO link.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Motivation"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Motivation</span>

   AERO was designed to operate as an on-demand route optimization
   function for nodes attached to a single multi-access link, i.e.,
   similar to the standard IPv6 redirection mechanism based on ICMPv6
   messaging [<a href="rfc4443.html" title='"Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification"'>RFC4443</a>][RFC4861].  However, AERO differs in that the
   target of the redirection first receives a pre-authorization
   notification, after which it returns route optimization information
   to the source of the original packet.  This scenario calls into
   question whether a standard dynamic routing protocol could be used
   instead of AERO, but a number of considerations indicate that
   standard routing protocols may be poorly suited for the use cases
   AERO was designed to address.

   First, AERO is designed to work on very large multiple access links
   that may connect a mix of many thousands of routers and hosts.
   Traditional proactive dynamic routing protocols such as OSPF, IS-IS,
   RIP, OLSR (Optimized Link State Routing), and TBRPF (Topology
   Dissemination Based on Reverse-Path Forwarding) may be inefficient in
   such environments due to the control message overhead scaling when
   large numbers of routers are present and/or when link capacity is
   low.

   Second, AERO is designed to work on-demand of data packet arrival,
   but it only seeks to discover neighbors on the same link and not
   distant nodes that may be located many link hops away.  Reactive
   dynamic routing protocols such as Ad hoc On-Demand Distance Vector
   (AODV) and Dynamic Source Routing (DSR) also operate on-demand;
   however, they flood specialized route discovery messages that reach
   all nodes on the link and may further traverse multiple link hops



<span class="grey">Templin                       Experimental                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   before a route reply is received.  This requires a multicast-capable
   network and does not ensure delivery of the original data packet,
   which may be dropped or delayed during route discovery.

   Additionally, AERO is designed to override an existing route to a
   destination if the existing route directs traffic along a sub-optimal
   path via an extraneous router on the shared link.  AERO nodes send
   data packets over a preexisting working route, and they may
   subsequently receive notification of a better route based on route
   optimization feedback from a trusted on-link neighbor.  This stands
   in contrast to on-demand routing protocols that were designed to
   operate when no preexisting working routes are present and that
   multicast explicit route request messages to receive a route reply
   rather than simply unicast forwarding the data packet via a
   preexisting route.

   Finally, AERO requires less control message and/or processing
   overhead than standard dynamic routing protocols on links for which
   the number of routes that must be maintained by each router is far
   smaller than the total number of routers on the link, and the routes
   maintained by each router may be changing over time.  For example, on
   a link that connects N nodes, it will often be the case that each
   node will only communicate with a small number of link neighbors, and
   the set of neighbors may change dynamically over time.  Therefore,
   the number of active neighbor pairs on the link is V*N (where V is a
   small variable number) instead of N**2.  This is especially important
   on very large links, e.g., for values of N such as 1,000 or more.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Example%20Use%20Cases"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Example Use Cases</span>

   AERO was designed to satisfy numerous operational use cases.  As a
   first example, a hypothetical major airline has deployed an overlay
   network on top of the global Internet to track the aircraft in its
   fleet.  The global Internet therefore acts as the "link" over which
   the overlay network is configured.  Each aircraft acts as a mobile
   router that fronts for an internal network that includes various
   devices controlled and monitored by the airline.  However, it would
   be impractical for each aircraft to track the changing locations of
   all other aircraft in the fleet due to control message overhead on
   limited capacity communication links.

   In this example, an aircraft ('A') en route to its destination needs
   to report its ETA and communicate passenger itineraries to other en
   route aircraft that will be servicing passenger connections.  ('A')
   knows the overlay network addresses of the other aircraft, but does
   not know the current underlay address mappings.  ('A') sends its
   initial messages targeted to the other aircraft via an airline
   central dispatch router ('D'), which may be located in a far away



<span class="grey">Templin                       Experimental                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   location.  ('D') forwards the messages, but also initiates the AERO
   redirection procedure to step out of the triangular path and allow
   direct aircraft-to-aircraft communications.

   In a second example, Mobile Ad hoc Networks (MANETs) are often
   deployed in environments with a high degree of mobility, attrition,
   and very limited wireless communications link bandwidth.  Such
   environments typically also require the use of network-layer security
   mechanisms that view the MANET as a "link" over which encrypted
   messages are forwarded in an overlay network.  In such environments,
   a dynamic routing protocol running in the overlay network may serve
   to add unacceptable additional congestion to the already overtaxed
   wireless links.  In that case, the AERO route optimization mechanism
   can eliminate costly extraneous routing hops without imparting
   additional control message overhead.

   In a further example, a large campus LAN that is joined by Layer 2
   (L2) bridges may connect many thousands of routers and hosts that
   appear to share a single common multi-access link.  In that case, the
   AERO mechanisms can be applied to satisfy the necessary intra-link
   route optimization functions without employing an adjunct dynamic
   routing protocol that may be inefficient for reasons mentioned above.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Requirements"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Requirements</span>

   The route optimization mechanism must satisfy the following
   requirements:

   Req 1:  Off-load traffic from performance-critical gateways.
           The mechanism must offload sustained transit though an
           intermediate AERO router that would otherwise become a
           traffic concentrator.

   Req 2:  Support route optimization.
           The ingress AERO node should be able to send packets directly
           to the egress node without forwarding through an intermediate
           router for route optimization purposes.

   Req 3:  Support scaling.
           For scaling purposes, support interworking and control
           message forwarding between multiple intermediate routers (see
           <a href="#appendix-A">Appendix A</a>).

   Req 4:  Do not circumvent ingress filtering.
           The mechanism must not open an attack vector where network-
           layer source address spoofing is enabled even when link-layer
           source address spoofing is disabled.




<span class="grey">Templin                       Experimental                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   Req 5:  Do not expose packets to loss due to filtering.
           The ingress AERO node must have a way of knowing that the
           egress AERO node will accept its forwarded packets.

   Req 6:  Do not expose packets to loss due to path failure.
           The ingress AERO node must have a way of discovering whether
           the AERO egress node has gone unreachable on the route
           optimized path.

   Req 7:  Do not introduce routing loops.
           Intermediate routers must not invoke a route optimization
           that would cause a routing loop to form.

   Req 8:  Support mobility.
           The mechanism must continue to work even if the final
           destination node/network moves from a first egress node and
           re-associates with a second egress node.

   Req 9:  Support link layer address changes.
           The mechanism must continue to work even if the Layer 2
           addresses of ingress and/or egress AERO nodes change.

   Req 10: Support network renumbering.
           The mechanism must provide graceful transition when an AERO
           node's attached EUN is renumbered.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Asymmetric%20Extended%20Route%20Optimization%20%28AERO%29"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Asymmetric Extended Route Optimization (AERO)</span>

   The following sections specify an Asymmetric Extended Route
   Optimization (AERO) capability that fulfills the requirements
   specified in <a href="#section-5">Section 5</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20AERO%20Link%20Dynamic%20Routing"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  AERO Link Dynamic Routing</span>

   In many AERO link use case scenarios (e.g., small enterprise
   networks, small and stable MANETs, etc.), routers can engage in a
   traditional dynamic routing protocol so that routing/forwarding
   tables can be populated and standard forwarding between routers can
   be used.  In other scenarios (e.g., large enterprise/ISP networks,
   cellular service provider networks, dynamic MANETs, etc.), this might
   be impractical due to routing protocol control message scaling
   issues.

   When a traditional dynamic routing protocol cannot be used, the
   mechanisms specified in this section can provide a useful on-demand
   route discovery capability.  When both traditional dynamic routing





<span class="grey">Templin                       Experimental                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   protocols and the AERO mechanism are active on the same link, routes
   discovered by the dynamic routing protocol should take precedence
   over those discovered by AERO.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20AERO%20Node%20Behavior"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  AERO Node Behavior</span>

   The following sections discuss characteristics of nodes attached to
   links over which AERO can be used.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.1.%20%20AERO%20Node%20Types"></a><a class="selflink" href="#section-6.2.1" name="section-6.2.1">6.2.1</a>.  AERO Node Types</span>

   Intermediate AERO routers configure their AERO link interfaces as
   advertising router interfaces (see <a href="rfc4861.html#section-6.2.2">[RFC4861], Section 6.2.2</a>);
   therefore, they may send Router Advertisement (RA) messages that
   include non-zero Router Lifetimes.

   Edge AERO routers configure their AERO link interfaces as non-
   advertising router interfaces.

   AERO hosts configure their AERO link interfaces as simple host
   interfaces.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.2.%20%20AERO%20Host%20Behavior"></a><a class="selflink" href="#section-6.2.2" name="section-6.2.2">6.2.2</a>.  AERO Host Behavior</span>

   AERO hosts observe the IPv6 host requirements defined in [<a href="rfc6434.html" title='"IPv6 Node Requirements"'>RFC6434</a>],
   except that AERO hosts also engage in the AERO route optimization
   procedure as specified in <a href="#section-6.4">Section 6.4</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.3.%20%20Edge%20AERO%20Router%20Behavior"></a><a class="selflink" href="#section-6.2.3" name="section-6.2.3">6.2.3</a>.  Edge AERO Router Behavior</span>

   Edge AERO routers observe the IPv6 router requirements defined in
   [<a href="rfc6434.html" title='"IPv6 Node Requirements"'>RFC6434</a>] except that they act as "hosts" on their non-advertising
   AERO link router interfaces in the same fashion as for IPv6 Customer
   Premises Equipment (CPE) routers [<a href="rfc6204.html" title='"Basic Requirements for IPv6 Customer Edge Routers"'>RFC6204</a>].  Edge routers can then
   acquire managed prefix delegations aggregated by an intermediate
   router through the use of, e.g., DHCPv6 Prefix Delegation [<a href="rfc3633.html" title='"IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6"'>RFC3633</a>],
   administrative configuration, etc.

   After the edge router acquires prefixes, it can sub-delegate them to
   nodes and links within its attached EUNs, then it can forward any
   outbound packets coming from its EUNs via the intermediate router.
   The edge router also engages in the AERO route optimization procedure
   as specified in <a href="#section-6.4">Section 6.4</a>.








<span class="grey">Templin                       Experimental                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.%20%20Intermediate%20AERO%20Router%20Behavior"></a><a class="selflink" href="#section-6.2.4" name="section-6.2.4">6.2.4</a>.  Intermediate AERO Router Behavior</span>

   Intermediate AERO routers observe the IPv6 router requirements
   defined in [<a href="rfc6434.html" title='"IPv6 Node Requirements"'>RFC6434</a>] and respond to Router Solicitation (RS) messages
   from AERO hosts and edge routers on their advertising AERO link
   router interfaces by returning an RA message.  Intermediate routers
   further configure a DHCP relay/server function on their AERO links
   and/or provide an administrative interface for delegation of network-
   layer addresses and prefixes.

   When the intermediate router completes a stateful network-layer
   address or prefix delegation transaction (e.g., as a DHCPv6 relay/
   server, etc.), it establishes forwarding table entries that list the
   link-layer address of the client AERO node as the link-layer address
   of the next hop toward the delegated network-layer addresses/
   prefixes.

   When the intermediate router forwards a packet out the same AERO
   interface on which it arrived, it initiates an AERO route
   optimization procedure as specified in <a href="#section-6.4">Section 6.4</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20AERO%20Reference%20Operational%20Scenario"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  AERO Reference Operational Scenario</span>

   Figure 3 depicts the AERO reference operational scenario.  The figure
   shows an intermediate AERO router ('A'), two edge AERO routers ('B',
   'D'), an AERO host ('F'), and three ordinary IPv6 hosts ('C', 'E',
   'G'):
























<span class="grey">Templin                       Experimental                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


                    .-(::::::::)
                 .-(::: IPv6 :::)-.   +-------------+
                (:::: Internet ::::)--|    Host G   |
                 `-(::::::::::::)-'   +-------------+
                    `-(::::::)-'       2001:db8:3::1
                         |
                  +--------------+        +--------------+
                  | Intermediate |        |  AERO Host F |
                  | AERO Router A|        | (default-&gt;A) |
                  | (C-&gt;B; E-&gt;D) |        +--------------+
                  +--------------+          2001:db8:2:1
                       L3(A)                   L3(F)
                       L3(A)                   L2(F)
                         |                       |
       X-----+-----------+-----------+-----------+---X
             |       AERO Link       |
            L2(B)                  L2(D)
            L3(B)                  L3(D)
     +--------------+         +--------------+          .-.
     |  AERO Edge   |         |  AERO Edge   |       ,-(  _)-.
     |   Router B   |         |   Router D   |    .-(_ IPv6  )-.
     | (default-&gt;A) |         | (default-&gt;A) |--(__    EUN      )
     +--------------+         +--------------+     `-(______)-'
     2001:db8:0::/48           2001:db8:1::/48           |
             |                                     2001:db8:1::1
            .-.                                   +-------------+
         ,-(  _)-.      2001:db8:0::1             |    Host E   |
      .-(_ IPv6  )-.   +-------------+            +-------------+
    (__    EUN      )--|    Host C   |
       `-(______)-'    +-------------+

               Figure 3: AERO Reference Operational Scenario

   In Figure 3, the intermediate AERO router ('A') connects to the AERO
   link and connects to the IPv6 Internet, either directly or via other
   IPv6 routers (not shown).  Intermediate router ('A') configures an
   AERO link interface with a link-local network-layer address L3(A) and
   with link-layer address L2(A).  The intermediate router ('A') next
   arranges to add L2(A) to a published list of valid intermediate
   routers for the link.

   AERO node ('B') is an AERO edge router that connects to the AERO link
   via an interface with link-local network-layer address L3(B) and with
   link-layer address L2(B).  Node ('B') configures a default route with
   next-hop network-layer address L3(A) via the AERO interface, and it
   assigns the network-layer prefix 2001:db8:0::/48 to its attached EUN
   link.  IPv6 host ('C') attaches to the EUN, and it configures the
   network-layer address 2001:db8:0::1.



<span class="grey">Templin                       Experimental                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   AERO node ('D') is an AERO edge router that connects to the AERO link
   via an interface with link-local network-layer address L3(D) and with
   link-layer address L2(D).  Node ('D') configures a default route with
   next-hop network-layer address L3(A) via the AERO interface, and it
   assigns the network-layer prefix 2001:db8:1::/48 to its attached EUN
   link.  IPv6 host ('E') attaches to the EUN, and it configures the
   network-layer address 2001:db8:1::1.

   AERO host ('F') connects to the AERO link via an interface with link-
   local network-layer address L3(F) and with link-layer address L2(F).
   Host ('F') configures a default route with next-hop network-layer
   address L3(A) via the AERO interface, and it assigns the network-
   layer address 2001:db8:2::1 to the AERO interface.

   Finally, IPv6 host ('G') connects to an IPv6 network outside of the
   AERO link domain.  Host ('G') configures its IPv6 interface in a
   manner specific to its attached IPv6 link, and it assigns the
   network-layer address 2001:db8:3::1 to its IPv6 link interface.

   In these arrangements, intermediate router ('A') must maintain state
   that associates the delegated network-layer addresses/prefixes with
   the link-local network-layer addresses of the correct edge routers
   and/or hosts on the AERO link.  The nodes must, in turn, maintain at
   least a default route that points to intermediate router ('A'), and
   they can discover more-specific routes either via a proactive dynamic
   routing protocol or via the AERO mechanisms specified in <a href="#section-6.4">Section 6.4</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4.%20%20AERO%20Specification"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a>.  AERO Specification</span>

   <a href="#section-6.3">Section 6.3</a> describes the AERO reference operational scenario.  We
   now discuss the operation and protocol details of AERO with respect
   to this reference scenario.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.1.%20%20Traditional%20Redirection%20Approaches"></a><a class="selflink" href="#section-6.4.1" name="section-6.4.1">6.4.1</a>.  Traditional Redirection Approaches</span>

   With reference to Figure 3, when the IPv6 source host ('C') sends a
   packet to an IPv6 destination host ('E'), the packet is first
   forwarded via the EUN to ingress AERO node ('B').  The ingress node
   ('B') then forwards the packet over its AERO interface to
   intermediate router ('A'), which then forwards the packet to egress
   AERO node ('D'), where the packet is finally forwarded to the IPv6
   destination host ('E').  When intermediate router ('A') forwards the
   packet back out on its advertising AERO interface, it must arrange to
   redirect ingress node ('B') toward egress node ('D') as a better
   next-hop node on the AERO link that is closer to the final
   destination.  However, this redirection process should only occur if
   there is assurance that both the ingress and egress nodes are willing
   participants.



<span class="grey">Templin                       Experimental                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   Consider a first alternative in which intermediate router ('A')
   informs ingress node ('B') only and does not inform egress node ('D')
   (i.e., "traditional redirection").  In that case, the egress node has
   no way of knowing that the ingress is authorized to forward packets
   from their claimed source network-layer addresses, and it may simply
   elect to drop the packets.  Also, the ingress node has no way of
   knowing whether the egress is performing some form of source address
   filtering that would reject packets arriving from a node other than a
   trusted default router, nor whether the egress is even reachable via
   a direct path that does not involve the intermediate router.
   Finally, the ingress node has no way of knowing whether the final
   destination has moved away from the egress node.

   Consider a second alternative in which intermediate router ('A')
   informs both ingress node ('B') and egress node ('D') separately, via
   independent redirection control messages (i.e., "augmented
   redirection").  In that case, several conditions can occur that could
   result in communication failures.  First, if the ingress receives the
   redirection control message but the egress does not, subsequent
   packets sent by the ingress could be dropped due to filtering since
   the egress would not have neighbor state to verify their source
   network-layer addresses.  Second, if the egress receives the
   redirection control message but the ingress does not, subsequent
   packets sent in the reverse direction by the egress would be lost.
   Finally, timing issues surrounding the establishment and garbage
   collection of neighbor state at the ingress and egress nodes could
   yield unpredictable behavior.  For example, unless the timing were
   carefully coordinated through some form of synchronization loop,
   there would invariably be instances in which one node has the correct
   neighbor state and the other node does not resulting in non-
   deterministic packet loss.

   Since neither of these alternatives can satisfy the requirements
   listed in <a href="#section-5">Section 5</a>, a new redirection technique (i.e., "AERO
   redirection") is needed.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.2.%20%20AERO%20Concept%20of%20Operations"></a><a class="selflink" href="#section-6.4.2" name="section-6.4.2">6.4.2</a>.  AERO Concept of Operations</span>

   AERO redirection is used on links for which the traditional
   redirection approaches described in <a href="#section-6.4.1">Section 6.4.1</a> are insufficient to
   satisfy all requirements.  We now discuss the concept of operations
   for this new approach.

   Again, with reference to Figure 3, when source host ('C') sends a
   packet to destination host ('E'), the packet is first forwarded over
   the source host's attached EUN to ingress node ('B'), which then
   forwards the packet via its AERO interface to intermediate router
   ('A').



<span class="grey">Templin                       Experimental                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   Using AERO redirection, intermediate router ('A') then forwards the
   packet out the same AERO interface toward egress node ('D') and also
   sends an AERO "Predirect" message forward to the egress node as
   specified in <a href="#section-6.4.6">Section 6.4.6</a>.  The AERO Predirect message includes the
   identity of ingress node ('B') as well as information that egress
   node ('D') can use to determine the longest-match prefixes that cover
   the source and destination network-layer addresses of the packet that
   triggered the predirection event.  After egress node ('D') receives
   the AERO Predirect message, it process the message and returns an
   AERO Redirect message to the intermediate router ('A') as specified
   in <a href="#section-6.4.7">Section 6.4.7</a>.  (During the process, it also creates or updates
   neighbor state for ingress node ('B'), and retains this (src, dst)
   "prefix pair" as ingress filtering information to accept future
   packets using addresses matched by the prefixes from ingress node
   ('B').)

   When the intermediate router ('A') receives the AERO Redirect
   message, it processes the message and forwards it on to ingress node
   ('B') as specified in <a href="#section-6.4.8">Section 6.4.8</a>.  The message includes the
   identity of egress node ('D') as well as information that ingress
   node ('B') can use to determine the longest-match prefixes that cover
   the source and destination network-layer addresses of the packet that
   triggered the redirection event.  After ingress node ('B') receives
   the AERO Redirect message, it processes the message as specified in
   <a href="#section-6.4.9">Section 6.4.9</a>.  (During the process, it also creates or updates
   neighbor state for egress node ('D'), and retains this prefix pair as
   forwarding information to forward future packets using addresses
   matched by the prefixes to the egress node ('D').)

   Following the above AERO Predirect/Redirect message exchange,
   forwarding of packets with source and destination network-layer
   addresses covered by the longest-match prefix pair is enabled in the
   forward direction from ingress node ('B') to egress node ('D').  The
   mechanisms that enable this exchange are specified in the following
   sections.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.3.%20%20Conceptual%20Data%20Structures%20and%20Protocol%20Constants"></a><a class="selflink" href="#section-6.4.3" name="section-6.4.3">6.4.3</a>.  Conceptual Data Structures and Protocol Constants</span>

   Each AERO node maintains a per-AERO interface conceptual neighbor
   cache that includes an entry for each neighbor it communicates with
   on the AERO link, the same as for any IPv6 interface (see [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>]).

   Each AERO interface neighbor cache entry further maintains two lists
   of (src, dst) prefix pairs.  The AERO node adds a prefix pair to the
   ACCEPT list if it has been informed by a trusted intermediate router
   that it is safe to accept packets from the neighbor using network-
   layer source and destination addresses covered by the prefix pair.
   The AERO node adds a prefix pair to the FORWARD list if it has been



<span class="grey">Templin                       Experimental                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   informed by a trusted intermediate router that it is permitted to
   forward packets to the neighbor using network-layer addresses covered
   by the prefix pair.

   When the node adds a prefix pair to a neighbor cache entry ACCEPT
   list, it also sets an expiration timer for the prefix pair to
   ACCEPT_TIME seconds.  When the node adds a prefix pair to a neighbor
   cache entry FORWARD list, it also sets an expiration timer for the
   prefix pair to FORWARD_TIME seconds.  The node further maintains a
   keepalive interval KEEPALIVE_TIME used to limit the number of
   keepalive control messages.  Finally, the node maintains a constant
   value MAX_RETRY to limit the number of keepalives sent when a
   neighbor has gone unreachable.

   It is RECOMMENDED that FORWARD_TIME be set to the default constant
   value 30 seconds to match the default REACHABLE_TIME value specified
   for IPv6 neighbor discovery [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>].

   It is RECOMMENDED that ACCEPT_TIME be set to the default constant
   value 40 seconds to allow a 10 second window so that the AERO
   redirection procedure can converge before the ACCEPT_TIME timer
   decrements below FORWARD_TIME.

   It is RECOMMENDED that KEEPALIVE_TIME be set to the default constant
   value 5 seconds to providing timely reachability verification without
   causing excessive control message overhead.

   It is RECOMMENDED that MAX_RETRY be set to 3 the same as described
   for IPv6 neighbor discovery address resolution in <a href="rfc4861.html#section-7.3.3">Section 7.3.3 of
   [RFC4861]</a>.

   Different values for FORWARD_TIME, ACCEPT_TIME, KEEPALIVE_TIME, and
   MAX_RETRY MAY be administratively set, if necessary, to better match
   the AERO link's performance characteristics; however, if different
   values are chosen, all nodes on the link MUST consistently configure
   the same values.  ACCEPT_TIME SHOULD further be set to a value that
   is sufficiently longer than FORWARD time to allow the AERO
   redirection procedure to converge.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.4.%20%20Data%20Origin%20Authentication"></a><a class="selflink" href="#section-6.4.4" name="section-6.4.4">6.4.4</a>.  Data Origin Authentication</span>

   AERO nodes MUST employ a data origin authentication check for the
   packets they receive on an AERO interface.  In particular, the node
   considers the network-layer source address correct for the link-layer
   source address if at least one of the following is true:






<span class="grey">Templin                       Experimental                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   o  the network-layer source address is an on-link address that embeds
      the link-layer source address, or

   o  the network-layer source address is explicitly linked to the link-
      layer source address through per-neighbor state, or

   o  the link-layer source address is the address of a trusted
      intermediate AERO router.

   When the AERO node receives a packet on an AERO interface, it
   processes the packet further if it satisfies one of these data origin
   authentication conditions; otherwise, it drops the packet.

   Note that on links in which link-layer address spoofing is possible,
   AERO nodes may require additional securing mechanisms.  To address
   this, future work will define a strong data origin authentication
   scheme such as the use of digital signatures.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.5.%20%20AERO%20Redirection%20Message%20Format"></a><a class="selflink" href="#section-6.4.5" name="section-6.4.5">6.4.5</a>.  AERO Redirection Message Format</span>

   AERO Redirect/Predirect messages use the same format as for ICMPv6
   Redirect messages depicted in <a href="rfc4861.html#section-4.5">Section 4.5 of [RFC4861]</a>; however, the
   messages are encapsulated in a UDP header [<a href="https://tools.ietf.org/html/rfc0768" title='"User Datagram Protocol"'>RFC0768</a>] to distinguish
   them from ordinary ICMPv6 Redirect messages.  AERO Redirect messages
   therefore require a new UDP service port number 'AERO_PORT'.

   AERO Redirect/Predirect messages are formatted as shown in Figure 4:
























<span class="grey">Templin                       Experimental                     [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   Type (=0)   |   Code (=0)   |         Checksum (=0)         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |P|                          Reserved                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                       Target Address                          +
   |                                                               |
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                     Destination Address                       +
   |                                                               |
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   Options ...
   +-+-+-+-+-+-+-+-+-+-+-+-

             Figure 4: AERO Redirect/Predirect Message Format

   The AERO Redirect/Predirect message sender sets the 'Type' field to 0
   (since this is not an actual ICMPv6 message), and it also sets the
   'Checksum' field to 0 (since the UDP checksum will provide protection
   for the entire packet).  The sender further sets the 'P' bit to 1 if
   this is a 'Predirect' message and sets the 'P' bit to 0 if this is a
   'Redirect' message (as described below).

   The sender then encapsulates the AERO Redirect message in IP/UDP
   headers as shown in Figure 5:














<span class="grey">Templin                       Experimental                     [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   +--------------------+
   ~     IP header      ~
   +--------------------+
   ~     UDP header     ~
   +--------------------+
   |                    |
   ~    AERO Redirect   ~
   ~       Message      ~
   |                    |
   +--------------------+

              Figure 5: AERO Message UDP Encapsulation Format

   The AERO Redirect/Predirect message sender sets the UDP destination
   port number to 'AERO_PORT' and sets the UDP source port number to a
   (pseudo-)random value.  The sender next sets the UDP length field to
   the length of the UDP message, then calculates the checksum across
   the message and writes the value into the UDP checksum field.  Next,
   the sender sets the IP TTL/Hop-limit field to a small integer value
   chosen to provide a quick exit from any temporal routing loops.  It
   is RECOMMENDED that the sender set IP TTL/Hop-limit to the value 8
   unless it has better knowledge of the AERO link characteristics.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.6.%20%20Sending%20Predirects"></a><a class="selflink" href="#section-6.4.6" name="section-6.4.6">6.4.6</a>.  Sending Predirects</span>

   When an intermediate AERO router forwards a packet out the same AERO
   interface that it arrived on, the router sends an AERO Predirect
   message forward toward the egress AERO node instead of sending an
   ICMPv6 Redirect message back to the ingress AERO node.

   In the reference operational scenario, when the intermediate router
   ('A') forwards a packet sent by the ingress node ('B') toward the
   egress node ('D'), it also sends an AERO Predirect message forward
   toward the egress, subject to rate limiting (see <a href="rfc4861.html#section-8.2">Section 8.2 of
   [RFC4861]</a>).  The intermediate router ('A') prepares the AERO
   Predirect message as follows:

   o  the link-layer source address is set to 'L2(A)' (i.e., the link-
      layer address of the intermediate router).

   o  the link-layer destination address is set to 'L2(D)' (i.e., the
      link-layer address of the egress node).

   o  the network-layer source address is set to 'L3(A)' (i.e., the
      link-local network-layer address of the intermediate router).

   o  the network-layer destination address is set to 'L3(D)' (i.e., the
      link-local network-layer address of the egress node).



<span class="grey">Templin                       Experimental                     [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   o  the UDP destination port is set to 'AERO_PORT'.

   o  the Target and Destination Addresses are both set to 'L3(B)'
      (i.e., the link-local network-layer address of the ingress node).

   o  on links that require stateful address mapping, the message
      includes a Target Link Layer Address Option (TLLAO) set to 'L2(B)'
      (i.e., the link-layer address of the ingress node).

   o  the message includes a Route Information Option (RIO) [<a href="rfc4191.html" title='"Default Router Preferences and More-Specific Routes"'>RFC4191</a>]
      that encodes the ingress node's network-layer address/prefix
      delegation that covers the network-layer source address of the
      originating packet.

   o  the message includes a Redirected Header Option (RHO) that
      contains the originating packet truncated to ensure that at least
      the network-layer header is included but the size of the message
      does not exceed 1280 bytes.

   o  the 'P' bit is set to P=1.

   The intermediate router ('A') then sends the message forward to the
   egress node ('D').

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.7.%20%20Processing%20Predirects%20and%20Sending%20Redirects"></a><a class="selflink" href="#section-6.4.7" name="section-6.4.7">6.4.7</a>.  Processing Predirects and Sending Redirects</span>

   When the egress node ('D') receives an AERO Predirect message, it
   accepts the message only if it satisfies the data origin
   authentication requirements specified in <a href="#section-6.4.4">Section 6.4.4</a>.  The egress
   further accepts the message only if it is willing to serve as a
   redirection target.

   Next, the egress node ('D') validates the message according to the
   ICMPv6 Redirect message validation rules in <a href="rfc4861.html#section-8.1">Section 8.1 of [RFC4861]</a>
   with the exception that the message includes a Type value of 0, a
   Checksum value of 0 and a link-local address in the ICMP destination
   field that differs from the destination address of the packet header
   encapsulated in the RHO.

   In the reference operational scenario, when the egress node ('D')
   receives a valid AERO Predirect message, it either creates or updates
   a neighbor cache entry that stores the Target address of the message
   (i.e., the link-local network-layer address of the ingress node
   ('B')).  The egress node ('D') then records the prefix found in the
   RIO along with its own prefix that matches the network-layer
   destination address in the packet header found in the RHO with the
   neighbor cache entry as an acceptable (src, dst) prefix pair.  The
   egress node ('D') then adds the prefix pair to the neighbor cache



<span class="grey">Templin                       Experimental                     [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   entry ACCEPT list, and sets/resets an expiration timer for the prefix
   pair to ACCEPT_TIME seconds.  If the timer later expires, the egress
   node ('D') deletes the prefix pair.

   After processing the message, the egress node ('D') prepares an AERO
   Redirect message response as follows:

   o  the link-layer source address is set to 'L2(D)' (i.e., the link-
      layer address of the egress node).

   o  the link-layer destination address is set to 'L2(A)' (i.e., the
      link-layer address of the intermediate router).

   o  the network-layer source address is set to 'L3(D)' (i.e., the
      link-local network-layer address of the egress node).

   o  the network-layer destination address is set to 'L3(B)' (i.e., the
      link-local network-layer address of the ingress node).

   o  the UDP destination port is set to 'AERO_PORT'.

   o  the Target and the Destination Addresses are both set to 'L3(D)'
      (i.e., the link-local network-layer address of the egress node).

   o  on links that require stateful address mapping, the message
      includes a Target Link Layer Address Option (TLLAO) set to
      'L2(D)'.

   o  the message includes an RIO that encodes the egress node's
      network-layer address/prefix delegation that covers the network-
      layer destination address of the originating packet.

   o  the message includes as much of the RHO copied from the
      corresponding AERO Predirect message as possible such that at
      least the network-layer header is included but the size of the
      message does not exceed 1280 bytes.

   o  the 'P' bit is set to P=0.

   After the egress node ('D') prepares the AERO Redirect message, it
   sends the message to the intermediate router ('A').

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.8.%20%20Forwarding%20Redirects"></a><a class="selflink" href="#section-6.4.8" name="section-6.4.8">6.4.8</a>.  Forwarding Redirects</span>

   When the intermediate router ('A') receives an AERO Redirect message,
   it accepts the message only if it satisfies the data origin
   authentication requirements specified in <a href="#section-6.4.4">Section 6.4.4</a>.  Next, the
   intermediate router ('A') validates the message the same as described



<span class="grey">Templin                       Experimental                     [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   in <a href="#section-6.4.7">Section 6.4.7</a>.  Following validation, the intermediate router
   ('A') processes the Redirect, and then forwards a corresponding
   Redirect on to the ingress node ('B') as follows.

   In the reference operational scenario, the intermediate router ('A')
   receives the AERO Redirect message from the egress node ('D') and
   prepares to forward a corresponding AERO Redirect message to the
   ingress node ('B').  The intermediate router ('A') then verifies that
   the RIO encodes a network-layer address/prefix that the egress node
   ('D') is authorized to use, and it discards the message if
   verification fails.  Otherwise, the intermediate router ('A') changes
   the link-layer source address of the message to 'L2(A)', changes the
   network-layer source address of the message to the link-local
   network-layer address 'L3(A)', and changes the link-layer destination
   address to 'L2(B)' .  The intermediate router ('A') finally
   decrements the IP TTL/Hop-limit and forwards the message to the
   ingress node ('B').

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.9.%20%20Processing%20Redirects"></a><a class="selflink" href="#section-6.4.9" name="section-6.4.9">6.4.9</a>.  Processing Redirects</span>

   When the ingress node ('B') receives an AERO Redirect message (i.e.,
   one with P=0), it accepts the message only if it satisfies the data
   origin authentication requirements specified in <a href="#section-6.4.4">Section 6.4.4</a>.  Next,
   the ingress node ('B') validates the message the same as described in
   <a href="#section-6.4.6">Section 6.4.6</a>.  Following validation, the ingress node ('B') then
   processes the message as follows.

   In the reference operational scenario, when the ingress node ('B')
   receives the AERO Redirect message, it either creates or updates a
   neighbor cache entry that stores the Target address of the message
   (i.e., the link-local network-layer address of the egress node
   'L3(D)').  The ingress node ('B') then records the (src, dst) prefix
   pair associated with the triggering packet in the neighbor cache
   entry FORWARD list, i.e., it records its prefix that matches the
   redirected packet's network-layer source address and the prefix
   listed in the RIO as the prefix pair.  The ingress node ('B') then
   sets/resets an expiration timer for the prefix pair to FORWARD_TIME
   seconds.  If the timer later expires, the ingress node ('B') deletes
   the entry.

   Now, the ingress node ('B') has a neighbor cache FORWARD list entry
   for the prefix pair, and the egress node ('D') has a neighbor cache
   ACCEPT list entry for the prefix pair.  Therefore, the ingress node
   ('B') may forward ordinary network-layer data packets with network-
   layer source and destination addresses that match the prefix pair
   directly to the egress node ('D') without forwarding through the
   intermediate router ('A').  Note that the ingress node must have a
   way of informing the network layer of a route that associates the



<span class="grey">Templin                       Experimental                     [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   destination prefix with this neighbor cache entry.  The manner of
   establishing such a route (and deleting it when it is no longer
   necessary) is left to the implementation.

   To enable packet forwarding in the reverse direction, a separate AERO
   redirection operation is required that is the mirror-image of the
   forward operation described above but the link segments traversed in
   the forward and reverse directions may be different, i.e., the
   operations are asymmetric.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.10.%20%20Sending%20Periodic%20Predirect%20Keepalives"></a><a class="selflink" href="#section-6.4.10" name="section-6.4.10">6.4.10</a>.  Sending Periodic Predirect Keepalives</span>

   In order to prevent prefix pairs from expiring while data packets are
   actively flowing, the ingress node ('B') can send AERO Predirect
   messages directly to the egress node ('D') as a "keepalive" to
   solicit AERO Redirect messages.  The node should send such keepalive
   messages only when a data packet covered by the prefix pair has been
   sent recently, and should wait for at least KEEPALIVE_TIME seconds
   before sending each successive keepalive message in order to limit
   control message overhead.

   In the reference operational scenario, when the ingress node ('B')
   needs to refresh the FORWARD timer for a specific prefix pair, it can
   send an AERO Predirect message directly to the egress node ('D')
   prepared as follows:

   o  the link-layer source address is set to 'L2(B)' (i.e., the link-
      layer address of the ingress node).

   o  the link-layer destination address is set to 'L2(D)' (i.e., the
      link-layer address of the egress node).

   o  the network-layer source address is set to 'L3(B)' (i.e., the
      link-local network-layer address of the ingress node).

   o  the network-layer destination address is set to 'L3(D)' (i.e., the
      link-local network-layer address of the egress node).

   o  the UDP destination port is set to 'AERO_PORT'.

   o  the Predirect Target and Destination Addresses are both set to
      'L3(B)' (i.e., the link-local network-layer address of the ingress
      node).

   o  the message includes an RHO that contains the originating packet
      truncated to ensure that at least the network-layer header is
      included but the size of the message does not exceed 1280 bytes.




<span class="grey">Templin                       Experimental                     [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   o  the 'P' bit is set to P=1.

   When the egress node ('D') receives the AERO Predirect message, it
   validates the message the same as described in <a href="#section-6.4.6">Section 6.4.6</a>.
   Following validation, the egress node ('D') then resets its ACCEPT
   timer for the prefix pair that matches the originating packet's
   network-layer source and destination addresses to ACCEPT_TIME
   seconds, and it sends an AERO Redirect message directly to the
   ingress node ('B') prepared as follows:

   o  the link-layer source address is set to 'L2(D)' (i.e., the link-
      layer address of the egress node).

   o  the link-layer destination address is set to 'L2(B)' (i.e., the
      link-layer address of the ingress node).

   o  the network-layer source address is set to 'L3(D)' (i.e., the
      link-local network-layer address of the egress node).

   o  the network-layer destination address is set to 'L3(B)' (i.e., the
      link-local network-layer address of the ingress node).

   o  the UDP destination port is set to 'AERO_PORT'.

   o  the Redirect Target and Destination Addresses are both set to
      'L3(D)' (i.e., the link-local network-layer address of the egress
      node).

   o  the message includes as much of the RHO copied from the
      corresponding AERO Predirect message as possible such that at
      least the network-layer header is included but the size of the
      message does not exceed 1280 bytes.

   o  the 'P' bit is set to P=0.

   When the ingress node ('B') receives the AERO Redirect message, it
   validates the message the same as described in <a href="#section-6.4.6">Section 6.4.6</a>.
   Following validation, the ingress node ('B') then resets its FORWARD
   timer for the prefix pair that matches the originating packet's
   network-layer source and destination addresses to FORWARD_TIME
   seconds.

   In this process, if the ingress node sends MAX_RETRY AERO Predirect
   messages as keepalives without receiving an AERO Redirect message
   reply, it can either declare the prefix pair unreachable immediately
   or allow the pair to expire after FORWARD_TIME seconds.





<span class="grey">Templin                       Experimental                     [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.11.%20%20Neighbor%20Reachability%20Considerations"></a><a class="selflink" href="#section-6.4.11" name="section-6.4.11">6.4.11</a>.  Neighbor Reachability Considerations</span>

   When the ingress node ('B') receives an AERO Redirect message
   informing it of a direct path to a new egress node ('D'), there is a
   question in point as to whether the new egress node ('D') can be
   reached directly without forwarding through an intermediate router
   ('A').  On some AERO links, it may be reasonable for the ingress node
   ('B') to (optimistically) assume that reachability is transitive, and
   to immediately begin forwarding data packets to the egress node ('D')
   without testing reachability.

   On AERO links in which an optimistic assumption of transitive
   reachability may be unreasonable, however, the ingress node ('B') can
   defer the redirection until it tests the direct path to the egress
   node ('D'), e.g., by sending an IPv6 Neighbor Solicitation to elicit
   an IPv6 Neighbor Advertisement response.  If the ingress node ('B')
   is unable to elicit a response after MAX_RETRY attempts, it should
   consider the direct path to the egress node ('D') to be unusable.

   In either case, the ingress node ('B') can process any link errors
   corresponding to the data packets sent directly to the egress node
   ('D') as a hint that the direct path has either failed or has become
   intermittent.  Conversely, the ingress node ('B') can further process
   any AERO Redirect messages received as evidence of neighbor
   reachability.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.12.%20%20Mobility%20Considerations"></a><a class="selflink" href="#section-6.4.12" name="section-6.4.12">6.4.12</a>.  Mobility Considerations</span>

   Again, with reference to Figure 3, egress node ('D') can configure
   both a non-advertising router interface on a provider AERO link and
   advertising router interfaces on its connected EUN links.  When an
   EUN node ('E') in one of the egress node's connected EUNs moves to a
   different network point of attachment, however, it can release its
   network-layer address/prefix delegations that were registered with
   egress node ('D' ) and re-establish them via a different router.

   When the EUN node ('E') releases its network-layer address/prefix
   delegations, the egress node ('D') marks its forwarding table entries
   corresponding to the network-layer addresses/prefixes as "departed"
   and no longer responds to AERO Predirect messages for the departed
   addresses/prefixes.  When egress node ('D') receives packets from an
   ingress node ('B') with network-layer source and destination
   addresses that match a prefix pair on the ACCEPT list, it forwards
   them to the last-known link-layer address of EUN node ('E') as a
   means for avoiding mobility-related packet loss during routing
   changes.  Egress node ('D') also returns a NULL AERO Redirect message
   to inform the ingress node ('B') of the departure.  The message is
   prepared as follows:



<span class="grey">Templin                       Experimental                     [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   o  the link-layer source address is set to 'L2(D)'.

   o  the link-layer destination address is set to 'L2(B)'.

   o  the network-layer source address is set to the link-local address
      'L3(D)'.

   o  the network-layer destination address is set to the link-local
      address 'L3(B)'.

   o  the UDP destination port is set to 'AERO_PORT'.

   o  the Redirect Target and Destination Addresses are both set to
      NULL.

   o  the message includes an RHO that contains as much of the original
      packet as possible such that at least the network-layer header is
      included but the size of the message does not exceed 1280 bytes.

   o  the 'P' bit is set to P=0.

   When ingress node ('B') receives the NULL AERO Redirect message, it
   deletes the prefix pair associated with the packet in the RHO from
   its list of forwarding entries corresponding to egress node ('D').
   When egress node ('D')s ACCEPT_TIME timer for the prefix pair
   corresponding to the departed prefix expires, it deletes the prefix
   pairs from its list of ingress filtering entries corresponding to
   ingress node ('B').

   Eventually, any such correspondent AERO nodes will receive a NULL
   AERO Redirect message and will cease to use the egress node ('D') as
   a next hop.  They will then revert to sending packets destined to the
   EUN node ('E') via a trusted intermediate router and may subsequently
   receive new AERO Redirect messages to discover that the EUN node
   ('E') is now associated with a new AERO edge router.

   Note that any packets forwarded by the egress node ('D') via a
   departed forwarding table entry may be lost if the (mobile) EUN node
   ('E') moves off-link with respect to its previous EUN point of
   attachment.  This should not be a problem for large links (e.g.,
   large cellular network deployments, large ISP networks, etc.) in
   which all/most mobility events are intra-link.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.13.%20%20Link-Layer%20Address%20Change%20Considerations"></a><a class="selflink" href="#section-6.4.13" name="section-6.4.13">6.4.13</a>.  Link-Layer Address Change Considerations</span>

   When an ingress node needs to change its link-layer address, it
   deletes each FORWARD list entry that was established under the old
   link layer address, changes the link layer address, then allows



<span class="grey">Templin                       Experimental                     [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   packets to again flow through an intermediate router.  Any egress
   node that receives the packets will also receive new AERO Predirect
   messages from the intermediate router.  The egress node then deletes
   the ACCEPT entry that included the ingress node's old link-layer
   address and installs a new ACCEPT entry that includes the ingress
   node's new link-layer address.  The egress then returns a new AERO
   Redirect message to the ingress node via the intermediate router,
   which the ingress node uses to establish a new FORWARD list entry.

   When an egress node needs to change its link-layer address, it
   deletes each entry in the ACCEPT list and SHOULD also send NULL AERO
   Redirect messages to the corresponding ingress node (i.e., the same
   as described for mobility operations in <a href="#section-6.4.12">Section 6.4.12</a>) before
   changing the link-layer address.  Any ingress node that receives the
   NULL AERO Redirect messages will delete any corresponding FORWARD
   list entries and again allow packets to flow through an intermediate
   router.  The egress then changes the link-layer address, and it sends
   new AERO Redirect messages in response to any AERO Predirect messages
   it receives from the intermediate router while using the new link-
   layer address.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.14.%20%20Prefix%20Re-provisioning%20Considerations"></a><a class="selflink" href="#section-6.4.14" name="section-6.4.14">6.4.14</a>.  Prefix Re-provisioning Considerations</span>

   When an AERO node configures one or more FORWARD/ACCEPT list prefix
   pair entries, and the prefixes associated with the pair are somehow
   reconfigured or renumbered, the stale FORWARD/ACCEPT list information
   must be deleted.

   When an ingress node ('B') reconfigures its network-layer source
   prefix in such a way that the ACCEPT list entry in the egress node
   ('D') would no longer be valid (e.g., the prefix length of the source
   prefix changes), the ingress node ('B') simply deletes the prefix
   pair form its FORWARD list and allows subsequent packets to again
   flow through an intermediate router ('A').

   When the egress node ('D') reconfigures its network-layer destination
   prefix in such a way that the FORWARD list entry in the ingress node
   ('B') would no longer be valid, the egress node ('D') sends a NULL
   AERO Redirect message to the ingress node ('B') the same as described
   for mobility and link-layer address change considerations when it
   receives either an AERO Predirect message or a data packet (subject
   to rate limiting) from the ingress node ('B').









<span class="grey">Templin                       Experimental                     [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.4.15.%20%20Backward%20Compatibility"></a><a class="selflink" href="#section-6.4.15" name="section-6.4.15">6.4.15</a>.  Backward Compatibility</span>

   There are no backward compatibility considerations since AERO
   Redirect/Predirect messages use a new UDP port number that
   distinguishes them from other kinds of control messages.  Therefore,
   legacy nodes will simply discard any AERO Redirect/Predirect messages
   they may accidentally receive.

   Note however that AERO redirection requires that all three (the
   ingress, intermediate router, and egress) participate in the
   protocol.  Additionally, the intermediate router SHOULD disable
   ordinary ICMPv6 Redirects when AERO redirection is enabled.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  IANA Considerations</span>

   IANA has assigned UDP user port number 8060 for this protocol via the
   expert review process [<a href="rfc5226.html" title='"Guidelines for Writing an IANA Considerations Section in RFCs"'>RFC5226</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Security Considerations</span>

   AERO link security considerations are the same as for standard IPv6
   Neighbor Discovery [<a href="rfc4861.html" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>] except that AERO improves on some
   aspects.  In particular, AERO is dependent on a trust basis between
   AERO edge nodes and intermediate routers, where the edge nodes must
   only engage in the AERO mechanism when it is facilitated by a trusted
   intermediate router.

   AERO links must be protected against link-layer address spoofing
   attacks in which an attacker on the link pretends to be a trusted
   neighbor.  Links that provide link-layer securing mechanisms (e.g.,
   WiFi networks) and links that provide physical security (e.g.,
   enterprise network LANs) provide a first line of defense that is
   often sufficient.  In other instances, sufficient assurances against
   link-layer address spoofing attacks are possible if the source can
   digitally sign its messages through means outside the scope of this
   document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Acknowledgements"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Acknowledgements</span>

   Discussions both on the v6ops list and in private exchanges helped
   shape some of the concepts in this work.  Individuals who contributed
   insights include Mikael Abrahamsson, Fred Baker, Stewart Bryant,
   Brian Carpenter, Brian Haberman, Joel Halpern, and Lee Howard.
   Members of the IESG also provided valuable input during their review
   process that greatly improved the document.  Special thanks go to
   Stewart Bryant, Joel Halpern, and Brian Haberman for their
   shepherding guidance.




<span class="grey">Templin                       Experimental                     [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20References"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" name="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC0768" name="ref-RFC0768">RFC0768</a>]  Postel, J., "User Datagram Protocol", STD 6, <a href="rfc768.html">RFC 768</a>,
              August 1980.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2460" name="ref-RFC2460">RFC2460</a>]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", <a href="rfc2460.html">RFC 2460</a>, December 1998.

   [<a id="ref-RFC4191" name="ref-RFC4191">RFC4191</a>]  Draves, R. and D. Thaler, "Default Router Preferences and
              More-Specific Routes", <a href="rfc4191.html">RFC 4191</a>, November 2005.

   [<a id="ref-RFC4861" name="ref-RFC4861">RFC4861</a>]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", <a href="rfc4861.html">RFC 4861</a>,
              September 2007.

   [<a id="ref-RFC4862" name="ref-RFC4862">RFC4862</a>]  Thomson, S., Narten, T., and T. Jinmei, "IPv6 Stateless
              Address Autoconfiguration", <a href="rfc4862.html">RFC 4862</a>, September 2007.

   [<a id="ref-RFC5226" name="ref-RFC5226">RFC5226</a>]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", <a href="https://tools.ietf.org/html/bcp26">BCP 26</a>, <a href="rfc5226.html">RFC 5226</a>,
              May 2008.

   [<a id="ref-RFC6434" name="ref-RFC6434">RFC6434</a>]  Jankiewicz, E., Loughney, J., and T. Narten, "IPv6 Node
              Requirements", <a href="rfc6434.html">RFC 6434</a>, December 2011.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" name="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-IRON" name="ref-IRON">IRON</a>]     Templin, F., "The Internet Routing Overlay Network
              (IRON)", Work in Progress, June 2012.

   [<a id="ref-RFC0791" name="ref-RFC0791">RFC0791</a>]  Postel, J., "Internet Protocol", STD 5, <a href="rfc791.html">RFC 791</a>,
              September 1981.

   [<a id="ref-RFC0792" name="ref-RFC0792">RFC0792</a>]  Postel, J., "Internet Control Message Protocol", STD 5,
              <a href="rfc792.html">RFC 792</a>, September 1981.

   [<a id="ref-RFC2131" name="ref-RFC2131">RFC2131</a>]  Droms, R., "Dynamic Host Configuration Protocol",
              <a href="rfc2131.html">RFC 2131</a>, March 1997.

   [<a id="ref-RFC2529" name="ref-RFC2529">RFC2529</a>]  Carpenter, B. and C. Jung, "Transmission of IPv6 over IPv4
              Domains without Explicit Tunnels", <a href="rfc2529.html">RFC 2529</a>, March 1999.





<span class="grey">Templin                       Experimental                     [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   [<a id="ref-RFC3315" name="ref-RFC3315">RFC3315</a>]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", <a href="rfc3315.html">RFC 3315</a>, July 2003.

   [<a id="ref-RFC3633" name="ref-RFC3633">RFC3633</a>]  Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
              Host Configuration Protocol (DHCP) version 6", <a href="rfc3633.html">RFC 3633</a>,
              December 2003.

   [<a id="ref-RFC4443" name="ref-RFC4443">RFC4443</a>]  Conta, A., Deering, S., and M. Gupta, "Internet Control
              Message Protocol (ICMPv6) for the Internet Protocol
              Version 6 (IPv6) Specification", <a href="rfc4443.html">RFC 4443</a>, March 2006.

   [<a id="ref-RFC5214" name="ref-RFC5214">RFC5214</a>]  Templin, F., Gleeson, T., and D. Thaler, "Intra-Site
              Automatic Tunnel Addressing Protocol (ISATAP)", <a href="rfc5214.html">RFC 5214</a>,
              March 2008.

   [<a id="ref-RFC5569" name="ref-RFC5569">RFC5569</a>]  Despres, R., "IPv6 Rapid Deployment on IPv4
              Infrastructures (6rd)", <a href="rfc5569.html">RFC 5569</a>, January 2010.

   [<a id="ref-RFC6204" name="ref-RFC6204">RFC6204</a>]  Singh, H., Beebee, W., Donley, C., Stark, B., and O.
              Troan, "Basic Requirements for IPv6 Customer Edge
              Routers", <a href="rfc6204.html">RFC 6204</a>, April 2011.

   [<a id="ref-VET" name="ref-VET">VET</a>]      Templin, F., <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22Virtual+Enterprise+Traversal+%28VET%29%22" style="text-decoration: none">"Virtual Enterprise Traversal (VET)"</a>, Work
              in Progress, June 2012.


























<span class="grey">Templin                       Experimental                     [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Intermediate%20Router%20Interworking"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Intermediate Router Interworking</span>

   Figure 3 depicts a reference AERO operational scenario with a single
   intermediate router on the AERO link.  In order to support scaling to
   larger numbers of nodes, the AERO link can deploy multiple
   intermediate routers, e.g., as shown in Figure 6.

       +--------------+                        +--------------+
       | Intermediate |    +--------------+    | Intermediate |
       |   Router C   |    | Core Router D|    |   Router E   |
       | (default-&gt;D) |    | (A-&gt;C; G-&gt;E) |    | (default-&gt;D) |
       |    (A-&gt;B)    |    +--------------+    |    (G-&gt;F)    |
       +-------+------+                        +------+-------+
               |                                      |
       X---+---+--------------------------------------+---+---X
           |                  AERO Link                   |
     +-----+--------+                            +--------+-----+
     | Edge Router B|                            | Edge Router F|
     | (default-&gt;C) |                            | (default-&gt;E) |
     +--------------+                            +--------------+
           .-.                                         .-.
        ,-(  _)-.                                   ,-(  _)-.
     .-(_ IPv6  )-.                              .-(_ IPv6  )-.
    (__    EUN      )                           (__    EUN      )
       `-(______)-'                                `-(______)-'
            |                                           |
        +--------+                                  +--------+
        | Host A |                                  | Host G |
        +--------+                                  +--------+

                  Figure 6: Multiple Intermediate Routers

   In this example, the ingress AERO node ('B') (in this case an edge
   router, but could also be a host) associates with intermediate AERO
   router ('C'), while the egress AERO node ('F') (in this case an edge
   router, but could also be a host) associates with intermediate AERO
   router ('E').  Furthermore, intermediate routers ('C') and ('E') do
   not associate with each other directly, but rather have an
   association with a "core" router ('D') (i.e., a router that has full
   topology information concerning its associated intermediate routers).
   Core router ('D') may connect to either the AERO link or to other
   physical or virtual links (not shown) to which intermediate routers
   ('C') and ('E') also connect.

   When host ('A') sends a packet toward destination host ('G'), IPv6
   forwarding directs the packet through the EUN to edge router ('B'),
   which forwards the packet to intermediate router ('C') in absence of
   more-specific forwarding information.  Intermediate router ('C')



<span class="grey">Templin                       Experimental                     [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc6706.html">RFC 6706</a>                          AERO                       August 2012</span>


   forwards the packet, and it also generates an AERO Predirect message
   that is then forwarded through core router ('D') to intermediate
   router ('E').  When intermediate router ('E') receives the message,
   it forwards the message to egress router ('F').

   After processing the AERO Predirect message, egress router ('F')
   sends an AERO Redirect message to intermediate router ('E').

   Intermediate router ('E'), in turn, forwards the message through core
   router ('D') to intermediate router ('C').  When intermediate router
   ('C') receives the message, it forwards the message to ingress edge
   router ('B') informing it that host 'G's EUN can be reached via
   egress router ('F'), thus completing the AERO redirection.

   The interworkings between intermediate and core routers (including
   the conveyance of pseudo Predirects and Redirects) must be carefully
   coordinated in a manner outside the scope of this document.  In
   particular, the intermediate and core routers must ensure that any
   routing loops that may be formed are temporal in nature.  See [<a href="#ref-IRON" title='"The Internet Routing Overlay Network (IRON)"'>IRON</a>]
   for an architectural discussion of coordination between intermediate
   and core routers.

Author's Address

   Fred L. Templin (editor)
   Boeing Research &amp; Technology
   P.O. Box 3707 MC 7L-49
   Seattle, WA  98124
   USA

   EMail: fltemplin@acm.org




















Templin                       Experimental                     [Page 33]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6706 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:26 GMT --></html>