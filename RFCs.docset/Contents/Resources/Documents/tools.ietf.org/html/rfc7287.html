<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc7287 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:23 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-schmidt-multimob-pmipv6-source" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:7287" name="DC.Identifier"/>
<meta content="June, 2014" name="DC.Date.Issued"/>
<meta content="Waehlisch, Matthias" name="DC.Creator"/>
<meta content="Gao, Shuai" name="DC.Creator"/>
<meta content="Zhang, Hong-Ke" name="DC.Creator"/>
<meta content="Schmidt, Thomas" name="DC.Creator"/>
<meta content="Multicast communication can be enabled in Proxy Mobile IPv6 (PMIPv6)
domains via the Local Mobility Anchors by deploying Multicast Listener
Discovery (MLD) proxy functions at Mobile Access Gateways, by using
direct traffic distribution within an ISP's access network, or by
selective route optimization schemes. This document describes a base
solution and an experimental protocol to support mobile multicast
senders in PMIPv6 domains for all three scenarios. Protocol
optimizations for synchronizing PMIPv6 with PIM, as well as a peering
function for MLD proxies are defined. Mobile sources always remain
agnostic of multicast mobility operations." name="DC.Description.Abstract"/>
<meta content="Mobile Multicast Sender Support in Proxy Mobile IPv6 (PMIPv6) Domains" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 7287 - Mobile Multicast Sender Support in Proxy Mobile IPv6 (PMIPv6) Domains</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgyellow" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7287.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7287" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-multimob-pmipv6-source" title="draft-ietf-multimob-pmipv6-source">draft-ietf-mult...</a>] [<a href="https://datatracker.ietf.org/doc/rfc7287" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7287" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7287" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                            EXPERIMENTAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                   T. Schmidt, Ed.
Request for Comments: 7287                                   HAW Hamburg
Category: Experimental                                            S. Gao
ISSN: 2070-1721                                                 H. Zhang
                                             Beijing Jiaotong University
                                                            M. Waehlisch
                                                    link-lab &amp; FU Berlin
                                                               June 2014


 <span class="h1">Mobile Multicast Sender Support in Proxy Mobile IPv6 (PMIPv6) Domains</span>

Abstract

   Multicast communication can be enabled in Proxy Mobile IPv6 (PMIPv6)
   domains via the Local Mobility Anchors by deploying Multicast
   Listener Discovery (MLD) proxy functions at Mobile Access Gateways,
   by using direct traffic distribution within an ISP's access network,
   or by selective route optimization schemes.  This document describes
   a base solution and an experimental protocol to support mobile
   multicast senders in PMIPv6 domains for all three scenarios.
   Protocol optimizations for synchronizing PMIPv6 with PIM, as well as
   a peering function for MLD proxies are defined.  Mobile sources
   always remain agnostic of multicast mobility operations.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for examination, experimental implementation, and
   evaluation.

   This document defines an Experimental Protocol for the Internet
   community.  This document is a product of the Internet Engineering
   Task Force (IETF).  It represents the consensus of the IETF
   community.  It has received public review and has been approved for
   publication by the Internet Engineering Steering Group (IESG).  Not
   all documents approved by the IESG are a candidate for any level of
   Internet Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7287">http://www.rfc-editor.org/info/rfc7287</a>.









<span class="grey">Schmidt, et al.               Experimental                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





































<span class="grey">Schmidt, et al.               Experimental                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-2.1">2.1</a>.  Requirements Language . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-3">3</a>.  Base Solution for Source Mobility and PMIPv6 Routing  . . . .   <a href="#page-5">5</a>
     <a href="#section-3.1">3.1</a>.  Overview  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.2">3.2</a>.  Base Solution for Source Mobility: Details  . . . . . . .   <a href="#page-9">9</a>
       <a href="#section-3.2.1">3.2.1</a>.  Operations of the Mobile Node . . . . . . . . . . . .   <a href="#page-9">9</a>
       <a href="#section-3.2.2">3.2.2</a>.  Operations of the Mobile Access Gateway . . . . . . .   <a href="#page-9">9</a>
       <a href="#section-3.2.3">3.2.3</a>.  Operations of the Local Mobility Anchor . . . . . . .   <a href="#page-9">9</a>
       <a href="#section-3.2.4">3.2.4</a>.  IPv4 Support  . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
       <a href="#section-3.2.5">3.2.5</a>.  Efficiency of the Distribution System . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-4">4</a>.  Direct Multicast Routing  . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
     <a href="#section-4.1">4.1</a>.  Overview  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
     <a href="#section-4.2">4.2</a>.  MLD Proxies at MAGs . . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
       <a href="#section-4.2.1">4.2.1</a>.  Considerations for PIM-SM on the Upstream . . . . . .  <a href="#page-14">14</a>
       <a href="#section-4.2.2">4.2.2</a>.  SSM Considerations  . . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
     <a href="#section-4.3">4.3</a>.  PIM-SM at MAGs  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
       <a href="#section-4.3.1">4.3.1</a>.  Routing Information Base for PIM-SM . . . . . . . . .  <a href="#page-15">15</a>
       <a href="#section-4.3.2">4.3.2</a>.  Operations of PIM in Phase One (RP Tree)  . . . . . .  <a href="#page-16">16</a>
       <a href="#section-4.3.3">4.3.3</a>.  Operations of PIM in Phase Two (Register-Stop)  . . .  <a href="#page-16">16</a>
       4.3.4.  Operations of PIM in Phase Three (Shortest-Path Tree)  17
       <a href="#section-4.3.5">4.3.5</a>.  PIM-SSM Considerations  . . . . . . . . . . . . . . .  <a href="#page-18">18</a>
       <a href="#section-4.3.6">4.3.6</a>.  Handover Optimizations for PIM  . . . . . . . . . . .  <a href="#page-18">18</a>
     <a href="#section-4.4">4.4</a>.  BIDIR-PIM . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-18">18</a>
       <a href="#section-4.4.1">4.4.1</a>.  Routing Information Base for BIDIR-PIM  . . . . . . .  <a href="#page-19">19</a>
       <a href="#section-4.4.2">4.4.2</a>.  Operations of BIDIR-PIM . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
   5.  MLD Proxy Peering Function for Optimized Source Mobility in
       PMIPv6  . . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
     <a href="#section-5.1">5.1</a>.  Requirements  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-20">20</a>
     <a href="#section-5.2">5.2</a>.  Overview  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-20">20</a>
     <a href="#section-5.3">5.3</a>.  Operations in Support of Multicast Senders  . . . . . . .  <a href="#page-20">20</a>
     <a href="#section-5.4">5.4</a>.  Operations in Support of Multicast Listeners  . . . . . .  <a href="#page-21">21</a>
   <a href="#section-6">6</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-23">23</a>
   <a href="#section-7">7</a>.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-23">23</a>
   <a href="#section-8">8</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-24">24</a>
     <a href="#section-8.1">8.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-24">24</a>
     <a href="#section-8.2">8.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-24">24</a>
   <a href="#appendix-A">Appendix A</a>.  Multiple Upstream Interface Proxy  . . . . . . . . .  <a href="#page-26">26</a>
     <a href="#appendix-A.1">A.1</a>.  Operations for Local Multicast Sources  . . . . . . . . .  <a href="#page-26">26</a>
     <a href="#appendix-A.2">A.2</a>.  Operations for Local Multicast Subscribers  . . . . . . .  <a href="#page-26">26</a>
   <a href="#appendix-B">Appendix B</a>.  Implementation . . . . . . . . . . . . . . . . . . .  <a href="#page-27">27</a>








<span class="grey">Schmidt, et al.               Experimental                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Proxy Mobile IPv6 (PMIPv6) [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>] extends Mobile IPv6 (MIPv6)
   [<a href="rfc6275.html" title='"Mobility Support in IPv6"'>RFC6275</a>] by network-based management functions that enable IP
   mobility for a host without requiring its participation in any
   mobility-related signaling.  Additional network entities called Local
   Mobility Anchor (LMAs) and Mobile Access Gateways (MAGs) are
   responsible for managing IP mobility on behalf of the mobile node
   (MN).  An MN connected to a PMIPv6 domain, which only operates
   according to the base specifications of [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>], cannot participate
   in multicast communication, as MAGs will discard group packets.

   Multicast support for mobile listeners can be enabled within a PMIPv6
   domain by deploying MLD proxy functions at Mobile Access Gateways,
   and multicast routing functions at Local Mobility Anchors [<a href="rfc6224.html" title='"Base Deployment for Multicast Listener Support in Proxy Mobile IPv6 (PMIPv6) Domains"'>RFC6224</a>].
   This base deployment option is the simplest way to PMIPv6 multicast
   extensions in the sense that it follows the common PMIPv6 traffic
   model and neither requires new protocol operations nor additional
   infrastructure entities.  Standard software functions need to be
   activated on PMIPv6 entities, only, at the price of possibly non-
   optimal multicast routing.

   Alternate solutions leverage performance optimization by providing
   multicast routing at the access gateways directly [<a href="#ref-MULTI-EXT">MULTI-EXT</a>] or by
   using selective route optimization schemes [<a href="rfc7028.html" title='"Multicast Mobility Routing Optimizations for Proxy Mobile IPv6"'>RFC7028</a>].  Such
   approaches (partially) follow the model of providing multicast data
   services in parallel to PMIPv6 unicast routing [<a href="rfc7161.html" title='"Proxy Mobile IPv6 (PMIPv6) Multicast Handover Optimization by the Subscription Information Acquisition through the LMA (SIAL)"'>RFC7161</a>].

   Multicast listener support satisfies the needs of receptive use cases
   such as IPTV or server-centric gaming on mobiles.  However, current
   trends in the Internet develop towards user-centric, highly
   interactive group applications like user-generated streaming,
   conferencing, collective mobile sensing, etc.  Many of these popular
   applications create group content at end systems and can largely
   profit from a direct data transmission to a multicast-enabled
   network.

   This document describes the support of mobile multicast senders in
   Proxy Mobile IPv6 domains for the base deployment scenario [<a href="rfc6224.html" title='"Base Deployment for Multicast Listener Support in Proxy Mobile IPv6 (PMIPv6) Domains"'>RFC6224</a>],
   for direct traffic distribution within an ISP's access network, as
   well as for selective route optimization schemes.  The source
   mobility problem as discussed in [<a href="rfc5757.html" title='"Multicast Mobility in Mobile IP Version 6 (MIPv6): Problem Statement and Brief Survey"'>RFC5757</a>] serves as a foundation of
   this document.  Mobile nodes in this setting remain agnostic of
   multicast mobility operations.







<span class="grey">Schmidt, et al.               Experimental                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Terminology</span>

   This document uses the terminology as defined for the mobility
   protocols [<a href="rfc6275.html" title='"Mobility Support in IPv6"'>RFC6275</a>], [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>], and [<a href="rfc5844.html" title='"IPv4 Support for Proxy Mobile IPv6"'>RFC5844</a>], as well as the
   multicast routing [<a href="rfc4601.html" title='"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"'>RFC4601</a>] and edge-related protocols [<a href="rfc3376.html" title='"Internet Group Management Protocol, Version 3"'>RFC3376</a>],
   [<a href="rfc3810.html" title='"Multicast Listener Discovery Version 2 (MLDv2) for IPv6"'>RFC3810</a>], and [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>].

   Throughout this document, we use the following acronyms:

   HNP      Home Network Prefix as defined in [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>].

   MAG      Mobile Access Gateway as defined in [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>].

   MLD      Multicast Listener Discovery as defined in [<a href="rfc2710.html" title='"Multicast Listener Discovery (MLD) for IPv6"'>RFC2710</a>] and
            [<a href="rfc3810.html" title='"Multicast Listener Discovery Version 2 (MLDv2) for IPv6"'>RFC3810</a>].

   PIM      Protocol Independent Multicast as defined in [<a href="rfc4601.html" title='"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"'>RFC4601</a>].

   PMIPv6   Proxy Mobile IPv6 as defined in [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Requirements%20Language"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="rfc2119.html">RFC 2119</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Base%20Solution%20for%20Source%20Mobility%20and%20PMIPv6%20Routing"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Base Solution for Source Mobility and PMIPv6 Routing</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Overview"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Overview</span>

   The reference scenario for multicast deployment in Proxy Mobile IPv6
   domains is illustrated in Figure 1.  It displays the general setting
   for source mobility -- mobile nodes (MNs) with Home Network Prefixes
   (HNPs) that receive services via tunnels, which are spanned between a
   Local Mobility Anchor Address (LMAA) and a Proxy Care-of-Address
   (Proxy-CoA) at a Mobility Access Gateway (MAG).  MAGs play the role
   of first-hop access routers that serve multiple MNs on the downstream
   while running an MLD/IGMP proxy instance for every LMA upstream
   tunnel.












<span class="grey">Schmidt, et al.               Experimental                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


                          +-------------+
                          | Multicast   |
                          | Listeners   |
                          +-------------+
                                 |
                        ***  ***  ***  ***
                       *   **   **   **   *
                      *                    *
                       *  Fixed Internet  *
                      *                    *
                       *   **   **   **   *
                        ***  ***  ***  ***
                         /            \
                     +----+         +----+
                     |LMA1|         |LMA2|              Multicast Anchor
                     +----+         +----+
                LMAA1  |              |  LMAA2
                       |              |
                       \\           //\\
                        \\         //  \\
                         \\       //    \\                Unicast Tunnel
                          \\     //      \\
                           \\   //        \\
                            \\ //          \\
                  Proxy-CoA1 ||            ||  Proxy-CoA2
                          +----+          +----+
                          |MAG1|          |MAG2|           MLD Proxy
                          +----+          +----+
                           |  |             |
                   MN-HNP1 |  | MN-HNP2     | MN-HNP3
                           |  |             |
                          MN1 MN2          MN3

                    Multicast Sender + Listener(s)

      Figure 1: Reference Network for Multicast Deployment in PMIPv6

   An MN in a PMIPv6 domain will decide on multicast data transmission
   completely independent of its current mobility conditions.  It will
   send packets as initiated by applications, using its source address
   with an HNP and a multicast destination address chosen by application
   needs.  Multicast packets will arrive at the currently active MAG via
   one of its downstream local (wireless) links.  A multicast-unaware
   MAG would simply discard these packets in the absence of instructions
   for packet processing, i.e., a Multicast Routing Information Base
   (MRIB).





<span class="grey">Schmidt, et al.               Experimental                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   An MN can successfully distribute multicast data in PMIPv6, if MLD
   proxy functions are deployed at the MAG as described in [<a href="rfc6224.html" title='"Base Deployment for Multicast Listener Support in Proxy Mobile IPv6 (PMIPv6) Domains"'>RFC6224</a>].
   In this setup, the MLD proxy instance serving a mobile multicast
   source has configured its upstream interface at the tunnel towards
   the MN's corresponding LMA.  For each LMA, there will be a separate
   instance of an MLD proxy.

   According to the specifications given in [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>], multicast data
   arriving from a downstream interface of an MLD proxy will be
   forwarded to the upstream interface and to all but the incoming
   downstream interfaces that have appropriate forwarding states for
   this group.  Thus, multicast streams originating from an MN will
   arrive at the corresponding LMA and directly at all mobile receivers
   co-located at the same MAG and MLD proxy instance.  Serving as the
   designated multicast router or an additional MLD proxy, the LMA
   forwards data to the fixed Internet, whenever forwarding states are
   maintained by multicast routing.  If the LMA is acting as another MLD
   proxy, it will forward the multicast data to its upstream interface
   and to downstream interfaces with matching subscriptions,
   accordingly.

   In case of a handover, the MN (being unaware of IP mobility) can
   continue to send multicast packets as soon as network connectivity is
   re-established.  At this time, the MAG has determined the
   corresponding LMA, and IPv6 unicast address configuration (including
   PMIPv6 bindings) has been completed.  Still, multicast packets
   arriving at the MAG are discarded (if not buffered) until the MAG has
   completed the following steps.

   1.  The MAG has determined that the MN is admissible to multicast
       services.

   2.  The MAG has added the new downstream link to the MLD proxy
       instance with an uplink to the corresponding LMA.

   As soon as the MN's uplink is associated with the corresponding MLD
   proxy instance, multicast packets are forwarded again to the LMA and
   eventually to receivers within the PMIP domain.  (See the call flow
   in Figure 2.)  In this way, multicast source mobility is
   transparently enabled in PMIPv6 domains that deploy the base scenario
   for multicast.










<span class="grey">Schmidt, et al.               Experimental                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   MN1             MAG1             MN2             MAG2             LMA
   |                |                |               |                |
   |                | Mcast Data     |               |                |
   |                |&lt;---------------+               |                |
   |                |     Mcast Data |               |                |
   |  Join(G)       +================================================&gt;|
   +--------------&gt; |                |               |                |
   | Mcast Data     |                |               |                |
   |&lt;---------------+                |               |                |
   |                |                |               |                |
   |           &lt;  Movement of MN 2 to MAG2  &amp;  PMIP Binding Update  &gt; |
   |                |                |               |                |
   |                |                |--- Rtr Sol --&gt;|                |
   |                |                |&lt;-- Rtr Adv ---|                |
   |                |                |               |                |
   |                |                |   &lt; MLD Proxy Configuration &gt;  |
   |                |                |               |                |
   |                |                |  (MLD Query)  |                |
   |                |                |&lt;--------------+                |
   |                |                |  Mcast Data   |                |
   |                |                +--------------&gt;|                |
   |                |                |               | Mcast Data     |
   |                |                |               +===============&gt;|
   |                |                |               |                |
   |                |   Mcast Data   |               |                |
   |                |&lt;================================================+
   |  Mcast Data    |                |               |                |
   |&lt;---------------+                |               |                |
   |                |                |               |                |

                Legend: Rtr Sol - ICMPv6 Router Solicitation
                        Rtr Adv - ICMPv6 Router Advertisement

   Figure 2: Call Flow for Group Communication in Multicast-Enabled PMIP

   These multicast deployment considerations likewise apply for mobile
   nodes that operate with their IPv4 stack enabled in a PMIPv6 domain.
   PMIPv6 can provide IPv4 home address mobility support [<a href="rfc5844.html" title='"IPv4 Support for Proxy Mobile IPv6"'>RFC5844</a>].
   IPv4 multicast is handled by an IGMP proxy function at the MAG in an
   analogous way.

   Following these deployment steps, multicast traffic distribution
   transparently interoperates with PMIPv6.  It is worth noting that an
   MN -- while being attached to the same MAG as the mobile source, but
   associated with a different LMA -- cannot receive multicast traffic
   on a shortest path.  Instead, multicast streams flow up to the LMA of





<span class="grey">Schmidt, et al.               Experimental                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   the mobile source, are transferred to the LMA of the mobile listener,
   and are tunneled downwards to the MAG again.  (See <a href="#section-5">Section 5</a> for
   further optimizations.)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20Base%20Solution%20for%20Source%20Mobility%3A%20Details"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  Base Solution for Source Mobility: Details</span>

   Support of multicast source mobility in PMIPv6 requires that general
   multicast functions be deployed at PMIPv6 routers and that their
   interactions with the PMIPv6 protocol be defined as follows.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.%20%20Operations%20of%20the%20Mobile%20Node"></a><a class="selflink" href="#section-3.2.1" name="section-3.2.1">3.2.1</a>.  Operations of the Mobile Node</span>

   A mobile node willing to send multicast data will proceed as if
   attached to the fixed Internet.  No specific mobility or other
   multicast-related functionalities are required at the MN.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.2.%20%20Operations%20of%20the%20Mobile%20Access%20Gateway"></a><a class="selflink" href="#section-3.2.2" name="section-3.2.2">3.2.2</a>.  Operations of the Mobile Access Gateway</span>

   A Mobile Access Gateway is required to have MLD proxy instances
   deployed, one for each tunnel to an LMA, which serves as its unique
   upstream link (cf. [<a href="rfc6224.html" title='"Base Deployment for Multicast Listener Support in Proxy Mobile IPv6 (PMIPv6) Domains"'>RFC6224</a>]).  On the arrival of an MN, the MAG
   decides on the mapping of downstream links to a proxy instance and
   the upstream link to the LMA based on the regular Binding Update List
   as maintained by PMIPv6 standard operations.  When multicast data is
   received from the MN, the MAG MUST identify the corresponding proxy
   instance from the incoming interface and forwards multicast data
   upstream according to [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>].

   The MAG MAY apply special admission control to enable multicast data
   transmission from an MN.  It is advisable to take special care that
   MLD proxy implementations do not redistribute multicast data to
   downstream interfaces without appropriate subscriptions in place.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.3.%20%20Operations%20of%20the%20Local%20Mobility%20Anchor"></a><a class="selflink" href="#section-3.2.3" name="section-3.2.3">3.2.3</a>.  Operations of the Local Mobility Anchor</span>

   For any MN, the Local Mobility Anchor acts as the persistent Home
   Agent and at the same time as the default multicast upstream for the
   corresponding MAG.  It will manage and maintain a multicast
   forwarding information base for all group traffic arriving from its
   mobile sources.  It SHOULD participate in multicast routing functions
   that enable traffic redistribution to all adjacent LMAs within the
   PMIPv6 domain and thereby ensure a continuous receptivity while the
   source is in motion.








<span class="grey">Schmidt, et al.               Experimental                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.2.3.1.%20%20Local%20Mobility%20Anchors%20Operating%20PIM"></a><a class="selflink" href="#section-3.2.3.1" name="section-3.2.3.1">3.2.3.1</a>.  Local Mobility Anchors Operating PIM</span>

   Local Mobility Anchors that operate the Protocol Independent
   Multicast - Sparse Mode (PIM-SM) routing protocol [<a href="rfc4601.html" title='"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"'>RFC4601</a>] will
   require sources to be directly connected for sending PIM registers to
   the Rendezvous Point (RP).  This does not hold in a PMIPv6 domain, as
   MAGs are routers intermediate to the MN and the LMA.  In this sense,
   MNs are multicast sources external to the PIM-SM domain.

   To mitigate this incompatibility common to all subsidiary MLD proxy
   domains, the LMA MUST act as a PIM Border Router and activate the
   Border-bit.  In this case, the DirectlyConnected(S) is treated as
   being TRUE for mobile sources and the PIM-SM forwarding rule "iif ==
   RPF_interface(S)" is relaxed to be TRUE, as the incoming tunnel
   interface from MAG to LMA is not considered part of the PIM-SM
   component of the LMA (see <a href="rfc4601.html#appendix-A.1">Appendix A.1 of [RFC4601]</a> ).

   In addition, an LMA serving as the PIM Designated Router (DR) is
   connected to MLD proxies via individual IP tunnel interfaces and will
   experience changing PIM source states on handover.  As the incoming
   interface connects to a point-to-point link, PIM Assert contention is
   not active, and incoming interface validation is only performed by
   Reverse Path Forwarding (RPF) checks.  Consequently, a PIM DR SHOULD
   update incoming source states, as soon as RPF inspection succeeds,
   i.e., after the PMIPv6 forwarding state update.  Consequently, PIM
   routers SHOULD be able to manage these state changes, but some
   implementations are expected to incorrectly refuse packets until the
   previous state has timed out.

   Notably, running Bidirectional PIM (BIDIR-PIM) [<a href="rfc5015.html" title='"Bidirectional Protocol Independent Multicast (BIDIR- PIM)"'>RFC5015</a>] on LMAs
   remains robust with respect to source location and does not require
   special configurations or state management for sources.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.4.%20%20IPv4%20Support"></a><a class="selflink" href="#section-3.2.4" name="section-3.2.4">3.2.4</a>.  IPv4 Support</span>

   An MN in a PMIPv6 domain may use an IPv4 address transparently for
   communication as specified in [<a href="rfc5844.html" title='"IPv4 Support for Proxy Mobile IPv6"'>RFC5844</a>].  For this purpose, an LMA
   can register an IPv4-Proxy-CoA in its Binding Cache, and the MAG can
   provide IPv4 support in its access network.  Correspondingly,
   multicast membership management will be performed by the MN using
   IGMP.  For multicast support on the network side, an IGMP proxy
   function needs to be deployed at MAGs in exactly the same way as for
   IPv6.  [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>] defines IGMP proxy behavior in full agreement with
   IPv6/MLD.  Thus, IPv4 support can be transparently provided following
   the obvious deployment analogy.






<span class="grey">Schmidt, et al.               Experimental                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   For a dual-stack IPv4/IPv6 access network, the MAG proxy instances
   SHOULD choose multicast signaling according to address configurations
   on the link, but they MAY submit IGMP and MLD queries in parallel, if
   needed.  It should further be noted that the infrastructure cannot
   identify two data streams as identical when distributed via an IPv4
   and IPv6 multicast group.  Thus, duplicate data may be forwarded on a
   heterogeneous network layer.

   The following points are worth noting about the scenario in [<a href="rfc5845.html" title='"Generic Routing Encapsulation (GRE) Key Option for Proxy Mobile IPv6"'>RFC5845</a>]
   in which overlapping private address spaces of different operators
   can be hosted in a PMIP domain by using Generic Routing Encapsulation
   (GRE) with key identification.  This scenario implies that unicast
   communication in the MAG-LMA tunnel can be individually identified
   per MN by the GRE keys.  This scenario still does not impose any
   special treatment of multicast communication for the following
   reasons.

   Multicast streams from and to MNs arrive at a MAG on point-to-point
   links (identical to unicast).  Multicast data transmission from the
   MAG to the corresponding LMA is link-local between the routers and
   routing/forwarding remains independent of any individual MN.  So, the
   MAG-proxy and the LMA SHOULD NOT use GRE key identifiers, but plain
   GRE in multicast communication (including MLD queries and reports).
   Multicast traffic is transmitted using router-to-router forwarding
   via the MAG-to-LMA tunnels and according to the MRIB of the MAG or
   the LMA.  It remains independent of MN's unicast addresses, while the
   MAG proxy instance redistributes multicast data down the point-to-
   point links (interfaces) according to its local subscription states,
   independent of IP addresses of the MN.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.5.%20%20Efficiency%20of%20the%20Distribution%20System"></a><a class="selflink" href="#section-3.2.5" name="section-3.2.5">3.2.5</a>.  Efficiency of the Distribution System</span>

   The distribution system of the base solution directly follows PMIPv6
   routing rules and organizes multicast domains with respect to LMAs.
   Thus, no coordination between address spaces or services is required
   between the different instances, provided their associated LMAs
   belong to disjoint multicast domains.  Routing is optimal for
   communication between MNs of the same domain or stationary
   subscribers.

   In the following situations, efficiency-related issues remain.

   Multicast reception at LMA
      In the current deployment scenario, the LMA will receive all
      multicast traffic originating from its associated MNs.  There is
      no mechanism to suppress upstream forwarding in the absence of
      receivers.




<span class="grey">Schmidt, et al.               Experimental                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   MNs on the same MAG using different LMAs
      For a mobile receiver and a source that use different LMAs, the
      traffic has to go up to one LMA, cross over to the other LMA, and
      then be tunneled back to the same MAG, causing redundant flows in
      the access network and at the MAG.

   These remaining deficits in routing efficiency can be resolved by
   adding peering functions to MLD proxies as described in <a href="#section-5">Section 5</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Direct%20Multicast%20Routing"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Direct Multicast Routing</span>

   There are deployment scenarios, where multicast services are
   available throughout the access network independent of the PMIPv6
   routing system [<a href="rfc7028.html" title='"Multicast Mobility Routing Optimizations for Proxy Mobile IPv6"'>RFC7028</a>].  In these cases, the visited networks grant
   a local content distribution service (in contrast to LMA-based home
   subscription) with locally optimized traffic flows.  It is also
   possible to deploy a mixed service model of local and LMA-based
   subscriptions, provided that a unique way of service selection is
   implemented.  For example, access routers (MAGs) could decide on
   service access based on the multicast address G or the source-
   specific multicast (SSM) channel (S,G) under request.  (See
   <a href="#appendix-A">Appendix A</a> for further discussions.)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Overview"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Overview</span>

   Direct multicast access can be supported by

   o  native multicast routing provided by one multicast router that is
      neighboring MLD proxies deployed at MAGs within a flat access
      network, or via tunnel uplinks,

   o  a multicast routing protocol such as PIM-SM [<a href="rfc4601.html" title='"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"'>RFC4601</a>] or BIDIR-PIM
      [<a href="rfc5015.html" title='"Bidirectional Protocol Independent Multicast (BIDIR- PIM)"'>RFC5015</a>] deployed at the MAGs.


















<span class="grey">Schmidt, et al.               Experimental                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


               ***  ***  ***  ***
              *   **   **   **   *
             *                    *
             *      Multicast     *
    +----+   *   Infrastructure   *                               +----+
    |LMA |    *   **   **   **   *                                |LMA |
    +----+     ***  ***  ***  ***                                 +----+
         |          //  \\                                             |
         \\        //    \\       PMIP (unicast)                       |
  PMIP    \\      //      \\      //          \\   **  ***  *** **    //
(unicast)  \\    //        \\    //            \\ *   **   **     ** //
            \\  //          \\  //              \\*    Multicast   *//
            || ||           || ||              * ||     Routing    || *
           +----+          +----+              * +----+         +----+ *
 MLD Proxy |MAG1|          |MAG2|              * |MAG1|         |MAG2| *
           +----+          +----+               *+----+ **   ** +----+*
            |  |             |                    |  |***  ***   ***|
            |  |             |                    |  |              |
           MN1 MN2          MN3                 MN1 MN2            MN3

 (a) Multicast Access at Proxy Uplink      (b) Multicast Routing at MAG

   Figure 3: Reference Networks for (a) Proxy-Assisted Direct Multicast
             Access and (b) Dynamic Multicast Routing at MAGs

   Figure 3 displays the corresponding deployment scenarios that
   separate multicast from PMIPv6 unicast routing.  It is assumed
   throughout these scenarios that all MAGs (MLD proxies) are linked to
   a single multicast routing domain.  Notably, this scenario requires
   coordination of multicast address utilization and service bindings.

   Multicast traffic distribution can be simplified in these scenarios.
   A single proxy instance at MAGs with uplinks into the multicast
   domain will serve as a first-hop multicast gateway and avoid traffic
   duplication or detour routing.  Multicast routing functions at MAGs
   will seamlessly embed access gateways within a multicast cloud.
   However, mobility of the multicast source in this scenario will
   require some multicast routing protocols to rebuild distribution
   trees.  This can cause significant service disruptions or delays (see
   [<a href="rfc5757.html" title='"Multicast Mobility in Mobile IP Version 6 (MIPv6): Problem Statement and Brief Survey"'>RFC5757</a>] for further aspects).  Deployment details are specific to
   the multicast routing protocol in use; this is described below for
   common protocols.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.2.%20%20MLD%20Proxies%20at%20MAGs"></a><a class="selflink" href="#section-4.2" name="section-4.2">4.2</a>.  MLD Proxies at MAGs</span>

   In a PMIPv6 domain, single MLD proxy instances can be deployed at
   each MAG that enable multicast service at the access via an uplink to
   a multicast service infrastructure (see Figure 3(a)).  To avoid



<span class="grey">Schmidt, et al.               Experimental                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   service disruptions on handovers, the uplinks of all proxies SHOULD
   be adjacent to the same next-hop multicast router.  This can either
   be achieved by arranging proxies within a flat access network or by
   using upstream tunnels that terminate at a common multicast router.

   Multicast data submitted by a mobile source will reach the MLD proxy
   at the MAG that subsequently forwards flows to the upstream and to
   all downstream interfaces with appropriate subscriptions.  Traversing
   the upstream will transfer traffic into the multicast infrastructure
   (e.g., to a PIM Designated Router) that will route packets to all
   local MAGs that have joined the group, as well as further upstream
   according to protocol procedures and forwarding states.

   On handover, a mobile source will reattach to a new MAG and can
   continue to send multicast packets as soon as PMIPv6 unicast
   configurations have been completed.  Like at the previous MAG, the
   new MLD proxy will forward data upstream and downstream to
   subscribers.  Listeners local to the previous MAG will continue to
   receive group traffic via the local multicast distribution
   infrastructure following aggregated listener reports of the previous
   proxy.  In general, traffic from the mobile source continues to be
   transmitted via the same next-hop multicast router using the same
   source address and thus remains unchanged when seen from the wider
   multicast infrastructure.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.1.%20%20Considerations%20for%20PIM-SM%20on%20the%20Upstream"></a><a class="selflink" href="#section-4.2.1" name="section-4.2.1">4.2.1</a>.  Considerations for PIM-SM on the Upstream</span>

   A mobile source that transmits data via an MLD proxy will not be
   directly connected to a PIM Designated Router as discussed in
   <a href="#section-3.2.3.1">Section 3.2.3.1</a>.  Countermeasures apply correspondingly.

   A PIM Designated Router that is connected to MLD proxies via
   individual IP tunnel interfaces will experience invalid PIM source
   states on handover.  In some implementations of PIM-SM, this could
   lead to an interim packet loss (see <a href="#section-3.2.3.1">Section 3.2.3.1</a>).  This problem
   can be mitigated by aggregating proxies on a lower layer.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.2.2.%20%20SSM%20Considerations"></a><a class="selflink" href="#section-4.2.2" name="section-4.2.2">4.2.2</a>.  SSM Considerations</span>

   Source-specific subscriptions invalidate with routes, whenever the
   source moves from or to the MAG/proxy of a subscriber.  Multicast
   forwarding states will rebuild with unicast route changes.  However,
   this may lead to noticeable service disruptions for locally
   subscribed nodes.







<span class="grey">Schmidt, et al.               Experimental                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.3.%20%20PIM-SM%20at%20MAGs"></a><a class="selflink" href="#section-4.3" name="section-4.3">4.3</a>.  PIM-SM at MAGs</span>

   The full-featured multicast routing protocol PIM-SM MAY be deployed
   in the access network for providing multicast services in parallel to
   unicast routes (see Figure 3(b)).  Throughout this section, it is
   assumed that the PMIPv6 mobility domain is part of a single PIM-SM
   multicast routing domain with PIM-SM routing functions present at all
   MAGs and all LMAs.  The PIM routing instance at a MAG SHALL then
   serve as the Designated Router (DR) for all directly attached Mobile
   Nodes.  For expediting handover operations, it is advisable to
   position PIM Rendezvous Points (RPs) in the core of the PMIPv6
   network domain.  However, regular IP routing tables need not be
   present in a PMIPv6 deployment, and additional effort is required to
   establish reverse path forwarding rules as required by PIM-SM.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.1.%20%20Routing%20Information%20Base%20for%20PIM-SM"></a><a class="selflink" href="#section-4.3.1" name="section-4.3.1">4.3.1</a>.  Routing Information Base for PIM-SM</span>

   In this scenario, PIM-SM will rely on a Multicast Routing Information
   Base (MRIB) that is generated independently of the policy-based
   routing rules of PMIPv6.  The granularity of mobility-related routing
   locators required in PIM depends on the complexity (specific phase)
   of its deployment.

   For all three phases in the operation of PIM (see [<a href="rfc4601.html" title='"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"'>RFC4601</a>]), the
   following information is needed.

   o  All routes to networks and nodes (including RPs) that are not
      mobile members of the PMIPv6 domain MUST be defined consistently
      among PIM routers and MUST remain unaffected by node mobility.
      The setup of these general routes is expected to follow the
      topology of the operator network and is beyond the scope of this
      document.

   The following route entries are required at a PIM-operating MAG when
   phase two or three of PIM or PIM-SSM is in operation.

   o  Local routes to the Home Network Prefixes (HNPs) of all MNs
      associated with their corresponding point-to-point attachments
      that MUST be included in the local MRIB.

   o  All routes to MNs that are attached to distant MAGs of the PMIPv6
      domain point towards their corresponding LMAs.  These routes MUST
      be made available in the MRIB of all PIM routers (except for the
      local MAG of attachment), but they MAY be eventually expressed by
      an appropriate default entry.






<span class="grey">Schmidt, et al.               Experimental                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.2.%20%20Operations%20of%20PIM%20in%20Phase%20One%20%28RP%20Tree%29"></a><a class="selflink" href="#section-4.3.2" name="section-4.3.2">4.3.2</a>.  Operations of PIM in Phase One (RP Tree)</span>

   A new mobile source S will transmit multicast data of group G towards
   its MAG of attachment.  Acting as a PIM DR, the access gateway will
   unicast-encapsulate the multicast packets and forward the data to the
   Virtual Interface (VI) with encapsulation target RP(G), a process
   known as "PIM source registering".  The RP will decapsulate and
   natively forward the packets down the RP-based distribution tree
   towards (mobile and stationary) subscribers.

   On handover, the point-to-point link connecting the mobile source to
   the old MAG will go down and all (S,*) flows terminate.  In response,
   the previous DR (MAG) deactivates the data encapsulation channels for
   the transient source (i.e., all DownstreamJPState(S,*,VI) are set to
   NoInfo state).  After reattaching and completing unicast handover
   negotiations, the mobile source can continue to transmit multicast
   packets, while being treated as a new source at its new DR (MAG).
   Source register encapsulation will be immediately initiated, and
   (S,G) data continue to flow natively down the (*,G) RP-based tree.

   Source handover management in PIM phase one admits low complexity and
   remains transparent to receivers.  In addition, the source register
   tunnel management of PIM is a fast protocol operation that introduces
   little overhead.  In a PMIPv6 deployment, PIM RPs MAY be configured
   to uninitiated (S,G) shortest path trees for mobile sources, and thus
   remain in phase one of the protocol.  The price to pay for such
   simplified deployment lies in possible routing detours by an overall
   RP-based packet distribution.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.3.%20%20Operations%20of%20PIM%20in%20Phase%20Two%20%28Register-Stop%29"></a><a class="selflink" href="#section-4.3.3" name="section-4.3.3">4.3.3</a>.  Operations of PIM in Phase Two (Register-Stop)</span>

   After receiving source register packets, a PIM RP eventually will
   initiate a source-specific Join for creating a shortest path tree to
   the (mobile) source S and issue a source register stop at the native
   arrival of data from S.  For initiating an (S,G) tree, the RP, as
   well as all intermediate routers, require route entries for the HNP
   of the MN that -- unless the RP coincides with the MAG of S -- point
   towards the corresponding LMA of S.  Consequently, the (S,G) tree
   will proceed from the RP via the (stable) LMA, down the LMA-MAG
   tunnel to the mobile source.  This tree can be of lower routing
   efficiency than the PIM source register tunnel established in phase
   one.

   On handover, the mobile source reattaches to a new MAG (DR), and
   PMIPv6 unicast management will transfer the LMA-MAG tunnel to the new
   point of attachment.  However, in the absence of a corresponding
   multicast forwarding state, the new DR will treat S as a new source
   and initiate a source registering of PIM phase one with the RP.  In



<span class="grey">Schmidt, et al.               Experimental                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   response, the PIM RP will recognize the known source at a new
   (tunnel) interface and will immediately respond with a register stop.
   As the RP had previously joined the shortest path tree towards the
   source via the LMA, it will see an RPF change when data arrives at a
   new interface.  This is implementation dependent and can trigger an
   update of the PIM MRIB as well as a new PIM Join message that will
   install the multicast forwarding state missing at the new MAG.
   Otherwise, the tree is periodically updated by Joins transmitted
   towards the new MAG on a path via the LMA.  In proceeding this way, a
   quick recovery of PIM transition from phase one to two will be
   performed per handover.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.4.%20%20Operations%20of%20PIM%20in%20Phase%20Three%20%28Shortest-Path%20Tree%29"></a><a class="selflink" href="#section-4.3.4" name="section-4.3.4">4.3.4</a>.  Operations of PIM in Phase Three (Shortest-Path Tree)</span>

   In response to an exceeded threshold of packet transmission, DRs of
   receivers eventually will initiate a source-specific Join for
   creating a shortest path tree to the (mobile) source S, thereby
   transitioning PIM into the final shortcut phase three.  For all
   receivers not sharing a MAG with S, this (S,G) tree will range from
   the receiving DR via the (stable) LMA, the LMA-MAG tunnel, and the
   serving MAG to the mobile source.  This tree is of higher routing
   efficiency than that established in the previous phase two, but it
   need not outperform the PIM source register tunnel established in
   phase one.  It provides the advantage of immediate data delivery to
   receivers that share a MAG with S.

   On handover, the mobile source reattaches to a new MAG (DR), and
   PMIPv6 unicast management will transfer the LMA-MAG tunnel to the new
   point of attachment.  However, in the absence of a corresponding
   multicast forwarding state, the new DR will treat S as a new source
   and initiate a source registering of PIM phase one.  A PIM
   implementation compliant with this change can recover phase three
   states in the following way.  First, the RP recovers to phase two as
   described in the previous section and will not forward data arriving
   via the source register tunnel.  Tree maintenance eventually
   triggered by the RPF change (see <a href="#section-4.3.3">Section 4.3.3</a>) will generate proper
   states for a native forwarding from the new MAG via the LMA.
   Thereafter, packets arriving at the LMA without source register
   encapsulation are forwarded natively along the shortest path tree
   towards receivers.

   In consequence, the PIM transitions from phase one to two to three
   will be quickly recovered per handover but still lead to an enhanced
   signaling load and intermediate packet loss.







<span class="grey">Schmidt, et al.               Experimental                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.5.%20%20PIM-SSM%20Considerations"></a><a class="selflink" href="#section-4.3.5" name="section-4.3.5">4.3.5</a>.  PIM-SSM Considerations</span>

   Source-specific Joins of receivers will guide PIM to operate in SSM
   mode and lead to an immediate establishment of source-specific
   shortest path trees.  Such (S,G) trees will equal the distribution
   system of PIM's final phase three (see <a href="#section-4.3.4">Section 4.3.4</a>).  However, on
   handover and in the absence of RP-based data distribution, SSM data
   delivery cannot be resumed via source registering as in PIM phase
   one.  Consequently, data packets transmitted after a handover will be
   discarded at the MAG until regular tree maintenance has reestablished
   the (S,G) forwarding state at the new MAG.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.3.6.%20%20Handover%20Optimizations%20for%20PIM"></a><a class="selflink" href="#section-4.3.6" name="section-4.3.6">4.3.6</a>.  Handover Optimizations for PIM</span>

   Source-specific shortest path trees are constructed in PIM-SM (phase
   two and three) and in PIM-SSM.  These RPF-trees traverse LMA-MAG
   tunnels towards a source.  As PIM remains unaware of source mobility
   management, these trees invalidate under handovers with each tunnel
   re-establishment at a new MAG.  Regular tree maintenance of PIM will
   recover the states, but it remains unsynchronized and too slow to
   seamlessly preserve PIM data distribution services.

   A method to quickly recover PIM (S,G) trees under handover SHOULD
   synchronize multicast state maintenance with unicast handover
   operations and can proceed as follows.  On handover, an LMA reads all
   (S,G) Join states from its corresponding tunnel interface and
   identifies those source addresses S_i that match moving HNPs.  After
   re-establishing the new tunnel, it SHOULD associate the (S_i,*) Join
   states with the new tunnel endpoint and immediately trigger a state
   maintenance (PIM Join) message.  In proceeding this way, the source-
   specific PIM states are transferred to the new tunnel endpoint and
   propagated to the new MAG in synchrony with unicast handover
   procedures.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.4.%20%20BIDIR-PIM"></a><a class="selflink" href="#section-4.4" name="section-4.4">4.4</a>.  BIDIR-PIM</span>

   BIDIR-PIM MAY be deployed in the access network for providing
   multicast services in parallel to unicast routes.  Throughout this
   section, it is assumed that the PMIPv6 mobility domain is part of a
   single BIDIR-PIM multicast routing domain with BIDIR-PIM routing
   functions present at all MAGs and all LMAs.  The PIM routing instance
   at a MAG SHALL then serve as the Designated Forwarder (DF) for all
   directly attached Mobile Nodes.  For expediting handover operations,
   it is advisable to position BIDIR-PIM Rendezvous Point Addresses
   (RPAs) in the core of the PMIPv6 network domain.  As regular IP
   routing tables need not be present in a PMIPv6 deployment, reverse
   path forwarding rules as required by BIDIR-PIM need to be
   established.



<span class="grey">Schmidt, et al.               Experimental                     [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.4.1.%20%20Routing%20Information%20Base%20for%20BIDIR-PIM"></a><a class="selflink" href="#section-4.4.1" name="section-4.4.1">4.4.1</a>.  Routing Information Base for BIDIR-PIM</span>

   In this scenario, BIDIR-PIM will rely on a Multicast Routing
   Information Base (MRIB) that is generated independently of the
   policy-based routing rules of PMIPv6.  The following information is
   needed.

   o  All routes to networks and nodes (including RPAs) that are not
      mobile members of the PMIPv6 domain MUST be defined consistently
      among BIDIR-PIM routers and remain unaffected by node mobility.
      The setup of these general routes is expected to follow the
      topology of the operator network and is beyond the scope of this
      document.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.4.2.%20%20Operations%20of%20BIDIR-PIM"></a><a class="selflink" href="#section-4.4.2" name="section-4.4.2">4.4.2</a>.  Operations of BIDIR-PIM</span>

   BIDIR-PIM will establish spanning trees across its network domain in
   conformance to its pre-configured RPAs and the routing information
   provided.  Multicast data transmitted by a mobile source will
   immediately be forwarded by its DF (MAG) onto the spanning tree for
   the multicast group without further protocol operations.

   On handover, the mobile source reattaches to a new MAG (DF), which
   completes unicast network configurations.  Thereafter, the source can
   immediately proceed with multicast packet transmission onto the pre-
   established distribution tree.  BIDIR-PIM does not require protocol
   signaling or additional reconfiguration delays to adapt to source
   mobility, and it can be considered the protocol of choice for mobile
   multicast operations in the access network.  As multicast streams
   always flow up to the Rendezvous Point Link, some care should be
   taken to configure RPAs compliant with network capacities.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20MLD%20Proxy%20Peering%20Function%20for%20Optimized%20Source%20Mobility%20in%20PMIPv6"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  MLD Proxy Peering Function for Optimized Source Mobility in PMIPv6</span>

   A deployment of MLD proxies (see [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>]) at MAGs has proven a
   useful and appropriate approach to multicast in PMIPv6; see [<a href="rfc6224.html" title='"Base Deployment for Multicast Listener Support in Proxy Mobile IPv6 (PMIPv6) Domains"'>RFC6224</a>]
   and [<a href="rfc7028.html" title='"Multicast Mobility Routing Optimizations for Proxy Mobile IPv6"'>RFC7028</a>].  However, deploying unmodified standard proxies can go
   along with significant performance degradation for mobile senders as
   discussed in this document.  To overcome these deficits, an optimized
   approach to multicast source mobility based on extended peering
   functions among proxies is defined in this section.  Based on such
   direct data exchange between proxy instances at MAGs, triangular
   routing is avoided and multicast streams can be disseminated directly
   within a PMIPv6 access network, and in particular within MAG routing
   machines.  Prior to presenting the solution, we will summarize the
   relevant requirements.





<span class="grey">Schmidt, et al.               Experimental                     [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Requirements"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Requirements</span>

   Solutions that extend MLD proxies by additional uplinking functions
   need to comply to the following requirements.

   Prevention of routing loops
      In the absence of a full-featured routing logic at an MLD proxy,
      simple and locally decidable rules need to prevent source traffic
      from traversing the network in loops that would be potentially
      enabled by multiple uplinks.

   Unique coverage of receivers
      Listener functions at proxies require simple, locally decidable
      rules to initiate a unique delivery of multicast packets to all
      receivers.

   Following local filtering techniques, these requirements are met in
   the following solution.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Overview"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Overview</span>

   A peering interface for MLD proxies allows for a direct data exchange
   of locally attached multicast sources.  Such peering interfaces can
   be configured -- as a direct link or a bidirectional tunnel --
   between any two proxy instances (locally deployed as in [<a href="rfc6224.html" title='"Base Deployment for Multicast Listener Support in Proxy Mobile IPv6 (PMIPv6) Domains"'>RFC6224</a>] or
   remotely deployed).  Peerings remain as silent virtual links in
   regular proxy operations.  Data is exchanged on such links only in
   cases where one peering proxy on its downstream directly connects to
   a source of multicast traffic to which the other peering proxy
   actively subscribes.  In such cases, the proxy connected to the
   source will receive a listener report on its peering interface and
   will forward traffic from its local source accordingly.  It is worth
   noting that multicast traffic distribution on peering links does not
   follow reverse unicast paths to sources.  In the following,
   operations are defined for Any-Source Multicast (ASM) and SSM, but
   they provide superior performance in the presence of source-specific
   signaling (IGMPv3/MLDv2) [<a href="rfc4604.html" title='"Using Internet Group Management Protocol Version 3 (IGMPv3) and Multicast Listener Discovery Protocol Version 2 (MLDv2) for Source- Specific Multicast"'>RFC4604</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Operations%20in%20Support%20of%20Multicast%20Senders"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Operations in Support of Multicast Senders</span>

   An MLD proxy with the perspective of a sender will see peering
   interfaces as restricted downstream interfaces.  It will install and
   maintain source filters at its peering links that will restrict data
   transmission to those packets that originate from a source that is
   locally attached at one of its downstream interfaces.






<span class="grey">Schmidt, et al.               Experimental                     [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   In detail, a proxy will extract from its configuration the network
   prefixes attached to its downstream interfaces and MUST implement a
   source filter base at its peering interfaces that restricts data
   transmission to IP source addresses from its local prefixes.  This
   filter base MUST be updated if and only if the downstream
   configuration changes (e.g., due to mobility).  Multicast packets
   that arrive from the upstream interface of the proxy are thus
   prevented from traversing any peering link, but they are only
   forwarded to regular downstream interfaces with appropriate
   subscription states.  In this way, multihop forwarding on peering
   links is prevented.

   Multicast traffic arriving from a locally attached source will be
   forwarded to the regular upstream interface and all downstream
   interfaces with appropriate subscription states (i.e., regular proxy
   operations).  In addition, multicast packets of local origin are
   transferred to those peering interfaces with appropriate subscription
   states.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Operations%20in%20Support%20of%20Multicast%20Listeners"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Operations in Support of Multicast Listeners</span>

   On the listener side, peering interfaces appear as preferred upstream
   links.  The multicast proxy will attempt to receive multicast
   services on peering links for as many groups (channels) as possible.
   The general upstream interface configured according to [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>] will
   be used only for retrieving those groups (channels) that remain
   unavailable from peerings.  From this extension of [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>], an MLD
   proxy with peering interconnects will exhibit several interfaces for
   pulling remote traffic: the regular upstream and the peerings.
   Traffic available from any of the peering links will be mutually
   disjoint but normally also available from the upstream.  To prevent
   duplicate traffic from arriving at the listener side, the proxy

   o  MAY delay aggregated reports to the upstream, and

   o  MUST apply appropriate filters to exclude duplicate streams.

   In detail, an MLD proxy instance at a MAG first issues listener
   reports (in parallel) to all of its peering links.  These links span
   at most one (virtual) hop.  Whenever certain group traffic (SSM
   channels) does not arrive from the peerings after a waiting time
   (default: 10 ms (node-local) and 25 ms (remote)), additional reports
   (complementary reports, in the case of SSM) are sent to the standard
   upstream interface.

   Whenever traffic from a peering link arrives, an MLD proxy MUST
   install source filters at its upstream interfaces (as described in
   <a href="rfc4605.html">RFC 4605</a>) in the following way.



<span class="grey">Schmidt, et al.               Experimental                     [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   ASM with IGMPv2/MLDv1:  In the presence of ASM using IGMPv2/MLDv1,
      only, the proxy cannot signal source filtering to its upstream.
      Correspondingly, it applies (S,*) ingress filters at its upstream
      interface for all sources S seen in traffic on the peering links.
      It is noteworthy that unwanted traffic is still replicated to the
      proxy via the (wired) provider backbone, but it is not forwarded
      into the wireless access network.

   ASM with IGMPv3/MLDv2:  In the presence of source-specific signaling
      (IGMPv3/MLDv2), the upstream interface is set to (S,*) exclude
      mode for all sources S seen in traffic of the peering links.  The
      corresponding source-specific signaling will prevent forwarding of
      duplicate traffic throughout the access network.

   SSM:  In the presence of Source-Specific Multicast, the proxy will
      subscribe on its uplink interface to those (S,G) channels, only,
      that do not arrive via the peering links.

   MLD proxies will install data-driven timers (source-timeout) for each
   source but common to all peering interfaces to detect interruptions
   of data services from individual sources at proxy peers.  Termination
   of source-specific flows may be application specific, but also may be
   due to a source handover or a transmission failure.  After a
   handover, a mobile source may reattach at another MLD proxy with a
   peering relation to the listener, or at a proxy that does not peer.
   While in the first case, traffic reappears on another peering link;
   in the second case, data can only be retrieved via the regular
   upstream.  To account for the latter, the MLD proxy revokes the
   source-specific filter(s) at its upstream interface, after the
   source-timeout expires (default: 50 ms).  Corresponding traffic will
   then be pulled from the regular upstream interface.  Source-specific
   filters MUST be reinstalled whenever traffic of this source arrives
   at any peering interface.

   There is a noteworthy trade-off between traffic minimization and
   available traffic at the upstream that is locally filtered at the
   proxy.  Implementors can use this relation to optimize for service-
   specific requirements.

   In proceeding this way, multicast group data will arrive from peering
   interfaces first, while only peer-wise unavailable traffic is
   retrieved from the regular upstream interface.









<span class="grey">Schmidt, et al.               Experimental                     [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Security Considerations</span>

   This document defines multicast sender mobility based on PMIPv6 and
   common multicast routing protocols.  Consequently, threats identified
   as security concerns in [<a href="rfc2236.html" title='"Internet Group Management Protocol, Version 2"'>RFC2236</a>], [<a href="rfc2710.html" title='"Multicast Listener Discovery (MLD) for IPv6"'>RFC2710</a>], [<a href="rfc3810.html" title='"Multicast Listener Discovery Version 2 (MLDv2) for IPv6"'>RFC3810</a>], [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>],
   [<a href="rfc5213.html" title='"Proxy Mobile IPv6"'>RFC5213</a>], and [<a href="rfc5844.html" title='"IPv4 Support for Proxy Mobile IPv6"'>RFC5844</a>] are inherited by this document.

   In addition, particular attention should be paid to implications of
   combining multicast and mobility management at network entities.  As
   this specification allows mobile nodes to initiate the creation of
   multicast forwarding states at MAGs and LMAs while changing
   attachments, threats of resource exhaustion at PMIP routers and
   access networks arise from rapid state changes, as well as from high-
   volume data streams routed into access networks of limited
   capacities.  In cases of PIM-SM deployment, handover operations of
   the MNs include re-registering sources at the Rendezvous Points at
   possibly high frequency.  In addition to proper authorization checks
   of MNs, rate controls at routing agents and replicators may be needed
   to protect the agents and the downstream networks.  In particular,
   MLD proxy implementations at MAGs SHOULD automatically erase
   multicast state on the departure of MNs, as mobile multicast
   listeners in the PMIPv6 domain will in general not actively terminate
   group membership prior to departure.

   The deployment of IGMP/MLD proxies for multicast routing requires
   particular care, as routing loops on the upstream are not
   automatically detected.  Peering functions between proxies extend
   this threat in the following way.  Routing loops among peering and
   upstream interfaces are prevented by filters on local sources.  Such
   filtering can fail whenever prefix configurations for downstream
   interfaces at a proxy are incorrect or inconsistent.  Consequently,
   implementations of peering-enabled proxies SHOULD take particular
   care on keeping IP configurations consistent at the downstream in a
   reliable and timely manner.  (See [<a href="rfc6224.html" title='"Base Deployment for Multicast Listener Support in Proxy Mobile IPv6 (PMIPv6) Domains"'>RFC6224</a>] for requirements on
   PMIPv6-compliant implementations of MLD proxies.)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Acknowledgements"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Acknowledgements</span>

   The authors would like to thank (in alphabetical order) David Black,
   Luis M.  Contreras, Spencer Dawkins, Muhamma Omer Farooq, Bohao Feng,
   Sri Gundavelli, Dirk von Hugo, Ning Kong, Jouni Korhonen, He-Wu Li,
   Cong Liu, Radia Perlman, Akbar Rahman, Behcet Sarikaya, Stig Venaas,
   Li-Li Wang, Sebastian Woelke, Qian Wu, and Zhi-Wei Yan for advice,
   help, and reviews of the document.  Funding by the German Federal
   Ministry of Education and Research within the G-LAB Initiative
   (projects HAMcast, Mindstone, and SAFEST) is gratefully acknowledged.





<span class="grey">Schmidt, et al.               Experimental                     [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2710" name="ref-RFC2710">RFC2710</a>]  Deering, S., Fenner, W., and B. Haberman, "Multicast
              Listener Discovery (MLD) for IPv6", <a href="rfc2710.html">RFC 2710</a>, October
              1999.

   [<a id="ref-RFC3376" name="ref-RFC3376">RFC3376</a>]  Cain, B., Deering, S., Kouvelas, I., Fenner, B., and A.
              Thyagarajan, "Internet Group Management Protocol, Version
              3", <a href="rfc3376.html">RFC 3376</a>, October 2002.

   [<a id="ref-RFC3810" name="ref-RFC3810">RFC3810</a>]  Vida, R. and L. Costa, "Multicast Listener Discovery
              Version 2 (MLDv2) for IPv6", <a href="rfc3810.html">RFC 3810</a>, June 2004.

   [<a id="ref-RFC4601" name="ref-RFC4601">RFC4601</a>]  Fenner, B., Handley, M., Holbrook, H., and I. Kouvelas,
              "Protocol Independent Multicast - Sparse Mode (PIM-SM):
              Protocol Specification (Revised)", <a href="rfc4601.html">RFC 4601</a>, August 2006.

   [<a id="ref-RFC4605" name="ref-RFC4605">RFC4605</a>]  Fenner, B., He, H., Haberman, B., and H. Sandick,
              "Internet Group Management Protocol (IGMP) / Multicast
              Listener Discovery (MLD)-Based Multicast Forwarding
              ("IGMP/MLD Proxying")", <a href="rfc4605.html">RFC 4605</a>, August 2006.

   [<a id="ref-RFC5015" name="ref-RFC5015">RFC5015</a>]  Handley, M., Kouvelas, I., Speakman, T., and L. Vicisano,
              "Bidirectional Protocol Independent Multicast (BIDIR-
              PIM)", <a href="rfc5015.html">RFC 5015</a>, October 2007.

   [<a id="ref-RFC5213" name="ref-RFC5213">RFC5213</a>]  Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K.,
              and B. Patil, "Proxy Mobile IPv6", <a href="rfc5213.html">RFC 5213</a>, August 2008.

   [<a id="ref-RFC5844" name="ref-RFC5844">RFC5844</a>]  Wakikawa, R. and S. Gundavelli, "IPv4 Support for Proxy
              Mobile IPv6", <a href="rfc5844.html">RFC 5844</a>, May 2010.

   [<a id="ref-RFC6275" name="ref-RFC6275">RFC6275</a>]  Perkins, C., Johnson, D., and J. Arkko, "Mobility Support
              in IPv6", <a href="rfc6275.html">RFC 6275</a>, July 2011.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-MULTI-EXT" name="ref-MULTI-EXT">MULTI-EXT</a>]
              Schmidt, T., Ed., Waehlisch, M., Koodli, R., Fairhurst,
              G., and D. Liu, "Multicast Listener Extensions for MIPv6
              and PMIPv6 Fast Handovers", Work in Progress, May 2014.





<span class="grey">Schmidt, et al.               Experimental                     [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   [<a id="ref-PEERING-ANALYSIS" name="ref-PEERING-ANALYSIS">PEERING-ANALYSIS</a>]
              Schmidt, TC., Woelke, S., and M. Waehlisch, "Peer my Proxy
              - A Performance Study of Peering Extensions for Multicast
              in Proxy Mobile IP Domains", Proc. of 7th IFIP Wireless
              and Mobile Networking Conference (WMNC 2014), IEEE Press,
              May 2014.

   [<a id="ref-RFC2236" name="ref-RFC2236">RFC2236</a>]  Fenner, W., "Internet Group Management Protocol, Version
              2", <a href="rfc2236.html">RFC 2236</a>, November 1997.

   [<a id="ref-RFC4604" name="ref-RFC4604">RFC4604</a>]  Holbrook, H., Cain, B., and B. Haberman, "Using Internet
              Group Management Protocol Version 3 (IGMPv3) and Multicast
              Listener Discovery Protocol Version 2 (MLDv2) for Source-
              Specific Multicast", <a href="rfc4604.html">RFC 4604</a>, August 2006.

   [<a id="ref-RFC5757" name="ref-RFC5757">RFC5757</a>]  Schmidt, T., Waehlisch, M., and G. Fairhurst, "Multicast
              Mobility in Mobile IP Version 6 (MIPv6): Problem Statement
              and Brief Survey", <a href="rfc5757.html">RFC 5757</a>, February 2010.

   [<a id="ref-RFC5845" name="ref-RFC5845">RFC5845</a>]  Muhanna, A., Khalil, M., Gundavelli, S., and K. Leung,
              "Generic Routing Encapsulation (GRE) Key Option for Proxy
              Mobile IPv6", <a href="rfc5845.html">RFC 5845</a>, June 2010.

   [<a id="ref-RFC6224" name="ref-RFC6224">RFC6224</a>]  Schmidt, T., Waehlisch, M., and S. Krishnan, "Base
              Deployment for Multicast Listener Support in Proxy Mobile
              IPv6 (PMIPv6) Domains", <a href="rfc6224.html">RFC 6224</a>, April 2011.

   [<a id="ref-RFC7028" name="ref-RFC7028">RFC7028</a>]  Zuniga, JC., Contreras, LM., Bernardos, CJ., Jeon, S., and
              Y. Kim, "Multicast Mobility Routing Optimizations for
              Proxy Mobile IPv6", <a href="rfc7028.html">RFC 7028</a>, September 2013.

   [<a id="ref-RFC7161" name="ref-RFC7161">RFC7161</a>]  Contreras, LM., Bernardos, CJ., and I. Soto, "Proxy Mobile
              IPv6 (PMIPv6) Multicast Handover Optimization by the
              Subscription Information Acquisition through the LMA
              (SIAL)", <a href="rfc7161.html">RFC 7161</a>, March 2014.
















<span class="grey">Schmidt, et al.               Experimental                     [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Multiple%20Upstream%20Interface%20Proxy"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Multiple Upstream Interface Proxy</span>

   In this section, we document upstream extensions for an MLD proxy
   that were originally developed during the work on this document.
   Multiple proxy instances deployed at a single MAG (see <a href="#section-3">Section 3</a>) can
   be avoided by adding multiple upstream interfaces to a single MLD
   proxy.  In a typical PMIPv6 deployment, each upstream interface of a
   single proxy instance can interconnect to one of the LMAs.  With such
   ambiguous upstream options, appropriate forwarding rules MUST be
   supplied to

   o  unambiguously guide traffic forwarding from directly attached
      mobile sources, and

   o  lead listener reports to initiating unique traffic subscriptions.

   This can be achieved by a complete set of source- and group-specific
   filter rules (e.g., (S,*), (*,G)) installed at proxy interfaces.
   These filters MAY be derived in part from PMIPv6 routing policies and
   can include a default behavior (e.g., (*,*)).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.1.%20%20Operations%20for%20Local%20Multicast%20Sources"></a><a class="selflink" href="#appendix-A.1" name="appendix-A.1">A.1</a>.  Operations for Local Multicast Sources</span>

   Packets from a locally attached multicast source will be forwarded to
   all downstream interfaces with appropriate subscriptions, as well as
   up the interface with the matching source-specific filter.

   Typically, the upstream interface for a mobile multicast source is
   chosen based on the policy routing (e.g., the MAG-LMA tunnel
   interface for LMA-based routing or the interface towards the
   multicast router for direct routing), but alternate configurations
   MAY be applied.  Packets from a locally attached multicast source
   will be forwarded to the corresponding upstream interface with the
   matching source-specific filter, as well as all the downstream
   interfaces with appropriate subscriptions.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.2.%20%20Operations%20for%20Local%20Multicast%20Subscribers"></a><a class="selflink" href="#appendix-A.2" name="appendix-A.2">A.2</a>.  Operations for Local Multicast Subscribers</span>

   Multicast listener reports are group-wise aggregated by the MLD
   proxy.  The aggregated report is issued to the upstream interface
   with a matching group/channel-specific filter.  The choice of the
   corresponding upstream interface for aggregated group membership
   reports MAY be additionally based on some administrative scoping
   rules for scoped multicast group addresses.

   In detail, a Multiple Upstream Interface proxy will provide and
   maintain a Multicast Subscription Filter Table that maps source- and
   group-specific filters to upstream interfaces.  The forwarding



<span class="grey">Schmidt, et al.               Experimental                     [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


   decision for an aggregated MLD listener report is based on the first
   matching entry from this table, with the understanding that for
   IGMPv3/MLDv2 the MLD proxy performs a state decomposition, if needed
   (i.e., a (*,G) subscription is split into (S,G) and (* \ S,G) in the
   presence of (*,G) after (S,G) interface entries), and that
   (S,*)-filters are always false in the absence of source-specific
   signaling, i.e., in IGMPv2/MLDv1 only domains.

   In typical deployment scenarios, specific group services (channels)
   are either

   o  associated with selected uplinks to remote LMAs, while a (*,*)
      default subscription entry (in the last table line) is bound to a
      local routing interface, or

   o  configured as local services first, while a (*,*) default entry
      (in the last table line) points to a remote uplink that provides
      the general multicast support.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20B.%20%20Implementation"></a><a class="selflink" href="#appendix-B" name="appendix-B">Appendix B</a>.  Implementation</span>

   An implementation of the extended IGMP/MLD proxy has been provided
   within the MCPROXY project (<a href="http://mcproxy.realmv6.org/">http://mcproxy.realmv6.org/</a>).  This open-
   source software is written in C++ and uses forwarding capabilities of
   the Linux kernel.  It supports all regular operations according to
   [<a href="rfc4605.html" title='"Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("'>RFC4605</a>] and allows for multiple proxy instances on one node,
   dynamically changing downstream links, proxy-to-proxy peerings, and
   multiple upstream links with individual configurations.  The software
   can be downloaded from GitHub at
   &lt;<a href="https://github.com/mcproxy/mcproxy">https://github.com/mcproxy/mcproxy</a>&gt;.  Based on this software, an
   experimental performance evaluation of the proxy peering function has
   been reported in [<a href="#ref-PEERING-ANALYSIS">PEERING-ANALYSIS</a>].



















<span class="grey">Schmidt, et al.               Experimental                     [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc7287.html">RFC 7287</a>               Multicast Senders in PMIPv6             June 2014</span>


Authors' Addresses

   Thomas C. Schmidt (editor)
   HAW Hamburg
   Berliner Tor 7
   Hamburg  20099
   Germany

   EMail: schmidt@informatik.haw-hamburg.de
   URI:   <a href="http://inet.cpt.haw-hamburg.de/members/schmidt">http://inet.cpt.haw-hamburg.de/members/schmidt</a>


   Shuai Gao
   Beijing Jiaotong University
   Beijing
   China

   EMail: shgao@bjtu.edu.cn


   Hong-Ke Zhang
   Beijing Jiaotong University
   Beijing
   China

   EMail: hkzhang@bjtu.edu.cn


   Matthias Waehlisch
   link-lab &amp; FU Berlin
   Hoenower Str. 35
   Berlin  10318
   Germany

   EMail: mw@link-lab.net
















Schmidt, et al.               Experimental                     [Page 28]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc7287 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:23 GMT --></html>