<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc8331 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:15 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-edwards-payload-rtp-ancillary" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:8331" name="DC.Identifier"/>
<meta content="February, 2018" name="DC.Date.Issued"/>
<meta content="Thomas Edwards &lt;thomas.edwards@fox.com&gt;" name="DC.Creator"/>
<meta content="This memo describes a Real-time Transport Protocol (RTP) payload
format for the Society of Motion Picture and Television Engineers
(SMPTE) ancillary space (ANC) data, as defined by SMPTE ST 291-1.
SMPTE ANC data is generally used along with professional video formats
to carry a range of ancillary data types, including time code, Closed
Captioning, and the Active Format Description (AFD)." name="DC.Description.Abstract"/>
<meta content="RTP Payload for Society of Motion Picture and Television Engineers (SMPTE) ST 291-1 Ancillary Data" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 8331 - RTP Payload for Society of Motion Picture and Television Engineers (SMPTE) ST 291-1 Ancillary Data</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc8331.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc8331" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-payload-rtp-ancillary" title="draft-ietf-payload-rtp-ancillary">draft-ietf-payl...</a>] [<a href="https://datatracker.ietf.org/doc/rfc8331" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc8331" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc8331" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                        T. Edwards
Request for Comments: 8331                                           FOX
Category: Standards Track                                  February 2018
ISSN: 2070-1721


                            <span class="h1">RTP Payload for</span>
       <span class="h1">Society of Motion Picture and Television Engineers (SMPTE)</span>
                        <span class="h1">ST 291-1 Ancillary Data</span>

Abstract

   This memo describes a Real-time Transport Protocol (RTP) payload
   format for the Society of Motion Picture and Television Engineers
   (SMPTE) ancillary space (ANC) data, as defined by SMPTE ST 291-1.
   SMPTE ANC data is generally used along with professional video
   formats to carry a range of ancillary data types, including time
   code, Closed Captioning, and the Active Format Description (AFD).

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc7841.html#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8331">https://www.rfc-editor.org/info/rfc8331</a>.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




<span class="grey">Edwards                      Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
     <a href="#section-1.1">1.1</a>.  Requirements Language . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  RTP Payload Format for SMPTE ST 291 Ancillary Data  . . . . .   <a href="#page-4">4</a>
     <a href="#section-2.1">2.1</a>.  Payload Header Definitions  . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-3">3</a>.  Payload Format Parameters . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-3.1">3.1</a>.  Media Type Definition . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
   <a href="#section-4">4</a>.  SDP Considerations  . . . . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
     <a href="#section-4.1">4.1</a>.  Grouping ANC Data Streams with Other Media Streams  . . .  <a href="#page-15">15</a>
   <a href="#section-5">5</a>.  Offer/Answer Model and Declarative Considerations . . . . . .  <a href="#page-15">15</a>
     <a href="#section-5.1">5.1</a>.  Offer/Answer Model  . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-5.2">5.2</a>.  Declarative SDP Considerations  . . . . . . . . . . . . .  <a href="#page-16">16</a>
   <a href="#section-6">6</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   <a href="#section-7">7</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   <a href="#section-8">8</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
     <a href="#section-8.1">8.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
     <a href="#section-8.2">8.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-18">18</a>
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-20">20</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This memo describes a Real-time Transport Protocol (RTP) payload
   format for the Society of Motion Picture and Television Engineers
   (SMPTE) ancillary space (ANC) data, as defined by SMPTE ST 291-1
   [<a href="#ref-ST291" title='"SMPTE Standard - Ancillary Data Packet and Space Formatting"'>ST291</a>].  ANC data is transmitted in the ancillary space of serial
   digital video interfaces, the space outside of the active video
   region of images intended for users to view.  Ancillary space roughly
   corresponds to vertical and horizontal blanking periods of cathode
   ray tube type displays.  ANC data can carry a range of data types,
   including time code, Closed Captioning, and the Active Format
   Description (AFD).

   ANC data is generally associated with the carriage of metadata within
   the bit stream of a Serial Digital Interface (SDI), such as the
   standard definition (SD) Serial Digital Interface, the 1.5 Gb/s
   Serial Digital Interface for high definition (HD) television
   applications, or the 3 Gb/s Signal/Data Serial Interface (SMPTE ST
   259 [<a href="#ref-ST259" title='"SMPTE Standard - For Television - SDTV Digital Signal/Data - Serial Digital Interface"'>ST259</a>], SMPTE ST 292-1 [<a href="#ref-ST292" title='"SMPTE Standard - 1.5 Gb/s Signal/Data Serial Interface"'>ST292</a>], and SMPTE ST 424 [<a href="#ref-ST424" title='"SMPTE Standard - 3 Gb/s Signal/Data Serial Interface"'>ST424</a>]).

   ANC data packet payload definitions for a specific application are
   specified by a SMPTE Standard, Recommended Practice, Registered
   Disclosure Document, or by a document generated by another
   organization, a company, or an individual (an entity).  When a
   payload format is registered with SMPTE, it is identified by a
   registered data identification word.





<span class="grey">Edwards                      Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   This memo describes an RTP payload that supports carriage of ANC data
   packets that originate from any location within any SMPTE-defined SDI
   signal.  This payload also supports the carriage of ANC data packets
   that did not originate from an SDI signal.  Sufficient information is
   provided to enable the ANC data packets at the output of the decoder
   to be restored to their original locations in the serial digital
   video signal raster (if that is desired).  An optional media type
   parameter allows for the signaling of carriage of one or more types
   of ANC data as specified by data identification (DID) and secondary
   data identification (SDID) words.  Another optional media type
   parameter allows for the identification of the Video Payload ID
   (VPID) code of the source interface of ANC data packets.

   Note that the Ancillary Data Flag (ADF) word is not specifically
   carried in this RTP payload.  The ADF might be specified in a
   document defining an interconnecting digital video interface;
   otherwise, a default ADF is specified by SMPTE ST 291-1 [<a href="#ref-ST291" title='"SMPTE Standard - Ancillary Data Packet and Space Formatting"'>ST291</a>].

   This ANC data payload can be used by itself or used along with a
   range of RTP video formats.  In particular, it has been designed so
   that it could be used along with "RTP Payload Format for Uncompressed
   Video" [<a href="rfc4175.html" title='"RTP Payload Format for Uncompressed Video"'>RFC4175</a>] or "RTP Payload Format for JPEG 2000 Video Streams"
   [<a href="rfc5371.html" title='"RTP Payload Format for JPEG 2000 Video Streams"'>RFC5371</a>].

   The data model in this document for the ANC data RTP payload is based
   on the data model of SMPTE ST 2038 [<a href="#ref-ST2038" title='"SMPTE Standard - Carriage of Ancillary Data Packets in an MPEG-2 Transport Stream"'>ST2038</a>], which standardizes the
   carriage of ANC data packets in an MPEG-2 Transport Stream.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Requirements%20Language"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="rfc8174.html" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.
















<span class="grey">Edwards                      Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20RTP%20Payload%20Format%20for%20SMPTE%20ST%20291%20Ancillary%20Data"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  RTP Payload Format for SMPTE ST 291 Ancillary Data</span>

   An example of the format of an RTP packet containing SMPTE ST 291 ANC
   data is shown below:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |V=2|P|X| CC    |M|    PT       |        sequence number        |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                           timestamp                           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           synchronization source (SSRC) identifier            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   Extended Sequence Number    |           Length=32           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | ANC_Count=2   | F |                reserved                   |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |C|   Line_Number=9     |   Horizontal_Offset   |S| StreamNum=0 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         DID       |        SDID       |  Data_Count=0x84  |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                User_Data_Words...
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                   |   Checksum_Word   |         word_align            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |C|   Line_Number=10    |   Horizontal_Offset   |S| StreamNum=0 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         DID       |        SDID       |  Data_Count=0x105 |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                User_Data_Words...
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                       |   Checksum_Word   |word_align |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

             Figure 1: SMPTE Ancillary Data RTP Packet Format

   In this example, two ANC data packets are present.  The first has
   four 10-bit User_Data_Words, and the second has five 10-bit
   User_Data_Words (note that few ANC data packets are this small; thus,
   this example does not reflect actual defined ANC data packets and
   does not specifically call out the DIDs and SDIDs).  The ANC data
   packets are located on lines 9 and 10 of the SDI raster.

   The term "network byte order" in the payload format SHALL refer to
   the Data Transmission Order as defined in <a href="rfc791.html#appendix-B">Appendix B of RFC 791</a>
   [<a href="https://tools.ietf.org/html/rfc0791" title='"Internet Protocol"'>RFC0791</a>].




<span class="grey">Edwards                      Standards Track                    [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   RTP packet header fields SHALL be interpreted as per <a href="rfc3550.html">RFC 3550</a>
   [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>], with the following specifics:

   Timestamp: 32 bits
      The timestamp field is interpreted in a similar fashion to
      <a href="rfc4175.html">RFC 4175</a> [<a href="rfc4175.html" title='"RTP Payload Format for Uncompressed Video"'>RFC4175</a>]:

      For progressive scan video, the timestamp denotes the sampling
      instant of the frame to which the ANC data in the RTP packet
      belongs.  RTP packets MUST NOT include ANC data from multiple
      frames, and all RTP packets with ANC data belonging to the same
      frame MUST have the same timestamp.

      For interlaced video, the timestamp denotes the sampling instant
      of the field to which the ANC data in the RTP packet belongs.  RTP
      packets MUST NOT include ANC data packets from multiple fields,
      and all RTP packets belonging to the same field MUST have the same
      timestamp.

      If the sampling instant does not correspond to an integer value of
      the clock, the value SHALL be truncated to the next lowest integer
      with no ambiguity.  <a href="#section-3.1">Section 3.1</a> describes timestamp clock rates.

   Marker bit (M): 1 bit
      The marker bit set to "1" indicates the last ANC data RTP packet
      for a frame (for progressive scan video) or the last ANC data RTP
      packet for a field (for interlaced video).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Payload%20Header%20Definitions"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Payload Header Definitions</span>

   The ANC data RTP payload header fields are defined as:

   Extended Sequence Number: 16 bits
           The high-order bits of the extended 32-bit sequence number,
           in network byte order.  This is the same as the Extended
           Sequence Number field in <a href="rfc4175.html">RFC 4175</a> [<a href="rfc4175.html" title='"RTP Payload Format for Uncompressed Video"'>RFC4175</a>].

   Length: 16 bits
           Number of octets of the ANC data RTP payload, beginning with
           the "C" bit of the first ANC packet data header, as an
           unsigned integer in network byte order.  Note that all
           word_align fields contribute to the calculation of the Length
           field.








<span class="grey">Edwards                      Standards Track                    [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   ANC_Count: 8 bits
           This field is the count of the total number of ANC data
           packets carried in the RTP payload, as an unsigned integer.
           A single ANC data RTP packet payload cannot carry more than
           255 ANC data packets.

           If more than 255 ANC data packets need to be carried in a
           field or frame, additional RTP packets carrying ANC data MAY
           be sent with the same RTP timestamp but with different
           sequence numbers.  ANC_Count of 0 indicates that there are no
           ANC data packets in the payload (for example, an RTP packet
           that carries no actual ANC data packets even though its
           marker bit indicates the last ANC data RTP packet in a field/
           frame).  If the ANC_Count is 0, the Length will also be 0.

   F: 2 bits
           These two bits relate to signaling the field specified by the
           RTP timestamp in an interlaced SDI raster.  A value of 0b00
           indicates that either the video format is progressive or that
           no field is specified.  A value of 0b10 indicates that the
           timestamp refers to the first field of an interlaced video
           signal.  A value of 0b11 indicates that the timestamp refers
           to the second field of an interlaced video signal.  The value
           0b01 is not valid.  Receivers SHOULD ignore an ANC data
           packet with an F field value of 0b01 and SHOULD process any
           other ANC data packets with valid F field values that are
           present in the RTP payload.

           Note that some multi-stream SDI interfaces might use multiple
           interlaced signal streams to transmit progressive images, in
           which case the "F" bits would refer to the field of the
           interlaced stream used for transport of the ANC data packet.

   reserved: 22 bits
           The 22 reserved bits of value "0" follow the F field to
           ensure that the first ANC data packet header field in the
           payload begins 32-bit word-aligned with the start of the RTP
           header to ease implementation.

   For each ANC data packet in the payload, the following ANC data
   packet header fields MUST be present:

   C: 1 bit
           This flag, when set to "1", indicates that the ANC data
           corresponds to the color-difference data channel (C).  When
           set to "0", this flag indicates either that the ANC data
           corresponds to the luma (Y) data channel, that the ANC data
           source is from an SD signal, or that the ANC data source has



<span class="grey">Edwards                      Standards Track                    [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


           no specific luma or color-difference data channels.  For ANC
           data from a multi-stream interface source, the C flag SHALL
           refer to the channel of the stream used to transport the ANC
           data packet.  For situations where there is no SDI source, if
           the ANC data type definition specifically requires the use of
           the C or Y data channel, the C flag SHALL reflect that
           requirement.

   Line_Number: 11 bits
           This field contains the digital interface line number that
           corresponds to the location of the ANC data packet as an
           unsigned integer in network byte order.

           The following special Line_Number values indicate that the
           location of the ANC data packet is in certain generic
           vertical regions of the SDI raster:

+-------------+--------------------------------------------------------+
| Line_Number | ANC data packet generic vertical location              |
+-------------+--------------------------------------------------------+
|   0x7FF     | Without specific line location within the field or     |
|             | frame                                                  |
|             |                                                        |
|   0x7FE     | On any line in the range from the second line after    |
|             | the line specified for switching, as defined in SMPTE  |
|             | RP 168 [<a href="#ref-RP168" title='"RP 168:2009, Definition of Vertical Interval Switching Point for Synchronous Video Switching"'>RP168</a>], to the last line before active video,  |
|             | inclusive                                              |
|             |                                                        |
|   0x7FD     | On a line number larger than can be represented in 11  |
|             | bits of this field (if needed for future formats)      |
+-------------+--------------------------------------------------------+

           Note that the lines that are available to convey ANC data are
           as defined in the applicable sample structure specification
           (e.g., SMPTE ST 274 [<a href="#ref-ST274" title='"SMPTE Standard - For Television - 1920 x 1080 Image Sample Structure, Digital Representation and Digital Timing Reference Sequences for Multiple Picture Rates"'>ST274</a>], SMPTE ST 296 [<a href="#ref-ST296" title='"SMPTE Standard - 1280 x 720 Progressive Image 4:2:2 and 4:4:4 Sample Structure - Analog and Digital Representation and Analog Interface"'>ST296</a>], ITU-R
           BT.656 [<a href="#ref-BT656" title='"Interfaces for Digital Component Video Signals in 525-Line and 625-Line Television Systems Operating at the 4:2:2 Level of Recommendation ITU-R BT.601"'>BT656</a>]) and are possibly further restricted per SMPTE
           RP 168 [<a href="#ref-RP168" title='"RP 168:2009, Definition of Vertical Interval Switching Point for Synchronous Video Switching"'>RP168</a>].

           In multi-stream interfaces, this field refers to the line
           number that an ANC data packet is carried on within a
           particular data stream in the interface.

   Horizontal_Offset: 12 bits
           This field defines the location of the ANC data packet in an
           SDI raster relative to the start of active video (SAV; a
           digital synchronizing signal present in SDI interfaces) as an
           unsigned integer in network byte order.  A value of 0 means
           that the ADF of the ANC data packet begins immediately



<span class="grey">Edwards                      Standards Track                    [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


           following SAV.  The horizontal offset from SAV is measured in
           terms of 10-bit words of the indicated data stream and data
           channel.

           The following special Horizontal_Offset values indicate that
           the location of the ANC data packet is in certain generic
           horizontal regions of the SDI raster:

+-------------+--------------------------------------------------------+
| Horizontal_ | ANC data packet generic horizontal location            |
| Offset      |                                                        |
+-------------+--------------------------------------------------------+
|   0xFFF     | Without specific horizontal location                   |
|             |                                                        |
|   0xFFE     | Within horizontal ancillary data space (HANC) as       |
|             | defined in SMPTE ST 291-1 [<a href="#ref-ST291" title='"SMPTE Standard - Ancillary Data Packet and Space Formatting"'>ST291</a>]                      |
|             |                                                        |
|   0xFFD     | Within the ancillary data space located between SAV    |
|             | (Start of Active Video) and EAV (End of Active Video)  |
|             | markers of the serial digital interface                |
|             |                                                        |
|   0xFFC     | Horizontal offset is larger than can be represented in |
|             | the 12 bits of this field (if needed for future        |
|             | formats or for certain low frame rate 720p formats)    |
+-------------+--------------------------------------------------------+

           In multi-stream interfaces, this field refers to the
           horizontal location where an ANC data packet is placed on a
           line carried within a particular data stream in the
           interface.

           Note that HANC data space will generally have higher luma
           sample numbers than any samples in the active digital line.
           Also note that SMPTE ST 296 [<a href="#ref-ST296" title='"SMPTE Standard - 1280 x 720 Progressive Image 4:2:2 and 4:4:4 Sample Structure - Analog and Digital Representation and Analog Interface"'>ST296</a>] (1280 x 720 progressive
           active images) image sampling systems 7 and 8 (1280 x 720
           progressive @ 24 fps and 1280 x 720 progressive @ 23.98 fps
           respectively) have a luma sample number maximum of 4124.  It
           is unlikely that an actual implementation would have an ANC
           data packet begin at a Horizontal_Offset beyond 4091 (0xFFB)
           in these formats; should that occur, the Horizontal_Offset
           value 0xFFC can be used to signal a horizontal offset larger
           than can be represented in the field.  Further note that the
           12-bit field of Horizontal_Offset is kept that size in this
           memo to maintain easy conversion to/from SMPTE ST 2038
           [<a href="#ref-ST2038" title='"SMPTE Standard - Carriage of Ancillary Data Packets in an MPEG-2 Transport Stream"'>ST2038</a>], which also has a 12-bit Horizontal_Offset field.






<span class="grey">Edwards                      Standards Track                    [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   S (Data Stream Flag): 1 bit
           This field indicates whether the data stream number of a
           multi-stream data mapping used to transport the ANC data
           packet is specified.  If the S bit is '0', then the StreamNum
           field provides no guidance regarding the source data stream
           number of the ANC data packet.  If the S bit is '1', then the
           StreamNum field carries information regarding the source data
           stream number of the ANC data packet.

   StreamNum: 7 bits
           If the S bit (Data Stream Flag) is '1', then the StreamNum
           field MUST carry identification of the source data stream
           number of the ANC data packet.  If the data stream is
           numbered, then the StreamNum field SHALL carry the number of
           the source data stream minus one.  If the source multi-stream
           interface does not have numbered data streams, the following
           numbers SHALL be used in this field: '0' for link A data
           stream and '1' for link B data stream.  For stereoscopic
           multi-stream interface formats that do not have numbered
           streams, the following numbers SHALL be used in this field:
           '0' for left eye stream and '1' for right eye stream.

           Note that in multi-link SDI connections, the physical link
           that a particular stream utilizes is typically specified by
           the interface standard.  Also note that numbering of data
           streams is across the interface as a whole.  For example, in
           the SMPTE ST 425-3 dual-link 3 Gb/s interface, the data
           streams are numbered 1-4 with data streams 1 and 2 on link 1
           and data streams 3 and 4 on link 2.

   An ANC data packet with the header fields Line_Number of 0x7FF and
   Horizontal_Offset of 0xFFF SHALL be considered to be carried without
   any specific location within the field or frame.

   For each ANC data packet in the payload, immediately after the ANC
   data packet header fields, the following data fields MUST be present
   with the fields DID, SDID, Data_Count, User_Data_Words, and
   Checksum_Word representing the 10-bit words carried in the ANC data
   packet, as per SMPTE ST 291-1 [<a href="#ref-ST291" title='"SMPTE Standard - Ancillary Data Packet and Space Formatting"'>ST291</a>]:

   DID: 10 bits
           Data identification word

   SDID: 10 bits
           Secondary data identification word.  Used only for a "Type 2"
           ANC data packet.  Note that in a "Type 1" ANC data packet,
           this word will actually carry the data block number (DBN).




<span class="grey">Edwards                      Standards Track                    [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   Data_Count: 10 bits
           The lower 8 bits of Data_Count, corresponding to bits b7
           (MSB; most significant bit) through b0 (LSB; least
           significant bit) of the 10-bit Data_Count word, contain the
           actual count of 10-bit words in User_Data_Words.  Bit b8 is
           the even parity for bits b7 through b0, and bit b9 is the
           inverse (logical NOT) of bit b8.

   User_Data_Words: integer number of 10-bit words
           User_Data_Words (UDW) are used to convey information of a
           type as identified by the DID word or the DID and SDID words.
           The number of 10-bit words in the UDW is defined by the
           Data_Count field.  The 10-bit words are carried in order
           starting with the most significant bit and ending with the
           least significant bit.

   Checksum_Word: 10 bits
           The Checksum_Word can be used to determine the validity of
           the ANC data packet from the DID word through the UDW.  It
           consists of 10 bits, where bits b8 (MSB) through b0 (LSB)
           define the checksum value and bit b9 is the inverse (logical
           NOT) of bit b8.  The checksum value is equal to the nine
           least significant bits of the sum of the nine least
           significant bits of the DID word, the SDID word, the
           Data_Count word, and all User_Data_Words in the ANC data
           packet.  The checksum is initialized to zero before
           calculation, and any "end carry" resulting from the checksum
           calculation is ignored.

   At the end of each ANC data packet in the payload:

   word_align: bits as needed to complete 32-bit word
           Word_align contains enough "0" bits as needed to complete the
           last 32-bit word of an ANC data packet in the RTP payload.
           If an ANC data packet in the RTP payload ends and is aligned
           with a word boundary, there is no need to add any word
           alignment bits.  Word align SHALL be used even for the last
           ANC data packet in an RTP packet.  Word align SHALL NOT be
           used if there are zero ANC data packets being carried in the
           RTP packet.

   When reconstructing an SDI signal based on this payload, it is
   important to place ANC data packets into the locations indicated by
   the ANC data packet header fields C, Line_Number and
   Horizontal_Offset, and also to follow the requirements of <a href="#section-7">Section 7</a>
   of SMPTE ST 291-1 [<a href="#ref-ST291" title='"SMPTE Standard - Ancillary Data Packet and Space Formatting"'>ST291</a>], "Ancillary Data Space Formatting
   (Component or Composite Interface)", which includes rules on the
   placement of initial ANC data into allowed spaces as well as the



<span class="grey">Edwards                      Standards Track                   [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   contiguity of ANC data packet sequences within those spaces in order
   to assure that the resulting ANC data packets in the SDI signal are
   valid.  The optional media type parameter VPID_Code can inform
   receivers of the type of originating SDI interface.  For multi-stream
   originating interfaces, the StreamNum field can provide information
   regarding which stream an ANC data packet can be placed in to match
   the ANC data location in the originating SDI interface.

   Senders of this payload SHOULD transmit available ANC data packets as
   soon as practical to reduce end-to-end latency, especially if the
   receivers will be embedding the received ANC data packet into an SDI
   signal emission.  One millisecond is a reasonable upper bound for the
   amount of time between when an ANC data packet becomes available to a
   sender and the emission of an RTP payload containing that ANC data
   packet.

   ANC data packets with headers that indicate specific location within
   a field or frame SHOULD be sent in raster scan order, both in terms
   of packing position within an RTP packet and in terms of transmission
   time of RTP packets.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Payload%20Format%20Parameters"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Payload Format Parameters</span>

   This RTP payload format is identified using the "video/smpte291"
   media type, which is registered in accordance with <a href="rfc4855.html">RFC 4855</a>
   [<a href="rfc4855.html" title='"Media Type Registration of RTP Payload Formats"'>RFC4855</a>]; the template defined in <a href="rfc6838.html">RFC 6838</a> [<a href="rfc6838.html" title='"Media Type Specifications and Registration Procedures"'>RFC6838</a>] is used.

   Note that the media type definition is in the "video" tree due to the
   expected use of SMPTE ST 291 Ancillary Data along with video formats.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Media%20Type%20Definition"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Media Type Definition</span>

   Type name: video

   Subtype name: smpte291

   Required parameters:

      Rate:
         RTP timestamp clock rate.

         When an ANC data RTP stream is to be associated with an RTP
         video stream, the RTP timestamp rates SHOULD be the same to
         ensure that ANC data packets can be associated with the
         appropriate frame or field.  Otherwise, a 90 kHz rate SHOULD be
         used.





<span class="grey">Edwards                      Standards Track                   [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


         Note that techniques described in <a href="rfc7273.html">RFC 7273</a> [<a href="rfc7273.html" title='"RTP Clock Source Signalling"'>RFC7273</a>] can
         provide a common reference clock for multiple RTP streams
         intended for synchronized presentation.

   Optional parameters:

      DID_SDID:
         Data identification and secondary data identification words.

         The presence of the DID_SDID parameters signals that all ANC
         data packets of this stream are of a particular type or types,
         i.e., labeled with particular DIDs and SDIDs.  DID and SDID
         values of SMPTE-registered ANC data packet types can be found
         in the SMPTE Registry for Data Identification Word Assignments
         [<a href="#ref-SMPTE-RA">SMPTE-RA</a>].

         "Type 1" ANC data packets (which do not have SDIDs defined)
         SHALL be labeled with SDID=0x00.

         DID and SDID values can be registered with SMPTE as per SMPTE
         ST 291-1 [<a href="#ref-ST291" title='"SMPTE Standard - Ancillary Data Packet and Space Formatting"'>ST291</a>].

         The absence of the DID_SDID parameter signals that
         determination of the DID and SDID of ANC data packets in the
         payload can only be achieved through direct inspection of the
         ANC data packet fields.

         The ABNF description of the DID_SDID parameter is described in
         <a href="#section-4">Section 4</a>.

      VPID_Code:
         This integer parameter specifies the Video Payload ID (VPID)
         code of the source interface of ANC data packets using the
         value from byte 1 of the VPID as defined in SMPTE ST 352
         [<a href="#ref-ST352" title='"SMPTE Standard - Payload Identification Codes for Serial Digital Interfaces"'>ST352</a>].  The integer SHALL be made with bit 7 of VPID byte 1
         being the most significant bit and bit 0 of VPID byte 1 being
         the least significant bit.  For example, 132 refers to SMPTE ST
         292-1, 720-line video payloads on a 1.5 Gb/s (nominal) serial
         digital interface.

   Encoding considerations: This media type is framed and binary; see
      <a href="rfc6838.html#section-4.8">Section 4.8 of RFC 6838</a> [<a href="rfc6838.html" title='"Media Type Specifications and Registration Procedures"'>RFC6838</a>].

   Security considerations: See <a href="#section-7">Section 7</a>.







<span class="grey">Edwards                      Standards Track                   [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   Interoperability considerations: Data items in smpte291 can be very
      diverse.  Receivers might only be capable of interpreting a subset
      of the possible data items.  Some implementations might care about
      the location of the ANC data packets in the SDI raster, but other
      implementations might not care.

   Published specification: <a href="rfc8331.html">RFC 8331</a>

   Applications that use this media type: Devices that stream real-time
      professional video, especially those that interoperate with legacy
      serial digital interfaces (SDI).

   Additional Information:

      Deprecated alias names for this type: N/A

      Magic number(s): N/A

      File extension(s): N/A

      Macintosh file type code(s): N/A

   Person &amp; email address to contact for further information:

      T. Edwards &lt;thomas.edwards@fox.com&gt;
      IETF Payload Working Group &lt;payload@ietf.org&gt;

   Intended usage: COMMON

   Restrictions on usage: This media type depends on RTP framing and
      hence is only defined for transfer via RTP <a href="rfc3550.html">RFC 3550</a> [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].
      Transport within other framing protocols is not defined at this
      time.

   Author: T. Edwards &lt;thomas.edwards@fox.com&gt;

   Change controller: The IETF PAYLOAD Working Group, or other party as
      designated by the IESG.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20SDP%20Considerations"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  SDP Considerations</span>

   The mapping of the above-defined payload format media type and its
   parameters SHALL be done according to <a href="rfc4855.html#section-3">Section 3 of RFC 4855</a>
   [<a href="rfc4855.html" title='"Media Type Registration of RTP Payload Formats"'>RFC4855</a>].

   o  The type name ("video") goes in SDP "m=" as the media name.





<span class="grey">Edwards                      Standards Track                   [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   o  The subtype name ("smpte291") goes in SDP "a=rtpmap" as the
      encoding name, followed by a slash ("/") and the rate parameter.

   o  The optional parameters VPID_Code and DID_SDID, when present, are
      included in the "a=fmtp" attribute line of SDP as a semicolon-
      separated list of parameter=value pairs.

   DID and SDID values SHALL be specified in hexadecimal with a "0x"
   prefix (such as "0x61").  The ABNF as per <a href="rfc5234.html">RFC 5234</a> [<a href="rfc5234.html" title='"Augmented BNF for Syntax Specifications: ABNF"'>RFC5234</a>] of the
   DID_SDID optional parameter SHALL be:

           TwoHex = "0x" 1*2(HEXDIG)
           DidSdid = "DID_SDID={" TwoHex "," TwoHex "}"

   For example, EIA 608 Closed Caption data would be signaled with the
   parameter DID_SDID={0x61,0x02}.  If a DID_SDID parameter is not
   specified, then the ANC data stream might potentially contain ANC
   data packets of any type.

   Multiple DID_SDID parameters can be specified (separated by
   semicolons) to signal the presence of multiple types of ANC data in
   the stream.  DID_SDID={0x61,0x02};DID_SDID={0x41,0x05}, for example,
   signals the presence of EIA 608 Closed Captions as well as AFD/Bar
   Data.  Multiple DID_SDID parameters do not imply any particular
   ordering of the different types of ANC data packets in the stream.

   If the optional parameter VPID_Code is present, it SHALL be present
   only once in the semicolon-separated list, taking a single integer
   value.

   A sample SDP mapping for ANC data is as follows:

      m=video 30000 RTP/AVP 112
      a=rtpmap:112 smpte291/90000
      a=fmtp:112 DID_SDID={0x61,0x02};DID_SDID={0x41,0x05};VPID_Code=132

   In this example, a dynamic payload type 112 is used for ANC data.
   The 90 kHz RTP timestamp rate is specified in the "a=rtpmap" line
   after the subtype.  In the "a=fmtp:" line, DID 0x61 and SDID 0x02 are
   specified (registered to EIA 608 Closed Caption Data by SMPTE), and
   also DID 0x41 and SDID 0x05 (registered to AFD/Bar Data).  The
   VPID_Code is 132 (referring to SMPTE ST 292-1, 720-line video
   payloads on a 1.5 Gb/s serial digital interface).








<span class="grey">Edwards                      Standards Track                   [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Grouping%20ANC%20Data%20Streams%20with%20Other%20Media%20Streams"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Grouping ANC Data Streams with Other Media Streams</span>

   To indicate the association of an ANC data stream with a particular
   video stream, implementers MAY group the "m" lines together using
   Flow Identification ("FID") semantics as defined in <a href="rfc5888.html">RFC 5888</a>
   [<a href="rfc5888.html" title='"The Session Description Protocol (SDP) Grouping Framework"'>RFC5888</a>].

   A sample SDP mapping for grouping ANC data with video as described in
   <a href="rfc4175.html">RFC 4175</a> [<a href="rfc4175.html" title='"RTP Payload Format for Uncompressed Video"'>RFC4175</a>] is as follows:

        v=0
        o=Al 123456 11 IN IP4 host.example.com
        s=Professional Networked Media Test
        i=A test of synchronized video and ANC data
        t=0 0
        a=group:FID V1 M1
        m=video 50000 RTP/AVP 96
        c=IN IP4 233.252.0.1/255
        a=rtpmap:96 raw/90000
        a=fmtp:96 sampling=YCbCr-4:2:2; width=1280; height=720; depth=10
        a=mid:V1
        m=video 50010 RTP/AVP 97
        c=IN IP4 233.252.0.2/255
        a=rtpmap:97 smpte291/90000
        a=fmtp:97 DID_SDID={0x61,0x02};DID_SDID={0x41,0x05}
        a=mid:M1

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Offer%2FAnswer%20Model%20and%20Declarative%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Offer/Answer Model and Declarative Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Offer%2FAnswer%20Model"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Offer/Answer Model</span>

   Receivers might wish to receive ANC data streams with specific
   DID_SDID parameters.  Thus, when offering ANC data streams using the
   Session Description Protocol (SDP) in an Offer/Answer model
   [<a href="rfc3264.html" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>], the offerer MAY provide a list of ANC data streams
   available with specific DID_SDID parameters in the fmtp line.  The
   answerer MAY (1) respond with all or a subset of the streams offered
   along with fmtp lines with all or a subset of the DID_SDID parameters
   offered, (2) set the corresponding port number to 0 to decline the
   smpte291 stream if not in the same media section as a corresponding
   video stream, or (3) remove the corresponding payload type if the
   smpte291 stream is in the same media section as a corresponding video
   stream.  There are no restrictions on updating DID_SDID parameters in
   a subsequent offer.







<span class="grey">Edwards                      Standards Track                   [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Declarative%20SDP%20Considerations"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Declarative SDP Considerations</span>

   For declarative use of SDP, nothing specific is defined for this
   payload format.  The configuration given by the SDP MUST be used when
   sending and/or receiving media in the session.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  IANA Considerations</span>

   The media type "video/smpte291" is defined in <a href="#section-3.1">Section 3.1</a>.  IANA has
   registered "video/smpte291" in the "Media Types" registry.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   RTP packets using the payload format defined in this specification
   are subject to the security considerations discussed in the RTP
   specification [<a href="rfc3550.html" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and in any applicable RTP profile such as
   RTP/AVP [<a href="rfc3551.html" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>], RTP/AVPF [<a href="rfc4585.html" title='"Extended RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/AVPF)"'>RFC4585</a>], RTP/SAVP [<a href="rfc3711.html" title='"The Secure Real-time Transport Protocol (SRTP)"'>RFC3711</a>], or RTP/
   SAVPF [<a href="rfc5124.html" title='"Extended Secure RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/SAVPF)"'>RFC5124</a>].  However, as "Securing the RTP Protocol Framework:
   Why RTP Does Not Mandate a Single Media Security Solution" [<a href="rfc7202.html" title='"Securing the RTP Framework: Why RTP Does Not Mandate a Single Media Security Solution"'>RFC7202</a>]
   discusses, it is not the responsibility of an RTP payload format to
   discuss or mandate what solutions are to be used to meet the basic
   security goals like confidentiality, integrity, and source
   authenticity for RTP in general.  This responsibility lays on anyone
   using RTP in an application.  They can find guidance on available
   security mechanisms and important considerations in "Options for
   Securing RTP Sessions" [<a href="rfc7201.html" title='"Options for Securing RTP Sessions"'>RFC7201</a>].  Applications SHOULD use one or
   more appropriately strong security mechanisms.  The rest of this
   section discusses the security impacting properties of the payload
   format itself.

   To avoid potential buffer overflow attacks, receivers SHOULD validate
   that the ANC data packets in the RTP payload are of the appropriate
   length (using the Data_Count field) for the ANC data type specified
   by DID and SDID.  Also, the Checksum_Word SHOULD be checked against
   the ANC data packet to ensure that its data has not been damaged in
   transit; note that the Checksum_Word is unlikely to provide a payload
   integrity check in case of a directed attack.

   Some receivers will simply move the ANC data packet bits from the RTP
   payload into SDI.  It might still be a good idea for these "re-
   embedders" to perform the above-mentioned validity tests to avoid
   downstream SDI systems from becoming confused by bad ANC data
   packets, which could be used for a denial-of-service attack.

   "Re-embedders" into SDI SHOULD also double check that the Line_Number
   and Horizontal_Offset lead to the ANC data packet being inserted into
   a legal area to carry ANC data in the SDI video bit stream of the
   output video format.



<span class="grey">Edwards                      Standards Track                   [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20References"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" name="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC0791" name="ref-RFC0791">RFC0791</a>]  Postel, J., "Internet Protocol", STD 5, <a href="rfc791.html">RFC 791</a>,
              DOI 10.17487/RFC0791, September 1981,
              &lt;<a href="https://www.rfc-editor.org/info/rfc791">https://www.rfc-editor.org/info/rfc791</a>&gt;.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3264" name="ref-RFC3264">RFC3264</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model
              with Session Description Protocol (SDP)", <a href="rfc3264.html">RFC 3264</a>,
              DOI 10.17487/RFC3264, June 2002,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3264">https://www.rfc-editor.org/info/rfc3264</a>&gt;.

   [<a id="ref-RFC3550" name="ref-RFC3550">RFC3550</a>]  Schulzrinne, H., Casner, S., Frederick, R., and V.
              Jacobson, "RTP: A Transport Protocol for Real-Time
              Applications", STD 64, <a href="rfc3550.html">RFC 3550</a>, DOI 10.17487/RFC3550,
              July 2003, &lt;<a href="https://www.rfc-editor.org/info/rfc3550">https://www.rfc-editor.org/info/rfc3550</a>&gt;.

   [<a id="ref-RFC3551" name="ref-RFC3551">RFC3551</a>]  Schulzrinne, H. and S. Casner, "RTP Profile for Audio and
              Video Conferences with Minimal Control", STD 65, <a href="rfc3551.html">RFC 3551</a>,
              DOI 10.17487/RFC3551, July 2003,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3551">https://www.rfc-editor.org/info/rfc3551</a>&gt;.

   [<a id="ref-RFC3711" name="ref-RFC3711">RFC3711</a>]  Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K.
              Norrman, "The Secure Real-time Transport Protocol (SRTP)",
              <a href="rfc3711.html">RFC 3711</a>, DOI 10.17487/RFC3711, March 2004,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3711">https://www.rfc-editor.org/info/rfc3711</a>&gt;.

   [<a id="ref-RFC4585" name="ref-RFC4585">RFC4585</a>]  Ott, J., Wenger, S., Sato, N., Burmeister, C., and J. Rey,
              "Extended RTP Profile for Real-time Transport Control
              Protocol (RTCP)-Based Feedback (RTP/AVPF)", <a href="rfc4585.html">RFC 4585</a>,
              DOI 10.17487/RFC4585, July 2006,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4585">https://www.rfc-editor.org/info/rfc4585</a>&gt;.

   [<a id="ref-RFC4855" name="ref-RFC4855">RFC4855</a>]  Casner, S., "Media Type Registration of RTP Payload
              Formats", <a href="rfc4855.html">RFC 4855</a>, DOI 10.17487/RFC4855, February 2007,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4855">https://www.rfc-editor.org/info/rfc4855</a>&gt;.

   [<a id="ref-RFC5124" name="ref-RFC5124">RFC5124</a>]  Ott, J. and E. Carrara, "Extended Secure RTP Profile for
              Real-time Transport Control Protocol (RTCP)-Based Feedback
              (RTP/SAVPF)", <a href="rfc5124.html">RFC 5124</a>, DOI 10.17487/RFC5124, February
              2008, &lt;<a href="https://www.rfc-editor.org/info/rfc5124">https://www.rfc-editor.org/info/rfc5124</a>&gt;.




<span class="grey">Edwards                      Standards Track                   [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   [<a id="ref-RFC5234" name="ref-RFC5234">RFC5234</a>]  Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax
              Specifications: ABNF", STD 68, <a href="rfc5234.html">RFC 5234</a>,
              DOI 10.17487/RFC5234, January 2008,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5234">https://www.rfc-editor.org/info/rfc5234</a>&gt;.

   [<a id="ref-RFC5888" name="ref-RFC5888">RFC5888</a>]  Camarillo, G. and H. Schulzrinne, "The Session Description
              Protocol (SDP) Grouping Framework", <a href="rfc5888.html">RFC 5888</a>,
              DOI 10.17487/RFC5888, June 2010,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5888">https://www.rfc-editor.org/info/rfc5888</a>&gt;.

   [<a id="ref-RFC6838" name="ref-RFC6838">RFC6838</a>]  Freed, N., Klensin, J., and T. Hansen, "Media Type
              Specifications and Registration Procedures", <a href="https://tools.ietf.org/html/bcp13">BCP 13</a>,
              <a href="rfc6838.html">RFC 6838</a>, DOI 10.17487/RFC6838, January 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6838">https://www.rfc-editor.org/info/rfc6838</a>&gt;.

   [<a id="ref-RFC8174" name="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="rfc2119.html">RFC</a>
              <a href="rfc2119.html">2119</a> Key Words", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc8174.html">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a id="ref-RP168" name="ref-RP168">RP168</a>]    SMPTE, "RP 168:2009, Definition of Vertical Interval
              Switching Point for Synchronous Video Switching", 2009.

   [<a id="ref-ST291" name="ref-ST291">ST291</a>]    SMPTE, "SMPTE Standard - Ancillary Data Packet and Space
              Formatting", ST 291-1:2011,
              DOI 10.5594/SMPTE.ST291-1.2011, September 2011,
              &lt;<a href="http://ieeexplore.ieee.org/document/7291794/">http://ieeexplore.ieee.org/document/7291794/</a>&gt;.

   [<a id="ref-ST352" name="ref-ST352">ST352</a>]    SMPTE, "SMPTE Standard - Payload Identification Codes for
              Serial Digital Interfaces", ST 352:2013,
              DOI 10.5594/SMPTE.ST352.2013, February 2013,
              &lt;<a href="http://ieeexplore.ieee.org/document/7290261/">http://ieeexplore.ieee.org/document/7290261/</a>&gt;.

   [<a id="ref-ST424" name="ref-ST424">ST424</a>]    SMPTE, "SMPTE Standard - 3 Gb/s Signal/Data Serial
              Interface", ST 424:2012, DOI 10.5594/SMPTE.ST424.2012,
              October 2012,
              &lt;<a href="http://ieeexplore.ieee.org/document/7290519/">http://ieeexplore.ieee.org/document/7290519/</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" name="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-BT656" name="ref-BT656">BT656</a>]    ITU-R, "Interfaces for Digital Component Video Signals in
              525-Line and 625-Line Television Systems Operating at the
              4:2:2 Level of Recommendation ITU-R BT.601", ITU-R
              Recommendation BT.656-5, December 2007.

   [<a id="ref-RFC4175" name="ref-RFC4175">RFC4175</a>]  Gharai, L. and C. Perkins, "RTP Payload Format for
              Uncompressed Video", <a href="rfc4175.html">RFC 4175</a>, DOI 10.17487/RFC4175,
              September 2005, &lt;<a href="https://www.rfc-editor.org/info/rfc4175">https://www.rfc-editor.org/info/rfc4175</a>&gt;.




<span class="grey">Edwards                      Standards Track                   [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   [<a id="ref-RFC5371" name="ref-RFC5371">RFC5371</a>]  Futemma, S., Itakura, E., and A. Leung, "RTP Payload
              Format for JPEG 2000 Video Streams", <a href="rfc5371.html">RFC 5371</a>,
              DOI 10.17487/RFC5371, October 2008,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5371">https://www.rfc-editor.org/info/rfc5371</a>&gt;.

   [<a id="ref-RFC7201" name="ref-RFC7201">RFC7201</a>]  Westerlund, M. and C. Perkins, "Options for Securing RTP
              Sessions", <a href="rfc7201.html">RFC 7201</a>, DOI 10.17487/RFC7201, April 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7201">https://www.rfc-editor.org/info/rfc7201</a>&gt;.

   [<a id="ref-RFC7202" name="ref-RFC7202">RFC7202</a>]  Perkins, C. and M. Westerlund, "Securing the RTP
              Framework: Why RTP Does Not Mandate a Single Media
              Security Solution", <a href="rfc7202.html">RFC 7202</a>, DOI 10.17487/RFC7202, April
              2014, &lt;<a href="https://www.rfc-editor.org/info/rfc7202">https://www.rfc-editor.org/info/rfc7202</a>&gt;.

   [<a id="ref-RFC7273" name="ref-RFC7273">RFC7273</a>]  Williams, A., Gross, K., van Brandenburg, R., and H.
              Stokking, "RTP Clock Source Signalling", <a href="rfc7273.html">RFC 7273</a>,
              DOI 10.17487/RFC7273, June 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7273">https://www.rfc-editor.org/info/rfc7273</a>&gt;.

   [<a id="ref-SMPTE-RA" name="ref-SMPTE-RA">SMPTE-RA</a>]
              SMPTE Registration Authority, LLC, "SMPTE Ancillary Data
              SMPTE ST 291",
              &lt;<a href="https://smpte-ra.org/smpte-ancillary-data-smpte-st-291">https://smpte-ra.org/smpte-ancillary-data-smpte-st-291</a>&gt;.

   [<a id="ref-ST2038" name="ref-ST2038">ST2038</a>]   SMPTE, "SMPTE Standard - Carriage of Ancillary Data
              Packets in an MPEG-2 Transport Stream", ST 2038:2008,
              DOI 10.5594/SMPTE.ST2038.2008, September 2008,
              &lt;<a href="http://ieeexplore.ieee.org/document/7290549/">http://ieeexplore.ieee.org/document/7290549/</a>&gt;.

   [<a id="ref-ST259" name="ref-ST259">ST259</a>]    SMPTE, "SMPTE Standard - For Television - SDTV Digital
              Signal/Data - Serial Digital Interface", ST 259:2008,
              DOI 10.5594/SMPTE.ST259.2008, January 2008,
              &lt;<a href="http://ieeexplore.ieee.org/document/7292109/">http://ieeexplore.ieee.org/document/7292109/</a>&gt;.

   [<a id="ref-ST274" name="ref-ST274">ST274</a>]    SMPTE, "SMPTE Standard - For Television - 1920 x 1080
              Image Sample Structure, Digital Representation and Digital
              Timing Reference Sequences for Multiple Picture Rates",
              ST 274:2008, DOI 10.5594/SMPTE.ST274.2008, January 2008,
              &lt;<a href="http://ieeexplore.ieee.org/document/7290129/">http://ieeexplore.ieee.org/document/7290129/</a>&gt;.

   [<a id="ref-ST292" name="ref-ST292">ST292</a>]    SMPTE, "SMPTE Standard - 1.5 Gb/s Signal/Data Serial
              Interface", ST 292-1:2012, DOI 10.5594/SMPTE.ST292-1.2012,
              January 2012,
              &lt;<a href="http://ieeexplore.ieee.org/document/7291770/">http://ieeexplore.ieee.org/document/7291770/</a>&gt;.







<span class="grey">Edwards                      Standards Track                   [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc8331.html">RFC 8331</a>             RTP Payload for Ancillary Data        February 2018</span>


   [<a id="ref-ST296" name="ref-ST296">ST296</a>]    SMPTE, "SMPTE Standard - 1280 x 720 Progressive Image
              4:2:2 and 4:4:4 Sample Structure - Analog and Digital
              Representation and Analog Interface", ST 296:2012,
              DOI 10.5594/SMPTE.ST296.2012, May 2012,
              &lt;<a href="http://ieeexplore.ieee.org/document/7291722/">http://ieeexplore.ieee.org/document/7291722/</a>&gt;.

Author's Address

   Thomas G. Edwards
   FOX
   10201 W. Pico Blvd.
   Los Angeles, CA  90035
   United States of America

   Phone: +1 310 369 6696
   Email: thomas.edwards@fox.com



































Edwards                      Standards Track                   [Page 20]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc8331 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:15 GMT --></html>