<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5695 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 14:27:32 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.127" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:5695" name="DC.Identifier"/>
<meta content="This document describes a methodology specific to the benchmarking of
Multi-Protocol Label Switching (MPLS) forwarding devices, limited to
the most common MPLS packet forwarding scenarios and delay
measurements for each, considering IP flows. It builds upon the tenets
set forth in RFC2544, RFC1242 and other IETF Benchmarking Methodology
Working Group (BMWG) efforts. This document seeks to extend these
efforts to the MPLS paradigm." name="DC.Description.Abstract"/>
<meta content="Asati, Rajiv" name="DC.Creator"/>
<meta content="Pignataro, Carlos" name="DC.Creator"/>
<meta content="Akhter, Aamer" name="DC.Creator"/>
<meta content="November, 2009" name="DC.Date.Issued"/>
<meta content="MPLS Forwarding Benchmarking Methodology for IP Flows" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5695 - MPLS Forwarding Benchmarking Methodology for IP Flows</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5695.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5695" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-bmwg-mpls-forwarding-meth" title="draft-ietf-bmwg-mpls-forwarding-meth">draft-ietf-bmwg...</a>] [<a href="https://datatracker.ietf.org/doc/rfc5695" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5695" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5695" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=5695">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                          A. Akhter
Request for Comments: 5695                                      R. Asati
Category: Informational                                     C. Pignataro
                                                           Cisco Systems
                                                           November 2009


         <span class="h1">MPLS Forwarding Benchmarking Methodology for IP Flows</span>

Abstract

   This document describes a methodology specific to the benchmarking
   of Multiprotocol Label Switching (MPLS) forwarding devices, limited
   to the most common MPLS packet forwarding scenarios and delay
   measurements for each, considering IP flows.  It builds upon the
   tenets set forth in <a href="rfc2544.html">RFC 2544</a>, <a href="rfc1242.html">RFC 1242</a>, and other IETF Benchmarking
   Methodology Working Group (BMWG) efforts.  This document seeks to
   extend these efforts to the MPLS paradigm.

Status of This Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may



<span class="grey">Akhter, et al.               Informational                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Document Scope ..................................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Key Words To Reflect Requirements ...............................<a href="#page-4">4</a>
   <a href="#section-4">4</a>. Test Methodology ................................................<a href="#page-4">4</a>
      <a href="#section-4.1">4.1</a>. Test Considerations ........................................<a href="#page-5">5</a>
           <a href="#section-4.1.1">4.1.1</a>. Abbreviations Used ..................................<a href="#page-5">5</a>
           <a href="#section-4.1.2">4.1.2</a>. IGP Support .........................................<a href="#page-6">6</a>
           <a href="#section-4.1.3">4.1.3</a>. Label Distribution Support ..........................<a href="#page-6">6</a>
           <a href="#section-4.1.4">4.1.4</a>. Frame Formats .......................................<a href="#page-7">7</a>
           <a href="#section-4.1.5">4.1.5</a>. Frame Sizes .........................................<a href="#page-9">9</a>
           <a href="#section-4.1.6">4.1.6</a>. Time-to-Live (TTL) or Hop Limit ....................<a href="#page-12">12</a>
           <a href="#section-4.1.7">4.1.7</a>. Trial Duration .....................................<a href="#page-12">12</a>
           <a href="#section-4.1.8">4.1.8</a>. Traffic Verification ...............................<a href="#page-12">12</a>
           <a href="#section-4.1.9">4.1.9</a>. Address Resolution and Dynamic Protocol State ......<a href="#page-13">13</a>
   <a href="#section-5">5</a>. Reporting Format ...............................................<a href="#page-13">13</a>
   <a href="#section-6">6</a>. MPLS Forwarding Benchmarking Tests .............................<a href="#page-14">14</a>
      <a href="#section-6.1">6.1</a>. Throughput ................................................<a href="#page-15">15</a>
           <a href="#section-6.1.1">6.1.1</a>. Throughput for MPLS Label Push .....................<a href="#page-16">16</a>
           <a href="#section-6.1.2">6.1.2</a>. Throughput for MPLS Label Swap .....................<a href="#page-17">17</a>
           <a href="#section-6.1.3">6.1.3</a>. Throughput for MPLS Label Pop (Unlabeled) ..........<a href="#page-18">18</a>
           <a href="#section-6.1.4">6.1.4</a>. Throughput for MPLS Label Pop (Aggregate) ..........<a href="#page-19">19</a>
           <a href="#section-6.1.5">6.1.5</a>. Throughput for MPLS Label Pop (PHP) ................<a href="#page-20">20</a>
      <a href="#section-6.2">6.2</a>. Latency Measurement .......................................<a href="#page-21">21</a>
      <a href="#section-6.3">6.3</a>. Frame-Loss Rate (FLR) Measurement .........................<a href="#page-22">22</a>
      <a href="#section-6.4">6.4</a>. System Recovery ...........................................<a href="#page-23">23</a>
      <a href="#section-6.5">6.5</a>. Reset .....................................................<a href="#page-23">23</a>
   <a href="#section-7">7</a>. Security Considerations ........................................<a href="#page-25">25</a>
   <a href="#section-8">8</a>. Acknowledgement ................................................<a href="#page-25">25</a>
   <a href="#section-9">9</a>. References .....................................................<a href="#page-25">25</a>
      <a href="#section-9.1">9.1</a>. Normative References ......................................<a href="#page-25">25</a>
      <a href="#section-9.2">9.2</a>. Informative References ....................................<a href="#page-26">26</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   Over the past several years, there has been an increase in the use of
   MPLS as a forwarding architecture in new and existing network
   designs.  MPLS, defined in [<a href="rfc3031.html" title='"Multiprotocol Label Switching Architecture"'>RFC3031</a>], is a foundation technology and
   the basis for many advanced technologies such as Layer 3 MPLS VPNs,
   Layer 2 MPLS VPNs, and MPLS Traffic Engineering.






<span class="grey">Akhter, et al.               Informational                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   However, there is no standard method defined to compare and contrast
   the foundational MPLS packet forwarding capabilities of network
   devices.  This document proposes a methodology using common criteria
   (such as throughput, latency, frame-loss rate, system recovery,
   reset, etc.) to evaluate MPLS forwarding of any implementation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Document%20Scope"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Document Scope</span>

   The benchmarking methodology principles outlined in <a href="rfc2544.html">RFC 2544</a>
   [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>] are independent of forwarding techniques; however, they
   don't fully address MPLS benchmarking.  The workload on network
   forwarding device resources that MPLS forwarding places is different
   from that of IP forwarding; therefore, MPLS forwarding benchmarking
   specifics are desired.

   The purpose of this document is to describe a methodology specific to
   the benchmarking of MPLS forwarding devices.  The methods described
   are limited in scope to the most common MPLS packet forwarding
   scenarios and corresponding performance measurements in a laboratory
   setting.  It builds upon the tenets set forth in <a href="rfc2544.html">RFC 2544</a> [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>],
   <a href="rfc1242.html">RFC 1242</a> [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>], and other IETF Benchmarking Methodology Working
   Group (BMWG) efforts.  In other words, this document is not a
   replacement for, but a complement to, <a href="rfc2544.html">RFC 2544</a>.

   This document focuses on the MPLS label stack [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>] that has only
   one entry, as it is the fundamental of MPLS forwarding.  It is
   expected that future documents may cover the benchmarking of MPLS
   applications such as Layer 3 VPN (L3VPN) [<a href="rfc4364.html" title='"BGP/MPLS IP Virtual Private Networks (VPNs)"'>RFC4364</a>], Layer 2 VPN
   (L2VPN) [<a href="rfc4664.html" title='"Framework for Layer 2 Virtual Private Networks (L2VPNs)"'>RFC4664</a>], Fast ReRoute [<a href="rfc4090.html" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>], etc., which require more
   than one entry in the MPLS label stack.

   Moreover, to address the majority of current deployments' needs, this
   document focuses on having IP packets as the MPLS payload.  In other
   words, label distribution for IP Forwarding Equivalence Class (FEC)
   [<a href="rfc3031.html" title='"Multiprotocol Label Switching Architecture"'>RFC3031</a>] is prescribed (see <a href="#section-4.1.3">Section 4.1.3</a>) by this document.  It is
   expected that future documents may focus on having non-IP packets as
   the MPLS payload.

   Note that the presence of an MPLS label stack does not require the
   length of MPLS payload (which is an IP packet, per this document) to
   be changed; hence, the effective maximum size of a frame can increase
   by Z octets (where Z = 4 x number of label stack entries), as
   observed in current deployments.  This document focuses on
   benchmarking such a scenario.







<span class="grey">Akhter, et al.               Informational                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Key%20Words%20To%20Reflect%20Requirements"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Key Words To Reflect Requirements</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>
   [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].  <a href="rfc2119.html">RFC 2119</a> defines the use of these key words to help make
   the intent of Standards Track documents as clear as possible.  While
   this document uses these keywords, this document is not a Standards
   Track document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Test%20Methodology"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Test Methodology</span>

   The set of methodologies described in this document will use the
   topology described in this section.  An effort has been made to
   exclude superfluous equipment needs such that each test can be
   carried out with a minimal number of devices.  Figure 1 illustrates
   the sample topology in which the Device Under Test (DUT) is connected
   to the test ports on the test tool in accord with Figure 1 of <a href="rfc2544.html">RFC</a>
   <a href="rfc2544.html">2544</a>.

                          +-----------------+
          +---------+     |                 |     +---------+
          | Test    |     |                 |     | Test    |
          | Port A1 +-----+ DA1         DB1 +-----+ Port B1 |
          +---------+     |                 |     +---------+
          +---------+     |       DUT       |     +---------+
          | Test    |     |                 |     | Test    |
          | Port A2 +-----+ DA2         DB2 +-----+ Port B2 |
          +---------+     |                 |     +---------+
               ...        | ...         ... |        ...
          +---------+     |                 |     +---------+
          | Test    |     |                 |     | Test    |
          | Port Ap +-----+ DAp         DBp +-----+ Port Bp |
          +---------+     +-----------------+     +---------+

          Figure 1: Topology for MPLS Forwarding Benchmarking

   A represents a Tx-side Module of the test tool, whereas B represents
   an Rx-side Module of the same test tool.  Of course, the suffixed
   numbers (1, 2, ..., p) represent ports on a Module.

   Similarly, DA represents an Rx-side Module of the DUT, whereas DB
   represents a Tx-side Module.  The suffixed numbers (1, 2, ..., p)
   represent ports on a Module.







<span class="grey">Akhter, et al.               Informational                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   p = the number of {DA, DB} pair ports on the DUT.  It is determined
   by the maximum unidirectional forwarding throughput of the DUT and
   the load capacity of the port media (e.g., interface) connecting the
   DUT to the test tool.

   For example, if the DUT's maximum forwarding throughput is 100 frames
   per second (fps) and the load capacity of the port media (e.g.,
   interface) is 50 fps, then p &gt;= 2 is needed to sufficiently test the
   maximum frame forwarding.

   The exact throughput is a measured quantity obtained through testing.
   Throughput may vary depending on the number of ports used and other
   factors.  The number of ports (p) used SHOULD be reported.  Please
   see "Test Setup" in <a href="#section-6">Section 6</a>.  Following Figure 1 from <a href="rfc2544.html#section-6">Section 6 of
   RFC 2544</a> is recommended.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/4.1.%20%20Test%20Considerations"></a><a class="selflink" href="#section-4.1" name="section-4.1">4.1</a>.  Test Considerations</span>

   This methodology assumes a full-duplex, uniform medium topology.  The
   medium used MUST be reported in each test result.  Issues regarding
   mixed transmission media, speed mismatches, media header differences,
   etc., are not under consideration.  Traffic affecting features such
   as Flow control, Quality of Service (QoS), Graceful Restart, etc.
   MUST be disabled, unless explicitly requested in the test case.
   Additionally, any non-essential traffic MUST also be avoided.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.1.%20%20Abbreviations%20Used"></a><a class="selflink" href="#section-4.1.1" name="section-4.1.1">4.1.1</a>.  Abbreviations Used</span>

   The terms used in this document remain consistent with those defined
   in "Benchmarking Terminology for Network Interconnect Devices" <a href="rfc1242.html">RFC</a>
   <a href="rfc1242.html">1242</a> [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>].  This terminology SHOULD be consulted before using or
   applying the recommendations of this document.

   Please refer to Figure 1 for a topology view of the network.  The
   following abbreviations are used in this document:

   M  := Module on a device (i.e., Line-Card or Slot; could be A or B)

   p  := Port number (i.e., port on the Module; could be 1, 2, etc.)

   RN := Remote Network (i.e., network that is reachable via a port of a
   module; could be B1RN1 or B2RN5 to mean the first network reachable
   via port 1 of module B, e.g., B1, or the fifth network reachable via
   port 2 of module B, etc.).  RN is considered to be the IP Prefix FEC
   from the MPLS perspective.






<span class="grey">Akhter, et al.               Informational                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.2.%20%20IGP%20Support"></a><a class="selflink" href="#section-4.1.2" name="section-4.1.2">4.1.2</a>.  IGP Support</span>

   It is RECOMMENDED that all of the ports (A1, DA1, DB1, and A2) on the
   DUT and test tool support a dynamic Interior Gateway Protocol (IGP)
   for routing such as IS-IS, OSPF, RIP, etc.  Furthermore, there are
   testing considerations in this document that the device be able to
   provide a stable control plane during heavy forwarding workloads.  In
   particular, the procedures defined in <a href="rfc2544.html#section-11.3">Section 11.3 of RFC 2544</a> must
   be followed.  This is to ensure that control plane instability during
   load conditions is not the contributing factor towards frame
   forwarding performance.

   The route distribution method (OSPF, IS-IS, Enhanced Interior Gateway
   Routing Protocol (EIGRP), RIP, Static, etc.), if used, MUST be
   reported.  Furthermore, if any specific configuration is used to
   maintain control plane stability during the test (i.e., Control Plane
   Protection, Control Plane Rate Limiting, etc.), then it MUST also be
   reported.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.3.%20%20Label%20Distribution%20Support"></a><a class="selflink" href="#section-4.1.3" name="section-4.1.3">4.1.3</a>.  Label Distribution Support</span>

   The DUT and test tool must support at least one protocol for
   exchanging MPLS label/FEC bindings for Prefix Forwarding Equivalence
   Class (FEC) [<a href="rfc3031.html" title='"Multiprotocol Label Switching Architecture"'>RFC3031</a>].  The DUT and test tool MUST be capable of
   learning and advertising MPLS label/FEC bindings via the chosen
   protocol(s) and use them during packet forwarding all the time
   (including when the label/FEC bindings change).  The most commonly
   used protocols are Label Distribution Protocol (LDP) [<a href="rfc5036.html" title='"LDP Specification"'>RFC5036</a>],
   Resource Reservation Protocol-Traffic Engineering (RSVP-TE)
   [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>], and Border Gateway Protocol (BGP) [<a href="rfc3107.html" title='"Carrying Label Information in BGP-4"'>RFC3107</a>].

   All of the ports (A1, DA1, DB1, B1, etc.) either on the DUT or the
   test tool used in the testing SHOULD support LDP, RSVP-TE, and BGP
   for IPv4 or IPv6 Prefix Forwarding Equivalence Classes (FECs).

   Static labels SHOULD NOT be used to establish the MPLS label switched
   paths (LSPs), unless specified explicitly by the test case.

   This is because the use of a static label is quite uncommon in the
   production networks.

   The IPv4 and IPv6 Explicit NULL labels (label values 0 and 2) are
   sometimes used to identify the payload of an MPLS packet on an LSP
   [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>].  Explicit NULL labels are not used in the tests described
   in this document because the tests are limited to the use of no more
   than one non-reserved MPLS label in the label stack of all packets
   to, from, or through the DUT.




<span class="grey">Akhter, et al.               Informational                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.4.%20%20Frame%20Formats"></a><a class="selflink" href="#section-4.1.4" name="section-4.1.4">4.1.4</a>.  Frame Formats</span>

   This section explains the frame formats for IP and MPLS packets
   (<a href="#section-4.1.4.1">Section 4.1.4.1</a>), the usage of IP as the mandatory Layer 3 protocol
   and as the MPLS packet payload (<a href="#section-4.1.4.2">Section 4.1.4.2</a>), change in frame
   format during forwarding (<a href="#section-4.1.4.3">Section 4.1.4.3</a>), and recommended frame
   formats for the MPLS benchmarking (<a href="#section-4.1.4.4">Section 4.1.4.4</a>).

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.1.4.1.%20%20Frame%20Format%20for%20IP%20versus%20MPLS"></a><a class="selflink" href="#section-4.1.4.1" name="section-4.1.4.1">4.1.4.1</a>.  Frame Format for IP versus MPLS</span>

   A test frame carrying an IP packet is illustrated in Figure 2 below.
   Note that <a href="rfc2544.html">RFC 2544</a> [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>] prescribes using such a frame as the
   test frame over the chosen Layer 2 media.

         +---------+--------------+-----------------------+
         | Layer 2 | Layer 3 = IP | Layer 4 = UDP         |
         +---------+--------------+-----------------------+

                 Figure 2: Frame Format for IP Packets

   Unlike a test frame carrying an IP packet, a test frame carrying an
   MPLS packet contains an "MPLS label stack" [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>] immediately
   after the Layer 2 header (and before the IP header, if any) as
   illustrated in Figure 3 below.

         +---------+-------+--------------+-----------------------+
         | Layer 2 | MPLS  | Layer 3 = IP | Layer 4 = UDP         |
         +---------+-------+--------------+-----------------------+

                Figure 3: Frame Format for MPLS Packets

   The MPLS label stack is represented as a sequence of "label stack
   entries", where each label stack entry is 4 octets, as illustrated in
   Figure 1 of [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>].  This document requires exactly one entry in
   the MPLS label stack in an MPLS packet.

   MPLS label values used in any test case MUST be outside the reserved
   label value (0-15) unless stated otherwise.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.1.4.2.%20%20MPLS%20Packet%20Payload"></a><a class="selflink" href="#section-4.1.4.2" name="section-4.1.4.2">4.1.4.2</a>.  MPLS Packet Payload</span>

   This document prescribes using an IP packet as the MPLS payload (as
   illustrated in Figure 3 above).  Generically speaking, this document
   mandates the test frame to include IP (either IPv4 or IPv6) as the
   Layer 3 protocol, in accord with <a href="rfc2544.html#section-8">Section 8 of [RFC2544]</a> and
   independent of the MPLS label stack presence, for three reasons:





<span class="grey">Akhter, et al.               Informational                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   1. This enables using IP Prefix Forwarding Equivalence Class (FEC)
      [<a href="rfc3031.html" title='"Multiprotocol Label Switching Architecture"'>RFC3031</a>], which is a must for every MPLS network.

   2. This provides the foundation or baseline for the benchmarking of
      various other MPLS applications such as L3VPN, L2VPN, TE-FRR, etc.

   3. This enables leveraging <a href="rfc2544.html">RFC 2544</a> [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>], which prescribes using
      IP packets with UDP data as the test frames.  (Note that [<a href="rfc5180.html" title='"IPv6 Benchmarking Methodology for Network Interconnect Devices"'>RFC5180</a>]
      also uses this prescription for IPv6 benchmarking).

   While the usage of non-IP payloads is possible, it requires an MPLS
   application, e.g., L2VPN, whose benchmarking may be covered in
   separate BMWG documents (MPLS L2VPN Benchmarking, for example) in the
   future.  This is also explained in <a href="#section-2">Section 2</a>.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.1.4.3.%20%20Change%20in%20Frame%20Format%20Due%20to%20MPLS%20Push%20and%20Pop"></a><a class="selflink" href="#section-4.1.4.3" name="section-4.1.4.3">4.1.4.3</a>.  Change in Frame Format Due to MPLS Push and Pop</span>

   A frame carrying an IP or MPLS packet may go through any of the three
   MPLS forwarding operations: label push (or LSP Ingress), label swap,
   and label pop (or LSP Egress), as defined in [<a href="rfc3031.html" title='"Multiprotocol Label Switching Architecture"'>RFC3031</a>].  It is
   important to understand the change of the frame format from IP to
   MPLS or vice versa depending on the forwarding operation.

   In a label push (or LSP Ingress) operation, the DUT receives a frame
   containing an IP packet and forwards a frame containing an MPLS
   packet if the corresponding forwarding lookup for the IP destination
   points to a label push operation.

   In a label swap operation, the DUT receives a frame containing an
   MPLS packet and forwards a frame containing an MPLS packet if the
   corresponding forwarding lookup for the label value points to a label
   swap operation.

   In a label pop (or LSP Egress) operation, the DUT receives a frame
   containing an MPLS packet and forwards a frame containing an IP
   packet if the corresponding forwarding lookup for the label value
   points to a label pop operation.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.1.4.4.%20%20Frame%20Formats%20to%20Be%20Used%20for%20Benchmarking"></a><a class="selflink" href="#section-4.1.4.4" name="section-4.1.4.4">4.1.4.4</a>.  Frame Formats to Be Used for Benchmarking</span>

   This document prescribes using two test frame formats to
   appropriately test the forwarding operations: (1) Frame format for IP
   and (2) Frame format for MPLS.  Both formats are explained in <a href="#section-4.1.4.1">Section</a>
   <a href="#section-4.1.4.1">4.1.4.1</a>.  Additionally, the format of the test frame may change
   depending on the forwarding operation.






<span class="grey">Akhter, et al.               Informational                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   1. For test cases involving the label push operation, the test tool
      must use the frame format for IP packets (Figure 2) to send the
      test frames to the DUT, and must use the frame format for MPLS
      packets (Figure 3) to receive the test frames from the DUT.

   2. For test cases involving the label swap operation, the test tool
      must use the frame format for MPLS packets (Figure 3) to send the
      test frames to the DUT, and must use the frame format for MPLS
      packets (Figure 3) to receive the test frames from the DUT.

   3. For test cases involving the label pop operation, the test tool
      must use the frame format for MPLS packets (Figure 3) to send the
      test frames to the DUT, and must use the frame format for IP
      packets (Figure 2) to receive the test frames from the DUT.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.5.%20%20Frame%20Sizes"></a><a class="selflink" href="#section-4.1.5" name="section-4.1.5">4.1.5</a>.  Frame Sizes</span>

   Two types of port media are commonly deployed: Ethernet and POS
   (Packet Over Synchronous Optical Network).  This section identifies
   the frame sizes that SHOULD be used for each media type, if supported
   by the DUT; <a href="#section-4.1.5.1">Section 4.1.5.1</a> covers Ethernet and <a href="#section-4.1.5.2">Section 4.1.5.2</a>
   covers POS.

   First, it is important to note the possible increase in frame size
   due to the presence of an MPLS label stack in the frame (as explained
   in <a href="#section-4.1.4.3">Section 4.1.4.3</a>).

   As observed in the current deployments, presence of an MPLS label
   stack in a Layer 2 frame is assumed to be transparent to Layer3=IP,
   which continues to follow the conventional maximum frame payload size
   [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>] (1500 octets for Ethernet, say).  This means that the
   effective maximum frame payload size [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>] of the resulting Layer
   2 frame is Z octets more than the conventional maximum frame payload
   size, where Z = 4 x number of entries in the label stack.

   Hence, to ensure successful delivery of Layer 2 frames carrying MPLS
   packets and realistic benchmarking, it is RECOMMENDED to set the
   media MTU value to the effective maximum frame payload size
   [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>], which equals Z octets + conventional maximum frame payload
   size.  It is expected that such a change in the media MTU value only
   impacts the effective Maximum Frame Payload Size for MPLS packets,
   but not for IP packets.

   Note that this document requires exactly a single entry in the MPLS
   label stack in an MPLS packet.  In other words, the depth of the
   label stack is set to one, e.g., Z = 4 x 1 = 4 octets.  Furthermore,
   in accord with Sections <a href="#section-9">9</a> and <a href="#section-9.1">9.1</a> of <a href="rfc2544.html">RFC 2544</a>, this document
   prescribes that each test case is run with different (Layer 2) frame



<span class="grey">Akhter, et al.               Informational                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   sizes in different trials.  Additionally, results MAY also be
   collected with multiple simultaneous frame sizes (sometimes referred
   to as an Interactive Multimodal Information Extraction (IMIX) to
   simulate real network traffic according to the frame size ordering
   and usage).  There is no standard for mixtures of frame sizes, and
   the results are subject to wide interpretation (see Section 18 of <a href="rfc2544.html">RFC</a>
   <a href="rfc2544.html">2544</a>).  When running trials using multiple simultaneous frame sizes,
   the DUT configuration MUST remain the same.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.1.5.1.%20%20Frame%20Sizes%20To%20Be%20Used%20on%20Ethernet%20Media"></a><a class="selflink" href="#section-4.1.5.1" name="section-4.1.5.1">4.1.5.1</a>.  Frame Sizes To Be Used on Ethernet Media</span>

   Ethernet media, in all its types, has become the most commonly
   deployed port media in MPLS networks.  If any test case execution
   (such as the Label Push case) requires the test tool to send (or
   receive) a Layer 2 frame containing an IP packet, then the following
   frame sizes SHOULD be used for benchmarking over Ethernet media: 64,
   128, 256, 512, 1024, 1280, and 1518 octets.  This is in-line with
   Sections <a href="#section-9">9</a> and <a href="#section-9.1">9.1</a> of <a href="rfc2544.html">RFC 2544</a>.  Figure 4 illustrates the header
   sizes for an untagged Ethernet frame containing an IP payload (per
   <a href="rfc2544.html">RFC 2544</a>).

            &lt;----------------64-1518B------------------------&gt;
            &lt;--18B---&gt;&lt;-----------46-1500B-------------------&gt;
            +---------+---------+----------------------------+
            | Layer 2 | Layer 3 | Layer 4 (and higher)       |
            +---------+---------+----------------------------+

               Figure 4: Frame Size for Label Push Cases

      Note 1: The 64- and 1518-octet frame size represents the minimum
      and maximum length of an untagged Ethernet frame, as per IEEE
      802.3 [<a href="#ref-IEE8023" title='"IEEE Std 802.3as-2006, Part 3: Carrier Sense Multiple Access with Collision Detection (CSMA/CD) Access Method and Physical Layer Specifications, Amendment 3: Frame format extensions"'>IEE8023</a>].  A frame size commonly used in operational
      environments may range from 68 to 1522 octets, which are the
      minimum and maximum lengths of a single VLAN-tagged frame, as per
      IEEE 802.1D [<a href="#ref-IEE8021" title='"IEEE Std 802.1D-2004, MAC Bridges"'>IEE8021</a>].

      Note 2: While jumbo frames are outside the scope of the 802.3 IEEE
      standard, tests SHOULD be executed with the frame sizes that are
      supported by the DUT.  Examples of commonly used jumbo (Ethernet)
      frame sizes are: 4096, 8192, and 9216 octets.

   If any test case execution (such as Label Swap and Label Pop cases)
   requires the test tool to transmit (or receive) a Layer 2 frame
   containing an MPLS packet, then the untagged Layer 2 frame must







<span class="grey">Akhter, et al.               Informational                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   include an additional 4 octets for the MPLS header, resulting in the
   following frame sizes to be used for benchmarking over Ethernet
   media: 68, 132, 260, 516, 1028, 1284, and 1522 octets.  Figure 5
   illustrates the header sizes for an untagged Ethernet frame
   containing an MPLS packet.

            &lt;------------------68-1522B------------------------------&gt;
            &lt;--18B---&gt;&lt;--4B--&gt;&lt;-----------46-1500B-------------------&gt;
            +---------+-------+---------+----------------------------+
            | Layer 2 | MPLS  | Layer 3 | Layer 4 (and higher)       |
            +---------+-------+---------+----------------------------+

                 Figure 5: Frame Size for Label Swap and Pop Cases

      Note: The Media MTU on the link between the test tool and the DUT
      must be changed, if needed, to accommodate the effective maximum
      frame payload size [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>] resulting from adding an MPLS label
      stack to the IP packet.  As clarified in <a href="rfc3032.html#section-3.1">Section 3.1 of RFC 3032</a>,
      most Layer 2 media drivers are capable of sending and receiving
      Layer 2 frames with effective maximum frame payload size.  Many
      vendors also allow the Media MTU to be changed for MPLS, without
      changing it for IP.  The recommended link MTU value for MPLS is Z
      octets more than the conventional maximum frame payload size
      [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>] (for example, the conventional maximum frame payload
      size for Ethernet is 1500 octets).  This document prescribes Z=4
      octets.  If a vendor DUT doesn't allow such an MTU change, then
      the benchmarking cannot be performed for the true maximum frame
      payload size [<a href="rfc3032.html" title='"MPLS Label Stack Encoding"'>RFC3032</a>] and this must be reported.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/4.1.5.2.%20%20Frame%20Sizes%20to%20Be%20Used%20on%20POS%20Media"></a><a class="selflink" href="#section-4.1.5.2" name="section-4.1.5.2">4.1.5.2</a>.  Frame Sizes to Be Used on POS Media</span>

   Packet over SONET (POS) media are commonly used for edge uplinks and
   high-bandwidth core links.  POS may use one of various encapsulations
   techniques (such as PPP, High-Level Data Link Control (HDLC), Frame
   Relay, etc.), resulting in the Layer 2 header (~4 octets) being less
   than that of the Ethernet media.  The rest of the frame format
   (illustrated in Figures 2 and 3) remains pretty much unchanged.

   If the MPLS forwarding characterization of POS interfaces on the DUT
   is desired, then the following frame sizes SHOULD be used:

      Label Push test cases:          47, 64, 128, 256, 512, 1024,
                                      1280, 1518, 2048, and 4096 octets.

      Label Swap and Pop test cases:  51, 68, 132, 260, 516, 1028,
                                      1284, 1522, 2052, and 4100 octets.





<span class="grey">Akhter, et al.               Informational                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.6.%20%20Time-to-Live%20%28TTL%29%20or%20Hop%20Limit"></a><a class="selflink" href="#section-4.1.6" name="section-4.1.6">4.1.6</a>.  Time-to-Live (TTL) or Hop Limit</span>

   The TTL value in the frame header MUST be large enough to allow a TTL
   decrement to happen and still be forwarded through the DUT.  The
   aforementioned TTL field may be referring to either the MPLS TTL,
   IPv4 TTL, or IPv6 Hop Limit depending on the exact forwarding
   scenario under evaluation.

   If TTL/Hop Limit decrement, as specified in [<a href="rfc3443.html" title='"Time To Live (TTL) Processing in Multi-Protocol Label Switching (MPLS) Networks"'>RFC3443</a>], is a
   configurable option on the DUT, the setting SHOULD be reported.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.7.%20%20Trial%20Duration"></a><a class="selflink" href="#section-4.1.7" name="section-4.1.7">4.1.7</a>.  Trial Duration</span>

   Unless otherwise specified, the test portion of each trial SHOULD be
   no less than 30 seconds when static routing is in place, and no less
   than 200 seconds when a dynamic routing protocol and LDP (default LDP
   holddown timer is 180 seconds) are being used.  If the holddown timer
   default value is changed, then it should be reported and the trial
   duration should still be 20 seconds more than the holddown timer
   value.

   The longer trial time used for dynamic routing protocols is to verify
   that the DUT is able to maintain a stable control plane when the
   data-forwarding plane is under stress.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.8.%20%20Traffic%20Verification"></a><a class="selflink" href="#section-4.1.8" name="section-4.1.8">4.1.8</a>.  Traffic Verification</span>

   In all cases, sent traffic MUST be accounted for, whether it was
   received on the wrong port, the correct port, or not received at all.
   Specifically, traffic loss (also referred to as frame loss) is
   defined as the traffic (i.e., one or more frames) not received where
   expected (i.e., received on the incorrect port, or received with
   incorrect Layer 2 or above header information, etc.).  In addition,
   the presence or absence of the MPLS label stack, every field value
   inside the label stack, if present, ethertype (0x8847 or 0x8848
   versus 0x0800 or 0x86DD), frame sequencing, and frame check sequence
   (FCS) MUST be verified in the received frame.

   Many test tools may, by default, only verify that they have received
   the embedded signature on the receive side.  However, for MPLS header
   presence verification, some tests will require the MPLS header to be
   pushed while others will require a swap or pop.  Hence, this document
   requires the test tool to verify the MPLS stack depth.  An even
   greater level of verification would be to check if the correct label
   was pushed.  However, some test tools are not capable of checking the
   received label value for correctness.  Test tools SHOULD verify that
   the packets received carry the expected MPLS label.




<span class="grey">Akhter, et al.               Informational                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/4.1.9.%20%20Address%20Resolution%20and%20Dynamic%20Protocol%20State"></a><a class="selflink" href="#section-4.1.9" name="section-4.1.9">4.1.9</a>.  Address Resolution and Dynamic Protocol State</span>

   If a test setup utilizes any dynamic protocols for control plane
   signaling (e.g., ARP, PPP (including MPLSCP), OSPF, LDP, etc.), then
   all state for the protocols MUST be pre-established before the test
   case is executed (i.e., packet streams are started).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Reporting%20Format"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Reporting Format</span>

   For each test case, it is RECOMMENDED that the following variables be
   reported in addition to the specific parameters requested by the test
   case:

      Parameter                        Units or Examples

      Prefix Forwarding Equivalence    IPv4, IPv6, Both
      Class (FEC)

      Label Distribution Protocol      LDP, RSVP-TE, BGP (or
                                       combinations)

      MPLS Forwarding Operation        Push, Swap, Pop

      IGP                              ISIS, OSPF, EIGRP, RIP,
                                       static.

      Throughput                       Frames per second and
                                       bits per second

      Port Media                       GigE (Gigabit Ethernet),
                                       POS, ATM, etc.

      Port Speed                       1 gbps, 100 Mbps, etc.

      Interface Encapsulation          Ethernet, Ethernet
                                       VLAN, PPP, HDLC, etc.

      Frame Size (<a href="#section-4.1.5">Section 4.1.5</a>)       Octets

      p (Number of {DA, DB} pair       1,2, etc.
      ports per Figure 1)

   The individual test cases may have additional reporting requirements
   that may refer to other RFCs.







<span class="grey">Akhter, et al.               Informational                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20MPLS%20Forwarding%20Benchmarking%20Tests"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  MPLS Forwarding Benchmarking Tests</span>

   MPLS is a different forwarding paradigm from IP.  Unlike IP packets
   and IP forwarding, an MPLS packet may contain more than one MPLS
   header and may go through one of three forwarding operations: push
   (or LSP Ingress), swap, or pop (or LSP Egress), as defined in
   [<a href="rfc3031.html" title='"Multiprotocol Label Switching Architecture"'>RFC3031</a>].  Such characteristics desire further granularity in MPLS
   forwarding benchmarking than those described in <a href="rfc2544.html">RFC 2544</a>.  Thus, the
   benchmarking may include, but is not limited to:

      1. Throughput

      2. Latency

      3. Frame-Loss Rate

      4. System Recovery

      5. Reset

      6. MPLS TC (previously known as EXP [<a href="rfc5462.html" title='"Multiprotocol Label Switching (MPLS) Label Stack Entry: "'>RFC5462</a>]) field Operations
         (including explicit-null cases)

      7. Negative Scenarios (TTL expiry, etc.)

      8. Multicast

   However, this document focuses only on the first five categories,
   inline with the spirit of <a href="rfc2544.html">RFC 2544</a>.  All the benchmarking test cases
   described in this document are expected to, at a minimum, follow the
   "Test Setup" and "Test Procedure" below:

   Test Setup

      Referring to Figure 1, a single port (p = 1) on both A and B
      Modules SHOULD be used.  However, if the forwarding throughput of
      the DUT is more than that of the media rate of a single port, then
      additional ports on A and B Modules MUST be enabled as follows: if
      the DUT can be configured with the A and B ports so as to exceed
      the DUT's forwarding throughput without overloading any B ports,
      then those MUST be enabled; if, on the other hand, the DUT's
      forwarding throughput capacity is greater than what can be
      achieved enabling all ports, then all An and Bn ports MUST be
      enabled.  In the case where more than one A and B port is enabled,
      the procedures described in <a href="rfc2544.html#section-16">Section 16 of RFC 2544</a> must be






<span class="grey">Akhter, et al.               Informational                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


      followed to accommodate the multi-port scenario.  The frame
      formats transmitted and received must be in accord with Sections
      4.1.4.3 and 4.1.4.4, and frame sizes must be in accord with
      <a href="#section-4.1.5">Section 4.1.5</a>.

      Note: The test tool must be configured not to advertise a prefix
      or FEC to the DUT on more than one port.  In other words, the DUT
      must associate a FEC with one and only one DB port.  The Equal
      Cost Multi-Path (ECMP) behavior in MPLS networks uses heuristics
      [<a href="rfc4928.html" title='"Avoiding Equal Cost Multipath Treatment in MPLS Networks"'>RFC4928</a>]; hence, the usage of ECMP is NOT permitted by this
      document to ensure the deterministic forwarding behavior during
      benchmarking.

   Test Procedure

      In accord with <a href="rfc2544.html#section-26">Section 26 of RFC 2544</a> [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>], the traffic is
      sent from test tool port(s) Ap to the DUT at a constant load for a
      fixed-time interval, and is received from the DUT on test tool
      port(s) Bp.  As described in <a href="#section-4.1.4.3">Section 4.1.4.3</a>, the frame may
      contain either an IP packet or an MPLS packet depending on the
      test case need.  Furthermore, the IP packet must be either an IPv4
      or IPv6 packet, depending on whether the MPLS benchmarking is done
      for IPv4 or IPv6.

      If any frame loss is detected, then a new iteration is needed
      where the offered load is decreased and the sender will transmit
      again.  An iterative search algorithm MUST be used to determine
      the maximum offered frame rate with a zero frame loss.

      This maximum offered frame rate that results in zero frame loss
      through the DUT is defined as the Throughput in <a href="rfc1242.html#section-3.17">Section 3.17 of
      [RFC1242]</a> for that test case.  Informally, this rate is referred
      to as the No-Drop Rate (NDR).

      Each iteration should involve varying the offered load of the
      traffic, while keeping the other parameters (test duration, number
      of ports, number of addresses, frame size, etc.) constant, until
      the maximum rate at which none of the offered frames are dropped
      is determined.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Throughput"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Throughput</span>

   This section contains the description of the tests that are related
   to the characterization of a DUT's MPLS traffic forwarding.







<span class="grey">Akhter, et al.               Informational                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.1.%20%20Throughput%20for%20MPLS%20Label%20Push"></a><a class="selflink" href="#section-6.1.1" name="section-6.1.1">6.1.1</a>.  Throughput for MPLS Label Push</span>

   Objective

      To obtain the DUT's Throughput (as per <a href="rfc2544.html">RFC 2544</a>) during label push
      or LSP Ingress forwarding operation (i.e., IP to MPLS).

   Test Setup

      In addition to the "Test Setup" described in <a href="#section-6">Section 6</a>, the test
      tool must advertise the IP prefix(es), i.e., RNx (using a routing
      protocol as per <a href="#section-4.1.2">Section 4.1.2</a>) and associated MPLS label-FEC
      binding(s) (using a label distribution protocol as per <a href="#section-4.1.3">Section</a>
      <a href="#section-4.1.3">4.1.3</a>) on its receive ports Bp to the DUT.  The test tool may
      learn the IP prefix(es) on its transmit ports Ap from the DUT.

      MPLS and/or the label distribution protocol must be enabled only
      on the test tool receive ports Bp and DUT transmit ports DBp.

   Discussion

      The DUT's MPLS forwarding table (also referred to as Incoming
      Label Map (ILM) to Next Hop Label Forwarding Entry (NHLFE) mapping
      table per <a href="rfc3031.html#section-3.11">Section 3.11 of [RFC3031]</a>) must contain a non-reserved
      MPLS label value as the outgoing label for each learned IP prefix
      corresponding to the label-FEC binding, resulting in the DUT
      performing the IP-to-MPLS forwarding operation.  The test tool
      must receive MPLS packets on receive ports Bp (from the DUT) with
      the same label values that were advertised.

   Procedure

      Please see "Test Procedure" in <a href="#section-6">Section 6</a>.  Additionally, the test
      tool MUST send the frames containing IP packets (with the IP
      destination belonging to the advertised IP prefix(es)) on transmit
      ports Ap, and expect to receive frames containing MPLS packets on
      receive ports Bp, as described in <a href="#section-4.1.4.4">Section 4.1.4.4</a>.

   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and <a href="rfc2544.html">RFC 2544</a>.

      Results for each test SHOULD be in the form of a table with a row
      for each of the tested frame sizes.  Additional columns SHOULD
      include offered load and measured throughput.






<span class="grey">Akhter, et al.               Informational                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.2.%20%20Throughput%20for%20MPLS%20Label%20Swap"></a><a class="selflink" href="#section-6.1.2" name="section-6.1.2">6.1.2</a>.  Throughput for MPLS Label Swap</span>

   Objective

      To obtain the DUT's Throughput (as per <a href="rfc2544.html">RFC 2544</a>) during label
      swapping operation (i.e., MPLS-to-MPLS).

   Test Setup

      In addition to the setup described in <a href="#section-6">Section 6</a>, the test tool
      must advertise IP prefix(es) (using a routing protocol as per
      <a href="#section-4.1.2">Section 4.1.2</a>) and associated MPLS label-FEC bindings (using a
      label distribution protocol as per <a href="#section-4.1.3">Section 4.1.3</a>) on the receive
      ports Bp, and then learn the IP prefix(es) as well as the label-
      FEC binding(s) on the transmit ports Ap.  The test tool must use
      the learned MPLS label values and learned IP prefix values in the
      frames transmitted on ports Ap to the DUT.

      MPLS and/or label distribution protocol must be enabled on the
      test tool ports Bp and Ap, and the DUT ports DBp and DAp.

   Discussion

      The DUT's MPLS forwarding table (also referred to as ILM to NHLFE
      mapping table per <a href="rfc3031.html#section-3.11">Section 3.11 of [RFC3031]</a>) must contain non-
      reserved MPLS label values as the outgoing and incoming labels for
      the learned IP prefixes, resulting in an MPLS-to-MPLS forwarding
      operation, e.g., label swap.  The test tool must receive MPLS
      packets on receive ports Bp (from the DUT) with the same label
      values that were advertised using the label distribution protocol.
      The received frames must contain the same number of MPLS headers
      as those of transmitted frames.

   Procedure

      Please see "Test Procedure" in <a href="#section-6">Section 6</a>.  Additionally, the test
      tool must send frames containing MPLS packets (with the IP
      destination belonging to the advertised IP prefix(es)) on its
      transmit ports Ap, and expect to receive frames containing MPLS
      packets on its receive ports Bp, as described in <a href="#section-4.1.4.4">Section 4.1.4.4</a>.

   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and <a href="rfc2544.html">RFC 2544</a>.

      Results for each test SHOULD be in the form of a table with a row
      for each of the tested frame sizes.




<span class="grey">Akhter, et al.               Informational                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.3.%20%20Throughput%20for%20MPLS%20Label%20Pop%20%28Unlabeled%29"></a><a class="selflink" href="#section-6.1.3" name="section-6.1.3">6.1.3</a>.  Throughput for MPLS Label Pop (Unlabeled)</span>

   Objective

      To obtain the DUT's Throughput (as per <a href="rfc2544.html">RFC 2544</a>) during label pop
      or LSP Egress forwarding operation (i.e., MPLS-to-IP) using
      "Unlabeled" outgoing label.

   Test Setup

      In addition to the setup described in <a href="#section-6">Section 6</a>, the test tool
      must advertise the IP prefix(es) (using a routing protocol as per
      <a href="#section-4.1.2">Section 4.1.2</a>) without any MPLS label-FEC bindings on the receive
      ports Bp, and then learn the IP prefix(es) as well as the FEC-
      label binding(s) on the transmit ports Ap.  The test tool must use
      the learned MPLS label values and learned IP prefix values in the
      frames transmitted on ports Ap.

      MPLS and/or label distribution protocol must be enabled only on
      the test tool port(s) Ap and DUT port(s) DAp.

   Discussion

      The DUT's MPLS forwarding table (also referred to as ILM to NHLFE
      mapping table per <a href="rfc3031.html#section-3.11">Section 3.11 of [RFC3031]</a>) must contain an
      Unlabeled outgoing label (also known as untagged) for the learned
      IP prefix, resulting in an MPLS-to-IP forwarding operation.

   Procedure

      Please see "Test Procedure" in <a href="#section-6">Section 6</a>.  Additionally, the test
      tool must send frames containing MPLS packets on its transmit
      ports Ap (with the IP destination belonging to the IP prefix(es)
      advertised on port Bp), and expect to receive frames containing IP
      packets on its receive ports Bp, as described in <a href="#section-4.1.4.4">Section 4.1.4.4</a>.

   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and <a href="rfc2544.html">RFC 2544</a>.

      Results for each test SHOULD be in the form of a table with a row
      for each of the tested frame sizes.









<span class="grey">Akhter, et al.               Informational                     [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.4.%20%20Throughput%20for%20MPLS%20Label%20Pop%20%28Aggregate%29"></a><a class="selflink" href="#section-6.1.4" name="section-6.1.4">6.1.4</a>.  Throughput for MPLS Label Pop (Aggregate)</span>

   Objective

      To obtain the DUT's Throughput (as per <a href="rfc2544.html">RFC 2544</a>) during label pop
      or LSP Egress forwarding operation (i.e., MPLS-to-IP) using the
      "Aggregate" outgoing label [<a href="rfc3031.html" title='"Multiprotocol Label Switching Architecture"'>RFC3031</a>].

   Test Setup

      In addition to the setup described in <a href="#section-6">Section 6</a>, the DUT must be
      provisioned such that it allocates an aggregate outgoing label
      (please see <a href="rfc3031.html#section-3.20">Section 3.20 in [RFC3031]</a>) to an IP prefix, which
      aggregates a set of prefixes learned on ports DBp from the test
      tool.  The prefix aggregation can be performed using BGP
      aggregation (<a href="rfc4271.html#section-9.2.2.2">Section 9.2.2.2 of [RFC4271]</a>), IGP aggregation
      (<a href="rfc2328.html#section-16.5">Section 16.5 of [RFC2328]</a>), etc.

      The DUT must advertise the aggregating IP prefix along with the
      associated MPLS label-FEC binding on ports DAp to the test tool.

      The test tool then must use the learned MPLS label values and
      learned IP prefix values in frames transmitted on ports Ap to the
      DUT.  The test tool must receive frames containing IP packets on
      ports Bp from the DUT.

      MPLS and/or label distribution protocol must be enabled only on
      the test tool port(s) Ap and DUT port(s) DAp.

   Discussion

      The DUT's MPLS forwarding table (also referred to as ILM to NHLFE
      mapping table per <a href="rfc3031.html#section-3.11">Section 3.11 of [RFC3031]</a>) must contain an
      aggregate outgoing label and IP forwarding table must contain a
      valid entry for the learned prefix(es), resulting in MPLS-to-IP
      forwarding operation (i.e., MPLS header removal followed by IP
      lookup).

   Procedure

      Please see "Test Procedure" in <a href="#section-6">Section 6</a>.  Additionally, the test
      tool must send frames containing MPLS packets on its transmit
      ports Ap (with IP destination belonging to the IP prefix(es)
      advertised on port Bp), and expect to receive frames containing IP
      packets on its receive ports Bp, as described in <a href="#section-4.1.4.4">Section 4.1.4.4</a>.






<span class="grey">Akhter, et al.               Informational                     [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and <a href="rfc2544.html">RFC 2544</a>.

      Results for each test SHOULD be in the form of a table with a row
      for each of the tested frame sizes.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.5.%20%20Throughput%20for%20MPLS%20Label%20Pop%20%28PHP%29"></a><a class="selflink" href="#section-6.1.5" name="section-6.1.5">6.1.5</a>.  Throughput for MPLS Label Pop (PHP)</span>

   Objective

      To obtain the DUT's Throughput (as per <a href="rfc2544.html">RFC 2544</a>) during label pop
      (i.e., MPLS-to-IP) or penultimate hop popping (PHP) using the
      "imp-null" outgoing label.

   Test Setup

      In addition to the setup described in <a href="#section-6">Section 6</a>, the test tool
      must be set up to advertise the IP prefix(es) (using a routing
      protocol as per <a href="#section-4.1.2">Section 4.1.2</a>) and associated MPLS label-FEC
      binding with a reserved MPLS label value = 3 (using a label
      distribution protocol as per <a href="#section-4.1.3">Section 4.1.3</a>) on its receive ports
      Bp.  The test tool must learn the IP prefix(es) as well as the
      MPLS label-FEC bindings on its transmit ports Ap.  The test tool
      then must use the learned MPLS label values and learned IP prefix
      values in the frames transmitted on ports Ap to the DUT.  The test
      tool must receive frames containing IP packets on receive ports Bp
      (from the DUT).

      MPLS and/or label distribution protocol must be enabled on the
      test tool ports Bp and Ap, and DUT ports DBp and DAp.

   Discussion

      This test case characterizes Penultimate Hop Popping (PHP), which
      is described in <a href="rfc3031.html">RFC 3031</a>.

      The DUT's MPLS forwarding table (also referred to as ILM to NHLFE
      mapping table per <a href="rfc3031.html#section-3.11">Section 3.11 of [RFC3031]</a>) must contain a
      reserved MPLS label value = 3 (e.g., pop or imp-null) as the
      outgoing label for the learned prefix(es), resulting in MPLS-to-IP
      forwarding operation.

      This test case characterizes DUT's penultimate hop popping (PHP)
      functionality.






<span class="grey">Akhter, et al.               Informational                     [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   Procedure

      Please see "Test Procedure" in <a href="#section-6">Section 6</a>.  Additionally, the test
      tool must send frames containing MPLS packets on its transmit
      ports Ap (with IP destination belonging to advertised IP
      prefix(es)), and expect to receive frames containing IP packets on
      its receive ports Bp, as described in <a href="#section-4.1.4.4">Section 4.1.4.4</a>.

   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and <a href="rfc2544.html">RFC 2544</a>.

      Results for each test SHOULD be in the form of a table with a row
      for each of the tested frame sizes.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Latency%20Measurement"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Latency Measurement</span>

   Latency measurement measures the time taken by the DUT to forward the
   MPLS packet during various MPLS switching paths such as IP-to-MPLS,
   MPLS-to-MPLS, or MPLS-to-IP involving an MPLS label stack.

   Objective

      To obtain the average latency induced by the DUT during MPLS
      packet forwarding for each of five forwarding operations.

   Test Setup

      Follow the "Test Setup" guidelines established for each of the
      five MPLS forwarding operations in Sections <a href="#section-6.1.1">6.1.1</a> (for IP-to-
      MPLS), 6.1.2 (for MPLS-to-MPLS), 6.1.3 (for MPLS-to-IP Unlabeled),
      6.1.4 (for MPLS-to-IP Aggregate), and 6.1.5 (for MPLS-to-IP PHP),
      one by one.

   Procedure

      Please refer to <a href="rfc2544.html#section-26.2">Section 26.2 in RFC 2544</a> in addition to following
      the associated procedure for each MPLS forwarding operation in
      accord with the test setup described earlier:

         IP-to-MPLS forwarding      (Push)         <a href="#section-6.1.1">Section 6.1.1</a>
         MPLS-to-MPLS forwarding    (Swap)         <a href="#section-6.1.2">Section 6.1.2</a>
         MPLS-to-IP forwarding      (Pop)          <a href="#section-6.1.3">Section 6.1.3</a>
         MPLS-to-IP forwarding      (Aggregate)    <a href="#section-6.1.4">Section 6.1.4</a>
         MPLS-to-IP forwarding      (PHP)          <a href="#section-6.1.5">Section 6.1.5</a>






<span class="grey">Akhter, et al.               Informational                     [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and <a href="rfc2544.html">RFC 2544</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Frame-Loss%20Rate%20%28FLR%29%20Measurement"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Frame-Loss Rate (FLR) Measurement</span>

   Frame-Loss Rate (FLR) measurement measures the percentage of MPLS
   frames that were not forwarded during various switching paths such as
   IP-to-MPLS (push), MPLS-to-IP (swap), or MPLS-IP (pop) by the DUT
   under overloaded state.

   Please refer to <a href="rfc2544.html#section-26.3">RFC 2544, Section 26.3</a>, for more details.

   Objective

      To obtain the frame-loss rate, as defined in <a href="rfc1242.html">RFC 1242</a>, for each of
      the three MPLS forwarding operations of a DUT, throughout the
      range of input data rates and frame sizes.

   Test Setup

      Follow the "Test Setup" guidelines established for each of the
      five MPLS forwarding operations in Sections <a href="#section-6.1.1">6.1.1</a> (for IP-to-
      MPLS), 6.1.2 (for MPLS-to-MPLS), 6.1.3 (for MPLS-to-IP Unlabeled),
      6.1.4 (for MPLS-to-IP Aggregate), and 6.1.5 (for MPLS-to-IP PHP),
      one by one.

   Procedure

      Please refer to <a href="rfc2544.html#section-26.3">Section 26.3 of RFC 2544</a> [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>] and follow the
      associated procedure for each MPLS forwarding operation one-by-one
      in accord with the test setup described earlier:

         IP-to-MPLS forwarding      (Push)         <a href="#section-6.1.1">Section 6.1.1</a>
         MPLS-to-MPLS forwarding    (Swap)         <a href="#section-6.1.2">Section 6.1.2</a>
         MPLS-to-IP forwarding      (Pop)          <a href="#section-6.1.3">Section 6.1.3</a>
         MPLS-to-IP forwarding      (Aggregate)    <a href="#section-6.1.4">Section 6.1.4</a>
         MPLS-to-IP forwarding      (PHP)          <a href="#section-6.1.5">Section 6.1.5</a>

      A misdirected frame, that is, a frame received on the wrong Bn, is
      considered lost.  If the test tool is capable of checking received
      MPLS label values, a frame with the wrong MPLS label is considered
      lost.

   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and <a href="rfc2544.html">RFC 2544</a>.




<span class="grey">Akhter, et al.               Informational                     [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4.%20%20System%20Recovery"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a>.  System Recovery</span>

   Objective

      To characterize the speed at which a DUT recovers from an overload
      condition.

   Test Setup

      Follow the "Test Setup" guidelines established for each of the
      five MPLS forwarding operations in Sections <a href="#section-6.1.1">6.1.1</a> (for IP-to-
      MPLS), 6.1.2 (for MPLS-to-MPLS), 6.1.3 (for MPLS-to-IP Unlabeled),
      6.1.4 (for MPLS-to-IP Aggregate), and 6.1.5 (for MPLS-to-IP PHP),
      one by one.

   Procedure

      Please refer to <a href="rfc2544.html#section-26.5">Section 26.5 of RFC 2544</a> and follow the associated
      procedure for each MPLS forwarding operation in the referenced
      sections one-by-one in accord with the test setup described
      earlier:

         IP-to-MPLS forwarding      (Push)         <a href="#section-6.1.1">Section 6.1.1</a>
         MPLS-to-MPLS forwarding    (Swap)         <a href="#section-6.1.2">Section 6.1.2</a>
         MPLS-to-IP forwarding      (Pop)          <a href="#section-6.1.3">Section 6.1.3</a>
         MPLS-to-IP forwarding      (Aggregate)    <a href="#section-6.1.4">Section 6.1.4</a>
         MPLS-to-IP forwarding      (PHP)          <a href="#section-6.1.5">Section 6.1.5</a>

   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and <a href="rfc2544.html">RFC 2544</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.5.%20%20Reset"></a><a class="selflink" href="#section-6.5" name="section-6.5">6.5</a>.  Reset</span>

   The "reset" aspects of benchmarking are described in [<a href="rfc2544.html" title='"Benchmarking Methodology for Network Interconnect Devices"'>RFC2544</a>], but
   these procedures need to be clarified in order to ensure consistency.
   This document does not specify the reset procedures.  These need to
   be addressed in a separate document and will more generally apply to
   IP and MPLS test cases.

   The text below describes the MPLS forwarding benchmarking-specific
   setup that will have to be used in conjunction with the procedures
   from the separate document to make this test case meaningful.

   Objective

      To characterize the speed at which a DUT recovers from a device or
      software reset.



<span class="grey">Akhter, et al.               Informational                     [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   Test Setup

      Follow the "Test Setup" guidelines established for each of the
      five MPLS forwarding operations in Sections <a href="#section-6.1.1">6.1.1</a> (for IP-to-
      MPLS), 6.1.2 (for MPLS-to-MPLS), 6.1.3 (for MPLS-to-IP Unlabeled),
      6.1.4 (for MPLS-to-IP Aggregate), and 6.1.5 (for MPLS-to-IP PHP),
      one by one.

      For this test case, the requirements of LDP and a routing protocol
      are removed and replaced by static configurations.  For the IP-to-
      MPLS forwarding, static route configurations should be applied.
      For the MPLS-to-MPLS and MPLS-to-IP, static label configurations
      must be applied.

      For this test, all Graceful Restart features MUST be disabled.

   Discussion

      This test case is intended to provide insight into how long an
      MPLS device could take to be fully operational after any of the
      reset events.  It is quite likely that the time an IP/MPLS device
      takes to become fully operational after any of the reset events
      may be different from that of an IP-only device.

      Modern devices now have many more reset options that were not
      available when <a href="rfc2544.html#section-26.6">Section 26.6 of RFC 2544</a> was published.  Moreover,
      different reset events on modern devices may produce different
      results, hence, needing clarity and consistency in reset
      procedures beyond what's specified in <a href="rfc2544.html">RFC 2544</a>.

   Procedure

      Please follow the procedure from the separate document for each
      MPLS forwarding operation one-by-one:

         IP-to-MPLS forwarding      (Push)         <a href="#section-6.1.1">Section 6.1.1</a>
         MPLS-to-MPLS forwarding    (Swap)         <a href="#section-6.1.2">Section 6.1.2</a>
         MPLS-to-IP forwarding      (Pop)          <a href="#section-6.1.3">Section 6.1.3</a>
         MPLS-to-IP forwarding      (Aggregate)    <a href="#section-6.1.4">Section 6.1.4</a>
         MPLS-to-IP forwarding      (PHP)          <a href="#section-6.1.5">Section 6.1.5</a>

   Reporting Format

      The result should be reported as per <a href="#section-5">Section 5</a> and as per the
      separate document.






<span class="grey">Akhter, et al.               Informational                     [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   Benchmarking activities, as described in this memo, are limited to
   technology characterization using controlled stimuli in a laboratory
   environment, with dedicated address space and the constraints
   specified in the sections above.

   The benchmarking network topology will be an independent test setup
   and MUST NOT be connected to devices that may forward the test
   traffic into a production network or misroute traffic to the test
   management network.

   Furthermore, benchmarking is performed on a "black-box" basis,
   relying solely on measurements observable external to the DUT/SUT
   (System Under Test).

   Special capabilities SHOULD NOT exist in the DUT/SUT specifically for
   benchmarking purposes.  Any implications for network security arising
   from the DUT/SUT SHOULD be identical in the lab and in production
   networks.

   There are no specific security considerations within the scope of
   this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Acknowledgement"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Acknowledgement</span>

   The authors would like to thank Mo Khalid, who motivated us to write
   this document.  We would like to thank Rodney Dunn, Chip Popoviciu,
   Jeff Byzek, Jay Karthik, Rajiv Papneja, Samir Vapiwala, Silvija
   Andrijic Dry, Scott Bradner, Al Morton, and Bill Cerveny for their
   careful review and suggestions.

   This document was originally prepared using 2-Word-v2.0.template.dot.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Normative%20References"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>] Bradner, S., "Key words for use in RFCs to Indicate
             Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2544" name="ref-RFC2544">RFC2544</a>] Bradner, S. and J. McQuaid, "Benchmarking Methodology for
             Network Interconnect Devices", <a href="rfc2544.html">RFC 2544</a>, March 1999.

   [<a id="ref-RFC1242" name="ref-RFC1242">RFC1242</a>] Bradner, S., "Benchmarking Terminology for Network
             Interconnection Devices", <a href="rfc1242.html">RFC 1242</a>, July 1991.





<span class="grey">Akhter, et al.               Informational                     [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   [<a id="ref-RFC3031" name="ref-RFC3031">RFC3031</a>] Rosen, E., Viswanathan, A., and R. Callon, "Multiprotocol
             Label Switching Architecture", <a href="rfc3031.html">RFC 3031</a>, January 2001.

   [<a id="ref-RFC3032" name="ref-RFC3032">RFC3032</a>] Rosen, E., Tappan, D., Fedorkow, G., Rekhter, Y.,
             Farinacci, D., Li, T., and A. Conta, "MPLS Label Stack
             Encoding", <a href="rfc3032.html">RFC 3032</a>, January 2001.

   [<a id="ref-RFC3107" name="ref-RFC3107">RFC3107</a>] Rekhter, Y. and E. Rosen, "Carrying Label Information in
             BGP-4", <a href="rfc3107.html">RFC 3107</a>, May 2001.

   [<a id="ref-RFC5036" name="ref-RFC5036">RFC5036</a>] Andersson, L., Ed., Minei, I., Ed., and B. Thomas, Ed.,
             "LDP Specification", <a href="rfc5036.html">RFC 5036</a>, October 2007.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20Informative%20References"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-RFC5180" name="ref-RFC5180">RFC5180</a>] Popoviciu, C., Hamza, A., Van de Velde, G., and D.
             Dugatkin, "IPv6 Benchmarking Methodology for Network
             Interconnect Devices", <a href="rfc5180.html">RFC 5180</a>, May 2008.

   [<a id="ref-RFC3209" name="ref-RFC3209">RFC3209</a>] Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
             and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
             Tunnels", <a href="rfc3209.html">RFC 3209</a>, December 2001.

   [<a id="ref-RFC4364" name="ref-RFC4364">RFC4364</a>] Rosen, E. and Y. Rekhter, "BGP/MPLS IP Virtual Private
             Networks (VPNs)", <a href="rfc4364.html">RFC 4364</a>, February 2006.

   [<a id="ref-RFC4271" name="ref-RFC4271">RFC4271</a>] Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., "A Border
             Gateway Protocol 4 (BGP-4)", <a href="rfc4271.html">RFC 4271</a>, January 2006.

   [<a id="ref-RFC4664" name="ref-RFC4664">RFC4664</a>] Andersson, L., Ed., and E. Rosen, Ed., "Framework for Layer
             2 Virtual Private Networks (L2VPNs)", <a href="rfc4664.html">RFC 4664</a>, September
             2006.

   [<a id="ref-IEE8021" name="ref-IEE8021">IEE8021</a>] Mick Seaman (editor), "IEEE Std 802.1D-2004, MAC Bridges",
             Feb 2004.

   [<a id="ref-IEE8023" name="ref-IEE8023">IEE8023</a>] LAN/MAN Standards Committee of the IEEE Computer Society,
             "IEEE Std 802.3as-2006, Part 3: Carrier Sense Multiple
             Access with Collision Detection (CSMA/CD) Access Method and
             Physical Layer Specifications, Amendment 3: Frame format
             extensions", Nov 2006.

   [<a id="ref-RFC3443" name="ref-RFC3443">RFC3443</a>] Agarwal, P. and B. Akyol, "Time To Live (TTL) Processing in
             Multi-Protocol Label Switching (MPLS) Networks", <a href="rfc3443.html">RFC 3443</a>,
             January 2003.






<span class="grey">Akhter, et al.               Informational                     [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc5695.html">RFC 5695</a>             MPLS Benchmarking Methodology         November 2009</span>


   [<a id="ref-RFC2328" name="ref-RFC2328">RFC2328</a>] Moy, J., "OSPF Version 2", STD 54, <a href="rfc2328.html">RFC 2328</a>, April 1998.

   [<a id="ref-RFC5462" name="ref-RFC5462">RFC5462</a>] Andersson, L. and R. Asati, "Multiprotocol Label Switching
             (MPLS) Label Stack Entry: "EXP" Field Renamed to "Traffic
             Class" Field", <a href="rfc5462.html">RFC 5462</a>, February 2009.

   [<a id="ref-RFC4928" name="ref-RFC4928">RFC4928</a>] Swallow, G., Bryant, S., and L. Andersson, "Avoiding Equal
             Cost Multipath Treatment in MPLS Networks", <a href="https://tools.ietf.org/html/bcp128">BCP 128</a>, <a href="rfc4928.html">RFC</a>
             <a href="rfc4928.html">4928</a>, June 2007.

   [<a id="ref-RFC4090" name="ref-RFC4090">RFC4090</a>] Pan, P., Ed., Swallow, G., Ed., and A. Atlas, Ed., "Fast
             Reroute Extensions to RSVP-TE for LSP Tunnels", <a href="rfc4090.html">RFC 4090</a>,
             May 2005.

Authors' Addresses

   Aamer Akhter
   Cisco Systems
   7025 Kit Creek Road
   RTP, NC 27709
   USA

   EMail: aakhter@cisco.com


   Rajiv Asati
   Cisco Systems
   7025 Kit Creek Road
   RTP, NC 27709
   USA

   EMail: rajiva@cisco.com


   Carlos Pignataro
   Cisco Systems
   7200-12 Kit Creek Road
   RTP, NC 27709
   USA

   EMail: cpignata@cisco.com










Akhter, et al.               Informational                     [Page 27]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.127, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc5695 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 14 Aug 2018 14:27:32 GMT --></html>