<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3894 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:45 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:3894" name="DC.Identifier"/>
<meta content="The Sieve scripting language allows users to control handling and
disposal of their incoming e-mail. By default, an e-mail message that
is processed by a Sieve script is saved in the owner's &quot;inbox&quot;.
Actions such as &quot;fileinto&quot; and &quot;redirect&quot; cancel this default
behavior.  This document defines a new keyword parameter, &quot;:copy&quot;, to
be used with the Sieve &quot;fileinto&quot; and &quot;redirect&quot; actions. Adding
&quot;:copy&quot; to an action suppresses cancellation of the default &quot;inbox&quot;
save. It allows users to add commands to an existing script without
changing the meaning of the rest of the script. [STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Jutta Degener &lt;jutta@sendmail.com&gt;" name="DC.Creator"/>
<meta content="October, 2004" name="DC.Date.Issued"/>
<meta content="Sieve Extension: Copying Without Side Effects" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3894 - Sieve Extension: Copying Without Side Effects</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc3894.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc3894" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-degener-sieve-copy" title="draft-degener-sieve-copy">draft-degener-s...</a>] [<a href="https://datatracker.ietf.org/doc/rfc3894" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3894" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc3894" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                         J. Degener
Request for Comments: 3894                                Sendmail, Inc.
Category: Standards Track                                   October 2004


             <span class="h1">Sieve Extension: Copying Without Side Effects</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2004).

Abstract

   The Sieve scripting language allows users to control handling and
   disposal of their incoming e-mail.  By default, an e-mail message
   that is processed by a Sieve script is saved in the owner's "inbox".
   Actions such as "fileinto" and "redirect" cancel this default
   behavior.

   This document defines a new keyword parameter, ":copy", to be used
   with the Sieve "fileinto" and "redirect" actions.  Adding ":copy" to
   an action suppresses cancellation of the default "inbox" save.  It
   allows users to add commands to an existing script without changing
   the meaning of the rest of the script.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The Sieve scripting language [<a href="#ref-SIEVE" title='"Sieve: A Mail Filtering Language"'>SIEVE</a>] allows users to control handling
   and disposal of their incoming e-mail.  Two frequently used Sieve
   commands are "fileinto" (saving into a local message store, such as
   an IMAP server) and "redirect" (forwarding to another e-mail
   address).  Both of these cancel the Sieve default behavior of saving
   into the user's "inbox".

   But some users have the notion of forwarding an extra copy of a
   message for safekeeping to another e-mail address, or of saving a
   copy in a folder - in addition to the regular message delivery, which
   shouldn't be affected by the copy.





<span class="grey">Degener                     Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3894.html">RFC 3894</a>      Sieve Extension - Copy Without Side Effects   October 2004</span>


   If saving an extra copy is all the user wanted to do,

      fileinto "unfiltered";
      keep;

   would do the job.  The "keep" command does explicitly what the
   cancelled default behavior did.  But the explicit "keep" is a poor
   substitute for the implicit "keep" when more processing follows:

      fileinto "unfiltered";
      keep;

      if header "Subject" "MAKE MONEY FAST!!!"
      {
              discard;
      }

   In this example, the "discard" is ineffective against the explicit
   "keep"; the discarded message still ends up in the user's inbox.

   It is possible to generate Sieve code that perfectly expresses a
   user's wishes, but such code quickly grows unwieldy because it needs
   to keep track of the state that the implicit "keep" would have had
   without the "fileinto" or "redirect" command.

   This extension tries to make life easier for user interface designers
   and script writers by allowing them to express the "copy" semantics
   directly.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Conventions%20used"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Conventions used</span>

   Conventions for notations are as in [<a href="#ref-SIEVE" title='"Sieve: A Mail Filtering Language"'>SIEVE</a>] <a href="#section-1.1">section 1.1</a>, including
   use of [<a href="#ref-KEYWORDS" title='"Key words for use in RFCs to Indicate Requirement Levels"'>KEYWORDS</a>] and "Syntax:" label for the definition of action
   and tagged arguments syntax.

   The capability string associated with extension defined in this
   document is "copy".

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20%22%3Acopy%22%20extension%20to%20the%20%22fileinto%22%20and%20%22redirect%22%20commands"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  ":copy" extension to the "fileinto" and "redirect" commands</span>

   Syntax:
        "fileinto" [":copy"] &lt;folder: string&gt;
        "redirect" [":copy"] &lt;address: string&gt;

   If the optional ":copy" keyword is specified with "fileinto" or
   "redirect", the tagged command does not cancel the implicit "keep".
   Instead, it merely files or redirects a copy in addition to whatever
   else is happening to the message.



<span class="grey">Degener                     Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3894.html">RFC 3894</a>      Sieve Extension - Copy Without Side Effects   October 2004</span>


   Example:

      require ["copy", "fileinto"];
      fileinto :copy "incoming";

      # ... more processing follows ...

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Security%20Considerations"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Security Considerations</span>

   The "copy" extension makes it easier to eavesdrop on a user's message
   stream without the user noticing.  This was technically possible
   before if an attacker gained read/write access to a user's Sieve
   scripts, but now an attacker no longer needs to parse a script in
   order to modify it.  Write access to Sieve scripts must be protected
   as strongly as read/write access to e-mail, for example by using
   secure directory protocols such as correctly parameterized LDAP over
   TLS [<a href="#ref-LDAP" title='"Authentication Methods for LDAP"'>LDAP</a>].

   Organizations that wish to monitor their users' e-mail traffic must
   familiarize themselves with local data protection laws before
   creating stores of old e-mail traffic without control, or perhaps
   even knowledge, of the sender or intended recipients.

   Organizations that legally use "redirect :copy" to eavesdrop on
   correspondence (for example, by keeping a log to answer questions
   about insider trading at a later time) can avoid future problems by
   setting users' privacy expectations correctly.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  IANA Considerations</span>

   The following template specifies the IANA registration of the "copy"
   Sieve extension specified in this document.

   To: iana@iana.org
   Subject: Registration of new Sieve extension

   Capability name: copy
   Capability keyword: copy
   Capability arguments: N/A
   Standards Track: <a href="rfc3894.html">RFC 3894</a>
   Person and email address to contact for further information:

      Jutta Degener
      Sendmail, Inc.
      6425 Christie Ave, 4th Floor
      Emeryville, CA 94608

      Email: jutta@sendmail.com



<span class="grey">Degener                     Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3894.html">RFC 3894</a>      Sieve Extension - Copy Without Side Effects   October 2004</span>


   This information has been added to the list of Sieve extensions given
   on <a href="http://www.iana.org/assignments/sieve-extensions">http://www.iana.org/assignments/sieve-extensions</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Acknowledgments"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Acknowledgments</span>

   Thanks to Eric Allman, Ned Freed, Will Lee, Nigel Swinson, and Rand
   Wacker for corrections and comments.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20References"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20Normative%20References"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-KEYWORDS" name="ref-KEYWORDS">KEYWORDS</a>] Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-SIEVE" name="ref-SIEVE">SIEVE</a>]    Showalter, T., "Sieve: A Mail Filtering Language", <a href="rfc3028.html">RFC</a>
              <a href="rfc3028.html">3028</a>, January 2001.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Informative%20References"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-LDAP" name="ref-LDAP">LDAP</a>]     Wahl, M., Alvestrand, H., Hodges, J., and R. Morgan,
              "Authentication Methods for LDAP", <a href="rfc2829.html">RFC 2829</a>, May 2000.

Author's Address

   Jutta Degener
   Sendmail, Inc.
   6425 Christie Ave, 4th Floor
   Emeryville, CA 94608

   EMail: jutta@sendmail.com




















<span class="grey">Degener                     Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3894.html">RFC 3894</a>      Sieve Extension - Copy Without Side Effects   October 2004</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2004).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/S HE
   REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE
   INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the IETF's procedures with respect to rights in IETF Documents can
   be found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Degener                     Standards Track                     [Page 5]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc3894 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:45 GMT --></html>