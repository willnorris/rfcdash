<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc7621 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 23 Aug 2016 18:34:46 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.119" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-roach-sipcore-6665-clarification" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:7621" name="DC.Identifier"/>
<meta content="August, 2015" name="DC.Date.Issued"/>
<meta content="A.B. Roach" name="DC.Creator"/>
<meta content="Experience since the publication of the most recent SIP Events
framework (in July 2012) has shown that there is room for
interpretation around the use of Globally Routable User Agent URIs in
that specification. This document clarifies the intended behavior.
This document updates RFC 6665." name="DC.Description.Abstract"/>
<meta content="A Clarification on the Use of Globally Routable User Agent URIs (GRUUs) in the SIP Event Notification Framework" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 7621 - A Clarification on the Use of Globally Routable User Agent URIs (GRUUs) in the SIP Event Notification Framework</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc7621.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc7621" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-sipcore-6665-clarification" title="draft-ietf-sipcore-6665-clarification">draft-ietf-sipcor...</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc7621" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc7621" title="Side-by-side diff">Diff2</a>]                 </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                        A.B. Roach
Request for Comments: 7621                                       Mozilla
Updates: <a href="rfc6665.html">6665</a>                                                August 2015
Category: Standards Track
ISSN: 2070-1721


A Clarification on the Use of Globally Routable User Agent URIs (GRUUs)
                in the SIP Event Notification Framework

Abstract

   Experience since the publication of the most recent SIP Events
   framework (in July 2012) has shown that there is room for
   interpretation around the use of Globally Routable User Agent URIs in
   that specification.  This document clarifies the intended behavior.

   This document updates <a href="rfc6665.html">RFC 6665</a>.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7621">http://www.rfc-editor.org/info/rfc7621</a>.

Copyright Notice

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




<span class="grey">Roach                        Standards Track                    [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc7621.html">RFC 7621</a>              SIP Events GRUU Clarification          August 2015</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Clarification of GRUU Handling  . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-3">3</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-4">4</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-5">5</a>.  Normative References  . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document is intended to clarify a point of implementor confusion
   arising from lack of clarity in [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Clarification%20of%20GRUU%20Handling"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Clarification of GRUU Handling</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   <a href="rfc6665.html#section-4.5.1">Section 4.5.1 of [RFC6665]</a> contains the following normative
   requirement on implementations:

      Notifiers MUST implement the Globally Routable User Agent URI
      (GRUU) extension defined in [<a href="rfc5627.html" title='"Obtaining and Using Globally Routable User Agent URIs (GRUUs) in the Session Initiation Protocol (SIP)"'>RFC5627</a>], and MUST use a GRUU as
      their local target.  This allows subscribers to explicitly target
      desired devices.

   The second sentence of this paragraph attempted to set context for
   the normative statement: the reason GRUUs are required in this
   context is to allow you to send SUBSCRIBE or REFER requests to a
   specific user agent, with the target of the subscription request
   being something like an INVITE dialog on that device.  Consequently,
   the requirement to include a GRUU as a local target was intended to
   apply not just to the local target for SUBSCRIBE-created dialogs, but
   to *all* dialogs, even those created by INVITE.  This requirement has
   been interpreted in a variety of ways by implementors, so a
   clarification is in order.

   Discussion subsequent to the publication of [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>] has highlighted
   obscure cases in which implementations might be notifiers in some
   contexts, but may not wish to act as notifiers in others.  Under
   these narrow circumstances, the restriction described above is not
   necessary for dialogs about which the notifier will never accept
   subscriptions (although the use of GRUUs in such a context causes no
   harm, either).





<span class="grey">Roach                        Standards Track                    [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc7621.html">RFC 7621</a>              SIP Events GRUU Clarification          August 2015</span>


   This document updates [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>] to clarify the actual requirements.
   The replacement text is as follows:

      Notifiers MUST implement the Globally Routable User Agent URI
      (GRUU) extension defined in [<a href="rfc5627.html" title='"Obtaining and Using Globally Routable User Agent URIs (GRUUs) in the Session Initiation Protocol (SIP)"'>RFC5627</a>].  Notifiers MUST use a GRUU
      as their local target for all dialog-forming methods and all
      target-refresh methods, except for those dialogs for which they
      will reject all subscription requests (implicit or explicit).  For
      clarity: an implementation that uses a non-GRUU local contact
      under the exception described above MUST reject a request that
      might create a subscription to the associated dialog, regardless
      of whether such subscription would be created by a SUBSCRIBE or a
      REFER message.  The rejection code under such conditions SHOULD be
      403 (Forbidden) unless some other code is more appropriate to the
      circumstances.  The foregoing requirements to implement and use
      GRUUs specifically include dialogs created by the INVITE method.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Security%20Considerations"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Security Considerations</span>

   This mechanism does not introduce any security issues beyond those
   discussed in [<a href="rfc6665.html" title='"SIP-Specific Event Notification"'>RFC6665</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  IANA Considerations</span>

   This document requests no actions of IANA.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Normative%20References"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Normative References</span>

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC5627" name="ref-RFC5627">RFC5627</a>]  Rosenberg, J., "Obtaining and Using Globally Routable User
              Agent URIs (GRUUs) in the Session Initiation Protocol
              (SIP)", <a href="rfc5627.html">RFC 5627</a>, DOI 10.17487/RFC5627, October 2009,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5627">http://www.rfc-editor.org/info/rfc5627</a>&gt;.

   [<a id="ref-RFC6665" name="ref-RFC6665">RFC6665</a>]  Roach, A.B., "SIP-Specific Event Notification", <a href="rfc6665.html">RFC 6665</a>,
              DOI 10.17487/RFC6665, July 2012,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6665">http://www.rfc-editor.org/info/rfc6665</a>&gt;.










<span class="grey">Roach                        Standards Track                    [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc7621.html">RFC 7621</a>              SIP Events GRUU Clarification          August 2015</span>


Author's Address

   Adam Roach
   Mozilla
   Dallas, TX
   United States

   Phone: +1 650 903 0800 x863
   Email: adam@nostrum.com










































Roach                        Standards Track                    [Page 4]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.119, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc7621 by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 23 Aug 2016 18:34:46 GMT --></html>