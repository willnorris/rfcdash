<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc3956 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:44 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:3956" name="DC.Identifier"/>
<meta content="This memo defines an address allocation policy in which the address of
the Rendezvous Point (RP) is encoded in an IPv6 multicast group
address. For Protocol Independent Multicast - Sparse Mode (PIM-SM),
this can be seen as a specification of a group-to-RP mapping
mechanism. This allows an easy deployment of scalable inter-domain
multicast and simplifies the intra-domain multicast configuration as
well. This memo updates the addressing format presented in RFC 3306.
[STANDARDS-TRACK]" name="DC.Description.Abstract"/>
<meta content="Savola, Pekka" name="DC.Creator"/>
<meta content="Haberman, Brian" name="DC.Creator"/>
<meta content="November, 2004" name="DC.Date.Issued"/>
<meta content="Embedding the Rendezvous Point (RP) Address in an IPv6 Multicast Address" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 3956 - Embedding the Rendezvous Point (RP) Address in an IPv6 Multicast Address</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc3956.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc3956" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-mboned-embeddedrp" title="draft-ietf-mboned-embeddedrp">draft-ietf-mbon...</a>] [<a href="https://datatracker.ietf.org/doc/rfc3956" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc3956" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc3956" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">Updated by: <a href="rfc7371.html">7371</a>                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                          P. Savola
Request for Comments: 3956                                     CSC/FUNET
Updates: <a href="rfc3306.html">3306</a>                                                B. Haberman
Category: Standards Track                                        JHU APL
                                                           November 2004


              <span class="h1">Embedding the Rendezvous Point (RP) Address</span>
                      <span class="h1">in an IPv6 Multicast Address</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2004).

Abstract

   This memo defines an address allocation policy in which the address
   of the Rendezvous Point (RP) is encoded in an IPv6 multicast group
   address.  For Protocol Independent Multicast - Sparse Mode (PIM-SM),
   this can be seen as a specification of a group-to-RP mapping
   mechanism.  This allows an easy deployment of scalable inter-domain
   multicast and simplifies the intra-domain multicast configuration as
   well.  This memo updates the addressing format presented in <a href="rfc3306.html">RFC 3306</a>.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  ...............................................   <a href="#page-2">2</a>
       <a href="#section-1.1">1.1</a>.  Background ............................................   <a href="#page-2">2</a>
       <a href="#section-1.2">1.2</a>.  Solution  .............................................   <a href="#page-2">2</a>
       <a href="#section-1.3">1.3</a>.  Assumptions and Scope .................................   <a href="#page-3">3</a>
       <a href="#section-1.4">1.4</a>.  Terminology  ..........................................   <a href="#page-4">4</a>
       <a href="#section-1.5">1.5</a>.  Abbreviations  ........................................   <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Unicast-Prefix-based Address Format  ........................   <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  Modified Unicast-Prefix-based Address Format  ...............   <a href="#page-5">5</a>
   <a href="#section-4">4</a>.  Embedding the Address of the RP in the Multicast Address  ...   <a href="#page-5">5</a>
   <a href="#section-5">5</a>.  Examples  ...................................................   <a href="#page-7">7</a>
       <a href="#section-5.1">5.1</a>.  Example 1  ............................................   <a href="#page-7">7</a>
       <a href="#section-5.2">5.2</a>.  Example 2  ............................................   <a href="#page-7">7</a>
       <a href="#section-5.3">5.3</a>.  Example 3  ............................................   <a href="#page-8">8</a>
       <a href="#section-5.4">5.4</a>.  Example 4  ............................................   <a href="#page-8">8</a>



<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


   <a href="#section-6">6</a>.  Operational Considerations  .................................   <a href="#page-8">8</a>
       <a href="#section-6.1">6.1</a>.  RP Redundancy .........................................   <a href="#page-8">8</a>
       <a href="#section-6.2">6.2</a>.  RP Deployment  ........................................   <a href="#page-9">9</a>
       <a href="#section-6.3">6.3</a>.  Guidelines for Assigning IPv6 Addresses to RPs ........   <a href="#page-9">9</a>
       <a href="#section-6.4">6.4</a>.  Use as a Substitute for BSR ...........................   <a href="#page-9">9</a>
       <a href="#section-6.5">6.5</a>.  Controlling the Use of RPs ............................   <a href="#page-9">9</a>
   <a href="#section-7">7</a>.  The Embedded-RP Group-to-RP Mapping Mechanism  ..............  <a href="#page-10">10</a>
       <a href="#section-7.1">7.1</a>.  PIM-SM Group-to-RP Mapping ............................  <a href="#page-10">10</a>
       <a href="#section-7.2">7.2</a>.  Overview of the Model .................................  <a href="#page-11">11</a>
   <a href="#section-8">8</a>.  Scalability Analysis  .......................................  <a href="#page-12">12</a>
   <a href="#section-9">9</a>.  Acknowledgements  ...........................................  <a href="#page-13">13</a>
   <a href="#section-10">10</a>. Security Considerations .....................................  <a href="#page-13">13</a>
   <a href="#section-11">11</a>. References ..................................................  <a href="#page-15">15</a>
       <a href="#section-11.1">11.1</a>. Normative References ..................................  <a href="#page-15">15</a>
       <a href="#section-11.2">11.2</a>. Informative References ................................  <a href="#page-15">15</a>
   <a href="#appendix-A">A</a>.  Discussion about Design Tradeoffs ...........................  <a href="#page-16">16</a>
   Authors' Addresses ..............................................  <a href="#page-17">17</a>
   Full Copyright Statement ......................................... <a href="#page-18">18</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.1.%20%20Background"></a><a class="selflink" href="#section-1.1" name="section-1.1">1.1</a>.  Background</span>

   As has been noticed [<a href="#ref-V6MISSUES" title='"IPv6 Multicast Deployment Issues"'>V6MISSUES</a>], there exists a deployment problem
   with global, interdomain IPv6 multicast: PIM-SM [<a href="#ref-PIM-SM" title='"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"'>PIM-SM</a>] RPs have no
   way of communicating the information about (active) multicast sources
   to other multicast domains, as Multicast Source Discovery Protocol
   (MSDP) [<a href="#ref-MSDP" title='"Multicast Source Discovery Protocol (MSDP)"'>MSDP</a>] has deliberately not been specified for IPv6.
   Therefore the whole interdomain Any Source Multicast (ASM) model is
   rendered unusable; Source-Specific Multicast (SSM) [<a href="#ref-SSM" title='"Source-Specific Multicast for IP"'>SSM</a>] avoids these
   problems but is not a complete solution for several reasons, as noted
   below.

   Further, it has been noted that there are some problems with the
   support and deployment of mechanisms SSM would require [<a href="#ref-V6MISSUES" title='"IPv6 Multicast Deployment Issues"'>V6MISSUES</a>]:
   it seems unlikely that SSM could be usable as the only interdomain
   multicast routing mechanism in the short term.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.2.%20%20Solution"></a><a class="selflink" href="#section-1.2" name="section-1.2">1.2</a>.  Solution</span>

   This memo describes a multicast address allocation policy in which
   the address of the RP is encoded in the IPv6 multicast group address,
   and specifies a PIM-SM group-to-RP mapping to use the encoding,
   leveraging, and extending unicast-prefix-based addressing [<a href="rfc3306.html" title='"Unicast-Prefix-based IPv6 Multicast Addresses"'>RFC3306</a>].

   This mechanism not only provides a simple solution for IPv6
   interdomain Any Source Multicast but can be used as a simple solution
   for IPv6 intra-domain ASM with scoped multicast addresses as well.



<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


   It can also be used as an automatic RP discovery mechanism in those
   deployment scenarios that would have previously used the Bootstrap
   Router protocol (BSR) [<a href="#ref-BSR" title='"Bootstrap Router (BSR) Mechanism for PIM Sparse Mode"'>BSR</a>].

   The solution consists of three elements:

   o  A specification of a subrange of [<a href="rfc3306.html" title='"Unicast-Prefix-based IPv6 Multicast Addresses"'>RFC3306</a>] IPv6 multicast group
      addresses defined by setting one previously unused bit of the
      Flags field to "1",

   o  a specification of the mapping by which such a group address
      encodes the RP address that is to be used with this group, and

   o  a description of operational procedures to operate ASM with PIM-SM
      on these IPv6 multicast groups.

   Addresses in the subrange will be called embedded-RP addresses.

   This scheme obviates the need for MSDP, and the routers are not
   required to include any multicast configuration, except when they act
   as an RP.

   This memo updates the addressing format presented in <a href="rfc3306.html">RFC 3306</a>.

   Some design tradeoffs are discussed in <a href="#appendix-A">Appendix A</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.3.%20%20Assumptions%20and%20Scope"></a><a class="selflink" href="#section-1.3" name="section-1.3">1.3</a>.  Assumptions and Scope</span>

   A 128-bit RP address can't be embedded into a 128-bit group address
   with space left to carry the group identity itself. An appropriate
   form of encoding is thus defined by requiring that the Interface-IDs
   of RPs in the embedded-RP range can be assigned to be a specific
   value.

   If these assumptions can't be followed, operational procedures and
   configuration must be slightly changed, or this mechanism can't be
   used.

   The assignment of multicast addresses is outside the scope of this
   document; it is up to the RP and applications to ensure that group
   addresses are unique by using some unspecified method.  However, the
   mechanisms are probably similar to those used with [<a href="rfc3306.html" title='"Unicast-Prefix-based IPv6 Multicast Addresses"'>RFC3306</a>].

   Similarly, RP failure management methods, such as Anycast-RP, are out
   of scope for this document.  These do not work without additional
   specification or deployment.  This is covered briefly in <a href="#section-6.1">Section 6.1</a>.





<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.4.%20%20Terminology"></a><a class="selflink" href="#section-1.4" name="section-1.4">1.4</a>.  Terminology</span>

   Embedded-RP behaves as if all the members of the group were intra-
   domain to the information distribution. However, as it gives a
   solution for the global IPv6 multicast Internet, spanning multiple
   administrative domains, we say it is a solution for inter-domain
   multicast.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/1.5.%20%20Abbreviations"></a><a class="selflink" href="#section-1.5" name="section-1.5">1.5</a>.  Abbreviations</span>

      ASM     Any Source Multicast
      BSR     Bootstrap Router
      DR      Designated Router
      IGP     Interior Gateway Protocol
      MLD     Multicast Listener Discovery
      MSDP    Multicast Source Discovery Protocol
      PIM     Protocol Independent Multicast
      PIM-SM  Protocol Independent Multicast - Sparse Mode
      RIID    RP Interface ID (as specified in this memo)
      RP      Rendezvous Point
      RPF     Reverse Path Forwarding
      SPT     Shortest Path Tree
      SSM     Source-Specific Multicast

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Unicast-Prefix-based%20Address%20Format"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Unicast-Prefix-based Address Format</span>

   As described in [<a href="rfc3306.html" title='"Unicast-Prefix-based IPv6 Multicast Addresses"'>RFC3306</a>], the multicast address format is as
   follows:

      |   8    |  4 |  4 |   8    | 8  |       64       |    32    |
      +--------+----+----+--------+----+----------------+----------+
      |11111111|flgs|scop|reserved|plen| network prefix | group ID |
      +--------+----+----+--------+----+----------------+----------+

   Where flgs are "0011".  (The first two bits are as yet undefined,
   sent as zero and ignored on receipt.)











<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Modified%20Unicast-Prefix-based%20Address%20Format"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Modified Unicast-Prefix-based Address Format</span>

   This memo specifies a modification to the unicast-prefix-based
   address format by specifying the second high-order bit ("R-bit") as
   follows:

      |   8    |  4 |  4 |  4 |  4 | 8  |       64       |    32    |
      +--------+----+----+----+----+----+----------------+----------+
      |11111111|flgs|scop|rsvd|RIID|plen| network prefix | group ID |
      +--------+----+----+----+----+----+----------------+----------+
                                      +-+-+-+-+
      flgs is a set of four flags:    |0|R|P|T|
                                      +-+-+-+-+

   When the highest-order bit is 0, R = 1 indicates a multicast address
   that embeds the address on the RP.  Then P MUST be set to 1, and
   consequently T MUST be set to 1, as specified in [<a href="rfc3306.html" title='"Unicast-Prefix-based IPv6 Multicast Addresses"'>RFC3306</a>].  In
   effect, this implies the prefix FF70::/12.  In this case, the last 4
   bits of the previously reserved field are interpreted as embedding
   the RP interface ID, as specified in this memo.

   The behavior is unspecified if P or T is not set to 1, as then the
   prefix would not be FF70::/12.  Likewise, the encoding and the
   protocol mode used when the two high-order bits in "flgs" are set to
   11 ("FFF0::/12") is intentionally unspecified until such time that
   the highest-order bit is defined.  Without further IETF
   specification, implementations SHOULD NOT treat the FFF0::/12 range
   as Embedded-RP.

   R = 0 indicates a multicast address that does not embed the address
   of the RP and follows the semantics defined in [<a href="#ref-ADDRARCH" title='"Internet Protocol Version 6 (IPv6) Addressing Architecture"'>ADDRARCH</a>] and
   [<a href="rfc3306.html" title='"Unicast-Prefix-based IPv6 Multicast Addresses"'>RFC3306</a>].  In this context, the value of "RIID" MUST be sent as zero
   and MUST be ignored on receipt.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Embedding%20the%20Address%20of%20the%20RP%20in%20the%20Multicast%20Address"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Embedding the Address of the RP in the Multicast Address</span>

   The address of the RP can only be embedded in unicast-prefix-based
   ASM addresses.

   That is, to identify whether it is a multicast address as specified
   in this memo and to be processed any further, an address must satisfy
   all of the following:

   o It MUST be a multicast address with "flgs" set to 0111, that is, to
      be of the prefix FF70::/12,

   o  "plen" MUST NOT be 0 (i.e., not SSM), and




<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


   o  "plen" MUST NOT be greater than 64.

   The address of the RP can be obtained from a multicast address
   satisfying the above criteria by taking the following two steps:

   1. Copy the first "plen" bits of the "network prefix" to a zeroed
      128-bit address structure, and

   2. replace the last 4 bits with the contents of "RIID".

   These two steps could be illustrated as follows:

      | 20 bits | 4  | 8  |       64       |    32    |
      +---------+----+----+----------------+----------+
      |xtra bits|RIID|plen| network prefix | group ID |
      +---------+----+----+----------------+----------+
                  ||    \\  vvvvvvvvvvv
                  ||     ``====&gt; copy plen bits of "network prefix"
                  ||       +------------+--------------------------+
                  ||       | network pre| 0000000000000000000000   |
                  ||       +------------+--------------------------+
                   \\
                    ``=================&gt; copy RIID to the last 4 bits
                           +------------+---------------------+----+
                           | network pre| 0000000000000000000 |RIID|
                           +------------+---------------------+----+

   One should note that there are several operational scenarios (see
   Example 3 below) when the [<a href="rfc3306.html" title='"Unicast-Prefix-based IPv6 Multicast Addresses"'>RFC3306</a>] statement "all non-significant
   bits of the network prefix field SHOULD be zero" is ignored.  This is
   to allow multicast group address allocations to be consistent with
   unicast prefixes; the multicast addresses would still use the RP
   associated with the network prefix.

   "plen" higher than 64 MUST NOT be used, as that would overlap with
   the high-order bits of multicast group-id.

   When processing an encoding to get the RP address, the multicast
   routers MUST perform at least the same address validity checks to the
   calculated RP address as to one received via other means (like BSR
   [<a href="#ref-BSR" title='"Bootstrap Router (BSR) Mechanism for PIM Sparse Mode"'>BSR</a>] or MSDP for IPv4).  At least fe80::/10, ::/16, and ff00::/8
   MUST be excluded.  This is particularly important, as the information
   is obtained from an untrusted source, i.e., any Internet user's
   input.

   One should note that the 4 bits reserved for "RIID" set the upper
   bound for RPs for the combination of scope, network prefix, and group
   ID -- without varying any of these, one can have 2^4-1 = 15 different



<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


   RPs (as RIID=0 is reserved, see <a href="#section-6.3">section 6.3</a>).  However, each of these
   is an IPv6 group address of its own (i.e., there can be only one RP
   per multicast address).

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Examples"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Examples</span>

   Four examples of multicast address allocation and resulting group-
   to-RP mappings are described here to better illustrate the
   possibilities provided by the encoding.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Example%201"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Example 1</span>

   The network administrator of 2001:DB8::/32 wants to set up an RP for
   the network and all the customers, by placing it on an existing
   subnet, e.g., 2001:DB8:BEEF:FEED::/64.

   In that case, the group addresses would be something like
   "FF7x:y40:2001:DB8:BEEF:FEED::/96", and then their RP address would
   be "2001:DB8:BEEF:FEED::y".  There are still 32 bits of multicast
   group-ids to assign to customers and self ("y" could be anything from
   1 to F, as 0 must not be used).

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Example%202"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Example 2</span>

   As in Example 1, the network administrator of 2001:DB8::/32 wants to
   set up the RP but, to make it more flexible, wants to place it on a
   specifically routed subnet and wants to keep larger address space for
   group allocations.  That is, the administrator selects the least
   specific part of the unicast prefix, with plen=32, and the group
   addresses will be from the multicast prefix:

      FF7x:y20:2001:DB8::/64

   where "x" is the multicast scope, "y" is the interface ID of the RP
   address, and there are 64 bits for group-ids or assignments.  In this
   case, the address of the RP would be:

      2001:DB8::y

   The address 2001:DB8::y/128 is assigned to a router as a loopback
   address and is injected into the routing system; if the network
   administrator sets up only one or two RPs (and, e.g., not one RP per
   subnet), this approach may be preferable to the one described in
   Example 1.







<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Example%203"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Example 3</span>

   As in Example 2, the network administrator can also assign multicast
   prefixes such as "FF7x:y20:2001:DB8:DEAD::/80" to some of customers.
   In this case the RP address would still be "2001:DB8::y".  (Note that
   this is just a more specific subcase of Example 2, where the
   administrator assigns a multicast prefix, not just individual group-
   ids.)

   Note the second rule of deriving the RP address: the "plen" field in
   the multicast address, 0x20 = 32, refers to the length of "network
   prefix" field considered when obtaining the RP address.  In this
   case, only the first 32 bits of the network prefix field, "2001:DB8",
   are preserved: the value of "plen" takes no stance on actual
   unicast/multicast prefix lengths allocated or used in the networks,
   here from 2001:DB8:DEAD::/48.

   In short, this distinction allows more flexible RP address
   configuration in the scenarios where it is desirable to have the
   group addresses be consistent with the unicast prefix allocations.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Example%204"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Example 4</span>

   In the network of Examples 1, 2, and 3, the network admin sets up
   addresses for use by customers, but an organization wants to have its
   own PIM-SM domain.  The organization can pick multicast addresses
   such as "FF7x:y30:2001:DB8:BEEF::/80", and then the RP address would
   be "2001:DB8:BEEF::y".

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Operational%20Considerations"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Operational Considerations</span>

   This section describes the major operational considerations for those
   deploying this mechanism.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20RP%20Redundancy"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  RP Redundancy</span>

   A technique called "Anycast RP" is used within a PIM-SM domain to
   share an address and multicast state information between a set of RPs
   mainly for redundancy purposes.  Typically, MSDP has been used for
   this as well [<a href="#ref-ANYCASTRP" title='"Anycast Rendevous Point (RP) mechanism using Protocol Independent Multicast (PIM) and Multicast Source Discovery Protocol (MSDP)"'>ANYCASTRP</a>].  There are also other approaches, such as
   using PIM for sharing this information [<a href="#ref-ANYPIMRP" title='"Anycast-RP using PIM"'>ANYPIMRP</a>].

   The most feasible candidate for RP failover is using PIM for Anycast
   RP or "anycasting" (i.e., the shared-unicast model [<a href="#ref-ANYCAST" title='"An analysis of IPv6 anycast"'>ANYCAST</a>]) the RP
   address in the Interior Gateway Protocol (IGP) without state sharing
   (although depending on the redundancy requirements, this may or may
   not be enough).  However, the redundancy mechanisms are outside of
   the scope of this memo.



<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20RP%20Deployment"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  RP Deployment</span>

   As there is no need to share inter-domain state with MSDP, each
   Designated Router connecting multicast sources could act as an RP
   without scalability concerns about setting up and maintaining MSDP
   sessions.

   This might be particularly attractive when one is concerned about RP
   redundancy.  In the case where the DR close to a major source for a
   group acts as the RP, a certain amount of fate-sharing properties can
   be obtained without using any RP failover mechanisms: if the DR goes
   down, the multicast transmission may not work anymore in any case.

   Along the same lines, its may also be desirable to distribute the RP
   responsibilities to multiple RPs.  As long as different RPs serve
   different groups, this is trivial: each group could map to a
   different RP (or sufficiently many different RPs that the load on one
   RP is not a problem).  However, load sharing challenges one group
   faces are similar to those of Anycast-RP.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.3.%20%20Guidelines%20for%20Assigning%20IPv6%20Addresses%20to%20RPs"></a><a class="selflink" href="#section-6.3" name="section-6.3">6.3</a>.  Guidelines for Assigning IPv6 Addresses to RPs</span>

   With this mechanism, the RP can be given basically any unicast
   network prefix up to /64. The interface identifier will have to be
   manually configured to match "RIID".

   RIID = 0 must not be used, as using it would cause ambiguity with the
   Subnet-Router Anycast Address [<a href="#ref-ADDRARCH" title='"Internet Protocol Version 6 (IPv6) Addressing Architecture"'>ADDRARCH</a>].

   If an administrator wishes to use an RP address that does not conform
   to the addressing topology but is still from the network provider's
   unicast prefix (e.g., an additional loopback address assigned on a
   router, as described in Example 2 in <a href="#section-5.1">Section 5.1</a>), that address can
   be injected into the routing system via a host route.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.4.%20%20Use%20as%20a%20Substitute%20for%20BSR"></a><a class="selflink" href="#section-6.4" name="section-6.4">6.4</a>.  Use as a Substitute for BSR</span>

   With embedded-RP, use of BSR or other RP configuration mechanisms
   throughout the PIM domain is not necessary, as each group address
   specifies the RP to be used.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.5.%20%20Controlling%20the%20Use%20of%20RPs"></a><a class="selflink" href="#section-6.5" name="section-6.5">6.5</a>.  Controlling the Use of RPs</span>

   Compared to the MSDP inter-domain ASM model, the control and
   management of who can use an RP, and how, changes slightly and
   deserves explicit discussion.





<span class="grey">Savola &amp; Haberman           Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


   MSDP advertisement filtering typically includes at least two
   capabilities: filtering who is able to create a global session
   ("source filtering") and filtering which groups should be globally
   accessible ("group filtering").  These are done to prevent local
   groups from being advertised to the outside or unauthorized senders
   from creating global groups.

   However, such controls do not yet block the outsiders from using such
   groups, as they could join the groups even without Source Active
   advertisement with a (Source, Group) or (S,G) Join by
   guessing/learning the source and/or the group address.  For proper
   protection, one should set up, for example, PIM multicast scoping
   borders at the border routers.  Therefore, embedded-RP has by default
   a roughly equivalent level of "protection" as MSDP with SA filtering.

   A new issue with control is that nodes in a "foreign domain" may
   register to an RP, or send PIM Join to an RP.  (These have been
   possible in the past as well, to a degree, but only through willful
   attempts or purposeful RP configuration at DRs.)  The main threat in
   this case is that an outsider may illegitimately use the RP to host
   his/hers own group(s).  This can be mitigated to an extent by
   filtering which groups or group ranges are allowed at the RP; more
   specific controls are beyond the scope of this memo.  Note that this
   does not seem to be a serious threat in the first place, as anyone
   with a /64 unicast prefix can create their own RP without having to
   illegitimately get it from someone else.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20The%20Embedded-RP%20Group-to-RP%20Mapping%20Mechanism"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  The Embedded-RP Group-to-RP Mapping Mechanism</span>

   This section specifies the group-to-RP mapping mechanism for Embedded
   RP.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20PIM-SM%20Group-to-RP%20Mapping"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  PIM-SM Group-to-RP Mapping</span>

   The only PIM-SM modification required is implementing this mechanism
   as one group-to-RP mapping method.

   The implementation will have to recognize the address format and
   derive and use the RP address by using the rules in <a href="#section-4">Section 4</a>.  This
   information is used at least when performing Reverse Path Forwarding
   (RPF) lookups, when processing Join/Prune messages, or performing
   Register-encapsulation.

   To avoid loops and inconsistencies, for addresses in the range
   FF70::/12, the Embedded-RP mapping MUST be considered the longest
   possible match and higher priority than any other mechanism.





<span class="grey">Savola &amp; Haberman           Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


   It is worth noting that compared to the other group-to-RP mapping
   mechanisms, which can be precomputed, the embedded-RP mapping must be
   redone for every new IPv6 group address that would map to a different
   RP.  For efficiency, the results may be cached in an implementation-
   specific manner, to avoid computation for every embedded-RP packet.

   This group-to-RP mapping mechanism must be supported by the RP, the
   DR adjacent to the senders, and any router on the path from any
   receiver to the RP.  Paths for Shortest Path Tree (SPT) formation and
   Register-Stop do not require the support, as those are accomplished
   with an (S,G) Join.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Overview%20of%20the%20Model"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Overview of the Model</span>

   This section gives a high-level, non-normative overview of how
   Embedded RP operates, as specified in the previous section.

   The steps when a receiver wishes to join a group are as follows:

   1. A receiver finds out a group address by some means (e.g., SDR or a
      web page).

   2. The receiver issues an Multicast Listener Discovery (MLD) Report,
      joining the group.

   3. The receiver's DR will initiate the PIM-SM Join process towards
      the RP encoded in the multicast address, irrespective of whether
      it is in the "local" or "remote" PIM domain.

   The steps when a sender wishes to send to a group are as follows:

   1. A sender finds out a group address by using an unspecified method
      (e.g., by contacting the administrator for group assignment or
      using a multicast address assignment protocol).

   2. The sender sends to the group.

   3. The sender's DR will send the packets unicast-encapsulated in
      PIM-SM Register-messages to the RP address encoded in the
      multicast address (in the special case that DR is the RP, such
      sending is only conceptual).

   In fact, all the messages go as specified in [<a href="#ref-PIM-SM" title='"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"'>PIM-SM</a>]; embedded-RP
   just acts as a group-to-RP mapping mechanism.  Instead of obtaining
   the address of the RP from local configuration or configuration
   protocols (e.g., BSR), the algorithm derives it transparently from
   the encoded multicast address.




<span class="grey">Savola &amp; Haberman           Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Scalability%20Analysis"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Scalability Analysis</span>

   Interdomain MSDP model for connecting PIM-SM domains is mostly
   hierarchical in configuration and deployment, but flat with regard to
   information distribution.  The embedded-RP inter-domain model behaves
   as if every group formed its own Internet-wide PIM domain, with the
   group mapping to a single RP, wherever the receivers or senders are
   located.  Hence, the inter-domain multicast becomes a flat, RP-
   centered topology.  The scaling issues are described below.

   Previously, foreign sources sent the unicast-encapsulated data to
   their "local" RP; now they are sent to the "foreign" RP responsible
   for the specific group.  This is especially important with large
   multicast groups where there are a lot of heavy senders --
   particularly if implementations do not handle unicast-decapsulation
   well.

   With IPv4 ASM multicast, there are roughly two kinds of Internet-wide
   state: MSDP (propagated everywhere), and multicast routing state (on
   the receiver or sender branches).  The former is eliminated, but the
   backbone routers might end up with (*, G) and (S, G, rpt) state
   between receivers (and past receivers, for PIM Prunes) and the RP, in
   addition to (S, G) states between the receivers and senders, if SPT
   is used.  However, the total amount of state is smaller.

   In both inter-domain and intra-domain cases, the embedded-RP model is
   practically identical to the traditional PIM-SM in intra-domain.  On
   the other hand, PIM-SM has been deployed (in IPv4) in inter-domain
   using MSDP; compared to that inter-domain model, this specification
   simplifies the tree construction (i.e., multicast routing) by
   removing the RP for senders and receivers in foreign domains and
   eliminating the MSDP information distribution.

   As the address of the RP is tied to the multicast address, the RP
   failure management becomes more difficult, as the deployed failover
   or redundancy mechanisms (e.g., BSR, Anycast-RP with MSDP) cannot be
   used as-is.  However, Anycast-RP using PIM provides equal redundancy;
   this described briefly in <a href="#section-6.1">Section 6.1</a>.

   The PIM-SM specification states, "Any RP address configured or
   learned MUST be a domain-wide reachable address".  What "reachable"
   precisely means is not clear, even without embedded-RP.  This
   statement cannot be proven, especially with the foreign RPs, as one
   cannot even guarantee that the RP exists.  Instead of manually
   configuring RPs and DRs (configuring a non-existent RP was possible,
   though rare), with this specification the hosts and users using
   multicast indirectly specify the RP themselves, lowering the
   expectancy of the RP reachability.  This is a relatively significant



<span class="grey">Savola &amp; Haberman           Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


   problem but not much different from the current multicast deployment:
   e.g., MLDv2 (S,G) joins, whether ASM or SSM, yield the same result
   [<a href="#ref-PIMSEC" title='"PIM-SM Multicast Routing Security Issues and Enhancements"'>PIMSEC</a>].

   Being able to join/send to remote RPs raises security concerns that
   are considered separately, but it has an advantage too: every group
   has a "responsible RP" that is able to control (to some extent) who
   is able to send to the group.

   A more extensive description and comparison of the inter-domain
   multicast routing models (traditional ASM with MSDP, embedded-RP,
   SSM) and their security properties has been described in [<a href="#ref-PIMSEC" title='"PIM-SM Multicast Routing Security Issues and Enhancements"'>PIMSEC</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Acknowledgements"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Acknowledgements</span>

   Jerome Durand commented on an early version of this memo.  Marshall
   Eubanks noted an issue regarding short plen values.  Tom Pusateri
   noted problems with an earlier SPT-join approach.  Rami Lehtonen
   pointed out issues with the scope of SA-state and provided extensive
   commentary.  Nidhi Bhaskar gave the document a thorough review.
   Toerless Eckert, Hugh Holbrook, and Dave Meyer provided very
   extensive feedback.  In particular, Pavlin Radoslavov, Dino
   Farinacci, Nidhi Bhaskar, and Jerome Durand provided good comments
   during and after WG last call.  Mark Allman, Bill Fenner, Thomas
   Narten, and Alex Zinin provided substantive comments during the IESG
   evaluation.  The whole MboneD working group is also acknowledged for
   continued support and comments.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Security%20Considerations"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Security Considerations</span>

   The addresses of RPs are encoded in the multicast addresses, thus
   becoming more visible as single points of failure.  Even though this
   does not significantly affect the multicast routing security, it may
   expose the RP to other kinds of attacks.  The operators are
   encouraged to pay special attention to securing these routers.  See
   <a href="#section-6.1">Section 6.1</a> for considerations regarding failover and <a href="#section-6.2">Section 6.2</a> for
   placement of RPs leading to a degree of fate-sharing properties.

   As any RP will have to accept PIM-SM Join/Prune/Register messages
   from any DR, this might cause a potential Denial of Service attack
   scenario.  However, this can be mitigated, as the RP can discard all
   such messages for all multicast addresses that do not encode the
   address of the RP.  Both the sender- and receiver-based attacks are
   described at greater length in [<a href="#ref-PIMSEC" title='"PIM-SM Multicast Routing Security Issues and Enhancements"'>PIMSEC</a>].







<span class="grey">Savola &amp; Haberman           Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


   Additionally, the implementation SHOULD also allow manual
   configuration of which multicast prefixes are allowed to be used.
   This can be used to limit the use of the RP to designated groups
   only.  In some cases, being able to restrict (at the RP) which
   unicast addresses are allowed to send or join to a group is
   desirable.  (However, note that Join/Prune messages would still leave
   state in the network, and Register messages can be spoofed [<a href="#ref-PIMSEC" title='"PIM-SM Multicast Routing Security Issues and Enhancements"'>PIMSEC</a>].)
   Obviously, these controls are only possible at the RP, not at the
   intermediate routers or the DR.

   It is RECOMMENDED that routers supporting this specification do not
   act as RPs unless explicitly configured to do so, as becoming an RP
   does not require any advertisement (e.g., through BSR or manually).
   Otherwise, any router could potentially become an RP (and be abused
   as such).  Further, multicast groups or group ranges to-be-served MAY
   need to be explicitly configured at the RPs, to protect them from
   being used unwillingly.  Note that the more specific controls (e.g.,
   "insider-must-create" or "invite-outsiders" models) as to who is
   allowed to use the groups are beyond the scope of this memo.

   Excluding internal-only groups from MSDP advertisements does not
   protect the groups from outsiders but only offers security by
   obscurity; embedded-RP offers similar level of protection.  When real
   protection is desired, PIM scoping for example, should be set up at
   the borders. This is described at more length in <a href="#section-6.5">Section 6.5</a>.

   One should observe that the embedded-RP threat model is actually
   rather similar to SSM; both mechanisms significantly reduce the
   threats at the sender side.  On the receiver side, the threats are
   somewhat comparable, as an attacker could do an MLDv2 (S,G) join
   towards a non-existent source, which the local RP could not block
   based on the MSDP information.

   The implementation MUST perform at least the same address validity
   checks to the embedded-RP address as it would to one received via
   other means; at least fe80::/10, ::/16, and ff00::/8 should be
   excluded.  This is particularly important, as the information is
   derived from the untrusted source (i.e., any user in the Internet),
   not from the local configuration.

   A more extensive description and comparison of the inter-domain
   multicast routing models (traditional ASM with MSDP, embedded-RP,
   SSM) and their security properties has been done separately in
   [<a href="#ref-PIMSEC" title='"PIM-SM Multicast Routing Security Issues and Enhancements"'>PIMSEC</a>].







<span class="grey">Savola &amp; Haberman           Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20References"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.1.%20%20Normative%20References"></a><a class="selflink" href="#section-11.1" name="section-11.1">11.1</a>.  Normative References</span>

   [<a id="ref-ADDRARCH" name="ref-ADDRARCH">ADDRARCH</a>]  Hinden, R. and S. Deering, "Internet Protocol Version 6
               (IPv6) Addressing Architecture", <a href="rfc3513.html">RFC 3513</a>, April 2003.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]   Bradner, S., "Key words for use in RFCs to Indicate
               Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC3306" name="ref-RFC3306">RFC3306</a>]   Haberman, B. and D. Thaler, "Unicast-Prefix-based IPv6
               Multicast Addresses", <a href="rfc3306.html">RFC 3306</a>, August 2002.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.2.%20%20Informative%20References"></a><a class="selflink" href="#section-11.2" name="section-11.2">11.2</a>.  Informative References</span>

   [<a id="ref-ANYCAST" name="ref-ANYCAST">ANYCAST</a>]   Hagino, J. and K. Ettikan, <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22An+analysis+of+IPv6+anycast%22" style="text-decoration: none">"An analysis of IPv6 anycast"</a>,
               Work in Progress, June 2003.

   [<a id="ref-ANYCASTRP" name="ref-ANYCASTRP">ANYCASTRP</a>] Kim, D., Meyer, D., Kilmer, H., and D. Farinacci,
               "Anycast Rendevous Point (RP) mechanism using Protocol
               Independent Multicast (PIM) and Multicast Source
               Discovery Protocol (MSDP)", <a href="rfc3446.html">RFC 3446</a>, January 2003.

   [<a id="ref-ANYPIMRP" name="ref-ANYPIMRP">ANYPIMRP</a>]  Farinacci, D. and Y. Cai, <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22Anycast-RP+using+PIM%22" style="text-decoration: none">"Anycast-RP using PIM"</a>, Work in
               Progress, June 2004.

   [<a id="ref-BSR" name="ref-BSR">BSR</a>]       Fenner, B., et al., "Bootstrap Router (BSR) Mechanism for
               PIM Sparse Mode", Work in Progress, July 2004.

   [<a id="ref-MSDP" name="ref-MSDP">MSDP</a>]      Fenner, B. and D. Meyer, "Multicast Source Discovery
               Protocol (MSDP)", <a href="rfc3618.html">RFC 3618</a>, October 2003.

   [<a id="ref-PIMSEC" name="ref-PIMSEC">PIMSEC</a>]    Savola, P., Lehtonen, R., and D. Meyer, "PIM-SM Multicast
               Routing Security Issues and Enhancements", Work in
               Progress, October 2004.

   [<a id="ref-PIM-SM" name="ref-PIM-SM">PIM-SM</a>]    Fenner, B. et al, "Protocol Independent Multicast -
               Sparse Mode (PIM-SM): Protocol Specification (Revised)",
               Work in Progress, July 2004.

   [<a id="ref-SSM" name="ref-SSM">SSM</a>]       Holbrook, H. et al, <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22Source-Specific+Multicast+for+IP%22" style="text-decoration: none">"Source-Specific Multicast for IP"</a>,
               Work in Progress, September 2004.

   [<a id="ref-V6MISSUES" name="ref-V6MISSUES">V6MISSUES</a>] Savola, P., <a href="https://www.google.com/search?sitesearch=tools.ietf.org%2Fhtml%2F&amp;q=inurl:draft-+%22IPv6+Multicast+Deployment+Issues%22" style="text-decoration: none">"IPv6 Multicast Deployment Issues"</a>, Work in
               Progress, September 2004.






<span class="grey">Savola &amp; Haberman           Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/A.%20%20Discussion%20about%20Design%20Tradeoffs"></a><a class="selflink" href="#appendix-A" name="appendix-A">A</a>.  Discussion about Design Tradeoffs</span>

   The document only specifies FF70::/12 for now; if/when the upper-most
   bit is used, one must specify how FFF0::/12 applies to Embedded-RP.
   For example, a different mode of PIM or another protocol might use
   that range, in contrast to FF70::/12, as currently specified, being
   for PIM-SM only.

   Instead of using flags bits ("FF70::/12"), one could have used the
   leftmost reserved bits instead ("FF3x:8000::/17").

   It has been argued that instead of allowing the operator to specify
   RIID, the value could be pre-determined (e.g., "1").  However, this
   has not been adopted, as this eliminates address assignment
   flexibility from the operator.

   Values 64 &lt; "plen" &lt; 96 would overlap with upper bits of the
   multicast group-id; due to this restriction, "plen" must not exceed
   64 bits.  This is in line with <a href="rfc3306.html">RFC 3306</a>.

   The embedded-RP addressing could be used to convey other information
   (other than RP address) as well, for example, what should be the RPT
   threshold for PIM-SM.  These could be, whether feasible or not,
   encoded in the RP address somehow, or in the multicast group address.
   In any case, such modifications are beyond the scope of this memo.

   For the cases where the RPs do not exist or are unreachable, or too
   much state is being generated to reach in a resource exhaustion
   Denial of Service attack, some forms of rate-limiting or other
   mechanisms could be deployed to mitigate the threats while trying not
   to disturb the legitimate usage.  However, as the threats are
   generic, they are considered out of scope and discussed separately in
   [<a href="#ref-PIMSEC" title='"PIM-SM Multicast Routing Security Issues and Enhancements"'>PIMSEC</a>].


















<span class="grey">Savola &amp; Haberman           Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


Authors' Addresses

   Pekka Savola
   CSC/FUNET
   Espoo, Finland

   EMail: psavola@funet.fi


   Brian Haberman
   Johns Hopkins University Applied Physics Lab
   11100 Johns Hopkins Road
   Laurel, MD  20723-6099
   US

   Phone: +1 443 778 1319
   EMail: brian@innovationslab.net


































<span class="grey">Savola &amp; Haberman           Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc3956.html">RFC 3956</a>        The RP Address in IPv6 Multicast Address   November 2004</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2004).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the IETF's procedures with respect to rights in IETF Documents can
   be found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Savola &amp; Haberman           Standards Track                    [Page 18]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc3956 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:44 GMT --></html>