<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc5495 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:35 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="draft-li-ccamp-gr-description" name="DC.Relation.Replaces"/>
<meta content="urn:ietf:rfc:5495" name="DC.Identifier"/>
<meta content="March, 2009" name="DC.Date.Issued"/>
<meta content="Li, Dan" name="DC.Creator"/>
<meta content="Gao, Jianhua" name="DC.Creator"/>
<meta content="Satyanarayana, Arun" name="DC.Creator"/>
<meta content="The Hello message for the Resource Reservation Protocol (RSVP) has
been defined to establish and maintain basic signaling node
adjacencies for Label Switching Routers (LSRs) participating in a
Multiprotocol Label Switching (MPLS) traffic engineered (TE) network.
The Hello message has been extended for use in Generalized MPLS
(GMPLS) network for state recovery of control channel or nodal faults.
GMPLS protocol definitions for RSVP also allow a restarting node to
learn the label that it previously allocated for use on a Label
Switching Path (LSP).  Further RSVP protocol extensions have been
defined to enable a restarting node to recover full control plane
state by exchanging RSVP messages with its upstream and downstream
neighbors.  This document provides an informational clarification of
the control plane procedures for a GMPLS network when there are
multiple node failures, and describes how full control plane state can
be recovered in different scenarios where the order in which the nodes
restart is different.  This document does not define any new processes
or procedures. All protocol mechanisms are already defined in the
referenced documents." name="DC.Description.Abstract"/>
<meta content="Description of the RSVP-TE Graceful Restart Procedures" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 5495 - Description of the RSVP-TE Graceful Restart Procedures</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc5495.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc5495" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-ccamp-gr-description" title="draft-ietf-ccamp-gr-description">draft-ietf-ccam...</a>] [<a href="https://datatracker.ietf.org/doc/rfc5495" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc5495" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc5495" title="Side-by-side diff">Diff2</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=5495&amp;submit=rfc" title="IPR disclosures related to this document">IPR</a>]   </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Network Working Group                                              D. Li
Request for Comments: 5495                                        J. Gao
Category: Informational                                           Huawei
                                                        A. Satyanarayana
                                                                   Cisco
                                                             S. Bardalai
                                                                 Fujitsu
                                                              March 2009


                          <span class="h1">Description of the</span>
     <span class="h1">Resource Reservation Protocol - Traffic-Engineered (RSVP-TE)</span>
                      <span class="h1">Graceful Restart Procedures</span>

Status of This Memo

   This memo provides information for the Internet community.  It does
   not specify an Internet standard of any kind.  Distribution of this
   memo is unlimited.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.









<span class="grey">Li, et al.                   Informational                      [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


Abstract

   The Hello message for the Resource Reservation Protocol (RSVP) has
   been defined to establish and maintain basic signaling node
   adjacencies for Label Switching Routers (LSRs) participating in a
   Multiprotocol Label Switching (MPLS) traffic-engineered (TE) network.
   The Hello message has been extended for use in Generalized MPLS
   (GMPLS) networks for state recovery of control channel or nodal
   faults.

   The GMPLS protocol definitions for RSVP also allow a restarting node
   to learn which label it previously allocated for use on a Label
   Switched Path (LSP).

   Further RSVP protocol extensions have been defined to enable a
   restarting node to recover full control plane state by exchanging
   RSVP messages with its upstream and downstream neighbors.

   This document provides an informational clarification of the control
   plane procedures for a GMPLS network when there are multiple node
   failures, and describes how full control plane state can be recovered
   in different scenarios where the order in which the nodes restart is
   different.

   This document does not define any new processes or procedures.  All
   protocol mechanisms are already defined in the referenced documents.

























<span class="grey">Li, et al.                   Informational                      [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Existing Procedures for Single Node Restart .....................<a href="#page-4">4</a>
      <a href="#section-2.1">2.1</a>. Procedures Defined in <a href="rfc3473.html">RFC 3473</a> .............................<a href="#page-4">4</a>
      <a href="#section-2.2">2.2</a>. Procedures Defined in <a href="rfc5063.html">RFC 5063</a> .............................<a href="#page-5">5</a>
   <a href="#section-3">3</a>. Multiple Node Restart Scenarios .................................<a href="#page-6">6</a>
   <a href="#section-4">4</a>. RSVP State ......................................................<a href="#page-7">7</a>
   <a href="#section-5">5</a>. Procedures for Multiple Node Restart ............................<a href="#page-7">7</a>
      <a href="#section-5.1">5.1</a>. Procedures for the Normal Node .............................<a href="#page-8">8</a>
      <a href="#section-5.2">5.2</a>. Procedures for the Restarting Node .........................<a href="#page-8">8</a>
           <a href="#section-5.2.1">5.2.1</a>. Procedures for Scenario 1 ...........................<a href="#page-8">8</a>
           <a href="#section-5.2.2">5.2.2</a>. Procedures for Scenario 2 ...........................<a href="#page-9">9</a>
           <a href="#section-5.2.3">5.2.3</a>. Procedures for Scenario 3 ..........................<a href="#page-11">11</a>
           <a href="#section-5.2.4">5.2.4</a>. Procedures for Scenario 4 ..........................<a href="#page-12">12</a>
           <a href="#section-5.2.5">5.2.5</a>. Procedures for Scenario 5 ..........................<a href="#page-12">12</a>
      <a href="#section-5.3">5.3</a>. Consideration of the Reuse of Data Plane Resources ........<a href="#page-12">12</a>
      <a href="#section-5.4">5.4</a>. Consideration of Management Plane Intervention ............<a href="#page-13">13</a>
   <a href="#section-6">6</a>. Clarification of Restarting Node Procedure .....................<a href="#page-13">13</a>
   <a href="#section-7">7</a>. Security Considerations ........................................<a href="#page-15">15</a>
   <a href="#section-8">8</a>. Acknowledgments ................................................<a href="#page-16">16</a>
   <a href="#section-9">9</a>. References .....................................................<a href="#page-17">17</a>
      <a href="#section-9.1">9.1</a>. Normative References ......................................<a href="#page-17">17</a>
      <a href="#section-9.2">9.2</a>. Informative References ....................................<a href="#page-17">17</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   The Hello message for the Resource Reservation Protocol (RSVP) has
   been defined to establish and maintain basic signaling node
   adjacencies for Label Switching Routers (LSRs) participating in a
   Multiprotocol Label Switching (MPLS) traffic-engineered (TE) network
   [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>].  The Hello message has been extended for use in
   Generalized MPLS (GMPLS) networks for state recovery of control
   channel or nodal faults through the exchange of the Restart_Cap
   Object [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].

   The GMPLS protocol definitions for RSVP [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] also allow a
   restarting node to learn which label it previously allocated for use
   on a Label Switched Path (LSP) through the Recovery_Label Object
   carried on a Path message sent to a restarting node from its upstream
   neighbor.

   Further RSVP protocol extensions have been defined [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>] to
   perform graceful restart and to enable a restarting node to recover
   full control plane state by exchanging RSVP messages with its
   upstream and downstream neighbors.  State previously transmitted to
   the upstream neighbor (principally, the downstream label) is
   recovered from the upstream neighbor on a Path message (using the



<span class="grey">Li, et al.                   Informational                      [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   Recovery_Label Object as described in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>]).  State previously
   transmitted to the downstream neighbor (including the upstream label,
   interface identifiers, and the explicit route) is recovered from the
   downstream neighbor using a RecoveryPath message.

   [<a id="ref-RFC5063" name="ref-RFC5063">RFC5063</a>] also extends the Hello message to exchange information
   about the ability to support the RecoveryPath message.

   The examples and procedures in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>] focus on the
   description of a single node restart when adjacent network nodes are
   operative.  Although the procedures are equally applicable to multi-
   node restarts, no detailed explanation is provided for such a case.

   This document provides an informational clarification of the control
   plane procedures for a GMPLS network when there are multiple node
   failures, and describes how full control plane state can be recovered
   in different scenarios where the order in which the nodes restart is
   different.

   This document does not define any new processes or procedures.  All
   protocol mechanisms already defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>] are
   definitive.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Existing%20Procedures%20for%20Single%20Node%20Restart"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Existing Procedures for Single Node Restart</span>

   This section documents for information the existing procedures
   defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>].  Those documents are definitive,
   and the description here is non-normative.  It is provided for
   informational clarification only.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.1.%20%20Procedures%20Defined%20in%20RFC%203473"></a><a class="selflink" href="#section-2.1" name="section-2.1">2.1</a>.  Procedures Defined in <a href="rfc3473.html">RFC 3473</a></span>

   In the case of nodal faults, the procedures for the restarting node
   and the procedures for the neighbor of a restarting node are applied
   to the corresponding nodes.  These procedures, described in
   [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], are summarized as follows:

   For the Restarting Node:

   1) Tells its neighbors that state recovery is supported using the
      Hello message.

   2) Recovers its RSVP state with the help of a Path message, received
      from its upstream neighbor, that carries the Recovery_Label
      Object.

   3) For bidirectional LSPs, uses the Upstream_Label Object on the
      received Path message to recover the corresponding RSVP state.



<span class="grey">Li, et al.                   Informational                      [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   4) If the corresponding forwarding state in the data plane does not
      exist, the node treats this as a setup for a new LSP.  If the
      forwarding state in the data plane does exist, the forwarding
      state is bound to the LSP associated with the message, and the
      related forwarding state should be considered as valid and
      refreshed.  In addition, if the node is not the tail-end of the
      LSP, the incoming label on the downstream interface is retrieved
      from the forwarding state on the restarting node and set in the
      Upstream_Label Object in the Path message sent to the downstream
      neighbor.

   For the Neighbor of a Restarting Node:

   1) Sends a Path message with the Recovery_Label Object containing a
      label value corresponding to the label value received in the most
      recently received corresponding Resv message.

   2) Resumes refreshing Path state with the restarting node.

   3) Resumes refreshing Resv state with the restarting node.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/2.2.%20%20Procedures%20Defined%20in%20RFC%205063"></a><a class="selflink" href="#section-2.2" name="section-2.2">2.2</a>.  Procedures Defined in <a href="rfc5063.html">RFC 5063</a></span>

   A new message is introduced in [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>] called the RecoveryPath
   message.  This message is sent by the downstream neighbor of a
   restarting node to convey the contents of the last received Path
   message back to the restarting node.

   The restarting node will receive the Path message with the
   Recovery_Label Object from its upstream neighbor and/or the
   RecoveryPath message from its downstream neighbor.  The full RSVP
   state of the restarting node can be recovered from these two
   messages.

   The following state can be recovered from the received Path message:

   o Upstream data interface (from RSVP_Hop Object)

   o Label on the upstream data interface (from Recovery_Label Object)

   o Upstream label for bidirectional LSP (from Upstream_Label Object)

   The following state can be recovered from the received RecoveryPath
   message:

   o Downstream data interface (from RSVP_Hop Object)

   o Label on the downstream data interface (from Recovery_Label Object)



<span class="grey">Li, et al.                   Informational                      [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   o Upstream direction label for bidirectional LSP (from Upstream_Label
     Object)

   The other objects originally exchanged on Path and Resv messages can
   be recovered from the regular Path and Resv refresh messages, or from
   the RecoveryPath.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Multiple%20Node%20Restart%20Scenarios"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Multiple Node Restart Scenarios</span>

   We define the following terms for the different node types:

   Restarting - The node has restarted.  Communication with its neighbor
      nodes is restored, and its RSVP state is under recovery.

   Delayed Restarting - The node has restarted, but the communication
      with a neighbor node is interrupted (for example, the neighbor
      node needs to restart).

   Normal - The normal node is the fully operational neighbor of a
      restarting or delayed restarting node.

   There are five scenarios for multi-node restart.  We will focus on
   the different positions of a restarting node.  As shown in Figure 1,
   an LSP starts from Node A, traverses Nodes B and C, and ends at Node
   D.

          +-----+  Path  +-----+  Path  +-----+  Path  +-----+
          | PSB |-------&gt;| PSB |-------&gt;| PSB |-------&gt;| PSB |
          |     |        |     |        |     |        |     |
          | RSB |&lt;-------| RSB |&lt;-------| RSB |&lt;-------| RSB |
          +-----+  Resv  +-----+  Resv  +-----+  Resv  +-----+
          Node A         Node B         Node C         Node D

                   Figure 1: Two Neighbor Nodes Restart

   1) A restarting node with downstream delayed restarting node.  For
      example, in Figure 1, Nodes A and D are normal nodes, Node B is a
      restarting node, and Node C is a delayed restarting node.

   2) A restarting node with upstream delayed restarting node.  For
      example, in Figure 1, Nodes A and D are normal nodes, Node B is a
      delayed restarting node, and Node C is a restarting node.

   3) A restarting node with downstream and upstream delayed restarting
      nodes.  For example, in Figure 1, Node A is a normal node, Nodes B
      and D are delayed restarting nodes, and Node C is a restarting
      node.




<span class="grey">Li, et al.                   Informational                      [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   4) A restarting ingress node with downstream delayed restarting node.
      For example, in Figure 1, Node A is a restarting node and Node B
      is a delayed restarting node.  Nodes C and D are normal nodes.

   5) A restarting egress node with upstream delayed restarting node.
      For example, in Figure 1, Nodes A and B are normal nodes, Node C
      is a delayed restarting node, and Node D is a restarting node.

   If the communication between two nodes is interrupted, the upstream
   node may think the downstream node is a delayed restarting node, or
   vice versa.

   Note that if multiple nodes that are not neighbors are restarted, the
   restart procedures could be applied as multiple separated restart
   procedures that are exactly the same as the procedures described in
   [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>].  Therefore, these scenarios are not
   described in this document.  For example, in Figure 1, Node A and
   Node C are normal nodes, and Node B and Node D are restarting nodes;
   therefore, Node B could be restarted through Node A and Node C, while
   Node D could be restarted through Node C separately.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20RSVP%20State"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  RSVP State</span>

   For each scenario, the RSVP state that needs to be recovered at the
   restarting nodes are the Path State Block (PSB) and Resv State Block
   (RSB), which are created when the node receives the corresponding
   Path message and Resv message.

   According to [<a href="rfc2209.html" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Message Processing Rules"'>RFC2209</a>], how to construct the PSB and RSB is really an
   implementation issue.  In fact, there is no requirement to maintain
   separate PSB and RSB data structures.  In GMPLS, there is a much
   closer tie between Path and Resv state so it is possible to combine
   the information into a single state block (the LSP state block).  On
   the other hand, if point-to-multipoint is supported, it may be
   convenient to maintain separate upstream and downstream state.  Note
   that the PSB and RSB are not upstream and downstream state since the
   PSB is responsible for receiving a Path from upstream and sending a
   Path to downstream.

   Regardless of how the RSVP state is implemented, on recovery there
   are two logical pieces of state to be recovered and these correspond
   to the PSB and RSB.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Procedures%20for%20Multiple%20Node%20Restart"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Procedures for Multiple Node Restart</span>

   In this document, all the nodes are assumed to have the graceful
   restart capabilities that are described in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>].




<span class="grey">Li, et al.                   Informational                      [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Procedures%20for%20the%20Normal%20Node"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Procedures for the Normal Node</span>

   When the downstream normal node detects its neighbor restarting, it
   must send a RecoveryPath message for each LSP associated with the
   restarting node for which it has previously sent a Resv message and
   which has not been torn down.

   When the upstream normal node detects its neighbor restarting, it
   must send a Path message with a Recovery_Label Object containing a
   label value corresponding to the label value received in the most
   recently received corresponding Resv message.

   This document does not modify the procedures for the normal node,
   which are described in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Procedures%20for%20the%20Restarting%20Node"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Procedures for the Restarting Node</span>

   This document does not modify the procedures for the restarting node,
   which are described in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.1.%20%20Procedures%20for%20Scenario%201"></a><a class="selflink" href="#section-5.2.1" name="section-5.2.1">5.2.1</a>.  Procedures for Scenario 1</span>

   After the restarting node restarts, it starts a Recovery Timer.  Any
   RSVP state that has not been resynchronized when the Recovery Timer
   expires should be cleared.

   At the restarting node (Node B in the example), full
   resynchronization with the upstream neighbor (Node A) is possible
   because Node A is a normal node.  The upstream Path information is
   recovered from the Path message received from Node A.  Node B also
   recovers the upstream Resv information (that it had previously sent
   to Node A) from the Recovery_Label Object carried in the Path message
   received from Node A, but, obviously, some information (like the
   Recorded_Route Object) will be missing from the new Resv message
   generated by Node B and cannot be supplied until the downstream
   delayed restarting node (Node C) restarts and sends a Resv.

   After the upstream Path information and upstream Resv information
   have been recovered by Node B, the normal refresh procedure with
   upstream Node A should be started.

   As per [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>], the restarting node (Node B) would normally expect
   to receive a RecoveryPath message from its downstream neighbor (Node
   C).  It would use this to recover the downstream Path information,
   and would subsequently send a Path message to its downstream neighbor
   and receive a Resv message.  But in this scenario, because the
   downstream neighbor has not restarted yet, Node B detects the
   communication with



<span class="grey">Li, et al.                   Informational                      [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   Node C is interrupted and must wait before resynchronizing with its
   downstream neighbor.

   In this case, the restarting node (Node B) follows the procedures in
   <a href="rfc3473.html#section-9.3">Section 9.3 of [RFC3473]</a> and may run a Restart Timer to wait for the
   downstream neighbor (Node C) to restart.  If its downstream neighbor
   (Node C) has not restarted before the timer expires, the
   corresponding LSPs may be torn down according to local policy
   [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  Note, however, that the Restart Time value suggested in
   [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] is based on the previous Hello message exchanged with the
   node that has not restarted yet (Node C).  Since this time value is
   unlikely to be available to the restarting node (Node B), a
   configured time value must be used if the timer is operated.

   The RSVP state must be reconciled with the retained data plane state
   if the cross-connect information can be retrieved from the data
   plane.  In the event of any mismatches, local policy will dictate the
   action that must be taken, which could include:

   - reprogramming the data plane

   - sending an alert to the management plane

   - tearing down the control plane state for the LSP

   In the case that the delayed restarting node never comes back and a
   Restart Timer is not used to automatically tear down LSPs, the LSPs
   can be tidied up through the control plane using a PathTear from the
   upstream node (Node A).  Note that if Node C restarts after this
   operation, the RecoveryPath message that it sends to Node B will not
   be matched with any state on Node B and will receive a PathTear as
   its response, resulting in the teardown of the LSP at all downstream
   nodes.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.2.%20%20Procedures%20for%20Scenario%202"></a><a class="selflink" href="#section-5.2.2" name="section-5.2.2">5.2.2</a>.  Procedures for Scenario 2</span>

   In this case, the restarting node (Node C) can recover full
   downstream state from its downstream neighbor (Node D), which is a
   normal node.  The downstream Path state can be recovered from the
   RecoveryPath message, which is sent by Node D.  This allows Node C to
   send a Path refresh message to Node D, and Node D will respond with a
   Resv message from which Node C can reconstruct the downstream Resv
   state.

   After the downstream Path information and downstream Resv information
   have been recovered in Node C, the normal refresh procedure with
   downstream Node D should be started.




<span class="grey">Li, et al.                   Informational                      [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   The restarting node would normally expect to resynchronize with its
   upstream neighbor to re-learn the upstream Path and Resv state, but
   in this scenario, because the upstream neighbor (Node B) has not
   restarted yet, the restarting node (Node C) detects that the
   communication with upstream neighbor (Node B) is interrupted.  The
   restarting node (Node C) follows the procedures in <a href="rfc3473.html#section-9.3">Section 9.3 of
   [RFC3473]</a> and may run a Restart Timer to wait for the upstream
   neighbor (Node B) to restart.  If its upstream neighbor (Node B) has
   not restarted before the Restart Timer expires, the corresponding
   LSPs may be torn down according to local policy [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  Note,
   however, that the Restart Time value suggested in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] is based
   on the previous Hello message exchanged with the node that has not
   restarted yet (Node B).  Since this time value is unlikely to be
   available to the restarting node (Node C), a configured time value
   must be used if the timer is operated.

   Note that no Resv message is sent to the upstream neighbor (Node B),
   because it has not restarted.

   The RSVP state must be reconciled with the retained data plane state
   if the cross-connect information can be retrieved from the data
   plane.

   In the event of any mismatches, local policy will dictate the action
   that must be taken, which could include:

   - reprogramming the data plane

   - sending an alert to the management plane

   - tearing down the control plane state for the LSP

   In the case that the delayed restarting node never comes back and a
   Restart Timer is not used to automatically tear down LSPs, the LSPs
   cannot be tidied up through the control plane using a PathTear from
   the upstream node (Node A), because there is no control plane
   connectivity to Node C from the upstream direction.  There are two
   possibilities in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>]:

   - Management action may be taken at the restarting node to tear the
     LSP.  This will result in the LSP being removed from Node C and a
     PathTear being sent downstream to Node D.

   - Management action may be taken at any downstream node (for example,
     Node D), resulting in a PathErr message with the Path_State_Removed
     flag set being sent to Node C to tear the LSP state.





<span class="grey">Li, et al.                   Informational                     [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   Note that if Node B restarts after this operation, the Path message
   that it sends to Node C will not be matched with any state on Node C
   and will be treated as a new Path message, resulting in LSP setup.
   Node C should use the labels carried in the Path message (in the
   Upstream_Label Object and in the Recovery_Label Object) to drive its
   label allocation, but may use other labels according to normal LSP
   setup rules.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.3.%20%20Procedures%20for%20Scenario%203"></a><a class="selflink" href="#section-5.2.3" name="section-5.2.3">5.2.3</a>.  Procedures for Scenario 3</span>

   In this example, the restarting node (Node C) is isolated.  Its
   upstream and downstream neighbors have not restarted.

   The restarting node (Node C) follows the procedures in <a href="rfc3473.html#section-9.3">Section 9.3 of
   [RFC3473]</a> and may run a Restart Timer for each of its neighbors
   (Nodes B and D).  If a neighbor has not restarted before its Restart
   Timer expires, the corresponding LSPs may be torn down according to
   local policy [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  Note, however, that the Restart Time values
   suggested in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] are based on the previous Hello message
   exchanged with the nodes that have not restarted yet.  Since these
   time values are unlikely to be available to the restarting node (Node
   C), a configured time value must be used if the timer is operated.

   During the Recovery Time, if the upstream delayed restarting node has
   restarted, the procedure for scenario 1 can be applied.

   During the Recovery Time, if the downstream delayed restarting node
   has restarted, the procedure for scenario 2 can be applied.

   In the case that neither delayed restarting node ever comes back and
   a Restart Timer is not used to automatically tear down LSPs,
   management intervention is required to tidy up the control plane and
   the data plane on the node that is waiting for the failed device to
   restart.

   If the downstream delayed restarting node restarts after the cleanup
   of LSPs at Node C, the RecoveryPath message from Node D will be
   responded to with a PathTear message.  If the upstream delayed
   restarting node restarts after the cleanup of LSPs at Node C, the
   Path message from Node B will be treated as a new LSP setup request,
   but the setup will fail because Node D cannot be reached; Node C will
   respond with a PathErr message.  Since this happens to Node B during
   its restart processing, it should follow the rules of [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>] and
   tear down the LSP.







<span class="grey">Li, et al.                   Informational                     [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.4.%20%20Procedures%20for%20Scenario%204"></a><a class="selflink" href="#section-5.2.4" name="section-5.2.4">5.2.4</a>.  Procedures for Scenario 4</span>

   When the ingress node (Node A) restarts, it does not know which LSPs
   it caused to be created.  Usually, however, this information is
   retrieved from the management plane or from the configuration
   requests stored in non-volatile form in the node in order to recover
   the LSP state.

   Furthermore, if the downstream node (Node B) is a normal node,
   according to the procedures in [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>], the ingress will receive a
   RecoveryPath message and will understand that it was the ingress of
   the LSP.

   However, in this scenario, the downstream node is a delayed
   restarting node, so Node A must either rely on the information from
   the management plane or stored configuration, or it must wait for
   Node B to restart.

   In the event that Node B never restarts, management plane
   intervention is needed at Node A to clean up any LSP control plane
   state restored from the management plane or from local configuration,
   and to release any data plane resources.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/5.2.5.%20%20Procedures%20for%20Scenario%205"></a><a class="selflink" href="#section-5.2.5" name="section-5.2.5">5.2.5</a>.  Procedures for Scenario 5</span>

   In this scenario, the egress node (Node D) restarts, and its upstream
   neighbor (Node C) has not restarted.  In this case, the egress node
   may have no control plane state relating to the LSPs.  It has no
   downstream neighbor to help it and no management plane or
   configuration information, although there will be data plane state
   for the LSP.  The egress node must simply wait until its upstream
   neighbor restarts and gives it the information in Path messages
   carrying Recovery_Label Objects.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Consideration%20of%20the%20Reuse%20of%20Data%20Plane%20Resources"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Consideration of the Reuse of Data Plane Resources</span>

   Fundamental to the processes described above is an understanding that
   data plane resources may remain in use (allocated and cross-
   connected) when control plane state has not been fully resynchronized
   because some control plane nodes have not restarted.

   It is assumed that these data plane resources might be carrying
   traffic and should not be reconfigured except through application of
   operator-configured policy, or as a direct result of operator action.

   In particular, new LSP setup requests from the control plane or the
   management plane should not be allowed to use data plane resources




<span class="grey">Li, et al.                   Informational                     [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   that are still in use.  Specific action must first be taken to
   release the resources.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20Consideration%20of%20Management%20Plane%20Intervention"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  Consideration of Management Plane Intervention</span>

   The management plane must always retain the ability to control data
   plane resources and to override the control plane.  In this context,
   the management plane must always be able to release data plane
   resources that were previously in place for use by control-plane-
   established LSPs.  Further, the management plane must always be able
   to instruct any control plane node to tear down any LSP.

   Operators should be aware of the risks of misconnection that could be
   caused by careless manipulation from the management plane of in-use
   data plane resources.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Clarification%20of%20Restarting%20Node%20Procedure"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Clarification of Restarting Node Procedure</span>

   According to the current graceful restart procedure [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>], after
   a node restarts its control plane, it needs its upstream node to send
   a PATH message with a recovery label in order to synchronize its RSVP
   state.  If the restarted control plane becomes operational quickly,
   the upstream node may not detect the restarting of the downstream
   node and, therefore, may send a PATH message without a recovery
   label, causing errors and unwanted connection deletion.


























<span class="grey">Li, et al.                   Informational                     [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


     N1               N2
     |                |
     |                X (Restart start)
     | HELLO          |
     |---------------&gt;|
     |                |
     | SRefresh       |
     |---------------&gt;|
     |                |
     | HELLO          |
     |---------------&gt;|
     |                |
     |                X (Restart complete)
     | SRefresh       |
     |---------------&gt;|
     | NACK           |
     |&lt;---------------|
     | Path without   |
     | recovery label |
     |---------------&gt;|
     |                X (resource allocation failed because the
     |                | resources are in use)
     |  PathErr       |
     |&lt;---------------|
     |  PathTear      |
     |---------------&gt;|
     X(LSP deletion)  X (LSP deletion)
     |                |

            Figure 2: Message Flow for Accidental LSP Deletion

   The sequence diagram above depicts one scenario where the LSP may get
   deleted.

   In this sequence, N1 does not detect Hello failure and continues
   sending SRefreshes, which may get NACK'ed by N2 once restart
   completes because there is no Path state corresponding to the
   SRefresh message.  This NACK causes a Path refresh message to be
   generated, but there is no Recovery_Label because N1 does not yet
   detect that N2 has restarted, as Hello exchanges have not yet
   started.  The Path message is treated as "new" and fails to allocate
   the resources because they are still in use.  This causes a PathErr
   message to be generated, which may lead to the teardown of the LSP.

   To resolve the aforementioned problem, the following procedures,
   which are implicit in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>], should be followed.
   These procedures work together with the recovery procedures
   documented in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  Here, it is assumed that the restarting



<span class="grey">Li, et al.                   Informational                     [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   node and the neighboring node(s) support the Hello extension as
   documented in [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>] as well as the recovery procedures documented
   in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].

   After a node restarts its control plane, it should ignore and
   silently drop all RSVP-TE messages (except Hello messages) it
   receives from any neighbor to which no HELLO session has been
   established.

   The restarting node should follow [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>] to establish Hello
   sessions with its neighbors, after its control plane becomes
   operational.

   The restarting node resumes processing of RSVP-TE messages sent from
   each neighbor to which the Hello session has been established.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Security Considerations</span>

   This document clarifies the procedures defined in [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] and
   [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>] to be performed on RSVP agents that neighbor one or more
   restarting RSVP agents.  It does not introduce any new procedures
   and, therefore, does not introduce any new security risks or issues.

   In the case of the control plane in general, and the RSVP agent in
   particular, where one or more nodes carrying one or more LSPs are
   restarted due to external attacks, the procedures defined in
   [<a href="rfc5063.html" title='"Extensions to GMPLS Resource Reservation Protocol (RSVP) Graceful Restart"'>RFC5063</a>] and described in this document provide the ability for the
   restarting RSVP agents to recover the RSVP state in each restarting
   node corresponding to the LSPs, with the least possible perturbation
   to the rest of the network.  These procedures can be considered to
   provide mechanisms by which the GMPLS network can recover from
   physical attacks or from attacks on remotely controlled power
   supplies.

   The procedures described are such that only the neighboring RSVP
   agents should notice the restart of a node, and hence only they need
   to perform additional processing.  This allows for a network with
   active LSPs to recover LSP state gracefully from an external attack,
   without perturbing the data/forwarding plane state and without
   propagating the error condition in the control or data plane.  In
   other words, the effect of the restart (which might be the result of
   an attack) does not spread into the network.

   Note that concern has been expressed about the vulnerability of a
   restarting node to false messages received from its neighbors.  For
   example, a restarting node might receive a false Path message with a





<span class="grey">Li, et al.                   Informational                     [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


   Recovery_Label Object from an upstream neighbor, or a false
   RecoveryPath message from its downstream neighbor.  This situation
   might arise in one of four cases:

   - The message is spoofed and does not come from the neighbor at all.

   - The message has been modified as it was traveling from the
     neighbor.

   - The neighbor is defective and has generated a message in error.

   - The neighbor has been subverted and has a "rogue" RSVP agent.

   The first two cases may be handled using standard RSVP authentication
   and integrity procedures [<a href="rfc3209.html" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>], [<a href="rfc3473.html" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>].  If the operator is
   particularly worried, the control plane may be operated using IPsec
   [<a href="rfc4301.html" title='"Security Architecture for the Internet Protocol"'>RFC4301</a>], [<a href="rfc4302.html" title='"IP Authentication Header"'>RFC4302</a>], [<a href="rfc4835.html" title='"Cryptographic Algorithm Implementation Requirements for Encapsulating Security Payload (ESP) and Authentication Header (AH)"'>RFC4835</a>], [<a href="rfc4306.html" title='"Internet Key Exchange (IKEv2) Protocol"'>RFC4306</a>], and [<a href="rfc2411.html" title='"IP Security Document Roadmap"'>RFC2411</a>].

   Protection against defective or rogue RSVP implementations is
   generally hard-to-impossible.  Neighbor-to-neighbor authentication
   and integrity validation is, by definition, ineffective in these
   situations.  For example, if a neighbor node sends a Resv during
   normal LSP setup, and if that message carries a Generalized_Label
   Object carrying an incorrect label value, then the receiving LSR will
   use the supplied value and the LSP will be set up incorrectly.
   Alternatively, if a Path message is modified by an upstream LSR to
   change the destination and explicit route, there is no way for the
   downstream LSR to detect this, and the LSP may be set up to the wrong
   destination.  Furthermore, the upstream LSR could disguise this fact
   by modifying the recorded route reported in the Resv message.  Thus,
   these issues are in no way specific to the restart case, do not cause
   any greater or different problems from the normal case, and do not
   warrant specific security measures applicable to restart scenarios.

   Note that the RSVP Policy_Data Object [<a href="rfc2205.html" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RFC2205</a>] provides a scope by
   which secure end-to-end checks could be applied.  However, very
   little definition of the use of this object has been made to date.

   See [<a href="#ref-MPLS-SEC" title='"Security Framework for MPLS and GMPLS Networks"'>MPLS-SEC</a>] for a wider discussion of security in MPLS and GMPLS
   networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Acknowledgments"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Acknowledgments</span>

   We would like to thank Adrian Farrel, Dimitri Papadimitriou, and Lou
   Berger for their useful comments.






<span class="grey">Li, et al.                   Informational                     [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20References"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.1.%20%20Normative%20References"></a><a class="selflink" href="#section-9.1" name="section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-RFC2209" name="ref-RFC2209">RFC2209</a>]  Braden, R. and L. Zhang, "Resource ReSerVation Protocol
              (RSVP) -- Version 1 Message Processing Rules", <a href="rfc2209.html">RFC 2209</a>,
              September 1997.

   [<a id="ref-RFC3209" name="ref-RFC3209">RFC3209</a>]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", <a href="rfc3209.html">RFC 3209</a>, December 2001.

   [<a id="ref-RFC3473" name="ref-RFC3473">RFC3473</a>]  Berger, L., Ed., "Generalized Multi-Protocol Label
              Switching (GMPLS) Signaling Resource ReserVation
              Protocol-Traffic Engineering (RSVP-TE) Extensions", <a href="rfc3473.html">RFC</a>
              <a href="rfc3473.html">3473</a>, January 2003.

   [<a id="ref-RFC5063" name="ref-RFC5063">RFC5063</a>]  Satyanarayana, A., Ed., and R. Rahman, Ed., "Extensions to
              GMPLS Resource Reservation Protocol (RSVP) Graceful
              Restart", <a href="rfc5063.html">RFC 5063</a>, October 2007.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/9.2.%20%20Informative%20References"></a><a class="selflink" href="#section-9.2" name="section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-MPLS-SEC" name="ref-MPLS-SEC">MPLS-SEC</a>] Fang, L., "Security Framework for MPLS and GMPLS
              Networks", Work in Progress, November 2008.

   [<a id="ref-RFC2205" name="ref-RFC2205">RFC2205</a>]  Braden, R., Ed., Zhang, L., Berson, S., Herzog, S., and S.
              Jamin, "Resource ReSerVation Protocol (RSVP) -- Version 1
              Functional Specification", <a href="rfc2205.html">RFC 2205</a>, September 1997.

   [<a id="ref-RFC2411" name="ref-RFC2411">RFC2411</a>]  Thayer, R., Doraswamy, N., and R. Glenn, "IP Security
              Document Roadmap", <a href="rfc2411.html">RFC 2411</a>, November 1998.

   [<a id="ref-RFC4301" name="ref-RFC4301">RFC4301</a>]  Kent, S. and K. Seo, "Security Architecture for the
              Internet Protocol", <a href="rfc4301.html">RFC 4301</a>, December 2005.

   [<a id="ref-RFC4302" name="ref-RFC4302">RFC4302</a>]  Kent, S., "IP Authentication Header", <a href="rfc4302.html">RFC 4302</a>, December
              2005.

   [<a id="ref-RFC4306" name="ref-RFC4306">RFC4306</a>]  Kaufman, C., Ed., "Internet Key Exchange (IKEv2)
              Protocol", <a href="rfc4306.html">RFC 4306</a>, December 2005.

   [<a id="ref-RFC4835" name="ref-RFC4835">RFC4835</a>]  Manral, V., "Cryptographic Algorithm Implementation
              Requirements for Encapsulating Security Payload (ESP) and
              Authentication Header (AH)", <a href="rfc4835.html">RFC 4835</a>, April 2007.






<span class="grey">Li, et al.                   Informational                     [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc5495.html">RFC 5495</a>          RSVP-TE Graceful Restart Procedures      February 2009</span>


Authors' Addresses

   Dan Li
   Huawei Technologies
   F3-5-B R&amp;D Center, Huawei Base,
   Shenzhen 518129, China

   Phone: +86 755 28970230
   EMail: danli@huawei.com


   Jianhua Gao
   Huawei Technologies
   F3-5-B R&amp;D Center, Huawei Base,
   Shenzhen 518129, China

   Phone: +86 755 28972902
   EMail: gjhhit@huawei.com


   Arun Satyanarayana
   Cisco Systems
   170 West Tasman Dr
   San Jose, CA 95134, USA

   Phone: +1 408 853-3206
   EMail: asatyana@cisco.com


   Snigdho C. Bardalai
   Fujitsu Network Communications
   2801 Telecom Parkway
   Richardson, Texas 75082, USA

   Phone: +1 972 479 2951
   EMail: snigdho.bardalai@us.fujitsu.com















Li, et al.                   Informational                     [Page 18]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc5495 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:35 GMT --></html>