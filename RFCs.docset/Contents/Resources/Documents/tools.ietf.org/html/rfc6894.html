<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc6894 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:26 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:6894" name="DC.Identifier"/>
<meta content="This document describes the methodology for benchmarking MPLS Fast
Reroute (FRR) protection mechanisms for link and node protection. This
document provides test methodologies and testbed setup for measuring
failover times of Fast Reroute techniques while considering factors
(such as underlying links) that might impact recovery times for real-
time applications bound to MPLS Traffic Engineered (MPLS-TE) tunnels." name="DC.Description.Abstract"/>
<meta content="Vapiwala, Samir" name="DC.Creator"/>
<meta content="Karthik, Jay" name="DC.Creator"/>
<meta content="Papneja, Rajiv" name="DC.Creator"/>
<meta content="Rao, Shankar" name="DC.Creator"/>
<meta content="Roux, JL. Le" name="DC.Creator"/>
<meta content="Poretsky, Scott" name="DC.Creator"/>
<meta content="March, 2013" name="DC.Date.Issued"/>
<meta content="Methodology for Benchmarking MPLS Traffic Engineered (MPLS-TE) Fast Reroute Protection" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 6894 - Methodology for Benchmarking MPLS Traffic Engineered (MPLS-TE) Fast Reroute Protection</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgorange" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc6894.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc6894" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-bmwg-protection-meth" title="draft-ietf-bmwg-protection-meth">draft-ietf-bmwg...</a>] [<a href="https://datatracker.ietf.org/doc/rfc6894" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc6894" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc6894" title="Side-by-side diff">Diff2</a>]         </span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<pre>Internet Engineering Task Force (IETF)                        R. Papneja
Request for Comments: 6894                           Huawei Technologies
Category: Informational                                      S. Vapiwala
ISSN: 2070-1721                                               J. Karthik
                                                           Cisco Systems
                                                             S. Poretsky
                                                    Allot Communications
                                                                  S. Rao
                                                    Qwest Communications
                                                             JL. Le Roux
                                                          France Telecom
                                                              March 2013


     <span class="h1">Methodology for Benchmarking MPLS Traffic Engineered (MPLS-TE)</span>
                        <span class="h1">Fast Reroute Protection</span>

Abstract

   This document describes the methodology for benchmarking MPLS Fast
   Reroute (FRR) protection mechanisms for link and node protection.
   This document provides test methodologies and testbed setup for
   measuring failover times of Fast Reroute techniques while considering
   factors (such as underlying links) that might impact
   recovery times for real-time applications bound to MPLS Traffic
   Engineered (MPLS-TE) tunnels.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="rfc5741.html#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any
   errata, and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6894">http://www.rfc-editor.org/info/rfc6894</a>.









<span class="grey">Papneja, et al.               Informational                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Document Scope ..................................................<a href="#page-5">5</a>
   <a href="#section-3">3</a>. Existing Definitions and Requirements ...........................<a href="#page-5">5</a>
   <a href="#section-4">4</a>. General Reference Topology ......................................<a href="#page-6">6</a>
   <a href="#section-5">5</a>. Test Considerations .............................................<a href="#page-7">7</a>
      <a href="#section-5.1">5.1</a>. Failover Events ............................................<a href="#page-7">7</a>
      <a href="#section-5.2">5.2</a>. Failure Detection ..........................................<a href="#page-8">8</a>
      <a href="#section-5.3">5.3</a>. Use of Data Traffic for MPLS Protection Benchmarking .......<a href="#page-8">8</a>
      <a href="#section-5.4">5.4</a>. LSP and Route Scaling ......................................<a href="#page-9">9</a>
      <a href="#section-5.5">5.5</a>. Selection of IGP ...........................................<a href="#page-9">9</a>
      <a href="#section-5.6">5.6</a>. Restoration and Reversion ..................................<a href="#page-9">9</a>
      <a href="#section-5.7">5.7</a>. Offered Load ...............................................<a href="#page-9">9</a>
      <a href="#section-5.8">5.8</a>. Tester Capabilities .......................................<a href="#page-10">10</a>
      <a href="#section-5.9">5.9</a>. Failover Time Measurement Methods .........................<a href="#page-10">10</a>
   <a href="#section-6">6</a>. Reference Test Setup ...........................................<a href="#page-11">11</a>
      <a href="#section-6.1">6.1</a>. Link Protection ...........................................<a href="#page-12">12</a>
           6.1.1. Link Protection: 1-Hop Primary (from PLR)
                  and 1-Hop Backup Tail-End Tunnels ..................<a href="#page-12">12</a>




<span class="grey">Papneja, et al.               Informational                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


           6.1.2. Link Protection: 1-Hop Primary (from PLR)
                  and 2-Hop Backup Tail-End Tunnels ..................<a href="#page-13">13</a>
           6.1.3. Link Protection: 2-Hop (or More) Primary (from PLR)
                  and 1-Hop Backup Tail-End Tunnels ..................<a href="#page-14">14</a>
           6.1.4. Link Protection: 2-Hop (or More) Primary (from PLR)
                  and 2-Hop Backup Tail-End Tunnels ..................<a href="#page-15">15</a>
      <a href="#section-6.2">6.2</a>. Node Protection ...........................................<a href="#page-16">16</a>
           6.2.1. Node Protection: 2-Hop Primary (from PLR)
                  and 1-Hop Backup Tail-End Tunnels ..................<a href="#page-16">16</a>
           6.2.2. Node Protection: 2-Hop Primary (from PLR)
                  and 2-Hop Backup Tail-End Tunnels ..................<a href="#page-17">17</a>
           6.2.3. Node Protection: 3-Hop (or More) Primary (from PLR)
                  and 1-Hop Backup Tail-End Tunnels ..................<a href="#page-18">18</a>
           6.2.4. Node Protection: 3-Hop (or More) Primary (from PLR)
                  and 2-Hop Backup Tail-End Tunnels ..................<a href="#page-19">19</a>
   <a href="#section-7">7</a>. Test Methodology ...............................................<a href="#page-19">19</a>
      <a href="#section-7.1">7.1</a>. MPLS-FRR Forwarding Performance ...........................<a href="#page-20">20</a>
           <a href="#section-7.1.1">7.1.1</a>. Head-End PLR Forwarding Performance ................<a href="#page-20">20</a>
           <a href="#section-7.1.2">7.1.2</a>. Midpoint PLR Forwarding Performance ................<a href="#page-21">21</a>
      <a href="#section-7.2">7.2</a>. Head-End PLR with Link Failure ............................<a href="#page-22">22</a>
      <a href="#section-7.3">7.3</a>. Midpoint PLR with Link Failure ............................<a href="#page-24">24</a>
      <a href="#section-7.4">7.4</a>. Head-End PLR with Node Failure ............................<a href="#page-25">25</a>
      <a href="#section-7.5">7.5</a>. Midpoint PLR with Node Failure ............................<a href="#page-26">26</a>
   <a href="#section-8">8</a>. Reporting Format ...............................................<a href="#page-27">27</a>
   <a href="#section-9">9</a>. Security Considerations ........................................<a href="#page-29">29</a>
   <a href="#section-10">10</a>. Acknowledgements ..............................................<a href="#page-29">29</a>
   <a href="#section-11">11</a>. References ....................................................<a href="#page-29">29</a>
      <a href="#section-11.1">11.1</a>. Normative References .....................................<a href="#page-29">29</a>
      <a href="#section-11.2">11.2</a>. Informative References ...................................<a href="#page-30">30</a>
   <a href="#appendix-A">Appendix A</a>. Fast Reroute Scalability Table ........................<a href="#page-31">31</a>
   <a href="#appendix-B">Appendix B</a>. Abbreviations .........................................<a href="#page-34">34</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document describes the methodology for benchmarking MPLS Fast
   Reroute (FRR) protection mechanisms.  This document uses much of the
   terminology defined in [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

   Protection mechanisms provide recovery of client services from a
   planned or an unplanned link or node failure.  MPLS-FRR protection
   mechanisms are generally deployed in a network infrastructure where
   MPLS is used for the provisioning of point-to-point traffic
   engineered tunnels (tunnel).  MPLS-FRR protection mechanisms aim to
   reduce the service disruption period by minimizing recovery time from
   most common failures.






<span class="grey">Papneja, et al.               Informational                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


   Network elements from different manufacturers behave differently to
   network failures, which impacts the network's ability and performance
   for failure recovery.  Therefore, it becomes imperative for service
   providers to have a common benchmark to understand the performance
   behaviors of network elements.

   There are two factors impacting service availability: frequency of
   failures and duration for which the failures persist.  Failures can
   be classified further into two types: correlated and uncorrelated.
   Correlated and uncorrelated failures may be planned or unplanned.

   Planned failures are generally predictable.  Network implementations
   should be able to handle both planned and unplanned failures and
   recover gracefully within a time frame to maintain service assurance.
   Hence, failover recovery time is one of the most important benchmarks
   that a service provider considers in choosing the building blocks for
   their network infrastructure.

   A correlated failure is a result of the occurrence of two or more
   failures.  A typical example is failure of a logical resource (e.g.,
   Layer-2 (L2) links) due to a dependency on a common physical resource
   (e.g., common conduit) that fails.  Within the context of MPLS
   protection mechanisms, failures that arise due to Shared Risk Link
   Groups (SRLGs) [<a href="rfc4202.html" title='"Routing Extensions in Support of Generalized Multi-Protocol Label Switching (GMPLS)"'>RFC4202</a>] can be considered as correlated failures.

   MPLS-FRR [<a href="rfc4090.html" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] allows for the possibility that the Label Switched
   Paths (LSPs) can be reoptimized in the minutes following failover.
   IP traffic would be rerouted according to the preferred path for the
   post-failure topology.  Thus, MPLS-FRR may include additional steps
   following the occurrence of the failure detection and failover event
   [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

   (1)  Failover Event - Primary path (working path) fails

   (2)  Failure Detection - Failover event is detected

   (3a)  Failover - Working path switched to backup path

   (3b)  Reoptimization of working path (possible change from backup
         path)

   (4)  Restoration (see <a href="rfc6414.html#section-3.3.5">Section 3.3.5 of [RFC6414]</a>)

   (5)  Reversion (see <a href="rfc6414.html#section-3.3.6">Section 3.3.6 of [RFC6414]</a>)







<span class="grey">Papneja, et al.               Informational                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20Document%20Scope"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  Document Scope</span>

   This document provides detailed test cases along with different
   topologies and scenarios that should be considered to effectively
   benchmark MPLS-FRR protection mechanisms and failover times on the
   data plane.  Different failover events and scaling considerations are
   also provided in this document.

   All benchmarking test cases defined in this document apply to
   facility backup [<a href="rfc4090.html" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>].  The test cases cover a set of interesting
   failure scenarios and the associated procedures benchmark the
   performance of the Device Under Test (DUT) to recover from failures.
   Data-plane traffic is used to benchmark failover times.  Testing
   scenarios related to MPLS-TE protection mechanisms when applied to
   MPLS Transport Profile and IP fast reroute applied to MPLS networks
   were not considered and are outside the scope of this document.
   However, the test setups considered for MPLS-based L3 and L2 services
   consider LDP over MPLS RSVP-TE configurations.

   Benchmarking of correlated failures is outside the scope of this
   document.  Detection using Bidirectional Forwarding Detection (BFD)
   is outside the scope of this document, but it is mentioned in
   discussion sections.

   The performance of the control plane is outside the scope of this
   document.

   As described above, MPLS-FRR may include a reoptimization of the
   working path, with possible packet transfer impairments.
   Characterization of reoptimization is beyond the scope of this memo.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20Existing%20Definitions%20and%20Requirements"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  Existing Definitions and Requirements</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].
   While [<a href="rfc2119.html" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] defines the use of these key words primarily for
   Standards Track documents, this Informational document uses some of
   these key words.

   The reader is assumed to be familiar with the commonly used MPLS
   terminology, some of which is defined in [<a href="rfc4090.html" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>].

   This document uses much of the terminology defined in [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].
   This document also uses existing terminology defined in other BMWG
   documents [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>] [<a href="rfc2285.html" title='"Benchmarking Terminology for LAN Switching Devices"'>RFC2285</a>] [<a href="rfc4689.html" title='"Terminology for Benchmarking Network-layer Traffic Control Mechanisms"'>RFC4689</a>].  <a href="#appendix-B">Appendix B</a> provides
   abbreviations used in the document.




<span class="grey">Papneja, et al.               Informational                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20General%20Reference%20Topology"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  General Reference Topology</span>

   Figure 1 illustrates the general reference topology.  It shows the
   basic reference testbed and is applicable to all the test cases
   defined in this document.  The Tester is comprised of a Traffic
   Generator (TG) and Traffic Analyzer (TA) and Emulator.  A Tester is
   connected to the test network and, depending upon the test case, the
   DUT could vary.  The Tester sends and receives IP traffic to the
   tunnel ingress and performs signaling protocol emulation to simulate
   real network scenarios in a lab environment.  The Tester may also
   support MPLS-TE signaling to act as the ingress node to the MPLS
   tunnel.  The lines in figures represent physical connections.

        +---------------------------+
        |              +------------|---------------+
        |              |            |               |
        |              |            |               |
    +--------+     +--------+    +--------+    +--------+   +--------+
TG--|   R1   |-----|   R2   |----|   R3   |    |    R4  |   |  R5    |
    |        |-----|        |----|        |----|        |---|        |
    +--------+     +--------+    +--------+    +--------+   +--------+
        |             |              |            |            |
        |             |              |            |            |
        |         +--------+         |            |           TA
        +---------|   R6   |---------+            |
                  |        |----------------------+
                  +--------+

                                Figure 1

   The tester MUST record the number of lost, duplicate, and out-of-
   order packets.  It should further record arrival and departure times
   so that failover time, Additive Latency, and Reversion Time can be
   measured.  The tester may be a single device or a test system
   emulating all the different roles along a primary or backup path.

   The label stack is dependent on the following three entities:

   (1)  Type of protection (Link versus Node)

   (2)  Number of remaining hops of the primary tunnel from the Point of
        Local Repair (PLR) [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>]

   (3)  Number of remaining hops of the backup tunnel from the PLR

   Due to this dependency, it is RECOMMENDED that the benchmarking of
   failover times be performed on all the topologies provided in <a href="#section-6">Section</a>
   <a href="#section-6">6</a>.



<span class="grey">Papneja, et al.               Informational                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Test%20Considerations"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Test Considerations</span>

   This section discusses the fundamentals of MPLS Protection testing:

      (1)  The types of network events that cause failover (<a href="#section-5.1">Section 5.1</a>)

      (2)  Indications for failover (<a href="#section-5.2">Section 5.2</a>)

      (3)  The use of data traffic (<a href="#section-5.3">Section 5.3</a>)

      (4)  Label Switched Path Scaling (<a href="#section-5.4">Section 5.4</a>)

      (5)  IGP Selection (<a href="#section-5.5">Section 5.5</a>)

      (6)  Reversion of LSP (<a href="#section-5.6">Section 5.6</a>)

      (7)  Traffic generation (<a href="#section-5.7">Section 5.7</a>)

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.1.%20%20Failover%20Events"></a><a class="selflink" href="#section-5.1" name="section-5.1">5.1</a>.  Failover Events</span>

   The failover to the backup tunnel is primarily triggered by either
   link or node failures observed downstream of the Point of Local
   Repair (PLR).  The failure events [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>] are listed below.

   Link Failure Events
      - Interface Shutdown on PLR side with physical/link alarm
      - Interface Shutdown on remote side with physical/link alarm
      - Interface Shutdown on PLR side with RSVP hello enabled
      - Interface Shutdown on remote side with RSVP hello enabled
      - Interface Shutdown on PLR side with BFD
      - Interface Shutdown on remote side with BFD
      - Fiber Pull on the PLR side (both Transmit (TX) and Receive (RX)
        or just the TX)
      - Fiber Pull on the remote side (both TX and RX or just the RX)
      - Online Insertion and Removal (OIR) on PLR side
      - OIR on remote side
      - Sub-interface failure on PLR side (e.g., shutting down of a
        VLAN)
      - Sub-interface failure on remote side
      - Parent interface shutdown on PLR side (an interface bearing
        multiple sub-interfaces)
      - Parent interface shutdown on remote side

   Node Failure Events
      - A System reload initiated by either a graceful shutdown or a
        power failure
      - A system crash due to a software failure or an assert




<span class="grey">Papneja, et al.               Informational                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.2.%20%20Failure%20Detection"></a><a class="selflink" href="#section-5.2" name="section-5.2">5.2</a>.  Failure Detection</span>

   Link failure detection [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>] time depends on the link type and
   failure detection protocols running.  For Synchronous Optical Network
   (SONET) / Synchronous Digital Hierarchy (SDH), the alarm type (such
   as LOS, AIS, or RDI) can be used.  Other link types have L2 alarms,
   but they may not provide a short enough failure detection time.
   Ethernet-based links enabled with MPLS/IP do not have L2 failure
   indicators; therefore, they rely on L3 signaling for failure
   detection.  However, for directly connected devices, remote fault
   indication in the ethernet auto-negotiation scheme could be
   considered as a type of L2 link failure indicator.

   MPLS has different failure detection techniques, such as BFD, or use
   of RSVP hellos.  These methods can be used for the L3 failure
   indicators required by ethernet-based links or for some other non-
   ethernet-based links to help improve failure detection time.
   However, these fast failure detection mechanisms are out of scope.

   The test procedures in this document can be used for local failure or
   remote failure scenarios for comprehensive benchmarking and to
   evaluate failover performance independent of the failure detection
   techniques.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.3.%20%20Use%20of%20Data%20Traffic%20for%20MPLS%20Protection%20Benchmarking"></a><a class="selflink" href="#section-5.3" name="section-5.3">5.3</a>.  Use of Data Traffic for MPLS Protection Benchmarking</span>

   Currently, end customers use packet loss as a key metric for failover
   time [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].  Failover Packet Loss [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>] is an externally
   observable event and has a direct impact on application performance.
   MPLS protection is expected to minimize packet loss in the event of a
   failure.  For this reason, it is important to develop a standard
   router benchmarking methodology for measuring MPLS protection that
   uses packet loss as a metric.  At a known rate of forwarding, packet
   loss can be measured and the failover time can be determined.
   Measurement of control-plane signaling to establish backup paths is
   not enough to verify failover.  Failover is best determined when
   packets are actually traversing the backup path.

   An additional benefit of using packet loss for calculation of
   failover time is that it allows use of a black-box test environment.
   Data traffic is offered at line-rate to the DUT, an emulated network
   failure event is forced to occur, and packet loss is externally
   measured to calculate the convergence time.  This setup is
   independent of the DUT architecture.

   In addition, this methodology considers the packets in error and
   duplicate packets [<a href="rfc4689.html" title='"Terminology for Benchmarking Network-layer Traffic Control Mechanisms"'>RFC4689</a>] that could have been generated during the
   failover process.  The methodologies consider lost, out-of-order



<span class="grey">Papneja, et al.               Informational                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


   [<a href="rfc4689.html" title='"Terminology for Benchmarking Network-layer Traffic Control Mechanisms"'>RFC4689</a>], and duplicate packets to be impaired packets that
   contribute to the failover time.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.4.%20%20LSP%20and%20Route%20Scaling"></a><a class="selflink" href="#section-5.4" name="section-5.4">5.4</a>.  LSP and Route Scaling</span>

   Failover time performance may vary with the number of established
   primary and backup tunnel LSPs and installed routes.  However, the
   procedure outlined here should be used for any number of LSPs (L) and
   any number of routes protected by the PLR (R).  The values of L and R
   must be recorded.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.5.%20%20Selection%20of%20IGP"></a><a class="selflink" href="#section-5.5" name="section-5.5">5.5</a>.  Selection of IGP</span>

   The underlying IGP could be ISIS-TE or OSPF-TE for the methodology
   proposed here.  See [<a href="rfc6412.html" title='"Terminology for Benchmarking Link-State IGP Data-Plane Route Convergence"'>RFC6412</a>] for IGP options to consider and report.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.6.%20%20Restoration%20and%20Reversion"></a><a class="selflink" href="#section-5.6" name="section-5.6">5.6</a>.  Restoration and Reversion</span>

   Path restoration [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>] provides a method to restore an alternate
   primary LSP upon failure and to switch traffic from the backup path
   to the restored primary path (reversion).  In MPLS-FRR, reversion
   [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>] can be implemented as Global Reversion or Local Reversion.
   It is important to include restoration and reversion as a step in
   each test case to measure the amount of packet loss, out-of-order
   packets, or duplicate packets that are produced.

   Note: In addition to restoration and reversion, reoptimization can
   take place while the failure is still not recovered but it depends on
   the user configuration and reoptimization timers.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.7.%20%20Offered%20Load"></a><a class="selflink" href="#section-5.7" name="section-5.7">5.7</a>.  Offered Load</span>

   It is suggested that there be three or more traffic streams as long
   as there is a steady and constant rate of flow for all of the
   streams.  In order to monitor the DUT performance for recovery times,
   a set of route prefixes should be advertised before traffic is sent.
   The traffic should be configured towards these routes.

   Prefix-dependency behaviors are key in IP, and tests with route-
   specific flows spread across the routing table will reveal this
   dependency.  Generating traffic to all of the prefixes reachable by
   the protected tunnel (probably in a Round-Robin fashion, where the
   traffic is destined to all the prefixes but one prefix at a time in a
   cyclic manner) is not recommended.  Round-Robin traffic generation is
   not recommended to all prefixes, as time to hit all the prefixes may
   be higher than the failover time.  This phenomenon will reduce the
   granularity of the measured results, and the results observed may not
   be accurate.



<span class="grey">Papneja, et al.               Informational                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.8.%20%20Tester%20Capabilities"></a><a class="selflink" href="#section-5.8" name="section-5.8">5.8</a>.  Tester Capabilities</span>

   It is RECOMMENDED that the Tester used to execute each test case have
   the following capabilities:

      1. Ability to establish MPLS-TE tunnels and push/pop labels.

      2. Ability to produce a failover event [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

      3. Ability to insert a timestamp in each data packet's IP payload.

      4. An internal time clock to control timestamping, time
         measurements, and time calculations.

      5. Ability to disable or tune specific L2 and L3 protocol
         functions on any interface.

      6. Ability to react upon the receipt of path error from the PLR.

   The Tester MAY be capable of making non-data-plane convergence
   observations and use those observations for measurements.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/5.9.%20%20Failover%20Time%20Measurement%20Methods"></a><a class="selflink" href="#section-5.9" name="section-5.9">5.9</a>.  Failover Time Measurement Methods</span>

   Failover time [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>] is calculated using one of the following
   three methods:

      1. Packet-Loss-Based Method (PLBM): (Number of packets dropped/
         packets per second * 1000) milliseconds.  This method could
         also be referred to as the Loss-Derived method.

      2. Time-Based Loss Method (TBLM): This method relies on the
         ability of the traffic generators to provide statistics that
         reveal the duration of failure in milliseconds based on when
         the packet loss occurred (interval between non-zero packet loss
         and zero loss).

      3. Timestamp-Based Method (TBM): This method of failover
         calculation is based on the timestamp that gets transmitted as
         payload in the packets originated by the generator.  The
         traffic analyzer records the timestamp of the last packet
         received before the failover event and the first packet after
         the failover and derives the time based on the difference
         between these two timestamps.  Note: The payload could also
         contain sequence numbers for out-of-order packet calculation
         and duplicate packets.





<span class="grey">Papneja, et al.               Informational                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


   TBM would be able to detect reversion impairments beyond loss; thus,
   it is RECOMMENDED as the failover time method.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Reference%20Test%20Setup"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Reference Test Setup</span>

   In addition to the general reference topology shown in Figure 1, this
   section provides detailed insight into various proposed test setups
   that should be considered for comprehensively benchmarking the
   failover time in different roles along the primary tunnel.

   This section proposes a set of topologies that covers all the
   scenarios for local protection.  All of these topologies can be
   mapped to the reference topology shown in Figure 1.  Topologies
   provided in this section refer to the testbed required to benchmark
   failover time when the DUT is configured as a PLR in either head-end
   or midpoint role.  Provided with each topology below is the label
   stack at the PLR.  Penultimate Hop Popping (PHP) MAY be used and must
   be reported when used.

   Figures 2 through 9 use the following convention and are subset of
   Figure 1:

      a) HE is Head-End
      b) T/E is Tail-End
      c) MID is Midpoint
      d) MP is Merge Point
      e) PLR is Point of Local Repair
      f) PRI is Primary Path
      g) BKP denotes Backup Path and Nodes
      h) UR is Upstream Router





















<span class="grey">Papneja, et al.               Informational                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.1.%20%20Link%20Protection"></a><a class="selflink" href="#section-6.1" name="section-6.1">6.1</a>.  Link Protection</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.1.%20%20Link%20Protection%3A%201-Hop%20Primary%20%28from%20PLR%29%20and%201-Hop%20Backup"></a><a class="selflink" href="#section-6.1.1" name="section-6.1.1">6.1.1</a>.  Link Protection: 1-Hop Primary (from PLR) and 1-Hop Backup</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Tail-End%20Tunnels"></a>        Tail-End Tunnels</span>

               +-------+  +--------+    +--------+
               |  R1   |  |   R2   | PRI|   R3   |
               | UR/HE |--| HE/MID |----| MP/T/E |
               |       |  |  PLR   |----|        |
               +-------+  +--------+ BKP+--------+

                             Figure 2

          Traffic            No. of Labels   No. of labels
                             before failure  after failure
          IP TRAFFIC (P-P)         0             0
          Layer3 VPN (PE-PE)       1             1
          Layer3 VPN (PE-P)        2             2
          Layer2 VC (PE-PE)        1             1
          Layer2 VC (PE-P)         2             2
          Midpoint LSPs            0             0

   Please note the following:

   a) For the P-P case, R2 and R3 act as P routers
   b) For the PE-PE cases, R2 acts as a PE and R3 acts as a remote PE
   c) For the PE-P cases, R2 acts as a PE router, R3 acts as a P router,
      and R5 acts as a remote PE router (please refer to Figure 1 for
      complete setup)
   d) For the midpoint case, R1, R2, and R3 act as HE, midpoint/PLR, and
      tail-end, respectively (as shown in the figure above)




















<span class="grey">Papneja, et al.               Informational                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.2.%20%20Link%20Protection%3A%201-Hop%20Primary%20%28from%20PLR%29%20and%202-Hop%20Backup"></a><a class="selflink" href="#section-6.1.2" name="section-6.1.2">6.1.2</a>.  Link Protection: 1-Hop Primary (from PLR) and 2-Hop Backup</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Tail-End%20Tunnels"></a>        Tail-End Tunnels</span>

             +-------+    +--------+    +--------+
             |  R1   |    |  R2    |    |   R3   |
             | UR/HE |    | HE/MID |PRI | MP/T/E |
             |       |----|  PLR   |----|        |
             +-------+    +--------+    +--------+
                              |BKP               |
                              |    +--------+    |
                              |    |   R6   |    |
                              |----|  BKP   |----|
                                   |   MID  |
                                   +--------+

                           Figure 3

          Traffic            No. of Labels   No. of labels
                             before failure  after failure
          IP TRAFFIC (P-P)       0              1
          Layer3 VPN (PE-PE)     1              2
          Layer3 VPN (PE-P)      2              3
          Layer2 VC (PE-PE)      1              2
          Layer2 VC (PE-P)       2              3
          Midpoint LSPs          0              1

   Please note the following:

   a) For the P-P case, R2 and R3 act as P routers
   b) For PE-PE cases, R2 acts as a PE and R3 acts as a remote PE
   c) For PE-P cases, R2 acts as a PE router, R3 acts as a P router, and
      R5 acts as a remote PE router (please refer to Figure 1 for
      complete setup)
   d) For the midpoint case, R1, R2, and R3 act as HE, midpoint/PLR, and
      tail-end, respectively (as shown in the figure above)
















<span class="grey">Papneja, et al.               Informational                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.3.%20%20Link%20Protection%3A%202-Hop%20%28or%20More%29%20Primary%20%28from%20PLR%29%20and%201-Hop"></a><a class="selflink" href="#section-6.1.3" name="section-6.1.3">6.1.3</a>.  Link Protection: 2-Hop (or More) Primary (from PLR) and 1-Hop</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Backup%20Tail-End%20Tunnels"></a>        Backup Tail-End Tunnels</span>

             +--------+    +--------+    +--------+      +--------+
             |  R1    |    | R2     |PRI |   R3   |PRI   |   R4   |
             |  UR/HE |----| HE/MID |----| MP/MID |------|  T/E   |
             |        |    | PLR    |----|        |      |        |
             +--------+    +--------+ BKP+--------+      +--------+

                                   Figure 4

          Traffic            No. of Labels   Num of labels
                             before failure  after failure
          IP TRAFFIC (P-P)       1                1
          Layer3 VPN (PE-PE)     2                2
          Layer3 VPN (PE-P)      3                3
          Layer2 VC (PE-PE)      2                2
          Layer2 VC (PE-P)       3                3
          Midpoint LSPs          1                1

   Please note the following:

   a) For the P-P case, R2, R3, and R4 act as P routers
   b) For PE-PE cases, R2 acts as a PE and R4 acts as a remote PE c) For
      PE-P cases, R2 acts as a PE router, R3 acts as a P router, and R5
      acts as remote PE router (please refer to Figure 1 for complete
      setup)
   d) For the midpoint case, R1, R2, R3, and R4 act as HE, midpoint/PLR,
      and tail-end, respectively (as shown in the figure above)






















<span class="grey">Papneja, et al.               Informational                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.1.4.%20%20Link%20Protection%3A%202-Hop%20%28or%20More%29%20Primary%20%28from%20PLR%29%20and%202-Hop"></a><a class="selflink" href="#section-6.1.4" name="section-6.1.4">6.1.4</a>.  Link Protection: 2-Hop (or More) Primary (from PLR) and 2-Hop</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Backup%20Tail-End%20Tunnels"></a>        Backup Tail-End Tunnels</span>

             +--------+    +--------+PRI +--------+  PRI +--------+
             |  R1    |    |  R2    |    |   R3   |      |   R4   |
             | UR/HE  |----| HE/MID |----|  MP/MID|------|  T/E   |
             |        |    | PLR    |    |        |      |        |
             +--------+    +--------+    +--------+      +--------+
                           BKP|              |
                              |   +--------+ |
                              |   |   R6   | |
                              +---|  BKP   |-
                                  |  MID   |
                                  +--------+

                                   Figure 5

          Traffic            No. of Labels   No. of labels
                             before failure  after failure
          IP TRAFFIC (P-P)       1              2
          Layer3 VPN (PE-PE)     2              3
          Layer3 VPN (PE-P)      3              4
          Layer2 VC (PE-PE)      2              3
          Layer2 VC (PE-P)       3              4
          Midpoint LSPs          1              2

   Please note the following:

   a) For the P-P case, R2, R3, and R4 act as P routers
   b) For PE-PE cases, R2 acts as a PE and R4 acts as a remote PE
   c) For PE-P cases, R2 acts as a PE router, R3 acts as a P router, and
      R5 acts as remote PE router (please refer to Figure 1 for complete
      setup)
   d) For the midpoint case, R1, R2, R3 and R4 act as HE, midpoint/PLR,
      and tail-end, respectively (as shown in the figure above)
















<span class="grey">Papneja, et al.               Informational                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/6.2.%20%20Node%20Protection"></a><a class="selflink" href="#section-6.2" name="section-6.2">6.2</a>.  Node Protection</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.1.%20%20Node%20Protection%3A%202-Hop%20Primary%20%28from%20PLR%29%20and%201-Hop%20Backup"></a><a class="selflink" href="#section-6.2.1" name="section-6.2.1">6.2.1</a>.  Node Protection: 2-Hop Primary (from PLR) and 1-Hop Backup</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Tail-End%20Tunnels"></a>        Tail-End Tunnels</span>

             +--------+    +--------+    +--------+      +--------+
             |  R1    |    |  R2    |PRI |   R3   | PRI  |   R4   |
             | UR/HE  |----| HE/MID |----|  MID   |------| MP/T/E |
             |        |    |  PLR   |    |        |      |        |
             +--------+    +--------+    +--------+      +--------+
                             |BKP                          |
                              -----------------------------

                                  Figure 6

          Traffic            No. of Labels   No. of labels
                             before failure  after failure
          IP TRAFFIC (P-P)       1             0
          Layer3 VPN (PE-PE)     2             1
          Layer3 VPN (PE-P)      3             2
          Layer2 VC (PE-PE)      2             1
          Layer2 VC (PE-P)       3             2
          Midpoint LSPs          1             0

   Please note the following:

   a) For the P-P case, R2, R3, and R4 act as P routers
   b) For PE-PE cases, R2 acts as a PE and R4 acts as a remote PE
   c) For PE-P cases, R2 acts as a PE router, R4 acts as a P router, and
      R5 acts as remote PE router (please refer to Figure 1 for complete
      setup)
   d) For the midpoint case, R1, R2, R3, and R4 act as HE, midpoint/PLR,
      and tail-end, respectively (as shown in the figure above)


















<span class="grey">Papneja, et al.               Informational                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.2.%20%20Node%20Protection%3A%202-Hop%20Primary%20%28from%20PLR%29%20and%202-Hop%20Backup"></a><a class="selflink" href="#section-6.2.2" name="section-6.2.2">6.2.2</a>.  Node Protection: 2-Hop Primary (from PLR) and 2-Hop Backup</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Tail-End%20Tunnels"></a>        Tail-End Tunnels</span>

             +--------+    +--------+    +--------+    +--------+
             |  R1    |    |  R2    |    |   R3   |    |   R4   |
             | UR/HE  |    | HE/MID |PRI |  MID   |PRI | MP/T/E |
             |        |----|  PLR   |----|        |----|        |
             +--------+    +--------+    +--------+    +--------+
                             |                            |
                          BKP|         +--------+         |
                             |         |   R6   |         |
                              ---------|  BKP   |---------
                                       |  MID   |
                                       +--------+

                                   Figure 7

          Traffic            No. of Labels   No. of labels
                             before failure   after failure
          IP TRAFFIC (P-P)       1              1
          Layer3 VPN (PE-PE)     2              2
          Layer3 VPN (PE-P)      3              3
          Layer2 VC (PE-PE)      2              2
          Layer2 VC (PE-P)       3              3
          Midpoint LSPs         1              1

   Please note the following:

   a) For the P-P case, R2, R3, and R4 act as P routers
   b) For PE-PE cases, R2 acts as a PE and R4 acts as a remote PE
   c) For PE-P cases, R2 acts as a PE router, R4 acts as a P router, and
      R5 acts as remote PE router (please refer to Figure 1 for complete
      setup)
   d) For the midpoint case, R1, R2, R3, and R4 act as HE, midpoint/PLR,
      and tail-end, respectively (as shown in the figure above)
















<span class="grey">Papneja, et al.               Informational                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.3.%20%20Node%20Protection%3A%203-Hop%20%28or%20More%29%20Primary%20%28from%20PLR%29%20and%201-Hop"></a><a class="selflink" href="#section-6.2.3" name="section-6.2.3">6.2.3</a>.  Node Protection: 3-Hop (or More) Primary (from PLR) and 1-Hop</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Backup%20Tail-End%20Tunnels"></a>        Backup Tail-End Tunnels</span>

         +--------+  +--------+PRI+--------+PRI+--------+PRI+--------+
         |  R1    |  |  R2    |   |   R3   |   |   R4   |   |   R5   |
         | UR/HE  |--| HE/MID |---| MID    |---|  MP    |---|  T/E   |
         |        |  |  PLR   |   |        |   |        |   |        |
         +--------+  +--------+   +--------+   +--------+   +--------+
                     BKP|                          |
                         --------------------------

                                   Figure 8

          Traffic            No. of Labels  No. of labels
                             before failure  after failure
          IP TRAFFIC (P-P)       1             1
          Layer3 VPN (PE-PE)     2             2
          Layer3 VPN (PE-P)      3             3
          Layer2 VC (PE-PE)      2             2
          Layer2 VC (PE-P)       3             3
          Midpoint LSPs          1             1

   Please note the following:

   a) For the P-P case, R2, R3, R4, and R5 act as P routers
   b) For PE-PE cases, R2 acts as a PE and R5 acts as a remote PE
   c) For PE-P cases, R2 acts as a PE router, R4 acts as a P router, and
      R5 acts as remote PE router (please refer to Figure 1 for complete
      setup)
   d) For the midpoint case, R1, R2, R3, R4, and R5 act as HE,
      midpoint/PLR, and tail-end, respectively (as shown in the figure
      above)



















<span class="grey">Papneja, et al.               Informational                    [Page 18]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-19" id="page-19" name="page-19"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/6.2.4.%20%20Node%20Protection%3A%203-Hop%20%28or%20More%29%20Primary%20%28from%20PLR%29%20and%202-Hop"></a><a class="selflink" href="#section-6.2.4" name="section-6.2.4">6.2.4</a>.  Node Protection: 3-Hop (or More) Primary (from PLR) and 2-Hop</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/Backup%20Tail-End%20Tunnels"></a>        Backup Tail-End Tunnels</span>

      +--------+   +--------+   +--------+   +--------+   +--------+
      |  R1    |   |  R2    |   |   R3   |   |   R4   |   |   R5   |
      | UR/HE  |   | HE/MID |PRI|  MID   |PRI|  MP    |PRI|  T/E   |
      |        |-- |  PLR   |---|        |---|        |---|        |
      +--------+   +--------+   +--------+   +--------+   +--------+
                    BKP|                          |
                       |         +--------+       |
                       |         |  R6    |       |
                        ---------|  BKP   |-------
                                 |  MID   |
                                 +--------+

                                  Figure 9

          Traffic            No. of Labels   No. of labels
                             before failure   after failure
          IP TRAFFIC (P-P)       1             2
          Layer3 VPN (PE-PE)     2             3
          Layer3 VPN (PE-P)      3             4
          Layer2 VC (PE-PE)      2             3
          Layer2 VC (PE-P)       3             4
          Midpoint LSPs          1             2

   Please note the following:

   a) For the P-P case, R2, R3, R4, and R5 act as P routers
   b) For PE-PE cases, R2 acts as a PE and R5 acts as a remote PE
   c) For PE-P cases, R2 acts as a PE router, R4 acts as a P router,
      and R5 acts as remote PE router (please refer to Figure 1 for
      complete setup)
   d) For the midpoint case, R1, R2, R3, R4, and R5 act as HE,
      midpoint/PLR, and tail-end, respectively (as shown in the
      figure above)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Test%20Methodology"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Test Methodology</span>

   The procedure described in this section can be applied to all eight
   base test cases and the associated topologies.  The backup as well as
   the primary tunnels are configured to be alike in terms of bandwidth
   usage.  In order to benchmark failover with all possible label stack
   depth applicable (as seen with current deployments), it is
   RECOMMENDED to perform all of the test cases provided in this
   section.  The forwarding performance test cases in <a href="#section-7.1">Section 7.1</a> MUST
   be performed prior to performing the failover test cases.




<span class="grey">Papneja, et al.               Informational                    [Page 19]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-20" id="page-20" name="page-20"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


   The considerations of <a href="rfc2544.html#section-4">Section 4 of [RFC2544]</a> are applicable when
   evaluating the results obtained using these methodologies as well.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.1.%20%20MPLS-FRR%20Forwarding%20Performance"></a><a class="selflink" href="#section-7.1" name="section-7.1">7.1</a>.  MPLS-FRR Forwarding Performance</span>

   Benchmarking failover time [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>] for MPLS protection first
   requires a baseline measurement of the forwarding performance of the
   test topology, including the DUT.  Forwarding performance is
   benchmarked by the throughput as defined in [<a href="rfc5695.html" title='"MPLS Forwarding Benchmarking Methodology for IP Flows"'>RFC5695</a>] and measured in
   units of packets per second (pps).  This section provides two test
   cases to benchmark forwarding performance.  These are with the DUT
   configured as a head-end PLR, midpoint PLR, and egress PLR.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.1.%20%20Head-End%20PLR%20Forwarding%20Performance"></a><a class="selflink" href="#section-7.1.1" name="section-7.1.1">7.1.1</a>.  Head-End PLR Forwarding Performance</span>

   Objective:

      To benchmark the maximum rate (pps) on the PLR (as head-end) over
      the primary LSP and backup LSP.

      Test Setup:

      A.  Select any one topology out of the eight from <a href="#section-6">Section 6</a>.

      B.  Select or enable IP, L3 VPN, or L2 VPN services with the DUT
          as head-end PLR.

      C.  The DUT will also have two interfaces connected to the traffic
          generator/analyzer.  (If the node downstream of the PLR is not
          a simulated node, then the ingress of the tunnel should have
          one link connected to the traffic generator, and the node
          downstream of the PLR or the egress of the tunnel should have
          a link connected to the traffic analyzer).

   Procedure:

      1.   Establish the primary LSP on R2 required by the topology
           selected.

      2.   Establish the backup LSP on R2 required by the selected
           topology.

      3.   Verify that primary and backup LSPs are up and that the
           primary is protected.

      4.   Verify that Fast Reroute protection is enabled and ready.

      5.   Set up traffic streams as described in <a href="#section-5.7">Section 5.7</a>.



<span class="grey">Papneja, et al.               Informational                    [Page 20]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-21" id="page-21" name="page-21"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


      6.   Send MPLS traffic over the primary LSP at the throughput
           supported by the DUT (<a href="rfc2544.html#section-6">Section 6 of [RFC2544]</a>).

      7.   Record the throughput over the primary LSP.

      8.   Trigger a link failure as described in <a href="#section-5.1">Section 5.1</a>.

      9.   Verify that the offered load gets mapped to the backup tunnel
           and measure the Additive Backup Delay [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

      10.  30 seconds after failover, stop the offered load and measure
           the throughput, packet loss, out-of-order packets, and
           duplicate packets over the backup LSP.

      11.  Adjust the offered load and repeat steps 6 through 10 until
           the throughput values for the primary and backup LSPs are
           equal.

      12.  Record the final throughput, which corresponds to the offered
           load that will be used for the head-end PLR failover test
           cases.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/7.1.2.%20%20Midpoint%20PLR%20Forwarding%20Performance"></a><a class="selflink" href="#section-7.1.2" name="section-7.1.2">7.1.2</a>.  Midpoint PLR Forwarding Performance</span>

   Objective:

      To benchmark the maximum rate (pps) on the PLR (as midpoint) over
      the primary LSP and backup LSP.

   Test Setup:

      A.  Select any one topology out of the eight from <a href="#section-6">Section 6</a>.

      B.  The DUT will also have two interfaces connected to the traffic
          generator.

   Procedure:

      1.   Establish the primary LSP on R1 required by the topology
           selected.

      2.   Establish the backup LSP on R2 required by the selected
           topology.

      3.   Verify that primary and backup LSPs are up and that the
           primary is protected.

      4.   Verify that Fast Reroute protection is enabled and ready.



<span class="grey">Papneja, et al.               Informational                    [Page 21]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-22" id="page-22" name="page-22"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


      5.   Set up traffic streams as described in <a href="#section-5.7">Section 5.7</a>.

      6.   Send MPLS traffic over the primary LSP at the throughput
           supported by the DUT (<a href="rfc2544.html#section-6">Section 6 of [RFC2544]</a>).

      7.   Record the throughput over the primary LSP.

      8.   Trigger a link failure as described in <a href="#section-5.1">Section 5.1</a>.

      9.   Verify that the offered load gets mapped to the backup tunnel
           and measure the Additive Backup Delay [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

      10.  30 seconds after failover, stop the offered load and measure
           the throughput, packet loss, out-of-order packets, and
           duplicate packets over the backup LSP.

      11.  Adjust the offered load and repeat steps 6 through 10 until
           the throughput values for the primary and backup LSPs are
           equal.

      12.  Record the final throughput, which corresponds to the offered
           load that will be used for the midpoint PLR failover test
           cases.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.2.%20%20Head-End%20PLR%20with%20Link%20Failure"></a><a class="selflink" href="#section-7.2" name="section-7.2">7.2</a>.  Head-End PLR with Link Failure</span>

   Objective:

      To benchmark the MPLS failover time due to link failure events
      described in <a href="#section-5.1">Section 5.1</a> experienced by the DUT, which is the
      head-end PLR.

   Test Setup:

      A.  Select any one topology out of the eight from <a href="#section-6">Section 6</a>.

      B.  Select or enable IP, L3 VPN, or L2 VPN services with the DUT
          as head-end PLR.

      C.  The DUT will also have two interfaces connected to the traffic
          generator/analyzer.  (If the node downstream of the PLR is not
          a simulated node, then the ingress of the tunnel should have
          one link connected to the traffic generator, and the node
          downstream to the PLR or the egress of the tunnel should have
          a link connected to the traffic analyzer).






<span class="grey">Papneja, et al.               Informational                    [Page 22]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-23" id="page-23" name="page-23"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


   Test Configuration:

      1.  Configure the number of primaries on R2 and the backups on R2
          as required by the topology selected.

      2.  Configure the test setup to support reversion.

      3.  Advertise prefixes (as per the FRR Scalability Table in
          <a href="#appendix-A">Appendix A</a>) by the tail-end.

   Procedure:

      The test case in <a href="#section-7.1.1">Section 7.1.1</a>, "Head-End PLR Forwarding
      Performance", MUST be completed first to obtain the throughput to
      use as the offered load.

      1.   Establish the primary LSP on R2 required by the topology
           selected.

      2.   Establish the backup LSP on R2 required by the selected
           topology.

      3.   Verify that primary and backup LSPs are up and that the
           primary is protected.

      4.   Verify that Fast Reroute protection is enabled and ready.

      5.   Set up traffic streams for the offered load as described in
           <a href="#section-5.7">Section 5.7</a>.

      6.   Provide the offered load from the tester at the throughput
           [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>] level obtained from the test case in <a href="#section-7.1.1">Section 7.1.1</a>.

      7.   Verify that traffic is switched over the primary LSP without
           packet loss.

      8.   Trigger a link failure as described in <a href="#section-5.1">Section 5.1</a>.

      9.   Verify that the offered load gets mapped to the backup tunnel
           and measure the Additive Backup Delay [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

      10.  30 seconds after failover, stop the offered load and measure
           the total failover packet loss [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

      11.  Calculate the failover time benchmark using the selected
           failover time calculation method (TBLM, PLBM, or TBM)
           [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].




<span class="grey">Papneja, et al.               Informational                    [Page 23]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-24" id="page-24" name="page-24"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


      12.  Restart the offered load and restore the primary LSP to
           verify that reversion occurs and measure the Reversion Packet
           Loss [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

      13.  Calculate the Reversion Time benchmark using the selected
           failover time calculation method (TBLM, PLBM, or TBM)
           [<a href="rfc6414.html" title='"Benchmarking Terminology for Protection Performance"'>RFC6414</a>].

      14.  Verify that the head-end signals new LSP and protection
           should be in place again.

   It is RECOMMENDED that this procedure be repeated for each of the
   link failure triggers defined in <a href="#section-5.1">Section 5.1</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.3.%20%20Midpoint%20PLR%20with%20Link%20Failure"></a><a class="selflink" href="#section-7.3" name="section-7.3">7.3</a>.  Midpoint PLR with Link Failure</span>

   Objective:

      To benchmark the MPLS failover time due to link failure events
      described in <a href="#section-5.1">Section 5.1</a> experienced by the DUT, which is the
      midpoint PLR.

   Test Setup:

      A.  Select any one topology out of the eight from <a href="#section-6">Section 6</a>.

      B.  The DUT will also have two interfaces connected to the traffic
          generator.

   Test Configuration:

      1.  Configure the number of primaries on R1 and the backups on R2
          as required by the topology selected.

      2.  Configure the test setup to support reversion.

      3.  Advertise prefixes (as per the FRR Scalability Table in
          <a href="#appendix-A">Appendix A</a>) by the tail-end.

   Procedure:

      The test case in <a href="#section-7.1.2">Section 7.1.2</a>, "Midpoint PLR Forwarding
      Performance", MUST be completed first to obtain the throughput to
      use as the offered load.

      1.  Establish the primary LSP on R1 as required by the topology
          selected.




<span class="grey">Papneja, et al.               Informational                    [Page 24]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-25" id="page-25" name="page-25"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


      2.  Establish the backup LSP on R2 as required by the selected
          topology.

      3.  Perform steps 3 through 14 from <a href="#section-7.2">Section 7.2</a>, "Head-End PLR
          with Link Failure".

   It is RECOMMENDED that this procedure be repeated for each of the
   link failure triggers defined in <a href="#section-5.1">section 5.1</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.4.%20%20Head-End%20PLR%20with%20Node%20Failure"></a><a class="selflink" href="#section-7.4" name="section-7.4">7.4</a>.  Head-End PLR with Node Failure</span>

   Objective:

      To benchmark the MPLS failover time due to node failure events
      described in <a href="#section-5.1">Section 5.1</a> experienced by the DUT, which is the
      head-end PLR.

   Test Setup:

      A.  Select any one topology out of the eight from <a href="#section-6">Section 6</a>.

      B.  Select or enable IP, L3 VPN, or L2 VPN services with the DUT
          as head-end PLR.

      C.  The DUT will also have two interfaces connected to the traffic
          generator/analyzer.

   Test Configuration:

      1.  Configure the number of primaries on R2 and the backups on R2
          as required by the topology selected.

      2.  Configure the test setup to support reversion.

      3.  Advertise prefixes (as per the FRR Scalability Table in
          <a href="#appendix-A">Appendix A</a>) by the tail-end.

   Procedure:

      The test case in <a href="#section-7.1.1">Section 7.1.1</a>, "Head-End PLR Forwarding
      Performance", MUST be completed first to obtain the throughput to
      use as the offered load.

      1.  Establish the primary LSP on R2 as required by the topology
          selected.

      2.  Establish the backup LSP on R2 as required by the selected
          topology.



<span class="grey">Papneja, et al.               Informational                    [Page 25]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-26" id="page-26" name="page-26"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


      3.  Verify that the primary and backup LSPs are up and that the
          primary is protected.

      4.  Verify that Fast Reroute protection is enabled and ready.

      5.  Set up traffic streams for the offered load as described in
          <a href="#section-5.7">Section 5.7</a>.

      6.  Provide the offered load from the tester at the throughput
          [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>] level obtained from the test case in <a href="#section-7.1.1">Section 7.1.1</a>.

      7.  Verify that traffic is switched over the primary LSP without
          packet loss.

      8.  Trigger a node failure as described in <a href="#section-5.1">Section 5.1</a>.

      9.  Perform steps 9 through 14 in <a href="#section-7.2">Section 7.2</a>, "Head-End PLR with
          Link Failure".

   It is RECOMMENDED that this procedure be repeated for each of the
   node failure triggers defined in <a href="#section-5.1">Section 5.1</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/7.5.%20%20Midpoint%20PLR%20with%20Node%20Failure"></a><a class="selflink" href="#section-7.5" name="section-7.5">7.5</a>.  Midpoint PLR with Node Failure</span>

   Objective:

      To benchmark the MPLS failover time due to node failure events
      described in <a href="#section-5.1">Section 5.1</a> experienced by the DUT, which is the
      midpoint PLR.

   Test Setup:

      A.  Select any one topology from Sections <a href="#section-6.1">6.1</a> to <a href="#section-6.2">6.2</a>.

      B.  The DUT will also have two interfaces connected to the traffic
          generator.

   Test Configuration:

      1.  Configure the number of primaries on R1 and the backups on R2
          as required by the topology selected.

      2.  Configure the test setup to support reversion.

      3.  Advertise prefixes (as per the FRR Scalability Table in
          <a href="#appendix-A">Appendix A</a>) by the tail-end.





<span class="grey">Papneja, et al.               Informational                    [Page 26]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-27" id="page-27" name="page-27"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


   Procedure:

      The test case in <a href="#section-7.1.1">Section 7.1.1</a>, "Midpoint PLR Forwarding
      Performance", MUST be completed first to obtain the throughput to
      use as the offered load.

      1.  Establish the primary LSP on R1 as required by the topology
          selected.

      2.  Establish the backup LSP on R2 as required by the selected
          topology.

      3.  Verify that the primary and backup LSPs are up and that the
          primary is protected.

      4.  Verify that Fast Reroute protection is enabled and ready.

      5.  Set up traffic streams for the offered load as described in
          <a href="#section-5.7">Section 5.7</a>.

      6.  Provide the offered load from the tester at the throughput
          [<a href="rfc1242.html" title='"Benchmarking Terminology for Network Interconnection Devices"'>RFC1242</a>] level obtained from the test case in <a href="#section-7.1.1">Section 7.1.1</a>.

      7.  Verify that traffic is switched over the primary LSP without
          packet loss.

      8.  Trigger a node failure as described in <a href="#section-5.1">Section 5.1</a>.

      9.  Perform steps 9 through 14 in <a href="#section-7.2">Section 7.2</a>, "Head-End PLR with
          Link Failure".

   It is RECOMMENDED that this procedure be repeated for each of the
   node failure triggers defined in <a href="#section-5.1">Section 5.1</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Reporting%20Format"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Reporting Format</span>

   For each test, it is RECOMMENDED that the results be reported in the
   following format.

         Parameter                          Units

         IGP used for the test              ISIS-TE / OSPF-TE
         Interface types                    Gige,POS,ATM,VLAN, etc.

         Packet Sizes offered to the DUT    Bytes (at L3)

         Offered Load (Throughput)          Packets per second




<span class="grey">Papneja, et al.               Informational                    [Page 27]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-28" id="page-28" name="page-28"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


         IGP routes advertised              Number of IGP routes

         Penultimate Hop Popping            Used/Not Used

         RSVP hello timers                  Milliseconds

         Number of Protected tunnels        Number of tunnels

         Number of VPN routes installed     Number of VPN routes
         on the head-end

         Number of VC tunnels               Number of VC tunnels

         Number of midpoint tunnels         Number of tunnels

         Number of Prefixes protected by    Number of LSPs
         Primary

         Topology being used                Section number, and
                                            figure reference

         Failover event                     Event type

         Reoptimization                     Yes/No

      Benchmarks (to be recorded for each test case):

      Failover-
          Failover Time                        seconds
          Failover Packet Loss                 packets
          Additive Backup Delay                seconds
          Out-of-Order Packets                 packets
          Duplicate Packets                    packets
          Failover Time Calculation Method     Method Used

      Reversion-
          Reversion Time                       seconds
          Reversion Packet Loss                packets
          Additive Backup Delay                seconds
          Out-of-Order Packets                 packets
          Duplicate Packets                    packets
          Failover Time Calculation Method     Method Used









<span class="grey">Papneja, et al.               Informational                    [Page 28]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-29" id="page-29" name="page-29"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Security%20Considerations"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Security Considerations</span>

   Benchmarking activities as described in this memo are limited to
   technology characterization using controlled stimuli in a laboratory
   environment, with dedicated address space and the constraints
   specified in the sections above.

   The benchmarking network topology will be an independent test setup
   and MUST NOT be connected to devices that may forward the test
   traffic into a production network, or misroute traffic to the test
   management network.

   Further, benchmarking is performed on a "black-box" basis, relying
   solely on measurements observable external to the DUT/SUT.

   Special capabilities SHOULD NOT exist in the DUT/SUT specifically for
   benchmarking purposes.  Any implications for network security arising
   from the DUT/SUT SHOULD be identical in the lab and in production
   networks.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Acknowledgements"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Acknowledgements</span>

   We would like to thank Jean Philip Vasseur for his invaluable input
   to the document, Curtis Villamizar for his contribution in suggesting
   text on the definition and need for benchmarking Correlated failures,
   and Bhavani Parise for his textual input and review.  Additionally,
   we would like to thank Al Morton, Arun Gandhi, Amrit Hanspal, Karu
   Ratnam, Raveesh Janardan, Andrey Kiselev, and Mohan Nanduri for their
   formal reviews of this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20References"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.1.%20%20Normative%20References"></a><a class="selflink" href="#section-11.1" name="section-11.1">11.1</a>.  Normative References</span>

   [<a id="ref-RFC1242" name="ref-RFC1242">RFC1242</a>]  Bradner, S., "Benchmarking Terminology for Network
              Interconnection Devices", <a href="rfc1242.html">RFC 1242</a>, July 1991.

   [<a id="ref-RFC2119" name="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>, <a href="rfc2119.html">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2544" name="ref-RFC2544">RFC2544</a>]  Bradner, S. and J. McQuaid, "Benchmarking Methodology for
              Network Interconnect Devices", <a href="rfc2544.html">RFC 2544</a>, March 1999.

   [<a id="ref-RFC4090" name="ref-RFC4090">RFC4090</a>]  Pan, P., Ed., Swallow, G., Ed., and A. Atlas, Ed., "Fast
              Reroute Extensions to RSVP-TE for LSP Tunnels", <a href="rfc4090.html">RFC 4090</a>,
              May 2005.





<span class="grey">Papneja, et al.               Informational                    [Page 29]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-30" id="page-30" name="page-30"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


   [<a id="ref-RFC5695" name="ref-RFC5695">RFC5695</a>]  Akhter, A., Asati, R., and C. Pignataro, "MPLS Forwarding
              Benchmarking Methodology for IP Flows", <a href="rfc5695.html">RFC 5695</a>, November
              2009.

   [<a id="ref-RFC6412" name="ref-RFC6412">RFC6412</a>]  Poretsky, S., Imhoff, B., and K. Michielsen, "Terminology
              for Benchmarking Link-State IGP Data-Plane Route
              Convergence", <a href="rfc6412.html">RFC 6412</a>, November 2011.

   [<a id="ref-RFC6414" name="ref-RFC6414">RFC6414</a>]  Poretsky, S., Papneja, R., Karthik, J., and S. Vapiwala,
              "Benchmarking Terminology for Protection Performance", <a href="rfc6414.html">RFC</a>
              <a href="rfc6414.html">6414</a>, November 2011.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/11.2.%20%20Informative%20References"></a><a class="selflink" href="#section-11.2" name="section-11.2">11.2</a>.  Informative References</span>

   [<a id="ref-RFC2285" name="ref-RFC2285">RFC2285</a>]  Mandeville, R., "Benchmarking Terminology for LAN
              Switching Devices", <a href="rfc2285.html">RFC 2285</a>, February 1998.

   [<a id="ref-RFC4202" name="ref-RFC4202">RFC4202</a>]  Kompella, K., Ed., and Y. Rekhter, Ed., "Routing
              Extensions in Support of Generalized Multi-Protocol Label
              Switching (GMPLS)", <a href="rfc4202.html">RFC 4202</a>, October 2005.

   [<a id="ref-RFC4689" name="ref-RFC4689">RFC4689</a>]  Poretsky, S., Perser, J., Erramilli, S., and S. Khurana,
              "Terminology for Benchmarking Network-layer Traffic
              Control Mechanisms", <a href="rfc4689.html">RFC 4689</a>, October 2006.



























<span class="grey">Papneja, et al.               Informational                    [Page 30]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-31" id="page-31" name="page-31"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20A.%20%20Fast%20Reroute%20Scalability%20Table"></a><a class="selflink" href="#appendix-A" name="appendix-A">Appendix A</a>.  Fast Reroute Scalability Table</span>

   This section provides the recommended numbers for evaluating the
   scalability of fast reroute implementations.  It also recommends the
   typical numbers for IGP/VPNv4 Prefixes, LSP Tunnels, and VC entries.
   Based on the features supported by the DUT, appropriate scaling
   limits can be used for the testbed.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.1.%20%20FRR%20IGP%20Table"></a><a class="selflink" href="#appendix-A.1" name="appendix-A.1">A.1</a>.  FRR IGP Table</span>

      No. of Head-End TE Tunnels      IGP Prefixes

      1                               100

      1                               500

      1                               1000

      1                               2000

      1                               5000

      2 (Load Balance)                100

      2 (Load Balance)                500

      2 (Load Balance)                1000

      2 (Load Balance)                2000

      2 (Load Balance)                5000

      100                             100

      500                             500

      1000                            1000

      2000                            2000












<span class="grey">Papneja, et al.               Informational                    [Page 31]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-32" id="page-32" name="page-32"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.2.%20%20FRR%20VPN%20Table"></a><a class="selflink" href="#appendix-A.2" name="appendix-A.2">A.2</a>.  FRR VPN Table</span>

      No. of Head-End TE Tunnels      VPNv4 Prefixes

      1                               100

      1                               500

      1                               1000

      1                               2000

      1                               5000

      1                               10000

      1                               20000

      1                               Max

      2 (Load Balance)                100

      2 (Load Balance)                500

      2 (Load Balance)                1000

      2 (Load Balance)                2000

      2 (Load Balance)                5000

      2 (Load Balance)                10000

      2 (Load Balance)                20000

      2 (Load Balance)                Max
















<span class="grey">Papneja, et al.               Informational                    [Page 32]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-33" id="page-33" name="page-33"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.3.%20%20FRR%20Midpoint%20LSP%20Table"></a><a class="selflink" href="#appendix-A.3" name="appendix-A.3">A.3</a>.  FRR Midpoint LSP Table</span>

   The number of midpoint TE LSPs could be configured at recommended
   levels -- 100, 500, 1000, 2000, or max supported number.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/A.4.%20%20FRR%20VC%20Table"></a><a class="selflink" href="#appendix-A.4" name="appendix-A.4">A.4</a>.  FRR VC Table</span>

      No. of Head-End TE Tunnels      VC entries

      1                               100
      1                               500
      1                               1000
      1                               2000
      1                               Max
      100                             100
      500                             500
      1000                            1000
      2000                            2000

































<span class="grey">Papneja, et al.               Informational                    [Page 33]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-34" id="page-34" name="page-34"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/Appendix%20B.%20%20Abbreviations"></a><a class="selflink" href="#appendix-B" name="appendix-B">Appendix B</a>.  Abbreviations</span>

   AIS      - Alarm Indication Signal
   BFD      - Bidirectional Fault Detection
   BGP      - Border Gateway Protocol
   BKP      - Backup Path and Nodes
   CE       - Customer Edge
   DUT      - Device Under Test
   FRR      - Fast Reroute
   HE       - Head-End
   IGP      - Interior Gateway Protocol
   IP       - Internet Protocol
   LOS      - Loss of Signal
   LSP      - Label Switched Path
   MID      - Midpoint
   MP       - Merge Point
   MPLS     - Multiprotocol Label Switching
   N-Nhop   - Next - Next Hop
   Nhop     - Next Hop
   OIR      - Online Insertion and Removal
   P        - Provider
   PE       - Provider Edge
   PHP      - Penultimate Hop Popping
   PLBM     - Packet-Loss-Based Method
   PLR      - Point of Local Repair
   PRI      - Primary Path
   RSVP     - Resource reSerVation Protocol
   RX       - Receive
   SRLG     - Shared Risk Link Group
   TA       - Traffic Analyzer
   TBM      - Timestamp-Based Method
   TE       - Traffic Engineering
   TG       - Traffic Generator
   TX       - Transmit
   UR       - Upstream Router
   VC       - Virtual Circuit
   VPN      - Virtual Private Network














<span class="grey">Papneja, et al.               Informational                    [Page 34]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-35" id="page-35" name="page-35"> </a>
<span class="grey"><a href="rfc6894.html">RFC 6894</a>               MPLS Protection Mechanisms             March 2013</span>


Authors' Addresses

   Rajiv Papneja
   Huawei Technologies
   2330 Central Expressway
   Santa Clara, CA  95050
   USA
   EMail: rajiv.papneja@huawei.com

   Samir Vapiwala
   Cisco Systems
   300 Beaver Brook Road
   Boxborough, MA  01719
   USA
   EMail: svapiwal@cisco.com

   Jay Karthik
   Cisco Systems
   300 Beaver Brook Road
   Boxborough, MA  01719
   USA
   EMail: jkarthik@cisco.com

   Scott Poretsky
   Allot Communications
   300 TradeCenter
   Woburn, MA  01801
   USA
   EMail: sporetsky@allot.com

   Shankar Rao
   Qwest Communications
   950 17th Street
   Suite 1900
   Denver, CO  80210
   USA
   EMail: shankar.rao@du.edu

   JL. Le Roux
   France Telecom
   2 av Pierre Marzin
   22300 Lannion
   France
   EMail: jeanlouis.leroux@orange.com







Papneja, et al.               Informational                    [Page 35]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc6894 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:26 GMT --></html>