<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><!-- Mirrored from tools.ietf.org/html/rfc4659 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:40 GMT --><!-- Added by HTTrack --><head><meta content="text/html;charset=utf-8" http-equiv="content-type"/><!-- /Added by HTTrack -->

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <meta content="index,follow" name="robots"/>
    <meta content="rfcmarkup version 1.126" name="creator"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
<meta content="urn:ietf:rfc:4659" name="DC.Identifier"/>
<meta content='This document describes a method by which a Service Provider may use
its packet-switched backbone to provide Virtual Private Network (VPN)
services for its IPv6 customers. This method reuses, and extends where
necessary, the "BGP/MPLS IP VPN" method for support of IPv6. In
BGP/MPLS IP VPN, "Multiprotocol BGP" is used for distributing IPv4 VPN
routes over the service provider backbone, and MPLS is used to forward
IPv4 VPN packets over the backbone. This document defines an IPv6 VPN
address family and describes the corresponding IPv6 VPN route
distribution in "Multiprotocol BGP".  This document defines support of
the IPv6 VPN service over both an IPv4 and an IPv6 backbone, and for
using various tunneling techniques over the core, including MPLS, IP-
in-IP, Generic Routing Encapsulation (GRE) and IPsec protected
tunnels. The inter-working between an IPv4 site and an IPv6 site is
outside the scope of this document. [STANDARDS-TRACK]' name="DC.Description.Abstract"/>
<meta content="Carugi, Marco" name="DC.Creator"/>
<meta content="Clercq, Jeremy De" name="DC.Creator"/>
<meta content="Ooms, Dirk" name="DC.Creator"/>
<meta content="September, 2006" name="DC.Date.Issued"/>
<meta content="BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN" name="DC.Title"/>

    <link href="https://tools.ietf.org/images/rfc.png" rel="icon" type="image/png"/>
    <link href="https://tools.ietf.org/images/rfc.png" rel="shortcut icon" type="image/png"/>
    <title>RFC 4659 - BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN</title>
    
    
    <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0 1px; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
  <div class="content">
   <div style="height: 13px;">
      <div class="pre noprint docinfo bgblue" onclick="showElem('legend');" onmouseout="hideElem('legend')" onmouseover="this.style.cursor='pointer';" style="height: 6px; position: absolute;" title="Click for colour legend.">                                                                        </div>
      <div class="docinfo noprint pre legend" id="legend" onmouseout="hideElem('legend');" onmouseover="showElem('legend');" style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; ">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="index.html" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/rfc/rfc4659.txt" title="Plaintext version of this document">txt</a>|<a href="https://tools.ietf.org/pdf/rfc4659" title="PDF version of this document">pdf</a>] [<a href="https://tools.ietf.org/html/draft-ietf-l3vpn-bgp-ipv6" title="draft-ietf-l3vpn-bgp-ipv6">draft-ietf-l3vp...</a>] [<a href="https://datatracker.ietf.org/doc/rfc4659" title="IESG Datatracker information for this document">Tracker</a>] [<a href="https://tools.ietf.org/rfcdiff?difftype=--hwdiff&amp;url2=rfc4659" title="Inline diff (wdiff)">Diff1</a>] [<a href="https://tools.ietf.org/rfcdiff?url2=rfc4659" title="Side-by-side diff">Diff2</a>] [<a href="https://www.rfc-editor.org/errata_search.php?rfc=4659">Errata</a>]</span><br/>
<span class="pre noprint docinfo">                                                                        </span><br/>
<span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br/>
<span class="pre noprint docinfo">                                                            <span style="color: #C00;">Errata Exist</span></span><br/>
<pre>Network Working Group                                       J. De Clercq
Request for Comments: 4659                                       Alcatel
Category: Standards Track                                        D. Ooms
                                                              OneSparrow
                                                               M. Carugi
                                                         Nortel Networks
                                                          F. Le Faucheur
                                                           Cisco Systems
                                                          September 2006


    <span class="h1">BGP-MPLS IP Virtual Private Network (VPN) Extension for IPv6 VPN</span>


Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This document describes a method by which a Service Provider may use
   its packet-switched backbone to provide Virtual Private Network (VPN)
   services for its IPv6 customers.  This method reuses, and extends
   where necessary, the "BGP/MPLS IP VPN" method for support of IPv6.
   In BGP/MPLS IP VPN, "Multiprotocol BGP" is used for distributing IPv4
   VPN routes over the service provider backbone, and MPLS is used to
   forward IPv4 VPN packets over the backbone.  This document defines an
   IPv6 VPN address family and describes the corresponding IPv6 VPN
   route distribution in "Multiprotocol BGP".

   This document defines support of the IPv6 VPN service over both an
   IPv4 and an IPv6 backbone, and for using various tunneling techniques
   over the core, including MPLS, IP-in-IP, Generic Routing
   Encapsulation (GRE) and IPsec protected tunnels.  The inter-working
   between an IPv4 site and an IPv6 site is outside the scope of this
   document.







<span class="grey">De Clercq, et al.           Standards Track                     [Page 1]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-2" id="page-2" name="page-2"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. The VPN-IPv6 Address Family .....................................<a href="#page-4">4</a>
   <a href="#section-3">3</a>. VPN-IPv6 Route Distribution .....................................<a href="#page-5">5</a>
      <a href="#section-3.1">3.1</a>. Route Distribution Among PEs by BGP ........................<a href="#page-5">5</a>
      <a href="#section-3.2">3.2</a>. VPN IPv6 NLRI Encoding .....................................<a href="#page-6">6</a>
           <a href="#section-3.2.1">3.2.1</a>. BGP Next Hop encoding ...............................<a href="#page-6">6</a>
                  <a href="#section-3.2.1.1">3.2.1.1</a>. BGP Speaker Requesting IPv6 Transport ......<a href="#page-7">7</a>
                  <a href="#section-3.2.1.2">3.2.1.2</a>. BGP Speaker Requesting IPv4 Transport ......<a href="#page-8">8</a>
      <a href="#section-3.3">3.3</a>. Route Target ...............................................<a href="#page-8">8</a>
      <a href="#section-3.4">3.4</a>. BGP Capability Negotiation .................................<a href="#page-8">8</a>
   <a href="#section-4">4</a>. Encapsulation ...................................................<a href="#page-8">8</a>
   <a href="#section-5">5</a>. Address Types ..................................................<a href="#page-10">10</a>
   <a href="#section-6">6</a>. Multicast ......................................................<a href="#page-11">11</a>
   <a href="#section-7">7</a>. Carriers' Carriers .............................................<a href="#page-11">11</a>
   <a href="#section-8">8</a>. Multi-AS Backbones .............................................<a href="#page-11">11</a>
   <a href="#section-9">9</a>. Accessing the Internet from a VPN ..............................<a href="#page-13">13</a>
   <a href="#section-10">10</a>. Management VPN ................................................<a href="#page-14">14</a>
   <a href="#section-11">11</a>. Security Considerations .......................................<a href="#page-14">14</a>
   <a href="#section-12">12</a>. Quality of Service ............................................<a href="#page-15">15</a>
   <a href="#section-13">13</a>. Scalability ...................................................<a href="#page-15">15</a>
   <a href="#section-14">14</a>. IANA Considerations ...........................................<a href="#page-15">15</a>
   <a href="#section-15">15</a>. Acknowledgements ..............................................<a href="#page-15">15</a>
   <a href="#section-16">16</a>. References ....................................................<a href="#page-16">16</a>
      <a href="#section-16.1">16.1</a>. Normative References .....................................<a href="#page-16">16</a>
      <a href="#section-16.2">16.2</a>. Informative References ...................................<a href="#page-16">16</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" name="section-1">1</a>.  Introduction</span>

   This document describes a method by which a Service Provider may use
   its packet-switched backbone to provide Virtual Private Network
   services for its IPv6 customers.

   This method reuses, and extends where necessary, the "BGP/MPLS IP
   VPN" method [BGP/MPLS-VPN] for support of IPv6.  In particular, this
   method uses the same "peer model" as [BGP/MPLS-VPN], in which the
   customers' edge routers ("CE routers") send their IPv6 routes to the
   Service Provider's edge routers ("PE routers").  BGP ("Border Gateway
   Protocol", [<a href="#ref-BGP" title='"A Border Gateway Protocol 4 (BGP-4)"'>BGP</a>, <a href="#ref-BGP-MP" title='"Multiprotocol Extensions for BGP-4"'>BGP-MP</a>]) is then used by the Service Provider to
   exchange the routes of a particular IPv6 VPN among the PE routers
   that are attached to that IPv6 VPN.  Eventually, the PE routers
   distribute, to the CE routers in a particular VPN, the IPv6 routes
   from other CE routers in that VPN.  As with IPv4 VPNs, a key
   characteristic of this "peer model" is that the (IPv6) CE routers
   within an (IPv6) VPN do not peer with each other; there is no
   "overlay" visible to the (IPv6) VPN's routing algorithm.




<span class="grey">De Clercq, et al.           Standards Track                     [Page 2]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-3" id="page-3" name="page-3"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   This document adopts the definitions, acronyms, and mechanisms
   described in [BGP/MPLS-VPN].  Unless it is stated otherwise, the
   mechanisms of [BGP/MPLS-VPN] apply and will not be re-described here.

   A VPN is said to be an IPv6 VPN when each site of this VPN is IPv6
   capable and is natively connected over an IPv6 interface or sub-
   interface to the Service Provider (SP) backbone via a Provider Edge
   device (PE).

   A site may be both IPv4 capable and IPv6 capable.  The logical
   interface on which packets arrive at the PE may determine the IP
   version.  Alternatively, the same logical interface may be used for
   both IPv4 and IPv6, in which case a per-packet lookup at the Version
   field of the IP packet header determines the IP version.

   This document only concerns itself with handling of IPv6
   communication between IPv6 hosts located on IPv6-capable sites.
   Handling of IPv4 communication between IPv4 hosts located on IPv4-
   capable sites is outside the scope of this document and is covered in
   [BGP/MPLS-VPN].  Communication between an IPv4 host located in an
   IPv4- capable site and an IPv6 host located in an IPv6-capable site
   is outside the scope of this document.

   In a similar manner to how IPv4 VPN routes are distributed in
   [BGP/MPLS-VPN], BGP and its extensions are used to distribute routes
   from an IPv6 VPN site to all the other PE routers connected to a site
   of the same IPv6 VPN.  PEs use "VPN Routing and Forwarding tables"
   (VRFs) to maintain the reachability information and forwarding
   information of each IPv6 VPN separately.

   As is done for IPv4 VPNs [BGP/MPLS-VPN], we allow each IPv6 VPN to
   have its own IPv6 address space, which means that a given address may
   denote different systems in different VPNs.  This is achieved via a
   new address family, the VPN-IPv6 Address Family, in a fashion similar
   to that of the VPN-IPv4 address family, defined in [BGP/MPLS-VPN],
   which prepends a Route Distinguisher to the IP address.

   In addition to its operation over MPLS Label Switched Paths (LSPs),
   the IPv4 BGP/MPLS VPN solution has been extended to allow operation
   over other tunneling techniques, including GRE tunnels, IP-in-IP
   tunnels [2547-GRE/IP], L2TPv3 tunnels [<a href="#ref-MPLS-in-L2TPv3" title='"Encapsulation of MPLS over Layer-2 Tunneling Protocol Version 3"'>MPLS-in-L2TPv3</a>], and IPsec
   protected tunnels [<a href="#ref-2547-IPsec" title='"Use of PE-PE IPsec in RFC2547 VPNs"'>2547-IPsec</a>].  In a similar manner, this document
   allows support of an IPv6 VPN service over MPLS LSPs, as well as over
   other tunneling techniques.

   This document allows support for an IPv6 VPN service over an IPv4
   backbone, as well as over an IPv6 backbone.  The IPv6 VPN service
   supported is identical in both cases.



<span class="grey">De Clercq, et al.           Standards Track                     [Page 3]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-4" id="page-4" name="page-4"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   The IPv6 VPN solution defined in this document offers the following
   benefits:

      o From both the Service Provider perspective and the customer
        perspective, the VPN service that can be supported for IPv6
        sites is identical to the one that can be supported for IPv4
        sites.

      o From the Service Provider perspective, operations of the IPv6
        VPN service require the exact same skills, procedures, and
        mechanisms as those for the IPv4 VPN service.

      o Where both IPv4 VPNs and IPv6 VPN services are supported over an
        IPv4 core, the same single set of MP-BGP peering relationships
        and the same single PE-PE tunnel mesh MAY be used for both.

      o The IPv6 VPN service is independent of whether the core runs
        IPv4 or IPv6.  This is so that the IPv6 VPN service supported
        before and after a migration of the core from IPv4 to IPv6 is
        undistinguishable to the VPN customer.

   Note that supporting IPv4 VPN services over an IPv6 core is not
   covered by this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/2.%20%20The%20VPN-IPv6%20Address%20Family"></a><a class="selflink" href="#section-2" name="section-2">2</a>.  The VPN-IPv6 Address Family</span>

   The BGP Multiprotocol Extensions [<a href="#ref-BGP-MP" title='"Multiprotocol Extensions for BGP-4"'>BGP-MP</a>] allow BGP to carry routes
   from multiple "address families".  We introduce the notion of the
   "VPN-IPv6 address family", which is similar to the VPN-IPv4 address
   family introduced in [BGP/MPLS-VPN].

   A VPN-IPv6 address is a 24-octet quantity, beginning with an 8-octet
   "Route Distinguisher" (RD) and ending with a 16-octet IPv6 address.

   The purpose of the RD is solely to allow one to create distinct
   routes to a common IPv6 address prefix, which is similar to the
   purpose of the RD defined in [BGP/MPLS-VPN].  In the same way as it
   is possible per [BGP/MPLS-VPN], the RD can be used to create multiple
   different routes to the very same system.  This can be achieved by
   creating two different VPN-IPv6 routes that have the same IPv6 part
   but different RDs.  This allows the provider's BGP to install
   multiple different routes to the same system and allows policy to be
   used to decide which packets use which route.








<span class="grey">De Clercq, et al.           Standards Track                     [Page 4]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-5" id="page-5" name="page-5"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   Also, if two VPNs were to use the same IPv6 address prefix
   (effectively denoting different physical systems), the PEs would
   translate these into unique VPN-IPv6 address prefixes using different
   RDs.  This ensures that if the same address is ever used in two
   different VPNs, it is possible to install two completely different
   routes to that address, one for each VPN.

   Since VPN-IPv6 addresses and IPv6 addresses belong to different
   address families, BGP never treats them as comparable addresses.

   A VRF may have multiple equal-cost VPN-IPv6 routes for a single IPv6
   address prefix.  When a packet's destination address is matched in a
   VRF against a VPN-IPv6 route, only the IPv6 part is actually matched.

   The Route Distinguisher format and encoding is as specified in
   [BGP/MPLS-VPN].


   When a site is IPv4 capable and IPv6 capable, the same RD MAY be used
   for the advertisement of IPv6 addresses and IPv4 addresses.
   Alternatively, a different RD MAY be used for the advertisement of
   the IPv4 addresses and of the IPv6 addresses.  Note, however, that in
   the scope of this specification, IPv4 addresses and IPv6 addresses
   will always be handled in separate contexts, and that no IPv4-IPv6
   interworking issues and techniques will be discussed.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/3.%20%20VPN-IPv6%20Route%20Distribution"></a><a class="selflink" href="#section-3" name="section-3">3</a>.  VPN-IPv6 Route Distribution</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.1.%20%20Route%20Distribution%20Among%20PEs%20by%20BGP"></a><a class="selflink" href="#section-3.1" name="section-3.1">3.1</a>.  Route Distribution Among PEs by BGP</span>

   As described in [BGP/MPLS-VPN], if two sites of a VPN attach to PEs
   that are in the same Autonomous System, the PEs can distribute VPN
   routes to each other by means of an (IPv4) internal Border Gateway
   Protocol (iBGP) connection between them.  Alternatively, each PE can
   have iBGP connections to route reflectors.  Similarly, for IPv6 VPN
   route distribution, PEs can use iBGP connections between them or use
   iBGP connections to route reflectors.  For IPv6 VPN, the iBGP
   connections MAY be over IPv4 or over IPv6.

   The PE routers exchange, via MP-BGP [<a href="#ref-BGP-MP" title='"Multiprotocol Extensions for BGP-4"'>BGP-MP</a>], reachability
   information for the IPv6 prefixes in the IPv6 VPNs and thereby
   announce themselves as the BGP Next Hop.

   The rules for encoding the reachability information and the BGP Next
   Hop address are specified in the following sections.






<span class="grey">De Clercq, et al.           Standards Track                     [Page 5]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-6" id="page-6" name="page-6"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.2.%20%20VPN%20IPv6%20NLRI%20Encoding"></a><a class="selflink" href="#section-3.2" name="section-3.2">3.2</a>.  VPN IPv6 NLRI Encoding</span>

   When distributing IPv6 VPN routes, the advertising PE router MUST
   assign and distribute MPLS labels with the IPv6 VPN routes.
   Essentially, PE routers do not distribute IPv6 VPN routes, but
   Labeled IPv6 VPN routes [<a href="#ref-MPLS-BGP" title='"Carrying Label Information in BGP-4"'>MPLS-BGP</a>].  When the advertising PE then
   receives a packet that has this particular advertised label, the PE
   will pop this label from the MPLS stack and process the packet
   appropriately (i.e., forward it directly according to the label or
   perform a lookup in the corresponding IPv6-VPN context).

   The BGP Multiprotocol Extensions [<a href="#ref-BGP-MP" title='"Multiprotocol Extensions for BGP-4"'>BGP-MP</a>] are used to advertise the
   IPv6 VPN routes in the MP_REACH Network Layer Reachability
   Information (NLRI).  The Address Family Identifier (AFI) and
   Subsequent Address Family Identifier (SAFI) fields MUST be set as
   follows:

      - AFI: 2; for IPv6

      - SAFI: 128; for MPLS labeled VPN-IPv6

   The NLRI field itself is encoded as specified in [<a href="#ref-MPLS-BGP" title='"Carrying Label Information in BGP-4"'>MPLS-BGP</a>].  In the
   context of this extension, the prefix belongs to the VPN-IPv6 Address
   Family and thus consists of an 8-octet Route Distinguisher followed
   by an IPv6 prefix as specified in <a href="#section-2">Section 2</a>, above.

<span class="h4"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.%20%20BGP%20Next%20Hop%20encoding"></a><a class="selflink" href="#section-3.2.1" name="section-3.2.1">3.2.1</a>.  BGP Next Hop encoding</span>

   The encoding of the BGP Next Hop depends on whether the policy of the
   BGP speaker is to request that IPv6 VPN traffic be transported to
   that BGP Next Hop using IPv6 tunneling ("BGP speaker requesting IPv6
   transport") or using IPv4 tunneling ("BGP speaker requesting IPv4
   transport").

   Definition of this policy (to request transport over IPv4 tunneling
   or IPv6 tunneling) is the responsibility of the network operator and
   is beyond the scope of this document.  Note that it is possible for
   that policy to request transport over IPv4 (resp. IPv6) tunneling
   while the BGP speakers exchange IPv6 VPN reachability information
   over IPv6 (resp. IPv4).  However, in that case, a number of
   operational implications are worth considering.  In particular, an
   undetected fault affecting the IPv4 (resp. IPv6) tunneling data path
   and not affecting the IPv6 (resp. IPv4) data path could remain
   undetected by BGP, which in turn may result in black-holing of
   traffic.

   Control of this policy is beyond the scope of this document and may
   be based on user configuration.



<span class="grey">De Clercq, et al.           Standards Track                     [Page 6]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-7" id="page-7" name="page-7"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.1.%20%20BGP%20Speaker%20Requesting%20IPv6%20Transport"></a><a class="selflink" href="#section-3.2.1.1" name="section-3.2.1.1">3.2.1.1</a>.  BGP Speaker Requesting IPv6 Transport</span>

   When the IPv6 VPN traffic is to be transported to the BGP speaker
   using IPv6 tunneling (e.g., IPv6 MPLS LSPs, IPsec-protected IPv6
   tunnels), the BGP speaker SHALL advertise a Next Hop Network Address
   field containing a VPN-IPv6 address

      - whose 8-octet RD is set to zero, and

      - whose 16-octet IPv6 address is set to the global IPv6 address of
        the advertising BGP speaker.

   This is potentially followed by another VPN-IPv6 address

      - whose 8-octet RD is set to zero, and

      - whose 16-octet IPv6 address is set to the link-local IPv6
        address of the advertising BGP speaker.

   The value of the Length of the Next Hop Network Address field in the
   MP_REACH_NLRI attribute shall be set to 24 when only a global address
   is present, and to 48 if a link-local address is also included in the
   Next Hop field.

   If the BGP speakers peer using only their link-local IPv6 address
   (for example, in the case where an IPv6 CE peers with an IPv6 PE,
   where the CE does not have any IPv6 global address, and where eBGP
   peering is achieved over the link-local addresses), the "unspecified
   address" ([<a href="#ref-V6ADDR" title='"IP Version 6 Addressing Architecture"'>V6ADDR</a>]) is used by the advertising BGP speaker to
   indicate the absence of the global IPv6 address in the Next Hop
   Network Address field.

   The link-local address shall be included in the Next Hop field if and
   only if the advertising BGP speaker shares a common subnet with the
   peer the route is being advertised to [<a href="#ref-BGP-IPv6" title='"Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing"'>BGP-IPv6</a>].

   In all other cases, a BGP speaker shall advertise to its peer in the
   Next Hop Network Address field only the global IPv6 address of the
   next hop.

   As a consequence, a BGP speaker that advertises a route to an
   internal peer may modify the Network Address of Next Hop field by
   removing the link-local IPv6 address of the next hop.

   An example scenario where both the global IPv6 address and the link-
   local IPv6 address shall be included in the BGP Next Hop address
   field is that where the IPv6 VPN service is supported over a multi-
   Autonomous System (AS) backbone with redistribution of labeled VPN-



<span class="grey">De Clercq, et al.           Standards Track                     [Page 7]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-8" id="page-8" name="page-8"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   IPv6 routes between Autonomous System Border Routers (ASBR) of
   different ASes sharing a common IPv6 subnet: in that case, both the
   global IPv6 address and the link-local IPv6 address shall be
   advertised by the ASBRs.

<span class="h5"><a class="dashAnchor" name="//apple_ref/Section/3.2.1.2.%20%20BGP%20Speaker%20Requesting%20IPv4%20Transport"></a><a class="selflink" href="#section-3.2.1.2" name="section-3.2.1.2">3.2.1.2</a>.  BGP Speaker Requesting IPv4 Transport</span>

   When the IPv6 VPN traffic is to be transported to the BGP speaker
   using IPv4 tunneling (e.g., IPv4 MPLS LSPs, IPsec-protected IPv4
   tunnels), the BGP speaker SHALL advertise to its peer a Next Hop
   Network Address field containing a VPN-IPv6 address:

      - whose 8-octet RD is set to zero, and

      - whose 16-octet IPv6 address is encoded as an IPv4-mapped IPv6
        address [<a href="#ref-V6ADDR" title='"IP Version 6 Addressing Architecture"'>V6ADDR</a>] containing the IPv4 address of the advertising
        BGP speaker.  This IPv4 address must be routable by the other
        BGP Speaker.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.3.%20%20Route%20Target"></a><a class="selflink" href="#section-3.3" name="section-3.3">3.3</a>.  Route Target</span>

   The use of route target is specified in [BGP/MPLS-VPN] and applies to
   IPv6 VPNs.  Encoding of the extended community attribute is defined
   in [<a href="#ref-BGP-EXTCOM" title='"BGP Extended Communities Attribute"'>BGP-EXTCOM</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/3.4.%20%20BGP%20Capability%20Negotiation"></a><a class="selflink" href="#section-3.4" name="section-3.4">3.4</a>.  BGP Capability Negotiation</span>

   In order for two PEs to exchange labeled IPv6 VPN NLRIs, they MUST
   use BGP Capabilities Negotiation to ensure that they both are capable
   of properly processing such NLRIs.  This is done as specified in
   [<a href="#ref-BGP-MP" title='"Multiprotocol Extensions for BGP-4"'>BGP-MP</a>] and [<a href="#ref-BGP-CAP" title='"Capabilities Advertisement with BGP-4"'>BGP-CAP</a>], by using capability code 1 (multiprotocol
   BGP), with AFI and SAFI values as specified above, in <a href="#section-3.2">Section 3.2</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/4.%20%20Encapsulation"></a><a class="selflink" href="#section-4" name="section-4">4</a>.  Encapsulation</span>

   The ingress PE Router MUST tunnel IPv6 VPN data over the backbone
   towards the Egress PE router identified as the BGP Next Hop for the
   corresponding destination IPv6 VPN prefix.













<span class="grey">De Clercq, et al.           Standards Track                     [Page 8]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-9" id="page-9" name="page-9"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   When the 16-octet IPv6 address contained in the BGP Next Hop field is
   encoded as an IPv4-mapped IPv6 address (see <a href="#section-3.2.1.2">Section 3.2.1.2</a>), the
   ingress PE MUST use IPv4 tunneling unless explicitly configured to do
   otherwise.  The ingress PE MAY optionally allow, through explicit
   configuration, the use of IPv6 tunneling when the 16-octet IPv6
   address contained in the BGP Next Hop field is encoded as an IPv4-
   mapped IPv6 address.  This would allow support of particular
   deployment environments where IPv6 tunneling is desired but where
   IPv4-mapped IPv6 addresses happen to be used for IPv6 reachability of
   the PEs instead of Global IPv6 addresses.

   When the 16-octet IPv6 address contained in the BGP Next Hop field is
   not encoded as an IPv4-mapped address (see <a href="#section-3.2.1.1">Section 3.2.1.1</a>), the
   ingress PE MUST use IPv6 tunneling.

   When a PE receives a packet from an attached CE, it looks up the
   packet's IPv6 destination address in the VRF corresponding to that
   CE.  This enables it to find a VPN-IPv6 route.  The VPN-IPv6 route
   will have an associated MPLS label and an associated BGP Next Hop.
   First, this MPLS label is pushed on the packet as the bottom label.
   Then, this labeled packet is encapsulated into the tunnel for
   transport to the egress PE identified by the BGP Next Hop.  Details
   of this encapsulation depend on the actual tunneling technique, as
   follows:

   As with MPLS/BGP for IPv4 VPNs [2547-GRE/IP], when tunneling is done
   using IPv4 tunnels or IPv6 tunnels (resp. IPv4 GRE tunnels or IPv6
   GRE tunnels), encapsulation of the labeled IPv6 VPN packet results in
   an MPLS-in-IP (resp. MPLS-in-GRE) encapsulated packet as specified in
   [MPLS-in-IP/GRE].  When tunneling is done using L2TPv3, encapsulation
   of the labeled IPv6 VPN packet results in an MPLS-in-L2TPv3-
   encapsulated packet, as specified in [<a href="#ref-MPLS-in-L2TPv3" title='"Encapsulation of MPLS over Layer-2 Tunneling Protocol Version 3"'>MPLS-in-L2TPv3</a>].

   As with MPLS/BGP for IPv4 VPNs, when tunneling is done using an IPsec
   secured tunnel [<a href="#ref-2547-IPsec" title='"Use of PE-PE IPsec in RFC2547 VPNs"'>2547-IPsec</a>], encapsulation of the labeled IPv6 VPN
   packet results in an MPLS-in-IP- or MPLS-in-GRE-encapsulated packet
   [MPLS-in-IP/GRE].  The IPsec Transport Mode is used to secure this
   IPv4 or GRE tunnel from ingress PE to egress PE.

   When tunneling is done using IPv4 tunnels (whether IPsec secured or
   not), the Ingress PE Router MUST use the IPv4 address that is encoded
   in the IPv4-mapped IPv6 address field of the BGP next hop field as
   the destination address of the prepended IPv4 tunneling header.  It
   uses one of its IPv4 addresses as the source address of the prepended
   IPv4 tunneling header.






<span class="grey">De Clercq, et al.           Standards Track                     [Page 9]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-10" id="page-10" name="page-10"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   When tunneling is done using IPv6 tunnels (whether IPsec secured or
   not), the Ingress PE Router MUST use the IPv6 address that is
   contained in the IPv6 address field of the BGP next hop field as the
   destination address of the prepended IPv6 tunneling header.  It uses
   one of its IPv6 addresses as the source address of the prepended IPv6
   tunneling header.

   When tunneling is done using MPLS LSPs, the LSPs can be established
   using any label distribution technique (LDP [<a href="#ref-LDP" title='"LDP Specification"'>LDP</a>], RSVP-TE [<a href="#ref-RSVP-TE" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RSVP-TE</a>],
   etc.).

   When tunneling is done using MPLS LSPs, the ingress PE Router MUST
   directly push the LSP tunnel label on the label stack of the labeled
   IPv6 VPN packet (i.e., without prepending any IPv4 or IPv6 header).
   This pushed label corresponds to the LSP starting on the ingress PE
   Router and ending on the egress PE Router.  The BGP Next Hop field is
   used to identify the egress PE router and in turn the label to be
   pushed on the stack.  When the IPv6 address in the BGP Next Hop field
   is an IPv4-mapped IPv6 address, the embedded IPv4 address will
   determine the tunnel label to push on the label stack.  In any other
   case, the IPv6 address in the BGP Next Hop field will determine the
   tunnel label to push on the label stack.

   To ensure interoperability among systems that implement this VPN
   architecture, all such systems MUST support tunneling using MPLS LSPs
   established by LDP [<a href="#ref-LDP" title='"LDP Specification"'>LDP</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/5.%20%20Address%20Types"></a><a class="selflink" href="#section-5" name="section-5">5</a>.  Address Types</span>

   Since Link-local unicast addresses are defined for use on a single
   link only, those may be used on the PE-CE link, but they are not
   supported for reachability across IPv6 VPN Sites and are never
   advertised via MultiProtocol-Border Gateway Protocol (MP-BGP) to
   remote PEs.

   Global unicast addresses are defined as uniquely identifying
   interfaces anywhere in the IPv6 Internet.  Global addresses are
   expected to be commonly used within and across IPv6 VPN Sites.  They
   are obviously supported by this IPv6 VPN solution for reachability
   across IPv6 VPN Sites and advertised via MP-BGP to remote PEs and are
   processed without any specific considerations to their global scope.










<span class="grey">De Clercq, et al.           Standards Track                    [Page 10]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-11" id="page-11" name="page-11"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   Quoting from [<a href="#ref-UNIQUE-LOCAL" title='"Unique Local IPv6 Unicast Addresses"'>UNIQUE-LOCAL</a>]: "This document defines an IPv6 unicast
   address format that is globally unique and is intended for local
   communications [<a href="#ref-IPv6" title='"Internet Protocol, Version 6 (IPv6) Specification"'>IPv6</a>].  These addresses are called Unique Local IPv6
   Unicast Addresses and are abbreviated in this document as Local IPv6
   addresses.  They are not expected to be routable on the global
   Internet.  They are routable inside of a more limited area such as a
   site.  They may also be routed between a limited set of sites."

   [<a id="ref-UNIQUE-LOCAL" name="ref-UNIQUE-LOCAL">UNIQUE-LOCAL</a>] also says in its <a href="#section-4.7">Section 4.7</a>: "Local IPv6 addresses
   can be used for inter-site Virtual Private Networks (VPN) if
   appropriate routes are set up.  Because the addresses are unique
   these VPNs will work reliably and without the need for translation.
   They have the additional property that they will continue to work if
   the individual sites are renumbered or merged."

   In accordance with this, Unique Local IPv6 Unicast Addresses are
   supported by the IPv6 VPN solution specified in this document for
   reachability across IPv6 VPN Sites.  Hence, reachability to such
   Unique Local IPv6 Addresses may be advertised via MP-BGP to remote
   PEs and processed by PEs in the same way as Global Unicast addresses.

   Recommendations and considerations for which of these supported
   address types should be used in given IPv6 VPN environments are
   beyond the scope of this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/6.%20%20Multicast"></a><a class="selflink" href="#section-6" name="section-6">6</a>.  Multicast</span>

   Multicast operations are outside the scope of this document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/7.%20%20Carriers%27%20Carriers"></a><a class="selflink" href="#section-7" name="section-7">7</a>.  Carriers' Carriers</span>

   Sometimes, an IPv6 VPN may actually be the network of an IPv6 ISP,
   with its own peering and routing policies.  Sometimes, an IPv6 VPN
   may be the network of an SP that is offering VPN services in turn to
   its own customers.  IPv6 VPNs like these can also obtain backbone
   service from another SP, the "Carrier's Carrier", using the Carriers'
   Carrier method described in <a href="#section-9">Section 9</a> of [BGP/MPLS-VPN] but applied
   to IPv6 traffic.  All the considerations discussed in [BGP/MPLS-VPN]
   for IPv4 VPN Carriers' Carrier apply for IPv6 VPN, with the exception
   that the use of MPLS (including label distribution) between the PE
   and the CE pertains to IPv6 routes instead of IPv4 routes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/8.%20%20Multi-AS%20Backbones"></a><a class="selflink" href="#section-8" name="section-8">8</a>.  Multi-AS Backbones</span>

   The same procedures described in <a href="#section-10">Section 10</a> of [BGP/MPLS-VPN] can be
   used (and have the same scalability properties) to address the
   situation where two sites of an IPv6 VPN are connected to different
   Autonomous Systems.  However, some additional points should be noted



<span class="grey">De Clercq, et al.           Standards Track                    [Page 11]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-12" id="page-12" name="page-12"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   when applying these procedures for IPv6 VPNs; these are further
   described in the remainder of this section.

   Approach (a): VRF-to-VRF connections at the AS (Autonomous System)
   border routers.

   This approach is the equivalent for IPv6 VPNs to procedure (a) in
   <a href="#section-10">Section 10</a> of [BGP/MPLS-VPN].  In the case of IPv6 VPNs, IPv6 needs
   to be activated on the inter-ASBR VRF-to-VRF (sub)interfaces.  In
   this approach, the ASBRs exchange IPv6 routes (as opposed to VPN-IPv6
   routes) and may peer over IPv6 or over IPv4.  The exchange of IPv6
   routes MUST be carried out as per [<a href="#ref-BGP-IPv6" title='"Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing"'>BGP-IPv6</a>].  This method does not
   use inter-AS LSPs.

   Finally, note that with this procedure, since every AS independently
   implements the intra-AS procedures for IPv6 VPNs described in this
   document, the participating ASes may all internally use IPv4
   tunneling, or IPv6 tunneling; or alternatively, some participating
   ASes may internally use IPv4 tunneling while others use IPv6
   tunneling.

   Approach (b): EBGP redistribution of labeled VPN-IPv6 routes from AS
   to neighboring AS.

   This approach is the equivalent for IPv6 VPNs to procedure (b) in
   <a href="#section-10">Section 10</a> of [BGP/MPLS-VPN].  With this approach, the ASBRs use EBGP
   to redistribute labeled VPN-IPv4 routes to ASBRs in other ASes.

   In this approach, IPv6 may or may not be activated on the inter-ASBR
   links since the ASBRs exchanging VPN-IPv6 routes may peer over IPv4
   or IPv6 (in which case, IPv6 obviously needs to be activated on the
   inter-ASBR link).  The exchange of labeled VPN-IPv6 routes MUST be
   carried out as per [<a href="#ref-BGP-IPv6" title='"Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing"'>BGP-IPv6</a>] and [<a href="#ref-MPLS-BGP" title='"Carrying Label Information in BGP-4"'>MPLS-BGP</a>].  When the VPN-IPv6
   traffic is to be transported using IPv6 tunneling, the BGP Next Hop
   Field SHALL contain an IPv6 address.  When the VPN-IPv6 traffic is to
   be transported using IPv4 tunneling, the BGP Next Hop Field SHALL
   contain an IPv4 address encoded as an IPv4-mapped IPv6 address.

   This approach requires that there be inter-AS LSPs.  As such, the
   corresponding (security) considerations described for procedure (b)
   in <a href="#section-10">Section 10</a> of [BGP/MPLS-VPN] apply equally to this approach for
   IPv6.









<span class="grey">De Clercq, et al.           Standards Track                    [Page 12]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-13" id="page-13" name="page-13"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   Finally, note that with this procedure, as with procedure (a), since
   every AS independently implements the intra-AS procedures for IPv6
   VPNs described in this document, the participating ASes may all
   internally use IPv4 tunneling or IPv6 tunneling; alternatively, some
   participating ASes may internally use IPv4 tunneling while others use
   IPv6 tunneling.

   Approach (c): Multihop EBGP redistribution of labeled VPN-IPv6 routes
   between source and destination ASes, with EBGP redistribution of
   labeled IPv4 or IPv6 routes from AS to neighboring AS.

   This approach is equivalent for exchange of VPN-IPv6 routes to
   procedure (c) in <a href="#section-10">Section 10</a> of [BGP/MPLS-VPN] for exchange of VPN-
   IPv4 routes.

   This approach requires that the participating ASes either all use
   IPv4 tunneling or all use IPv6 tunneling.

   In this approach, VPN-IPv6 routes are neither maintained nor
   distributed by the ASBR routers.  The ASBR routers need not be dual
   stack.  An ASBR needs to maintain labeled IPv4 (or IPv6) routes to
   the PE routers within its AS.  It uses EBGP to distribute these
   routes to other ASes.  ASBRs in any transit ASes will also have to
   use EBGP to pass along the labeled IPv4 (or IPv6) routes.  This
   results in the creation of an IPv4 (or IPv6) label switch path from
   ingress PE router to egress PE router.  Now, PE routers in different
   ASes can establish multi-hop EBGP connections to each other over IPv4
   or IPv6 and can exchange labeled VPN-IPv6 routes over those EBGP
   connections.  Note that the BGP Next Hop field of these distributed
   VPN-IPv6 routes will contain an IPv6 address when IPv6 tunneling is
   used or an IPv4-mapped IPv6 address when IPv4 tunneling is used.

   The considerations described for procedure (c) in <a href="#section-10">Section 10</a> of
   [BGP/MPLS-VPN] with respect to possible use of route-reflectors, with
   respect to possible use of a third label, and with respect to LSPs
   spanning multiple ASes apply equally to this IPv6 VPN approach.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/9.%20%20Accessing%20the%20Internet%20from%20a%20VPN"></a><a class="selflink" href="#section-9" name="section-9">9</a>.  Accessing the Internet from a VPN</span>

   The methods proposed by [BGP/MPLS-VPN] to access the global IPv4
   Internet from an IPv4 VPN can be used in the context of IPv6 VPNs and
   the global IPv6 Internet.  Note, however, that if the IPv6 packets
   from IPv6 VPN sites and destined for the global IPv6 Internet need to
   traverse the SP backbone, and that if this is an IPv4 only backbone,
   these packets must be tunneled through that IPv4 backbone.

   Clearly, as is the case outside the VPN context, access to the IPv6
   Internet from an IPv6 VPN requires the use of global IPv6 addresses.



<span class="grey">De Clercq, et al.           Standards Track                    [Page 13]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-14" id="page-14" name="page-14"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   In particular, Unique Local IPv6 addresses cannot be used for IPv6
   Internet access.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/10.%20%20Management%20VPN"></a><a class="selflink" href="#section-10" name="section-10">10</a>.  Management VPN</span>

   The management considerations discussed in <a href="#section-12">Section 12</a> of
   [BGP/MPLS-VPN] apply to the management of IPv6 VPNs.

   Where the Service Provider manages the CE of the IPv6 VPN site, the
   Service Provider may elect to use IPv4 for communication between the
   management tool and the CE for such management purposes.  In that
   case, regardless of whether a customer IPv4 site is actually
   connected to the CE (in addition to the IPv6 site), the CE is
   effectively part of an IPv4 VPN in addition to belonging to an IPv6
   VPN (i.e., the CE is attached to a VRF that supports IPv4 in addition
   to IPv6).  Considerations presented in [BGP/MPLS-VPN], on how to
   ensure that the management tool can communicate with such managed CEs
   from multiple VPNs without allowing undesired reachability across CEs
   of different VPNs, are applicable to the IPv4 reachability of the VRF
   to which the CE attaches.

   Where the Service Provider manages the CE of the IPv6 VPN site, the
   Service Provider may elect to use IPv6 for communication between the
   management tool and the CE for such management purposes.
   Considerations presented in [BGP/MPLS-VPN], on how to ensure that the
   management tool can communicate with such managed CEs from multiple
   VPNs without allowing undesired reachability across CEs of different
   VPNs, are then applicable to the IPv6 reachability of the VRF to
   which the CE attaches.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/11.%20%20Security%20Considerations"></a><a class="selflink" href="#section-11" name="section-11">11</a>.  Security Considerations</span>

   The extensions defined in this document allow MP-BGP to propagate
   reachability information about IPv6 VPN routes.

   Security considerations for the transport of IPv6 reachability
   information using BGP are discussed in <a href="rfc2545.html#section-5">RFC2545, Section5</a>, and are
   equally applicable for the extensions described in this document.

   The extensions described in this document for offering IPv6 VPNs use
   the exact same approach as the approach described in [BGP/MPLS-VPN].
   As such, the same security considerations apply with regards to Data
   Plane security, Control Plane security, and PE and P device security
   as described in [BGP/MPLS-VPN], <a href="#section-13">Section 13</a>.







<span class="grey">De Clercq, et al.           Standards Track                    [Page 14]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-15" id="page-15" name="page-15"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/12.%20%20Quality%20of%20Service"></a><a class="selflink" href="#section-12" name="section-12">12</a>.  Quality of Service</span>

   Since all the QoS mechanisms discussed for IPv4 VPNs in <a href="#section-14">Section 14</a> of
   [BGP/MPLS-VPN] operate in the same way for IPv4 and IPv6 (Diffserv,
   Intserv, MPLS Traffic Engineering), the QoS considerations discussed
   in [BGP/MPLS-VPN] are equally applicable to IPv6 VPNs (and this holds
   whether IPv4 tunneling or IPv6 tunneling is used in the backbone.)

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/13.%20%20Scalability"></a><a class="selflink" href="#section-13" name="section-13">13</a>.  Scalability</span>

   Each of the scalability considerations summarized for IPv4 VPNs in
   <a href="#section-15">Section 15</a> of [BGP/MPLS-VPN] is equally applicable to IPv6 VPNs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/14.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-14" name="section-14">14</a>.  IANA Considerations</span>

   This document specifies (see <a href="#section-3.2">Section 3.2</a>) the use of the BGP AFI
   (Address Family Identifier) value 2, along with the BGP SAFI
   (Subsequent Address Family Identifier) value 128, to represent the
   address family "VPN-IPv6 Labeled Addresses", which is defined in this
   document.

   The use of AFI value 2 for IPv6 is as currently specified in the IANA
   registry "Address Family Identifier", so IANA need not take any
   action with respect to it.

   The use of SAFI value 128 for "MPLS-labeled VPN address" is as
   currently specified in the IANA registry "Subsequence Address Family
   Identifier", so IANA need not take any action with respect to it.

<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/15.%20%20Acknowledgements"></a><a class="selflink" href="#section-15" name="section-15">15</a>.  Acknowledgements</span>

   We would like to thank Gerard Gastaud and Eric Levy-Abegnoli, who
   contributed to this document.

   In Memoriam

   The authors would like to acknowledge the valuable contribution to
   this document from Tri T. Nguyen, who passed away in April 2002 after
   a sudden illness.












<span class="grey">De Clercq, et al.           Standards Track                    [Page 15]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-16" id="page-16" name="page-16"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/Section/16.%20%20References"></a><a class="selflink" href="#section-16" name="section-16">16</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/16.1.%20%20Normative%20References"></a><a class="selflink" href="#section-16.1" name="section-16.1">16.1</a>.  Normative References</span>

   [BGP/MPLS-VPN]   Rosen, E. and Y. Rekhter, "BGP/MPLS IP Virtual
                    Private Networks (VPNs)", <a href="rfc4364.html">RFC 4364</a>, February 2006.

   [<a id="ref-BGP-EXTCOM" name="ref-BGP-EXTCOM">BGP-EXTCOM</a>]     Sangli, S., Tappan, D., and Y. Rekhter, "BGP
                    Extended Communities Attribute", <a href="rfc4360.html">RFC 4360</a>, February
                    2006.

   [<a id="ref-BGP-MP" name="ref-BGP-MP">BGP-MP</a>]         Bates, T., Rekhter, Y., Chandra, R., and D. Katz,
                    "Multiprotocol Extensions for BGP-4", <a href="rfc2858.html">RFC 2858</a>, June
                    2000.

   [<a id="ref-IPv6" name="ref-IPv6">IPv6</a>]           Deering, S. and R. Hinden, "Internet Protocol,
                    Version 6 (IPv6) Specification", <a href="rfc2460.html">RFC 2460</a>, December
                    1998.

   [<a id="ref-MPLS-BGP" name="ref-MPLS-BGP">MPLS-BGP</a>]       Rekhter, Y. and E. Rosen, "Carrying Label
                    Information in BGP-4", <a href="rfc3107.html">RFC 3107</a>, May 2001.

   [<a id="ref-BGP-CAP" name="ref-BGP-CAP">BGP-CAP</a>]        Chandra, R. and J. Scudder, "Capabilities
                    Advertisement with BGP-4", <a href="rfc3392.html">RFC 3392</a>, November 2002.

   [<a id="ref-LDP" name="ref-LDP">LDP</a>]            Andersson, L., Doolan, P., Feldman, N., Fredette,
                    A., and B. Thomas, "LDP Specification", <a href="rfc3036.html">RFC 3036</a>,
                    January 2001.

   [<a id="ref-BGP-IPv6" name="ref-BGP-IPv6">BGP-IPv6</a>]       Marques, P. and F. Dupont, "Use of BGP-4
                    Multiprotocol Extensions for IPv6 Inter-Domain
                    Routing", <a href="rfc2545.html">RFC 2545</a>, March 1999.

<span class="h3"><a class="dashAnchor" name="//apple_ref/Section/16.2.%20%20Informative%20References"></a><a class="selflink" href="#section-16.2" name="section-16.2">16.2</a>.  Informative References</span>

   [<a id="ref-V6ADDR" name="ref-V6ADDR">V6ADDR</a>]         Hinden, R. and S. Deering, "IP Version 6 Addressing
                    Architecture", <a href="rfc4291.html">RFC 4291</a>, February 2006.

   [<a id="ref-UNIQUE-LOCAL" name="ref-UNIQUE-LOCAL">UNIQUE-LOCAL</a>]   Hinden, R. and B. Haberman, "Unique Local IPv6
                    Unicast Addresses", <a href="rfc4193.html">RFC 4193</a>, October 2005.

   [2547-GRE/IP]    Rekhter and Rosen, "Use of PE-PE GRE or IP in
                    <a href="rfc2547.html">RFC2547</a> VPNs", Work in Progress.

   [<a id="ref-2547-IPsec" name="ref-2547-IPsec">2547-IPsec</a>]     Rosen, De Clercq, Paridaens, T'Joens, Sargor, "Use
                    of PE-PE IPsec in <a href="rfc2547.html">RFC2547</a> VPNs", Work in Progress,
                    August 2005.




<span class="grey">De Clercq, et al.           Standards Track                    [Page 16]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-17" id="page-17" name="page-17"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


   [<a id="ref-RSVP-TE" name="ref-RSVP-TE">RSVP-TE</a>]        Awduche, D., Berger, L., Gan, D., Li, T.,
                    Srinivasan, V., and G. Swallow, "RSVP-TE: Extensions
                    to RSVP for LSP Tunnels", <a href="rfc3209.html">RFC 3209</a>, December 2001.

   [MPLS-in-IP/GRE] Worster, T., Rekhter, Y., and E. Rosen,
                    "Encapsulating MPLS in IP or Generic Routing
                    Encapsulation (GRE)", <a href="rfc4023.html">RFC 4023</a>, March 2005.

   [<a id="ref-MPLS-in-L2TPv3" name="ref-MPLS-in-L2TPv3">MPLS-in-L2TPv3</a>] Townsley, M., et al., "Encapsulation of MPLS over
                    Layer-2 Tunneling Protocol Version 3", Work in
                    Progress, February 2006.

   [<a id="ref-BGP" name="ref-BGP">BGP</a>]            Rekhter, Y., Li, T., and S. Hares, "A Border Gateway
                    Protocol 4 (BGP-4)", <a href="rfc4271.html">RFC 4271</a>, January 2006.

Authors' Addresses

   Jeremy De Clercq
   Alcatel
   Copernicuslaan 50, 2018 Antwerpen, Belgium

   EMail: jeremy.de_clercq@alcatel.be


   Dirk Ooms
   OneSparrow
   Belegstraat 13, 2018 Antwerpen, Belgium

   EMail: dirk@onesparrow.com


   Marco Carugi
   Nortel Networks S.A.
   Parc d'activites de Magny-Les Jeunes Bois CHATEAUFORT
   78928 YVELINES Cedex 9 - France

   EMail: marco.carugi@nortel.com


   Francois Le Faucheur
   Cisco Systems, Inc.
   Village d'Entreprise Green Side - Batiment T3
   400, Avenue de Roumanille
   06410 Biot-Sophia Antipolis
   France

   EMail: flefauch@cisco.com




<span class="grey">De Clercq, et al.           Standards Track                    [Page 17]</span></pre>
<hr align="left" class="noprint" style="width: 96ex;"/><!--NewPage--><pre class="newpage"><a class="invisible" href="#page-18" id="page-18" name="page-18"> </a>
<span class="grey"><a href="rfc4659.html">RFC 4659</a>         BGP-MPLS IP VPN Extension for IPv6 VPN   September 2006</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2006).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://tools.ietf.org/html/bcp78">BCP 78</a> and <a href="https://tools.ietf.org/html/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).







De Clercq, et al.           Standards Track                    [Page 18]

</pre><br/>
    <span class="noprint"><small><small>Html markup produced by rfcmarkup 1.126, available from
      <a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
    </small></small></span>
  </div>




</body><!-- Mirrored from tools.ietf.org/html/rfc4659 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Mar 2018 23:18:40 GMT --></html>