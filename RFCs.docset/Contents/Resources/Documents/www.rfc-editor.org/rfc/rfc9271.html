<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9271: Uninterruptible Power Supply (UPS) Management Protocol -- Commands and Responses</title>
<meta content="Roger Price" name="author"/>
<meta content="
       This document describes the command/response protocol currently
used in the management of Uninterruptible Power Supply (UPS) units and
other power devices often deployed in small offices and in IT
installations subject to an erratic public power supply.  The UPS units typically
interface to an Attachment Daemon in the system they protect.  This
daemon is in turn polled by a Management Daemon that notifies users
and system administrators of power supply incidents and automates
system shutdown decisions.  The commands and responses described by
this document are exchanged between the UPS Attachment Daemon and the
Management Daemon.  The practice current when this protocol was first
developed risks weak security, and this is addressed in the Security
Considerations sections of this document.
 
    " name="description"/>
<meta content="xml2rfc 3.12.10" name="generator"/>
<meta content="Uninterruptible" name="keyword"/>
<meta content="Power" name="keyword"/>
<meta content="Supply" name="keyword"/>
<meta content="UPS" name="keyword"/>
<meta content="NUT" name="keyword"/>
<meta content="9271" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.12.10
    Python 3.6.15
    appdirs 1.4.4
    ConfigArgParse 1.4.1
    google-i18n-address 2.4.0
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    MarkupSafe 2.0.1
    pycairo 1.15.1
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.4.1
    requests 2.24.0
    setuptools 40.5.0
    six 1.14.0
    WeasyPrint 52.5
-->
<link href="rfc9271.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  pre.breakable {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9271" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-rprice-ups-management-protocol-15" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9271</td>
<td class="center">UPS Management Protocol</td>
<td class="right">August 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Price</td>
<td class="center">Informational</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Independent Submission</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9271">9271</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Informational</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2022-08">August 2022</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Price, <span class="editor">Ed.</span>
</div>
<div class="org">Network UPS Tools Project</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9271</h1>
<h1 id="title">Uninterruptible Power Supply (UPS) Management Protocol -- Commands and Responses</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document describes the command/response protocol currently
used in the management of Uninterruptible Power Supply (UPS) units and
other power devices often deployed in small offices and in IT
installations subject to an erratic public power supply.  The UPS units typically
interface to an Attachment Daemon in the system they protect.  This
daemon is in turn polled by a Management Daemon that notifies users
and system administrators of power supply incidents and automates
system shutdown decisions.  The commands and responses described by
this document are exchanged between the UPS Attachment Daemon and the
Management Daemon.  The practice current when this protocol was first
developed risks weak security, and this is addressed in the Security
Considerations sections of this document.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This document is not an Internet Standards Track specification; it is
            published for informational purposes.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This is a contribution to the RFC Series, independently of any
            other RFC stream.  The RFC Editor has chosen to publish this
            document at its discretion and makes no statement about its value
            for implementation or deployment.  Documents approved for
            publication by the RFC Editor are not candidates for any level of
            Internet Standard; see Section 2 of RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9271">https://www.rfc-editor.org/info/rfc9271</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1"><a class="xref" href="#section-1.1">1.1</a>.  <a class="xref" href="#name-current-practice">Current Practice</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1.2.1">
                    <p class="keepWithNext" id="section-toc.1-1.1.2.1.2.1.1"><a class="xref" href="#section-1.1.1">1.1.1</a>.  <a class="xref" href="#name-nut-project">NUT Project</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1.2.2">
                    <p class="keepWithNext" id="section-toc.1-1.1.2.1.2.2.1"><a class="xref" href="#section-1.1.2">1.1.2</a>.  <a class="xref" href="#name-the-shutdown-story">The Shutdown Story</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1.2.3">
                    <p class="keepWithNext" id="section-toc.1-1.1.2.1.2.3.1"><a class="xref" href="#section-1.1.3">1.1.3</a>.  <a class="xref" href="#name-how-to-read-this-document">How to Read this Document</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1"><a class="xref" href="#section-1.2">1.2</a>.  <a class="xref" href="#name-additional-information">Additional Information</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1"><a class="xref" href="#section-1.3">1.3</a>.  <a class="xref" href="#name-requirements-language">Requirements Language</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-terminology">Terminology</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a class="xref" href="#section-2.1">2.1</a>.  <a class="xref" href="#name-administrative-user">Administrative User</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a class="xref" href="#section-2.2">2.2</a>.  <a class="xref" href="#name-attachment-daemon">Attachment Daemon</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a class="xref" href="#section-2.3">2.3</a>.  <a class="xref" href="#name-driver">Driver</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a class="xref" href="#section-2.4">2.4</a>.  <a class="xref" href="#name-event">Event</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a class="xref" href="#section-2.5">2.5</a>.  <a class="xref" href="#name-instant-command">Instant Command</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6">
                <p id="section-toc.1-1.2.2.6.1"><a class="xref" href="#section-2.6">2.6</a>.  <a class="xref" href="#name-management-daemon">Management Daemon</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.7">
                <p id="section-toc.1-1.2.2.7.1"><a class="xref" href="#section-2.7">2.7</a>.  <a class="xref" href="#name-primary">Primary</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.8">
                <p id="section-toc.1-1.2.2.8.1"><a class="xref" href="#section-2.8">2.8</a>.  <a class="xref" href="#name-secondary">Secondary</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.9">
                <p id="section-toc.1-1.2.2.9.1"><a class="xref" href="#section-2.9">2.9</a>.  <a class="xref" href="#name-session">Session</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10">
                <p id="section-toc.1-1.2.2.10.1"><a class="xref" href="#section-2.10">2.10</a>. <a class="xref" href="#name-ups-status">UPS Status</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.11">
                <p id="section-toc.1-1.2.2.11.1"><a class="xref" href="#section-2.11">2.11</a>. <a class="xref" href="#name-ups-variable">UPS Variable</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-protocol-overview">Protocol Overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-protocol-specification">Protocol Specification</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-notation-used-in-this-speci">Notation Used in this Specification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-commands">Commands</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a class="xref" href="#section-4.2.1">4.2.1</a>.  <a class="xref" href="#name-attach"><code>ATTACH</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a class="xref" href="#section-4.2.2">4.2.2</a>.  <a class="xref" href="#name-detach"><code>DETACH</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a class="xref" href="#section-4.2.3">4.2.3</a>.  <a class="xref" href="#name-fsd"><code>FSD</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4">
                    <p id="section-toc.1-1.4.2.2.2.4.1"><a class="xref" href="#section-4.2.4">4.2.4</a>.  <a class="xref" href="#name-get"><code>GET</code></a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.1">
                        <p id="section-toc.1-1.4.2.2.2.4.2.1.1"><a class="xref" href="#section-4.2.4.1">4.2.4.1</a>.  <a class="xref" href="#name-get-cmddesc"><code>GET CMDDESC</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.2">
                        <p id="section-toc.1-1.4.2.2.2.4.2.2.1"><a class="xref" href="#section-4.2.4.2">4.2.4.2</a>.  <a class="xref" href="#name-get-desc"><code>GET DESC</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.3">
                        <p id="section-toc.1-1.4.2.2.2.4.2.3.1"><a class="xref" href="#section-4.2.4.3">4.2.4.3</a>.  <a class="xref" href="#name-get-numattach"><code>GET NUMATTACH</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.4">
                        <p id="section-toc.1-1.4.2.2.2.4.2.4.1"><a class="xref" href="#section-4.2.4.4">4.2.4.4</a>.  <a class="xref" href="#name-get-type"><code>GET TYPE</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.5">
                        <p id="section-toc.1-1.4.2.2.2.4.2.5.1"><a class="xref" href="#section-4.2.4.5">4.2.4.5</a>.  <a class="xref" href="#name-get-upsdesc"><code>GET UPSDESC</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.6">
                        <p id="section-toc.1-1.4.2.2.2.4.2.6.1"><a class="xref" href="#section-4.2.4.6">4.2.4.6</a>.  <a class="xref" href="#name-get-var"><code>GET VAR</code></a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.5">
                    <p id="section-toc.1-1.4.2.2.2.5.1"><a class="xref" href="#section-4.2.5">4.2.5</a>.  <a class="xref" href="#name-help"><code>HELP</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.6">
                    <p id="section-toc.1-1.4.2.2.2.6.1"><a class="xref" href="#section-4.2.6">4.2.6</a>.  <a class="xref" href="#name-instcmd"><code>INSTCMD</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7">
                    <p id="section-toc.1-1.4.2.2.2.7.1"><a class="xref" href="#section-4.2.7">4.2.7</a>.  <a class="xref" href="#name-list"><code>LIST</code></a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.1">
                        <p id="section-toc.1-1.4.2.2.2.7.2.1.1"><a class="xref" href="#section-4.2.7.1">4.2.7.1</a>.  <a class="xref" href="#name-list-client"><code>LIST CLIENT</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.2">
                        <p id="section-toc.1-1.4.2.2.2.7.2.2.1"><a class="xref" href="#section-4.2.7.2">4.2.7.2</a>.  <a class="xref" href="#name-list-cmd"><code>LIST CMD</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.3">
                        <p id="section-toc.1-1.4.2.2.2.7.2.3.1"><a class="xref" href="#section-4.2.7.3">4.2.7.3</a>.  <a class="xref" href="#name-list-enum"><code>LIST ENUM</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.4">
                        <p id="section-toc.1-1.4.2.2.2.7.2.4.1"><a class="xref" href="#section-4.2.7.4">4.2.7.4</a>.  <a class="xref" href="#name-list-range"><code>LIST RANGE</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.5">
                        <p id="section-toc.1-1.4.2.2.2.7.2.5.1"><a class="xref" href="#section-4.2.7.5">4.2.7.5</a>.  <a class="xref" href="#name-list-rw"><code>LIST RW</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.6">
                        <p id="section-toc.1-1.4.2.2.2.7.2.6.1"><a class="xref" href="#section-4.2.7.6">4.2.7.6</a>.  <a class="xref" href="#name-list-ups"><code>LIST UPS</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.7">
                        <p id="section-toc.1-1.4.2.2.2.7.2.7.1"><a class="xref" href="#section-4.2.7.7">4.2.7.7</a>.  <a class="xref" href="#name-list-var"><code>LIST VAR</code></a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.8">
                    <p id="section-toc.1-1.4.2.2.2.8.1"><a class="xref" href="#section-4.2.8">4.2.8</a>.  <a class="xref" href="#name-password"><code>PASSWORD</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.9">
                    <p id="section-toc.1-1.4.2.2.2.9.1"><a class="xref" href="#section-4.2.9">4.2.9</a>.  <a class="xref" href="#name-primary-2"><code>PRIMARY</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.10">
                    <p id="section-toc.1-1.4.2.2.2.10.1"><a class="xref" href="#section-4.2.10">4.2.10</a>. <a class="xref" href="#name-protver"><code>PROTVER</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.11">
                    <p id="section-toc.1-1.4.2.2.2.11.1"><a class="xref" href="#section-4.2.11">4.2.11</a>. <a class="xref" href="#name-set"><code>SET</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.12">
                    <p id="section-toc.1-1.4.2.2.2.12.1"><a class="xref" href="#section-4.2.12">4.2.12</a>. <a class="xref" href="#name-starttls"><code>STARTTLS</code></a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.12.2.1">
                        <p id="section-toc.1-1.4.2.2.2.12.2.1.1"><a class="xref" href="#section-4.2.12.1">4.2.12.1</a>.  <a class="xref" href="#name-key-infrastructure-and-self">Key Infrastructure and Self-Signed Certificates</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.13">
                    <p id="section-toc.1-1.4.2.2.2.13.1"><a class="xref" href="#section-4.2.13">4.2.13</a>. <a class="xref" href="#name-username"><code>USERNAME</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.14">
                    <p id="section-toc.1-1.4.2.2.2.14.1"><a class="xref" href="#section-4.2.14">4.2.14</a>. <a class="xref" href="#name-ver"><code>VER</code></a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="xref" href="#section-4.3">4.3</a>.  <a class="xref" href="#name-summary-of-responses">Summary of Responses</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a class="xref" href="#section-4.3.1">4.3.1</a>.  <a class="xref" href="#name-response-when-command-succe">Response When Command Succeeds</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a class="xref" href="#section-4.3.2">4.3.2</a>.  <a class="xref" href="#name-error-responses">Error Responses</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a class="xref" href="#section-4.4">4.4</a>.  <a class="xref" href="#name-an-abnf-of-the-commands">An ABNF of the Commands</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.1">
                    <p id="section-toc.1-1.4.2.4.2.1.1"><a class="xref" href="#section-4.4.1">4.4.1</a>.  <a class="xref" href="#name-responses-to-commands">Responses to Commands</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-statuses-and-events">Statuses and Events</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.  <a class="xref" href="#name-status-symbols">Status Symbols</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="xref" href="#section-5.2">5.2</a>.  <a class="xref" href="#name-events">Events</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="xref" href="#section-6.1">6.1</a>.  <a class="xref" href="#name-current-general-security-pr">Current General Security Practice</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a class="xref" href="#section-6.2">6.2</a>.  <a class="xref" href="#name-communication-security-requ">Communication Security Requirements</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a class="xref" href="#section-6.2.1">6.2.1</a>.  <a class="xref" href="#name-certificate-security">Certificate Security</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a class="xref" href="#section-6.3">6.3</a>.  <a class="xref" href="#name-attacks-and-defenses">Attacks and Defenses</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.1">
                    <p id="section-toc.1-1.6.2.3.2.1.1"><a class="xref" href="#section-6.3.1">6.3.1</a>.  <a class="xref" href="#name-eavesdropping">Eavesdropping</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.1.2.1">
                        <p id="section-toc.1-1.6.2.3.2.1.2.1.1"><a class="xref" href="#section-6.3.1.1">6.3.1.1</a>.  <a class="xref" href="#name-misplaced-declarations-requ">Misplaced Declarations Requiring TLS</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.1.2.2">
                        <p id="section-toc.1-1.6.2.3.2.1.2.2.1"><a class="xref" href="#section-6.3.1.2">6.3.1.2</a>.  <a class="xref" href="#name-weak-protection-in-previous">Weak Protection in Previous Version 2.7.4</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.2">
                    <p id="section-toc.1-1.6.2.3.2.2.1"><a class="xref" href="#section-6.3.2">6.3.2</a>.  <a class="xref" href="#name-man-in-the-middle">Man-in-the-Middle</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.3">
                    <p id="section-toc.1-1.6.2.3.2.3.1"><a class="xref" href="#section-6.3.3">6.3.3</a>.  <a class="xref" href="#name-masquerade-attack-agent-ver">Masquerade Attack: Agent Verification</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.4">
                    <p id="section-toc.1-1.6.2.3.2.4.1"><a class="xref" href="#section-6.3.4">6.3.4</a>.  <a class="xref" href="#name-message-insertion-deletion-">Message Insertion, Deletion, and Modification</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.5">
                    <p id="section-toc.1-1.6.2.3.2.5.1"><a class="xref" href="#section-6.3.5">6.3.5</a>.  <a class="xref" href="#name-replay">Replay</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3.2.6">
                    <p id="section-toc.1-1.6.2.3.2.6.1"><a class="xref" href="#section-6.3.6">6.3.6</a>.  <a class="xref" href="#name-denial-of-service">Denial of Service</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-implementation-status">Implementation Status</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a class="xref" href="#section-8.1">8.1</a>.  <a class="xref" href="#name-inclusion-in-software-distr">Inclusion in Software Distributions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a class="xref" href="#section-8.2">8.2</a>.  <a class="xref" href="#name-recommended-minimum-support">Recommended Minimum Support</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.1">
                    <p id="section-toc.1-1.8.2.2.2.1.1"><a class="xref" href="#section-8.2.1">8.2.1</a>.  <a class="xref" href="#name-desktop-pc-variables">Desktop PC Variables</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.2">
                    <p id="section-toc.1-1.8.2.2.2.2.1"><a class="xref" href="#section-8.2.2">8.2.2</a>.  <a class="xref" href="#name-unattended-servers-and-addi">Unattended Servers and Additional Variables</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.3">
                    <p id="section-toc.1-1.8.2.2.2.3.1"><a class="xref" href="#section-8.2.3">8.2.3</a>.  <a class="xref" href="#name-commands-and-other-technica">Commands and Other Technical                                                             
Terms</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.4">
                    <p id="section-toc.1-1.8.2.2.2.4.1"><a class="xref" href="#section-8.2.4">8.2.4</a>.  <a class="xref" href="#name-support-for-earlier-version">Support for Earlier Versions</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="xref" href="#section-9.1">9.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="xref" href="#section-9.2">9.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#appendix-A">Appendix A</a>.  <a class="xref" href="#name-variables">Variables</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="xref" href="#appendix-A.1">A.1</a>.  <a class="xref" href="#name-typical-ups-variables">Typical UPS Variables</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a class="xref" href="#appendix-A.2">A.2</a>.  <a class="xref" href="#name-typical-ups-readable-and-wr">Typical UPS Readable and Writable Variables</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a class="xref" href="#appendix-A.3">A.3</a>.  <a class="xref" href="#name-typical-ups-instant-command">Typical UPS Instant Commands</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#appendix-B">Appendix B</a>.  <a class="xref" href="#name-the-shutdown-story-for-syst">The Shutdown Story for System and UPS</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="xref" href="#appendix-C">Appendix C</a>.  <a class="xref" href="#name-technical-terms-historical-">Technical Terms: Historical Differences</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="xref" href="#appendix-D">Appendix D</a>.  <a class="xref" href="#name-security-defenses-in-releas">Security Defenses in Release 2.7.4</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a class="xref" href="#appendix-D.1">D.1</a>.  <a class="xref" href="#name-shims">Shims</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1.2.1">
                    <p id="section-toc.1-1.13.2.1.2.1.1"><a class="xref" href="#appendix-D.1.1">D.1.1</a>.  <a class="xref" href="#name-attachment-daemon-shim">Attachment Daemon Shim</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1.2.2">
                    <p id="section-toc.1-1.13.2.1.2.2.1"><a class="xref" href="#appendix-D.1.2">D.1.2</a>.  <a class="xref" href="#name-management-daemon-shim">Management Daemon Shim</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a class="xref" href="#appendix-D.2">D.2</a>.  <a class="xref" href="#name-tls-tunnels">TLS Tunnels</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a class="xref" href="#appendix-D.3">D.3</a>.  <a class="xref" href="#name-vpn">VPN</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.4">
                <p id="section-toc.1-1.13.2.4.1"><a class="xref" href="#appendix-D.4">D.4</a>.  <a class="xref" href="#name-vlan">VLAN</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a class="xref" href="#appendix-E">Appendix E</a>.  <a class="xref" href="#name-administrative-security">Administrative Security</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a class="xref" href="#appendix-E.1">E.1</a>.  <a class="xref" href="#name-management-of-administrativ">Management of Administrative Users</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a class="xref" href="#appendix-E.2">E.2</a>.  <a class="xref" href="#name-an-administrative-user-of-a">An Administrative User of a Client Management Daemon</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2.2.1">
                    <p id="section-toc.1-1.14.2.2.2.1.1"><a class="xref" href="#appendix-E.2.1">E.2.1</a>.  <a class="xref" href="#name-an-administrative-user-logs">An Administrative User Logs into a Short Session</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2.2.2">
                    <p id="section-toc.1-1.14.2.2.2.2.1"><a class="xref" href="#appendix-E.2.2">E.2.2</a>.  <a class="xref" href="#name-an-administrative-user-logs-">An Administrative User Logs into a Long Session</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a class="xref" href="#appendix-F"></a><a class="xref" href="#name-acknowledgments">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a class="xref" href="#appendix-G"></a><a class="xref" href="#name-authors-address">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<div id="intro">
<section id="section-1.1">
        <h3 id="name-current-practice">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-current-practice">Current Practice</a>
        </h3>
<p id="section-1.1-1">This document describes UPS management techniques and current UPS
management practice published by the Network UPS Tools (NUT) Project.
The document is based on version 2.8.0 of the NUT Project software,
which supports version 1.3 of the NUT protocol.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
<p id="section-1.1-2">Since May 2002, the protocol described by this document has been
operating on IANA port 3493/TCP (nut).<a class="pilcrow" href="#section-1.1-2">¶</a></p>
<div id="proj">
<section id="section-1.1.1">
          <h4 id="name-nut-project">
<a class="section-number selfRef" href="#section-1.1.1">1.1.1. </a><a class="section-name selfRef" href="#name-nut-project">NUT Project</a>
          </h4>
<p id="section-1.1.1-1">The primary goal of the Network UPS Tools (NUT)
Project software <span>[<a class="xref" href="#NUT">NUT</a>]</span> is to provide support for power
devices, such as UPSs.  The project has been
in operation since 1998, with a major rework in 2003.  It operates
through a user <span><a class="xref" href="#nut-upsuser">mailing list</a> [<a class="xref" href="#nut-upsuser">nut-upsuser</a>]</span>, a
developer <span><a class="xref" href="#nut-upsdev">mailing list</a> [<a class="xref" href="#nut-upsdev">nut-upsdev</a>]</span>,
a <span><a class="xref" href="#NUT">website</a> [<a class="xref" href="#NUT">NUT</a>]</span>, and
a <span><a class="xref" href="#nut-repository">GitHub repository</a> [<a class="xref" href="#nut-repository">nut-repository</a>]</span>.  See
<span>[<a class="xref" href="#githist">githist</a>]</span> and Appendix J of <span>[<a class="xref" href="#History">History</a>]</span> for
a history of the project.<a class="pilcrow" href="#section-1.1.1-1">¶</a></p>
</section>
</div>
<div id="TSS">
<section id="section-1.1.2">
          <h4 id="name-the-shutdown-story">
<a class="section-number selfRef" href="#section-1.1.2">1.1.2. </a><a class="section-name selfRef" href="#name-the-shutdown-story">The Shutdown Story</a>
          </h4>
<p id="section-1.1.2-1">The Shutdown Story section (see <a class="xref" href="#shutdownstory">Appendix B</a>)
describes the current UPS management practice for performing a managed
shutdown of unattended infrastructure after an unscheduled failure of
the public power supply in order to minimize the risk of corruption to data
processed by this infrastructure.<a class="pilcrow" href="#section-1.1.2-1">¶</a></p>
</section>
</div>
<div id="HowtoRead">
<section id="section-1.1.3">
          <h4 id="name-how-to-read-this-document">
<a class="section-number selfRef" href="#section-1.1.3">1.1.3. </a><a class="section-name selfRef" href="#name-how-to-read-this-document">How to Read this Document</a>
          </h4>
<p id="section-1.1.3-1">As a simplification to ease reading, the term "UPS" is used when
"Managed Power Device" would be more complete.  The reader should
understand the simple "UPS" to include other managed power devices.<a class="pilcrow" href="#section-1.1.3-1">¶</a></p>
<p id="section-1.1.3-2">The statuses and events appearing in this document are named with
short text-form names, some of which are abbreviations.  A full list
of the statuses can be found in <a class="xref" href="#symbols">Section 5.1</a>, while
the events are listed in
<a class="xref" href="#events">Section 5.2</a>.<a class="pilcrow" href="#section-1.1.3-2">¶</a></p>
<p id="section-1.1.3-3">This document refers to the "public power supply".  Other texts
frequently refer to "utility power", "input source power", or even
"wall power".<a class="pilcrow" href="#section-1.1.3-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="AddInf">
<section id="section-1.2">
        <h3 id="name-additional-information">
<a class="section-number selfRef" href="#section-1.2">1.2. </a><a class="section-name selfRef" href="#name-additional-information">Additional Information</a>
        </h3>
<p id="section-1.2-1">Additional information about the NUT Project is available in
the <span><a class="xref" href="#Documentation">project documentation</a> [<a class="xref" href="#Documentation">Documentation</a>]</span>.
Requests for further information about this protocol and related
technical matters may be addressed to
the <span><a class="xref" href="#nut-upsuser">mailing list</a> [<a class="xref" href="#nut-upsuser">nut-upsuser</a>]</span> of the NUT Project.<a class="pilcrow" href="#section-1.2-1">¶</a></p>
</section>
</div>
<section id="section-1.3">
        <h3 id="name-requirements-language">
<a class="section-number selfRef" href="#section-1.3">1.3. </a><a class="section-name selfRef" href="#name-requirements-language">Requirements Language</a>
        </h3>
<p id="section-1.3-1">
The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> 
when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.3-1">¶</a></p>
</section>
</section>
<div id="Terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<p id="section-2-1">The following technical terms appear in this document. They are
listed in alphabetical order.<a class="pilcrow" href="#section-2-1">¶</a></p>
<div id="au">
<section id="section-2.1">
        <h3 id="name-administrative-user">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-administrative-user">Administrative User</a>
        </h3>
<p id="section-2.1-1">In current practice, the commands and other functions offered by
the Attachment Daemon are made available to a set of users known as Management Daemons.  These
Management Daemons authenticate to the Attachment Daemon with basic credentials (username and
password).  Although called "users", the administrative users are not
system users; they are specific to an Attachment Daemon and are listed in a text
file (currently <code>upsd.users</code>) that is read by the Attachment Daemon and
that assigns to each of them the password, Instant Commands, and
actions that are allowed, together with the Primary or Secondary
status of the Management Daemon.  For details,
see <a class="xref" href="#adminuser">Appendix E.1</a>. For details of the Primary, see
<a class="xref" href="#prim">Section 2.7</a>; for details of the Secondary, see <a class="xref" href="#sec">Section 2.8</a>.  Typically, a
high-level user will be able to send command <code>FSD</code>, but a
low-level user might only be allowed to access the test panel.  The
security provisions for administrative users are discussed in
<a class="xref" href="#adsec">Appendix E</a>.<a class="pilcrow" href="#section-2.1-1">¶</a></p>
</section>
</div>
<div id="AD">
<section id="section-2.2">
        <h3 id="name-attachment-daemon">
<a class="section-number selfRef" href="#section-2.2">2.2. </a><a class="section-name selfRef" href="#name-attachment-daemon">Attachment Daemon</a>
        </h3>
<p id="section-2.2-1">The Attachment Daemon retrieves the status from the UPS and sends
commands to it often through a Driver specific to the hardware model
and the connection medium, e.g., USB, serial.  See <a class="xref" href="#Driver">Section 2.3</a>. It
maintains an abstracted view of the hardware through the use of
hardware statuses.  See <a class="xref" href="#st">Section 2.10</a>.  A Management Daemon may
consult the abstracted view using the commands described in this
document.<a class="pilcrow" href="#section-2.2-1">¶</a></p>
<p id="section-2.2-2">See <a class="xref" href="#MinSup">Section 8.2</a> for details of the recommended
minimum support of variables, which calls for Attachment Daemon support
of statuses <code>OB</code>, <code>OL</code>, <code>LB</code>, and <code>FSD</code>.<a class="pilcrow" href="#section-2.2-2">¶</a></p>
<p id="section-2.2-3">The NUT Project has implemented an Attachment Daemon as program <code>upsd</code>
and a set of hardware-specific Drivers, all written in K&amp;R C <span>[<a class="xref" href="#C2ndEd">C2ndEd</a>]</span>.  The
Attachment Daemon is launched as system user "root" but for better security; then, it
drops the privilege to run as a detached software service.<a class="pilcrow" href="#section-2.2-3">¶</a></p>
</section>
</div>
<div id="Driver">
<section id="section-2.3">
        <h3 id="name-driver">
<a class="section-number selfRef" href="#section-2.3">2.3. </a><a class="section-name selfRef" href="#name-driver">Driver</a>
        </h3>
<p id="section-2.3-1">A Driver is that part of an Attachment Daemon that is specific to
the UPS hardware, the connection medium, and the connection protocol,
e.g., USB, serial.  In current practice, the Attachment Daemon has a
Driver for each hardware interface type it supports.  Although this
document considers the Driver to be part of the Attachment Daemon,
current practice is to see it as a separate software unit running as a
daemon "in front of" the Attachment Daemon.  The protocol for data
exchange between the Driver and the Attachment Daemon is outside the
scope of this document.<a class="pilcrow" href="#section-2.3-1">¶</a></p>
</section>
</div>
<section id="section-2.4">
        <h3 id="name-event">
<a class="section-number selfRef" href="#section-2.4">2.4. </a><a class="section-name selfRef" href="#name-event">Event</a>
        </h3>
<p id="section-2.4-1">A UPS event occurs in the Management Daemon when a change in the UPS status is
received from the Attachment Daemon.  This event is internal to the Management Daemon.
See <a class="xref" href="#events">Section 5.2</a>.<a class="pilcrow" href="#section-2.4-1">¶</a></p>
</section>
<div id="IC">
<section id="section-2.5">
        <h3 id="name-instant-command">
<a class="section-number selfRef" href="#section-2.5">2.5. </a><a class="section-name selfRef" href="#name-instant-command">Instant Command</a>
        </h3>
<p id="section-2.5-1">An Instant Command is a command that, when sent to the Attachment Daemon,
is passed to the Driver and
sent to the hardware without any configured delay to perform a
function. For example, <code>INSTCMD su700 test.panel.start</code>.
See <a class="xref" href="#instcmd">Section 4.2.6</a>.<a class="pilcrow" href="#section-2.5-1">¶</a></p>
</section>
</div>
<div id="MD">
<section id="section-2.6">
        <h3 id="name-management-daemon">
<a class="section-number selfRef" href="#section-2.6">2.6. </a><a class="section-name selfRef" href="#name-management-daemon">Management Daemon</a>
        </h3>
<p id="section-2.6-1">The Management Daemon is primarily responsible for managing the
hardware and orchestrating system-wide actions after a power event.
Using commands sent to the Attachment Daemon, it follows the status of the UPS and
determines when UPS events occur.  It takes decisions based on the
events, such as calling for a system shutdown.  See
<a class="xref" href="#shutdownstory">Appendix B</a>. Although the term includes the
word "Daemon", nothing requires that it be implemented as a detached
software service.  The Management Daemon may also provide
administrative functions, such as a graphic interface to view the
hardware activity.<a class="pilcrow" href="#section-2.6-1">¶</a></p>
<p id="section-2.6-2">There are several examples of a Management Daemon: the NUT Project
provides <code>upsmon</code>, which takes the system shutdown decision when
the public power supply fails.  Further configuration options, such as timers, are
provided by the helper program <code>upssched</code>.<a class="pilcrow" href="#section-2.6-2">¶</a></p>
<div id="util">
<p id="section-2.6-3">Other programs represent the Management Daemon:<a class="pilcrow" href="#section-2.6-3">¶</a></p>
</div>
<ul class="compact">
<li class="compact" id="section-2.6-4.1">
            <code>upsc</code> reports the values of the variables defined for a
given UPS; see <a class="xref" href="#typvar">Table 6</a>.<a class="pilcrow" href="#section-2.6-4.1">¶</a>
</li>
          <li class="compact" id="section-2.6-4.2">
            <code>upsrw</code> reports on and changes the values of the readable
and writable configuration variables defined for a given UPS;
see <a class="xref" href="#rw">Appendix A.2</a>.<a class="pilcrow" href="#section-2.6-4.2">¶</a>
</li>
          <li class="compact" id="section-2.6-4.3">
            <code>upscmd</code> reports on and executes the instant action
commands defined for a given UPS; see <a class="xref" href="#instcmd">Section 4.2.6</a>.<a class="pilcrow" href="#section-2.6-4.3">¶</a>
</li>
          <li class="compact" id="section-2.6-4.4">
            <code>UPSmon.py</code> is an experimental Python3 rewrite
of <code>upsmon</code> and <code>upssched</code> that includes support
for <span><a class="xref" href="#RFC8446">TLS 1.3</a> [<a class="xref" href="#RFC8446">RFC8446</a>]</span>.<a class="pilcrow" href="#section-2.6-4.4">¶</a>
</li>
        </ul>
</section>
</div>
<div id="prim">
<section id="section-2.7">
        <h3 id="name-primary">
<a class="section-number selfRef" href="#section-2.7">2.7. </a><a class="section-name selfRef" href="#name-primary">Primary</a>
        </h3>
<p id="section-2.7-1">When a power device, such as a UPS unit, supplies power to more than
one system, the computer running the Driver is known as the Primary.
The others are Secondaries.  See <a class="xref" href="#fig.oview4">Figure 4</a>.  Common current practice for system administrators is
to consider the Management Daemon in the Primary to be the Primary Management
Daemon that is in charge of the shutdown of all the systems powered
by the UPS.  The Primary Management Daemon sets status
symbol <code>FSD</code> to order the Secondaries to shut down.<a class="pilcrow" href="#section-2.7-1">¶</a></p>
<aside id="section-2.7-2">
          <p id="section-2.7-2.1">Note: Historically, the Primary was known as the "Master".<a class="pilcrow" href="#section-2.7-2.1">¶</a></p>
</aside>
</section>
</div>
<div id="sec">
<section id="section-2.8">
        <h3 id="name-secondary">
<a class="section-number selfRef" href="#section-2.8">2.8. </a><a class="section-name selfRef" href="#name-secondary">Secondary</a>
        </h3>
<p id="section-2.8-1">When a hardware device, such as a UPS unit, supplies power to more
than one system, the system that communicates directly with the UPS
unit, e.g., using a USB, RS-232, or a network connection, is known as the
Primary.  The others are Secondaries.  There is no Attachment Daemon in a
Secondary. See <a class="xref" href="#fig.oview4">Figure 4</a>.
Common current practice for system administrators is to consider the
Management Daemon in a Secondary to be a Secondary Management Daemon that
understands status symbol <code>FSD</code> as an order to shut down.<a class="pilcrow" href="#section-2.8-1">¶</a></p>
<aside id="section-2.8-2">
          <p id="section-2.8-2.1">Note: Historically, the Secondary was known as the "Slave".<a class="pilcrow" href="#section-2.8-2.1">¶</a></p>
</aside>
</section>
</div>
<div id="sess">
<section id="section-2.9">
        <h3 id="name-session">
<a class="section-number selfRef" href="#section-2.9">2.9. </a><a class="section-name selfRef" href="#name-session">Session</a>
        </h3>
<p id="section-2.9-1">The Management Daemon may initiate a TCP session with a specified device, such
as a UPS known to the Attachment Daemon. The session structure provides for audit
and security, as well as access to mission-critical UPS functions.  For
example, good practice requires password protection for an Instant
Command that turns off a UPS outlet.  Other than the commands and
responses used, the details of session management are outside the
scope of this document.<a class="pilcrow" href="#section-2.9-1">¶</a></p>
</section>
</div>
<div id="st">
<section id="section-2.10">
        <h3 id="name-ups-status">
<a class="section-number selfRef" href="#section-2.10">2.10. </a><a class="section-name selfRef" href="#name-ups-status">UPS Status</a>
        </h3>
<p id="section-2.10-1">The status of a hardware device, such as a UPS unit, is a symbolic
description of the state of the unit.  It consists of a space-separated
list of symbols from the set {<code>ALARM</code> <code>BOOST</code> <code>BYPASS</code>
          <code>CAL</code> <code>CHRG</code> <code>COMM</code> <code>DISCHRG</code> <code>FSD</code> <code>LB</code> <code>NOCOMM</code> <code>OB</code>
          <code>OFF</code> <code>OL</code> <code>OVER</code> <code>RB</code> <code>TEST</code> <code>TRIM</code>}.  The symbols <code>TICK</code> and
<code>TOCK</code> are experimental additions to the statuses and are not in
common current practice.  See <a class="xref" href="#symbols">Section 5.1</a>, which
specifies each of these symbols.<a class="pilcrow" href="#section-2.10-1">¶</a></p>
<p id="section-2.10-2">See <a class="xref" href="#MinSup">Section 8.2</a> for details of the recommended
minimum support of status symbols <code>OB</code>, <code>OL</code>, <code>LB</code>,
and <code>FSD</code>.<a class="pilcrow" href="#section-2.10-2">¶</a></p>
</section>
</div>
<div id="var">
<section id="section-2.11">
        <h3 id="name-ups-variable">
<a class="section-number selfRef" href="#section-2.11">2.11. </a><a class="section-name selfRef" href="#name-ups-variable">UPS Variable</a>
        </h3>
<p id="section-2.11-1">The metrics and identifiers provided by each UPS are represented by
variables giving the value representing that metric or identifier. The
UPS variable is an abstraction of the UPS hardware configuration and
activity maintained by the Attachment Daemon.  See <a class="xref" href="#Annex1">Appendix A</a>,
which provides examples of variables.  For example, the
variable <code>battery.charge</code> contains the current charge of the
UPS battery as a percentage value.<a class="pilcrow" href="#section-2.11-1">¶</a></p>
<p id="section-2.11-2">Note: Some variables are constants, e.g., battery type and
manufacturer.<a class="pilcrow" href="#section-2.11-2">¶</a></p>
<p id="section-2.11-3">See <a class="xref" href="#MinSup">Section 8.2</a> for details of the
recommended minimum support of variables.  A full list of possible
variables is available in <span><a class="xref" href="#gitvars">source code file
docs/nut-names.txt</a> [<a class="xref" href="#gitvars">gitvars</a>]</span>, which serves as the Recording Document.<a class="pilcrow" href="#section-2.11-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="overview">
<section id="section-3">
      <h2 id="name-protocol-overview">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-protocol-overview">Protocol Overview</a>
      </h2>
<p id="section-3-1"><a class="xref" href="#fig.oview">Figure 1</a> shows a reference
configuration in which the command/response protocol applies.  The UPS
shown is representative of all managed power devices.<a class="pilcrow" href="#section-3-1">¶</a></p>
<span id="name-reference-configuration"></span><div id="fig.oview">
<figure id="figure-1">
        <div class="alignCenter art-ascii-art art-text artwork" id="section-3-2.1">
<pre>                                            "The client"
           ,--------------,               ,--------------,
 ,-----,   |     UPS      | &lt;-Commands    |     UPS      |
 | UPS |---|  Attachment  |---------------|  Management  |
 |     |===|    Daemon    |   Responses-&gt; |    Daemon    |
 /-----\   '--------------'               '--------------'
            UPS Attachment                 UPS Management
                System        Network          System
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-reference-configuration">Reference Configuration</a>
        </figcaption></figure>
</div>
<p id="section-3-3">The reference configuration in <a class="xref" href="#fig.oview">Figure 1</a> shows a single UPS unit that
has a power supply link
(<code>===</code>) and a data link (<code>---</code>) attached to a system
running an Attachment Daemon.  The UPS provides power supply protection to the
system running the Attachment Daemon.<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4">In practice, there may be more than one UPS unit, and a unit may
provide power protection to more than one system.  The figure also
shows a single Management Daemon.  In practice, there may be more than one
Management Daemon, and any one Management Daemon may manage more than
one UPS Attachment Daemon.<a class="pilcrow" href="#section-3-4">¶</a></p>
<p id="section-3-5">The protocol applies to connections between the Attachment Daemon
and the Management Daemon, which act as the <strong>server</strong>
and <strong>client</strong>, respectively.  The Management Daemon sends
commands over TCP to the Attachment Daemon and receives responses over
TCP from that daemon.<a class="pilcrow" href="#section-3-5">¶</a></p>
<p id="section-3-6">The two daemons may run in the same system or may be connected
through a local or wide area network.  In simple cases, as shown in
<a class="xref" href="#fig.oview2">Figure 2</a>, the Attachment Daemon
and the Management Daemon are in the same system, the one protected by the UPS.
The commands and responses are exchanged through an internal loopback
interface.<a class="pilcrow" href="#section-3-6">¶</a></p>
<span id="name-simplified-single-system-co"></span><div id="fig.oview2">
<figure id="figure-2">
        <div class="alignCenter art-ascii-art art-text artwork" id="section-3-7.1">
<pre>                                         "The client"
           ,--------------------,---------------------,
 ,-----,   |     UPS       &lt;-Commands        UPS      |
 | UPS |---|  Attachment        |         Management  |
 |     |===|    Daemon       Responses-&gt;    Daemon    |
 /-----\   '--------------------'---------------------'
                             Internal
                             Loopback
             UPS Attachment and Management System
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-simplified-single-system-co">Simplified Single-System Configuration</a>
        </figcaption></figure>
</div>
<p id="section-3-8">The reference configuration does not require any specific
design. For example, <a class="xref" href="#fig.oview3">Figure 3</a>
shows an arrangement in which the Attachment Daemon is closely associated with, or
even included in, the UPS system setup.  This is becoming more
prevalent with the availability of low-cost processors able to run the
Attachment Daemon, thereby effectively creating a network-attached UPS running a
published protocol.<a class="pilcrow" href="#section-3-8">¶</a></p>
<span id="name-ups-and-attachment-daemon-i"></span><div id="fig.oview3">
<figure id="figure-3">
        <div class="alignCenter art-ascii-art art-text artwork" id="section-3-9.1">
<pre>                                      "The client"
 ,-----,------------,               ,--------------,
 |     |    UPS     | &lt;-Commands    |     UPS      |
 | UPS - Attachment |---------------|  Management  |
 |     |   Daemon   |   Responses-&gt; |    Daemon    |
 /-----'------------\               '--------------'
    UPS Attachment                   UPS Management
        System           Network          System
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-ups-and-attachment-daemon-i">UPS and Attachment Daemon Integration</a>
        </figcaption></figure>
</div>
<p id="section-3-10">As the power requirements for processors decrease, it is becoming
increasingly common to use a single UPS to protect multiple systems, as
shown in <a class="xref" href="#fig.oview4">Figure 4</a>.  However,
there is only one data line (<code>---</code>) from the UPS to the Primary
system.  The others have only power connections (<code>===</code>) to the
UPS and are known as Secondaries.  A Secondary does not run an Attachment Daemon;
it connects over a network to the Attachment Daemon in the
Primary. <a class="xref" href="#fig.oview4">Figure 4</a> shows the
Attachment Daemon and the Primary Management Daemon in the same system.  This is common
practice, but it is not a technical requirement.<a class="pilcrow" href="#section-3-10">¶</a></p>
<span id="name-ups-protects-multiple-syste"></span><div id="fig.oview4">
<figure id="figure-4">
        <div class="alignCenter art-ascii-art art-text artwork" id="section-3-11.1">
<pre>                                      "The client"
           ,--------------------,---------------------,
 ,-----,   |     UPS       &lt;-Commands      Primary    |
 |     |---|  Attachment        |         Management  |   Primary
 |     |===|    Daemon       Responses-&gt;    Daemon    |
 |     |   '--------------------'---------------------'
 | UPS |            ^
 |     |            '&lt;-Commands---Responses-&gt;,
 |     |                                     v
 |     |            ,--------------,-----------------,
 |     |============|              |     Secondary   |
 /-----\            |              |     Management  |   Secondary
                    |              |       Daemon    |
                    '--------------'-----------------'
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-4">Figure 4</a>:
<a class="selfRef" href="#name-ups-protects-multiple-syste">UPS Protects Multiple Systems</a>
        </figcaption></figure>
</div>
<aside id="section-3-12">
        <p id="section-3-12.1">Note: Should the Primary fail or go offline, the fate of
the Secondaries depends on the UPS status when the Primary failed.  If
the UPS had status <code>OL</code>, the Secondary continues operation, but if the
UPS had status <code>OB</code>, the Secondary may choose to shut down as a precaution.<a class="pilcrow" href="#section-3-12.1">¶</a></p>
</aside>
</section>
</div>
<div id="protspec">
<section id="section-4">
      <h2 id="name-protocol-specification">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-protocol-specification">Protocol Specification</a>
      </h2>
<p id="section-4-1">This specification includes only the commands and their responses.
An implementation of the Attachment Daemon has an internal state machine, and some
complex implementations of the Management Daemon include an internal state
machine, for example, to assist the system shutdown of a complex
installation.  The Management Daemon is required to remember the
previous <code>ups.status</code> value it received from the Attachment Daemon and
compare it with the next.  Other than that, the management protocol
used between them is effectively stateless.<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2">For example, see <a class="xref" href="#events">Section 5.2</a>, which shows a map of the
new <code>ups.status</code> response and the previous <code>ups.status</code>
response to an event, which is taken as the basis for Management Daemon action.<a class="pilcrow" href="#section-4-2">¶</a></p>
<div id="Notation">
<section id="section-4.1">
        <h3 id="name-notation-used-in-this-speci">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-notation-used-in-this-speci">Notation Used in this Specification</a>
        </h3>
<p id="section-4.1-1">The character set used for commands
and responses is US-ASCII; see <span>[<a class="xref" href="#RFC0020">RFC0020</a>]</span>.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">Multi-word elements are contained between
quotation mark characters for easier parsing, e.g., "UPS on
fire". Embedded quotation marks are escaped with reverse slant (\), often known as backslashes. Embedded
backslashes are also escaped by representing them as \\.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<div id="onenewline">
<p id="section-4.1-3">Commands and responses have no leading or
trailing blank space and are terminated with a single new
line character line feed (LF).<a class="pilcrow" href="#section-4.1-3">¶</a></p>
</div>
<p id="section-4.1-4">Blank space within commands and responses is reduced to
one space (SP).<a class="pilcrow" href="#section-4.1-4">¶</a></p>
</section>
</div>
<div id="commands">
<section id="section-4.2">
        <h3 id="name-commands">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-commands">Commands</a>
        </h3>
<p id="section-4.2-1">The commands address the UPS to which they apply
by <code>&lt;upsname&gt;</code>, where<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.2-2.1">
            <code>&lt;upsname&gt;</code>
::= <code>&lt;ups&gt;[@&lt;hostname&gt;[:&lt;port&gt;]]</code><a class="pilcrow" href="#section-4.2-2.1">¶</a>
</li>
          <li class="compact" id="section-4.2-2.2">
            <code>&lt;ups&gt;</code> is defined by the Attachment Daemon configuration files.<a class="pilcrow" href="#section-4.2-2.2">¶</a>
</li>
          <li class="compact" id="section-4.2-2.3">The default <code>&lt;hostname&gt;</code> is <code>localhost</code>.<a class="pilcrow" href="#section-4.2-2.3">¶</a>
</li>
          <li class="compact" id="section-4.2-2.4">The <code>&lt;port&gt;</code> is the number of the TCP port on which
the Attachment Daemon is listening.  The default is 3493.  This is supported by
all current Management Daemons.<a class="pilcrow" href="#section-4.2-2.4">¶</a>
</li>
        </ul>
<p id="section-4.2-3">Examples: <code>myups</code>, <code>UPS-97B@bigserver.example.com</code><a class="pilcrow" href="#section-4.2-3">¶</a></p>
<p id="section-4.2-4">ABNF: See variable <code>upsname</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2-4">¶</a></p>
<p id="section-4.2-5">Note: Experimental Management Daemons use an extended form
of <code>&lt;upsname&gt;</code> in configuration files and in program
parameters, where:<a class="pilcrow" href="#section-4.2-5">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.2-6.1">
            <code>&lt;upsname&gt;</code> ::= <code>[&lt;group&gt;:]&lt;ups&gt;[@&lt;hostname&gt;[:&lt;port&gt;]]</code><a class="pilcrow" href="#section-4.2-6.1">¶</a>
</li>
          <li class="compact" id="section-4.2-6.2">
            <code>&lt;group&gt;</code> is an experimental extension to provide for groups of UPSs.  It is not in common current practice.<a class="pilcrow" href="#section-4.2-6.2">¶</a>
</li>
          <li class="compact" id="section-4.2-6.3">
            <code>&lt;ups&gt;</code> is defined by the Attachment Daemon configuration files.<a class="pilcrow" href="#section-4.2-6.3">¶</a>
</li>
          <li class="compact" id="section-4.2-6.4">The default <code>&lt;hostname&gt;</code> is <code>localhost</code>.<a class="pilcrow" href="#section-4.2-6.4">¶</a>
</li>
        </ul>
<p id="section-4.2-7">Examples: <code>ups-1@example.com:3493</code>, <code>HB:heartbeat1@example.com:3493</code><a class="pilcrow" href="#section-4.2-7">¶</a></p>
<aside id="section-4.2-8">
          <p id="section-4.2-8.1"><em>Implementation note:</em> In the current implementation,
the names of commands and subcommands are not case sensitive. For
example, <code>GET VAR</code> may be written as <code>Get var</code>, but in
this specification, they are always written in uppercase.
Similarly, <code>&lt;upsname&gt;</code> and <code>&lt;varname&gt;</code> are
not case sensitive.  For example, <code>UPS341 ups.id</code> may be written
as <code>ups341 Ups.Id</code>, but in this
specification, <code>&lt;varname&gt;</code> is always written in lower
case.<a class="pilcrow" href="#section-4.2-8.1">¶</a></p>
</aside>
<div id="attach">
<section id="section-4.2.1">
          <h4 id="name-attach">
<a class="section-number selfRef" href="#section-4.2.1">4.2.1. </a><a class="section-name selfRef" href="#name-attach"><code>ATTACH</code></a>
          </h4>
<p id="section-4.2.1-1">In a configuration like the one shown
in <a class="xref" href="#fig.oview4">Figure 4</a>, in which a UPS protects more than
one system, the Primary Management Daemon needs to know how many Secondaries are
currently <em>active</em>, i.e., powered by the UPS, either from the
public power supply or from battery power.  The Attachment Daemon supports this by keeping a
count of all the <em>active</em> systems powered by a UPS.  The
count is initialized, one Secondary at a time by the <code>ATTACH</code>
command, which should be understood as <em>count this Secondary as
active</em>.  <code>ATTACH</code> is one of three commands for Secondary
counting. Additionally, command <code>DETACH</code> decrements the count, and a Management Daemon may
read the count at any time using the command <code>NUMATTACH</code>.<a class="pilcrow" href="#section-4.2.1-1">¶</a></p>
<p id="section-4.2.1-2">The <code>ATTACH</code> command is also sent to the Attachment Daemon for the
Primary, so during normal, fully protected operation, the count is 1
for the Primary + the number of Secondaries.  During a full system
shutdown, the count drops as each Secondary Management Daemon executes command
<code>DETACH</code> during its own shutdown.  When the count drops to 1, only
the Primary is <em>active</em>, and it knows that all the Secondaries
have shut down.<a class="pilcrow" href="#section-4.2.1-2">¶</a></p>
<p id="section-4.2.1-3">Command: <code>ATTACH &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.1-3">¶</a></p>
<p id="section-4.2.1-4">If the command succeeds, the response is <code>OK</code>; otherwise,
see the error responses in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.1-4">¶</a></p>
<p id="section-4.2.1-5">ABNF: See variable <code>attach</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.1-5">¶</a></p>
<aside id="section-4.2.1-6">
            <p id="section-4.2.1-6.1">Note: Historically, this command was known as <code>LOGIN</code>.
However, because <code>LOGIN</code> was not the conventional user access to a
shell or program, the name was changed to avoid confusion.<a class="pilcrow" href="#section-4.2.1-6.1">¶</a></p>
</aside>
</section>
</div>
<div id="detach">
<section id="section-4.2.2">
          <h4 id="name-detach">
<a class="section-number selfRef" href="#section-4.2.2">4.2.2. </a><a class="section-name selfRef" href="#name-detach"><code>DETACH</code></a>
          </h4>
<p id="section-4.2.2-1">This companion command to <code>ATTACH</code> reduces the count of
"active" Secondaries.  It should be understood as <em>this Secondary
is no longer active</em> and is usually used during system shutdown
to decrement a count of how many Secondaries are still <em>active</em>.<a class="pilcrow" href="#section-4.2.2-1">¶</a></p>
<p id="section-4.2.2-2">Command: <code>DETACH</code><a class="pilcrow" href="#section-4.2.2-2">¶</a></p>
<p id="section-4.2.2-3">If the command succeeds, the response is <code>OK Goodbye</code>;
otherwise, see the error responses
in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.2-3">¶</a></p>
<p id="section-4.2.2-4">ABNF: See variable <code>detach</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.2-4">¶</a></p>
<aside id="section-4.2.2-5">
            <p id="section-4.2.2-5.1">Note: Historically, this command was known as <code>LOGOUT</code>.<a class="pilcrow" href="#section-4.2.2-5.1">¶</a></p>
</aside>
</section>
</div>
<div id="FSD">
<section id="section-4.2.3">
          <h4 id="name-fsd">
<a class="section-number selfRef" href="#section-4.2.3">4.2.3. </a><a class="section-name selfRef" href="#name-fsd"><code>FSD</code></a>
          </h4>
<p id="section-4.2.3-1">A Management Daemon that is Primary and has the required authority uses this
command to set status symbol <code>FSD</code>, meaning "Forced Shutdown", in
the Attachment Daemon.  In current practice, the Primary Management Daemon uses the symbol to
tell the Secondaries to shut down.<a class="pilcrow" href="#section-4.2.3-1">¶</a></p>
<p id="section-4.2.3-2">Command: <code>FSD &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.3-2">¶</a></p>
<p id="section-4.2.3-3">If the command succeeds, the response is <code>OK FSD-SET</code>;
otherwise, see the error responses in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.3-3">¶</a></p>
<p id="section-4.2.3-4">ABNF: See variable <code>fsd</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.3-4">¶</a></p>
<p id="section-4.2.3-5">In current practice, commands such as <code>FSD</code> are made
available only to a privileged administrative user authorized to send
such a mission-critical command.    The security provisions for
administrative users are discussed in <a class="xref" href="#adsec">Appendix E</a>.<a class="pilcrow" href="#section-4.2.3-5">¶</a></p>
<p id="section-4.2.3-6">Note: The symbol <code>FSD</code> is also used for an event.
See <a class="xref" href="#EventFSD">Table 5</a>.<a class="pilcrow" href="#section-4.2.3-6">¶</a></p>
</section>
</div>
<div id="get">
<section id="section-4.2.4">
          <h4 id="name-get">
<a class="section-number selfRef" href="#section-4.2.4">4.2.4. </a><a class="section-name selfRef" href="#name-get"><code>GET</code></a>
          </h4>
<p id="section-4.2.4-1">Retrieve a single response from the Attachment Daemon.<a class="pilcrow" href="#section-4.2.4-1">¶</a></p>
<p id="section-4.2.4-2">ABNF: See variable <code>get</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.4-2">¶</a></p>
<p id="section-4.2.4-3">The possible subcommands are listed in the sections below.<a class="pilcrow" href="#section-4.2.4-3">¶</a></p>
<div id="cmddesc">
<section id="section-4.2.4.1">
            <h5 id="name-get-cmddesc">
<a class="section-number selfRef" href="#section-4.2.4.1">4.2.4.1. </a><a class="section-name selfRef" href="#name-get-cmddesc"><code>GET CMDDESC</code></a>
            </h5>
<p id="section-4.2.4.1-1">Retrieve a text description of a command.<a class="pilcrow" href="#section-4.2.4.1-1">¶</a></p>
<p id="section-4.2.4.1-2">Command: <code>GET CMDDESC &lt;upsname&gt; &lt;cmdname&gt;</code><a class="pilcrow" href="#section-4.2.4.1-2">¶</a></p>
<p id="section-4.2.4.1-3">Response:
<code>CMDDESC &lt;upsname&gt; &lt;cmdname&gt; "&lt;description&gt;"</code><a class="pilcrow" href="#section-4.2.4.1-3">¶</a></p>
<p id="section-4.2.4.1-4">For example: command <code>GET CMDDESC su700 load.on</code> and
response <code>CMDDESC su700 load.on "Turn on the load immediately"</code><a class="pilcrow" href="#section-4.2.4.1-4">¶</a></p>
<p id="section-4.2.4.1-5">This is like <code>GET DESC</code>, but it applies to an Instant Command.
See <a class="xref" href="#desc">Section 4.2.4.2</a>.<a class="pilcrow" href="#section-4.2.4.1-5">¶</a></p>
</section>
</div>
<div id="desc">
<section id="section-4.2.4.2">
            <h5 id="name-get-desc">
<a class="section-number selfRef" href="#section-4.2.4.2">4.2.4.2. </a><a class="section-name selfRef" href="#name-get-desc"><code>GET DESC</code></a>
            </h5>
<p id="section-4.2.4.2-1">Retrieve a text description of a UPS variable.  See <a class="xref" href="#var">Section 2.11</a>.<a class="pilcrow" href="#section-4.2.4.2-1">¶</a></p>
<p id="section-4.2.4.2-2">Command: <code>GET DESC &lt;upsname&gt; &lt;varname&gt;</code><a class="pilcrow" href="#section-4.2.4.2-2">¶</a></p>
<p id="section-4.2.4.2-3">Response: <code>DESC &lt;upsname&gt; &lt;varname&gt; "&lt;description&gt;"</code><a class="pilcrow" href="#section-4.2.4.2-3">¶</a></p>
<p id="section-4.2.4.2-4"><code>&lt;description&gt;</code> is a string that gives a brief
explanation of the named variable.  The Attachment Daemon <span class="bcp14">MAY</span> return
"Unavailable" if the file that provides this description is not
installed.<a class="pilcrow" href="#section-4.2.4.2-4">¶</a></p>
<p id="section-4.2.4.2-5">For example: command <code>GET DESC su700 ups.status</code> and
response <code>DESC su700 ups.status "UPS status"</code><a class="pilcrow" href="#section-4.2.4.2-5">¶</a></p>
</section>
</div>
<div id="numattach">
<section id="section-4.2.4.3">
            <h5 id="name-get-numattach">
<a class="section-number selfRef" href="#section-4.2.4.3">4.2.4.3. </a><a class="section-name selfRef" href="#name-get-numattach"><code>GET NUMATTACH</code></a>
            </h5>
<p id="section-4.2.4.3-1">Retrieve the count kept by the Attachment Daemon of all the <em>active</em>
systems protected by this UPS.<a class="pilcrow" href="#section-4.2.4.3-1">¶</a></p>
<p id="section-4.2.4.3-2">Command: <code>GET NUMATTACH &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.4.3-2">¶</a></p>
<p id="section-4.2.4.3-3">Response: <code>NUMATTACH &lt;upsname&gt; &lt;value&gt;</code><a class="pilcrow" href="#section-4.2.4.3-3">¶</a></p>
<p id="section-4.2.4.3-4"><code>&lt;value&gt;</code> is a count of the Primary and the
number of Secondaries currently powered by this UPS.<a class="pilcrow" href="#section-4.2.4.3-4">¶</a></p>
<p id="section-4.2.4.3-5">For example: command <code>GET ATTACH su700</code> and
response <code>NUMATTACH su700 1</code><a class="pilcrow" href="#section-4.2.4.3-5">¶</a></p>
<p id="section-4.2.4.3-6">This information is needed by the Management Daemon to determine how many
Secondaries are still connected during the system shutdown process.<a class="pilcrow" href="#section-4.2.4.3-6">¶</a></p>
<aside id="section-4.2.4.3-7">
              <p id="section-4.2.4.3-7.1">Note: Historically, this subcommand was known
as <code>NUMLOGINS</code>.  Since <code>LOGIN</code> was not the conventional
user access to a shell or program, the name was changed to avoid
confusion.<a class="pilcrow" href="#section-4.2.4.3-7.1">¶</a></p>
</aside>
</section>
</div>
<div id="type">
<section id="section-4.2.4.4">
            <h5 id="name-get-type">
<a class="section-number selfRef" href="#section-4.2.4.4">4.2.4.4. </a><a class="section-name selfRef" href="#name-get-type"><code>GET TYPE</code></a>
            </h5>
<p id="section-4.2.4.4-1">Retrieve the type of a UPS variable.  See <a class="xref" href="#var">Section 2.11</a>.<a class="pilcrow" href="#section-4.2.4.4-1">¶</a></p>
<p id="section-4.2.4.4-2">Command: <code>GET TYPE &lt;upsname&gt; &lt;varname&gt;</code><a class="pilcrow" href="#section-4.2.4.4-2">¶</a></p>
<p id="section-4.2.4.4-3">Response: <code>TYPE &lt;upsname&gt; &lt;varname&gt; &lt;type&gt;...</code><a class="pilcrow" href="#section-4.2.4.4-3">¶</a></p>
<p id="section-4.2.4.4-4"><code>&lt;type&gt;...</code> can be one or more of the following
tokens.  Multiple types may be returned.<a class="pilcrow" href="#section-4.2.4.4-4">¶</a></p>
<p id="section-4.2.4.4-5">For example: command <code>GET TYPE su700 input.transfer.low</code> and
response <code>TYPE su700 input.transfer.low ENUM</code><a class="pilcrow" href="#section-4.2.4.4-5">¶</a></p>
<span id="name-variable-types"></span><table class="center" id="table-1">
              <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-variable-types">Variable Types</a>
              </caption>
<thead>
                <tr>
                  <th class="text-center" colspan="1" rowspan="1">    Type    </th>
                  <th class="text-center" colspan="1" rowspan="1">Meaning</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">RW </td>
                  <td class="text-left" colspan="1" rowspan="1">This is a read/write variable.  It may be read with
command <code>GET VAR</code> (see <a class="xref" href="#getvar">Section 4.2.4.6</a>) and set to a different value
with command <code>SET</code> (see <a class="xref" href="#set">Section 4.2.11</a>).
</td>
                </tr>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">ENUM </td>
                  <td class="text-left" colspan="1" rowspan="1">This is an enumerated type, which supports specific
predetermined values.
</td>
                </tr>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">STRING:n </td>
                  <td class="text-left" colspan="1" rowspan="1">This is a string of maximum
length <code>n</code>.
</td>
                </tr>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">RANGE </td>
                  <td class="text-left" colspan="1" rowspan="1">
                    <p id="section-4.2.4.4-6.2.4.2.1">This is a number, either integer or float,
comprised in the range that may be seen with the command <code>LIST
RANGE</code> (see <a class="xref" href="#range">Section 4.2.7.4</a>).<a class="pilcrow" href="#section-4.2.4.4-6.2.4.2.1">¶</a></p>
</td>
                </tr>
                <tr>
                  <td class="text-left" colspan="1" rowspan="1">NUMBER </td>
                  <td class="text-left" colspan="1" rowspan="1">This is a single numeric value, either
integer or float.
</td>
                </tr>
              </tbody>
            </table>
<p id="section-4.2.4.4-7">Notes:<a class="pilcrow" href="#section-4.2.4.4-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.4.4-8.1">ENUM, STRING:n, and RANGE are usually associated with RW but
not always. The default &lt;type&gt;, when omitted, is numeric, so
either integer or float. Each Driver is then responsible for
handling values as either integer or float.<a class="pilcrow" href="#section-4.2.4.4-8.1">¶</a>
</li>
              <li class="normal" id="section-4.2.4.4-8.2">Current practice is to represent floating point values using
 a decimal (base 10) 
English-based representation. Hexadecimals, exponents, and commas used as separators for
thousands are not allowed. For example, "1200.20" is valid,
while "1,200.20" and "1200,20" are not valid.<a class="pilcrow" href="#section-4.2.4.4-8.2">¶</a>
</li>
            </ul>
</section>
</div>
<div id="upsdesc">
<section id="section-4.2.4.5">
            <h5 id="name-get-upsdesc">
<a class="section-number selfRef" href="#section-4.2.4.5">4.2.4.5. </a><a class="section-name selfRef" href="#name-get-upsdesc"><code>GET UPSDESC</code></a>
            </h5>
<p id="section-4.2.4.5-1">Retrieve a text description of a UPS.<a class="pilcrow" href="#section-4.2.4.5-1">¶</a></p>
<p id="section-4.2.4.5-2">Command: <code>GET UPSDESC &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.4.5-2">¶</a></p>
<p id="section-4.2.4.5-3">Response: <code>UPSDESC &lt;upsname&gt; "&lt;description&gt;"</code><a class="pilcrow" href="#section-4.2.4.5-3">¶</a></p>
<p id="section-4.2.4.5-4">&lt;description&gt; is defined by the Attachment Daemon configuration. If
it is not set, current practice is for the Attachment Daemon to return
"Unavailable".<a class="pilcrow" href="#section-4.2.4.5-4">¶</a></p>
<p id="section-4.2.4.5-5">For example: command <code>GET UPSDESC su700</code> and response
<code>UPSDESC su700 "Development box"</code><a class="pilcrow" href="#section-4.2.4.5-5">¶</a></p>
<p id="section-4.2.4.5-6">This can be used to provide human-readable descriptions, instead of
a cryptic <code>ups@hostname</code> string.<a class="pilcrow" href="#section-4.2.4.5-6">¶</a></p>
</section>
</div>
<div id="getvar">
<section id="section-4.2.4.6">
            <h5 id="name-get-var">
<a class="section-number selfRef" href="#section-4.2.4.6">4.2.4.6. </a><a class="section-name selfRef" href="#name-get-var"><code>GET VAR</code></a>
            </h5>
<p id="section-4.2.4.6-1">Retrieve the value of a UPS variable.  See <a class="xref" href="#var">Section 2.11</a>.<a class="pilcrow" href="#section-4.2.4.6-1">¶</a></p>
<p id="section-4.2.4.6-2">Command: <code>GET VAR &lt;upsname&gt;
&lt;varname&gt;</code><a class="pilcrow" href="#section-4.2.4.6-2">¶</a></p>
<p id="section-4.2.4.6-3">Response: <code>VAR &lt;upsname&gt; &lt;varname&gt; "&lt;value&gt;"</code><a class="pilcrow" href="#section-4.2.4.6-3">¶</a></p>
<p id="section-4.2.4.6-4">For example: command <code>GET VAR su700 ups.status</code> and response
<code>VAR su700 ups.status "OB LB"</code><a class="pilcrow" href="#section-4.2.4.6-4">¶</a></p>
</section>
</div>
</section>
</div>
<div id="help">
<section id="section-4.2.5">
          <h4 id="name-help">
<a class="section-number selfRef" href="#section-4.2.5">4.2.5. </a><a class="section-name selfRef" href="#name-help"><code>HELP</code></a>
          </h4>
<p id="section-4.2.5-1">Return a list of the commands supported by the Attachment Daemon.  This command
is intended for human, as well as program, use.<a class="pilcrow" href="#section-4.2.5-1">¶</a></p>
<p id="section-4.2.5-2">Command: <code>HELP</code><a class="pilcrow" href="#section-4.2.5-2">¶</a></p>
<p id="section-4.2.5-3">For example: the following command line sequence executed on an
Attachment Daemon<a class="pilcrow" href="#section-4.2.5-3">¶</a></p>
<div id="section-4.2.5-4">
<pre class="lang-shell sourcecode">netcat localhost 3493
HELP
Commands: HELP VER GET LIST SET INSTCMD ATTACH DETACH
    USERNAME PASSWORD STARTTLS
</pre><a class="pilcrow" href="#section-4.2.5-4">¶</a>
</div>
<p id="section-4.2.5-5">ABNF: See variable <code>help</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.5-5">¶</a></p>
<aside id="section-4.2.5-6">
            <p id="section-4.2.5-6.1">Note: Historically, this command also returned <code>LOGIN</code>
and <code>LOGOUT</code>.  Because <code>LOGIN</code> was not the conventional
user access to a shell or program, the command names were changed
to <code>ATTACH</code> and <code>DETACH</code> to avoid confusion.<a class="pilcrow" href="#section-4.2.5-6.1">¶</a></p>
</aside>
</section>
</div>
<div id="instcmd">
<section id="section-4.2.6">
          <h4 id="name-instcmd">
<a class="section-number selfRef" href="#section-4.2.6">4.2.6. </a><a class="section-name selfRef" href="#name-instcmd"><code>INSTCMD</code></a>
          </h4>
<p id="section-4.2.6-1">Send an Instant Command to the UPS.<a class="pilcrow" href="#section-4.2.6-1">¶</a></p>
<p id="section-4.2.6-2">Command: <code>INSTCMD &lt;upsname&gt; &lt;cmdname&gt;</code><a class="pilcrow" href="#section-4.2.6-2">¶</a></p>
<p id="section-4.2.6-3"><code>&lt;upsname&gt;</code> is the name of the UPS,
and <code>&lt;cmdname&gt;</code> is the Instant Command to be issued to
that UPS.  See <a class="xref" href="#instcmdexamples">Appendix A.3</a> for examples of
Instant Commands.<a class="pilcrow" href="#section-4.2.6-3">¶</a></p>
<p id="section-4.2.6-4">If the command succeeds, the response is <code>OK</code>; otherwise,
see the error responses in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.6-4">¶</a></p>
<p id="section-4.2.6-5">For example: command <code>INSTCMD su700 test.panel.start</code>
and response <code>OK</code><a class="pilcrow" href="#section-4.2.6-5">¶</a></p>
<p id="section-4.2.6-6">ABNF: See variable <code>instcmd</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.6-6">¶</a></p>
</section>
</div>
<div id="list">
<section id="section-4.2.7">
          <h4 id="name-list">
<a class="section-number selfRef" href="#section-4.2.7">4.2.7. </a><a class="section-name selfRef" href="#name-list"><code>LIST</code></a>
          </h4>
<p id="section-4.2.7-1">All the <code>LIST</code> commands produce a response with a common
format. The response begins with <code>BEGIN LIST</code> and then
repeats the initial query.  A list then follows, with as many lines as
are necessary.  The response ends with <code>END LIST</code>, followed by
the initial query.<a class="pilcrow" href="#section-4.2.7-1">¶</a></p>
<p id="section-4.2.7-2">The formatting may seem a bit redundant, but it makes a different
form of client possible.  A client can send a <code>LIST</code> command
and then wait for the response. When it arrives, the Management Daemon doesn't
need a complicated state machine to remember which list is which.<a class="pilcrow" href="#section-4.2.7-2">¶</a></p>
<p id="section-4.2.7-3">Note: The current NUT Project implementation of the
Attachment Daemon, <code>upsd</code>, sends back the response to the <code>LIST</code>
command as a sequence of messages.  The Management Daemon should continue reading
these messages until it receives the line beginning <code>END LIST</code>.<a class="pilcrow" href="#section-4.2.7-3">¶</a></p>
<p id="section-4.2.7-4">ABNF: See the variable <code>list</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.7-4">¶</a></p>
<p id="section-4.2.7-5">The possible subcommands are listed in the sections below.<a class="pilcrow" href="#section-4.2.7-5">¶</a></p>
<div id="client">
<section id="section-4.2.7.1">
            <h5 id="name-list-client">
<a class="section-number selfRef" href="#section-4.2.7.1">4.2.7.1. </a><a class="section-name selfRef" href="#name-list-client"><code>LIST CLIENT</code></a>
            </h5>
<p id="section-4.2.7.1-1">The command calls for the Attachment Daemon to report all the current Management Daemon
clients of a given UPS.<a class="pilcrow" href="#section-4.2.7.1-1">¶</a></p>
<p id="section-4.2.7.1-2">Command: <code>LIST CLIENT &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.7.1-2">¶</a></p>
<p id="section-4.2.7.1-3">Response:<a class="pilcrow" href="#section-4.2.7.1-3">¶</a></p>
<div id="section-4.2.7.1-4">
<pre class="lang-shell sourcecode">BEGIN LIST CLIENT &lt;upsname&gt;
CLIENT &lt;upsname&gt; &lt;client_IP_address&gt;
...
END LIST CLIENT &lt;upsname&gt;
</pre><a class="pilcrow" href="#section-4.2.7.1-4">¶</a>
</div>
<p id="section-4.2.7.1-5">For example: command <code>LIST CLIENT ups1</code> and response<a class="pilcrow" href="#section-4.2.7.1-5">¶</a></p>
<div id="section-4.2.7.1-6">
<pre class="lang-shell sourcecode">BEGIN LIST CLIENT ups1
CLIENT ups1 ::1
CLIENT ups1 203.0.113.1
END LIST CLIENT ups1
</pre><a class="pilcrow" href="#section-4.2.7.1-6">¶</a>
</div>
</section>
</div>
<div id="cmd">
<section id="section-4.2.7.2">
            <h5 id="name-list-cmd">
<a class="section-number selfRef" href="#section-4.2.7.2">4.2.7.2. </a><a class="section-name selfRef" href="#name-list-cmd"><code>LIST CMD</code></a>
            </h5>
<p id="section-4.2.7.2-1">The command calls for the Attachment Daemon to report a list of the Instant
Commands that the Management Daemon may send to the Attachment Daemon.  This Instant Command
list is the abstracted view of the UPS hardware capabilities.  An
economical UPS will support few or no Instant Commands, but a
professional model should support more.<a class="pilcrow" href="#section-4.2.7.2-1">¶</a></p>
<p id="section-4.2.7.2-2">Command: <code>LIST CMD &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.7.2-2">¶</a></p>
<p id="section-4.2.7.2-3">Response:<a class="pilcrow" href="#section-4.2.7.2-3">¶</a></p>
<div id="section-4.2.7.2-4">
<pre class="lang-shell sourcecode">BEGIN LIST CMD &lt;upsname&gt;
CMD &lt;upsname&gt; &lt;cmdname&gt;
...
END LIST CMD &lt;upsname&gt;
</pre><a class="pilcrow" href="#section-4.2.7.2-4">¶</a>
</div>
<p id="section-4.2.7.2-5"><code>&lt;upsname&gt;</code> is the name of the UPS,
and <code>&lt;cmdname&gt;</code> is the name of the Instant Command that
may be issued to the UPS.<a class="pilcrow" href="#section-4.2.7.2-5">¶</a></p>
<p id="section-4.2.7.2-6">For example: command <code>LIST CMD su700</code> and response<a class="pilcrow" href="#section-4.2.7.2-6">¶</a></p>
<div id="section-4.2.7.2-7">
<pre class="lang-shell sourcecode">BEGIN LIST CMD su700
CMD su700 load.on
CMD su700 test.panel.start
...
END LIST CMD su700
</pre><a class="pilcrow" href="#section-4.2.7.2-7">¶</a>
</div>
</section>
</div>
<div id="enum">
<section id="section-4.2.7.3">
            <h5 id="name-list-enum">
<a class="section-number selfRef" href="#section-4.2.7.3">4.2.7.3. </a><a class="section-name selfRef" href="#name-list-enum"><code>LIST ENUM</code></a>
            </h5>
<p id="section-4.2.7.3-1">The command calls for the Attachment Daemon to report the set of possible
values of a UPS variable that has predetermined values.<a class="pilcrow" href="#section-4.2.7.3-1">¶</a></p>
<p id="section-4.2.7.3-2">Command: <code>LIST ENUM &lt;upsname&gt; &lt;varname&gt;</code><a class="pilcrow" href="#section-4.2.7.3-2">¶</a></p>
<p id="section-4.2.7.3-3">Response:<a class="pilcrow" href="#section-4.2.7.3-3">¶</a></p>
<div id="section-4.2.7.3-4">
<pre class="lang-shell sourcecode">BEGIN LIST ENUM &lt;upsname&gt; &lt;varname&gt;
ENUM &lt;upsname&gt; &lt;varname&gt; "&lt;value&gt;"
...
END LIST ENUM &lt;upsname&gt; &lt;varname&gt;
</pre><a class="pilcrow" href="#section-4.2.7.3-4">¶</a>
</div>
<p id="section-4.2.7.3-5"><code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the UPS variable,
and <code>&lt;value&gt;</code> is one of the possible values of that UPS
variable.  Note that, in current practice, the output is an unordered
list.  Also note that the quotation marks are part of
the response.<a class="pilcrow" href="#section-4.2.7.3-5">¶</a></p>
<p id="section-4.2.7.3-6">For example: command <code>LIST ENUM su700 input.transfer.low</code>
and response<a class="pilcrow" href="#section-4.2.7.3-6">¶</a></p>
<div id="section-4.2.7.3-7">
<pre class="lang-shell sourcecode">BEGIN LIST ENUM su700 input.transfer.low
ENUM su700 input.transfer.low "103"
ENUM su700 input.transfer.low "100"
...
END LIST ENUM su700 input.transfer.low
</pre><a class="pilcrow" href="#section-4.2.7.3-7">¶</a>
</div>
</section>
</div>
<div id="range">
<section id="section-4.2.7.4">
            <h5 id="name-list-range">
<a class="section-number selfRef" href="#section-4.2.7.4">4.2.7.4. </a><a class="section-name selfRef" href="#name-list-range"><code>LIST RANGE</code></a>
            </h5>
<p id="section-4.2.7.4-1">The command calls for the Attachment Daemon to report the interval in which
valid values of UPS variable lie.<a class="pilcrow" href="#section-4.2.7.4-1">¶</a></p>
<p id="section-4.2.7.4-2">Command: <code>LIST RANGE &lt;upsname&gt; &lt;varname&gt;</code><a class="pilcrow" href="#section-4.2.7.4-2">¶</a></p>
<p id="section-4.2.7.4-3">Response:<a class="pilcrow" href="#section-4.2.7.4-3">¶</a></p>
<div id="section-4.2.7.4-4">
<pre class="lang-shell sourcecode">BEGIN LIST RANGE &lt;upsname&gt; &lt;varname&gt;
RANGE &lt;upsname&gt; &lt;varname&gt; "&lt;min&gt;" "&lt;max&gt;"
...
END LIST RANGE &lt;upsname&gt; &lt;varname&gt;
</pre><a class="pilcrow" href="#section-4.2.7.4-4">¶</a>
</div>
<p id="section-4.2.7.4-5"><code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the UPS variable, and
{<code>&lt;min&gt;</code>,<code>&lt;max&gt;</code>} is the interval of valid
values of that UPS variable.  Note that the quotation
marks are part of the response.<a class="pilcrow" href="#section-4.2.7.4-5">¶</a></p>
<p id="section-4.2.7.4-6">For example: command <code>LIST RANGE su700
input.transfer.low</code> and response<a class="pilcrow" href="#section-4.2.7.4-6">¶</a></p>
<div id="section-4.2.7.4-7">
<pre class="lang-shell sourcecode">BEGIN LIST RANGE su700 input.transfer.low
RANGE su700 input.transfer.low "90" "105"
END LIST RANGE su700 input.transfer.low
</pre><a class="pilcrow" href="#section-4.2.7.4-7">¶</a>
</div>
</section>
</div>
<div id="listrw">
<section id="section-4.2.7.5">
            <h5 id="name-list-rw">
<a class="section-number selfRef" href="#section-4.2.7.5">4.2.7.5. </a><a class="section-name selfRef" href="#name-list-rw"><code>LIST RW</code></a>
            </h5>
<p id="section-4.2.7.5-1">The command calls for the Attachment Daemon to report a list of the UPS
variables associated with a given UPS that may be read and written by
the Management Daemon.  These variables are the abstracted view of the UPS
hardware capabilities.  An economical UPS may support few variables,
but a professional model should support at least the variables that
are needed for an automatic shutdown and restart;
see <a class="xref" href="#shutdownstory">Appendix B</a>.  Also,
see <a class="xref" href="#MinSup">Section 8.2</a> for details of the recommended
minimum support of variables.  A full list of variables is available
in <span><a class="xref" href="#gitvars">source code file docs/nut-names.txt</a> [<a class="xref" href="#gitvars">gitvars</a>]</span>,
which serves as the Recording Document.<a class="pilcrow" href="#section-4.2.7.5-1">¶</a></p>
<p id="section-4.2.7.5-2">Command: <code>LIST RW &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.7.5-2">¶</a></p>
<p id="section-4.2.7.5-3">Response:<a class="pilcrow" href="#section-4.2.7.5-3">¶</a></p>
<div id="section-4.2.7.5-4">
<pre class="lang-shell sourcecode">BEGIN LIST RW &lt;upsname&gt;
RW &lt;upsname&gt; &lt;varname&gt; "&lt;value&gt;"
...
END LIST RW &lt;upsname&gt;
</pre><a class="pilcrow" href="#section-4.2.7.5-4">¶</a>
</div>
<p id="section-4.2.7.5-5"><code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the UPS variable, and
<code>&lt;value&gt;</code> is the value of that UPS variable.  Note that
the quotation marks are part of the response.<a class="pilcrow" href="#section-4.2.7.5-5">¶</a></p>
<p id="section-4.2.7.5-6">For example: command <code>LIST RW su700</code> and response<a class="pilcrow" href="#section-4.2.7.5-6">¶</a></p>
<div id="section-4.2.7.5-7">
<pre class="lang-shell sourcecode">BEGIN LIST RW su700
RW su700 output.voltage.nominal "115"
RW su700 ups.delay.shutdown "020"
...
END LIST RW su700
</pre><a class="pilcrow" href="#section-4.2.7.5-7">¶</a>
</div>
</section>
</div>
<div id="ups">
<section id="section-4.2.7.6">
            <h5 id="name-list-ups">
<a class="section-number selfRef" href="#section-4.2.7.6">4.2.7.6. </a><a class="section-name selfRef" href="#name-list-ups"><code>LIST UPS</code></a>
            </h5>
<p id="section-4.2.7.6-1">The command calls for the Attachment Daemon to report a list of the UPS units
to which it is attached.<a class="pilcrow" href="#section-4.2.7.6-1">¶</a></p>
<p id="section-4.2.7.6-2">Command: <code>LIST UPS</code><a class="pilcrow" href="#section-4.2.7.6-2">¶</a></p>
<p id="section-4.2.7.6-3">Response:<a class="pilcrow" href="#section-4.2.7.6-3">¶</a></p>
<div id="section-4.2.7.6-4">
<pre class="lang-shell sourcecode">BEGIN LIST UPS
UPS &lt;upsname&gt; "&lt;description&gt;"
...
END LIST UPS
</pre><a class="pilcrow" href="#section-4.2.7.6-4">¶</a>
</div>
<p id="section-4.2.7.6-5"><code>&lt;upsname&gt;</code> is the name of a UPS, and
<code>&lt;description&gt;</code> is the description maintained by the
Attachment Daemon, if available. It is set to "Unavailable" otherwise.  Note that
the quotation marks are part of the response.<a class="pilcrow" href="#section-4.2.7.6-5">¶</a></p>
<p id="section-4.2.7.6-6">This command can also be used to determine what values of
<code>&lt;upsname&gt;</code> are valid before calling other functions on
the server. This is also a good way to handle situations where a
single Attachment Daemon supports multiple UPSs.  It is also useful for clients
that perform a UPS discovery process.<a class="pilcrow" href="#section-4.2.7.6-6">¶</a></p>
<p id="section-4.2.7.6-7">For example: response<a class="pilcrow" href="#section-4.2.7.6-7">¶</a></p>
<div id="section-4.2.7.6-8">
<pre class="lang-shell sourcecode">BEGIN LIST UPS
UPS su700 "Development box"
END LIST UPS
</pre><a class="pilcrow" href="#section-4.2.7.6-8">¶</a>
</div>
</section>
</div>
<div id="listvar">
<section id="section-4.2.7.7">
            <h5 id="name-list-var">
<a class="section-number selfRef" href="#section-4.2.7.7">4.2.7.7. </a><a class="section-name selfRef" href="#name-list-var"><code>LIST VAR</code></a>
            </h5>
<p id="section-4.2.7.7-1">The command calls for the Attachment Daemon to report a list of all the UPS
variables that it maintains for a given UPS and the values of those
UPS variables.<a class="pilcrow" href="#section-4.2.7.7-1">¶</a></p>
<p id="section-4.2.7.7-2">Command: <code>LIST VAR &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.7.7-2">¶</a></p>
<p id="section-4.2.7.7-3">Response:<a class="pilcrow" href="#section-4.2.7.7-3">¶</a></p>
<div id="section-4.2.7.7-4">
<pre class="lang-shell sourcecode">BEGIN LIST VAR &lt;upsname&gt;
VAR &lt;upsname&gt; &lt;varname&gt; "&lt;value&gt;"
...
END LIST VAR &lt;upsname&gt;
</pre><a class="pilcrow" href="#section-4.2.7.7-4">¶</a>
</div>
<p id="section-4.2.7.7-5"><code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the UPS variable, and
<code>&lt;value&gt;</code> is the value of that variable.  Note that
the quotation marks are part of the response.<a class="pilcrow" href="#section-4.2.7.7-5">¶</a></p>
<p id="section-4.2.7.7-6">The response to this command lists the UPS variables available for
this UPS and their current values.<a class="pilcrow" href="#section-4.2.7.7-6">¶</a></p>
<p id="section-4.2.7.7-7">For example: command <code>LIST VAR su700</code> and response<a class="pilcrow" href="#section-4.2.7.7-7">¶</a></p>
<div id="section-4.2.7.7-8">
<pre class="lang-shell sourcecode">BEGIN LIST VAR su700
VAR su700 ups.mfr "Example Mfg"
VAR su700 ups.mfr.date "10/17/96"
...
END LIST VAR su700
</pre><a class="pilcrow" href="#section-4.2.7.7-8">¶</a>
</div>
<p id="section-4.2.7.7-9">See
<a class="xref" href="#MinSup">Section 8.2</a> for details of the recommended minimum
support of variables.  A full list of variables is available
in <span><a class="xref" href="#gitvars">source code file docs/nut-names.txt</a> [<a class="xref" href="#gitvars">gitvars</a>]</span>,
which serves as the Recording Document.<a class="pilcrow" href="#section-4.2.7.7-9">¶</a></p>
</section>
</div>
</section>
</div>
<div id="password">
<section id="section-4.2.8">
          <h4 id="name-password">
<a class="section-number selfRef" href="#section-4.2.8">4.2.8. </a><a class="section-name selfRef" href="#name-password"><code>PASSWORD</code></a>
          </h4>
<p id="section-4.2.8-1">This command is a companion to <code>USERNAME</code> and is used by a
Management Daemon to specify the password required to enter a session with the
Attachment Daemon; see <a class="xref" href="#sess">Section 2.9</a>.<a class="pilcrow" href="#section-4.2.8-1">¶</a></p>
<p id="section-4.2.8-2">Command: <code>PASSWORD &lt;password&gt;</code><a class="pilcrow" href="#section-4.2.8-2">¶</a></p>
<p id="section-4.2.8-3">If the command succeeds, the response is <code>OK</code>; otherwise, see
the error responses in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.8-3">¶</a></p>
<p id="section-4.2.8-4">For examples of the use of commands <code>USERNAME</code>
and <code>PASSWORD</code> by administrative users,
see <a class="xref" href="#adsecclient">Appendix E.2</a>.<a class="pilcrow" href="#section-4.2.8-4">¶</a></p>
<p id="section-4.2.8-5">ABNF: See variable <code>session-password</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.8-5">¶</a></p>
</section>
</div>
<div id="primary">
<section id="section-4.2.9">
          <h4 id="name-primary-2">
<a class="section-number selfRef" href="#section-4.2.9">4.2.9. </a><a class="section-name selfRef" href="#name-primary-2"><code>PRIMARY</code></a>
          </h4>
<p id="section-4.2.9-1">In current practice, the Attachment Daemon records in local
file <code>upsd.users</code> that an administrative user is a Primary.
See <a class="xref" href="#adminuser">Appendix E.1</a> for an example.  When a Management Daemon
starts up and opens a session with the Attachment Daemon, it lays claim to being a
Primary by sending command <code>PRIMARY</code> to the Attachment Daemon, thus
claiming that it has the required authority to perform critical
actions, such as setting status symbol <code>FSD</code>.<a class="pilcrow" href="#section-4.2.9-1">¶</a></p>
<p id="section-4.2.9-2">Command: <code>PRIMARY &lt;upsname&gt;</code><a class="pilcrow" href="#section-4.2.9-2">¶</a></p>
<p id="section-4.2.9-3"><code>&lt;upsname&gt;</code> is the name of the UPS.<a class="pilcrow" href="#section-4.2.9-3">¶</a></p>
<p id="section-4.2.9-4">If the Attachment Daemon has the authority, the response is <code>OK</code>;
otherwise, see the error
responses in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.9-4">¶</a></p>
<aside id="section-4.2.9-5">
            <p id="section-4.2.9-5.1">Note: Historically, this command was known as <code>MASTER</code>.<a class="pilcrow" href="#section-4.2.9-5.1">¶</a></p>
</aside>
</section>
</div>
<div id="protver">
<section id="section-4.2.10">
          <h4 id="name-protver">
<a class="section-number selfRef" href="#section-4.2.10">4.2.10. </a><a class="section-name selfRef" href="#name-protver"><code>PROTVER</code></a>
          </h4>
<p id="section-4.2.10-1">Return the version of the command/response protocol
used by the Attachment Daemon.  This command is intended for human, as well as
program, use.<a class="pilcrow" href="#section-4.2.10-1">¶</a></p>
<p id="section-4.2.10-2">Command: <code>PROTVER</code><a class="pilcrow" href="#section-4.2.10-2">¶</a></p>
<p id="section-4.2.10-3">For example: the following command line sequence in the Attachment Daemon<a class="pilcrow" href="#section-4.2.10-3">¶</a></p>
<div id="section-4.2.10-4">
<pre class="lang-shell sourcecode">netcat localhost 3493
PROTVER
1.3
</pre><a class="pilcrow" href="#section-4.2.10-4">¶</a>
</div>
<p id="section-4.2.10-5">Notes:<a class="pilcrow" href="#section-4.2.10-5">¶</a></p>
<ol class="compact type-1" id="section-4.2.10-6" start="1" type="1">
<li id="section-4.2.10-6.1">There are no quotation marks in the response.<a class="pilcrow" href="#section-4.2.10-6.1">¶</a>
</li>
            <li id="section-4.2.10-6.2">The version of the protocol returned by <code>PROTVER</code> is
different than the implementation version of the Attachment Daemon returned
by <code>VER</code>.<a class="pilcrow" href="#section-4.2.10-6.2">¶</a>
</li>
            <li id="section-4.2.10-6.3">To ease migration, NUT version 2.8.0 also supports the
equivalent <code>NETVER</code> command used in previous
releases. See <a class="xref" href="#Version.2.7.4">Section 8.2.4</a>.<a class="pilcrow" href="#section-4.2.10-6.3">¶</a>
</li>
          </ol>
<p id="section-4.2.10-7">ABNF: See variable <code>protver</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.10-7">¶</a></p>
</section>
</div>
<div id="set">
<section id="section-4.2.11">
          <h4 id="name-set">
<a class="section-number selfRef" href="#section-4.2.11">4.2.11. </a><a class="section-name selfRef" href="#name-set"><code>SET</code></a>
          </h4>
<p id="section-4.2.11-1">The command calls for the Attachment Daemon to set a UPS variable to a given
value.  Whether this has an effect on the UPS hardware is specific to
the Driver and the UPS model.  Some variables are read-only due to the
design of the UPS or its Driver.<a class="pilcrow" href="#section-4.2.11-1">¶</a></p>
<p id="section-4.2.11-2">Command: <code>SET VAR &lt;upsname&gt; &lt;varname&gt;
"&lt;value&gt;"</code><a class="pilcrow" href="#section-4.2.11-2">¶</a></p>
<p id="section-4.2.11-3"><code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the UPS variable, and
<code>&lt;value&gt;</code> is the value to be assigned to that variable.
Note that the quotation marks are part of the command.<a class="pilcrow" href="#section-4.2.11-3">¶</a></p>
<p id="section-4.2.11-4">If the command succeeds, the response is <code>OK</code>; otherwise, see
the error responses in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.11-4">¶</a></p>
<p id="section-4.2.11-5">For example: command <code>SET VAR su700 ups.id "My UPS"</code> and
response <code>OK</code><a class="pilcrow" href="#section-4.2.11-5">¶</a></p>
<p id="section-4.2.11-6">ABNF: See the variable <code>set</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.11-6">¶</a></p>
</section>
</div>
<div id="starttls">
<section id="section-4.2.12">
          <h4 id="name-starttls">
<a class="section-number selfRef" href="#section-4.2.12">4.2.12. </a><a class="section-name selfRef" href="#name-starttls"><code>STARTTLS</code></a>
          </h4>
<p id="section-4.2.12-1">The client tells the Attachment Daemon to switch to communication encrypted by
TLS <span>[<a class="xref" href="#RFC8446">RFC8446</a>]</span>.  When the
client receives <code>OK</code>, it also switches to TLS encryption.<a class="pilcrow" href="#section-4.2.12-1">¶</a></p>
<p id="section-4.2.12-2">Command: <code>STARTTLS</code><a class="pilcrow" href="#section-4.2.12-2">¶</a></p>
<p id="section-4.2.12-3">If the command succeeds, the response is <code>OK STARTTLS</code>;
otherwise, see the error responses
in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.12-3">¶</a></p>
<p id="section-4.2.12-4">If the client does not send command STARTTLS to the Attachment Daemon,
communication continues unencrypted; however, an Attachment Daemon <span class="bcp14">MAY</span> refuse
unencrypted communication.<a class="pilcrow" href="#section-4.2.12-4">¶</a></p>
<p id="section-4.2.12-5">NUT 2.8.0 supports the encryption of communications between the
Attachment Daemon and the Management Daemon using TLS
1.3 <span>[<a class="xref" href="#RFC8446">RFC8446</a>]</span> with X.509 v3 certificates, as
defined by <span>[<a class="xref" href="#RFC5280">RFC5280</a>]</span> and updates.
See <a class="xref" href="#AppendixEavesdropping">Appendix D</a> for details of the
encryption of communications in previous release 2.7.4.<a class="pilcrow" href="#section-4.2.12-5">¶</a></p>
<p id="section-4.2.12-6">ABNF: See variable <code>starttls</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.12-6">¶</a></p>
<div id="selfsigned">
<section id="section-4.2.12.1">
            <h5 id="name-key-infrastructure-and-self">
<a class="section-number selfRef" href="#section-4.2.12.1">4.2.12.1. </a><a class="section-name selfRef" href="#name-key-infrastructure-and-self">Key Infrastructure and Self-Signed Certificates</a>
            </h5>
<p id="section-4.2.12.1-1"><em>The very restricted nature of UPS management makes it of
interest to consider self-signed certificates.</em><a class="pilcrow" href="#section-4.2.12.1-1">¶</a></p>
<p id="section-4.2.12.1-2">In the World Wide Web, there are millions of servers and hundreds
of millions of potential clients for each one.  The servers do not
know who their clients will be, so they entrust the management of a
Public Key Infrastructure (PKI) to Certificate Authorities that they
trust. The encryption of communications
between the client and server requires that the browsers carry a list of
Certificate Authorities that the clients have to trust.  <em>This is
a many-to-many relationship.</em><a class="pilcrow" href="#section-4.2.12.1-2">¶</a></p>
<p id="section-4.2.12.1-3">The management of UPS units is not a many-to-many relationship; it
is frequently one to one.  In the closely restrained world of UPS
management, there are a very limited number of clients for each
server, rarely more than three, and unlike the World Wide Web, the
server administrators know exactly who they are.  These clients visit
very few servers, typically one only.  This situation is totally
different from the World Wide Web.  The use of external Certificate
Authorities is a potential security weakness that must be accepted for
the World Wide Web but which can be avoided for UPS management by
either generating the private and public keys locally or, for larger
organizations, using a PKI.<a class="pilcrow" href="#section-4.2.12.1-3">¶</a></p>
<p id="section-4.2.12.1-4">The security policies for UPS management may be subordinate to an
organization's own internal IT security plans and procedures, possibly
based on <span>[<a class="xref" href="#RFC7030">RFC7030</a>]</span>
and <span>[<a class="xref" href="#RFC8894">RFC8894</a>]</span>, but in simple cases, it is possible
to obtain better security using self-signed certificates.<a class="pilcrow" href="#section-4.2.12.1-4">¶</a></p>
</section>
</div>
</section>
</div>
<div id="username">
<section id="section-4.2.13">
          <h4 id="name-username">
<a class="section-number selfRef" href="#section-4.2.13">4.2.13. </a><a class="section-name selfRef" href="#name-username"><code>USERNAME</code></a>
          </h4>
<p id="section-4.2.13-1">The Attachment Daemon limits access to clients whose credentials match those in
the file <code>upsd.users</code>.  There is no anonymous access.  A Management Daemon
program or script uses command <code>USERNAME</code> and its companion
command <code>PASSWORD</code> to open a session with the Attachment Daemon for an
administrative user. Note that this command is for program or script
use and is not the familiar login command typed on a command line to
gain access to a shell.<a class="pilcrow" href="#section-4.2.13-1">¶</a></p>
<p id="section-4.2.13-2">Command: <code>USERNAME &lt;username&gt;</code><a class="pilcrow" href="#section-4.2.13-2">¶</a></p>
<p id="section-4.2.13-3">If the command succeeds, the response is <code>OK</code>; otherwise, see
the error responses in <a class="xref" href="#errorresponses">Section 4.3.2</a>.<a class="pilcrow" href="#section-4.2.13-3">¶</a></p>
<p id="section-4.2.13-4">For examples of the use of commands <code>USERNAME</code> and
<code>PASSWORD</code> by administrative users,
see <a class="xref" href="#adsecclient">Appendix E.2</a>.<a class="pilcrow" href="#section-4.2.13-4">¶</a></p>
<p id="section-4.2.13-5">ABNF: See variable <code>session-username</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.13-5">¶</a></p>
</section>
</div>
<div id="ver">
<section id="section-4.2.14">
          <h4 id="name-ver">
<a class="section-number selfRef" href="#section-4.2.14">4.2.14. </a><a class="section-name selfRef" href="#name-ver"><code>VER</code></a>
          </h4>
<p id="section-4.2.14-1">Return the implementation version of the Attachment Daemon.  This command is
intended for human, as well as program, use.<a class="pilcrow" href="#section-4.2.14-1">¶</a></p>
<p id="section-4.2.14-2">Command: <code>VER</code><a class="pilcrow" href="#section-4.2.14-2">¶</a></p>
<p id="section-4.2.14-3">For example: the following command line sequence<a class="pilcrow" href="#section-4.2.14-3">¶</a></p>
<div id="section-4.2.14-4">
<pre class="lang-shell sourcecode">netcat localhost 3493
VER
Network UPS Tools upsd 2.8.0 - http://www.networkupstools.org/
</pre><a class="pilcrow" href="#section-4.2.14-4">¶</a>
</div>
<p id="section-4.2.14-5">Notes:<a class="pilcrow" href="#section-4.2.14-5">¶</a></p>
<ol class="compact type-1" id="section-4.2.14-6" start="1" type="1">
<li id="section-4.2.14-6.1">There are no quotation marks in the response.<a class="pilcrow" href="#section-4.2.14-6.1">¶</a>
</li>
            <li id="section-4.2.14-6.2">The implementation version of the Attachment Daemon returned by VER is
different than the protocol version returned by <code>PROTVER</code>.<a class="pilcrow" href="#section-4.2.14-6.2">¶</a>
</li>
          </ol>
<p id="section-4.2.14-7">ABNF: See variable <code>ver</code> in <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.2.14-7">¶</a></p>
</section>
</div>
</section>
</div>
<div id="responses">
<section id="section-4.3">
        <h3 id="name-summary-of-responses">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-summary-of-responses">Summary of Responses</a>
        </h3>
<div id="success">
<section id="section-4.3.1">
          <h4 id="name-response-when-command-succe">
<a class="section-number selfRef" href="#section-4.3.1">4.3.1. </a><a class="section-name selfRef" href="#name-response-when-command-succe">Response When Command Succeeds</a>
          </h4>
<p id="section-4.3.1-1">If the command succeeds, the response has the following
command-dependent form:<a class="pilcrow" href="#section-4.3.1-1">¶</a></p>
<span id="name-response-if-command-succeed"></span><table class="center" id="table-2">
            <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-response-if-command-succeed">Response If Command Succeeds</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" colspan="1" rowspan="1">Command</th>
                <th class="text-left" colspan="1" rowspan="1">Response</th>
                <th class="text-left" colspan="1" rowspan="1">Reference</th>
                <th class="text-left" colspan="1" rowspan="1">Note</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>ATTACH</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#attach">Section 4.2.1</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">Was LOGIN  </td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>DETACH</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK Goodbye</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#detach">Section 4.2.2</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">Was LOGOUT         </td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>FSD</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK FSD-SET</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#FSD">Section 4.2.3</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>GET</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">Subcommand specific</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#get">Section 4.2.4</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>HELP</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">List of commands</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#help">Section 4.2.5</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>INSTCMD</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#instcmd">Section 4.2.6</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>LIST</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">Subcommand specific</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#list">Section 4.2.7</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>PASSWORD</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#password">Section 4.2.8</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>PRIMARY</code> </td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#primary">Section 4.2.9</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>PROTVER</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">Protocol version</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#protver">Section 4.2.10</a>
</td>
                <td class="text-left" colspan="1" rowspan="1">Was NETVER</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>SET</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#set">Section 4.2.11</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>STARTTLS</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK STARTTLS</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#starttls">Section 4.2.12</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>USERNAME</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>OK</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#username">Section 4.2.13</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>VER</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">Program version</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <a class="xref" href="#ver">Section 4.2.14</a>
</td>
                <td class="text-left" colspan="1" rowspan="1"></td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="errorresponses">
<section id="section-4.3.2">
          <h4 id="name-error-responses">
<a class="section-number selfRef" href="#section-4.3.2">4.3.2. </a><a class="section-name selfRef" href="#name-error-responses">Error Responses</a>
          </h4>
<p id="section-4.3.2-1">Error responses have the following format:<a class="pilcrow" href="#section-4.3.2-1">¶</a></p>
<div id="section-4.3.2-2">
<pre class="lang-shell sourcecode">ERR &lt;error-name&gt; [&lt;extra&gt;]
</pre><a class="pilcrow" href="#section-4.3.2-2">¶</a>
</div>
<p id="section-4.3.2-3"><code>&lt;error-name&gt;</code> is a single word token taken from
the 27 characters A-Z and hyphen
(-). Implementations <span class="bcp14">MAY</span>, if needed, add an additional,
optional <code>&lt;extra&gt;</code>.  Current practice does not make use
of this possibility.<a class="pilcrow" href="#section-4.3.2-3">¶</a></p>
<p id="section-4.3.2-4">The <code>&lt;error-name&gt;</code> may have one of the following
values:<a class="pilcrow" href="#section-4.3.2-4">¶</a></p>
<span id="name-error-responses-2"></span><div id="errors">
<table class="center" id="table-3">
            <caption>
<a class="selfRef" href="#table-3">Table 3</a>:
<a class="selfRef" href="#name-error-responses-2">Error Responses</a>
            </caption>
<thead>
              <tr>
                <th class="text-center" colspan="1" rowspan="1">    The Error Name Token    
               <br/><code>&lt;error-name&gt;</code>
</th>
                <th class="text-center" colspan="1" rowspan="1">Meaning</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>ACCESS-DENIED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The client's host and/or
authentication details supplied by <code>USERNAME</code>
and <code>PASSWORD</code> are not sufficient to execute the requested
command.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>ALREADY-ATTACHED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <p id="section-4.3.2-5.2.2.2.1">The client has already sent a
successful <code>ATTACH</code> command for a given UPS and can't do it again.<a class="pilcrow" href="#section-4.3.2-5.2.2.2.1">¶</a></p>
</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>ALREADY-SET-PASSWORD</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The client has already
supplied a <code>PASSWORD</code> and is attempting to repeat the command
in the same session.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>ALREADY-SET-USERNAME</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The client has already
supplied a <code>USERNAME</code> and is attempting to repeat the command
within the same session.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>CMD-NOT-SUPPORTED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The specified UPS doesn't
support the Instant Command.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>DATA-STALE</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <p id="section-4.3.2-5.2.6.2.1">The Attachment Daemon is connected to the
Driver for the UPS, but that Driver isn't providing regular updates
or has specifically marked the data as stale.  Current practice is for
the Attachment Daemon to refuse to provide the Management Daemon with variables on stale units
to avoid false readings.<a class="pilcrow" href="#section-4.3.2-5.2.6.2.1">¶</a></p>
<p id="section-4.3.2-5.2.6.2.2">This generally means that the Driver is running, but it has lost
communication with the hardware. Check the physical connection to the
equipment.<a class="pilcrow" href="#section-4.3.2-5.2.6.2.2">¶</a></p>
</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>DRIVER-NOT-CONNECTED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The Attachment Daemon can't perform the
requested command, since the Driver for that UPS is not
connected. This usually means that the Driver is not running or, if it
is, is misconfigured.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>FEATURE-NOT-CONFIGURED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">This instance of the Attachment Daemon
hasn't been configured properly to allow the requested feature to
operate. In current practice, this error response is possible only for
command <code>STARTTLS</code>.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>FEATURE-NOT-SUPPORTED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">This instance of Attachment Daemon does
not support the requested feature.  In current practice, this error
response is possible only for command <code>STARTTLS</code>.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>INSTCMD-FAILED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The Attachment Daemon failed to deliver the
Instant Command request to the Driver. No further information is
available to the client. This typically indicates a dead or broken
Driver.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>INVALID-ARGUMENT</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The client sent an argument to a
command that is not recognized or is otherwise not valid in this
context. This is typically caused by sending a valid command, such as
<code>GET</code>, with a subcommand that is not valid.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>INVALID-PASSWORD</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The client sent a nonvalid
<code>PASSWORD</code>.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>INVALID-USERNAME</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The client sent a nonvalid
<code>USERNAME</code>.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>INVALID-VALUE</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The value specified in the request
is not valid. This usually applies to a <code>SET</code> of
an <code>ENUM</code> type that is using a value not in the list of
allowed values.  See <a class="xref" href="#enum">Section 4.2.7.3</a>.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>PASSWORD-<span class="bcp14">REQUIRED</span></code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The command requires
a <code>PASSWORD</code> for authentication, but the client hasn't provided
one.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>READONLY</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The requested variable in a <code>SET</code>
command is not writable.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>SET-FAILED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The Attachment Daemon failed to deliver
the <code>SET</code> request to the Driver. This is similar
to <code>INSTCMD-FAILED</code>.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>TLS-ALREADY-ENABLED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <p id="section-4.3.2-5.2.18.2.1">TLS mode is already enabled
on this connection, so the Attachment Daemon can't start it again.<a class="pilcrow" href="#section-4.3.2-5.2.18.2.1">¶</a></p>
<p id="section-4.3.2-5.2.18.2.2">Note: Historically, this message was <code>ALREADY-SSL-MODE.</code><a class="pilcrow" href="#section-4.3.2-5.2.18.2.2">¶</a></p>
</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>TLS-NOT-ENABLED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">
                  <p id="section-4.3.2-5.2.19.2.1">TLS mode is required but has
not yet been enabled on this connection, so the Attachment Daemon can't send
commands.<a class="pilcrow" href="#section-4.3.2-5.2.19.2.1">¶</a></p>
<p id="section-4.3.2-5.2.19.2.2">Note: This message is experimental and not in current common
use.<a class="pilcrow" href="#section-4.3.2-5.2.19.2.2">¶</a></p>
</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>TOO-LONG</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The requested value in a <code>SET</code>
command is too long.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>UNKNOWN-COMMAND</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The Attachment Daemon doesn't recognize the
command.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>UNKNOWN-UPS</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The UPS specified in the request is
not known to the Attachment Daemon. This usually means that it didn't match
anything in the Attachment Daemon configuration.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>USERNAME-<span class="bcp14">REQUIRED</span></code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The command requires
a <code>USERNAME</code> for authentication, but the client hasn't provided
one.</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">
                  <code>VAR-NOT-SUPPORTED</code>
</td>
                <td class="text-left" colspan="1" rowspan="1">The specified UPS doesn't
support the UPS variable in the command.</td>
              </tr>
            </tbody>
          </table>
</div>
<aside id="section-4.3.2-6">
            <p id="section-4.3.2-6.1">Note: Historically, this error response was <code>ALREADY-LOGGED-IN</code>.<a class="pilcrow" href="#section-4.3.2-6.1">¶</a></p>
</aside>
</section>
</div>
</section>
</div>
<div id="ABNF">
<section id="section-4.4">
        <h3 id="name-an-abnf-of-the-commands">
<a class="section-number selfRef" href="#section-4.4">4.4. </a><a class="section-name selfRef" href="#name-an-abnf-of-the-commands">An ABNF of the Commands</a>
        </h3>
<p id="section-4.4-1">This section repeats the syntax of <a class="xref" href="#commands">Section 4.2</a>
but in Augmented Backus-Naur Form (ABNF).  It does not define any
additional features.  For further details of each command and the
response, see <a class="xref" href="#commands">Section 4.2</a>.<a class="pilcrow" href="#section-4.4-1">¶</a></p>
<p id="section-4.4-2">The commands may be presented in ABNF
<span>[<a class="xref" href="#RFC5234">RFC5234</a>]</span> <span>[<a class="xref" href="#RFC7405">RFC7405</a>]</span> and
represented using US-ASCII <span>[<a class="xref" href="#RFC0020">RFC0020</a>]</span>.<a class="pilcrow" href="#section-4.4-2">¶</a></p>
<p id="section-4.4-3">Current practice tolerates mixed-case command names, but it is
<span class="bcp14">RECOMMENDED</span> to use uppercase only for commands.
See <a class="xref" href="#fig.ABNF">Figure 5</a>.<a class="pilcrow" href="#section-4.4-3">¶</a></p>
<span id="name-abnf-for-the-commands"></span><div id="fig.ABNF">
<figure id="figure-5">
          <div id="section-4.4-4.1">
<pre class="breakable lang-abnf sourcecode">;-------------------------------------------------------------------
; This grammar is case sensitive. Terminal keywords SHOULD be
; written in uppercase, as shown.
; The following basic rules written with uppercase names are
; taken from RFC 5234, Appendix B.1.
   SP = 1*%x20                  ; At least one SPACE
   LF = %x0A                    ; Linefeed
   DIGIT = %x30-39              ; Digit 0 through 9
   ALPHA =  %x41-5A / %x61-7A   ; A-Z / a-z
   DQUOTE = %x22                ; Double quote "
   VCHAR = %x21-7E              ; Visible (printing) characters
; Additional basic rules needed by this grammar
   LC = %x61-7A                 ; Letter a through z
   DOT = 1%x2E                  ; Exactly one .
   COLON = 1%x3A                ; Exactly one :
   AT = 1%x40                   ; Exactly one @
   SEP = 1"-" / 1"_" / 1"."     ; A single - or _ or .
   JOIN = COLON / AT            ; A single : or @
; Frequently used in this grammar
   cmdname = 1*LC *62(DOT 1*LC) ; E.g., load.off.delay
   upschar = DIGIT / ALPHA / SEP
   ups = 1*ALPHA *62upschar     ; E.g., Example-Mfg-999
   group = ups                  ; E.g., HB  (Not in common use)
   hostname = ups               ; E.g., example.com
   port = 1*5DIGIT              ; E.g., 3493
   upsname = [group COLON] ups [AT hostname [COLON port]]
                                ; Fully Qualified UPS name
                                ; E.g.,
                                ; HB:heartbeat1@example.com:3493
   username = ups               ; E.g., Power-Dept.6
   varname = 1*LC *62( DOT 1*(DIGIT / LC) )
                                ; E.g., outlet.1.status
;-------------------------------------------------------------------
   commandLine = command LF     ; LF is a single %x0A
   command = attach / detach / fsd / get / help / instcmd /
             list / password / primary / protver / set /
             starttls / username / ver
;
   attach  = "ATTACH" SP upsname
;
   detach = "DETACH"
;
   fsd = "FSD" SP upsname
;
   get = "GET" SP getsubcommnd
   getsubcommand = getcmddesc / getdesc / getnumattach /
                   gettype / getupsdesc / getvar
;
   getcmddesc =   "CMDDESC" SP upsname SP cmdname
   getdesc =      "DESC" SP upsname SP varname
   getnumattach = "NUMATTACH" SP upsname
   gettype =      "TYPE" SP upsname SP varname
   getupsdesc =   "UPSDESC" SP upsname
   getvar =       "VAR" SP upsname SP varname
;
   help = "HELP"
;
   instcmd = "INSTCMD" SP upsname SP cmdname
;
   list = "LIST" listsubcommand
   listsubcommand = listclient / listcmd / listenum / listrange /
                    listrw / listups / listvar
;
   listclient = "CLIENT" SP upsname
   listcmd =    "CMD" SP upsname
   listenum =   "ENUM" SP upsname SP varname
   listrange =  "RANGE" SP upsname SP varname
   listrw =     "RW" SP upsname
   listups =    "UPS"
   listvar =    "VAR" SP upsname
;
   session-password = "PASSWORD" SP *63VCHAR
                         ; A sequence of printable characters defined
                         ; in a server configuration file.  Local
                         ; security practices may mandate a minimum
                         ; and maximum number of characters.
;
   primary = "PRIMARY" SP upsname
;
   protver = "PROTVER"
;
   value = *63VCHAR      ; Local practices may limit the choice of
                         ; characters and require non-US-ASCII.
   set = "SET" SP %s"VAR" SP upsname SP varname SP
         DQUOTE value DQUOTE
;
   starttls = "STARTTLS"
;
   session-username = "USERNAME" SP username
;
   ver = "VER"
;-------------------------------------------------------------------
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-5">Figure 5</a>:
<a class="selfRef" href="#name-abnf-for-the-commands">ABNF for the Commands</a>
          </figcaption></figure>
</div>
<p id="section-4.4-5">Notes:<a class="pilcrow" href="#section-4.4-5">¶</a></p>
<ol class="normal type-1" id="section-4.4-6" start="1" type="1">
<li id="section-4.4-6.1">
            <em>Implementation note:</em> The ABNF is written using the
provisions
of <span>[<a class="xref" href="#RFC5234">RFC5234</a>]</span> and <span>[<a class="xref" href="#RFC7405">RFC7405</a>]</span>, which
are <span><a class="xref" href="#RFC0020">US-ASCII based</a> [<a class="xref" href="#RFC0020">RFC0020</a>]</span>.<a class="pilcrow" href="#section-4.4-6.1">¶</a>
</li>
          <li id="section-4.4-6.2">The grammar is case sensitive.  The terminal key words <span class="bcp14">SHOULD</span>
be written in uppercase, as specified.<a class="pilcrow" href="#section-4.4-6.2">¶</a>
</li>
          <li id="section-4.4-6.3">The repetition factor in front of an expression has the form
&lt;min&gt;*&lt;max&gt;, where &lt;min&gt; is the minimum number of
repetitions, and &lt;max&gt; is the maximum number.<a class="pilcrow" href="#section-4.4-6.3">¶</a>
</li>
          <li id="section-4.4-6.4">If &lt;min&gt; is omitted, its value is 0.  If &lt;max&gt; is
omitted, its value is infinity.<a class="pilcrow" href="#section-4.4-6.4">¶</a>
</li>
          <li id="section-4.4-6.5">The notation <code>n*n</code>, meaning "exactly n copies", may be
written as <code>n</code>.<a class="pilcrow" href="#section-4.4-6.5">¶</a>
</li>
          <li id="section-4.4-6.6">Square brackets around an expression mean that the expression is
optional.  This could be written as <code>0*1</code>.<a class="pilcrow" href="#section-4.4-6.6">¶</a>
</li>
        </ol>
<div id="ABNF-resp">
<section id="section-4.4.1">
          <h4 id="name-responses-to-commands">
<a class="section-number selfRef" href="#section-4.4.1">4.4.1. </a><a class="section-name selfRef" href="#name-responses-to-commands">Responses to Commands</a>
          </h4>
<p id="section-4.4.1-1">The responses to the commands are encoded
in <span><a class="xref" href="#RFC0020">US-ASCII</a> [<a class="xref" href="#RFC0020">RFC0020</a>]</span> and fall into two groups:<a class="pilcrow" href="#section-4.4.1-1">¶</a></p>
<ol class="normal type-1" id="section-4.4.1-2" start="1" type="1">
<li id="section-4.4.1-2.1">Short replies to action commands; see <a class="xref" href="#responses">Section 4.3</a>.<a class="pilcrow" href="#section-4.4.1-2.1">¶</a>
</li>
            <li id="section-4.4.1-2.2">Long replies to requests for information.  In this case, the reply
is sent in a sequence of messages. The last message will contain a
line beginning <code>END LIST</code> . For
example, see <a class="xref" href="#client">Section 4.2.7.1</a>.<a class="pilcrow" href="#section-4.4.1-2.2">¶</a>
</li>
          </ol>
</section>
</div>
</section>
</div>
</section>
</div>
<section id="section-5">
      <h2 id="name-statuses-and-events">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-statuses-and-events">Statuses and Events</a>
      </h2>
<div id="symbols">
<section id="section-5.1">
        <h3 id="name-status-symbols">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-status-symbols">Status Symbols</a>
        </h3>
<p id="section-5.1-1">These symbols resume the abstracted view of the UPS hardware
maintained by the Attachment Daemon.  The variable <code>ups.status</code> contains
one or more space-separated status symbols, which together describe the
UPS state at that instant.  In current practice, the Management Daemon will poll
variable <code>ups.status</code> every 5 seconds with a command, such
as <code>GET VAR su700 ups.status</code>, and a response, such as <code>VAR
su700 ups.status "OB LB"</code>, to discover changes in the UPS status.
These changes will indicate UPS events.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<span id="name-ups-status-symbols"></span><table class="center" id="table-4">
          <caption>
<a class="selfRef" href="#table-4">Table 4</a>:
<a class="selfRef" href="#name-ups-status-symbols">UPS Status Symbols</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" colspan="1" rowspan="1">Status Symbol </th>
              <th class="text-center" colspan="1" rowspan="1">Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ALARM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">The UPS reports that it requires intervention.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>BOOST</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">The UPS has determined that the voltage level of the public power supply is
too low and is boosting it to the required level.  The UPS continues
to supply the protected system from the public power supply.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>BYPASS</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">The UPS is feeding current directly from the public power supply to the
protected system.  The backup facilities are disconnected.  This state
allows maintenance personnel to change the batteries without
interrupting the protected system.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>CAL</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">The UPS is calibrating itself, for example, to determine at what
charge the <code>LB</code> status is raised or lowered.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>CHRG</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <p id="section-5.1-2.2.5.2.1">The UPS battery is charging.  This usually implies that the UPS
also has status <code>OL</code> but may not be the case if the UPS also has
status <code>OFF</code>.<a class="pilcrow" href="#section-5.1-2.2.5.2.1">¶</a></p>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>COMM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">The Attachment Daemon has effective contact with the UPS.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>DISCHRG</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <p id="section-5.1-2.2.7.2.1">The UPS battery is discharging.  This usually implies that the UPS
also has status <code>OB</code> but may not be the case if the UPS also has
status <code>OFF</code>.<a class="pilcrow" href="#section-5.1-2.2.7.2.1">¶</a></p>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>FSD</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">This "Forced Shutdown" status signals that the final shutdown
sequence has begun.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>LB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Low Battery. The battery level of the UPS is below a chosen limit.
The UPS may be in status <code>OL</code> or <code>OB</code>.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>NOCOMM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">The Attachment Daemon has no effective contact with the UPS.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">On Battery. The UPS is taking energy from its battery.
The battery is discharging.  A UPS must have status <code>OB</code> or <code>OL</code>;
otherwise, it is deemed dead.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OFF</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">The UPS is in state "Off".  It does not react to failure in the
public power supply.  The exact meaning depends on the model.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OL</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Online. The UPS is online, receiving energy from the public power supply.  The
battery is charging.  A UPS must have status <code>OB</code> or <code>OL</code>; otherwise,
it is deemed dead.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OVER</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Overloaded. The UPS reports that the load on it is beyond its
normal operating maximum.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>RB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Replace battery. The UPS reports that its battery or batteries should
be replaced.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TEST</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Under test. The UPS is currently undergoing a test that may have
been requested manually or internally.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TICK</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Heartbeat. A software UPS in the Attachment Daemon provides a regular signal
monitored by the Management Daemon as a way of verifying effective end-to-end
management. <code>TICK</code> and <code>TOCK</code> are companions; they are considered
experimental.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TOCK</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Heartbeat. See <code>TICK</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TRIM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">The UPS has determined that the voltage level of the public power supply is
too high and is reducing it to the required level.  The UPS continues
to supply the protected system from the public power supply.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="events">
<section id="section-5.2">
        <h3 id="name-events">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-events">Events</a>
        </h3>
<p id="section-5.2-1">A Management Daemon detects the occurrence of a UPS event from a change in the
UPS status received from the Attachment Daemon.  The following table summarizes
the process. A status of "none" means that the status symbol is not
present in the variable <code>ups.status</code>.<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<p id="section-5.2-2">The Management Daemon should retrieve the variable <code>ups.status</code> from the
Attachment Daemon at regular intervals.  If the interval is too short, compute and
network resources will be wasted, but if the interval is too large,
the Management Daemon risks missing short-lived changes in the UPS status.<a class="pilcrow" href="#section-5.2-2">¶</a></p>
<p id="section-5.2-3">A default value of 5 seconds is <span class="bcp14">RECOMMENDED</span>, but an implementation
<span class="bcp14">MAY</span> make this value configurable.  By default, the "old" status is
therefore the previous value retrieved 5 seconds ago.<a class="pilcrow" href="#section-5.2-3">¶</a></p>
<p id="section-5.2-4">Current practice is for the Management Daemon to assign names to certain
events.  These are shown in the table in parentheses.<a class="pilcrow" href="#section-5.2-4">¶</a></p>
<span id="name-event-deduction-from-status"></span><table class="center" id="table-5">
          <caption>
<a class="selfRef" href="#table-5">Table 5</a>:
<a class="selfRef" href="#name-event-deduction-from-status">Event Deduction from Status Changes</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">Old Status</th>
              <th class="text-left" colspan="1" rowspan="1">New Status</th>
              <th class="text-left" colspan="1" rowspan="1">Event</th>
              <th class="text-left" colspan="1" rowspan="1">    </th>
              <th class="text-left" colspan="1" rowspan="1">Old Status</th>
              <th class="text-left" colspan="1" rowspan="1">New Status</th>
              <th class="text-left" colspan="1" rowspan="1">Event</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ALARM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Alarm on</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ALARM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Alarm off</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>BOOST</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Boosting voltage</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>BOOST</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Not boosting</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>BYPASS</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Bypass on</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>BYPASS</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Bypass off</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>CAL</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Calibrating</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>CAL</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Not calibrating</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>CHRG</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Charging</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>CHRG</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Not charging</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>COMM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">UPS communicating<br/>(event <code>COMMOK</code>)</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>COMM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">See note <a class="xref" href="#DDD">4</a>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>DISCHRG</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Discharging</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>DISCHRG</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Not discharging</td>
            </tr>
            <tr id="EventFSD">
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>FSD</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">System shutdown<br/>(events <code>FSD</code>, <code>SHUTDOWN</code>)</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>FSD</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Shutdown abandoned.  See note <a class="xref" href="#AAA">1</a>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>LB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Low battery.  See note <a class="xref" href="#BBB">2</a> (event <code>LOWBATT</code>)</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>LB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Battery not low</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>NOCOMM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">UPS dead?  See note <a class="xref" href="#DDD">4</a><br/>(events <code>COMMBAD</code>, <code>NOCOMM</code>)</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>NOCOMM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">See note <a class="xref" href="#DDD">4</a>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OFF</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">UPS turned off</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OFF</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">UPS not turned off</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OL</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Receiving power<br/>(event <code>ONLINE</code>)</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OL</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Power lost<br/>(event <code>ONBATT</code>)</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OVER</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">UPS overloaded</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OVER</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Overload gone</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>RB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Replace battery<br/>(event <code>REPLBATT</code>)</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>RB</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Replacement canceled</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TEST</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Test starts</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TEST</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Test finished</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TICK</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Heartbeat event.  See note <a class="xref" href="#CCC">3</a> </td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TICK</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">No heartbeat.   See note <a class="xref" href="#CCC">3</a>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TOCK</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Heartbeat event.  See note <a class="xref" href="#CCC">3</a> </td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TOCK</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">No heartbeat.  See note <a class="xref" href="#CCC">3</a>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TRIM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Trimming voltage</td>
              <td class="text-left" colspan="1" rowspan="1">    </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>TRIM</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">none</td>
              <td class="text-left" colspan="1" rowspan="1">Not trimming</td>
            </tr>
          </tbody>
        </table>
<span class="break"></span><dl class="dlNewline" id="section-5.2-6">
          <dt id="section-5.2-6.1">Notes:</dt>
          <dd id="section-5.2-6.2" style="margin-left: 1.5em">
            <ol class="compact type-1" id="section-5.2-6.2.1" start="1" type="1">
<li id="section-5.2-6.2.1.1">
<div id="AAA">Current practice does not include this event.<a class="pilcrow" href="#AAA">¶</a>
</div>
              </li>
<li id="section-5.2-6.2.1.2">
<div id="BBB">If the status <code>OB</code> is present, current practice
takes Management Daemon reception of <code>LB</code> as an order to perform an emergency
system shutdown.<a class="pilcrow" href="#BBB">¶</a>
</div>
              </li>
<li id="section-5.2-6.2.1.3">
<div id="CCC">The use of a software-defined UPS to provide a
heartbeat is experimental and is not part of common current practice.<a class="pilcrow" href="#CCC">¶</a>
</div>
              </li>
<li id="section-5.2-6.2.1.4">
<div id="DDD">Current practice is the following: if the UPS has not responded for
15 seconds, the Management Daemon assumes that the UPS is <em>dead</em>
(event <code>NOCOMM</code>), and if the last known <code>OL</code>/<code>OB</code> status was <code>OB</code>, a
system shutdown (command <code>FSD</code>) is requested.<a class="pilcrow" href="#DDD">¶</a>
</div>
            </li>
</ol>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
<div id="Sec">
<section id="section-6">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<div id="weak">
<section id="section-6.1">
        <h3 id="name-current-general-security-pr">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-current-general-security-pr">Current General Security Practice</a>
        </h3>
<p id="section-6.1-1">Experience over the last 20 years shows that new UPS management
software releases are not frequent and, when installed, stay
unmodified for some years.  This is probably because UPS management is
a mature activity, part of site management.  A limited number of
system administrators have access to the UPS hardware and software and
tend to assume a certain "security by obscurity" since many
installations have a configuration like the one shown in
<a class="xref" href="#fig.weak">Figure 6</a>, which uses port
3493/TCP (nut) between the two daemons running in the same system.
The traffic is often not encrypted, and when it is encrypted, it uses deprecated
early versions of SSL/TLS.<a class="pilcrow" href="#section-6.1-1">¶</a></p>
<span id="name-common-single-system-config"></span><div id="fig.weak">
<figure id="figure-6">
          <div class="alignCenter art-ascii-art art-text artwork" id="section-6.1-2.1">
<pre> ,-----,   ,--------------------,---------------------,
 | UPS |---|  Attachment   &lt;-Commands     Management  |
 |     |===|    Daemon       Responses-&gt;    Daemon    |
 /-----\   '--------------------'---------------------'
              Listens on
             port 3493/TCP
             for localhost
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-6">Figure 6</a>:
<a class="selfRef" href="#name-common-single-system-config">Common Single-System Configuration</a>
          </figcaption></figure>
</div>
<p id="section-6.1-3">This situation is now changing as low-cost processors become
available, costing significantly less than a UPS unit.  This evolution
makes it interesting to shift to a configuration like the one shown in
<a class="xref" href="#fig.weaker">Figure 7</a>, but it also
exacerbates the security weakness of <a class="xref" href="#fig.weak">Figure 6</a>, since the traffic between the daemons is now over an
exposed network.<a class="pilcrow" href="#section-6.1-3">¶</a></p>
<span id="name-integration-of-ups-and-atta"></span><div id="fig.weaker">
<figure id="figure-7">
          <div class="alignCenter art-ascii-art art-text artwork" id="section-6.1-4.1">
<pre> ,-----,------------,               ,--------------,
 | UPS - Attachment | &lt;-Commands    |  Management  |
 |     |   Daemon   |   Responses-&gt; |    Daemon    |
 /-----'------------\               '--------------'
         Listens on
        port 3493/TCP
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-7">Figure 7</a>:
<a class="selfRef" href="#name-integration-of-ups-and-atta">Integration of UPS and Attachment Daemon</a>
          </figcaption></figure>
</div>
<p id="section-6.1-5">These security issues raised by UPS management are those of the
power industry in general; they are addressed in detail in
<span><a class="xref" href="#IEC62351-1">IEC Technical Specification 62351</a> [<a class="xref" href="#IEC62351-1">IEC62351-1</a>]</span>.
In addition to equipment security, cyber security is now an essential
consideration.<a class="pilcrow" href="#section-6.1-5">¶</a></p>
<p id="section-6.1-6">Quoting from IEC 62351-1<span>[<a class="xref" href="#IEC62351-1">IEC62351-1</a>]</span>,
Introduction to the standard, clause 5.2.3.5:<a class="pilcrow" href="#section-6.1-6">¶</a></p>
<blockquote id="section-6.1-7"> With the computer systems for power operations presumably
kept isolated from the Internet, many utility personnel do not see any
reason for adding security measures to these systems.  However, as
clearly seen from these Subclauses, this may not be true anymore as
networking becomes more prevalent and additional information access
requirements grow.<a class="pilcrow" href="#section-6.1-7">¶</a>
</blockquote>
<p id="section-6.1-8">In IEC 62351-1<span>[<a class="xref" href="#IEC62351-1">IEC62351-1</a>]</span>, clause 5.3.5 lists
typical security attacks: Eavesdropping, Masquerade,
Man-in-the-Middle, Replay, and Resource Exhaustion.
<span>[<a class="xref" href="#RFC3552">RFC3552</a>]</span> adds message insertion/deletion/modification
and denial of service.<a class="pilcrow" href="#section-6.1-8">¶</a></p>
<p id="section-6.1-9">Let's look more closely at these requirements:<a class="pilcrow" href="#section-6.1-9">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-10.1">Eavesdropping; see <a class="xref" href="#Eavesdropping">Section 6.3.1</a><a class="pilcrow" href="#section-6.1-10.1">¶</a>
</li>
          <li class="normal" id="section-6.1-10.2">Man-in-the-Middle; see <a class="xref" href="#Man-in-the-Middle">Section 6.3.2</a><a class="pilcrow" href="#section-6.1-10.2">¶</a>
</li>
          <li class="normal" id="section-6.1-10.3">Masquerade; see <a class="xref" href="#Masquerade">Section 6.3.3</a><a class="pilcrow" href="#section-6.1-10.3">¶</a>
</li>
          <li class="normal" id="section-6.1-10.4">Message insertion, deletion, and modification;
see <a class="xref" href="#Messageidm">Section 6.3.4</a><a class="pilcrow" href="#section-6.1-10.4">¶</a>
</li>
          <li class="normal" id="section-6.1-10.5">Replay; see <a class="xref" href="#Replay">Section 6.3.5</a><a class="pilcrow" href="#section-6.1-10.5">¶</a>
</li>
          <li class="normal" id="section-6.1-10.6">Resource Exhaustion and Denial of Service;
see <a class="xref" href="#Exhaustion">Section 6.3.6</a><a class="pilcrow" href="#section-6.1-10.6">¶</a>
</li>
        </ul>
</section>
</div>
<div id="SecRec">
<section id="section-6.2">
        <h3 id="name-communication-security-requ">
<a class="section-number selfRef" href="#section-6.2">6.2. </a><a class="section-name selfRef" href="#name-communication-security-requ">Communication Security Requirements</a>
        </h3>
<p id="section-6.2-1">Enforcing secure communication requires tightening up the Attachment Daemon to
require the use of command
<code>STARTTLS</code> for commands sent over the global Internet.  In such a
situation, an Attachment Daemon listening for traffic other than from
<code>localhost</code>:<a class="pilcrow" href="#section-6.2-1">¶</a></p>
<ol class="normal type-1" id="section-6.2-2" start="1" type="1">
<li id="section-6.2-2.1">
<div id="should">
            <span class="bcp14">SHOULD</span> require and accept command
<code>STARTTLS</code>,<a class="pilcrow" href="#should">¶</a>
</div>
          </li>
<li id="section-6.2-2.2">
<div id="must">
            <span class="bcp14">MUST</span> encrypt all communication with a Management Daemon, and<a class="pilcrow" href="#must">¶</a>
</div>
          </li>
<li id="section-6.2-2.3">
<div id="shall">
            <span class="bcp14">SHALL</span> refuse all non-encrypted commands, except
an initial <code>STARTTLS</code>.<a class="pilcrow" href="#shall">¶</a>
</div>
        </li>
</ol>
<p id="section-6.2-3">Notes:<a class="pilcrow" href="#section-6.2-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-4.1">
<div class="normal" id="note-should">The <span class="bcp14">SHOULD</span>, rather than <span class="bcp14">MUST</span>,
in <a class="xref" href="#should">Section 6.2, Paragraph 2, Item 1</a> above allows system administrators to
enforce secure communication using other techniques that do not
involve the <code>STARTTLS</code> command.<a class="pilcrow" href="#note-should">¶</a>
</div>
          </li>
<li class="normal" id="section-6.2-4.2">If an Attachment Daemon requires that all commands be encrypted as required by
the <span class="bcp14">MUST</span> in <a class="xref" href="#must">Section 6.2, Paragraph 2, Item 2</a> above, then, automatically,
each Management Daemon <span class="bcp14">MUST</span> encrypt as well, since it has to do so in order to
gain access.<a class="pilcrow" href="#section-6.2-4.2">¶</a>
</li>
          <li class="normal" id="section-6.2-4.3">The <span class="bcp14">SHALL</span> in <a class="xref" href="#shall">Section 6.2, Paragraph 2, Item 3</a> above applies to
traffic from the global Internet.  An Attachment Daemon <span class="bcp14">MAY</span> accept unencrypted
commands from <code>localhost</code> if the local installation's security
practices allow it, for example, in a dedicated appliance.<a class="pilcrow" href="#section-6.2-4.3">¶</a>
</li>
        </ul>
<p id="section-6.2-5">Firewalls <span class="bcp14">SHOULD</span> be used to restrict the communication between
the Attachment Daemon and the accepted Management Daemons, prohibiting and discarding traffic
from any systems that are not part of the envisioned power management
setup.  Note: See <a class="xref" href="#note-should">Section 6.2, Paragraph 4, Item 1</a> above on the use
of <span class="bcp14">SHOULD</span>.<a class="pilcrow" href="#section-6.2-5">¶</a></p>
<div id="certsec">
<section id="section-6.2.1">
          <h4 id="name-certificate-security">
<a class="section-number selfRef" href="#section-6.2.1">6.2.1. </a><a class="section-name selfRef" href="#name-certificate-security">Certificate Security</a>
          </h4>
<p id="section-6.2.1-1">In long-lived installations, such as those found in UPS management,
careful certificate management is essential, whether the certificate
is provided by a Certificate Authority or is a self-signed
certificate. For example, the expiration times of both the 
certificate containing the public key and the signing certificate
should be specified.<a class="pilcrow" href="#section-6.2.1-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="Attacks">
<section id="section-6.3">
        <h3 id="name-attacks-and-defenses">
<a class="section-number selfRef" href="#section-6.3">6.3. </a><a class="section-name selfRef" href="#name-attacks-and-defenses">Attacks and Defenses</a>
        </h3>
<div id="Eavesdropping">
<section id="section-6.3.1">
          <h4 id="name-eavesdropping">
<a class="section-number selfRef" href="#section-6.3.1">6.3.1. </a><a class="section-name selfRef" href="#name-eavesdropping">Eavesdropping</a>
          </h4>
<p id="section-6.3.1-1">The defense against eavesdropping is encryption of the commands and
responses passed between the client Management Daemon and server Attachment Daemon.  The protocol
provides command <code>STARTTLS</code>, see <a class="xref" href="#starttls">Section 4.2.12</a>, which calls on
the Attachment Daemon to support TLS encryption of the communication.  If this
command is accepted, the Management Daemon also encrypts.<a class="pilcrow" href="#section-6.3.1-1">¶</a></p>
<p id="section-6.3.1-2">In current NUT Project practice, the use of TLS is optional;
however, a Management Daemon may refuse to accept unencrypted communication.  This
is done by setting declarations <code>FORCESSL</code> to 1
and <code>CERTVERIFY</code> to 1 in the Management Daemon configuration file.<a class="pilcrow" href="#section-6.3.1-2">¶</a></p>
<section id="section-6.3.1.1">
            <h5 id="name-misplaced-declarations-requ">
<a class="section-number selfRef" href="#section-6.3.1.1">6.3.1.1. </a><a class="section-name selfRef" href="#name-misplaced-declarations-requ">Misplaced Declarations Requiring TLS</a>
            </h5>
<p id="section-6.3.1.1-1">A further weakness is that the <code>FORCESSL</code>
and <code>CERTVERIFY</code> declarations, which enforce use of encryption,
are in the client Management Daemon configuration file and not in the Attachment Daemon.
Secure practice requires enforcement by the server Attachment Daemon, rather than a
possibly rogue client Management Daemon out on the Internet.<a class="pilcrow" href="#section-6.3.1.1-1">¶</a></p>
<p id="section-6.3.1.1-2">This weakness may be mitigated with strict firewall rules that
would prevent the rogue client Management Daemon from accessing the Attachment Daemon.<a class="pilcrow" href="#section-6.3.1.1-2">¶</a></p>
</section>
<section id="section-6.3.1.2">
            <h5 id="name-weak-protection-in-previous">
<a class="section-number selfRef" href="#section-6.3.1.2">6.3.1.2. </a><a class="section-name selfRef" href="#name-weak-protection-in-previous">Weak Protection in Previous Version 2.7.4</a>
            </h5>
<p id="section-6.3.1.2-1">Although version 2.8.0 of NUT supports TLS
1.3 <span>[<a class="xref" href="#RFC8446">RFC8446</a>]</span> with X.509 v3 certificates as
defined by <span>[<a class="xref" href="#RFC5280">RFC5280</a>]</span>, previous version
2.7.4 only supported earlier SSL/TLS versions.  To overcome this
weakness, The following techniques have been used:<a class="pilcrow" href="#section-6.3.1.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3.1.2-2.1">Shims; see <a class="xref" href="#Shims">Appendix D.1</a><a class="pilcrow" href="#section-6.3.1.2-2.1">¶</a>
</li>
              <li class="normal" id="section-6.3.1.2-2.2">TLS tunnel; see <a class="xref" href="#TLStunnel">Appendix D.2</a><a class="pilcrow" href="#section-6.3.1.2-2.2">¶</a>
</li>
              <li class="normal" id="section-6.3.1.2-2.3">Virtual Private Network (VPN); see <a class="xref" href="#VPN">Appendix D.3</a><a class="pilcrow" href="#section-6.3.1.2-2.3">¶</a>
</li>
              <li class="normal" id="section-6.3.1.2-2.4">Virtual Local Area Network (VLAN); see <a class="xref" href="#VLAN">Appendix D.4</a><a class="pilcrow" href="#section-6.3.1.2-2.4">¶</a>
</li>
            </ul>
</section>
</section>
</div>
<div id="Man-in-the-Middle">
<section id="section-6.3.2">
          <h4 id="name-man-in-the-middle">
<a class="section-number selfRef" href="#section-6.3.2">6.3.2. </a><a class="section-name selfRef" href="#name-man-in-the-middle">Man-in-the-Middle</a>
          </h4>
<p id="section-6.3.2-1">The protocol relies on TLS encryption to prevent man-in-the-middle
attacks.  See <a class="xref" href="#AppendixEavesdropping">Appendix D</a> for defense
methods used for previous NUT version 2.7.4.<a class="pilcrow" href="#section-6.3.2-1">¶</a></p>
</section>
</div>
<div id="Masquerade">
<section id="section-6.3.3">
          <h4 id="name-masquerade-attack-agent-ver">
<a class="section-number selfRef" href="#section-6.3.3">6.3.3. </a><a class="section-name selfRef" href="#name-masquerade-attack-agent-ver">Masquerade Attack: Agent Verification</a>
          </h4>
<div id="AgentVerif">
<p id="section-6.3.3-1">The protocol allows a malicious client acting
as a Management Daemon to send command <code>FSD</code> to an Attachment Daemon to shut down a
working system and its power supply, as described in The Shutdown
Story section (see <a class="xref" href="#shutdownstory">Appendix B</a>).  Similarly, a
malicious client could turn off the UPS power outlets, causing the
system to fail.<a class="pilcrow" href="#section-6.3.3-1">¶</a></p>
</div>
<p id="section-6.3.3-2">The protocol provides commands <code>USERNAME</code> (see <a class="xref" href="#username">Section 4.2.13</a>)
and <code>PASSWORD</code> (see <a class="xref" href="#password">Section 4.2.8</a>), which allow an administrative
user in a Management Daemon to authenticate itself to the Attachment Daemon, as a defense
against masquerade attacks.  The administrative username and password
need protection against local malicious users. This is done by
restricting access to the configuration files.<a class="pilcrow" href="#section-6.3.3-2">¶</a></p>
</section>
</div>
<div id="Messageidm">
<section id="section-6.3.4">
          <h4 id="name-message-insertion-deletion-">
<a class="section-number selfRef" href="#section-6.3.4">6.3.4. </a><a class="section-name selfRef" href="#name-message-insertion-deletion-">Message Insertion, Deletion, and Modification</a>
          </h4>
<p id="section-6.3.4-1">The protocol relies on TLS encryption to prevent message insertion,
deletion, and modification attacks.
See <a class="xref" href="#AppendixEavesdropping">Appendix D</a> for defense methods
used for previous NUT version 2.7.4.<a class="pilcrow" href="#section-6.3.4-1">¶</a></p>
</section>
</div>
<div id="Replay">
<section id="section-6.3.5">
          <h4 id="name-replay">
<a class="section-number selfRef" href="#section-6.3.5">6.3.5. </a><a class="section-name selfRef" href="#name-replay">Replay</a>
          </h4>
<p id="section-6.3.5-1">There are two cases:<a class="pilcrow" href="#section-6.3.5-1">¶</a></p>
<ol class="normal type-1" id="section-6.3.5-2" start="1" type="1">
<li id="section-6.3.5-2.1">The replay is from a system other than an approved Management Daemon, i.e.,
the protocol relies on a firewall to block the traffic.<a class="pilcrow" href="#section-6.3.5-2.1">¶</a>
</li>
            <li id="section-6.3.5-2.2">The replay is from an approved Management Daemon. i.e., the protocol relies on the
Management Daemon's own security to prevent unauthorized access.<a class="pilcrow" href="#section-6.3.5-2.2">¶</a>
</li>
          </ol>
</section>
</div>
<div id="Exhaustion">
<section id="section-6.3.6">
          <h4 id="name-denial-of-service">
<a class="section-number selfRef" href="#section-6.3.6">6.3.6. </a><a class="section-name selfRef" href="#name-denial-of-service">Denial of Service</a>
          </h4>
<p id="section-6.3.6-1">The protocol relies on a very tightly specified firewall to prevent
denial-of-service attacks.  Only designated client Management Daemons should be
able to reach the server Attachment Daemon.<a class="pilcrow" href="#section-6.3.6-1">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<section id="section-7">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-7-1">The protocol specified by this text runs over port 3493/TCP (nut), which is
registered by the Network UPS Tools (NUT) Project.<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">This document has been added to the registration's Reference field in the 
"Service Name and Transport Protocol Port Number Registry" <span>[<a class="xref" href="#Registry">Registry</a>]</span>.<a class="pilcrow" href="#section-7-2">¶</a></p>
</section>
<div id="implementation">
<section id="section-8">
      <h2 id="name-implementation-status">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-implementation-status">Implementation Status</a>
      </h2>
<p id="section-8-1">This section presents a very short summary of the status of the                             
Network UPS Tools project.<a class="pilcrow" href="#section-8-1">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8-2.1">May 1996: The first hack as a cron job.<a class="pilcrow" href="#section-8-2.1">¶</a>
</li>
        <li class="compact" id="section-8-2.2">September 1997: The first server-client code.<a class="pilcrow" href="#section-8-2.2">¶</a>
</li>
        <li class="compact" id="section-8-2.3">March 1998: First public release.<a class="pilcrow" href="#section-8-2.3">¶</a>
</li>
        <li class="compact" id="section-8-2.4">June 1999: Code rewrite with a UPS Driver <code>smartups</code>, an                            
Attachment Daemon <code>upsd</code>, and a simple Management Daemon.<a class="pilcrow" href="#section-8-2.4">¶</a>
</li>
        <li class="compact" id="section-8-2.5">September 1999: The project became "Network UPS Tools".  The                               
Management Daemon <code>upsmon</code> supported Primary/Secondary configurations.<a class="pilcrow" href="#section-8-2.5">¶</a>
</li>
        <li class="compact" id="section-8-2.6">June 2001: Common core for multiple Drivers.<a class="pilcrow" href="#section-8-2.6">¶</a>
</li>
        <li class="compact" id="section-8-2.7">May 2002: IANA granted port 3493/TCP (nut). August: release                                
1.0.0. November: OpenSSL support.<a class="pilcrow" href="#section-8-2.7">¶</a>
</li>
        <li class="compact" id="section-8-2.8">April 2003: The initial set of command and variable names was                              
designed.<a class="pilcrow" href="#section-8-2.8">¶</a>
</li>
        <li class="compact" id="section-8-2.9">
<div class="compact" id="arno">February 2005: Arnaud Quette took over the project                           
lead from Russell Kroll.<a class="pilcrow" href="#arno">¶</a>
</div>
        </li>
<li class="compact" id="section-8-2.10">March 2016: Version 2.7.4 released, supported over 100 device                              
manufacturers and hundreds of UPS models.<a class="pilcrow" href="#section-8-2.10">¶</a>
</li>
        <li class="compact" id="section-8-2.11">November 2020: Evgeny "Jim" Klimov took over project lead from                             
Arnaud Quette.<a class="pilcrow" href="#section-8-2.11">¶</a>
</li>
        <li class="compact" id="section-8-2.12">May 2022: Version 2.8.0 released, supporting protocol version                              
1.3.<a class="pilcrow" href="#section-8-2.12">¶</a>
</li>
      </ul>
<p id="section-8-3">See <span>[<a class="xref" href="#githist">githist</a>]</span>                                                          
and Appendix J <span>[<a class="xref" href="#History">History</a>]</span> for a detailed history of the                    
NUT Project.<a class="pilcrow" href="#section-8-3">¶</a></p>
<section id="section-8.1">
        <h3 id="name-inclusion-in-software-distr">
<a class="section-number selfRef" href="#section-8.1">8.1. </a><a class="section-name selfRef" href="#name-inclusion-in-software-distr">Inclusion in Software Distributions</a>
        </h3>
<p id="section-8.1-1">The programs <code>upsd</code>, <code>upsmon</code>, <code>upssched</code>,                             
<code>upsc</code>, <code>upscmd</code>, and <code>upsrw</code> have been included                          
in the package known as "nut" in the package systems of many                                   
distributions, i.e., all the major Linux distributions and Unix                                
distributions, such as OpenBSD and OpenSolaris.  A Microsoft Windows
version has been developed but was not maintained.<a class="pilcrow" href="#section-8.1-1">¶</a></p>
</section>
<div id="MinSup">
<section id="section-8.2">
        <h3 id="name-recommended-minimum-support">
<a class="section-number selfRef" href="#section-8.2">8.2. </a><a class="section-name selfRef" href="#name-recommended-minimum-support">Recommended Minimum Support</a>
        </h3>
<p id="section-8.2-1">The features provided by current UPS units vary widely.  However,                           
experience shows that a minimum feature set is needed for satisfactory                         
use of the NUT Project software.  A full list of variables is                                  
available in <span><a class="xref" href="#gitvars">source code file                                           
docs/nut-names.txt</a> [<a class="xref" href="#gitvars">gitvars</a>]</span>, which serves as the Recording Document.<a class="pilcrow" href="#section-8.2-1">¶</a></p>
<div id="MinSupPC">
<section id="section-8.2.1">
          <h4 id="name-desktop-pc-variables">
<a class="section-number selfRef" href="#section-8.2.1">8.2.1. </a><a class="section-name selfRef" href="#name-desktop-pc-variables">Desktop PC Variables</a>
          </h4>
<p id="section-8.2.1-1">The following variables form a minimum set suitable for a desktop PC.                       
It is expected that, on public power supply failure, the PC will be halted.  It                
will not restart automatically when power returns.<a class="pilcrow" href="#section-8.2.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2.1-2.1">
              <code>battery.charge</code><a class="pilcrow" href="#section-8.2.1-2.1">¶</a>
</li>
            <li class="normal" id="section-8.2.1-2.2">
              <code>battery.charge.low</code><a class="pilcrow" href="#section-8.2.1-2.2">¶</a>
</li>
            <li class="normal" id="section-8.2.1-2.3">
              <code>device.mfr</code><a class="pilcrow" href="#section-8.2.1-2.3">¶</a>
</li>
            <li class="normal" id="section-8.2.1-2.4">
              <code>device.model</code><a class="pilcrow" href="#section-8.2.1-2.4">¶</a>
</li>
            <li class="normal" id="section-8.2.1-2.5">
              <code>ups.status</code> with the minimum status symbol set <code>OL</code> <code>OB</code>
              <code>LB</code> <code>FSD</code>; see <a class="xref" href="#symbols">Section 5.1</a><a class="pilcrow" href="#section-8.2.1-2.5">¶</a>
</li>
          </ul>
</section>
</div>
<div id="MinSupServer">
<section id="section-8.2.2">
          <h4 id="name-unattended-servers-and-addi">
<a class="section-number selfRef" href="#section-8.2.2">8.2.2. </a><a class="section-name selfRef" href="#name-unattended-servers-and-addi">Unattended Servers and Additional Variables</a>
          </h4>
<p id="section-8.2.2-1">The following additional variables are needed in a minimum set                              
suitable for an unattended server.  It is expected that, on public power supply                
failure, the server will be halted.  It will restart automatically                             
when power returns.<a class="pilcrow" href="#section-8.2.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2.2-2.1">
              <code>battery.date</code><a class="pilcrow" href="#section-8.2.2-2.1">¶</a>
</li>
            <li class="normal" id="section-8.2.2-2.2">
              <code>device.serial</code><a class="pilcrow" href="#section-8.2.2-2.2">¶</a>
</li>
            <li class="normal" id="section-8.2.2-2.3">
              <code>ups.delay.shutdown</code><a class="pilcrow" href="#section-8.2.2-2.3">¶</a>
</li>
            <li class="normal" id="section-8.2.2-2.4">
              <code>ups.delay.start</code><a class="pilcrow" href="#section-8.2.2-2.4">¶</a>
</li>
          </ul>
</section>
</div>
<div id="MinSupCommands">
<section id="section-8.2.3">
          <h4 id="name-commands-and-other-technica">
<a class="section-number selfRef" href="#section-8.2.3">8.2.3. </a><a class="section-name selfRef" href="#name-commands-and-other-technica">Commands and Other Technical                                                             
Terms</a>
          </h4>
<p id="section-8.2.3-1">Satisfactory use of the NUT Project software requires support for                           
all the commands specified in protocol version 1.3, software version                           
2.8.0.<a class="pilcrow" href="#section-8.2.3-1">¶</a></p>
</section>
</div>
<div id="Version.2.7.4">
<section id="section-8.2.4">
          <h4 id="name-support-for-earlier-version">
<a class="section-number selfRef" href="#section-8.2.4">8.2.4. </a><a class="section-name selfRef" href="#name-support-for-earlier-version">Support for Earlier Versions</a>
          </h4>
<p id="section-8.2.4-1">In order to ease migration from software version 2.7.4, which                               
supported protocol version 1.2, software version 2.8.0 also supports                           
the technical terms used in protocol version 1.2.                                              
See <a class="xref" href="#differences">Appendix C</a> for the differences.<a class="pilcrow" href="#section-8.2.4-1">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC0020">[RFC0020]</dt>
        <dd>
<span class="refAuthor">Cerf, V.</span>, <span class="refTitle">"ASCII format for network interchange"</span>, <span class="seriesInfo">STD 80</span>, <span class="seriesInfo">RFC 20</span>, <span class="seriesInfo">DOI 10.17487/RFC0020</span>, <time class="refDate" datetime="1969-10">October 1969</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc20">https://www.rfc-editor.org/info/rfc20</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5234">[RFC5234]</dt>
        <dd>
<span class="refAuthor">Crocker, D., Ed.</span> and <span class="refAuthor">P. Overell</span>, <span class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span class="seriesInfo">STD 68</span>, <span class="seriesInfo">RFC 5234</span>, <span class="seriesInfo">DOI 10.17487/RFC5234</span>, <time class="refDate" datetime="2008-01">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5234">https://www.rfc-editor.org/info/rfc5234</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7405">[RFC7405]</dt>
        <dd>
<span class="refAuthor">Kyzivat, P.</span>, <span class="refTitle">"Case-Sensitive String Support in ABNF"</span>, <span class="seriesInfo">RFC 7405</span>, <span class="seriesInfo">DOI 10.17487/RFC7405</span>, <time class="refDate" datetime="2014-12">December 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7405">https://www.rfc-editor.org/info/rfc7405</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="C2ndEd">[C2ndEd]</dt>
        <dd>
<span class="refAuthor">Kernighan, B.</span> and <span class="refAuthor">D. Ritchie</span>, <span class="refTitle">"The C Programming Language"</span>, <span class="refContent">2nd edition, Prentice Hall Software Series</span>, <span class="seriesInfo">ISBN 0-13-110362-8</span>, <time class="refDate" datetime="1988">1988</time>. </dd>
<dd class="break"></dd>
<dt id="devguide">[devguide]</dt>
        <dd>
<span class="refAuthor">Kroll, R.</span>, <span class="refAuthor">Quette, A.</span>, <span class="refAuthor">Lepple, C.</span>, and <span class="refAuthor">P. Selinger</span>, <span class="refTitle">"Network UPS Tools Project Developer Guide"</span>, <span>&lt;<a href="https://networkupstools.org/docs/developer-guide.chunked/ar01s09.html">https://networkupstools.org/docs/developer-guide.chunked/ar01s09.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Documentation">[Documentation]</dt>
        <dd>
<span class="refTitle">"Network UPS Tools Documentation"</span>, <span>&lt;<a href="https://networkupstools.org/documentation.html">https://networkupstools.org/documentation.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="githist">[githist]</dt>
        <dd>
<span class="refTitle">"The Network UPS Tools repository, project history"</span>, <time class="refDate" datetime="2022-07">July 2022</time>, <span>&lt;<a href="https://github.com/networkupstools/nut/blob/master/docs/history.txt">https://github.com/networkupstools/nut/blob/master/docs/history.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="gitvars">[gitvars]</dt>
        <dd>
<span class="refTitle">"The Network UPS Tools repository, variable names"</span>, <time class="refDate" datetime="2022-04">April 2022</time>, <span>&lt;<a href="https://github.com/networkupstools/nut/blob/master/docs/nut-names.txt">https://github.com/networkupstools/nut/blob/master/docs/nut-names.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="History">[History]</dt>
        <dd>
<span class="refAuthor">Kroll, R.</span>, <span class="refAuthor">Quette, A.</span>, and <span class="refAuthor">A. de Korte</span>, <span class="refTitle">"Network UPS Tools User Manual"</span>, <time class="refDate" datetime="2022-05">May 2022</time>, <span>&lt;<a href="https://networkupstools.org/docs/user-manual.pdf">https://networkupstools.org/docs/user-manual.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HyTimeA">[HyTimeA]</dt>
        <dd>
<span class="refAuthor">ISO/IEC</span>, <span class="refTitle">"Information technology -- Hypermedia/Time-based Structuring Language (HyTime)"</span>, <span class="seriesInfo">ISO/IEC 10744:1997</span>, <time class="refDate" datetime="1997-08">August 1997</time>. </dd>
<dd class="break"></dd>
<dt id="IEC62351-1">[IEC62351-1]</dt>
        <dd>
<span class="refAuthor">IEC</span>, <span class="refTitle">"Power systems management and associated information exchange -- Data and communications security.  Part 1: Communication network and system security -- Introduction to security issues"</span>, <span class="refContent">35 pages, TC 57 - Power systems management and associated information exchange</span>, <span class="seriesInfo">IEC TS 62351-1:2007</span>, <time class="refDate" datetime="2007-05">May 2007</time>, <span>&lt;<a href="https://nanopdf.com/download/technical-iec-specification-ts-62351-1_pdf">https://nanopdf.com/download/technical-iec-specification-ts-62351-1_pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Library">[Library]</dt>
        <dd>
<span class="refTitle">"Devices Dumps Library"</span>, <span>&lt;<a href="https://networkupstools.org/ddl/">https://networkupstools.org/ddl/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="NUT">[NUT]</dt>
        <dd>
<span class="refTitle">"Network UPS Tools, Devices Dumps Library"</span>, <span>&lt;<a href="https://www.networkupstools.org">https://www.networkupstools.org</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="nut-repository">[nut-repository]</dt>
        <dd>
<span class="refTitle">"The Network UPS Tools repository"</span>, <span>&lt;<a href="https://github.com/networkupstools/nut/">https://github.com/networkupstools/nut/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="nut-upsdev">[nut-upsdev]</dt>
        <dd>
<span class="refAuthor">NUT</span>, <span class="refTitle">"Network UPS Tools (NUT) Project Mailing List for Developers"</span>, <span>&lt;<a href="https://alioth-lists.debian.net/cgi-bin/mailman/listinfo/nut-upsdev">https://alioth-lists.debian.net/cgi-bin/mailman/listinfo/nut-upsdev</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="nut-upsuser">[nut-upsuser]</dt>
        <dd>
<span class="refAuthor">NUT</span>, <span class="refTitle">"Network UPS Tools (NUT) Project Mailing List for Users"</span>, <span>&lt;<a href="https://alioth-lists.debian.net/cgi-bin/mailman/listinfo/nut-upsuser">https://alioth-lists.debian.net/cgi-bin/mailman/listinfo/nut-upsuser</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Registry">[Registry]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"Service Name and Transport Protocol Port Number Registry"</span>, <span>&lt;<a href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml">https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3552">[RFC3552]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span> and <span class="refAuthor">B. Korver</span>, <span class="refTitle">"Guidelines for Writing RFC Text on Security Considerations"</span>, <span class="seriesInfo">BCP 72</span>, <span class="seriesInfo">RFC 3552</span>, <span class="seriesInfo">DOI 10.17487/RFC3552</span>, <time class="refDate" datetime="2003-07">July 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3552">https://www.rfc-editor.org/info/rfc3552</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5280">[RFC5280]</dt>
        <dd>
<span class="refAuthor">Cooper, D.</span>, <span class="refAuthor">Santesson, S.</span>, <span class="refAuthor">Farrell, S.</span>, <span class="refAuthor">Boeyen, S.</span>, <span class="refAuthor">Housley, R.</span>, and <span class="refAuthor">W. Polk</span>, <span class="refTitle">"Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile"</span>, <span class="seriesInfo">RFC 5280</span>, <span class="seriesInfo">DOI 10.17487/RFC5280</span>, <time class="refDate" datetime="2008-05">May 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5280">https://www.rfc-editor.org/info/rfc5280</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7030">[RFC7030]</dt>
        <dd>
<span class="refAuthor">Pritikin, M., Ed.</span>, <span class="refAuthor">Yee, P., Ed.</span>, and <span class="refAuthor">D. Harkins, Ed.</span>, <span class="refTitle">"Enrollment over Secure Transport"</span>, <span class="seriesInfo">RFC 7030</span>, <span class="seriesInfo">DOI 10.17487/RFC7030</span>, <time class="refDate" datetime="2013-10">October 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7030">https://www.rfc-editor.org/info/rfc7030</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7991">[RFC7991]</dt>
        <dd>
<span class="refAuthor">Hoffman, P.</span>, <span class="refTitle">"The "xml2rfc" Version 3 Vocabulary"</span>, <span class="seriesInfo">RFC 7991</span>, <span class="seriesInfo">DOI 10.17487/RFC7991</span>, <time class="refDate" datetime="2016-12">December 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7991">https://www.rfc-editor.org/info/rfc7991</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time class="refDate" datetime="2018-08">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8894">[RFC8894]</dt>
        <dd>
<span class="refAuthor">Gutmann, P.</span>, <span class="refTitle">"Simple Certificate Enrolment Protocol"</span>, <span class="seriesInfo">RFC 8894</span>, <span class="seriesInfo">DOI 10.17487/RFC8894</span>, <time class="refDate" datetime="2020-09">September 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8894">https://www.rfc-editor.org/info/rfc8894</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SGML">[SGML]</dt>
        <dd>
<span class="refAuthor">Goldfarb, C.</span>, <span class="refTitle">"The SGML Handbook"</span>, <span class="refContent">Oxford University Press</span>, <span class="seriesInfo">ISBN-10 0-19-853737-9</span>, <time class="refDate" datetime="1990">1990</time>. </dd>
<dd class="break"></dd>
<dt id="sgmlnorm">[sgmlnorm]</dt>
        <dd>
<span class="refAuthor">OpenJade Project</span>, <span class="refTitle">"OpenJade Distribution Page"</span>, <span>&lt;<a href="http://openjade.sourceforge.net/">http://openjade.sourceforge.net/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="stunnel">[stunnel]</dt>
      <dd>
<span class="refTitle">"Stunnel"</span>, <span>&lt;<a href="https://www.stunnel.org/">https://www.stunnel.org/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Annex1">
<section id="appendix-A">
      <h2 id="name-variables">
<a class="section-number selfRef" href="#appendix-A">Appendix A. </a><a class="section-name selfRef" href="#name-variables">Variables</a>
      </h2>
<p id="appendix-A-1">The UPS variables represent the abstracted state of the UPS unit.
Certain variables represent not only the state of some hardware
feature but also provide tunable values and Instant Commands;
see <a class="xref" href="#IC">Section 2.5</a>.  The full set of variables is recorded
in the <span><a class="xref" href="#gitvars">reference document for variable
names</a> [<a class="xref" href="#gitvars">gitvars</a>]</span>.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<p id="appendix-A-2">The number of variables used in a given deployment depends on the
sophistication of the UPS product; this annex shows a typical example
of the subset of variables used for a reasonably complete "consumer
grade" UPS.  The NUT Project maintains a <span><a class="xref" href="#Library">large
library of the variable subsets</a> [<a class="xref" href="#Library">Library</a>]</span> used by different UPS models.<a class="pilcrow" href="#appendix-A-2">¶</a></p>
<p id="appendix-A-3">Note that successive versions of a given product may add or delete
features, causing a change in the subset of variables used.  An example
is the removal of <code>ups.delay.start</code> from a "consumer grade"
UPS.  The manufacturer reserves the feature for the "professional"
product.<a class="pilcrow" href="#appendix-A-3">¶</a></p>
<p id="appendix-A-4">An implementation of a Management Daemon acting as a utility program may
provide a listing of the variables available for a given product, for
example, utility program <code>upsc</code>, as included in the NUT package;
see <a class="xref" href="#util">Section 2.6, Paragraph 3</a>.<a class="pilcrow" href="#appendix-A-4">¶</a></p>
<p id="appendix-A-5">The following sections illustrate the use of variables by taking
the values associated with a typical product.  The example is a 1600 Va
1000 W UPS.<a class="pilcrow" href="#appendix-A-5">¶</a></p>
<section id="appendix-A.1">
        <h3 id="name-typical-ups-variables">
<a class="section-number selfRef" href="#appendix-A.1">A.1. </a><a class="section-name selfRef" href="#name-typical-ups-variables">Typical UPS Variables</a>
        </h3>
<span id="name-typical-ups-variables-2"></span><div id="typvar">
<table class="center" id="table-6">
          <caption>
<a class="selfRef" href="#table-6">Table 6</a>:
<a class="selfRef" href="#name-typical-ups-variables-2">Typical UPS Variables</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" colspan="1" rowspan="1">Variable</th>
              <th class="text-center" colspan="1" rowspan="1">Typical Value</th>
              <th class="text-center" colspan="1" rowspan="1">Default Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>battery.charge</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>100</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Battery charge (percent of full)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>battery.charge.low</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>20</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Remaining battery level when UPS switches to LB (percent)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>battery.runtime</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>1481</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Battery runtime (seconds)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>battery.type</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>PbAc</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Battery chemistry"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>device.mfr</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>Example Mfg</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">""</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>device.model</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>Economy 1600</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">""</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>device.serial</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>1234567890</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">""</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>device.type</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">""</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.name</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>usbhid-ups</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver name"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.parameter.lowbatt</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>37</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver parameter: &lt;name&gt;"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.parameter.offdelay</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>30</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver parameter: &lt;name&gt;"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.parameter.ondelay</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>40</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver parameter: &lt;name&gt;"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.parameter.pollfreq</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>30</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver parameter: &lt;name&gt;"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.parameter.pollinterval</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>2</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver parameter: &lt;name&gt;"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.parameter.port</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>auto</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver parameter: &lt;name&gt;"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.parameter.synchronous</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>no</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver parameter: &lt;name&gt;"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.parameter.vendorid</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>0999</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver parameter: &lt;name&gt;"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.version</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>2.8.0</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Driver version - NUT release"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.version.data</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>HID 1.39</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">""</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>driver.version.internal</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>0.41</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Internal driver version"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>input.transfer.high</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>264</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"High voltage transfer point (V)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>input.transfer.low</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>184</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Low voltage transfer point (V)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.1.desc</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>PowerShare Outlet 1</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet description"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.1.id</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>2</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet system identifier"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.1.status</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>on</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet switch status"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.1.switchable</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>no</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet switch ability"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.2.desc</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>PowerShare Outlet 2</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet description"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.2.id</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>3</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet system identifier"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.2.status</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>on</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet switch status"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.2.switchable</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>no</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet switch ability"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.desc</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>Main Outlet</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet description"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.id</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>1</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet system identifier"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.power</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>25</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">""</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.switchable</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>no</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Outlet switch ability"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>output.frequency.nominal</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>50</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Nominal output frequency (Hz)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>output.voltage</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>230.0</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Output voltage (V)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>output.voltage.nominal</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>230</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Nominal output voltage (V)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.beeper.status</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>enabled</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"UPS beeper status"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.delay.shutdown</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>20</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Interval to wait after shutdown with delay command (seconds)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.delay.start</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>30</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Interval to wait before (re)starting the load (seconds)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.firmware</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>02</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"UPS firmware"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.load</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>20</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Load on UPS (percent of full)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.mfr</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>Example Mfg</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"UPS manufacturer"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.model</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>Economy 1600</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"UPS model"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.power.nominal</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>1600</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"UPS power rating (VA)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.productid</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ffff</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Product ID for USB devices"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.serial</code> </td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>000000000</code> </td>
              <td class="text-left" colspan="1" rowspan="1">"UPS serial number"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.status</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>OL</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"UPS status"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.temperature</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>27</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"UPS temperature (C)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.timer.shutdown</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>0</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Time before the load will be shutdown (seconds)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.timer.start</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>0</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Time before the load will be started (seconds)"</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.vendorid</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>0999</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">"Vendor ID for USB devices"</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
<div id="rw">
<section id="appendix-A.2">
        <h3 id="name-typical-ups-readable-and-wr">
<a class="section-number selfRef" href="#appendix-A.2">A.2. </a><a class="section-name selfRef" href="#name-typical-ups-readable-and-wr">Typical UPS Readable and Writable Variables</a>
        </h3>
<p id="appendix-A.2-1">Some of the features of a UPS are represented by variables that
may be tuned by the user.  The following variables are typical of such
tunable features.  The precise list depends on the model of UPS.  An
implementation of a Management Daemon acting as a utility program may provide a
listing of the variables available, as well as acting on them, for
example, utility program <code>upsrw</code>, as included in the NUT package;
see <a class="xref" href="#util">Section 2.6, Paragraph 3</a>.<a class="pilcrow" href="#appendix-A.2-1">¶</a></p>
<span id="name-typical-readable-and-writab"></span><table class="center" id="table-7">
          <caption>
<a class="selfRef" href="#table-7">Table 7</a>:
<a class="selfRef" href="#name-typical-readable-and-writab">Typical Readable and Writable UPS Variables</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" colspan="1" rowspan="1">Variable</th>
              <th class="text-center" colspan="1" rowspan="1">Typical Value</th>
              <th class="text-center" colspan="1" rowspan="1">Default Description Provided as Response to the Command <code>GET DESC</code>
</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>battery.charge.low</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>20</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Remaining battery level when UPS switches to LB (percent)"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>input.transfer.high</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>264</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"High voltage transfer point (V)"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>input.transfer.low</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>184</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Low voltage transfer point (V)"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.1.desc</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>PowerShare Outlet 1</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Outlet description"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.2.desc</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>PowerShare Outlet 2</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Outlet description"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.2.switchable</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>no</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Outlet switch ability"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.desc</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>Main Outlet</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Outlet description"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>outlet.power</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>25</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Description unavailable"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>output.voltage.nominal</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>230</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Nominal output voltage (V)"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.delay.shutdown</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>20</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Interval to wait after shutdown with delay command (seconds)"</code>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>ups.delay.start</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>30</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <code>"Interval to wait before (re)starting the load (seconds)"</code>
</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="instcmdexamples">
<section id="appendix-A.3">
        <h3 id="name-typical-ups-instant-command">
<a class="section-number selfRef" href="#appendix-A.3">A.3. </a><a class="section-name selfRef" href="#name-typical-ups-instant-command">Typical UPS Instant Commands</a>
        </h3>
<p id="appendix-A.3-1">Some of the features of a UPS are actions known as Instant
Commands (see <a class="xref" href="#IC">Section 2.5</a>), which may be ordered by the
user.  The following variables represent such Instant Commands.  The
precise list depends on the model of UPS.  An implementation of a
Management Daemon acting as a utility program may provide a listing of the
variables available, as well as acting on them, for example, utility
program <code>upscmd</code>, as included in the NUT package;
see <a class="xref" href="#util">Section 2.6, Paragraph 3</a>.<a class="pilcrow" href="#appendix-A.3-1">¶</a></p>
<span id="name-typical-instant-commands"></span><table class="center" id="table-8">
          <caption>
<a class="selfRef" href="#table-8">Table 8</a>:
<a class="selfRef" href="#name-typical-instant-commands">Typical Instant Commands</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" colspan="1" rowspan="1">Command</th>
              <th class="text-center" colspan="1" rowspan="1">Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>beeper.disable</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Disable the UPS beeper</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>beeper.enable</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Enable the UPS beeper</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>beeper.mute</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Temporarily mute the UPS beeper</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>load.off</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Turn off the load immediately</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>load.off.delay</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Turn off the load with a delay (seconds)</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>load.on</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Turn on the load immediately</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>load.on.delay</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Turn on the load with a delay (seconds)</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>shutdown.return</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Turn off the load and return when power is back</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>shutdown.stayoff</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Turn off the load and remain off</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>shutdown.stop</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Stop a shutdown in progress</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
</section>
</div>
<div id="shutdownstory">
<section id="appendix-B">
      <h2 id="name-the-shutdown-story-for-syst">
<a class="section-number selfRef" href="#appendix-B">Appendix B. </a><a class="section-name selfRef" href="#name-the-shutdown-story-for-syst">The Shutdown Story for System and UPS</a>
      </h2>
<p id="appendix-B-1">This appendix provides background material helpful for a general
understanding of the relation between system and UPS.  It does not
define any feature of the command-response protocol.<a class="pilcrow" href="#appendix-B-1">¶</a></p>
<p id="appendix-B-2">We consider the steps involved in the shutdown and restart of a
long-running unattended server protected by a single UPS.  The Management Daemon
runs in the server as shown in <a class="xref" href="#fig.story">Figure 8</a>.<a class="pilcrow" href="#appendix-B-2">¶</a></p>
<span id="name-long-running-unattended-ser"></span><div id="fig.story">
<figure id="figure-8">
        <div class="alignCenter art-ascii-art art-text artwork" id="appendix-B-3.1">
<pre>           ,------------------SERVER------------------,
           |                    |                     |
 ,-----,   |     UPS       &lt;-Commands        UPS      |
 | UPS |---|  Attachment        |         Management  |
 |     |===|    Daemon       Responses-&gt;    Daemon    |
 /-----\   '--------------------'---------------------'
                             Internal
                             loopback
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-8">Figure 8</a>:
<a class="selfRef" href="#name-long-running-unattended-ser">Long-Running Unattended Server</a>
        </figcaption></figure>
</div>
<ol class="normal type-1" id="appendix-B-4" start="1" type="1">
<li id="appendix-B-4.1">
<div id="start">
          <em>The public power supply is on.</em> The system runs
normally. Every 5 seconds, variable <code>ups.status</code> reports
<code>OL</code>. <em>Days, weeks, months go by...</em><a class="pilcrow" href="#start">¶</a>
</div>
        </li>
<li id="appendix-B-4.2">
          <em>Winter storm. Tree falls on power lines. The public power supply fails.</em>
The server remains operational, running on the UPS battery. The
Management Daemon polls the Attachment Daemon and detects status change <code>OL</code>-&gt;<code>OB</code>.<a class="pilcrow" href="#appendix-B-4.2">¶</a>
</li>
        <li id="appendix-B-4.3">The Management Daemon logs warning messages. The server is still operational,
running on the UPS battery. <em>Minutes go by...</em><a class="pilcrow" href="#appendix-B-4.3">¶</a>
</li>
        <li id="appendix-B-4.4">The battery discharges below the level specified by variable
<code>battery.charge.low</code>. The server remains operational, but the
UPS battery will not last much longer.  The Management Daemon polls the Attachment Daemon and
detects status change <code>OB</code>-&gt;<code>OB</code>+<code>LB</code>.<a class="pilcrow" href="#appendix-B-4.4">¶</a>
</li>
        <li id="appendix-B-4.5">The Management Daemon logs the low battery event.<a class="pilcrow" href="#appendix-B-4.5">¶</a>
</li>
        <li id="appendix-B-4.6">
<div id="setFSD">The Management Daemon decides to call for a system shutdown.
It sets status <code>FSD</code> in the Attachment Daemon to call on any Secondaries to
shut down and waits for command <code>GET NUMATTACH</code> to report one
single attachment, i.e., the Primary itself. The Management Daemon then issues the
system shutdown command for itself.<a class="pilcrow" href="#setFSD">¶</a>
</div>
        </li>
<li id="appendix-B-4.7">
<div id="upsdrvctl">The operating system's shutdown process takes
over. During the system shutdown, a specific script to the NUT Project or an
equivalent system service unit runs the command <code>upsdrvctl
shutdown</code>. This tells the UPS that it is to shut down N seconds
later where the default is N=20.
Note that the "shutdown" of a UPS removes power
from the outlet sockets but may not turn the UPS off completely.
A delayed shutdown is sometimes audible, and the characteristic
beeping of the UPS stops.<a class="pilcrow" href="#upsdrvctl">¶</a>
</div>
        </li>
<li id="appendix-B-4.8">The system shuts down and powers down, hopefully before the N=20
seconds have passed.<a class="pilcrow" href="#appendix-B-4.8">¶</a>
</li>
        <li id="appendix-B-4.9">
<div id="UPSshutdown">
          <p id="appendix-B-4.9.1"><em>N seconds after
item <a class="xref" href="#upsdrvctl">7</a></em> The UPS shuts
down, i.e., it turns off its outlet sockets when N=20 seconds have
passed. With some UPS units, there is an audible "clunk".<a class="pilcrow" href="#appendix-B-4.9.1">¶</a></p>
<p id="appendix-B-4.9.2">What if the public power supply returns before the UPS shuts down? The UPS unit
should be able to wait a configurable time with default 30 seconds.
These two timers start from the moment the UPS receives the
<code>upsdrvctl shutdown</code> command. <em>Minutes, hours, days go
by...</em><a class="pilcrow" href="#appendix-B-4.9.2">¶</a></p>
</div>
        </li>
<li id="appendix-B-4.10">
          <em>Some time later, maybe much later, the public power supply returns.</em>
The UPS reconnects its outlets to send power to the protected system.<a class="pilcrow" href="#appendix-B-4.10">¶</a>
</li>
        <li id="appendix-B-4.11">
<div id="UPSrestart">The system BIOS option "Restore power on AC
return" or "Restore to previous state" has hopefully been selected and
the system powers up. The bootstrap process of the operating system
begins.<a class="pilcrow" href="#UPSrestart">¶</a>
</div>
        </li>
<li id="appendix-B-4.12">The operating system starts the Attachment Daemon and the Management Daemon. The Attachment Daemon
starts the Driver and scans the UPS. The UPS status becomes
<code>OL</code>+<code>LB</code>.<a class="pilcrow" href="#appendix-B-4.12">¶</a>
</li>
        <li id="appendix-B-4.13">After some time, the battery charges above
the <code>battery.charge.low</code> threshold, and the Attachment Daemon declares the
status change <code>OL</code>+<code>LB</code>-&gt;<code>OL</code>. We are now back in the same
situation as item <a class="xref" href="#start">1</a> above.<a class="pilcrow" href="#appendix-B-4.13">¶</a>
</li>
      </ol>
</section>
</div>
<div id="differences">
<section id="appendix-C">
      <h2 id="name-technical-terms-historical-">
<a class="section-number selfRef" href="#appendix-C">Appendix C. </a><a class="section-name selfRef" href="#name-technical-terms-historical-">Technical Terms: Historical Differences</a>
      </h2>
<p id="appendix-C-1">This appendix lists the major differences between the technical
terms used in NUT software release 2.8.0 and documented in this text,
as well as those used in previous version 2.7.4 of the NUT Project.<a class="pilcrow" href="#appendix-C-1">¶</a></p>
<span id="name-technical-terms-historical-d"></span><table class="center" id="table-9">
        <caption>
<a class="selfRef" href="#table-9">Table 9</a>:
<a class="selfRef" href="#name-technical-terms-historical-d">Technical Terms: Historical Differences</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Term in Previous<br/>Release NUT 2.7.4</th>
            <th class="text-left" colspan="1" rowspan="1">Term in this Document,<br/>Release NUT 2.8.0</th>
            <th class="text-left" colspan="1" rowspan="1">Reference
</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">ALREADY-LOGGED-IN</td>
            <td class="text-left" colspan="1" rowspan="1">ALREADY-ATTACHED</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#errors">Table 3</a>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">ALREADY-SSL-MODE</td>
            <td class="text-left" colspan="1" rowspan="1">TLS-ALREADY-ENABLED</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#errors">Table 3</a>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <code>LOGIN</code>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <code>ATTACH</code>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#attach">Section 4.2.1</a>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <code>LOGOUT</code>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <code>DETACH</code>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#detach">Section 4.2.2</a>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">Master</td>
            <td class="text-left" colspan="1" rowspan="1">Primary</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#prim">Section 2.7</a>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <code>NETVER</code>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <code>PROTVER</code>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#protver">Section 4.2.10</a>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">
              <code>NUMLOGINS</code>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <code>NUMATTACH</code>
</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#numattach">Section 4.2.4.3</a>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">Slave</td>
            <td class="text-left" colspan="1" rowspan="1">Secondary</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#sec">Section 2.8</a>
</td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<div id="AppendixEavesdropping">
<section id="appendix-D">
      <h2 id="name-security-defenses-in-releas">
<a class="section-number selfRef" href="#appendix-D">Appendix D. </a><a class="section-name selfRef" href="#name-security-defenses-in-releas">Security Defenses in Release 2.7.4</a>
      </h2>
<p id="appendix-D-1">Previous NUT version 2.7.4 did not provide support for TLS
1.3 <span>[<a class="xref" href="#RFC8446">RFC8446</a>]</span>.  The following subsections
describe mitigating techniques.<a class="pilcrow" href="#appendix-D-1">¶</a></p>
<div id="Shims">
<section id="appendix-D.1">
        <h3 id="name-shims">
<a class="section-number selfRef" href="#appendix-D.1">D.1. </a><a class="section-name selfRef" href="#name-shims">Shims</a>
        </h3>
<p id="appendix-D.1-1">Previous version 2.7.4 of NUT did not support TLS
1.3 <span>[<a class="xref" href="#RFC8446">RFC8446</a>]</span>.  Where such protection is needed
for version 2.7.4, a possible technique introduces shims between the
Attachment Daemon and the network and between the network and the Management Daemon, as shown
in <a class="xref" href="#fig.shim">Figure 9</a>.  These shims
provide TLS 1.3 support, thus allowing the Attachment Daemon and Management Daemon to continue
temporarily without having TLS implementations themselves.  The technique has been successfully
tested.<a class="pilcrow" href="#appendix-D.1-1">¶</a></p>
<span id="name-shims-provide-tls-support-d"></span><div id="fig.shim">
<figure id="figure-9">
          <div class="alignCenter art-ascii-art art-text artwork" id="appendix-D.1-2.1">
<pre>                TLS shim listens     TLS shim listens
                on port TBD1/TCP     on port 3493/TCP
 ,-----,------------,----,               ,----,--------------,
 | UPS - Attachment |TLS | &lt;-STARTTLS    | TLS|  Management  |
 |     |   Daemon   |shim|         OK--&gt; |shim|    Daemon    |
 /-----'------------'----\               '----'--------------'
         Listens on
       port 3493/TCP
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-9">Figure 9</a>:
<a class="selfRef" href="#name-shims-provide-tls-support-d">Shims Provide TLS Support During Migration</a>
          </figcaption></figure>
</div>
<section id="appendix-D.1.1">
          <h4 id="name-attachment-daemon-shim">
<a class="section-number selfRef" href="#appendix-D.1.1">D.1.1. </a><a class="section-name selfRef" href="#name-attachment-daemon-shim">Attachment Daemon Shim</a>
          </h4>
<p id="appendix-D.1.1-1">The shim in front of the Attachment Daemon listens to incoming traffic on port
TBD1/TCP.  When it receives the command <code>STARTTLS</code>, it:<a class="pilcrow" href="#appendix-D.1.1-1">¶</a></p>
<ol class="compact type-1" id="appendix-D.1.1-2" start="1" type="1">
<li id="appendix-D.1.1-2.1">returns <code>OK</code> to the client and sets up TLS encapsulation.<a class="pilcrow" href="#appendix-D.1.1-2.1">¶</a>
</li>
            <li id="appendix-D.1.1-2.2">does not send <code>STARTTLS</code> to the Attachment Daemon port 3493/TCP.<a class="pilcrow" href="#appendix-D.1.1-2.2">¶</a>
</li>
          </ol>
<p id="appendix-D.1.1-3">All other commands and responses are passed through.<a class="pilcrow" href="#appendix-D.1.1-3">¶</a></p>
<p id="appendix-D.1.1-4">Note: Port TBD1/TCP is not specified by this text.<a class="pilcrow" href="#appendix-D.1.1-4">¶</a></p>
</section>
<section id="appendix-D.1.2">
          <h4 id="name-management-daemon-shim">
<a class="section-number selfRef" href="#appendix-D.1.2">D.1.2. </a><a class="section-name selfRef" href="#name-management-daemon-shim">Management Daemon Shim</a>
          </h4>
<p id="appendix-D.1.2-1">The shim in front of the Management Daemon listens for incoming traffic on port
3493/TCP.  When it receives the command <code>STARTTLS</code>, it:<a class="pilcrow" href="#appendix-D.1.2-1">¶</a></p>
<ol class="compact type-1" id="appendix-D.1.2-2" start="1" type="1">
<li id="appendix-D.1.2-2.1">returns <code>FEATURE-NOT-CONFIGURED</code> to the client.<a class="pilcrow" href="#appendix-D.1.2-2.1">¶</a>
</li>
            <li id="appendix-D.1.2-2.2">sends <code>STARTTLS</code> to the Attachment Daemon on port TBD1/TCP.<a class="pilcrow" href="#appendix-D.1.2-2.2">¶</a>
</li>
          </ol>
<p id="appendix-D.1.2-3">All other commands and responses are passed through.<a class="pilcrow" href="#appendix-D.1.2-3">¶</a></p>
</section>
</section>
</div>
<div id="TLStunnel">
<section id="appendix-D.2">
        <h3 id="name-tls-tunnels">
<a class="section-number selfRef" href="#appendix-D.2">D.2. </a><a class="section-name selfRef" href="#name-tls-tunnels">TLS Tunnels</a>
        </h3>
<p id="appendix-D.2-1">Another technique is the use of <span><a class="xref" href="#RFC8446">TLS
tunnels</a> [<a class="xref" href="#RFC8446">RFC8446</a>]</span>, using a software, such as
stunnel <span>[<a class="xref" href="#stunnel">stunnel</a>]</span>, which adds OpenSSL-based TLS
support without modifying the Attachment Daemon or Management Daemon.  The NUT Project has no
procedure to enforce this on sites.<a class="pilcrow" href="#appendix-D.2-1">¶</a></p>
</section>
</div>
<div id="VPN">
<section id="appendix-D.3">
        <h3 id="name-vpn">
<a class="section-number selfRef" href="#appendix-D.3">D.3. </a><a class="section-name selfRef" href="#name-vpn">VPN</a>
        </h3>
<p id="appendix-D.3-1">A further option to secure communications is very similar
to <span><a class="xref" href="#RFC8446">TLS tunneling</a> [<a class="xref" href="#RFC8446">RFC8446</a>]</span> and consists of
routing the NUT traffic through a Virtual Private Network (VPN).<a class="pilcrow" href="#appendix-D.3-1">¶</a></p>
</section>
</div>
<div id="VLAN">
<section id="appendix-D.4">
        <h3 id="name-vlan">
<a class="section-number selfRef" href="#appendix-D.4">D.4. </a><a class="section-name selfRef" href="#name-vlan">VLAN</a>
        </h3>
<p id="appendix-D.4-1">A fourth option is to isolate the UPS management traffic at the
network switching level using a Virtual LAN (VLAN) technique.<a class="pilcrow" href="#appendix-D.4-1">¶</a></p>
<span id="name-ups-management-protocol-run"></span><div id="fig.VLAN">
<figure id="figure-10">
          <div class="alignCenter art-ascii-art art-text artwork" id="appendix-D.4-2.1">
<pre>          ,-------------,               ,-------------,
,-----,   | Attachment  |               | Management  |
| UPS |---|   Daemon    |               |   Daemon    |
|     |   |-------------|      UPS      |-------------|
|     |===|             |   Management  |    UPS      |
/-----\   | Protected   |~~~~~~~~~~~~~~~| Management  |
          |  Server     |     VLAN      |   Client    |
          |             |               '-------------'
          '-------------'
      Production | VLAN
             ,---|-------,
            ,-----------,|
           ,-----------,|'
           |  Clients  |'
           '-----------'
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-10">Figure 10</a>:
<a class="selfRef" href="#name-ups-management-protocol-run">UPS Management Protocol Runs over Its Own VLAN</a>
          </figcaption></figure>
</div>
<p id="appendix-D.4-3">In <a class="xref" href="#fig.VLAN">Figure 10</a>, there are two VLANS: the main
traffic between the protected server and its clients using the
production VLAN. The UPS management traffic between the Attachment and
Management Daemons uses the UPS management VLAN marked as
~~~~~~~~~~~~~.<a class="pilcrow" href="#appendix-D.4-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="adsec">
<section id="appendix-E">
      <h2 id="name-administrative-security">
<a class="section-number selfRef" href="#appendix-E">Appendix E. </a><a class="section-name selfRef" href="#name-administrative-security">Administrative Security</a>
      </h2>
<p id="appendix-E-1">Administrative commands, such as <code>FSD</code>, <code>INSTCMD</code>,
and <code>SET</code>, are powerful and can have a deep effect on system
integrity. For example, the command <code>FSD</code> is involved in
mission-critical system shutdown decisions.  Access to them needs to
be managed and restricted.  This section presents the current practice.<a class="pilcrow" href="#appendix-E-1">¶</a></p>
<div id="adminuser">
<section id="appendix-E.1">
        <h3 id="name-management-of-administrativ">
<a class="section-number selfRef" href="#appendix-E.1">E.1. </a><a class="section-name selfRef" href="#name-management-of-administrativ">Management of Administrative Users</a>
        </h3>
<p id="appendix-E.1-1">The Attachment Daemon maintains a file (currently <code>upsd.users</code>) that defines
each administrative user.  Note that these users are independent of
those recorded in file <code>/etc/passwd</code>.  Each administrative user
gets its own section in file <code>upsd.users</code>. The declarations in
that section set the parameters that define that user's
privileges. The section begins with the name of the user enclosed in
square brackets,  opening bracket ([)
and  closing bracket (]), and continues until
the next username in brackets or EOF.<a class="pilcrow" href="#appendix-E.1-1">¶</a></p>
<p id="appendix-E.1-2">For example, the following file declares two administrative users,
<code>admin</code> and <code>pfy</code>:<a class="pilcrow" href="#appendix-E.1-2">¶</a></p>
<div id="appendix-E.1-3">
<pre class="lang-shell sourcecode">   [admin]
       password = sekret
       upsmon master
       actions = SET
       instcmds = ALL
   [pfy]
       password = sekret
       instcmds = test.panel.start
       instcmds = test.panel.stop
</pre><a class="pilcrow" href="#appendix-E.1-3">¶</a>
</div>
<p id="appendix-E.1-4">Within each section, the administrative user declarations are:<a class="pilcrow" href="#appendix-E.1-4">¶</a></p>
<span id="name-administrative-user-declara"></span><table class="center" id="table-10">
          <caption>
<a class="selfRef" href="#table-10">Table 10</a>:
<a class="selfRef" href="#name-administrative-user-declara">Administrative User Declarations</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" colspan="1" rowspan="1">Declaration </th>
              <th class="text-center" colspan="1" rowspan="1">Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>actions</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">
                <p id="appendix-E.1-5.2.1.2.1">Allow the user to do certain things in the Attachment Daemon. To
        specify multiple actions, use multiple instances of the
        declaration. Valid actions are:<a class="pilcrow" href="#appendix-E.1-5.2.1.2.1">¶</a></p>
<ul class="normal text-left">
<li class="normal text-left" id="appendix-E.1-5.2.1.2.2.1">
                    <code>FSD</code> Set the "Forced Shutdown" flag for this UPS.
See <a class="xref" href="#FSD">Section 4.2.3</a>.<a class="pilcrow" href="#appendix-E.1-5.2.1.2.2.1">¶</a>
</li>
                  <li class="normal text-left" id="appendix-E.1-5.2.1.2.2.2">
                    <code>SET</code> Change the value of a UPS variable.  See <a class="xref" href="#set">Section 4.2.11</a>.<a class="pilcrow" href="#appendix-E.1-5.2.1.2.2.2">¶</a>
</li>
                </ul>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>instcmds</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Let a user initiate specific Instant Commands. See
        <a class="xref" href="#instcmd">Section 4.2.6</a>.  Use value <code>ALL</code> to grant all commands
        automatically. To specify multiple commands, use multiple
        instances of the instcmds field. For the full list of what a
        given UPS supports, use client <code>upscmd -l</code> supplied by
        the NUT Project.  The <code>LIST CMD</code> command is issued within
        the client <code>upscmd</code>.</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>password</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Set the password for this user.  <em>Your password should be
    more secure than the examples shown.</em>
</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">
                <code>upsmon</code>
</td>
              <td class="text-left" colspan="1" rowspan="1">Add the necessary actions for a Management Daemon to process a system
    shutdown. In current practice, the value is still <code>master</code>
    or <code>slave</code>.  Note that there is no 
    EQUALS  =.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="adsecclient">
<section id="appendix-E.2">
        <h3 id="name-an-administrative-user-of-a">
<a class="section-number selfRef" href="#appendix-E.2">E.2. </a><a class="section-name selfRef" href="#name-an-administrative-user-of-a">An Administrative User of a Client Management Daemon</a>
        </h3>
<p id="appendix-E.2-1">The following examples show the current security practices for
administrative users of a client Management Daemon. They also illustrate the
command pair <code>USERNAME</code> and <code>PASSWORD</code>.  See Sections <a class="xref" href="#username">4.2.13</a>
and <a class="xref" href="#password">4.2.8</a>.<a class="pilcrow" href="#appendix-E.2-1">¶</a></p>
<section id="appendix-E.2.1">
          <h4 id="name-an-administrative-user-logs">
<a class="section-number selfRef" href="#appendix-E.2.1">E.2.1. </a><a class="section-name selfRef" href="#name-an-administrative-user-logs">An Administrative User Logs into a Short Session</a>
          </h4>
<p id="appendix-E.2.1-1">In this simple example of current practice, the system
administrator sets the battery level at which an Attachment Daemon will raise the
status <code>LB</code>, represented by variable <code>battery.charge.low</code>, to
35% of full charge.  A system administrator types the following command
to call the client <code>upsrw</code> supplied by the
NUT Project.<a class="pilcrow" href="#appendix-E.2.1-1">¶</a></p>
<div id="appendix-E.2.1-2">
<pre class="lang-shell sourcecode">upsrw -s battery.charge.low=35 -u admin -p sekret UPS-1@example.com
</pre><a class="pilcrow" href="#appendix-E.2.1-2">¶</a>
</div>
<p id="appendix-E.2.1-3">Option <code>-s</code> specifies the variable and the value,
option <code>-u</code> specifies the <code>USERNAME</code>, option <code>-p</code>
specifies the <code>PASSWORD</code>, and <code>UPS-1@example.com</code> is the
UPS.  The <code>USERNAME</code> and <code>PASSWORD</code> commands are issued
within the client <code>upsrw</code>, and the session is of short duration.<a class="pilcrow" href="#appendix-E.2.1-3">¶</a></p>
<p id="appendix-E.2.1-4">Note: Your password should be stronger than the example shown.<a class="pilcrow" href="#appendix-E.2.1-4">¶</a></p>
</section>
<div id="longsess">
<section id="appendix-E.2.2">
          <h4 id="name-an-administrative-user-logs-">
<a class="section-number selfRef" href="#appendix-E.2.2">E.2.2. </a><a class="section-name selfRef" href="#name-an-administrative-user-logs-">An Administrative User Logs into a Long Session</a>
          </h4>
<p id="appendix-E.2.2-1">In this second example of current practice, the long-running
Management Daemon <code>upsmon</code>, which is responsible for initiating system
shutdowns and which is provided by the NUT Project, issues commands
<code>USERNAME</code> and <code>PASSWORD</code> when it starts up. The data
values needed for the
<code>USERNAME</code> and <code>PASSWORD</code> commands are provided by a
configuration file <code>upsmon.conf</code>, which contains the
line:<a class="pilcrow" href="#appendix-E.2.2-1">¶</a></p>
<div id="appendix-E.2.2-2">
<pre class="lang-shell sourcecode">MONITOR UPS-1@example.com 1 admin sekret master
</pre><a class="pilcrow" href="#appendix-E.2.2-2">¶</a>
</div>
<p id="appendix-E.2.2-3"> This says that the UPS to be monitored
is <code>UPS-1@example.com</code>. It provides 1 single power supply. The
administrative user is <code>admin</code> with
password <code>sekret</code>. The Management Daemon acts as a Primary, although
current practice still uses the former term <code>master</code>.<a class="pilcrow" href="#appendix-E.2.2-3">¶</a></p>
<p id="appendix-E.2.2-4">The <code>USERNAME</code> and <code>PASSWORD</code> commands are contained
within the client <code>upsmon</code>, and the session is of long duration.<a class="pilcrow" href="#appendix-E.2.2-4">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Ack">
<section id="appendix-F">
      <h2 id="name-acknowledgments">
<a class="section-name selfRef" href="#name-acknowledgments">Acknowledgments</a>
      </h2>
<p id="appendix-F-1">This document is based on the
NUT Project <span><a class="xref" href="#devguide">documentation</a> [<a class="xref" href="#devguide">devguide</a>]</span>. The editor
acknowledges the work of <span class="contact-name">Charles Lepple</span>, <span class="contact-name">Arjen de Korte</span>, <span class="contact-name">Arnaud Quette</span>,
<span class="contact-name">Jim Klimov</span>, <span class="contact-name">Russell Kroll</span>,
<span class="contact-name">Manuel Wolfshant</span>, <span class="contact-name">Greg Troxel</span>,
<span class="contact-name">Mark Hansen</span>, and many others who contribute to
the <span><a class="xref" href="#nut-upsuser">nut-upsuser</a> [<a class="xref" href="#nut-upsuser">nut-upsuser</a>]</span>
and <span><a class="xref" href="#nut-upsdev">nut-upsdev</a> [<a class="xref" href="#nut-upsdev">nut-upsdev</a>]</span> mailing lists.<a class="pilcrow" href="#appendix-F-1">¶</a></p>
<p id="appendix-F-2">Earlier draft versions of this document were prepared using an SGML DTD <span>[<a class="xref" href="#SGML">SGML</a>]</span>
and an XML meta-DTD defined by HyTime Annex A <span>[<a class="xref" href="#HyTimeA">HyTimeA</a>]</span>.  Unlike
XML, SGML offers markup minimization, and the earlier drafts took
advantage of this.  The osgmlnorm <span>[<a class="xref" href="#sgmlnorm">sgmlnorm</a>]</span> program generated the
XML that was used as input to xml2rfc <span>[<a class="xref" href="#RFC7991">RFC7991</a>]</span>, which then created
the document's current source. The editor acknowledges the help received 
from <span class="contact-name">Carsten Bormann</span> and <span class="contact-name">Julian Reschke</span> in the xml2rfc mailing list.<a class="pilcrow" href="#appendix-F-2">¶</a></p>
<p id="appendix-F-3">Many helpful comments were received from <span class="contact-name">Eliot Lear</span>,
<span class="contact-name">Bart Smit</span>, <span class="contact-name">David Zomaya</span>,
<span class="contact-name">Joyce Norris</span>, and <span class="contact-name">Ted Mittelstaedt</span>.<a class="pilcrow" href="#appendix-F-3">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-G">
      <h2 id="name-authors-address">
<a class="section-name selfRef" href="#name-authors-address">Author's Address</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Roger Price (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Network UPS Tools Project</span></div>
<div class="left" dir="auto"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:ietf@rogerprice.org">ietf@rogerprice.org</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>