<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9183: Single Nickname for an Area Border RBridge in Multilevel Transparent Interconnection of Lots of Links (TRILL)</title>
<meta content="Mingui Zhang" name="author"/>
<meta content="Donald E. Eastlake, 3rd" name="author"/>
<meta content="Radia Perlman" name="author"/>
<meta content="Margaret Cullen" name="author"/>
<meta content="Hongjun Zhai" name="author"/>
<meta content="
       
   A major issue in multilevel TRILL is how to manage RBridge nicknames.
   In this document, area border RBridges use a single nickname in both
   Level 1 and Level 2. RBridges in Level 2 must obtain unique nicknames
   but RBridges in different Level 1 areas may have the same nicknames. 
    " name="description"/>
<meta content="xml2rfc 3.12.1" name="generator"/>
<meta content="aggregated" name="keyword"/>
<meta content="9183" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.12.1
    Python 3.6.15
    appdirs 1.4.4
    ConfigArgParse 1.4.1
    google-i18n-address 2.4.0
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.15.1
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.4.1
    requests 2.24.0
    setuptools 40.5.0
    six 1.14.0
    WeasyPrint 52.5
-->
<link href="rfc9183.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9183" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-trill-multilevel-single-nickname-17" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9183</td>
<td class="center">Single Nickname for Area Border RBridge </td>
<td class="right">February 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Zhang, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9183">9183</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2022-02">February 2022</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Zhang</div>
<div class="org">Independent</div>
</div>
<div class="author">
      <div class="author-name">D. Eastlake 3rd</div>
<div class="org">Futurewei</div>
</div>
<div class="author">
      <div class="author-name">R. Perlman</div>
<div class="org">EMC</div>
</div>
<div class="author">
      <div class="author-name">M. Cullen</div>
<div class="org">Painless Security</div>
</div>
<div class="author">
      <div class="author-name">H. Zhai</div>
<div class="org">JIT</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9183</h1>
<h1 id="title">Single Nickname for an Area Border RBridge in Multilevel Transparent Interconnection of Lots of Links (TRILL)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
   A major issue in multilevel TRILL is how to manage RBridge nicknames.
   In this document, area border RBridges use a single nickname in both
   Level 1 and Level 2. RBridges in Level 2 must obtain unique nicknames
   but RBridges in different Level 1 areas may have the same nicknames.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9183">https://www.rfc-editor.org/info/rfc9183</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-acronyms-and-terminology">Acronyms and Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-nickname-handling-on-border">Nickname Handling on Border RBridges</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p class="keepWithNext" id="section-toc.1-1.3.2.1.1"><a class="xref" href="#section-3.1">3.1</a>.  <a class="xref" href="#name-actions-on-unicast-packets">Actions on Unicast Packets</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="xref" href="#section-3.2">3.2</a>.  <a class="xref" href="#name-actions-on-multi-destinatio">Actions on Multi-destination Packets</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-per-flow-load-balancing">Per-Flow Load Balancing</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-l2-to-l1-ingress-nickname-r">L2-to-L1 Ingress Nickname Replacement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-l1-to-l2-egress-nickname-re">L1-to-L2 Egress Nickname Replacement</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-protocol-extensions-for-dis">Protocol Extensions for Discovery</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.  <a class="xref" href="#name-discovery-of-border-rbridge">Discovery of Border RBridges in L1</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="xref" href="#section-5.2">5.2</a>.  <a class="xref" href="#name-discovery-of-border-rbridge-">Discovery of Border RBridge Sets in L2</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-one-border-rbridge-connects">One Border RBridge Connects Multiple Areas</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-e-l1fs-e-l2fs-backwards-com">E-L1FS/E-L2FS Backwards Compatibility</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-manageability-consideration">Manageability Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-10">10</a>. <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-11">11</a>. <a class="xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a class="xref" href="#section-11.1">11.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a class="xref" href="#section-11.2">11.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="xref" href="#appendix-A">Appendix A</a>.  <a class="xref" href="#name-level-transition-clarificat">Level Transition Clarification</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="xref" href="#appendix-B"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-1">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
   TRILL (Transparent Interconnection of Lots of Links) <span>[<a class="xref" href="#RFC6325">RFC6325</a>]</span>
        <span>[<a class="xref" href="#RFC7780">RFC7780</a>]</span> multilevel techniques are designed to improve TRILL
   scalability issues.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">
   "<a class="xref" href="#RFC8243">Alternatives for Multilevel Transparent Interconnection of Lots of Links (TRILL)</a>" <span>[<a class="xref" href="#RFC8243">RFC8243</a>]</span> is an educational
   document to explain multilevel TRILL and list possible concerns. It does
   not specify a protocol. As described in <span>[<a class="xref" href="#RFC8243">RFC8243</a>]</span>, there have been two proposed approaches. One approach,
   which is referred to as the "unique nickname" approach, gives unique
   nicknames to all the TRILL switches in the multilevel campus either by
   having the Level 1/Level 2 border TRILL switches advertise which nicknames
   are not available for assignment in the area or by partitioning the 16-bit
   nickname into an "area" field and a "nickname inside the area" field. <span>[<a class="xref" href="#RFC8397">RFC8397</a>]</span> is the Standards Track document
   specifying a "unique nickname" flavor of TRILL multilevel. The other
   approach, which is referred to in <span>[<a class="xref" href="#RFC8243">RFC8243</a>]</span>
   as the "aggregated nickname" approach, involves assigning nicknames to the
   areas, and allowing nicknames to be reused inside different areas, by
   having the border TRILL switches rewrite the nickname fields when entering
   or leaving an area. <span>[<a class="xref" href="#RFC8243">RFC8243</a>]</span> makes the
   case that, while unique nickname multilevel solutions are simpler,
   aggregated nickname solutions scale better.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">
   The approach specified in this Standards Track document is somewhat
   similar to the "aggregated nickname" approach in <span>[<a class="xref" href="#RFC8243">RFC8243</a>]</span> but with a
   very important difference. In this document, the nickname of an area
   border RBridge is used in both Level 1 (L1) and Level 2 (L2). No
   additional nicknames are assigned to represent L1 areas as such.
   Instead, multiple border RBridges are allowed and each L1 area is
   denoted by the set of all nicknames of those border RBridges of the
   area. For this approach, nicknames in the L2 area <span class="bcp14">MUST</span> be unique but
   nicknames inside an L1 area can be reused in other L1 areas that also
   use this approach. The use of the approach specified in this document
   in one L1 area does not prohibit the use of other approaches in other
   L1 areas in the same TRILL campus, for example the use of the unique
   nickname approach specified in <span>[<a class="xref" href="#RFC8397">RFC8397</a>]</span>. The TRILL packet format is
   unchanged by this document, but data plane processing is changed at
   Border RBridges and efficient high volume data flow at Border
   RBridges might require forwarding hardware change.<a class="pilcrow" href="#section-1-3">¶</a></p>
</section>
</div>
<div id="sect-2">
<section id="section-2">
      <h2 id="name-acronyms-and-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-acronyms-and-terminology">Acronyms and Terminology</a>
      </h2>
<span class="break"></span><dl class="dlParallel" id="section-2-1">
        <dt id="section-2-1.1">Area Border RBridge:
        </dt>
        <dd id="section-2-1.2" style="margin-left: 1.5em">A border RBridge between a Level 1 area and Level 2.<a class="pilcrow" href="#section-2-1.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.3">Data Label:
        </dt>
        <dd id="section-2-1.4" style="margin-left: 1.5em">VLAN or Fine-Grained Label (FGL).<a class="pilcrow" href="#section-2-1.4">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.5">DBRB:
        </dt>
        <dd id="section-2-1.6" style="margin-left: 1.5em">Designated Border RBridge.<a class="pilcrow" href="#section-2-1.6">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.7">IS-IS:
        </dt>
        <dd id="section-2-1.8" style="margin-left: 1.5em">Intermediate System to Intermediate System <span>[<a class="xref" href="#IS-IS">IS-IS</a>]</span>.<a class="pilcrow" href="#section-2-1.8">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-1.9">Level:
        </dt>
        <dd id="section-2-1.10" style="margin-left: 1.5em">Similar to IS-IS, TRILL has Level 1 for intra-area and Level 2 for
 inter-area. Routing information is exchanged between Level 1 RBridges
 within the same Level 1 area, and Level 2 RBridges can only form
 relationships and exchange information with other Level 2 RBridges.<a class="pilcrow" href="#section-2-1.10">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-2-2">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-2-2">¶</a></p>
<p id="section-2-3">
   Familiarity with <span>[<a class="xref" href="#RFC6325">RFC6325</a>]</span> is assumed in this document.<a class="pilcrow" href="#section-2-3">¶</a></p>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-nickname-handling-on-border">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-nickname-handling-on-border">Nickname Handling on Border RBridges</a>
      </h2>
<p id="section-3-1">
   This section provides an illustrative example and description of the
   border learning border RBridge nicknames.<a class="pilcrow" href="#section-3-1">¶</a></p>
<span id="name-an-example-topology-for-tri"></span><div id="fig-1">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-3-2.1">
<pre>        Area {2,20}             Level 2             Area {3,30}
+-------------------+     +-----------------+     +--------------+
|                   |     |                 |     |              |
| S--RB27---Rx--Rz----RB2---Rb---Rc--Rd---Re--RB3---Rk--RB44---D |
|     27            |     |      39         |     |     44       |
|                 ----RB20---             ----RB30---            |
+-------------------+     +-----------------+     +--------------+
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-an-example-topology-for-tri">An Example Topology for TRILL Multilevel</a>
        </figcaption></figure>
</div>
<p id="section-3-3">
   In <a class="xref" href="#fig-1">Figure 1</a>, RB2, RB20, RB3, and RB30 are area border TRILL switches
   (RBridges). Their nicknames are 2, 20, 3, and 30, respectively, and are
   used as TRILL switch identifiers in their areas <span>[<a class="xref" href="#RFC6325">RFC6325</a>]</span>. Area
   border RBridges use the set of border nicknames to denote the L1 area
   that they are attached to. For example, RB2 and RB20 use nicknames
   {2,20} to denote the L1 area on the left.<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4">
   A source S is attached to RB27 and a destination D is attached to
   RB44. RB27 has a nickname (say, 27), and RB44 has a nickname (say, 44).
   (In fact, they could even have the same nickname, since the TRILL
   switch nickname will not be visible outside these Level 1 areas.)<a class="pilcrow" href="#section-3-4">¶</a></p>
<div id="sect-3.1">
<section id="section-3.1">
        <h3 id="name-actions-on-unicast-packets">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-actions-on-unicast-packets">Actions on Unicast Packets</a>
        </h3>
<p id="section-3.1-1">
   Let's say that S transmits a frame to destination D and let's say
   that D's location has been learned by the relevant TRILL switches
   already. These relevant switches have learned the following:<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<span class="break"></span><dl class="olPercent" id="section-3.1-2">
<dt>1)</dt>
<dd id="section-3.1-2.1">RB27 has learned that D is connected to nickname 3.<a class="pilcrow" href="#section-3.1-2.1">¶</a>
</dd>
          <dd class="break"></dd>
<dt>2)</dt>
<dd id="section-3.1-2.2">RB3 has learned that D is attached to nickname 44.<a class="pilcrow" href="#section-3.1-2.2">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-3.1-3">
   The following sequence of events will occur:<a class="pilcrow" href="#section-3.1-3">¶</a></p>
<ol class="normal type-1" id="section-3.1-4" start="1" type="1">

  <li id="section-3.1-4.1">S transmits an Ethernet frame with source MAC = S and destination MAC =
  D.<a class="pilcrow" href="#section-3.1-4.1">¶</a>
</li>
          <li id="section-3.1-4.2">RB27 encapsulates with a TRILL header with ingress RBridge = 27 and
  egress RBridge = 3 producing a TRILL Data packet.<a class="pilcrow" href="#section-3.1-4.2">¶</a>
</li>
          <li id="section-3.1-4.3">RB2 and RB20 have announced in the Level 1 IS-IS area designated {2,20}
   that they are attached to the nicknames of all the border RBridges in the
   Level 2 area including RB3 and RB30. Therefore, IS-IS routes the packet to
   RB2 (or RB20, if RB20 is on the least-cost route from RB27 to RB3).<a class="pilcrow" href="#section-3.1-4.3">¶</a>
</li>
          <li id="section-3.1-4.4">RB2, when transitioning the packet from Level 1 to Level 2, replaces
    the ingress TRILL switch nickname with its own nickname, replacing 27 with
    2. Within Level 2, the ingress RBridge field in the TRILL header will
    therefore be 2, and the egress RBridge field will be 3. (The egress
    nickname <span class="bcp14">MAY</span> be replaced with any area nickname selected
    from {3,30} such as 30. See <a class="xref" href="#sect-4">Section 4</a> for the detail of the
    selection method. Here, suppose the egress nickname remains 3.) Also, RB2
    learns that S is attached to nickname 27 in area {2,20} to accommodate
    return traffic. RB2 <span class="bcp14">SHOULD</span> synchronize with RB20 using the
    End Station Address Distribution Information (ESADI) protocol <span>[<a class="xref" href="#RFC7357">RFC7357</a>]</span> that MAC = S is attached to nickname 27.<a class="pilcrow" href="#section-3.1-4.4">¶</a>
</li>
          <li id="section-3.1-4.5">The packet is forwarded through Level 2, to RB3, which has
     advertised, in Level 2, its L2 nickname as 3.<a class="pilcrow" href="#section-3.1-4.5">¶</a>
</li>
          <li id="section-3.1-4.6">RB3, when forwarding into area {3,30}, replaces the egress nickname
      in the TRILL header with RB44's nickname (44) based on looking up
      D. (The ingress nickname <span class="bcp14">MAY</span> be replaced with any area
      nickname selected from {2,20}. See <a class="xref" href="#sect-4">Section 4</a> for the
      detail of the selection method. Here, suppose the ingress nickname
      remains 2.)  So, within the destination area, the ingress nickname will
      be 2 and the egress nickname will be 44.<a class="pilcrow" href="#section-3.1-4.6">¶</a>
</li>
          <li id="section-3.1-4.7">RB44, when decapsulating, learns that S is attached to
           nickname 2, which is one of the area nicknames of the
           ingress.<a class="pilcrow" href="#section-3.1-4.7">¶</a>
</li>
        </ol>
</section>
</div>
<div id="sect-3.2">
<section id="section-3.2">
        <h3 id="name-actions-on-multi-destinatio">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-actions-on-multi-destinatio">Actions on Multi-destination Packets</a>
        </h3>
<p id="section-3.2-1">
   Distribution trees for flooding of multi-destination packets are calculated
   separately within each L1 area and in L2. When a multi-destination packet
   arrives at the border, it needs to be transitioned either from L1 to L2, or
   from L2 to L1. All border RBridges are eligible for Level
   transition. However, for each multi-destination packet, only one of them
   acts as the Designated Border RBridge (DBRB) to do the transition while
   other non-DBRBs <span class="bcp14">MUST</span> drop the received copies.  By default,
   the border RBridge with the smallest nickname, considered as an unsigned
   integer, is elected DBRB.  All border RBridges of an area
   <span class="bcp14">MUST</span> agree on the mechanism used to determine the DBRB
   locally.  The use of an alternative is possible, but out of the scope of
   this document; one such mechanism is used in <a class="xref" href="#sect-4">Section 4</a> for load balancing.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<p id="section-3.2-2">
   As per <span>[<a class="xref" href="#RFC6325">RFC6325</a>]</span>,

  multi-destination packets can be classified into three types: unicast
  packets with unknown destination MAC addresses (unknown-unicast packets),
  multicast packets, and broadcast packets. Now suppose that D's location has
  not been learned by RB27 or the frame received by RB27 is recognized as
  broadcast or multicast. What will happen within a Level 1 area (as it would
  in TRILL today) is that RB27 will forward the packet as multi-destination,
  setting its M bit to 1 and choosing an L1 tree, which would flood the packet
  on that distribution tree (subject to potential pruning).<a class="pilcrow" href="#section-3.2-2">¶</a></p>
<p id="section-3.2-3">
   When the copies of the multi-destination packet arrive at area border
   RBridges, non-DBRBs <span class="bcp14">MUST</span> drop the packet while the DBRB (say, RB2)
   needs to do the Level transition for the multi-destination packet.
   For an unknown-unicast packet, if the DBRB has learned the destination
   MAC address, it <span class="bcp14">SHOULD</span> convert the packet to unicast and set its M
   bit to 0. Otherwise, the multi-destination packet will continue to be
   flooded as a multicast packet on the distribution tree. The DBRB
   chooses the new distribution tree by replacing the egress nickname
   with the new tree root RBridge nickname from the area the packet is
   entering. The following sequence of events will occur:<a class="pilcrow" href="#section-3.2-3">¶</a></p>
<ol class="normal type-1" id="section-3.2-4" start="1" type="1">
     <li id="section-3.2-4.1">RB2, when transitioning the packet from Level 1 to Level 2, replaces
     the ingress TRILL switch nickname with its own nickname, replacing 27
     with 2. RB2 also <span class="bcp14">MUST</span> replace the egress RBridge nickname
     with an L2 tree root RBridge nickname (say, 39). In order to accommodate
     return traffic, RB2 records that S is attached to nickname 27 and
     <span class="bcp14">SHOULD</span> use the ESADI protocol <span>[<a class="xref" href="#RFC7357">RFC7357</a>]</span> to synchronize this attachment information with other
     border RBridges (say, RB20) in the area.<a class="pilcrow" href="#section-3.2-4.1">¶</a>
</li>
          <li id="section-3.2-4.2">RB20 will receive the packet flooded on the L2 tree by RB2. It
          is important that RB20 does not transition this packet back to L1 as
          it does for a multicast packet normally received from another remote
          L1 area. RB20 should examine the ingress nickname of this packet. If
          this nickname is found to be a border RBridge nickname of the area
          {2,20}, RB2 must not forward the packet into this area.<a class="pilcrow" href="#section-3.2-4.2">¶</a>
</li>
          <li id="section-3.2-4.3">The multi-destination packet is flooded on the Level 2 tree
        to reach all border routers for all L1 areas including both RB3
        and RB30. Suppose RB3 is the selected DBRB. The non-DBRB RB30
        will drop the packet.<a class="pilcrow" href="#section-3.2-4.3">¶</a>
</li>
          <li id="section-3.2-4.4">RB3, when forwarding into area {3,30}, replaces the
             egress nickname in the TRILL header with the root RBridge
             nickname of a distribution tree of L1 area {3,30} -- say,
             30. (Here, the ingress nickname <span class="bcp14">MAY</span> be
             replaced with a different area nickname selected from
             {2,20}, the set of border RBridges to the ingress area, as
             specified in <a class="xref" href="#sect-4">Section 4</a>.)
             Now suppose that RB27 has learned the location of D
             (attached to nickname 3), but RB3 does not know where D is
             because this information has fallen out of cache or RB3
             has restarted or some other reason. In that case, RB3 must
             turn the packet into a multi-destination packet and then
             floods it on a distribution tree in the L1 area {3,30}.<a class="pilcrow" href="#section-3.2-4.4">¶</a>
</li>
          <li id="section-3.2-4.5">RB30 will receive the packet flooded on the L1
          tree by RB3. It is important that RB30 does not
          transition this packet back to L2.  RB30 should also
          examine the ingress nickname of this packet. If this
          nickname is found to be an L2 Border RBridge
          Nickname, RB30 must not transition the packet back to
          L2.<a class="pilcrow" href="#section-3.2-4.5">¶</a>
</li>
          <li id="section-3.2-4.6">The multicast listener RB44, when
       decapsulating the received packet, learns that S
       is attached to nickname 2, which is one of the
       area nicknames of the ingress.<a class="pilcrow" href="#section-3.2-4.6">¶</a>
</li>
        </ol>
<p id="section-3.2-5">
   See also <a class="xref" href="#sect-a">Appendix A</a>.<a class="pilcrow" href="#section-3.2-5">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4">
<section id="section-4">
      <h2 id="name-per-flow-load-balancing">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-per-flow-load-balancing">Per-Flow Load Balancing</a>
      </h2>
<p id="section-4-1">
   Area border RBridges perform ingress/egress nickname replacement when they
   transition TRILL Data packets between Level 1 and Level 2. The egress
   nickname will again be replaced when the packet transitions from Level 2 to
   Level 1. This nickname replacement enables the per-flow load balance, which
   is specified in the following subsections.  The mechanism specified in
   <a class="xref" href="#sect-4.1">Section 4.1</a> or that in <a class="xref" href="#sect-4.2">Section 4.2</a> or both is necessary in general to load-balance traffic
   across L2 paths.<a class="pilcrow" href="#section-4-1">¶</a></p>
<div id="sect-4.1">
<section id="section-4.1">
        <h3 id="name-l2-to-l1-ingress-nickname-r">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-l2-to-l1-ingress-nickname-r">L2-to-L1 Ingress Nickname Replacement</a>
        </h3>
<p id="section-4.1-1">
   When a TRILL Data packet from other L1 areas arrives at an area border
   RBridge, this RBridge <span class="bcp14">MAY</span> select one area nickname of the
   ingress area to replace the ingress nickname of the packet so that the
   returning TRILL Data packet can be forwarded to this selected nickname to
   help load-balance return unicast traffic over multiple paths. The selection
   is simply based on a pseudorandom algorithm as discussed in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7357#section-5.3">Section 5.3</a> of [<a class="xref" href="#RFC7357">RFC7357</a>]</span>. With
   the random ingress nickname replacement, the border RBridge actually
   achieves a per-flow load balance for returning traffic.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">
   All area border RBridges for an L1 area <span class="bcp14">MUST</span> agree on the same
   pseudorandom algorithm. The source MAC address, ingress area
   nicknames, egress area nicknames, and the Data Label of the received
   TRILL Data packet are candidate factors of the input of this
   pseudorandom algorithm. Note that the value of the destination MAC
   address <span class="bcp14">SHOULD</span> be excluded from the input of this pseudorandom
   algorithm; otherwise, the egress RBridge could see one source MAC
   address flip-flopping among multiple ingress RBridges.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
</section>
</div>
<div id="sect-4.2">
<section id="section-4.2">
        <h3 id="name-l1-to-l2-egress-nickname-re">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-l1-to-l2-egress-nickname-re">L1-to-L2 Egress Nickname Replacement</a>
        </h3>
<p id="section-4.2-1">
   When a unicast TRILL Data packet originated from an L1 area arrives at an
   area border RBridge of that L1 area, that RBridge <span class="bcp14">MAY</span> select
   one area nickname of the egress area to replace the egress nickname of the
   packet. By default, it <span class="bcp14">SHOULD</span> choose the egress area border
   RBridge with the least cost route to reach or, if there are multiple equal
   cost egress area border RBridges, use the pseudorandom algorithm as defined
   in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7357#section-5.3">Section 5.3</a> of [<a class="xref" href="#RFC7357">RFC7357</a>]</span> to select one. The use of that algorithm
   <span class="bcp14">MAY</span> be extended to selection among some stable set of egress
   area border RBridges that include non-least-cost alternatives if it is
   desired to obtain more load spreading at the cost of sometimes using a
   non-least-cost Level 2 route to forward the TRILL Data packet to the egress
   area.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-5">
<section id="section-5">
      <h2 id="name-protocol-extensions-for-dis">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-protocol-extensions-for-dis">Protocol Extensions for Discovery</a>
      </h2>
<p id="section-5-1">
   The following topology change scenarios will trigger the discovery
   processes as defined in Sections <a class="xref" href="#sect-5.1">5.1</a> and <a class="xref" href="#sect-5.2">5.2</a>:<a class="pilcrow" href="#section-5-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-2.1">A new node comes up or recovers from a previous failure.<a class="pilcrow" href="#section-5-2.1">¶</a>
</li>
        <li class="normal" id="section-5-2.2">A node goes down.<a class="pilcrow" href="#section-5-2.2">¶</a>
</li>
        <li class="normal" id="section-5-2.3">A link or node fails and causes partition of an L1/L2 area.<a class="pilcrow" href="#section-5-2.3">¶</a>
</li>
        <li class="normal" id="section-5-2.4">A link or node whose failure has caused partitioning of an L1/L2
        area is repaired.<a class="pilcrow" href="#section-5-2.4">¶</a>
</li>
      </ul>
<div id="sect-5.1">
<section id="section-5.1">
        <h3 id="name-discovery-of-border-rbridge">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-discovery-of-border-rbridge">Discovery of Border RBridges in L1</a>
        </h3>
<p id="section-5.1-1">
   The following Level 1 Border RBridge APPsub-TLV will be included in E-L1FS
   FS-LSP fragment zero <span>[<a class="xref" href="#RFC7780">RFC7780</a>]</span> as an
   APPsub-TLV of the TRILL GENINFO-TLV. Through listening for this APPsub-TLV,
   an area border RBridge discovers all other area border RBridges in this
   area.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-2">
<pre>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Type = L1-BORDER-RBRIDGE      | (2 bytes)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Length                        | (2 bytes)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Sender Nickname               | (2 bytes)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-5.1-2">¶</a>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.1-3">
          <dt id="section-5.1-3.1">Type:
          </dt>
          <dd id="section-5.1-3.2" style="margin-left: 1.5em">Level 1 Border RBridge (TRILL APPsub-TLV type 256)<a class="pilcrow" href="#section-5.1-3.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-3.3">Length:
          </dt>
          <dd id="section-5.1-3.4" style="margin-left: 1.5em">2<a class="pilcrow" href="#section-5.1-3.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-3.5">Sender Nickname:
          </dt>
          <dd id="section-5.1-3.6" style="margin-left: 1.5em">The nickname the originating IS will use as the L1 Border
   RBridge Nickname. This field is useful because the originating IS
   might own multiple nicknames.<a class="pilcrow" href="#section-5.1-3.6">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="sect-5.2">
<section id="section-5.2">
        <h3 id="name-discovery-of-border-rbridge-">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-discovery-of-border-rbridge-">Discovery of Border RBridge Sets in L2</a>
        </h3>
<p id="section-5.2-1">
   The following APPsub-TLV will be included in an E-L2FS FS-LSP
   fragment zero <span>[<a class="xref" href="#RFC7780">RFC7780</a>]</span> as an APPsub-TLV of the TRILL GENINFO-TLV.
   Through listening to this APPsub-TLV in L2, an area border RBridge
   discovers all groups of L1 border RBridges and each such group
   identifies an area.<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.2-2">
<pre>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Type = L1-BORDER-RB-GROUP     | (2 bytes)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Length                        | (2 bytes)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| L1 Border RBridge Nickname 1  | (2 bytes)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| ...                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| L1 Border RBridge Nickname k  | (2 bytes)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-5.2-2">¶</a>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.2-3">
          <dt id="section-5.2-3.1">Type:
</dt>
          <dd id="section-5.2-3.2" style="margin-left: 1.5em">Level 1 Border RBridge Group (TRILL APPsub-TLV type 257)<a class="pilcrow" href="#section-5.2-3.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-3.3">Length:
</dt>
          <dd id="section-5.2-3.4" style="margin-left: 1.5em">2 * k. If length is not a multiple of 2, the APPsub-TLV is corrupt and
<span class="bcp14">MUST</span> be ignored.<a class="pilcrow" href="#section-5.2-3.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-3.5">L1 Border RBridge Nickname:
</dt>
          <dd id="section-5.2-3.6" style="margin-left: 1.5em">The nickname that an area border RBridge uses as the L1 Border RBridge
Nickname. The L1-BORDER-RB-GROUP TLV generated by an area border RBridge
<span class="bcp14">MUST</span> include all L1 Border RBridge Nicknames of the area. It's
<span class="bcp14">RECOMMENDED</span> that these k nicknames are ordered in ascending
order according to the 2-octet nickname considered as an unsigned integer.<a class="pilcrow" href="#section-5.2-3.6">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-5.2-4">
   When an L1 area is partitioned <span>[<a class="xref" href="#RFC8243">RFC8243</a>]</span>,
   border RBridges will re-discover each other in both L1 and L2 through
   exchanging LSPs. In L2, the set of border RBridge nicknames for this
   splitting area will change. Border RBridges that detect such a change
   <span class="bcp14">MUST</span> flush the reachability information associated to any
   RBridge nickname from this changing set.<a class="pilcrow" href="#section-5.2-4">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-6">
<section id="section-6">
      <h2 id="name-one-border-rbridge-connects">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-one-border-rbridge-connects">One Border RBridge Connects Multiple Areas</a>
      </h2>
<p id="section-6-1">
   It's possible that one border RBridge (say, RB1) connects multiple L1
   areas. RB1 <span class="bcp14">SHOULD</span> use a single area nickname for itself for
   all these areas to minimize nickname consumption and the number of
   nicknames being advertised in L2; however, such a border RBridge might have
   to hold multiple nicknames -- for example, it might be the root of multiple
   L1 or multiple L2 distribution trees.<a class="pilcrow" href="#section-6-1">¶</a></p>
<p id="section-6-2">
   Nicknames used within one of these L1 areas can be reused within other
   areas. It's important that packets destined to those duplicated nicknames
   are sent to the right area. Since these areas are connected to form a layer
   2 network, duplicated {MAC, Data Label} across these areas <span class="bcp14">SHOULD NOT</span> occur (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6325#section-4.2.6">Section 4.2.6</a> of [<a class="xref" href="#RFC6325">RFC6325</a>]</span> for tie breaking rules). Now suppose
   a TRILL Data packet arrives at the area border nickname of RB1. For a
   unicast packet, RB1 can look up the {MAC, Data Label} entry in its MAC
   table to identify the right destination area (i.e., the outgoing interface)
   and the egress RBridge's nickname.  For a multicast packet for each
   attached L1 area: either RB1 is not the DBRB and RB1 will not transition
   the packet, or RB1 is the DBRB. If RB1 is the DBRB, RB1 follows the
   following rules:<a class="pilcrow" href="#section-6-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-3.1">If this packet originated from an area out of the connected areas,
      RB1 replicates this packet and floods it on the proper Level 1
      trees of all the areas in which it acts as the DBRB.<a class="pilcrow" href="#section-6-3.1">¶</a>
</li>
        <li class="normal" id="section-6-3.2">If the packet originated from one of the connected areas, RB1
      replicates the packet it receives from the Level 1 tree and floods
      it on other proper Level 1 trees of all the areas in which it acts
      as the DBRB except the originating area (i.e., the area connected
      to the incoming interface). RB1 might also receive the replication
      of the packet from the Level 2 tree. This replication <span class="bcp14">MUST</span> be
      dropped by RB1. It recognizes such packets by their ingress
      nickname being the nickname of one of the border RBridges of an L1
      area for which the receiving border RBridge is DBRB.<a class="pilcrow" href="#section-6-3.2">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sect-7">
<section id="section-7">
      <h2 id="name-e-l1fs-e-l2fs-backwards-com">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-e-l1fs-e-l2fs-backwards-com">E-L1FS/E-L2FS Backwards Compatibility</a>
      </h2>
<p id="section-7-1">
   All Level 2 RBridges <span class="bcp14">MUST</span> support E-L2FS <span>[<a class="xref" href="#RFC7356">RFC7356</a>]</span> <span>[<a class="xref" href="#RFC7780">RFC7780</a>]</span>. The Extended TLVs defined in <a class="xref" href="#sect-5">Section 5</a> are to be used in Extended Level 1/2 Flooding Scope
   (E-L1FS/E-L2FS) Protocol Data Units (PDUs). Area border RBridges
   <span class="bcp14">MUST</span> support both E-L1FS and E-L2FS. RBridges that do not
   support both E-L1FS or E-L2FS cannot serve as area border RBridges but they
   can appear in an L1 area acting as non-area-border RBridges.<a class="pilcrow" href="#section-7-1">¶</a></p>
</section>
</div>
<div id="sect-8">
<section id="section-8">
      <h2 id="name-manageability-consideration">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-manageability-consideration">Manageability Considerations</a>
      </h2>
<p id="section-8-1">
   If an L1 Border RBridge Nickname is configured at an RBridge and that
   RBridge has both L1 and L2 adjacencies, the multilevel feature as specified
   in this document is turned on for that RBridge and normally uses an L2
   nickname in both L1 and L2 although, as provided below, such an RBridge may
   have to fall back to multilevel unique nickname behavior <span>[<a class="xref" href="#RFC8397">RFC8397</a>]</span>, in which case it uses this L1 nickname.
   In contrast, unique nickname multilevel as specified in <span>[<a class="xref" href="#RFC8397">RFC8397</a>]</span> is enabled by the presence of L1 and L2
   adjacencies without an L1 Border RBridge Nickname being configured.
   RBridges supporting only unique nickname multilevel do not support the
   configuration of an L2 Border RBridge Nickname.  RBridges supporting only
   the single-level TRILL base protocol specified in <span>[<a class="xref" href="#RFC6325">RFC6325</a>]</span> do not support L2 adjacencies.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2">
   RBridges that support and are configured to use single nickname multilevel
   as specified in this document <span class="bcp14">MUST</span> support unique nickname
   multilevel <span>[<a class="xref" href="#RFC8397">RFC8397</a>]</span>.  If there are
   multiple border RBridges between an L1 area and L2, and one or more of them
   only support or are only configured for unique nickname multilevel <span>[<a class="xref" href="#RFC8397">RFC8397</a>]</span>, any of these border RBridges that are
   configured to use single nickname multilevel <span class="bcp14">MUST</span> fall back
   to behaving as a unique nickname border RBridge for that L1 area. Because
   overlapping sets of RBridges may be the border RBridges for different L1
   areas, an RBridge supporting single nickname <span class="bcp14">MUST</span> be able to
   simultaneously support single nickname for some of its L1 areas and unique
   nickname for others. For example, RB1 and RB2 might be border RBridges for
   L1 area A1 using single nickname while RB2 and RB3 are border RBridges for
   area A2. If RB3 only supports unique nicknames, then RB2 must fall back to
   unique nickname for area A2 but continue to support single nickname for
   area A1. Operators <span class="bcp14">SHOULD</span> be notified when this fallback
   occurs. The presence of border RBridges using unique nickname multilevel
   can be detected because they advertise in L1 the blocks of nicknames
   available within that L1 area.<a class="pilcrow" href="#section-8-2">¶</a></p>
<p id="section-8-3">
   In both the unique nickname approach specified in <span>[<a class="xref" href="#RFC8397">RFC8397</a>]</span> and the single nickname aggregated approach specified in
   this document, an RBridge that has L1 and L2 adjacencies uses the same
   nickname in L1 and L2.  If an RBridge is configured with an L1 Border
   RBridge Nickname for any a Level 1 area, it uses this nickname across the
   Level 2 area. This L1 Border RBridge Nickname cannot be used in any other
   Level 1 area except other Level 1 areas for which the same RBridge is a
   border RBridge with this L1 Border RBridge Nickname configured.<a class="pilcrow" href="#section-8-3">¶</a></p>
<p id="section-8-4">
   In addition to the manageability considerations specified above, the
   manageability specifications in <span>[<a class="xref" href="#RFC6325">RFC6325</a>]</span>
   still apply.<a class="pilcrow" href="#section-8-4">¶</a></p>
<p id="section-8-5">
   Border RBridges replace ingress and/or egress nickname when a TRILL Data
   packet traverses a TRILL L2 area. A TRILL Operations, Administration, and
   Maintenance (OAM) message will be forwarded through the multilevel single
   nickname TRILL campus using a MAC address belonging to the destination
   RBridge <span>[<a class="xref" href="#RFC7455">RFC7455</a>]</span>.<a class="pilcrow" href="#section-8-5">¶</a></p>
</section>
</div>
<div id="sect-9">
<section id="section-9">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-9-1">
   For general TRILL Security Considerations, see <span>[<a class="xref" href="#RFC6325">RFC6325</a>]</span>.<a class="pilcrow" href="#section-9-1">¶</a></p>
<p id="section-9-2">
   The newly defined TRILL APPsub-TLVs in <a class="xref" href="#sect-5">Section 5</a> are transported in IS-IS PDUs whose authenticity can be
   enforced using regular IS-IS security mechanism <span>[<a class="xref" href="#IS-IS">IS-IS</a>]</span>
        <span>[<a class="xref" href="#RFC5310">RFC5310</a>]</span>. Malicious devices may also fake
   the APPsub-TLVs to attract TRILL Data packets, interfere with multilevel
   TRILL operation, induce excessive state in TRILL switches (or in any
   bridges that may be part of the TRILL campus), etc.  For this reason,
   RBridges <span class="bcp14">SHOULD</span> be configured to use the IS-IS
   Authentication TLV (10) in their IS-IS PDUs so that IS-IS security <span>[<a class="xref" href="#RFC5310">RFC5310</a>]</span> can be used to authenticate those PDUs
   and discard them if they are forged.<a class="pilcrow" href="#section-9-2">¶</a></p>
<p id="section-9-3">
   Using a variation of aggregated nicknames, and the resulting possible
   duplication of nicknames between areas, increases the possibility of a
   TRILL Data packet being delivered to the wrong egress RBridge if areas are
   unexpectedly merged as compared with a scheme where all nicknames in the
   TRILL campus are, except as a transient condition, unique such as the
   scheme in <span>[<a class="xref" href="#RFC8397">RFC8397</a>]</span>. However, in many
   cases, the data would be discarded at that egress RBridge because it would
   not match a known end station Data Label / MAC address.<a class="pilcrow" href="#section-9-3">¶</a></p>
</section>
</div>
<div id="sect-10">
<section id="section-10">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-10-1">
   IANA has allocated two new types under the TRILL GENINFO TLV
   <span>[<a class="xref" href="#RFC7357">RFC7357</a>]</span> from the range allocated by
   Standards Action <span>[<a class="xref" href="#RFC8126">RFC8126</a>]</span> for the TRILL APPsub-TLVs defined in <a class="xref" href="#sect-5">Section 5</a>. The following entries have been added to the "TRILL
   APPsub-TLV Types under IS-IS TLV 251 Application Identifier 1" registry on
   the TRILL Parameters IANA web page.<a class="pilcrow" href="#section-10-1">¶</a></p>
<div id="IANA">
<table class="center" id="table-1">
        <caption><a class="selfRef" href="#table-1">Table 1</a></caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Type</th>
            <th class="text-left" colspan="1" rowspan="1">Name</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">256</td>
            <td class="text-left" colspan="1" rowspan="1">L1-BORDER-RBRIDGE</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9183</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">257</td>
            <td class="text-left" colspan="1" rowspan="1">L1-BORDER-RB-GROUP</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9183</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<section id="section-11">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-11">11. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-11.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-11.1">11.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6325">[RFC6325]</dt>
        <dd>
<span class="refAuthor">Perlman, R.</span>, <span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Dutt, D.</span>, <span class="refAuthor">Gai, S.</span>, and <span class="refAuthor">A. Ghanwani</span>, <span class="refTitle">"Routing Bridges (RBridges): Base Protocol Specification"</span>, <span class="seriesInfo">RFC 6325</span>, <span class="seriesInfo">DOI 10.17487/RFC6325</span>, <time class="refDate" datetime="2011-07">July 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6325">https://www.rfc-editor.org/info/rfc6325</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7356">[RFC7356]</dt>
        <dd>
<span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Previdi, S.</span>, and <span class="refAuthor">Y. Yang</span>, <span class="refTitle">"IS-IS Flooding Scope Link State PDUs (LSPs)"</span>, <span class="seriesInfo">RFC 7356</span>, <span class="seriesInfo">DOI 10.17487/RFC7356</span>, <time class="refDate" datetime="2014-09">September 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7356">https://www.rfc-editor.org/info/rfc7356</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7357">[RFC7357]</dt>
        <dd>
<span class="refAuthor">Zhai, H.</span>, <span class="refAuthor">Hu, F.</span>, <span class="refAuthor">Perlman, R.</span>, <span class="refAuthor">Eastlake 3rd, D.</span>, and <span class="refAuthor">O. Stokes</span>, <span class="refTitle">"Transparent Interconnection of Lots of Links (TRILL): End Station Address Distribution Information (ESADI) Protocol"</span>, <span class="seriesInfo">RFC 7357</span>, <span class="seriesInfo">DOI 10.17487/RFC7357</span>, <time class="refDate" datetime="2014-09">September 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7357">https://www.rfc-editor.org/info/rfc7357</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7455">[RFC7455]</dt>
        <dd>
<span class="refAuthor">Senevirathne, T.</span>, <span class="refAuthor">Finn, N.</span>, <span class="refAuthor">Salam, S.</span>, <span class="refAuthor">Kumar, D.</span>, <span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Aldrin, S.</span>, and <span class="refAuthor">Y. Li</span>, <span class="refTitle">"Transparent Interconnection of Lots of Links (TRILL): Fault Management"</span>, <span class="seriesInfo">RFC 7455</span>, <span class="seriesInfo">DOI 10.17487/RFC7455</span>, <time class="refDate" datetime="2015-03">March 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7455">https://www.rfc-editor.org/info/rfc7455</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7780">[RFC7780]</dt>
        <dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Zhang, M.</span>, <span class="refAuthor">Perlman, R.</span>, <span class="refAuthor">Banerjee, A.</span>, <span class="refAuthor">Ghanwani, A.</span>, and <span class="refAuthor">S. Gupta</span>, <span class="refTitle">"Transparent Interconnection of Lots of Links (TRILL): Clarifications, Corrections, and Updates"</span>, <span class="seriesInfo">RFC 7780</span>, <span class="seriesInfo">DOI 10.17487/RFC7780</span>, <time class="refDate" datetime="2016-02">February 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7780">https://www.rfc-editor.org/info/rfc7780</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time class="refDate" datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8397">[RFC8397]</dt>
      <dd>
<span class="refAuthor">Zhang, M.</span>, <span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Perlman, R.</span>, <span class="refAuthor">Zhai, H.</span>, and <span class="refAuthor">D. Liu</span>, <span class="refTitle">"Transparent Interconnection of Lots of Links (TRILL) Multilevel Using Unique Nicknames"</span>, <span class="seriesInfo">RFC 8397</span>, <span class="seriesInfo">DOI 10.17487/RFC8397</span>, <time class="refDate" datetime="2018-05">May 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8397">https://www.rfc-editor.org/info/rfc8397</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-11.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-11.2">11.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="IS-IS">[IS-IS]</dt>
        <dd>
<span class="refAuthor">International Organization for Standardization</span>, <span class="refTitle">"Information technology -- Telecommunications and information exchange between systems -- Intermediate System to Intermediate System intra-domain routeing information exchange protocol for use in conjunction with the protocol for providing the connectionless-mode network service (ISO 8473)"</span>, <span class="refContent">ISO 8473</span>, <span class="refContent">ISO/IEC 10589:2002</span>, <span class="refContent">Second Edition</span>, <time class="refDate" datetime="2002-11">November 2002</time>. </dd>
<dd class="break"></dd>
<dt id="RFC5310">[RFC5310]</dt>
        <dd>
<span class="refAuthor">Bhatia, M.</span>, <span class="refAuthor">Manral, V.</span>, <span class="refAuthor">Li, T.</span>, <span class="refAuthor">Atkinson, R.</span>, <span class="refAuthor">White, R.</span>, and <span class="refAuthor">M. Fanto</span>, <span class="refTitle">"IS-IS Generic Cryptographic Authentication"</span>, <span class="seriesInfo">RFC 5310</span>, <span class="seriesInfo">DOI 10.17487/RFC5310</span>, <time class="refDate" datetime="2009-02">February 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5310">https://www.rfc-editor.org/info/rfc5310</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8243">[RFC8243]</dt>
      <dd>
<span class="refAuthor">Perlman, R.</span>, <span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Zhang, M.</span>, <span class="refAuthor">Ghanwani, A.</span>, and <span class="refAuthor">H. Zhai</span>, <span class="refTitle">"Alternatives for Multilevel Transparent Interconnection of Lots of Links (TRILL)"</span>, <span class="seriesInfo">RFC 8243</span>, <span class="seriesInfo">DOI 10.17487/RFC8243</span>, <time class="refDate" datetime="2017-09">September 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8243">https://www.rfc-editor.org/info/rfc8243</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="sect-a">
<section id="appendix-A">
      <h2 id="name-level-transition-clarificat">
<a class="section-number selfRef" href="#appendix-A">Appendix A. </a><a class="section-name selfRef" href="#name-level-transition-clarificat">Level Transition Clarification</a>
      </h2>
<p id="appendix-A-1">
   It's possible that an L1 RBridge is only reachable from a non-DBRB
   border RBridge. If this non-DBRB RBridge refrains from Level
   transition, the question is, how can a multicast packet reach this L1
   RBridge? The answer is, it will be reached after the DBRB performs
   the Level transition and floods the packet using an L1 distribution
   tree.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<p id="appendix-A-2">
   Take the following figure as an example. RB77 is reachable from the
   border RBridge RB30 while RB3 is the DBRB. RB3 transitions the
   multicast packet into L1 and floods the packet on the distribution
   tree rooted from RB3. This packet is finally flooded to RB77 via
   RB30.<a class="pilcrow" href="#appendix-A-2">¶</a></p>
<div class="alignCenter art-text artwork" id="appendix-A-3">
<pre>       Area{3,30}
     +--------------+          (root) RB3 o
     |              |                      \
-RB3 |              |                       o RB30
  |  |              |                      /
-RB30-RB77          |                RB77 o
     +--------------+

     Example Topology               L1 Tree
</pre><a class="pilcrow" href="#appendix-A-3">¶</a>
</div>
<p id="appendix-A-4">
   In the above example, the multicast packet is forwarded along a non-optimal
   path. A possible improvement is to have RB3 configured not to belong to
   this area. In this way, RB30 will surely act as the DBRB to do the Level
   transition.<a class="pilcrow" href="#appendix-A-4">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Mingui Zhang</span></div>
<div class="left" dir="auto"><span class="org">Independent</span></div>
<div class="left" dir="auto"><span class="locality">Beijing</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:zhangmingui@qq.com">zhangmingui@qq.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Donald E. Eastlake, 3rd</span></div>
<div class="left" dir="auto"><span class="org">Futurewei Technologies</span></div>
<div class="left" dir="auto"><span class="street-address">2386 Panoramic Circle</span></div>
<div class="left" dir="auto">
<span class="locality">Apopka</span>, <span class="region">FL</span> <span class="postal-code">32703</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="tel">
<span>Phone:</span>
<a class="tel" href="tel:+1-508-333-2270">+1-508-333-2270</a>
</div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:d3e3e3@gmail.com">d3e3e3@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Radia Perlman</span></div>
<div class="left" dir="auto"><span class="org">EMC</span></div>
<div class="left" dir="auto"><span class="street-address">2010 256th Avenue NE, #200</span></div>
<div class="left" dir="auto">
<span class="locality">Bellevue</span>, <span class="region">WA</span> <span class="postal-code">98007</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:radia@alum.mit.edu">radia@alum.mit.edu</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Margaret Cullen</span></div>
<div class="left" dir="auto"><span class="org">Painless Security</span></div>
<div class="left" dir="auto"><span class="street-address">356 Abbott Street</span></div>
<div class="left" dir="auto">
<span class="locality">North Andover</span>, <span class="region">MA</span> <span class="postal-code">01845</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="tel">
<span>Phone:</span>
<a class="tel" href="tel:+1-781-405-7464">+1-781-405-7464</a>
</div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:margaret@painless-security.com">margaret@painless-security.com</a>
</div>
<div class="url">
<span>URI:</span>
<a class="url" href="https://www.painless-security.com">https://www.painless-security.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Hongjun Zhai</span></div>
<div class="left" dir="auto"><span class="org">Jinling Institute of Technology</span></div>
<div class="left" dir="auto"><span class="street-address">99 Hongjing Avenue, Jiangning District</span></div>
<div class="left" dir="auto"><span class="locality">Nanjing</span></div>
<div class="left" dir="auto">
<span class="region">Jiangsu</span>, <span class="postal-code">211169</span>
</div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:honjun.zhai@tom.com">honjun.zhai@tom.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>