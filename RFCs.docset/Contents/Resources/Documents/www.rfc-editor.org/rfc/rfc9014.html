<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9014: Interconnect Solution for Ethernet VPN (EVPN) Overlay Networks</title>
<meta content="Jorge Rabadan" name="author"/>
<meta content="Senthil Sathappan" name="author"/>
<meta content="Wim Henderickx" name="author"/>
<meta content="Ali Sajassi" name="author"/>
<meta content="John Drake" name="author"/>
<meta content="
       
   This document describes how Network Virtualization Overlays (NVOs) can
   be connected to a Wide Area Network (WAN) in order to extend the
   Layer 2 connectivity required for some tenants. The solution analyzes
   the interaction between NVO networks running Ethernet Virtual Private
   Networks (EVPNs) and other Layer 2 VPN (L2VPN) technologies used in the WAN, such as
   Virtual Private LAN Services (VPLSs), VPLS extensions for Provider
   Backbone Bridging (PBB-VPLS), EVPN, or PBB-EVPN. It also describes how
   the existing technical specifications apply to the interconnection
   and extends the EVPN procedures needed in some cases. In particular,
   this document describes how EVPN routes are processed on Gateways
   (GWs) that interconnect EVPN-Overlay and EVPN-MPLS networks, as well
   as the Interconnect Ethernet Segment (I-ES), to provide multihoming. This
   document also describes the use of the Unknown MAC Route (UMR) to avoid issues of a Media Access Control (MAC) scale on Data Center Network Virtualization Edge (NVE) devices. 
    " name="description"/>
<meta content="xml2rfc 3.8.0" name="generator"/>
<meta content="9014" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.8.0
    Python 3.6.10
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.3.5
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.19.0
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.3.1
    requests 2.22.0
    setuptools 40.6.2
    six 1.14.0
    WeasyPrint 51
-->
<link href="rfc9014.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9014" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-bess-dci-evpn-overlay-10" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9014</td>
<td class="center">Interconnect for EVPN-Overlays</td>
<td class="right">May 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Rabadan, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9014">9014</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2021-05">May 2021</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">J. Rabadan, <span class="editor">Ed.</span>
</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">S. Sathappan</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">W. Henderickx</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">A. Sajassi</div>
<div class="org">Cisco</div>
</div>
<div class="author">
      <div class="author-name">J. Drake</div>
<div class="org">Juniper</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9014</h1>
<h1 id="title">Interconnect Solution for Ethernet VPN (EVPN) Overlay Networks</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
   This document describes how Network Virtualization Overlays (NVOs) can
   be connected to a Wide Area Network (WAN) in order to extend the
   Layer 2 connectivity required for some tenants. The solution analyzes
   the interaction between NVO networks running Ethernet Virtual Private
   Networks (EVPNs) and other Layer 2 VPN (L2VPN) technologies used in the WAN, such as
   Virtual Private LAN Services (VPLSs), VPLS extensions for Provider
   Backbone Bridging (PBB-VPLS), EVPN, or PBB-EVPN. It also describes how
   the existing technical specifications apply to the interconnection
   and extends the EVPN procedures needed in some cases. In particular,
   this document describes how EVPN routes are processed on Gateways
   (GWs) that interconnect EVPN-Overlay and EVPN-MPLS networks, as well
   as the Interconnect Ethernet Segment (I-ES), to provide multihoming. This
   document also describes the use of the Unknown MAC Route (UMR) to avoid issues of a Media Access Control (MAC) scale on Data Center Network Virtualization Edge (NVE) devices.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9014">https://www.rfc-editor.org/info/rfc9014</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-conventions-and-terminology">Conventions and Terminology</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-decoupled-interconnect-solu">Decoupled Interconnect Solution for EVPN-Overlay Networks</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.3.2.1">
                <p class="keepWithNext" id="section-toc.1-1.3.2.1.1"><a class="xref" href="#section-3.1">3.1</a>.  <a class="xref" href="#name-interconnect-requirements">Interconnect Requirements</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="xref" href="#section-3.2">3.2</a>.  <a class="xref" href="#name-vlan-based-handoff">VLAN-Based Handoff</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="xref" href="#section-3.3">3.3</a>.  <a class="xref" href="#name-pw-based-handoff">PW-Based Handoff</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a class="xref" href="#section-3.4">3.4</a>.  <a class="xref" href="#name-multihoming-solution-on-the">Multihoming Solution on the GWs</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a class="xref" href="#section-3.5">3.5</a>.  <a class="xref" href="#name-gateway-optimizations">Gateway Optimizations</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.3.2.5.2.1">
                    <p id="section-toc.1-1.3.2.5.2.1.1"><a class="xref" href="#section-3.5.1">3.5.1</a>.  <a class="xref" href="#name-mac-address-advertisement-c">MAC Address Advertisement Control</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.5.2.2">
                    <p id="section-toc.1-1.3.2.5.2.2.1"><a class="xref" href="#section-3.5.2">3.5.2</a>.  <a class="xref" href="#name-arp-nd-flooding-control">ARP/ND Flooding Control</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.3.2.5.2.3">
                    <p id="section-toc.1-1.3.2.5.2.3.1"><a class="xref" href="#section-3.5.3">3.5.3</a>.  <a class="xref" href="#name-handling-failures-between-g">Handling Failures between GW and WAN Edge Routers</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-integrated-interconnect-sol">Integrated Interconnect Solution for EVPN-Overlay Networks</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-interconnect-requirements-2">Interconnect Requirements</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-vpls-interconnect-for-evpn-">VPLS Interconnect for EVPN-Overlay Networks</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a class="xref" href="#section-4.2.1">4.2.1</a>.  <a class="xref" href="#name-control-data-plane-setup-pr">Control/Data Plane Setup Procedures on the GWs</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a class="xref" href="#section-4.2.2">4.2.2</a>.  <a class="xref" href="#name-multihoming-procedures-on-t">Multihoming Procedures on the GWs</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="xref" href="#section-4.3">4.3</a>.  <a class="xref" href="#name-pbb-vpls-interconnect-for-e">PBB-VPLS Interconnect for EVPN-Overlay Networks</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a class="xref" href="#section-4.3.1">4.3.1</a>.  <a class="xref" href="#name-control-data-plane-setup-pro">Control/Data Plane Setup Procedures on the GWs</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a class="xref" href="#section-4.3.2">4.3.2</a>.  <a class="xref" href="#name-multihoming-procedures-on-th">Multihoming Procedures on the GWs</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a class="xref" href="#section-4.4">4.4</a>.  <a class="xref" href="#name-evpn-mpls-interconnect-for-">EVPN-MPLS Interconnect for EVPN-Overlay Networks</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4.2.1">
                    <p id="section-toc.1-1.4.2.4.2.1.1"><a class="xref" href="#section-4.4.1">4.4.1</a>.  <a class="xref" href="#name-control-plane-setup-procedu">Control plane Setup Procedures on the GWs</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4.2.2">
                    <p id="section-toc.1-1.4.2.4.2.2.1"><a class="xref" href="#section-4.4.2">4.4.2</a>.  <a class="xref" href="#name-data-plane-setup-procedures">Data Plane Setup Procedures on the GWs</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4.2.3">
                    <p id="section-toc.1-1.4.2.4.2.3.1"><a class="xref" href="#section-4.4.3">4.4.3</a>.  <a class="xref" href="#name-multihoming-procedure-exten">Multihoming Procedure Extensions on the GWs</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4.2.4">
                    <p id="section-toc.1-1.4.2.4.2.4.1"><a class="xref" href="#section-4.4.4">4.4.4</a>.  <a class="xref" href="#name-impact-on-mac-mobility-proc">Impact on MAC Mobility Procedures</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4.2.5">
                    <p id="section-toc.1-1.4.2.4.2.5.1"><a class="xref" href="#section-4.4.5">4.4.5</a>.  <a class="xref" href="#name-gateway-optimizations-2">Gateway Optimizations</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4.2.6">
                    <p id="section-toc.1-1.4.2.4.2.6.1"><a class="xref" href="#section-4.4.6">4.4.6</a>.  <a class="xref" href="#name-benefits-of-the-evpn-mpls-i">Benefits of the EVPN-MPLS Interconnect Solution</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a class="xref" href="#section-4.5">4.5</a>.  <a class="xref" href="#name-pbb-evpn-interconnect-for-e">PBB-EVPN Interconnect for EVPN-Overlay Networks</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.5.2.1">
                    <p id="section-toc.1-1.4.2.5.2.1.1"><a class="xref" href="#section-4.5.1">4.5.1</a>.  <a class="xref" href="#name-control-data-plane-setup-proc">Control/Data Plane Setup Procedures on the GWs</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.5.2.2">
                    <p id="section-toc.1-1.4.2.5.2.2.1"><a class="xref" href="#section-4.5.2">4.5.2</a>.  <a class="xref" href="#name-multihoming-procedures-on-the">Multihoming Procedures on the GWs</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.5.2.3">
                    <p id="section-toc.1-1.4.2.5.2.3.1"><a class="xref" href="#section-4.5.3">4.5.3</a>.  <a class="xref" href="#name-impact-on-mac-mobility-proce">Impact on MAC Mobility Procedures</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.5.2.4">
                    <p id="section-toc.1-1.4.2.5.2.4.1"><a class="xref" href="#section-4.5.4">4.5.4</a>.  <a class="xref" href="#name-gateway-optimizations-3">Gateway Optimizations</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a class="xref" href="#section-4.6">4.6</a>.  <a class="xref" href="#name-evpn-vxlan-interconnect-for">EVPN-VXLAN Interconnect for EVPN-Overlay Networks</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.6.2.1">
                    <p id="section-toc.1-1.4.2.6.2.1.1"><a class="xref" href="#section-4.6.1">4.6.1</a>.  <a class="xref" href="#name-globally-unique-vnis-in-the">Globally Unique VNIs in the Interconnect Network</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.6.2.2">
                    <p id="section-toc.1-1.4.2.6.2.2.1"><a class="xref" href="#section-4.6.2">4.6.2</a>.  <a class="xref" href="#name-downstream-assigned-vnis-in">Downstream-Assigned VNIs in the Interconnect Network</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-references">References</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="xref" href="#section-7.1">7.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="xref" href="#section-7.2">7.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-appendix.a"></a><a class="xref" href="#name-acknowledgments">Acknowledgments</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-appendix.b"></a><a class="xref" href="#name-contributors">Contributors</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-appendix.c"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-2">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
   <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span> discusses the use of Ethernet Virtual Private
   Networks (EVPNs) <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> as the control plane for Network
   Virtualization Overlays (NVOs), where VXLAN <span>[<a class="xref" href="#RFC7348">RFC7348</a>]</span>, NVGRE <span>[<a class="xref" href="#RFC7637">RFC7637</a>]</span>, or
   MPLS over GRE <span>[<a class="xref" href="#RFC4023">RFC4023</a>]</span> can be used as
   possible data plane encapsulation options.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">
   While this model provides a scalable and efficient multitenant solution
   within the Data Center, it might not be easily extended to the Wide Area
   Network (WAN) in some cases, due to the requirements and existing deployed
   technologies. For instance, a Service Provider might have an already
   deployed Virtual Private LAN Service (VPLS) <span>[<a class="xref" href="#RFC4761">RFC4761</a>]</span> <span>[<a class="xref" href="#RFC4762">RFC4762</a>]</span>, VPLS
   extensions for Provider Backbone Bridging (PBB-VPLS) <span>[<a class="xref" href="#RFC7041">RFC7041</a>]</span>, EVPN
   <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>, or PBB-EVPN <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span> network that has to be used to
   interconnect
   Data Centers and WAN VPN users. A Gateway (GW) function is required in
   these cases. In fact, <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span> discusses two main Data Center
   Interconnect (DCI) solution groups: "DCI using GWs" and "DCI using ASBRs". This
   document specifies the solutions that correspond to the "DCI using GWs"
   group.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">
   It is assumed that the NVO GW and the WAN Edge functions
   can be decoupled into two separate systems or integrated into the same
   system. The former option will be referred to as "decoupled interconnect
   solution" throughout the document, whereas the latter one will be
   referred to as "integrated interconnect solution".<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">
   The specified procedures are local to the redundant GWs connecting a
   DC to the WAN. The document does not preclude any combination across
   different DCs for the same tenant. For instance, a "Decoupled"
   solution can be used in GW1 and GW2 (for DC1), and an "Integrated"
   solution can be used in GW3 and GW4 (for DC2).<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">
   While the Gateways and WAN Provider Edges (PEs) use existing specifications in some
   cases, the document also defines extensions that are specific to DCI.
   In particular, those extensions are:<a class="pilcrow" href="#section-1-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-6.1">The Interconnect Ethernet Segment (I-ES), an Ethernet Segment that
     can be associated to a set of pseudowires (PWs) or other tunnels. The I-ES defined in
     this document is not associated with a set of Ethernet links, as
     per <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>, but rather with a set of virtual tunnels (e.g., a
     set of PWs). This set of virtual tunnels is referred to as vES
     <span>[<a class="xref" href="#I-D.ietf-bess-evpn-virtual-eth-segment">VIRTUAL-ES</a>]</span>.<a class="pilcrow" href="#section-1-6.1">¶</a>
</li>
        <li class="normal" id="section-1-6.2">The use of the Unknown MAC Route (UMR) in a DCI scenario.<a class="pilcrow" href="#section-1-6.2">¶</a>
</li>
        <li class="normal" id="section-1-6.3">The processing of EVPN routes on Gateways with MAC-VRFs connecting
     EVPN-Overlay and EVPN-MPLS networks, or EVPN-Overlay and EVPN-Overlay
     networks.<a class="pilcrow" href="#section-1-6.3">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sect-1">
<section id="section-2">
      <h2 id="name-conventions-and-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-conventions-and-terminology">Conventions and Terminology</a>
      </h2>
<p id="section-2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-2">
        <dt id="section-2-2.1">AC:</dt>
        <dd id="section-2-2.2" style="margin-left: 1.5em"> Attachment Circuit<a class="pilcrow" href="#section-2-2.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.3">ARP:</dt>
        <dd id="section-2-2.4" style="margin-left: 1.5em">Address Resolution Protocol<a class="pilcrow" href="#section-2-2.4">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.5">BUM:</dt>
        <dd id="section-2-2.6" style="margin-left: 1.5em">Broadcast, Unknown Unicast and Multicast (traffic)<a class="pilcrow" href="#section-2-2.6">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.7">CE:</dt>
        <dd id="section-2-2.8" style="margin-left: 1.5em">Customer Equipment<a class="pilcrow" href="#section-2-2.8">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.9">CFM:</dt>
        <dd id="section-2-2.10" style="margin-left: 1.5em">Connectivity Fault Management<a class="pilcrow" href="#section-2-2.10">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.11">DC:</dt>
        <dd id="section-2-2.12" style="margin-left: 1.5em">Data Center<a class="pilcrow" href="#section-2-2.12">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.13">DCI:</dt>
        <dd id="section-2-2.14" style="margin-left: 1.5em">Data Center Interconnect<a class="pilcrow" href="#section-2-2.14">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.15">DF:</dt>
        <dd id="section-2-2.16" style="margin-left: 1.5em">Designated Forwarder<a class="pilcrow" href="#section-2-2.16">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.17">EVI:</dt>
        <dd id="section-2-2.18" style="margin-left: 1.5em">EVPN Instance<a class="pilcrow" href="#section-2-2.18">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.19">EVPN:</dt>
        <dd id="section-2-2.20" style="margin-left: 1.5em">Ethernet Virtual Private Network, as in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span><a class="pilcrow" href="#section-2-2.20">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.21">EVPN Tunnel binding:</dt>
        <dd id="section-2-2.22" style="margin-left: 1.5em">refers to a tunnel to a remote PE/NVE
      for a given EVI. Ethernet packets in these bindings are encapsulated with
   the Overlay or MPLS encapsulation and the EVPN label at the bottom of
   the stack.<a class="pilcrow" href="#section-2-2.22">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.23">ES:</dt>
        <dd id="section-2-2.24" style="margin-left: 1.5em">Ethernet Segment<a class="pilcrow" href="#section-2-2.24">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.25">ESI:</dt>
        <dd id="section-2-2.26" style="margin-left: 1.5em">Ethernet Segment Identifier<a class="pilcrow" href="#section-2-2.26">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.27">GW:</dt>
        <dd id="section-2-2.28" style="margin-left: 1.5em">Gateway or Data Center Gateway<a class="pilcrow" href="#section-2-2.28">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.29">I-ES and I-ESI:</dt>
        <dd id="section-2-2.30" style="margin-left: 1.5em">Interconnect Ethernet Segment and
      Interconnect Ethernet Segment Identifier. An I-ES is defined on the GWs
      for multihoming to/from the WAN.<a class="pilcrow" href="#section-2-2.30">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.31">MAC</dt>
        <dd id="section-2-2.32" style="margin-left: 1.5em">Media Access Control<a class="pilcrow" href="#section-2-2.32">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.33">MAC-VRF:</dt>
        <dd id="section-2-2.34" style="margin-left: 1.5em">refers to an EVI instance in a particular node<a class="pilcrow" href="#section-2-2.34">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.35">MP2P and LSM tunnels:</dt>
        <dd id="section-2-2.36" style="margin-left: 1.5em">refer to multipoint-to-point and label
      switched multicast tunnels<a class="pilcrow" href="#section-2-2.36">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.37">ND:</dt>
        <dd id="section-2-2.38" style="margin-left: 1.5em">Neighbor Discovery<a class="pilcrow" href="#section-2-2.38">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.39">NDF:</dt>
        <dd id="section-2-2.40" style="margin-left: 1.5em">Non-Designated Forwarder<a class="pilcrow" href="#section-2-2.40">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.41">NVE:</dt>
        <dd id="section-2-2.42" style="margin-left: 1.5em">Network Virtualization Edge<a class="pilcrow" href="#section-2-2.42">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.43">NVGRE:</dt>
        <dd id="section-2-2.44" style="margin-left: 1.5em">Network Virtualization using Generic Routing
      Encapsulation<a class="pilcrow" href="#section-2-2.44">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.45">NVO:</dt>
        <dd id="section-2-2.46" style="margin-left: 1.5em">Network Virtualization Overlay<a class="pilcrow" href="#section-2-2.46">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.47">OAM:</dt>
        <dd id="section-2-2.48" style="margin-left: 1.5em">Operations, Administration, and Maintenance<a class="pilcrow" href="#section-2-2.48">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.49">PBB:</dt>
        <dd id="section-2-2.50" style="margin-left: 1.5em">Provider Backbone Bridging<a class="pilcrow" href="#section-2-2.50">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.51">PE:</dt>
        <dd id="section-2-2.52" style="margin-left: 1.5em">Provider Edge<a class="pilcrow" href="#section-2-2.52">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.53">PW:</dt>
        <dd id="section-2-2.54" style="margin-left: 1.5em">Pseudowire<a class="pilcrow" href="#section-2-2.54">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.55">RD:</dt>
        <dd id="section-2-2.56" style="margin-left: 1.5em">Route Distinguisher<a class="pilcrow" href="#section-2-2.56">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.57">RR:</dt>
        <dd id="section-2-2.58" style="margin-left: 1.5em">Route Reflector<a class="pilcrow" href="#section-2-2.58">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.59">RT:</dt>
        <dd id="section-2-2.60" style="margin-left: 1.5em">Route Target<a class="pilcrow" href="#section-2-2.60">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.61">S/C-TAG:</dt>
        <dd id="section-2-2.62" style="margin-left: 1.5em">refers to a combination of Service Tag and Customer
      Tag in a 802.1Q frame<a class="pilcrow" href="#section-2-2.62">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.63">TOR:</dt>
        <dd id="section-2-2.64" style="margin-left: 1.5em">Top-Of-Rack<a class="pilcrow" href="#section-2-2.64">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.65">UMR:</dt>
        <dd id="section-2-2.66" style="margin-left: 1.5em">Unknown MAC Route<a class="pilcrow" href="#section-2-2.66">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.67">vES:</dt>
        <dd id="section-2-2.68" style="margin-left: 1.5em">virtual Ethernet Segment<a class="pilcrow" href="#section-2-2.68">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.69">VNI/VSID:</dt>
        <dd id="section-2-2.70" style="margin-left: 1.5em">refers to VXLAN/NVGRE virtual identifiers<a class="pilcrow" href="#section-2-2.70">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.71">VPLS:</dt>
        <dd id="section-2-2.72" style="margin-left: 1.5em">Virtual Private LAN Service<a class="pilcrow" href="#section-2-2.72">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.73">VSI:</dt>
        <dd id="section-2-2.74" style="margin-left: 1.5em">Virtual Switch Instance or VPLS instance in a
      particular PE<a class="pilcrow" href="#section-2-2.74">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.75">VXLAN:</dt>
        <dd id="section-2-2.76" style="margin-left: 1.5em">Virtual eXtensible LAN<a class="pilcrow" href="#section-2-2.76">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-decoupled-interconnect-solu">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-decoupled-interconnect-solu">Decoupled Interconnect Solution for EVPN-Overlay Networks</a>
      </h2>
<p id="section-3-1">
   This section describes the interconnect solution when the GW and WAN
   Edge functions are implemented in different systems. <a class="xref" href="#fig-1">Figure 1</a> depicts
   the reference model described in this section. Note that, although
   not shown in <a class="xref" href="#fig-1">Figure 1</a>, GWs may have local Attachment Circuits
      (ACs).<a class="pilcrow" href="#section-3-1">¶</a></p>
<span id="name-decoupled-interconnect-mode"></span><div id="fig-1">
<figure id="figure-1">
        <div class="artwork art-text alignLeft" id="section-3-2.1">
<pre>                                +--+
                                |CE|
                                +--+
                                  |
                               +----+
                          +----| PE |----+
        +---------+       |    +----+    |       +---------+
+----+  |        +---+  +----+        +----+  +---+        |  +----+
|NVE1|--|        |   |  |WAN |        |WAN |  |   |        |--|NVE3|
+----+  |        |GW1|--|Edge|        |Edge|--|GW3|        |  +----+
        |        +---+  +----+        +----+  +---+        |
        |  NVO-1   |      |     WAN      |      |   NVO-2  |
        |        +---+  +----+        +----+  +---+        |
        |        |   |  |WAN |        |WAN |  |   |        |
+----+  |        |GW2|--|Edge|        |Edge|--|GW4|        |  +----+
|NVE2|--|        +---+  +----+        +----+  +---+        |--|NVE4|
+----+  +---------+       |              |       +---------+  +----+
                          +--------------+

|&lt;-EVPN-Overlay--&gt;|&lt;-VLAN-&gt;|&lt;-WAN L2VPN-&gt;|&lt;--PW--&gt;|&lt;--EVPN-Overlay-&gt;|
                   handoff               handoff
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-decoupled-interconnect-mode">Decoupled Interconnect Model</a>
        </figcaption></figure>
</div>
<p id="section-3-3">
   The following section describes the interconnect requirements for
   this model.<a class="pilcrow" href="#section-3-3">¶</a></p>
<div id="sect-3.1">
<section id="section-3.1">
        <h3 id="name-interconnect-requirements">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-interconnect-requirements">Interconnect Requirements</a>
        </h3>
<p id="section-3.1-1">
   The decoupled interconnect architecture is intended to be deployed in
   networks where the EVPN-Overlay and WAN providers are different
   entities and a clear demarcation is needed. This solution solves the
   following requirements:<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.1">A simple connectivity handoff between the EVPN-Overlay network
     provider and the WAN provider so that QoS and security enforcement
     are easily accomplished.<a class="pilcrow" href="#section-3.1-2.1">¶</a>
</li>
          <li class="normal" id="section-3.1-2.2">Independence of the L2VPN technology deployed in
     the WAN.<a class="pilcrow" href="#section-3.1-2.2">¶</a>
</li>
          <li class="normal" id="section-3.1-2.3">Multihoming between GW and WAN Edge routers, including per-service
     load balancing. Per-flow load balancing is not a strong requirement,
     since a deterministic path per service is usually required for an
     easy QoS and security enforcement.<a class="pilcrow" href="#section-3.1-2.3">¶</a>
</li>
          <li class="normal" id="section-3.1-2.4">Support of Ethernet OAM and Connectivity Fault Management (CFM)
     <span>[<a class="xref" href="#IEEE.802.1AG">IEEE.802.1AG</a>]</span> <span>[<a class="xref" href="#Y.1731">Y.1731</a>]</span> functions between the GW and the WAN Edge router
     to detect individual AC failures.<a class="pilcrow" href="#section-3.1-2.4">¶</a>
</li>
          <li class="normal" id="section-3.1-2.5">
            <p id="section-3.1-2.5.1">Support for the following optimizations at the GW:<a class="pilcrow" href="#section-3.1-2.5.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.5.2.1">Flooding reduction of unknown unicast traffic sourced from the DC
        Network Virtualization Edge (NVE) devices.<a class="pilcrow" href="#section-3.1-2.5.2.1">¶</a>
</li>
              <li class="normal" id="section-3.1-2.5.2.2">Control of the WAN MAC addresses advertised to the DC.<a class="pilcrow" href="#section-3.1-2.5.2.2">¶</a>
</li>
              <li class="normal" id="section-3.1-2.5.2.3">Address Resolution Protocol (ARP) and Neighbor Discovery (ND)
        flooding control for the requests coming from the WAN.<a class="pilcrow" href="#section-3.1-2.5.2.3">¶</a>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
<div id="sect-3.2">
<section id="section-3.2">
        <h3 id="name-vlan-based-handoff">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-vlan-based-handoff">VLAN-Based Handoff</a>
        </h3>
<p id="section-3.2-1">
   In this option, the handoff between the GWs and the WAN Edge routers
   is based on VLANs <span>[<a class="xref" href="#IEEE.802.1Q">IEEE.802.1Q</a>]</span>. This
   is illustrated in <a class="xref" href="#fig-1">Figure 1</a>
   (between the GWs in NVO-1 and the WAN Edge routers). Each MAC-VRF in
   the GW is connected to a different VSI/MAC-VRF instance in the WAN
   Edge router by using a different C-TAG VLAN ID or a different
   combination of S/C-TAG VLAN IDs that matches at both sides.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<p id="section-3.2-2">
   This option provides the best possible demarcation between the DC and
   WAN providers, and it does not require control plane interaction
   between both providers. The disadvantage of this model is the
   provisioning overhead, since the service has to be mapped to a C-TAG
   or S/C-TAG VLAN ID combination at both GW and WAN Edge routers.<a class="pilcrow" href="#section-3.2-2">¶</a></p>
<p id="section-3.2-3">
   In this model, the GW acts as a regular Network Virtualization Edge
   (NVE) towards the DC. Its control plane, data plane procedures, and
   interactions are described in <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span>.<a class="pilcrow" href="#section-3.2-3">¶</a></p>
<p id="section-3.2-4">
   The WAN Edge router acts as a (PBB-)VPLS or (PBB-)EVPN PE with
   Attachment Circuits (ACs) to the GWs.

   Its functions are described in
   <span>[<a class="xref" href="#RFC4761">RFC4761</a>]</span>, <span>[<a class="xref" href="#RFC4762">RFC4762</a>]</span>, <span>[<a class="xref" href="#RFC6074">RFC6074</a>]</span>, <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>, and <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span>.<a class="pilcrow" href="#section-3.2-4">¶</a></p>
</section>
</div>
<div id="sect-3.3">
<section id="section-3.3">
        <h3 id="name-pw-based-handoff">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-pw-based-handoff">PW-Based Handoff</a>
        </h3>
<p id="section-3.3-1">
   If MPLS between the GW and the WAN Edge router is an option, a PW-based
   interconnect solution can be deployed. In this option, the handoff between
   both routers is based on FEC128-based PWs <span>[<a class="xref" href="#RFC4762">RFC4762</a>]</span> or FEC129-based PWs
   (for a greater level of network automation) <span>[<a class="xref" href="#RFC6074">RFC6074</a>]</span>. Note that this model
   still provides a clear demarcation between DC and WAN (since there
   is a single PW between each MAC-VRF and peer VSI), and security/QoS
   policies may be applied on a per-PW basis. This model provides better
   scalability than a C-TAG-based handoff and less provisioning overhead than
   a combined C/S-TAG handoff. The PW-based handoff interconnect is
   illustrated in <a class="xref" href="#fig-1">Figure 1</a> (between the NVO-2 GWs and the WAN Edge routers).<a class="pilcrow" href="#section-3.3-1">¶</a></p>
<p id="section-3.3-2">
   In this model, besides the usual MPLS procedures between GW and WAN
   Edge router <span>[<a class="xref" href="#RFC3031">RFC3031</a>]</span>, the GW <span class="bcp14">MUST</span> support an interworking function
   in each MAC-VRF that requires extension to the WAN:<a class="pilcrow" href="#section-3.3-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3-3.1">If a FEC128-based PW is used between the MAC-VRF (GW) and the VSI (WAN
     Edge), the corresponding Virtual Connection Identifier (VCID) <span class="bcp14">MUST</span> be provisioned on the MAC-VRF and
     match the VCID used in the peer VSI at the WAN Edge router.<a class="pilcrow" href="#section-3.3-3.1">¶</a>
</li>
          <li class="normal" id="section-3.3-3.2">If BGP Auto-discovery <span>[<a class="xref" href="#RFC6074">RFC6074</a>]</span> and FEC129-based PWs are used
     between the GW MAC-VRF and the WAN Edge VSI, the provisioning of
     the VPLS-ID <span class="bcp14">MUST</span> be supported on the MAC-VRF and <span class="bcp14">MUST</span> match the
     VPLS-ID used in the WAN Edge VSI.<a class="pilcrow" href="#section-3.3-3.2">¶</a>
</li>
        </ul>
<p id="section-3.3-4">
   If a PW-based handoff is used, the GW's AC (or point of attachment to
   the EVPN instance) uses a combination of a PW label and VLAN IDs. PWs
   are treated as service interfaces, defined in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>.<a class="pilcrow" href="#section-3.3-4">¶</a></p>
</section>
</div>
<div id="sect-3.4">
<section id="section-3.4">
        <h3 id="name-multihoming-solution-on-the">
<a class="section-number selfRef" href="#section-3.4">3.4. </a><a class="section-name selfRef" href="#name-multihoming-solution-on-the">Multihoming Solution on the GWs</a>
        </h3>
<p id="section-3.4-1">
   EVPN single-active multihoming -- i.e., per-service load-balancing
   multihoming -- is required in this type of interconnect.<a class="pilcrow" href="#section-3.4-1">¶</a></p>
<p id="section-3.4-2">

   The GWs will be provisioned with a unique ES for each WAN interconnect,
   and the handoff attachment circuits or PWs between the GW and the
   WAN Edge router will be assigned an ESI for each such ES. The ESI will be
   administratively configured on the GWs according to the procedures in
   <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>. This I-ES will be
   referred to as "I-ES" hereafter,
   and its identifier will be referred to as "I-ESI". Different ESI types are described in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>. The use of Type 0 for the I-ESI is <span class="bcp14">RECOMMENDED</span>
   in this document.<a class="pilcrow" href="#section-3.4-2">¶</a></p>
<p id="section-3.4-3">
   The solution (on the GWs) <span class="bcp14">MUST</span> follow the single-active multihoming
   procedures as described in <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span> for
   the provisioned I-ESI -- i.e., Ethernet A-D routes per ES and per EVI will be advertised to the DC
   NVEs for the multihoming functions, and ES routes will be advertised so that
   ES discovery and Designated Forwarder (DF) procedures can be followed. The
   MAC addresses learned (in the data plane) on the handoff links will be
   advertised with the I-ESI encoded in the ESI field.<a class="pilcrow" href="#section-3.4-3">¶</a></p>
</section>
</div>
<div id="sect-3.5">
<section id="section-3.5">
        <h3 id="name-gateway-optimizations">
<a class="section-number selfRef" href="#section-3.5">3.5. </a><a class="section-name selfRef" href="#name-gateway-optimizations">Gateway Optimizations</a>
        </h3>
<p id="section-3.5-1">
   The following GW features are optional and optimize the control plane
   and data plane in the DC.<a class="pilcrow" href="#section-3.5-1">¶</a></p>
<div id="sect-3.5.1">
<section id="section-3.5.1">
          <h4 id="name-mac-address-advertisement-c">
<a class="section-number selfRef" href="#section-3.5.1">3.5.1. </a><a class="section-name selfRef" href="#name-mac-address-advertisement-c">MAC Address Advertisement Control</a>
          </h4>
<p id="section-3.5.1-1">
   The use of EVPN in NVO networks brings a significant number of
   benefits, as described in <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span>. However, if multiple DCs
   are interconnected into a single EVI, each DC will have to import all
   of the MAC addresses from each of the other DCs.<a class="pilcrow" href="#section-3.5.1-1">¶</a></p>
<p id="section-3.5.1-2">
   Even if optimized BGP techniques like RT constraint <span>[<a class="xref" href="#RFC4684">RFC4684</a>]</span> are
   used, the number of MAC addresses to advertise or withdraw (in case
   of failure) by the GWs of a given DC could overwhelm the NVEs within
   that DC, particularly when the NVEs reside in the hypervisors.<a class="pilcrow" href="#section-3.5.1-2">¶</a></p>
<p id="section-3.5.1-3">
   The solution specified in this document uses the Unknown MAC Route (UMR)
   that is advertised into a given DC by each of the DC's GWs.  This route is
   defined in <span>[<a class="xref" href="#RFC7543">RFC7543</a>]</span> and is a regular EVPN MAC/IP Advertisement route in
   which the MAC Address Length is set to 48, the MAC address is set to 0, and
   the ESI field is set to the DC GW's I-ESI.<a class="pilcrow" href="#section-3.5.1-3">¶</a></p>
<p id="section-3.5.1-4">
   An NVE within that DC that understands and processes the UMR will send
   unknown unicast frames to one of the DC's GWs, which will then forward
   that packet to the correct egress PE. Note that, because the ESI is
   set to the DC GW's I-ESI, all-active multihoming can be applied to
   unknown unicast MAC addresses. An NVE that does not understand the
   Unknown MAC Route will handle unknown unicast as described in
   <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>.<a class="pilcrow" href="#section-3.5.1-4">¶</a></p>
<p id="section-3.5.1-5">
   This document proposes that local policy determine whether MAC
   addresses and/or the UMR are advertised into a given DC. As an
   example, when all the DC MAC addresses are learned in the
   control/management plane, it may be appropriate to advertise only the
   UMR. Advertising all the DC MAC addresses in the control/management
   plane is usually the case when the NVEs reside in hypervisors. Refer
   to <span>[<a class="xref" href="#RFC8365">RFC8365</a>], <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8365#section-7">Section 7</a></span>.<a class="pilcrow" href="#section-3.5.1-5">¶</a></p>
<p id="section-3.5.1-6">
   It is worth noting that the UMR usage in <span>[<a class="xref" href="#RFC7543">RFC7543</a>]</span> and the UMR usage in
   this document are different. In the former, a Virtual Spoke (V-spoke) does
   not necessarily learn all the MAC addresses pertaining to hosts in other
   V-spokes of the same network. The communication between two V-spokes is
   done through the Default MAC Gateway (DMG) until the V-spokes learn each other's MAC
   addresses. In this document, two leaf switches in the same DC are
   recommended for V-spokes to learn each other's MAC addresses for the same EVI. The
   leaf-to-leaf communication is always direct and does not go through
   the GW.<a class="pilcrow" href="#section-3.5.1-6">¶</a></p>
</section>
</div>
<div id="sect-3.5.2">
<section id="section-3.5.2">
          <h4 id="name-arp-nd-flooding-control">
<a class="section-number selfRef" href="#section-3.5.2">3.5.2. </a><a class="section-name selfRef" href="#name-arp-nd-flooding-control">ARP/ND Flooding Control</a>
          </h4>
<p id="section-3.5.2-1">
   Another optimization mechanism, naturally provided by EVPN in the
   GWs, is the Proxy ARP/ND function. The GWs should build a Proxy
   ARP/ND cache table, as per <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>. When
   the active GW receives an
   ARP/ND request/solicitation coming from the WAN, the GW does a Proxy
   ARP/ND table lookup and replies as long as the information is
   available in its table.<a class="pilcrow" href="#section-3.5.2-1">¶</a></p>
<p id="section-3.5.2-2">
   This mechanism is especially recommended on the GWs, since it
   protects the DC network from external ARP/ND-flooding storms.<a class="pilcrow" href="#section-3.5.2-2">¶</a></p>
</section>
</div>
<div id="sect-3.5.3">
<section id="section-3.5.3">
          <h4 id="name-handling-failures-between-g">
<a class="section-number selfRef" href="#section-3.5.3">3.5.3. </a><a class="section-name selfRef" href="#name-handling-failures-between-g">Handling Failures between GW and WAN Edge Routers</a>
          </h4>
<p id="section-3.5.3-1">
   Link/PE failures are handled on the GWs as specified in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>.
   The GW detecting the failure will withdraw the EVPN routes, as per
   <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>.<a class="pilcrow" href="#section-3.5.3-1">¶</a></p>
<p id="section-3.5.3-2">
   Individual AC/PW failures may be detected by OAM mechanisms. For
   instance:<a class="pilcrow" href="#section-3.5.3-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.5.3-3.1">If the interconnect solution is based on a VLAN handoff, Ethernet-CFM
     <span>[<a class="xref" href="#IEEE.802.1AG">IEEE.802.1AG</a>]</span> <span>[<a class="xref" href="#Y.1731">Y.1731</a>]</span> may be used to detect individual AC failures on both
     the GW and WAN Edge router. An individual AC failure will trigger the
     withdrawal of the corresponding A-D per EVI route as well as the MACs
     learned on that AC.<a class="pilcrow" href="#section-3.5.3-3.1">¶</a>
</li>
            <li class="normal" id="section-3.5.3-3.2">If the interconnect solution is based on a PW handoff, the Label
     Distribution Protocol (LDP) PW Status bits TLV <span>[<a class="xref" href="#RFC6870">RFC6870</a>]</span> may be
     used to detect individual PW failures on both the GW and WAN Edge
     router.<a class="pilcrow" href="#section-3.5.3-3.2">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-4">
<section id="section-4">
      <h2 id="name-integrated-interconnect-sol">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-integrated-interconnect-sol">Integrated Interconnect Solution for EVPN-Overlay Networks</a>
      </h2>
<p id="section-4-1">
   When the DC and the WAN are operated by the same administrative
   entity, the Service Provider can decide to integrate the GW and WAN
   Edge PE functions in the same router for obvious reasons to save as relates to Capital Expenditure (CAPEX) and Operating Expenses (OPEX). This is illustrated in <a class="xref" href="#fig-2">Figure 2</a>. Note that this
   model
   does not provide an explicit demarcation link between DC and WAN
   anymore. Although not shown in <a class="xref" href="#fig-2">Figure 2</a>, note that the GWs may have
   local ACs.<a class="pilcrow" href="#section-4-1">¶</a></p>
<span id="name-integrated-interconnect-mod"></span><div id="fig-2">
<figure id="figure-2">
        <div class="artwork art-text alignLeft" id="section-4-2.1">
<pre>                          +--+
                          |CE|
                          +--+
                            |
                         +----+
                    +----| PE |----+
        +---------+ |    +----+    | +---------+
+----+  |        +---+            +---+        |  +----+
|NVE1|--|        |   |            |   |        |--|NVE3|
+----+  |        |GW1|            |GW3|        |  +----+
        |        +---+            +---+        |
        |  NVO-1   |       WAN      |   NVO-2  |
        |        +---+            +---+        |
        |        |   |            |   |        |
+----+  |        |GW2|            |GW4|        |  +----+
|NVE2|--|        +---+            +---+        |--|NVE4|
+----+  +---------+ |              | +---------+  +----+
                    +--------------+

|&lt;--EVPN-Overlay---&gt;|&lt;-----VPLS---&gt;|&lt;---EVPN-Overlay--&gt;|
                    |&lt;--PBB-VPLS--&gt;|
  Interconnect  -&gt;  |&lt;-EVPN-MPLS--&gt;|
   options          |&lt;--EVPN-Ovl--&gt;|*
                    |&lt;--PBB-EVPN--&gt;|

* EVPN-Ovl stands for EVPN-Overlay (and it's an interconnect option).
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-integrated-interconnect-mod">Integrated Interconnect Model</a>
        </figcaption></figure>
</div>
<div id="sect-4.1">
<section id="section-4.1">
        <h3 id="name-interconnect-requirements-2">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-interconnect-requirements-2">Interconnect Requirements</a>
        </h3>
<p id="section-4.1-1">
   The integrated interconnect solution meets the following
   requirements:<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.1">Control plane and data plane interworking between the EVPN-Overlay
     network and the L2VPN technology supported in the WAN, irrespective
     of the technology choice -- i.e., (PBB‑)VPLS or (PBB-)EVPN, as
     depicted in <a class="xref" href="#fig-2">Figure 2</a>.<a class="pilcrow" href="#section-4.1-2.1">¶</a>
</li>
          <li class="normal" id="section-4.1-2.2">Multihoming, including single-active multihoming with per-service load
     balancing or all-active multihoming -- i.e., per-flow load-balancing -- as
     long as the technology deployed in the WAN supports it.<a class="pilcrow" href="#section-4.1-2.2">¶</a>
</li>
          <li class="normal" id="section-4.1-2.3">Support for end-to-end MAC Mobility, Static MAC protection and
     other procedures (e.g., proxy-arp) described in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> as long as
     EVPN-MPLS is the technology of choice in the WAN.<a class="pilcrow" href="#section-4.1-2.3">¶</a>
</li>
          <li class="normal" id="section-4.1-2.4">Independent inclusive multicast trees in the WAN and in the DC.
     That is, the inclusive multicast tree type defined in the WAN does
     not need to be the same as in the DC.<a class="pilcrow" href="#section-4.1-2.4">¶</a>
</li>
        </ul>
</section>
</div>
<div id="sect-4.2">
<section id="section-4.2">
        <h3 id="name-vpls-interconnect-for-evpn-">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-vpls-interconnect-for-evpn-">VPLS Interconnect for EVPN-Overlay Networks</a>
        </h3>
<div id="sect-4.2.1">
<section id="section-4.2.1">
          <h4 id="name-control-data-plane-setup-pr">
<a class="section-number selfRef" href="#section-4.2.1">4.2.1. </a><a class="section-name selfRef" href="#name-control-data-plane-setup-pr">Control/Data Plane Setup Procedures on the GWs</a>
          </h4>
<p id="section-4.2.1-1">
   Regular MPLS tunnels and Targeted LDP (tLDP) / BGP sessions will be set up to the WAN
   PEs and RRs as per <span>[<a class="xref" href="#RFC4761">RFC4761</a>]</span>, <span>[<a class="xref" href="#RFC4762">RFC4762</a>]</span>, and <span>[<a class="xref" href="#RFC6074">RFC6074</a>]</span>, and overlay
   tunnels and EVPN will be set up as per <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span>. Note that
   different route targets for the DC and the WAN are normally
   required (unless <span>[<a class="xref" href="#RFC4762">RFC4762</a>]</span> is used in the WAN, in which case no WAN
   route target is needed). A single type-1 RD per service may be used.<a class="pilcrow" href="#section-4.2.1-1">¶</a></p>
<p id="section-4.2.1-2">
   In order to support multihoming, the GWs will be provisioned with an
   I-ESI (see <a class="xref" href="#sect-3.4">Section 3.4</a>), which will be unique for each
   interconnection. In this case, the I-ES will represent the
   group of PWs to the WAN PEs and
   GWs. All the <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> procedures are still
   followed for the I-ES -- e.g., any MAC address learned from the WAN will be advertised to the
   DC with the I-ESI in the ESI field.<a class="pilcrow" href="#section-4.2.1-2">¶</a></p>
<p id="section-4.2.1-3">
   A MAC-VRF per EVI will be created in each GW. The MAC-VRF will have
   two different types of tunnel bindings instantiated in two different
   split-horizon groups:<a class="pilcrow" href="#section-4.2.1-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.1-4.1"> VPLS PWs will be instantiated in the WAN split-horizon group.<a class="pilcrow" href="#section-4.2.1-4.1">¶</a>
</li>
            <li class="normal" id="section-4.2.1-4.2"> Overlay tunnel bindings (e.g., VXLAN, NVGRE) will be instantiated
   in the DC split-horizon group.<a class="pilcrow" href="#section-4.2.1-4.2">¶</a>
</li>
          </ul>
<p id="section-4.2.1-5">
   Attachment circuits are also supported on the same MAC-VRF (although
   not shown in <a class="xref" href="#fig-2">Figure 2</a>), but they will not be part of any of the above
   split-horizon groups.<a class="pilcrow" href="#section-4.2.1-5">¶</a></p>
<p id="section-4.2.1-6">
   Traffic received in a given split-horizon group will never be
   forwarded to a member of the same split-horizon group.<a class="pilcrow" href="#section-4.2.1-6">¶</a></p>
<p id="section-4.2.1-7">
   As far as BUM flooding is concerned, a flooding list will be composed
   of the sublist created by the inclusive multicast routes and the
   sublist created for VPLS in the WAN. BUM frames received from a
   local Attachment Circuit (AC) will be forwarded to the flooding list.
   BUM frames received from the DC or the WAN will be forwarded to the
   flooding list, observing the split-horizon group rule described above.<a class="pilcrow" href="#section-4.2.1-7">¶</a></p>
<p id="section-4.2.1-8">
   Note that the GWs are not allowed to have an EVPN binding and a PW to
   the same far end within the same MAC-VRF, so that loops and packet
   duplication are avoided. In case a GW can successfully establish
   both an EVPN binding and a PW to the same far-end PE, the EVPN
   binding will prevail, and the PW will be brought down operationally.<a class="pilcrow" href="#section-4.2.1-8">¶</a></p>
<p id="section-4.2.1-9">
   The optimization procedures described in <a class="xref" href="#sect-3.5">Section 3.5</a> can
   also be applied to this model.<a class="pilcrow" href="#section-4.2.1-9">¶</a></p>
</section>
</div>
<div id="sect-4.2.2">
<section id="section-4.2.2">
          <h4 id="name-multihoming-procedures-on-t">
<a class="section-number selfRef" href="#section-4.2.2">4.2.2. </a><a class="section-name selfRef" href="#name-multihoming-procedures-on-t">Multihoming Procedures on the GWs</a>
          </h4>
<p id="section-4.2.2-1">
   This model supports single-active multihoming on the GWs. All-active
   multihoming is not supported by VPLS; therefore, it cannot be used on
   the GWs.<a class="pilcrow" href="#section-4.2.2-1">¶</a></p>
<p id="section-4.2.2-2">
   In this case, for a given EVI, all the PWs in the WAN split-horizon group
   are assigned to I-ES. All the single-active multihoming procedures as
   described by <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span> will be followed for the I-ES.<a class="pilcrow" href="#section-4.2.2-2">¶</a></p>
<p id="section-4.2.2-3">
   The non-DF GW for the I-ES will block the transmission and reception
   of all the PWs in the WAN split-horizon group for BUM and unicast
   traffic.<a class="pilcrow" href="#section-4.2.2-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4.3">
<section id="section-4.3">
        <h3 id="name-pbb-vpls-interconnect-for-e">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-pbb-vpls-interconnect-for-e">PBB-VPLS Interconnect for EVPN-Overlay Networks</a>
        </h3>
<div id="sect-4.3.1">
<section id="section-4.3.1">
          <h4 id="name-control-data-plane-setup-pro">
<a class="section-number selfRef" href="#section-4.3.1">4.3.1. </a><a class="section-name selfRef" href="#name-control-data-plane-setup-pro">Control/Data Plane Setup Procedures on the GWs</a>
          </h4>
<p id="section-4.3.1-1">
   In this case, there is no impact on the procedures described in
   <span>[<a class="xref" href="#RFC7041">RFC7041</a>]</span> for the B-component. However, the
   I-component instances
   become EVI instances with EVPN-Overlay bindings and potentially local
   attachment circuits. A number of MAC-VRF instances can be multiplexed
   into the same B-component instance. This option provides significant
   savings in terms of PWs to be maintained in the WAN.<a class="pilcrow" href="#section-4.3.1-1">¶</a></p>
<p id="section-4.3.1-2">
   The I-ESI concept described in <a class="xref" href="#sect-4.2.1">Section 4.2.1</a> will also be
   used for the PBB-VPLS-based interconnect.<a class="pilcrow" href="#section-4.3.1-2">¶</a></p>
<p id="section-4.3.1-3">
   B-component PWs and I-component EVPN-Overlay bindings established to
   the same far end will be compared. The following rules will be
   observed:<a class="pilcrow" href="#section-4.3.1-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.1-4.1"> Attempts to set up a PW between the two GWs within the B-component
 context will never be blocked.<a class="pilcrow" href="#section-4.3.1-4.1">¶</a>
</li>
            <li class="normal" id="section-4.3.1-4.2"> If a PW exists between two GWs for the B-component and an attempt
 is made to set up an EVPN binding on an I-component linked to that
 B-component, the EVPN binding will be kept down operationally. Note
 that the BGP EVPN routes will still be valid but not used.<a class="pilcrow" href="#section-4.3.1-4.2">¶</a>
</li>
            <li class="normal" id="section-4.3.1-4.3"> The EVPN binding will only be up and used as long as there is no
 PW to the same far end in the corresponding B-component. The EVPN
 bindings in the I-components will be brought down before the PW in the
 B-component is brought up.<a class="pilcrow" href="#section-4.3.1-4.3">¶</a>
</li>
          </ul>
<p id="section-4.3.1-5">
   The optimization procedures described in <a class="xref" href="#sect-3.5">Section 3.5</a> can also be
   applied to this interconnect option.<a class="pilcrow" href="#section-4.3.1-5">¶</a></p>
</section>
</div>
<div id="sect-4.3.2">
<section id="section-4.3.2">
          <h4 id="name-multihoming-procedures-on-th">
<a class="section-number selfRef" href="#section-4.3.2">4.3.2. </a><a class="section-name selfRef" href="#name-multihoming-procedures-on-th">Multihoming Procedures on the GWs</a>
          </h4>
<p id="section-4.3.2-1">
   This model supports single-active multihoming on the GWs. All-active
   multihoming is not supported by this scenario.<a class="pilcrow" href="#section-4.3.2-1">¶</a></p>
<p id="section-4.3.2-2">
   The single-active multihoming procedures as described by <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span>
   will be followed for the I-ES for each EVI instance connected to the
   B-component. Note that in this case, for a given EVI, all the EVPN bindings
   in the I-component are assigned to the I-ES. The non-DF GW for the I-ES
   will block the transmission and reception of all the I-component EVPN
   bindings for BUM and unicast traffic. When learning MACs from the WAN, the
   non-DF <span class="bcp14">MUST NOT</span> advertise EVPN MAC/IP routes for those MACs.<a class="pilcrow" href="#section-4.3.2-2">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4.4">
<section id="section-4.4">
        <h3 id="name-evpn-mpls-interconnect-for-">
<a class="section-number selfRef" href="#section-4.4">4.4. </a><a class="section-name selfRef" href="#name-evpn-mpls-interconnect-for-">EVPN-MPLS Interconnect for EVPN-Overlay Networks</a>
        </h3>
<p id="section-4.4-1">
   If EVPN for MPLS tunnels (referred to as "EVPN-MPLS" hereafter) are supported in the
   WAN, an end-to-end EVPN solution can be deployed. The following
   sections describe the proposed solution as well as its impact
   on the procedures from <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>.<a class="pilcrow" href="#section-4.4-1">¶</a></p>
<div id="sect-4.4.1">
<section id="section-4.4.1">
          <h4 id="name-control-plane-setup-procedu">
<a class="section-number selfRef" href="#section-4.4.1">4.4.1. </a><a class="section-name selfRef" href="#name-control-plane-setup-procedu">Control plane Setup Procedures on the GWs</a>
          </h4>
<p id="section-4.4.1-1">
   The GWs <span class="bcp14">MUST</span> establish separate BGP sessions for sending/receiving
   EVPN routes to/from the DC and to/from the WAN. Normally, each GW will
   set up one BGP EVPN session to the DC RR (or two BGP EVPN sessions if
   there are redundant DC RRs) and one session to the WAN RR (or two
   sessions if there are redundant WAN RRs).<a class="pilcrow" href="#section-4.4.1-1">¶</a></p>
<p id="section-4.4.1-2">
   In order to facilitate separate BGP processes for DC and WAN, EVPN
   routes sent to the WAN <span class="bcp14">SHOULD</span> carry a different Route Distinguisher
   (RD) than the EVPN routes sent to the DC. In addition, although
   reusing the same value is possible, different route targets are
   expected to be handled for the same EVI in the WAN and the DC. Note
   that the EVPN service routes sent to the DC RRs will normally include
   a <span>[<a class="xref" href="#RFC9012">RFC9012</a>]</span> BGP encapsulation extended community with a
   different tunnel type than the one sent to the WAN RRs.<a class="pilcrow" href="#section-4.4.1-2">¶</a></p>
<p id="section-4.4.1-3">
   As in the other discussed options, an I-ES and its assigned I-ESI
   will be configured on the GWs for multihoming. This I-ES represents
   the WAN EVPN-MPLS PEs to the DC but also the DC EVPN-Overlay NVEs to
   the WAN. Optionally, different I-ESI values are configured for
   representing the WAN and the DC. If different EVPN-Overlay networks
   are connected to the same group of GWs, each EVPN-Overlay network
   <span class="bcp14">MUST</span> get assigned a different I-ESI.<a class="pilcrow" href="#section-4.4.1-3">¶</a></p>
<p id="section-4.4.1-4">
   Received EVPN routes will never be reflected on the GWs but instead will be
   consumed and re‑advertised (if needed):<a class="pilcrow" href="#section-4.4.1-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.1-5.1">Ethernet A-D routes, ES routes, and Inclusive Multicast routes are
 consumed by the GWs and processed locally for the corresponding <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> procedures.<a class="pilcrow" href="#section-4.4.1-5.1">¶</a>
</li>
            <li class="normal" id="section-4.4.1-5.2">
              <p id="section-4.4.1-5.2.1">MAC/IP advertisement routes will be received and imported, and if they
        become active in the MAC-VRF, the information will be re-advertised as
        new routes with the following fields:<a class="pilcrow" href="#section-4.4.1-5.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.1-5.2.2.1">The RD will be the GW's RD for the MAC-VRF.<a class="pilcrow" href="#section-4.4.1-5.2.2.1">¶</a>
</li>
                <li class="normal" id="section-4.4.1-5.2.2.2">The ESI will be set to the I-ESI.<a class="pilcrow" href="#section-4.4.1-5.2.2.2">¶</a>
</li>
                <li class="normal" id="section-4.4.1-5.2.2.3">The Ethernet-tag value will be kept from the received NLRI the
   received NLRI.<a class="pilcrow" href="#section-4.4.1-5.2.2.3">¶</a>
</li>
                <li class="normal" id="section-4.4.1-5.2.2.4">The MAC length, MAC address, IP Length, and IP address values will
   be kept from the received NLRI.<a class="pilcrow" href="#section-4.4.1-5.2.2.4">¶</a>
</li>
                <li class="normal" id="section-4.4.1-5.2.2.5">The MPLS label will be a local 20-bit value (when sent to the
   WAN) or a DC-global 24-bit value (when sent to the DC for
   encapsulations using a VNI).<a class="pilcrow" href="#section-4.4.1-5.2.2.5">¶</a>
</li>
                <li class="normal" id="section-4.4.1-5.2.2.6">The appropriate Route Targets (RTs) and <span>[<a class="xref" href="#RFC9012">RFC9012</a>]</span> BGP encapsulation extended
   community will be used according to <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span>.<a class="pilcrow" href="#section-4.4.1-5.2.2.6">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.4.1-6">
   The GWs will also generate the following local EVPN routes that will be
   sent to the DC and WAN, with their corresponding RTs and <span>[<a class="xref" href="#RFC9012">RFC9012</a>]</span> BGP encapsulation extended community values:<a class="pilcrow" href="#section-4.4.1-6">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.1-7.1">ES route(s) for the I-ESI(s).<a class="pilcrow" href="#section-4.4.1-7.1">¶</a>
</li>
            <li class="normal" id="section-4.4.1-7.2">Ethernet A-D routes per ES and EVI for the I-ESI(s). The A-D
        per-EVI routes sent to the WAN and the DC will have consistent
        Ethernet-Tag values.<a class="pilcrow" href="#section-4.4.1-7.2">¶</a>
</li>
            <li class="normal" id="section-4.4.1-7.3">Inclusive Multicast routes with independent tunnel-type value
        for the WAN and DC. For example, a P2MP Label Switched Path (LSP) may be used in the WAN,
        whereas ingress replication may be used in the DC. The routes
        sent to the WAN and the DC will have a consistent Ethernet-Tag.<a class="pilcrow" href="#section-4.4.1-7.3">¶</a>
</li>
            <li class="normal" id="section-4.4.1-7.4">MAC/IP advertisement routes for MAC addresses learned in local
attachment circuits. Note that these routes will not include the
I-ESI value in the ESI field. These routes will include a zero ESI or a non-zero ESI for local multihomed
Ethernet Segments (ES). The routes sent to the WAN and the DC
        will have a consistent Ethernet-Tag.<a class="pilcrow" href="#section-4.4.1-7.4">¶</a>
</li>
          </ul>
<p id="section-4.4.1-8">
   Assuming GW1 and GW2 are peer GWs of the same DC, each GW will generate two
   sets of the above local service routes: set-DC will be sent to the DC RRs
   and will include an A-D per EVI, Inclusive Multicast, and MAC/IP routes for the
   DC encapsulation and RT. Set-WAN will be sent to the WAN RRs and will
   include the same routes but using the WAN RT and encapsulation. GW1 and GW2
   will receive each other's set-DC and set-WAN. This is the expected behavior
   on GW1 and GW2 for locally generated routes:<a class="pilcrow" href="#section-4.4.1-8">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.1-9.1">Inclusive multicast routes: When setting up the flooding lists for a
        given MAC-VRF, each GW will include its DC peer GW only in the
        EVPN-MPLS flooding list (by default) and not the EVPN-Overlay flooding
        list. That is, GW2 will import two Inclusive Multicast routes from GW1
        (from set-DC and set-WAN) but will only consider one of the two,
        giving the set-WAN route higher priority. An administrative option <span class="bcp14">MAY</span>
        change this preference so that the set-DC route is selected first.<a class="pilcrow" href="#section-4.4.1-9.1">¶</a>
</li>
            <li class="normal" id="section-4.4.1-9.2">MAC/IP advertisement routes for local attachment circuits: As
        above, the GW will select only one, giving the route from the
        set-WAN a higher priority. As with the Inclusive multicast
        routes, an administrative option <span class="bcp14">MAY</span> change this priority.<a class="pilcrow" href="#section-4.4.1-9.2">¶</a>
</li>
          </ul>
</section>
</div>
<div id="sect-4.4.2">
<section id="section-4.4.2">
          <h4 id="name-data-plane-setup-procedures">
<a class="section-number selfRef" href="#section-4.4.2">4.4.2. </a><a class="section-name selfRef" href="#name-data-plane-setup-procedures">Data Plane Setup Procedures on the GWs</a>
          </h4>
<p id="section-4.4.2-1">
   The procedure explained at the end of the previous section will make sure
   there are no loops or packet duplication between the GWs of the same
   EVPN-Overlay network (for frames generated from local ACs), since only one
   EVPN binding per EVI (or per Ethernet Tag in the case of VLAN-aware bundle
   services) will be set up in the data plane between the two nodes. That
   binding will by default be added to the EVPN-MPLS flooding list.<a class="pilcrow" href="#section-4.4.2-1">¶</a></p>
<p id="section-4.4.2-2">
   As for the rest of the EVPN tunnel bindings, they will be added to one of
   the two flooding lists that each GW sets up for the same MAC-VRF:<a class="pilcrow" href="#section-4.4.2-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.2-3.1">EVPN-Overlay flooding list (composed of bindings to the remote NVEs
 or multicast tunnel to the NVEs).<a class="pilcrow" href="#section-4.4.2-3.1">¶</a>
</li>
            <li class="normal" id="section-4.4.2-3.2">EVPN-MPLS flooding list (composed of MP2P or LSM tunnel to the
 remote PEs).<a class="pilcrow" href="#section-4.4.2-3.2">¶</a>
</li>
          </ul>
<p id="section-4.4.2-4">
   Each flooding list will be part of a separate split-horizon group:
   the WAN split-horizon group or the DC split-horizon group. Traffic
   generated from a local AC can be flooded to both
   split-horizon groups. Traffic from a binding of a split-horizon group
   can be flooded to the other split-horizon group and local ACs, but
   never to a member of its own split-horizon group.<a class="pilcrow" href="#section-4.4.2-4">¶</a></p>
<p id="section-4.4.2-5">
   When either GW1 or GW2 receives a BUM frame on an MPLS tunnel, including an
   ESI label at the bottom of the stack, they will perform an ESI label lookup
   and split-horizon filtering as per <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>, in case the ESI label
   identifies a local ESI (I-ESI or any other nonzero ESI).<a class="pilcrow" href="#section-4.4.2-5">¶</a></p>
</section>
</div>
<div id="sect-4.4.3">
<section id="section-4.4.3">
          <h4 id="name-multihoming-procedure-exten">
<a class="section-number selfRef" href="#section-4.4.3">4.4.3. </a><a class="section-name selfRef" href="#name-multihoming-procedure-exten">Multihoming Procedure Extensions on the GWs</a>
          </h4>
<p id="section-4.4.3-1">
   This model supports single-active as well as all-active multihoming.<a class="pilcrow" href="#section-4.4.3-1">¶</a></p>
<p id="section-4.4.3-2">
   All the <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> multihoming procedures
   for the DF election on I-ES(s), as
   well as the backup-path (single-active) and aliasing (all-active)
   procedures, will be followed on the GWs. Remote PEs in the EVPN-MPLS network
   will follow regular <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> aliasing or backup-path procedures for
   MAC/IP routes received from the GWs for the same I-ESI. So will NVEs in the
   EVPN-Overlay network for MAC/IP routes received with the same I-ESI.<a class="pilcrow" href="#section-4.4.3-2">¶</a></p>
<p id="section-4.4.3-3">
   As far as the forwarding plane is concerned, by default, the EVPN-Overlay
   network will have an analogous behavior to the access ACs in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>
   multihomed Ethernet Segments.<a class="pilcrow" href="#section-4.4.3-3">¶</a></p>
<p id="section-4.4.3-4">The forwarding behavior on the GWs is described below:<a class="pilcrow" href="#section-4.4.3-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.3-5.1">
              <p id="section-4.4.3-5.1.1">Single-active multihoming; assuming a WAN split-horizon group
        (comprised of EVPN-MPLS bindings), a DC split-horizon group
        (comprised of EVPN-Overlay bindings), and local ACs on the GWs:<a class="pilcrow" href="#section-4.4.3-5.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.3-5.1.2.1">Forwarding behavior on the non-DF: The non-DF <span class="bcp14">MUST</span> block
           ingress and egress forwarding on the EVPN-Overlay bindings
           associated to the I-ES. The EVPN-MPLS network is considered to
           be the core network, and the EVPN-MPLS bindings to the remote
           PEs and GWs will be active.<a class="pilcrow" href="#section-4.4.3-5.1.2.1">¶</a>
</li>
                <li class="normal" id="section-4.4.3-5.1.2.2">Forwarding behavior on the DF: The DF <span class="bcp14">MUST NOT</span> forward BUM or
    unicast traffic received from a given split-horizon group to a
    member of its own split-horizon group. Forwarding to other
    split-horizon groups and local ACs is allowed (as long as the ACs
    are not part of an ES for which the node is non-DF). As per <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> and for split-horizon purposes, when receiving
    BUM traffic on the EVPN-Overlay bindings associated to an I-ES, the
    DF GW <span class="bcp14">SHOULD</span> add the I-ESI label when forwarding to the peer GW
    over EVPN-MPLS.<a class="pilcrow" href="#section-4.4.3-5.1.2.2">¶</a>
</li>
                <li class="normal" id="section-4.4.3-5.1.2.3">When receiving EVPN MAC/IP routes from the WAN, the non-DF <span class="bcp14">MUST NOT</span> reoriginate the EVPN routes and advertise them to the DC
    peers. In the same way, EVPN MAC/IP routes received from the DC
    <span class="bcp14">MUST NOT</span> be advertised to the WAN peers. This is consistent with
    <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> and allows the remote
    PE/NVEs to know who the
    primary GW is, based on the reception of the MAC/IP routes.<a class="pilcrow" href="#section-4.4.3-5.1.2.3">¶</a>
</li>
              </ul>
</li>
          </ul>
<ul class="normal">
<li class="normal" id="section-4.4.3-6.1">
              <p id="section-4.4.3-6.1.1">All-active multihoming; assuming a WAN split-horizon group
        (comprised of EVPN-MPLS bindings), a DC split-horizon group
        (comprised of EVPN-Overlay bindings), and local ACs on the GWs:<a class="pilcrow" href="#section-4.4.3-6.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.3-6.1.2.1">Forwarding behavior on the non-DF: The non-DF follows the same
           behavior as the non-DF in the single-active case, but only for BUM
           traffic. Unicast traffic received from a split-horizon group <span class="bcp14">MUST NOT</span> be forwarded to a member of its own split-horizon group but can
           be forwarded normally to the other split-horizon groups and local
           ACs. If a known unicast packet is identified as a "flooded" packet,
           the procedures for BUM traffic <span class="bcp14">MUST</span> be followed.<a class="pilcrow" href="#section-4.4.3-6.1.2.1">¶</a>
</li>
                <li class="normal" id="section-4.4.3-6.1.2.2">Forwarding behavior on the DF: The DF follows the same behavior
    as the DF in the single-active case, but only for BUM
    traffic. Unicast traffic received from a split-horizon group <span class="bcp14">MUST NOT</span> be forwarded to a member of its own split-horizon group but can
    be forwarded normally to the other split-horizon group and local
    ACs. If a known unicast packet is identified as a "flooded" packet,
    the procedures for BUM traffic <span class="bcp14">MUST</span> be followed. As per <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> and for split-horizon purposes, when receiving
    BUM traffic on the EVPN-Overlay bindings associated to an I-ES, the
    DF GW <span class="bcp14">MUST</span> add the I-ESI label when forwarding to the peer GW over
    EVPN-MPLS.<a class="pilcrow" href="#section-4.4.3-6.1.2.2">¶</a>
</li>
                <li class="normal" id="section-4.4.3-6.1.2.3">Contrary to the single-active multihoming case, both DF and
           non-DF reoriginate and advertise MAC/IP routes received from
           the WAN/DC peers, adding the corresponding I-ESI so that the
           remote PE/NVEs can perform regular aliasing, as per <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>.<a class="pilcrow" href="#section-4.4.3-6.1.2.3">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.4.3-7">
   The example in <a class="xref" href="#fig-3">Figure 3</a> illustrates the forwarding of BUM traffic
   originated from an NVE on a pair of all-active multihoming GWs.<a class="pilcrow" href="#section-4.4.3-7">¶</a></p>
<span id="name-multihoming-bum-forwarding"></span><div id="fig-3">
<figure id="figure-3">
            <div class="artwork art-text alignLeft" id="section-4.4.3-8.1">
<pre>     |&lt;--EVPN-Overlay---&gt;|&lt;--EVPN-MPLS--&gt;|

             +---------+ +--------------+
      +----+ BUM       +---+             |
      |NVE1+----+----&gt; |   +-+-----+     |
      +----+  | |   DF |GW1| |     |     |
              | |      +-+-+ |     |    ++--+
              | |        |   |     +--&gt; |PE1|
              | +---&gt;X +-+-+ |          ++--+
              |     NDF|   | |           |
      +----+  |        |GW2&lt;-+           |
      |NVE2+--+        +-+-+             |
      +----+  +--------+ |  +------------+
                         v
                       +--+
                       |CE|
                       +--+
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-multihoming-bum-forwarding">Multihoming BUM Forwarding</a>
            </figcaption></figure>
</div>
<p id="section-4.4.3-9">
   GW2 is the non-DF for the I-ES and blocks the BUM forwarding. GW1 is
   the DF and forwards the traffic to PE1 and GW2. Packets sent to GW2
   will include the ESI label for the I-ES. Based on the ESI label, GW2
   identifies the packets as I-ES-generated packets and will only
   forward them to local ACs (CE in the example) and not back to the
   EVPN-Overlay network.<a class="pilcrow" href="#section-4.4.3-9">¶</a></p>
</section>
</div>
<div id="sect-4.4.4">
<section id="section-4.4.4">
          <h4 id="name-impact-on-mac-mobility-proc">
<a class="section-number selfRef" href="#section-4.4.4">4.4.4. </a><a class="section-name selfRef" href="#name-impact-on-mac-mobility-proc">Impact on MAC Mobility Procedures</a>
          </h4>
<p id="section-4.4.4-1">
   MAC Mobility procedures described in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> are not modified by
   this document.<a class="pilcrow" href="#section-4.4.4-1">¶</a></p>
<p id="section-4.4.4-2">
   Note that an intra-DC MAC move still leaves the MAC attached to the
   same I-ES, so under the rules of <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>,
   this is not considered a
   MAC Mobility event. Only when the MAC moves from the WAN domain to
   the DC domain (or from one DC to another) will the MAC be learned
   from a different ES, and the MAC Mobility procedures will kick in.<a class="pilcrow" href="#section-4.4.4-2">¶</a></p>
<p id="section-4.4.4-3">
   The sticky-bit indication in the MAC Mobility extended community <span class="bcp14">MUST</span>
   be propagated between domains.<a class="pilcrow" href="#section-4.4.4-3">¶</a></p>
</section>
</div>
<div id="sect-4.4.5">
<section id="section-4.4.5">
          <h4 id="name-gateway-optimizations-2">
<a class="section-number selfRef" href="#section-4.4.5">4.4.5. </a><a class="section-name selfRef" href="#name-gateway-optimizations-2">Gateway Optimizations</a>
          </h4>
<p id="section-4.4.5-1">
   All the Gateway optimizations described in <a class="xref" href="#sect-3.5">Section 3.5</a>
            <span class="bcp14">MAY</span> be applied
   to the GWs when the interconnect is based on EVPN-MPLS.<a class="pilcrow" href="#section-4.4.5-1">¶</a></p>
<p id="section-4.4.5-2">
   In particular, the use of the Unknown MAC Route, as described in
   <a class="xref" href="#sect-3.5.1">Section 3.5.1</a>, solves some transient packet-duplication
   issues in
   cases of all-active multihoming, as explained below.<a class="pilcrow" href="#section-4.4.5-2">¶</a></p>
<p id="section-4.4.5-3">
   Consider the diagram in <a class="xref" href="#fig-2">Figure 2</a> for EVPN-MPLS interconnect and all-active
   multihoming, and the following sequence:<a class="pilcrow" href="#section-4.4.5-3">¶</a></p>
<span class="break"></span><dl class="olPercent" id="section-4.4.5-4">
            <dt>(a)</dt>
<dd id="section-4.4.5-4.1">MAC Address M1 is advertised from NVE3 in EVI-1.<a class="pilcrow" href="#section-4.4.5-4.1">¶</a>
</dd>
            <dd class="break"></dd>
<dt>(b)</dt>
<dd id="section-4.4.5-4.2">GW3 and GW4 learn M1 for EVI-1 and re-advertise M1 to the WAN
   with I-ESI-2 in the ESI field.<a class="pilcrow" href="#section-4.4.5-4.2">¶</a>
</dd>
            <dd class="break"></dd>
<dt>(c)</dt>
<dd id="section-4.4.5-4.3">GW1 and GW2 learn M1 and install GW3/GW4 as next hops following
   the EVPN aliasing procedures.<a class="pilcrow" href="#section-4.4.5-4.3">¶</a>
</dd>
            <dd class="break"></dd>
<dt>(d)</dt>
<dd id="section-4.4.5-4.4">Before NVE1 learns M1, a packet arrives at NVE1 with destination
   M1. If the Unknown MAC Route had not been advertised into the DC,
   NVE1 would have flooded the packet throughout the DC, in particular
   to both GW1 and GW2. If the same VNI/VSID is used for both known
   unicast and BUM traffic, as is typically the case, there is no
   indication in the packet that it is a BUM packet, and both GW1 and
   GW2 would have forwarded it, creating packet duplication. However,
   because the Unknown MAC Route had been advertised into the DC, NVE1
   will unicast the packet to either GW1 or GW2.<a class="pilcrow" href="#section-4.4.5-4.4">¶</a>
</dd>
            <dd class="break"></dd>
<dt>(e)</dt>
<dd id="section-4.4.5-4.5">Since both GW1 and GW2 know M1, the GW receiving the packet will
   forward it to either GW3 or GW4.<a class="pilcrow" href="#section-4.4.5-4.5">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</div>
<div id="sect-4.4.6">
<section id="section-4.4.6">
          <h4 id="name-benefits-of-the-evpn-mpls-i">
<a class="section-number selfRef" href="#section-4.4.6">4.4.6. </a><a class="section-name selfRef" href="#name-benefits-of-the-evpn-mpls-i">Benefits of the EVPN-MPLS Interconnect Solution</a>
          </h4>
<p id="section-4.4.6-1">
   The "DCI using ASBRs" solution described in <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span> and the GW solution
   with EVPN-MPLS interconnect may be seen as similar, since they both
   retain the EVPN attributes between Data Centers and throughout the
   WAN. However, the EVPN-MPLS interconnect solution on the GWs has
   significant benefits compared to the "DCI using ASBRs" solution:<a class="pilcrow" href="#section-4.4.6-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.6-2.1">As in any of the described GW models, this solution supports the
   connectivity of local attachment circuits on the GWs. This is not
   possible in a "DCI using ASBRs" solution.<a class="pilcrow" href="#section-4.4.6-2.1">¶</a>
</li>
            <li class="normal" id="section-4.4.6-2.2">Different data plane encapsulations can be supported in the DC
   and the WAN, while a uniform encapsulation is needed in the "DCI
   using ASBRs" solution.<a class="pilcrow" href="#section-4.4.6-2.2">¶</a>
</li>
            <li class="normal" id="section-4.4.6-2.3">Optimized multicast solution, with independent inclusive
   multicast trees in DC and WAN.<a class="pilcrow" href="#section-4.4.6-2.3">¶</a>
</li>
            <li class="normal" id="section-4.4.6-2.4">MPLS label aggregation: For the case where MPLS labels are
   signaled from the NVEs for MAC/IP advertisement routes, this
   solution provides label aggregation. A remote PE <span class="bcp14">MAY</span> receive a
   single label per GW MAC-VRF, as opposed to a label per NVE/MAC-VRF
   connected to the GW MAC-VRF. For instance, in <a class="xref" href="#fig-2">Figure 2</a>, PE would
   receive only one label for all the routes advertised for a given
   MAC-VRF from GW1, as opposed to a label per NVE/MAC-VRF.<a class="pilcrow" href="#section-4.4.6-2.4">¶</a>
</li>
            <li class="normal" id="section-4.4.6-2.5">The GW will not propagate MAC Mobility for the MACs moving within
   a DC. Mobility intra-DC is solved by all the NVEs in the DC. The MAC
   Mobility procedures on the GWs are only required in case of mobility
   across DCs.<a class="pilcrow" href="#section-4.4.6-2.5">¶</a>
</li>
            <li class="normal" id="section-4.4.6-2.6">Proxy-ARP/ND function on the DC GWs can be leveraged to reduce
   ARP/ND flooding in the DC or/and the WAN.<a class="pilcrow" href="#section-4.4.6-2.6">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="sect-4.5">
<section id="section-4.5">
        <h3 id="name-pbb-evpn-interconnect-for-e">
<a class="section-number selfRef" href="#section-4.5">4.5. </a><a class="section-name selfRef" href="#name-pbb-evpn-interconnect-for-e">PBB-EVPN Interconnect for EVPN-Overlay Networks</a>
        </h3>
<p id="section-4.5-1">
   PBB-EVPN <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span> is yet another interconnect option. It requires
   the use of GWs where I-components and associated B-components are
   part of EVI instances.<a class="pilcrow" href="#section-4.5-1">¶</a></p>
<div id="sect-4.5.1">
<section id="section-4.5.1">
          <h4 id="name-control-data-plane-setup-proc">
<a class="section-number selfRef" href="#section-4.5.1">4.5.1. </a><a class="section-name selfRef" href="#name-control-data-plane-setup-proc">Control/Data Plane Setup Procedures on the GWs</a>
          </h4>
<p id="section-4.5.1-1">
   EVPN will run independently in both components, the I-component MAC-VRF and
   B-component MAC-VRF. Compared to <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span>,
   the DC customer MACs (C-MACs) are no longer
   learned in the data plane on the GW but in the control plane through EVPN
   running on the I-component. Remote C-MACs coming from remote PEs are still
   learned in the data plane. B-MACs in the B‑component will be assigned and
   advertised following the procedures described in <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span>.<a class="pilcrow" href="#section-4.5.1-1">¶</a></p>
<p id="section-4.5.1-2">
   An I-ES will be configured on the GWs for multihoming, but its I-ESI will
   only be used in the EVPN control plane for the I-component EVI.  No
   unreserved ESIs will be used in the control plane of the B-component EVI,
   as per <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span>. That is, the I-ES will be
   represented to the WAN PBB-EVPN
   PEs using shared or dedicated B-MACs.<a class="pilcrow" href="#section-4.5.1-2">¶</a></p>
<p id="section-4.5.1-3">
   The rest of the control plane procedures will follow <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> for
   the I-component EVI and <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span> for the B-component EVI.<a class="pilcrow" href="#section-4.5.1-3">¶</a></p>
<p id="section-4.5.1-4">
   From the data plane perspective, the I-component and B-component EVPN
   bindings established to the same far end will be compared, and the
   I-component EVPN-Overlay binding will be kept down following the rules
   described in <a class="xref" href="#sect-4.3.1">Section 4.3.1</a>.<a class="pilcrow" href="#section-4.5.1-4">¶</a></p>
</section>
</div>
<div id="sect-4.5.2">
<section id="section-4.5.2">
          <h4 id="name-multihoming-procedures-on-the">
<a class="section-number selfRef" href="#section-4.5.2">4.5.2. </a><a class="section-name selfRef" href="#name-multihoming-procedures-on-the">Multihoming Procedures on the GWs</a>
          </h4>
<p id="section-4.5.2-1">
   This model supports single-active as well as all-active multihoming.<a class="pilcrow" href="#section-4.5.2-1">¶</a></p>
<p id="section-4.5.2-2">
   The forwarding behavior of the DF and non-DF will be changed based on
   the description outlined in <a class="xref" href="#sect-4.4.3">Section 4.4.3</a>, substituting the
   WAN split-horizon group for the B-component, and using <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span>
   procedures for the traffic sent or received on the B-component.<a class="pilcrow" href="#section-4.5.2-2">¶</a></p>
</section>
</div>
<div id="sect-4.5.3">
<section id="section-4.5.3">
          <h4 id="name-impact-on-mac-mobility-proce">
<a class="section-number selfRef" href="#section-4.5.3">4.5.3. </a><a class="section-name selfRef" href="#name-impact-on-mac-mobility-proce">Impact on MAC Mobility Procedures</a>
          </h4>
<p id="section-4.5.3-1">
   C-MACs learned from the B-component will be advertised in EVPN within
   the I-component EVI scope. If the C-MAC was previously known in the
   I-component database, EVPN would advertise the C-MAC with a higher
   sequence number, as per <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>. From the
   perspective of Mobility and the related procedures described in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>, the C-MACs learned
   from the B-component are considered local.<a class="pilcrow" href="#section-4.5.3-1">¶</a></p>
</section>
</div>
<div id="sect-4.5.4">
<section id="section-4.5.4">
          <h4 id="name-gateway-optimizations-3">
<a class="section-number selfRef" href="#section-4.5.4">4.5.4. </a><a class="section-name selfRef" href="#name-gateway-optimizations-3">Gateway Optimizations</a>
          </h4>
<p id="section-4.5.4-1">
   All the considerations explained in <a class="xref" href="#sect-4.4.5">Section 4.4.5</a> are
   applicable to
   the PBB-EVPN interconnect option.<a class="pilcrow" href="#section-4.5.4-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4.6">
<section id="section-4.6">
        <h3 id="name-evpn-vxlan-interconnect-for">
<a class="section-number selfRef" href="#section-4.6">4.6. </a><a class="section-name selfRef" href="#name-evpn-vxlan-interconnect-for">EVPN-VXLAN Interconnect for EVPN-Overlay Networks</a>
        </h3>
<p id="section-4.6-1">
   If EVPN for Overlay tunnels is supported in the WAN, and a GW function
   is required, an end-to-end EVPN solution can be deployed. While
   multiple Overlay tunnel combinations at the WAN and the DC are
   possible (MPLSoGRE, NVGRE, etc.), VXLAN is described here, given its
   popularity in the industry. This section focuses on the specific case
   of EVPN for VXLAN (EVPN-VXLAN hereafter) and the impact on the
   <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span> procedures.<a class="pilcrow" href="#section-4.6-1">¶</a></p>
<p id="section-4.6-2">
   The procedures described in <a class="xref" href="#sect-4.4">Section 4.4</a> apply to this section, too, only
   substituting EVPN-MPLS for EVPN-VXLAN control plane specifics and using
   <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span> "Local Bias" procedures instead
   of <a class="xref" href="#sect-4.4.3">Section 4.4.3</a>. Since
   there are no ESI labels in VXLAN, GWs need to rely on "Local Bias" to apply
   split horizon on packets generated from the I-ES and sent to the peer GW.<a class="pilcrow" href="#section-4.6-2">¶</a></p>
<p id="section-4.6-3">
   This use case assumes that NVEs need to use the VNIs or VSIDs as
   globally unique identifiers within a Data Center, and a Gateway needs
   to be employed at the edge of the Data-Center network to translate
   the VNI or VSID when crossing the network boundaries. This GW
   function provides VNI and tunnel-IP-address translation. The use case
   in which local downstream-assigned VNIs or VSIDs can be used (like
   MPLS labels) is described by <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span>.<a class="pilcrow" href="#section-4.6-3">¶</a></p>
<p id="section-4.6-4">
   While VNIs are globally significant within each DC, there are two
   possibilities in the interconnect network:<a class="pilcrow" href="#section-4.6-4">¶</a></p>
<ol class="normal type-1" id="section-4.6-5" start="1" type="1">
          <li id="section-4.6-5.1">Globally unique VNIs in the interconnect network. In this case,
   the GWs and PEs in the interconnect network will agree on a common
   VNI for a given EVI. The RT to be used in the interconnect network
   can be autoderived from the agreed-upon interconnect VNI. The VNI used
   inside each DC <span class="bcp14">MAY</span> be the same as the interconnect VNI.<a class="pilcrow" href="#section-4.6-5.1">¶</a>
</li>
          <li id="section-4.6-5.2">Downstream-assigned VNIs in the interconnect network. In this
   case, the GWs and PEs <span class="bcp14">MUST</span> use the proper RTs to import/export the EVPN routes. Note that even if the VNI is downstream assigned in the
   interconnect network, and unlike option (a), it only identifies the
   &lt;Ethernet Tag, GW&gt; pair and not the &lt;Ethernet Tag, egress
   PE&gt; pair. The VNI used inside each DC <span class="bcp14">MAY</span> be the same as the
   interconnect VNI. GWs <span class="bcp14">SHOULD</span> support multiple VNI spaces per EVI
   (one per interconnect network they are connected to).<a class="pilcrow" href="#section-4.6-5.2">¶</a>
</li>
        </ol>
<p id="section-4.6-6">
   In both options, NVEs inside a DC only have to be aware of a single
   VNI space, and only GWs will handle the complexity of managing
   multiple VNI spaces. In addition to VNI translation above, the GWs
   will provide translation of the tunnel source IP for the packets
   generated from the NVEs, using their own IP address. GWs will use
   that IP address as the BGP next hop in all the EVPN updates to the
   interconnect network.<a class="pilcrow" href="#section-4.6-6">¶</a></p>
<p id="section-4.6-7">
   The following sections provide more details about these two options.<a class="pilcrow" href="#section-4.6-7">¶</a></p>
<div id="sect-4.6.1">
<section id="section-4.6.1">
          <h4 id="name-globally-unique-vnis-in-the">
<a class="section-number selfRef" href="#section-4.6.1">4.6.1. </a><a class="section-name selfRef" href="#name-globally-unique-vnis-in-the">Globally Unique VNIs in the Interconnect Network</a>
          </h4>
<p id="section-4.6.1-1">
   Considering <a class="xref" href="#fig-2">Figure 2</a>, if a host H1 in NVO-1 needs to communicate with a
   host H2 in NVO-2, and assuming that different VNIs are used in each DC for
   the same EVI (e.g., VNI-10 in NVO-1 and VNI-20 in NVO-2), then the VNIs
   <span class="bcp14">MUST</span>
   be translated to a common interconnect VNI (e.g., VNI-100) on the GWs. Each
   GW is provisioned with a VNI translation mapping so that it can translate
   the VNI in the control plane when sending BGP EVPN route updates to the
   interconnect network. In other words, GW1 and GW2 <span class="bcp14">MUST</span> be configured to map
   VNI-10 to VNI-100 in the BGP update messages for H1's MAC route.

   This
   mapping is also used to translate the VNI in the data plane in both
   directions: that is, VNI-10 to VNI-100 when the packet is received from
   NVO-1 and the reverse mapping from VNI-100 to VNI-10 when the packet is
   received from the remote NVO-2 network and needs to be forwarded to NVO-1.<a class="pilcrow" href="#section-4.6.1-1">¶</a></p>
<p id="section-4.6.1-2">
   The procedures described in <a class="xref" href="#sect-4.4">Section 4.4</a> will be followed,
   considering
   that the VNIs advertised/received by the GWs will be translated
   accordingly.<a class="pilcrow" href="#section-4.6.1-2">¶</a></p>
</section>
</div>
<div id="sect-4.6.2">
<section id="section-4.6.2">
          <h4 id="name-downstream-assigned-vnis-in">
<a class="section-number selfRef" href="#section-4.6.2">4.6.2. </a><a class="section-name selfRef" href="#name-downstream-assigned-vnis-in">Downstream-Assigned VNIs in the Interconnect Network</a>
          </h4>
<p id="section-4.6.2-1">
   In this case, if a host H1 in NVO-1 needs to communicate with a host
   H2 in NVO-2, and assuming that different VNIs are used in each DC for
   the same EVI, e.g., VNI-10 in NVO-1 and VNI-20 in NVO-2, then the VNIs
   <span class="bcp14">MUST</span> be translated as in <a class="xref" href="#sect-4.6.1">Section 4.6.1</a>. However, in this case, there
   is no need to translate to a common interconnect VNI on the GWs. Each
   GW can translate the VNI received in an EVPN update to a locally
   assigned VNI advertised to the interconnect network. Each GW can use
   a different interconnect VNI; hence, this VNI does not need to be
   agreed upon on all the GWs and PEs of the interconnect network.<a class="pilcrow" href="#section-4.6.2-1">¶</a></p>
<p id="section-4.6.2-2">
   The procedures described in <a class="xref" href="#sect-4.4">Section 4.4</a> will be followed,
   taking into account the considerations above for the VNI translation.<a class="pilcrow" href="#section-4.6.2-2">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-5">
<section id="section-5">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-5-1">
   This document applies existing specifications to a number of
   interconnect models. The security considerations included in those
   documents, such as <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>, <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span>, <span>[<a class="xref" href="#RFC7623">RFC7623</a>]</span>, <span>[<a class="xref" href="#RFC4761">RFC4761</a>]</span>,
   and <span>[<a class="xref" href="#RFC4762">RFC4762</a>]</span> apply to this document
   whenever those technologies are
   used.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">
   As discussed, <span>[<a class="xref" href="#RFC8365">RFC8365</a>]</span> discusses two main DCI solution groups:
   "DCI using GWs" and "DCI using ASBRs". This document specifies the
   solutions that correspond to the "DCI using GWs" group. It is
   important to note that the use of GWs provides a superior level of
   security on a per-tenant basis, compared to the use of ASBRs. This is
   due to the fact that GWs need to perform a MAC lookup on the frames
   being received from the WAN, and they apply security procedures, such
   as filtering of undesired frames, filtering of frames with a source
   MAC that matches a protected MAC in the DC, or application of
   MAC-duplication procedures defined in <span>[<a class="xref" href="#RFC7432">RFC7432</a>]</span>. On ASBRs, though, traffic
   is forwarded based on a label or VNI swap, and there is usually no
   visibility of the encapsulated frames, which can carry malicious
   traffic.<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3">
   In addition, the GW optimizations specified in this document provide
   additional protection of the DC tenant systems. For instance, the
   MAC-address advertisement control and Unknown MAC Route defined in
   <a class="xref" href="#sect-3.5.1">Section 3.5.1</a> protect the DC NVEs from being overwhelmed with an
   excessive number of MAC/IP routes being learned on the GWs from the WAN.
   The ARP/ND flooding control described in <a class="xref" href="#sect-3.5.2">Section 3.5.2</a> can reduce/suppress
   broadcast storms being injected from the WAN.<a class="pilcrow" href="#section-5-3">¶</a></p>
<p id="section-5-4">
   Finally, the reader should be aware of the potential security
   implications of designing a DCI with the decoupled interconnect
   solution (<a class="xref" href="#sect-3">Section 3</a>) or the integrated interconnect solution
   (<a class="xref" href="#sect-4">Section 4</a>). In the decoupled interconnect solution, the DC is typically easier
   to protect from the WAN, since each GW has a single logical link to
   one WAN PE, whereas in the Integrated solution, the GW has logical
   links to all the WAN PEs that are attached to the tenant. In either
   model, proper control plane and data plane policies should be put in
   place in the GWs in order to protect the DC from potential attacks
   coming from the WAN.<a class="pilcrow" href="#section-5-4">¶</a></p>
</section>
</div>
<div id="sect-6">
<section id="section-6">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-6-1">
   This document has no IANA actions.<a class="pilcrow" href="#section-6-1">¶</a></p>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4761">[RFC4761]</dt>
        <dd>
<span class="refAuthor">Kompella, K., Ed.</span> and <span class="refAuthor">Y. Rekhter, Ed.</span>, <span class="refTitle">"Virtual Private LAN Service (VPLS) Using BGP for Auto-Discovery and Signaling"</span>, <span class="seriesInfo">RFC 4761</span>, <span class="seriesInfo">DOI 10.17487/RFC4761</span>, <time class="refDate" datetime="2007-01">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4761">https://www.rfc-editor.org/info/rfc4761</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4762">[RFC4762]</dt>
        <dd>
<span class="refAuthor">Lasserre, M., Ed.</span> and <span class="refAuthor">V. Kompella, Ed.</span>, <span class="refTitle">"Virtual Private LAN Service (VPLS) Using Label Distribution Protocol (LDP) Signaling"</span>, <span class="seriesInfo">RFC 4762</span>, <span class="seriesInfo">DOI 10.17487/RFC4762</span>, <time class="refDate" datetime="2007-01">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4762">https://www.rfc-editor.org/info/rfc4762</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6074">[RFC6074]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Davie, B.</span>, <span class="refAuthor">Radoaca, V.</span>, and <span class="refAuthor">W. Luo</span>, <span class="refTitle">"Provisioning, Auto-Discovery, and Signaling in Layer 2 Virtual Private Networks (L2VPNs)"</span>, <span class="seriesInfo">RFC 6074</span>, <span class="seriesInfo">DOI 10.17487/RFC6074</span>, <time class="refDate" datetime="2011-01">January 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6074">https://www.rfc-editor.org/info/rfc6074</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7041">[RFC7041]</dt>
        <dd>
<span class="refAuthor">Balus, F., Ed.</span>, <span class="refAuthor">Sajassi, A., Ed.</span>, and <span class="refAuthor">N. Bitar, Ed.</span>, <span class="refTitle">"Extensions to the Virtual Private LAN Service (VPLS) Provider Edge (PE) Model for Provider Backbone Bridging"</span>, <span class="seriesInfo">RFC 7041</span>, <span class="seriesInfo">DOI 10.17487/RFC7041</span>, <time class="refDate" datetime="2013-11">November 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7041">https://www.rfc-editor.org/info/rfc7041</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7432">[RFC7432]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="seriesInfo">RFC 7432</span>, <span class="seriesInfo">DOI 10.17487/RFC7432</span>, <time class="refDate" datetime="2015-02">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7432">https://www.rfc-editor.org/info/rfc7432</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7543">[RFC7543]</dt>
        <dd>
<span class="refAuthor">Jeng, H.</span>, <span class="refAuthor">Jalil, L.</span>, <span class="refAuthor">Bonica, R.</span>, <span class="refAuthor">Patel, K.</span>, and <span class="refAuthor">L. Yong</span>, <span class="refTitle">"Covering Prefixes Outbound Route Filter for BGP-4"</span>, <span class="seriesInfo">RFC 7543</span>, <span class="seriesInfo">DOI 10.17487/RFC7543</span>, <time class="refDate" datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7543">https://www.rfc-editor.org/info/rfc7543</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7623">[RFC7623]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Salam, S.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"Provider Backbone Bridging Combined with Ethernet VPN (PBB-EVPN)"</span>, <span class="seriesInfo">RFC 7623</span>, <span class="seriesInfo">DOI 10.17487/RFC7623</span>, <time class="refDate" datetime="2015-09">September 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7623">https://www.rfc-editor.org/info/rfc7623</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8365">[RFC8365]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Drake, J., Ed.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Shekhar, R.</span>, <span class="refAuthor">Uttaro, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"A Network Virtualization Overlay Solution Using Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 8365</span>, <span class="seriesInfo">DOI 10.17487/RFC8365</span>, <time class="refDate" datetime="2018-03">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8365">https://www.rfc-editor.org/info/rfc8365</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9012">[RFC9012]</dt>
      <dd>
<span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Van de Velde, G.</span>, <span class="refAuthor">Sangli, S.</span>, and <span class="refAuthor">J. Scudder</span>, <span class="refTitle">"The BGP Tunnel Encapsulation Attribute"</span>, <span class="seriesInfo">RFC 9012</span>, <span class="seriesInfo">DOI 10.17487/RFC9012</span>, <time class="refDate" datetime="2021-04">April 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9012">https://www.rfc-editor.org/info/rfc9012</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="IEEE.802.1AG">[IEEE.802.1AG]</dt>
        <dd>
<span class="refAuthor">IEEE</span>, <span class="refTitle">"IEEE Standard for Local and Metropolitan Area Networks Virtual Bridged Local Area Networks Amendment 5: Connectivity Fault Management"</span>, <span class="seriesInfo">IEEE standard 802.1ag-2007</span>, <time class="refDate" datetime="2008-01">January 2008</time>. </dd>
<dd class="break"></dd>
<dt id="IEEE.802.1Q">[IEEE.802.1Q]</dt>
        <dd>
<span class="refAuthor">IEEE</span>, <span class="refTitle">"IEEE Standard for Local and metropolitan area networks--Bridges and Bridged Networks"</span>, <span class="seriesInfo">IEEE standard 802.1Q-2014</span>, <span class="seriesInfo">DOI 10.1109/IEEESTD.2014.6991462</span>, <time class="refDate" datetime="2014-12">December 2014</time>, <span>&lt;<a href="https://doi.org/10.1109/IEEESTD.2014.6991462">https://doi.org/10.1109/IEEESTD.2014.6991462</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3031">[RFC3031]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Viswanathan, A.</span>, and <span class="refAuthor">R. Callon</span>, <span class="refTitle">"Multiprotocol Label Switching Architecture"</span>, <span class="seriesInfo">RFC 3031</span>, <span class="seriesInfo">DOI 10.17487/RFC3031</span>, <time class="refDate" datetime="2001-01">January 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3031">https://www.rfc-editor.org/info/rfc3031</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4023">[RFC4023]</dt>
        <dd>
<span class="refAuthor">Worster, T.</span>, <span class="refAuthor">Rekhter, Y.</span>, and <span class="refAuthor">E. Rosen, Ed.</span>, <span class="refTitle">"Encapsulating MPLS in IP or Generic Routing Encapsulation (GRE)"</span>, <span class="seriesInfo">RFC 4023</span>, <span class="seriesInfo">DOI 10.17487/RFC4023</span>, <time class="refDate" datetime="2005-03">March 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4023">https://www.rfc-editor.org/info/rfc4023</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4684">[RFC4684]</dt>
        <dd>
<span class="refAuthor">Marques, P.</span>, <span class="refAuthor">Bonica, R.</span>, <span class="refAuthor">Fang, L.</span>, <span class="refAuthor">Martini, L.</span>, <span class="refAuthor">Raszuk, R.</span>, <span class="refAuthor">Patel, K.</span>, and <span class="refAuthor">J. Guichard</span>, <span class="refTitle">"Constrained Route Distribution for Border Gateway Protocol/MultiProtocol Label Switching (BGP/MPLS) Internet Protocol (IP) Virtual Private Networks (VPNs)"</span>, <span class="seriesInfo">RFC 4684</span>, <span class="seriesInfo">DOI 10.17487/RFC4684</span>, <time class="refDate" datetime="2006-11">November 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4684">https://www.rfc-editor.org/info/rfc4684</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6870">[RFC6870]</dt>
        <dd>
<span class="refAuthor">Muley, P., Ed.</span> and <span class="refAuthor">M. Aissaoui, Ed.</span>, <span class="refTitle">"Pseudowire Preferential Forwarding Status Bit"</span>, <span class="seriesInfo">RFC 6870</span>, <span class="seriesInfo">DOI 10.17487/RFC6870</span>, <time class="refDate" datetime="2013-02">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6870">https://www.rfc-editor.org/info/rfc6870</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7348">[RFC7348]</dt>
        <dd>
<span class="refAuthor">Mahalingam, M.</span>, <span class="refAuthor">Dutt, D.</span>, <span class="refAuthor">Duda, K.</span>, <span class="refAuthor">Agarwal, P.</span>, <span class="refAuthor">Kreeger, L.</span>, <span class="refAuthor">Sridhar, T.</span>, <span class="refAuthor">Bursell, M.</span>, and <span class="refAuthor">C. Wright</span>, <span class="refTitle">"Virtual eXtensible Local Area Network (VXLAN): A Framework for Overlaying Virtualized Layer 2 Networks over Layer 3 Networks"</span>, <span class="seriesInfo">RFC 7348</span>, <span class="seriesInfo">DOI 10.17487/RFC7348</span>, <time class="refDate" datetime="2014-08">August 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7348">https://www.rfc-editor.org/info/rfc7348</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7637">[RFC7637]</dt>
        <dd>
<span class="refAuthor">Garg, P., Ed.</span> and <span class="refAuthor">Y. Wang, Ed.</span>, <span class="refTitle">"NVGRE: Network Virtualization Using Generic Routing Encapsulation"</span>, <span class="seriesInfo">RFC 7637</span>, <span class="seriesInfo">DOI 10.17487/RFC7637</span>, <time class="refDate" datetime="2015-09">September 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7637">https://www.rfc-editor.org/info/rfc7637</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-bess-evpn-virtual-eth-segment">[VIRTUAL-ES]</dt>
        <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Brissette, P.</span>, <span class="refAuthor">Schell, R.</span>, <span class="refAuthor">Drake, J. E.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"EVPN Virtual Ethernet Segment"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bess-evpn-virtual-eth-segment-06</span>, <time class="refDate" datetime="2020-03-09">9 March 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-bess-evpn-virtual-eth-segment-06">https://tools.ietf.org/html/draft-ietf-bess-evpn-virtual-eth-segment-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Y.1731">[Y.1731]</dt>
      <dd>
<span class="refAuthor">ITU-T</span>, <span class="refTitle">"OAM functions and mechanisms for Ethernet based networks"</span>, <span class="seriesInfo">ITU-T Recommendation Y.1731</span>, <time class="refDate" datetime="2019-08">August 2019</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="sect-8">
<section id="section-appendix.a">
      <h2 id="name-acknowledgments">
<a class="section-name selfRef" href="#name-acknowledgments">Acknowledgments</a>
      </h2>
<p id="section-appendix.a-1">
   The authors would like to thank <span class="contact-name">Neil Hart</span>, <span class="contact-name">Vinod Prabhu</span>, and <span class="contact-name">Kiran Nagaraj</span> for
   their valuable comments and feedback. We would also like
   to thank <span class="contact-name">Martin Vigoureux</span> and <span class="contact-name">Alvaro Retana</span> for their detailed reviews and comments.<a class="pilcrow" href="#section-appendix.a-1">¶</a></p>
</section>
</div>
<div id="sect-9">
<section id="section-appendix.b">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<p id="section-appendix.b-1">
   In addition to the authors listed on the front page, the following
   coauthors have also contributed to this document:<a class="pilcrow" href="#section-appendix.b-1">¶</a></p>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Ravi Shekhar</span></div>
<div class="left" dir="auto"><span class="org">Juniper Networks</span></div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Anil Lohiya</span></div>
<div class="left" dir="auto"><span class="org">Juniper Networks</span></div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Wen Lin</span></div>
<div class="left" dir="auto"><span class="org">Juniper Networks</span></div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Florin Balus</span></div>
<div class="left" dir="auto"><span class="org">Cisco</span></div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Patrice Brissette</span></div>
<div class="left" dir="auto"><span class="org">Cisco</span></div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Senad Palislamovic</span></div>
<div class="left" dir="auto"><span class="org">Nokia</span></div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Dennis Cai</span></div>
<div class="left" dir="auto"><span class="org">Alibaba</span></div>
</address>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.c">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Jorge Rabadan (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Nokia</span></div>
<div class="left" dir="auto"><span class="street-address">777 E. Middlefield Road</span></div>
<div class="left" dir="auto">
<span class="locality">Mountain View</span>, <span class="region">CA</span> <span class="postal-code">94043</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:jorge.rabadan@nokia.com">jorge.rabadan@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Senthil Sathappan</span></div>
<div class="left" dir="auto"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:senthil.sathappan@nokia.com">senthil.sathappan@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Wim Henderickx</span></div>
<div class="left" dir="auto"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:wim.henderickx@nokia.com">wim.henderickx@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Ali Sajassi</span></div>
<div class="left" dir="auto"><span class="org">Cisco</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:sajassi@cisco.com">sajassi@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">John Drake</span></div>
<div class="left" dir="auto"><span class="org">Juniper</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:jdrake@juniper.net">jdrake@juniper.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>