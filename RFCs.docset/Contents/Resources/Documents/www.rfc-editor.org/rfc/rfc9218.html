<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9218: Extensible Prioritization Scheme for HTTP</title>
<meta content="奥 一穂 (Kazuho Oku)" name="author"/>
<meta content="Lucas Pardue" name="author"/>
<meta content="
       This document describes a scheme that allows an HTTP client to communicate its
preferences for how the upstream server prioritizes responses to its requests,
and also allows a server to hint to a downstream intermediary how its responses
should be prioritized when they are forwarded.  This document defines the
Priority header field for communicating the initial priority in an HTTP
version-independent manner, as well as HTTP/2 and HTTP/3 frames for
reprioritizing responses. These share a common format structure that is designed
to provide future extensibility. 
    " name="description"/>
<meta content="xml2rfc 3.12.10" name="generator"/>
<meta content="Response priority" name="keyword"/>
<meta content="Stream multiplexing" name="keyword"/>
<meta content="Reprioritization" name="keyword"/>
<meta content="Server scheduling" name="keyword"/>
<meta content="9218" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.12.10
    Python 3.6.15
    appdirs 1.4.4
    ConfigArgParse 1.4.1
    google-i18n-address 2.4.0
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    MarkupSafe 2.0.1
    pycairo 1.15.1
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.4.1
    requests 2.24.0
    setuptools 40.5.0
    six 1.14.0
    WeasyPrint 52.5
-->
<link href="rfc9218.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  pre.breakable {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9218" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-priority-12" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9218</td>
<td class="center">HTTP Priorities</td>
<td class="right">June 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Oku &amp; Pardue</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9218">9218</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2022-06">June 2022</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">
<span class="non-ascii">奥 一穂</span> (<span class="ascii">K. Oku</span>)</div>
<div class="org">Fastly</div>
</div>
<div class="author">
      <div class="author-name">L. Pardue</div>
<div class="org">Cloudflare</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9218</h1>
<h1 id="title">Extensible Prioritization Scheme for HTTP</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document describes a scheme that allows an HTTP client to communicate its
preferences for how the upstream server prioritizes responses to its requests,
and also allows a server to hint to a downstream intermediary how its responses
should be prioritized when they are forwarded.  This document defines the
Priority header field for communicating the initial priority in an HTTP
version-independent manner, as well as HTTP/2 and HTTP/3 frames for
reprioritizing responses. These share a common format structure that is designed
to provide future extensibility.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9218">https://www.rfc-editor.org/info/rfc9218</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="xref" href="#section-1.1">1.1</a>.  <a class="xref" href="#name-notational-conventions">Notational Conventions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-motivation-for-replacing-rf">Motivation for Replacing RFC 7540 Stream Priorities</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a class="xref" href="#section-2.1">2.1</a>.  <a class="xref" href="#name-disabling-rfc-7540-stream-p">Disabling RFC 7540 Stream Priorities</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p class="keepWithNext" id="section-toc.1-1.2.2.1.2.1.1"><a class="xref" href="#section-2.1.1">2.1.1</a>.  <a class="xref" href="#name-advice-when-using-extensibl">Advice when Using Extensible Priorities as the Alternative</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-applicability-of-the-extens">Applicability of the Extensible Priority Scheme</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-priority-parameters">Priority Parameters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-urgency">Urgency</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-incremental">Incremental</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="xref" href="#section-4.3">4.3</a>.  <a class="xref" href="#name-defining-new-priority-param">Defining New Priority Parameters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a class="xref" href="#section-4.3.1">4.3.1</a>.  <a class="xref" href="#name-registration">Registration</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-the-priority-http-header-fi">The Priority HTTP Header Field</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-reprioritization">Reprioritization</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-the-priority_update-frame">The PRIORITY_UPDATE Frame</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="xref" href="#section-7.1">7.1</a>.  <a class="xref" href="#name-http-2-priority_update-fram">HTTP/2 PRIORITY_UPDATE Frame</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="xref" href="#section-7.2">7.2</a>.  <a class="xref" href="#name-http-3-priority_update-fram">HTTP/3 PRIORITY_UPDATE Frame</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-merging-client-and-server-d">Merging Client- and Server-Driven Priority Parameters</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-client-scheduling">Client Scheduling</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-10">10</a>. <a class="xref" href="#name-server-scheduling">Server Scheduling</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="xref" href="#section-10.1">10.1</a>.  <a class="xref" href="#name-intermediaries-with-multipl">Intermediaries with Multiple Backend Connections</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-11">11</a>. <a class="xref" href="#name-scheduling-and-the-connect-">Scheduling and the CONNECT Method</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="xref" href="#section-12">12</a>. <a class="xref" href="#name-retransmission-scheduling">Retransmission Scheduling</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="xref" href="#section-13">13</a>. <a class="xref" href="#name-fairness">Fairness</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a class="xref" href="#section-13.1">13.1</a>.  <a class="xref" href="#name-coalescing-intermediaries">Coalescing Intermediaries</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a class="xref" href="#section-13.2">13.2</a>.  <a class="xref" href="#name-http-1x-back-ends">HTTP/1.x Back Ends</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a class="xref" href="#section-13.3">13.3</a>.  <a class="xref" href="#name-intentional-introduction-of">Intentional Introduction of Unfairness</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a class="xref" href="#section-14">14</a>. <a class="xref" href="#name-why-use-an-end-to-end-heade">Why Use an End-to-End Header Field?</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a class="xref" href="#section-15">15</a>. <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a class="xref" href="#section-16">16</a>. <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a class="xref" href="#section-17">17</a>. <a class="xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.1">
                <p id="section-toc.1-1.17.2.1.1"><a class="xref" href="#section-17.1">17.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.2">
                <p id="section-toc.1-1.17.2.2.1"><a class="xref" href="#section-17.2">17.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a class="xref" href="#appendix-A"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a class="xref" href="#appendix-B"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">It is common for representations of an HTTP <span>[<a class="xref" href="#HTTP">HTTP</a>]</span>
resource to have relationships to one or more other resources. Clients will
often discover these relationships while processing a retrieved representation,
which may lead to further retrieval requests.  Meanwhile, the nature of the
relationships determines whether a client is blocked from continuing to process
locally available resources.  An example of this is the visual rendering of an HTML
document, which could be blocked by the retrieval of a Cascading Style Sheets (CSS) file that the
document refers to. In contrast, inline images do not block rendering and get drawn
incrementally as the chunks of the images arrive.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">HTTP/2 <span>[<a class="xref" href="#HTTP2">HTTP/2</a>]</span> and HTTP/3
<span>[<a class="xref" href="#HTTP3">HTTP/3</a>]</span> support multiplexing of requests and responses in
a single connection. An important feature of any implementation of a protocol
that provides multiplexing is the ability to prioritize the sending of
information. For example, to provide meaningful presentation of an HTML document
at the earliest moment, it is important for an HTTP server to prioritize the
HTTP responses, or the chunks of those HTTP responses, that it sends to a
client.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">HTTP/2 and HTTP/3 servers can schedule transmission of concurrent response data
by any means they choose. Servers can ignore client priority signals and still
successfully serve HTTP responses. However, servers that operate in ignorance
of how clients issue requests and consume responses can cause suboptimal client
application performance. Priority signals allow clients to communicate their
view of request priority. Servers have their own needs that are independent of
client needs, so they often combine priority signals with other available
information in order to inform scheduling of response data.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">RFC 7540 <span>[<a class="xref" href="#RFC7540">RFC7540</a>]</span> stream priority allowed a client to send a series of
priority signals that communicate to the server a "priority tree"; the structure
of this tree represents the client's preferred relative ordering and weighted
distribution of the bandwidth among HTTP responses. Servers could use these
priority signals as input into prioritization decisions.<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">The design and implementation of RFC 7540 stream priority were observed to have
shortcomings, as explained in <a class="xref" href="#motivation">Section 2</a>. HTTP/2
<span>[<a class="xref" href="#HTTP2">HTTP/2</a>]</span> has consequently deprecated the use of
these stream priority signals. The prioritization scheme and priority signals
defined herein can act as a substitute for RFC 7540 stream priority.<a class="pilcrow" href="#section-1-5">¶</a></p>
<p id="section-1-6">This document describes an extensible scheme for prioritizing HTTP responses
that uses absolute values. <a class="xref" href="#parameters">Section 4</a> defines priority parameters, which are
a standardized and extensible format of priority information. <a class="xref" href="#header-field">Section 5</a>
defines the Priority HTTP header field, which is an
end-to-end priority signal that is independent of protocol version. Clients can send this header field to signal their
view of how responses should be prioritized. Similarly, servers behind an
intermediary can use it to signal priority to the intermediary. After sending a
request, a client can change their view of response priority (see
<a class="xref" href="#reprioritization">Section 6</a>) by sending HTTP-version-specific frames as defined in
Sections <a class="xref" href="#h2-update-frame">7.1</a> and <a class="xref" href="#h3-update-frame">7.2</a>.<a class="pilcrow" href="#section-1-6">¶</a></p>
<p id="section-1-7">Header field and frame priority signals are input to a server's response
prioritization process. They are only a suggestion and do not guarantee any
particular processing or transmission order for one response relative to any
other response. Sections <a class="xref" href="#server-scheduling">10</a> and <a class="xref" href="#retransmission-scheduling">12</a> provide
considerations and guidance about how servers might act upon signals.<a class="pilcrow" href="#section-1-7">¶</a></p>
<div id="notational-conventions">
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-notational-conventions">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
        "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>",
        "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>",
        "<span class="bcp14">SHOULD NOT</span>",
        "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
        "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document
        are to be interpreted as described in BCP 14
        <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> when, and only
        when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
<p id="section-1.1-2">This document uses the following terminology from <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8941#section-3">Section 3</a> of [<a class="xref" href="#STRUCTURED-FIELDS">STRUCTURED-FIELDS</a>]</span> to specify syntax and parsing: "Boolean", "Dictionary", and "Integer".<a class="pilcrow" href="#section-1.1-2">¶</a></p>
<p id="section-1.1-3">Example HTTP requests and responses use the HTTP/2-style formatting from
<span>[<a class="xref" href="#HTTP2">HTTP/2</a>]</span>.<a class="pilcrow" href="#section-1.1-3">¶</a></p>
<p id="section-1.1-4">This document uses the variable-length integer encoding from
<span>[<a class="xref" href="#QUIC">QUIC</a>]</span>.<a class="pilcrow" href="#section-1.1-4">¶</a></p>
<p id="section-1.1-5">The term "control stream" is used to describe both the HTTP/2 stream with
identifier 0x0 and the HTTP/3 control stream; see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9114#section-6.2.1">Section 6.2.1</a> of [<a class="xref" href="#HTTP3">HTTP/3</a>]</span>.<a class="pilcrow" href="#section-1.1-5">¶</a></p>
<p id="section-1.1-6">The term "HTTP/2 priority signal" is used to describe the priority information
sent from clients to servers in HTTP/2 frames; see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9113#section-5.3.2">Section 5.3.2</a> of [<a class="xref" href="#HTTP2">HTTP/2</a>]</span>.<a class="pilcrow" href="#section-1.1-6">¶</a></p>
</section>
</div>
</section>
</div>
<div id="motivation">
<section id="section-2">
      <h2 id="name-motivation-for-replacing-rf">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-motivation-for-replacing-rf">Motivation for Replacing RFC 7540 Stream Priorities</a>
      </h2>
<p id="section-2-1">RFC 7540 stream priority (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7540#section-5.3">Section 5.3</a> of [<a class="xref" href="#RFC7540">RFC7540</a>]</span>) is a complex system
where clients signal stream dependencies and weights to describe an unbalanced
tree. It suffered from limited deployment and interoperability and has been deprecated
in a revision of HTTP/2 <span>[<a class="xref" href="#HTTP2">HTTP/2</a>]</span>. HTTP/2 retains these protocol elements in
order to maintain wire compatibility (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9113#section-5.3.2">Section 5.3.2</a> of [<a class="xref" href="#HTTP2">HTTP/2</a>]</span>), which
means that they might still be used even in the presence of alternative signaling,
such as the scheme this document describes.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">Many RFC 7540 server implementations do not act on HTTP/2 priority
signals.<a class="pilcrow" href="#section-2-2">¶</a></p>
<p id="section-2-3">Prioritization can use information that servers have about resources or
the order in which requests are generated. For example, a server, with knowledge
of an HTML document structure, might want to prioritize the delivery of images
that are critical to user experience above other images.  With RFC 7540, it is
difficult for servers to interpret signals from clients for prioritization, as
the same conditions could result in very different signaling from different
clients. This document describes signaling that is simpler and more constrained,
requiring less interpretation and allowing less variation.<a class="pilcrow" href="#section-2-3">¶</a></p>
<p id="section-2-4">RFC 7540 does not define a method that can be used by a server to provide a
priority signal for intermediaries.<a class="pilcrow" href="#section-2-4">¶</a></p>
<p id="section-2-5">RFC 7540 stream priority is expressed relative to other requests sharing the same
connection at the same time. It is difficult to incorporate such a design into
applications that generate requests without knowledge of how other requests
might share a connection, or into protocols that do not have strong ordering
guarantees across streams, like HTTP/3 <span>[<a class="xref" href="#HTTP3">HTTP/3</a>]</span>.<a class="pilcrow" href="#section-2-5">¶</a></p>
<p id="section-2-6">Experiments from independent research <span>[<a class="xref" href="#MARX">MARX</a>]</span> have shown
that simpler schemes can reach at least equivalent performance characteristics
compared to the more complex RFC 7540 setups seen in practice, at least for the
Web use case.<a class="pilcrow" href="#section-2-6">¶</a></p>
<div id="disabling">
<section id="section-2.1">
        <h3 id="name-disabling-rfc-7540-stream-p">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-disabling-rfc-7540-stream-p">Disabling RFC 7540 Stream Priorities</a>
        </h3>
<p id="section-2.1-1">The problems and insights set out above provided the motivation for an
alternative to RFC 7540 stream priority (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9113#section-5.3">Section 5.3</a> of [<a class="xref" href="#HTTP2">HTTP/2</a>]</span>).<a class="pilcrow" href="#section-2.1-1">¶</a></p>
<p id="section-2.1-2">The SETTINGS_NO_RFC7540_PRIORITIES HTTP/2 setting is defined by this document in
order to allow endpoints to omit or ignore HTTP/2 priority signals (see
<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9113#section-5.3.2">Section 5.3.2</a> of [<a class="xref" href="#HTTP2">HTTP/2</a>]</span>), as described below. The value of
SETTINGS_NO_RFC7540_PRIORITIES <span class="bcp14">MUST</span> be 0 or 1. Any value other than 0 or 1 <span class="bcp14">MUST</span>
be treated as a connection error (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9113#section-5.4.1">Section 5.4.1</a> of [<a class="xref" href="#HTTP2">HTTP/2</a>]</span>) of type
PROTOCOL_ERROR. The initial value is 0.<a class="pilcrow" href="#section-2.1-2">¶</a></p>
<p id="section-2.1-3">If endpoints use SETTINGS_NO_RFC7540_PRIORITIES, they <span class="bcp14">MUST</span> send it in the first
SETTINGS frame. Senders <span class="bcp14">MUST NOT</span> change the SETTINGS_NO_RFC7540_PRIORITIES value
after the first SETTINGS frame. Receivers that detect a change <span class="bcp14">MAY</span> treat it as a
connection error of type PROTOCOL_ERROR.<a class="pilcrow" href="#section-2.1-3">¶</a></p>
<p id="section-2.1-4">Clients can send SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 to indicate
that they are not using HTTP/2 priority signals. The SETTINGS frame precedes any
HTTP/2 priority signal sent from clients, so servers can determine whether they
need to allocate any resources to signal handling before signals arrive. A
server that receives SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 <span class="bcp14">MUST</span>
ignore HTTP/2 priority signals.<a class="pilcrow" href="#section-2.1-4">¶</a></p>
<p id="section-2.1-5">Servers can send SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 to indicate
that they will ignore HTTP/2 priority signals sent by clients.<a class="pilcrow" href="#section-2.1-5">¶</a></p>
<p id="section-2.1-6">Endpoints that send SETTINGS_NO_RFC7540_PRIORITIES are encouraged to use
alternative priority signals (for example, see <a class="xref" href="#header-field">Section 5</a> or
<a class="xref" href="#h2-update-frame">Section 7.1</a>), but there is no requirement to use a specific signal type.<a class="pilcrow" href="#section-2.1-6">¶</a></p>
<div id="advice-when-using-extensible-priorities-as-the-alternative">
<section id="section-2.1.1">
          <h4 id="name-advice-when-using-extensibl">
<a class="section-number selfRef" href="#section-2.1.1">2.1.1. </a><a class="section-name selfRef" href="#name-advice-when-using-extensibl">Advice when Using Extensible Priorities as the Alternative</a>
          </h4>
<p id="section-2.1.1-1">Before receiving a SETTINGS frame from a server, a client does not know if the server
is ignoring HTTP/2 priority signals. Therefore, until the client receives the
SETTINGS frame from the server, the client <span class="bcp14">SHOULD</span> send both the HTTP/2
priority signals and the signals of this prioritization scheme (see
Sections <a class="xref" href="#header-field">5</a> and <a class="xref" href="#h2-update-frame">7.1</a>).<a class="pilcrow" href="#section-2.1.1-1">¶</a></p>
<p id="section-2.1.1-2">Once the client receives the first SETTINGS frame that contains the
SETTINGS_NO_RFC7540_PRIORITIES parameter with a value of 1, it <span class="bcp14">SHOULD</span> stop sending
the HTTP/2 priority signals. This avoids sending redundant signals that are
known to be ignored.<a class="pilcrow" href="#section-2.1.1-2">¶</a></p>
<p id="section-2.1.1-3">Similarly, if the client receives SETTINGS_NO_RFC7540_PRIORITIES with a value of 0
or if the settings parameter was absent, it <span class="bcp14">SHOULD</span> stop sending PRIORITY_UPDATE
frames (<a class="xref" href="#h2-update-frame">Section 7.1</a>), since those frames are likely to be ignored.
However, the client <span class="bcp14">MAY</span> continue sending the Priority header field
(<a class="xref" href="#header-field">Section 5</a>), as it is an end-to-end signal that might be useful to nodes
behind the server that the client is directly connected to.<a class="pilcrow" href="#section-2.1.1-3">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="applicability-of-the-extensible-priority-scheme">
<section id="section-3">
      <h2 id="name-applicability-of-the-extens">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-applicability-of-the-extens">Applicability of the Extensible Priority Scheme</a>
      </h2>
<p id="section-3-1">The priority scheme defined by this document is primarily focused on the
prioritization of HTTP response messages (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9110#section-3.4">Section 3.4</a> of [<a class="xref" href="#HTTP">HTTP</a>]</span>). It
defines new priority parameters (<a class="xref" href="#parameters">Section 4</a>) and a means of conveying those
parameters (Sections <a class="xref" href="#header-field">5</a> and <a class="xref" href="#frame">7</a>), which is intended to communicate
the priority of responses to a server that is responsible for prioritizing
them. <a class="xref" href="#server-scheduling">Section 10</a> provides considerations for servers about acting on
those signals in combination with other inputs and factors.<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2">The CONNECT method (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9110#section-9.3.6">Section 9.3.6</a> of [<a class="xref" href="#HTTP">HTTP</a>]</span>) can be used to establish
tunnels. Signaling applies similarly to tunnels; additional considerations for
server prioritization are given in <a class="xref" href="#connect-scheduling">Section 11</a>.<a class="pilcrow" href="#section-3-2">¶</a></p>
<p id="section-3-3"><a class="xref" href="#client-scheduling">Section 9</a> describes how clients can optionally apply elements of
this scheme locally to the request messages that they generate.<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4">Some forms of HTTP extensions might change HTTP/2 or HTTP/3 stream behavior or
define new data carriage mechanisms. Such extensions can themselves define
how this priority scheme is to be applied.<a class="pilcrow" href="#section-3-4">¶</a></p>
</section>
</div>
<div id="parameters">
<section id="section-4">
      <h2 id="name-priority-parameters">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-priority-parameters">Priority Parameters</a>
      </h2>
<p id="section-4-1">The priority information is a sequence of key-value pairs, providing room for
future extensions. Each key-value pair represents a priority parameter.<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2">The Priority HTTP header field (<a class="xref" href="#header-field">Section 5</a>) is an end-to-end way to
transmit this set of priority parameters when a request or a response is issued.
After sending a request, a client can change their view of response priority
(<a class="xref" href="#reprioritization">Section 6</a>) by sending HTTP-version-specific PRIORITY_UPDATE frames as
defined in Sections <a class="xref" href="#h2-update-frame">7.1</a> and <a class="xref" href="#h3-update-frame">7.2</a>. Frames transmit priority
parameters on a single hop only.<a class="pilcrow" href="#section-4-2">¶</a></p>
<p id="section-4-3">Intermediaries can consume and produce priority signals in a PRIORITY_UPDATE
frame or Priority header field. An intermediary that passes only the Priority
request header field to the next hop preserves the original end-to-end signal
from the client; see <a class="xref" href="#header-field-rationale">Section 14</a>.
An intermediary could pass the Priority header field and additionally send a PRIORITY_UPDATE frame. This would have the effect of preserving the original client end-to-end signal, while instructing the next hop to use a different priority, per the guidance in <a class="xref" href="#frame">Section 7</a>. An intermediary that replaces or adds a Priority request header field overrides the original client end-to-end signal, which can affect prioritization for all subsequent recipients of the request.<a class="pilcrow" href="#section-4-3">¶</a></p>
<p id="section-4-4">For both the Priority header field and the PRIORITY_UPDATE frame, the set of
priority parameters is encoded as a Dictionary (see
<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8941#section-3.2">Section 3.2</a> of [<a class="xref" href="#STRUCTURED-FIELDS">STRUCTURED-FIELDS</a>]</span>).<a class="pilcrow" href="#section-4-4">¶</a></p>
<p id="section-4-5">This document defines the urgency (<code>u</code>) and incremental (<code>i</code>) priority parameters.
When receiving an HTTP request that does not carry these priority parameters, a
server <span class="bcp14">SHOULD</span> act as if their default values were specified.<a class="pilcrow" href="#section-4-5">¶</a></p>
<p id="section-4-6">An intermediary can combine signals from requests and responses that it forwards.
Note that omission of priority parameters in responses is handled differently from
omission in requests; see <a class="xref" href="#merging">Section 8</a>.<a class="pilcrow" href="#section-4-6">¶</a></p>
<p id="section-4-7">Receivers parse the Dictionary as described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8941#section-4.2">Section 4.2</a> of [<a class="xref" href="#STRUCTURED-FIELDS">STRUCTURED-FIELDS</a>]</span>. Where the Dictionary is successfully parsed, this document
places the additional requirement that unknown priority parameters, priority
parameters with out-of-range values, or values of unexpected types <span class="bcp14">MUST</span> be
ignored.<a class="pilcrow" href="#section-4-7">¶</a></p>
<div id="urgency">
<section id="section-4.1">
        <h3 id="name-urgency">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-urgency">Urgency</a>
        </h3>
<p id="section-4.1-1">The urgency (<code>u</code>) parameter value is Integer (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8941#section-3.3.1">Section 3.3.1</a> of [<a class="xref" href="#STRUCTURED-FIELDS">STRUCTURED-FIELDS</a>]</span>), between 0 and 7 inclusive, in descending order of priority. The default is 3.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">Endpoints use this parameter to communicate their view of the precedence of
HTTP responses. The chosen value of urgency can be based on the expectation that
servers might use this information to transmit HTTP responses in the order of
their urgency. The smaller the value, the higher the precedence.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<p id="section-4.1-3">The following example shows a request for a CSS file with the urgency set to
<code>0</code>:<a class="pilcrow" href="#section-4.1-3">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1-4">
<pre>:method = GET
:scheme = https
:authority = example.net
:path = /style.css
priority = u=0
</pre><a class="pilcrow" href="#section-4.1-4">¶</a>
</div>
<p id="section-4.1-5">A client that fetches a document that likely consists of multiple HTTP resources
(e.g., HTML) <span class="bcp14">SHOULD</span> assign the default urgency level to the main resource.  This
convention allows servers to refine the urgency using
knowledge specific to the website (see <a class="xref" href="#merging">Section 8</a>).<a class="pilcrow" href="#section-4.1-5">¶</a></p>
<p id="section-4.1-6">The lowest urgency level (7) is reserved for background tasks such as delivery
of software updates. This urgency level <span class="bcp14">SHOULD NOT</span> be used for fetching
responses that have any impact on user interaction.<a class="pilcrow" href="#section-4.1-6">¶</a></p>
</section>
</div>
<div id="incremental">
<section id="section-4.2">
        <h3 id="name-incremental">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-incremental">Incremental</a>
        </h3>
<p id="section-4.2-1">The incremental (<code>i</code>) parameter value is Boolean (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8941#section-3.3.6">Section 3.3.6</a> of [<a class="xref" href="#STRUCTURED-FIELDS">STRUCTURED-FIELDS</a>]</span>). It indicates
if an HTTP response can be processed incrementally, i.e., provide some
meaningful output as chunks of the response arrive.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<p id="section-4.2-2">The default value of the incremental parameter is <code>false</code> (<code>0</code>).<a class="pilcrow" href="#section-4.2-2">¶</a></p>
<p id="section-4.2-3">If a client makes concurrent requests with the incremental parameter set to
<code>false</code>, there is no benefit in serving responses with the same urgency concurrently
because the client is not going to process those responses incrementally.
Serving non-incremental responses with the same urgency one by one, in the order in which those
requests were generated, is considered to be the best strategy.<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<p id="section-4.2-4">If a client makes concurrent requests with the incremental parameter set to
<code>true</code>, serving requests with the same urgency concurrently might be beneficial.
Doing this distributes the connection bandwidth, meaning that responses take
longer to complete. Incremental delivery is most useful where multiple
partial responses might provide some value to clients ahead of a
complete response being available.<a class="pilcrow" href="#section-4.2-4">¶</a></p>
<p id="section-4.2-5">The following example shows a request for a JPEG file with the urgency parameter
set to <code>5</code> and the incremental parameter set to <code>true</code>.<a class="pilcrow" href="#section-4.2-5">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2-6">
<pre>:method = GET
:scheme = https
:authority = example.net
:path = /image.jpg
priority = u=5, i
</pre><a class="pilcrow" href="#section-4.2-6">¶</a>
</div>
</section>
</div>
<div id="new-parameters">
<section id="section-4.3">
        <h3 id="name-defining-new-priority-param">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-defining-new-priority-param">Defining New Priority Parameters</a>
        </h3>
<p id="section-4.3-1">When attempting to define new priority parameters, care must be taken so that
they do not adversely interfere with prioritization performed by existing
endpoints or intermediaries that do not understand the newly defined priority
parameters. Since unknown priority parameters are ignored, new priority
parameters should not change the interpretation of, or modify, the urgency (see
<a class="xref" href="#urgency">Section 4.1</a>) or incremental (see <a class="xref" href="#incremental">Section 4.2</a>) priority parameters in a way
that is not backwards compatible or fallback safe.<a class="pilcrow" href="#section-4.3-1">¶</a></p>
<p id="section-4.3-2">For example, if there is a need to provide more granularity than eight urgency
levels, it would be possible to subdivide the range using an additional priority
parameter. Implementations that do not recognize the parameter can safely
continue to use the less granular eight levels.<a class="pilcrow" href="#section-4.3-2">¶</a></p>
<p id="section-4.3-3">Alternatively, the urgency can be augmented. For example, a graphical user agent
could send a <code>visible</code> priority parameter to indicate if the resource being requested is
within the viewport.<a class="pilcrow" href="#section-4.3-3">¶</a></p>
<p id="section-4.3-4">Generic priority parameters are preferred over vendor-specific,
application-specific, or deployment-specific values. If a generic value cannot be
agreed upon in the community, the parameter's name should be correspondingly
specific (e.g., with a prefix that identifies the vendor, application, or
deployment).<a class="pilcrow" href="#section-4.3-4">¶</a></p>
<div id="register">
<section id="section-4.3.1">
          <h4 id="name-registration">
<a class="section-number selfRef" href="#section-4.3.1">4.3.1. </a><a class="section-name selfRef" href="#name-registration">Registration</a>
          </h4>
<p id="section-4.3.1-1">New priority parameters can be defined by registering them in the "HTTP Priority"
registry. This registry governs the keys (short textual strings) used
in the Dictionary (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8941#section-3.2">Section 3.2</a> of [<a class="xref" href="#STRUCTURED-FIELDS">STRUCTURED-FIELDS</a>]</span>).
Since each HTTP request can have associated priority signals, there is value
in having short key lengths, especially single-character strings. In order to
encourage extensions while avoiding unintended conflict among attractive key
values, the "HTTP Priority" registry operates two registration policies,
depending on key length.<a class="pilcrow" href="#section-4.3.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.1-2.1">Registration requests for priority parameters with a key length of one use the
Specification Required policy, per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8126#section-4.6">Section 4.6</a> of [<a class="xref" href="#RFC8126">RFC8126</a>]</span>.<a class="pilcrow" href="#section-4.3.1-2.1">¶</a>
</li>
            <li class="normal" id="section-4.3.1-2.2">Registration requests for priority parameters with a key length greater than
one use the Expert Review policy, per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8126#section-4.5">Section 4.5</a> of [<a class="xref" href="#RFC8126">RFC8126</a>]</span>. A
specification document is appreciated but not required.<a class="pilcrow" href="#section-4.3.1-2.2">¶</a>
</li>
          </ul>
<p id="section-4.3.1-3">When reviewing registration requests, the designated expert(s) can consider the
additional guidance provided in <a class="xref" href="#new-parameters">Section 4.3</a> but cannot use it as a basis
for rejection.<a class="pilcrow" href="#section-4.3.1-3">¶</a></p>
<p id="section-4.3.1-4">Registration requests should use the following template:<a class="pilcrow" href="#section-4.3.1-4">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.3.1-5">
            <dt id="section-4.3.1-5.1">
Name:  </dt>
            <dd id="section-4.3.1-5.2" style="margin-left: 1.5em">
              <p id="section-4.3.1-5.2.1">[a name for the priority parameter that matches the parameter key]<a class="pilcrow" href="#section-4.3.1-5.2.1">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-4.3.1-5.3">
Description:  </dt>
            <dd id="section-4.3.1-5.4" style="margin-left: 1.5em">
              <p id="section-4.3.1-5.4.1">[a description of the priority parameter semantics and value]<a class="pilcrow" href="#section-4.3.1-5.4.1">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-4.3.1-5.5">
Reference:  </dt>
            <dd id="section-4.3.1-5.6" style="margin-left: 1.5em">
              <p id="section-4.3.1-5.6.1">[to a specification defining this priority parameter]<a class="pilcrow" href="#section-4.3.1-5.6.1">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-4.3.1-6">See the registry at <span>&lt;<a href="https://www.iana.org/assignments/http-priority">https://www.iana.org/assignments/http-priority</a>&gt;</span> for details on
where to send registration requests.<a class="pilcrow" href="#section-4.3.1-6">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="header-field">
<section id="section-5">
      <h2 id="name-the-priority-http-header-fi">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-the-priority-http-header-fi">The Priority HTTP Header Field</a>
      </h2>
<p id="section-5-1">The Priority HTTP header field is a Dictionary that carries priority parameters (see <a class="xref" href="#parameters">Section 4</a>).
It can appear in requests and responses. It is an end-to-end signal that
indicates the endpoint's view of how HTTP responses should be prioritized.
<a class="xref" href="#merging">Section 8</a> describes how intermediaries can combine the priority information
sent from clients and servers. Clients cannot interpret the appearance or
omission of a Priority response header field as acknowledgement that any
prioritization has occurred. Guidance for how endpoints can act on Priority
header values is given in Sections <a class="xref" href="#client-scheduling">9</a> and <a class="xref" href="#server-scheduling">10</a>.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">An HTTP request with a Priority header field might be cached and reused for
subsequent requests; see <span>[<a class="xref" href="#CACHING">CACHING</a>]</span>. When an origin
server generates the Priority response header field based on properties of an
HTTP request it receives, the server is expected to control the cacheability or
the applicability of the cached response by using header fields that control
the caching behavior (e.g., Cache-Control, Vary).<a class="pilcrow" href="#section-5-2">¶</a></p>
</section>
</div>
<div id="reprioritization">
<section id="section-6">
      <h2 id="name-reprioritization">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-reprioritization">Reprioritization</a>
      </h2>
<p id="section-6-1">After a client sends a request, it may be beneficial to change the priority of
the response. As an example, a web browser might issue a prefetch request for a
JavaScript file with the urgency parameter of the Priority request header field
set to <code>u=7</code> (background). Then, when the user navigates to a page that
references the new JavaScript file, while the prefetch is in progress, the
browser would send a reprioritization signal with the Priority Field Value set
to <code>u=0</code>. The PRIORITY_UPDATE frame (<a class="xref" href="#frame">Section 7</a>) can be used for such
reprioritization.<a class="pilcrow" href="#section-6-1">¶</a></p>
</section>
</div>
<div id="frame">
<section id="section-7">
      <h2 id="name-the-priority_update-frame">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-the-priority_update-frame">The PRIORITY_UPDATE Frame</a>
      </h2>
<p id="section-7-1">This document specifies a new PRIORITY_UPDATE frame for HTTP/2 <span>[<a class="xref" href="#HTTP2">HTTP/2</a>]</span>
and HTTP/3 <span>[<a class="xref" href="#HTTP3">HTTP/3</a>]</span>. It carries priority parameters and
references the target of the prioritization based on a version-specific
identifier. In HTTP/2, this identifier is the stream ID; in HTTP/3, the
identifier is either the stream ID or push ID. Unlike the Priority header field,
the PRIORITY_UPDATE frame is a hop-by-hop signal.<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">PRIORITY_UPDATE frames are sent by clients on the control stream, allowing them
to be sent independently of the stream that carries the response. This means
they can be used to reprioritize a response or a push stream, or to signal the
initial priority of a response instead of the Priority header field.<a class="pilcrow" href="#section-7-2">¶</a></p>
<p id="section-7-3">A PRIORITY_UPDATE frame communicates a complete set of all priority parameters
in the Priority Field Value field. Omitting a priority parameter is a signal to
use its default value. Failure to parse the Priority Field Value <span class="bcp14">MAY</span> be treated
as a connection error. In HTTP/2, the error is of type PROTOCOL_ERROR; in HTTP/3,
the error is of type H3_GENERAL_PROTOCOL_ERROR.<a class="pilcrow" href="#section-7-3">¶</a></p>
<p id="section-7-4">A client <span class="bcp14">MAY</span> send a PRIORITY_UPDATE frame before the stream that it references
is open (except for HTTP/2 push streams; see <a class="xref" href="#h2-update-frame">Section 7.1</a>). Furthermore,
HTTP/3 offers no guaranteed ordering across streams, which could cause the frame
to be received earlier than intended. Either case leads to a race condition
where a server receives a PRIORITY_UPDATE frame that references a request stream
that is yet to be opened. To solve this condition, for the purposes of
scheduling, the most recently received PRIORITY_UPDATE frame can be considered
as the most up-to-date information that overrides any other signal. Servers
<span class="bcp14">SHOULD</span> buffer the most recently received PRIORITY_UPDATE frame and apply it once
the referenced stream is opened. Holding PRIORITY_UPDATE frames for each stream
requires server resources, which can be bounded by local implementation policy.
Although there is no limit to the number of PRIORITY_UPDATE frames that can be
sent, storing only the most recently received frame limits resource commitment.<a class="pilcrow" href="#section-7-4">¶</a></p>
<div id="h2-update-frame">
<section id="section-7.1">
        <h3 id="name-http-2-priority_update-fram">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-http-2-priority_update-fram">HTTP/2 PRIORITY_UPDATE Frame</a>
        </h3>
<p id="section-7.1-1">The HTTP/2 PRIORITY_UPDATE frame (type=0x10) is used by clients to signal the
initial priority of a response, or to reprioritize a response or push stream. It
carries the stream ID of the response and the priority in ASCII text, using the
same representation as the Priority header field value.<a class="pilcrow" href="#section-7.1-1">¶</a></p>
<p id="section-7.1-2">The Stream Identifier field (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9113#section-5.1.1">Section 5.1.1</a> of [<a class="xref" href="#HTTP2">HTTP/2</a>]</span>) in the
PRIORITY_UPDATE frame header <span class="bcp14">MUST</span> be zero (0x0). Receiving a PRIORITY_UPDATE
frame with a field of any other value <span class="bcp14">MUST</span> be treated as a connection error of
type PROTOCOL_ERROR.<a class="pilcrow" href="#section-7.1-2">¶</a></p>
<span id="name-http-2-priority_update-frame"></span><div id="fig-h2-reprioritization-frame">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-7.1-3.1">
<pre>HTTP/2 PRIORITY_UPDATE Frame {
  Length (24),
  Type (8) = 0x10,

  Unused Flags (8),

  Reserved (1),
  Stream Identifier (31),

  Reserved (1),
  Prioritized Stream ID (31),
  Priority Field Value (..),
}
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-http-2-priority_update-frame">HTTP/2 PRIORITY_UPDATE Frame Format</a>
          </figcaption></figure>
</div>
<p id="section-7.1-4">The Length, Type, Unused Flag(s), Reserved, and Stream Identifier fields are
described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9113#section-4">Section 4</a> of [<a class="xref" href="#HTTP2">HTTP/2</a>]</span>. The PRIORITY_UPDATE frame payload
contains the following additional fields:<a class="pilcrow" href="#section-7.1-4">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.1-5">
          <dt id="section-7.1-5.1">
Prioritized Stream ID:  </dt>
          <dd id="section-7.1-5.2" style="margin-left: 1.5em">
            <p id="section-7.1-5.2.1">A 31-bit stream identifier for the stream that is the target of the priority
update.<a class="pilcrow" href="#section-7.1-5.2.1">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-5.3">
Priority Field Value:  </dt>
          <dd id="section-7.1-5.4" style="margin-left: 1.5em">
            <p id="section-7.1-5.4.1">The priority update value in ASCII text, encoded using Structured Fields. This
is the same representation as the Priority header field value.<a class="pilcrow" href="#section-7.1-5.4.1">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-7.1-6">When the PRIORITY_UPDATE frame applies to a request stream, clients <span class="bcp14">SHOULD</span>
provide a prioritized stream ID that refers to a stream in the "open",
"half-closed (local)", or "idle" state (i.e., streams where data might still be received). Servers can discard frames where the
prioritized stream ID refers to a stream in the "half-closed (local)" or
"closed" state (i.e., streams where no further data will be sent).
 The number of streams that have been prioritized but remain in
the "idle" state plus the number of active streams (those in the "open" state or
in either of the "half-closed" states; see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9113#section-5.1.2">Section 5.1.2</a> of [<a class="xref" href="#HTTP2">HTTP/2</a>]</span>) <span class="bcp14">MUST NOT</span> exceed
the value of the SETTINGS_MAX_CONCURRENT_STREAMS parameter. Servers that receive
such a PRIORITY_UPDATE <span class="bcp14">MUST</span> respond with a connection error of type
PROTOCOL_ERROR.<a class="pilcrow" href="#section-7.1-6">¶</a></p>
<p id="section-7.1-7">When the PRIORITY_UPDATE frame applies to a push stream, clients <span class="bcp14">SHOULD</span> provide
a prioritized stream ID that refers to a stream in the "reserved (remote)" or
"half-closed (local)" state. Servers can discard frames where the prioritized
stream ID refers to a stream in the "closed" state. Clients <span class="bcp14">MUST NOT</span> provide a
prioritized stream ID that refers to a push stream in the "idle" state. Servers
that receive a PRIORITY_UPDATE for a push stream in the "idle" state <span class="bcp14">MUST</span>
respond with a connection error of type PROTOCOL_ERROR.<a class="pilcrow" href="#section-7.1-7">¶</a></p>
<p id="section-7.1-8">If a PRIORITY_UPDATE frame is received with a prioritized stream ID of 0x0, the
recipient <span class="bcp14">MUST</span> respond with a connection error of type PROTOCOL_ERROR.<a class="pilcrow" href="#section-7.1-8">¶</a></p>
<p id="section-7.1-9">Servers <span class="bcp14">MUST NOT</span> send PRIORITY_UPDATE frames. If a client receives a
PRIORITY_UPDATE frame, it <span class="bcp14">MUST</span> respond with a connection error of type
PROTOCOL_ERROR.<a class="pilcrow" href="#section-7.1-9">¶</a></p>
</section>
</div>
<div id="h3-update-frame">
<section id="section-7.2">
        <h3 id="name-http-3-priority_update-fram">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-http-3-priority_update-fram">HTTP/3 PRIORITY_UPDATE Frame</a>
        </h3>
<p id="section-7.2-1">The HTTP/3 PRIORITY_UPDATE frame (type=0xF0700 or 0xF0701) is used by clients to
signal the initial priority of a response, or to reprioritize a response or push
stream. It carries the identifier of the element that is being prioritized and
the updated priority in ASCII text that uses the same representation as that of
the Priority header field value. PRIORITY_UPDATE with a frame type of 0xF0700 is
used for request streams, while PRIORITY_UPDATE with a frame type of 0xF0701 is
used for push streams.<a class="pilcrow" href="#section-7.2-1">¶</a></p>
<p id="section-7.2-2">The PRIORITY_UPDATE frame <span class="bcp14">MUST</span> be sent on the client control stream
(see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9114#section-6.2.1">Section 6.2.1</a> of [<a class="xref" href="#HTTP3">HTTP/3</a>]</span>). Receiving a PRIORITY_UPDATE frame on a
stream other than the client control stream <span class="bcp14">MUST</span> be treated as a connection
error of type H3_FRAME_UNEXPECTED.<a class="pilcrow" href="#section-7.2-2">¶</a></p>
<span id="name-http-3-priority_update-frame"></span><div id="fig-h3-reprioritization-frame">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-7.2-3.1">
<pre>HTTP/3 PRIORITY_UPDATE Frame {
  Type (i) = 0xF0700..0xF0701,
  Length (i),
  Prioritized Element ID (i),
  Priority Field Value (..),
}
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-http-3-priority_update-frame">HTTP/3 PRIORITY_UPDATE Frame</a>
          </figcaption></figure>
</div>
<p id="section-7.2-4">The PRIORITY_UPDATE frame payload has the following fields:<a class="pilcrow" href="#section-7.2-4">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.2-5">
          <dt id="section-7.2-5.1">
Prioritized Element ID:  </dt>
          <dd id="section-7.2-5.2" style="margin-left: 1.5em">
            <p id="section-7.2-5.2.1">The stream ID or push ID that is the target of the priority update.<a class="pilcrow" href="#section-7.2-5.2.1">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.2-5.3">
Priority Field Value:  </dt>
          <dd id="section-7.2-5.4" style="margin-left: 1.5em">
            <p id="section-7.2-5.4.1">The priority update value in ASCII text, encoded using Structured Fields. This
is the same representation as the Priority header field value.<a class="pilcrow" href="#section-7.2-5.4.1">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-7.2-6">The request-stream variant of PRIORITY_UPDATE (type=0xF0700) <span class="bcp14">MUST</span> reference a
request stream. If a server receives a PRIORITY_UPDATE (type=0xF0700) for a
stream ID that is not a request stream, this <span class="bcp14">MUST</span> be treated as a connection
error of type H3_ID_ERROR. The stream ID <span class="bcp14">MUST</span> be within the client-initiated
bidirectional stream limit. If a server receives a PRIORITY_UPDATE
(type=0xF0700) with a stream ID that is beyond the stream limits, this <span class="bcp14">SHOULD</span> be
treated as a connection error of type H3_ID_ERROR. Generating an error is not
mandatory because HTTP/3 implementations might have practical barriers to
determining the active stream concurrency limit that is applied by the QUIC
layer.<a class="pilcrow" href="#section-7.2-6">¶</a></p>
<p id="section-7.2-7">The push-stream variant of PRIORITY_UPDATE (type=0xF0701) <span class="bcp14">MUST</span> reference a promised
push stream. If a server receives a PRIORITY_UPDATE (type=0xF0701) with a push ID
that is greater than the maximum push ID or that has not yet been promised, this
<span class="bcp14">MUST</span> be treated as a connection error of type H3_ID_ERROR.<a class="pilcrow" href="#section-7.2-7">¶</a></p>
<p id="section-7.2-8">Servers <span class="bcp14">MUST NOT</span> send PRIORITY_UPDATE frames of either type. If a client
receives a PRIORITY_UPDATE frame, this <span class="bcp14">MUST</span> be treated as a connection error of
type H3_FRAME_UNEXPECTED.<a class="pilcrow" href="#section-7.2-8">¶</a></p>
</section>
</div>
</section>
</div>
<div id="merging">
<section id="section-8">
      <h2 id="name-merging-client-and-server-d">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-merging-client-and-server-d">Merging Client- and Server-Driven Priority Parameters</a>
      </h2>
<p id="section-8-1">It is not always the case that the client has the best understanding of how the
HTTP responses deserve to be prioritized. The server might have additional
information that can be combined with the client's indicated priority in order
to improve the prioritization of the response. For example, use of an HTML
document might depend heavily on one of the inline images; the existence of such
dependencies is typically best known to the server. Or, a server that receives
requests for a font <span>[<a class="xref" href="#RFC8081">RFC8081</a>]</span> and images with the same urgency might give
higher precedence to the font, so that a visual client can render textual
information at an early moment.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2">An origin can use the Priority response header field to indicate its view on how
an HTTP response should be prioritized. An intermediary that forwards an HTTP
response can use the priority parameters found in the Priority response header
field, in combination with the client Priority request header field, as input to
its prioritization process. No guidance is provided for merging priorities; this
is left as an implementation decision.<a class="pilcrow" href="#section-8-2">¶</a></p>
<p id="section-8-3">The absence of a priority parameter in an HTTP response indicates the server's
disinterest in changing the client-provided value. This is different from the
request header field, in which omission of a priority parameter implies the use of its default value (see <a class="xref" href="#parameters">Section 4</a>).<a class="pilcrow" href="#section-8-3">¶</a></p>
<p id="section-8-4">As a non-normative example, when the client sends an HTTP request with the
urgency parameter set to <code>5</code> and the incremental parameter set to <code>true</code><a class="pilcrow" href="#section-8-4">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-5">
<pre>:method = GET
:scheme = https
:authority = example.net
:path = /menu.png
priority = u=5, i
</pre><a class="pilcrow" href="#section-8-5">¶</a>
</div>
<p id="section-8-6">and the origin responds with<a class="pilcrow" href="#section-8-6">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-7">
<pre>:status = 200
content-type = image/png
priority = u=1
</pre><a class="pilcrow" href="#section-8-7">¶</a>
</div>
<p id="section-8-8">the intermediary might alter its understanding of the urgency from <code>5</code> to <code>1</code>,
because it prefers the server-provided value over the client's. The incremental
value continues to be <code>true</code>, i.e., the value specified by the client, as the server did
not specify the incremental (<code>i</code>) parameter.<a class="pilcrow" href="#section-8-8">¶</a></p>
</section>
</div>
<div id="client-scheduling">
<section id="section-9">
      <h2 id="name-client-scheduling">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-client-scheduling">Client Scheduling</a>
      </h2>
<p id="section-9-1">A client <span class="bcp14">MAY</span> use priority values to make local processing or scheduling choices
about the requests it initiates.<a class="pilcrow" href="#section-9-1">¶</a></p>
</section>
</div>
<div id="server-scheduling">
<section id="section-10">
      <h2 id="name-server-scheduling">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-server-scheduling">Server Scheduling</a>
      </h2>
<p id="section-10-1">It is generally beneficial for an HTTP server to send all responses as early as
possible. However, when serving multiple requests on a single connection, there
could be competition between the requests for resources such as connection
bandwidth. This section describes considerations regarding how servers can
schedule the order in which the competing responses will be sent when such
competition exists.<a class="pilcrow" href="#section-10-1">¶</a></p>
<p id="section-10-2">Server scheduling is a prioritization process based on many inputs, with
priority signals being only one form of input. Factors such as implementation
choices or deployment environment also play a role. Any given connection is
likely to have many dynamic permutations. For these reasons, it is not possible
to describe a universal scheduling algorithm. This document provides some basic,
non-exhaustive recommendations for how servers might act on priority
parameters. It does not describe in detail how servers might combine priority
signals with other factors. Endpoints cannot depend on particular treatment
based on priority signals. Expressing priority is only a suggestion.<a class="pilcrow" href="#section-10-2">¶</a></p>
<p id="section-10-3">It is <span class="bcp14">RECOMMENDED</span> that, when possible, servers respect the urgency parameter
(<a class="xref" href="#urgency">Section 4.1</a>), sending higher-urgency responses before lower-urgency responses.<a class="pilcrow" href="#section-10-3">¶</a></p>
<p id="section-10-4">The incremental parameter indicates how a client processes response bytes as
they arrive. It is <span class="bcp14">RECOMMENDED</span> that, when possible, servers respect the
incremental parameter (<a class="xref" href="#incremental">Section 4.2</a>).<a class="pilcrow" href="#section-10-4">¶</a></p>
<p id="section-10-5">Non-incremental responses of the same urgency <span class="bcp14">SHOULD</span> be served by prioritizing
bandwidth allocation in ascending order of the stream ID, which corresponds to
the order in which clients make requests. Doing so ensures that clients can use
request ordering to influence response order.<a class="pilcrow" href="#section-10-5">¶</a></p>
<p id="section-10-6">Incremental responses of the same urgency <span class="bcp14">SHOULD</span> be served by sharing bandwidth
among them. The message content of incremental responses is used as parts, or chunks,
are received. A client might benefit more from receiving a portion of all
these resources rather than the entirety of a single resource. How large a
portion of the resource is needed to be useful in improving performance varies.
Some resource types place critical elements early; others can use information
progressively. This scheme provides no explicit mandate about how a server
should use size, type, or any other input to decide how to prioritize.<a class="pilcrow" href="#section-10-6">¶</a></p>
<p id="section-10-7">There can be scenarios where a server will need to schedule multiple incremental
and non-incremental responses at the same urgency level. Strictly abiding by the
scheduling guidance based on urgency and request generation order might lead
to suboptimal results at the client, as early non-incremental responses might
prevent the serving of incremental responses issued later. The following are
examples of such challenges:<a class="pilcrow" href="#section-10-7">¶</a></p>
<ol class="normal type-1" id="section-10-8" start="1" type="1">
<li id="section-10-8.1">At the same urgency level, a non-incremental request for a large resource
followed by an incremental request for a small resource.<a class="pilcrow" href="#section-10-8.1">¶</a>
</li>
        <li id="section-10-8.2">At the same urgency level, an incremental request of indeterminate length
followed by a non-incremental large resource.<a class="pilcrow" href="#section-10-8.2">¶</a>
</li>
      </ol>
<p id="section-10-9">It is <span class="bcp14">RECOMMENDED</span> that servers avoid such starvation where possible. The method
for doing so is an implementation decision. For example, a server might
preemptively send responses of a particular incremental type based on other
information such as content size.<a class="pilcrow" href="#section-10-9">¶</a></p>
<p id="section-10-10">Optimal scheduling of server push is difficult, especially when pushed resources
contend with active concurrent requests. Servers can consider many factors when
scheduling, such as the type or size of resource being pushed, the priority of
the request that triggered the push, the count of active concurrent responses,
the priority of other active concurrent responses, etc. There is no general
guidance on the best way to apply these. A server that is too simple could
easily push at too high a priority and block client requests, or push at too low
a priority and delay the response, negating intended goals of server push.<a class="pilcrow" href="#section-10-10">¶</a></p>
<p id="section-10-11">Priority signals are a factor for server push scheduling. The concept of
parameter value defaults applies slightly differently because there is no
explicit client-signaled initial priority. A server can apply priority signals
provided in an origin response; see the merging guidance given in <a class="xref" href="#merging">Section 8</a>.
In the absence of origin signals, applying default parameter values could be
suboptimal. By whatever means a server decides to schedule a pushed response, it
can signal the intended priority to the client by including the Priority field
in a PUSH_PROMISE or HEADERS frame.<a class="pilcrow" href="#section-10-11">¶</a></p>
<div id="intermediaries-with-multiple-backend-connections">
<section id="section-10.1">
        <h3 id="name-intermediaries-with-multipl">
<a class="section-number selfRef" href="#section-10.1">10.1. </a><a class="section-name selfRef" href="#name-intermediaries-with-multipl">Intermediaries with Multiple Backend Connections</a>
        </h3>
<p id="section-10.1-1">An intermediary serving an HTTP connection might split requests over multiple
backend connections. When it applies prioritization rules strictly, low-priority
requests cannot make progress while requests with higher priorities are in
flight. This blocking can propagate to backend connections, which the peer might
interpret as a connection stall. Endpoints often implement protections against
stalls, such as abruptly closing connections after a certain time period. To
reduce the possibility of this occurring, intermediaries can avoid strictly
following prioritization and instead allocate small amounts of bandwidth for all
the requests that they are forwarding, so that every request can make some
progress over time.<a class="pilcrow" href="#section-10.1-1">¶</a></p>
<p id="section-10.1-2">Similarly, servers <span class="bcp14">SHOULD</span> allocate some amount of bandwidths to streams acting
as tunnels.<a class="pilcrow" href="#section-10.1-2">¶</a></p>
</section>
</div>
</section>
</div>
<div id="connect-scheduling">
<section id="section-11">
      <h2 id="name-scheduling-and-the-connect-">
<a class="section-number selfRef" href="#section-11">11. </a><a class="section-name selfRef" href="#name-scheduling-and-the-connect-">Scheduling and the CONNECT Method</a>
      </h2>
<p id="section-11-1">When a stream carries a CONNECT request, the scheduling guidance in
this document applies to the frames on the stream.  A client that issues multiple
CONNECT requests can set the incremental parameter to <code>true</code>. Servers that
implement the recommendations for handling of the incremental parameter (<a class="xref" href="#server-scheduling">Section 10</a>) are likely to schedule these fairly, preventing one
CONNECT stream from blocking others.<a class="pilcrow" href="#section-11-1">¶</a></p>
</section>
</div>
<div id="retransmission-scheduling">
<section id="section-12">
      <h2 id="name-retransmission-scheduling">
<a class="section-number selfRef" href="#section-12">12. </a><a class="section-name selfRef" href="#name-retransmission-scheduling">Retransmission Scheduling</a>
      </h2>
<p id="section-12-1">Transport protocols such as TCP and QUIC provide reliability by detecting packet
losses and retransmitting lost information. In addition to the considerations in
<a class="xref" href="#server-scheduling">Section 10</a>, scheduling of retransmission data could compete with new
data. The remainder of this section discusses considerations when using QUIC.<a class="pilcrow" href="#section-12-1">¶</a></p>
<p id="section-12-2"><span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9000#section-13.3">Section 13.3</a> of [<a class="xref" href="#QUIC">QUIC</a>]</span> states the following: "Endpoints <span class="bcp14">SHOULD</span> prioritize
retransmission of data over sending new data, unless priorities specified by the
application indicate otherwise". When an HTTP/3 application uses the priority
scheme defined in this document and the QUIC transport implementation supports
application-indicated stream priority, a transport that considers the relative
priority of streams when scheduling both new data and retransmission data might
better match the expectations of the application. However, there are no
requirements on how a transport chooses to schedule based on this information
because the decision depends on several factors and trade-offs. It could
prioritize new data for a higher-urgency stream over retransmission data for a
lower-priority stream, or it could prioritize retransmission data over new data
irrespective of urgencies.<a class="pilcrow" href="#section-12-2">¶</a></p>
<p id="section-12-3"><span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9002#section-6.2.4">Section 6.2.4</a> of [<a class="xref" href="#QUIC-RECOVERY">QUIC-RECOVERY</a>]</span> also highlights considerations regarding
application priorities when sending probe packets after Probe Timeout timer
expiration. A QUIC implementation supporting application-indicated priorities
might use the relative priority of streams when choosing probe data.<a class="pilcrow" href="#section-12-3">¶</a></p>
</section>
</div>
<div id="fairness">
<section id="section-13">
      <h2 id="name-fairness">
<a class="section-number selfRef" href="#section-13">13. </a><a class="section-name selfRef" href="#name-fairness">Fairness</a>
      </h2>
<p id="section-13-1">Typically, HTTP implementations depend on the underlying transport to maintain
fairness between connections competing for bandwidth. When an intermediary receives HTTP requests on client connections, it forwards them to backend connections. Depending on how the intermediary coalesces or splits requests across different backend connections, different clients might experience dissimilar performance. This dissimilarity might expand if the intermediary also uses priority signals when
forwarding requests. Sections <a class="xref" href="#coalescing">13.1</a> and <a class="xref" href="#h1-backends">13.2</a> discuss
mitigations of this expansion of unfairness.<a class="pilcrow" href="#section-13-1">¶</a></p>
<p id="section-13-2">Conversely, <a class="xref" href="#intentional-unfairness">Section 13.3</a> discusses how servers might intentionally
allocate unequal bandwidth to some connections, depending on the priority
signals.<a class="pilcrow" href="#section-13-2">¶</a></p>
<div id="coalescing">
<section id="section-13.1">
        <h3 id="name-coalescing-intermediaries">
<a class="section-number selfRef" href="#section-13.1">13.1. </a><a class="section-name selfRef" href="#name-coalescing-intermediaries">Coalescing Intermediaries</a>
        </h3>
<p id="section-13.1-1">When an intermediary coalesces HTTP requests coming from multiple clients into
one HTTP/2 or HTTP/3 connection going to the backend server, requests that
originate from one client might carry signals indicating higher priority than
those coming from others.<a class="pilcrow" href="#section-13.1-1">¶</a></p>
<p id="section-13.1-2">It is sometimes beneficial for the server running behind an intermediary to obey
Priority header field values. As an example, a resource-constrained
server might defer the transmission of software update files that have the
background urgency level (7). However, in the worst case, the asymmetry
between the priority declared by multiple clients might cause all responses going to
one user agent to be delayed until all responses going to another user agent have
 been sent.<a class="pilcrow" href="#section-13.1-2">¶</a></p>
<p id="section-13.1-3">In order to mitigate this fairness problem, a server could use knowledge about
the intermediary as another input in its prioritization decisions. For
instance, if a server knows the intermediary is coalescing requests, then it
could avoid serving the responses in their entirety and instead distribute
bandwidth (for example, in a round-robin manner). This can work if the
constrained resource is network capacity between the intermediary and the user
agent, as the intermediary buffers responses and forwards the chunks based on
the prioritization scheme it implements.<a class="pilcrow" href="#section-13.1-3">¶</a></p>
<p id="section-13.1-4">A server can determine if a request came from an intermediary through
configuration or can check to see if the request contains one of the following
header fields:<a class="pilcrow" href="#section-13.1-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-13.1-5.1">Forwarded <span>[<a class="xref" href="#FORWARDED">FORWARDED</a>]</span>, X-Forwarded-For<a class="pilcrow" href="#section-13.1-5.1">¶</a>
</li>
          <li class="normal" id="section-13.1-5.2">Via (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9110#section-7.6.3">Section 7.6.3</a> of [<a class="xref" href="#HTTP">HTTP</a>]</span>)<a class="pilcrow" href="#section-13.1-5.2">¶</a>
</li>
        </ul>
</section>
</div>
<div id="h1-backends">
<section id="section-13.2">
        <h3 id="name-http-1x-back-ends">
<a class="section-number selfRef" href="#section-13.2">13.2. </a><a class="section-name selfRef" href="#name-http-1x-back-ends">HTTP/1.x Back Ends</a>
        </h3>
<p id="section-13.2-1">It is common for Content Delivery Network (CDN) infrastructure to support different HTTP versions on the
front end and back end. For instance, the client-facing edge might support
HTTP/2 and HTTP/3 while communication to backend servers is done using
HTTP/1.1. Unlike connection coalescing, the CDN will "demux" requests into
discrete connections to the back end. Response multiplexing in a single connection is not supported by HTTP/1.1 (or older), so there is not a fairness problem.
However, backend servers <span class="bcp14">MAY</span> still use client headers for request scheduling.
Backend servers <span class="bcp14">SHOULD</span> only schedule based on client priority information where
that information can be scoped to individual end clients. Authentication and
other session information might provide this linkability.<a class="pilcrow" href="#section-13.2-1">¶</a></p>
</section>
</div>
<div id="intentional-unfairness">
<section id="section-13.3">
        <h3 id="name-intentional-introduction-of">
<a class="section-number selfRef" href="#section-13.3">13.3. </a><a class="section-name selfRef" href="#name-intentional-introduction-of">Intentional Introduction of Unfairness</a>
        </h3>
<p id="section-13.3-1">It is sometimes beneficial to deprioritize the transmission of one connection
over others, knowing that doing so introduces a certain amount of unfairness
between the connections and therefore between the requests served on those
connections.<a class="pilcrow" href="#section-13.3-1">¶</a></p>
<p id="section-13.3-2">For example, a server might use a scavenging congestion controller on
connections that only convey background priority responses such as software
update images. Doing so improves responsiveness of other connections at the cost
of delaying the delivery of updates.<a class="pilcrow" href="#section-13.3-2">¶</a></p>
</section>
</div>
</section>
</div>
<div id="header-field-rationale">
<section id="section-14">
      <h2 id="name-why-use-an-end-to-end-heade">
<a class="section-number selfRef" href="#section-14">14. </a><a class="section-name selfRef" href="#name-why-use-an-end-to-end-heade">Why Use an End-to-End Header Field?</a>
      </h2>
<p id="section-14-1">In contrast to the prioritization scheme of HTTP/2, which uses a hop-by-hop frame,
the Priority header field is defined as "end-to-end".<a class="pilcrow" href="#section-14-1">¶</a></p>
<p id="section-14-2">The way that a client processes a response is a property associated with the
client generating that request, not that of an intermediary.  Therefore, it is
an end-to-end property.  How these end-to-end properties carried by the Priority
header field affect the prioritization between the responses that share a
connection is a hop-by-hop issue.<a class="pilcrow" href="#section-14-2">¶</a></p>
<p id="section-14-3">Having the Priority header field defined as end-to-end is important for caching
intermediaries.  Such intermediaries can cache the value of the Priority header
field along with the response and utilize the value of the cached header field
when serving the cached response, only because the header field is defined as
end-to-end rather than hop-by-hop.<a class="pilcrow" href="#section-14-3">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-15">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-15">15. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-15-1"><a class="xref" href="#frame">Section 7</a> describes considerations for server buffering of PRIORITY_UPDATE
frames.<a class="pilcrow" href="#section-15-1">¶</a></p>
<p id="section-15-2"><a class="xref" href="#server-scheduling">Section 10</a> presents examples where servers that prioritize responses
in a certain way might be starved of the ability to transmit responses.<a class="pilcrow" href="#section-15-2">¶</a></p>
<p id="section-15-3">The security considerations from <span>[<a class="xref" href="#STRUCTURED-FIELDS">STRUCTURED-FIELDS</a>]</span> apply to the processing of
priority parameters defined in <a class="xref" href="#parameters">Section 4</a>.<a class="pilcrow" href="#section-15-3">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-16">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-16">16. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-16-1">This specification registers the following entry in the "Hypertext Transfer
Protocol (HTTP) Field Name Registry" defined in <span>[<a class="xref" href="#HTTP2">HTTP/2</a>]</span>:<a class="pilcrow" href="#section-16-1">¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="section-16-2">
        <dt id="section-16-2.1">
Field Name:  </dt>
        <dd id="section-16-2.2" style="margin-left: 1.5em">
          <p id="section-16-2.2.1">Priority<a class="pilcrow" href="#section-16-2.2.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-2.3">
Status:  </dt>
        <dd id="section-16-2.4" style="margin-left: 1.5em">
          <p id="section-16-2.4.1">permanent<a class="pilcrow" href="#section-16-2.4.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-2.5">
Reference:  </dt>
        <dd id="section-16-2.6" style="margin-left: 1.5em">
          <p id="section-16-2.6.1">This document<a class="pilcrow" href="#section-16-2.6.1">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-16-3">This specification registers the following entry in the "HTTP/2 Settings" registry
defined in <span>[<a class="xref" href="#HTTP2">HTTP/2</a>]</span>:<a class="pilcrow" href="#section-16-3">¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="section-16-4">
        <dt id="section-16-4.1">
Code:  </dt>
        <dd id="section-16-4.2" style="margin-left: 1.5em">
          <p id="section-16-4.2.1">0x9<a class="pilcrow" href="#section-16-4.2.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-4.3">
Name:  </dt>
        <dd id="section-16-4.4" style="margin-left: 1.5em">
          <p id="section-16-4.4.1">SETTINGS_NO_RFC7540_PRIORITIES<a class="pilcrow" href="#section-16-4.4.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-4.5">
Initial Value:  </dt>
        <dd id="section-16-4.6" style="margin-left: 1.5em">
          <p id="section-16-4.6.1">0<a class="pilcrow" href="#section-16-4.6.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-4.7">
Reference:  </dt>
        <dd id="section-16-4.8" style="margin-left: 1.5em">
          <p id="section-16-4.8.1">This document<a class="pilcrow" href="#section-16-4.8.1">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-16-5">This specification registers the following entry in the "HTTP/2 Frame Type"
registry defined in <span>[<a class="xref" href="#HTTP2">HTTP/2</a>]</span>:<a class="pilcrow" href="#section-16-5">¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="section-16-6">
        <dt id="section-16-6.1">
Code:  </dt>
        <dd id="section-16-6.2" style="margin-left: 1.5em">
          <p id="section-16-6.2.1">0x10<a class="pilcrow" href="#section-16-6.2.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-6.3">
Frame Type:  </dt>
        <dd id="section-16-6.4" style="margin-left: 1.5em">
          <p id="section-16-6.4.1">PRIORITY_UPDATE<a class="pilcrow" href="#section-16-6.4.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-6.5">
Reference:  </dt>
        <dd id="section-16-6.6" style="margin-left: 1.5em">
          <p id="section-16-6.6.1">This document<a class="pilcrow" href="#section-16-6.6.1">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-16-7">This specification registers the following entry in the "HTTP/3 Frame Types"
registry established by <span>[<a class="xref" href="#HTTP3">HTTP/3</a>]</span>:<a class="pilcrow" href="#section-16-7">¶</a></p>
<span class="break"></span><dl class="dlCompact dlParallel" id="section-16-8">
        <dt id="section-16-8.1">
Value:  </dt>
        <dd id="section-16-8.2" style="margin-left: 1.5em">
          <p id="section-16-8.2.1">0xF0700-0xF0701<a class="pilcrow" href="#section-16-8.2.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-8.3">
Frame Type:  </dt>
        <dd id="section-16-8.4" style="margin-left: 1.5em">
          <p id="section-16-8.4.1">PRIORITY_UPDATE<a class="pilcrow" href="#section-16-8.4.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-8.5">
Status:  </dt>
        <dd id="section-16-8.6" style="margin-left: 1.5em">
          <p id="section-16-8.6.1">permanent<a class="pilcrow" href="#section-16-8.6.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-8.7">
Reference:  </dt>
        <dd id="section-16-8.8" style="margin-left: 1.5em">
          <p id="section-16-8.8.1">This document<a class="pilcrow" href="#section-16-8.8.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-8.9">
Change Controller:  </dt>
        <dd id="section-16-8.10" style="margin-left: 1.5em">
          <p id="section-16-8.10.1">IETF<a class="pilcrow" href="#section-16-8.10.1">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-8.11">
Contact:  </dt>
        <dd id="section-16-8.12" style="margin-left: 1.5em">
          <p id="section-16-8.12.1">ietf-http-wg@w3.org<a class="pilcrow" href="#section-16-8.12.1">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-16-9">IANA has created the "Hypertext Transfer Protocol (HTTP) Priority" registry at
<span>&lt;<a href="https://www.iana.org/assignments/http-priority">https://www.iana.org/assignments/http-priority</a>&gt;</span> and has populated it with the entries in
<a class="xref" href="#iana-parameter-table">Table 1</a>; see <a class="xref" href="#register">Section 4.3.1</a> for its associated procedures.<a class="pilcrow" href="#section-16-9">¶</a></p>
<span id="name-initial-priority-parameters"></span><div id="iana-parameter-table">
<table class="center" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-initial-priority-parameters">Initial Priority Parameters</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Name</th>
            <th class="text-center" colspan="1" rowspan="1">Description</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">u</td>
            <td class="text-center" colspan="1" rowspan="1">The urgency of an HTTP response.</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#urgency">Section 4.1</a>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">i</td>
            <td class="text-center" colspan="1" rowspan="1">Whether an HTTP response can be processed incrementally.</td>
            <td class="text-left" colspan="1" rowspan="1">
              <a class="xref" href="#incremental">Section 4.2</a>
</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<section id="section-17">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-17">17. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-17.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-17.1">17.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="HTTP">[HTTP]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="seriesInfo">STD 97</span>, <span class="seriesInfo">RFC 9110</span>, <span class="seriesInfo">DOI 10.17487/RFC9110</span>, <time class="refDate" datetime="2022-06">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HTTP2">[HTTP/2]</dt>
        <dd>
<span class="refAuthor">Thomson, M., Ed.</span> and <span class="refAuthor">C. Benfield, Ed.</span>, <span class="refTitle">"HTTP/2"</span>, <span class="seriesInfo">RFC 9113</span>, <span class="seriesInfo">DOI 10.17487/RFC9113</span>, <time class="refDate" datetime="2022-06">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9113">https://www.rfc-editor.org/info/rfc9113</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HTTP3">[HTTP/3]</dt>
        <dd>
<span class="refAuthor">Bishop, M., Ed.</span>, <span class="refTitle">"HTTP/3"</span>, <span class="seriesInfo">RFC 9114</span>, <span class="seriesInfo">DOI 10.17487/RFC9114</span>, <time class="refDate" datetime="2022-06">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9114">https://www.rfc-editor.org/info/rfc9114</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC">[QUIC]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="seriesInfo">RFC 9000</span>, <span class="seriesInfo">DOI 10.17487/RFC9000</span>, <time class="refDate" datetime="2021-05">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9000">https://www.rfc-editor.org/info/rfc9000</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time class="refDate" datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="STRUCTURED-FIELDS">[STRUCTURED-FIELDS]</dt>
      <dd>
<span class="refAuthor">Nottingham, M.</span> and <span class="refAuthor">P-H. Kamp</span>, <span class="refTitle">"Structured Field Values for HTTP"</span>, <span class="seriesInfo">RFC 8941</span>, <span class="seriesInfo">DOI 10.17487/RFC8941</span>, <time class="refDate" datetime="2021-02">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8941">https://www.rfc-editor.org/info/rfc8941</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-17.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-17.2">17.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="CACHING">[CACHING]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Caching"</span>, <span class="seriesInfo">STD 98</span>, <span class="seriesInfo">RFC 9111</span>, <span class="seriesInfo">DOI 10.17487/RFC9111</span>, <time class="refDate" datetime="2022-06">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9111">https://www.rfc-editor.org/info/rfc9111</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FORWARDED">[FORWARDED]</dt>
        <dd>
<span class="refAuthor">Petersson, A.</span> and <span class="refAuthor">M. Nilsson</span>, <span class="refTitle">"Forwarded HTTP Extension"</span>, <span class="seriesInfo">RFC 7239</span>, <span class="seriesInfo">DOI 10.17487/RFC7239</span>, <time class="refDate" datetime="2014-06">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7239">https://www.rfc-editor.org/info/rfc7239</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="MARX">[MARX]</dt>
        <dd>
<span class="refAuthor">Marx, R.</span>, <span class="refAuthor">De Decker, T.</span>, <span class="refAuthor">Quax, P.</span>, and <span class="refAuthor">W. Lamotte</span>, <span class="refTitle">"Of the Utmost Importance: Resource Prioritization in HTTP/3 over QUIC"</span>, <span class="refContent">SCITEPRESS Proceedings of the 15th International Conference on Web Information Systems and Technologies (pages 130-143)</span>, <span class="seriesInfo">DOI 10.5220/0008191701300143</span>, <time class="refDate" datetime="2019-09">September 2019</time>, <span>&lt;<a href="https://www.doi.org/10.5220/0008191701300143">https://www.doi.org/10.5220/0008191701300143</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.lassey-priority-setting">[PRIORITY-SETTING]</dt>
        <dd>
<span class="refAuthor">Lassey, B.</span> and <span class="refAuthor">L. Pardue</span>, <span class="refTitle">"Declaring Support for HTTP/2 Priorities"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-lassey-priority-setting-00</span>, <time class="refDate" datetime="2019-07-25">25 July 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00">https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-RECOVERY">[QUIC-RECOVERY]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">I. Swett, Ed.</span>, <span class="refTitle">"QUIC Loss Detection and Congestion Control"</span>, <span class="seriesInfo">RFC 9002</span>, <span class="seriesInfo">DOI 10.17487/RFC9002</span>, <time class="refDate" datetime="2021-05">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9002">https://www.rfc-editor.org/info/rfc9002</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7540">[RFC7540]</dt>
        <dd>
<span class="refAuthor">Belshe, M.</span>, <span class="refAuthor">Peon, R.</span>, and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="seriesInfo">RFC 7540</span>, <span class="seriesInfo">DOI 10.17487/RFC7540</span>, <time class="refDate" datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7540">https://www.rfc-editor.org/info/rfc7540</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8081">[RFC8081]</dt>
      <dd>
<span class="refAuthor">Lilley, C.</span>, <span class="refTitle">"The "font" Top-Level Media Type"</span>, <span class="seriesInfo">RFC 8081</span>, <span class="seriesInfo">DOI 10.17487/RFC8081</span>, <time class="refDate" datetime="2017-02">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8081">https://www.rfc-editor.org/info/rfc8081</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1"><span class="contact-name">Roy Fielding</span>
presented the idea of using a header field for representing
priorities in <span>&lt;<a href="https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-5.pdf">https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-5.pdf</a>&gt;</span>.
In <span>&lt;<a href="https://github.com/pmeenan/http3-prioritization-proposal">https://github.com/pmeenan/http3-prioritization-proposal</a>&gt;</span>, <span class="contact-name">Patrick Meenan</span>
advocated for representing the priorities using a tuple of urgency and
concurrency. The ability to disable HTTP/2 prioritization is inspired by
<span>[<a class="xref" href="#I-D.lassey-priority-setting">PRIORITY-SETTING</a>]</span>, authored by <span class="contact-name">Brad Lassey</span> and <span class="contact-name">Lucas Pardue</span>, with
modifications based on feedback that was not incorporated into an update to that
document.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<p id="appendix-A-2">The motivation for defining an alternative to HTTP/2 priorities is drawn from
discussion within the broad HTTP community. Special thanks to <span class="contact-name">Roberto Peon</span>,
<span class="contact-name">Martin Thomson</span>, and Netflix for text that was incorporated explicitly in this
document.<a class="pilcrow" href="#appendix-A-2">¶</a></p>
<p id="appendix-A-3">In addition to the people above, this document owes a lot to the extensive
discussion in the HTTP priority design team, consisting of <span class="contact-name">Alan Frindell</span>,
<span class="contact-name">Andrew Galloni</span>, <span class="contact-name">Craig Taylor</span>, <span class="contact-name">Ian Swett</span>, <span class="contact-name">Matthew Cox</span>,
<span class="contact-name">Mike Bishop</span>, <span class="contact-name">Roberto Peon</span>, <span class="contact-name">Robin Marx</span>, <span class="contact-name">Roy Fielding</span>, and the authors
 of this document.<a class="pilcrow" href="#appendix-A-3">¶</a></p>
<p id="appendix-A-4"><span class="contact-name">Yang Chi</span> contributed the section on retransmission scheduling.<a class="pilcrow" href="#appendix-A-4">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="ascii">
<div class="left" dir="auto"><span class="fn nameRole">Kazuho Oku</span></div>
<div class="left" dir="auto"><span class="org">Fastly</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:kazuhooku@gmail.com">kazuhooku@gmail.com</a>
</div>
</div>
<div class="alternative-contact">Additional contact information:</div>
<div class="non-ascii">
<div class="left" dir="auto"><span class="fn nameRole">奥 一穂</span></div>
<div class="left" dir="auto"><span class="org">Fastly</span></div>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Lucas Pardue</span></div>
<div class="left" dir="auto"><span class="org">Cloudflare</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:lucaspardue.24.7@gmail.com">lucaspardue.24.7@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>