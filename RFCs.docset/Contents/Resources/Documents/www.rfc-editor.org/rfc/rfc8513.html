<html><head></head><body><pre>Internet Engineering Task Force (IETF)                      M. Boucadair
Request for Comments: 8513                                  C. Jacquenet
Category: Standards Track                                         Orange
ISSN: 2070-1721                                             S. Sivakumar
                                                           Cisco Systems
                                                            January 2019


            <span class="h1">A YANG Data Model for Dual-Stack Lite (DS-Lite)</span>

Abstract

   This document defines a YANG module for the Dual-Stack Lite (DS-Lite)
   Address Family Transition Router (AFTR) and Basic Bridging BroadBand
   (B4) elements.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc7841#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8513">https://www.rfc-editor.org/info/rfc8513</a>.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.







<span class="grey">Boucadair, et al.            Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
     <a href="#section-1.1">1.1</a>.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  DS-Lite YANG Module: An Overview  . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  DS-Lite YANG Module . . . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
   <a href="#section-4">4</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
   <a href="#section-5">5</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
   <a href="#section-6">6</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
     <a href="#section-6.1">6.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
     <a href="#section-6.2">6.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
   <a href="#appendix-A">Appendix A</a>.  B4 Example . . . . . . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
   <a href="#appendix-B">Appendix B</a>.  AFTR Examples  . . . . . . . . . . . . . . . . . . .  <a href="#page-19">19</a>
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-21">21</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   This document defines a data model for DS-Lite [<a href="./rfc6333" title='"Dual- Stack Lite Broadband Deployments Following IPv4 Exhaustion"'>RFC6333</a>], using the
   YANG data modeling language [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>].  Both the Address Family
   Transition Router (AFTR) and Basic Bridging BroadBand (B4) elements
   are covered by this specification.

   Figure 1 is a slight adaptation of Figure 1 from <a href="./rfc6333">RFC 6333</a> and is
   provided here for the convenience of the reader.


























<span class="grey">Boucadair, et al.            Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


                      +-----------+
                      |    Host   |
                      +-----+-----+
                            |192.0.2.1
                            |
                            |
                            |192.0.2.2
                  +---------|---------+
                  |         |         |
                  |    Home router    |
                  |+--------+--------+|
                  ||       B4        ||
                  |+--------+--------+|
                  +--------|||--------+
                           |||2001:db8:0:1::1
                           |||
                           |||&lt;-IPv4-in-IPv6 Softwire
                           |||
                    -------|||-------
                  /        |||        \
                 |   ISP core network  |
                  \        |||        /
                    -------|||-------
                           |||
                           |||2001:db8:0:2::1
                  +--------|||--------+
                  |        AFTR       |
                  |+--------+--------+|
                  ||   Concentrator  ||
                  |+--------+--------+|
                  |       |NAT|       |
                  |       +-+-+       |
                  +---------|---------+
                            |198.51.100.1
                            |
                    --------|--------
                  /         |         \
                 |       Internet      |
                  \         |         /
                    --------|--------
                            |
                            |203.0.113.1
                      +-----+-----+
                      | IPv4 Host |
                      +-----------+

                    Figure 1: DS-Lite Base Architecture




<span class="grey">Boucadair, et al.            Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


   DS-Lite deployment considerations are discussed in [<a href="./rfc6908" title='"Deployment Considerations for Dual-Stack Lite"'>RFC6908</a>].

   This document follows the guidelines of [<a href="./rfc8407" title='"Guidelines for Authors and Reviewers of Documents Containing YANG Data Models"'>RFC8407</a>], uses the common
   YANG types defined in [<a href="./rfc6991" title='"Common YANG Data Types"'>RFC6991</a>], and adopts the Network Management
   Datastore Architecture (NMDA) [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.1.%20%20Terminology"></a><a class="selflink" href="#section-1.1" id="section-1.1">1.1</a>.  Terminology</span>

   This document makes use of the terms defined in <a href="./rfc6333#section-3">Section 3 of
   [RFC6333]</a>.

   The terminology for describing YANG data models is defined in
   [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>].

   The meaning of the symbols in tree diagrams is defined in [<a href="./rfc8340" title='"YANG Tree Diagrams"'>RFC8340</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20DS-Lite%20YANG%20Module%3A%20An%20Overview"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  DS-Lite YANG Module: An Overview</span>

   As shown in Figure 1:

   o  The AFTR element is a combination of an IPv4-in-IPv6 tunnel and a
      NAPT function (<a href="./rfc3022#section-2.2">Section 2.2 of [RFC3022]</a>).

   o  The B4 element is an IPv4-in-IPv6 tunnel.

   Therefore, the DS-Lite YANG module is designed to augment both the
   Interfaces YANG module [<a href="./rfc8343" title='"A YANG Data Model for Interface Management"'>RFC8343</a>] and the NAT YANG module [<a href="./rfc8512" title='"A YANG Module for Network Address Translation (NAT) and Network Prefix Translation (NPT)"'>RFC8512</a>]
   with DS-Lite-specific features.

   The YANG "feature" statement is used to distinguish which of the
   DS-Lite elements ('aftr' or 'b4') is relevant for a specific data
   node.

   Concretely, the DS-Lite YANG module (Figure 2) augments the
   Interfaces YANG module with the following:

   o  An IPv6 address used by the tunnel endpoint (AFTR or B4) for
      sending and receiving IPv4-in-IPv6 packets (ipv6-address).

   o  An IPv4 address that is used by the tunnel endpoint (AFTR or B4)
      for troubleshooting purposes (ipv4-address).

   o  An IPv6 address used by a B4 element to reach its AFTR (aftr-
      ipv6-addr).

   o  The tunnel MTU used to avoid fragmentation (tunnel-mtu).





<span class="grey">Boucadair, et al.            Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


   o  A policy to instruct the tunnel endpoint (AFTR or B4) whether it
      must preserve Differentiated Services Code Point (DSCP) marking
      when encapsulating/decapsulating packets (v6-v4-dscp-
      preservation).

   In addition, the DS-Lite YANG module augments the NAT YANG module
   (policy, in particular) with the following:

   o  A policy to limit the number of DS-Lite softwires per subscriber
      (max-softwire-per-subscriber).

   o  A policy to instruct the AFTR whether a state can be automatically
      migrated (state-migrate).

   o  Further, in order to prevent a Denial of Service (DoS) by
      frequently changing the source IPv6 address, 'b4-address-change-
      limit' is used to rate-limit such changes.

   o  An instruction to rewrite the TCP Maximum Segment Size (MSS)
      option (mss-clamping) to avoid TCP fragmentation.

   Given that the NAPT table of the AFTR element is extended to include
   the source IPv6 address of incoming packets, the DS-Lite YANG module
   augments the NAPT44 mapping entry with the following:

   o  b4-ipv6-address, which is used to record the source IPv6 address
      of a packet received from a B4 element.  This IPv6 address is
      required to disambiguate between the overlapping IPv4 address
      space of subscribers.

   o  The value of the Traffic Class field in the IPv6 header as
      received from a B4 element (v6-dscp): This information is used to
      preserve DSCP marking when encapsulating/decapsulating at the
      AFTR.

   o  The IPv4 DSCP marking of the IPv4 packet received from a B4
      element (internal-v4-dscp): This information can be used by the
      AFTR for setting the DSCP of packets relayed to a B4 element.

   o  The IPv4 DSCP marking as set by the AFTR in its external interface
      (external-v4-dscp): An AFTR can be instructed to preserve the same
      marking or to set it to another value when forwarding an IPv4
      packet destined to a remote IPv4 host.

   Access Control List (ACL) and Quality-of-Service (QoS) policies
   discussed in <a href="./rfc6908#section-2.5">Section 2.5 of [RFC6908]</a> are out of scope.  A YANG
   module for ACLs is documented in [<a href="#ref-ACL-YANG" title='"Network Access Control List (ACL) YANG Data Model"'>ACL-YANG</a>].




<span class="grey">Boucadair, et al.            Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


   Likewise, considerations that are related to the Port Control
   Protocol (PCP) and discussed in <a href="./rfc6333#section-8.5">Section 8.5 of [RFC6333]</a> are out of
   scope.  A YANG module for PCP is documented in [<a href="#ref-YANG-PCP" title='"YANG Modules for the Port Control Protocol (PCP)"'>YANG-PCP</a>].

   The YANG module "ietf-dslite" has the following structure:

   module: ietf-dslite
     augment /if:interfaces/if:interface:
       +--rw ipv6-address?              inet:ipv6-address
       +--rw ipv4-address?              inet:ipv4-address
       +--rw aftr-ipv6-addr?            inet:ipv6-address {b4}?
       +--rw tunnel-mtu?                uint16
       +--rw v6-v4-dscp-preservation?   boolean
     augment /nat:nat/nat:instances/nat:instance/nat:policy:
       +--rw max-softwires-per-subscriber?   uint8 {aftr}?
       +--rw state-migrate?                  boolean {aftr}?
       +--rw b4-address-change-limit?        uint32 {aftr}?
       +--rw mss-clamping {aftr}?
          +--rw enable?      boolean
          +--rw mss-value?   uint16
     augment /nat:nat/nat:instances/nat:instance
             /nat:mapping-table/nat:mapping-entry:
       +--rw b4-ipv6-address {aftr}?
       |  +--rw address?               inet:ipv6-address
       |  +--rw last-address-change?   yang:date-and-time
       +--rw v6-dscp?            inet:dscp {aftr}?
       +--rw internal-v4-dscp?   inet:dscp {aftr}?
       +--rw external-v4-dscp?   inet:dscp {aftr}?
     augment /nat:nat/nat:instances/nat:instance
             /nat:statistics/nat:mappings-statistics:
       +--ro active-softwires?   yang:gauge32 {aftr}?

     notifications:
       +---n b4-address-change-limit-policy-violation {aftr}?
          +--ro id           -&gt; /nat:nat/instances/instance/id
          +--ro policy-id    -&gt; /nat:nat/instances/instance/policy/id
          +--ro address      inet:ipv6-address

                    Figure 2: DS-Lite YANG Tree Diagram

   Examples to illustrate the use of the "ietf-dslite" module are
   provided in Appendices A and B.









<span class="grey">Boucadair, et al.            Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20DS-Lite%20YANG%20Module"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  DS-Lite YANG Module</span>

   This module uses the tunnel interface identity defined in [<a href="./rfc7224" title='"IANA Interface Type YANG Module"'>RFC7224</a>].

  &lt;CODE BEGINS&gt; file "ietf-dslite@2019-01-10.yang"

  module ietf-dslite {
   yang-version 1.1;
   namespace "urn:ietf:params:xml:ns:yang:ietf-dslite";
   prefix dslite;

   import ietf-inet-types {
     prefix inet;
     reference
       "<a href="./rfc6991#section-4">Section 4 of RFC 6991</a>";
   }
   import ietf-interfaces {
     prefix if;
     reference
       "<a href="./rfc8343">RFC 8343</a>: A YANG Data Model for Interface Management";
   }
   import iana-if-type {
     prefix ianaift;
     reference
       "<a href="./rfc7224">RFC 7224</a>: IANA Interface Type YANG Module";
   }
   import ietf-nat {
     prefix nat;
     reference
       "<a href="./rfc8512">RFC 8512</a>: A YANG Module for Network Address Translation (NAT)
                  and Network Prefix Translation (NPT)";
   }
   import ietf-yang-types {
     prefix yang;
     reference
       "<a href="./rfc6991#section-3">Section 3 of RFC 6991</a>";
   }

   organization
     "IETF Softwire Working Group";
   contact
     "WG Web:   &lt;<a href="https://datatracker.ietf.org/wg/softwire/">https://datatracker.ietf.org/wg/softwire/</a>&gt;
      WG List:  &lt;mailto:softwires@ietf.org&gt;

      Editor:  Mohamed Boucadair
               &lt;mailto:mohamed.boucadair@orange.com&gt;





<span class="grey">Boucadair, et al.            Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


      Author:  Christian Jacquenet
               &lt;mailto:christian.jacquenet@orange.com&gt;

      Author:  Senthil Sivakumar
               &lt;mailto:ssenthil@cisco.com&gt;";

   description
     "This module is a YANG module for DS-Lite AFTR and B4
      implementations.

      Copyright (c) 2018 IETF Trust and the persons identified as
      authors of the code.  All rights reserved.

      Redistribution and use in source and binary forms, with or
      without modification, is permitted pursuant to, and subject
      to the license terms contained in, the Simplified BSD License
      set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
      Relating to IETF Documents
      (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>).

      This version of this YANG module is part of <a href="./rfc8513">RFC 8513</a>; see
      the RFC itself for full legal notices.";

   revision 2019-01-10 {
     description
       "Initial revision.";
     reference
       "<a href="./rfc8513">RFC 8513</a>: A YANG Data Model for Dual-Stack Lite (DS-Lite)";
   }

   identity dslite {
     base ianaift:tunnel;
     description
       "DS-Lite tunnel.";
   }

   /*
    * Features
    */

   feature b4 {
     description
       "The B4 element is a function implemented on a dual-stack-capable
        node, either a directly connected device or Customer Premises
        Equipment (CPE), that creates a tunnel to an AFTR.";
     reference
       "<a href="./rfc6333#section-5">Section 5 of RFC 6333</a>";
   }



<span class="grey">Boucadair, et al.            Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


   feature aftr {
     description
       "An AFTR element is the combination of an IPv4-in-IPv6 tunnel
        endpoint and an IPv4-IPv4 NAT implemented on the same node.";
     reference
       "<a href="./rfc6333#section-6">Section 6 of RFC 6333</a>";
   }

   /*
    * Augments
    */

   augment "/if:interfaces/if:interface" {
     when 'derived-from(if:type, "dslite")';
     description
       "Augments Interface module with DS-Lite parameters.

        IANA interface types are maintained at this registry:
        &lt;<a href="https://www.iana.org/assignments/ianaiftype-mib/">https://www.iana.org/assignments/ianaiftype-mib/</a>&gt;.

        tunnel (131),       -- Encapsulation interface";
     leaf ipv6-address {
       type inet:ipv6-address;
       description
         "IPv6 address of the local DS-Lite endpoint (AFTR or B4).";
       reference
         "<a href="./rfc6333">RFC 6333</a>: Dual-Stack Lite Broadband Deployments Following
                    IPv4 Exhaustion";
     }
     leaf ipv4-address {
       type inet:ipv4-address;
       description
         "IPv4 address of the local DS-Lite AFTR or B4.

          192.0.0.1 is reserved for the AFTR element, while
          192.0.0.0/29 is reserved for the B4 element.

          This address can be used to report ICMP problems and will
          appear in traceroute outputs.";
       reference
         "<a href="./rfc6333">RFC 6333</a>: Dual-Stack Lite Broadband Deployments Following
                    IPv4 Exhaustion";
     }
     leaf aftr-ipv6-addr {
       if-feature "b4";
       type inet:ipv6-address;
       description
         "Indicates the AFTR's IPv6 address to be used by a B4



<span class="grey">Boucadair, et al.            Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


          element.";
       reference
         "<a href="./rfc6333">RFC 6333</a>: Dual-Stack Lite Broadband Deployments Following
                    IPv4 Exhaustion";
     }
     leaf tunnel-mtu {
       type uint16;
       description
         "Configures a tunnel MTU.

          <a href="./rfc6908">RFC 6908</a> specifies that since fragmentation and reassembly
          are not optimal, the operator should do everything possible
          to eliminate the need for them.  If the operator uses simple
          IPv4-in-IPv6 softwire, it is recommended that the MTU size
          of the IPv6 network between the B4 and the AFTR account
          for the additional overhead (40 bytes).";
       reference
         "<a href="./rfc6908">RFC 6908</a>: Deployment Considerations for Dual-Stack Lite";
     }
     leaf v6-v4-dscp-preservation {
       type boolean;
       description
         "Copies the DSCP value from the IPv6 header, and vice versa.

          According to <a href="./rfc6908#section-2.10">Section 2.10 of RFC 6908</a>, operators should
          use the uniform model by provisioning the network such
          that the AFTR/B4 copies the DSCP value in the IPv4 header
          to the Traffic Class field in the IPv6 header, after the
          IPv4-in-IPv6 encapsulation.";
       reference
         "<a href="./rfc6908#section-2.10">Section 2.10 of RFC 6908</a>";
     }
   }

   augment "/nat:nat/nat:instances/nat:instance/nat:policy" {
     when "derived-from-or-self(/nat:nat/nat:instances/nat:instance"
        + "/nat:type, 'nat:napt44')"
        + " and /nat:nat/nat:instances/nat:instance/"
        + "nat:per-interface-binding='dslite'";
     if-feature "aftr";
     description
       "Augments the NAPT44 module with AFTR parameters.";
     leaf max-softwires-per-subscriber {
       type uint8;
       default "1";
       description
         "Configures the maximum softwires per subscriber feature.




<span class="grey">Boucadair, et al.            Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


          A subscriber is uniquely identified by means
          of a subscriber-mask (subscriber-mask-v6).

          This policy aims to prevent a misbehaving subscriber from
          mounting several DS-Lite softwires that would consume
          additional AFTR resources (e.g., get more external ports
          if the quota was enforced on a per-softwire basis and
          consume extra processing due to a large number of active
          softwires).";
       reference
         "<a href="./rfc7785#section-4">Section 4 of RFC 7785</a>";
     }
     leaf state-migrate {
       type boolean;
       default "true";
       description
         "State migration is enabled by default.

          In the event a new IPv6 address is assigned to the B4 element,
          the AFTR should migrate existing state to be bound to the new
          IPv6 address.  This operation ensures that traffic destined to
          the previous B4's IPv6 address will be redirected to the newer
          B4's IPv6 address.  The destination IPv6 address for tunneling
          return traffic from the AFTR should be the last seen as the
          B4's IPv6 source address from the user device (e.g., CPE).

          The AFTR uses the subscriber-mask-v6 to determine whether two
          IPv6 addresses belong to the same CPE (e.g., if the
          subscriber-mask-v6 is set to 56, the AFTR concludes that
          2001:db8:100:100::1 and 2001:db8:100:100::2 belong to the same
          CPE assigned with 2001:db8:100:100::/56).";
       reference
         "<a href="./rfc7785">RFC 7785</a>: Recommendations for Prefix Binding in the Context
                    of Softwire Dual-Stack Lite";
     }
     leaf b4-address-change-limit {
       type uint32;
       units "seconds";
       default "1800";
       description
         "Minimum number of seconds between a successive B4's IPv6
          address change from the same prefix.

          Changing the source B4's IPv6 address may be used as an attack
          vector.  Packets with a new B4's IPv6 address from the same
          prefix should be rate-limited.

          It is recommended that this rate limit be set to 30 minutes;



<span class="grey">Boucadair, et al.            Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


          other values can be set on a per-deployment basis.";
       reference
         "<a href="./rfc7785">RFC 7785</a>: Recommendations for Prefix Binding in the Context
                    of Softwire Dual-Stack Lite";
     }
     container mss-clamping {
       description
         "MSS rewriting configuration to avoid IPv6 fragmentation.";
       leaf enable {
         type boolean;
         description
           "Enable/disable MSS rewriting feature.";
       }
       leaf mss-value {
         type uint16;
         units "octets";
         description
           "Sets the MSS value to be used for MSS rewriting.";
       }
     }
   }

   augment "/nat:nat/nat:instances/nat:instance"
         + "/nat:mapping-table/nat:mapping-entry" {
     when "derived-from-or-self(/nat:nat/nat:instances/nat:instance"
        + "/nat:type, 'nat:napt44')"
        + "and /nat:nat/nat:instances/nat:instance"
        + "/nat:per-interface-binding='dslite'";
     if-feature "aftr";
     description
       "Augments the NAPT44 mapping table with DS-Lite specifics.";
     container b4-ipv6-address {
       description
         "Records the IPv6 address used by a B4 element and the last
          time that address changed.";
       leaf address {
         type inet:ipv6-address;
         description
           "Corresponds to the IPv6 address used by a B4 element.";
         reference
           "<a href="./rfc6333">RFC 6333</a>: Dual-Stack Lite Broadband Deployments Following
                      IPv4 Exhaustion";
       }
       leaf last-address-change {
         type yang:date-and-time;
         description
           "Records the last time that the address changed.";
       }



<span class="grey">Boucadair, et al.            Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


     }
     leaf v6-dscp {
       when "/if:interfaces/if:interface"
          + "/dslite:v6-v4-dscp-preservation = 'true'";
       type inet:dscp;
       description
         "DSCP value used at the softwire level (i.e., IPv6 header).";
     }
     leaf internal-v4-dscp {
       when "/if:interfaces/if:interface"
          + "/dslite:v6-v4-dscp-preservation = 'true'";
       type inet:dscp;
       description
         "DSCP value of the encapsulated IPv4 packet.";
     }
     leaf external-v4-dscp {
       when "/if:interfaces/if:interface"
          + "/dslite:v6-v4-dscp-preservation = 'true'";
       type inet:dscp;
       description
         "DSCP value of the translated IPv4 packet as marked by
          the AFTR.";
     }
   }

   augment "/nat:nat/nat:instances/nat:instance"
         + "/nat:statistics/nat:mappings-statistics" {
     if-feature "aftr";
     description
       "Indicates the number of active softwires.";
     leaf active-softwires {
       type yang:gauge32;
       description
         "The number of currently active softwires on the AFTR
          instance.";
     }
   }

   /*
    * Notifications
    */

   notification b4-address-change-limit-policy-violation {
     if-feature "aftr";
     description
       "Generates notifications when a B4 unsuccessfully attempts
        to change the IPv6 address in a time shorter than the value
        of b4-address-change-limit.



<span class="grey">Boucadair, et al.            Standards Track                   [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


        Notifications are rate-limited (notify-interval).";
     leaf id {
       type leafref {
         path "/nat:nat/nat:instances/nat:instance/nat:id";
       }
       mandatory true;
       description
         "NAT instance identifier.";
     }
     leaf policy-id {
       type leafref {
         path "/nat:nat/nat:instances/nat:instance/nat:policy/nat:id";
       }
       mandatory true;
       description
         "Policy identifier.";
     }
     leaf address {
       type inet:ipv6-address;
       mandatory true;
       description
         "B4's IPv6 address.";
     }
   }
  }

  &lt;CODE ENDS&gt;
























<span class="grey">Boucadair, et al.            Standards Track                   [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Security%20Considerations"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Security Considerations</span>

   The YANG module specified in this document defines a schema for data
   that is designed to be accessed via network management protocols such
   as NETCONF [<a href="./rfc6241" title='"Network Configuration Protocol (NETCONF)"'>RFC6241</a>] or RESTCONF [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>].  The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure
   transport is Secure Shell (SSH) [<a href="./rfc6242" title='"Using the NETCONF Protocol over Secure Shell (SSH)"'>RFC6242</a>].  The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   [<a href="./rfc8446" title='"The Transport Layer Security (TLS) Protocol Version 1.3"'>RFC8446</a>].

   The Network Configuration Access Control Model (NACM) [<a href="./rfc8341" title='"Network Configuration Access Control Model"'>RFC8341</a>]
   provides the means to restrict access for particular NETCONF or
   RESTCONF users to a preconfigured subset of all available NETCONF or
   RESTCONF protocol operations and content.

   All data nodes defined in the YANG module that can be created,
   modified, and deleted (i.e., config true, which is the default) are
   considered sensitive.  Write operations (e.g., edit-config) applied
   to these data nodes without proper protection can negatively affect
   network operations.  An attacker who is able to access the B4/AFTR
   can undertake various attacks, such as:

   o  Setting the value of 'aftr-ipv6-addr' on the B4 to point to an
      illegitimate AFTR so that it can intercept all the traffic sent by
      a B4.  Illegitimately intercepting users' traffic is an attack
      with severe implications on privacy.

   o  Setting the MTU to a low value, which may increase the number of
      fragments ('tunnel-mtu' for both B4 and AFTR).

   o  Setting 'max-softwire-per-subscriber' to an arbitrary high value,
      which will be exploited by a misbehaving user to grab more
      resources (by mounting as many softwires as required to get more
      external IP addresses/ports) or to perform a DoS on the AFTR by
      mounting a massive number of softwires.

   o  Setting 'state-migrate' to 'false' on the AFTR.  This action may
      lead to a service degradation for the users.

   o  Setting 'b4-address-change-limit' to an arbitrary low value can
      ease DoS attacks based on frequent change of the B4 IPv6 address.

   o  Setting 'v6-v4-dscp-preservation' to 'false" may lead to a service
      degradation if some policies are applied on the network based on
      the DSCP value.

   Additional security considerations are discussed in [<a href="./rfc8512" title='"A YANG Module for Network Address Translation (NAT) and Network Prefix Translation (NPT)"'>RFC8512</a>].




<span class="grey">Boucadair, et al.            Standards Track                   [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


   Security considerations related to DS-Lite are discussed in
   [<a href="./rfc6333" title='"Dual- Stack Lite Broadband Deployments Following IPv4 Exhaustion"'>RFC6333</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  IANA Considerations</span>

   IANA has registered the following URI in the "ns" subregistry within
   the "IETF XML Registry" [<a href="./rfc3688" title='"The IETF XML Registry"'>RFC3688</a>]:

            URI: urn:ietf:params:xml:ns:yang:ietf-dslite
            Registrant Contact: The IESG.
            XML: N/A; the requested URI is an XML namespace.

   IANA has registered the following YANG module in the "YANG Module
   Names" subregistry [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>] within the "YANG Parameters" registry.

            name: ietf-dslite
            namespace: urn:ietf:params:xml:ns:yang:ietf-dslite
            prefix: dslite
            reference: <a href="./rfc8513">RFC 8513</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20References"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.1.%20%20Normative%20References"></a><a class="selflink" href="#section-6.1" id="section-6.1">6.1</a>.  Normative References</span>

   [<a id="ref-RFC3688">RFC3688</a>]  Mealling, M., "The IETF XML Registry", <a href="https://www.rfc-editor.org/bcp/bcp81">BCP 81</a>, <a href="./rfc3688">RFC 3688</a>,
              DOI 10.17487/RFC3688, January 2004,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3688">https://www.rfc-editor.org/info/rfc3688</a>&gt;.

   [<a id="ref-RFC6241">RFC6241</a>]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", <a href="./rfc6241">RFC 6241</a>, DOI 10.17487/RFC6241, June 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6241">https://www.rfc-editor.org/info/rfc6241</a>&gt;.

   [<a id="ref-RFC6242">RFC6242</a>]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", <a href="./rfc6242">RFC 6242</a>, DOI 10.17487/RFC6242, June 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6242">https://www.rfc-editor.org/info/rfc6242</a>&gt;.

   [<a id="ref-RFC6333">RFC6333</a>]  Durand, A., Droms, R., Woodyatt, J., and Y. Lee, "Dual-
              Stack Lite Broadband Deployments Following IPv4
              Exhaustion", <a href="./rfc6333">RFC 6333</a>, DOI 10.17487/RFC6333, August 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6333">https://www.rfc-editor.org/info/rfc6333</a>&gt;.

   [<a id="ref-RFC6991">RFC6991</a>]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              <a href="./rfc6991">RFC 6991</a>, DOI 10.17487/RFC6991, July 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6991">https://www.rfc-editor.org/info/rfc6991</a>&gt;.






<span class="grey">Boucadair, et al.            Standards Track                   [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


   [<a id="ref-RFC7224">RFC7224</a>]  Bjorklund, M., "IANA Interface Type YANG Module",
              <a href="./rfc7224">RFC 7224</a>, DOI 10.17487/RFC7224, May 2014,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7224">https://www.rfc-editor.org/info/rfc7224</a>&gt;.

   [<a id="ref-RFC7950">RFC7950</a>]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              <a href="./rfc7950">RFC 7950</a>, DOI 10.17487/RFC7950, August 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7950">https://www.rfc-editor.org/info/rfc7950</a>&gt;.

   [<a id="ref-RFC8040">RFC8040</a>]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", <a href="./rfc8040">RFC 8040</a>, DOI 10.17487/RFC8040, January 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8040">https://www.rfc-editor.org/info/rfc8040</a>&gt;.

   [<a id="ref-RFC8341">RFC8341</a>]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, <a href="./rfc8341">RFC 8341</a>,
              DOI 10.17487/RFC8341, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8341">https://www.rfc-editor.org/info/rfc8341</a>&gt;.

   [<a id="ref-RFC8343">RFC8343</a>]  Bjorklund, M., "A YANG Data Model for Interface
              Management", <a href="./rfc8343">RFC 8343</a>, DOI 10.17487/RFC8343, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8343">https://www.rfc-editor.org/info/rfc8343</a>&gt;.

   [<a id="ref-RFC8446">RFC8446</a>]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", <a href="./rfc8446">RFC 8446</a>, DOI 10.17487/RFC8446, August 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;.

   [<a id="ref-RFC8512">RFC8512</a>]  Boucadair, M., Ed., Sivakumar, S., Jacquenet, C.,
              Vinapamula, S., and Q. Wu, "A YANG Module for Network
              Address Translation (NAT) and Network Prefix Translation
              (NPT)", <a href="./rfc8512">RFC 8512</a>, DOI 10.17487/RFC8512, January 2019,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8512">https://www.rfc-editor.org/info/rfc8512</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.%20%20Informative%20References"></a><a class="selflink" href="#section-6.2" id="section-6.2">6.2</a>.  Informative References</span>

   [<a id="ref-ACL-YANG">ACL-YANG</a>] Jethanandani, M., Agarwal, S., Huang, L., and D. Blair,
              "Network Access Control List (ACL) YANG Data Model", Work
              in Progress, <a href="./draft-ietf-netmod-acl-model-21">draft-ietf-netmod-acl-model-21</a>, November
              2018.

   [<a id="ref-RFC3022">RFC3022</a>]  Srisuresh, P. and K. Egevang, "Traditional IP Network
              Address Translator (Traditional NAT)", <a href="./rfc3022">RFC 3022</a>,
              DOI 10.17487/RFC3022, January 2001,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3022">https://www.rfc-editor.org/info/rfc3022</a>&gt;.

   [<a id="ref-RFC6908">RFC6908</a>]  Lee, Y., Maglione, R., Williams, C., Jacquenet, C., and
              M. Boucadair, "Deployment Considerations for Dual-Stack
              Lite", <a href="./rfc6908">RFC 6908</a>, DOI 10.17487/RFC6908, March 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6908">https://www.rfc-editor.org/info/rfc6908</a>&gt;.




<span class="grey">Boucadair, et al.            Standards Track                   [Page 17]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-18"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


   [<a id="ref-RFC7785">RFC7785</a>]  Vinapamula, S. and M. Boucadair, "Recommendations for
              Prefix Binding in the Context of Softwire Dual-Stack
              Lite", <a href="./rfc7785">RFC 7785</a>, DOI 10.17487/RFC7785, February 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7785">https://www.rfc-editor.org/info/rfc7785</a>&gt;.

   [<a id="ref-RFC8340">RFC8340</a>]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              <a href="https://www.rfc-editor.org/bcp/bcp215">BCP 215</a>, <a href="./rfc8340">RFC 8340</a>, DOI 10.17487/RFC8340, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8340">https://www.rfc-editor.org/info/rfc8340</a>&gt;.

   [<a id="ref-RFC8342">RFC8342</a>]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", <a href="./rfc8342">RFC 8342</a>, DOI 10.17487/RFC8342, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8342">https://www.rfc-editor.org/info/rfc8342</a>&gt;.

   [<a id="ref-RFC8407">RFC8407</a>]  Bierman, A., "Guidelines for Authors and Reviewers of
              Documents Containing YANG Data Models", <a href="https://www.rfc-editor.org/bcp/bcp216">BCP 216</a>, <a href="./rfc8407">RFC 8407</a>,
              DOI 10.17487/RFC8407, October 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8407">https://www.rfc-editor.org/info/rfc8407</a>&gt;.

   [<a id="ref-YANG-PCP">YANG-PCP</a>] Boucadair, M., Jacquenet, C., Sivakumar, S., and
              S. Vinapamula, "YANG Modules for the Port Control Protocol
              (PCP)", Work in Progress, <a href="./draft-boucadair-pcp-yang-05">draft-boucadair-pcp-yang-05</a>,
              October 2017.




























<span class="grey">Boucadair, et al.            Standards Track                   [Page 18]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-19"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20A.%20%20B4%20Example"></a><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  B4 Example</span>

   The following example shows a B4 element (2001:db8:0:1::1) that is
   configured with an AFTR element (2001:db8:0:2::1).  The B4 element is
   also instructed to preserve the DSCP marking.

   &lt;interfaces&gt;
     &lt;interface&gt;
       &lt;name&gt;myB4&lt;/name&gt;
       &lt;type&gt;dslite:dslite&lt;/type&gt;
       &lt;enabled&gt;true&lt;/enabled&gt;
       &lt;dslite:ipv6-address&gt;
         2001:db8:0:1::1
       &lt;/dslite:ipv6-address&gt;
       &lt;dslite:aftr-ipv6-addr&gt;
         2001:db8:0:2::1
       &lt;/dslite:aftr-ipv6-addr&gt;
       &lt;dslite:v6-v4-dscp-preservation&gt;
         true
       &lt;/dslite:v6-v4-dscp-preservation&gt;
     &lt;/interface&gt;
   &lt;/interfaces&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20B.%20%20AFTR%20Examples"></a><a class="selflink" href="#appendix-B" id="appendix-B">Appendix B</a>.  AFTR Examples</span>

   The following example shows an AFTR that is reachable at
   2001:db8:0:2::1.  Also, this XML snippet indicates that the AFTR is
   provided with an IPv4 address (192.0.0.1) to be used for
   troubleshooting purposes such as reporting problems to B4s.

   Note that a subscriber is identified by a subscriber-mask [<a href="./rfc7785" title='"Recommendations for Prefix Binding in the Context of Softwire Dual-Stack Lite"'>RFC7785</a>]
   that can be configured by means of [<a href="./rfc8512" title='"A YANG Module for Network Address Translation (NAT) and Network Prefix Translation (NPT)"'>RFC8512</a>].

   &lt;interfaces&gt;
     &lt;interface&gt;
       &lt;name&gt;myAFTR&lt;/name&gt;
       &lt;type&gt;dslite:dslite&lt;/type&gt;
       &lt;enabled&gt;true&lt;/enabled&gt;
       &lt;dslite:ipv6-address&gt;2001:db8:0:2::1&lt;/dslite:ipv6-address&gt;
       &lt;dslite:ipv4-address&gt;192.0.0.1&lt;/dslite:ipv4-address&gt;
     &lt;/interface&gt;
   &lt;/interfaces&gt;

   The following shows an XML excerpt depicting a dynamic UDP mapping
   entry maintained by a DS-Lite AFTR for a packet received from the B4
   element introduced in <a href="#appendix-A">Appendix A</a>.  Concretely, this UDP packet
   received with a source IPv6 address (2001:db8:0:1::1), a source IPv4
   address (192.0.2.1), and a source port number (1568) is translated



<span class="grey">Boucadair, et al.            Standards Track                   [Page 19]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-20"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


   into a UDP packet having a source IPv4 address (198.51.100.1) and
   source port number (15000).  The remaining lifetime of this mapping
   is 300 seconds.

   &lt;mapping-entry&gt;
     &lt;index&gt;15&lt;/index&gt;
     &lt;type&gt;
       dynamic-explicit
     &lt;/type&gt;
     &lt;transport-protocol&gt;
       17
     &lt;/transport-protocol&gt;
     &lt;dslite:b4-ipv6-address&gt;
       &lt;dslite:address&gt;
         2001:db8:0:1::1
       &lt;/dslite:address&gt;
     &lt;/dslite:b4-ipv6-address&gt;
     &lt;internal-src-address&gt;
       192.0.2.1
     &lt;/internal-src-address&gt;
     &lt;internal-src-port&gt;
       &lt;start-port-number&gt;
         1568
       &lt;/start-port-number&gt;
     &lt;/internal-src-port&gt;
     &lt;external-src-address&gt;
       198.51.100.1
     &lt;/external-src-address&gt;
     &lt;external-src-port&gt;
       &lt;start-port-number&gt;
         15000
       &lt;/start-port-number&gt;
     &lt;/external-src-port&gt;
     &lt;lifetime&gt;
       300
     &lt;/lifetime&gt;
   &lt;/mapping-entry&gt;














<span class="grey">Boucadair, et al.            Standards Track                   [Page 20]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-21"></span>
<span class="grey"><a href="./rfc8513">RFC 8513</a>                   DS-Lite YANG Module              January 2019</span>


Acknowledgements

   Thanks to Qin Wu, Benoit Claise, and Andy Bierman who helped to
   identify compiling errors.  Mahesh Jethanandani provided early YANG
   Doctors reviews; many thanks to him.

   Many thanks to Ian Farrer and Tom Petch for their reviews and
   comments.

Authors' Addresses

   Mohamed Boucadair
   Orange
   Rennes  35000
   France

   Email: mohamed.boucadair@orange.com


   Christian Jacquenet
   Orange
   Rennes  35000
   France

   Email: christian.jacquenet@orange.com


   Senthil Sivakumar
   Cisco Systems
   7100-8 Kit Creek Road
   Research Triangle Park, North Carolina  27709
   United States of America

   Phone: +1-919-392-5158
   Email: ssenthil@cisco.com
















Boucadair, et al.            Standards Track                   [Page 21]
</pre>
</body></html>