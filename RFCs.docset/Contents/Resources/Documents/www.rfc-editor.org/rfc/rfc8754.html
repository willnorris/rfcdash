<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 8754: IPv6 Segment Routing Header (SRH)</title>
<meta content="Clarence Filsfils" name="author"/>
<meta content="Darren Dukes" name="author"/>
<meta content="Stefano Previdi" name="author"/>
<meta content="John Leddy" name="author"/>
<meta content="Satoru Matsushima" name="author"/>
<meta content="Daniel Voyer" name="author"/>
<meta content="
       Segment Routing can be applied to the IPv6 data plane using a new
      type of Routing Extension Header called the Segment Routing Header (SRH). This
      document describes the SRH and how it is used by nodes that are
      Segment Routing (SR) capable. 
    " name="description"/>
<meta content="xml2rfc 2.40.1" name="generator"/>
<meta content="SRv6" name="keyword"/>
<meta content="source-routing" name="keyword"/>
<meta content="network-programming" name="keyword"/>
<meta content="8754" name="rfc.number"/>
<link href="rfc8754.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/*
  The margin-left: 0 on <dd> removes all distinction
  between levels from nested <dl>s.  Undo that.
*/
dl.olPercent > dd,
dd {
  margin-left: revert;
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc8754" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-6man-segment-routing-header-26" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 8754</td>
<td class="center">IPv6 Segment Routing Header (SRH)</td>
<td class="right">March 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Filsfils, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc8754">8754</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2020-03">March 2020</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. Filsfils, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">D. Dukes, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">S. Previdi</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">J. Leddy</div>
<div class="org">Individual</div>
</div>
<div class="author">
      <div class="author-name">S. Matsushima</div>
<div class="org">SoftBank</div>
</div>
<div class="author">
      <div class="author-name">D. Voyer</div>
<div class="org">Bell Canada</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 8754</h1>
<h1 id="title">IPv6 Segment Routing Header (SRH)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">Segment Routing can be applied to the IPv6 data plane using a new
      type of Routing Extension Header called the Segment Routing Header (SRH). This
      document describes the SRH and how it is used by nodes that are
      Segment Routing (SR) capable.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc8754">https://www.rfc-editor.org/info/rfc8754</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a><a class="pilcrow" href="#section-toc.1-1.1.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1"><a class="xref" href="#section-1.1">1.1</a>.  <a class="xref" href="#name-terminology">Terminology</a><a class="pilcrow" href="#section-toc.1-1.1.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1"><a class="xref" href="#section-1.2">1.2</a>.  <a class="xref" href="#name-requirements-language">Requirements Language</a><a class="pilcrow" href="#section-toc.1-1.1.2.2.1">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-segment-routing-header">Segment Routing Header</a><a class="pilcrow" href="#section-toc.1-1.2.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a class="xref" href="#section-2.1">2.1</a>.  <a class="xref" href="#name-srh-tlvs">SRH TLVs</a><a class="pilcrow" href="#section-toc.1-1.2.2.1.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a class="xref" href="#section-2.1.1">2.1.1</a>.  <a class="xref" href="#name-padding-tlvs">Padding TLVs</a><a class="pilcrow" href="#section-toc.1-1.2.2.1.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.1.2.2">
                    <p id="section-toc.1-1.2.2.1.2.2.1"><a class="xref" href="#section-2.1.2">2.1.2</a>.  <a class="xref" href="#name-hmac-tlv">HMAC TLV</a><a class="pilcrow" href="#section-toc.1-1.2.2.1.2.2.1">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-sr-nodes">SR Nodes</a><a class="pilcrow" href="#section-toc.1-1.3.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="xref" href="#section-3.1">3.1</a>.  <a class="xref" href="#name-sr-source-node">SR Source Node</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="xref" href="#section-3.2">3.2</a>.  <a class="xref" href="#name-transit-node">Transit Node</a><a class="pilcrow" href="#section-toc.1-1.3.2.2.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="xref" href="#section-3.3">3.3</a>.  <a class="xref" href="#name-sr-segment-endpoint-node">SR Segment Endpoint Node</a><a class="pilcrow" href="#section-toc.1-1.3.2.3.1">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-packet-processing">Packet Processing</a><a class="pilcrow" href="#section-toc.1-1.4.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-sr-source-node-2">SR Source Node</a><a class="pilcrow" href="#section-toc.1-1.4.2.1.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a class="xref" href="#section-4.1.1">4.1.1</a>.  <a class="xref" href="#name-reduced-srh">Reduced SRH</a><a class="pilcrow" href="#section-toc.1-1.4.2.1.2.1.1">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-transit-node-2">Transit Node</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="xref" href="#section-4.3">4.3</a>.  <a class="xref" href="#name-sr-segment-endpoint-node-2">SR Segment Endpoint Node</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a class="xref" href="#section-4.3.1">4.3.1</a>.  <a class="xref" href="#name-fib-entry-is-a-locally-inst">FIB Entry Is a Locally Instantiated SRv6 SID</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a class="xref" href="#section-4.3.2">4.3.2</a>.  <a class="xref" href="#name-fib-entry-is-a-local-interf">FIB Entry Is a Local Interface</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.2.2.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.3.2.3">
                    <p id="section-toc.1-1.4.2.3.2.3.1"><a class="xref" href="#section-4.3.3">4.3.3</a>.  <a class="xref" href="#name-fib-entry-is-a-nonlocal-rou">FIB Entry Is a Nonlocal Route</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.2.3.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.3.2.4">
                    <p id="section-toc.1-1.4.2.3.2.4.1"><a class="xref" href="#section-4.3.4">4.3.4</a>.  <a class="xref" href="#name-fib-entry-is-a-no-match">FIB Entry Is a No Match</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.2.4.1">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-intra-sr-domain-deployment-">Intra-SR-Domain Deployment Model</a><a class="pilcrow" href="#section-toc.1-1.5.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.  <a class="xref" href="#name-securing-the-sr-domain">Securing the SR Domain</a><a class="pilcrow" href="#section-toc.1-1.5.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="xref" href="#section-5.2">5.2</a>.  <a class="xref" href="#name-sr-domain-as-a-single-syste">SR Domain as a Single System with Delegation among Components</a><a class="pilcrow" href="#section-toc.1-1.5.2.2.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="xref" href="#section-5.3">5.3</a>.  <a class="xref" href="#name-mtu-considerations">MTU Considerations</a><a class="pilcrow" href="#section-toc.1-1.5.2.3.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a class="xref" href="#section-5.4">5.4</a>.  <a class="xref" href="#name-icmp-error-processing">ICMP Error Processing</a><a class="pilcrow" href="#section-toc.1-1.5.2.4.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a class="xref" href="#section-5.5">5.5</a>.  <a class="xref" href="#name-load-balancing-and-ecmp">Load Balancing and ECMP</a><a class="pilcrow" href="#section-toc.1-1.5.2.5.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a class="xref" href="#section-5.6">5.6</a>.  <a class="xref" href="#name-other-deployments">Other Deployments</a><a class="pilcrow" href="#section-toc.1-1.5.2.6.1">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-illustrations">Illustrations</a><a class="pilcrow" href="#section-toc.1-1.6.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="xref" href="#section-6.1">6.1</a>.  <a class="xref" href="#name-abstract-representation-of-">Abstract Representation of an SRH</a><a class="pilcrow" href="#section-toc.1-1.6.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a class="xref" href="#section-6.2">6.2</a>.  <a class="xref" href="#name-example-topology">Example Topology</a><a class="pilcrow" href="#section-toc.1-1.6.2.2.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a class="xref" href="#section-6.3">6.3</a>.  <a class="xref" href="#name-sr-source-node-3">SR Source Node</a><a class="pilcrow" href="#section-toc.1-1.6.2.3.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.3.2.1">
                    <p id="section-toc.1-1.6.2.3.2.1.1"><a class="xref" href="#section-6.3.1">6.3.1</a>.  <a class="xref" href="#name-intra-sr-domain-packet">Intra-SR-Domain Packet</a><a class="pilcrow" href="#section-toc.1-1.6.2.3.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.3.2.2">
                    <p id="section-toc.1-1.6.2.3.2.2.1"><a class="xref" href="#section-6.3.2">6.3.2</a>.  <a class="xref" href="#name-inter-sr-domain-packet-tran">Inter-SR-Domain Packet -- Transit</a><a class="pilcrow" href="#section-toc.1-1.6.2.3.2.2.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.3.2.3">
                    <p id="section-toc.1-1.6.2.3.2.3.1"><a class="xref" href="#section-6.3.3">6.3.3</a>.  <a class="xref" href="#name-inter-sr-domain-packet-inte">Inter-SR-Domain Packet -- Internal to External</a><a class="pilcrow" href="#section-toc.1-1.6.2.3.2.3.1">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a class="xref" href="#section-6.4">6.4</a>.  <a class="xref" href="#name-transit-node-3">Transit Node</a><a class="pilcrow" href="#section-toc.1-1.6.2.4.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a class="xref" href="#section-6.5">6.5</a>.  <a class="xref" href="#name-sr-segment-endpoint-node-3">SR Segment Endpoint Node</a><a class="pilcrow" href="#section-toc.1-1.6.2.5.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.6">
                <p id="section-toc.1-1.6.2.6.1"><a class="xref" href="#section-6.6">6.6</a>.  <a class="xref" href="#name-delegation-of-function-with">Delegation of Function with HMAC Verification</a><a class="pilcrow" href="#section-toc.1-1.6.2.6.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.6.2.1">
                    <p id="section-toc.1-1.6.2.6.2.1.1"><a class="xref" href="#section-6.6.1">6.6.1</a>.  <a class="xref" href="#name-sid-list-verification">SID List Verification</a><a class="pilcrow" href="#section-toc.1-1.6.2.6.2.1.1">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a><a class="pilcrow" href="#section-toc.1-1.7.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="xref" href="#section-7.1">7.1</a>.  <a class="xref" href="#name-sr-attacks">SR Attacks</a><a class="pilcrow" href="#section-toc.1-1.7.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="xref" href="#section-7.2">7.2</a>.  <a class="xref" href="#name-service-theft">Service Theft</a><a class="pilcrow" href="#section-toc.1-1.7.2.2.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a class="xref" href="#section-7.3">7.3</a>.  <a class="xref" href="#name-topology-disclosure">Topology Disclosure</a><a class="pilcrow" href="#section-toc.1-1.7.2.3.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a class="xref" href="#section-7.4">7.4</a>.  <a class="xref" href="#name-icmp-generation">ICMP Generation</a><a class="pilcrow" href="#section-toc.1-1.7.2.4.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a class="xref" href="#section-7.5">7.5</a>.  <a class="xref" href="#name-applicability-of-ah">Applicability of AH</a><a class="pilcrow" href="#section-toc.1-1.7.2.5.1">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a><a class="pilcrow" href="#section-toc.1-1.8.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a class="xref" href="#section-8.1">8.1</a>.  <a class="xref" href="#name-segment-routing-header-flag">Segment Routing Header Flags Registry</a><a class="pilcrow" href="#section-toc.1-1.8.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a class="xref" href="#section-8.2">8.2</a>.  <a class="xref" href="#name-segment-routing-header-tlvs">Segment Routing Header TLVs Registry</a><a class="pilcrow" href="#section-toc.1-1.8.2.2.1">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-references">References</a><a class="pilcrow" href="#section-toc.1-1.9.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="xref" href="#section-9.1">9.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a><a class="pilcrow" href="#section-toc.1-1.9.2.1.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="xref" href="#section-9.2">9.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a><a class="pilcrow" href="#section-toc.1-1.9.2.2.1">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-appendix.a"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a><a class="pilcrow" href="#section-toc.1-1.10.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-appendix.b"></a><a class="xref" href="#name-contributors">Contributors</a><a class="pilcrow" href="#section-toc.1-1.11.1">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="xref" href="#section-appendix.c"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a><a class="pilcrow" href="#section-toc.1-1.12.1">¶</a></p>
</li>
</ul>
</nav>
</section>
</div>
<div id="INTRO">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">Segment Routing (SR) can be applied to the IPv6 data plane using a new
      type of routing header called the Segment Routing Header (SRH). This document
      describes the SRH and how it is used by nodes that are SR capable.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">"Segment Routing Architecture" <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span> describes
      Segment Routing and its instantiation in two data planes: MPLS and
      IPv6.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">The encoding of IPv6 segments in the SRH is
      defined in this document.<a class="pilcrow" href="#section-1-3">¶</a></p>
<div id="TERMS">
<section id="section-1.1">
        <h3 id="name-terminology">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
        </h3>
<p id="section-1.1-1">This document uses the terms Segment Routing (SR), SR domain, SR over
      IPv6 (SRv6), Segment Identifier (SID), SRv6 SID, Active Segment, and SR Policy as defined in
      <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span>.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
</section>
</div>
<section id="section-1.2">
        <h3 id="name-requirements-language">
<a class="section-number selfRef" href="#section-1.2">1.2. </a><a class="section-name selfRef" href="#name-requirements-language">Requirements Language</a>
        </h3>
<p id="section-1.2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
    "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>",
    "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.2-1">¶</a></p>
</section>
</section>
</div>
<div id="SRH">
<section id="section-2">
      <h2 id="name-segment-routing-header">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-segment-routing-header">Segment Routing Header</a>
      </h2>
<p id="section-2-1">Routing headers are defined in <span>[<a class="xref" href="#RFC8200">RFC8200</a>]</span>. The Segment
      Routing Header (SRH) has a new Routing Type (4).<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">The SRH is defined as follows:<a class="pilcrow" href="#section-2-2">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2-3">
<pre>  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 | Next Header   |  Hdr Ext Len  | Routing Type  | Segments Left |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |  Last Entry   |     Flags     |              Tag              |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                                                               |
 |            Segment List[0] (128-bit IPv6 address)             |
 |                                                               |
 |                                                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                                                               |
 |                                                               |
                               ...
 |                                                               |
 |                                                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                                                               |
 |            Segment List[n] (128-bit IPv6 address)             |
 |                                                               |
 |                                                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 //                                                             //
 //         Optional Type Length Value objects (variable)       //
 //                                                             //
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-2-3">¶</a>
</div>
<p id="section-2-4">where:<a class="pilcrow" href="#section-2-4">¶</a></p>
<dl class="dlParallel" id="section-2-5">
        <dt id="section-2-5.1">Next Header:</dt>
<dd id="section-2-5.2">Defined in <span>[<a class="xref" href="#RFC8200">RFC8200</a>], <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8200#section-4.4">Section 4.4</a></span>.<a class="pilcrow" href="#section-2-5.2">¶</a>
</dd>
<dt id="section-2-5.3">Hdr Ext Len:</dt>
<dd id="section-2-5.4">Defined in <span>[<a class="xref" href="#RFC8200">RFC8200</a>], <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8200#section-4.4">Section 4.4</a></span>.<a class="pilcrow" href="#section-2-5.4">¶</a>
</dd>
<dt id="section-2-5.5">Routing Type:</dt>
<dd id="section-2-5.6">4.<a class="pilcrow" href="#section-2-5.6">¶</a>
</dd>
<dt id="section-2-5.7">Segments Left:</dt>
<dd id="section-2-5.8">Defined in <span>[<a class="xref" href="#RFC8200">RFC8200</a>], <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8200#section-4.4">Section 4.4</a></span>.<a class="pilcrow" href="#section-2-5.8">¶</a>
</dd>
<dt id="section-2-5.9">Last Entry:</dt>
<dd id="section-2-5.10">contains the index (zero based), in the Segment List,
          of the last element of the Segment List.<a class="pilcrow" href="#section-2-5.10">¶</a>
</dd>
<dt id="section-2-5.11">Flags:</dt>
<dd id="section-2-5.12">8 bits of flags. <a class="xref" href="#SRHFLAGSREG">Section 8.1</a> creates an
          IANA registry for new flags to be defined. The following flags are
          defined:<a class="pilcrow" href="#section-2-5.12">¶</a>
</dd>
</dl>
<div class="artwork art-text alignLeft" id="section-2-6">
<pre>       0 1 2 3 4 5 6 7
      +-+-+-+-+-+-+-+-+
      |U U U U U U U U|
      +-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-2-6">¶</a>
</div>
<dl class="dlParallel" id="section-2-7">
        <dt id="section-2-7.1"></dt>
<dd id="section-2-7.2">U: Unused and for future use. <span class="bcp14">MUST</span> be 0 on transmission and
              ignored on receipt.<a class="pilcrow" href="#section-2-7.2">¶</a>
</dd>
</dl>
<dl class="dlParallel" id="section-2-8">
        <dt id="section-2-8.1">Tag:</dt>
<dd id="section-2-8.2">Tag a packet as part of a class or group of packets -- e.g.,
          packets sharing the same set of properties. When Tag is not used at the
          source, it <span class="bcp14">MUST</span> be set to zero on transmission. When
   Tag is not used during SRH processing, it <span class="bcp14">SHOULD</span> be
   ignored. Tag is not used when
          processing the SID defined in <a class="xref" href="#pktENDSID">Section 4.3.1</a>. It may be
          used when processing other SIDs that are not defined in this
          document. The allocation and use of tag is outside the scope of this
          document.<a class="pilcrow" href="#section-2-8.2">¶</a>
</dd>
<dt id="section-2-8.3">Segment List[0..n]:</dt>
<dd id="section-2-8.4">128-bit IPv6 addresses representing the nth
          segment in the Segment List. The Segment List is encoded starting
          from the last segment of the SR Policy. That is, the first element of
          the Segment List (Segment List[0]) contains the last segment of the
          SR Policy, the second element contains the penultimate segment of
          the SR Policy, and so on.<a class="pilcrow" href="#section-2-8.4">¶</a>
</dd>
<dt id="section-2-8.5">TLV:</dt>
<dd id="section-2-8.6">Type Length Value (TLV) is described in <a class="xref" href="#TLVS">Section 2.1</a>.<a class="pilcrow" href="#section-2-8.6">¶</a>
</dd>
</dl>
<p id="section-2-9">In the SRH, the Next Header, Hdr Ext Len, Routing Type, and Segments
      Left fields are defined in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8200#section-4.4">Section 4.4</a> of [<a class="xref" href="#RFC8200">RFC8200</a>]</span>.
      Based on the constraints in that section, Next Header, Header Ext Len,
      and Routing Type are not mutable while Segments Left is mutable.<a class="pilcrow" href="#section-2-9">¶</a></p>
<p id="section-2-10">The mutability of the TLV value is defined by the most significant
      bit in the type, as specified in <a class="xref" href="#TLVS">Section 2.1</a>.<a class="pilcrow" href="#section-2-10">¶</a></p>
<p id="section-2-11"><a class="xref" href="#ENDSID">Section 4.3</a> defines the mutability of the remaining
      fields in the SRH (Flags, Tag, Segment List) in the context of the SID
      defined in this document.<a class="pilcrow" href="#section-2-11">¶</a></p>
<p id="section-2-12">New SIDs defined in the future <span class="bcp14">MUST</span> specify the mutability properties
      of the Flags, Tag, and Segment List and indicate how the Hashed Message
      Authentication Code (HMAC) TLV (<a class="xref" href="#HMACTLV">Section 2.1.2</a>) verification works. Note that, in effect, these
      fields are mutable.<a class="pilcrow" href="#section-2-12">¶</a></p>
<p id="section-2-13">Consistent with the SR model, the source of the SRH
      always knows how to set the Segment List, Flags, Tag, and TLVs of the SRH
      for use within the SR domain. How it achieves this is outside the scope
      of this document but may be based on topology, available SIDs and their
      mutability properties, the SRH mutability requirements of the
      destination, or any other information.<a class="pilcrow" href="#section-2-13">¶</a></p>
<div id="TLVS">
<section id="section-2.1">
        <h3 id="name-srh-tlvs">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-srh-tlvs">SRH TLVs</a>
        </h3>
<p id="section-2.1-1">This section defines TLVs of the Segment Routing Header.<a class="pilcrow" href="#section-2.1-1">¶</a></p>
<p id="section-2.1-2">A TLV provides metadata for segment processing. The only TLVs
        defined in this document are the HMAC (<a class="xref" href="#HMACTLV">Section 2.1.2</a>) and
        padding TLVs (<a class="xref" href="#PADDINGTLV">Section 2.1.1</a>). While processing the SID
        defined in <a class="xref" href="#pktENDSID">Section 4.3.1</a>, all TLVs are ignored unless
        local configuration indicates otherwise (<a class="xref" href="#TLVPROCESS">Section 4.3.1.1.1</a>).
        Thus, TLV and HMAC support is optional for any implementation;
        however, an implementation adding or parsing TLVs <span class="bcp14">MUST</span> support PAD
        TLVs. Other documents may define additional TLVs and processing rules
        for them.<a class="pilcrow" href="#section-2.1-2">¶</a></p>
<p id="section-2.1-3">TLVs are present when the Hdr Ext Len is greater than (Last
        Entry+1)*2.<a class="pilcrow" href="#section-2.1-3">¶</a></p>
<p id="section-2.1-4">While processing TLVs at a segment endpoint, TLVs <span class="bcp14">MUST</span> be fully
        contained within the SRH as determined by the Hdr Ext
 Len.  Detection
        of TLVs exceeding the boundary of the SRH Hdr Ext Len results in an
        ICMP Parameter Problem, Code 0, message to the Source Address,
        pointing to the Hdr Ext Len field of the SRH, and the packet being
        discarded.<a class="pilcrow" href="#section-2.1-4">¶</a></p>
<p id="section-2.1-5">An implementation <span class="bcp14">MAY</span> limit the number and/or length of TLVs it
        processes based on local configuration. It <span class="bcp14">MAY</span> limit:<a class="pilcrow" href="#section-2.1-5">¶</a></p>
<ul>
<li id="section-2.1-6.1">the number of consecutive Pad1 (<a class="xref" href="#PAD1">Section 2.1.1.1</a>)
            options to 1. If padding of more than one byte is required, then
            PadN (<a class="xref" href="#PADN">Section 2.1.1.2</a>) should be used.<a class="pilcrow" href="#section-2.1-6.1">¶</a>
</li>
<li id="section-2.1-6.2">The length in PadN to 5.<a class="pilcrow" href="#section-2.1-6.2">¶</a>
</li>
<li id="section-2.1-6.3">The maximum number of non-Pad TLVs to be processed.<a class="pilcrow" href="#section-2.1-6.3">¶</a>
</li>
<li id="section-2.1-6.4">The maximum length of all TLVs to be processed.<a class="pilcrow" href="#section-2.1-6.4">¶</a>
</li>
</ul>
<p id="section-2.1-7"> The implementation <span class="bcp14">MAY</span> stop processing additional TLVs in
        the SRH when these configured limits are exceeded.<a class="pilcrow" href="#section-2.1-7">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1-8">
<pre> 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-----------------------
|     Type      |    Length     | Variable-length data
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-----------------------
</pre><a class="pilcrow" href="#section-2.1-8">¶</a>
</div>
<dl class="dlParallel" id="section-2.1-9">
          <dt id="section-2.1-9.1">Type:</dt>
<dd id="section-2.1-9.2">An 8-bit codepoint from the "Segment Routing Header TLVs" <span>[<a class="xref" href="#IANA-SRHTLV">IANA-SRHTLV</a>]</span>.


          
 Unrecognized Types <span class="bcp14">MUST</span> be ignored on receipt.<a class="pilcrow" href="#section-2.1-9.2">¶</a>
</dd>
<dt id="section-2.1-9.3">Length:</dt>
<dd id="section-2.1-9.4">The length of the variable-length data field in bytes.<a class="pilcrow" href="#section-2.1-9.4">¶</a>
</dd>
<dt id="section-2.1-9.5">Variable-length data:</dt>
<dd id="section-2.1-9.6">data that is specific to the
        Type.<a class="pilcrow" href="#section-2.1-9.6">¶</a>
</dd>
</dl>
<p id="section-2.1-10">Type Length Value (TLV) entries contain <span class="bcp14">OPTIONAL</span> information that
        may be used by the node identified in the Destination Address (DA) of
        the packet.<a class="pilcrow" href="#section-2.1-10">¶</a></p>
<p id="section-2.1-11">Each TLV has its own length, format, and semantic. The codepoint
        allocated (by IANA) to each TLV Type defines both the format and the
        semantic of the information carried in the TLV. Multiple TLVs may be
        encoded in the same SRH.<a class="pilcrow" href="#section-2.1-11">¶</a></p>
<p id="section-2.1-12">The highest-order bit of the TLV type (bit 0) specifies whether or
        not the TLV data of that type can change en route to the packet's
        final destination:<a class="pilcrow" href="#section-2.1-12">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-2.1-13.1">0: TLV data does not change en route<a class="pilcrow" href="#section-2.1-13.1">¶</a>
</li>
<li class="ulEmpty" id="section-2.1-13.2">1: TLV data does change en route<a class="pilcrow" href="#section-2.1-13.2">¶</a>
</li>
</ul>
<p id="section-2.1-14">All TLVs specify their alignment requirements using an xn+y format.
        The xn+y format is defined as per <span>[<a class="xref" href="#RFC8200">RFC8200</a>]</span>. The SR
        source nodes use the xn+y alignment requirements of TLVs and Padding
        TLVs when constructing an SRH.<a class="pilcrow" href="#section-2.1-14">¶</a></p>
<p id="section-2.1-15">The Length field of the TLV is used to skip the TLV while
        inspecting the SRH in case the node doesn't support or recognize the
        Type. The Length defines the TLV length in octets, not including the
        Type and Length fields.<a class="pilcrow" href="#section-2.1-15">¶</a></p>
<p id="section-2.1-16">The following TLVs are defined in this document:<a class="pilcrow" href="#section-2.1-16">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-2.1-17.1">Padding TLVs<a class="pilcrow" href="#section-2.1-17.1">¶</a>
</li>
<li class="ulEmpty" id="section-2.1-17.2">HMAC TLV<a class="pilcrow" href="#section-2.1-17.2">¶</a>
</li>
</ul>
<p id="section-2.1-18">Additional TLVs may be defined in the future.<a class="pilcrow" href="#section-2.1-18">¶</a></p>
<div id="PADDINGTLV">
<section id="section-2.1.1">
          <h4 id="name-padding-tlvs">
<a class="section-number selfRef" href="#section-2.1.1">2.1.1. </a><a class="section-name selfRef" href="#name-padding-tlvs">Padding TLVs</a>
          </h4>
<p id="section-2.1.1-1">There are two types of Padding TLVs, Pad1 and PadN, and the following
          applies to both:<a class="pilcrow" href="#section-2.1.1-1">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-2.1.1-2.1">Padding TLVs are used for meeting the alignment requirement
              of the subsequent TLVs.<a class="pilcrow" href="#section-2.1.1-2.1">¶</a>
</li>
<li class="ulEmpty" id="section-2.1.1-2.2">Padding TLVs are used to pad the SRH to a multiple of 8
              octets.<a class="pilcrow" href="#section-2.1.1-2.2">¶</a>
</li>
<li class="ulEmpty" id="section-2.1.1-2.3">Padding TLVs are ignored by a node processing the SRH
              TLV.<a class="pilcrow" href="#section-2.1.1-2.3">¶</a>
</li>
<li class="ulEmpty" id="section-2.1.1-2.4">Multiple Padding TLVs <span class="bcp14">MAY</span> be used in one SRH.<a class="pilcrow" href="#section-2.1.1-2.4">¶</a>
</li>
</ul>
<div id="PAD1">
<section id="section-2.1.1.1">
            <h5 id="name-pad1">
<a class="section-number selfRef" href="#section-2.1.1.1">2.1.1.1. </a><a class="section-name selfRef" href="#name-pad1">Pad1</a>
            </h5>
<p id="section-2.1.1.1-1">Alignment requirement: none<a class="pilcrow" href="#section-2.1.1.1-1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1.1.1-2">
<pre>   0 1 2 3 4 5 6 7
  +-+-+-+-+-+-+-+-+
  |     Type      |
  +-+-+-+-+-+-+-+-+</pre><a class="pilcrow" href="#section-2.1.1.1-2">¶</a>
</div>
<dl class="dlParallel" id="section-2.1.1.1-3">
              <dt id="section-2.1.1.1-3.1">Type:</dt>
<dd id="section-2.1.1.1-3.2">0<a class="pilcrow" href="#section-2.1.1.1-3.2">¶</a>
</dd>
</dl>
<p id="section-2.1.1.1-4">A single Pad1 TLV <span class="bcp14">MUST</span> be used when a single byte of padding is
            required. A Pad1 TLV <span class="bcp14">MUST NOT</span> be used if more than one consecutive
            byte of padding is required.<a class="pilcrow" href="#section-2.1.1.1-4">¶</a></p>
</section>
</div>
<div id="PADN">
<section id="section-2.1.1.2">
            <h5 id="name-padn">
<a class="section-number selfRef" href="#section-2.1.1.2">2.1.1.2. </a><a class="section-name selfRef" href="#name-padn">PadN</a>
            </h5>
<p id="section-2.1.1.2-1">Alignment requirement: none<a class="pilcrow" href="#section-2.1.1.2-1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1.1.2-2">
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |    Length     |      Padding (variable)       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
//                    Padding (variable)                       //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a class="pilcrow" href="#section-2.1.1.2-2">¶</a>
</div>
<dl class="dlParallel" id="section-2.1.1.2-3">
              <dt id="section-2.1.1.2-3.1">Type:</dt>
<dd id="section-2.1.1.2-3.2">4<a class="pilcrow" href="#section-2.1.1.2-3.2">¶</a>
</dd>
<dt id="section-2.1.1.2-3.3">Length:</dt>
<dd id="section-2.1.1.2-3.4">0 to 5. The length of the Padding field in bytes.<a class="pilcrow" href="#section-2.1.1.2-3.4">¶</a>
</dd>
<dt id="section-2.1.1.2-3.5">Padding:</dt>
<dd id="section-2.1.1.2-3.6">Padding bits have no
                semantic. They <span class="bcp14">MUST</span> be set to 0 on transmission and ignored on
                receipt.<a class="pilcrow" href="#section-2.1.1.2-3.6">¶</a>
</dd>
</dl>
<p id="section-2.1.1.2-4">The PadN TLV <span class="bcp14">MUST</span> be used when more than one byte of padding is
            required.<a class="pilcrow" href="#section-2.1.1.2-4">¶</a></p>
</section>
</div>
</section>
</div>
<div id="HMACTLV">
<section id="section-2.1.2">
          <h4 id="name-hmac-tlv">
<a class="section-number selfRef" href="#section-2.1.2">2.1.2. </a><a class="section-name selfRef" href="#name-hmac-tlv">HMAC TLV</a>
          </h4>
<p id="section-2.1.2-1">Alignment requirement: 8n<a class="pilcrow" href="#section-2.1.2-1">¶</a></p>
<p id="section-2.1.2-2">The keyed Hashed Message Authentication Code (HMAC) TLV is
          <span class="bcp14">OPTIONAL</span> and has the following format:<a class="pilcrow" href="#section-2.1.2-2">¶</a></p>
<div class="artwork art-text alignLeft" id="section-2.1.2-3">
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Type     |     Length    |D|        RESERVED             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      HMAC Key ID (4 octets)                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                              //
|                      HMAC (variable)                         //
|                                                              //
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

where:</pre><a class="pilcrow" href="#section-2.1.2-3">¶</a>
</div>
<dl class="dlParallel" id="section-2.1.2-4">
            <dt id="section-2.1.2-4.1">Type:</dt>
<dd id="section-2.1.2-4.2">5.<a class="pilcrow" href="#section-2.1.2-4.2">¶</a>
</dd>
<dt id="section-2.1.2-4.3">Length:</dt>
<dd id="section-2.1.2-4.4">The length of the variable-length data in bytes.<a class="pilcrow" href="#section-2.1.2-4.4">¶</a>
</dd>
<dt id="section-2.1.2-4.5">D:</dt>
<dd id="section-2.1.2-4.6">1 bit. 1 indicates that the Destination Address verification is
              disabled due to use of a reduced Segment List (see <a class="xref" href="#REDUCED">Section 4.1.1</a>).<a class="pilcrow" href="#section-2.1.2-4.6">¶</a>
</dd>
<dt id="section-2.1.2-4.7">RESERVED:</dt>
<dd id="section-2.1.2-4.8">15 bits. <span class="bcp14">MUST</span> be 0 on transmission.<a class="pilcrow" href="#section-2.1.2-4.8">¶</a>
</dd>
<dt id="section-2.1.2-4.9">HMAC Key ID:</dt>
<dd id="section-2.1.2-4.10">A 4-octet opaque number that uniquely
              identifies the pre-shared key and algorithm used to generate the
              HMAC.<a class="pilcrow" href="#section-2.1.2-4.10">¶</a>
</dd>
<dt id="section-2.1.2-4.11">HMAC:</dt>
<dd id="section-2.1.2-4.12">Keyed HMAC, in multiples of 8 octets, at most 32
              octets.<a class="pilcrow" href="#section-2.1.2-4.12">¶</a>
</dd>
</dl>
<p id="section-2.1.2-5">The HMAC TLV is used to verify that the SRH applied to a packet
          was selected by an authorized party and to ensure that the segment
          list is not modified after generation. This also allows for
          verification that the current segment (by virtue of being in the
          authorized Segment List) is authorized for use. The SR domain
          ensures that the source node is permitted to use the source address in
          the packet via ingress filtering mechanisms as defined in BCP 84
          <span>[<a class="xref" href="#RFC3704">RFC3704</a>]</span> or other strategies as appropriate.<a class="pilcrow" href="#section-2.1.2-5">¶</a></p>
<section id="section-2.1.2.1">
            <h5 id="name-hmac-generation-and-verific">
<a class="section-number selfRef" href="#section-2.1.2.1">2.1.2.1. </a><a class="section-name selfRef" href="#name-hmac-generation-and-verific">HMAC Generation and Verification</a>
            </h5>
<p id="section-2.1.2.1-1">Local configuration determines when to check for an HMAC. This
            local configuration is outside the scope of this document. It may
            be based on the active segment at an SR Segment endpoint node, the
            result of an Access Control List (ACL) that considers incoming interface, HMAC Key ID,
            or other packet fields.<a class="pilcrow" href="#section-2.1.2.1-1">¶</a></p>
<p id="section-2.1.2.1-2">An implementation that supports the generation and verification
            of the HMAC supports the following default behavior, as
            defined in the remainder of this section.<a class="pilcrow" href="#section-2.1.2.1-2">¶</a></p>
<p id="section-2.1.2.1-3">The HMAC verification begins by checking that the current segment is
            equal to the destination address of the IPv6 header. The check is
            successful when either:<a class="pilcrow" href="#section-2.1.2.1-3">¶</a></p>
<ul>
<li id="section-2.1.2.1-4.1">HMAC D bit is 1 and Segments Left is greater than Last
                Entry, or<a class="pilcrow" href="#section-2.1.2.1-4.1">¶</a>
</li>
<li id="section-2.1.2.1-4.2">HMAC Segments Left is less than or equal to Last Entry, and the
                destination address is equal to Segment List[Segments
                Left].<a class="pilcrow" href="#section-2.1.2.1-4.2">¶</a>
</li>
</ul>
<p id="section-2.1.2.1-5">The HMAC field is the output of the HMAC computation as defined
            in <span>[<a class="xref" href="#RFC2104">RFC2104</a>]</span>, using:<a class="pilcrow" href="#section-2.1.2.1-5">¶</a></p>
<ul>
<li id="section-2.1.2.1-6.1">key: The pre-shared key identified by HMAC Key ID<a class="pilcrow" href="#section-2.1.2.1-6.1">¶</a>
</li>
<li id="section-2.1.2.1-6.2">HMAC algorithm: Identified by the HMAC Key ID<a class="pilcrow" href="#section-2.1.2.1-6.2">¶</a>
</li>
<li id="section-2.1.2.1-6.3">
                <p id="section-2.1.2.1-6.3.1">Text: A concatenation of the following fields from the IPv6
                header and the SRH, as it would be received at the node
                verifying the HMAC:<a class="pilcrow" href="#section-2.1.2.1-6.3.1">¶</a></p>
<ul>
<li id="section-2.1.2.1-6.3.2.1">IPv6 header: Source address (16 octets)<a class="pilcrow" href="#section-2.1.2.1-6.3.2.1">¶</a>
</li>
<li id="section-2.1.2.1-6.3.2.2">SRH: Last Entry (1 octet)<a class="pilcrow" href="#section-2.1.2.1-6.3.2.2">¶</a>
</li>
<li id="section-2.1.2.1-6.3.2.3">SRH: Flags (1 octet)<a class="pilcrow" href="#section-2.1.2.1-6.3.2.3">¶</a>
</li>
<li id="section-2.1.2.1-6.3.2.4">SRH: HMAC 16 bits following Length<a class="pilcrow" href="#section-2.1.2.1-6.3.2.4">¶</a>
</li>
<li id="section-2.1.2.1-6.3.2.5">SRH: HMAC Key ID (4 octets)<a class="pilcrow" href="#section-2.1.2.1-6.3.2.5">¶</a>
</li>
<li id="section-2.1.2.1-6.3.2.6">SRH: All addresses in the Segment List (variable
                    octets)<a class="pilcrow" href="#section-2.1.2.1-6.3.2.6">¶</a>
</li>
</ul>
</li>
</ul>
<p id="section-2.1.2.1-7">The HMAC digest is truncated to 32 octets and placed in the
            HMAC field of the HMAC TLV.<a class="pilcrow" href="#section-2.1.2.1-7">¶</a></p>
<p id="section-2.1.2.1-8">For HMAC algorithms producing digests less than 32 octets long, the
            digest is placed in the lowest-order octets of the HMAC field.
            Subsequent octets <span class="bcp14">MUST</span> be set to zero such that the HMAC length is
            a multiple of 8 octets.<a class="pilcrow" href="#section-2.1.2.1-8">¶</a></p>
<p id="section-2.1.2.1-9">If HMAC verification is successful, processing proceeds as
            normal.<a class="pilcrow" href="#section-2.1.2.1-9">¶</a></p>
<p id="section-2.1.2.1-10">If HMAC verification fails, an ICMP error message (parameter
            problem, error code 0, pointing to the HMAC TLV) <span class="bcp14">SHOULD</span> be
            generated (but rate limited) and logged, and the packet
     <span class="bcp14">SHOULD</span> be discarded.<a class="pilcrow" href="#section-2.1.2.1-10">¶</a></p>
</section>
<section id="section-2.1.2.2">
            <h5 id="name-hmac-pre-shared-key-algorit">
<a class="section-number selfRef" href="#section-2.1.2.2">2.1.2.2. </a><a class="section-name selfRef" href="#name-hmac-pre-shared-key-algorit">HMAC Pre-shared Key Algorithm</a>
            </h5>
<p id="section-2.1.2.2-1">The HMAC Key ID field allows for the simultaneous existence of
            several hash algorithms (SHA-256, SHA3-256 ... or future ones) as
            well as pre-shared keys.<a class="pilcrow" href="#section-2.1.2.2-1">¶</a></p>
<p id="section-2.1.2.2-2">The HMAC Key ID field is opaque -- i.e., it has neither syntax
            nor semantic except as an identifier of the right combination of
            pre-shared key and hash algorithm.<a class="pilcrow" href="#section-2.1.2.2-2">¶</a></p>
<p id="section-2.1.2.2-3">At the HMAC TLV generating and verification nodes, the Key ID
            uniquely identifies the pre-shared key and HMAC algorithm.<a class="pilcrow" href="#section-2.1.2.2-3">¶</a></p>
<p id="section-2.1.2.2-4">At the HMAC TLV generating node, the Text for the HMAC
            computation is set to the IPv6 header fields and SRH fields as
            they would appear at the verification node(s), not necessarily the
            same as the source node sending a packet with the HMAC TLV.<a class="pilcrow" href="#section-2.1.2.2-4">¶</a></p>
<p id="section-2.1.2.2-5">Pre-Shared key rollover is supported by having two key IDs in
            use while the HMAC TLV generating node and verifying node converge
            to a new key.<a class="pilcrow" href="#section-2.1.2.2-5">¶</a></p>
<p id="section-2.1.2.2-6">The HMAC TLV generating node may need to revoke an SRH for
            which it previously generated an HMAC. Revocation is achieved by
            allocating a new key and key ID, then rolling over the key ID
            associated with the SRH to be revoked. The HMAC TLV verifying node
            drops packets with the revoked SRH.<a class="pilcrow" href="#section-2.1.2.2-6">¶</a></p>
<p id="section-2.1.2.2-7">An implementation supporting HMAC can support multiple hash
            functions. An implementation supporting HMAC <span class="bcp14">MUST</span> implement SHA-2
            <span>[<a class="xref" href="#FIPS180-4">FIPS180-4</a>]</span> in its SHA-256 variant.<a class="pilcrow" href="#section-2.1.2.2-7">¶</a></p>
<p id="section-2.1.2.2-8">The selection of pre-shared key and algorithm and their
            distribution is outside the scope of this document. Some options
            may include:<a class="pilcrow" href="#section-2.1.2.2-8">¶</a></p>
<ul>
<li id="section-2.1.2.2-9.1">setting these items in the configuration of the HMAC generating or verifying
                nodes, either by static configuration or any
 SDN-oriented
                approach<a class="pilcrow" href="#section-2.1.2.2-9.1">¶</a>
</li>
<li id="section-2.1.2.2-9.2">dynamically using a trusted key distribution protocol such
                as <span>[<a class="xref" href="#RFC6407">RFC6407</a>]</span><a class="pilcrow" href="#section-2.1.2.2-9.2">¶</a>
</li>
</ul>
<p id="section-2.1.2.2-10">While key management is outside the scope of this document, the
            recommendations of BCP 107 <span>[<a class="xref" href="#RFC4107">RFC4107</a>]</span> should be
            considered when choosing the key management system.<a class="pilcrow" href="#section-2.1.2.2-10">¶</a></p>
</section>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="SRNODES">
<section id="section-3">
      <h2 id="name-sr-nodes">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-sr-nodes">SR Nodes</a>
      </h2>
<p id="section-3-1">There are different types of nodes that may be involved in segment
      routing networks: SR source nodes that originate packets with a segment in
      the destination address of the IPv6 header, transit nodes that forward
      packets destined to a remote segment, and SR segment endpoint nodes that
      process a local segment in the destination address of an IPv6
      header.<a class="pilcrow" href="#section-3-1">¶</a></p>
<div id="SOURCE">
<section id="section-3.1">
        <h3 id="name-sr-source-node">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-sr-source-node">SR Source Node</a>
        </h3>
<p id="section-3.1-1">A SR source node is any node that originates an IPv6 packet with a
        segment (i.e., SRv6 SID) in the destination address of the IPv6 header.
        The packet leaving the SR source node may or may not contain an SRH.
        This includes either:<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<ul>
<li id="section-3.1-2.1">A host originating an IPv6 packet, or<a class="pilcrow" href="#section-3.1-2.1">¶</a>
</li>
<li id="section-3.1-2.2">An SR domain ingress router encapsulating a received packet in
            an outer IPv6 header, followed by an optional SRH.<a class="pilcrow" href="#section-3.1-2.2">¶</a>
</li>
</ul>
<p id="section-3.1-3">It is out of the scope of this document to describe the mechanism
 through which a segment in the destination address of
        the IPv6 header and the Segment List in the SRH are derived.<a class="pilcrow" href="#section-3.1-3">¶</a></p>
</section>
</div>
<div id="TRANSIT">
<section id="section-3.2">
        <h3 id="name-transit-node">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-transit-node">Transit Node</a>
        </h3>
<p id="section-3.2-1">A transit node is any node forwarding an IPv6 packet where the
        destination address of that packet is not locally configured as a
        segment or a local interface. A transit node is not required to be
        capable of processing a segment or SRH.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
</section>
</div>
<section id="section-3.3">
        <h3 id="name-sr-segment-endpoint-node">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-sr-segment-endpoint-node">SR Segment Endpoint Node</a>
        </h3>
<p id="section-3.3-1">An SR segment endpoint node is any node receiving an IPv6 packet
        where the destination address of that packet is locally configured as
        a segment or local interface.<a class="pilcrow" href="#section-3.3-1">¶</a></p>
</section>
</section>
</div>
<div id="PacketProcessing">
<section id="section-4">
      <h2 id="name-packet-processing">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-packet-processing">Packet Processing</a>
      </h2>
<p id="section-4-1">This section describes SRv6 packet processing at the SR source,
      Transit, and SR segment endpoint nodes.<a class="pilcrow" href="#section-4-1">¶</a></p>
<div id="pktSourceNode">
<section id="section-4.1">
        <h3 id="name-sr-source-node-2">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-sr-source-node-2">SR Source Node</a>
        </h3>
<p id="section-4.1-1">A source node steers a packet into an SR Policy. If the SR Policy
        results in a Segment List containing a single segment, and there is no
        need to add information to the SRH flag or add TLV; the DA is set
        to the single Segment List entry, and the SRH <span class="bcp14">MAY</span> be omitted.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">When needed, the SRH is created as follows:<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<dl class="dlParallel" id="section-4.1-3">
          <dt id="section-4.1-3.1"></dt>
<dd id="section-4.1-3.2">The Next Header and Hdr Ext Len fields are set as specified in
            <span>[<a class="xref" href="#RFC8200">RFC8200</a>]</span>.<a class="pilcrow" href="#section-4.1-3.2">¶</a>
</dd>
<dt id="section-4.1-3.3"></dt>
<dd id="section-4.1-3.4">The Routing Type field is set to 4.<a class="pilcrow" href="#section-4.1-3.4">¶</a>
</dd>
<dt id="section-4.1-3.5"></dt>
<dd id="section-4.1-3.6">The DA of the packet is set with the value of the first
            segment.<a class="pilcrow" href="#section-4.1-3.6">¶</a>
</dd>
<dt id="section-4.1-3.7"></dt>
<dd id="section-4.1-3.8">The first element of the SRH Segment List is the ultimate
            segment. The second element is the penultimate segment, and so
            on.<a class="pilcrow" href="#section-4.1-3.8">¶</a>
</dd>
<dt id="section-4.1-3.9"></dt>
<dd id="section-4.1-3.10">The Segments Left field is set to n-1, where n is the number of
            elements in the SR Policy.<a class="pilcrow" href="#section-4.1-3.10">¶</a>
</dd>
<dt id="section-4.1-3.11"></dt>
<dd id="section-4.1-3.12">The Last Entry field is set to n-1, where n is the number of
            elements in the SR Policy.<a class="pilcrow" href="#section-4.1-3.12">¶</a>
</dd>
<dt id="section-4.1-3.13"></dt>
<dd id="section-4.1-3.14">TLVs (including HMAC) may be set according to their
            specification.<a class="pilcrow" href="#section-4.1-3.14">¶</a>
</dd>
<dt id="section-4.1-3.15"></dt>
<dd id="section-4.1-3.16">The packet is forwarded toward the packet's Destination Address
            (the first segment).<a class="pilcrow" href="#section-4.1-3.16">¶</a>
</dd>
</dl>
<div id="REDUCED">
<section id="section-4.1.1">
          <h4 id="name-reduced-srh">
<a class="section-number selfRef" href="#section-4.1.1">4.1.1. </a><a class="section-name selfRef" href="#name-reduced-srh">Reduced SRH</a>
          </h4>
<p id="section-4.1.1-1">When a source does not require the entire SID list to be
          preserved in the SRH, a reduced SRH may be used.<a class="pilcrow" href="#section-4.1.1-1">¶</a></p>
<p id="section-4.1.1-2">A reduced SRH does not contain the first segment of the related
          SR Policy (the first segment is the one already in the DA of the
          IPv6 header), and the Last Entry field is set to n-2, where n is the
          number of elements in the SR Policy.<a class="pilcrow" href="#section-4.1.1-2">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-4.2">
        <h3 id="name-transit-node-2">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-transit-node-2">Transit Node</a>
        </h3>
<p id="section-4.2-1">As specified in <span>[<a class="xref" href="#RFC8200">RFC8200</a>]</span>, the only node allowed to
        inspect the Routing Extension Header (and therefore the SRH) is the
        node corresponding to the DA of the packet. Any other transit node
        <span class="bcp14">MUST NOT</span> inspect the underneath routing header and <span class="bcp14">MUST</span> forward the
        packet toward the DA according to its IPv6 routing table.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<p id="section-4.2-2">When a SID is in the destination address of an IPv6 header of a
        packet, it's routed through an IPv6 network as an IPv6 address. SIDs,
        or the prefix(es) covering SIDs, and their reachability may be
        distributed by means outside the scope of this document. For example,
        <span>[<a class="xref" href="#RFC5308">RFC5308</a>]</span> or <span>[<a class="xref" href="#RFC5340">RFC5340</a>]</span> may be used to
        advertise a prefix covering the SIDs on a node.<a class="pilcrow" href="#section-4.2-2">¶</a></p>
</section>
<div id="ENDSID">
<section id="section-4.3">
        <h3 id="name-sr-segment-endpoint-node-2">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-sr-segment-endpoint-node-2">SR Segment Endpoint Node</a>
        </h3>
<p id="section-4.3-1">Without constraining the details of an implementation, the SR
        segment endpoint node creates Forwarding Information Base (FIB)
        entries for its local SIDs.<a class="pilcrow" href="#section-4.3-1">¶</a></p>
<p id="section-4.3-2">When an SRv6-capable node receives an IPv6 packet, it performs a
        longest-prefix-match lookup on the packet's destination address. This
        lookup can return any of the following:<a class="pilcrow" href="#section-4.3-2">¶</a></p>
<ul>
<li id="section-4.3-3.1">A FIB entry that represents a locally instantiated SRv6 SID<a class="pilcrow" href="#section-4.3-3.1">¶</a>
</li>
<li id="section-4.3-3.2">A FIB entry that represents a local interface, not locally
    instantiated as an SRv6 SID<a class="pilcrow" href="#section-4.3-3.2">¶</a>
</li>
<li id="section-4.3-3.3">A FIB entry that represents a nonlocal route<a class="pilcrow" href="#section-4.3-3.3">¶</a>
</li>
<li id="section-4.3-3.4">No Match<a class="pilcrow" href="#section-4.3-3.4">¶</a>
</li>
</ul>
<div id="pktENDSID">
<section id="section-4.3.1">
          <h4 id="name-fib-entry-is-a-locally-inst">
<a class="section-number selfRef" href="#section-4.3.1">4.3.1. </a><a class="section-name selfRef" href="#name-fib-entry-is-a-locally-inst">FIB Entry Is a Locally Instantiated SRv6 SID</a>
          </h4>
<p id="section-4.3.1-1">This document and section define a single SRv6 SID. Future
          documents may define additional SRv6 SIDs. In such a case, the entire
          content of this section will be defined in that document.<a class="pilcrow" href="#section-4.3.1-1">¶</a></p>
<p id="section-4.3.1-2">If the FIB entry represents a locally instantiated SRv6 SID,
          process the next header chain of the IPv6 header as defined in
          <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8200#section-4">Section 4</a> of [<a class="xref" href="#RFC8200">RFC8200</a>]</span>. <a class="xref" href="#SRHPROC">Section 4.3.1.1</a>
          describes how to process an SRH; <a class="xref" href="#UPPERHEADER">Section 4.3.1.2</a>
          describes how to process an upper-layer header or the absence of a Next
          Header.<a class="pilcrow" href="#section-4.3.1-2">¶</a></p>
<p id="section-4.3.1-3">Processing this SID modifies the Segments Left and, if configured
          to process TLVs, it may modify the "variable-length data" of TLV
          types that change en route. Therefore, Segments Left is mutable, and
          TLVs that change en route are mutable. The remainder of the SRH
          (Flags, Tag, Segment List, and TLVs that do not change en route) are
          immutable while processing this SID.<a class="pilcrow" href="#section-4.3.1-3">¶</a></p>
<div id="SRHPROC">
<section id="section-4.3.1.1">
            <h5 id="name-srh-processing">
<a class="section-number selfRef" href="#section-4.3.1.1">4.3.1.1. </a><a class="section-name selfRef" href="#name-srh-processing">SRH Processing</a>
            </h5>
<div class="artwork art-text alignLeft" id="section-4.3.1.1-1">
<pre>S01. When an SRH is processed {
S02.   If Segments Left is equal to zero {
S03.     Proceed to process the next header in the packet,
         whose type is identified by the Next Header field in
         the routing header.
S04.   }
S05.   Else {
S06.     If local configuration requires TLV processing {
S07.       Perform TLV processing (see TLV Processing)
S08.     }
S09.     max_last_entry  =  ( Hdr Ext Len /  2 ) - 1
S10.     If  ((Last Entry &gt; max_last_entry) or
S11.          (Segments Left is greater than (Last Entry+1)) {
S12.       Send an ICMP Parameter Problem, Code 0, message to
           the Source Address, pointing to the Segments Left
           field, and discard the packet.
S13.     }
S14.     Else {
S15.       Decrement Segments Left by 1.
S16.       Copy Segment List[Segments Left] from the SRH to the
           destination address of the IPv6 header.
S17.       If the IPv6 Hop Limit is less than or equal to 1 {
S18.         Send an ICMP Time Exceeded -- Hop Limit Exceeded in
             Transit message to the Source Address and discard
             the packet.
S19.       }
S20.       Else {
S21.         Decrement the Hop Limit by 1
S22.         Resubmit the packet to the IPv6 module for transmission
             to the new destination.
S23.       }
S24.     }
S25.   }
S26. }
</pre><a class="pilcrow" href="#section-4.3.1.1-1">¶</a>
</div>
<div id="TLVPROCESS">
<section id="section-4.3.1.1.1">
              <h6 id="name-tlv-processing">
<a class="section-number selfRef" href="#section-4.3.1.1.1">4.3.1.1.1. </a><a class="section-name selfRef" href="#name-tlv-processing">TLV Processing</a>
              </h6>
<p id="section-4.3.1.1.1-1">Local configuration determines how TLVs are to be processed
             when the Active Segment is a local SID defined in this document.
             The definition of local configuration is outside the scope of
             this document.<a class="pilcrow" href="#section-4.3.1.1.1-1">¶</a></p>
<p id="section-4.3.1.1.1-2">For illustration purposes only, two example local
             configurations that may be associated with a SID are provided
             below.<a class="pilcrow" href="#section-4.3.1.1.1-2">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.3.1.1.1-3">
<pre>Example 1:
For any packet received from interface I2
  Skip TLV processing

Example 2:
For any packet received from interface I1
  If first TLV is HMAC {
    Process the HMAC TLV
  }
  Else {
    Discard the packet
  }</pre><a class="pilcrow" href="#section-4.3.1.1.1-3">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="UPPERHEADER">
<section id="section-4.3.1.2">
            <h5 id="name-upper-layer-header-or-no-ne">
<a class="section-number selfRef" href="#section-4.3.1.2">4.3.1.2. </a><a class="section-name selfRef" href="#name-upper-layer-header-or-no-ne">Upper-Layer Header or No Next Header</a>
            </h5>
<p id="section-4.3.1.2-1">When processing the upper-layer header of a packet matching a
            FIB entry locally instantiated as an SRv6 SID defined in this
            document:<a class="pilcrow" href="#section-4.3.1.2-1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.3.1.2-2">
<pre>IF (Upper-layer Header is IPv4 or IPv6) and
    local configuration permits {
  Perform IPv6 decapsulation
  Resubmit the decapsulated packet to the IPv4 or IPv6 module
}
ELSE {
  Send an ICMP parameter problem message to the Source Address and
  discard the packet.  Error code (4) "SR Upper-layer
  Header Error", pointer set to the offset of the upper-layer
  header.
}
</pre><a class="pilcrow" href="#section-4.3.1.2-2">¶</a>
</div>
<p id="section-4.3.1.2-3">A unique error code allows an SR source node to recognize an
            error in SID processing at an endpoint.<a class="pilcrow" href="#section-4.3.1.2-3">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-4.3.2">
          <h4 id="name-fib-entry-is-a-local-interf">
<a class="section-number selfRef" href="#section-4.3.2">4.3.2. </a><a class="section-name selfRef" href="#name-fib-entry-is-a-local-interf">FIB Entry Is a Local Interface</a>
          </h4>
<p id="section-4.3.2-1">If the FIB entry represents a local interface and is not locally
          instantiated as an SRv6 SID, the SRH is processed as follows:<a class="pilcrow" href="#section-4.3.2-1">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-4.3.2-2.1">If Segments Left is zero, the node must ignore the routing
              header and proceed to process the next header in the packet,
              whose type is identified by the Next Header field in the routing
              header.<a class="pilcrow" href="#section-4.3.2-2.1">¶</a>
</li>
<li class="ulEmpty" id="section-4.3.2-2.2">If Segments Left is non-zero, the node must discard the
              packet and send an ICMP Parameter Problem, Code 0, message to
              the packet's Source Address, pointing to the unrecognized
              Routing Type.<a class="pilcrow" href="#section-4.3.2-2.2">¶</a>
</li>
</ul>
</section>
<section id="section-4.3.3">
          <h4 id="name-fib-entry-is-a-nonlocal-rou">
<a class="section-number selfRef" href="#section-4.3.3">4.3.3. </a><a class="section-name selfRef" href="#name-fib-entry-is-a-nonlocal-rou">FIB Entry Is a Nonlocal Route</a>
          </h4>
<p id="section-4.3.3-1">Processing is not changed by this document.<a class="pilcrow" href="#section-4.3.3-1">¶</a></p>
</section>
<section id="section-4.3.4">
          <h4 id="name-fib-entry-is-a-no-match">
<a class="section-number selfRef" href="#section-4.3.4">4.3.4. </a><a class="section-name selfRef" href="#name-fib-entry-is-a-no-match">FIB Entry Is a No Match</a>
          </h4>
<p id="section-4.3.4-1">Processing is not changed by this document.<a class="pilcrow" href="#section-4.3.4-1">¶</a></p>
</section>
</section>
</div>
</section>
</div>
<div id="DEP">
<section id="section-5">
      <h2 id="name-intra-sr-domain-deployment-">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-intra-sr-domain-deployment-">Intra-SR-Domain Deployment Model</a>
      </h2>
<p id="section-5-1">The use of the SIDs exclusively within the SR domain and solely for
      packets of the SR domain is an important deployment model.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">This enables the SR domain to act as a single routing system.<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3">This section covers:<a class="pilcrow" href="#section-5-3">¶</a></p>
<ul>
<li id="section-5-4.1">securing the SR domain from external attempts to use its SIDs<a class="pilcrow" href="#section-5-4.1">¶</a>
</li>
<li id="section-5-4.2">using the SR domain as a single system with delegation between
          components<a class="pilcrow" href="#section-5-4.2">¶</a>
</li>
<li id="section-5-4.3">handling packets of the SR domain<a class="pilcrow" href="#section-5-4.3">¶</a>
</li>
</ul>
<div id="SECSRDOMAIN">
<section id="section-5.1">
        <h3 id="name-securing-the-sr-domain">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-securing-the-sr-domain">Securing the SR Domain</a>
        </h3>
<p id="section-5.1-1">Nodes outside the SR domain are not trusted: they cannot directly
        use the SIDs of the domain. This is enforced by two levels of access
        control lists:<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<ol class="normal type-1" id="section-5.1-2" start="1" type="1">
          <li id="section-5.1-2.1">
            <p id="section-5.1-2.1.1">Any packet entering the SR domain and destined to a SID within
            the SR domain is dropped. This may be realized with the following
            logic. Other methods with equivalent outcome are considered
            compliant:<a class="pilcrow" href="#section-5.1-2.1.1">¶</a></p>
<ul>
<li id="section-5.1-2.1.2.1">Allocate all the SIDs from a block S/s<a class="pilcrow" href="#section-5.1-2.1.2.1">¶</a>
</li>
<li id="section-5.1-2.1.2.2">Configure each external interface of each edge node of the
                domain with an inbound infrastructure access list (IACL) that
                drops any incoming packet with a destination address in
                S/s<a class="pilcrow" href="#section-5.1-2.1.2.2">¶</a>
</li>
<li id="section-5.1-2.1.2.3">Failure to implement this method of ingress filtering
                exposes the SR domain to source-routing attacks, as described
                and referenced in <span>[<a class="xref" href="#RFC5095">RFC5095</a>]</span><a class="pilcrow" href="#section-5.1-2.1.2.3">¶</a>
</li>
</ul>
</li>
<li id="section-5.1-2.2">
            <p id="section-5.1-2.2.1">The distributed protection in #1 is complemented with per-node
            protection, dropping packets to SIDs from source addresses outside
            the SR domain. This may be realized with the following logic.
            Other methods with equivalent outcome are considered compliant:<a class="pilcrow" href="#section-5.1-2.2.1">¶</a></p>
<ul>
<li id="section-5.1-2.2.2.1">Assign all interface addresses from prefix A/a<a class="pilcrow" href="#section-5.1-2.2.2.1">¶</a>
</li>
<li id="section-5.1-2.2.2.2">At node k, all SIDs local to k are assigned from prefix
                Sk/sk<a class="pilcrow" href="#section-5.1-2.2.2.2">¶</a>
</li>
<li id="section-5.1-2.2.2.3">Configure each internal interface of each SR node k in the
                SR domain with an inbound IACL that drops any incoming packet
                with a destination address in Sk/sk if the source address is
                not in A/a.<a class="pilcrow" href="#section-5.1-2.2.2.3">¶</a>
</li>
</ul>
</li>
</ol>
</section>
</div>
<div id="SINGLESYS">
<section id="section-5.2">
        <h3 id="name-sr-domain-as-a-single-syste">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-sr-domain-as-a-single-syste">SR Domain as a Single System with Delegation among Components</a>
        </h3>
<p id="section-5.2-1">All intra-SR-domain packets are of the SR domain. The IPv6 header
        is originated by a node of the SR domain and is destined to a node of
        the SR domain.<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<p id="section-5.2-2">All interdomain packets are encapsulated for the part of the
        packet journey that is within the SR domain. The outer IPv6 header is
        originated by a node of the SR domain and is destined to a node of
        the SR domain.<a class="pilcrow" href="#section-5.2-2">¶</a></p>
<p id="section-5.2-3">As a consequence, any packet within the SR domain is of the SR
        domain.<a class="pilcrow" href="#section-5.2-3">¶</a></p>
<p id="section-5.2-4">The SR domain is a system in which the operator may want to
        distribute or delegate different operations of the outermost header
        to different nodes within the system.<a class="pilcrow" href="#section-5.2-4">¶</a></p>
<p id="section-5.2-5">An operator of an SR domain may choose to delegate SRH addition to
        a host node within the SR domain and delegate validation of the contents of
        any SRH to a more trusted router or switch attached to the host.
        Consider a top-of-rack switch T connected to host H via interface
        I. H receives an SRH (SRH1) with a computed HMAC via some SDN method
        outside the scope of this document. H classifies traffic it sources
        and adds SRH1 to traffic requiring a specific Service Level
 Agreement (SLA). T is configured
        with an IACL on I requiring verification of the SRH for any packet
        destined to the SID block of the SR domain (S/s). T checks and
        verifies that SRH1 is valid and contains an HMAC TLV; T then verifies the
        HMAC.<a class="pilcrow" href="#section-5.2-5">¶</a></p>
<p id="section-5.2-6">An operator of the SR domain may choose to have all segments in the
        SR domain verify the HMAC. This mechanism would verify that the SRH
        Segment List is not modified while traversing the SR domain.<a class="pilcrow" href="#section-5.2-6">¶</a></p>
</section>
</div>
<div id="MTU">
<section id="section-5.3">
        <h3 id="name-mtu-considerations">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-mtu-considerations">MTU Considerations</a>
        </h3>
<p id="section-5.3-1">An SR domain ingress edge node encapsulates packets traversing the
        SR domain and needs to consider the MTU of the SR domain. Within the
        SR domain, well-known mitigation techniques are <span class="bcp14">RECOMMENDED</span>, such as
        deploying a greater MTU value within the SR domain than at the ingress
        edges.<a class="pilcrow" href="#section-5.3-1">¶</a></p>
<p id="section-5.3-2">Encapsulation with an outer IPv6 header and SRH shares the same MTU
        and fragmentation considerations as IPv6 tunnels described in <span>[<a class="xref" href="#RFC2473">RFC2473</a>]</span>. Further investigation on the limitation of various
        tunneling methods (including IPv6 tunnels) is discussed in <span>[<a class="xref" href="#I-D.ietf-intarea-tunnels">INTAREA-TUNNELS</a>]</span> and
 <span class="bcp14">SHOULD</span> be considered by
        operators when considering MTU within the SR domain.<a class="pilcrow" href="#section-5.3-2">¶</a></p>
</section>
</div>
<div id="ICMP">
<section id="section-5.4">
        <h3 id="name-icmp-error-processing">
<a class="section-number selfRef" href="#section-5.4">5.4. </a><a class="section-name selfRef" href="#name-icmp-error-processing">ICMP Error Processing</a>
        </h3>
<p id="section-5.4-1">ICMP error packets generated within the SR domain are sent to
        source nodes within the SR domain. The invoking packet in the ICMP
        error message may contain an SRH. Since the destination address of a
        packet with an SRH changes as each segment is processed, it may not be
        the destination used by the socket or application that generated the
        invoking packet.<a class="pilcrow" href="#section-5.4-1">¶</a></p>
<p id="section-5.4-2">For the source of an invoking packet to process the ICMP error
        message, the ultimate destination address of the IPv6 header may be
        required. The following logic is used to determine the destination
        address for use by protocol-error handlers.<a class="pilcrow" href="#section-5.4-2">¶</a></p>
<ul>
<li id="section-5.4-3.1">
            <p id="section-5.4-3.1.1">Walk all extension headers of the invoking IPv6 packet to the
            routing extension header preceding the upper-layer header.<a class="pilcrow" href="#section-5.4-3.1.1">¶</a></p>
<ul>
<li id="section-5.4-3.1.2.1">
                <p id="section-5.4-3.1.2.1.1">If routing header is type 4 Segment Routing Header (SRH)<a class="pilcrow" href="#section-5.4-3.1.2.1.1">¶</a></p>
<ul>
<li id="section-5.4-3.1.2.1.2.1">The SID at Segment List[0] may be used as the
                    destination address of the invoking packet.<a class="pilcrow" href="#section-5.4-3.1.2.1.2.1">¶</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p id="section-5.4-4">ICMP errors are then processed by upper-layer transports as defined
        in <span>[<a class="xref" href="#RFC4443">RFC4443</a>]</span>.<a class="pilcrow" href="#section-5.4-4">¶</a></p>
<p id="section-5.4-5">For IP packets encapsulated in an outer IPv6 header, ICMP error
        handling is as defined in <span>[<a class="xref" href="#RFC2473">RFC2473</a>]</span>.<a class="pilcrow" href="#section-5.4-5">¶</a></p>
</section>
</div>
<div id="LBECMP">
<section id="section-5.5">
        <h3 id="name-load-balancing-and-ecmp">
<a class="section-number selfRef" href="#section-5.5">5.5. </a><a class="section-name selfRef" href="#name-load-balancing-and-ecmp">Load Balancing and ECMP</a>
        </h3>
<p id="section-5.5-1">For any interdomain packet, the SR source node <span class="bcp14">MUST</span> impose a flow
        label computed based on the inner packet. The computation of the flow
        label is as recommended in <span>[<a class="xref" href="#RFC6438">RFC6438</a>]</span> for the sending
        Tunnel End Point.<a class="pilcrow" href="#section-5.5-1">¶</a></p>
<p id="section-5.5-2">For any intradomain packet, the SR source node <span class="bcp14">SHOULD</span> impose a
        flow label computed as described in <span>[<a class="xref" href="#RFC6437">RFC6437</a>]</span> to assist
        ECMP load balancing at transit nodes incapable of computing a 5-tuple
        beyond the SRH.<a class="pilcrow" href="#section-5.5-2">¶</a></p>
<p id="section-5.5-3">At any transit node within an SR domain, the flow label <span class="bcp14">MUST</span> be
        used as defined in <span>[<a class="xref" href="#RFC6438">RFC6438</a>]</span> to calculate the ECMP hash
        toward the destination address. If a flow label is not used, the transit
        node would likely hash all packets between a pair of SR Edge nodes to
        the same link.<a class="pilcrow" href="#section-5.5-3">¶</a></p>
<p id="section-5.5-4">At an SR segment endpoint node, the flow label <span class="bcp14">MUST</span> be used as
        defined in <span>[<a class="xref" href="#RFC6438">RFC6438</a>]</span> to calculate any ECMP hash used to
        forward the processed packet to the next segment.<a class="pilcrow" href="#section-5.5-4">¶</a></p>
</section>
</div>
<div id="other">
<section id="section-5.6">
        <h3 id="name-other-deployments">
<a class="section-number selfRef" href="#section-5.6">5.6. </a><a class="section-name selfRef" href="#name-other-deployments">Other Deployments</a>
        </h3>
<p id="section-5.6-1">Other deployment models and their implications on security, MTU,
        HMAC, ICMP error processing, and interaction with other extension
        headers are outside the scope of this document.<a class="pilcrow" href="#section-5.6-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="ILL">
<section id="section-6">
      <h2 id="name-illustrations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-illustrations">Illustrations</a>
      </h2>
<p id="section-6-1">This section provides illustrations of SRv6 packet processing at SR
      source, transit, and SR segment endpoint nodes.<a class="pilcrow" href="#section-6-1">¶</a></p>
<section id="section-6.1">
        <h3 id="name-abstract-representation-of-">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-abstract-representation-of-">Abstract Representation of an SRH</a>
        </h3>
<p id="section-6.1-1">For a node k, its IPv6 address is represented as Ak, and its SRv6 SID
        is represented as Sk.<a class="pilcrow" href="#section-6.1-1">¶</a></p>
<p id="section-6.1-2">IPv6 headers are represented as the tuple of (source,destination).
        For example, a packet with source address A1 and destination address
        A2 is represented as (A1,A2). The payload of the packet is
        omitted.<a class="pilcrow" href="#section-6.1-2">¶</a></p>
<p id="section-6.1-3">An SR Policy is a list of segments. A list of segments is
        represented as &lt;S1,S2,S3&gt; where S1 is the first SID to visit, S2
        is the second SID to visit, and S3 is the last SID to visit.<a class="pilcrow" href="#section-6.1-3">¶</a></p>
<p id="section-6.1-4">(SA,DA) (S3,S2,S1; SL) represents an IPv6 packet with:<a class="pilcrow" href="#section-6.1-4">¶</a></p>
<ul>
<li id="section-6.1-5.1">Source Address SA, Destination Addresses DA, and
            next header SRH.<a class="pilcrow" href="#section-6.1-5.1">¶</a>
</li>
<li id="section-6.1-5.2">SRH with SID list &lt;S1,S2,S3&gt; with SegmentsLeft =
            SL.<a class="pilcrow" href="#section-6.1-5.2">¶</a>
</li>
<li id="section-6.1-5.3">Note the difference between the &lt;&gt; and () symbols.
            &lt;S1,S2,S3&gt; represents a SID list where the leftmost
            segment is the first segment. In contrast, (S3,S2,S1; SL) represents
            the same SID list but encoded in the SRH Segment List format where
            the leftmost segment is the last segment. When referring to an SR
            Policy in a high-level use case, it is simpler to use the &lt;S1,S2,S3&gt; notation. When referring to an illustration of detailed
            behavior, the (S3,S2,S1; SL) notation is more convenient.<a class="pilcrow" href="#section-6.1-5.3">¶</a>
</li>
</ul>
<p id="section-6.1-6">At its SR Policy headend, the Segment List &lt;S1,S2,S3&gt; results
        in SRH (S3,S2,S1; SL=2) represented fully as:<a class="pilcrow" href="#section-6.1-6">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.1-7">
<pre>    Segments Left=2
    Last Entry=2
    Flags=0
    Tag=0
    Segment List[0]=S3
    Segment List[1]=S2
    Segment List[2]=S1</pre><a class="pilcrow" href="#section-6.1-7">¶</a>
</div>
</section>
<section id="section-6.2">
        <h3 id="name-example-topology">
<a class="section-number selfRef" href="#section-6.2">6.2. </a><a class="section-name selfRef" href="#name-example-topology">Example Topology</a>
        </h3>
<p id="section-6.2-1">The following topology is used in examples below:<a class="pilcrow" href="#section-6.2-1">¶</a></p>
<div id="TOPO1">
<figure id="figure-1">
          <div class="artwork art-text alignLeft" id="section-6.2-2.1">
<pre>        + * * * * * * * * * * * * * * * * * * * * +

        *         [8]                [9]          *
                   |                  |
        *          |                  |           *
[1]----[3]--------[5]----------------[6]---------[4]---[2]
        *          |                  |           *
                   |                  |
        *          |                  |           *
                   +--------[7]-------+
        *                                         *

        + * * * * * * *  SR domain  * * * * * * * +</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a></figcaption></figure>
</div>
<ul>
<li id="section-6.2-3.1">3 and 4 are SR domain edge routers<a class="pilcrow" href="#section-6.2-3.1">¶</a>
</li>
<li id="section-6.2-3.2">5, 6, and 7 are all SR domain routers<a class="pilcrow" href="#section-6.2-3.2">¶</a>
</li>
<li id="section-6.2-3.3">8 and 9 are hosts within the SR domain<a class="pilcrow" href="#section-6.2-3.3">¶</a>
</li>
<li id="section-6.2-3.4">1 and 2 are hosts outside the SR domain<a class="pilcrow" href="#section-6.2-3.4">¶</a>
</li>
<li id="section-6.2-3.5">The SR domain implements ingress filtering as per <a class="xref" href="#SECSRDOMAIN">Section 5.1</a> and no external packet can
   enter the domain
            with a destination address equal to a segment of the domain.<a class="pilcrow" href="#section-6.2-3.5">¶</a>
</li>
</ul>
</section>
<section id="section-6.3">
        <h3 id="name-sr-source-node-3">
<a class="section-number selfRef" href="#section-6.3">6.3. </a><a class="section-name selfRef" href="#name-sr-source-node-3">SR Source Node</a>
        </h3>
<section id="section-6.3.1">
          <h4 id="name-intra-sr-domain-packet">
<a class="section-number selfRef" href="#section-6.3.1">6.3.1. </a><a class="section-name selfRef" href="#name-intra-sr-domain-packet">Intra-SR-Domain Packet</a>
          </h4>
<p id="section-6.3.1-1">When host 8 sends a packet to host 9 via an SR Policy
          &lt;S7,A9&gt; the packet is<a class="pilcrow" href="#section-6.3.1-1">¶</a></p>
<p id="section-6.3.1-2">P1: (A8,S7)(A9,S7; SL=1)<a class="pilcrow" href="#section-6.3.1-2">¶</a></p>
<section id="section-6.3.1.1">
            <h5 id="name-reduced-variant">
<a class="section-number selfRef" href="#section-6.3.1.1">6.3.1.1. </a><a class="section-name selfRef" href="#name-reduced-variant">Reduced Variant</a>
            </h5>
<p id="section-6.3.1.1-1">When host 8 sends a packet to host 9 via an SR Policy
            &lt;S7,A9&gt; and it wants to use a reduced SRH, the packet is<a class="pilcrow" href="#section-6.3.1.1-1">¶</a></p>
<p id="section-6.3.1.1-2">P2: (A8,S7)(A9; SL=1)<a class="pilcrow" href="#section-6.3.1.1-2">¶</a></p>
</section>
</section>
<section id="section-6.3.2">
          <h4 id="name-inter-sr-domain-packet-tran">
<a class="section-number selfRef" href="#section-6.3.2">6.3.2. </a><a class="section-name selfRef" href="#name-inter-sr-domain-packet-tran">Inter-SR-Domain Packet -- Transit</a>
          </h4>
<p id="section-6.3.2-1">When host 1 sends a packet to host 2, the packet is<a class="pilcrow" href="#section-6.3.2-1">¶</a></p>
<p id="section-6.3.2-2">P3: (A1,A2)<a class="pilcrow" href="#section-6.3.2-2">¶</a></p>
<p id="section-6.3.2-3">The SR domain ingress router 3 receives P3 and steers it to SR
          domain egress router 4 via an SR Policy &lt;S7,S4&gt;. Router 3
          encapsulates the received packet P3 in an outer header with an SRH.
          The packet is<a class="pilcrow" href="#section-6.3.2-3">¶</a></p>
<p id="section-6.3.2-4">P4: (A3,S7)(S4,S7; SL=1)(A1,A2)<a class="pilcrow" href="#section-6.3.2-4">¶</a></p>
<p id="section-6.3.2-5">If the SR Policy contains only one segment (the egress router 4),
          the ingress router 3 encapsulates P3 into an outer header (A3,S4)
          without SRH. The packet is<a class="pilcrow" href="#section-6.3.2-5">¶</a></p>
<p id="section-6.3.2-6">P5: (A3,S4)(A1,A2)<a class="pilcrow" href="#section-6.3.2-6">¶</a></p>
<section id="section-6.3.2.1">
            <h5 id="name-reduced-variant-2">
<a class="section-number selfRef" href="#section-6.3.2.1">6.3.2.1. </a><a class="section-name selfRef" href="#name-reduced-variant-2">Reduced Variant</a>
            </h5>
<p id="section-6.3.2.1-1">The SR domain ingress router 3 receives P3 and steers it to SR
            domain egress router 4 via an SR Policy &lt;S7,S4&gt;. If router
            3 wants to use a reduced SRH, it encapsulates the received
            packet P3 in an outer header with a reduced SRH. The packet is<a class="pilcrow" href="#section-6.3.2.1-1">¶</a></p>
<p id="section-6.3.2.1-2">P6: (A3,S7)(S4; SL=1)(A1,A2)<a class="pilcrow" href="#section-6.3.2.1-2">¶</a></p>
</section>
</section>
<section id="section-6.3.3">
          <h4 id="name-inter-sr-domain-packet-inte">
<a class="section-number selfRef" href="#section-6.3.3">6.3.3. </a><a class="section-name selfRef" href="#name-inter-sr-domain-packet-inte">Inter-SR-Domain Packet -- Internal to External</a>
          </h4>
<p id="section-6.3.3-1">When host 8 sends a packet to host 1, the packet is encapsulated
          for the portion of its journey within the SR domain. From 8 to 3 the
          packet is<a class="pilcrow" href="#section-6.3.3-1">¶</a></p>
<p id="section-6.3.3-2">P7: (A8,S3)(A8,A1)<a class="pilcrow" href="#section-6.3.3-2">¶</a></p>
<p id="section-6.3.3-3">In the opposite direction, the packet generated from 1 to 8
          is<a class="pilcrow" href="#section-6.3.3-3">¶</a></p>
<p id="section-6.3.3-4">P8: (A1,A8)<a class="pilcrow" href="#section-6.3.3-4">¶</a></p>
<p id="section-6.3.3-5">At node 3, P8 is encapsulated for the portion of its journey
          within the SR domain, with the outer header destined to segment S8.
          This results in<a class="pilcrow" href="#section-6.3.3-5">¶</a></p>
<p id="section-6.3.3-6">P9: (A3,S8)(A1,A8)<a class="pilcrow" href="#section-6.3.3-6">¶</a></p>
<p id="section-6.3.3-7">At node 8, the outer IPv6 header is removed by S8 processing, then
          processed again when received by A8.<a class="pilcrow" href="#section-6.3.3-7">¶</a></p>
</section>
</section>
<section id="section-6.4">
        <h3 id="name-transit-node-3">
<a class="section-number selfRef" href="#section-6.4">6.4. </a><a class="section-name selfRef" href="#name-transit-node-3">Transit Node</a>
        </h3>
<p id="section-6.4-1">Node 5 acts as transit node for packet P1 and sends packet<a class="pilcrow" href="#section-6.4-1">¶</a></p>
<p id="section-6.4-2">P1: (A8,S7)(A9,S7;SL=1)<a class="pilcrow" href="#section-6.4-2">¶</a></p>
<p id="section-6.4-3">on the interface toward node 7.<a class="pilcrow" href="#section-6.4-3">¶</a></p>
</section>
<section id="section-6.5">
        <h3 id="name-sr-segment-endpoint-node-3">
<a class="section-number selfRef" href="#section-6.5">6.5. </a><a class="section-name selfRef" href="#name-sr-segment-endpoint-node-3">SR Segment Endpoint Node</a>
        </h3>
<p id="section-6.5-1">Node 7 receives packet P1 and, using the logic in <a class="xref" href="#pktENDSID">Section 4.3.1</a>, sends packet<a class="pilcrow" href="#section-6.5-1">¶</a></p>
<p id="section-6.5-2">P7: (A8,A9)(A9,S7; SL=0)<a class="pilcrow" href="#section-6.5-2">¶</a></p>
<p id="section-6.5-3">on the interface toward router 6.<a class="pilcrow" href="#section-6.5-3">¶</a></p>
</section>
<section id="section-6.6">
        <h3 id="name-delegation-of-function-with">
<a class="section-number selfRef" href="#section-6.6">6.6. </a><a class="section-name selfRef" href="#name-delegation-of-function-with">Delegation of Function with HMAC Verification</a>
        </h3>
<p id="section-6.6-1">This section describes how a function may be delegated within the
        SR domain. In the following sections, consider a host 8 connected to a
        top of rack 5.<a class="pilcrow" href="#section-6.6-1">¶</a></p>
<section id="section-6.6.1">
          <h4 id="name-sid-list-verification">
<a class="section-number selfRef" href="#section-6.6.1">6.6.1. </a><a class="section-name selfRef" href="#name-sid-list-verification">SID List Verification</a>
          </h4>
<p id="section-6.6.1-1">An operator may prefer to apply the SRH at source 8, while 5
          verifies that the SID list is valid.<a class="pilcrow" href="#section-6.6.1-1">¶</a></p>
<p id="section-6.6.1-2">For illustration purposes, an SDN controller provides 8 an SRH
          terminating at node 9, with Segment List &lt;S5,S7,S6,A9&gt;, and
          HMAC TLV computed for the SRH. The HMAC key ID and key associated
          with the HMAC TLV is shared with 5. Node 8 does not know the key.
          Node 5 is configured with an IACL applied to the interface connected
          to 8, requiring HMAC verification for any packet destined to
          S/s.<a class="pilcrow" href="#section-6.6.1-2">¶</a></p>
<p id="section-6.6.1-3">Node 8 originates packets with the received SRH, including HMAC
          TLV.<a class="pilcrow" href="#section-6.6.1-3">¶</a></p>
<p id="section-6.6.1-4">P15: (A8,S5)(A9,S6,S7,S5;SL=3;HMAC)<a class="pilcrow" href="#section-6.6.1-4">¶</a></p>
<p id="section-6.6.1-5">Node 5 receives and verifies the HMAC for the SRH, then forwards
          the packet to the next segment<a class="pilcrow" href="#section-6.6.1-5">¶</a></p>
<p id="section-6.6.1-6">P16: (A8,S7)(A9,S6,S7,S5;SL=2;HMAC)<a class="pilcrow" href="#section-6.6.1-6">¶</a></p>
<p id="section-6.6.1-7">Node 6 receives<a class="pilcrow" href="#section-6.6.1-7">¶</a></p>
<p id="section-6.6.1-8">P17: (A8,S6)(A9,S6,S7,S5;SL=1;HMAC)<a class="pilcrow" href="#section-6.6.1-8">¶</a></p>
<p id="section-6.6.1-9">Node 9 receives<a class="pilcrow" href="#section-6.6.1-9">¶</a></p>
<p id="section-6.6.1-10">P18: (A8,A9)(A9,S6,S7,S5;SL=0;HMAC)<a class="pilcrow" href="#section-6.6.1-10">¶</a></p>
<p id="section-6.6.1-11">This use of an HMAC is particularly valuable within an
   enterprise-based SR domain <span>[<a class="xref" href="#SRN">SRN</a>]</span>.<a class="pilcrow" href="#section-6.6.1-11">¶</a></p>
</section>
</section>
</section>
</div>
<div id="Security">
<section id="section-7">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-7-1">This section reviews security considerations related to the SRH,
      given the SRH processing and deployment models discussed in this
      document.<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">As described in <a class="xref" href="#DEP">Section 5</a>, it is necessary to filter
      packets' ingress to the SR domain, destined to SIDs within the SR domain
      (i.e., bearing a SID in the destination address). This ingress filtering
      is via an IACL at SR domain ingress border nodes. Additional protection
      is applied via an IACL at each SR Segment Endpoint node, filtering
      packets not from within the SR domain, destined to SIDs in the SR domain. ACLs are easily supported for small numbers of seldom changing prefixes, making
      summarization important.<a class="pilcrow" href="#section-7-2">¶</a></p>
<p id="section-7-3">Additionally, ingress filtering of IPv6 source addresses as
      recommended in BCP 38 <span>[<a class="xref" href="#RFC2827">RFC2827</a>]</span> <span class="bcp14">SHOULD</span> be used.<a class="pilcrow" href="#section-7-3">¶</a></p>
<section id="section-7.1">
        <h3 id="name-sr-attacks">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-sr-attacks">SR Attacks</a>
        </h3>
<p id="section-7.1-1">An SR domain implements distributed and per-node protection as
        described in <a class="xref" href="#SECSRDOMAIN">Section 5.1</a>. Additionally, domains deny traffic with
        spoofed addresses by implementing the recommendations in BCP 84 <span>[<a class="xref" href="#RFC3704">RFC3704</a>]</span>.<a class="pilcrow" href="#section-7.1-1">¶</a></p>
<p id="section-7.1-2">Full implementation of the recommended protection blocks the
        attacks documented in <span>[<a class="xref" href="#RFC5095">RFC5095</a>]</span> from outside the SR
        domain, including bypassing filtering devices, reaching
 otherwise-unreachable Internet systems, network topology discovery,
 bandwidth
        exhaustion, and defeating anycast.<a class="pilcrow" href="#section-7.1-2">¶</a></p>
<p id="section-7.1-3">Failure to implement distributed and per-node protection allows
        attackers to bypass filtering devices and exposes the SR domain to
        these attacks.<a class="pilcrow" href="#section-7.1-3">¶</a></p>
<p id="section-7.1-4">Compromised nodes within the SR domain may mount the attacks listed
        above along with other known attacks on IP networks (e.g., DoS/DDoS,
        topology discovery, man-in-the-middle, traffic
        interception/siphoning).<a class="pilcrow" href="#section-7.1-4">¶</a></p>
</section>
<section id="section-7.2">
        <h3 id="name-service-theft">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-service-theft">Service Theft</a>
        </h3>
<p id="section-7.2-1">Service theft is defined as the use of a service offered by the SR
        domain by a node not authorized to use the service.<a class="pilcrow" href="#section-7.2-1">¶</a></p>
<p id="section-7.2-2">Service theft is not a concern within the SR domain, as all SR
        source nodes and SR segment endpoint nodes within the domain are able
        to utilize the services of the domain. If a node outside the SR domain
        learns of segments or a topological service within the SR domain, IACL
        filtering denies access to those segments.<a class="pilcrow" href="#section-7.2-2">¶</a></p>
</section>
<section id="section-7.3">
        <h3 id="name-topology-disclosure">
<a class="section-number selfRef" href="#section-7.3">7.3. </a><a class="section-name selfRef" href="#name-topology-disclosure">Topology Disclosure</a>
        </h3>
<p id="section-7.3-1">The SRH is unencrypted and may contain SIDs of some intermediate
        SR nodes in the path towards the destination within the SR domain. If
        packets can be snooped within the SR domain, the SRH may reveal
        topology, traffic flows, and service usage.<a class="pilcrow" href="#section-7.3-1">¶</a></p>
<p id="section-7.3-2">This is applicable within an SR domain, but the disclosure is less
        relevant as an attacker has other means of learning topology, flows,
        and service usage.<a class="pilcrow" href="#section-7.3-2">¶</a></p>
</section>
<section id="section-7.4">
        <h3 id="name-icmp-generation">
<a class="section-number selfRef" href="#section-7.4">7.4. </a><a class="section-name selfRef" href="#name-icmp-generation">ICMP Generation</a>
        </h3>
<p id="section-7.4-1">The generation of ICMPv6 error messages may be used to attempt
        denial-of-service attacks by sending an error-causing destination
        address or SRH in back-to-back packets. An implementation that
        correctly follows <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4443#section-2.4">Section 2.4</a> of [<a class="xref" href="#RFC4443">RFC4443</a>]</span> would be
        protected by the ICMPv6 rate-limiting mechanism.<a class="pilcrow" href="#section-7.4-1">¶</a></p>
</section>
<section id="section-7.5">
        <h3 id="name-applicability-of-ah">
<a class="section-number selfRef" href="#section-7.5">7.5. </a><a class="section-name selfRef" href="#name-applicability-of-ah">Applicability of AH</a>
        </h3>
<p id="section-7.5-1">The SR domain is a trusted domain, as defined in <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span>, Sections <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8402#section-2">2</a> and <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8402#section-8.2">8.2</a>. The SR source is trusted
        to add an SRH (optionally verified as having been generated by a
        trusted source via the HMAC TLV in this document), and segments
        advertised within the domain are trusted to be accurate and advertised
        by trusted sources via a secure control plane. As such, the SR domain
        does not rely on the Authentication Header (AH) as defined in <span>[<a class="xref" href="#RFC4302">RFC4302</a>]</span> to secure the SRH.<a class="pilcrow" href="#section-7.5-1">¶</a></p>
<p id="section-7.5-2">The use of SRH with AH by an SR source node and its processing at an SR
        segment endpoint node are not defined in this document. Future
        documents may define use of SRH with AH and its processing.<a class="pilcrow" href="#section-7.5-2">¶</a></p>
</section>
</section>
</div>
<div id="IANA">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-8-1">This document makes the following registrations in the "Internet
      Protocol Version 6 (IPv6) Parameters" "Routing Types" subregistry maintained
      by IANA:<a class="pilcrow" href="#section-8-1">¶</a></p>
<span id="name-srh-registration"></span><div id="SRH-REG">
<table class="center" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-srh-registration">SRH Registration</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Value</th>
            <th class="text-left" colspan="1" rowspan="1">Description</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">4</td>
            <td class="text-left" colspan="1" rowspan="1">Segment Routing Header (SRH)</td>
            <td class="text-left" colspan="1" rowspan="1">This document</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-8-3">This document makes the following registrations in the "Type 4 -
      Parameter Problem" message of the "Internet Control Message Protocol
      version 6 (ICMPv6) Parameters" registry maintained by IANA:<a class="pilcrow" href="#section-8-3">¶</a></p>
<span id="name-sr-upper-layer-header-error"></span><div id="UPPER-LAYER">
<table class="center" id="table-2">
        <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-sr-upper-layer-header-error">SR Upper-layer Header Error Registration</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Code</th>
            <th class="text-left" colspan="1" rowspan="1">Name</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">4</td>
            <td class="text-left" colspan="1" rowspan="1">SR Upper-layer Header Error</td>
          </tr>
        </tbody>
      </table>
</div>
<div id="SRHFLAGSREG">
<section id="section-8.1">
        <h3 id="name-segment-routing-header-flag">
<a class="section-number selfRef" href="#section-8.1">8.1. </a><a class="section-name selfRef" href="#name-segment-routing-header-flag">Segment Routing Header Flags Registry</a>
        </h3>
<p id="section-8.1-1">This document describes a new IANA-managed registry
        to identify SRH Flags Bits. The registration procedure is "IETF
        Review" <span>[<a class="xref" href="#RFC8126">RFC8126</a>]</span>. The registry name is "Segment Routing Header Flags".
        Flags are 8 bits.<a class="pilcrow" href="#section-8.1-1">¶</a></p>
</section>
</div>
<div id="SRHTLVREG">
<section id="section-8.2">
        <h3 id="name-segment-routing-header-tlvs">
<a class="section-number selfRef" href="#section-8.2">8.2. </a><a class="section-name selfRef" href="#name-segment-routing-header-tlvs">Segment Routing Header TLVs Registry</a>
        </h3>
<p id="section-8.2-1">This document describes a new IANA-managed registry
        to identify SRH TLVs. The registration procedure is "IETF Review".
        The registry name is "Segment Routing Header TLVs". A TLV is
        identified through an unsigned 8-bit codepoint value, with assigned
        values 0-127 for TLVs that do not change en route and 128-255 for
        TLVs that may change en route. The following codepoints are defined in
        this document:<a class="pilcrow" href="#section-8.2-1">¶</a></p>
<span id="name-segment-routing-header-tlvs-"></span><div id="TLV-REG">
<table class="center" id="table-3">
          <caption>
<a class="selfRef" href="#table-3">Table 3</a>:
<a class="selfRef" href="#name-segment-routing-header-tlvs-">Segment Routing Header TLVs Registry</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">Value</th>
              <th class="text-left" colspan="1" rowspan="1">Description</th>
              <th class="text-left" colspan="1" rowspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">0</td>
              <td class="text-left" colspan="1" rowspan="1">Pad1 TLV</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">1</td>
              <td class="text-left" colspan="1" rowspan="1">Reserved</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">2</td>
              <td class="text-left" colspan="1" rowspan="1">Reserved</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">3</td>
              <td class="text-left" colspan="1" rowspan="1">Reserved</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">4</td>
              <td class="text-left" colspan="1" rowspan="1">PadN TLV</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">5</td>
              <td class="text-left" colspan="1" rowspan="1">HMAC TLV</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">6</td>
              <td class="text-left" colspan="1" rowspan="1">Reserved</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">124-126</td>
              <td class="text-left" colspan="1" rowspan="1">Experimentation and Test</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">127</td>
              <td class="text-left" colspan="1" rowspan="1">Reserved</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">252-254</td>
              <td class="text-left" colspan="1" rowspan="1">Experimentation and Test</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">255</td>
              <td class="text-left" colspan="1" rowspan="1">Reserved</td>
              <td class="text-left" colspan="1" rowspan="1">This document</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-8.2-3">Values 1, 2, 3, and 6 were defined in draft versions of this specification
        and are Reserved for backwards compatibility with early
        implementations and should not be reassigned. Values 127 and 255 are
        Reserved to allow for expansion of the Type field in future
        specifications, if needed.<a class="pilcrow" href="#section-8.2-3">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="FIPS180-4">[FIPS180-4]</dt>
<dd>
<span class="refAuthor">National Institute of Standards and Technology (NIST)</span>, <span class="refTitle">"Secure Hash Standard (SHS)"</span>, <span class="refContent">FIPS PUB 180-4</span>, <span class="refContent">DOI 10.6028/NIST.FIPS.180-4</span>, <time datetime="2015-08">August 2015</time>, <span>&lt;<a href="http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf">http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf</a>&gt;</span>. </dd>
<dt id="IANA-SRHTLV">[IANA-SRHTLV]</dt>
<dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"Segment Routing Header TLVs"</span>, <span>&lt;<a href="https://www.iana.org/assignments/ipv6-parameters/">https://www.iana.org/assignments/ipv6-parameters/</a>&gt;</span>. </dd>
<dt id="RFC2104">[RFC2104]</dt>
<dd>
<span class="refAuthor">Krawczyk, H.</span><span class="refAuthor">, Bellare, M.</span><span class="refAuthor">, and R. Canetti</span>, <span class="refTitle">"HMAC: Keyed-Hashing for Message Authentication"</span>, <span class="seriesInfo">RFC 2104</span>, <span class="seriesInfo">DOI 10.17487/RFC2104</span>, <time datetime="1997-02">February 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2104">https://www.rfc-editor.org/info/rfc2104</a>&gt;</span>. </dd>
<dt id="RFC2119">[RFC2119]</dt>
<dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC2473">[RFC2473]</dt>
<dd>
<span class="refAuthor">Conta, A.</span><span class="refAuthor"> and S. Deering</span>, <span class="refTitle">"Generic Packet Tunneling in IPv6 Specification"</span>, <span class="seriesInfo">RFC 2473</span>, <span class="seriesInfo">DOI 10.17487/RFC2473</span>, <time datetime="1998-12">December 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2473">https://www.rfc-editor.org/info/rfc2473</a>&gt;</span>. </dd>
<dt id="RFC2827">[RFC2827]</dt>
<dd>
<span class="refAuthor">Ferguson, P.</span><span class="refAuthor"> and D. Senie</span>, <span class="refTitle">"Network Ingress Filtering: Defeating Denial of Service Attacks which employ IP Source Address Spoofing"</span>, <span class="seriesInfo">BCP 38</span>, <span class="seriesInfo">RFC 2827</span>, <span class="seriesInfo">DOI 10.17487/RFC2827</span>, <time datetime="2000-05">May 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2827">https://www.rfc-editor.org/info/rfc2827</a>&gt;</span>. </dd>
<dt id="RFC3704">[RFC3704]</dt>
<dd>
<span class="refAuthor">Baker, F.</span><span class="refAuthor"> and P. Savola</span>, <span class="refTitle">"Ingress Filtering for Multihomed Networks"</span>, <span class="seriesInfo">BCP 84</span>, <span class="seriesInfo">RFC 3704</span>, <span class="seriesInfo">DOI 10.17487/RFC3704</span>, <time datetime="2004-03">March 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3704">https://www.rfc-editor.org/info/rfc3704</a>&gt;</span>. </dd>
<dt id="RFC4107">[RFC4107]</dt>
<dd>
<span class="refAuthor">Bellovin, S.</span><span class="refAuthor"> and R. Housley</span>, <span class="refTitle">"Guidelines for Cryptographic Key Management"</span>, <span class="seriesInfo">BCP 107</span>, <span class="seriesInfo">RFC 4107</span>, <span class="seriesInfo">DOI 10.17487/RFC4107</span>, <time datetime="2005-06">June 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4107">https://www.rfc-editor.org/info/rfc4107</a>&gt;</span>. </dd>
<dt id="RFC4302">[RFC4302]</dt>
<dd>
<span class="refAuthor">Kent, S.</span>, <span class="refTitle">"IP Authentication Header"</span>, <span class="seriesInfo">RFC 4302</span>, <span class="seriesInfo">DOI 10.17487/RFC4302</span>, <time datetime="2005-12">December 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4302">https://www.rfc-editor.org/info/rfc4302</a>&gt;</span>. </dd>
<dt id="RFC5095">[RFC5095]</dt>
<dd>
<span class="refAuthor">Abley, J.</span><span class="refAuthor">, Savola, P.</span><span class="refAuthor">, and G. Neville-Neil</span>, <span class="refTitle">"Deprecation of Type 0 Routing Headers in IPv6"</span>, <span class="seriesInfo">RFC 5095</span>, <span class="seriesInfo">DOI 10.17487/RFC5095</span>, <time datetime="2007-12">December 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5095">https://www.rfc-editor.org/info/rfc5095</a>&gt;</span>. </dd>
<dt id="RFC6407">[RFC6407]</dt>
<dd>
<span class="refAuthor">Weis, B.</span><span class="refAuthor">, Rowles, S.</span><span class="refAuthor">, and T. Hardjono</span>, <span class="refTitle">"The Group Domain of Interpretation"</span>, <span class="seriesInfo">RFC 6407</span>, <span class="seriesInfo">DOI 10.17487/RFC6407</span>, <time datetime="2011-10">October 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6407">https://www.rfc-editor.org/info/rfc6407</a>&gt;</span>. </dd>
<dt id="RFC6437">[RFC6437]</dt>
<dd>
<span class="refAuthor">Amante, S.</span><span class="refAuthor">, Carpenter, B.</span><span class="refAuthor">, Jiang, S.</span><span class="refAuthor">, and J. Rajahalme</span>, <span class="refTitle">"IPv6 Flow Label Specification"</span>, <span class="seriesInfo">RFC 6437</span>, <span class="seriesInfo">DOI 10.17487/RFC6437</span>, <time datetime="2011-11">November 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6437">https://www.rfc-editor.org/info/rfc6437</a>&gt;</span>. </dd>
<dt id="RFC6438">[RFC6438]</dt>
<dd>
<span class="refAuthor">Carpenter, B.</span><span class="refAuthor"> and S. Amante</span>, <span class="refTitle">"Using the IPv6 Flow Label for Equal Cost Multipath Routing and Link Aggregation in Tunnels"</span>, <span class="seriesInfo">RFC 6438</span>, <span class="seriesInfo">DOI 10.17487/RFC6438</span>, <time datetime="2011-11">November 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6438">https://www.rfc-editor.org/info/rfc6438</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
<dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dt id="RFC8200">[RFC8200]</dt>
<dd>
<span class="refAuthor">Deering, S.</span><span class="refAuthor"> and R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time datetime="2017-07">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8200">https://www.rfc-editor.org/info/rfc8200</a>&gt;</span>. </dd>
<dt id="RFC8402">[RFC8402]</dt>
<dd>
<span class="refAuthor">Filsfils, C., Ed.</span><span class="refAuthor">, Previdi, S., Ed.</span><span class="refAuthor">, Ginsberg, L.</span><span class="refAuthor">, Decraene, B.</span><span class="refAuthor">, Litkowski, S.</span><span class="refAuthor">, and R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time datetime="2018-07">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-intarea-tunnels">[INTAREA-TUNNELS]</dt>
<dd>
<span class="refAuthor">Touch, J.</span><span class="refAuthor"> and M. Townsley</span>, <span class="refTitle">"IP Tunnels in the Internet Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-intarea-tunnels-10</span>, <time datetime="2019-09-12">12 September 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-intarea-tunnels-10">https://tools.ietf.org/html/draft-ietf-intarea-tunnels-10</a>&gt;</span>. </dd>
<dt id="RFC4443">[RFC4443]</dt>
<dd>
<span class="refAuthor">Conta, A.</span><span class="refAuthor">, Deering, S.</span><span class="refAuthor">, and M. Gupta, Ed.</span>, <span class="refTitle">"Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 89</span>, <span class="seriesInfo">RFC 4443</span>, <span class="seriesInfo">DOI 10.17487/RFC4443</span>, <time datetime="2006-03">March 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4443">https://www.rfc-editor.org/info/rfc4443</a>&gt;</span>. </dd>
<dt id="RFC5308">[RFC5308]</dt>
<dd>
<span class="refAuthor">Hopps, C.</span>, <span class="refTitle">"Routing IPv6 with IS-IS"</span>, <span class="seriesInfo">RFC 5308</span>, <span class="seriesInfo">DOI 10.17487/RFC5308</span>, <time datetime="2008-10">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5308">https://www.rfc-editor.org/info/rfc5308</a>&gt;</span>. </dd>
<dt id="RFC5340">[RFC5340]</dt>
<dd>
<span class="refAuthor">Coltun, R.</span><span class="refAuthor">, Ferguson, D.</span><span class="refAuthor">, Moy, J.</span><span class="refAuthor">, and A. Lindem</span>, <span class="refTitle">"OSPF for IPv6"</span>, <span class="seriesInfo">RFC 5340</span>, <span class="seriesInfo">DOI 10.17487/RFC5340</span>, <time datetime="2008-07">July 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5340">https://www.rfc-editor.org/info/rfc5340</a>&gt;</span>. </dd>
<dt id="RFC8126">[RFC8126]</dt>
<dd>
<span class="refAuthor">Cotton, M.</span><span class="refAuthor">, Leiba, B.</span><span class="refAuthor">, and T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dt id="SRN">[SRN]</dt>
<dd>
<span class="refAuthor">Lebrun, D.</span><span class="refAuthor">, Jadin, M.</span><span class="refAuthor">, Clad, F.</span><span class="refAuthor">, Filsfils, C.</span><span class="refAuthor">, and O. Bonaventure</span>, <span class="refTitle">"Software Resolved Networks: Rethinking Enterprise Networks with IPv6 Segment Routing"</span>, <time datetime="2018">2018</time>, <span>&lt;<a href="https://inl.info.ucl.ac.be/system/files/sosr18-final15-embedfonts.pdf">https://inl.info.ucl.ac.be/system/files/sosr18-final15-embedfonts.pdf</a>&gt;</span>. </dd>
</dl>
</section>
</section>
<div id="Acknowledgements">
<section id="section-appendix.a">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="section-appendix.a-1">The authors would like to thank <span class="contact-name">Ole Troan</span>, <span class="contact-name">Bob Hinden</span>, <span class="contact-name">Ron Bonica</span>,
      <span class="contact-name">Fred Baker</span>, <span class="contact-name">Brian Carpenter</span>, <span class="contact-name">Alexandru Petrescu</span>, <span class="contact-name">Punit Kumar Jaiswal</span>,
      <span class="contact-name">David Lebrun</span>, <span class="contact-name">Benjamin Kaduk</span>, <span class="contact-name">Frank Xialiang</span>, <span class="contact-name">Mirja Kühlewind</span>, <span class="contact-name">Roman       Danyliw</span>, <span class="contact-name">Joe Touch</span>, and <span class="contact-name">Magnus Westerlund</span> for their comments to this
      document.<a class="pilcrow" href="#section-appendix.a-1">¶</a></p>
</section>
</div>
<div id="Contributors">
<section id="section-appendix.b">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<p id="section-appendix.b-1"><span class="contact-name">Kamran Raza</span>, <span class="contact-name">Zafar Ali</span>, <span class="contact-name">Brian Field</span>, <span class="contact-name">Daniel Bernier</span>, <span class="contact-name">Ida Leung</span>, <span class="contact-name">Jen       Linkova</span>, <span class="contact-name">Ebben Aries</span>, <span class="contact-name">Tomoya Kosugi</span>, <span class="contact-name">Éric Vyncke</span>, <span class="contact-name">David Lebrun</span>, <span class="contact-name">Dirk       Steinberg</span>, <span class="contact-name">Robert Raszuk</span>, <span class="contact-name">Dave Barach</span>, <span class="contact-name">John Brzozowski</span>, <span class="contact-name">Pierre Francois</span>,
      <span class="contact-name">Nagendra Kumar</span>, <span class="contact-name">Mark Townsley</span>, <span class="contact-name">Christian Martin</span>, <span class="contact-name">Roberta Maglione</span>, <span class="contact-name">James       Connolly</span>, and <span class="contact-name">Aloys Augustin</span> contributed to the content of this
      document.<a class="pilcrow" href="#section-appendix.b-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.c">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Clarence Filsfils (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems, Inc.</span></div>
<div class="left" dir="auto"><span class="locality">Brussels</span></div>
<div class="left" dir="auto"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:cfilsfil@cisco.com">cfilsfil@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Darren Dukes (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems, Inc.</span></div>
<div class="left" dir="auto">
<span class="locality">Ottawa</span>  </div>
<div class="left" dir="auto"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:ddukes@cisco.com">ddukes@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Stefano Previdi</span></div>
<div class="left" dir="auto"><span class="org">Huawei</span></div>
<div class="left" dir="auto"><span class="country-name">Italy</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:stefano@previdi.net">stefano@previdi.net</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">John Leddy</span></div>
<div class="left" dir="auto"><span class="org">Individual</span></div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:john@leddy.net">john@leddy.net</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Satoru Matsushima</span></div>
<div class="left" dir="auto"><span class="org">SoftBank</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:satoru.matsushima@g.softbank.co.jp">satoru.matsushima@g.softbank.co.jp</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Daniel Voyer</span></div>
<div class="left" dir="auto"><span class="org">Bell Canada</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:daniel.voyer@bell.ca">daniel.voyer@bell.ca</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>