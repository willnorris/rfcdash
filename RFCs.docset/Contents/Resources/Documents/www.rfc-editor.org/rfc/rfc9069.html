<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9069: Support for Local RIB in the BGP Monitoring Protocol (BMP)</title>
<meta content="Tim Evens" name="author"/>
<meta content="Serpil Bayraktar" name="author"/>
<meta content="Manish Bhardwaj" name="author"/>
<meta content="Paolo Lucente" name="author"/>
<meta content="
       
                The BGP Monitoring Protocol (BMP) defines access to local Routing
                Information Bases (RIBs). This document updates BMP (RFC 7854) by
                adding access to the Local Routing Information Base (Loc-RIB), as
                defined in RFC 4271. The Loc-RIB contains the routes that have been
 selected by the local BGP speaker's Decision Process. 
       
    " name="description"/>
<meta content="xml2rfc 3.12.1" name="generator"/>
<meta content="BGP" name="keyword"/>
<meta content="BMP" name="keyword"/>
<meta content="local-rib" name="keyword"/>
<meta content="loc-rib" name="keyword"/>
<meta content="9069" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.12.1
    Python 3.6.15
    appdirs 1.4.4
    ConfigArgParse 1.4.1
    google-i18n-address 2.4.0
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.15.1
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.4.1
    requests 2.24.0
    setuptools 40.5.0
    six 1.14.0
    WeasyPrint 52.5
-->
<link href="rfc9069.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9069" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-grow-bmp-local-rib-12" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9069</td>
<td class="center">BMP Loc-RIB</td>
<td class="right">February 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Evens, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9069">9069</a></dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc7854">7854</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2022-02">February 2022</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Evens</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">S. Bayraktar</div>
<div class="org">Menlo Security</div>
</div>
<div class="author">
      <div class="author-name">M. Bhardwaj</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">P. Lucente</div>
<div class="org">NTT Communications</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9069</h1>
<h1 id="title">Support for Local RIB in the BGP Monitoring Protocol (BMP)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
                The BGP Monitoring Protocol (BMP) defines access to local Routing
                Information Bases (RIBs). This document updates BMP (RFC 7854) by
                adding access to the Local Routing Information Base (Loc-RIB), as
                defined in RFC 4271. The Loc-RIB contains the routes that have been
 selected by the local BGP speaker's Decision Process.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9069">https://www.rfc-editor.org/info/rfc9069</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="xref" href="#section-1.1">1.1</a>.  <a class="xref" href="#name-alternative-method-to-monit">Alternative Method to Monitor Loc-RIB</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-terminology">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-definitions">Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-per-peer-header">Per-Peer Header</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-peer-type">Peer Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-peer-flags">Peer Flags</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-loc-rib-monitoring">Loc-RIB Monitoring</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.  <a class="xref" href="#name-per-peer-header-2">Per-Peer Header</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="xref" href="#section-5.2">5.2</a>.  <a class="xref" href="#name-peer-up-notification">Peer Up Notification</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a class="xref" href="#section-5.2.1">5.2.1</a>.  <a class="xref" href="#name-peer-up-information">Peer Up Information</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="xref" href="#section-5.3">5.3</a>.  <a class="xref" href="#name-peer-down-notification">Peer Down Notification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a class="xref" href="#section-5.4">5.4</a>.  <a class="xref" href="#name-route-monitoring">Route Monitoring</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.1">
                    <p id="section-toc.1-1.5.2.4.2.1.1"><a class="xref" href="#section-5.4.1">5.4.1</a>.  <a class="xref" href="#name-asn-encoding">ASN Encoding</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.2">
                    <p id="section-toc.1-1.5.2.4.2.2.1"><a class="xref" href="#section-5.4.2">5.4.2</a>.  <a class="xref" href="#name-granularity">Granularity</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a class="xref" href="#section-5.5">5.5</a>.  <a class="xref" href="#name-route-mirroring">Route Mirroring</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a class="xref" href="#section-5.6">5.6</a>.  <a class="xref" href="#name-statistics-report">Statistics Report</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-other-considerations">Other Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="xref" href="#section-6.1">6.1</a>.  <a class="xref" href="#name-loc-rib-implementation">Loc-RIB Implementation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.1">
                    <p id="section-toc.1-1.6.2.1.2.1.1"><a class="xref" href="#section-6.1.1">6.1.1</a>.  <a class="xref" href="#name-multiple-loc-rib-peers">Multiple Loc-RIB Peers</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.2">
                    <p id="section-toc.1-1.6.2.1.2.2.1"><a class="xref" href="#section-6.1.2">6.1.2</a>.  <a class="xref" href="#name-filtering-loc-rib-to-bmp-re">Filtering Loc-RIB to BMP Receivers</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.3">
                    <p id="section-toc.1-1.6.2.1.2.3.1"><a class="xref" href="#section-6.1.3">6.1.3</a>.  <a class="xref" href="#name-changes-to-existing-bmp-ses">Changes to Existing BMP Sessions</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a class="xref" href="#section-8.1">8.1</a>.  <a class="xref" href="#name-bmp-peer-type">BMP Peer Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a class="xref" href="#section-8.2">8.2</a>.  <a class="xref" href="#name-bmp-loc-rib-instance-peer-f">BMP Loc-RIB Instance Peer Flags</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a class="xref" href="#section-8.3">8.3</a>.  <a class="xref" href="#name-peer-up-information-tlv">Peer Up Information TLV</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a class="xref" href="#section-8.4">8.4</a>.  <a class="xref" href="#name-peer-down-reason-code">Peer Down Reason Code</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.5">
                <p id="section-toc.1-1.8.2.5.1"><a class="xref" href="#section-8.5">8.5</a>.  <a class="xref" href="#name-deprecated-entries">Deprecated Entries</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="xref" href="#section-9.1">9.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="xref" href="#section-9.2">9.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#appendix-A"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#appendix-B"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
                This document defines a mechanism to monitor the BGP Loc-RIB state
                of remote BGP instances without the need to establish BGP peering
                sessions.

                BMP <span>[<a class="xref" href="#RFC7854">RFC7854</a>]</span> does not define a method to send
                the BGP instance Loc-RIB. 

                It does define locally originated routes in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-8.2">Section 8.2</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span>,
                but these routes are defined as the routes that originated into BGP (e.g., 
                <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4271#section-9.4">Section 9.4</a> of [<a class="xref" href="#RFC4271">RFC4271</a>]</span>). Loc-RIB
                includes all selected received routes from BGP peers in addition to locally
                originated routes.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">
                <a class="xref" href="#FigAdjRibInLocRib">Figure 1</a> shows the flow of received routes from one or more BGP peers
                into the Loc-RIB.<a class="pilcrow" href="#section-1-2">¶</a></p>
<span id="name-bgp-peering-adj-ribs-in-int"></span><div id="FigAdjRibInLocRib">
<figure id="figure-1">
        <div class="alignCenter art-text artwork" id="section-1-3.1">
<pre>    +------------------+      +------------------+
    | Peer-A           |      | Peer-B           |
/-- |                  | ---- |                  | --\
|   | Adj-RIB-In (Pre) |      | Adj-RIB-In (Pre) |   |
|   +------------------+      +------------------+   |
|                 |                         |        |
| Filters/Policy -|         Filters/Policy -|        |
|                 V                         V        |
|   +------------------+      +------------------+   |
|   | Adj-RIB-In (Post)|      | Adj-RIB-In (Post)|   |
|   +------------------+      +------------------+   |
|                |                          |        |
|      Selected -|                Selected -|        |
|                V                          V        |
|    +-----------------------------------------+     |
|    |                 Loc-RIB                 |     |
|    +-----------------------------------------+     |
|                                                    |
| ROUTER/BGP Instance                                |
\----------------------------------------------------/
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-bgp-peering-adj-ribs-in-int">BGP Peering Adj-RIBs-In into Loc-RIB</a>
        </figcaption></figure>
</div>
<p id="section-1-4">
                The following are some use cases for Loc-RIB access:<a class="pilcrow" href="#section-1-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-5.1">
          <p id="section-1-5.1.1">
                        The Adj-RIB-In for a given peer post-policy may contain hundreds of
                        thousands of routes, with only a handful of routes selected and installed
                        in the Loc-RIB after best-path selection.
                        Some monitoring applications, such as those that need only to
                        correlate flow records to Loc-RIB entries, only need to collect
                        and monitor the routes that are actually selected and used.<a class="pilcrow" href="#section-1-5.1.1">¶</a></p>
<p id="section-1-5.1.2">

                        Requiring the applications to collect all Adj-RIB-In post-policy
                        data forces the applications to receive a potentially
                        large unwanted data set and to perform the BGP decision process
                        selection, which includes having access to the interior gateway
                        protocol (IGP) next-hop metrics. While it is possible to obtain
                        the IGP topology information using BGP - Link State (BGP-LS),
                        it requires the application to implement Shortest Path First (SPF)
                        and possibly Constrained Shortest Path First (CSPF) based on
                        additional policies. This is overly complex for such a
                        simple application that only needs to have access to the Loc-RIB.<a class="pilcrow" href="#section-1-5.1.2">¶</a></p>
</li>
        <li class="normal" id="section-1-5.2">
                        It is common to see frequent changes over many BGP peers, but
                        those changes do not always result in the router's Loc-RIB
                        changing. The change in the Loc-RIB can have a direct impact
                        on the forwarding state. It can greatly reduce the time to
                        troubleshoot and resolve issues if operators have the history of
                        Loc-RIB changes. For example, a performance issue might have
                        been seen for only a duration of 5 minutes. Post-facto
                        troubleshooting this issue without Loc-RIB history hides any
                        decision-based routing changes that might have happened during
                        those 5 minutes.<a class="pilcrow" href="#section-1-5.2">¶</a>
</li>
        <li class="normal" id="section-1-5.3">
                        Operators may wish to validate the impact of policies applied
                        to the Adj-RIB-In by analyzing the final decision made by the
                        router when installing into the Loc-RIB. For example, in order
                        to validate if multipath prefixes are installed as expected
                        for all advertising peers, the Adj-RIB-In post-policy and Loc-RIB
                        need to be compared. This is only possible if the Loc-RIB
                        is available. Monitoring the Adj-RIB-In for this router from
                        another router to derive the Loc-RIB is likely to not show the same
                        installed prefixes. For example, the received Adj-RIB-In will
                        be different if ADD-PATH <span>[<a class="xref" href="#RFC7911">RFC7911</a>]</span>
                        is not enabled or if the maximum supported number of equal paths is different
                        between Loc-RIB and advertised routes.<a class="pilcrow" href="#section-1-5.3">¶</a>
</li>
      </ul>
<p id="section-1-6">
                This document adds Loc-RIB to the BGP Monitoring Protocol and
                replaces <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-8.2">Section 8.2</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span> ("Locally Originated Routes").<a class="pilcrow" href="#section-1-6">¶</a></p>
<section id="section-1.1">
        <h3 id="name-alternative-method-to-monit">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-alternative-method-to-monit">Alternative Method to Monitor Loc-RIB</a>
        </h3>
<p id="section-1.1-1">
                    Loc-RIB is used to build Adj-RIB-Out when advertising routes to a
                    peer. It is therefore possible to derive the Loc-RIB of a router by
                    monitoring the Adj-RIB-In pre-policy from another router.  
                    This becomes overly complex and error prone when considering the number
                    of peers being monitored per router.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
<p id="section-1.1-2"></p>
<span id="name-alternative-method-to-monito"></span><div id="FigCurLocRibMon">
<figure id="figure-2">
          <div class="alignCenter art-text artwork" id="section-1.1-3.1">
<pre>/------------------------------------------------------\
|  ROUTER1 BGP Instance                                |
|                                                      |
|     +--------------------------------------------+   |
|     |                 Loc-RIB                    |   |
|     +--------------------------------------------+   |
|                    |                    |            |
|    +------------------+     +------------------+     |
|    |   Peer-ROUTER2   |     |   Peer-ROUTER3   |     |
|    | Adj-RIB-Out (Pre)|     | Adj-RIB-Out (Pre)|     |
|    +------------------+     +------------------+     |
|    Filters/Policy -|    Filters/Policy -|            |
|                    V                    V            |
|   +-------------------+     +-------------------+    |
|   | Adj-RIB-Out (Post)|     | Adj-RIB-Out (Post)|    |
|   +-------------------+     +-------------------+    |
|              |                          |            |
\------------- | ------------------------ | -----------/
          BGP  |                     BGP  |
          Peer |                     Peer |
   +------------------+          +------------------+
   |   Peer-ROUTER1   |          |   Peer-ROUTER1   |
/--|                  |--\    /--|                  | --\
|  | Adj-RIB-In (Pre) |  |    |  | Adj-RIB-In (Pre) |   |
|  +------------------+  |    |  +------------------+   |
|                        |    |                         |
| ROUTER2/BGP Instance   |    | ROUTER3/BGP Instance    |
\------------------------/    \-------------------------/
            |                              |
            v                              v
    ROUTER2 BMP Feed               ROUTER3 BMP Feed
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-alternative-method-to-monito">Alternative Method to Monitor Loc-RIB</a>
          </figcaption></figure>
</div>
<p id="section-1.1-4">
                    The setup needed to monitor the Loc-RIB of a router requires another
                    router with a peering session to the target router that is to be
                    monitored. As shown in <a class="xref" href="#FigCurLocRibMon">Figure 2</a>, the
                    target router Loc-RIB is advertised via the Adj-RIB-Out
                    to the BMP router over a standard BGP peering session. The BMP
                    router then forwards the Adj-RIB-In pre-policy to the BMP receiver.<a class="pilcrow" href="#section-1.1-4">¶</a></p>
<p id="section-1.1-5">
                    A BMP lacking access to Loc-RIB introduces the need for additional
     resources:<a class="pilcrow" href="#section-1.1-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-6.1">
                    Requires at least two routers when only one router was to be
                    monitored.<a class="pilcrow" href="#section-1.1-6.1">¶</a>
</li>
          <li class="normal" id="section-1.1-6.2">
                    Requires additional BGP peering to collect the received updates
                    when peering may not have even been required in the first
                    place. For example, virtual routing and forwarding (VRF) tables 
                    with no peers, redistributed BGP-LS with no peers, and
                    segment routing egress peer engineering where no
                    peers have link-state address family enabled are all
                    situations with no preexisting BGP peers.<a class="pilcrow" href="#section-1.1-6.2">¶</a>
</li>
        </ul>
<p id="section-1.1-7">
                    Many complexities are introduced when using a received Adj-RIB-In
                    to infer a router Loc-RIB:<a class="pilcrow" href="#section-1.1-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1-8.1">
                    Adj-RIB-Out received as Adj-RIB-In from another router may have
                    a policy applied that generates aggregates, suppresses
                    more specific prefixes, manipulates attributes, or filters routes. Not
                    only does this invalidate the Loc-RIB view, it adds complexity
                    when multiple BMP routers may have peering sessions to the same
                    router. The BMP receiver user is left with the error-prone task of
                    identifying which peering session is the best representative of
                    the Loc-RIB.<a class="pilcrow" href="#section-1.1-8.1">¶</a>
</li>
          <li class="normal" id="section-1.1-8.2">
                    BGP peering is designed to work between administrative domains
                    and therefore does not need to include internal system-level
                    information of each peering router (e.g., the system name or
                    version information). In order to derive the Loc-RIB of a router,
                    the router name or other system information is needed. The BMP
                    receiver and user are forced to do some type of correlation using
                    whatever information is available in the peering session (e.g., peering
                    addresses, autonomous system numbers, and BGP identifiers).
                    This leads to error-prone correlations.<a class="pilcrow" href="#section-1.1-8.2">¶</a>
</li>
          <li class="normal" id="section-1.1-8.3">
                    Correlating BGP identifiers (BGP-ID) and session addresses to a 
                    router requires additional data, such as router inventory. This
                    additional data provides the BMP receiver the ability to map and
                    correlate the BGP-IDs and/or session addresses but requires the
                    BMP receiver to somehow obtain this data outside of the BMP. How this
                    data is obtained and the accuracy of the data directly affect the
                    integrity of the correlation.<a class="pilcrow" href="#section-1.1-8.3">¶</a>
</li>
        </ul>
</section>
</section>
</div>
<section id="section-2">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<p id="section-2-1">
 The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
 "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
 described in BCP 14 <span><a class="xref" href="#RFC2119">RFC 2119</a> [<a class="xref" href="#RFC2119">RFC2119</a>]</span>
        <span><a class="xref" href="#RFC8174">RFC 8174</a> [<a class="xref" href="#RFC8174">RFC8174</a>]</span> when, and only when, they
 appear in all capitals, as shown here.<a class="pilcrow" href="#section-2-1">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-definitions">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-definitions">Definitions</a>
      </h2>
<span class="break"></span><dl class="dlParallel" id="section-3-1">
        <dt id="section-3-1.1">BGP Instance:</dt>
        <dd id="section-3-1.2" style="margin-left: 1.5em">Refers to an instance of BGP-4 <span>[<a class="xref" href="#RFC4271">RFC4271</a>]</span>,
 and considerations in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-8.1">Section 8.1</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span> apply to it.<a class="pilcrow" href="#section-3-1.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.3">Adj-RIB-In:</dt>
        <dd id="section-3-1.4" style="margin-left: 1.5em">As defined in <span>[<a class="xref" href="#RFC4271">RFC4271</a>]</span>, "The Adj-RIBs-In contains
            unprocessed routing information that has been advertised to the
            local BGP speaker by its peers." This is also referred to as the
            "pre-policy Adj-RIB-In" in this document.<a class="pilcrow" href="#section-3-1.4">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.5">
            Adj-RIB-Out:</dt>
        <dd id="section-3-1.6" style="margin-left: 1.5em">As defined in <span>[<a class="xref" href="#RFC4271">RFC4271</a>]</span>, "The Adj-RIBs-Out contains
            the routes for advertisement to specific peers by means of the
            local speaker's UPDATE messages."<a class="pilcrow" href="#section-3-1.6">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.7">

            Loc-RIB:</dt>
        <dd id="section-3-1.8" style="margin-left: 1.5em">As defined in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4271#section-1.1">Section 1.1</a> of [<a class="xref" href="#RFC4271">RFC4271</a>]</span>, "The Loc-RIB
 contains the routes that have been selected by the local BGP speaker's Decision
            Process." Note that the Loc-RIB state as monitored through BMP might
            also contain routes imported from other routing protocols such as an IGP
            or local static routes.<a class="pilcrow" href="#section-3-1.8">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.9">
            Pre-Policy Adj-RIB-Out:</dt>
        <dd id="section-3-1.10" style="margin-left: 1.5em">The result before applying the outbound
            policy to an Adj-RIB-Out. This normally represents a similar view of the
            Loc-RIB but may contain additional routes based on BGP peering configuration.<a class="pilcrow" href="#section-3-1.10">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.11">
            Post-Policy Adj-RIB-Out:</dt>
        <dd id="section-3-1.12" style="margin-left: 1.5em"> The result of applying the outbound policy to
 an Adj-RIB-Out. This <span class="bcp14">MUST</span> be what is actually sent to the peer.<a class="pilcrow" href="#section-3-1.12">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
<section id="section-4">
      <h2 id="name-per-peer-header">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-per-peer-header">Per-Peer Header</a>
      </h2>
<div id="PeerType">
<section id="section-4.1">
        <h3 id="name-peer-type">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-peer-type">Peer Type</a>
        </h3>
<p id="section-4.1-1">
 A new peer type is defined for Loc-RIB to indicate that it
 represents the router Loc-RIB, which may have a route distinguisher (RD).
 <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-4.2">Section 4.2</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span> defines a Local Instance
     Peer type, which is for the case of non-RD peers that have an instance
 identifier.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">
 This document defines the following new peer type:<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-3.1">Peer Type = 3: Loc-RIB Instance Peer<a class="pilcrow" href="#section-4.1-3.1">¶</a>
</li>
        </ul>
</section>
</div>
<div id="PeerFlags">
<section id="section-4.2">
        <h3 id="name-peer-flags">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-peer-flags">Peer Flags</a>
        </h3>
<p id="section-4.2-1">
 If locally sourced routes are communicated
       using BMP, they <span class="bcp14">MUST</span> be conveyed using the Loc-RIB Instance Peer Type.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<p id="section-4.2-2">
 The per-peer header flags for the Loc-RIB Instance Peer Type are defined
 as follows:<a class="pilcrow" href="#section-4.2-2">¶</a></p>
<div class="alignCenter art-text artwork" id="section-4.2-3">
<pre>     0 1 2 3 4 5 6 7
    +-+-+-+-+-+-+-+-+
    |F| | | | | | | |
    +-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-4.2-3">¶</a>
</div>
<ul class="normal">
<li class="normal" id="section-4.2-4.1">
            <p id="section-4.2-4.1.1">
     The F flag indicates that the Loc-RIB is filtered. This <span class="bcp14">MUST</span> be
     set when a filter is applied to Loc-RIB routes sent to the BMP
     collector.<a class="pilcrow" href="#section-4.2-4.1.1">¶</a></p>
<p id="section-4.2-4.1.2">

     The unused bits are reserved for future use. They <span class="bcp14">MUST</span> be
     transmitted as 0, and their values <span class="bcp14">MUST</span> be ignored on receipt.<a class="pilcrow" href="#section-4.2-4.1.2">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
<section id="section-5">
      <h2 id="name-loc-rib-monitoring">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-loc-rib-monitoring">Loc-RIB Monitoring</a>
      </h2>
<p id="section-5-1">
     The Loc-RIB contains all routes selected by the BGP Decision Process as
     described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4271#section-9.1">Section 9.1</a> of [<a class="xref" href="#RFC4271">RFC4271</a>]</span>. These
     routes include those learned from BGP peers via its Adj-RIBs-In post-policy, as
     well as routes learned by other means as per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4271#section-9.4">Section 9.4</a> of [<a class="xref" href="#RFC4271">RFC4271</a>]</span>.

 Examples of these include redistribution of routes from other protocols into BGP
 or those otherwise locally originated (i.e., aggregate routes).<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">
    
    As described in <a class="xref" href="#FilterLocRib">Section 6.1.2</a>, a subset of Loc-RIB routes
    <span class="bcp14">MAY</span> be sent to a BMP collector by setting the F flag.<a class="pilcrow" href="#section-5-2">¶</a></p>
<section id="section-5.1">
        <h3 id="name-per-peer-header-2">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-per-peer-header-2">Per-Peer Header</a>
        </h3>
<p id="section-5.1-1">
            All peer messages that include a per-peer header as defined in 
            <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-4.2">Section 4.2</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span>
          <span class="bcp14">MUST</span> use the following values:<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.1-2">
          <dt id="section-5.1-2.1">
                Peer Type:</dt>
          <dd id="section-5.1-2.2" style="margin-left: 1.5em">Set to 3 to indicate Loc-RIB Instance Peer.<a class="pilcrow" href="#section-5.1-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.3">
                Peer Distinguisher:</dt>
          <dd id="section-5.1-2.4" style="margin-left: 1.5em">Zero-filled if the Loc-RIB represents the
                global instance.  Otherwise, set to the route distinguisher or
                unique locally defined value of the particular instance to which the Loc-RIB belongs.<a class="pilcrow" href="#section-5.1-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.5">
 Peer Address:</dt>
          <dd id="section-5.1-2.6" style="margin-left: 1.5em"> Zero-filled.  The remote peer address is not applicable.
 The V flag is not applicable with the Loc-RIB Instance Peer Type
 considering addresses are zero-filled.<a class="pilcrow" href="#section-5.1-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.7">
                Peer Autonomous System (AS):</dt>
          <dd id="section-5.1-2.8" style="margin-left: 1.5em">Set to the primary router BGP autonomous system number (ASN).<a class="pilcrow" href="#section-5.1-2.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.9">
                Peer BGP ID:</dt>
          <dd id="section-5.1-2.10" style="margin-left: 1.5em"> Set the ID to the router-id of the VRF instance if VRF is used; otherwise, set to the global instance router-id.<a class="pilcrow" href="#section-5.1-2.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-2.11">
 Timestamp:</dt>
          <dd id="section-5.1-2.12" style="margin-left: 1.5em">The time when the encapsulated routes were installed in
 the Loc-RIB, expressed in seconds and microseconds since midnight
 (zero hour), January 1, 1970 (UTC).  If zero, the time is unavailable.
 Precision of the timestamp is implementation dependent.<a class="pilcrow" href="#section-5.1-2.12">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
<div id="PeerUpNotify">
<section id="section-5.2">
        <h3 id="name-peer-up-notification">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-peer-up-notification">Peer Up Notification</a>
        </h3>
<p id="section-5.2-1">
                Peer Up notifications follow <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-4.10">Section 4.10</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span> with the
                following clarifications:<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.2-2">
          <dt id="section-5.2-2.1">
                Local Address:</dt>
          <dd id="section-5.2-2.2" style="margin-left: 1.5em"> Zero-filled; the local address is not applicable.<a class="pilcrow" href="#section-5.2-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.3">
                Local Port:</dt>
          <dd id="section-5.2-2.4" style="margin-left: 1.5em"> Set to 0; the local port is not applicable.<a class="pilcrow" href="#section-5.2-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.5">
                Remote Port:</dt>
          <dd id="section-5.2-2.6" style="margin-left: 1.5em"> Set to 0; the remote port is not applicable.<a class="pilcrow" href="#section-5.2-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.7">
                Sent OPEN Message:</dt>
          <dd id="section-5.2-2.8" style="margin-left: 1.5em"> This is a fabricated BGP OPEN message.
                Capabilities <span class="bcp14">MUST</span> include the 4-octet ASN and all necessary
                capabilities to represent the Loc-RIB Route Monitoring messages.
                Only include capabilities if they will be used for Loc-RIB
                monitoring messages.  For example, if ADD-PATH is enabled for
                IPv6 and Loc-RIB contains additional paths, the ADD-PATH
                capability should be included for IPv6.  In the case of ADD-PATH,
                the capability intent of advertise, receive, or both can be ignored
           since the presence of the capability indicates enough that additional paths will be used for IPv6.<a class="pilcrow" href="#section-5.2-2.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.9">
                Received OPEN Message:</dt>
          <dd id="section-5.2-2.10" style="margin-left: 1.5em"> Repeat of the same sent OPEN message.  The
                duplication allows the BMP receiver to parse the expected
                received OPEN message as defined in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-4.10">Section 4.10</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span>.<a class="pilcrow" href="#section-5.2-2.10">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<div id="PeerUpInfoTlv">
<section id="section-5.2.1">
          <h4 id="name-peer-up-information">
<a class="section-number selfRef" href="#section-5.2.1">5.2.1. </a><a class="section-name selfRef" href="#name-peer-up-information">Peer Up Information</a>
          </h4>
<p id="section-5.2.1-1">
                The following Peer Up Information TLV type is added:<a class="pilcrow" href="#section-5.2.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2.1-2.1">
              <p id="section-5.2.1-2.1.1">Type = 3: VRF/Table Name.  The Information field contains a
                UTF-8 string whose value <span class="bcp14">MUST</span> be equal to the value of the VRF or
                table name (e.g., RD instance name) being conveyed.  The string size
                <span class="bcp14">MUST</span> be within the range of 1 to 255 bytes.<a class="pilcrow" href="#section-5.2.1-2.1.1">¶</a></p>
<p id="section-5.2.1-2.1.2">
                The VRF/Table Name TLV is optionally included to support implementations
                that may not have defined a name.  If a name is configured, it <span class="bcp14">MUST</span>
                be included.  The
                default value of "global" <span class="bcp14">MUST</span> be used for the default Loc-RIB
                instance with a zero-filled distinguisher. 
                If the TLV is included, then it <span class="bcp14">MUST</span> also be included in the Peer 
 Down notification.<a class="pilcrow" href="#section-5.2.1-2.1.2">¶</a></p>
</li>
          </ul>
<p id="section-5.2.1-3">The Information field contains a
                UTF-8 string whose value <span class="bcp14">MUST</span> be equal to the value of the VRF or
                table name (e.g., RD instance name) being conveyed.  The string size
                <span class="bcp14">MUST</span> be within the range of 1 to 255 bytes.<a class="pilcrow" href="#section-5.2.1-3">¶</a></p>
<p id="section-5.2.1-4">
                The VRF/Table Name TLV is optionally included to support implementations
                that may not have defined a name.  If a name is configured, it <span class="bcp14">MUST</span>
                be included.  The
                default value of "global" <span class="bcp14">MUST</span> be used for the default Loc-RIB
                instance with a zero-filled distinguisher.

                If the TLV is included, then it <span class="bcp14">MUST</span> also be included in the Peer Down notification.<a class="pilcrow" href="#section-5.2.1-4">¶</a></p>
<p id="section-5.2.1-5">
 Multiple TLVs of the same type can be repeated as part of the same message,
 for example, to convey a filtered view of a VRF. A BMP receiver should append
 multiple TLVs of the same type to a set in order to support alternate or
 additional names for the same peer. If multiple strings are included, their
 ordering <span class="bcp14">MUST</span> be preserved when they are reported.<a class="pilcrow" href="#section-5.2.1-5">¶</a></p>
</section>
</div>
</section>
</div>
<div id="PeerDownReasonCode">
<section id="section-5.3">
        <h3 id="name-peer-down-notification">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-peer-down-notification">Peer Down Notification</a>
        </h3>
<p id="section-5.3-1">
            The Peer Down notification <span class="bcp14">MUST</span> use reason code 6. Following the reason is data
     in TLV format. The following Peer Down Information TLV type is defined:<a class="pilcrow" href="#section-5.3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-2.1">
                Type = 3: VRF/Table Name.  The Information field contains a
                UTF-8 string whose value <span class="bcp14">MUST</span> be equal to the value of the VRF or
                table name (e.g., RD instance name) being conveyed.  The string size
                <span class="bcp14">MUST</span> be within the range of 1 to 255 bytes. The VRF/Table Name
 informational TLV <span class="bcp14">MUST</span> be included if it was in the Peer Up.<a class="pilcrow" href="#section-5.3-2.1">¶</a>
</li>
        </ul>
</section>
</div>
<section id="section-5.4">
        <h3 id="name-route-monitoring">
<a class="section-number selfRef" href="#section-5.4">5.4. </a><a class="section-name selfRef" href="#name-route-monitoring">Route Monitoring</a>
        </h3>
<p id="section-5.4-1">
            Route Monitoring messages are used for initial synchronization of
            the Loc-RIB.  They are also used to convey incremental Loc-RIB
            changes.<a class="pilcrow" href="#section-5.4-1">¶</a></p>
<p id="section-5.4-2">
            As described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-4.6">Section 4.6</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span>, "Following the
     common BMP header and per-peer header is a BGP Update PDU."<a class="pilcrow" href="#section-5.4-2">¶</a></p>
<section id="section-5.4.1">
          <h4 id="name-asn-encoding">
<a class="section-number selfRef" href="#section-5.4.1">5.4.1. </a><a class="section-name selfRef" href="#name-asn-encoding">ASN Encoding</a>
          </h4>
<p id="section-5.4.1-1">
            Loc-RIB Route Monitoring messages <span class="bcp14">MUST</span> use a 4-byte ASN encoding as indicated
            in the <span><a class="xref" href="#PeerUpNotify">Peer Up sent OPEN message</a> (<a class="xref" href="#PeerUpNotify">Section 5.2</a>)</span> capability.<a class="pilcrow" href="#section-5.4.1-1">¶</a></p>
</section>
<section id="section-5.4.2">
          <h4 id="name-granularity">
<a class="section-number selfRef" href="#section-5.4.2">5.4.2. </a><a class="section-name selfRef" href="#name-granularity">Granularity</a>
          </h4>
<p id="section-5.4.2-1">
            State compression and throttling <span class="bcp14">SHOULD</span> be used by a BMP sender
            to reduce the amount of Route Monitoring messages that are
            transmitted to BMP receivers.  With state compression, only the
            final resultant updates are sent.<a class="pilcrow" href="#section-5.4.2-1">¶</a></p>
<p id="section-5.4.2-2">
            For example, prefix 192.0.2.0/24 is updated in the Loc-RIB 5 times
            within 1 second. State compression of BMP Route Monitoring messages
            results in only the final change being transmitted. The other 4
            changes are suppressed because they fall within the compression
            interval. If no compression was being used, all 5 updates would
            have been transmitted.<a class="pilcrow" href="#section-5.4.2-2">¶</a></p>
<p id="section-5.4.2-3">
            A BMP receiver should expect that the granularity of Loc-RIB Route Monitoring can
            vary depending on the BMP sender implementation.<a class="pilcrow" href="#section-5.4.2-3">¶</a></p>
</section>
</section>
<section id="section-5.5">
        <h3 id="name-route-mirroring">
<a class="section-number selfRef" href="#section-5.5">5.5. </a><a class="section-name selfRef" href="#name-route-mirroring">Route Mirroring</a>
        </h3>
<p id="section-5.5-1">
            <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-4.7">Section 4.7</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span> 
            defines Route Mirroring for verbatim  duplication of messages received. This
            is not applicable to Loc-RIB as PDUs are originated by the router.
            Any received Route Mirroring messages <span class="bcp14">SHOULD</span> be ignored.<a class="pilcrow" href="#section-5.5-1">¶</a></p>
</section>
<section id="section-5.6">
        <h3 id="name-statistics-report">
<a class="section-number selfRef" href="#section-5.6">5.6. </a><a class="section-name selfRef" href="#name-statistics-report">Statistics Report</a>
        </h3>
<p id="section-5.6-1">
            Not all Stat Types are relevant to Loc-RIB.  The Stat Types that
            are relevant are listed below:<a class="pilcrow" href="#section-5.6-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.6-2.1">
            Stat Type = 8: (64-bit Gauge) Number of routes in Loc-RIB.<a class="pilcrow" href="#section-5.6-2.1">¶</a>
</li>
          <li class="normal" id="section-5.6-2.2">
            Stat Type = 10: Number of routes in per-AFI/SAFI Loc-RIB.  The
       value is structured as: 2-byte AFI, 1-byte SAFI, followed by a 64-bit Gauge.<a class="pilcrow" href="#section-5.6-2.2">¶</a>
</li>
        </ul>
</section>
</section>
<section id="section-6">
      <h2 id="name-other-considerations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-other-considerations">Other Considerations</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-loc-rib-implementation">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-loc-rib-implementation">Loc-RIB Implementation</a>
        </h3>
<p id="section-6.1-1">
            There are several methods for a BGP speaker to implement Loc-RIB efficiently.
            In all methods, the implementation emulates a peer with Peer Up and Down
            messages to convey capabilities as well as Route Monitor messages to
            convey Loc-RIB.  In this sense, the peer that conveys the Loc-RIB is
            a locally emulated peer.<a class="pilcrow" href="#section-6.1-1">¶</a></p>
<section id="section-6.1.1">
          <h4 id="name-multiple-loc-rib-peers">
<a class="section-number selfRef" href="#section-6.1.1">6.1.1. </a><a class="section-name selfRef" href="#name-multiple-loc-rib-peers">Multiple Loc-RIB Peers</a>
          </h4>
<p id="section-6.1.1-1">
            There <span class="bcp14">MUST</span> be at least one emulated peer for each Loc-RIB instance,
            such as with VRFs. The BMP receiver identifies the Loc-RIB by the peer
            header distinguisher and BGP ID.  The BMP receiver uses the VRF/Table
            Name from the Peer Up information to associate a name with the Loc-RIB.<a class="pilcrow" href="#section-6.1.1-1">¶</a></p>
<p id="section-6.1.1-2">
            In some implementations, it might be required to have more than one
            emulated peer for Loc-RIB to convey different address families for
            the same Loc-RIB.  In this case, the peer distinguisher and BGP ID
            should be the same since they represent the same Loc-RIB instance.
            Each emulated peer instance <span class="bcp14">MUST</span> send a Peer Up with the OPEN message
            indicating the address family capabilities.  A BMP receiver <span class="bcp14">MUST</span>
            process these capabilities to know which peer belongs to which
            address family.<a class="pilcrow" href="#section-6.1.1-2">¶</a></p>
</section>
<div id="FilterLocRib">
<section id="section-6.1.2">
          <h4 id="name-filtering-loc-rib-to-bmp-re">
<a class="section-number selfRef" href="#section-6.1.2">6.1.2. </a><a class="section-name selfRef" href="#name-filtering-loc-rib-to-bmp-re">Filtering Loc-RIB to BMP Receivers</a>
          </h4>
<p id="section-6.1.2-1">
            There may be use cases where BMP receivers should only receive
            specific routes from Loc-RIB. For example, IPv4 unicast routes may
            include internal BGP (IBGP), external BGP (EBGP), and IGP, but only
            routes from EBGP should be sent
            to the BMP receiver.  Alternatively, it may be that only IBGP and
            EBGP should be sent and IGP redistributed routes excluded.  In these cases where the Loc-RIB is filtered, the F flag
            is set to 1 to indicate to the BMP receiver that the Loc-RIB is
            filtered. If multiple filters are associated with the same Loc-RIB,
 a table name <span class="bcp14">MUST</span> be used in order to allow a BMP receiver to make
 the right associations.<a class="pilcrow" href="#section-6.1.2-1">¶</a></p>
</section>
</div>
<section id="section-6.1.3">
          <h4 id="name-changes-to-existing-bmp-ses">
<a class="section-number selfRef" href="#section-6.1.3">6.1.3. </a><a class="section-name selfRef" href="#name-changes-to-existing-bmp-ses">Changes to Existing BMP Sessions</a>
          </h4>
<p id="section-6.1.3-1">
 In case of any change that results in the alteration of behavior of
 an existing BMP session, i.e., changes to filtering and table names, the
 session <span class="bcp14">MUST</span> be bounced with a Peer Down / Peer Up sequence.<a class="pilcrow" href="#section-6.1.3-1">¶</a></p>
</section>
</section>
</section>
<section id="section-7">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-7-1">
        The same considerations as in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-11">Section 11</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span> apply to this
        document. Implementations of this protocol <span class="bcp14">SHOULD</span> require that sessions only be established with
        authorized and trusted monitoring devices. It is also believed that this document does
        not introduce any additional security considerations.<a class="pilcrow" href="#section-7-1">¶</a></p>
</section>
<section id="section-8">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-8-1">
        IANA has assigned new parameters
        to the <a href="https://www.iana.org/assignments/bmp-parameters/">
        "BGP Monitoring Protocol (BMP) Parameters" registry</a>.<a class="pilcrow" href="#section-8-1">¶</a></p>
<section id="section-8.1">
        <h3 id="name-bmp-peer-type">
<a class="section-number selfRef" href="#section-8.1">8.1. </a><a class="section-name selfRef" href="#name-bmp-peer-type">BMP Peer Type</a>
        </h3>
<p id="section-8.1-1">IANA has registered the following new peer type (<a class="xref" href="#PeerType">Section 4.1</a>):<a class="pilcrow" href="#section-8.1-1">¶</a></p>
<span id="name-bmp-peer-type-2"></span><div id="t1">
<table class="center" id="table-1">
          <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-bmp-peer-type-2">BMP Peer Type</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">Peer Type</th>
              <th class="text-left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">3</td>
              <td class="text-left" colspan="1" rowspan="1">Loc-RIB Instance Peer</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
<section id="section-8.2">
        <h3 id="name-bmp-loc-rib-instance-peer-f">
<a class="section-number selfRef" href="#section-8.2">8.2. </a><a class="section-name selfRef" href="#name-bmp-loc-rib-instance-peer-f">BMP Loc-RIB Instance Peer Flags</a>
        </h3>
<p id="section-8.2-1">
            IANA has renamed "BMP Peer Flags" to
            "BMP Peer Flags for Peer Types 0 through 2" and created a new registry
            named "BMP Peer Flags for Loc-RIB Instance Peer Type 3".<a class="pilcrow" href="#section-8.2-1">¶</a></p>
<p id="section-8.2-2">This document defines peer flags that are specific to the
           Loc-RIB Instance Peer Type.  IANA has registered the following in
           the "BMP Peer Flags for Loc-RIB Instance Peer Type 3" registry:<a class="pilcrow" href="#section-8.2-2">¶</a></p>
<span id="name-loc-rib-instance-peer-type"></span><div id="t2">
<table class="center" id="table-2">
          <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-loc-rib-instance-peer-type">Loc-RIB Instance Peer Type</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">Flag</th>
              <th class="text-left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">0</td>
              <td class="text-left" colspan="1" rowspan="1">F flag</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-8.2-4">As noted in <a class="xref" href="#PeerFlags">Section 4.2</a>, the F flag indicates that the Loc-RIB is filtered.  This indicates that the Loc-RIB does not represent the complete routing table.<a class="pilcrow" href="#section-8.2-4">¶</a></p>
<p id="section-8.2-5">
         Flags 1 through 7 are unassigned.  The registration procedure for the
        registry is Standards Action.<a class="pilcrow" href="#section-8.2-5">¶</a></p>
</section>
<section id="section-8.3">
        <h3 id="name-peer-up-information-tlv">
<a class="section-number selfRef" href="#section-8.3">8.3. </a><a class="section-name selfRef" href="#name-peer-up-information-tlv">Peer Up Information TLV</a>
        </h3>
<p id="section-8.3-1">
            IANA has renamed the "BMP Initiation Message TLVs" registry to "BMP Initiation and Peer Up Information TLVs".
            <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7854#section-4.4">Section 4.4</a> of [<a class="xref" href="#RFC7854">RFC7854</a>]</span> indicates that 
            both Initiation and Peer Up share the same information TLVs.
        
            This document defines the following new BMP Peer Up Information
            TLV type (<a class="xref" href="#PeerUpInfoTlv">Section 5.2.1</a>):<a class="pilcrow" href="#section-8.3-1">¶</a></p>
<span id="name-bmp-peer-up-information-tlv"></span><div id="t3">
<table class="center" id="table-3">
          <caption>
<a class="selfRef" href="#table-3">Table 3</a>:
<a class="selfRef" href="#name-bmp-peer-up-information-tlv">BMP Peer Up Information TLV Type</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">Type</th>
              <th class="text-left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">3</td>
              <td class="text-left" colspan="1" rowspan="1">VRF/Table Name</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-8.3-3">The Information field contains a UTF-8 string whose value
            <span class="bcp14">MUST</span> be equal to the value of the VRF or table name
            (e.g., RD instance name) being conveyed.  The string size
            <span class="bcp14">MUST</span> be within the range of 1 to 255 bytes.<a class="pilcrow" href="#section-8.3-3">¶</a></p>
</section>
<section id="section-8.4">
        <h3 id="name-peer-down-reason-code">
<a class="section-number selfRef" href="#section-8.4">8.4. </a><a class="section-name selfRef" href="#name-peer-down-reason-code">Peer Down Reason Code</a>
        </h3>
<p id="section-8.4-1">
            IANA has registered the following new BMP Peer Down reason code
            (<a class="xref" href="#PeerDownReasonCode">Section 5.3</a>):<a class="pilcrow" href="#section-8.4-1">¶</a></p>
<span id="name-bmp-peer-down-reason-code"></span><div id="t4">
<table class="center" id="table-4">
          <caption>
<a class="selfRef" href="#table-4">Table 4</a>:
<a class="selfRef" href="#name-bmp-peer-down-reason-code">BMP Peer Down Reason Code</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">Type</th>
              <th class="text-left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">6</td>
              <td class="text-left" colspan="1" rowspan="1">Local system closed, TLV data follows</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
<section id="section-8.5">
        <h3 id="name-deprecated-entries">
<a class="section-number selfRef" href="#section-8.5">8.5. </a><a class="section-name selfRef" href="#name-deprecated-entries">Deprecated Entries</a>
        </h3>
<p id="section-8.5-1">Per this document, IANA has marked the F Flag entry in the "BMP
        Peer Flags for Peer Types 0 through 2" registry as
        "deprecated".<a class="pilcrow" href="#section-8.5-1">¶</a></p>
</section>
</section>
<section id="section-9">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4271">[RFC4271]</dt>
        <dd>
<span class="refAuthor">Rekhter, Y., Ed.</span>, <span class="refAuthor">Li, T., Ed.</span>, and <span class="refAuthor">S. Hares, Ed.</span>, <span class="refTitle">"A Border Gateway Protocol 4 (BGP-4)"</span>, <span class="seriesInfo">RFC 4271</span>, <span class="seriesInfo">DOI 10.17487/RFC4271</span>, <time class="refDate" datetime="2006-01">January 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4271">https://www.rfc-editor.org/info/rfc4271</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7854">[RFC7854]</dt>
        <dd>
<span class="refAuthor">Scudder, J., Ed.</span>, <span class="refAuthor">Fernando, R.</span>, and <span class="refAuthor">S. Stuart</span>, <span class="refTitle">"BGP Monitoring Protocol (BMP)"</span>, <span class="seriesInfo">RFC 7854</span>, <span class="seriesInfo">DOI 10.17487/RFC7854</span>, <time class="refDate" datetime="2016-06">June 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7854">https://www.rfc-editor.org/info/rfc7854</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC7911">[RFC7911]</dt>
      <dd>
<span class="refAuthor">Walton, D.</span>, <span class="refAuthor">Retana, A.</span>, <span class="refAuthor">Chen, E.</span>, and <span class="refAuthor">J. Scudder</span>, <span class="refTitle">"Advertisement of Multiple Paths in BGP"</span>, <span class="seriesInfo">RFC 7911</span>, <span class="seriesInfo">DOI 10.17487/RFC7911</span>, <time class="refDate" datetime="2016-07">July 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7911">https://www.rfc-editor.org/info/rfc7911</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">
        The authors would like to thank <span class="contact-name">John Scudder</span>, <span class="contact-name">Jeff Haas</span>, and <span class="contact-name">Mukul Srivastava</span>
 for their valuable input.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Tim Evens</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems</span></div>
<div class="left" dir="auto"><span class="street-address">2901 Third Avenue, Suite 600</span></div>
<div class="left" dir="auto">
<span class="locality">Seattle</span>, <span class="region">WA</span> <span class="postal-code">98121</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:tievens@cisco.com">tievens@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Serpil Bayraktar</span></div>
<div class="left" dir="auto"><span class="org">Menlo Security</span></div>
<div class="left" dir="auto"><span class="street-address">800 W El Camino Real, Suite 250</span></div>
<div class="left" dir="auto">
<span class="locality">Mountain View</span>, <span class="region">CA</span> <span class="postal-code">94040</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:serpil.bayraktar@menlosecurity.com">serpil.bayraktar@menlosecurity.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Manish Bhardwaj</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems</span></div>
<div class="left" dir="auto"><span class="street-address">3700 Cisco Way</span></div>
<div class="left" dir="auto">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95134</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:manbhard@cisco.com">manbhard@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Paolo Lucente</span></div>
<div class="left" dir="auto"><span class="org">NTT Communications</span></div>
<div class="left" dir="auto"><span class="street-address">Siriusdreef 70-72</span></div>
<div class="left" dir="auto">
<span class="postal-code">2132</span> <span class="locality">Hoofddorp</span>
</div>
<div class="left" dir="auto"><span class="country-name">Netherlands</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:paolo@ntt.net">paolo@ntt.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>