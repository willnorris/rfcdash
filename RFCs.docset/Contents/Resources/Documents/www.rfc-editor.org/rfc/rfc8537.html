<html><head></head><body><pre>Internet Engineering Task Force (IETF)                    R. Gandhi, Ed.
Request for Comments: 8537                           Cisco Systems, Inc.
Updates: <a href="./rfc4090">4090</a>, <a href="./rfc7551">7551</a>                                              H. Shah
Category: Standards Track                                          Ciena
ISSN: 2070-1721                                             J. Whittaker
                                                                 Verizon
                                                           February 2019


    <span class="h1">Updates to the Fast Reroute Procedures for Co-routed Associated</span>
               <span class="h1">Bidirectional Label Switched Paths (LSPs)</span>

Abstract

   Resource Reservation Protocol (RSVP) association signaling can be
   used to bind two unidirectional Label Switched Paths (LSPs) into an
   associated bidirectional LSP.  When an associated bidirectional LSP
   is co-routed, the reverse LSP follows the same path as its forward
   LSP.  This document updates the fast reroute procedures defined in
   <a href="./rfc4090">RFC 4090</a> to support both single-sided and double-sided provisioned
   associated bidirectional LSPs.  This document also updates the
   procedure for associating two reverse LSPs defined in <a href="./rfc7551">RFC 7551</a> to
   support co-routed bidirectional LSPs.  The fast reroute procedures
   can ensure that, for the co-routed LSPs, traffic flows on co-routed
   paths in the forward and reverse directions after a failure event.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc7841#section-2">SectionÂ 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8537">https://www.rfc-editor.org/info/rfc8537</a>.












<span class="grey">Gandhi, et al.               Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
      <a href="#section-1.1">1.1</a>. Assumptions and Considerations .............................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. Conventions Used in This Document ...............................<a href="#page-4">4</a>
      <a href="#section-2.1">2.1</a>. Key Word Definitions .......................................<a href="#page-4">4</a>
      <a href="#section-2.2">2.2</a>. Terminology ................................................<a href="#page-4">4</a>
           <a href="#section-2.2.1">2.2.1</a>. Forward Unidirectional LSPs .........................<a href="#page-5">5</a>
           <a href="#section-2.2.2">2.2.2</a>. Reverse Co-routed Unidirectional LSPs ...............<a href="#page-5">5</a>
   <a href="#section-3">3</a>. Problem Statement ...............................................<a href="#page-5">5</a>
      <a href="#section-3.1">3.1</a>. Fast Reroute Bypass Tunnel Assignment ......................<a href="#page-6">6</a>
      <a href="#section-3.2">3.2</a>. Node Protection Bypass Tunnels .............................<a href="#page-6">6</a>
      <a href="#section-3.3">3.3</a>. Bidirectional LSP Association at Midpoints .................<a href="#page-7">7</a>
   <a href="#section-4">4</a>. Signaling Procedure .............................................<a href="#page-8">8</a>
      <a href="#section-4.1">4.1</a>. Associated Bidirectional LSP Fast Reroute ..................<a href="#page-8">8</a>
           4.1.1. Restoring Co-routing with Node Protection
                  Bypass Tunnels ......................................<a href="#page-9">9</a>
           <a href="#section-4.1.2">4.1.2</a>. Unidirectional Link Failures .......................<a href="#page-10">10</a>
           <a href="#section-4.1.3">4.1.3</a>. Revertive Behavior after Fast Reroute ..............<a href="#page-10">10</a>
           <a href="#section-4.1.4">4.1.4</a>. Bypass Tunnel Provisioning .........................<a href="#page-10">10</a>
           <a href="#section-4.1.5">4.1.5</a>. One-to-One Bypass Tunnel ...........................<a href="#page-11">11</a>
      <a href="#section-4.2">4.2</a>. Bidirectional LSP Association at Midpoints ................<a href="#page-11">11</a>
   <a href="#section-5">5</a>. Compatibility ..................................................<a href="#page-11">11</a>
   <a href="#section-6">6</a>. Security Considerations ........................................<a href="#page-12">12</a>
   <a href="#section-7">7</a>. IANA Considerations ............................................<a href="#page-12">12</a>
   <a href="#section-8">8</a>. References .....................................................<a href="#page-12">12</a>
      <a href="#section-8.1">8.1</a>. Normative References ......................................<a href="#page-12">12</a>
      <a href="#section-8.2">8.2</a>. Informative References ....................................<a href="#page-13">13</a>
   <a href="#appendix-A">Appendix A</a>.  Extended Association ID ..............................<a href="#page-14">14</a>
   Acknowledgments ...................................................<a href="#page-16">16</a>
   Authors' Addresses ................................................<a href="#page-16">16</a>





<span class="grey">Gandhi, et al.               Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   The Resource Reservation Protocol (RSVP) (Extended) ASSOCIATION
   Object is specified in [<a href="./rfc6780" title='"RSVP ASSOCIATION Object Extensions"'>RFC6780</a>] and can be used generically to
   associate Multiprotocol Label Switching (MPLS) and Generalized MPLS
   (GMPLS) Traffic Engineering (TE) Label Switched Paths (LSPs).
   [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>] defines mechanisms for binding two point-to-point (P2P)
   unidirectional LSPs [<a href="./rfc3209" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>] into an associated bidirectional LSP.
   There are two models described in [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>] for provisioning an
   associated bidirectional LSP: single-sided and double-sided.  In both
   models, the reverse LSP of the bidirectional LSP may or may not be
   co-routed and follow the same path as its forward LSP.

   In some packet transport networks, there are requirements where the
   reverse LSP of a bidirectional LSP needs to follow the same path as
   its forward LSP [<a href="./rfc6373" title='"MPLS Transport Profile (MPLS- TP) Control Plane Framework"'>RFC6373</a>].  The MPLS Transport Profile (MPLS-TP)
   [<a href="./rfc6370" title='"MPLS Transport Profile (MPLS-TP) Identifiers"'>RFC6370</a>] architecture facilitates the co-routed bidirectional LSP by
   using GMPLS extensions [<a href="./rfc3473" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol- Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] to achieve congruent paths.
   However, RSVP association signaling allows enabling co-routed
   bidirectional LSPs without having to deploy GMPLS extensions in the
   existing networks.  The association signaling also allows taking
   advantage of the existing TE and fast reroute mechanisms in the
   network.

   [<a id="ref-RFC4090">RFC4090</a>] defines fast reroute extensions for RSVP-TE LSPs, which are
   also applicable to the associated bidirectional LSPs.  [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>]
   defines fast reroute procedures for GMPLS signaled bidirectional LSPs
   such as coordinating bypass tunnel assignments in the forward and
   reverse directions of the LSP.  The mechanisms defined in [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>]
   are also useful for the fast reroute of associated bidirectional
   LSPs.

   This document updates the fast reroute procedures defined in
   [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] to support both single-sided and double-sided provisioned
   associated bidirectional LSPs.  This document also updates the
   procedure for associating two reverse LSPs defined in [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>] to
   support co-routed bidirectional LSPs.  The fast reroute procedures
   can ensure that for the co-routed LSPs, traffic flows on co-routed
   paths in the forward and reverse directions after fast reroute.












<span class="grey">Gandhi, et al.               Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.1.%20%20Assumptions%20and%20Considerations"></a><a class="selflink" href="#section-1.1" id="section-1.1">1.1</a>.  Assumptions and Considerations</span>

   The following assumptions and considerations apply to this document:

   o  The fast reroute procedure for the unidirectional LSPs is defined
      in [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] and is not modified by this document.

   o  The fast reroute procedure when using unidirectional bypass
      tunnels is defined in [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] and is not modified by this
      document.

   o  This document assumes that the fast reroute bypass tunnels used
      for protected associated bidirectional LSPs are also associated
      bidirectional.

   o  This document assumes that the fast reroute bypass tunnels used
      for protected co-routed associated bidirectional LSPs are also co-
      routed associated bidirectional.

   o  The fast reroute procedure to coordinate the bypass tunnel
      assignment defined in this document may be used for protected
      associated bidirectional LSPs that are not co-routed but requires
      that the downstream Point of Local Repair (PLR) and Merge Point
      (MP) pair of the forward LSP matches the upstream MP and PLR pair
      of the reverse LSP.

   o  Unless otherwise specified in this document, the fast reroute
      procedures defined in [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] are used for associated
      bidirectional LSPs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Conventions Used in This Document</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.%20%20Key%20Word%20Definitions"></a><a class="selflink" href="#section-2.1" id="section-2.1">2.1</a>.  Key Word Definitions</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a> [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="./rfc8174" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.%20%20Terminology"></a><a class="selflink" href="#section-2.2" id="section-2.2">2.2</a>.  Terminology</span>

   The reader is assumed to be familiar with the terminology defined in
   [<a href="./rfc2205" title='"Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification"'>RFC2205</a>], [<a href="./rfc3209" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>], [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>], [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>], and [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>].







<span class="grey">Gandhi, et al.               Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.1.%20%20Forward%20Unidirectional%20LSPs"></a><a class="selflink" href="#section-2.2.1" id="section-2.2.1">2.2.1</a>.  Forward Unidirectional LSPs</span>

   Two reverse unidirectional P2P LSPs are set up in opposite directions
   between a pair of source and destination nodes to form an associated
   bidirectional LSP.  In the case of single-sided provisioned LSP, the
   originating LSP with a REVERSE_LSP Object [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>] is identified as
   a forward unidirectional LSP.  In the case of double-sided
   provisioned LSP, the LSP originating from the higher node address (as
   source) and terminating on the lower node address (as destination) is
   identified as a forward unidirectional LSP.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.2.%20%20Reverse%20Co-routed%20Unidirectional%20LSPs"></a><a class="selflink" href="#section-2.2.2" id="section-2.2.2">2.2.2</a>.  Reverse Co-routed Unidirectional LSPs</span>

   Two reverse unidirectional P2P LSPs are set up in opposite directions
   between a pair of source and destination nodes to form an associated
   bidirectional LSP.  A reverse unidirectional LSP originates on the
   same node where the forward unidirectional LSP terminates, and it
   terminates on the same node where the forward unidirectional LSP
   originates.  A reverse co-routed unidirectional LSP traverses along
   the same path as the forward-direction unidirectional LSP in the
   opposite direction.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Problem%20Statement"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Problem Statement</span>

   As specified in [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>], in the single-sided provisioning case, the
   RSVP-TE tunnel is configured only on one endpoint node of the
   bidirectional LSP.  An LSP for this tunnel is initiated by the
   originating endpoint with the (Extended) ASSOCIATION Object
   containing Association Type set to "Single-Sided Associated
   Bidirectional LSP" and the REVERSE_LSP Object inserted in the RSVP
   Path message.  The remote endpoint then creates the corresponding
   reverse TE tunnel and signals the reverse LSP in response using the
   information from the REVERSE_LSP Object and other objects present in
   the received RSVP Path message.  As specified in [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>], in the
   double-sided provisioning case, the RSVP-TE tunnel is configured on
   both endpoint nodes of the bidirectional LSP.  Both forward and
   reverse LSPs are initiated independently by the two endpoints with
   the (Extended) ASSOCIATION Object containing Association Type set to
   "Double-Sided Associated Bidirectional LSP".  With both single-sided
   and double-sided provisioned bidirectional LSPs, the reverse LSP may
   or may not be congruent (i.e., co-routed) and follow the same path as
   its forward LSP.

   Both single-sided and double-sided associated bidirectional LSPs
   require solutions to the following issues for fast reroute to ensure
   co-routing after a failure event.





<span class="grey">Gandhi, et al.               Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20Fast%20Reroute%20Bypass%20Tunnel%20Assignment"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Fast Reroute Bypass Tunnel Assignment</span>

   In order to ensure that the traffic flows on a co-routed path after a
   link or node failure on the protected co-routed LSP path, the
   midpoint PLR nodes need to assign matching bidirectional bypass
   tunnels for fast reroute.  Such bypass assignment requires
   coordination between the PLR nodes in both the forward and reverse
   directions when more than one bypass tunnel is present on a PLR node.

                      &lt;-- Bypass N --&gt;
                  +-----+         +-----+
                  |  H  +---------+  I  |
                  +--+--+         +--+--+
                     |               |
                     |               |
          LSP1 --&gt;   |   LSP1 --&gt;    |   LSP1 --&gt;       LSP1 --&gt;
   +-----+        +--+--+         +--+--+        +-----+        +-----+
   |  A  +--------+  B  +----X----+  C  +--------+  D  +--------+  E  |
   +-----+        +--+--+         +--+--+        +-----+        +-----+
          &lt;-- LSP2   |    &lt;-- LSP2   |   &lt;-- LSP2       &lt;-- LSP2
                     |               |
                     |               |
                  +--+--+         +--+--+
                  |  F  +---------+  G  |
                  +-----+         +-----+
                      &lt;-- Bypass S --&gt;

              Figure 1: Multiple Bidirectional Bypass Tunnels

   As shown in Figure 1, there are two bypass tunnels available: bypass
   tunnel N (on path B-H-I-C) and bypass tunnel S (on path B-F-G-C).
   The midpoint PLR nodes B and C need to coordinate bypass tunnel
   assignment to ensure that traffic in both directions flows through
   either bypass tunnel N or bypass tunnel S after the link B-C failure.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20Node%20Protection%20Bypass%20Tunnels"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  Node Protection Bypass Tunnels</span>

   When using a node protection bypass tunnel with a protected
   associated bidirectional LSP, after a link failure, the forward and
   reverse LSP traffic can flow on different node protection bypass
   tunnels in the upstream and downstream directions.










<span class="grey">Gandhi, et al.               Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


              &lt;-- Bypass N --&gt;
   +-----+                        +-----+
   |  H  +------------------------+  I  |
   +--+--+                        +--+--+
      |      &lt;-- Rerouted-LSP2       |
      |                              |
      |                              |
      |   LSP1 --&gt;       LSP1 --&gt;    |   LSP1 --&gt;       LSP1 --&gt;
   +--+--+        +-----+         +--+--+        +-----+        +-----+
   |  A  +--------+  B  +----X----+  C  +--------+  D  +--------+  E  |
   +-----+        +--+--+         +-----+        +--+--+        +-----+
          &lt;-- LSP2   |    &lt;-- LSP2       &lt;-- LSP2   |   &lt;-- LSP2
                     |                              |
                     |                              |
                     |       Rerouted-LSP1 --&gt;      |
                  +--+--+                        +--+--+
                  |  F  +------------------------+  G  |
                  +-----+                        +-----+
                             &lt;-- Bypass S --&gt;

                 Figure 2: Node Protection Bypass Tunnels

   As shown in Figure 2, after the link B-C failure, the downstream PLR
   node B reroutes the protected forward LSP1 traffic over bypass tunnel
   S (on path B-F-G-D) to reach downstream MP node D, whereas the
   upstream PLR node C reroutes the protected reverse LSP2 traffic over
   bypass tunnel N (on path C-I-H-A) to reach the upstream MP node A.
   As a result, the traffic in the forward and reverse directions flows
   on different bypass tunnels, which can cause the co-routed associated
   bidirectional LSP to be no longer co-routed.  However, unlike GMPLS
   LSPs, the asymmetry of paths in the forward and reverse directions
   does not result in RSVP soft-state timeout with the associated
   bidirectional LSPs.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.3.%20%20Bidirectional%20LSP%20Association%20at%20Midpoints"></a><a class="selflink" href="#section-3.3" id="section-3.3">3.3</a>.  Bidirectional LSP Association at Midpoints</span>

   In packet transport networks, a restoration LSP is signaled after a
   link failure on the protected LSP path, and the protected LSP may or
   may not be torn down [<a href="./rfc8131" title='"RSVP-TE Signaling Procedure for End-to-End GMPLS Restoration and Resource Sharing"'>RFC8131</a>].  In this case, multiple forward and
   reverse LSPs of a co-routed associated bidirectional LSP may be
   present at midpoint nodes with identical (Extended) ASSOCIATION
   Objects.  This creates an ambiguity at midpoint nodes to identify the
   correct associated LSP pair for fast reroute bypass assignment (e.g.,
   during the recovery phase of the RSVP graceful restart procedure).







<span class="grey">Gandhi, et al.               Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


          LSP3 --&gt;                       LSP3 --&gt;       LSP3 --&gt;
          LSP1 --&gt;       LSP1 --&gt;        LSP1 --&gt;       LSP1 --&gt;
   +-----+        +-----+         +-----+        +-----+        +-----+
   |  A  +--------+  B  +----X----+  C  +--------+  D  +--------+  E  |
   +-----+        +--+--+         +--+--+        +-----+        +-----+
          &lt;-- LSP2   |    &lt;-- LSP2   |   &lt;-- LSP2       &lt;-- LSP2
          &lt;-- LSP4   |               |   &lt;-- LSP4       &lt;-- LSP4
                     |               |
                     |   LSP3 --&gt;    |
                  +--+--+         +--+--+
                  |  F  +---------+  G  |
                  +-----+         +-----+
                      &lt;-- Bypass S --&gt;
                          &lt;-- LSP4

            Figure 3: Restoration LSP Setup after Link Failure

   As shown in Figure 3, the protected LSPs (LSP1 and LSP2) are an
   associated LSP pair; similarly, the restoration LSPs (LSP3 and LSP4)
   are an associated LSP pair.  Both pairs belong to the same associated
   bidirectional LSP and carry identical (Extended) ASSOCIATION Objects.
   In this example, the midpoint node D may mistakenly associate LSP1
   with the reverse LSP4 instead of the reverse LSP2 due to the matching
   (Extended) ASSOCIATION Objects.  This may cause the co-routed
   associated bidirectional LSP to be no longer co-routed after fast
   reroute.  Since the bypass assignment needs to be coordinated between
   the forward and reverse LSPs, this can also lead to undesired bypass
   tunnel assignments.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Signaling%20Procedure"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Signaling Procedure</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Associated%20Bidirectional%20LSP%20Fast%20Reroute"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Associated Bidirectional LSP Fast Reroute</span>

   For both single-sided and double-sided associated bidirectional LSPs,
   the fast reroute procedure specified in [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] is used.  In
   addition, the mechanisms defined in [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>] are used as follows:

   o  The BYPASS_ASSIGNMENT IPv4 subobject (value 38) and IPv6 subobject
      (value 39) defined in [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>] are used to coordinate bypass
      tunnel assignment between the PLR nodes in both the forward and
      reverse directions (see Figure 1).  The BYPASS_ASSIGNMENT and
      Node-ID address [<a href="./rfc4561" title='"Definition of a Record Route Object (RRO) Node-Id Sub-Object"'>RFC4561</a>] subobjects MUST be added by the
      downstream PLR node in the RECORD_ROUTE Object (RRO) of the RSVP
      Path message of the forward LSP to indicate the local bypass
      tunnel assignment using the procedure defined in [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>].  The
      upstream node uses the bypass assignment information (namely,
      bypass tunnel source address, destination address, and Tunnel ID)
      in the received RSVP Path message of the protected forward LSP to



<span class="grey">Gandhi, et al.               Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


      find the associated bypass tunnel in the reverse direction.  The
      upstream PLR node MUST NOT add the BYPASS_ASSIGNMENT subobject in
      the RRO of the RSVP Path message of the reverse LSP.

   o  The downstream PLR node initiates the bypass tunnel assignment for
      the forward LSP.  The upstream PLR (forward-direction LSP MP) node
      reflects the associated bypass tunnel assignment for the reverse-
      direction LSP.  The upstream PLR node MUST NOT initiate the bypass
      tunnel assignment.

   o  If the indicated forward bypass tunnel or the associated reverse
      bypass tunnel is not found, the upstream PLR SHOULD send a Notify
      message [<a href="./rfc3473" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol- Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] with Error Code "FRR Bypass Assignment Error"
      (value 44) and Sub-code "Bypass Tunnel Not Found" (value 1)
      [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>] to the downstream PLR.

   o  If the bypass tunnel cannot be used as described in <a href="./rfc8271#section-4.5.3">SectionÂ 4.5.3
      of [RFC8271]</a>, the upstream PLR SHOULD send a Notify message
      [<a href="./rfc3473" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol- Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>] with Error Code "FRR Bypass Assignment Error" (value 44)
      and Sub-code "Bypass Assignment Cannot Be Used" (value 0)
      [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>] to the downstream PLR.

   o  After a link or node failure, the PLR nodes in both forward and
      reverse directions trigger fast reroute independently using the
      procedures defined in [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] and send the forward and protected
      reverse LSP modified RSVP Path messages and traffic over the
      bypass tunnel.  The RSVP Resv signaling of the protected forward
      and reverse LSPs follows the same procedure as defined in
      [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] and is not modified by this document.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.1.%20%20Restoring%20Co-routing%20with%20Node%20Protection%20Bypass%20Tunnels"></a><a class="selflink" href="#section-4.1.1" id="section-4.1.1">4.1.1</a>.  Restoring Co-routing with Node Protection Bypass Tunnels</span>

   After fast reroute, the downstream MP node assumes the role of
   upstream PLR and reroutes the reverse LSP RSVP Path messages and
   traffic over the bypass tunnel on which the forward LSP RSVP Path
   messages and traffic are received.  This procedure is defined as
   "restoring co-routing" in [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>].  This procedure is used to
   ensure that both forward and reverse LSP signaling and traffic flow
   on the same bidirectional bypass tunnel after fast reroute.

   As shown in Figure 2, when using a node protection bypass tunnel with
   protected co-routed LSPs, asymmetry of paths can occur in the forward
   and reverse directions after a link failure [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>].  In order to
   restore co-routing, the downstream MP node D (acting as an upstream
   PLR) MUST trigger the procedure to restore co-routing and reroute the
   protected reverse LSP2 RSVP Path messages and traffic over the bypass
   tunnel S (on path D-G-F-B) to the upstream MP node B upon receiving
   the protected forward LSP modified RSVP Path messages and traffic



<span class="grey">Gandhi, et al.               Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


   over the bypass tunnel S (on path D-G-F-B) from node B.  The upstream
   PLR node C stops receiving the RSVP Path messages and traffic for the
   reverse LSP2 from node D (resulting in RSVP soft-state timeout), and
   it stops sending the RSVP Path messages for the reverse LSP2 over the
   bypass tunnel N (on path C-I-H-A) to node A.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.2.%20%20Unidirectional%20Link%20Failures"></a><a class="selflink" href="#section-4.1.2" id="section-4.1.2">4.1.2</a>.  Unidirectional Link Failures</span>

   The unidirectional link failures can cause co-routed associated
   bidirectional LSPs to be no longer co-routed after fast reroute with
   both link protection and node protection bypass tunnels.  However,
   the unidirectional link failures in the upstream and/or downstream
   directions do not result in RSVP soft-state timeout with the
   associated bidirectional LSPs as upstream and downstream PLRs trigger
   fast reroute independently.  The asymmetry of forward and reverse LSP
   paths due to the unidirectional link failure in the downstream
   direction can be corrected by using the procedure to restore co-
   routing specified in <a href="#section-4.1.1">Section 4.1.1</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.3.%20%20Revertive%20Behavior%20after%20Fast%20Reroute"></a><a class="selflink" href="#section-4.1.3" id="section-4.1.3">4.1.3</a>.  Revertive Behavior after Fast Reroute</span>

   When the revertive behavior is desired for a protected LSP after the
   link is restored, the procedure defined in <a href="./rfc4090#section-6.5.2">SectionÂ 6.5.2 of [RFC4090]</a>
   is followed.

   o  The downstream PLR node starts sending the RSVP Path messages and
      traffic flow of the protected forward LSP over the restored link
      and stops sending them over the bypass tunnel [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>].

   o  The upstream PLR node (when the protected LSP is present) also
      starts sending the RSVP Path messages and traffic flow of the
      protected reverse LSPs over the restored link and stops sending
      them over the bypass tunnel [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>].

   o  For node protection bypass tunnels (see Figure 2), after restoring
      co-routing, the upstream PLR node D SHOULD start sending RSVP Path
      messages and traffic for the reverse LSP over the original link
      (C-D) when it receives the unmodified RSVP Path messages and
      traffic for the protected forward LSP over it and stops sending
      them over the bypass tunnel S (on path D-G-F-B).

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.4.%20%20Bypass%20Tunnel%20Provisioning"></a><a class="selflink" href="#section-4.1.4" id="section-4.1.4">4.1.4</a>.  Bypass Tunnel Provisioning</span>

   Fast reroute bidirectional bypass tunnels can be single-sided or
   double-sided associated tunnels.  For both single-sided and double-
   sided associated bypass tunnels, the fast reroute assignment policies
   need to be configured on the downstream PLR nodes of the protected




<span class="grey">Gandhi, et al.               Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


   LSPs that initiate the bypass tunnel assignments.  For single-sided
   associated bypass tunnels, these nodes are the originating endpoints
   of their signaling.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.5.%20%20One-to-One%20Bypass%20Tunnel"></a><a class="selflink" href="#section-4.1.5" id="section-4.1.5">4.1.5</a>.  One-to-One Bypass Tunnel</span>

   The fast reroute signaling procedure defined in this document can be
   used for both facility backup described in <a href="./rfc4090#section-3.2">SectionÂ 3.2 of [RFC4090]</a>
   and one-to-one backup described in <a href="./rfc4090#section-3.1">SectionÂ 3.1 of [RFC4090]</a>.  As
   described in <a href="./rfc8271#section-4.5.2">SectionÂ 4.5.2 of [RFC8271]</a>, in the one-to-one backup
   method, if the associated bidirectional bypass tunnel is already in
   use at the upstream PLR, it SHOULD send a Notify message [<a href="./rfc3473" title='"Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol- Traffic Engineering (RSVP-TE) Extensions"'>RFC3473</a>]
   with Error Code "FRR Bypass Assignment Error" (value 44) and Sub-code
   "One-to-One Bypass Already in Use" (value 2) to the downstream PLR.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.2.%20%20Bidirectional%20LSP%20Association%20at%20Midpoints"></a><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Bidirectional LSP Association at Midpoints</span>

   In order to associate the LSPs unambiguously at a midpoint node (see
   Figure 3), the endpoint node MUST signal the Extended ASSOCIATION
   Object and add a unique Extended Association ID for each associated
   forward and reverse LSP pair forming the bidirectional LSP.  An
   endpoint node MAY set the Extended Association ID to the value
   formatted according to the structure shown in <a href="#appendix-A">Appendix A</a>.

   o  For single-sided provisioned bidirectional LSPs [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>], the
      originating endpoint signals the Extended ASSOCIATION Object with
      a unique Extended Association ID.  The remote endpoint copies the
      contents of the received Extended ASSOCIATION Object including the
      Extended Association ID in the RSVP Path message of the reverse
      LSP's Extended ASSOCIATION Object.

   o  For double-sided provisioned bidirectional LSPs [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>], both
      endpoints need to ensure that the bidirectional LSP has a unique
      Extended ASSOCIATION Object for each forward and reverse LSP pair
      by selecting appropriate unique Extended Association IDs signaled
      by them.  A controller can be used to provision a unique Extended
      Association ID on both endpoints.  The procedure for selecting
      unique Extended Association IDs is outside the scope of this
      document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Compatibility"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Compatibility</span>

   This document updates the procedures for fast reroute for associated
   bidirectional LSPs defined in [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>] and the procedures for
   associating bidirectional LSPs defined in [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>].  The procedures
   use the signaling messages defined in [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>]; no new signaling
   messages are defined in this document.  The procedures ensure that
   for the co-routed LSPs, traffic flows on co-routed paths in the



<span class="grey">Gandhi, et al.               Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


   forward and reverse directions after fast reroute.  Operators wishing
   to use this function SHOULD ensure that it is supported on all the
   nodes on the LSP path.  The nodes not supporting this function can
   cause the traffic to flow on asymmetric paths in the forward and
   reverse directions of the associated bidirectional LSPs after fast
   reroute.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Security Considerations</span>

   This document updates the signaling mechanisms defined in [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>]
   and [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>].  It does not introduce any additional security
   considerations other than those already covered in [<a href="./rfc4090" title='"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"'>RFC4090</a>],
   [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>], [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>], and the MPLS/GMPLS security framework
   [<a href="./rfc5920" title='"Security Framework for MPLS and GMPLS Networks"'>RFC5920</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  IANA Considerations</span>

   This document has no IANA actions.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20References"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.1.%20%20Normative%20References"></a><a class="selflink" href="#section-8.1" id="section-8.1">8.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC2205">RFC2205</a>]  Braden, R., Ed., Zhang, L., Berson, S., Herzog, S., and S.
              Jamin, "Resource ReSerVation Protocol (RSVP) -- Version 1
              Functional Specification", <a href="./rfc2205">RFC 2205</a>, DOI 10.17487/RFC2205,
              September 1997, &lt;<a href="https://www.rfc-editor.org/info/rfc2205">https://www.rfc-editor.org/info/rfc2205</a>&gt;.

   [<a id="ref-RFC4090">RFC4090</a>]  Pan, P., Ed., Swallow, G., Ed., and A. Atlas, Ed., "Fast
              Reroute Extensions to RSVP-TE for LSP Tunnels", <a href="./rfc4090">RFC 4090</a>,
              DOI 10.17487/RFC4090, May 2005,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4090">https://www.rfc-editor.org/info/rfc4090</a>&gt;.

   [<a id="ref-RFC4561">RFC4561</a>]  Vasseur, J., Ed., Ali, Z., and S. Sivabalan, "Definition
              of a Record Route Object (RRO) Node-Id Sub-Object",
              <a href="./rfc4561">RFC 4561</a>, DOI 10.17487/RFC4561, June 2006,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4561">https://www.rfc-editor.org/info/rfc4561</a>&gt;.

   [<a id="ref-RFC6780">RFC6780</a>]  Berger, L., Le Faucheur, F., and A. Narayanan, "RSVP
              ASSOCIATION Object Extensions", <a href="./rfc6780">RFC 6780</a>,
              DOI 10.17487/RFC6780, October 2012,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6780">https://www.rfc-editor.org/info/rfc6780</a>&gt;.




<span class="grey">Gandhi, et al.               Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


   [<a id="ref-RFC7551">RFC7551</a>]  Zhang, F., Ed., Jing, R., and R. Gandhi, Ed., "RSVP-TE
              Extensions for Associated Bidirectional Label Switched
              Paths (LSPs)", <a href="./rfc7551">RFC 7551</a>, DOI 10.17487/RFC7551, May 2015,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7551">https://www.rfc-editor.org/info/rfc7551</a>&gt;.

   [<a id="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="./rfc2119">RFC</a>
              <a href="./rfc2119">2119</a> Key Words", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc8174">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a id="ref-RFC8271">RFC8271</a>]  Taillon, M., Saad, T., Ed., Gandhi, R., Ed., Ali, Z., and
              M. Bhatia, "Updates to the Resource Reservation Protocol
              for Fast Reroute of Traffic Engineering GMPLS Label
              Switched Paths (LSPs)", <a href="./rfc8271">RFC 8271</a>, DOI 10.17487/RFC8271,
              October 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8271">https://www.rfc-editor.org/info/rfc8271</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.2.%20%20Informative%20References"></a><a class="selflink" href="#section-8.2" id="section-8.2">8.2</a>.  Informative References</span>

   [<a id="ref-RFC3209">RFC3209</a>]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", <a href="./rfc3209">RFC 3209</a>, DOI 10.17487/RFC3209, December 2001,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3209">https://www.rfc-editor.org/info/rfc3209</a>&gt;.

   [<a id="ref-RFC3473">RFC3473</a>]  Berger, L., Ed., "Generalized Multi-Protocol Label
              Switching (GMPLS) Signaling Resource ReserVation Protocol-
              Traffic Engineering (RSVP-TE) Extensions", <a href="./rfc3473">RFC 3473</a>,
              DOI 10.17487/RFC3473, January 2003,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3473">https://www.rfc-editor.org/info/rfc3473</a>&gt;.

   [<a id="ref-RFC5920">RFC5920</a>]  Fang, L., Ed., "Security Framework for MPLS and GMPLS
              Networks", <a href="./rfc5920">RFC 5920</a>, DOI 10.17487/RFC5920, July 2010,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5920">https://www.rfc-editor.org/info/rfc5920</a>&gt;.

   [<a id="ref-RFC6370">RFC6370</a>]  Bocci, M., Swallow, G., and E. Gray, "MPLS Transport
              Profile (MPLS-TP) Identifiers", <a href="./rfc6370">RFC 6370</a>,
              DOI 10.17487/RFC6370, September 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6370">https://www.rfc-editor.org/info/rfc6370</a>&gt;.

   [<a id="ref-RFC6373">RFC6373</a>]  Andersson, L., Ed., Berger, L., Ed., Fang, L., Ed., Bitar,
              N., Ed., and E. Gray, Ed., "MPLS Transport Profile (MPLS-
              TP) Control Plane Framework", <a href="./rfc6373">RFC 6373</a>,
              DOI 10.17487/RFC6373, September 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6373">https://www.rfc-editor.org/info/rfc6373</a>&gt;.

   [<a id="ref-RFC8131">RFC8131</a>]  Zhang, X., Zheng, H., Ed., Gandhi, R., Ed., Ali, Z., and
              P. Brzozowski, "RSVP-TE Signaling Procedure for End-to-End
              GMPLS Restoration and Resource Sharing", <a href="./rfc8131">RFC 8131</a>,
              DOI 10.17487/RFC8131, March 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8131">https://www.rfc-editor.org/info/rfc8131</a>&gt;.



<span class="grey">Gandhi, et al.               Standards Track                   [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20A.%20%20Extended%20Association%20ID"></a><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  Extended Association ID</span>

   The Extended Association ID in the Extended ASSOCIATION Object
   [<a href="./rfc6780" title='"RSVP ASSOCIATION Object Extensions"'>RFC6780</a>] can be set to the value formatted according to the
   structure shown in the following example to uniquely identify
   associated forward and reverse LSP pairs of an associated
   bidirectional LSP.

   An example of the IPv4 Extended Association ID format is shown below:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                    IPv4 LSP Source Address                    |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |           Reserved            |            LSP ID             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     :                                                               :
     :                      Variable Length ID                       :
     :                                                               :
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

           Figure 4: IPv4 Extended Association ID Format Example

   IPv4 LSP Source Address

      IPv4 source address of the forward LSP [<a href="./rfc3209" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>].

   LSP ID

      16-bit LSP ID of the forward LSP [<a href="./rfc3209" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>].

   Variable Length ID

      Variable length Extended Association ID [<a href="./rfc6780" title='"RSVP ASSOCIATION Object Extensions"'>RFC6780</a>] inserted by the
      endpoint node of the associated bidirectional LSP [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>].















<span class="grey">Gandhi, et al.               Standards Track                   [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


   An example of the IPv6 Extended Association ID format is shown below:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     +                                                               +
     |                    IPv6 LSP Source Address                    |
     +                                                               +
     |                          (16 bytes)                           |
     +                                                               +
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |           Reserved            |            LSP ID             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     :                                                               :
     :                      Variable Length ID                       :
     :                                                               :
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

           Figure 5: IPv6 Extended Association ID Format Example

   LSP Source Address

      IPv6 source address of the forward LSP [<a href="./rfc3209" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>].

   LSP ID

      16-bit LSP ID of the forward LSP [<a href="./rfc3209" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>].

   Variable Length ID

      Variable length Extended Association ID [<a href="./rfc6780" title='"RSVP ASSOCIATION Object Extensions"'>RFC6780</a>] inserted by the
      endpoint node of the associated bidirectional LSP [<a href="./rfc7551" title='"RSVP-TE Extensions for Associated Bidirectional Label Switched Paths (LSPs)"'>RFC7551</a>].

   In both IPv4 and IPv6 examples, the Reserved flags MUST be set to 0
   on transmission.














<span class="grey">Gandhi, et al.               Standards Track                   [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc8537">RFC 8537</a>        Associated Bidirectional LSP Fast Reroute  February 2019</span>


Acknowledgments

   A special thanks to the authors of [<a href="./rfc8271" title='"Updates to the Resource Reservation Protocol for Fast Reroute of Traffic Engineering GMPLS Label Switched Paths (LSPs)"'>RFC8271</a>]; this document uses the
   signaling mechanisms defined in that document.  The authors would
   also like to thank Vishnu Pavan Beeram, Daniele Ceccarelli, Deborah
   Brungard, Adam Roach, and Benjamin Kaduk for reviewing this document
   and providing valuable comments.

Authors' Addresses

   Rakesh Gandhi (editor)
   Cisco Systems, Inc.
   Canada

   Email: rgandhi@cisco.com


   Himanshu Shah
   Ciena

   Email: hshah@ciena.com


   Jeremy Whittaker
   Verizon

   Email: jeremy.whittaker@verizon.com
























Gandhi, et al.               Standards Track                   [Page 16]
</pre>
</body></html>