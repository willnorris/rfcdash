<html><head></head><body><pre>Internet Engineering Task Force (IETF)                      K. Murchison
Request for Comments: 8144                                           CMU
Updates: <a href="./rfc7240">7240</a>                                                 April 2017
Category: Standards Track
ISSN: 2070-1721


                   <span class="h1">Use of the Prefer Header Field in</span>
           <span class="h1">Web Distributed Authoring and Versioning (WebDAV)</span>

Abstract

   This document defines how the Prefer header field (<a href="./rfc7240">RFC 7240</a>) can be
   used by a Web Distributed Authoring and Versioning (WebDAV) client to
   request that certain behaviors be employed by a server while
   constructing a response to a request.  Furthermore, it defines the
   new "depth-noroot" preference.

   This document updates <a href="./rfc7240">RFC 7240</a>.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc7841#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc8144">http://www.rfc-editor.org/info/rfc8144</a>.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



<span class="grey">Murchison                    Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
      <a href="#section-1.1">1.1</a>. Notational Conventions .....................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Reducing WebDAV Response Verbosity with "return=minimal" ........<a href="#page-3">3</a>
      <a href="#section-2.1">2.1</a>. Minimal PROPFIND and REPORT Responses ......................<a href="#page-4">4</a>
      <a href="#section-2.2">2.2</a>. Minimal PROPPATCH Response .................................<a href="#page-5">5</a>
      <a href="#section-2.3">2.3</a>. Minimal MKCALENDAR and MKCOL Responses .....................<a href="#page-5">5</a>
   <a href="#section-3">3</a>. Reducing WebDAV Roundtrips with "return=representation" .........<a href="#page-6">6</a>
      <a href="#section-3.1">3.1</a>. Successful State-Changing Requests .........................<a href="#page-6">6</a>
      <a href="#section-3.2">3.2</a>. Unsuccessful Conditional State-Changing Requests ...........<a href="#page-6">6</a>
   <a href="#section-4">4</a>. The "depth-noroot" Processing Preference ........................<a href="#page-7">7</a>
   <a href="#section-5">5</a>. Security Considerations .........................................<a href="#page-7">7</a>
   <a href="#section-6">6</a>. IANA Considerations .............................................<a href="#page-8">8</a>
      <a href="#section-6.1">6.1</a>. Preference Registration ....................................<a href="#page-8">8</a>
      <a href="#section-6.2">6.2</a>. Method References ..........................................<a href="#page-8">8</a>
      <a href="#section-6.3">6.3</a>. Status Code References .....................................<a href="#page-9">9</a>
   <a href="#section-7">7</a>. References ......................................................<a href="#page-9">9</a>
      <a href="#section-7.1">7.1</a>. Normative References .......................................<a href="#page-9">9</a>
      <a href="#section-7.2">7.2</a>. Informative References ....................................<a href="#page-10">10</a>
   <a href="#appendix-A">Appendix A</a>.  The Brief and Extended Depth Header Fields ...........<a href="#page-12">12</a>
   <a href="#appendix-B">Appendix B</a>.  Examples .............................................<a href="#page-12">12</a>
     <a href="#appendix-B.1">B.1</a>.  PROPFIND ..................................................<a href="#page-12">12</a>
     <a href="#appendix-B.2">B.2</a>.  REPORT ....................................................<a href="#page-16">16</a>
     <a href="#appendix-B.3">B.3</a>.  PROPPATCH .................................................<a href="#page-21">21</a>
     <a href="#appendix-B.4">B.4</a>.  MKCOL .....................................................<a href="#page-22">22</a>
     <a href="#appendix-B.5">B.5</a>.  POST ......................................................<a href="#page-23">23</a>
     <a href="#appendix-B.6">B.6</a>.  PUT .......................................................<a href="#page-27">27</a>
   Acknowledgements ..................................................<a href="#page-28">28</a>
   Author's Address ..................................................<a href="#page-28">28</a>





















<span class="grey">Murchison                    Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   [<a id="ref-RFC7240">RFC7240</a>] defines the Prefer header field and the "return=minimal"
   preference, which indicate that a client wishes for the server to
   return a minimal response to a successful request but states that
   what constitutes an appropriate minimal response is left solely to
   the discretion of the server.  <a href="#section-2">Section 2</a> of this specification
   defines precisely what is expected of a server when constructing
   minimal responses to successful WebDAV [<a href="./rfc4918" title='"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"'>RFC4918</a>] requests.

   [<a id="ref-RFC7240">RFC7240</a>] also defines the "return=representation" preference, which
   indicates that a client wishes for the server to include an entity
   representing the current state of the resource in the response to a
   successful request.  <a href="#section-3">Section 3</a> of this specification makes
   recommendations on when this preference should be used by clients and
   extends its applicability to 412 (Precondition Failed) [<a href="./rfc7232" title='"Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests"'>RFC7232</a>]
   responses.

   Finally, <a href="#section-4">Section 4</a> of this specification defines the "depth-noroot"
   preference that can be used with HTTP methods that support the Depth
   header field.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.1.%20%20Notational%20Conventions"></a><a class="selflink" href="#section-1.1" id="section-1.1">1.1</a>.  Notational Conventions</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   This document references XML element types in the "DAV:" [<a href="./rfc4918" title='"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"'>RFC4918</a>],
   "urn:ietf:params:xml:ns:caldav" [<a href="./rfc4791" title='"Calendaring Extensions to WebDAV (CalDAV)"'>RFC4791</a>], and
   "urn:ietf:params:xml:ns:carddav" [<a href="./rfc6352" title='"CardDAV: vCard Extensions to Web Distributed Authoring and Versioning (WebDAV)"'>RFC6352</a>] namespaces outside of the
   context of an XML fragment.  When doing so, the strings "DAV:",
   "CALDAV:", and "CARDDAV:" will be prepended to the XML element types,
   respectively.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Reducing%20WebDAV%20Response%20Verbosity%20with%20%22return%3Dminimal%22"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Reducing WebDAV Response Verbosity with "return=minimal"</span>

   Some payload bodies in responses to WebDAV requests, such as 207
   (Multi-Status) [<a href="./rfc4918" title='"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"'>RFC4918</a>] responses, can be quite verbose or even
   unnecessary at times.  This specification defines how the Prefer
   header field, in conjunction with its "return=minimal" preference,
   can be used by clients to reduce the verbosity of such responses by
   requesting that the server omit those portions of the response that
   can be inferred by their absence.







<span class="grey">Murchison                    Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.%20%20Minimal%20PROPFIND%20and%20REPORT%20Responses"></a><a class="selflink" href="#section-2.1" id="section-2.1">2.1</a>.  Minimal PROPFIND and REPORT Responses</span>

   When a PROPFIND [<a href="./rfc4918" title='"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"'>RFC4918</a>] request, or a REPORT [<a href="./rfc3253" title='"Versioning Extensions to WebDAV (Web Distributed Authoring and Versioning)"'>RFC3253</a>] request
   whose report type results in a 207 (Multi-Status) response, contains
   a Prefer header field with a preference of "return=minimal", the
   server SHOULD omit all DAV:propstat XML elements containing a
   DAV:status XML element of value 404 (Not Found) [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>] from the
   207 (Multi-Status) response.  If the omission of such a DAV:propstat
   element would result in a DAV:response XML element containing zero
   DAV:propstat elements, the server MUST substitute one of the
   following in its place:

   o  a DAV:propstat element consisting of an empty DAV:prop element and
      a DAV:status element of value 200 (OK) [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>]

   o  a DAV:status element of value 200 (OK)

   The following report types are candidates that could benefit from use
   of the "return=minimal" preference.  NOTE: This list is not intended
   to be normative or exhaustive.

   o  DAV:expand-property [<a href="./rfc3253" title='"Versioning Extensions to WebDAV (Web Distributed Authoring and Versioning)"'>RFC3253</a>]

   o  DAV:acl-principal-prop-set [<a href="./rfc3744" title='"Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol"'>RFC3744</a>]

   o  DAV:principal-property-search [<a href="./rfc3744" title='"Web Distributed Authoring and Versioning (WebDAV) Access Control Protocol"'>RFC3744</a>]

   o  DAV:sync-collection [<a href="./rfc6578" title='"Collection Synchronization for Web Distributed Authoring and Versioning (WebDAV)"'>RFC6578</a>]

   o  CALDAV:calendar-query [<a href="./rfc4791" title='"Calendaring Extensions to WebDAV (CalDAV)"'>RFC4791</a>]

   o  CALDAV:calendar-multiget [<a href="./rfc4791" title='"Calendaring Extensions to WebDAV (CalDAV)"'>RFC4791</a>]

   o  CARDDAV:addressbook-query [<a href="./rfc6352" title='"CardDAV: vCard Extensions to Web Distributed Authoring and Versioning (WebDAV)"'>RFC6352</a>]

   o  CARDDAV:addressbook-multiget [<a href="./rfc6352" title='"CardDAV: vCard Extensions to Web Distributed Authoring and Versioning (WebDAV)"'>RFC6352</a>]

   See Appendices B.1 and B.2 for examples.













<span class="grey">Murchison                    Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.%20%20Minimal%20PROPPATCH%20Response"></a><a class="selflink" href="#section-2.2" id="section-2.2">2.2</a>.  Minimal PROPPATCH Response</span>

   When a PROPPATCH [<a href="./rfc4918" title='"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"'>RFC4918</a>] request contains a Prefer header field
   with a preference of "return=minimal", and all instructions are
   processed successfully, the server SHOULD return one of the following
   responses rather than a 207 (Multi-Status) response:

   o  204 (No Content) [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>]

   o  200 (OK) [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>] (preferably with a zero-length message body)

   See <a href="#appendix-B.3">Appendix B.3</a> for examples.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.3.%20%20Minimal%20MKCALENDAR%20and%20MKCOL%20Responses"></a><a class="selflink" href="#section-2.3" id="section-2.3">2.3</a>.  Minimal MKCALENDAR and MKCOL Responses</span>

   Both the MKCALENDAR [<a href="./rfc4791" title='"Calendaring Extensions to WebDAV (CalDAV)"'>RFC4791</a>] and Extended MKCOL [<a href="./rfc5689" title='"Extended MKCOL for Web Distributed Authoring and Versioning (WebDAV)"'>RFC5689</a>]
   specifications indicate that a server MAY return a message body in
   response to a successful request.  This specification explicitly
   defines the intended behavior in the presence of the Prefer header
   field.

   When a MKCALENDAR or an extended MKCOL request contains a Prefer
   header field with a preference of "return=minimal", and the
   collection is created with all requested properties being set
   successfully, the server SHOULD return a 201 (Created) [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>]
   response with an empty (zero-length) message body.

   Note that the rationale for requiring that a minimal success response
   have an empty body is twofold:

   o  <a href="./rfc4791#section-5.3.1">[RFC4791], Section 5.3.1</a> states: "If a response body for a
      successful request is included, it MUST be a CALDAV:mkcalendar-
      response XML element."

   o  <a href="./rfc5689#section-3">[RFC5689], Section 3</a> states: "When an empty response body is
      returned with a success request status code, the client can assume
      that all properties were set."

   See <a href="#appendix-B.4">Appendix B.4</a> for examples.












<span class="grey">Murchison                    Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Reducing%20WebDAV%20Roundtrips%20with%20%22return%3Drepresentation%22"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Reducing WebDAV Roundtrips with "return=representation"</span>

   [<a id="ref-RFC7240">RFC7240</a>] describes the "return=representation" preference as being
   intended to provide a means of optimizing communication between the
   client and server by eliminating the need for a subsequent GET
   request to retrieve the current representation of the resource
   following a modification.  This preference is equally applicable to
   situations where the server itself modifies a resource, and where a
   resource has been modified by another client.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20Successful%20State-Changing%20Requests"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Successful State-Changing Requests</span>

   The state-changing methods PUT [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>], COPY/MOVE [<a href="./rfc4918" title='"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"'>RFC4918</a>], PATCH
   [<a href="./rfc5789" title='"PATCH Method for HTTP"'>RFC5789</a>], and POST [<a href="./rfc5995" title='"Using POST to Add Members to Web Distributed Authoring and Versioning (WebDAV) Collections"'>RFC5995</a>] can be used to create or update a
   resource.  In some instances, such as with Calendaring Extensions to
   WebDAV (CalDAV) Scheduling [<a href="./rfc6638" title='"Scheduling Extensions to CalDAV"'>RFC6638</a>], the created or updated resource
   representation may differ from the representation sent in the body of
   the request or from that referenced by the effective request URI.  In
   cases where the client, upon receiving a 2xx (Successful) [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>]
   response to its state-changing request, would normally issue a
   subsequent GET request to retrieve the current representation of the
   resource, the client can instead include a Prefer header field with
   the "return=representation" preference in the state-changing request.

   When a state-changing request contains a Prefer header field with a
   preference of "return=representation", and the resource is created or
   updated successfully, the server SHOULD include an entity
   representing the current state of the resource in the resulting 201
   (Created) or 200 (OK) [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>] response.  In addition to coalescing
   the create/update and retrieve operations into a single roundtrip, by
   returning the current representation of the resource in the response,
   the client will know that any changes to the resource were produced
   by the server rather than a concurrent client, thus providing a level
   of atomicity to the operation.

   See <a href="#appendix-B.5">Appendix B.5</a> for examples.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20Unsuccessful%20Conditional%20State-Changing%20Requests"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  Unsuccessful Conditional State-Changing Requests</span>

   Frequently, clients using a state-changing method such as those
   listed above will make them conditional by including either an
   If-Match or an If-None-Match [<a href="./rfc7232" title='"Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests"'>RFC7232</a>] header field in the request.
   This is done to prevent the client from accidentally overwriting a
   resource whose current state has been modified by another client
   acting in parallel.  In cases where the client, upon receiving a 412
   (Precondition Failed) [<a href="./rfc7232" title='"Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests"'>RFC7232</a>] response to its conditional state-
   changing request, would normally issue a subsequent GET request to
   retrieve the current representation of the resource, the client can



<span class="grey">Murchison                    Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   instead include a Prefer header field with the
   "return=representation" preference in the conditional state-changing
   request.

   When a conditional state-changing request contains a Prefer header
   field with a preference of "return=representation", and the specified
   condition evaluates to false, the server SHOULD include an entity
   representing the current state of the resource in the resulting 412
   (Precondition Failed) [<a href="./rfc7232" title='"Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests"'>RFC7232</a>] response.

   See <a href="#appendix-B.6">Appendix B.6</a> for examples.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20The%20%22depth-noroot%22%20Processing%20Preference"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  The "depth-noroot" Processing Preference</span>

   The "depth-noroot" preference indicates that the client wishes for
   the server to exclude the target (root) resource from processing by
   the HTTP method and only apply the HTTP method to the target
   resource's subordinate resources.

   This preference is only intended to be used with HTTP methods whose
   definitions explicitly provide support for the Depth [<a href="./rfc4918" title='"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"'>RFC4918</a>] header
   field.  Furthermore, this preference only applies when the Depth
   header field has a value of "1" or "infinity" (either implicitly or
   explicitly).

   The "depth-noroot" preference MAY be used in conjunction with the
   "return=minimal" preference in a single request.

   See <a href="#appendix-B.1">Appendix B.1</a> for examples.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Security%20Considerations"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Security Considerations</span>

   No new security considerations are introduced by use of the Prefer
   header field with WebDAV requests, beyond those discussed in
   [<a href="./rfc7240" title='"Prefer Header for HTTP"'>RFC7240</a>] and those already inherent in those requests.
















<span class="grey">Murchison                    Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  IANA Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.1.%20%20Preference%20Registration"></a><a class="selflink" href="#section-6.1" id="section-6.1">6.1</a>.  Preference Registration</span>

   The following preference has been added to the HTTP Preferences
   Registry defined in <a href="./rfc7240#section-5.1">Section 5.1 of [RFC7240]</a>.

   Preference:  depth-noroot

   Description:  The "depth-noroot" preference indicates that the client
      wishes for the server to exclude the target (root) resource from
      processing by the HTTP method and only apply the HTTP method to
      the target resource's subordinate resources.

   Reference:  <a href="./rfc8144#section-4">RFC 8144, Section 4</a>

   Notes:  This preference is only intended to be used with HTTP methods
      whose definitions explicitly provide support for the Depth
      [<a href="./rfc4918" title='"HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)"'>RFC4918</a>] header field.  Furthermore, this preference only applies
      when the Depth header field has a value of "1" or "infinity"
      (either implicitly or explicitly).

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.%20%20Method%20References"></a><a class="selflink" href="#section-6.2" id="section-6.2">6.2</a>.  Method References</span>

   The following methods have had their references updated in the "HTTP
   Method Registry" (<a href="http://www.iana.org/assignments/http-methods">http://www.iana.org/assignments/http-methods</a>).

   +------------+------+------------+----------------------------------+
   | Method     | Safe | Idempotent | References                       |
   | Name       |      |            |                                  |
   +------------+------+------------+----------------------------------+
   | MKCALENDAR | no   | yes        | <a href="./rfc4791#section-5.3.1">RFC 4791, Section 5.3.1</a>; RFC     |
   |            |      |            | 8144, <a href="#section-2.3">Section 2.3</a>                |
   | MKCOL      | no   | yes        | <a href="./rfc4918#section-9.3">RFC 4918, Section 9.3</a>; <a href="./rfc5689">RFC 5689</a>, |
   |            |      |            | <a href="#section-3">Section 3</a>; <a href="./rfc8144#section-2.3">RFC 8144, Section 2.3</a> |
   | PROPFIND   | yes  | yes        | <a href="./rfc4918#section-9.1">RFC 4918, Section 9.1</a>; <a href="./rfc8144">RFC 8144</a>, |
   |            |      |            | <a href="#section-2.1">Section 2.1</a>                      |
   | PROPPATCH  | no   | yes        | <a href="./rfc4918#section-9.2">RFC 4918, Section 9.2</a>; <a href="./rfc8144">RFC 8144</a>, |
   |            |      |            | <a href="#section-2.2">Section 2.2</a>                      |
   | REPORT     | yes  | yes        | <a href="./rfc3253#section-3.6">RFC 3253, Section 3.6</a>; <a href="./rfc8144">RFC 8144</a>, |
   |            |      |            | <a href="#section-2.1">Section 2.1</a>                      |
   +------------+------+------------+----------------------------------+









<span class="grey">Murchison                    Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.3.%20%20Status%20Code%20References"></a><a class="selflink" href="#section-6.3" id="section-6.3">6.3</a>.  Status Code References</span>

   The following status code has had its references updated in the "HTTP
   Status Codes" registry (<a href="http://www.iana.org/assignments/http-status-codes">http://www.iana.org/assignments/http-status-</a>
   <a href="http://www.iana.org/assignments/http-status-codes">codes</a>).

   +-------+-------------------+---------------------------------------+
   | Value | Description       | References                            |
   +-------+-------------------+---------------------------------------+
   | 412   | Precondition      | <a href="./rfc7232#section-4.2">RFC 7232, Section 4.2</a>; <a href="./rfc8144">RFC 8144</a>,      |
   |       | Failed            | <a href="#section-3.2">Section 3.2</a>                           |
   +-------+-------------------+---------------------------------------+

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20References"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.1.%20%20Normative%20References"></a><a class="selflink" href="#section-7.1" id="section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3253">RFC3253</a>]  Clemm, G., Amsden, J., Ellison, T., Kaler, C., and J.
              Whitehead, "Versioning Extensions to WebDAV (Web
              Distributed Authoring and Versioning)", <a href="./rfc3253">RFC 3253</a>,
              DOI 10.17487/RFC3253, March 2002,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3253">http://www.rfc-editor.org/info/rfc3253</a>&gt;.

   [<a id="ref-RFC4791">RFC4791</a>]  Daboo, C., Desruisseaux, B., and L. Dusseault,
              "Calendaring Extensions to WebDAV (CalDAV)", <a href="./rfc4791">RFC 4791</a>,
              DOI 10.17487/RFC4791, March 2007,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4791">http://www.rfc-editor.org/info/rfc4791</a>&gt;.

   [<a id="ref-RFC4918">RFC4918</a>]  Dusseault, L., Ed., "HTTP Extensions for Web Distributed
              Authoring and Versioning (WebDAV)", <a href="./rfc4918">RFC 4918</a>,
              DOI 10.17487/RFC4918, June 2007,
              &lt;<a href="http://www.rfc-editor.org/info/rfc4918">http://www.rfc-editor.org/info/rfc4918</a>&gt;.

   [<a id="ref-RFC5689">RFC5689</a>]  Daboo, C., "Extended MKCOL for Web Distributed Authoring
              and Versioning (WebDAV)", <a href="./rfc5689">RFC 5689</a>, DOI 10.17487/RFC5689,
              September 2009, &lt;<a href="http://www.rfc-editor.org/info/rfc5689">http://www.rfc-editor.org/info/rfc5689</a>&gt;.

   [<a id="ref-RFC5789">RFC5789</a>]  Dusseault, L. and J. Snell, "PATCH Method for HTTP",
              <a href="./rfc5789">RFC 5789</a>, DOI 10.17487/RFC5789, March 2010,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5789">http://www.rfc-editor.org/info/rfc5789</a>&gt;.






<span class="grey">Murchison                    Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   [<a id="ref-RFC5995">RFC5995</a>]  Reschke, J., "Using POST to Add Members to Web Distributed
              Authoring and Versioning (WebDAV) Collections", <a href="./rfc5995">RFC 5995</a>,
              DOI 10.17487/RFC5995, September 2010,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5995">http://www.rfc-editor.org/info/rfc5995</a>&gt;.

   [<a id="ref-RFC7231">RFC7231</a>]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Semantics and Content", <a href="./rfc7231">RFC 7231</a>,
              DOI 10.17487/RFC7231, June 2014,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7231">http://www.rfc-editor.org/info/rfc7231</a>&gt;.

   [<a id="ref-RFC7232">RFC7232</a>]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Conditional Requests", <a href="./rfc7232">RFC 7232</a>,
              DOI 10.17487/RFC7232, June 2014,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7232">http://www.rfc-editor.org/info/rfc7232</a>&gt;.

   [<a id="ref-RFC7240">RFC7240</a>]  Snell, J., "Prefer Header for HTTP", <a href="./rfc7240">RFC 7240</a>,
              DOI 10.17487/RFC7240, June 2014,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7240">http://www.rfc-editor.org/info/rfc7240</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.2.%20%20Informative%20References"></a><a class="selflink" href="#section-7.2" id="section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-MSDN.aa493854">MSDN.aa493854</a>]
              Microsoft Developer Network, "PROPPATCH Method", June
              2006,
              &lt;<a href="http://msdn.microsoft.com/en-us/library/aa493854.aspx">http://msdn.microsoft.com/en-us/library/aa493854.aspx</a>&gt;.

   [<a id="ref-MSDN.aa563501">MSDN.aa563501</a>]
              Microsoft Developer Network, "Brief Header", June 2006,
              &lt;<a href="http://msdn.microsoft.com/en-us/library/aa563501.aspx">http://msdn.microsoft.com/en-us/library/aa563501.aspx</a>&gt;.

   [<a id="ref-MSDN.aa563950">MSDN.aa563950</a>]
              Microsoft Developer Network, "Depth Header", June 2006,
              &lt;<a href="http://msdn.microsoft.com/en-us/library/aa563950.aspx">http://msdn.microsoft.com/en-us/library/aa563950.aspx</a>&gt;.

   [<a id="ref-MSDN.aa580336">MSDN.aa580336</a>]
              Microsoft Developer Network, "PROPFIND Method", June 2006,
              &lt;<a href="http://msdn.microsoft.com/en-us/library/aa580336.aspx">http://msdn.microsoft.com/en-us/library/aa580336.aspx</a>&gt;.

   [<a id="ref-RFC3744">RFC3744</a>]  Clemm, G., Reschke, J., Sedlar, E., and J. Whitehead, "Web
              Distributed Authoring and Versioning (WebDAV) Access
              Control Protocol", <a href="./rfc3744">RFC 3744</a>, DOI 10.17487/RFC3744, May
              2004, &lt;<a href="http://www.rfc-editor.org/info/rfc3744">http://www.rfc-editor.org/info/rfc3744</a>&gt;.

   [<a id="ref-RFC6352">RFC6352</a>]  Daboo, C., "CardDAV: vCard Extensions to Web Distributed
              Authoring and Versioning (WebDAV)", <a href="./rfc6352">RFC 6352</a>,
              DOI 10.17487/RFC6352, August 2011,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6352">http://www.rfc-editor.org/info/rfc6352</a>&gt;.




<span class="grey">Murchison                    Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   [<a id="ref-RFC6578">RFC6578</a>]  Daboo, C. and A. Quillaud, "Collection Synchronization for
              Web Distributed Authoring and Versioning (WebDAV)",
              <a href="./rfc6578">RFC 6578</a>, DOI 10.17487/RFC6578, March 2012,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6578">http://www.rfc-editor.org/info/rfc6578</a>&gt;.

   [<a id="ref-RFC6638">RFC6638</a>]  Daboo, C. and B. Desruisseaux, "Scheduling Extensions to
              CalDAV", <a href="./rfc6638">RFC 6638</a>, DOI 10.17487/RFC6638, June 2012,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6638">http://www.rfc-editor.org/info/rfc6638</a>&gt;.











































<span class="grey">Murchison                    Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20A.%20%20The%20Brief%20and%20Extended%20Depth%20Header%20Fields"></a><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  The Brief and Extended Depth Header Fields</span>

   This document is based heavily on the Brief [<a href="#ref-MSDN.aa563501">MSDN.aa563501</a>] and
   extended Depth [<a href="#ref-MSDN.aa563950">MSDN.aa563950</a>] header fields.  The behaviors
   described in Sections <a href="#section-2.1">2.1</a> and <a href="#section-2.2">2.2</a> are identical to those provided by
   the Brief header field when used with the PROPFIND [<a href="#ref-MSDN.aa580336">MSDN.aa580336</a>]
   and PROPPATCH [<a href="#ref-MSDN.aa493854">MSDN.aa493854</a>] methods, respectively.  The behavior
   described in <a href="#section-4">Section 4</a> is identical to that provided by the
   "1,noroot" [<a href="#ref-MSDN.aa563950">MSDN.aa563950</a>] and "infinity,noroot" [<a href="#ref-MSDN.aa563950">MSDN.aa563950</a>]
   Depth header field values.

   Client and server implementations that already support the Brief
   header field can add support for the "return=minimal" preference with
   nominal effort.

   If a server supporting the Prefer header field receives both the
   Brief and Prefer header fields in a request, clients can expect the
   server to ignore the Brief header field and only use the Prefer
   header field preferences.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20B.%20%20Examples"></a><a class="selflink" href="#appendix-B" id="appendix-B">Appendix B</a>.  Examples</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.1.%20%20PROPFIND"></a><a class="selflink" href="#appendix-B.1" id="appendix-B.1">B.1</a>.  PROPFIND</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.1.1.%20%20Typical%20PROPFIND%20Request%2FResponse%20with%20Depth%3A1"></a><a class="selflink" href="#appendix-B.1.1" id="appendix-B.1.1">B.1.1</a>.  Typical PROPFIND Request/Response with Depth:1</span>

   This example tries to fetch one known and one unknown property from
   child resources.

   &gt;&gt; Request &lt;&lt;

   PROPFIND /container/ HTTP/1.1
   Host: webdav.example.com
   Content-Type: application/xml; charset=utf-8
   Content-Length: 189
   Depth: 1

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;D:propfind xmlns:D="DAV:" xmlns:X="http://ns.example.com/foobar/"&gt;
     &lt;D:prop&gt;
       &lt;D:resourcetype/&gt;
       &lt;X:foobar/&gt;
     &lt;/D:prop&gt;
   &lt;/D:propfind&gt;

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 207 Multi-Status



<span class="grey">Murchison                    Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   Content-Type: application/xml; charset=utf-8
   Content-Length: 1722

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:multistatus xmlns:D="DAV:"
                  xmlns:X="http://ns.example.com/foobar/"&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:resourcetype&gt;
             &lt;D:collection/&gt;
           &lt;/D:resourcetype&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;X:foobar/&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 404 Not Found&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/work/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:resourcetype&gt;
             &lt;D:collection/&gt;
           &lt;/D:resourcetype&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;X:foobar/&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 404 Not Found&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/home/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:resourcetype&gt;
             &lt;D:collection/&gt;
           &lt;/D:resourcetype&gt;
         &lt;/D:prop&gt;



<span class="grey">Murchison                    Standards Track                   [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;X:foobar/&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 404 Not Found&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/foo.txt&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:resourcetype/&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;X:foobar/&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 404 Not Found&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
   &lt;/D:multistatus&gt;

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.1.2.%20%20Minimal%20PROPFIND%20Request%2FResponse%20with%20Depth%3A1"></a><a class="selflink" href="#appendix-B.1.2" id="appendix-B.1.2">B.1.2</a>.  Minimal PROPFIND Request/Response with Depth:1</span>

   This example tries to fetch one known and one unknown property from
   child resources only.

   &gt;&gt; Request &lt;&lt;

   PROPFIND /container/ HTTP/1.1
   Host: webdav.example.com
   Content-Type: application/xml; charset=utf-8
   Content-Length: 189
   Depth: 1
   Prefer: return=minimal, depth-noroot

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;D:propfind xmlns:D="DAV:" xmlns:X="http://ns.example.com/foobar/"&gt;
     &lt;D:prop&gt;
       &lt;D:resourcetype/&gt;
       &lt;X:foobar/&gt;
     &lt;/D:prop&gt;
   &lt;/D:propfind&gt;




<span class="grey">Murchison                    Standards Track                   [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 207 Multi-Status
   Content-Type: application/xml; charset=utf-8
   Content-Length: 837
   Preference-Applied: return=minimal, depth-noroot

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:multistatus xmlns:D="DAV:"&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/work/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:resourcetype&gt;
             &lt;D:collection/&gt;
           &lt;/D:resourcetype&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/home/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:resourcetype&gt;
             &lt;D:collection/&gt;
           &lt;/D:resourcetype&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/foo.txt&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:resourcetype/&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
   &lt;/D:multistatus&gt;










<span class="grey">Murchison                    Standards Track                   [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.1.3.%20%20Minimal%20PROPFIND%20Request%2FResponse%20with%20an%20Empty%20DAV%3Apropstat"></a><a class="selflink" href="#appendix-B.1.3" id="appendix-B.1.3">B.1.3</a>.  Minimal PROPFIND Request/Response with an Empty DAV:propstat</span>
        Element

   This example tries to fetch an unknown property from a collection.

   &gt;&gt; Request &lt;&lt;

   PROPFIND /container/ HTTP/1.1
   Host: webdav.example.com
   Content-Type: application/xml; charset=utf-8
   Content-Length: 166
   Prefer: return=minimal

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;D:propfind xmlns:D="DAV:" xmlns:X="http://ns.example.com/foobar/"&gt;
     &lt;D:prop&gt;
       &lt;X:foobar/&gt;
     &lt;/D:prop&gt;
   &lt;/D:propfind&gt;

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 207 Multi-Status
   Content-Type: application/xml; charset=utf-8
   Content-Length: 255
   Preference-Applied: return=minimal

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:multistatus xmlns:D="DAV:"&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop/&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
   &lt;/D:multistatus&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.2.%20%20REPORT"></a><a class="selflink" href="#appendix-B.2" id="appendix-B.2">B.2</a>.  REPORT</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.2.1.%20%20Typical%20REPORT%20Request%2FResponse"></a><a class="selflink" href="#appendix-B.2.1" id="appendix-B.2.1">B.2.1</a>.  Typical REPORT Request/Response</span>

   This example tries to fetch an unknown property from several
   resources via the DAV:expand-property [<a href="./rfc3253" title='"Versioning Extensions to WebDAV (Web Distributed Authoring and Versioning)"'>RFC3253</a>] REPORT type.

   &gt;&gt; Request &lt;&lt;

   REPORT /dav/principals/ HTTP/1.1



<span class="grey">Murchison                    Standards Track                   [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   Host: webdav.example.com
   Content-type: text/xml; charset=utf-8
   Content-length: 847

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:expand-property xmlns:D="DAV:"&gt;
     &lt;D:property name="current-user-principal"&gt;
       &lt;D:property name="resourcetype"/&gt;
       &lt;D:property name="displayname"/&gt;
       &lt;D:property name="foobar"
                   namespace="http://ns.example.com/foobar"/&gt;
       &lt;D:property name="calendar-home-set"
                   namespace="urn:ietf:params:xml:ns:caldav"&gt;
         &lt;D:property name="resourcetype"/&gt;
         &lt;D:property name="foobar"
                     namespace="http://ns.example.com/foobar"/&gt;
       &lt;/D:property&gt;
       &lt;D:property name="addressbook-home-set"
                   namespace="urn:ietf:params:xml:ns:carddav"&gt;
         &lt;D:property name="resourcetype"/&gt;
         &lt;D:property name="foobar"
                     namespace="http://ns.example.com/foobar"/&gt;
       &lt;/D:property&gt;
     &lt;/D:property&gt;
   &lt;/D:expand-property&gt;

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 207 Multi-Status
   Content-Type: application/xml; charset=utf-8
   Content-Length: 2664

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:multistatus xmlns:D="DAV:"
                  xmlns:C="urn:ietf:params:xml:ns:caldav"
                  xmlns:R="urn:ietf:params:xml:ns:carddav"
                  xmlns:X="http://ns.example.com/foobar"&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/dav/principals/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:current-user-principal&gt;
             &lt;D:response&gt;
               &lt;D:href&gt;/dav/principals/user/ken/&lt;/D:href&gt;
               &lt;D:propstat&gt;
                 &lt;D:prop&gt;
                   &lt;D:resourcetype&gt;
                     &lt;D:principal/&gt;



<span class="grey">Murchison                    Standards Track                   [Page 17]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-18"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


                   &lt;/D:resourcetype&gt;
                   &lt;D:displayname&gt;ken&lt;/D:displayname&gt;
                   &lt;C:calendar-home-set&gt;
                     &lt;D:response&gt;
                       &lt;D:href&gt;/dav/calendars/user/ken/&lt;/D:href&gt;
                       &lt;D:propstat&gt;
                         &lt;D:prop&gt;
                           &lt;D:resourcetype&gt;
                             &lt;D:collection/&gt;
                           &lt;/D:resourcetype&gt;
                         &lt;/D:prop&gt;
                         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
                       &lt;/D:propstat&gt;
                       &lt;D:propstat&gt;
                         &lt;D:prop&gt;
                           &lt;X:foobar/&gt;
                         &lt;/D:prop&gt;
                         &lt;D:status&gt;HTTP/1.1 404 Not Found&lt;/D:status&gt;
                       &lt;/D:propstat&gt;
                     &lt;/D:response&gt;
                   &lt;/C:calendar-home-set&gt;
                   &lt;R:addressbook-home-set&gt;
                     &lt;D:response&gt;
                       &lt;D:href&gt;/dav/addressbooks/user/ken/&lt;/D:href&gt;
                       &lt;D:propstat&gt;
                         &lt;D:prop&gt;
                           &lt;D:resourcetype&gt;
                             &lt;D:collection/&gt;
                           &lt;/D:resourcetype&gt;
                         &lt;/D:prop&gt;
                         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
                       &lt;/D:propstat&gt;
                       &lt;D:propstat&gt;
                         &lt;D:prop&gt;
                           &lt;X:foobar/&gt;
                         &lt;/D:prop&gt;
                         &lt;D:status&gt;HTTP/1.1 404 Not Found&lt;/D:status&gt;
                       &lt;/D:propstat&gt;
                     &lt;/D:response&gt;
                   &lt;/R:addressbook-home-set&gt;
                 &lt;/D:prop&gt;
                 &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
               &lt;/D:propstat&gt;
               &lt;D:propstat&gt;
                 &lt;D:prop&gt;
                   &lt;X:foobar/&gt;
                 &lt;/D:prop&gt;
                 &lt;D:status&gt;HTTP/1.1 404 Not Found&lt;/D:status&gt;



<span class="grey">Murchison                    Standards Track                   [Page 18]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-19"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


               &lt;/D:propstat&gt;
             &lt;/D:response&gt;
           &lt;/D:current-user-principal&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
   &lt;/D:multistatus&gt;

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.2.2.%20%20Minimal%20REPORT%20Request%2FResponse"></a><a class="selflink" href="#appendix-B.2.2" id="appendix-B.2.2">B.2.2</a>.  Minimal REPORT Request/Response</span>

   This example tries to fetch an unknown property from several
   resources via the DAV:expand-property [<a href="./rfc3253" title='"Versioning Extensions to WebDAV (Web Distributed Authoring and Versioning)"'>RFC3253</a>] REPORT type.

   &gt;&gt; Request &lt;&lt;

   REPORT /dav/principals/ HTTP/1.1
   Host: webdav.example.com
   Content-Type: application/xml; charset=utf-8
   Content-Length: 847
   Prefer: return=minimal

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:expand-property xmlns:D="DAV:"&gt;
     &lt;D:property name="current-user-principal"&gt;
       &lt;D:property name="resourcetype"/&gt;
       &lt;D:property name="displayname"/&gt;
       &lt;D:property name="foobar"
                   namespace="http://ns.example.com/foobar"/&gt;
       &lt;D:property name="calendar-home-set"
                   namespace="urn:ietf:params:xml:ns:caldav"&gt;
         &lt;D:property name="resourcetype"/&gt;
         &lt;D:property name="foobar"
                     namespace="http://ns.example.com/foobar"/&gt;
       &lt;/D:property&gt;
       &lt;D:property name="addressbook-home-set"
                   namespace="urn:ietf:params:xml:ns:carddav"&gt;
         &lt;D:property name="resourcetype"/&gt;
         &lt;D:property name="foobar"
                     namespace="http://ns.example.com/foobar"/&gt;
       &lt;/D:property&gt;
     &lt;/D:property&gt;
   &lt;/D:expand-property&gt;

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 207 Multi-Status
   Content-Type: application/xml; charset=utf-8



<span class="grey">Murchison                    Standards Track                   [Page 19]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-20"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   Content-Length: 1998
   Preference-Applied: return=minimal

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:multistatus xmlns:D="DAV:"
                  xmlns:C="urn:ietf:params:xml:ns:caldav"
                  xmlns:R="urn:ietf:params:xml:ns:carddav"
                  xmlns:X="http://ns.example.com/foobar"&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/dav/principals/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:current-user-principal&gt;
             &lt;D:response&gt;
               &lt;D:href&gt;/dav/principals/user/ken/&lt;/D:href&gt;
               &lt;D:propstat&gt;
                 &lt;D:prop&gt;
                   &lt;D:resourcetype&gt;
                     &lt;D:principal/&gt;
                   &lt;/D:resourcetype&gt;
                   &lt;D:displayname&gt;ken&lt;/D:displayname&gt;
                   &lt;C:calendar-home-set&gt;
                     &lt;D:response&gt;
                       &lt;D:href&gt;/dav/calendars/user/ken/&lt;/D:href&gt;
                       &lt;D:propstat&gt;
                         &lt;D:prop&gt;
                           &lt;D:resourcetype&gt;
                             &lt;D:collection/&gt;
                           &lt;/D:resourcetype&gt;
                         &lt;/D:prop&gt;
                         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
                       &lt;/D:propstat&gt;
                     &lt;/D:response&gt;
                   &lt;/C:calendar-home-set&gt;
                   &lt;R:addressbook-home-set&gt;
                     &lt;D:response&gt;
                       &lt;D:href&gt;/dav/addressbooks/user/ken/&lt;/D:href&gt;
                       &lt;D:propstat&gt;
                         &lt;D:prop&gt;
                           &lt;D:resourcetype&gt;
                             &lt;D:collection/&gt;
                           &lt;/D:resourcetype&gt;
                         &lt;/D:prop&gt;
                         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
                       &lt;/D:propstat&gt;
                     &lt;/D:response&gt;
                   &lt;/R:addressbook-home-set&gt;
                 &lt;/D:prop&gt;



<span class="grey">Murchison                    Standards Track                   [Page 20]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-21"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


                 &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
               &lt;/D:propstat&gt;
             &lt;/D:response&gt;
           &lt;/D:current-user-principal&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
   &lt;/D:multistatus&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.3.%20%20PROPPATCH"></a><a class="selflink" href="#appendix-B.3" id="appendix-B.3">B.3</a>.  PROPPATCH</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.3.1.%20%20Typical%20PROPPATCH%20Request%2FResponse"></a><a class="selflink" href="#appendix-B.3.1" id="appendix-B.3.1">B.3.1</a>.  Typical PROPPATCH Request/Response</span>

   &gt;&gt; Request &lt;&lt;

   PROPPATCH /container/ HTTP/1.1
   Host: webdav.example.com
   Content-Type: application/xml; charset=utf-8
   Content-Length: 199

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:propertyupdate xmlns:D="DAV:"&gt;
     &lt;D:set&gt;
       &lt;D:prop&gt;
         &lt;D:displayname&gt;My Container&lt;/D:displayname&gt;
       &lt;/D:prop&gt;
     &lt;/D:set&gt;
   &lt;/D:propertyupdate&gt;

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 207 Multi-Status
   Content-Type: application/xml; charset=utf-8
   Content-Length: 297

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:multistatus xmlns:D="DAV:"&gt;
     &lt;D:response&gt;
       &lt;D:href&gt;/container/&lt;/D:href&gt;
       &lt;D:propstat&gt;
         &lt;D:prop&gt;
           &lt;D:displayname/&gt;
         &lt;/D:prop&gt;
         &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
       &lt;/D:propstat&gt;
     &lt;/D:response&gt;
   &lt;/D:multistatus&gt;



<span class="grey">Murchison                    Standards Track                   [Page 21]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-22"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.3.2.%20%20Minimal%20PROPPATCH%20Request%2FResponse"></a><a class="selflink" href="#appendix-B.3.2" id="appendix-B.3.2">B.3.2</a>.  Minimal PROPPATCH Request/Response</span>

   &gt;&gt; Request &lt;&lt;

   PROPPATCH /container/ HTTP/1.1
   Host: webdav.example.com
   Content-Type: application/xml; charset=utf-8
   Content-Length: 199
   Prefer: return=minimal

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:propertyupdate xmlns:D="DAV:"&gt;
     &lt;D:set&gt;
       &lt;D:prop&gt;
         &lt;D:displayname&gt;My Container&lt;/D:displayname&gt;
       &lt;/D:prop&gt;
     &lt;/D:set&gt;
   &lt;/D:propertyupdate&gt;

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 200 OK
   Content-Length: 0
   Preference-Applied: return=minimal

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.4.%20%20MKCOL"></a><a class="selflink" href="#appendix-B.4" id="appendix-B.4">B.4</a>.  MKCOL</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.4.1.%20%20Verbose%20MKCOL%20Request%2FResponse"></a><a class="selflink" href="#appendix-B.4.1" id="appendix-B.4.1">B.4.1</a>.  Verbose MKCOL Request/Response</span>

   &gt;&gt; Request &lt;&lt;

   MKCOL /container/ HTTP/1.1
   Host: webdav.example.com
   Content-Type: application/xml; charset=utf-8
   Content-Length: 181

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:mkcol xmlns:D="DAV:"&gt;
     &lt;D:set&gt;
       &lt;D:prop&gt;
         &lt;D:displayname&gt;My Container&lt;/D:displayname&gt;
       &lt;/D:prop&gt;
     &lt;/D:set&gt;
   &lt;/D:mkcol&gt;

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 201 Created



<span class="grey">Murchison                    Standards Track                   [Page 22]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-23"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   Cache-Control: no-cache
   Content-Type: application/xml; charset=utf-8
   Content-Length: 224

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:mkcol-response xmlns:D="DAV:"&gt;
     &lt;D:propstat&gt;
       &lt;D:prop&gt;
         &lt;D:displayname/&gt;
       &lt;/D:prop&gt;
       &lt;D:status&gt;HTTP/1.1 200 OK&lt;/D:status&gt;
     &lt;/D:propstat&gt;
   &lt;/D:mkcol-response&gt;

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.4.2.%20%20Minimal%20MKCOL%20Request%2FResponse"></a><a class="selflink" href="#appendix-B.4.2" id="appendix-B.4.2">B.4.2</a>.  Minimal MKCOL Request/Response</span>

   &gt;&gt; Request &lt;&lt;

   MKCOL /container/ HTTP/1.1
   Host: webdav.example.com
   Content-Type: application/xml; charset=utf-8
   Content-Length: 181
   Prefer: return=minimal

   &lt;?xml version="1.0" encoding="utf-8"?&gt;
   &lt;D:mkcol xmlns:D="DAV:"&gt;
     &lt;D:set&gt;
       &lt;D:prop&gt;
         &lt;D:displayname&gt;My Container&lt;/D:displayname&gt;
       &lt;/D:prop&gt;
     &lt;/D:set&gt;
   &lt;/D:mkcol&gt;

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 201 Created
   Cache-Control: no-cache
   Content-Length: 0
   Preference-Applied: return=minimal

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.5.%20%20POST"></a><a class="selflink" href="#appendix-B.5" id="appendix-B.5">B.5</a>.  POST</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.5.1.%20%20Typical%20Resource%20Creation%20and%20Retrieval%20via%20POST%20%2B%20GET"></a><a class="selflink" href="#appendix-B.5.1" id="appendix-B.5.1">B.5.1</a>.  Typical Resource Creation and Retrieval via POST + GET</span>

   Note that this request is not conditional because by using the POST
   [<a href="./rfc5995" title='"Using POST to Add Members to Web Distributed Authoring and Versioning (WebDAV) Collections"'>RFC5995</a>] method, the client lets the server choose the resource URI,
   thereby guaranteeing that it will not modify an existing resource.




<span class="grey">Murchison                    Standards Track                   [Page 23]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-24"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   &gt;&gt; Request &lt;&lt;

   POST /container/work;add-member/ HTTP/1.1
   Host: caldav.example.com
   Content-Type: text/calendar; charset=utf-8
   Content-Length: 521

   BEGIN:VCALENDAR
   VERSION:2.0
   PRODID:-//Example Corp.//CalDAV Client//EN
   BEGIN:VEVENT
   UID:CD87465FA
   SEQUENCE:0
   DTSTAMP:20120602T185254Z
   DTSTART:20120602T160000Z
   DTEND:20120602T170000Z
   TRANSP:OPAQUE
   SUMMARY:Lunch
   ORGANIZER;CN="Ken Murchison":mailto:murch@example.com
   ATTENDEE;CN="Ken Murchison";CUTYPE=INDIVIDUAL;PARTSTAT=ACCEPTED:
    mailto:murch@example.com
   ATTENDEE;CN="John Doe";CUTYPE=INDIVIDUAL;PARTSTAT
    =NEEDS-ACTION;ROLE=REQ-PARTICIPANT;RSVP=TRUE:mailto:jdoe@
    example.com
   END:VEVENT
   END:VCALENDAR

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 201 Created
   Location: /container/work/abc.ics
   Content-Length: 0


   Note that the server did not include any validator header fields
   (e.g., ETag) in the response, signaling that the created
   representation differs from the representation sent in the body of
   the request.  The client has to send a separate GET request to
   retrieve the current representation:

   &gt;&gt; Request &lt;&lt;

   GET /container/work/abc.ics HTTP/1.1
   Host: caldav.example.com

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 200 OK



<span class="grey">Murchison                    Standards Track                   [Page 24]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-25"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   Content-Type: text/calendar; charset=utf-8
   Content-Length: 541
   ETag: "nahduyejc"
   Schedule-Tag: "jfd84hgbcn"

   BEGIN:VCALENDAR
   VERSION:2.0
   PRODID:-//Example Corp.//CalDAV Server//EN
   BEGIN:VEVENT
   UID:CD87465FA
   SEQUENCE:0
   DTSTAMP:20120602T185300Z
   DTSTART:20120602T160000Z
   DTEND:20120602T170000Z
   TRANSP:OPAQUE
   SUMMARY:Lunch
   ORGANIZER;CN="Ken Murchison":mailto:murch@example.com
   ATTENDEE;CN="Ken Murchison";CUTYPE=INDIVIDUAL;PARTSTAT=ACCEPTED:
    mailto:murch@example.com
   ATTENDEE;CN="John Doe";CUTYPE=INDIVIDUAL;PARTSTAT
    =NEEDS-ACTION;ROLE=REQ-PARTICIPANT;RSVP=TRUE;SCHEDULE-STATUS=
    1.2:mailto:jdoe@example.com
   END:VEVENT
   END:VCALENDAR

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.5.2.%20%20Streamlined%20Resource%20Creation%20and%20Retrieval%20via%20POST"></a><a class="selflink" href="#appendix-B.5.2" id="appendix-B.5.2">B.5.2</a>.  Streamlined Resource Creation and Retrieval via POST</span>

   Note that this request is not conditional because by using the POST
   [<a href="./rfc5995" title='"Using POST to Add Members to Web Distributed Authoring and Versioning (WebDAV) Collections"'>RFC5995</a>] method, the client lets the server choose the resource URI,
   thereby guaranteeing that it will not modify an existing resource.

   &gt;&gt; Request &lt;&lt;

   POST /container/work;add-member/ HTTP/1.1
   Host: caldav.example.com
   Content-Type: text/calendar; charset=utf-8
   Content-Length: 521
   Prefer: return=representation

   BEGIN:VCALENDAR
   VERSION:2.0
   PRODID:-//Example Corp.//CalDAV Client//EN
   BEGIN:VEVENT
   UID:CD87465FA
   SEQUENCE:0
   DTSTAMP:20120602T185254Z
   DTSTART:20120602T160000Z
   DTEND:20120602T170000Z



<span class="grey">Murchison                    Standards Track                   [Page 25]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-26"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   TRANSP:OPAQUE
   SUMMARY:Lunch
   ORGANIZER;CN="Ken Murchison":mailto:murch@example.com
   ATTENDEE;CN="Ken Murchison";CUTYPE=INDIVIDUAL;PARTSTAT=ACCEPTED:
    mailto:murch@example.com
   ATTENDEE;CN="John Doe";CUTYPE=INDIVIDUAL;PARTSTAT
    =NEEDS-ACTION;ROLE=REQ-PARTICIPANT;RSVP=TRUE:mailto:jdoe@
    example.com
   END:VEVENT
   END:VCALENDAR

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 201 Created
   Location: /container/work/abc.ics
   Content-Type: text/calendar; charset=utf-8
   Content-Length: 541
   Content-Location: /container/work/abc.ics
   ETag: "nahduyejc"
   Schedule-Tag: "jfd84hgbcn"
   Preference-Applied: return=representation

   BEGIN:VCALENDAR
   VERSION:2.0
   PRODID:-//Example Corp.//CalDAV Server//EN
   BEGIN:VEVENT
   UID:CD87465FA
   SEQUENCE:0
   DTSTAMP:20120602T185300Z
   DTSTART:20120602T160000Z
   DTEND:20120602T170000Z
   TRANSP:OPAQUE
   SUMMARY:Lunch
   ORGANIZER;CN="Ken Murchison":mailto:murch@example.com
   ATTENDEE;CN="Ken Murchison";CUTYPE=INDIVIDUAL;PARTSTAT=ACCEPTED:
    mailto:murch@example.com
   ATTENDEE;CN="John Doe";CUTYPE=INDIVIDUAL;PARTSTAT
    =NEEDS-ACTION;ROLE=REQ-PARTICIPANT;RSVP=TRUE;SCHEDULE-STATUS=
    1.2:mailto:jdoe@example.com
   END:VEVENT
   END:VCALENDAR










<span class="grey">Murchison                    Standards Track                   [Page 26]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-27"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.6.%20%20PUT"></a><a class="selflink" href="#appendix-B.6" id="appendix-B.6">B.6</a>.  PUT</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.6.1.%20%20Typical%20Conditional%20Resource%20Update%20Failure%20and%20Retrieval%20via"></a><a class="selflink" href="#appendix-B.6.1" id="appendix-B.6.1">B.6.1</a>.  Typical Conditional Resource Update Failure and Retrieval via</span>
        PUT + GET

   &gt;&gt; Request &lt;&lt;

   PUT /container/motd.txt HTTP/1.1
   Host: dav.example.com
   Content-Type: text/plain
   Content-Length: 69
   If-Match: "asd973"

   Either write something worth reading or do something worth writing.

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 412 Precondition Failed
   Content-Length: 0


   The resource has been modified by another user agent (ETag mismatch);
   therefore, the client has to send a separate GET request to retrieve
   the current representation:

   &gt;&gt; Request &lt;&lt;

   GET /container/motd.txt HTTP/1.1
   Host: dav.example.com


   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 200 OK
   Content-Type: text/plain
   Content-Length: 52
   ETag: "789sdas"

   An investment in knowledge pays the best interest.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.6.2.%20%20Streamlined%20Conditional%20Resource%20Update%20Failure%20and%20Retrieval"></a><a class="selflink" href="#appendix-B.6.2" id="appendix-B.6.2">B.6.2</a>.  Streamlined Conditional Resource Update Failure and Retrieval</span>
        via PUT

   &gt;&gt; Request &lt;&lt;

   PUT /container/motd.txt HTTP/1.1
   Host: dav.example.com
   Content-Type: text/plain



<span class="grey">Murchison                    Standards Track                   [Page 27]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-28"></span>
<span class="grey"><a href="./rfc8144">RFC 8144</a>              Prefer Header Field in WebDAV           April 2017</span>


   Content-Length: 69
   If-Match: "asd973"
   Prefer: return=representation

   Either write something worth reading or do something worth writing.

   &gt;&gt; Response &lt;&lt;

   HTTP/1.1 412 Precondition Failed
   Content-Type: text/plain
   Content-Length: 52
   Content-Location: /container/motd.txt
   ETag: "789sdas"
   Preference-Applied: return=representation

   An investment in knowledge pays the best interest.

Acknowledgements

   The author would like to thank the following individuals for
   contributing their ideas and support for writing this specification:
   Cyrus Daboo, Helge Hess, Andrew McMillan, Arnaud Quillaud, and Julian
   Reschke.

   The author would also like to thank the Calendaring and Scheduling
   Consortium for advice with this specification and for organizing
   interoperability testing events to help refine it.

Author's Address

   Kenneth Murchison
   Carnegie Mellon University
   5000 Forbes Avenue
   Pittsburgh, PA  15213
   United States of America

   Phone: +1-412-268-1982
   Email: murch@andrew.cmu.edu













Murchison                    Standards Track                   [Page 28]
</pre>
</body></html>