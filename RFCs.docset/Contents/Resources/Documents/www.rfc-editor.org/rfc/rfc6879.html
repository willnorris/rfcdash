<html><head></head><body><pre>Internet Engineering Task Force (IETF)                          S. Jiang
Request for Comments: 6879                                        B. Liu
Category: Informational                    Huawei Technologies Co., Ltd.
ISSN: 2070-1721                                             B. Carpenter
                                                  University of Auckland
                                                           February 2013


             <span class="h1">IPv6 Enterprise Network Renumbering Scenarios,</span>
                      <span class="h1">Considerations, and Methods</span>

Abstract

   This document analyzes events that cause renumbering and describes
   the current renumbering methods.  These are described in three
   categories: those applicable during network design, those applicable
   during preparation for renumbering, and those applicable during the
   renumbering operation.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="./rfc5741#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc6879">http://www.rfc-editor.org/info/rfc6879</a>.

















<span class="grey">Jiang, et al.                 Informational                     [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Enterprise Network Illustration for Renumbering .................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Enterprise Network Renumbering Scenario Categories ..............<a href="#page-5">5</a>
      <a href="#section-3.1">3.1</a>. Renumbering Caused by External Network Factors .............<a href="#page-5">5</a>
      <a href="#section-3.2">3.2</a>. Renumbering Caused by Internal Network Factors .............<a href="#page-5">5</a>
   <a href="#section-4">4</a>. Network Renumbering Considerations and Current Methods ..........<a href="#page-6">6</a>
      <a href="#section-4.1">4.1</a>. Considerations and Current Methods during Network Design ...<a href="#page-6">6</a>
      4.2. Considerations and Current Methods for the
           Preparation of Renumbering ................................<a href="#page-10">10</a>
      4.3. Considerations and Current Methods during
           Renumbering Operation .....................................<a href="#page-11">11</a>
   <a href="#section-5">5</a>. Security Considerations ........................................<a href="#page-13">13</a>
   <a href="#section-6">6</a>. Acknowledgements ...............................................<a href="#page-14">14</a>
   <a href="#section-7">7</a>. References .....................................................<a href="#page-14">14</a>
      <a href="#section-7.1">7.1</a>. Normative References ......................................<a href="#page-14">14</a>
      <a href="#section-7.2">7.2</a>. Informative References ....................................<a href="#page-15">15</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   Site renumbering is difficult.  Network managers frequently attempt
   to avoid future renumbering by numbering their network resources from
   Provider-Independent (PI) address space.  However, widespread use of
   PI address space would aggravate BGP4 scaling problems [<a href="./rfc4116" title='"IPv4 Multihoming Practices and Limitations"'>RFC4116</a>] and,
   depending on Regional Internet Registry (RIR) policies, PI space is
   not always available for enterprises of all sizes.  Therefore, it is
   desirable to develop mechanisms that simplify IPv6 renumbering for
   enterprises.

   This document is an analysis of IPv6 site renumbering for enterprise
   networks.  It undertakes scenario descriptions, including




<span class="grey">Jiang, et al.                 Informational                     [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   documentation of current capabilities and existing practices.  The
   reader is assumed to be familiar with [<a href="./rfc4192" title='"Procedures for Renumbering an IPv6 Network without a Flag Day"'>RFC4192</a>] and [<a href="./rfc5887" title='"Renumbering Still Needs Work"'>RFC5887</a>].
   Proposals for new technology and methods are out of scope.

   Since IPv4 and IPv6 are logically separate from the perspective of
   renumbering, regardless of overlapping of the IPv4/IPv6 networks or
   devices, this document focuses on IPv6 only, leaving IPv4 out of
   scope.  Dual-stack networks or IPv4/IPv6 transition scenarios are out
   of scope as well.

   This document focuses on enterprise network renumbering; however,
   most of the analysis is also applicable to ISP network renumbering.
   Renumbering in home networks is out of scope, but it can also benefit
   from the analysis in this document.

   The concept of an enterprise network and a typical network
   illustration are introduced first.  Then, current renumbering methods
   are introduced according to the following categories: those
   applicable during network design, those applicable during preparation
   for renumbering, and those applicable during the renumbering
   operation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Enterprise%20Network%20Illustration%20for%20Renumbering"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Enterprise Network Illustration for Renumbering</span>

   An Enterprise Network, as defined in [<a href="./rfc4057" title='"IPv6 Enterprise Network Scenarios"'>RFC4057</a>], is a network that has
   multiple internal links, has one or more router connections to one or
   more Providers, and is actively managed by a network operations
   entity.

   Figure 1 provides a sample enterprise network architecture for a
   simple case.  Those entities mainly affected by renumbering are
   illustrated:

   * Gateway (Border router, firewall, web cache, etc.)

   * Application server (for internal or external users)

   * DNS and DHCP servers

   * Routers

   * Hosts (desktops, etc.)









<span class="grey">Jiang, et al.                 Informational                     [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


                      Uplink 1            Uplink 2
                         |                   |
                     +---+---+           +---+---+
               +---- |Gateway| --------- |Gateway| -----+
               |     +-------+           +-------+      |
               |          Enterprise Network            |
               |   +------+     +------+    +------+    |
               |   | APP  |     |DHCPv6|    |  DNS |    |
               |   |Server|     |Server|    |Server|    |
               |   +---+--+     +---+--+    +--+---+    |
               |       |            |          |        |
               |    ---+--+---------+------+---+-       |
               |          |                |            |
               |       +--+---+        +---+--+         |
               |       |Router|        |Router|         |
               |       +--+---+        +---+--+         |
               |          |                |            |
               |     -+---+----+-------+---+--+-        |
               |      |        |       |      |         |
               |    +-+--+  +--+-+  +--+-+  +-+--+      |
               |    |Host|  |Host|  |Host|  |Host|      |
               |    +----+  +----+  +----+  +----+      |
               +----------------------------------------+

               Figure 1.  Enterprise Network Illustration

   Address reconfiguration is fulfilled either by the Dynamic Host
   Configuration Protocol for IPv6 (DHCPv6) or by Neighbor Discovery
   (ND) for IPv6 protocols.  During a renumbering event, the Domain Name
   Service (DNS) records need to be synchronized while routing tables,
   Access Control Lists (ACLs), and IP filtering tables in various
   devices also need to be updated.  It is taken for granted that
   applications will work entirely on the basis of DNS names, but any
   direct dependencies on IP addresses in application-layer entities
   must also be updated.

   The issue of static addresses is described in a dedicated document
   [<a href="./rfc6866" title='"Problem Statement for Renumbering IPv6 Hosts with Static Addresses in Enterprise Networks"'>RFC6866</a>].

   The emerging cloud-based enterprise network architecture might be
   different than Figure 1.  However, it is out of the scope of this
   document since it is far from mature and has not been widely deployed
   yet.

   It is assumed that IPv6 enterprise networks are IPv6-only or dual-
   stack in which a logical IPv6 plane is independent from IPv4.  As
   mentioned above, IPv4/IPv6 coexistence scenarios are out of scope.




<span class="grey">Jiang, et al.                 Informational                     [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   This document focuses on routable unicast addresses; link-local,
   multicast, and anycast addresses are also out of scope.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Enterprise%20Network%20Renumbering%20Scenario%20Categories"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Enterprise Network Renumbering Scenario Categories</span>

   In this section, we divide enterprise network renumbering scenarios
   into two categories defined by external and internal network factors,
   which require renumbering for different reasons.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20Renumbering%20Caused%20by%20External%20Network%20Factors"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Renumbering Caused by External Network Factors</span>

   The following ISP uplink-related events can cause renumbering:

   o  The enterprise network switches to a new ISP.  When this occurs,
      the enterprise stops numbering its resources from the prefix
      allocated by the old ISP and renumbers its resources from the
      prefix allocated by the new ISP.

      When the enterprise switches ISPs, a "flag day" renumbering event
      [<a href="./rfc4192" title='"Procedures for Renumbering an IPv6 Network without a Flag Day"'>RFC4192</a>] may be averted if, during a transitional period, the
      enterprise network may number its resources from either prefix.
      One way to facilitate such a transitional period is for the
      enterprise to contract service from both ISPs during the
      transition.

   o  The renumbering event can be initiated by receiving new prefixes
      from the same uplink.  This might happen if the enterprise network
      is switched to a different location within the network topology of
      the same ISP due to various considerations, such as commercial,
      performance or services reasons, etc.  Alternatively, the ISP
      itself might be renumbered due to topology changes or migration to
      a different or additional prefix.  These ISP renumbering events
      would initiate enterprise network renumbering events, of course.

   o  The enterprise network adds a new uplink(s) for multihoming
      purposes.  This might not be a typical renumbering case because
      the original addresses will not be changed.  However, initial
      numbering may be considered as a special renumbering event.  The
      enterprise network removes uplink(s) or old prefixes.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20Renumbering%20Caused%20by%20Internal%20Network%20Factors"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  Renumbering Caused by Internal Network Factors</span>

   o  As companies split, merge, grow, relocate, or reorganize, the
      enterprise network architectures might need to be rebuilt.  This
      will trigger partial or total internal renumbering.






<span class="grey">Jiang, et al.                 Informational                     [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   o  The enterprise network might proactively adopt a new address
      scheme, for example, by switching to a new transition mechanism or
      stage of a transition plan.

   o  The enterprise network might reorganize its topology or subnets.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Network%20Renumbering%20Considerations%20and%20Current%20Methods"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Network Renumbering Considerations and Current Methods</span>

   In order to carry out renumbering in an enterprise network,
   systematic planning and administrative preparation are needed.
   Careful planning and preparation could make the renumbering process
   smoother.

   This section describes current considerations and methods for
   enterprise renumbering, chosen among existing mechanisms.  There are
   known gaps analyzed by [<a href="#ref-GAP-ANALYSIS">GAP-ANALYSIS</a>] and [<a href="./rfc6866" title='"Problem Statement for Renumbering IPv6 Hosts with Static Addresses in Enterprise Networks"'>RFC6866</a>].  If these gaps
   are filled in the future, enterprise renumbering could be processed
   more automatically, with fewer issues.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Considerations%20and%20Current%20Methods%20during%20Network%20Design"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Considerations and Current Methods during Network Design</span>

   This section describes the considerations or issues relevant to
   renumbering that a network architect should carefully plan when
   building or designing a new network.

   - Prefix Delegation (PD)

   In a large or a multisite enterprise network, the prefix should be
   carefully managed, particularly for renumbering events.  Prefix
   information needs to be delegated from router to router.  The DHCPv6
   PD options ([<a href="./rfc3633" title='"IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6"'>RFC3633</a>] and [<a href="./rfc6603" title='"Prefix Exclude Option for DHCPv6-based Prefix Delegation"'>RFC6603</a>]) provide a mechanism for
   automated delegation of IPv6 prefixes.  Normally, DHCPv6 PD options
   are used between the internal enterprise routers; for example, a
   router receives a prefix(es) from its upstream router (a border
   gateway or edge router, etc.) through DHCPv6 PD options and then
   advertises it (them) to the local hosts through Router Advertisement
   (RA) messages.

   - Usage of Fully Qualified Domain Names (FQDNs)

   In general, FQDNs are recommended to be used to configure network
   connectivity, such as tunnels, servers, etc.  The capability to use
   FQDNs as endpoint names has been standardized in several RFCs (e.g.,
   for IPsec [<a href="./rfc5996" title='"Internet Key Exchange Protocol Version 2 (IKEv2)"'>RFC5996</a>]) although many system/network administrators do
   not realize that it is there and it works well as a way to avoid
   manual modification during renumbering.





<span class="grey">Jiang, et al.                 Informational                     [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   Note that using FQDNs would rely on DNS systems.  For a link-local
   network that does not have a DNS system, multicast DNS [<a href="./rfc6762" title='"Multicast DNS"'>RFC6762</a>]
   could be utilized.  For some specific circumstances, using FQDNs
   might not be chosen if adding DNS service in the node/network would
   cause undesired complexity or issues.

   Service discovery protocols such as the Service Location Protocol
   [<a href="./rfc2608" title='"Service Location Protocol, Version 2"'>RFC2608</a>], multicast DNS with Service Records (SRVs), and DNS Service
   Discovery [<a href="./rfc6763" title='"DNS-Based Service Discovery"'>RFC6763</a>] use names and can reduce the number of places
   that IP addresses need to be configured.  However, it should be noted
   that these protocols are normally used link-local only.

   Network designers generally have little control over the design of
   application software.  However, it is important to avoid any software
   that has a built-in dependency on IP addresses instead of FQDNs
   [<a href="./rfc6866" title='"Problem Statement for Renumbering IPv6 Hosts with Static Addresses in Enterprise Networks"'>RFC6866</a>].

   - Usage of Parameterized Address Configuration

   Besides DNS records, IP addresses might also be configured in many
   other places such as ACLs, various IP filters, various kinds of text-
   based configuration files, etc.

   In some cases, one IP address can be defined as a value once, and
   then the administrators can use either keywords or variables to call
   the value in other places such as a sort of internal inheritance CLI
   (command line interface) or other local configuration.  Among the
   real current devices, some routers support defining multiple loopback
   interfaces that can be called in other configurations.  For example,
   when defining a tunnel, it can call the defined loopback interface to
   use its address as the local address of the tunnel.

   This kind of parameterized address configuration is recommended,
   since it makes managing a renumbering event easier by reducing the
   number of places where a device's configuration must be updated.

   - Usage of Unique Local Addresses (ULAs)

   ULAs are defined in [<a href="./rfc4193" title='"Unique Local IPv6 Unicast Addresses"'>RFC4193</a>] as PI prefixes.  Since there is a
   40-bit pseudorandom field in the ULA prefix, there is no practical
   risk of collision (please refer to <a href="./rfc4193#section-3.2.3">Section 3.2.3 in [RFC4193]</a> for
   more detail).  For enterprise networks, using ULA simultaneously with
   PA addresses can provide a local routing plane logically separated
   from the global routing plane.  The benefit is to ensure stable and
   specific local communication regardless of any ISP uplink failure.
   This benefit is especially meaningful for renumbering.  It mainly
   includes three use cases described below.




<span class="grey">Jiang, et al.                 Informational                     [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   o  During the transition period, it is desirable to isolate local
      communication changes in the global routing plane.  If we use ULA
      for the local communication, this isolation is achieved.

   o  Enterprise administrators might want to avoid the need to renumber
      their internal-only, private nodes when they have to renumber the
      PA addresses of the whole network because of changing ISPs, ISPs
      restructuring their address allocation, or any other reasons.  In
      these situations, a ULA is an effective tool for the internal-only
      nodes.

   o  ULAs can be a way of avoiding renumbering from having an impact on
      multicast.  In most deployments, multicast is only used internally
      (intra-domain), and the addresses used for multicast sources and
      Rendezvous Points need not be reachable nor routable externally.
      Hence, one may, at least internally, make use of ULAs for
      multicast-specific infrastructure.

   - Address Types

   This document focuses on the dynamically configured global unicast
   addresses in enterprise networks.  They are the targets of
   renumbering events.

   Manually configured addresses are not scalable in medium to large
   sites; hence, they should be avoided for both network elements and
   application servers [<a href="./rfc6866" title='"Problem Statement for Renumbering IPv6 Hosts with Static Addresses in Enterprise Networks"'>RFC6866</a>].

   - Address configuration models

   In IPv6 networks, there are two autoconfiguration models for address
   assignment after each host obtains a link-local address: Stateless
   Address Autoconfiguration (SLAAC) [<a href="./rfc4862" title='"IPv6 Stateless Address Autoconfiguration"'>RFC4862</a>] by ND [<a href="./rfc4861" title='"Neighbor Discovery for IP version 6 (IPv6)"'>RFC4861</a>] and
   stateful address configuration by DHCPv6 [<a href="./rfc3315" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>RFC3315</a>].  In the latest
   work, DHCPv6 may also support the host-generated address model by
   assigning a prefix through DHCPv6 messages [<a href="#ref-PREFIX-DHCPV6">PREFIX-DHCPV6</a>].

   SLAAC is considered to support easy renumbering by broadcasting an RA
   message with a new prefix.  DHCPv6 can also trigger the renumbering
   process by sending unicast RECONFIGURE messages, though it might
   cause a large number of interactions between hosts and the DHCPv6
   server.

   This document has no preference between the SLAAC and DHCPv6 address
   configuration models.  It is the network architect's job to decide
   which configuration model is employed.  However, it should be noticed
   that using DHCPv6 and SLAAC together within one network, especially
   in one subnet, might cause operational issues.  For example, some



<span class="grey">Jiang, et al.                 Informational                     [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   hosts use DHCPv6 as the default configuration model while some use
   ND.  Then, the host's address configuration model depends on the
   policies of operating systems and cannot be controlled by the
   network.  Section 5.1 of [<a href="#ref-GAP-ANALYSIS">GAP-ANALYSIS</a>] discusses more details on
   this topic.  So, in general, this document recommends using DHCPv6 or
   SLAAC independently in different subnets.

   However, since DHCPv6 is also used to configure many other network
   parameters, there are ND and DHCPv6 coexistence scenarios.
   Combinations of address configuration models might coexist within a
   single enterprise network.  [<a href="#ref-SAVI" title='"SAVI for Mixed Address Assignment Methods Scenario"'>SAVI</a>] provides recommendations to avoid
   collisions and to review collision handling in such scenarios.

   - DNS

   Although the A6 DNS record model [<a href="./rfc2874" title='"DNS Extensions to Support IPv6 Address Aggregation and Renumbering"'>RFC2874</a>] was designed for easier
   renumbering, it left many unsolved technical issues [<a href="./rfc3364" title='"Tradeoffs in Domain Name System (DNS) Support for Internet Protocol version 6 (IPv6)"'>RFC3364</a>].
   Therefore, it has been moved to Historic status [<a href="./rfc6563" title='"Moving A6 to Historic Status"'>RFC6563</a>] and should
   not be used.

   Often, a small site depends on its ISP's DNS system rather than
   maintaining its own.  When renumbering, this requires administrative
   coordination between the site and its ISP.

   It is recommended that the site have an automatic and systematic
   procedure for updating/synchronizing its DNS records, including both
   forward and reverse mapping.  In order to simplify the operational
   procedure, the network architect should combine the forward and
   reverse DNS updates in a single procedure.  A manual on-demand
   updating model does not scale and increases the chance of errors.
   Either a database-driven mechanism, a secure dynamic DNS update
   [<a href="./rfc3007" title='"Secure Domain Name System (DNS) Dynamic Update"'>RFC3007</a>], or both could be used.

   A dynamic DNS update can be provided by the DHCPv6 client or by the
   server on behalf of individual hosts.  [<a href="./rfc4704" title='"The Dynamic Host Configuration Protocol for IPv6 (DHCPv6) Client Fully Qualified Domain Name (FQDN) Option"'>RFC4704</a>] defines a DHCPv6
   option to be used by DHCPv6 clients and servers to exchange
   information about the client's FQDN and about who has the
   responsibility for updating the DNS with the associated AAAA and PTR
   (Pointer Record) RRs (Resource Records).  For example, if a client
   wants the server to update the FQDN-address mapping in the DNS
   server, it can include the Client FQDN option with proper settings in
   the SOLICIT with Rapid Commit, REQUEST, RENEW, and REBIND message
   originated by the client.  When the DHCPv6 server gets this option,
   it can use a secure dynamic DNS update on behalf of the client.  This
   document suggests use of this FQDN option.  However, since it is a
   DHCPv6 option, only the DHCP-managed hosts can make use of it.  In
   SLAAC mode, hosts need either to use a secure dynamic DNS update




<span class="grey">Jiang, et al.                 Informational                     [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   directly, or to register addresses on a registration server.  This
   could in fact be a DHCPv6 server (as described in [<a href="#ref-ADDR-REG">ADDR-REG</a>]); then
   the server would update corresponding DNS records.

   - Security

   Any automatic renumbering scheme has a potential exposure to
   hijacking.  A malicious entity in the network could forge prefixes to
   renumber the hosts, so proper network security mechanisms are needed.
   Further details are in the Security Considerations section below.

   - Miscellaneous

   A site or network should also avoid embedding addresses from other
   sites or networks in its own configuration data.  Instead, the FQDNs
   should be used.  Thus, connections can be restored after renumbering
   events at other sites.  This also applies to host-based connectivity.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.2.%20%20Considerations%20and%20Current%20Methods%20for%20the%20Preparation%20of"></a><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Considerations and Current Methods for the Preparation of</span>
<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/Renumbering"></a>      Renumbering</span>

   In ND, it is not possible to reduce a prefix's lifetime to below two
   hours.  So, renumbering should not be an unplanned sudden event.
   This issue could only be avoided by early planning and preparation.

   This section describes several recommendations for the preparation of
   an enterprise renumbering event.  By adopting these recommendations,
   a site could be renumbered more easily.  However, these
   recommendations might increase the daily traffic, server load, or
   burden of network operation.  Therefore, only those networks that are
   expected to be renumbered soon, or very frequently, should adopt
   these recommendations, with balanced consideration between daily cost
   and renumbering cost.

   - Reduce the address preferred time or valid time or both

   Long-lifetime addresses might cause issues for renumbering events.
   Particularly, some offline hosts might reconnect using these
   addresses after renumbering events.  Shorter, preferred lifetimes
   with relatively long valid lifetimes may allow short transition
   periods for renumbering events and avoid frequent address renewals.

   - Reduce the DNS record Time to Live (TTL) on the local DNS server

   The DNS AAAA RR TTL on the local DNS server should be manipulated to
   ensure that stale addresses are not cached.





<span class="grey">Jiang, et al.                 Informational                    [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   Recent research [<a href="#ref-BA2011" title='"Reducing DNS Caching"'>BA2011</a>] [<a href="#ref-JSBM2002" title='"DNS Performance and the Effectiveness of Caching"'>JSBM2002</a>] indicates that it is both
   practical and reasonable for A, AAAA, and PTRs that belong to leaf
   nodes of the DNS (i.e., not including the DNS root or DNS top-level
   domains) to be configured with very short DNS TTL values, not only
   during renumbering events but also for longer-term operation.

   - Reduce the DNS configuration lifetime on the hosts

   Since the DNS server could be renumbered as well, the DNS
   configuration lifetime of the hosts should also be reduced if
   renumbering events are expected.  In ND, the DNS configuration can be
   done through reducing the lifetime value in the Recursive DNS Server
   (RDNSS) option [<a href="./rfc6106" title='"IPv6 Router Advertisement Options for DNS Configuration"'>RFC6106</a>].  In DHCPv6, the DNS configuration option
   specified in [<a href="./rfc3646" title='"DNS Configuration options for Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>RFC3646</a>] doesn't provide a lifetime attribute, but we
   can reduce the DHCPv6 client lease time to achieve a similar effect.

   - Identify long-living sessions

   Any applications that maintain very long transport connections (hours
   or days) should be identified in advance, if possible.  Such
   applications will need special handling during renumbering, so it is
   important to know that they exist.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.3.%20%20Considerations%20and%20Current%20Methods%20during%20Renumbering%20Operation"></a><a class="selflink" href="#section-4.3" id="section-4.3">4.3</a>.  Considerations and Current Methods during Renumbering Operation</span>

   Renumbering events are not instantaneous events.  Normally, there is
   transition period in which both the old prefix and the new prefix are
   used in the site.  Better network design and management, better
   preparation, and a longer transition period are helpful to reduce the
   issues during a renumbering operation.

   - Within/Without a flag day

   As is described in [<a href="./rfc4192" title='"Procedures for Renumbering an IPv6 Network without a Flag Day"'>RFC4192</a>] "a 'flag day' is a procedure in which
   the network, or a part of it, is changed during a planned outage, or
   suddenly, causing an outage while the network recovers".

   If a renumbering event is processed within a flag day, the network
   service/connectivity will be unavailable for a period until the
   renumbering event is completed.  It is efficient and provides
   convenience for network operation and management.  However, a network
   outage is usually unacceptable for end users and enterprises.  A
   renumbering procedure without a flag day provides smooth address
   switching, but much more operational complexity and difficulty is
   introduced.






<span class="grey">Jiang, et al.                 Informational                    [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   - Transition period

   If a renumbering transition period is longer than all address
   lifetimes, after which the address leases expire, each host will
   automatically pick up its new IP address.  In this case, it would be
   the DHCPv6 server or RA itself that automatically accomplishes client
   renumbering.

   Address deprecation should be associated with the deprecation of
   associated DNS records.  The DNS records should be deprecated as
   early as possible, before the addresses themselves.

   - Network initiative enforced renumbering

   If the network has to enforce renumbering before address leases
   expire, the network should initiate DHCPv6 RECONFIGURE messages.  For
   some operating systems such as Windows 7, if the hosts receive RA
   messages with ManagedFlag=0, they will release the DHCPv6 addresses
   and utilize SLAAC according to the prefix information in the RA
   messages, so this could be another enforcement method for some
   specific scenarios.

   - Impact on main and branch sites

   Renumbering in the main site might cause impact on branch site
   communications, and vice versa.  The routes, ingress filtering of the
   site's gateways, and DNS might need to be updated.  This needs
   careful planning and organizing.

   - DNS record update and DNS configuration on hosts

   DNS records on the local DNS server should be updated if hosts are
   renumbered.  If the site depends on an ISP's DNS system, it should
   report the new hosts' DNS records to its ISP.  During the transition
   period, both old and new DNS records are valid.  If the TTLs of DNS
   records are shorter than the transition period, an administrative
   operation might not be necessary.

   DNS configuration on hosts should be updated if local recursive DNS
   servers are renumbered.  During the transition period, both old and
   new DNS server addresses might coexist on the hosts.  If the lifetime
   of DNS configuration is shorter than the transition period, name
   resolving failure may be reduced to a minimum.








<span class="grey">Jiang, et al.                 Informational                    [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   - Tunnel concentrator renumbering

   A tunnel concentrator itself might be renumbered.  This change should
   be reconfigured in relevant hosts or routers, unless the
   configuration of the tunnel concentrator was based on FQDN.

   For IPsec, Internet Key Exchange Protocol version 2 (IKEv2) [<a href="./rfc5996" title='"Internet Key Exchange Protocol Version 2 (IKEv2)"'>RFC5996</a>]
   defines the ID_FQDN Identification type, which could be used to
   identify an IPsec VPN concentrator associated with a site's domain
   name.  For current practice, the community needs to change its bad
   habit of using IPsec in an address-oriented way, and renumbering is
   one of the main reasons for that.

   - Connectivity session survivability

   During the renumbering operations, connectivity sessions in the IP
   layer would break if the old address is deprecated before the session
   ends.  However, the upper-layer sessions can survive by using session
   survivability technologies, such as Stanza Headers and Internet
   Metadata 6 (SHIM6) [<a href="./rfc5533" title='"Shim6: Level 3 Multihoming Shim Protocol for IPv6"'>RFC5533</a>].  As mentioned above, some long-living
   applications may need to be handled specially.

   - Verification of success

   The renumbering operation should end with a thorough check that all
   network elements and hosts are using only the new prefixes and that
   network management and monitoring systems themselves are still
   operating correctly.  A database clean up may also be needed.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Security%20Considerations"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Security Considerations</span>

   Any automatic renumbering scheme has a potential exposure to
   hijacking by an insider attack.  For attacks on ND, SEcure Neighbor
   Discovery (SEND) [<a href="./rfc3971" title='"SEcure Neighbor Discovery (SEND)"'>RFC3971</a>] is a possible solution, but it is complex
   and there is almost no real deployment at the time of writing.
   Compared to the nontrivial deployment of SEND, RA-Guard [<a href="./rfc6105" title='"IPv6 Router Advertisement Guard"'>RFC6105</a>] is
   a lightweight alternative that focuses on preventing rogue router
   advertisements in a network.  However, it is also not widely deployed
   at the time when this memo was published.

   For DHCPv6, there are built-in secure mechanisms (like Secure DHCPv6
   [<a href="#ref-SECURE-DHCPV6">SECURE-DHCPV6</a>]), and authentication of DHCPv6 messages [<a href="./rfc3315" title='"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"'>RFC3315</a>]
   could be utilized.  However, these security mechanisms also have not
   been verified by widespread deployment at the time of writing.







<span class="grey">Jiang, et al.                 Informational                    [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   A site that is listed by IP address in a blacklist can escape that
   list by renumbering itself.  However, the new prefix might be back on
   a blacklist rather soon if the root cause for being added to such a
   list is not corrected.  In practice, the cost of renumbering will
   typically be much larger than the cost of getting off the blacklist.

   A Dynamic DNS update might bring risk of a Denial-of-Service (DoS)
   attack to the DNS server.  So, along with the update authentication,
   session filtering/limitation might also be needed.

   The "make-before-break" approach of [<a href="./rfc4192" title='"Procedures for Renumbering an IPv6 Network without a Flag Day"'>RFC4192</a>] requires the routers to
   keep advertising the old prefixes for some time.  However, if the ISP
   changes the prefixes very frequently, the coexistence of old and new
   prefixes might cause potential risk to the enterprise routing system,
   since the old address relevant route path might already be invalid
   and the routing system just doesn't know it.  However, normally,
   enterprise scenarios don't involve this extreme situation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Acknowledgements"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Acknowledgements</span>

   This work is inspired by <a href="./rfc5887">RFC 5887</a>; thank you to the authors (Randall
   Atkinson and Hannu Flinck).  Useful ideas were also presented in
   documents by Tim Chown and Fred Baker.  The authors also want to
   thank Wesley George, Olivier Bonaventure, Lee Howard, Ronald Bonica,
   other 6renum members, and several reviewers for their valuable
   comments.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20References"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.1.%20%20Normative%20References"></a><a class="selflink" href="#section-7.1" id="section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC2608">RFC2608</a>]   Guttman, E., Perkins, C., Veizades, J., and M. Day,
               "Service Location Protocol, Version 2", <a href="./rfc2608">RFC 2608</a>, June
               1999.

   [<a id="ref-RFC3007">RFC3007</a>]   Wellington, B., "Secure Domain Name System (DNS) Dynamic
               Update", <a href="./rfc3007">RFC 3007</a>, November 2000.

   [<a id="ref-RFC3315">RFC3315</a>]   Droms, R., Ed., Bound, J., Volz, B., Lemon, T., Perkins,
               C., and M. Carney, "Dynamic Host Configuration Protocol
               for IPv6 (DHCPv6)", <a href="./rfc3315">RFC 3315</a>, July 2003.

   [<a id="ref-RFC3633">RFC3633</a>]   Troan, O. and R. Droms, "IPv6 Prefix Options for Dynamic
               Host Configuration Protocol (DHCP) version 6", <a href="./rfc3633">RFC 3633</a>,
               December 2003.






<span class="grey">Jiang, et al.                 Informational                    [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   [<a id="ref-RFC3646">RFC3646</a>]   Droms, R., Ed., "DNS Configuration options for Dynamic
               Host Configuration Protocol for IPv6 (DHCPv6)", <a href="./rfc3646">RFC 3646</a>,
               December 2003.

   [<a id="ref-RFC3971">RFC3971</a>]   Arkko, J., Ed., Kempf, J., Zill, B., and P. Nikander,
               "SEcure Neighbor Discovery (SEND)", <a href="./rfc3971">RFC 3971</a>, March 2005.

   [<a id="ref-RFC4057">RFC4057</a>]   Bound, J., Ed., "IPv6 Enterprise Network Scenarios", <a href="./rfc4057">RFC</a>
               <a href="./rfc4057">4057</a>, June 2005.

   [<a id="ref-RFC4193">RFC4193</a>]   Hinden, R. and B. Haberman, "Unique Local IPv6 Unicast
               Addresses", <a href="./rfc4193">RFC 4193</a>, October 2005.

   [<a id="ref-RFC4704">RFC4704</a>]   Volz, B., "The Dynamic Host Configuration Protocol for
               IPv6 (DHCPv6) Client Fully Qualified Domain Name (FQDN)
               Option", <a href="./rfc4704">RFC 4704</a>, October 2006.

   [<a id="ref-RFC4861">RFC4861</a>]   Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
               "Neighbor Discovery for IP version 6 (IPv6)", <a href="./rfc4861">RFC 4861</a>,
               September 2007.

   [<a id="ref-RFC4862">RFC4862</a>]   Thomson, S., Narten, T., and T. Jinmei, "IPv6 Stateless
               Address Autoconfiguration", <a href="./rfc4862">RFC 4862</a>, September 2007.

   [<a id="ref-RFC5996">RFC5996</a>]   Kaufman, C., Hoffman, P., Nir, Y., and P. Eronen,
               "Internet Key Exchange Protocol Version 2 (IKEv2)", <a href="./rfc5996">RFC</a>
               <a href="./rfc5996">5996</a>, September 2010.

   [<a id="ref-RFC6106">RFC6106</a>]   Jeong, J., Park, S., Beloeil, L., and S. Madanapalli,
               "IPv6 Router Advertisement Options for DNS
               Configuration", <a href="./rfc6106">RFC 6106</a>, November 2010.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.2.%20%20Informative%20References"></a><a class="selflink" href="#section-7.2" id="section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-RFC2874">RFC2874</a>]   Crawford, M. and C. Huitema, "DNS Extensions to Support
               IPv6 Address Aggregation and Renumbering", <a href="./rfc2874">RFC 2874</a>, July
               2000.

   [<a id="ref-RFC3364">RFC3364</a>]   Austein, R., "Tradeoffs in Domain Name System (DNS)
               Support for Internet Protocol version 6 (IPv6)", <a href="./rfc3364">RFC</a>
               <a href="./rfc3364">3364</a>, August 2002.

   [<a id="ref-RFC4116">RFC4116</a>]   Abley, J., Lindqvist, K., Davies, E., Black, B., and V.
               Gill, "IPv4 Multihoming Practices and Limitations", <a href="./rfc4116">RFC</a>
               <a href="./rfc4116">4116</a>, July 2005.






<span class="grey">Jiang, et al.                 Informational                    [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   [<a id="ref-RFC4192">RFC4192</a>]   Baker, F., Lear, E., and R. Droms, "Procedures for
               Renumbering an IPv6 Network without a Flag Day", <a href="./rfc4192">RFC</a>
               <a href="./rfc4192">4192</a>, September 2005.

   [<a id="ref-RFC5533">RFC5533</a>]   Nordmark, E. and M. Bagnulo, "Shim6: Level 3 Multihoming
               Shim Protocol for IPv6", <a href="./rfc5533">RFC 5533</a>, June 2009.

   [<a id="ref-RFC5887">RFC5887</a>]   Carpenter, B., Atkinson, R., and H. Flinck, "Renumbering
               Still Needs Work", <a href="./rfc5887">RFC 5887</a>, May 2010.

   [<a id="ref-RFC6105">RFC6105</a>]   Levy-Abegnoli, E., Van de Velde, G., Popoviciu, C., and
               J. Mohacsi, "IPv6 Router Advertisement Guard", <a href="./rfc6105">RFC 6105</a>,
               February 2011.

   [<a id="ref-RFC6563">RFC6563</a>]   Jiang, S., Conrad, D., and B. Carpenter, "Moving A6 to
               Historic Status", <a href="./rfc6563">RFC 6563</a>, March 2012.

   [<a id="ref-RFC6603">RFC6603</a>]   Korhonen, J., Ed., Savolainen, T., Krishnan, S., and O.
               Troan, "Prefix Exclude Option for DHCPv6-based Prefix
               Delegation", <a href="./rfc6603">RFC 6603</a>, May 2012.

   [<a id="ref-RFC6762">RFC6762</a>]   Cheshire, S. and M. Krochmal, "Multicast DNS", <a href="./rfc6762">RFC 6762</a>,
               February 2013.

   [<a id="ref-RFC6763">RFC6763</a>]   Cheshire, S. and M. Krochmal, "DNS-Based Service
               Discovery", <a href="./rfc6763">RFC 6763</a>, February 2013.

   [<a id="ref-RFC6866">RFC6866</a>]   Carpenter, B., and S. Jiang, "Problem Statement for
               Renumbering IPv6 Hosts with Static Addresses in
               Enterprise Networks", <a href="./rfc6866">RFC 6866</a>, February 2013.

   [<a id="ref-ADDR-REG">ADDR-REG</a>]
               Jiang, S., Chen, G., and S. Krishnan "A Generic IPv6
               Addresses Registration Solution Using DHCPv6", Work in
               Progress, February 2013.

   [<a id="ref-BA2011">BA2011</a>]    S. Bhatti, and R. Atkinson, "Reducing DNS Caching", Proc.
               14th IEEE Global Internet Symposium (GI2011), Shanghai,
               China, April 15 2011.

   [<a id="ref-GAP-ANALYSIS">GAP-ANALYSIS</a>]
               Liu, B., Jiang, S., Carpenter, B. Venaas, S., and W.
               George, "IPv6 Site Renumbering Gap Analysis", Work in
               Progress, December 2012.







<span class="grey">Jiang, et al.                 Informational                    [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey"><a href="./rfc6879">RFC 6879</a>                IPv6 Enterprise Networks           February 2013</span>


   [<a id="ref-JSBM2002">JSBM2002</a>]  J. Jung, E. Sit, H. Balakrishnan, and R. Morris, "DNS
               Performance and the Effectiveness of Caching", IEEE/ACM
               Transactions on Networking, 10(5):589-603, 2002.

   [<a id="ref-PREFIX-DHCPV6">PREFIX-DHCPV6</a>]
               Jiang, S., Xia, F., and B. Sarikaya, "Prefix Assignment
               in DHCPv6", Work in Progress, February 2013.

   [<a id="ref-SAVI">SAVI</a>]      Bi, J., Yao, G., Halpern, J., and E. Levy-Abegnoli, "SAVI
               for Mixed Address Assignment Methods Scenario", Work in
               Progress, November 2012.

   [<a id="ref-SECURE-DHCPV6">SECURE-DHCPV6</a>]
               Jiang, S., and S. Shen, <a href="https://www.google.com/search?sitesearch=datatracker.ietf.org%2Fdoc%2Fhtml%2F&amp;q=inurl:draft-+%22Secure+DHCPv6+Using+CGAs%22" style="text-decoration: none">"Secure DHCPv6 Using CGAs"</a>, Work
               in Progress, March 2012.

Authors' Addresses

   Sheng Jiang
   Huawei Technologies Co., Ltd.
   Q14, Huawei Campus
   No.156 Beiqing Rd.
   Hai-Dian District, Beijing 100095
   P.R. China

   EMail: jiangsheng@huawei.com


   Bing Liu
   Huawei Technologies Co., Ltd.
   Q14, Huawei Campus
   No.156 Beiqing Rd.
   Hai-Dian District, Beijing 100095
   P.R. China

   EMail: leo.liubing@huawei.com


   Brian Carpenter
   Department of Computer Science
   University of Auckland
   PB 92019
   Auckland, 1142
   New Zealand

   EMail: brian.e.carpenter@gmail.com





Jiang, et al.                 Informational                    [Page 17]
</pre>
</body></html>