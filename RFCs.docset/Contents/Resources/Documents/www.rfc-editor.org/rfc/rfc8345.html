<html><head></head><body><pre>Internet Engineering Task Force (IETF)                          A. Clemm
Request for Comments: 8345                                        Huawei
Category: Standards Track                                      J. Medved
ISSN: 2070-1721                                                    Cisco
                                                                R. Varga
                                               Pantheon Technologies SRO
                                                              N. Bahadur
                                                       Bracket Computing
                                                      H. Ananthakrishnan
                                                           Packet Design
                                                                  X. Liu
                                                                   Jabil
                                                              March 2018


                <span class="h1">A YANG Data Model for Network Topologies</span>

Abstract

   This document defines an abstract (generic, or base) YANG data model
   for network/service topologies and inventories.  The data model
   serves as a base model that is augmented with technology-specific
   details in other, more specific topology and inventory data models.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc7841#section-2">SectionÂ 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8345">https://www.rfc-editor.org/info/rfc8345</a>.














<span class="grey">Clemm, et al.                Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





































<span class="grey">Clemm, et al.                Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. Key Words .......................................................<a href="#page-8">8</a>
   <a href="#section-3">3</a>. Definitions and Abbreviations ...................................<a href="#page-9">9</a>
   <a href="#section-4">4</a>. Model Structure Details .........................................<a href="#page-9">9</a>
      <a href="#section-4.1">4.1</a>. Base Network Model .........................................<a href="#page-9">9</a>
      <a href="#section-4.2">4.2</a>. Base Network Topology Data Model ..........................<a href="#page-12">12</a>
      <a href="#section-4.3">4.3</a>. Extending the Data Model ..................................<a href="#page-13">13</a>
      <a href="#section-4.4">4.4</a>. Discussion and Selected Design Decisions ..................<a href="#page-14">14</a>
           <a href="#section-4.4.1">4.4.1</a>. Container Structure ................................<a href="#page-14">14</a>
           <a href="#section-4.4.2">4.4.2</a>. Underlay Hierarchies and Mappings ..................<a href="#page-14">14</a>
           <a href="#section-4.4.3">4.4.3</a>. Dealing with Changes in Underlay Networks ..........<a href="#page-15">15</a>
           <a href="#section-4.4.4">4.4.4</a>. Use of Groupings ...................................<a href="#page-15">15</a>
           <a href="#section-4.4.5">4.4.5</a>. Cardinality and Directionality of Links ............<a href="#page-16">16</a>
           <a href="#section-4.4.6">4.4.6</a>. Multihoming and Link Aggregation ...................<a href="#page-16">16</a>
           <a href="#section-4.4.7">4.4.7</a>. Mapping Redundancy .................................<a href="#page-16">16</a>
           <a href="#section-4.4.8">4.4.8</a>. Typing .............................................<a href="#page-17">17</a>
           <a href="#section-4.4.9">4.4.9</a>. Representing the Same Device in Multiple Networks ..17
           4.4.10. Supporting Client-Configured and
                   System-Controlled Network Topologies ..............<a href="#page-18">18</a>
           <a href="#section-4.4.11">4.4.11</a>. Identifiers of String or URI Type .................<a href="#page-19">19</a>
   <a href="#section-5">5</a>. Interactions with Other YANG Modules ...........................<a href="#page-19">19</a>
   <a href="#section-6">6</a>. YANG Modules ...................................................<a href="#page-20">20</a>
      <a href="#section-6.1">6.1</a>. Defining the Abstract Network: ietf-network ...............<a href="#page-20">20</a>
      6.2. Creating Abstract Network Topology:
           ietf-network-topology .....................................<a href="#page-25">25</a>
   <a href="#section-7">7</a>. IANA Considerations ............................................<a href="#page-32">32</a>
   <a href="#section-8">8</a>. Security Considerations ........................................<a href="#page-33">33</a>
   <a href="#section-9">9</a>. References .....................................................<a href="#page-35">35</a>
      <a href="#section-9.1">9.1</a>. Normative References ......................................<a href="#page-35">35</a>
      <a href="#section-9.2">9.2</a>. Informative References ....................................<a href="#page-36">36</a>
   <a href="#appendix-A">Appendix A</a>. Model Use Cases .......................................<a href="#page-38">38</a>
     <a href="#appendix-A.1">A.1</a>. Fetching Topology from a Network Element ...................<a href="#page-38">38</a>
     <a href="#appendix-A.2">A.2</a>. Modifying TE Topology Imported from an Optical Controller ..38
     <a href="#appendix-A.3">A.3</a>. Annotating Topology for Local Computation ..................<a href="#page-39">39</a>
     A.4. SDN Controller-Based Configuration of Overlays on Top of
          Underlays ..................................................<a href="#page-39">39</a>
   <a href="#appendix-B">Appendix B</a>. Companion YANG Data Models for Implementations Not
               Compliant with NMDA ...................................<a href="#page-39">39</a>
     <a href="#appendix-B.1">B.1</a>. YANG Module for Network State ..............................<a href="#page-40">40</a>
     <a href="#appendix-B.2">B.2</a>. YANG Module for Network Topology State .....................<a href="#page-45">45</a>
   <a href="#appendix-C">Appendix C</a>. An Example ............................................<a href="#page-52">52</a>
   Acknowledgments ...................................................<a href="#page-56">56</a>
   Contributors ......................................................<a href="#page-56">56</a>
   Authors' Addresses ................................................<a href="#page-57">57</a>





<span class="grey">Clemm, et al.                Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   This document introduces an abstract (base) YANG [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>] data model
   [<a href="./rfc3444" title='"On the Difference between Information Models and Data Models"'>RFC3444</a>] to represent networks and topologies.  The data model is
   divided into two parts: The first part of the data model defines a
   network data model that enables the definition of network
   hierarchies, or network stacks (i.e., networks that are layered on
   top of each other) and maintenance of an inventory of nodes contained
   in a network.  The second part of the data model augments the basic
   network data model with information to describe topology information.
   Specifically, it adds the concepts of "links" and
   "termination points" to describe how nodes in a network are connected
   to each other.  Moreover, the data model introduces vertical layering
   relationships between networks that can be augmented to cover both
   network inventories and network/service topologies.

   Although it would be possible to combine both parts into a single
   data model, the separation facilitates integration of network
   topology and network inventory data models, because it allows network
   inventory information to be augmented separately, and without concern
   for topology, into the network data model.

   The data model can be augmented to describe the specifics of
   particular types of networks and topologies.  For example, an
   augmenting data model can provide network node information with
   attributes that are specific to a particular network type.  Examples
   of augmenting models include data models for Layer 2 network
   topologies; Layer 3 network topologies such as unicast IGP, IS-IS
   [<a href="./rfc1195" title='"Use of OSI IS-IS for routing in TCP/IP and dual environments"'>RFC1195</a>], and OSPF [<a href="./rfc2328" title='"OSPF Version 2"'>RFC2328</a>]; traffic engineering (TE) data
   [<a href="./rfc3209" title='"RSVP-TE: Extensions to RSVP for LSP Tunnels"'>RFC3209</a>]; or any of the variety of transport and service topologies.
   Information specific to particular network types will be captured in
   separate, technology-specific data models.

   The basic data models introduced in this document are generic in
   nature and can be applied to many network and service topologies and
   inventories.  The data models allow applications to operate on an
   inventory or topology of any network at a generic level, where the
   specifics of particular inventory/topology types are not required.
   At the same time, where data specific to a network type comes into
   play and the data model is augmented, the instantiated data still
   adheres to the same structure and is represented in a consistent
   fashion.  This also facilitates the representation of network
   hierarchies and dependencies between different network components and
   network types.

   The abstract (base) network YANG module introduced in this document,
   entitled "ietf-network" (<a href="#section-6.1">Section 6.1</a>), contains a list of abstract
   network nodes and defines the concept of "network hierarchy" (network



<span class="grey">Clemm, et al.                Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   stack).  The abstract network node can be augmented in inventory and
   topology data models with inventory-specific and topology-specific
   attributes.  The network hierarchy (stack) allows any given network
   to have one or more "supporting networks".  The relationship between
   the base network data model, the inventory data models, and the
   topology data models is shown in Figure 1 (dotted lines in the figure
   denote possible augmentations to models defined in this document).

                         +------------------------+
                         |                        |
                         | Abstract Network Model |
                         |                        |
                         +------------------------+
                                      |
                              +-------+-------+
                              |               |
                              V               V
                       +------------+  ..............
                       |  Abstract  |  : Inventory  :
                       |  Topology  |  :  Model(s)  :
                       |   Model    |  :            :
                       +------------+  ''''''''''''''
                              |
                +-------------+-------------+-------------+
                |             |             |             |
                V             V             V             V
          ............  ............  ............  ............
          :    L1    :  :    L2    :  :    L3    :  :  Service :
          : Topology :  : Topology :  : Topology :  : Topology :
          :   Model  :  :   Model  :  :   Model  :  :   Model  :
          ''''''''''''  ''''''''''''  ''''''''''''  ''''''''''''

                Figure 1: The Network Data Model Structure

   The network-topology YANG module introduced in this document,
   entitled "ietf-network-topology" (<a href="#section-6.2">Section 6.2</a>), defines a generic
   topology data model at its most general level of abstraction.  The
   module defines a topology graph and components from which it is
   composed: nodes, edges, and termination points.  Nodes (from the
   "ietf-network" module) represent graph vertices and links represent
   graph edges.  Nodes also contain termination points that anchor the
   links.  A network can contain multiple topologies -- for example,
   topologies at different layers and overlay topologies.  The data
   model therefore allows relationships between topologies, as well as
   dependencies between nodes and termination points across topologies,
   to be captured.  An example of a topology stack is shown in Figure 2.





<span class="grey">Clemm, et al.                Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


                    +---------------------------------------+
                   /            _[X1]_          "Service"  /
                  /           _/  :   \_                  /
                 /          _/     :    \_               /
                /         _/        :     \_            /
               /         /           :      \          /
              /       [X2]__________________[X3]      /
             +---------:--------------:------:-------+
                        :              :     :
                    +----:--------------:----:--------------+
                   /      :              :   :        "L3" /
                  /        :              :  :            /
                 /         :               : :           /
                /         [Y1]_____________[Y2]         /
               /           *               * *         /
              /            *              *  *        /
             +--------------*-------------*--*-------+
                             *           *   *
                    +--------*----------*----*--------------+
                   /     [Z1]_______________[Z2] "Optical" /
                  /         \_         *   _/             /
                 /            \_      *  _/              /
                /               \_   * _/               /
               /                  \ * /                /
              /                    [Z]                /
             +---------------------------------------+

               Figure 2: Topology Hierarchy (Stack) Example

   Figure 2 shows three topology levels.  At the top, the "Service"
   topology shows relationships between service entities, such as
   service functions in a service chain.  The "L3" topology shows
   network elements at Layer 3 (IP), and the "Optical" topology shows
   network elements at Layer 1.  Service functions in the "Service"
   topology are mapped onto network elements in the "L3" topology, which
   in turn are mapped onto network elements in the "Optical" topology.
   Two service functions (X1 and X3) are mapped onto a single L3 network
   element (Y2); this could happen, for example, if two service
   functions reside in the same Virtual Machine (VM) (or server) and
   share the same set of network interfaces.  A single "L3" network
   element (Y2) is mapped onto two "Optical" network elements (Z2 and
   Z).  This could happen, for example, if a single IP router attaches
   to multiple Reconfigurable Optical Add/Drop Multiplexers (ROADMs) in
   the optical domain.







<span class="grey">Clemm, et al.                Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   Another example of a service topology stack is shown in Figure 3.

                                 VPN1                       VPN2
               +---------------------+    +---------------------+
              /   [Y5]...           /    / [Z5]______[Z3]      /
             /    /  \  :          /    /  : \_       / :     /
            /    /    \  :        /    /   :   \_    /  :    /
           /    /      \  :      /    /   :      \  /   :   /
          /   [Y4]____[Y1] :    /    /   :       [Z2]   :  /
         +------:-------:---:--+    +---:---------:-----:-+
                :        :   :         :          :     :
                :         :   :       :           :     :
                :  +-------:---:-----:------------:-----:-----+
                : /       [X1]__:___:___________[X2]   :     /
                :/         / \_  : :       _____/ /   :     /
                :         /    \_ :  _____/      /   :     /
               /:        /       \: /           /   :     /
              / :       /        [X5]          /   :     /
             /   :     /       __/ \__        /   :     /
            /     :   /    ___/       \__    /   :     /
           /       : / ___/              \  /   :     /
          /        [X4]__________________[X3]..:     /
         +------------------------------------------+
                                        L3 Topology

               Figure 3: Topology Hierarchy (Stack) Example

   Figure 3 shows two VPN service topologies (VPN1 and VPN2)
   instantiated over a common L3 topology.  Each VPN service topology is
   mapped onto a subset of nodes from the common L3 topology.

   There are multiple applications for such a data model.  For example,
   within the context of Interface to the Routing System (I2RS), nodes
   within the network can use the data model to capture their
   understanding of the overall network topology and expose it to a
   network controller.  A network controller can then use the
   instantiated topology data to compare and reconcile its own view of
   the network topology with that of the network elements that it
   controls.  Alternatively, nodes within the network could propagate
   this understanding to compare and reconcile this understanding either
   among themselves or with the help of a controller.  Beyond the
   network element and the immediate context of I2RS itself, a network
   controller might even use the data model to represent its view of the
   topology that it controls and expose it to applications north of
   itself.  Further use cases where the data model can be applied are
   described in [<a href="#ref-USECASE-REQS">USECASE-REQS</a>].





<span class="grey">Clemm, et al.                Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   In this data model, a network is categorized as either system
   controlled or not.  If a network is system controlled, then it is
   automatically populated by the server and represents dynamically
   learned information that can be read from the operational state
   datastore.  The data model can also be used to create or modify
   network topologies that might be associated with an inventory model
   or with an overlay network.  Such a network is not system controlled;
   rather, it is configured by a client.

   The data model allows a network to refer to a supporting network,
   supporting nodes, supporting links, etc.  The data model also allows
   the layering of a network that is configured on top of a network that
   is system controlled.  This permits the configuration of overlay
   networks on top of networks that are discovered.  Specifically, this
   data model is structured to support being implemented as part of the
   ephemeral datastore [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>], the requirements for which are defined
   in <a href="./rfc8242#section-3">SectionÂ 3 of [RFC8242]</a>.  This allows network topology data that is
   written, i.e., configured by a client and not system controlled, to
   refer to dynamically learned data that is controlled by the system,
   not configured by a client.  A simple use case might involve creating
   an overlay network that is supported by the dynamically discovered
   IP-routed network topology.  When an implementation places written
   data for this data model in the ephemeral datastore, such a network
   MAY refer to another network that is system controlled.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Key%20Words"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Key Words</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a> [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="./rfc8174" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.



















<span class="grey">Clemm, et al.                Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Definitions%20and%20Abbreviations"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Definitions and Abbreviations</span>

   Datastore:  A conceptual place to store and access information.  A
      datastore might be implemented, for example, using files, a
      database, flash memory locations, or combinations thereof.  A
      datastore maps to an instantiated YANG data tree (definition from
      [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>]).

   Data subtree:  An instantiated data node and the data nodes that are
      hierarchically contained within it.

   IGP:  Interior Gateway Protocol.

   IS-IS:  Intermediate System to Intermediate System.

   OSPF:  Open Shortest Path First (a link-state routing protocol).

   SDN:  Software-Defined Networking.

   URI:  Uniform Resource Identifier.

   VM:  Virtual Machine.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Model%20Structure%20Details"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Model Structure Details</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Base%20Network%20Model"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Base Network Model</span>

   The abstract (base) network data model is defined in the
   "ietf-network" module.  Its structure is shown in Figure 4.  The
   notation syntax follows the syntax used in [<a href="./rfc8340" title='"YANG Tree Diagrams"'>RFC8340</a>].

   module: ietf-network
     +--rw networks
        +--rw network* [network-id]
           +--rw network-id            network-id
           +--rw network-types
           +--rw supporting-network* [network-ref]
           |  +--rw network-ref    -&gt; /networks/network/network-id
           +--rw node* [node-id]
              +--rw node-id            node-id
              +--rw supporting-node* [network-ref node-ref]
                 +--rw network-ref
                 |       -&gt; ../../../supporting-network/network-ref
                 +--rw node-ref       -&gt; /networks/network/node/node-id

     Figure 4: The Structure of the Abstract (Base) Network Data Model





<span class="grey">Clemm, et al.                Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   The data model contains a container with a list of networks.  Each
   network is captured in its own list entry, distinguished via a
   network-id.

   A network has a certain type, such as L2, L3, OSPF, or IS-IS.  A
   network can even have multiple types simultaneously.  The type or
   types are captured underneath the container "network-types".  In this
   model, it serves merely as an augmentation target; network-specific
   modules will later introduce new data nodes to represent new network
   types below this target, i.e., will insert them below "network-types"
   via YANG augmentation.

   When a network is of a certain type, it will contain a corresponding
   data node.  Network types SHOULD always be represented using presence
   containers, not leafs of type "empty".  This allows the
   representation of hierarchies of network subtypes within the instance
   information.  For example, an instance of an OSPF network (which, at
   the same time, is a Layer 3 unicast IGP network) would contain
   underneath "network-types" another presence container
   "l3-unicast-igp-network", which in turn would contain a presence
   container "ospf-network".  Actual examples of this pattern can be
   found in [<a href="./rfc8346" title='"A YANG Data Model for Layer 3 Topologies"'>RFC8346</a>].

   A network can in turn be part of a hierarchy of networks, building on
   top of other networks.  Any such networks are captured in the list
   "supporting-network".  A supporting network is, in effect, an
   underlay network.

   Furthermore, a network contains an inventory of nodes that are part
   of the network.  The nodes of a network are captured in their own
   list.  Each node is identified relative to its containing network by
   a node-id.

   It should be noted that a node does not exist independently of a
   network; instead, it is a part of the network that contains it.  In
   cases where the same device or entity takes part in multiple
   networks, or at multiple layers of a networking stack, the same
   device or entity will be represented by multiple nodes, one for each
   network.  In other words, the node represents an abstraction of the
   device for the particular network of which it is a part.  To indicate
   that the same entity or device is part of multiple topologies or
   networks, it is possible to create one "physical" network with a list
   of nodes for each of the devices or entities.  This (physical)
   network -- the nodes (entities) in that network -- can then be
   referred to as an underlay network and as nodes from the other
   (logical) networks and nodes, respectively.  Note that the data model





<span class="grey">Clemm, et al.                Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   allows for the definition of more than one underlay network (and
   node), allowing for simultaneous representation of layered network
   topologies and service topologies, and their physical instantiation.

   Similar to a network, a node can be supported by other nodes and map
   onto one or more other nodes in an underlay network.  This is
   captured in the list "supporting-node".  The resulting hierarchy of
   nodes also allows for the representation of device stacks, where a
   node at one level is supported by a set of nodes at an underlying
   level.  For example:

   o  a "router" node might be supported by a node representing a route
      processor and separate nodes for various line cards and service
      modules,

   o  a virtual router might be supported or hosted on a physical device
      represented by a separate node,

   and so on.

   Network data of a network at a particular layer can come into being
   in one of two ways: (1) the network data is configured by client
   applications -- for example, in the case of overlay networks that are
   configured by an SDN Controller application, or (2) the network data
   is automatically controlled by the system, in the case of networks
   that can be discovered.  It is possible for a configured (overlay)
   network to refer to a (discovered) underlay network.

   The revised datastore architecture [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>] is used to account for
   those possibilities.  Specifically, for each network, the origin of
   its data is indicated per the "origin" metadata [<a href="./rfc7952" title='"Defining and Using Metadata with YANG"'>RFC7952</a>] annotation
   (as defined in [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>]) -- "intended" for data that was configured
   by a client application and "learned" for data that is discovered.
   Network data that is discovered is automatically populated as part of
   the operational state datastore.  Network data that is configured is
   part of the configuration and intended datastores, respectively.
   Configured network data that is actually in effect is, in addition,
   reflected in the operational state datastore.  Data in the
   operational state datastore will always have complete referential
   integrity.  Should a configured data item (such as a node) have a
   dangling reference that refers to a non-existing data item (such as a
   supporting node), the configured data item will automatically be
   removed from the operational state datastore and thus only appear in
   the intended datastore.  It will be up to the client application
   (such as an SDN Controller) to resolve the situation and ensure that
   the reference to the supporting resources is configured properly.





<span class="grey">Clemm, et al.                Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.2.%20%20Base%20Network%20Topology%20Data%20Model"></a><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Base Network Topology Data Model</span>

   The abstract (base) network topology data model is defined in the
   "ietf-network-topology" module.  It builds on the network data model
   defined in the "ietf-network" module, augmenting it with links
   (defining how nodes are connected) and termination points (which
   anchor the links and are contained in nodes).  The structure of the
   network topology module is shown in Figure 5.  The notation syntax
   follows the syntax used in [<a href="./rfc8340" title='"YANG Tree Diagrams"'>RFC8340</a>].

   module: ietf-network-topology
     augment /nw:networks/nw:network:
       +--rw link* [link-id]
          +--rw link-id            link-id
          +--rw source
          |  +--rw source-node?   -&gt; ../../../nw:node/node-id
          |  +--rw source-tp?     leafref
          +--rw destination
          |  +--rw dest-node?   -&gt; ../../../nw:node/node-id
          |  +--rw dest-tp?     leafref
          +--rw supporting-link* [network-ref link-ref]
             +--rw network-ref
             |       -&gt; ../../../nw:supporting-network/network-ref
             +--rw link-ref       leafref
     augment /nw:networks/nw:network/nw:node:
       +--rw termination-point* [tp-id]
          +--rw tp-id                           tp-id
          +--rw supporting-termination-point*
                  [network-ref node-ref tp-ref]
             +--rw network-ref
             |       -&gt; ../../../nw:supporting-node/network-ref
             +--rw node-ref
             |       -&gt; ../../../nw:supporting-node/node-ref
             +--rw tp-ref         leafref

      Figure 5: The Structure of the Abstract (Base) Network Topology
                                Data Model

   A node has a list of termination points that are used to terminate
   links.  An example of a termination point might be a physical or
   logical port or, more generally, an interface.

   Like a node, a termination point can in turn be supported by an
   underlying termination point, contained in the supporting node of the
   underlay network.






<span class="grey">Clemm, et al.                Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   A link is identified by a link-id that uniquely identifies the link
   within a given topology.  Links are point-to-point and
   unidirectional.  Accordingly, a link contains a source and a
   destination.  Both source and destination reference a corresponding
   node, as well as a termination point on that node.  Similar to a
   node, a link can map onto one or more links (which are terminated by
   the corresponding underlay termination points) in an underlay
   topology.  This is captured in the list "supporting-link".

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.3.%20%20Extending%20the%20Data%20Model"></a><a class="selflink" href="#section-4.3" id="section-4.3">4.3</a>.  Extending the Data Model</span>

   In order to derive a data model for a specific type of network, the
   base data model can be extended.  This can be done roughly as
   follows: a new YANG module for the new network type is introduced.
   In this module, a number of augmentations are defined against the
   "ietf-network" and "ietf-network-topology" modules.

   We start with augmentations against the "ietf-network" module.
   First, a new network type needs to be defined; this is done by
   defining a presence container that represents the new network type.
   The new network type is inserted, by means of augmentation, below the
   network-types container.  Subsequently, data nodes for any node
   parameters that are specific to a network type are defined and
   augmented into the node list.  The new data nodes can be defined as
   conditional ("when") on the presence of the corresponding network
   type in the containing network.  In cases where there are any
   requirements or restrictions in terms of network hierarchies, such as
   when a network of a new network type requires a specific type of
   underlay network, it is possible to define corresponding constraints
   as well and augment the supporting-network list accordingly.
   However, care should be taken to avoid excessive definitions of
   constraints.

   Subsequently, augmentations are defined against the
   "ietf-network-topology" module.  Data nodes are defined for link
   parameters, as well as termination point parameters, that are
   specific to the new network type.  Those data nodes are inserted via
   augmentation into the link and termination-point lists, respectively.
   Again, data nodes can be defined as conditional on the presence of
   the corresponding network type in the containing network, by adding a
   corresponding "when" statement.

   It is possible, but not required, to group data nodes for a given
   network type under a dedicated container.  Doing so introduces
   additional structure but lengthens data node path names.






<span class="grey">Clemm, et al.                Standards Track                   [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   In cases where a hierarchy of network types is defined, augmentations
   can in turn be applied against augmenting modules, with the module of
   a network whose type is more specific augmenting the module of a
   network whose type is more general.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.%20%20Discussion%20and%20Selected%20Design%20Decisions"></a><a class="selflink" href="#section-4.4" id="section-4.4">4.4</a>.  Discussion and Selected Design Decisions</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.1.%20%20Container%20Structure"></a><a class="selflink" href="#section-4.4.1" id="section-4.4.1">4.4.1</a>.  Container Structure</span>

   Rather than maintaining lists in separate containers, the data model
   is kept relatively flat in terms of its containment structure.  Lists
   of nodes, links, termination points, and supporting nodes; supporting
   links; and supporting termination points are not kept in separate
   containers.  Therefore, path identifiers that are used to refer to
   specific nodes -- in management operations or in specifications of
   constraints -- can remain relatively compact.  Of course, this means
   that there is no separate structure in instance information that
   separates elements of different lists from one another.  Such a
   structure is semantically not required, but it might provide enhanced
   "human readability" in some cases.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.2.%20%20Underlay%20Hierarchies%20and%20Mappings"></a><a class="selflink" href="#section-4.4.2" id="section-4.4.2">4.4.2</a>.  Underlay Hierarchies and Mappings</span>

   To minimize assumptions regarding what a particular entity might
   actually represent, mappings between networks, nodes, links, and
   termination points are kept strictly generic.  For example, no
   assumptions are made regarding whether a termination point actually
   refers to an interface or whether a node refers to a specific
   "system" or device; the data model at this generic level makes no
   provisions for these.

   Where additional specifics about mappings between upper and lower
   layers are required, the information can be captured in augmenting
   modules.  For example, to express that a termination point in a
   particular network type maps to an interface, an augmenting module
   can introduce an augmentation to the termination point.  The
   augmentation introduces a leaf of type "interface-ref".  That leaf
   references the corresponding interface [<a href="./rfc8343" title='"A YANG Data Model for Interface Management"'>RFC8343</a>].  Similarly, if a
   node maps to a particular device or network element, an augmenting
   module can augment the node data with a leaf that references the
   network element.










<span class="grey">Clemm, et al.                Standards Track                   [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   It is possible for links at one level of a hierarchy to map to
   multiple links at another level of the hierarchy.  For example, a VPN
   topology might model VPN tunnels as links.  Where a VPN tunnel maps
   to a path that is composed of a chain of several links, the link will
   contain a list of those supporting links.  Likewise, it is possible
   for a link at one level of a hierarchy to aggregate a bundle of links
   at another level of the hierarchy.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.3.%20%20Dealing%20with%20Changes%20in%20Underlay%20Networks"></a><a class="selflink" href="#section-4.4.3" id="section-4.4.3">4.4.3</a>.  Dealing with Changes in Underlay Networks</span>

   It is possible for a network to undergo churn even as other networks
   are layered on top of it.  When a supporting node, link, or
   termination point is deleted, the supporting leafrefs in the overlay
   will be left dangling.  To allow for this possibility, the data model
   makes use of the "require-instance" construct of YANG 1.1 [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>].

   A dangling leafref of a configured object leaves the corresponding
   instance in a state in which it lacks referential integrity,
   effectively rendering it nonoperational.  Any corresponding object
   instance is therefore removed from the operational state datastore
   until the situation has been resolved, i.e., until either (1) the
   supporting object is added to the operational state datastore or
   (2) the instance is reconfigured to refer to another object that is
   actually reflected in the operational state datastore.  It will
   remain part of the intended datastore.

   It is the responsibility of the application maintaining the overlay
   to deal with the possibility of churn in the underlay network.  When
   a server receives a request to configure an overlay network, it
   SHOULD validate whether supporting nodes / links / termination points
   refer to nodes in the underlay that actually exist, i.e., verify that
   the nodes are reflected in the operational state datastore.
   Configuration requests in which supporting nodes / links /
   termination points refer to objects currently not in existence SHOULD
   be rejected.  It is the responsibility of the application to update
   the overlay when a supporting node / link / termination point is
   deleted at a later point in time.  For this purpose, an application
   might subscribe to updates when changes to the underlay occur -- for
   example, using mechanisms defined in [<a href="#ref-YANG-Push">YANG-Push</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.4.%20%20Use%20of%20Groupings"></a><a class="selflink" href="#section-4.4.4" id="section-4.4.4">4.4.4</a>.  Use of Groupings</span>

   The data model makes use of groupings instead of simply defining data
   nodes "inline".  This makes it easier to include the corresponding
   data nodes in notifications, which then do not need to respecify each
   data node that is to be included.  The trade-off is that it makes the
   specification of constraints more complex, because constraints
   involving data nodes outside the grouping need to be specified in



<span class="grey">Clemm, et al.                Standards Track                   [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   conjunction with a "uses" statement where the grouping is applied.
   This also means that constraints and XML Path Language (XPath)
   statements need to be specified in such a way that they navigate
   "down" first and select entire sets of nodes, as opposed to being
   able to simply specify them against individual data nodes.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.5.%20%20Cardinality%20and%20Directionality%20of%20Links"></a><a class="selflink" href="#section-4.4.5" id="section-4.4.5">4.4.5</a>.  Cardinality and Directionality of Links</span>

   The topology data model includes links that are point-to-point and
   unidirectional.  It does not directly support multipoint and
   bidirectional links.  Although this may appear as a limitation, the
   decision to do so keeps the data model simple and generic, and it
   allows it to be very easily subjected to applications that make use
   of graph algorithms.  Bidirectional connections can be represented
   through pairs of unidirectional links.  Multipoint networks can be
   represented through pseudonodes (similar to IS-IS, for example).  By
   introducing hierarchies of nodes with nodes at one level mapping onto
   a set of other nodes at another level and by introducing new links
   for nodes at that level, topologies with connections representing
   non-point-to-point communication patterns can be represented.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.6.%20%20Multihoming%20and%20Link%20Aggregation"></a><a class="selflink" href="#section-4.4.6" id="section-4.4.6">4.4.6</a>.  Multihoming and Link Aggregation</span>

   Links are terminated by a single termination point, not sets of
   termination points.  Connections involving multihoming or link
   aggregation schemes need to be represented using multiple point-to-
   point links and then defining a link at a higher layer that is
   supported by those individual links.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.7.%20%20Mapping%20Redundancy"></a><a class="selflink" href="#section-4.4.7" id="section-4.4.7">4.4.7</a>.  Mapping Redundancy</span>

   In a hierarchy of networks, there are nodes mapping to nodes, links
   mapping to links, and termination points mapping to termination
   points.  Some of this information is redundant.  Specifically, if the
   mapping of a link to one or more other links is known and the
   termination points of each link are known, the mapping information
   for the termination points can be derived via transitive closure and
   does not have to be explicitly configured.  Nonetheless, in order to
   not constrain applications regarding which mappings they want to
   configure and which should be derived, the data model provides the
   option to configure this information explicitly.  The data model
   includes integrity constraints to allow for validating for
   consistency.








<span class="grey">Clemm, et al.                Standards Track                   [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.8.%20%20Typing"></a><a class="selflink" href="#section-4.4.8" id="section-4.4.8">4.4.8</a>.  Typing</span>

   A network's network types are represented using a container that
   contains a data node for each of its network types.  A network can
   encompass several types of networks simultaneously; hence, a
   container is used instead of a case construct, with each network type
   in turn represented by a dedicated presence container.  The reason
   for not simply using an empty leaf, or (even more simply) even doing
   away with the network container and just using a leaf-list of
   "network-type" instead, is to be able to represent "class
   hierarchies" of network types, with one network type "refining" the
   other.  Containers specific to a network type are to be defined in
   the network-specific modules, augmenting the network-types container.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.9.%20%20Representing%20the%20Same%20Device%20in%20Multiple%20Networks"></a><a class="selflink" href="#section-4.4.9" id="section-4.4.9">4.4.9</a>.  Representing the Same Device in Multiple Networks</span>

   One common requirement concerns the ability to indicate that the same
   device can be part of multiple networks and topologies.  However, the
   data model defines a node as relative to the network that contains
   it.  The same node cannot be part of multiple topologies.  In many
   cases, a node will be the abstraction of a particular device in a
   network.  To reflect that the same device is part of multiple
   topologies, the following approach might be chosen: a new type of
   network to represent a "physical" (or "device") network is
   introduced, with nodes representing devices.  This network forms an
   underlay network for logical networks above it, with nodes of the
   logical network mapping onto nodes in the physical network.

   This scenario is depicted in Figure 6.  This figure depicts three
   networks with two nodes each.  A physical network ("P" in the figure)
   consists of an inventory of two nodes (D1 and D2), each representing
   a device.  A second network, X, has a third network, Y, as its
   underlay.  Both X and Y also have the physical network (P) as their
   underlay.  X1 has both Y1 and D1 as underlay nodes, while Y1 has D1
   as its underlay node.  Likewise, X2 has both Y2 and D2 as underlay
   nodes, while Y2 has D2 as its underlay node.  The fact that X1 and Y1
   are both instantiated on the same physical node (D1) can be
   easily seen.













<span class="grey">Clemm, et al.                Standards Track                   [Page 17]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-18"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


                         +---------------------+
                        /   [X1]____[X2]      /  X(Service Overlay)
                       +----:--:----:--------+
                         ..:    :..: :
                ........:     ....: : :....
         +-----:-------------:--+    :     :...
        /   [Y1]____[Y2]....:  /      :..      :
       +------|-------|-------+          :..    :...
        Y(L3) |       +---------------------:-----+ :
              |                         +----:----|-:----------+
              +------------------------/---[D1]  [D2]         /
                                      +----------------------+
                                        P (Physical Network)

         Figure 6: Topology Hierarchy Example - Multiple Underlays

   In the case of a physical network, nodes represent physical devices
   and termination points represent physical ports.  It should be noted
   that it is also possible to augment the data model for a physical
   network type, defining augmentations that have nodes reference system
   information and termination points reference physical interfaces, in
   order to provide a bridge between network and device models.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.10.%20%20Supporting%20Client-Configured%20and%20System-Controlled%20Network"></a><a class="selflink" href="#section-4.4.10" id="section-4.4.10">4.4.10</a>.  Supporting Client-Configured and System-Controlled Network</span>
<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/Topologies"></a>         Topologies</span>

   YANG requires data nodes to be designated as either configuration
   data ("config true") or operational data ("config false"), but not
   both, yet it is important to have all network information, including
   vertical cross-network dependencies, captured in one coherent data
   model.  In most cases, network topology information about a network
   is discovered; the topology is considered a property of the network
   that is reflected in the data model.  That said, certain types of
   topologies need to also be configurable by an application, e.g., in
   the case of overlay topologies.

   The YANG data model for network topologies designates all data as
   "config true".  The distinction between data that is actually
   configured and data that is in effect, including network data that is
   discovered, is provided through the datastores introduced as part of
   the Network Management Datastore Architecture (NMDA) [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>].
   Network topology data that is discovered is automatically populated
   as part of the operational state datastore, i.e., &lt;operational&gt;.  It
   is "system controlled".  Network topology that is configured is
   instantiated as part of a configuration datastore, e.g., &lt;intended&gt;.
   Only when it has actually taken effect will it also be instantiated
   as part of the operational state datastore, i.e., &lt;operational&gt;.




<span class="grey">Clemm, et al.                Standards Track                   [Page 18]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-19"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   In general, a configured network topology will refer to an underlay
   topology and include layering information, such as the supporting
   node(s) underlying a node, supporting link(s) underlying a link, and
   supporting termination point(s) underlying a termination point.  The
   supporting objects must be instantiated in the operational state
   datastore in order for the dependent overlay object to be reflected
   in the operational state datastore.  Should a configured data item
   (such as a node) have a dangling reference that refers to a
   nonexistent data item (such as a supporting node), the configured
   data item will automatically be removed from &lt;operational&gt; and show
   up only in &lt;intended&gt;.  It will be up to the client application to
   resolve the situation and ensure that the reference to the supporting
   resources is configured properly.

   For each network, the origin of its data is indicated per the
   "origin" metadata [<a href="./rfc7952" title='"Defining and Using Metadata with YANG"'>RFC7952</a>] annotation defined in [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>].  In
   general, the origin of discovered network data is "learned"; the
   origin of configured network data is "intended".

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.11.%20%20Identifiers%20of%20String%20or%20URI%20Type"></a><a class="selflink" href="#section-4.4.11" id="section-4.4.11">4.4.11</a>.  Identifiers of String or URI Type</span>

   The current data model defines identifiers of nodes, networks, links,
   and termination points as URIs.  Alternatively, they could have been
   defined as strings.

   The case for strings is that they will be easier to implement.  The
   reason for choosing URIs is that the topology / node / termination
   point exists in a larger context; hence, it is useful to be able to
   correlate identifiers across systems.  Although strings -- being the
   universal data type -- are easier for human beings, they also muddle
   things.  What typically happens is that strings have some structure
   that is magically assigned, and the knowledge of this structure has
   to be communicated to each system working with the data.  A URI makes
   the structure explicit and also attaches additional semantics: the
   URI, unlike a free-form string, can be fed into a URI resolver, which
   can point to additional resources associated with the URI.  This
   property is important when the topology data is integrated into a
   larger and more complex system.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Interactions%20with%20Other%20YANG%20Modules"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Interactions with Other YANG Modules</span>

   The data model makes use of data types that have been defined in
   [<a href="./rfc6991" title='"Common YANG Data Types"'>RFC6991</a>].

   This is a protocol-independent YANG data model with topology
   information.  It is separate from, and not linked with, data models
   that are used to configure routing protocols or routing information.
   This includes, for example, the "ietf-routing" YANG module [<a href="./rfc8022" title='"A YANG Data Model for Routing Management"'>RFC8022</a>].



<span class="grey">Clemm, et al.                Standards Track                   [Page 19]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-20"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   The data model obeys the requirements for the ephemeral state as
   specified in [<a href="./rfc8242" title='"Interface to the Routing System (I2RS) Ephemeral State Requirements"'>RFC8242</a>].  For ephemeral topology data that is system
   controlled, the process tasked with maintaining topology information
   will load information from the routing process (such as OSPF) into
   the operational state datastore without relying on a configuration
   datastore.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20YANG%20Modules"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  YANG Modules</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.1.%20%20Defining%20the%20Abstract%20Network%3A%20ietf-network"></a><a class="selflink" href="#section-6.1" id="section-6.1">6.1</a>.  Defining the Abstract Network: ietf-network</span>

   &lt;CODE BEGINS&gt; file "ietf-network@2018-02-26.yang"

   module ietf-network {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-network";
     prefix nw;

     import ietf-inet-types {
       prefix inet;
       reference
         "<a href="./rfc6991">RFC 6991</a>: Common YANG Data Types";
     }

     organization
       "IETF I2RS (Interface to the Routing System) Working Group";

     contact
       "WG Web:    &lt;<a href="https://datatracker.ietf.org/wg/i2rs/">https://datatracker.ietf.org/wg/i2rs/</a>&gt;
        WG List:   &lt;mailto:i2rs@ietf.org&gt;

        Editor:    Alexander Clemm
                   &lt;mailto:ludwig@clemm.org&gt;

        Editor:    Jan Medved
                   &lt;mailto:jmedved@cisco.com&gt;

        Editor:    Robert Varga
                   &lt;mailto:robert.varga@pantheon.tech&gt;

        Editor:    Nitin Bahadur
                   &lt;mailto:nitin_bahadur@yahoo.com&gt;

        Editor:    Hariharan Ananthakrishnan
                   &lt;mailto:hari@packetdesign.com&gt;

        Editor:    Xufeng Liu
                   &lt;mailto:xufeng.liu.ietf@gmail.com&gt;";



<span class="grey">Clemm, et al.                Standards Track                   [Page 20]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-21"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


     description
       "This module defines a common base data model for a collection
        of nodes in a network.  Node definitions are further used
        in network topologies and inventories.

        Copyright (c) 2018 IETF Trust and the persons identified as
        authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).

        This version of this YANG module is part of <a href="./rfc8345">RFC 8345</a>;
        see the RFC itself for full legal notices.";

     revision 2018-02-26 {
       description
         "Initial revision.";
       reference
         "<a href="./rfc8345">RFC 8345</a>: A YANG Data Model for Network Topologies";
     }

     typedef node-id {
       type inet:uri;
       description
         "Identifier for a node.  The precise structure of the node-id
          will be up to the implementation.  For example, some
          implementations MAY pick a URI that includes the network-id
          as part of the path.  The identifier SHOULD be chosen
          such that the same node in a real network topology will
          always be identified through the same identifier, even if
          the data model is instantiated in separate datastores.  An
          implementation MAY choose to capture semantics in the
          identifier -- for example, to indicate the type of node.";
     }













<span class="grey">Clemm, et al.                Standards Track                   [Page 21]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-22"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


     typedef network-id {
       type inet:uri;
       description
         "Identifier for a network.  The precise structure of the
          network-id will be up to the implementation.  The identifier
          SHOULD be chosen such that the same network will always be
          identified through the same identifier, even if the data model
          is instantiated in separate datastores.  An implementation MAY
          choose to capture semantics in the identifier -- for example,
          to indicate the type of network.";
     }

     grouping network-ref {
       description
         "Contains the information necessary to reference a network --
          for example, an underlay network.";
       leaf network-ref {
         type leafref {
           path "/nw:networks/nw:network/nw:network-id";
         require-instance false;
         }
         description
           "Used to reference a network -- for example, an underlay
            network.";
       }
     }

     grouping node-ref {
       description
         "Contains the information necessary to reference a node.";
       leaf node-ref {
         type leafref {
           path "/nw:networks/nw:network[nw:network-id=current()/../"+
             "network-ref]/nw:node/nw:node-id";
           require-instance false;
         }
         description
           "Used to reference a node.
            Nodes are identified relative to the network that
            contains them.";
       }
       uses network-ref;
     }








<span class="grey">Clemm, et al.                Standards Track                   [Page 22]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-23"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


     container networks {
       description
         "Serves as a top-level container for a list of networks.";
       list network {
         key "network-id";
         description
           "Describes a network.
            A network typically contains an inventory of nodes,
            topological information (augmented through the
            network-topology data model), and layering information.";
         leaf network-id {
           type network-id;
           description
             "Identifies a network.";
         }
         container network-types {
           description
             "Serves as an augmentation target.
              The network type is indicated through corresponding
              presence containers augmented into this container.";
         }
         list supporting-network {
           key "network-ref";
           description
             "An underlay network, used to represent layered network
              topologies.";
           leaf network-ref {
             type leafref {
               path "/nw:networks/nw:network/nw:network-id";
             require-instance false;
             }
             description
               "References the underlay network.";
           }
         }
















<span class="grey">Clemm, et al.                Standards Track                   [Page 23]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-24"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


         list node {
           key "node-id";
           description
             "The inventory of nodes of this network.";
           leaf node-id {
             type node-id;
             description
               "Uniquely identifies a node within the containing
                network.";
           }
           list supporting-node {
             key "network-ref node-ref";
             description
               "Represents another node that is in an underlay network
                and that supports this node.  Used to represent layering
                structure.";
             leaf network-ref {
               type leafref {
                 path "../../../nw:supporting-network/nw:network-ref";
               require-instance false;
               }
               description
                 "References the underlay network of which the
                  underlay node is a part.";
             }
             leaf node-ref {
               type leafref {
                 path "/nw:networks/nw:network/nw:node/nw:node-id";
               require-instance false;
               }
               description
                 "References the underlay node itself.";
             }
           }
         }
       }
     }
   }

   &lt;CODE ENDS&gt;











<span class="grey">Clemm, et al.                Standards Track                   [Page 24]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-25"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.%20%20Creating%20Abstract%20Network%20Topology%3A%20ietf-network-topology"></a><a class="selflink" href="#section-6.2" id="section-6.2">6.2</a>.  Creating Abstract Network Topology: ietf-network-topology</span>

   &lt;CODE BEGINS&gt; file "ietf-network-topology@2018-02-26.yang"

   module ietf-network-topology {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-network-topology";
     prefix nt;

     import ietf-inet-types {
       prefix inet;
       reference
         "<a href="./rfc6991">RFC 6991</a>: Common YANG Data Types";
     }
     import ietf-network {
       prefix nw;
       reference
         "<a href="./rfc8345">RFC 8345</a>: A YANG Data Model for Network Topologies";
     }

     organization
       "IETF I2RS (Interface to the Routing System) Working Group";

     contact
       "WG Web:    &lt;<a href="https://datatracker.ietf.org/wg/i2rs/">https://datatracker.ietf.org/wg/i2rs/</a>&gt;
        WG List:   &lt;mailto:i2rs@ietf.org&gt;

        Editor:    Alexander Clemm
                   &lt;mailto:ludwig@clemm.org&gt;

        Editor:    Jan Medved
                   &lt;mailto:jmedved@cisco.com&gt;

        Editor:    Robert Varga
                   &lt;mailto:robert.varga@pantheon.tech&gt;

        Editor:    Nitin Bahadur
                   &lt;mailto:nitin_bahadur@yahoo.com&gt;

        Editor:    Hariharan Ananthakrishnan
                   &lt;mailto:hari@packetdesign.com&gt;

        Editor:    Xufeng Liu
                   &lt;mailto:xufeng.liu.ietf@gmail.com&gt;";







<span class="grey">Clemm, et al.                Standards Track                   [Page 25]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-26"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


     description
       "This module defines a common base model for a network topology,
        augmenting the base network data model with links to connect
        nodes, as well as termination points to terminate links
        on nodes.

        Copyright (c) 2018 IETF Trust and the persons identified as
        authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).

        This version of this YANG module is part of <a href="./rfc8345">RFC 8345</a>;
        see the RFC itself for full legal notices.";

     revision 2018-02-26 {
       description
         "Initial revision.";
       reference
         "<a href="./rfc8345">RFC 8345</a>: A YANG Data Model for Network Topologies";
     }

     typedef link-id {
       type inet:uri;
       description
         "An identifier for a link in a topology.  The precise
          structure of the link-id will be up to the implementation.
          The identifier SHOULD be chosen such that the same link in a
          real network topology will always be identified through the
          same identifier, even if the data model is instantiated in
          separate datastores.  An implementation MAY choose to capture
          semantics in the identifier -- for example, to indicate the
          type of link and/or the type of topology of which the link is
          a part.";
     }

     typedef tp-id {
       type inet:uri;
       description
         "An identifier for termination points on a node.  The precise
          structure of the tp-id will be up to the implementation.
          The identifier SHOULD be chosen such that the same termination
          point in a real network topology will always be identified
          through the same identifier, even if the data model is



<span class="grey">Clemm, et al.                Standards Track                   [Page 26]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-27"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


          instantiated in separate datastores.  An implementation MAY
          choose to capture semantics in the identifier -- for example,
          to indicate the type of termination point and/or the type of
          node that contains the termination point.";
     }

     grouping link-ref {
       description
         "This grouping can be used to reference a link in a specific
          network.  Although it is not used in this module, it is
          defined here for the convenience of augmenting modules.";
       leaf link-ref {
         type leafref {
           path "/nw:networks/nw:network[nw:network-id=current()/../"+
             "network-ref]/nt:link/nt:link-id";
           require-instance false;
         }
         description
           "A type for an absolute reference to a link instance.
            (This type should not be used for relative references.
            In such a case, a relative path should be used instead.)";
       }
       uses nw:network-ref;
     }

     grouping tp-ref {
       description
         "This grouping can be used to reference a termination point
          in a specific node.  Although it is not used in this module,
          it is defined here for the convenience of augmenting
          modules.";
       leaf tp-ref {
         type leafref {
           path "/nw:networks/nw:network[nw:network-id=current()/../"+
             "network-ref]/nw:node[nw:node-id=current()/../"+
             "node-ref]/nt:termination-point/nt:tp-id";
           require-instance false;
         }
         description
           "A type for an absolute reference to a termination point.
            (This type should not be used for relative references.
            In such a case, a relative path should be used instead.)";
       }
       uses nw:node-ref;
     }






<span class="grey">Clemm, et al.                Standards Track                   [Page 27]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-28"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


     augment "/nw:networks/nw:network" {
       description
         "Add links to the network data model.";
       list link {
         key "link-id";
         description
           "A network link connects a local (source) node and
            a remote (destination) node via a set of the respective
            node's termination points.  It is possible to have several
            links between the same source and destination nodes.
            Likewise, a link could potentially be re-homed between
            termination points.  Therefore, in order to ensure that we
            would always know to distinguish between links, every link
            is identified by a dedicated link identifier.  Note that a
            link models a point-to-point link, not a multipoint link.";
         leaf link-id {
           type link-id;
           description
             "The identifier of a link in the topology.
              A link is specific to a topology to which it belongs.";
         }
         container source {
           description
             "This container holds the logical source of a particular
              link.";
           leaf source-node {
             type leafref {
               path "../../../nw:node/nw:node-id";
               require-instance false;
             }
             description
               "Source node identifier.  Must be in the same topology.";
           }
           leaf source-tp {
             type leafref {
               path "../../../nw:node[nw:node-id=current()/../"+
                 "source-node]/termination-point/tp-id";
               require-instance false;
             }
             description
               "This termination point is located within the source node
                and terminates the link.";
           }
         }







<span class="grey">Clemm, et al.                Standards Track                   [Page 28]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-29"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


         container destination {
           description
             "This container holds the logical destination of a
              particular link.";
           leaf dest-node {
             type leafref {
               path "../../../nw:node/nw:node-id";
             require-instance false;
             }
             description
               "Destination node identifier.  Must be in the same
                network.";
           }
           leaf dest-tp {
             type leafref {
               path "../../../nw:node[nw:node-id=current()/../"+
                 "dest-node]/termination-point/tp-id";
               require-instance false;
             }
             description
               "This termination point is located within the
                destination node and terminates the link.";
           }
         }
         list supporting-link {
           key "network-ref link-ref";
           description
             "Identifies the link or links on which this link depends.";
           leaf network-ref {
             type leafref {
               path "../../../nw:supporting-network/nw:network-ref";
             require-instance false;
             }
             description
               "This leaf identifies in which underlay topology
                the supporting link is present.";
           }














<span class="grey">Clemm, et al.                Standards Track                   [Page 29]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-30"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


           leaf link-ref {
             type leafref {
               path "/nw:networks/nw:network[nw:network-id=current()/"+
                 "../network-ref]/link/link-id";
               require-instance false;
             }
             description
               "This leaf identifies a link that is a part
                of this link's underlay.  Reference loops in which
                a link identifies itself as its underlay, either
                directly or transitively, are not allowed.";
           }
         }
       }
     }
     augment "/nw:networks/nw:network/nw:node" {
       description
         "Augments termination points that terminate links.
          Termination points can ultimately be mapped to interfaces.";
       list termination-point {
         key "tp-id";
         description
           "A termination point can terminate a link.
            Depending on the type of topology, a termination point
            could, for example, refer to a port or an interface.";
         leaf tp-id {
           type tp-id;
           description
             "Termination point identifier.";
         }
         list supporting-termination-point {
           key "network-ref node-ref tp-ref";
           description
             "This list identifies any termination points on which a
              given termination point depends or onto which it maps.
              Those termination points will themselves be contained
              in a supporting node.  This dependency information can be
              inferred from the dependencies between links.  Therefore,
              this item is not separately configurable.  Hence, no
              corresponding constraint needs to be articulated.
              The corresponding information is simply provided by the
              implementing system.";









<span class="grey">Clemm, et al.                Standards Track                   [Page 30]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-31"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


           leaf network-ref {
             type leafref {
               path "../../../nw:supporting-node/nw:network-ref";
             require-instance false;
             }
             description
               "This leaf identifies in which topology the
                supporting termination point is present.";
           }
           leaf node-ref {
             type leafref {
               path "../../../nw:supporting-node/nw:node-ref";
             require-instance false;
             }
             description
               "This leaf identifies in which node the supporting
                termination point is present.";
           }
           leaf tp-ref {
             type leafref {
               path "/nw:networks/nw:network[nw:network-id=current()/"+
                 "../network-ref]/nw:node[nw:node-id=current()/../"+
                 "node-ref]/termination-point/tp-id";
               require-instance false;
             }
             description
               "Reference to the underlay node (the underlay node must
                be in a different topology).";
           }
         }
       }
     }
   }

   &lt;CODE ENDS&gt;
















<span class="grey">Clemm, et al.                Standards Track                   [Page 31]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-32"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  IANA Considerations</span>

   This document registers the following namespace URIs in the "IETF XML
   Registry" [<a href="./rfc3688" title='"The IETF XML Registry"'>RFC3688</a>]:

   URI: urn:ietf:params:xml:ns:yang:ietf-network
   Registrant Contact: The IESG.
   XML: N/A; the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-network-topology
   Registrant Contact: The IESG.
   XML: N/A; the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-network-state
   Registrant Contact: The IESG.
   XML: N/A; the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-network-topology-state
   Registrant Contact: The IESG.
   XML: N/A; the requested URI is an XML namespace.

   This document registers the following YANG modules in the "YANG
   Module Names" registry [<a href="./rfc6020" title='"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"'>RFC6020</a>]:

   Name:      ietf-network
   Namespace: urn:ietf:params:xml:ns:yang:ietf-network
   Prefix:    nw
   Reference: <a href="./rfc8345">RFC 8345</a>

   Name:      ietf-network-topology
   Namespace: urn:ietf:params:xml:ns:yang:ietf-network-topology
   Prefix:    nt
   Reference: <a href="./rfc8345">RFC 8345</a>

   Name:      ietf-network-state
   Namespace: urn:ietf:params:xml:ns:yang:ietf-network-state
   Prefix:    nw-s
   Reference: <a href="./rfc8345">RFC 8345</a>

   Name:      ietf-network-topology-state
   Namespace: urn:ietf:params:xml:ns:yang:ietf-network-topology-state
   Prefix:    nt-s
   Reference: <a href="./rfc8345">RFC 8345</a>








<span class="grey">Clemm, et al.                Standards Track                   [Page 32]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-33"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  Security Considerations</span>

   The YANG modules specified in this document define a schema for data
   that is designed to be accessed via network management protocols such
   as NETCONF [<a href="./rfc6241" title='"Network Configuration Protocol (NETCONF)"'>RFC6241</a>] or RESTCONF [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>].  The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure
   transport is Secure Shell (SSH) [<a href="./rfc6242" title='"Using the NETCONF Protocol over Secure Shell (SSH)"'>RFC6242</a>].  The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   [<a href="./rfc5246" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>].

   The NETCONF access control model [<a href="./rfc8341" title='"Network Configuration Access Control Model"'>RFC8341</a>] provides the means to
   restrict access for particular NETCONF or RESTCONF users to a
   preconfigured subset of all available NETCONF or RESTCONF protocol
   operations and content.

   The network topology and inventory created by these modules reveal
   information about the structure of networks that could be very
   helpful to an attacker.  As a privacy consideration, although there
   is no personally identifiable information defined in these modules,
   it is possible that some node identifiers may be associated with
   devices that are in turn associated with specific users.

   The YANG modules define information that can be configurable in
   certain instances -- for example, in the case of overlay topologies
   that can be created by client applications.  In such cases, a
   malicious client could introduce topologies that are undesired.
   Specifically, a malicious client could attempt to remove or add a
   node, a link, or a termination point by creating or deleting
   corresponding elements in node, link, or termination point lists,
   respectively.  In the case of a topology that is learned, the server
   will automatically prohibit such misconfiguration attempts.  In the
   case of a topology that is configured, i.e., whose origin is
   "intended", the undesired configuration could become effective and be
   reflected in the operational state datastore, leading to disruption
   of services provided via this topology.  For example, the topology
   could be "cut" or could be configured in a suboptimal way, leading to
   increased consumption of resources in the underlay network due to the
   routing and bandwidth utilization inefficiencies that would result.
   Likewise, it could lead to degradation of service levels as well as
   possible disruption of service.  For those reasons, it is important
   that the NETCONF access control model be vigorously applied to
   prevent topology misconfiguration by unauthorized clients.

   There are a number of data nodes defined in these YANG modules that
   are writable/creatable/deletable (i.e., config true, which is the
   default).  These data nodes may be considered sensitive or vulnerable
   in some network environments.  Write operations (e.g., edit-config)




<span class="grey">Clemm, et al.                Standards Track                   [Page 33]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-34"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   to these data nodes without proper protection can have a negative
   effect on network operations.  These are the subtrees and data nodes
   and their sensitivity/vulnerability:

   In the "ietf-network" module:

   o  network: A malicious client could attempt to remove or add a
      network in an effort to remove an overlay topology or to create an
      unauthorized overlay.

   o  supporting network: A malicious client could attempt to disrupt
      the logical structure of the model, resulting in a lack of overall
      data integrity and making it more difficult to, for example,
      troubleshoot problems rooted in the layering of network
      topologies.

   o  node: A malicious client could attempt to remove or add a node
      from the network -- for example, in order to sabotage the topology
      of a network overlay.

   o  supporting node: A malicious client could attempt to change the
      supporting node in order to sabotage the layering of an overlay.

   In the "ietf-network-topology" module:

   o  link: A malicious client could attempt to remove a link from a
      topology, add a new link, manipulate the way the link is layered
      over supporting links, or modify the source or destination of the
      link.  In each case, the structure of the topology would be
      sabotaged, and this scenario could, for example, result in an
      overlay topology that is less than optimal.

   o  termination point: A malicious client could attempt to remove
      termination points from a node, add "phantom" termination points
      to a node, or change the layering dependencies of termination
      points, again in an effort to sabotage the integrity of a topology
      and potentially disrupt orderly operations of an overlay.














<span class="grey">Clemm, et al.                Standards Track                   [Page 34]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-35"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.%20%20References"></a><a class="selflink" href="#section-9" id="section-9">9</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.1.%20%20Normative%20References"></a><a class="selflink" href="#section-9.1" id="section-9.1">9.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3688">RFC3688</a>]  Mealling, M., "The IETF XML Registry", <a href="https://www.rfc-editor.org/bcp/bcp81">BCP 81</a>, <a href="./rfc3688">RFC 3688</a>,
              DOI 10.17487/RFC3688, January 2004,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3688">https://www.rfc-editor.org/info/rfc3688</a>&gt;.

   [<a id="ref-RFC5246">RFC5246</a>]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", <a href="./rfc5246">RFC 5246</a>,
              DOI 10.17487/RFC5246, August 2008,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5246">https://www.rfc-editor.org/info/rfc5246</a>&gt;.

   [<a id="ref-RFC6020">RFC6020</a>]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", <a href="./rfc6020">RFC 6020</a>,
              DOI 10.17487/RFC6020, October 2010,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6020">https://www.rfc-editor.org/info/rfc6020</a>&gt;.

   [<a id="ref-RFC6241">RFC6241</a>]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", <a href="./rfc6241">RFC 6241</a>, DOI 10.17487/RFC6241, June 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6241">https://www.rfc-editor.org/info/rfc6241</a>&gt;.

   [<a id="ref-RFC6242">RFC6242</a>]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", <a href="./rfc6242">RFC 6242</a>, DOI 10.17487/RFC6242, June 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6242">https://www.rfc-editor.org/info/rfc6242</a>&gt;.

   [<a id="ref-RFC6991">RFC6991</a>]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              <a href="./rfc6991">RFC 6991</a>, DOI 10.17487/RFC6991, July 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6991">https://www.rfc-editor.org/info/rfc6991</a>&gt;.

   [<a id="ref-RFC7950">RFC7950</a>]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              <a href="./rfc7950">RFC 7950</a>, DOI 10.17487/RFC7950, August 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7950">https://www.rfc-editor.org/info/rfc7950</a>&gt;.

   [<a id="ref-RFC8040">RFC8040</a>]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", <a href="./rfc8040">RFC 8040</a>, DOI 10.17487/RFC8040, January 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8040">https://www.rfc-editor.org/info/rfc8040</a>&gt;.

   [<a id="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in
              <a href="./rfc2119">RFC 2119</a> Key Words", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc8174">RFC 8174</a>,
              DOI 10.17487/RFC8174, May 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.



<span class="grey">Clemm, et al.                Standards Track                   [Page 35]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-36"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   [<a id="ref-RFC8341">RFC8341</a>]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, <a href="./rfc8341">RFC 8341</a>,
              DOI 10.17487/RFC8341, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8341">https://www.rfc-editor.org/info/rfc8341</a>&gt;.

   [<a id="ref-RFC8342">RFC8342</a>]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", <a href="./rfc8342">RFC 8342</a>, DOI 10.17487/RFC8342, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8342">https://www.rfc-editor.org/info/rfc8342</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.2.%20%20Informative%20References"></a><a class="selflink" href="#section-9.2" id="section-9.2">9.2</a>.  Informative References</span>

   [<a id="ref-RFC1195">RFC1195</a>]  Callon, R., "Use of OSI IS-IS for routing in TCP/IP and
              dual environments", <a href="./rfc1195">RFC 1195</a>, DOI 10.17487/RFC1195,
              December 1990, &lt;<a href="https://www.rfc-editor.org/info/rfc1195">https://www.rfc-editor.org/info/rfc1195</a>&gt;.

   [<a id="ref-RFC2328">RFC2328</a>]  Moy, J., "OSPF Version 2", STD 54, <a href="./rfc2328">RFC 2328</a>,
              DOI 10.17487/RFC2328, April 1998,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2328">https://www.rfc-editor.org/info/rfc2328</a>&gt;.

   [<a id="ref-RFC3209">RFC3209</a>]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", <a href="./rfc3209">RFC 3209</a>, DOI 10.17487/RFC3209, December 2001,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3209">https://www.rfc-editor.org/info/rfc3209</a>&gt;.

   [<a id="ref-RFC3444">RFC3444</a>]  Pras, A. and J. Schoenwaelder, "On the Difference between
              Information Models and Data Models", <a href="./rfc3444">RFC 3444</a>,
              DOI 10.17487/RFC3444, January 2003,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3444">https://www.rfc-editor.org/info/rfc3444</a>&gt;.

   [<a id="ref-RFC7951">RFC7951</a>]  Lhotka, L., "JSON Encoding of Data Modeled with YANG",
              <a href="./rfc7951">RFC 7951</a>, DOI 10.17487/RFC7951, August 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7951">https://www.rfc-editor.org/info/rfc7951</a>&gt;.

   [<a id="ref-RFC7952">RFC7952</a>]  Lhotka, L., "Defining and Using Metadata with YANG",
              <a href="./rfc7952">RFC 7952</a>, DOI 10.17487/RFC7952, August 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7952">https://www.rfc-editor.org/info/rfc7952</a>&gt;.

   [<a id="ref-RFC8022">RFC8022</a>]  Lhotka, L. and A. Lindem, "A YANG Data Model for Routing
              Management", <a href="./rfc8022">RFC 8022</a>, DOI 10.17487/RFC8022,
              November 2016, &lt;<a href="https://www.rfc-editor.org/info/rfc8022">https://www.rfc-editor.org/info/rfc8022</a>&gt;.

   [<a id="ref-RFC8242">RFC8242</a>]  Haas, J. and S. Hares, "Interface to the Routing System
              (I2RS) Ephemeral State Requirements", <a href="./rfc8242">RFC 8242</a>,
              DOI 10.17487/RFC8242, September 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8242">https://www.rfc-editor.org/info/rfc8242</a>&gt;.





<span class="grey">Clemm, et al.                Standards Track                   [Page 36]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-37"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   [<a id="ref-RFC8340">RFC8340</a>]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              <a href="https://www.rfc-editor.org/bcp/bcp215">BCP 215</a>, <a href="./rfc8340">RFC 8340</a>, DOI 10.17487/RFC8340, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8340">https://www.rfc-editor.org/info/rfc8340</a>&gt;.

   [<a id="ref-RFC8343">RFC8343</a>]  Bjorklund, M., "A YANG Data Model for Interface
              Management", <a href="./rfc8343">RFC 8343</a>, DOI 10.17487/RFC8343, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8343">https://www.rfc-editor.org/info/rfc8343</a>&gt;.

   [<a id="ref-RFC8346">RFC8346</a>]  Clemm, A., Medved, J., Varga, R., Liu, X.,
              Ananthakrishnan, H., and N. Bahadur, "A YANG Data Model
              for Layer 3 Topologies", <a href="./rfc8346">RFC 8346</a>, DOI 10.17487/RFC8346,
              March 2018, &lt;<a href="https://www.rfc-editor.org/info/rfc8346">https://www.rfc-editor.org/info/rfc8346</a>&gt;.

   [<a id="ref-USECASE-REQS">USECASE-REQS</a>]
              Hares, S. and M. Chen, "Summary of I2RS Use Case
              Requirements", Work in Progress, <a href="./draft-ietf-i2rs-usecase-reqs-summary-03">draft-ietf-i2rs-usecase-</a>
              <a href="./draft-ietf-i2rs-usecase-reqs-summary-03">reqs-summary-03</a>, November 2016.

   [<a id="ref-YANG-Push">YANG-Push</a>]
              Clemm, A., Voit, E., Gonzalez Prieto, A., Tripathy, A.,
              Nilsen-Nygaard, E., Bierman, A., and B. Lengyel, "YANG
              Datastore Subscription", Work in Progress,
              <a href="./draft-ietf-netconf-yang-push-15">draft-ietf-netconf-yang-push-15</a>, February 2018.




























<span class="grey">Clemm, et al.                Standards Track                   [Page 37]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-38"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20A.%20%20Model%20Use%20Cases"></a><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  Model Use Cases</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/A.1.%20%20Fetching%20Topology%20from%20a%20Network%20Element"></a><a class="selflink" href="#appendix-A.1" id="appendix-A.1">A.1</a>.  Fetching Topology from a Network Element</span>

   In its simplest form, topology is learned by a network element (e.g.,
   a router) through its participation in peering protocols (IS-IS, BGP,
   etc.).  This learned topology can then be exported (e.g., to a
   Network Management System) for external utilization.  Typically, any
   network element in a domain can be queried for its topology and be
   expected to return the same result.

   In a slightly more complex form, the network element may be a
   controller.  It could be a network element with satellite or
   subtended devices hanging off of it, or it could be a controller in
   the more classical sense -- that is, a special device designated to
   orchestrate the activities of a number of other devices (e.g., an
   Optical Controller).  In this case, the controller device is
   logically a singleton and must be queried distinctly.

   It is worth noting that controllers can be built on top of other
   controllers to establish a topology incorporating all of the domains
   within an entire network.

   In all of the cases above, the topology learned by the network
   element is considered to be operational state data.  That is, the
   data is accumulated purely by the network element's interactions with
   other systems and is subject to change dynamically without input or
   consent.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/A.2.%20%20Modifying%20TE%20Topology%20Imported%20from%20an%20Optical%20Controller"></a><a class="selflink" href="#appendix-A.2" id="appendix-A.2">A.2</a>.  Modifying TE Topology Imported from an Optical Controller</span>

   Consider a scenario where an Optical Controller presents its
   topology, in abstract TE terms, to a client packet controller.  This
   customized topology (which gets merged into the client's native
   topology) contains sufficient information for the path-computing
   client to select paths across the optical domain according to its
   policies.  If the client determines (at any given point in time) that
   this imported topology does not cater exactly to its requirements, it
   may decide to request modifications to the topology.  Such
   customization requests may include the addition or deletion of
   topological elements or the modification of attributes associated
   with existing topological elements.  From the perspective of the
   Optical Controller, these requests translate into configuration
   changes to the exported abstract topology.







<span class="grey">Clemm, et al.                Standards Track                   [Page 38]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-39"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/A.3.%20%20Annotating%20Topology%20for%20Local%20Computation"></a><a class="selflink" href="#appendix-A.3" id="appendix-A.3">A.3</a>.  Annotating Topology for Local Computation</span>

   In certain scenarios, the topology learned by a controller needs to
   be augmented with additional attributes before running a computation
   algorithm on it.  Consider the case where a path-computation
   application on the controller needs to take the geographic
   coordinates of the nodes into account while computing paths on the
   learned topology.  If the learned topology does not contain these
   coordinates, then these additional attributes must be configured on
   the corresponding topological elements.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/A.4.%20%20SDN%20Controller-Based%20Configuration%20of%20Overlays%20on%20Top%20of%20Underlays"></a><a class="selflink" href="#appendix-A.4" id="appendix-A.4">A.4</a>.  SDN Controller-Based Configuration of Overlays on Top of Underlays</span>

   In this scenario, an SDN Controller (for example, Open Daylight)
   maintains a view of the topology of the network that it controls
   based on information that it discovers from the network.  In
   addition, it provides an application in which it configures and
   maintains an overlay topology.

   The SDN Controller thus maintains two roles:

   o  It is a client to the network.

   o  It is a server to its own northbound applications and clients,
      e.g., an Operations Support System (OSS).

   In other words, one system's client (or controller, in this case) may
   be another system's server (or managed system).

   In this scenario, the SDN Controller maintains a consolidated data
   model of multiple layers of topology.  This includes the lower layers
   of the network topology, built from information that is discovered
   from the network.  It also includes upper layers of topology overlay,
   configurable by the controller's client, i.e., the OSS.  To the OSS,
   the lower topology layers constitute "read-only" information.  The
   upper topology layers need to be read-writable.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20B.%20%20Companion%20YANG%20Data%20Models%20for%20Implementations%20Not"></a><a class="selflink" href="#appendix-B" id="appendix-B">Appendix B</a>.  Companion YANG Data Models for Implementations Not</span>
             Compliant with NMDA

   The YANG modules defined in this document are designed to be used in
   conjunction with implementations that support the Network Management
   Datastore Architecture (NMDA) as defined in [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>].  In order to
   allow implementations to use the data model even in cases when NMDA
   is not supported, the following two companion modules --
   "ietf-network-state" and "ietf-network-topology-state" -- are
   defined; they represent the operational state of networks and network
   topologies, respectively.  These modules mirror the "ietf-network"



<span class="grey">Clemm, et al.                Standards Track                   [Page 39]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-40"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   and "ietf-network-topology" modules (defined in Sections <a href="#section-6.1">6.1</a> and <a href="#section-6.2">6.2</a>
   of this document); however, in the case of these modules, all data
   nodes are non-configurable.  They represent state that comes into
   being by either (1) learning topology information from the network or
   (2) applying configuration from the mirrored modules.

   The "ietf-network-state" and "ietf-network-topology-state" companion
   modules are redundant and SHOULD NOT be supported by implementations
   that support NMDA; therefore, we define these modules in
   Appendices B.1 and B.2 (below) instead of the main body of this
   document.

   As the structure of both modules mirrors that of their underlying
   modules, the YANG tree is not depicted separately.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.1.%20%20YANG%20Module%20for%20Network%20State"></a><a class="selflink" href="#appendix-B.1" id="appendix-B.1">B.1</a>.  YANG Module for Network State</span>

&lt;CODE BEGINS&gt; file "ietf-network-state@2018-02-26.yang"

module ietf-network-state {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-network-state";
  prefix nw-s;

  import ietf-network {
    prefix nw;
    reference
      "<a href="./rfc8345">RFC 8345</a>: A YANG Data Model for Network Topologies";
  }

  organization
    "IETF I2RS (Interface to the Routing System) Working Group";

  contact
    "WG Web:    &lt;<a href="https://datatracker.ietf.org/wg/i2rs/">https://datatracker.ietf.org/wg/i2rs/</a>&gt;
     WG List:   &lt;mailto:i2rs@ietf.org&gt;

     Editor:    Alexander Clemm
                &lt;mailto:ludwig@clemm.org&gt;

     Editor:    Jan Medved
                &lt;mailto:jmedved@cisco.com&gt;

     Editor:    Robert Varga
                &lt;mailto:robert.varga@pantheon.tech&gt;

     Editor:    Nitin Bahadur
                &lt;mailto:nitin_bahadur@yahoo.com&gt;



<span class="grey">Clemm, et al.                Standards Track                   [Page 40]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-41"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


     Editor:    Hariharan Ananthakrishnan
                &lt;mailto:hari@packetdesign.com&gt;

     Editor:    Xufeng Liu
                &lt;mailto:xufeng.liu.ietf@gmail.com&gt;";

  description
    "This module defines a common base data model for a collection
     of nodes in a network.  Node definitions are further used
     in network topologies and inventories.  It represents
     information that either (1) is learned and automatically
     populated or (2) results from applying network information
     that has been configured per the 'ietf-network' data model,
     mirroring the corresponding data nodes in this data model.

     The data model mirrors 'ietf-network' but contains only
     read-only state data.  The data model is not needed when the
     underlying implementation infrastructure supports the Network
     Management Datastore Architecture (NMDA).

     Copyright (c) 2018 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject
     to the license terms contained in, the Simplified BSD License
     set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).

     This version of this YANG module is part of <a href="./rfc8345">RFC 8345</a>;
     see the RFC itself for full legal notices.";

  revision 2018-02-26 {
    description
      "Initial revision.";
    reference
      "<a href="./rfc8345">RFC 8345</a>: A YANG Data Model for Network Topologies";
  }












<span class="grey">Clemm, et al.                Standards Track                   [Page 41]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-42"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


  grouping network-ref {
    description
      "Contains the information necessary to reference a network --
       for example, an underlay network.";
    leaf network-ref {
      type leafref {
        path "/nw-s:networks/nw-s:network/nw-s:network-id";
      require-instance false;
      }
      description
        "Used to reference a network -- for example, an underlay
         network.";
    }
  }

  grouping node-ref {
    description
      "Contains the information necessary to reference a node.";
    leaf node-ref {
      type leafref {
        path "/nw-s:networks/nw-s:network[nw-s:network-id=current()"+
          "/../network-ref]/nw-s:node/nw-s:node-id";
        require-instance false;
      }
      description
        "Used to reference a node.
         Nodes are identified relative to the network that
         contains them.";
    }
    uses network-ref;
  }




















<span class="grey">Clemm, et al.                Standards Track                   [Page 42]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-43"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


  container networks {
    config false;
    description
      "Serves as a top-level container for a list of networks.";
    list network {
      key "network-id";
      description
        "Describes a network.
         A network typically contains an inventory of nodes,
         topological information (augmented through the
         network-topology data model), and layering information.";
      container network-types {
        description
          "Serves as an augmentation target.
           The network type is indicated through corresponding
           presence containers augmented into this container.";
      }
      leaf network-id {
        type nw:network-id;
        description
          "Identifies a network.";
      }
      list supporting-network {
        key "network-ref";
        description
          "An underlay network, used to represent layered network
           topologies.";
        leaf network-ref {
          type leafref {
            path "/nw-s:networks/nw-s:network/nw-s:network-id";
          require-instance false;
          }
          description
            "References the underlay network.";
        }
      }















<span class="grey">Clemm, et al.                Standards Track                   [Page 43]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-44"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


      list node {
        key "node-id";
        description
          "The inventory of nodes of this network.";
        leaf node-id {
          type nw:node-id;
          description
            "Uniquely identifies a node within the containing
             network.";
        }
        list supporting-node {
          key "network-ref node-ref";
          description
            "Represents another node that is in an underlay network
             and that supports this node.  Used to represent layering
             structure.";
          leaf network-ref {
            type leafref {
              path "../../../nw-s:supporting-network/nw-s:network-ref";
            require-instance false;
            }
            description
              "References the underlay network of which the
               underlay node is a part.";
          }
          leaf node-ref {
            type leafref {
              path "/nw-s:networks/nw-s:network/nw-s:node/nw-s:node-id";
            require-instance false;
            }
            description
              "References the underlay node itself.";
          }
        }
      }
    }
  }
}

&lt;CODE ENDS&gt;











<span class="grey">Clemm, et al.                Standards Track                   [Page 44]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-45"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/B.2.%20%20YANG%20Module%20for%20Network%20Topology%20State"></a><a class="selflink" href="#appendix-B.2" id="appendix-B.2">B.2</a>.  YANG Module for Network Topology State</span>

  &lt;CODE BEGINS&gt; file "ietf-network-topology-state@2018-02-26.yang"

  module ietf-network-topology-state {
    yang-version 1.1;
    namespace "urn:ietf:params:xml:ns:yang:ietf-network-topology-state";
    prefix nt-s;

    import ietf-network-state {
      prefix nw-s;
      reference
        "<a href="./rfc8345">RFC 8345</a>: A YANG Data Model for Network Topologies";
    }
    import ietf-network-topology {
      prefix nt;
      reference
        "<a href="./rfc8345">RFC 8345</a>: A YANG Data Model for Network Topologies";
    }

    organization
      "IETF I2RS (Interface to the Routing System) Working Group";

    contact
      "WG Web:    &lt;<a href="https://datatracker.ietf.org/wg/i2rs/">https://datatracker.ietf.org/wg/i2rs/</a>&gt;
       WG List:   &lt;mailto:i2rs@ietf.org&gt;

       Editor:    Alexander Clemm
                  &lt;mailto:ludwig@clemm.org&gt;

       Editor:    Jan Medved
                  &lt;mailto:jmedved@cisco.com&gt;

       Editor:    Robert Varga
                  &lt;mailto:robert.varga@pantheon.tech&gt;

       Editor:    Nitin Bahadur
                  &lt;mailto:nitin_bahadur@yahoo.com&gt;

       Editor:    Hariharan Ananthakrishnan
                  &lt;mailto:hari@packetdesign.com&gt;

       Editor:    Xufeng Liu
                  &lt;mailto:xufeng.liu.ietf@gmail.com&gt;";







<span class="grey">Clemm, et al.                Standards Track                   [Page 45]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-46"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


    description
      "This module defines a common base data model for network
       topology state, representing topology that either (1) is learned
       or (2) results from applying topology that has been configured
       per the 'ietf-network-topology' data model, mirroring the
       corresponding data nodes in this data model.  It augments the
       base network state data model with links to connect nodes, as
       well as termination points to terminate links on nodes.

       The data model mirrors 'ietf-network-topology' but contains only
       read-only state data.  The data model is not needed when the
       underlying implementation infrastructure supports the Network
       Management Datastore Architecture (NMDA).

       Copyright (c) 2018 IETF Trust and the persons identified as
       authors of the code.  All rights reserved.

       Redistribution and use in source and binary forms, with or
       without modification, is permitted pursuant to, and subject
       to the license terms contained in, the Simplified BSD License
       set forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
       Relating to IETF Documents
       (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).

       This version of this YANG module is part of <a href="./rfc8345">RFC 8345</a>;
       see the RFC itself for full legal notices.";

    revision 2018-02-26 {
      description
        "Initial revision.";
      reference
        "<a href="./rfc8345">RFC 8345</a>: A YANG Data Model for Network Topologies";
    }


















<span class="grey">Clemm, et al.                Standards Track                   [Page 46]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-47"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


    grouping link-ref {
      description
        "References a link in a specific network.  Although this
         grouping is not used in this module, it is defined here for
         the convenience of augmenting modules.";
      leaf link-ref {
        type leafref {
          path "/nw-s:networks/nw-s:network[nw-s:network-id=current()"+
            "/../network-ref]/nt-s:link/nt-s:link-id";
          require-instance false;
        }
        description
          "A type for an absolute reference to a link instance.
           (This type should not be used for relative references.
           In such a case, a relative path should be used instead.)";
      }
      uses nw-s:network-ref;
    }

    grouping tp-ref {
      description
        "References a termination point in a specific node.  Although
         this grouping is not used in this module, it is defined here
         for the convenience of augmenting modules.";
      leaf tp-ref {
        type leafref {
          path "/nw-s:networks/nw-s:network[nw-s:network-id=current()"+
            "/../network-ref]/nw-s:node[nw-s:node-id=current()/../"+
            "node-ref]/nt-s:termination-point/nt-s:tp-id";
          require-instance false;
        }
        description
          "A type for an absolute reference to a termination point.
           (This type should not be used for relative references.
           In such a case, a relative path should be used instead.)";
      }
      uses nw-s:node-ref;
    }

    augment "/nw-s:networks/nw-s:network" {
      description
        "Add links to the network data model.";
      list link {
        key "link-id";
        description
          "A network link connects a local (source) node and
           a remote (destination) node via a set of the respective
           node's termination points.  It is possible to have several



<span class="grey">Clemm, et al.                Standards Track                   [Page 47]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-48"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


           links between the same source and destination nodes.
           Likewise, a link could potentially be re-homed between
           termination points.  Therefore, in order to ensure that we
           would always know to distinguish between links, every link
           is identified by a dedicated link identifier.  Note that a
           link models a point-to-point link, not a multipoint link.";
        container source {
          description
            "This container holds the logical source of a particular
             link.";
          leaf source-node {
            type leafref {
              path "../../../nw-s:node/nw-s:node-id";
              require-instance false;
            }
            description
              "Source node identifier.  Must be in the same topology.";
          }
          leaf source-tp {
            type leafref {
              path "../../../nw-s:node[nw-s:node-id=current()/../"+
                "source-node]/termination-point/tp-id";
              require-instance false;
            }
            description
              "This termination point is located within the source node
               and terminates the link.";
          }
        }
        container destination {
          description
            "This container holds the logical destination of a
             particular link.";
          leaf dest-node {
            type leafref {
              path "../../../nw-s:node/nw-s:node-id";
            require-instance false;
            }
            description
              "Destination node identifier.  Must be in the same
               network.";
          }









<span class="grey">Clemm, et al.                Standards Track                   [Page 48]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-49"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


          leaf dest-tp {
            type leafref {
              path "../../../nw-s:node[nw-s:node-id=current()/../"+
                "dest-node]/termination-point/tp-id";
              require-instance false;
            }
            description
              "This termination point is located within the
               destination node and terminates the link.";
          }
        }
        leaf link-id {
          type nt:link-id;
          description
            "The identifier of a link in the topology.
             A link is specific to a topology to which it belongs.";
        }
        list supporting-link {
          key "network-ref link-ref";
          description
            "Identifies the link or links on which this link depends.";
          leaf network-ref {
            type leafref {
              path "../../../nw-s:supporting-network/nw-s:network-ref";
            require-instance false;
            }
            description
              "This leaf identifies in which underlay topology
               the supporting link is present.";
          }
          leaf link-ref {
            type leafref {
              path "/nw-s:networks/nw-s:network[nw-s:network-id="+
                "current()/../network-ref]/link/link-id";
              require-instance false;
            }
            description
              "This leaf identifies a link that is a part
               of this link's underlay.  Reference loops in which
               a link identifies itself as its underlay, either
               directly or transitively, are not allowed.";
          }
        }
      }
    }






<span class="grey">Clemm, et al.                Standards Track                   [Page 49]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-50"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


    augment "/nw-s:networks/nw-s:network/nw-s:node" {
      description
        "Augments termination points that terminate links.
         Termination points can ultimately be mapped to interfaces.";
      list termination-point {
        key "tp-id";
        description
          "A termination point can terminate a link.
           Depending on the type of topology, a termination point
           could, for example, refer to a port or an interface.";
        leaf tp-id {
          type nt:tp-id;
          description
            "Termination point identifier.";
        }
        list supporting-termination-point {
          key "network-ref node-ref tp-ref";
          description
            "This list identifies any termination points on which a
             given termination point depends or onto which it maps.
             Those termination points will themselves be contained
             in a supporting node.  This dependency information can be
             inferred from the dependencies between links.  Therefore,
             this item is not separately configurable.  Hence, no
             corresponding constraint needs to be articulated.
             The corresponding information is simply provided by the
             implementing system.";
          leaf network-ref {
            type leafref {
              path "../../../nw-s:supporting-node/nw-s:network-ref";
            require-instance false;
            }
            description
              "This leaf identifies in which topology the
               supporting termination point is present.";
          }
          leaf node-ref {
            type leafref {
              path "../../../nw-s:supporting-node/nw-s:node-ref";
            require-instance false;
            }
            description
              "This leaf identifies in which node the supporting
               termination point is present.";
          }






<span class="grey">Clemm, et al.                Standards Track                   [Page 50]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-51"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


          leaf tp-ref {
            type leafref {
              path "/nw-s:networks/nw-s:network[nw-s:network-id="+
                "current()/../network-ref]/nw-s:node[nw-s:node-id="+
                "current()/../node-ref]/termination-point/tp-id";
              require-instance false;
            }
            description
              "Reference to the underlay node (the underlay node must
               be in a different topology).";
          }
        }
      }
    }
  }

  &lt;CODE ENDS&gt;


































<span class="grey">Clemm, et al.                Standards Track                   [Page 51]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-52"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20C.%20%20An%20Example"></a><a class="selflink" href="#appendix-C" id="appendix-C">Appendix C</a>.  An Example</span>

   This section contains an example of an instance data tree in JSON
   encoding [<a href="./rfc7951" title='"JSON Encoding of Data Modeled with YANG"'>RFC7951</a>].  The example instantiates "ietf-network-topology"
   (and "ietf-network", which "ietf-network-topology" augments) for the
   topology depicted in Figure 7.  There are three nodes: D1, D2, and
   D3.  D1 has three termination points (1-0-1, 1-2-1, and 1-3-1).
   D2 has three termination points as well (2-1-1, 2-0-1, and 2-3-1).
   D3 has two termination points (3-1-1 and 3-2-1).  In addition, there
   are six links, two between each pair of nodes with one going in each
   direction.

                +------------+                   +------------+
                |     D1     |                   |     D2     |
               /-\          /-\                 /-\          /-\
               | | 1-0-1    | |----------------&gt;| | 2-1-1    | |
               | |    1-2-1 | |&lt;----------------| |    2-0-1 | |
               \-/  1-3-1   \-/                 \-/  2-3-1   \-/
                |   /----\   |                   |   /----\   |
                +---|    |---+                   +---|    |---+
                    \----/                           \----/
                     A  |                             A  |
                     |  |                             |  |
                     |  |                             |  |
                     |  |       +------------+        |  |
                     |  |       |     D3     |        |  |
                     |  |      /-\          /-\       |  |
                     |  +-----&gt;| | 3-1-1    | |-------+  |
                     +---------| |    3-2-1 | |&lt;---------+
                               \-/          \-/
                                |            |
                                +------------+

                   Figure 7: A Network Topology Example

















<span class="grey">Clemm, et al.                Standards Track                   [Page 52]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-53"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


   The corresponding instance data tree is depicted in Figure 8:

   {
     "ietf-network:networks": {
       "network": [
         {
           "network-types": {
           },
           "network-id": "otn-hc",
           "node": [
             {
               "node-id": "D1",
               "termination-point": [
                 {
                   "tp-id": "1-0-1"
                 },
                 {
                   "tp-id": "1-2-1"
                 },
                 {
                   "tp-id": "1-3-1"
                 }
               ]
             },
             {
               "node-id": "D2",
               "termination-point": [
                 {
                   "tp-id": "2-0-1"
                 },
                 {
                   "tp-id": "2-1-1"
                 },
                 {
                   "tp-id": "2-3-1"
                 }
               ]
             },













<span class="grey">Clemm, et al.                Standards Track                   [Page 53]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-54"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


             {
               "node-id": "D3",
               "termination-point": [
                 {
                   "tp-id": "3-1-1"
                 },
                 {
                   "tp-id": "3-2-1"
                 }
               ]
             }
           ],
           "ietf-network-topology:link": [
             {
               "link-id": "D1,1-2-1,D2,2-1-1",
               "source": {
                 "source-node": "D1",
                 "source-tp": "1-2-1"
               }
               "destination": {
                 "dest-node": "D2",
                 "dest-tp": "2-1-1"
               }
             },
             {
               "link-id": "D2,2-1-1,D1,1-2-1",
               "source": {
                 "source-node": "D2",
                 "source-tp": "2-1-1"
               }
               "destination": {
                 "dest-node": "D1",
                 "dest-tp": "1-2-1"
               }
             },
             {
               "link-id": "D1,1-3-1,D3,3-1-1",
               "source": {
                 "source-node": "D1",
                 "source-tp": "1-3-1"
               }
               "destination": {
                 "dest-node": "D3",
                 "dest-tp": "3-1-1"
               }
             },





<span class="grey">Clemm, et al.                Standards Track                   [Page 54]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-55"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


             {
               "link-id": "D3,3-1-1,D1,1-3-1",
               "source": {
                 "source-node": "D3",
                 "source-tp": "3-1-1"
               }
               "destination": {
                 "dest-node": "D1",
                 "dest-tp": "1-3-1"
               }
             },
             {
               "link-id": "D2,2-3-1,D3,3-2-1",
               "source": {
                 "source-node": "D2",
                 "source-tp": "2-3-1"
               }
               "destination": {
                 "dest-node": "D3",
                 "dest-tp": "3-2-1"
               }
             },
             {
               "link-id": "D3,3-2-1,D2,2-3-1",
               "source": {
                 "source-node": "D3",
                 "source-tp": "3-2-1"
               }
               "destination": {
                 "dest-node": "D2",
                 "dest-tp": "2-3-1"
               }
             }
           ]
         }
       ]
     }
   }

                       Figure 8: Instance Data Tree











<span class="grey">Clemm, et al.                Standards Track                   [Page 55]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-56"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


Acknowledgments

   We wish to acknowledge the helpful contributions, comments, and
   suggestions that were received from Alia Atlas, Andy Bierman, Martin
   Bjorklund, Igor Bryskin, Benoit Claise, Susan Hares, Ladislav Lhotka,
   Carlos Pignataro, Juergen Schoenwaelder, Robert Wilton, Qin Wu, and
   Xian Zhang.

Contributors

   More people contributed to the data model presented in this paper
   than can be listed in the "Authors' Addresses" section.  Additional
   contributors include:

   o  Vishnu Pavan Beeram, Juniper

   o  Ken Gray, Cisco

   o  Tom Nadeau, Brocade

   o  Tony Tkacik

   o  Kent Watsen, Juniper

   o  Aleksandr Zhdankin, Cisco


























<span class="grey">Clemm, et al.                Standards Track                   [Page 56]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-57"></span>
<span class="grey"><a href="./rfc8345">RFC 8345</a>         YANG Data Model for Network Topologies       March 2018</span>


Authors' Addresses

   Alexander Clemm
   Huawei USA - Futurewei Technologies Inc.
   Santa Clara, CA
   United States of America

   Email: ludwig@clemm.org, alexander.clemm@huawei.com


   Jan Medved
   Cisco

   Email: jmedved@cisco.com


   Robert Varga
   Pantheon Technologies SRO

   Email: robert.varga@pantheon.tech


   Nitin Bahadur
   Bracket Computing

   Email: nitin_bahadur@yahoo.com


   Hariharan Ananthakrishnan
   Packet Design

   Email: hari@packetdesign.com


   Xufeng Liu
   Jabil

   Email: xufeng.liu.ietf@gmail.com













Clemm, et al.                Standards Track                   [Page 57]
</pre>
</body></html>