<html><head></head><body><pre>Network Working Group                                       T. Showalter
Request for Comments: 5230
Category: Standards Track                                  N. Freed, Ed.
                                                        Sun Microsystems
                                                            January 2008


               <span class="h1">Sieve Email Filtering: Vacation Extension</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Abstract

   This document describes an extension to the Sieve email filtering
   language for an autoresponder similar to that of the Unix "vacation"
   command for replying to messages.  Various safety features are
   included to prevent problems such as message loops.




























<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Conventions Used in This Document  . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-3">3</a>.  Capability Identifier  . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
   <a href="#section-4">4</a>.  Vacation Action  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-4.1">4.1</a>.  Days Parameter . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-4.2">4.2</a>.  Previous Response Tracking . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-4.3">4.3</a>.  Subject and From Parameters  . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-4.4">4.4</a>.  MIME Parameter . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     4.5.  Address Parameter and Limiting Replies to Personal
           Messages . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-7">7</a>
     4.6.  Restricting Replies to Automated Processes and Mailing
           Lists  . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-4.7">4.7</a>.  Interaction with Other Sieve Actions . . . . . . . . . . .  <a href="#page-8">8</a>
     <a href="#section-4.8">4.8</a>.  Examples . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-5">5</a>.  Response Message Generation  . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-5.1">5.1</a>.  SMTP MAIL FROM Address . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-5.2">5.2</a>.  Date . . . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-5.3">5.3</a>.  Subject  . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-5.4">5.4</a>.  From . . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-5.5">5.5</a>.  To . . . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-5.6">5.6</a>.  Auto-Submitted . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-5.7">5.7</a>.  Message Body . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-5.8">5.8</a>.  In-Reply-To and References . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
   6.  Relationship to Recommendations for Automatic Responses to
       Electronic Mail  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-7">7</a>.  Internationalization Considerations  . . . . . . . . . . . . . <a href="#page-11">11</a>
   <a href="#section-8">8</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-9">9</a>.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
   <a href="#section-10">10</a>. References . . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
     <a href="#section-10.1">10.1</a>. Normative References . . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
     <a href="#section-10.2">10.2</a>. Informative References . . . . . . . . . . . . . . . . . . <a href="#page-13">13</a>
   <a href="#appendix-A">Appendix A</a>.  Acknowledgements  . . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>

















<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   This document defines an extension to the Sieve language defined in
   [<a href="./rfc5228" title='"Sieve: An Email Filtering Language"'>RFC5228</a>] for notification that messages to a particular recipient
   will not be answered immediately.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Conventions Used in This Document</span>

   Conventions for notations are as in <a href="./rfc5228#section-1.1">[RFC5228] section 1.1</a>.

   The key words "MUST", "MUST NOT", "SHOULD", "SHOULD NOT", "REQUIRED",
   and "MAY" in this document are to be interpreted as defined in
   [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Capability%20Identifier"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Capability Identifier</span>

   Sieve implementations that implement vacation have an identifier of
   "vacation" for use with the capability mechanism.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Vacation%20Action"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Vacation Action</span>

   Usage:   vacation [":days" number] [":subject" string]
                     [":from" string] [":addresses" string-list]
                     [":mime"] [":handle" string] &lt;reason: string&gt;

   The "vacation" action implements a vacation autoresponder similar to
   the vacation command available under many versions of Unix.  Its
   purpose is to provide correspondents with notification that the user
   is away for an extended period of time and that they should not
   expect quick responses.

   "Vacation" is used to respond to a message with another message.
   Vacation's messages are always addressed to the Return-Path address
   (that is, the envelope from address) of the message being responded
   to.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Days%20Parameter"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Days Parameter</span>

   The ":days" argument is used to specify the period in which addresses
   are kept and are not responded to, and is always specified in days.
   The minimum value used for this parameter is normally 1.  Sites MAY
   define a different minimum value as long as the minimum is greater
   than 0.  Sites MAY also define a maximum days value, which MUST be
   greater than 7, and SHOULD be greater than 30.

   If ":days" is omitted, the default value is either 7 or the minimum
   value (as defined above), whichever is greater.




<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


   If the parameter given to ":days" is less than the minimum value,
   then the minimum value is used instead.

   If ":days" exceeds the site-defined maximum, the site-defined maximum
   is used instead.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.2.%20%20Previous%20Response%20Tracking"></a><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Previous Response Tracking</span>

   "Vacation" keeps track of all the responses it has sent to each
   address in some period (as specified by the :days optional argument).
   If vacation has not previously sent the response to this address
   within the given time period, it sends the "reason" argument to the
   SMTP MAIL FROM address [<a href="./rfc2821" title='"Simple Mail Transfer Protocol"'>RFC2821</a>] of the message that is being
   responded to.  (The SMTP MAIL FROM address should be available in the
   Return-path: header field if Sieve processing occurs after final
   delivery.)

   Tracking is not just per address, but must also take the vacation
   response itself into account.  A script writer might, for example,
   have a vacation action that will send a general notice only once in
   any two-week period.  However, even if a sender has received this
   general notice, it may be important to send a specific notice when a
   message about something timely or something specific has been
   detected.

   A particular vacation response can be identified in one of two ways.
   The first way is via an explicit :handle argument, which attaches a
   name to the response.  All vacation statements that use the same
   handle will be considered the same response for tracking purposes.

   The second way is via a synthesis of the :subject, :from, :mime, and
   reason vacation command arguments.  All vacation actions that do not
   contain an explicit handle and that use an identical combination of
   these arguments are considered the same for tracking purposes.

   For instance, if coyote@desert.example.org sends mail to
   roadrunner@acme.example.com twice, once with the subject "Cyrus bug"
   and once with the subject "come over for dinner", and
   roadrunner@acme.example.com has the script shown below,
   coyote@desert.example.org would receive two responses, one with the
   first message, one with the second.

   require "vacation";
   if header :contains "subject" "cyrus" {
       vacation "I'm out -- send mail to cyrus-bugs";
   } else {
       vacation "I'm out -- call me at +1 304 555 0123";
   }



<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


   In the above example, coyote@desert.example.org gets the second
   message despite having gotten the first one because separate vacation
   responses have been triggered.  This behavior is REQUIRED.

   There is one important exception to this rule, however.  If the Sieve
   variables extension [<a href="./rfc5229" title='"Sieve Email Filtering: Variables Extension"'>RFC5229</a>] is used, the arguments MUST NOT have
   undergone variable expansion prior to their use in response tracking.
   This is so that examples like the following script will only generate
   a single response to each incoming message with a different subject
   line.

   require ["vacation", "variables"];
   if header :matches "subject" "*" {
       vacation :subject "Automatic response to: ${1}"
                "I'm away -- send mail to foo in my absence";
   }

   As noted above, the optional ":handle" parameter can be used to tell
   the Sieve interpreter to treat two vacation actions with different
   arguments as the same command for purposes of response tracking.  The
   argument to ":handle" is a string that identifies the type of
   response being sent.  For instance, if tweety@cage.example.org sends
   mail to spike@doghouse.example.com twice, one with the subject
   "lunch?" and once with the subject "dinner?", and
   spike@doghouse.example.com has the script shown below,
   tweety@cage.example.org will only receive a single response.  (Which
   response is sent depends on the order in which the messages are
   processed.)

   require "vacation";
   if header :contains "subject" "lunch" {
       vacation :handle "ran-away" "I'm out and can't meet for lunch";
   } else {
       vacation :handle "ran-away" "I'm out";
   }

   NOTE: One way to implement the necessary mechanism here is to store a
   hash of either the current handle and the recipient address or, if no
   handle is provided, a hash of the vacation action parameters
   specifying the message content and the recipient address.  If a
   script is changed, implementations MAY reset the records of who has
   been responded to and when they have been responded to.

   IMPLEMENTATION NOTE: Care must be taken in constructing a hash of
   vacation action parameters.  In particular, since most parameters are
   optional, it is important not to let the same string used as the
   value for different parameters produce the same hash value.  One




<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


   possible way to accomplish this is to apply the hash to a series of
   counted or null terminated strings, one for each possible parameter
   in particular order.

   Implementations are free to limit the number of remembered responses;
   however, the limit MUST NOT be less than 1000.  When limiting the
   number of tracked responses, implementations SHOULD discard the
   oldest ones first.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.3.%20%20Subject%20and%20From%20Parameters"></a><a class="selflink" href="#section-4.3" id="section-4.3">4.3</a>.  Subject and From Parameters</span>

   The ":subject" parameter specifies a subject line to attach to any
   vacation response that is generated.  UTF-8 characters can be used in
   the string argument; implementations MUST convert the string to
   [<a href="./rfc2047" title='"MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text"'>RFC2047</a>] encoded words if and only if non-ASCII characters are
   present.  Implementations MUST generate an appropriate default
   subject line as specified below if no :subject parameter is
   specified.

   A ":from" parameter may be used to specify an alternate address to
   use in the From field of vacation messages.  The string must specify
   a valid [<a href="./rfc2822" title='"Internet Message Format"'>RFC2822</a>] mailbox-list.  Implementations SHOULD check the
   syntax and generate an error when a syntactically invalid ":from"
   parameter is specified.  Implementations MAY also impose restrictions
   on what addresses can specified in a ":from" parameter; it is
   suggested that values that fail such a validity check simply be
   ignored rather than cause the vacation action to fail.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.4.%20%20MIME%20Parameter"></a><a class="selflink" href="#section-4.4" id="section-4.4">4.4</a>.  MIME Parameter</span>

   The ":mime" parameter, if supplied, specifies that the reason string
   is, in fact, a MIME entity as defined in <a href="./rfc2045#section-2.4">[RFC2045] section 2.4</a>,
   including both MIME headers and content.

   If the optional :mime parameter is not supplied, the reason string is
   considered a UTF-8 string.















<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


   require "vacation";
   vacation :mime text:
   Content-Type: multipart/alternative; boundary=foo

   --foo

   I'm at the beach relaxing.  Mmmm, surf...

   --foo
   Content-Type: text/html; charset=us-ascii

   &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"
    "<a href="http://www.w3.org/TR/REC-html40/strict.dtd">http://www.w3.org/TR/REC-html40/strict.dtd</a>"&gt;
   &lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;How to relax&lt;/TITLE&gt;
   &lt;BASE HREF="http://home.example.com/pictures/"&gt;&lt;/HEAD&gt;
   &lt;BODY&gt;&lt;P&gt;I'm at the &lt;A HREF="beach.gif"&gt;beach&lt;/A&gt; relaxing.
   Mmmm, &lt;A HREF="ocean.gif"&gt;surf&lt;/A&gt;...
   &lt;/BODY&gt;&lt;/HTML&gt;

   --foo--
   .

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.5.%20%20Address%20Parameter%20and%20Limiting%20Replies%20to%20Personal%20Messages"></a><a class="selflink" href="#section-4.5" id="section-4.5">4.5</a>.  Address Parameter and Limiting Replies to Personal Messages</span>

   "Vacation" MUST NOT respond to a message unless the recipient user's
   email address is in a "To", "Cc", "Bcc", "Resent-To", "Resent-Cc", or
   "Resent-Bcc" line of the original message.  An email address is
   considered to belong to the recipient if it is one of:

   1.  an email address known by the implementation to be associated
       with the recipient,

   2.  the final envelope recipient address if it's available to the
       implementation, or

   3.  an address specified by the script writer via the ":addresses"
       argument described in the next paragraph.

   Users can supply additional mail addresses that are theirs with the
   ":addresses" argument, which takes a string-list listing additional
   addresses that a user might have.  These addresses are considered to
   belong to the recipient user in addition to the addresses known to
   the implementation.








<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.6.%20%20Restricting%20Replies%20to%20Automated%20Processes%20and%20Mailing%20Lists"></a><a class="selflink" href="#section-4.6" id="section-4.6">4.6</a>.  Restricting Replies to Automated Processes and Mailing Lists</span>

   Implementations MAY refuse to send a vacation response to a message
   that contains any header or content that makes it appear that a
   response would not be appropriate.

   Implementations MUST have a list of addresses that "vacation" MUST
   NOT send mail to.  However, the contents of this list are
   implementation defined.  The purpose of this list is to stop mail
   from going to addresses used by system daemons that would not care if
   the user is actually reading her mail.

   Implementations are encouraged, however, to include well-known
   addresses like "MAILER-DAEMON", "LISTSERV", "majordomo", and other
   addresses typically used only by automated systems.  Additionally,
   addresses ending in "-request" or beginning in "owner-", i.e.,
   reserved for mailing list software, are also suggested.

   Implementors may take guidance from [<a href="./rfc2142" title='"MAILBOX NAMES FOR COMMON SERVICES, ROLES AND FUNCTIONS"'>RFC2142</a>], but should be careful.
   Some addresses, like "POSTMASTER", are generally actually managed by
   people, and people do care if the user is going to be unavailable.

   Implementations SHOULD NOT respond to any message that contains a
   "List-Id" [<a href="./rfc2919" title='"List-Id: A Structured Field and Namespace for the Identification of Mailing Lists"'>RFC2919</a>], "List-Help", "List-Subscribe", "List-
   Unsubscribe", "List-Post", "List-Owner", or "List-Archive" [<a href="./rfc2369" title='"The Use of URLs as Meta-Syntax for Core Mail List Commands and their Transport through Message Header Fields"'>RFC2369</a>]
   header field.

   Implementations SHOULD NOT respond to any message that has an "Auto-
   submitted" header field with a value other than "no".  This header
   field is described in [<a href="./rfc3834" title='"Recommendations for Automatic Responses to Electronic Mail"'>RFC3834</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.7.%20%20Interaction%20with%20Other%20Sieve%20Actions"></a><a class="selflink" href="#section-4.7" id="section-4.7">4.7</a>.  Interaction with Other Sieve Actions</span>

   Vacation does not affect Sieve's implicit keep action.

   Vacation can only be executed once per script.  A script MUST fail
   with an appropriate error if it attempts to execute two or more
   vacation actions.

   Implementations MUST NOT consider vacation used with discard, keep,
   fileinto, or redirect an error.  The vacation action is incompatible
   with the Sieve reject and refuse actions [<a href="#ref-REJECT" title='"Sieve Email Filtering: Reject Extension"'>REJECT</a>].









<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.8.%20%20Examples"></a><a class="selflink" href="#section-4.8" id="section-4.8">4.8</a>.  Examples</span>

   Here is a simple use of vacation.

   require "vacation";
   vacation :days 23 :addresses ["tjs@example.edu",
                                 "ts4z@landru.example.edu"]
   "I'm away until October 19.
   If it's an emergency, call 911, I guess." ;

   By mingling vacation with other rules, users can do something more
   selective.

   require "vacation";
   if header :contains "from" "boss@example.edu" {
       redirect "pleeb@isp.example.org";
   } else {
       vacation "Sorry, I'm away, I'll read your
   message when I get around to it.";
   }

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Response%20Message%20Generation"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Response Message Generation</span>

   This section details the requirements for the generated response
   message.

   It is worth noting that the input message and arguments may be in
   UTF-8, and that implementations MUST deal with UTF-8 input, although
   implementations MAY transcode to other character sets as regional
   taste dictates.  When :mime is used, the reason argument also
   contains MIME header information.  The headers must conform to MIME
   conventions; in particular, 8bit text is not allowed.
   Implementations SHOULD reject vacation :mime actions containing 8bit
   header material.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20SMTP%20MAIL%20FROM%20Address"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  SMTP MAIL FROM Address</span>

   The SMTP MAIL FROM address of the message envelope SHOULD be set to
   &lt;&gt;.  NOTIFY=NEVER SHOULD also be set in the RCPT TO line during the
   SMTP transaction if the NOTARY SMTP extension [<a href="./rfc3461" title='"Simple Mail Transfer Protocol (SMTP) Service Extension for Delivery Status Notifications (DSNs)"'>RFC3461</a>] is available.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20Date"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  Date</span>

   The Date field SHOULD be set to the date and time when the vacation
   response was generated.  Note that this may not be the same as the
   time the message was delivered to the user.





<span class="grey">Showalter &amp; Freed           Standards Track                     [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.3.%20%20Subject"></a><a class="selflink" href="#section-5.3" id="section-5.3">5.3</a>.  Subject</span>

   Users can specify the Subject of the reply with the ":subject"
   parameter.  If the :subject parameter is not supplied, then the
   subject is generated as follows: The subject is set to the characters
   "Auto: " followed by the original subject.  An appropriate fixed
   Subject, such as "Automated reply", SHOULD be used in the event that
   :subject isn't specified and the original message doesn't contain a
   Subject field.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.4.%20%20From"></a><a class="selflink" href="#section-5.4" id="section-5.4">5.4</a>.  From</span>

   Unless explicitly overridden with a :from parameter, the From field
   SHOULD be set to the address of the owner of the Sieve script.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.5.%20%20To"></a><a class="selflink" href="#section-5.5" id="section-5.5">5.5</a>.  To</span>

   The To field SHOULD be set to the address of the recipient of the
   response.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.6.%20%20Auto-Submitted"></a><a class="selflink" href="#section-5.6" id="section-5.6">5.6</a>.  Auto-Submitted</span>

   An Auto-Submitted field with a value of "auto-replied" SHOULD be
   included in the message header of any vacation message sent.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.7.%20%20Message%20Body"></a><a class="selflink" href="#section-5.7" id="section-5.7">5.7</a>.  Message Body</span>

   The body of the message is taken from the reason string in the
   vacation command.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.8.%20%20In-Reply-To%20and%20References"></a><a class="selflink" href="#section-5.8" id="section-5.8">5.8</a>.  In-Reply-To and References</span>

   Replies MUST have the In-Reply-To field set to the Message-ID of the
   original message, and the References field SHOULD be updated with the
   Message-ID of the original message.

   If the original message lacks a Message-ID, an In-Reply-To need not
   be generated, and References need not be changed.

   <a href="./rfc2822#section-3.6.4">Section 3.6.4 of [RFC2822]</a> provides a complete description of how
   References fields should be generated.










<span class="grey">Showalter &amp; Freed           Standards Track                    [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Relationship%20to%20Recommendations%20for%20Automatic%20Responses%20to"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Relationship to Recommendations for Automatic Responses to</span>
<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Electronic%20Mail"></a>    Electronic Mail</span>

   The vacation extension implements a "Personal Responder" in the
   terminology defined in [<a href="./rfc3834" title='"Recommendations for Automatic Responses to Electronic Mail"'>RFC3834</a>].  Care has been taken in this
   specification to comply with the recommendations of [<a href="./rfc3834" title='"Recommendations for Automatic Responses to Electronic Mail"'>RFC3834</a>]
   regarding how personal responders should behave.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20Internationalization%20Considerations"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  Internationalization Considerations</span>

   Internationalization capabilities provided by the base Sieve language
   are discussed in [<a href="./rfc5228" title='"Sieve: An Email Filtering Language"'>RFC5228</a>].  However, the vacation extension is the
   first Sieve extension to be defined that is capable of creating
   entirely new messages.  This section deals with internationalization
   issues raised by the use of the vacation extension.

   Vacation messages are normally written using the UTF-8 charset,
   allowing text to be written in most of the world's languages.
   Additionally, the :mime parameter allows specification of arbitrary
   MIME content.  In particular, this makes it possible to use
   multipart/alternative objects to specify vacation responses in
   multiple languages simultaneously.

   The Sieve language itself allows a vacation response to be selected
   based on the content of the original message.  For example, the
   Accept-Language or Content-Language header fields [<a href="./rfc3282" title='"Content Language Headers"'>RFC3282</a>] could be
   checked and used to select appropriate text:

   require "vacation";
   if header :contains ["accept-language", "content-language"] "en"
   {
       vacation "I am away this week.";
   } else {
       vacation "Estoy ausente esta semana.";
   }

   Note that this rather simplistic test of the field values fails to
   take the structure of the fields into account and hence could be
   fooled by some more complex field values.  A more elaborate test
   could be used to deal with this problem.

   The approach of explicitly coding language selection criteria in
   scripts is preferred because in many cases language selection issues
   are conflated with other selection issues.  For example, it may be
   appropriate to use informal text in one language for vacation
   responses sent to a fellow employee while using more formal text in a
   different language in a response sent to a total stranger outside the
   company:



<span class="grey">Showalter &amp; Freed           Standards Track                    [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


   require "vacation";
   if address :matches "from" "*@ourdivision.example.com"
   {
       vacation :subject "Gone fishing"
                "Having lots of fun! Back in a day or two!";
   } else {
       vacation :subject "Je suis parti cette semaine"
                "Je lirai votre message quand je retourne.";
   }

   IMPLEMENTATION NOTE: A graphical Sieve generation interface could in
   principle be used to hide the complexity of specifying response
   selection criteria from end users.  Figuring out the right set of
   options to present in a graphical interface is likely a nontrivial
   proposition, but this is more because of the need to employ a variety
   of criteria to select different sorts of responses to send to
   different classes of people than because of the issues involved in
   selecting a response in an appropriate language.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  Security Considerations</span>

   It is critical that implementations correctly implement the behavior
   and restrictions described throughout this document.  Replies MUST
   NOT be sent out in response to messages not sent directly to the
   user, and replies MUST NOT be sent out more often than the :days
   argument states unless the script changes.

   If mail is forwarded from a site that uses subaddressing, it may be
   impossible to list all recipient addresses with ":addresses".

   Security issues associated with mail auto-responders are fully
   discussed in the security considerations section of [<a href="./rfc3834" title='"Recommendations for Automatic Responses to Electronic Mail"'>RFC3834</a>].  This
   document is believed not to introduce any additional security
   considerations in this general area.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-9" id="section-9">9</a>.  IANA Considerations</span>

   The following template specifies the IANA registration of the
   vacation Sieve extension specified in this document:

   To: iana@iana.org
   Subject: Registration of new Sieve extension

   Capability name: vacation
   Description:     adds an action for generating an auto-reply saying
                    that the original message will not be read or
                    answered immediately
   RFC number:      <a href="./rfc5230">RFC 5230</a>



<span class="grey">Showalter &amp; Freed           Standards Track                    [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


   Contact address: The Sieve discussion list &lt;ietf-mta-filters@imc.org&gt;

   This information has been added to the list of Sieve extensions given
   on <a href="http://www.iana.org/assignments/sieve-extensions">http://www.iana.org/assignments/sieve-extensions</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.%20%20References"></a><a class="selflink" href="#section-10" id="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" id="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC2045">RFC2045</a>]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
              Extensions (MIME) Part One: Format of Internet Message
              Bodies", <a href="./rfc2045">RFC 2045</a>, November 1996.

   [<a id="ref-RFC2047">RFC2047</a>]  Moore, K., "MIME (Multipurpose Internet Mail Extensions)
              Part Three: Message Header Extensions for Non-ASCII Text",
              <a href="./rfc2047">RFC 2047</a>, November 1996.

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC2822">RFC2822</a>]  Resnick, P., "Internet Message Format", <a href="./rfc2822">RFC 2822</a>,
              April 2001.

   [<a id="ref-RFC3461">RFC3461</a>]  Moore, K., "Simple Mail Transfer Protocol (SMTP) Service
              Extension for Delivery Status Notifications (DSNs)",
              <a href="./rfc3461">RFC 3461</a>, January 2003.

   [<a id="ref-RFC3834">RFC3834</a>]  Moore, K., "Recommendations for Automatic Responses to
              Electronic Mail", <a href="./rfc3834">RFC 3834</a>, August 2004.

   [<a id="ref-RFC5228">RFC5228</a>]  Guenther, P., Ed. and T. Showalter, Ed., "Sieve: An Email
              Filtering Language", <a href="./rfc5228">RFC 5228</a>, January 2008.

   [<a id="ref-RFC5229">RFC5229</a>]  Homme, K., "Sieve Email Filtering: Variables Extension",
              <a href="./rfc5229">RFC 5229</a>, January 2008.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" id="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-REJECT">REJECT</a>]   Stone, A., Elvey, M., and A. Melnikov, "Sieve Email
              Filtering: Reject Extension", Work in Progress,
              October 2007.

   [<a id="ref-RFC2142">RFC2142</a>]  Crocker, D., "MAILBOX NAMES FOR COMMON SERVICES, ROLES AND
              FUNCTIONS", <a href="./rfc2142">RFC 2142</a>, May 1997.

   [<a id="ref-RFC2369">RFC2369</a>]  Neufeld, G. and J. Baer, "The Use of URLs as Meta-Syntax
              for Core Mail List Commands and their Transport through
              Message Header Fields", <a href="./rfc2369">RFC 2369</a>, July 1998.



<span class="grey">Showalter &amp; Freed           Standards Track                    [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


   [<a id="ref-RFC2821">RFC2821</a>]  Klensin, J., "Simple Mail Transfer Protocol", <a href="./rfc2821">RFC 2821</a>,
              April 2001.

   [<a id="ref-RFC2919">RFC2919</a>]  Chandhok, R. and G. Wenger, "List-Id: A Structured Field
              and Namespace for the Identification of Mailing Lists",
              <a href="./rfc2919">RFC 2919</a>, March 2001.

   [<a id="ref-RFC3282">RFC3282</a>]  Alvestrand, H., "Content Language Headers", <a href="./rfc3282">RFC 3282</a>,
              May 2002.










































<span class="grey">Showalter &amp; Freed           Standards Track                    [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20A.%20%20Acknowledgements"></a><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  Acknowledgements</span>

   This extension is obviously inspired by Eric Allman's vacation
   program under Unix.  The authors owe a great deal to Carnegie Mellon
   University, Cyrus Daboo, Lawrence Greenfield, Michael Haardt, Kjetil
   Torgrim Homme, Arnt Gulbrandsen, Mark Mallett, Alexey Melnikov,
   Jeffrey Hutzelman, Philip Guenther, and many others whose names have
   been lost during the inexcusably long gestation period of this
   document.

Authors' Addresses

   Tim Showalter

   EMail: tjs@psaux.com


   Ned Freed (editor)
   Sun Microsystems
   3401 Centrelake Drive, Suite 410
   Ontario, CA  92761-1205
   USA

   Phone: +1 909 457 4293
   EMail: ned.freed@mrochek.com


























<span class="grey">Showalter &amp; Freed           Standards Track                    [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc5230">RFC 5230</a>               Sieve: Vacation Extension            January 2008</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and <a href="https://www.rfc-editor.org/bcp/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.












Showalter &amp; Freed           Standards Track                    [Page 16]
</pre>
</body></html>