<html><head></head><body><pre>Network Working Group                                           B. Aboba
Request for Comments: 4282                                     Microsoft
Obsoletes: <a href="./rfc2486">2486</a>                                               M. Beadles
Category: Standards Track                                       ENDFORCE
                                                                J. Arkko
                                                                Ericsson
                                                               P. Eronen
                                                                   Nokia
                                                           December 2005


                     <span class="h1">The Network Access Identifier</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   In order to provide roaming services, it is necessary to have a
   standardized method for identifying users.  This document defines the
   syntax for the Network Access Identifier (NAI), the user identity
   submitted by the client during network authentication.  "Roaming" may
   be loosely defined as the ability to use any one of multiple Internet
   Service Providers (ISPs), while maintaining a formal, customer-vendor
   relationship with only one.  Examples of where roaming capabilities
   might be required include ISP "confederations" and ISP-provided
   corporate network access support.  This document is a revised version
   of <a href="./rfc2486">RFC 2486</a>, which originally defined NAIs.  Enhancements include
   international character set and privacy support, as well as a number
   of corrections to the original RFC.












<span class="grey">Aboba, et al.               Standards Track                     [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
      <a href="#section-1.1">1.1</a>. Terminology ................................................<a href="#page-3">3</a>
      <a href="#section-1.2">1.2</a>. Requirements Language ......................................<a href="#page-4">4</a>
      <a href="#section-1.3">1.3</a>. Purpose ....................................................<a href="#page-4">4</a>
   <a href="#section-2">2</a>. NAI Definition ..................................................<a href="#page-4">4</a>
      <a href="#section-2.1">2.1</a>. Formal Syntax ..............................................<a href="#page-4">4</a>
      <a href="#section-2.2">2.2</a>. NAI Length Considerations ..................................<a href="#page-6">6</a>
      <a href="#section-2.3">2.3</a>. Support for Username Privacy ...............................<a href="#page-6">6</a>
      <a href="#section-2.4">2.4</a>. International Character Sets ...............................<a href="#page-7">7</a>
      <a href="#section-2.5">2.5</a>. Compatibility with E-Mail Usernames ........................<a href="#page-8">8</a>
      <a href="#section-2.6">2.6</a>. Compatibility with DNS .....................................<a href="#page-8">8</a>
      <a href="#section-2.7">2.7</a>. Realm Construction .........................................<a href="#page-8">8</a>
      <a href="#section-2.8">2.8</a>. Examples ..................................................<a href="#page-10">10</a>
   <a href="#section-3">3</a>. Security Considerations ........................................<a href="#page-10">10</a>
   <a href="#section-4">4</a>. IANA Considerations ............................................<a href="#page-11">11</a>
   <a href="#section-5">5</a>. References .....................................................<a href="#page-11">11</a>
      <a href="#section-5.1">5.1</a>. Normative References ......................................<a href="#page-11">11</a>
      <a href="#section-5.2">5.2</a>. Informative References ....................................<a href="#page-12">12</a>
   <a href="#appendix-A">Appendix A</a>.  Changes from <a href="./rfc2486">RFC 2486</a> ................................<a href="#page-14">14</a>
   <a href="#appendix-B">Appendix B</a>.  Acknowledgements .....................................<a href="#page-14">14</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   Considerable interest exists for a set of features that fit within
   the general category of "roaming capability" for network access,
   including dialup Internet users, Virtual Private Network (VPN) usage,
   wireless LAN authentication, and other applications.  Interested
   parties have included the following:

   o  Regional Internet Service Providers (ISPs) operating within a
      particular state or province, looking to combine their efforts
      with those of other regional providers to offer dialup service
      over a wider area.

   o  National ISPs wishing to combine their operations with those of
      one or more ISPs in another nation to offer more comprehensive
      dialup service in a group of countries or on a continent.

   o  Wireless LAN hotspots providing service to one or more ISPs.

   o  Businesses desiring to offer their employees a comprehensive
      package of dialup services on a global basis.  Those services may
      include Internet access as well as secure access to corporate
      intranets via a VPN, enabled by tunneling protocols such as the





<span class="grey">Aboba, et al.               Standards Track                     [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


      Point-to-Point Tunneling Protocol (PPTP) [<a href="./rfc2637" title='"Point-to-Point Tunneling Protocol"'>RFC2637</a>], the Layer 2
      Forwarding (L2F) protocol [<a href="./rfc2341" title='"Cisco Layer Two Forwarding (Protocol) "'>RFC2341</a>], the Layer 2 Tunneling
      Protocol (L2TP) [<a href="./rfc2661" title='"Layer Two Tunneling Protocol "'>RFC2661</a>], and the IPsec tunnel mode [<a href="./rfc2401" title='"Security Architecture for the Internet Protocol"'>RFC2401</a>].

   In order to enhance the interoperability of roaming services, it is
   necessary to have a standardized method for identifying users.  This
   document defines syntax for the Network Access Identifier (NAI).
   Examples of implementations that use the NAI, and descriptions of its
   semantics, can be found in [<a href="./rfc2194" title='"Review of Roaming Implementations"'>RFC2194</a>].

   This document is a revised version of <a href="./rfc2486">RFC 2486</a> [<a href="./rfc2486" title='"The Network Access Identifier"'>RFC2486</a>], which
   originally defined NAIs.  Differences and enhancements compared to
   <a href="./rfc2486">RFC 2486</a> are listed in <a href="#appendix-A">Appendix A</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.1.%20%20Terminology"></a><a class="selflink" href="#section-1.1" id="section-1.1">1.1</a>.  Terminology</span>

   This document frequently uses the following terms:

   Network Access Identifier

      The Network Access Identifier (NAI) is the user identity submitted
      by the client during network access authentication.  In roaming,
      the purpose of the NAI is to identify the user as well as to
      assist in the routing of the authentication request.  Please note
      that the NAI may not necessarily be the same as the user's e-mail
      address or the user identity submitted in an application layer
      authentication.

   Network Access Server

      The Network Access Server (NAS) is the device that clients connect
      to in order to get access to the network.  In PPTP terminology,
      this is referred to as the PPTP Access Concentrator (PAC), and in
      L2TP terminology, it is referred to as the L2TP Access
      Concentrator (LAC).  In IEEE 802.11, it is referred to as an
      Access Point.

   Roaming Capability

      Roaming capability can be loosely defined as the ability to use
      any one of multiple Internet Service Providers (ISPs), while
      maintaining a formal, customer-vendor relationship with only one.
      Examples of cases where roaming capability might be required
      include ISP "confederations" and ISP-provided corporate network
      access support.






<span class="grey">Aboba, et al.               Standards Track                     [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   Tunneling Service

      A tunneling service is any network service enabled by tunneling
      protocols such as PPTP, L2F, L2TP, and IPsec tunnel mode.  One
      example of a tunneling service is secure access to corporate
      intranets via a Virtual Private Network (VPN).

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.2.%20%20Requirements%20Language"></a><a class="selflink" href="#section-1.2" id="section-1.2">1.2</a>.  Requirements Language</span>

   In this document, the key words "MAY", "MUST, "MUST NOT", "OPTIONAL",
   "RECOMMENDED", "SHOULD", and "SHOULD NOT", are to be interpreted as
   described in [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.3.%20%20Purpose"></a><a class="selflink" href="#section-1.3" id="section-1.3">1.3</a>.  Purpose</span>

   As described in [<a href="./rfc2194" title='"Review of Roaming Implementations"'>RFC2194</a>], there are a number of providers offering
   network access services, and the number of Internet Service Providers
   involved in roaming consortia is increasing rapidly.

   In order to be able to offer roaming capability, one of the
   requirements is to be able to identify the user's home authentication
   server.  For use in roaming, this function is accomplished via the
   Network Access Identifier (NAI) submitted by the user to the NAS in
   the initial network authentication.  It is also expected that NASes
   will use the NAI as part of the process of opening a new tunnel, in
   order to determine the tunnel endpoint.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20NAI%20Definition"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  NAI Definition</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.%20%20Formal%20Syntax"></a><a class="selflink" href="#section-2.1" id="section-2.1">2.1</a>.  Formal Syntax</span>

   The grammar for the NAI is given below, described in Augmented
   Backus-Naur Form (ABNF) as documented in [<a href="./rfc4234" title='"Augmented BNF for Syntax Specifications: ABNF"'>RFC4234</a>].  The grammar for
   the username is based on [<a href="./rfc0821" title='"Simple Mail Transfer Protocol"'>RFC0821</a>], and the grammar for the realm is
   an updated version of [<a href="./rfc1035" title='"Domain names - implementation and specification"'>RFC1035</a>].

   nai         =  username
   nai         =/ "@" realm
   nai         =/ username "@" realm

   username    =  dot-string
   dot-string  =  string
   dot-string  =/ dot-string "." string
   string      =  char
   string      =/ string char
   char        =  c
   char        =/ "\" x




<span class="grey">Aboba, et al.               Standards Track                     [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   c           =  %x21    ; '!'              allowed
                          ; '"'              not allowed
   c           =/ %x23    ; '#'              allowed
   c           =/ %x24    ; '$'              allowed
   c           =/ %x25    ; '%'              allowed
   c           =/ %x26    ; '&amp;'              allowed
   c           =/ %x27    ; '''              allowed
                          ; '(', ')'         not allowed
   c           =/ %x2A    ; '*'              allowed
   c           =/ %x2B    ; '+'              allowed
                          ; ','              not allowed
   c           =/ %x2D    ; '-'              allowed
                          ; '.'              not allowed
   c           =/ %x2F    ; '/'              allowed
   c           =/ %x30-39 ; '0'-'9'          allowed
                          ; ';', ':', '&lt;'    not allowed
   c           =/ %x3D    ; '='              allowed
                          ; '&gt;'              not allowed
   c           =/ %x3F    ; '?'              allowed
                          ; '@'              not allowed
   c           =/ %x41-5a ; 'A'-'Z'          allowed
                          ; '[', '\', ']'    not allowed
   c           =/ %x5E    ; '^'              allowed
   c           =/ %x5F    ; '_'              allowed
   c           =/ %x60    ; '`'              allowed
   c           =/ %x61-7A ; 'a'-'z'          allowed
   c           =/ %x7B    ; '{'              allowed
   c           =/ %x7C    ; '|'              allowed
   c           =/ %x7D    ; '}'              allowed
   c           =/ %x7E    ; '~'              allowed
                          ; DEL              not allowed
   c           =/ %x80-FF ; UTF-8-Octet      allowed (not in <a href="./rfc2486">RFC 2486</a>)
                          ; Where UTF-8-octet is any octet in the
                          ; multi-octet UTF-8 representation of a
                          ; unicode codepoint above %x7F.
                          ; Note that c must also satisfy rules in
                          ; <a href="#section-2.4">Section 2.4</a>, including, for instance,
                          ; checking that no prohibited output is
                          ; used (see also <a href="#section-2.3">Section 2.3</a> of
                          ; [<a href="./rfc4013" title='"SASLprep: Stringprep Profile for User Names and Passwords"'>RFC4013</a>]).
   x           =  %x00-FF ; all 128 ASCII characters, no exception;
                          ; as well as all UTF-8-octets as defined
                          ; above (this was not allowed in
                          ; <a href="./rfc2486">RFC 2486</a>).  Note that x must nevertheless
                          ; again satisfy the <a href="#section-2.4">Section 2.4</a> rules.

   realm       =  1*( label "." ) label
   label       =  let-dig *(ldh-str)



<span class="grey">Aboba, et al.               Standards Track                     [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   ldh-str     =  *( alpha / digit / "-" ) let-dig
   let-dig     =  alpha / digit
   alpha       =  %x41-5A  ; 'A'-'Z'
   alpha       =/ %x61-7A  ; 'a'-'z'
   digit       =  %x30-39  ; '0'-'9'

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.%20%20NAI%20Length%20Considerations"></a><a class="selflink" href="#section-2.2" id="section-2.2">2.2</a>.  NAI Length Considerations</span>

   Devices handling NAIs MUST support an NAI length of at least 72
   octets.  Support for an NAI length of 253 octets is RECOMMENDED.
   However, the following implementation issues should be considered:

   o  NAIs are often transported in the User-Name attribute of the
      Remote Authentication Dial-In User Service (RADIUS) protocol.
      Unfortunately, <a href="./rfc2865">RFC 2865</a> <a href="./rfc2865#section-5.1">[RFC2865], Section 5.1</a>, states that "the
      ability to handle at least 63 octets is recommended."  As a
      result, it may not be possible to transfer NAIs beyond 63 octets
      through all devices.  In addition, since only a single User-Name
      attribute may be included in a RADIUS message and the maximum
      attribute length is 253 octets; RADIUS is unable to support NAI
      lengths beyond 253 octets.

   o  NAIs can also be transported in the User-Name attribute of
      Diameter [<a href="./rfc3588" title='"Diameter Base Protocol"'>RFC3588</a>], which supports content lengths up to 2^24 - 9
      octets.  As a result, NAIs processed only by Diameter nodes can be
      very long.  Unfortunately, an NAI transported over Diameter may
      eventually be translated to RADIUS, in which case the above
      limitations apply.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.3.%20%20Support%20for%20Username%20Privacy"></a><a class="selflink" href="#section-2.3" id="section-2.3">2.3</a>.  Support for Username Privacy</span>

   Interpretation of the username part of the NAI depends on the realm
   in question.  Therefore, the "username" part SHOULD be treated as
   opaque data when processed by nodes that are not a part of the
   authoritative domain (in the sense of <a href="#section-4">Section 4</a>) for that realm.

   In some situations, NAIs are used together with a separate
   authentication method that can transfer the username part in a more
   secure manner to increase privacy.  In this case, NAIs MAY be
   provided in an abbreviated form by omitting the username part.
   Omitting the username part is RECOMMENDED over using a fixed username
   part, such as "anonymous", since it provides an unambiguous way to
   determine whether the username is intended to uniquely identify a
   single user.

   For roaming purposes, it is typically necessary to locate the
   appropriate backend authentication server for the given NAI before
   the authentication conversation can proceed.  As a result, the realm



<span class="grey">Aboba, et al.               Standards Track                     [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   portion is typically required in order for the authentication
   exchange to be routed to the appropriate server.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.4.%20%20International%20Character%20Sets"></a><a class="selflink" href="#section-2.4" id="section-2.4">2.4</a>.  International Character Sets</span>

   This specification allows both international usernames and realms.
   International usernames are based on the use of Unicode characters,
   encoded as UTF-8 and processed with a certain algorithm to ensure a
   canonical representation.  Internationalization of the realm portion
   of the NAI is based on "Internationalizing Domain Names in
   Applications (IDNA)" [<a href="./rfc3490" title='"Internationalizing Domain Names in Applications (IDNA)"'>RFC3490</a>].

   In order to ensure a canonical representation, characters of the
   username portion in an NAI MUST fulfill the ABNF in this
   specification as well as the requirements specified in [<a href="./rfc4013" title='"SASLprep: Stringprep Profile for User Names and Passwords"'>RFC4013</a>].
   These requirements consist of the following:

   o  Mapping requirements, as specified in <a href="./rfc4013#section-2.1">Section 2.1 of [RFC4013]</a>.
      Mapping consists of mapping certain characters to others (such as
      SPACE) in order to increase the likelihood of correctly performed
      comparisons.

   o  Normalization requirements, as specified in <a href="./rfc4013#section-2.2">Section 2.2 of
      [RFC4013]</a>, are also designed to assist in comparisons.

   o  Prohibited output.  Certain characters are not permitted in
      correctly formed strings that follow <a href="./rfc4013#section-2.3">Section 2.3 of [RFC4013]</a>.
      Ensuring that NAIs conform to their ABNF is not sufficient; it is
      also necessary to ensure that they do not contain prohibited
      output.

   o  Bidirectional characters are handled as specified in <a href="./rfc4013#section-2.4">Section 2.4
      of [RFC4013]</a>.

   o  Unassigned code points are specified in <a href="./rfc4013#section-2.5">Section 2.5 of [RFC4013]</a>.
      The use of unassigned code points is prohibited.

   The mapping, normalization, and bidirectional character processing
   MUST be performed by end systems that take international text as
   input.  In a network access setting, such systems are typically the
   client and the Authentication, Authorization, and Accounting (AAA)
   server.  NAIs are sent over the wire in their canonical form, and
   tasks such as normalization do not typically need to be performed by
   nodes that just pass NAIs around or receive them from the network.
   End systems MUST also perform checking for prohibited output and
   unassigned code points.  Other systems MAY perform such checks, when
   they know that a particular data item is an NAI.




<span class="grey">Aboba, et al.               Standards Track                     [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   The realm name is an "IDN-unaware domain name slot" as defined in
   [<a href="./rfc3490" title='"Internationalizing Domain Names in Applications (IDNA)"'>RFC3490</a>].  That is, it can contain only ASCII characters.  An
   implementation MAY support Internationalized Domain Names (IDNs)
   using the ToASCII operation; see [<a href="./rfc3490" title='"Internationalizing Domain Names in Applications (IDNA)"'>RFC3490</a>] for more information.

   The responsibility for the conversion of internationalized domain
   names to ASCII is left for the end systems, such as network access
   clients and AAA servers.  Similarly, we expect domain name
   comparisons, matching, resolution, and AAA routing to be performed on
   the ASCII versions of the internationalized domain names.  This
   provides a canonical representation, ensures that intermediate
   systems such as AAA proxies do not need to perform translations, and
   can be expected to work through systems that are unaware of
   international character sets.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.5.%20%20Compatibility%20with%20E-Mail%20Usernames"></a><a class="selflink" href="#section-2.5" id="section-2.5">2.5</a>.  Compatibility with E-Mail Usernames</span>

   As proposed in this document, the Network Access Identifier is of the
   form user@realm.  Please note that while the user portion of the NAI
   is based on the BNF described in [<a href="./rfc0821" title='"Simple Mail Transfer Protocol"'>RFC0821</a>], it has been extended for
   internationalization support as well as for purposes of <a href="#section-2.7">Section 2.7</a>,
   and is not necessarily compatible with the usernames used in e-mail.
   Note also that the internationalization requirements for NAIs and
   e-mail addresses are different, since the former need to be typed in
   only by the user himself and his own operator, not by others.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.6.%20%20Compatibility%20with%20DNS"></a><a class="selflink" href="#section-2.6" id="section-2.6">2.6</a>.  Compatibility with DNS</span>

   The BNF of the realm portion allows the realm to begin with a digit,
   which is not permitted by the BNF described in [<a href="./rfc1035" title='"Domain names - implementation and specification"'>RFC1035</a>].  This
   change was made to reflect current practice; although not permitted
   by the BNF described in [<a href="./rfc1035" title='"Domain names - implementation and specification"'>RFC1035</a>], Fully Qualified Domain Names
   (FQDNs) such as 3com.com are commonly used and accepted by current
   software.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.7.%20%20Realm%20Construction"></a><a class="selflink" href="#section-2.7" id="section-2.7">2.7</a>.  Realm Construction</span>

   NAIs are used, among other purposes, for routing AAA transactions to
   the user's home realm.  Usually, the home realm appears in the realm
   portion of the NAI, but in some cases a different realm can be used.
   This may be useful, for instance, when the home realm is reachable
   only via another mediating realm.

   Such usage may prevent interoperability unless the parties involved
   have a mutual agreement that the usage is allowed.  In particular,
   NAIs MUST NOT use a different realm than the home realm unless the
   sender has explicit knowledge that (a) the specified other realm is
   available and (b) the other realm supports such usage.  The sender



<span class="grey">Aboba, et al.               Standards Track                     [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   may determine the fulfillment of these conditions through a database,
   dynamic discovery, or other means not specified here.  Note that the
   first condition is affected by roaming, as the availability of the
   other realm may depend on the user's location or the desired
   application.

   The use of the home realm MUST be the default unless otherwise
   configured.

   Where these conditions are fulfilled, an NAI such as

       user@homerealm.example.net

   MAY be represented as in

       homerealm.example.net!user@otherrealm.example.net

   In this case, the part before the (non-escaped) '!'  MUST be a realm
   name as defined in the ABNF in <a href="#section-2.1">Section 2.1</a>.  This realm name is an
   "IDN-unaware domain name slot", just like the realm name after the
   "@" character; see <a href="#section-2.4">Section 2.4</a> for details.  When receiving such an
   NAI, the other realm MUST convert the format back to
   "user@homerealm.example.net" when passing the NAI forward, as well as
   applying appropriate AAA routing for the transaction.

   The conversion process may apply also recursively.  That is, after
   the conversion, the result may still have one or more '!' characters
   in the username.  For instance, the NAI

       other2.example.net!home.example.net!user@other1.example.net

   would first be converted in other1.example.net to

       home.example.net!user@other2.example.net

   and then at other2.example.net finally to

       user@homerealm.example.net

   Note that the syntax described in this section is optional and is not
   a part of the ABNF.  The '!' character may appear in the username
   portion of an NAI for other purposes as well, and in those cases, the
   rules outlined here do not apply; the interpretation of the username
   is up to an agreement between the identified user and the realm given
   after the '@' character.






<span class="grey">Aboba, et al.               Standards Track                     [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.8.%20%20Examples"></a><a class="selflink" href="#section-2.8" id="section-2.8">2.8</a>.  Examples</span>

   Examples of valid Network Access Identifiers include the following:

           bob
           joe@example.com
           fred@foo-9.example.com
           jack@3rd.depts.example.com
           fred.smith@example.com
           fred_smith@example.com
           fred$@example.com
           fred=?#$&amp;*+-/^smith@example.com
           nancy@eng.example.net
           eng.example.net!nancy@example.net
           eng%nancy@example.net
           @privatecorp.example.net
           \(user\)@example.net
           alice@xn--tmonesimerkki-bfbb.example.net

   The last example uses an IDN converted into an ASCII representation.

   Examples of invalid Network Access Identifiers include the following:

           fred@example
           fred@example_9.com
           fred@example.net@example.net
           fred.@example.net
           eng:nancy@example.net
           eng;nancy@example.net
           (user)@example.net
           &lt;nancy&gt;@example.net

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Security%20Considerations"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Security Considerations</span>

   Since an NAI reveals the home affiliation of a user, it may assist an
   attacker in further probing the username space.  Typically, this
   problem is of most concern in protocols that transmit the username in
   clear-text across the Internet, such as in RADIUS, described in
   [<a href="./rfc2865" title='"Remote Authentication Dial In User Service (RADIUS)"'>RFC2865</a>] and [<a href="./rfc2866" title='"RADIUS Accounting"'>RFC2866</a>].  In order to prevent snooping of the
   username, protocols may use confidentiality services provided by
   protocols transporting them, such as RADIUS protected by IPsec
   [<a href="./rfc3579" title='"RADIUS (Remote Authentication Dial In User Service) Support For Extensible Authentication Protocol (EAP)"'>RFC3579</a>] or Diameter protected by TLS [<a href="./rfc3588" title='"Diameter Base Protocol"'>RFC3588</a>].

   This specification adds the possibility of hiding the username part
   in the NAI, by omitting it.  As discussed in <a href="#section-2.3">Section 2.3</a>, this is
   possible only when NAIs are used together with a separate
   authentication method that can transfer the username in a secure
   manner.  In some cases, application-specific privacy mechanism have



<span class="grey">Aboba, et al.               Standards Track                    [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   also been used with NAIs.  For instance, some Extensible
   Authentication Protocol (EAP) methods apply method-specific
   pseudonyms in the username part of the NAI [<a href="./rfc3748" title='"Extensible Authentication Protocol (EAP)"'>RFC3748</a>].  While neither
   of these approaches can protect the realm part, their advantage over
   transport protection is that privacy of the username is protected,
   even through intermediate nodes such as NASes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  IANA Considerations</span>

   In order to avoid creating any new administrative procedures,
   administration of the NAI realm namespace piggybacks on the
   administration of the DNS namespace.

   NAI realm names are required to be unique, and the rights to use a
   given NAI realm for roaming purposes are obtained coincident with
   acquiring the rights to use a particular Fully Qualified Domain Name
   (FQDN).  Those wishing to use an NAI realm name should first acquire
   the rights to use the corresponding FQDN.  Using an NAI realm without
   ownership of the corresponding FQDN creates the possibility of
   conflict and therefore is to be discouraged.

   Note that the use of an FQDN as the realm name does not require use
   of the DNS for location of the authentication server.  While Diameter
   [<a href="./rfc3588" title='"Diameter Base Protocol"'>RFC3588</a>] supports the use of DNS for location of authentication
   servers, existing RADIUS implementations typically use proxy
   configuration files in order to locate authentication servers within
   a domain and perform authentication routing.  The implementations
   described in [<a href="./rfc2194" title='"Review of Roaming Implementations"'>RFC2194</a>] did not use DNS for location of the
   authentication server within a domain.  Similarly, existing
   implementations have not found a need for dynamic routing protocols
   or propagation of global routing information.  Note also that there
   is no requirement that the NAI represent a valid email address.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20References"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20Normative%20References"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  Normative References</span>

   [<a id="ref-RFC1035">RFC1035</a>]        Mockapetris, P., "Domain names - implementation and
                    specification", STD 13, <a href="./rfc1035">RFC 1035</a>, November 1987.

   [<a id="ref-RFC2119">RFC2119</a>]        Bradner, S., "Key words for use in RFCs to Indicate
                    Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC4234">RFC4234</a>]        Crocker, D. and P. Overell, "Augmented BNF for
                    Syntax Specifications: ABNF", <a href="./rfc4234">RFC 4234</a>, October
                    2005.





<span class="grey">Aboba, et al.               Standards Track                    [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   [<a id="ref-RFC3490">RFC3490</a>]        Faltstrom, P., Hoffman, P., and A. Costello,
                    "Internationalizing Domain Names in Applications
                    (IDNA)", <a href="./rfc3490">RFC 3490</a>, March 2003.

   [<a id="ref-RFC4013">RFC4013</a>]        Zeilenga, K., "SASLprep: Stringprep Profile for User
                    Names and Passwords", <a href="./rfc4013">RFC 4013</a>, February 2005.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20Informative%20References"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  Informative References</span>

   [<a id="ref-RFC0821">RFC0821</a>]        Postel, J., "Simple Mail Transfer Protocol", STD 10,
                    <a href="./rfc821">RFC 821</a>, August 1982.

   [<a id="ref-RFC2194">RFC2194</a>]        Aboba, B., Lu, J., Alsop, J., Ding, J., and W. Wang,
                    "Review of Roaming Implementations", <a href="./rfc2194">RFC 2194</a>,
                    September 1997.

   [<a id="ref-RFC2341">RFC2341</a>]        Valencia, A., Littlewood, M., and T. Kolar, "Cisco
                    Layer Two Forwarding (Protocol) "L2F"", <a href="./rfc2341">RFC 2341</a>,
                    May 1998.

   [<a id="ref-RFC2401">RFC2401</a>]        Kent, S. and R. Atkinson, "Security Architecture for
                    the Internet Protocol", <a href="./rfc2401">RFC 2401</a>, November 1998.

   [<a id="ref-RFC2486">RFC2486</a>]        Aboba, B. and M. Beadles, "The Network Access
                    Identifier", <a href="./rfc2486">RFC 2486</a>, January 1999.

   [<a id="ref-RFC2637">RFC2637</a>]        Hamzeh, K., Pall, G., Verthein, W., Taarud, J.,
                    Little, W., and G. Zorn, "Point-to-Point Tunneling
                    Protocol", <a href="./rfc2637">RFC 2637</a>, July 1999.

   [<a id="ref-RFC2661">RFC2661</a>]        Townsley, W., Valencia, A., Rubens, A., Pall, G.,
                    Zorn, G., and B. Palter, "Layer Two Tunneling
                    Protocol "L2TP"", <a href="./rfc2661">RFC 2661</a>, August 1999.

   [<a id="ref-RFC2865">RFC2865</a>]        Rigney, C., Willens, S., Rubens, A., and W. Simpson,
                    "Remote Authentication Dial In User Service
                    (RADIUS)", <a href="./rfc2865">RFC 2865</a>, June 2000.

   [<a id="ref-RFC2866">RFC2866</a>]        Rigney, C., "RADIUS Accounting", <a href="./rfc2866">RFC 2866</a>, June
                    2000.

   [<a id="ref-RFC3579">RFC3579</a>]        Aboba, B. and P. Calhoun, "RADIUS (Remote
                    Authentication Dial In User Service) Support For
                    Extensible Authentication Protocol (EAP)", <a href="./rfc3579">RFC 3579</a>,
                    September 2003.






<span class="grey">Aboba, et al.               Standards Track                    [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   [<a id="ref-RFC3588">RFC3588</a>]        Calhoun, P., Loughney, J., Guttman, E., Zorn, G.,
                    and J. Arkko, "Diameter Base Protocol", <a href="./rfc3588">RFC 3588</a>,
                    September 2003.

   [<a id="ref-RFC3748">RFC3748</a>]        Aboba, B., Blunk, L., Vollbrecht, J., Carlson, J.,
                    and H. Levkowetz, "Extensible Authentication
                    Protocol (EAP)", <a href="./rfc3748">RFC 3748</a>, June 2004.

   [<a id="ref-netsel-problem">netsel-problem</a>] Arkko, J. and B. Aboba, "Network Discovery and
                    Selection Problem", Work in Progress, October 2005.









































<span class="grey">Aboba, et al.               Standards Track                    [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20A.%20%20Changes%20from%20RFC%202486"></a><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  Changes from <a href="./rfc2486">RFC 2486</a></span>

   This document contains the following updates with respect to the
   original NAI definition in <a href="./rfc2486">RFC 2486</a> [<a href="./rfc2486" title='"The Network Access Identifier"'>RFC2486</a>]:

   o  International character set support has been added for both
      usernames and realms.  Note that this implies character codes 128
      - 255 may be used in the username portion, which may be
      unacceptable to nodes that only support <a href="./rfc2486">RFC 2486</a>.  Many devices
      already allow this behaviour, however.

   o  Username privacy support has been added.  Note that NAIs without a
      username (for privacy) may not be acceptable to <a href="./rfc2486">RFC 2486</a>-compliant
      nodes.  Many devices already allow this behaviour, however.

   o  A recommendation to support NAI length of at least 253 octets has
      been added, and compatibility considerations among NAI lengths in
      this specification and various AAA protocols are discussed.  Note
      that long NAIs may not be acceptable to <a href="./rfc2486">RFC 2486</a>-compliant nodes.

   o  The mediating network syntax and its implications have been fully
      described and not given only as an example.  Note that this syntax
      is not intended to be a full solution to network discovery and
      selection needs as defined in [<a href="#ref-netsel-problem" title='"Network Discovery and Selection Problem"'>netsel-problem</a>].  Rather, it is
      intended as a clarification of <a href="./rfc2486">RFC 2486</a>.

      However, as discussed in <a href="#section-2.7">Section 2.7</a>, this specification requires
      that this syntax be applied only when there is explicit knowledge
      that the peer system supports such syntax.

   o  The realm BNF entry definition has been changed to avoid an error
      (infinite recursion) in the original specification.

   o  Several clarifications and improvements have been incorporated
      into the ABNF specification for NAIs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20B.%20%20Acknowledgements"></a><a class="selflink" href="#appendix-B" id="appendix-B">Appendix B</a>.  Acknowledgements</span>

   Thanks to Glen Zorn for many useful discussions of this problem
   space, and to Farid Adrangi for suggesting the representation of
   mediating networks in NAIs.  Jonathan Rosenberg reported the BNF
   error.  Dale Worley suggested clarifications of the x and special BNF
   entries.  Arne Norefors reported the length differences between <a href="./rfc2486">RFC</a>
   <a href="./rfc2486">2486</a> and <a href="./rfc2865">RFC 2865</a>.  Paul Hoffman helped with the international
   character set issues.  Kalle Tammela, Stefaan De Cnodder, Nagi
   Jonnala, Bert Wijnen, Blair Bullock, Yoshihiro Ohba, Ignacio Goyret,
   John Loughney, Henrik Levkowetz, Ted Hardie, Bill Fenner, Sam
   Hartman, and Richard Perlman provided many useful comments on this



<span class="grey">Aboba, et al.               Standards Track                    [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


   document.  The ABNF validator at <a href="http://www.apps.ietf.org/abnf.html">http://www.apps.ietf.org/abnf.html</a>
   was used to verify the syntactic correctness of the ABNF in
   <a href="#section-2.1">Section 2.1</a>.

Authors' Addresses

   Bernard Aboba
   Microsoft
   One Microsoft Way
   Redmond, WA  98052
   USA

   EMail: bernarda@microsoft.com


   Mark A. Beadles
   ENDFORCE
   565 Metro Place South Suite 300
   Dublin  OH 43017
   USA

   EMail: mbeadles@endforce.com


   Jari Arkko
   Ericsson
   Jorvas  02420
   Finland

   EMail: jari.arkko@ericsson.com


   Pasi Eronen
   Nokia Research Center
   P.O. Box 407
   FIN-00045 Nokia Group
   Finland

   EMail: pasi.eronen@nokia.com












<span class="grey">Aboba, et al.               Standards Track                    [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc4282">RFC 4282</a>             The Network Access Identifier         December 2005</span>


Full Copyright Statement

   Copyright (C) The Internet Society (2005).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and <a href="https://www.rfc-editor.org/bcp/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Aboba, et al.               Standards Track                    [Page 16]
</pre>
</body></html>