<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9433: Segment Routing over IPv6 for the Mobile User Plane</title>
<meta content="Satoru Matsushima" name="author"/>
<meta content="Clarence Filsfils" name="author"/>
<meta content="Miya Kohno" name="author"/>
<meta content="Pablo Camarillo Garvia" name="author"/>
<meta content="Daniel Voyer" name="author"/>
<meta content="
       
        This document discusses the applicability of Segment Routing over IPv6
        (SRv6) to the user plane of mobile networks. The network programming
        nature of SRv6 accomplishes mobile user-plane functions in a simple
        manner.  The statelessness of SRv6 and its ability to control both
        service layer path and underlying transport can be beneficial to the
        mobile user plane, providing flexibility, end-to-end network slicing,
        and Service Level Agreement (SLA) control for various
        applications.  
       
        This document discusses how SRv6 could be used as the user plane of
        mobile networks. This document also specifies the SRv6
        Endpoint Behaviors required for mobility use cases.
       
    " name="description"/>
<meta content="xml2rfc 3.17.4" name="generator"/>
<meta content="9433" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.17.4
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 56.1
-->
<link href="rfc9433.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef,
.iref + a[href].internal {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9433" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-dmm-srv6-mobile-uplane-24" rel="prev"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9433</td>
<td class="center">SRv6 Mobile User Plane</td>
<td class="right">July 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Matsushima, et al.</td>
<td class="center">Informational</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9433">9433</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Informational</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2023-07">July 2023</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">S. Matsushima, <span class="editor">Ed.</span>
</div>
<div class="org">SoftBank</div>
</div>
<div class="author">
      <div class="author-name">C. Filsfils</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">M. Kohno</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">P. Camarillo, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">D. Voyer</div>
<div class="org">Bell Canada</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9433</h1>
<h1 id="title">Segment Routing over IPv6 for the Mobile User Plane</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
        This document discusses the applicability of Segment Routing over IPv6
        (SRv6) to the user plane of mobile networks. The network programming
        nature of SRv6 accomplishes mobile user-plane functions in a simple
        manner.  The statelessness of SRv6 and its ability to control both
        service layer path and underlying transport can be beneficial to the
        mobile user plane, providing flexibility, end-to-end network slicing,
        and Service Level Agreement (SLA) control for various
        applications.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
<p id="section-abstract-2">
        This document discusses how SRv6 could be used as the user plane of
        mobile networks. This document also specifies the SRv6
        Endpoint Behaviors required for mobility use cases.<a class="pilcrow" href="#section-abstract-2">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This document is not an Internet Standards Track specification; it is
            published for informational purposes.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by the
            Internet Engineering Steering Group (IESG).  Not all documents
            approved by the IESG are candidates for any level of Internet
            Standard; see Section 2 of RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9433">https://www.rfc-editor.org/info/rfc9433</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-conventions-and-terminology">Conventions and Terminology</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p class="keepWithNext" id="section-toc.1-1.2.2.1.1"><a class="auto internal xref" href="#section-2.1">2.1</a>.  <a class="internal xref" href="#name-terminology">Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p class="keepWithNext" id="section-toc.1-1.2.2.2.1"><a class="auto internal xref" href="#section-2.2">2.2</a>.  <a class="internal xref" href="#name-conventions">Conventions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a class="auto internal xref" href="#section-2.3">2.3</a>.  <a class="internal xref" href="#name-predefined-srv6-endpoint-be">Predefined SRv6 Endpoint Behaviors</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-motivation">Motivation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-3gpp-reference-architecture">3GPP Reference Architecture</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-user-plane-modes">User-Plane Modes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="auto internal xref" href="#section-5.1">5.1</a>.  <a class="internal xref" href="#name-traditional-mode">Traditional Mode</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a class="auto internal xref" href="#section-5.1.1">5.1.1</a>.  <a class="internal xref" href="#name-packet-flow-uplink">Packet Flow - Uplink</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a class="auto internal xref" href="#section-5.1.2">5.1.2</a>.  <a class="internal xref" href="#name-packet-flow-downlink">Packet Flow - Downlink</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="auto internal xref" href="#section-5.2">5.2</a>.  <a class="internal xref" href="#name-enhanced-mode">Enhanced Mode</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a class="auto internal xref" href="#section-5.2.1">5.2.1</a>.  <a class="internal xref" href="#name-packet-flow-uplink-2">Packet Flow - Uplink</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a class="auto internal xref" href="#section-5.2.2">5.2.2</a>.  <a class="internal xref" href="#name-packet-flow-downlink-2">Packet Flow - Downlink</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a class="auto internal xref" href="#section-5.2.3">5.2.3</a>.  <a class="internal xref" href="#name-scalability">Scalability</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="auto internal xref" href="#section-5.3">5.3</a>.  <a class="internal xref" href="#name-enhanced-mode-with-unchange">Enhanced Mode with Unchanged gNB GTP-U Behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a class="auto internal xref" href="#section-5.3.1">5.3.1</a>.  <a class="internal xref" href="#name-interworking-with-ipv6-gtp-">Interworking with IPv6 GTP-U</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.2">
                    <p id="section-toc.1-1.5.2.3.2.2.1"><a class="auto internal xref" href="#section-5.3.2">5.3.2</a>.  <a class="internal xref" href="#name-interworking-with-ipv4-gtp-">Interworking with IPv4 GTP-U</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.3">
                    <p id="section-toc.1-1.5.2.3.2.3.1"><a class="auto internal xref" href="#section-5.3.3">5.3.3</a>.  <a class="internal xref" href="#name-extensions-to-the-interwork">Extensions to the Interworking Mechanisms</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a class="auto internal xref" href="#section-5.4">5.4</a>.  <a class="internal xref" href="#name-srv6-drop-in-interworking">SRv6 Drop-In Interworking</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-srv6-segment-endpoint-mobil">SRv6 Segment Endpoint Mobility Behaviors</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="auto internal xref" href="#section-6.1">6.1</a>.  <a class="internal xref" href="#name-argsmobsession">Args.Mob.Session</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a class="auto internal xref" href="#section-6.2">6.2</a>.  <a class="internal xref" href="#name-endmap">End.MAP</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a class="auto internal xref" href="#section-6.3">6.3</a>.  <a class="internal xref" href="#name-endmgtp6d">End.M.GTP6.D</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a class="auto internal xref" href="#section-6.4">6.4</a>.  <a class="internal xref" href="#name-endmgtp6ddi">End.M.GTP6.D.Di</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a class="auto internal xref" href="#section-6.5">6.5</a>.  <a class="internal xref" href="#name-endmgtp6e">End.M.GTP6.E</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.6">
                <p id="section-toc.1-1.6.2.6.1"><a class="auto internal xref" href="#section-6.6">6.6</a>.  <a class="internal xref" href="#name-endmgtp4e">End.M.GTP4.E</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.7">
                <p id="section-toc.1-1.6.2.7.1"><a class="auto internal xref" href="#section-6.7">6.7</a>.  <a class="internal xref" href="#name-hmgtp4d">H.M.GTP4.D</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.8">
                <p id="section-toc.1-1.6.2.8.1"><a class="auto internal xref" href="#section-6.8">6.8</a>.  <a class="internal xref" href="#name-endlimit">End.Limit</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-srv6-supported-3gpp-pdu-ses">SRv6-Supported 3GPP PDU Session Types</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-network-slicing-considerati">Network Slicing Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#section-9">9</a>.  <a class="internal xref" href="#name-control-plane-consideration">Control Plane Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#section-10">10</a>. <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="auto internal xref" href="#section-11">11</a>. <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="auto internal xref" href="#section-12">12</a>. <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a class="auto internal xref" href="#section-12.1">12.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a class="auto internal xref" href="#section-12.2">12.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="auto internal xref" href="#appendix-A"></a><a class="internal xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-contributors">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a class="auto internal xref" href="#appendix-C"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">In mobile networks, mobility systems provide connectivity over a
      wireless link to stationary and non-stationary nodes.  The user plane
      establishes a tunnel between the mobile node and its anchor node over
      IP-based backhaul and core networks.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">This document specifies the applicability of SRv6 <span>[<a class="cite xref" href="#RFC8754">RFC8754</a>]</span> <span>[<a class="cite xref" href="#RFC8986">RFC8986</a>]</span> to mobile networks.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">Segment Routing (SR) <span>[<a class="cite xref" href="#RFC8402">RFC8402</a>]</span> is a
      source-routing architecture: a node steers a packet through an ordered
      list of instructions called "segments". A segment can represent any
      instruction, topological or service based.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">SRv6 applied to mobile networks enables a mobile architecture based
      on source routing, where operators can explicitly indicate a route for
      the packets to and from the mobile node.  The SRv6 Endpoint nodes serve
      as mobile user-plane anchors.<a class="pilcrow" href="#section-1-4">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-conventions-and-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-conventions-and-terminology">Conventions and Terminology</a>
      </h2>
<p id="section-2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
    "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>",
    "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are
    to be interpreted as described in BCP 14 <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span>
        <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> when, and only when, they appear in all capitals,
    as shown here.<a class="pilcrow" href="#section-2-1">¶</a></p>
<div id="terms">
<section id="section-2.1">
        <h3 id="name-terminology">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-2.1-1">
          <dt id="section-2.1-1.1">CNF:</dt>
          <dd id="section-2.1-1.2" style="margin-left: 1.5em">Cloud-native Network Function<a class="pilcrow" href="#section-2.1-1.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.3">NFV:</dt>
          <dd id="section-2.1-1.4" style="margin-left: 1.5em">Network Function Virtualization<a class="pilcrow" href="#section-2.1-1.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.5">PDU:</dt>
          <dd id="section-2.1-1.6" style="margin-left: 1.5em">Packet Data Unit<a class="pilcrow" href="#section-2.1-1.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.7">PDU Session:</dt>
          <dd id="section-2.1-1.8" style="margin-left: 1.5em">Context of a UE connected to a mobile
          network<a class="pilcrow" href="#section-2.1-1.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.9">UE:</dt>
          <dd id="section-2.1-1.10" style="margin-left: 1.5em">User Equipment<a class="pilcrow" href="#section-2.1-1.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.11">gNB:</dt>
          <dd id="section-2.1-1.12" style="margin-left: 1.5em">gNodeB <span>[<a class="cite xref" href="#TS.23501">TS.23501</a>]</span><a class="pilcrow" href="#section-2.1-1.12">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.13">UPF:</dt>
          <dd id="section-2.1-1.14" style="margin-left: 1.5em">User Plane Function<a class="pilcrow" href="#section-2.1-1.14">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.15">VNF:</dt>
          <dd id="section-2.1-1.16" style="margin-left: 1.5em">Virtual Network Function<a class="pilcrow" href="#section-2.1-1.16">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.17">DN:</dt>
          <dd id="section-2.1-1.18" style="margin-left: 1.5em">Data Network<a class="pilcrow" href="#section-2.1-1.18">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.19">Uplink:</dt>
          <dd id="section-2.1-1.20" style="margin-left: 1.5em">from the UE towards the DN<a class="pilcrow" href="#section-2.1-1.20">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.21">Downlink:</dt>
          <dd id="section-2.1-1.22" style="margin-left: 1.5em">from the DN towards the UE<a class="pilcrow" href="#section-2.1-1.22">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.1-2">The following terms used within this document are defined in <span>[<a class="cite xref" href="#RFC8402">RFC8402</a>]</span>: Segment Routing, SR domain,
        Segment ID (SID), SRv6, SRv6 SID, Active Segment, SR Policy, and Binding SID (BSID).<a class="pilcrow" href="#section-2.1-2">¶</a></p>
<p id="section-2.1-3">The following terms used within this document are defined in <span>[<a class="cite xref" href="#RFC8754">RFC8754</a>]</span>: Segment Routing Header (SRH) and Reduced
        SRH.<a class="pilcrow" href="#section-2.1-3">¶</a></p>
<p id="section-2.1-4">The following terms used within this document are defined in <span>[<a class="cite xref" href="#RFC8986">RFC8986</a>]</span>: NH (next header), SL (the Segments
        Left field of the SRH), FIB (Forwarding Information Base), SA (Source
        Address), DA (Destination Address), and SRv6
        Endpoint Behavior.<a class="pilcrow" href="#section-2.1-4">¶</a></p>
</section>
</div>
<div id="conventions">
<section id="section-2.2">
        <h3 id="name-conventions">
<a class="section-number selfRef" href="#section-2.2">2.2. </a><a class="section-name selfRef" href="#name-conventions">Conventions</a>
        </h3>
<p id="section-2.2-1">An SR Policy is resolved to a SID list. A SID list is represented as &lt;S1, S2, S3&gt; where S1 is the first SID to visit, S2 is the second SID to visit, and S3 is the last SID to visit along the SR path.<a class="pilcrow" href="#section-2.2-1">¶</a></p>
<p id="section-2.2-2">(SA,DA) (S3, S2, S1; SL) represents an IPv6 packet where:<a class="pilcrow" href="#section-2.2-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-3.1">Source Address is SA, Destination Address is DA, and
             next header is SRH<a class="pilcrow" href="#section-2.2-3.1">¶</a>
</li>
          <li class="normal" id="section-2.2-3.2">
            <p id="section-2.2-3.2.1">SRH with SID list &lt;S1, S2, S3&gt; with Segments Left =
      SL<a class="pilcrow" href="#section-2.2-3.2.1">¶</a></p>
<p id="section-2.2-3.2.2">Note the difference between the &lt;&gt; and ()
      symbols. &lt;S1, S2, S3&gt; represents a SID list where S1 is the
      first SID and S3 is the last SID to traverse.  (S3, S2, S1; SL)
      represents the same SID list but encoded in the SRH format where
      the rightmost SID in the SRH is the first SID and the leftmost
      SID in the SRH is the last SID.  When referring to an SR Policy
      in a high-level use case, it is simpler to use the &lt;S1, S2,
      S3&gt; notation. When referring to an illustration of the
      detailed packet behavior, the (S3, S2, S1; SL) notation is more
      convenient.<a class="pilcrow" href="#section-2.2-3.2.2">¶</a></p>
</li>
          <li class="normal" id="section-2.2-3.3">The payload of the packet is omitted.<a class="pilcrow" href="#section-2.2-3.3">¶</a>
</li>
        </ul>
<p id="section-2.2-4">(SA1,DA1) (SA2, DA2) represents an IPv6 packet where:<a class="pilcrow" href="#section-2.2-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-5.1">Source Address is SA1, Destination Address is DA1, and
                next header is IP.<a class="pilcrow" href="#section-2.2-5.1">¶</a>
</li>
          <li class="normal" id="section-2.2-5.2">Source Address is SA2, and Destination Address is DA2.<a class="pilcrow" href="#section-2.2-5.2">¶</a>
</li>
        </ul>
<p id="section-2.2-6">Throughout the document, the representation SRH[n] is used as a
        shorter representation of Segment List[n], as defined in <span>[<a class="cite xref" href="#RFC8754">RFC8754</a>]</span>.<a class="pilcrow" href="#section-2.2-6">¶</a></p>
<p id="section-2.2-7">This document uses the following conventions throughout the
        different examples:<a class="pilcrow" href="#section-2.2-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-8.1">gNB::1 is an IPv6 address (SID) assigned to the gNB.<a class="pilcrow" href="#section-2.2-8.1">¶</a>
</li>
          <li class="normal" id="section-2.2-8.2">U1::1 is an IPv6 address (SID) assigned to UPF1.<a class="pilcrow" href="#section-2.2-8.2">¶</a>
</li>
          <li class="normal" id="section-2.2-8.3">U2::1 is an IPv6 address (SID) assigned to UPF2.<a class="pilcrow" href="#section-2.2-8.3">¶</a>
</li>
          <li class="normal" id="section-2.2-8.4">U2:: is the Locator of UPF2.<a class="pilcrow" href="#section-2.2-8.4">¶</a>
</li>
        </ul>
</section>
</div>
<div id="srv6-funcs">
<section id="section-2.3">
        <h3 id="name-predefined-srv6-endpoint-be">
<a class="section-number selfRef" href="#section-2.3">2.3. </a><a class="section-name selfRef" href="#name-predefined-srv6-endpoint-be">Predefined SRv6 Endpoint Behaviors</a>
        </h3>
<p id="section-2.3-1">
     The following SRv6 Endpoint Behaviors are used throughout this document. They are defined in
     <span>[<a class="cite xref" href="#RFC8986">RFC8986</a>]</span>.<a class="pilcrow" href="#section-2.3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3-2.1">End.DT4: Decapsulation and Specific IPv4 Table Lookup<a class="pilcrow" href="#section-2.3-2.1">¶</a>
</li>
          <li class="normal" id="section-2.3-2.2">End.DT6: Decapsulation and Specific IPv6 Table Lookup<a class="pilcrow" href="#section-2.3-2.2">¶</a>
</li>
          <li class="normal" id="section-2.3-2.3">End.DT46: Decapsulation and Specific IP Table Lookup<a class="pilcrow" href="#section-2.3-2.3">¶</a>
</li>
          <li class="normal" id="section-2.3-2.4">End.DX4: Decapsulation and IPv4 Cross-Connect<a class="pilcrow" href="#section-2.3-2.4">¶</a>
</li>
          <li class="normal" id="section-2.3-2.5">End.DX6: Decapsulation and IPv6 Cross-Connect<a class="pilcrow" href="#section-2.3-2.5">¶</a>
</li>
          <li class="normal" id="section-2.3-2.6">End.DX2: Decapsulation and L2 Cross-Connect<a class="pilcrow" href="#section-2.3-2.6">¶</a>
</li>
          <li class="normal" id="section-2.3-2.7">End.T: Endpoint with specific IPv6 Table Lookup<a class="pilcrow" href="#section-2.3-2.7">¶</a>
</li>
        </ul>
<p id="section-2.3-3">
     This document defines new SRv6 Endpoint Behaviors in <a class="auto internal xref" href="#srv6_functions">Section 6</a>.<a class="pilcrow" href="#section-2.3-3">¶</a></p>
</section>
</div>
</section>
<div id="motivations">
<section id="section-3">
      <h2 id="name-motivation">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-motivation">Motivation</a>
      </h2>
<p id="section-3-1"> Mobile networks are becoming more challenging to operate.  On one
      hand, traffic is constantly growing, and latency requirements are
      tighter; on the other hand, there are new use cases like distributed NFV
      Infrastructure that are also challenging network operations. On top of
      this, the number of devices connected is steadily growing, causing
      scalability problems in mobile entities as the state to maintain keeps
      increasing.<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2"> The current architecture of mobile networks does not take into
      account the underlying transport. The user plane is rigidly fragmented
      into radio access, core, and service networks that connected by tunneling
      according to user-plane roles such as access and anchor nodes. These
      factors have made it difficult for the operator to optimize and operate
      the data path.<a class="pilcrow" href="#section-3-2">¶</a></p>
<p id="section-3-3"> In the meantime,
 applications have shifted to use IPv6, and network operators
 have started adopting IPv6 as their IP transport.
        SRv6, the IPv6 data plane instantiation of Segment Routing
 <span>[<a class="cite xref" href="#RFC8402">RFC8402</a>]</span>, integrates both
 the application data path and the underlying transport layer into
 a single protocol, allowing operators to optimize the network in a
 simplified manner and removing forwarding state from the network. It is also
  suitable for virtualized environments, like VNF/CNF-to-VNF/CNF networking. SRv6 has been deployed in dozens of networks <span>[<a class="cite xref" href="#I-D.matsushima-spring-srv6-deployment-status">SRV6-DEPLOY-STAT</a>]</span>.<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4"> SRv6 defines the network programming concept <span>[<a class="cite xref" href="#RFC8986">RFC8986</a>]</span>.
  Applied to mobility, SRv6 can provide the user-plane behaviors needed
  for mobility management.  SRv6 takes advantage of the underlying transport
  awareness and flexibility together with the ability to also include services to optimize the end-to-end mobile data plane.<a class="pilcrow" href="#section-3-4">¶</a></p>
<p id="section-3-5">The use cases for SRv6 mobility are discussed in <span>[<a class="cite xref" href="#I-D.camarilloelmalky-springdmm-srv6-mob-usecases">SRV6-MOB-USECASES</a>]</span>, and the architectural benefits are discussed in <span>[<a class="cite xref" href="#I-D.kohno-dmm-srv6mob-arch">SRV6-MOB-ARCH-DISCUSS</a>]</span>.<a class="pilcrow" href="#section-3-5">¶</a></p>
</section>
</div>
<div id="scenarios">
<section id="section-4">
      <h2 id="name-3gpp-reference-architecture">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-3gpp-reference-architecture">3GPP Reference Architecture</a>
      </h2>
<p id="section-4-1"> This section presents the 3GPP reference architecture and possible deployment
        scenarios.<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2"> <a class="auto internal xref" href="#fig_5g-ref-arch">Figure 1</a> shows a reference diagram from
        the 5G packet core architecture <span>[<a class="cite xref" href="#TS.23501">TS.23501</a>]</span>.<a class="pilcrow" href="#section-4-2">¶</a></p>
<p id="section-4-3"> The user plane described in this document does not depend on any
 specific architecture.  The 5G packet core architecture as shown is
 based on the 3GPP standards.<a class="pilcrow" href="#section-4-3">¶</a></p>
<span id="name-3gpp-5g-reference-architect"></span><div id="fig_5g-ref-arch">
<figure id="figure-1">
        <div class="alignCenter art-text artwork" id="section-4-4.1">
<pre>                                +-----+
                                | AMF |
                               /+-----+
                              /    | [N11]
                       [N2]  /  +-----+
                     +------/   | SMF |
                    /           +-----+
                   /              / \
                  /              /   \  [N4]
                 /              /     \                    ________
                /              /       \                  /        \
+--+      +-----+ [N3] +------+  [N9]  +------+  [N6]    /          \
|UE|------| gNB |------| UPF1 |--------| UPF2 |--------- \    DN    /
+--+      +-----+      +------+        +------+           \________/
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-3gpp-5g-reference-architect">3GPP 5G Reference Architecture</a>
        </figcaption></figure>
</div>
<span class="break"></span><dl class="dlParallel" id="section-4-5">
        <dt id="section-4-5.1">UE:</dt>
        <dd id="section-4-5.2" style="margin-left: 1.5em">User Equipment<a class="pilcrow" href="#section-4-5.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-4-5.3">gNB:</dt>
        <dd id="section-4-5.4" style="margin-left: 1.5em">gNodeB with N3 interface towards packet core (and N2 for control
 plane)<a class="pilcrow" href="#section-4-5.4">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-4-5.5">UPF1:</dt>
        <dd id="section-4-5.6" style="margin-left: 1.5em">UPF with Interfaces N3 and N9 (and N4 for control plane)<a class="pilcrow" href="#section-4-5.6">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-4-5.7">UPF2:</dt>
        <dd id="section-4-5.8" style="margin-left: 1.5em">UPF with Interfaces N9 and N6 (and N4 for control plane)<a class="pilcrow" href="#section-4-5.8">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-4-5.9">SMF:</dt>
        <dd id="section-4-5.10" style="margin-left: 1.5em">Session Management Function<a class="pilcrow" href="#section-4-5.10">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-4-5.11">AMF:</dt>
        <dd id="section-4-5.12" style="margin-left: 1.5em">Access and Mobility Management Function<a class="pilcrow" href="#section-4-5.12">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-4-5.13">DN:</dt>
        <dd id="section-4-5.14" style="margin-left: 1.5em">Data Network, e.g., operator services and Internet access<a class="pilcrow" href="#section-4-5.14">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-4-6"> This reference diagram does not depict a UPF that is only connected
 to N9 interfaces, although the mechanisms defined in this document
 also work in such a case.<a class="pilcrow" href="#section-4-6">¶</a></p>
<p id="section-4-7"> Each session from a UE gets assigned to a UPF. Sometimes multiple
      UPFs may be used, providing richer service functions.  A UE gets its
      IPv4 address, or IPv6 prefix, from the DHCP block of its UPF. The UPF
      advertises that IP address block toward the Internet, ensuring that
      return traffic is routed to the right UPF.<a class="pilcrow" href="#section-4-7">¶</a></p>
</section>
</div>
<div id="uplane-functions">
<section id="section-5">
      <h2 id="name-user-plane-modes">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-user-plane-modes">User-Plane Modes</a>
      </h2>
<p id="section-5-1">This section introduces an SRv6-based mobile user plane. It presents
      two different "modes" that vary with respect to the use of SRv6.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">The first mode is the "Traditional mode", which inherits the current
      3GPP mobile architecture. In this mode, the <span><a class="internal xref" href="#TS.29281">GTP-U protocol</a> [<a class="cite xref" href="#TS.29281">TS.29281</a>]</span> is replaced by SRv6. However, the
      N3, N9, and N6 interfaces are still point-to-point interfaces with no
      intermediate waypoints as in the current mobile network
      architecture.<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3"> The second mode is the "Enhanced mode".  This is an evolution from
      the "Traditional mode". In this mode, the N3, N9, or N6 interfaces have
      intermediate waypoints (SIDs) that are used for traffic engineering or
      VNF purposes transparent to 3GPP functionalities. This results in
      optimal end-to-end policies across the mobile network with transport and
      services awareness.<a class="pilcrow" href="#section-5-3">¶</a></p>
<p id="section-5-4">In both the Traditional and the Enhanced modes, this document assumes
      that the gNB as well as the UPFs are SR-aware (N3, N9, and potentially
      N6 interfaces are SRv6).<a class="pilcrow" href="#section-5-4">¶</a></p>
<p id="section-5-5">In addition to those two modes, this document introduces three
      mechanisms for interworking with legacy access networks (those where the
      N3 interface is unmodified). In this document, they are introduced as a
      variant to the Enhanced mode, but they are equally applicable to the
      Traditional mode.<a class="pilcrow" href="#section-5-5">¶</a></p>
<p id="section-5-6">One of these mechanisms is designed to interwork with legacy gNBs
      using GTP-U/IPv4. The second mechanism is designed to interwork with
      legacy gNBs using GTP-U/IPv6. The third mechanism is another mode that
      allows deploying SRv6 when legacy gNBs and UPFs still run GTP-U.<a class="pilcrow" href="#section-5-6">¶</a></p>
<p id="section-5-7"> This document uses the SRv6 Endpoint Behaviors defined in
      <span>[<a class="cite xref" href="#RFC8986">RFC8986</a>]</span> as well as the new SRv6
      Endpoint Behaviors designed for the mobile user plane that are
      defined in <a class="auto internal xref" href="#srv6_functions">Section 6</a> of this
      document.<a class="pilcrow" href="#section-5-7">¶</a></p>
<div id="traditional_mode">
<section id="section-5.1">
        <h3 id="name-traditional-mode">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-traditional-mode">Traditional Mode</a>
        </h3>
<p id="section-5.1-1"> In the Traditional mode, the existing mobile UPFs remain unchanged
        with the sole exception of the use of SRv6 as the data plane instead
        of GTP-U.  There is no impact to the rest of the mobile system.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<p id="section-5.1-2"> In existing 3GPP mobile networks, a PDU Session is mapped 1-for-1
        with a specific GTP-U tunnel (Tunnel Endpoint Identifier (TEID)). This
        1-for-1 mapping is mirrored here to replace GTP-U encapsulation with
        the SRv6 encapsulation, while not changing anything else. There will
        be a unique SRv6 SID associated with each PDU Session, and the SID
        list only contains a single SID.<a class="pilcrow" href="#section-5.1-2">¶</a></p>
<p id="section-5.1-3"> The Traditional mode minimizes the required changes to the mobile
        system; hence, it is a good starting point for forming common
        ground.<a class="pilcrow" href="#section-5.1-3">¶</a></p>
<p id="section-5.1-4"> The gNB/UPF control plane (N2/N4 interface) is unchanged;
        specifically, a single IPv6 address is provided to the gNB. The same
        control plane signaling is used, and the gNB/UPF decides to use SRv6
        based on signaled GTP-U parameters per local policy. The only
        information from the GTP-U parameters used for the SRv6 policy is the
        TEID, QFI (QoS Flow Identifier), and the IPv6 Destination Address.<a class="pilcrow" href="#section-5.1-4">¶</a></p>
<p id="section-5.1-5"> Our example topology is shown in <a class="auto internal xref" href="#fig_traditional">Figure 2</a>.  The gNB and the UPFs are SR-aware.  In the
        descriptions of the uplink and downlink packet flow, A is an IPv6
        address of the UE, and Z is an IPv6 address reachable within the DN.
        End.MAP, a new SRv6 Endpoint Behavior defined in <a class="auto internal xref" href="#end-map-function">Section 6.2</a>, is used.<a class="pilcrow" href="#section-5.1-5">¶</a></p>
<span id="name-traditional-mode-example-to"></span><div id="fig_traditional">
<figure id="figure-2">
          <div class="alignCenter art-text artwork" id="section-5.1-6.1">
<pre>                                                           ________
                  SRv6           SRv6                     /        \
+--+      +-----+ [N3] +------+  [N9]  +------+  [N6]    /          \
|UE|------| gNB |------| UPF1 |--------| UPF2 |--------- \    DN    /
+--+      +-----+      +------+        +------+           \________/
         SRv6 node     SRv6 node       SRv6 node
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-traditional-mode-example-to">Traditional Mode - Example Topology</a>
          </figcaption></figure>
</div>
<div id="traditional_up">
<section id="section-5.1.1">
          <h4 id="name-packet-flow-uplink">
<a class="section-number selfRef" href="#section-5.1.1">5.1.1. </a><a class="section-name selfRef" href="#name-packet-flow-uplink">Packet Flow - Uplink</a>
          </h4>
<p id="section-5.1.1-1"> The uplink packet flow is as follows:<a class="pilcrow" href="#section-5.1.1-1">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.1.1-2">
<pre>UE_out  : (A,Z)
gNB_out : (gNB, U1::1) (A,Z)     -&gt; H.Encaps.Red &lt;U1::1&gt;
UPF1_out: (gNB, U2::1) (A,Z)     -&gt; End.MAP
UPF2_out: (A,Z)                  -&gt; End.DT4 or End.DT6
</pre><a class="pilcrow" href="#section-5.1.1-2">¶</a>
</div>
<p id="section-5.1.1-3"> When the UE packet arrives at the gNB, the gNB performs an
          H.Encaps.Red operation. Since there is only one SID, there is no
          need to push an SRH (reduced SRH). gNB only adds an outer IPv6
          header with IPv6 DA U1::1. gNB obtains the SID U1::1 from the
          existing control plane (N2 interface). U1::1 represents an anchoring
          SID specific for that session at UPF1.<a class="pilcrow" href="#section-5.1.1-3">¶</a></p>
<p id="section-5.1.1-4"> When the packet arrives at UPF1, the SID U1::1 is associated
          with the End.MAP SRv6 Endpoint Behavior. End.MAP replaces U1::1 with
          U2::1, which belongs to the next UPF (U2).<a class="pilcrow" href="#section-5.1.1-4">¶</a></p>
<p id="section-5.1.1-5"> When the packet arrives at UPF2, the SID U2::1 corresponds to an
          End.DT4/End.DT6/End.DT46 SRv6 Endpoint Behavior. UPF2 decapsulates
          the packet, performs a lookup in a specific table associated with
          that mobile network, and forwards the packet toward the DN.<a class="pilcrow" href="#section-5.1.1-5">¶</a></p>
</section>
</div>
<div id="traditional_dn">
<section id="section-5.1.2">
          <h4 id="name-packet-flow-downlink">
<a class="section-number selfRef" href="#section-5.1.2">5.1.2. </a><a class="section-name selfRef" href="#name-packet-flow-downlink">Packet Flow - Downlink</a>
          </h4>
<p id="section-5.1.2-1">The downlink packet flow is as follows:<a class="pilcrow" href="#section-5.1.2-1">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.1.2-2">
<pre>UPF2_in : (Z,A)
UPF2_out: (U2::, U1::2) (Z,A)    -&gt; H.Encaps.Red &lt;U1::2&gt;
UPF1_out: (U2::, gNB::1) (Z,A)   -&gt; End.MAP
gNB_out : (Z,A)                  -&gt; End.DX4, End.DX6, End.DX2
</pre><a class="pilcrow" href="#section-5.1.2-2">¶</a>
</div>
<p id="section-5.1.2-3"> When the packet arrives at the UPF2, the UPF2 maps that flow
          into a PDU Session. This PDU Session is associated with the segment
          endpoint &lt;U1::2&gt;.  UPF2 performs an H.Encaps.Red operation,
          encapsulating the packet into a new IPv6 header with no SRH since
          there is only one SID.<a class="pilcrow" href="#section-5.1.2-3">¶</a></p>
<p id="section-5.1.2-4"> Upon packet arrival on UPF1, the SID U1::2 is a local SID
          associated with the End.MAP SRv6 Endpoint Behavior. It maps the SID
          to the next anchoring point and replaces U1::2 with gNB::1, which
          belongs to the next hop.<a class="pilcrow" href="#section-5.1.2-4">¶</a></p>
<p id="section-5.1.2-5"> Upon packet arrival on gNB, the SID gNB::1 corresponds to an
          End.DX4, End.DX6, or End.DX2 behavior (depending on the PDU Session
          Type). The gNB decapsulates the packet, removing the IPv6 header and
          all its extensions headers, and forwards the traffic toward the
          UE.<a class="pilcrow" href="#section-5.1.2-5">¶</a></p>
</section>
</div>
</section>
</div>
<div id="enhanced_mode">
<section id="section-5.2">
        <h3 id="name-enhanced-mode">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-enhanced-mode">Enhanced Mode</a>
        </h3>
<p id="section-5.2-1"> Enhanced mode improves scalability, provides traffic engineering
        capabilities, and allows service programming <span>[<a class="cite xref" href="#I-D.ietf-spring-sr-service-programming">SR-SERV-PROG</a>]</span>,
        thanks to the use of multiple SIDs in the SID list (instead of a
        direct connectivity in between UPFs with no intermediate waypoints as
        in Traditional mode).<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<p id="section-5.2-2">Thus, the main difference is that the SR Policy <span class="bcp14">MAY</span>
        include SIDs for traffic engineering and service programming in
        addition to the anchoring SIDs at UPFs.<a class="pilcrow" href="#section-5.2-2">¶</a></p>
<p id="section-5.2-3">Additionally, in this mode, the operator may choose to aggregate
        several devices under the same SID list (e.g., stationary residential
        meters (water and energy) connected to the same cell) to improve
        scalability.<a class="pilcrow" href="#section-5.2-3">¶</a></p>
<p id="section-5.2-4">The gNB/UPF control plane (N2/N4 interface) is unchanged;
        specifically, a single IPv6 address is provided to the gNB. A local
        policy instructs the gNB to use SRv6.<a class="pilcrow" href="#section-5.2-4">¶</a></p>
<p id="section-5.2-5"> The gNB resolves the IP address received via the control plane
        into a SID list. The resolution mechanism is out of the scope of this
        document.<a class="pilcrow" href="#section-5.2-5">¶</a></p>
<p id="section-5.2-6"> Note that the SIDs <span class="bcp14">MAY</span> use the argument <span><a class="internal xref" href="#arguments-for-mobility">Args.Mob.Session</a> (<a class="auto internal xref" href="#arguments-for-mobility">Section 6.1</a>)</span> if required by the UPFs.<a class="pilcrow" href="#section-5.2-6">¶</a></p>
<p id="section-5.2-7"> <a class="auto internal xref" href="#fig_enhanced">Figure 3</a> shows an Enhanced
        mode topology.  The gNB and the UPF are SR-aware.  The figure
 shows two service segments,
        S1 and C1.  S1 represents a VNF in the network, and C1
        represents an intermediate router used for traffic engineering
        purposes to enforce a low-latency path in the network.  Note that
        neither S1 nor C1 are required to have an N4 interface.<a class="pilcrow" href="#section-5.2-7">¶</a></p>
<span id="name-enhanced-mode-example-topol"></span><div id="fig_enhanced">
<figure id="figure-3">
          <div class="alignCenter art-text artwork" id="section-5.2-8.1">
<pre>                                 +----+  SRv6               _______
                 SRv6          --| C1 |--[N3]              /       \
+--+    +-----+  [N3]         /  +----+  \  +------+ [N6] /         \
|UE|----| gNB |--       SRv6 /    SRv6    --| UPF1 |------\   DN    /
+--+    +-----+  \      [N3]/      TE       +------+       \_______/
       SRv6 node  \ +----+ /               SRv6 node
                   -| S1 |-
                    +----+
                   SRv6 node
                     VNF
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-enhanced-mode-example-topol">Enhanced Mode - Example Topology</a>
          </figcaption></figure>
</div>
<div id="enhanced_uplink">
<section id="section-5.2.1">
          <h4 id="name-packet-flow-uplink-2">
<a class="section-number selfRef" href="#section-5.2.1">5.2.1. </a><a class="section-name selfRef" href="#name-packet-flow-uplink-2">Packet Flow - Uplink</a>
          </h4>
<p id="section-5.2.1-1">The uplink packet flow is as follows:<a class="pilcrow" href="#section-5.2.1-1">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.2.1-2">
<pre>UE_out  : (A,Z)
gNB_out : (gNB, S1)(U1::1, C1; SL=2)(A,Z)-&gt;H.Encaps.Red&lt;S1,C1,U1::1&gt;
S1_out  : (gNB, C1)(U1::1, C1; SL=1)(A,Z)
C1_out  : (gNB, U1::1)(A,Z)              -&gt;End with PSP
UPF1_out: (A,Z)                          -&gt;End.DT4,End.DT6,End.DT2U
</pre><a class="pilcrow" href="#section-5.2.1-2">¶</a>
</div>
<p id="section-5.2.1-3"> UE sends its packet (A,Z) on a specific bearer to its
          gNB.  gNB's control plane associates that session from the UE(A)
          with the IPv6 address B.  gNB resolves B into a SID list  &lt;S1,
          C1, U1::1&gt;.<a class="pilcrow" href="#section-5.2.1-3">¶</a></p>
<p id="section-5.2.1-4"> When gNB transmits the packet, it contains all the segments of
          the SR Policy. The SR Policy includes segments for traffic
          engineering (C1) and for service programming (S1).<a class="pilcrow" href="#section-5.2.1-4">¶</a></p>
<p id="section-5.2.1-5"> Nodes S1 and C1 perform their related Endpoint functionality and
          forward the packet. The "End with PSP" functionality refers to the
          Endpoint Behavior with Penultimate Segment Popping as defined in
          <span>[<a class="cite xref" href="#RFC8986">RFC8986</a>]</span>.<a class="pilcrow" href="#section-5.2.1-5">¶</a></p>
<p id="section-5.2.1-6"> When the packet arrives at UPF1, the active segment (U1::1) is an End.DT4/End.DT6/End.DT2U, which performs the
          decapsulation (removing the IPv6 header with all its extension
          headers) and forwards toward the DN.<a class="pilcrow" href="#section-5.2.1-6">¶</a></p>
</section>
</div>
<section id="section-5.2.2">
          <h4 id="name-packet-flow-downlink-2">
<a class="section-number selfRef" href="#section-5.2.2">5.2.2. </a><a class="section-name selfRef" href="#name-packet-flow-downlink-2">Packet Flow - Downlink</a>
          </h4>
<p id="section-5.2.2-1">The downlink packet flow is as follows:<a class="pilcrow" href="#section-5.2.2-1">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.2.2-2">
<pre>UPF1_in : (Z,A)                             -&gt;UPF1 maps the flow w/
                                              SID list &lt;C1,S1, gNB&gt;
UPF1_out: (U1::1, C1)(gNB::1, S1; SL=2)(Z,A)-&gt;H.Encaps.Red
C1_out  : (U1::1, S1)(gNB::1, S1; SL=1)(Z,A)
S1_out  : (U1::1, gNB::1)(Z,A)              -&gt;End with PSP
gNB_out : (Z,A)                             -&gt;End.DX4/End.DX6/End.DX2
</pre><a class="pilcrow" href="#section-5.2.2-2">¶</a>
</div>
<p id="section-5.2.2-3">When the packet arrives at the UPF1, the UPF1 maps that
          particular flow into a UE PDU Session. This UE PDU Session is
          associated with the policy &lt;C1, S1, gNB&gt;. The UPF1 performs a
          H.Encaps.Red operation, encapsulating the packet into a new IPv6
          header with its corresponding SRH.<a class="pilcrow" href="#section-5.2.2-3">¶</a></p>
<p id="section-5.2.2-4">The nodes C1 and S1 perform their related Endpoint processing.<a class="pilcrow" href="#section-5.2.2-4">¶</a></p>
<p id="section-5.2.2-5">Once the packet arrives at the gNB, the IPv6 DA corresponds to an
          End.DX4, End.DX6, or End.DX2 behavior at the gNB (depending on the
          underlying traffic).  The gNB decapsulates the packet, removing the
          IPv6 header, and forwards the traffic towards the UE. The SID gNB::1
          is one example of a SID associated to this service.<a class="pilcrow" href="#section-5.2.2-5">¶</a></p>
<p id="section-5.2.2-6">Note that there are several means to provide the UE session
          aggregation. The decision about which one to use is a local decision
          made by the operator. One option is to use <span><a class="internal xref" href="#arguments-for-mobility">Args.Mob.Session</a> (<a class="auto internal xref" href="#arguments-for-mobility">Section 6.1</a>)</span>. Another option comprises the gNB performing an IP lookup on
          the inner packet by using the End.DT4, End.DT6, and End.DT2U
          behaviors.<a class="pilcrow" href="#section-5.2.2-6">¶</a></p>
</section>
<section id="section-5.2.3">
          <h4 id="name-scalability">
<a class="section-number selfRef" href="#section-5.2.3">5.2.3. </a><a class="section-name selfRef" href="#name-scalability">Scalability</a>
          </h4>
<p id="section-5.2.3-1">The Enhanced mode improves scalability since it allows the
          aggregation of several UEs under the same SID list. For example, in
          the case of stationary residential meters that are connected to the
          same cell, all such devices can share the same SID list.  This
          improves scalability compared to Traditional mode (unique SID per
          UE) and compared to GTP-U (TEID per UE).<a class="pilcrow" href="#section-5.2.3-1">¶</a></p>
</section>
</section>
</div>
<div id="enhanced_gtp">
<section id="section-5.3">
        <h3 id="name-enhanced-mode-with-unchange">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-enhanced-mode-with-unchange">Enhanced Mode with Unchanged gNB GTP-U Behavior</a>
        </h3>
<p id="section-5.3-1"> This section describes two mechanisms for interworking with legacy
        gNBs that still use GTP-U: one for IPv4 and another for IPv6.<a class="pilcrow" href="#section-5.3-1">¶</a></p>
<p id="section-5.3-2"> In the interworking scenarios illustrated in <a class="auto internal xref" href="#fig_interworking">Figure 4</a>, the gNB does not support
        SRv6.  The gNB supports GTP-U encapsulation over IPv4 or IPv6.  To
        achieve interworking, an SR Gateway (SRGW) entity is added. The SRGW
        is a new entity that maps the GTP-U traffic into SRv6. It is deployed
        at the boundary of the SR domain and performs the mapping
        functionality for inbound and outbound traffic.<a class="pilcrow" href="#section-5.3-2">¶</a></p>
<p id="section-5.3-3"> The SRGW is not an anchor point and maintains very little state.
     For this reason,
     both IPv4 and IPv6 methods scale to millions of UEs.<a class="pilcrow" href="#section-5.3-3">¶</a></p>
<span id="name-example-topology-for-interw"></span><div id="fig_interworking">
<figure id="figure-4">
          <div class="alignCenter art-text artwork" id="section-5.3-4.1">
<pre>                                                          _______
                 IP GTP-U        SRv6                    /       \
+--+      +-----+ [N3] +------+  [N9]  +------+  [N6]   /         \
|UE|------| gNB |------| SRGW |--------| UPF  |---------\   DN    /
+--+      +-----+      +------+        +------+          \_______/
                      SR Gateway       SRv6 node
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-4">Figure 4</a>:
<a class="selfRef" href="#name-example-topology-for-interw">Example Topology for Interworking</a>
          </figcaption></figure>
</div>
<p id="section-5.3-5">Both of the mechanisms described in this section are applicable to the Traditional mode and the Enhanced mode.<a class="pilcrow" href="#section-5.3-5">¶</a></p>
<section id="section-5.3.1">
          <h4 id="name-interworking-with-ipv6-gtp-">
<a class="section-number selfRef" href="#section-5.3.1">5.3.1. </a><a class="section-name selfRef" href="#name-interworking-with-ipv6-gtp-">Interworking with IPv6 GTP-U</a>
          </h4>
<p id="section-5.3.1-1">In this interworking mode, the gNB at the N3 interface uses GTP-U
       over IPv6.<a class="pilcrow" href="#section-5.3.1-1">¶</a></p>
<p id="section-5.3.1-2">Key points:<a class="pilcrow" href="#section-5.3.1-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3.1-3.1"> The gNB is unchanged (control plane or user plane) and
            encapsulates into GTP-U (N3 interface is not modified).<a class="pilcrow" href="#section-5.3.1-3.1">¶</a>
</li>
            <li class="normal" id="section-5.3.1-3.2">
            The 5G control plane towards the gNB (N2 interface) is unmodified,
            though multiple UPF addresses need to be used. One IPv6 address
            (i.e., a BSID at the SRGW) is needed per &lt;SLA, PDU Session
            Type&gt;. The SRv6 SID is different depending on the required
            &lt;SLA, PDU Session Type&gt; combination.<a class="pilcrow" href="#section-5.3.1-3.2">¶</a>
</li>
            <li class="normal" id="section-5.3.1-3.3"> In the uplink, the SRGW removes the GTP-U header, finds the
            SID list related to the IPv6 DA, and adds SRH with the SID
            list.<a class="pilcrow" href="#section-5.3.1-3.3">¶</a>
</li>
            <li class="normal" id="section-5.3.1-3.4"> There is no state for the downlink at the SRGW.<a class="pilcrow" href="#section-5.3.1-3.4">¶</a>
</li>
            <li class="normal" id="section-5.3.1-3.5"> There is simple state in the uplink at the SRGW; using
            Enhanced mode results in fewer SR Policies on this node.  An SR
            Policy is shared across UEs as long as they belong to the same
            context (i.e., tenant). A set of many different policies (i.e.,
            different SLAs) increases the amount of state required.<a class="pilcrow" href="#section-5.3.1-3.5">¶</a>
</li>
            <li class="normal" id="section-5.3.1-3.6"> When a packet from the UE leaves the gNB, it is SR-routed.

 This simplifies network slicing
 <span>[<a class="cite xref" href="#RFC9350">RFC9350</a>]</span>.<a class="pilcrow" href="#section-5.3.1-3.6">¶</a>
</li>
            <li class="normal" id="section-5.3.1-3.7"> In the uplink, the SRv6 BSID steers traffic
 into an SR Policy when it arrives at the SRGW.<a class="pilcrow" href="#section-5.3.1-3.7">¶</a>
</li>
          </ul>
<p id="section-5.3.1-4"> An example topology is shown in
       <a class="auto internal xref" href="#fig_interworking_ipv6">Figure 5</a>.<a class="pilcrow" href="#section-5.3.1-4">¶</a></p>
<p id="section-5.3.1-5"> S1 and C1 are two service segments.
       S1 represents a VNF in the network, and C1 represents a router
       configured for traffic engineering.<a class="pilcrow" href="#section-5.3.1-5">¶</a></p>
<span id="name-enhanced-mode-with-unchanged"></span><div id="fig_interworking_ipv6">
<figure id="figure-5">
            <div class="alignCenter art-text artwork" id="section-5.3.1-6.1">
<pre>                               +----+
             IPv6/GTP-U       -| S1 |-                            ___
+--+  +-----+ [N3]           / +----+ \                          /
|UE|--| gNB |-         SRv6 /   SRv6   \ +----+   +------+ [N6] /
+--+  +-----+ \        [N9]/     VNF    -| C1 |---| UPF2 |------\  DN
        GTP-U  \ +------+ /              +----+   +------+       \___
                -| SRGW |-                SRv6      SRv6
                 +------+                  TE
                SR Gateway
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-5">Figure 5</a>:
<a class="selfRef" href="#name-enhanced-mode-with-unchanged">Enhanced Mode with Unchanged gNB IPv6/GTP-U Behavior</a>
            </figcaption></figure>
</div>
<section id="section-5.3.1.1">
            <h5 id="name-packet-flow-uplink-3">
<a class="section-number selfRef" href="#section-5.3.1.1">5.3.1.1. </a><a class="section-name selfRef" href="#name-packet-flow-uplink-3">Packet Flow - Uplink</a>
            </h5>
<p id="section-5.3.1.1-1">The uplink packet flow is as follows:<a class="pilcrow" href="#section-5.3.1.1-1">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.3.1.1-2">
<pre>UE_out  : (A,Z)
gNB_out : (gNB, B)(GTP: TEID T)(A,Z)       -&gt; Interface N3 unmodified
                                              (IPv6/GTP)
SRGW_out: (SRGW, S1)(U2::T, C1; SL=2)(A,Z) -&gt; B is an End.M.GTP6.D
                                              SID at the SRGW
S1_out  : (SRGW, C1)(U2::T, C1; SL=1)(A,Z)
C1_out  : (SRGW, U2::T)(A,Z)               -&gt; End with PSP
UPF2_out: (A,Z)                            -&gt; End.DT4 or End.DT6
</pre><a class="pilcrow" href="#section-5.3.1.1-2">¶</a>
</div>
<p id="section-5.3.1.1-3"> The UE sends a packet destined to Z toward the gNB on a
            specific bearer for that session. The gNB, which is unmodified,
            encapsulates the packet into IPv6, UDP, and GTP-U headers.  The
            IPv6 DA B and the GTP-U TEID T are the ones received in the N2
            interface.<a class="pilcrow" href="#section-5.3.1.1-3">¶</a></p>
<p id="section-5.3.1.1-4"> The IPv6 address that was signaled over the N2 interface for
            that UE PDU Session, B, is now the IPv6 DA. B is an SRv6
            Binding SID at the SRGW.  Hence, the packet is routed to the
            SRGW.<a class="pilcrow" href="#section-5.3.1.1-4">¶</a></p>
<p id="section-5.3.1.1-5"> When the packet arrives at the SRGW, the SRGW identifies B as
            an End.M.GTP6.D Binding SID (see <a class="auto internal xref" href="#End-M-GTP6-D">Section 6.3</a>).  Hence, the SRGW removes the IPv6, UDP, and
            GTP-U headers and pushes an IPv6 header with its own SRH
            containing the SIDs bound to the SR Policy associated with this
            Binding SID.  There is at least one instance of the End.M.GTP6.D SID
            per PDU type.<a class="pilcrow" href="#section-5.3.1.1-5">¶</a></p>
<p id="section-5.3.1.1-6"> S1 and C1 perform their related Endpoint functionality and
            forward the packet.<a class="pilcrow" href="#section-5.3.1.1-6">¶</a></p>
<p id="section-5.3.1.1-7"> When the packet arrives at UPF2, the active segment is (U2::T),
            which is bound to End.DT4/6.  UPF2 then decapsulates (removing the
            outer IPv6 header with all its extension headers) and forwards the
            packet toward the DN.<a class="pilcrow" href="#section-5.3.1.1-7">¶</a></p>
</section>
<section id="section-5.3.1.2">
            <h5 id="name-packet-flow-downlink-3">
<a class="section-number selfRef" href="#section-5.3.1.2">5.3.1.2. </a><a class="section-name selfRef" href="#name-packet-flow-downlink-3">Packet Flow - Downlink</a>
            </h5>
<p id="section-5.3.1.2-1">The downlink packet flow is as follows:<a class="pilcrow" href="#section-5.3.1.2-1">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.3.1.2-2">
<pre>UPF2_in : (Z,A)                           -&gt; UPF2 maps the flow with
                                             &lt;C1, S1, SRGW::TEID,gNB&gt;
UPF2_out: (U2::1, C1)(gNB, SRGW::TEID, S1; SL=3)(Z,A) -&gt; H.Encaps.Red
C1_out  : (U2::1, S1)(gNB, SRGW::TEID, S1; SL=2)(Z,A)
S1_out  : (U2::1, SRGW::TEID)(gNB, SRGW::TEID, S1, SL=1)(Z,A)
SRGW_out: (SRGW, gNB)(GTP: TEID=T)(Z,A)   -&gt; SRGW/96 is End.M.GTP6.E
gNB_out : (Z,A)
</pre><a class="pilcrow" href="#section-5.3.1.2-2">¶</a>
</div>
<p id="section-5.3.1.2-3"> When a packet destined to A arrives at the UPF2, the UPF2
 performs a lookup in the table associated to A and finds the
 SID list &lt;C1, S1, SRGW::TEID, gNB&gt;. The UPF2 performs
 an H.Encaps.Red operation, encapsulating the packet into
 a new IPv6 header with its corresponding SRH.<a class="pilcrow" href="#section-5.3.1.2-3">¶</a></p>
<p id="section-5.3.1.2-4"> C1 and S1 perform their related Endpoint processing.<a class="pilcrow" href="#section-5.3.1.2-4">¶</a></p>
<p id="section-5.3.1.2-5"> Once the packet arrives at the SRGW, the SRGW identifies the
 active SID as an End.M.GTP6.E function. The SRGW removes
 the IPv6 header and all its extensions headers. The SRGW
 generates new IPv6, UDP, and GTP-U headers. The new IPv6 DA
 is the gNB, which is the last SID in the received SRH.
 The TEID in the generated GTP-U header is also an argument of the
 received End.M.GTP6.E SID. The SRGW pushes the headers to
 the packet and forwards the packet toward the gNB.  There
 is one instance of the End.M.GTP6.E SID per PDU type.<a class="pilcrow" href="#section-5.3.1.2-5">¶</a></p>
<p id="section-5.3.1.2-6"> Once the packet arrives at the gNB, the packet is a regular
 IPv6/GTP-U packet. The gNB looks for the specific radio bearer
 for that TEID and forwards it on the bearer. This gNB behavior
 is not modified from current and previous generations.<a class="pilcrow" href="#section-5.3.1.2-6">¶</a></p>
</section>
<section id="section-5.3.1.3">
            <h5 id="name-scalability-2">
<a class="section-number selfRef" href="#section-5.3.1.3">5.3.1.3. </a><a class="section-name selfRef" href="#name-scalability-2">Scalability</a>
            </h5>
<p id="section-5.3.1.3-1"> For downlink traffic, the SRGW is stateless. All the state
            is in the SRH pushed by the UPF2.  The UPF2 must have the UE
            state since it is the UE's session anchor point.<a class="pilcrow" href="#section-5.3.1.3-1">¶</a></p>
<p id="section-5.3.1.3-2"> For uplink traffic, the state at the SRGW does not
            necessarily need to be unique per PDU Session; the SR Policy can
            be shared among UEs.  This enables more scalable SRGW deployments
            compared to a solution holding millions of states, one or more per
            UE.<a class="pilcrow" href="#section-5.3.1.3-2">¶</a></p>
</section>
</section>
<section id="section-5.3.2">
          <h4 id="name-interworking-with-ipv4-gtp-">
<a class="section-number selfRef" href="#section-5.3.2">5.3.2. </a><a class="section-name selfRef" href="#name-interworking-with-ipv4-gtp-">Interworking with IPv4 GTP-U</a>
          </h4>
<p id="section-5.3.2-1"> In this interworking mode, the gNB uses GTP over IPv4 in the N3
          interface.<a class="pilcrow" href="#section-5.3.2-1">¶</a></p>
<p id="section-5.3.2-2"> Key points:<a class="pilcrow" href="#section-5.3.2-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3.2-3.1"> The gNB is unchanged and encapsulates packets into GTP-U (the
            N3 interface is not modified).<a class="pilcrow" href="#section-5.3.2-3.1">¶</a>
</li>
            <li class="normal" id="section-5.3.2-3.2">N2 signaling is not changed, though multiple UPF addresses
            need to be provided -- one for each PDU Session Type.<a class="pilcrow" href="#section-5.3.2-3.2">¶</a>
</li>
            <li class="normal" id="section-5.3.2-3.3"> In the uplink, traffic is classified by SRGW's classification
            engine and steered into an SR Policy.  The SRGW may be implemented
            in a UPF or as a separate entity. How the classification engine
            rules are set up is outside the scope of this document, though one
            example is using BGP signaling from a Mobile User Plane (MUP) Controller
            <span>[<a class="cite xref" href="#I-D.mhkk-dmm-srv6mup-architecture">MUP-SR-ARCH</a>]</span>.<a class="pilcrow" href="#section-5.3.2-3.3">¶</a>
</li>
            <li class="normal" id="section-5.3.2-3.4"> SRGW removes the GTP-U header, finds the SID list related to DA,
            and adds an SRH with the SID list.<a class="pilcrow" href="#section-5.3.2-3.4">¶</a>
</li>
          </ul>
<p id="section-5.3.2-4"> An example topology is shown in <a class="auto internal xref" href="#fig_interworking_ipv4">Figure 6</a>. In this mode, the
          gNB is an unmodified gNB using IPv4/GTP.  The UPFs are SR-aware.  As
          before, the SRGW maps the IPv4/GTP-U traffic to SRv6.<a class="pilcrow" href="#section-5.3.2-4">¶</a></p>
<p id="section-5.3.2-5"> S1 and C1 are two service segment endpoints.  S1 represents a
          VNF in the network, and C1 represents a router configured for
          traffic engineering.<a class="pilcrow" href="#section-5.3.2-5">¶</a></p>
<span id="name-enhanced-mode-with-unchanged-"></span><div id="fig_interworking_ipv4">
<figure id="figure-6">
            <div class="alignCenter art-text artwork" id="section-5.3.2-6.1">
<pre>                               +----+
             IPv4/GTP-U       -| S1 |-                            ___
+--+  +-----+ [N3]           / +----+ \                          /
|UE|--| gNB |-         SRv6 /   SRv6   \ +----+   +------+ [N6] /
+--+  +-----+ \        [N9]/     VNF    -| C1 |---| UPF2 |------\  DN
        GTP-U  \ +------+ /              +----+   +------+       \___
                -| UPF1 |-                SRv6      SRv6
                 +------+                  TE
                SR Gateway
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-6">Figure 6</a>:
<a class="selfRef" href="#name-enhanced-mode-with-unchanged-">Enhanced Mode with Unchanged gNB IPv4/GTP-U Behavior</a>
            </figcaption></figure>
</div>
<section id="section-5.3.2.1">
            <h5 id="name-packet-flow-uplink-4">
<a class="section-number selfRef" href="#section-5.3.2.1">5.3.2.1. </a><a class="section-name selfRef" href="#name-packet-flow-uplink-4">Packet Flow - Uplink</a>
            </h5>
<p id="section-5.3.2.1-1">The uplink packet flow is as follows:<a class="pilcrow" href="#section-5.3.2.1-1">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.3.2.1-2">
<pre>gNB_out : (gNB, B)(GTP: TEID T)(A,Z)          -&gt; Interface N3
                                                 unchanged IPv4/GTP
SRGW_out: (SRGW, S1)(U2::1, C1; SL=2)(A,Z)    -&gt; H.M.GTP4.D function
S1_out  : (SRGW, C1)(U2::1, C1; SL=1)(A,Z)
C1_out  : (SRGW, U2::1) (A,Z)                 -&gt; PSP
UPF2_out: (A,Z)                               -&gt; End.DT4 or End.DT6
</pre><a class="pilcrow" href="#section-5.3.2.1-2">¶</a>
</div>
<p id="section-5.3.2.1-3"> The UE sends a packet destined to Z toward the gNB on a
            specific bearer for that session. The gNB, which is unmodified,
            encapsulates the packet into a new IPv4, UDP, and GTP-U headers.
            The IPv4 DA, B, and the GTP-UTEID are the ones received at the N2
            interface.<a class="pilcrow" href="#section-5.3.2.1-3">¶</a></p>
<p id="section-5.3.2.1-4"> When the packet arrives at the SRGW for UPF1, the SRGW has a
            classification engine rule for incoming traffic from the gNB that
            steers the traffic into an SR Policy by using the function
            H.M.GTP4.D. The SRGW removes the IPv4, UDP, and GTP headers and
            pushes an IPv6 header with its own SRH containing the SIDs related
            to the SR Policy associated with this traffic.  The SRGW forwards
            according to the new IPv6 DA.<a class="pilcrow" href="#section-5.3.2.1-4">¶</a></p>
<p id="section-5.3.2.1-5"> S1 and C1 perform their related Endpoint functionality and
            forward the packet.<a class="pilcrow" href="#section-5.3.2.1-5">¶</a></p>
<p id="section-5.3.2.1-6"> When the packet arrives at UPF2, the active segment is (U2::1),
            which is bound to End.DT4/6, which performs the decapsulation
            (removing the outer IPv6 header with all its extension headers)
            and forwards toward the DN.<a class="pilcrow" href="#section-5.3.2.1-6">¶</a></p>
<p id="section-5.3.2.1-7">Note that the interworking mechanisms for IPv4/GTP-U and IPv6/GTP-U
    differ. This is due to the fact that IPv6/GTP-U can leverage the remote
    steering capabilities provided by the Segment Routing BSID. In IPv4, this
    construct is not available, and building a similar mechanism would require
    a significant address consumption.<a class="pilcrow" href="#section-5.3.2.1-7">¶</a></p>
</section>
<section id="section-5.3.2.2">
            <h5 id="name-packet-flow-downlink-4">
<a class="section-number selfRef" href="#section-5.3.2.2">5.3.2.2. </a><a class="section-name selfRef" href="#name-packet-flow-downlink-4">Packet Flow - Downlink</a>
            </h5>
<p id="section-5.3.2.2-1">The downlink packet flow is as follows:<a class="pilcrow" href="#section-5.3.2.2-1">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.3.2.2-2">
<pre>UPF2_in : (Z,A)                            -&gt; UPF2 maps flow with SID
                                            &lt;C1, S1,GW::SA:DA:TEID&gt;
UPF2_out: (U2::1, C1)(GW::SA:DA:TEID, S1; SL=2)(Z,A) -&gt;H.Encaps.Red
C1_out  : (U2::1, S1)(GW::SA:DA:TEID, S1; SL=1)(Z,A)
S1_out  : (U2::1, GW::SA:DA:TEID)(Z,A)
SRGW_out: (GW, gNB)(GTP: TEID=T)(Z,A)       -&gt; End.M.GTP4.E
gNB_out : (Z,A)
</pre><a class="pilcrow" href="#section-5.3.2.2-2">¶</a>
</div>
<p id="section-5.3.2.2-3">When a packet destined to A arrives at the UPF2, the UPF2
            performs a lookup in the table associated to A and finds the SID
            list &lt;C1, S1, SRGW::SA:DA:TEID&gt;. The UPF2 performs an
            H.Encaps.Red operation, encapsulating the packet into a new IPv6
            header with its corresponding SRH.<a class="pilcrow" href="#section-5.3.2.2-3">¶</a></p>
<p id="section-5.3.2.2-4">The nodes C1 and S1 perform their related Endpoint
            processing.<a class="pilcrow" href="#section-5.3.2.2-4">¶</a></p>
<p id="section-5.3.2.2-5">Once the packet arrives at the SRGW, the SRGW identifies the
            active SID as an End.M.GTP4.E function. The SRGW removes the IPv6
            header and all its extensions headers. The SRGW generates IPv4,
            UDP, and GTP-U headers. The IPv4 SA and DA are received as SID
            arguments.  The TEID in the generated GTP-U header is the
            argument of the received End.M.GTP4.E SID.  The SRGW pushes the
            headers to the packet and forwards the packet toward the gNB.<a class="pilcrow" href="#section-5.3.2.2-5">¶</a></p>
<p id="section-5.3.2.2-6"> When the packet arrives at the gNB, the packet is a regular
            IPv4/GTP-U packet. The gNB looks for the specific radio bearer for
            that TEID and forwards it on the bearer. This gNB behavior is not
            modified from current and previous generations.<a class="pilcrow" href="#section-5.3.2.2-6">¶</a></p>
</section>
<section id="section-5.3.2.3">
            <h5 id="name-scalability-3">
<a class="section-number selfRef" href="#section-5.3.2.3">5.3.2.3. </a><a class="section-name selfRef" href="#name-scalability-3">Scalability</a>
            </h5>
<p id="section-5.3.2.3-1">For downlink traffic, the SRGW is stateless. All the state
            is in the SRH pushed by the UPF2. The UPF must have this UE-base
            state anyway (since it is its anchor point).<a class="pilcrow" href="#section-5.3.2.3-1">¶</a></p>
<p id="section-5.3.2.3-2">For uplink traffic, the state at the SRGW is dedicated on a
            per-UE/session basis according to a classification engine.  There
            is state for steering the different sessions in the form of an SR
            Policy. However, SR Policies are shared among several
            UE/sessions.<a class="pilcrow" href="#section-5.3.2.3-2">¶</a></p>
</section>
</section>
<section id="section-5.3.3">
          <h4 id="name-extensions-to-the-interwork">
<a class="section-number selfRef" href="#section-5.3.3">5.3.3. </a><a class="section-name selfRef" href="#name-extensions-to-the-interwork">Extensions to the Interworking Mechanisms</a>
          </h4>
<p id="section-5.3.3-1">This section presents two mechanisms for interworking with gNBs
          and UPFs that do not support SRv6. These mechanisms are used to
          support GTP-U over IPv4 and IPv6.<a class="pilcrow" href="#section-5.3.3-1">¶</a></p>
<p id="section-5.3.3-2"> Even though these methods are presented as an extension to the
          Enhanced mode, they are also applicable to the Traditional mode.<a class="pilcrow" href="#section-5.3.3-2">¶</a></p>
</section>
</section>
</div>
<div id="drop_in">
<section id="section-5.4">
        <h3 id="name-srv6-drop-in-interworking">
<a class="section-number selfRef" href="#section-5.4">5.4. </a><a class="section-name selfRef" href="#name-srv6-drop-in-interworking">SRv6 Drop-In Interworking</a>
        </h3>
<p id="section-5.4-1">This section introduces another mode useful for legacy gNB and UPFs
        that still operate with GTP-U.  This mode provides an SRv6-enabled
        user plane in between two GTP-U tunnel endpoints.<a class="pilcrow" href="#section-5.4-1">¶</a></p>
<p id="section-5.4-2">This mode employs two SRGWs that map GTP-U traffic to SRv6 and
        vice versa.<a class="pilcrow" href="#section-5.4-2">¶</a></p>
<p id="section-5.4-3">Unlike other interworking modes, in this mode, both of the mobility
        overlay endpoints use GTP-U.  Two SRGWs are deployed in either an N3 or
        N9 interface to realize an intermediate SR Policy.<a class="pilcrow" href="#section-5.4-3">¶</a></p>
<span id="name-example-topology-for-srv6-d"></span><div id="fig_drop_in">
<figure id="figure-7">
          <div class="alignCenter art-text artwork" id="section-5.4-4.1">
<pre>                            +----+
                           -| S1 |-
+-----+                   / +----+ \
| gNB |-            SRv6 /   SRv6   \ +----+   +--------+    +-----+
+-----+  \              /     VNF    -| C1 |---| SRGW-B |----| UPF |
   GTP[N3]\ +--------+ /              +----+   +--------+    +-----+
           -| SRGW-A |-                SRv6   SR Gateway-B     GTP
            +--------+                  TE
           SR Gateway-A
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-7">Figure 7</a>:
<a class="selfRef" href="#name-example-topology-for-srv6-d">Example Topology for SRv6 Drop-In Mode</a>
          </figcaption></figure>
</div>
<p id="section-5.4-5">The packet flow of <a class="auto internal xref" href="#fig_drop_in">Figure 7</a> is
        as follows:<a class="pilcrow" href="#section-5.4-5">¶</a></p>
<div class="alignCenter art-text artwork" id="section-5.4-6">
<pre>gNB_out : (gNB, U::1)(GTP: TEID T)(A,Z)
GW-A_out: (GW-A, S1)(U::1, SGB::TEID, C1; SL=3)(A,Z)-&gt;U::1 is an
                                                      End.M.GTP6.D.Di
                                                      SID at SRGW-A
S1_out  : (GW-A, C1)(U::1, SGB::TEID, C1; SL=2)(A,Z)
C1_out  : (GW-A, SGB::TEID)(U::1, SGB::TEID, C1; SL=1)(A,Z)
GW-B_out: (GW-B, U::1)(GTP: TEID T)(A,Z)            -&gt;SGB::TEID is an
                                                      End.M.GTP6.E
                                                      SID at SRGW-B
UPF_out : (A,Z)
</pre><a class="pilcrow" href="#section-5.4-6">¶</a>
</div>
<p id="section-5.4-7">When a packet destined to Z is sent to the gNB, which is unmodified
        (control plane and user plane remain GTP-U), gNB performs
        encapsulation into new IP, UDP, and GTP-U headers.  The IPv6 DA, U::1,
        and GTP-U TEID are the ones received at the N2 interface.<a class="pilcrow" href="#section-5.4-7">¶</a></p>
<p id="section-5.4-8">The IPv6 address that was signaled over the N2 interface for that
        PDU Session, U::1, is now the IPv6 DA.  U::1 is an SRv6 Binding
        SID at SRGW-A.  Hence, the packet is routed to the SRGW.<a class="pilcrow" href="#section-5.4-8">¶</a></p>
<p id="section-5.4-9">When the packet arrives at SRGW-A, the SRGW identifies U::1 as an
        End.M.GTP6.D.Di Binding SID (see <a class="auto internal xref" href="#End-M-GTP6-D-Di">Section 6.4</a>).  Hence, the SRGW removes the IPv6, UDP, and GTP-U
        headers and pushes an IPv6 header with its own SRH containing the
        SIDs bound to the SR Policy associated with this Binding SID. There is
        one instance of the End.M.GTP6.D.Di SID per PDU type.<a class="pilcrow" href="#section-5.4-9">¶</a></p>
<p id="section-5.4-10">S1 and C1 perform their related Endpoint functionality and forward
          the packet.<a class="pilcrow" href="#section-5.4-10">¶</a></p>
<p id="section-5.4-11">Once the packet arrives at SRGW-B, the SRGW identifies the active
        SID as an End.M.GTP6.E function. The SRGW removes the IPv6 header and
        all its extensions headers. The SRGW generates new IPv6, UDP, and GTP
        headers. The new IPv6 DA is U::1, which is the last SID in the
        received SRH. The TEID in the generated GTP-U header is an argument of
        the received End.M.GTP6.E SID. The SRGW pushes the headers to the
        packet and forwards the packet toward UPF.  There is one instance of
        the End.M.GTP6.E SID per PDU type.<a class="pilcrow" href="#section-5.4-11">¶</a></p>
<p id="section-5.4-12">Once the packet arrives at UPF, the packet is a regular IPv6/GTP
        packet. The UPF looks for the specific rule for that TEID to forward
        the packet. This UPF behavior is not modified from current and
        previous generations.<a class="pilcrow" href="#section-5.4-12">¶</a></p>
</section>
</div>
</section>
</div>
<div id="srv6_functions">
<section id="section-6">
      <h2 id="name-srv6-segment-endpoint-mobil">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-srv6-segment-endpoint-mobil">SRv6 Segment Endpoint Mobility Behaviors</a>
      </h2>
<p id="section-6-1">This section introduces new SRv6 Endpoint Behaviors for the
      mobile user plane. The behaviors described in this document are
      compatible with the NEXT and REPLACE flavors defined in <span>[<a class="cite xref" href="#I-D.ietf-spring-srv6-srh-compression">SRV6-SRH-COMPRESSION</a>]</span>.<a class="pilcrow" href="#section-6-1">¶</a></p>
<div id="arguments-for-mobility">
<section id="section-6.1">
        <h3 id="name-argsmobsession">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-argsmobsession">Args.Mob.Session</a>
        </h3>
<p id="section-6.1-1">Args.Mob.Session provides per-session information for charging,
        buffering, or other purposes required by some mobile nodes.  The
        Args.Mob.Session argument format is used in combination with the End.Map,
        End.DT4/End.DT6/End.DT46, and End.DX4/End.DX6/End.DX2 behaviors. Note
        that proposed format is applicable for 5G networks, while similar
        formats could be used for legacy networks.<a class="pilcrow" href="#section-6.1-1">¶</a></p>
<span id="name-argsmobsession-format"></span><figure id="figure-8">
          <div class="alignCenter art-text artwork" id="section-6.1-2.1">
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   QFI     |R|U|                PDU Session ID                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|PDU Sess(cont')|
+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-8">Figure 8</a>:
<a class="selfRef" href="#name-argsmobsession-format">Args.Mob.Session Format</a>
          </figcaption></figure>
<span class="break"></span><dl class="dlParallel" id="section-6.1-3">
          <dt id="section-6.1-3.1">QFI:</dt>
          <dd id="section-6.1-3.2" style="margin-left: 1.5em">QoS Flow Identifier <span>[<a class="cite xref" href="#TS.38415">TS.38415</a>]</span>.<a class="pilcrow" href="#section-6.1-3.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-3.3">R:</dt>
          <dd id="section-6.1-3.4" style="margin-left: 1.5em">Reflective QoS Indication <span>[<a class="cite xref" href="#TS.23501">TS.23501</a>]</span>. This parameter indicates the activation of
   reflective QoS towards the UE for the transferred packet. Reflective
   QoS enables the UE to map uplink user-plane traffic to QoS flows without
   SMF-provided QoS rules.<a class="pilcrow" href="#section-6.1-3.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-3.5">U:</dt>
          <dd id="section-6.1-3.6" style="margin-left: 1.5em">Unused and for future use. <span class="bcp14">MUST</span> be 0 on
   transmission and ignored on receipt.<a class="pilcrow" href="#section-6.1-3.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-6.1-3.7">PDU Session ID:</dt>
          <dd id="section-6.1-3.8" style="margin-left: 1.5em">Identifier of PDU Session. The GTP-U equivalent is TEID.<a class="pilcrow" href="#section-6.1-3.8">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-6.1-4">Args.Mob.Session is required in case one SID aggregates
        multiple PDU Sessions. Since the SRv6 SID is likely NOT to be
        instantiated per PDU Session, Args.Mob.Session helps the UPF to
        perform the behaviors that require granularity per QFI and/or per PDU Session.<a class="pilcrow" href="#section-6.1-4">¶</a></p>
<p id="section-6.1-5">Note that the encoding of user-plane messages (e.g., Echo Request,
        Echo Reply, Error Indication, and End Marker) is out of the scope of
        this document. <span>[<a class="cite xref" href="#I-D.murakami-dmm-user-plane-message-encoding">SRV6-UP-MSG-ENCODING</a>]</span> defines one
        possible encoding method.<a class="pilcrow" href="#section-6.1-5">¶</a></p>
</section>
</div>
<div id="end-map-function">
<section id="section-6.2">
        <h3 id="name-endmap">
<a class="section-number selfRef" href="#section-6.2">6.2. </a><a class="section-name selfRef" href="#name-endmap">End.MAP</a>
        </h3>
<p id="section-6.2-1">End.MAP (Endpoint Behavior with SID mapping)
    is used in several scenarios. Particularly in mobility,
      End.MAP is used by the intermediate UPFs.<a class="pilcrow" href="#section-6.2-1">¶</a></p>
<p id="section-6.2-2">When node N receives a packet whose IPv6 DA is D and D is a local End.MAP SID, N does the following:<a class="pilcrow" href="#section-6.2-2">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.2-3">
<pre>S01. If (IPv6 Hop Limit &lt;= 1) {
S02.    Send an ICMP Time Exceeded message to the Source Address with
           Code 0 (Hop limit exceeded in transit),
           interrupt packet processing, and discard the packet.
S03. }
S04. Decrement IPv6 Hop Limit by 1
S05. Update the IPv6 DA with the new mapped SID
S06. Submit the packet to the egress IPv6 FIB lookup for
        transmission to the new destination
</pre><a class="pilcrow" href="#section-6.2-3">¶</a>
</div>
<p id="section-6.2-4">Note: The SRH is not modified (neither the SID nor the SL
        value).<a class="pilcrow" href="#section-6.2-4">¶</a></p>
</section>
</div>
<div id="End-M-GTP6-D">
<section id="section-6.3">
        <h3 id="name-endmgtp6d">
<a class="section-number selfRef" href="#section-6.3">6.3. </a><a class="section-name selfRef" href="#name-endmgtp6d">End.M.GTP6.D</a>
        </h3>
<p id="section-6.3-1">End.M.GTP6.D (Endpoint Behavior with IPv6/GTP-U decapsulation into SR
        Policy) is used in the interworking
        scenario for the uplink towards SRGW from the legacy gNB using
        IPv6/GTP.  Any SID instance of this behavior is associated with an SR
        Policy B and an IPv6 Source Address S.<a class="pilcrow" href="#section-6.3-1">¶</a></p>
<p id="section-6.3-2">When the SR Gateway node N receives a packet destined to D, and D
        is a local End.M.GTP6.D SID, N does the following:<a class="pilcrow" href="#section-6.3-2">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.3-3">
<pre>S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address with
             Code 0 (Erroneous header field encountered) and
             Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
</pre><a class="pilcrow" href="#section-6.3-3">¶</a>
</div>
<p id="section-6.3-4">When processing the Upper-Layer header of a packet matching a FIB entry locally instantiated as an End.M.GTP6.D SID, N does the following:<a class="pilcrow" href="#section-6.3-4">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.3-5">
<pre>S01. If (Next Header (NH) == UDP &amp; UDP_Dest_port == GTP) {
S02.    Copy the GTP-U TEID and QFI to buffer memory
S03.    Pop the IPv6, UDP, and GTP-U headers
S04.    Push a new IPv6 header with its own SRH containing B
S05.    Set the outer IPv6 SA to S
S06.    Set the outer IPv6 DA to the first SID of B
S07.    Set the outer Payload Length, Traffic Class, Flow Label,
           Hop Limit, and Next Header (NH) fields
S08.    Write in the SRH[0] the Args.Mob.Session based on
           the information in buffer memory
S09.    Submit the packet to the egress IPv6 FIB lookup for
           transmission to the new destination
S10. } Else {
S11.    Process as per [RFC8986], Section 4.1.1
S12. }
</pre><a class="pilcrow" href="#section-6.3-5">¶</a>
</div>
<p id="section-6.3-6">Notes:<a class="pilcrow" href="#section-6.3-6">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3-7.1">In line S07, the NH is set based on the SID parameter. There is one
          instantiation of the End.M.GTP6.D SID per PDU Session Type;
          hence, the NH is already known in advance. In addition, for the IPv4v6 PDU
          Session Type, the router inspects the first nibble of the
          PDU to know the NH value.<a class="pilcrow" href="#section-6.3-7.1">¶</a>
</li>
          <li class="normal" id="section-6.3-7.2">The last segment <span class="bcp14">SHOULD</span> be
        followed by an Args.Mob.Session argument space, which is used to
        provide the session identifiers, as shown in line S08.<a class="pilcrow" href="#section-6.3-7.2">¶</a>
</li>
        </ul>
</section>
</div>
<div id="End-M-GTP6-D-Di">
<section id="section-6.4">
        <h3 id="name-endmgtp6ddi">
<a class="section-number selfRef" href="#section-6.4">6.4. </a><a class="section-name selfRef" href="#name-endmgtp6ddi">End.M.GTP6.D.Di</a>
        </h3>
<p id="section-6.4-1">End.M.GTP6.D.Di (Endpoint Behavior with IPv6/GTP-U decapsulation into SR Policy
        for Drop-in Mode) is used in the SRv6
        drop-in interworking scenario described in <a class="auto internal xref" href="#drop_in">Section 5.4</a>. The difference between End.M.GTP6.D as another
        variant of the IPv6/GTP decapsulation function is that the original IPv6
        DA of the GTP-U packet is preserved as the last SID in SRH.<a class="pilcrow" href="#section-6.4-1">¶</a></p>
<p id="section-6.4-2">Any SID instance of this behavior is associated with an SR Policy B
        and an IPv6 Source Address S.<a class="pilcrow" href="#section-6.4-2">¶</a></p>
<p id="section-6.4-3">When the SR Gateway node N receives a packet destined to D, and
        D is a local End.M.GTP6.D.Di SID, N does the following:<a class="pilcrow" href="#section-6.4-3">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.4-4">
<pre>S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address with
             Code 0 (Erroneous header field encountered) and
             Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
</pre><a class="pilcrow" href="#section-6.4-4">¶</a>
</div>
<p id="section-6.4-5">When processing the Upper-Layer header of a packet matching a FIB
        entry locally instantiated as an End.M.GTP6.Di SID, N does the
        following:<a class="pilcrow" href="#section-6.4-5">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.4-6">
<pre>S01. If (Next Header = UDP &amp; UDP_Dest_port = GTP) {
S02.    Copy D to buffer memory
S03.    Pop the IPv6, UDP, and GTP-U headers
S04.    Push a new IPv6 header with its own SRH containing B
S05.    Set the outer IPv6 SA to S
S06.    Set the outer IPv6 DA to the first SID of B
S07.    Set the outer Payload Length, Traffic Class, Flow Label,
           Hop Limit, and Next Header fields
S08.    Prepend D to the SRH (as SRH[0]) and set SL accordingly
S09.    Submit the packet to the egress IPv6 FIB lookup for
           transmission to the new destination
S10. } Else {
S11.    Process as per [RFC8986], Section 4.1.1
S12. }
</pre><a class="pilcrow" href="#section-6.4-6">¶</a>
</div>
<p id="section-6.4-7">Notes:<a class="pilcrow" href="#section-6.4-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.4-8.1">In line S07, the NH is set based on the SID parameter. There is one
        instantiation of the End.M.GTP6.Di SID per PDU Session Type; hence,
        the NH is already known in advance. In addition, for the IPv4v6 PDU Session Type,
        the router inspects the first nibble of the PDU to know
        the NH value.<a class="pilcrow" href="#section-6.4-8.1">¶</a>
</li>
          <li class="normal" id="section-6.4-8.2">S <span class="bcp14">SHOULD</span> be an End.M.GTP6.E SID instantiated
 at the SR Gateway.<a class="pilcrow" href="#section-6.4-8.2">¶</a>
</li>
        </ul>
</section>
</div>
<section id="section-6.5">
        <h3 id="name-endmgtp6e">
<a class="section-number selfRef" href="#section-6.5">6.5. </a><a class="section-name selfRef" href="#name-endmgtp6e">End.M.GTP6.E</a>
        </h3>
<p id="section-6.5-1">End.M.GTP6.E (Endpoint Behavior with encapsulation for IPv6/GTP-U tunnel"
        behavior) is used among others in the
        interworking scenario for the downlink toward the legacy gNB using
        IPv6/GTP.<a class="pilcrow" href="#section-6.5-1">¶</a></p>
<p id="section-6.5-2">The prefix of End.M.GTP6.E SID <span class="bcp14">MUST</span> be followed by
        the Args.Mob.Session argument space, which is used to provide the
        session identifiers.<a class="pilcrow" href="#section-6.5-2">¶</a></p>
<p id="section-6.5-3">When the SR Gateway node N receives a packet destined to D, and
        D is a local End.M.GTP6.E SID, N does the following:<a class="pilcrow" href="#section-6.5-3">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.5-4">
<pre>S01. When an SRH is processed {
S02.   If (Segments Left != 1) {
S03.      Send an ICMP Parameter Problem to the Source Address with
             Code 0 (Erroneous header field encountered) and
             Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
</pre><a class="pilcrow" href="#section-6.5-4">¶</a>
</div>
<p id="section-6.5-5">When processing the Upper-Layer header of a packet matching a FIB entry locally instantiated as an End.M.GTP6.E SID, N does the following:<a class="pilcrow" href="#section-6.5-5">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.5-6">
<pre>S01.    Copy SRH[0] and D to buffer memory
S02.    Pop the IPv6 header and all its extension headers
S03.    Push a new IPv6 header with a UDP/GTP-U header
S04.    Set the outer IPv6 SA to S
S05.    Set the outer IPv6 DA from buffer memory
S06.    Set the outer Payload Length, Traffic Class, Flow Label,
           Hop Limit, and Next Header fields
S07.    Set the GTP-U TEID (from buffer memory)
S08.    Submit the packet to the egress IPv6 FIB lookup for
           transmission to the new destination
</pre><a class="pilcrow" href="#section-6.5-6">¶</a>
</div>
<p id="section-6.5-7">Notes:<a class="pilcrow" href="#section-6.5-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.5-8.1">An End.M.GTP6.E SID <span class="bcp14">MUST</span> always be the penultimate SID.
        The TEID is extracted from the argument space of the current
        SID.<a class="pilcrow" href="#section-6.5-8.1">¶</a>
</li>
          <li class="normal" id="section-6.5-8.2"> The source address S <span class="bcp14">SHOULD</span> be an End.M.GTP6.D SID instantiated at the egress SR Gateway.<a class="pilcrow" href="#section-6.5-8.2">¶</a>
</li>
        </ul>
</section>
<section id="section-6.6">
        <h3 id="name-endmgtp4e">
<a class="section-number selfRef" href="#section-6.6">6.6. </a><a class="section-name selfRef" href="#name-endmgtp4e">End.M.GTP4.E</a>
        </h3>
<p id="section-6.6-1">End.M.GTP4.E (Endpoint Behavior with encapsulation for IPv4/GTP-U
        tunnel) is used in the downlink when doing interworking with legacy
        gNB using IPv4/GTP.<a class="pilcrow" href="#section-6.6-1">¶</a></p>
<p id="section-6.6-2">When the SR Gateway node N receives a packet destined to S, and S
     is a local End.M.GTP4.E SID, N does the following:<a class="pilcrow" href="#section-6.6-2">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.6-3">
<pre>S01. When an SRH is processed {
S02.   If (Segments Left != 0) {
S03.      Send an ICMP Parameter Problem to the Source Address with
             Code 0 (Erroneous header field encountered) and
             Pointer set to the Segments Left field,
             interrupt packet processing, and discard the packet.
S04.   }
S05.   Proceed to process the next header in the packet
S06. }
</pre><a class="pilcrow" href="#section-6.6-3">¶</a>
</div>
<p id="section-6.6-4">When processing the Upper-Layer header of a packet matching a FIB entry locally instantiated as an End.M.GTP4.E SID, N does the following:<a class="pilcrow" href="#section-6.6-4">¶</a></p>
<div class="lang-pseudocode sourcecode" id="section-6.6-5">
<pre>S01.    Store the IPv6 DA and SA in buffer memory
S02.    Pop the IPv6 header and all its extension headers
S03.    Push a new IPv4 header with a UDP/GTP-U header
S04.    Set the outer IPv4 SA and DA (from buffer memory)
S05.    Set the outer Total Length, DSCP, Time To Live, and
           Next Header fields
S06.    Set the GTP-U TEID (from buffer memory)
S07.    Submit the packet to the egress IPv4 FIB lookup for
           transmission to the new destination
</pre><a class="pilcrow" href="#section-6.6-5">¶</a>
</div>
<p id="section-6.6-6">Notes:<a class="pilcrow" href="#section-6.6-6">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.6-7.1">
            <p id="section-6.6-7.1.1">The End.M.GTP4.E SID in S has the following format:<a class="pilcrow" href="#section-6.6-7.1.1">¶</a></p>
<span id="name-endmgtp4e-sid-encoding"></span><figure id="figure-9">
              <div class="alignCenter art-text artwork" id="section-6.6-7.1.2.1">
<pre>0                                                         127
+-----------------------+-------+----------------+---------+
|  SRGW-IPv6-LOC-FUNC   |IPv4DA |Args.Mob.Session|0 Padded |
+-----------------------+-------+----------------+---------+
       128-a-b-c            a            b           c
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-9">Figure 9</a>:
<a class="selfRef" href="#name-endmgtp4e-sid-encoding">End.M.GTP4.E SID Encoding</a>
              </figcaption></figure>
</li>
          <li class="normal" id="section-6.6-7.2">
            <p id="section-6.6-7.2.1">The IPv6 Source Address has the following format:<a class="pilcrow" href="#section-6.6-7.2.1">¶</a></p>
<span id="name-ipv6-sa-encoding-for-endmgt"></span><figure id="figure-10">
              <div class="alignCenter art-text artwork" id="section-6.6-7.2.2.1">
<pre>0                                                         127
+----------------------+--------+--------------------------+
|  Source UPF Prefix   |IPv4 SA | any bit pattern(ignored) |
+----------------------+--------+--------------------------+
         128-a-b            a                  b
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-10">Figure 10</a>:
<a class="selfRef" href="#name-ipv6-sa-encoding-for-endmgt">IPv6 SA Encoding for End.M.GTP4.E</a>
              </figcaption></figure>
</li>
        </ul>
</section>
<section id="section-6.7">
        <h3 id="name-hmgtp4d">
<a class="section-number selfRef" href="#section-6.7">6.7. </a><a class="section-name selfRef" href="#name-hmgtp4d">H.M.GTP4.D</a>
        </h3>
<p id="section-6.7-1">H.M.GTP4.D (SR Policy Headend with tunnel decapsulation and map to an SRv6
        policy) is used in the direction
        from the legacy IPv4 user plane to the SRv6 user-plane network.<a class="pilcrow" href="#section-6.7-1">¶</a></p>
<p id="section-6.7-2">When the SR Gateway node N receives a packet destined to a
        SRGW-IPv4-Prefix, N does the following:<a class="pilcrow" href="#section-6.7-2">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.7-3">
<pre>S01. IF Payload == UDP/GTP-U THEN
S02.    Pop the outer IPv4 header and UDP/GTP-U headers
S03.    Copy IPv4 DA and TEID to form SID B
S04.    Copy IPv4 SA to form IPv6 SA B'
S05.    Encapsulate the packet into a new IPv6 header
S06.    Set the IPv6 DA = B
S07.    Forward along the shortest path to B
S08. ELSE
S09.    Drop the packet
</pre><a class="pilcrow" href="#section-6.7-3">¶</a>
</div>
<p id="section-6.7-4">The SID B has the following format:<a class="pilcrow" href="#section-6.7-4">¶</a></p>
<span id="name-hmgtp4d-sid-encoding"></span><figure id="figure-11">
          <div class="alignCenter art-text artwork" id="section-6.7-5.1">
<pre>0                                                         127
+-----------------------+-------+----------------+---------+
|Destination UPF Prefix |IPv4DA |Args.Mob.Session|0 Padded |
+-----------------------+-------+----------------+---------+
       128-a-b-c            a            b           c
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-11">Figure 11</a>:
<a class="selfRef" href="#name-hmgtp4d-sid-encoding">H.M.GTP4.D SID Encoding</a>
          </figcaption></figure>
<p id="section-6.7-6"> The SID B <span class="bcp14">MAY</span> be an SRv6 Binding SID instantiated at the first
        UPF (U1) to bind an SR Policy <span>[<a class="cite xref" href="#RFC9256">RFC9256</a>]</span>.<a class="pilcrow" href="#section-6.7-6">¶</a></p>
</section>
<section id="section-6.8">
        <h3 id="name-endlimit">
<a class="section-number selfRef" href="#section-6.8">6.8. </a><a class="section-name selfRef" href="#name-endlimit">End.Limit</a>
        </h3>
<p id="section-6.8-1"> The mobile user plane requires a rate-limit feature. For this
        purpose, this document defines a new behavior, called "End.Limit".
        The "End.Limit" behavior encodes in its arguments the rate-limiting
        parameter that should be applied to this packet.  Multiple flows of
        packets should have the same group identifier in the SID when those
        flows are in the same AMBR (Aggregate Maximum Bit Rate) group.  The
        encoding format of the rate-limit segment SID is as follows:<a class="pilcrow" href="#section-6.8-1">¶</a></p>
<span id="name-endlimit-rate-limiting-beha"></span><figure id="figure-12">
          <div class="alignCenter art-text artwork" id="section-6.8-2.1">
<pre>+----------------------+----------+-----------+
| LOC+FUNC rate-limit  | group-id | limit-rate|
+----------------------+----------+-----------+
      128-i-j                i          j
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-12">Figure 12</a>:
<a class="selfRef" href="#name-endlimit-rate-limiting-beha">End.Limit: Rate-Limiting Behavior Argument Format</a>
          </figcaption></figure>
<p id="section-6.8-3"> If the limit-rate bits are set to zero, the node should
            not do rate limiting unless static configuration or
            control plane sets the limit rate associated to the SID.<a class="pilcrow" href="#section-6.8-3">¶</a></p>
</section>
</section>
</div>
<div id="pdu_sessions">
<section id="section-7">
      <h2 id="name-srv6-supported-3gpp-pdu-ses">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-srv6-supported-3gpp-pdu-ses">SRv6-Supported 3GPP PDU Session Types</a>
      </h2>
<p id="section-7-1">The 3GPP <span>[<a class="cite xref" href="#TS.23501">TS.23501</a>]</span> defines the
      following PDU Session Types:<a class="pilcrow" href="#section-7-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.1">IPv4<a class="pilcrow" href="#section-7-2.1">¶</a>
</li>
        <li class="normal" id="section-7-2.2">IPv6<a class="pilcrow" href="#section-7-2.2">¶</a>
</li>
        <li class="normal" id="section-7-2.3">IPv4v6<a class="pilcrow" href="#section-7-2.3">¶</a>
</li>
        <li class="normal" id="section-7-2.4">Ethernet<a class="pilcrow" href="#section-7-2.4">¶</a>
</li>
        <li class="normal" id="section-7-2.5">Unstructured<a class="pilcrow" href="#section-7-2.5">¶</a>
</li>
      </ul>
<p id="section-7-3"> SRv6 supports the 3GPP PDU Session Types without any protocol
     overhead by using the corresponding SRv6 behaviors:<a class="pilcrow" href="#section-7-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-4.1">End.DX4 and End.DT4 for IPv4 PDU Sessions<a class="pilcrow" href="#section-7-4.1">¶</a>
</li>
        <li class="normal" id="section-7-4.2">End.DX6, End.DT6, and End.T for IPv6 PDU Sessions<a class="pilcrow" href="#section-7-4.2">¶</a>
</li>
        <li class="normal" id="section-7-4.3">End.DT46 for IPv4v6 PDU Sessions<a class="pilcrow" href="#section-7-4.3">¶</a>
</li>
        <li class="normal" id="section-7-4.4">End.DX2 for L2 and Unstructured PDU Sessions<a class="pilcrow" href="#section-7-4.4">¶</a>
</li>
      </ul>
</section>
</div>
<div id="netslice">
<section id="section-8">
      <h2 id="name-network-slicing-considerati">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-network-slicing-considerati">Network Slicing Considerations</a>
      </h2>
<p id="section-8-1">A mobile network may be required to implement "network slices",
     which logically separate network resources within the same SR domain.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2"><span>[<a class="cite xref" href="#RFC9256">RFC9256</a>]</span>
     describes a solution to build basic network slices with SR.
     Depending on the requirements, these slices can be further
     refined by adopting the mechanisms from:<a class="pilcrow" href="#section-8-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-3.1">IGP Flex-Algo
 <span>[<a class="cite xref" href="#RFC9350">RFC9350</a>]</span><a class="pilcrow" href="#section-8-3.1">¶</a>
</li>
        <li class="normal" id="section-8-3.2">Inter-Domain policies
        <span>[<a class="cite xref" href="#RFC9087">RFC9087</a>]</span><a class="pilcrow" href="#section-8-3.2">¶</a>
</li>
      </ul>
<p id="section-8-4">Furthermore, these can be combined with ODN/AS (On-Demand Next Hop / Automated Steering)
     <span>[<a class="cite xref" href="#RFC9256">RFC9256</a>]</span> for
     automated slice provisioning and traffic steering.<a class="pilcrow" href="#section-8-4">¶</a></p>
<p id="section-8-5">Further details on how these tools can be used to create
          end-to-end network slices are documented in
          <span>[<a class="cite xref" href="#I-D.ali-teas-spring-ns-building-blocks">NETWORK-SLICE</a>]</span>.<a class="pilcrow" href="#section-8-5">¶</a></p>
</section>
</div>
<div id="c-plane">
<section id="section-9">
      <h2 id="name-control-plane-consideration">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-control-plane-consideration">Control Plane Considerations</a>
      </h2>
<p id="section-9-1">This document focuses on user-plane behavior and its independence
      from the control plane.  While the SRv6 mobile user-plane behaviors may
      be utilized in emerging architectures (for example, those described in
      <span>[<a class="cite xref" href="#I-D.gundavelli-dmm-mfa">MFA</a>]</span> and <span>[<a class="cite xref" href="#I-D.mhkk-dmm-srv6mup-architecture">MUP-SR-ARCH</a>]</span>), this
      document does not impose any change to the existent mobility control
      plane.<a class="pilcrow" href="#section-9-1">¶</a></p>
<p id="section-9-2"> <a class="auto internal xref" href="#IANA">Section 11</a> allocates SRv6
      Endpoint Behavior codepoints for the new behaviors defined in this
      document.<a class="pilcrow" href="#section-9-2">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-10-1"> The security considerations for Segment Routing are discussed in
      <span>[<a class="cite xref" href="#RFC8402">RFC8402</a>]</span>.  More specifically, for SRv6,
      the security considerations and the mechanisms for securing an SR domain
      are discussed in <span>[<a class="cite xref" href="#RFC8754">RFC8754</a>]</span>.  Together,
      they describe the required security mechanisms that allow establishment
      of an SR domain of trust to operate SRv6-based services for internal
      traffic while preventing any external traffic from accessing or
      exploiting the SRv6-based services.<a class="pilcrow" href="#section-10-1">¶</a></p>
<p id="section-10-2">The technology described in this document is applied to a mobile
      network that is within the SR domain. It's important to note the
      resemblance between the SR domain and the 3GPP Packet Core Domain.<a class="pilcrow" href="#section-10-2">¶</a></p>
<p id="section-10-3">This document introduces new SRv6 Endpoint Behaviors. Those behaviors
      operate on control plane information, including information within the
      received SRH payload on which the behaviors operate. Altering the
      behaviors requires that an attacker alter the SR domain as defined in
      <span>[<a class="cite xref" href="#RFC8754">RFC8754</a>]</span>.  Those behaviors do not need
      any special security consideration given that they are deployed within that
      SR domain.<a class="pilcrow" href="#section-10-3">¶</a></p>
</section>
<div id="IANA">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-11">11. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-11-1">The following values have been allocated in the "SRv6 Endpoint
      Behaviors" <span>[<a class="cite xref" href="#RFC8986">RFC8986</a>]</span> subregistry
      within the top-level "Segment Routing Parameters" registry:<a class="pilcrow" href="#section-11-1">¶</a></p>
<span id="name-srv6-mobile-user-plane-endp"></span><div id="endpoint_opcodes">
<table class="center" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-srv6-mobile-user-plane-endp">SRv6 Mobile User-Plane Endpoint Behavior Types</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Value</th>
            <th class="text-center" colspan="1" rowspan="1">Hex</th>
            <th class="text-center" colspan="1" rowspan="1">Endpoint Behavior</th>
            <th class="text-center" colspan="1" rowspan="1">Reference</th>
            <th class="text-center" colspan="1" rowspan="1">Change Controller</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">40</td>
            <td class="text-center" colspan="1" rowspan="1">0x0028</td>
            <td class="text-center" colspan="1" rowspan="1">End.MAP</td>
            <td class="text-center" colspan="1" rowspan="1">RFC 9433</td>
            <td class="text-center" colspan="1" rowspan="1">IETF</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">41</td>
            <td class="text-center" colspan="1" rowspan="1">0x0029</td>
            <td class="text-center" colspan="1" rowspan="1">End.Limit</td>
            <td class="text-center" colspan="1" rowspan="1">RFC 9433</td>
            <td class="text-center" colspan="1" rowspan="1">IETF</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">69</td>
            <td class="text-center" colspan="1" rowspan="1">0x0045</td>
            <td class="text-center" colspan="1" rowspan="1">End.M.GTP6.D</td>
            <td class="text-center" colspan="1" rowspan="1">RFC 9433</td>
            <td class="text-center" colspan="1" rowspan="1">IETF</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">70</td>
            <td class="text-center" colspan="1" rowspan="1">0x0046</td>
            <td class="text-center" colspan="1" rowspan="1">End.M.GTP6.Di</td>
            <td class="text-center" colspan="1" rowspan="1">RFC 9433</td>
            <td class="text-center" colspan="1" rowspan="1">IETF</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">71</td>
            <td class="text-center" colspan="1" rowspan="1">0x0047</td>
            <td class="text-center" colspan="1" rowspan="1">End.M.GTP6.E</td>
            <td class="text-center" colspan="1" rowspan="1">RFC 9433</td>
            <td class="text-center" colspan="1" rowspan="1">IETF</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">72</td>
            <td class="text-center" colspan="1" rowspan="1">0x0048</td>
            <td class="text-center" colspan="1" rowspan="1">End.M.GTP4.E</td>
            <td class="text-center" colspan="1" rowspan="1">RFC 9433</td>
            <td class="text-center" colspan="1" rowspan="1">IETF</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<section id="section-12">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-12">12. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-12.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-12.1">12.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8402">[RFC8402]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S., Ed.</span>, <span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Litkowski, S.</span>, and <span class="refAuthor">R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time class="refDate" datetime="2018-07">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8754">[RFC8754]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Dukes, D., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">D. Voyer</span>, <span class="refTitle">"IPv6 Segment Routing Header (SRH)"</span>, <span class="seriesInfo">RFC 8754</span>, <span class="seriesInfo">DOI 10.17487/RFC8754</span>, <time class="refDate" datetime="2020-03">March 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8754">https://www.rfc-editor.org/info/rfc8754</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8986">[RFC8986]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Camarillo, P., Ed.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">Z. Li</span>, <span class="refTitle">"Segment Routing over IPv6 (SRv6) Network Programming"</span>, <span class="seriesInfo">RFC 8986</span>, <span class="seriesInfo">DOI 10.17487/RFC8986</span>, <time class="refDate" datetime="2021-02">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8986">https://www.rfc-editor.org/info/rfc8986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9256">[RFC9256]</dt>
        <dd>
<span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K., Ed.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Bogdanov, A.</span>, and <span class="refAuthor">P. Mattes</span>, <span class="refTitle">"Segment Routing Policy Architecture"</span>, <span class="seriesInfo">RFC 9256</span>, <span class="seriesInfo">DOI 10.17487/RFC9256</span>, <time class="refDate" datetime="2022-07">July 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9256">https://www.rfc-editor.org/info/rfc9256</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TS.23501">[TS.23501]</dt>
      <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"System architecture for the 5G System (5GS)"</span>, <span class="refContent">Version 17.9.0</span>, <span class="seriesInfo">3GPP TS 23.501</span>, <time class="refDate" datetime="2023-06">June 2023</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-12.2">12.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.gundavelli-dmm-mfa">[MFA]</dt>
        <dd>
<span class="refAuthor">Gundavelli, S.</span>, <span class="refAuthor">Liebsch, M.</span>, and <span class="refAuthor">S. Matsushima</span>, <span class="refTitle">"Mobility-aware Floating Anchor (MFA)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-gundavelli-dmm-mfa-01</span>, <time class="refDate" datetime="2018-09-19">19 September 2018</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-gundavelli-dmm-mfa-01">https://datatracker.ietf.org/doc/html/draft-gundavelli-dmm-mfa-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.mhkk-dmm-srv6mup-architecture">[MUP-SR-ARCH]</dt>
        <dd>
<span class="refAuthor">Matsushima, S.</span>, <span class="refAuthor">Horiba, K.</span>, <span class="refAuthor">Khan, A.</span>, <span class="refAuthor">Kawakami, Y.</span>, <span class="refAuthor">Murakami, T.</span>, <span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Kohno, M.</span>, <span class="refAuthor">Kamata, T.</span>, <span class="refAuthor">Camarillo, P.</span>, <span class="refAuthor">Horn, J.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Zadok, S.</span>, <span class="refAuthor">Meilik, I.</span>, <span class="refAuthor">Agrawal, A.</span>, and <span class="refAuthor">K. Perumal</span>, <span class="refTitle">"Mobile User Plane Architecture using Segment Routing for Distributed Mobility Management"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-mhkk-dmm-srv6mup-architecture-05</span>, <time class="refDate" datetime="2023-03-13">13 March 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-mhkk-dmm-srv6mup-architecture-05">https://datatracker.ietf.org/doc/html/draft-mhkk-dmm-srv6mup-architecture-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ali-teas-spring-ns-building-blocks">[NETWORK-SLICE]</dt>
        <dd>
<span class="refAuthor">Ali, Z.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Camarillo, P.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Matsushima, S.</span>, <span class="refAuthor">Rokui, R.</span>, <span class="refAuthor">Dhamija, A.</span>, and <span class="refAuthor">P. Maheshwari</span>, <span class="refTitle">"Building blocks for Network Slice Realization in Segment Routing Network"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ali-teas-spring-ns-building-blocks-03</span>, <time class="refDate" datetime="2022-09-07">7 September 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ali-teas-spring-ns-building-blocks-03">https://datatracker.ietf.org/doc/html/draft-ali-teas-spring-ns-building-blocks-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9087">[RFC9087]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Dawra, G., Ed.</span>, <span class="refAuthor">Aries, E.</span>, and <span class="refAuthor">D. Afanasiev</span>, <span class="refTitle">"Segment Routing Centralized BGP Egress Peer Engineering"</span>, <span class="seriesInfo">RFC 9087</span>, <span class="seriesInfo">DOI 10.17487/RFC9087</span>, <time class="refDate" datetime="2021-08">August 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9087">https://www.rfc-editor.org/info/rfc9087</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9350">[RFC9350]</dt>
        <dd>
<span class="refAuthor">Psenak, P., Ed.</span>, <span class="refAuthor">Hegde, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K.</span>, and <span class="refAuthor">A. Gulko</span>, <span class="refTitle">"IGP Flexible Algorithm"</span>, <span class="seriesInfo">RFC 9350</span>, <span class="seriesInfo">DOI 10.17487/RFC9350</span>, <time class="refDate" datetime="2023-02">February 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9350">https://www.rfc-editor.org/info/rfc9350</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-spring-sr-service-programming">[SR-SERV-PROG]</dt>
        <dd>
<span class="refAuthor">Clad, F., Ed.</span>, <span class="refAuthor">Xu, X., Ed.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Bernier, D.</span>, <span class="refAuthor">Li, C.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Ma, S.</span>, <span class="refAuthor">Yadlapalli, C.</span>, <span class="refAuthor">Henderickx, W.</span>, and <span class="refAuthor">S. Salsano</span>, <span class="refTitle">"Service Programming with Segment Routing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-spring-sr-service-programming-07</span>, <time class="refDate" datetime="2023-02-15">15 February 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-spring-sr-service-programming-07">https://datatracker.ietf.org/doc/html/draft-ietf-spring-sr-service-programming-07</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.matsushima-spring-srv6-deployment-status">[SRV6-DEPLOY-STAT]</dt>
        <dd>
<span class="refAuthor">Matsushima, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Ali, Z.</span>, <span class="refAuthor">Li, Z.</span>, <span class="refAuthor">Rajaraman, K.</span>, and <span class="refAuthor">A. Dhamija</span>, <span class="refTitle">"SRv6 Implementation and Deployment Status"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-matsushima-spring-srv6-deployment-status-15</span>, <time class="refDate" datetime="2022-04-05">5 April 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-matsushima-spring-srv6-deployment-status-15">https://datatracker.ietf.org/doc/html/draft-matsushima-spring-srv6-deployment-status-15</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.kohno-dmm-srv6mob-arch">[SRV6-MOB-ARCH-DISCUSS]</dt>
        <dd>
<span class="refAuthor">Kohno, M.</span>, <span class="refAuthor">Clad, F.</span>, <span class="refAuthor">Camarillo, P.</span>, and <span class="refAuthor">Z. Ali</span>, <span class="refTitle">"Architecture Discussion on SRv6 Mobile User plane"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-kohno-dmm-srv6mob-arch-06</span>, <time class="refDate" datetime="2023-03-09">9 March 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-kohno-dmm-srv6mob-arch-06">https://datatracker.ietf.org/doc/html/draft-kohno-dmm-srv6mob-arch-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.camarilloelmalky-springdmm-srv6-mob-usecases">[SRV6-MOB-USECASES]</dt>
        <dd>
<span class="refAuthor">Camarillo, P., Ed.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Elmalky, H., Ed.</span>, <span class="refAuthor">Matsushima, S.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Cui, A.</span>, and <span class="refAuthor">B. Peirens</span>, <span class="refTitle">"SRv6 Mobility Use-Cases"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-camarilloelmalky-springdmm-srv6-mob-usecases-02</span>, <time class="refDate" datetime="2019-08-15">15 August 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-camarilloelmalky-springdmm-srv6-mob-usecases-02">https://datatracker.ietf.org/doc/html/draft-camarilloelmalky-springdmm-srv6-mob-usecases-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-spring-srv6-srh-compression">[SRV6-SRH-COMPRESSION]</dt>
        <dd>
<span class="refAuthor">Cheng, W., Ed.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Li, Z.</span>, <span class="refAuthor">Decraene, B.</span>, and <span class="refAuthor">F. Clad, Ed.</span>, <span class="refTitle">"Compressed SRv6 Segment List Encoding in SRH"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-spring-srv6-srh-compression-05</span>, <time class="refDate" datetime="2023-06-20">20 June 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-spring-srv6-srh-compression-05">https://datatracker.ietf.org/doc/html/draft-ietf-spring-srv6-srh-compression-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.murakami-dmm-user-plane-message-encoding">[SRV6-UP-MSG-ENCODING]</dt>
        <dd>
<span class="refAuthor">Murakami, T.</span>, <span class="refAuthor">Matsushima, S.</span>, <span class="refAuthor">Ebisawa, K.</span>, <span class="refAuthor">Camarillo, P.</span>, and <span class="refAuthor">R. Shekhar</span>, <span class="refTitle">"User Plane Message Encoding"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-murakami-dmm-user-plane-message-encoding-05</span>, <time class="refDate" datetime="2022-03-05">5 March 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-murakami-dmm-user-plane-message-encoding-05">https://datatracker.ietf.org/doc/html/draft-murakami-dmm-user-plane-message-encoding-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TS.29281">[TS.29281]</dt>
        <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"General Packet Radio System (GPRS) Tunnelling Protocol User Plane (GTPv1-U)"</span>, <span class="refContent">Version 17.4.0</span>, <span class="seriesInfo">3GPP TS 29.281</span>, <time class="refDate" datetime="2022-09">September 2022</time>. </dd>
<dd class="break"></dd>
<dt id="TS.38415">[TS.38415]</dt>
      <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"PDU session user plane protocol"</span>, <span class="refContent">Version 17.0.0</span>, <span class="seriesInfo">3GPP TS 38.415</span>, <time class="refDate" datetime="2022-04">April 2022</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acknowledge">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">The authors would like to thank <span class="contact-name">Daisuke Yokota</span>,
      <span class="contact-name">Bart Peirens</span>, <span class="contact-name">Ryokichi       Onishi</span>, <span class="contact-name">Kentaro Ebisawa</span>, <span class="contact-name">Peter Bosch</span>, <span class="contact-name">Darren Dukes</span>, <span class="contact-name">Francois Clad</span>, <span class="contact-name">Sri Gundavelli</span>,
      <span class="contact-name">Sridhar Bhaskaran</span>, <span class="contact-name">Arashmid       Akhavain</span>, <span class="contact-name">Ravi Shekhar</span>, <span class="contact-name">Aeneas Dodd-Noble</span>, <span class="contact-name">Carlos Jesus       Bernardos</span>, <span class="contact-name">Dirk von Hugo</span>, and <span class="contact-name">Jeffrey Zhang</span> for their useful comments of this work.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
</section>
</div>
<section id="appendix-B">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Kentaro Ebisawa</span></div>
<div class="left" dir="auto"><span class="org">Toyota Motor Corporation</span></div>
<div class="left" dir="auto"><span class="country-name">Japan</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:ebisawa@toyota-tokyo.tech">ebisawa@toyota-tokyo.tech</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Tetsuya Murakami</span></div>
<div class="left" dir="auto"><span class="org">Arrcus, Inc.</span></div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:tetsuya.ietf@gmail.com">tetsuya.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Charles E. Perkins</span></div>
<div class="left" dir="auto"><span class="org">Lupin Lodge</span></div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:charliep@computer.org">charliep@computer.org</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Jakub Horn</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems, Inc.</span></div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:jakuhorn@cisco.com">jakuhorn@cisco.com</a>
</div>
</address>
</section>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Satoru Matsushima (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">SoftBank</span></div>
<div class="left" dir="auto"><span class="country-name">Japan</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:satoru.matsushima@g.softbank.co.jp">satoru.matsushima@g.softbank.co.jp</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Clarence Filsfils</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems, Inc.</span></div>
<div class="left" dir="auto"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:cf@cisco.com">cf@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Miya Kohno</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems, Inc.</span></div>
<div class="left" dir="auto"><span class="country-name">Japan</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:mkohno@cisco.com">mkohno@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Pablo Camarillo Garvia (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems, Inc.</span></div>
<div class="left" dir="auto"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:pcamaril@cisco.com">pcamaril@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Daniel Voyer</span></div>
<div class="left" dir="auto"><span class="org">Bell Canada</span></div>
<div class="left" dir="auto"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:daniel.voyer@bell.ca">daniel.voyer@bell.ca</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>