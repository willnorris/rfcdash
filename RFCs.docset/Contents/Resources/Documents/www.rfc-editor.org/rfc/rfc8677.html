<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 8677: Name-Based Service Function Forwarder (nSFF) Component within a Service Function Chaining (SFC) Framework</title>
<meta content="Dirk Trossen" name="author"/>
<meta content="Debashish Purkayastha" name="author"/>
<meta content="Akbar Rahman" name="author"/>
<meta content="
       
       Adoption of cloud and fog technology allows operators to deploy a
       single &quot;Service Function&quot; (SF) to multiple &quot;execution locations&quot;.  The
       decision to steer traffic to a specific location may change frequently
       based on load, proximity, etc. Under the current Service Function
       Chaining (SFC) framework, steering traffic dynamically to the different
       execution endpoints requires a specific &quot;rechaining&quot;, i.e., a change in
       the service function path reflecting the different IP endpoints to be
       used for the new execution points.  This procedure may be complex and
       take time. In order to simplify rechaining and reduce the time to
       complete the procedure, we discuss separating the logical Service
       Function Path (SFP) from the specific execution endpoints. This can be
       done by identifying the SFs using a name rather than a
       routable IP endpoint (or Layer 2 address). This document describes the
       necessary extensions, additional functions, and protocol details in the
       Service Function Forwarder (SFF) to handle name-based relationships.
       
       
    This document presents InterDigital's approach to name-based SFC.
    It does not represent IETF consensus and is presented here so that
    the SFC community may benefit from considering this mechanism and
    the possibility of its use in the edge data centers.
       
    " name="description"/>
<meta content="xml2rfc 2.35.0" name="generator"/>
<meta content="service function" name="keyword"/>
<meta content="SF" name="keyword"/>
<meta content="SFF" name="keyword"/>
<meta content="nSFF" name="keyword"/>
<meta content="SFC" name="keyword"/>
<meta content="SFP" name="keyword"/>
<meta content="NSH" name="keyword"/>
<meta content="FQDN" name="keyword"/>
<meta content="5G" name="keyword"/>
<meta content="NSSAI" name="keyword"/>
<meta content="CCNF" name="keyword"/>
<meta content="NSSF" name="keyword"/>
<meta content="3GPP" name="keyword"/>
<meta content="8677" name="rfc.number"/>
<link href="rfc8677.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .sourcecode {
    margin-bottom: 1em;
  }
}</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc8677" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-trossen-sfc-name-based-sff-07" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 8677</td>
<td class="center">Name-Based SFF</td>
<td class="right">November 2019</td>
</tr></thead>
<tfoot><tr>
<td class="left">Trossen, et al.</td>
<td class="center">Informational</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Independent Submission</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc8677">8677</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Informational</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2019-11">November 2019</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">D. Trossen</div>
<div class="org">InterDigital Europe, Ltd</div>
</div>
<div class="author">
      <div class="author-name">D. Purkayastha</div>
<div class="org">InterDigital Communications, LLC</div>
</div>
<div class="author">
      <div class="author-name">A. Rahman</div>
<div class="org">InterDigital Communications, LLC</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 8677</h1>
<h1 id="title">Name-Based Service Function Forwarder (nSFF) Component within a Service Function Chaining (SFC) Framework</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
       Adoption of cloud and fog technology allows operators to deploy a
       single "Service Function" (SF) to multiple "execution locations".  The
       decision to steer traffic to a specific location may change frequently
       based on load, proximity, etc. Under the current Service Function
       Chaining (SFC) framework, steering traffic dynamically to the different
       execution endpoints requires a specific "rechaining", i.e., a change in
       the service function path reflecting the different IP endpoints to be
       used for the new execution points.  This procedure may be complex and
       take time. In order to simplify rechaining and reduce the time to
       complete the procedure, we discuss separating the logical Service
       Function Path (SFP) from the specific execution endpoints. This can be
       done by identifying the SFs using a name rather than a
       routable IP endpoint (or Layer 2 address). This document describes the
       necessary extensions, additional functions, and protocol details in the
       Service Function Forwarder (SFF) to handle name-based relationships.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
<p id="section-abstract-2">
    This document presents InterDigital's approach to name-based SFC.
    It does not represent IETF consensus and is presented here so that
    the SFC community may benefit from considering this mechanism and
    the possibility of its use in the edge data centers.<a class="pilcrow" href="#section-abstract-2">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This document is not an Internet Standards Track specification; it is
            published for informational purposes.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This is a contribution to the RFC Series, independently of any
            other RFC stream.  The RFC Editor has chosen to publish this
            document at its discretion and makes no statement about its value
            for implementation or deployment.  Documents approved for
            publication by the RFC Editor are not candidates for any level of
            Internet Standard; see Section 2 of RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc8677">https://www.rfc-editor.org/info/rfc8677</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2019 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (https://trustee.ietf.org/license-info) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a><a class="pilcrow" href="#section-toc.1-1.1.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-terminology">Terminology</a><a class="pilcrow" href="#section-toc.1-1.2.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-example-use-case-5g-control">Example Use Case: 5G Control-Plane Services</a><a class="pilcrow" href="#section-toc.1-1.3.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-background">Background</a><a class="pilcrow" href="#section-toc.1-1.4.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-relevant-part-of-sfc-archit">Relevant Part of SFC Architecture</a><a class="pilcrow" href="#section-toc.1-1.4.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-challenges-with-current-fra">Challenges with Current Framework</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-name-based-operation-in-sff">Name-Based Operation in SFF</a><a class="pilcrow" href="#section-toc.1-1.5.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.  <a class="xref" href="#name-general-idea">General Idea</a><a class="pilcrow" href="#section-toc.1-1.5.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="xref" href="#section-5.2">5.2</a>.  <a class="xref" href="#name-name-based-service-function">Name-Based Service Function Path (nSFP)</a><a class="pilcrow" href="#section-toc.1-1.5.2.2.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="xref" href="#section-5.3">5.3</a>.  <a class="xref" href="#name-name-based-network-locator-">Name-Based Network Locator Map (nNLM)</a><a class="pilcrow" href="#section-toc.1-1.5.2.3.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a class="xref" href="#section-5.4">5.4</a>.  <a class="xref" href="#name-name-based-service-function-">Name-Based Service Function Forwarder (nSFF)</a><a class="pilcrow" href="#section-toc.1-1.5.2.4.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a class="xref" href="#section-5.5">5.5</a>.  <a class="xref" href="#name-high-level-architecture">High-Level Architecture</a><a class="pilcrow" href="#section-toc.1-1.5.2.5.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a class="xref" href="#section-5.6">5.6</a>.  <a class="xref" href="#name-operational-steps">Operational Steps</a><a class="pilcrow" href="#section-toc.1-1.5.2.6.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-nsff-forwarding-operations">nSFF Forwarding Operations</a><a class="pilcrow" href="#section-toc.1-1.6.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="xref" href="#section-6.1">6.1</a>.  <a class="xref" href="#name-nsff-protocol-layers">nSFF Protocol Layers</a><a class="pilcrow" href="#section-toc.1-1.6.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a class="xref" href="#section-6.2">6.2</a>.  <a class="xref" href="#name-nsff-operations">nSFF Operations</a><a class="pilcrow" href="#section-toc.1-1.6.2.2.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a class="xref" href="#section-6.2.1">6.2.1</a>.  <a class="xref" href="#name-forwarding-between-nsffs-an">Forwarding between nSFFs and nSFF-NRs</a><a class="pilcrow" href="#section-toc.1-1.6.2.2.2.1.1">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a class="xref" href="#section-6.2.2">6.2.2</a>.  <a class="xref" href="#name-sf-registration">SF Registration</a><a class="pilcrow" href="#section-toc.1-1.6.2.2.2.2.1">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.6.2.2.2.3">
                    <p id="section-toc.1-1.6.2.2.2.3.1"><a class="xref" href="#section-6.2.3">6.2.3</a>.  <a class="xref" href="#name-local-sf-forwarding">Local SF Forwarding</a><a class="pilcrow" href="#section-toc.1-1.6.2.2.2.3.1">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.6.2.2.2.4">
                    <p id="section-toc.1-1.6.2.2.2.4.1"><a class="xref" href="#section-6.2.4">6.2.4</a>.  <a class="xref" href="#name-handling-of-http-responses">Handling of HTTP Responses</a><a class="pilcrow" href="#section-toc.1-1.6.2.2.2.4.1">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.6.2.2.2.5">
                    <p id="section-toc.1-1.6.2.2.2.5.1"><a class="xref" href="#section-6.2.5">6.2.5</a>.  <a class="xref" href="#name-remote-sf-forwarding">Remote SF Forwarding</a><a class="pilcrow" href="#section-toc.1-1.6.2.2.2.5.1">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a><a class="pilcrow" href="#section-toc.1-1.7.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a><a class="pilcrow" href="#section-toc.1-1.8.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-references">References</a><a class="pilcrow" href="#section-toc.1-1.9.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="xref" href="#section-9.1">9.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a><a class="pilcrow" href="#section-toc.1-1.9.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="xref" href="#section-9.2">9.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a><a class="pilcrow" href="#section-toc.1-1.9.2.2.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-appendix.a"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a><a class="pilcrow" href="#section-toc.1-1.10.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-appendix.b"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a><a class="pilcrow" href="#section-toc.1-1.11.1">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
        The requirements on today's networks are very diverse, enabling
        multiple use cases such as the Internet of Things (IoT), Content
        Distribution, Gaming, and Network functions such as Cloud Radio Access
        Network (RAN) and 5G control planes based on a Service-Based
        Architecture (SBA). These services are deployed, provisioned, and managed
        using Cloud-based techniques as seen in the IT world. Virtualization
        of compute and storage resources is at the heart of providing (often
        web) services to end users with the ability to quickly provision
        virtualized service endpoints through, e.g., container-based
        techniques. This creates the ability to dynamically compose new
        services from existing services. It also allows an operator to move a
        service instance in response to user mobility or to change resource
 availability. When moving from a purely "distant cloud" model to one
        of localized micro data centers with regional, metro, or even street
        level, often called "edge" data centers, such virtualized service
        instances can be instantiated in topologically different locations
        with the overall "distant" data center now being transformed into a
        network of distributed ones.

The reaction of content providers, like Facebook, Google, NetFlix, and others,
is not just to rely on deploying content servers at the ingress of the
customer network. Instead, the trend is towards deploying multiple Point of
Presences (POPs) within the customer network, those POPs being connected
through proprietary mechanisms <span>[<a class="xref" href="#Schlinker2017">Schlinker2017</a>]</span>
to push content.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">
        The Service Function Chaining (SFC) framework <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span> allows network operators as well as service
        providers to compose new services by chaining individual "service
        functions". Such chains are expressed through explicit relationships
        of functional components (the SFs) realized through their direct Layer
        2 (e.g., Media Access Control (MAC) address) or Layer 3 (e.g., IP
        address) relationship as defined through next-hop information that is
        being defined by the network operator. See <a class="xref" href="#Bkgnd">Section 4</a> for more background on SFC.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">
         In a dynamic service environment of distributed data centers such as
         the one outlined above, with the ability to create and recreate
         service endpoints frequently, the SFC framework requires
         reconfiguring the existing chain through information based on the new
         relationships, causing overhead in a number of components,
         specifically the orchestrator that initiates the initial SFC and any
         possible reconfiguration.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">
 
This document describes how such changes can be handled without involving the
initiation of new and reconfigured SFCs.  This is accomplished by lifting the
chaining relationship from Layer 2 and Layer 3 information to that of SF
"names", which can, for instance, be expressed as URIs.


In order to transparently support such named relationships, we propose to
embed the necessary functionality directly into the Service Function Forwarder
(SFF) as described in <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span>. With that,
the SFF described in this document allows for keeping an existing SFC intact,
as described by its Service Function Path (SFP), while enabling the selection
of appropriate service function endpoint(s) during the traversal of packets
through the SFC. This document is an Independent Submission to the RFC
Editor. It is not an output of the IETF SFC WG.<a class="pilcrow" href="#section-1-4">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<p id="section-2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-2-1">¶</a></p>
</section>
</div>
<div id="Use_Case">
<section id="section-3">
      <h2 id="name-example-use-case-5g-control">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-example-use-case-5g-control">Example Use Case: 5G Control-Plane Services</a>
      </h2>
<p id="section-3-1">
     We exemplify the need for chaining SFs at the level
     of a service name through a use case stemming from the current
     3GPP Release 16 work on Service Based Architecture (SBA) <span>[<a class="xref" href="#SDO-3GPP-SBA">SDO-3GPP-SBA</a>]</span>, <span>[<a class="xref" href="#SDO-3GPP-SBA-ENHANCEMENT">SDO-3GPP-SBA-ENHANCEMENT</a>]</span>. In
     this work, mobile network control planes are proposed to be
     realized by replacing the traditional network function interfaces
     with a fully service-based one. HTTP was chosen as the
     application-layer protocol for exchanging suitable service
     requests <span>[<a class="xref" href="#SDO-3GPP-SBA">SDO-3GPP-SBA</a>]</span>. With this in mind, the
     exchange between, for example, the 3GPP-defined (Rel. 15) Session
     Management Function (SMF) and the Access and Mobility Management
     Function (AMF) in a 5G control plane is being described as a set
     of web-service-like requests that are, in turn, embedded into HTTP
     requests. Hence, interactions in a 5G control plane can be
     modeled based on SFCs where the relationship
     is between the specific (IP-based) SF endpoints that
     implement the necessary service endpoints in the SMF and AMF. The
     SFs are exposed through URIs with work ongoing to
     define the used naming conventions for such URIs.<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2">
      This move from a network function model (in pre-Release 15
      systems of 3GPP) to a service-based model is motivated through
      the proliferation of data-center operations for mobile network
      control-plane services. In other words, typical IT-based methods
      to service provisioning, particularly that of virtualization of
      entire compute resources, are envisioned to being used in future
      operations of mobile networks.  Hence, operators of such future
      mobile networks desire to virtualize SF endpoints and direct
      (control-plane) traffic to the most appropriate current service
      instance in the most appropriate (local) data center. Such a data
      center is envisioned as being interconnected through a
      software-defined wide area network (SD-WAN).  "Appropriate" here
      can be defined by topological or geographical proximity of the
      service initiator to the SF endpoint. Alternatively, network or
      service instance compute load can be used to direct a request to
      a more appropriate (in this case less loaded) instance to reduce
      possible latency of the overall request. Such data-center-centric
      operation is extended with the trend towards regionalization of
      load through a "regional office" approach, where micro data
      centers provide virtualizable resources that can be used in the
      service execution, creating a larger degree of freedom when
      choosing the "most appropriate" service endpoint for a particular
      incoming service request.<a class="pilcrow" href="#section-3-2">¶</a></p>
<p id="section-3-3">
      While the move to a service-based model aligns well with the
      framework of SFC, choosing the most appropriate service instance
      at runtime requires so-called "rechaining" of the SFC since the
      relationships in said SFC are defined through Layer 2 or Layer 3
      identifiers, which, in turn, are likely to be different if the
      chosen service instances reside in different parts of the network
      (e.g., in a regional data center).<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4">
         Hence, when a traffic flow is forwarded over a service chain
         expressed as an SFC-compliant SFP, packets in the traffic flow are
         processed by the various SF instances, with each SF instance applying
         an SF prior to forwarding the packets to the next
         network node.

It is a service-layer concept and can possibly work over any Virtual network
layer and corresponding underlay network.  The underlay network can be IP or
alternatively any Layer 2 technology.

At the service layer, SFs are identified using a path identifier
and an index. Eventually, this index is translated to an IP address (or MAC
address) of the host where the SF is running. Because of this,
any change-of-service function instance is likely to require a change of the
path information since either the IP address (in the case of changing the
execution from one data center to another) or MAC address will change due to
the newly selected SF instance.<a class="pilcrow" href="#section-3-4">¶</a></p>
<p id="section-3-5"> Returning to our 5G control-plane example, a user's connection request to
 access an application server in the Internet may start with signaling in the
 control plane to set up user-plane bearers. The connection request may flow
 through SFs over a service chain in the control plane, as
 deployed by a network operator. Typical SFs in a 5G control plane may include
 "RAN termination / processing", "Slice Selection Function", "AMF", and
 "SMF". A "Network Slice" is a complete logical network including Radio Access
 Network (RAN) and Core Network (CN). Distinct RAN and CN Slices may exist. A
 device may access multiple Network Slices simultaneously through a single
 RAN. The device may provide Network Slice Selection Assistance Information
 (NSSAI) parameters to the network to help it select a RAN and a Core Network
 part of a slice instance. 

Part of the control plane, the Common Control Network Function (CCNF),
includes the Network Slice Selection Function (NSSF), which is in charge of
selecting core Network Slice instances.

The classifier, as described in SFC architecture, may reside in the user
terminal or at the Evolved Node B (eNB).  These SFs can be
configured to be part of an SFC. We can also say that some
of the configurations of the SFP may change at the execution
time. For example, the SMF may be relocated as the user moves and a new SMF
may be included in the SFP based on user location. <a class="xref" href="#fig-sfc-1">Figure 1</a> shows the example SFC described here.<a class="pilcrow" href="#section-3-5">¶</a></p>
<span id="name-mapping-sfc-onto-service-fu"></span><div id="fig-sfc-1">
<figure id="figure-1">
        <div class="artwork art-text alignCenter" id="section-3-6.1">
<pre>+------+   +---------+  +-----+   +-----+  
| User |   | Slice   |  |     |   |     |
| App  |--&gt;| Control |-&gt;| AMF |--&gt;| SMF |--&gt;
| Fn   |   | Function|  |     |   |     |  
+------+   +---------+  +-----+   +-----+</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-mapping-sfc-onto-service-fu">Mapping SFC onto Service Function Execution Points along a Service Function Path</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="Bkgnd">
<section id="section-4">
      <h2 id="name-background">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-background">Background</a>
      </h2>
<p id="section-4-1"><span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span> describes an architecture
    for the specification, creation, and ongoing maintenance of SFCs.
    It includes architectural concepts, principles, and components used
    in the construction of composite services through deployment of
    SFCs. In the following, we outline the parts of this SFC
    architecture relevant for our proposed extension, followed by the
    challenges with this current framework in the light of our example
    use case.<a class="pilcrow" href="#section-4-1">¶</a></p>
<div id="Arch">
<section id="section-4.1">
        <h3 id="name-relevant-part-of-sfc-archit">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-relevant-part-of-sfc-archit">Relevant Part of SFC Architecture</a>
        </h3>
<p id="section-4.1-1">

   The SFC architecture, as defined in <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span>, describes architectural components such
   as SF, classifier, and SFF. It describes the SFP as the
   logical path of an SFC. Forwarding traffic along such an SFP
   is the responsibility of the SFF. For this, the SFFs in a
   network maintain the requisite SFP forwarding information.
   Such SFP forwarding information is associated with a service
   path identifier (SPI) that is used to uniquely identify an
   SFP.  The service forwarding state is represented by the
   Service Index (SI) and enables an SFF to identify which SFs
   of a given SFP should be applied, and in what order. The SFF
   also has information that allows it to forward packets to
   the next SFF after applying local SFs.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">
  The operational steps to forward traffic are then as follows:
  Traffic arrives at an SFF from the network.  The SFF
  determines the appropriate SF the traffic should be forwarded
  to via information contained in the SFC encapsulation.  After
  SF processing, the traffic is returned to the SFF and, if
  needed, is forwarded to another SF associated with that SFF.
  If there is another non-local hop (i.e., to an SF with a
  different SFF) in the SFP, the SFF further encapsulates the
  traffic in the appropriate network transport protocol and
  delivers it to the network for delivery to the next SFF along
  the path.  Related to this forwarding responsibility, an SFF
  should be able to interact with metadata.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
</section>
</div>
<div id="Challenges">
<section id="section-4.2">
        <h3 id="name-challenges-with-current-fra">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-challenges-with-current-fra">Challenges with Current Framework</a>
        </h3>
<p id="section-4.2-1">
    As outlined in previous sections, the SFP defines
    an ordered sequence of specific SF instances being
    used for the interaction between initiator and SFs
    along the SFP. These SFs are addressed by IP (or any
    L2/MAC) addresses and defined as next-hop information in the
    network locator maps of traversing SFF nodes.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<p id="section-4.2-2">  
       As outlined in our use case, however, the service provider may want to
       provision SFC nodes based on dynamically spun-up SF
       instances so that these (now virtualized) SFs can be
       reached in the SFC domain using the SFC underlay layer.<a class="pilcrow" href="#section-4.2-2">¶</a></p>
<p id="section-4.2-3">  
       Following the original model of SFC, any change in a specific execution
       point for a specific SF along the SFP will require a
       change of the SFP information (since the new SF execution
       point likely carries different IP or L2 address information) and
       possibly even the next-hop information in SFFs along the SFP. In case
       the availability of new SF instances is rather dynamic
       (e.g., through the use of container-based virtualization techniques),
       the current model and realization of SFC could lead to reducing the
       flexibility of service providers and increasing the management
       complexity incurred by the frequent changes of (service) forwarding
       information in the respective SFF nodes. This is because any change of
       the SFP (and possibly next-hop info) will need to go through suitable
       management cycles.<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<p id="section-4.2-4">
     To address these challenges through a suitable solution, we identify the following requirements:<a class="pilcrow" href="#section-4.2-4">¶</a></p>
<ul>
<li id="section-4.2-5.1">
   Relations between Service Execution Points <span class="bcp14">MUST</span> be
   abstracted so that, from an SFP point of view, the
   Logical Path never changes.<a class="pilcrow" href="#section-4.2-5.1">¶</a>
</li>
          <li id="section-4.2-5.2">
   Deriving the Service Execution Points from the
   abstract SFP <span class="bcp14">SHOULD</span> be fast and incur minimum delay.<a class="pilcrow" href="#section-4.2-5.2">¶</a>
</li>
          <li id="section-4.2-5.3">
   Identification of the Service Execution Points
   <span class="bcp14">SHOULD NOT</span> use a combination of Layer 2 or Layer 3
   mechanisms.<a class="pilcrow" href="#section-4.2-5.3">¶</a>
</li>
        </ul>
<p id="section-4.2-6">  
       The next section outlines a solution to address the issue, allowing for
       keeping SFC information (represented in its SFP) intact while
       addressing the desired flexibility of the service provider.<a class="pilcrow" href="#section-4.2-6">¶</a></p>
</section>
</div>
</section>
</div>
<div id="nop">
<section id="section-5">
      <h2 id="name-name-based-operation-in-sff">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-name-based-operation-in-sff">Name-Based Operation in SFF</a>
      </h2>
<div id="General">
<section id="section-5.1">
        <h3 id="name-general-idea">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-general-idea">General Idea</a>
        </h3>
<p id="section-5.1-1">
    The general idea is two pronged. Firstly, we elevate the definition
    of an SFP onto the level of "name-based
    interactions" rather than limiting SFPs to Layer 2 or Layer 3 information
    only. Secondly, we extend the operations of the SFF to allow for
    forwarding decisions that take into account such name-based
    interaction while remaining backward compatible to the current SFC
    architecture as defined in <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span>. In the following sections, we outline these two
    components of our solution.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<p id="section-5.1-2">
     If the next-hop information in the Network Locator Map (NLM) is
     described using an L2/L3 identifier, the name-based SFF (nSFF) may
     operate as described for (traditional) SFF, as defined in <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span>.  On the other hand, if the
     next-hop information in the NLM is described as a name, then the
     nSFF operates as described in the following sections.<a class="pilcrow" href="#section-5.1-2">¶</a></p>
<p id="section-5.1-3">
     In the following sections, we outline the two components of our solution.<a class="pilcrow" href="#section-5.1-3">¶</a></p>
</section>
</div>
<div id="nsfp">
<section id="section-5.2">
        <h3 id="name-name-based-service-function">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-name-based-service-function">Name-Based Service Function Path (nSFP)</a>
        </h3>
<p id="section-5.2-1">
 The existing SFC framework is defined in <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span>. <a class="xref" href="#Bkgnd">Section 4</a> outlines that the SFP information is
 representing path information based on Layer 2 or Layer 3
 information, i.e., MAC or IP addresses, causing the
 aforementioned frequent adaptations in cases of
 execution-point changes. Instead, we introduce the notion of a
 "name-based Service Function Path (nSFP)".<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<p id="section-5.2-2">
         In today's networking terms, any identifier can be treated as a name,
         but we will illustrate the realization of a "Name-based SFP" through
         extended SFF operations (see <a class="xref" href="#nsfffwd">Section 6</a>) based on URIs as names and
         HTTP as the protocol of exchanging information. Here, URIs are being
         used to name for an SF along the nSFP. Note
         that the nSFP approach is not restricted to HTTP (as the
         protocol) and URIs (as next-hop identifier within the SFP). Other
         identifiers such as an IP address itself can also be used and are
         interpreted as a "name" in the nSFP. IP addresses as well as fully
         qualified domain names forming complex URIs (uniform resource
         identifiers), such as www.example.com/service_name1, are all captured
         by the notion of "name" in this document.<a class="pilcrow" href="#section-5.2-2">¶</a></p>
<p id="section-5.2-3">
        Generally, nSFPs are defined as an ordered sequence of the "name" of
        SFs, and a typical nSFP may look like: 192.0.x.x -&gt; www.example.com
        -&gt; www.example2.com/service1 -&gt; www.example2.com/service2.<a class="pilcrow" href="#section-5.2-3">¶</a></p>
<p id="section-5.2-4">
        Our use case in <a class="xref" href="#Use_Case">Section 3</a> can then be
        represented as an ordered named sequence. An example for a session
        initiation that involves an authentication procedure, this could look
        like 192.0.x.x -&gt; smf.example.org/session_initiate -&gt;
        amf.example.org/auth -&gt; smf.example.org/session_complete -&gt;
        192.0.x.x.  (Note that this example is only a conceptual one since the
        exact nature of any future SBA-based exchange of 5G control-plane
        functions is yet to be defined by standardization bodies such as
        3GPP).<a class="pilcrow" href="#section-5.2-4">¶</a></p>
<p id="section-5.2-5">
        In accordance with our use case in <a class="xref" href="#Use_Case">Section 3</a>, any of these named
        services can potentially be realized through more than one replicated
        SF instance. This leads to making dynamic decisions on where to send
        packets along the SAME SFP information, being
        provided during the execution of the SFC.  Through elevating the SFP
        onto the notion of name-based interactions, the SFP will remain the
        same even if those specific execution points change for a specific
        service interaction.<a class="pilcrow" href="#section-5.2-5">¶</a></p>
<p id="section-5.2-6">
        The following diagram in <a class="xref" href="#fig-sfc-2">Figure 2</a> describes this nSFP
        concept and the resulting mapping of those named interactions onto
        (possibly) replicated instances.<a class="pilcrow" href="#section-5.2-6">¶</a></p>
<span id="name-mapping-sfc-onto-service-fun"></span><div id="fig-sfc-2">
<figure id="figure-2">
          <div class="artwork art-text alignCenter" id="section-5.2-7.1">
<pre> +---------------------------------------------------------------+
 |Service Layer                                                  |
 | 192.0.x.x --&gt; www.example.com --&gt; www.example2.com --&gt;        |
 |                      ||              ||                       |
 +----------------------||--------------||-----------------------+
                        ||              ||
                        ||              ||
 +----------------------||--------------||-----------------------+
 |Underlay Network      \/              \/                       |
 |               +--+ +--+ +--+    +--+ +--+ +--+                |
 |               |  | |  | |  |    |  | |  | |  |                |
 |               +--+ +--+ +--+    +--+ +--+ +--+                |
 |               Compute and       Compute and                   |
 |               storage nodes     storage nodes                 |
 +---------------------------------------------------------------+</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-mapping-sfc-onto-service-fun">Mapping SFC onto Service Function Execution Points along a Service Function Path Based on Virtualized Service Function Instance</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="nnlm">
<section id="section-5.3">
        <h3 id="name-name-based-network-locator-">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-name-based-network-locator-">Name-Based Network Locator Map (nNLM)</a>
        </h3>
<p id="section-5.3-1"> 
        In order to forward a packet within an nSFP, we need to
        extend the NLM as defined in <span>[<a class="xref" href="#RFC8300">RFC8300</a>]</span>
        with the ability to consider name relations based on URIs as well as
        high-level transport protocols such as HTTP for means of SFC packet
        forwarding. Another example for SFC packet forwarding could be that of
        Constrained Application Protocol (CoAP).<a class="pilcrow" href="#section-5.3-1">¶</a></p>
<p id="section-5.3-2">   
         The extended NLM or name-based Network Locator Map
         (nNLM) is shown in <a class="xref" href="#fig-sfc-3">Table 1</a> as an example for www.example.com being
         part of the nSFP. Such extended nNLM is stored at each SFF throughout
         the SFC domain with suitable information populated to the nNLM during
         the configuration phase.<a class="pilcrow" href="#section-5.3-2">¶</a></p>
<span id="name-name-based-network-locator-m"></span><div id="fig-sfc-3">
<table class="center" id="table-1">
          <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-name-based-network-locator-m">Name-Based Network Locator Map</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">SPI</th>
              <th class="text-left" colspan="1" rowspan="1">SI</th>
              <th class="text-left" colspan="1" rowspan="1">Next Hop(s)</th>
              <th class="text-left" colspan="1" rowspan="1">Transport Encapsulation (TE)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">255</td>
              <td class="text-left" colspan="1" rowspan="1">192.0.2.1</td>
              <td class="text-left" colspan="1" rowspan="1">VXLAN-gpe</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">254</td>
              <td class="text-left" colspan="1" rowspan="1">198.51.100.10</td>
              <td class="text-left" colspan="1" rowspan="1">GRE</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">253</td>
              <td class="text-left" colspan="1" rowspan="1">www.example.com</td>
              <td class="text-left" colspan="1" rowspan="1">HTTP</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">40</td>
              <td class="text-left" colspan="1" rowspan="1">251</td>
              <td class="text-left" colspan="1" rowspan="1">198.51.100.15</td>
              <td class="text-left" colspan="1" rowspan="1">GRE</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">50</td>
              <td class="text-left" colspan="1" rowspan="1">200</td>
              <td class="text-left" colspan="1" rowspan="1">01:23:45:67:89:ab</td>
              <td class="text-left" colspan="1" rowspan="1">Ethernet</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">15</td>
              <td class="text-left" colspan="1" rowspan="1">212</td>
              <td class="text-left" colspan="1" rowspan="1">Null (end of path)</td>
              <td class="text-left" colspan="1" rowspan="1">None</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-5.3-4">
     Alternatively, the extended NLM may be defined with implicit name
     information rather than explicit URIs as in <a class="xref" href="#fig-sfc-3">Table 1</a>. In the example of <a class="xref" href="#fig-sfc-4">Table 2</a>, the next hop is represented
     as a generic HTTP service without a specific URI being identified
     in the extended NLM. In this scenario, the SFF
     forwards the packet based on parsing the HTTP request in order to
     identify the host name or URI. It retrieves the URI and may apply
     policy information to determine the destination host/service.<a class="pilcrow" href="#section-5.3-4">¶</a></p>
<span id="name-name-based-network-locator-ma"></span><div id="fig-sfc-4">
<table class="center" id="table-2">
          <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-name-based-network-locator-ma">Name-Based Network Locator Map with Implicit Name Information</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">SPI</th>
              <th class="text-left" colspan="1" rowspan="1">SI</th>
              <th class="text-left" colspan="1" rowspan="1">Next Hop(s)</th>
              <th class="text-left" colspan="1" rowspan="1">Transport Encapsulation (TE)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">255</td>
              <td class="text-left" colspan="1" rowspan="1">192.0.2.1</td>
              <td class="text-left" colspan="1" rowspan="1">VXLAN-gpe</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">254</td>
              <td class="text-left" colspan="1" rowspan="1">198.51.100.10</td>
              <td class="text-left" colspan="1" rowspan="1">GRE</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">253</td>
              <td class="text-left" colspan="1" rowspan="1">HTTP Service</td>
              <td class="text-left" colspan="1" rowspan="1">HTTP</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">40</td>
              <td class="text-left" colspan="1" rowspan="1">251</td>
              <td class="text-left" colspan="1" rowspan="1">198.51.100.15</td>
              <td class="text-left" colspan="1" rowspan="1">GRE</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">50</td>
              <td class="text-left" colspan="1" rowspan="1">200</td>
              <td class="text-left" colspan="1" rowspan="1">01:23:45:67:89:ab</td>
              <td class="text-left" colspan="1" rowspan="1">Ethernet</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">15</td>
              <td class="text-left" colspan="1" rowspan="1">212</td>
              <td class="text-left" colspan="1" rowspan="1">Null (end of path)</td>
              <td class="text-left" colspan="1" rowspan="1">None</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="nsff">
<section id="section-5.4">
        <h3 id="name-name-based-service-function-">
<a class="section-number selfRef" href="#section-5.4">5.4. </a><a class="section-name selfRef" href="#name-name-based-service-function-">Name-Based Service Function Forwarder (nSFF)</a>
        </h3>
<p id="section-5.4-1">
      It is desirable to extend the SFF of the SFC underlay to handle
      nSFPs transparently and without the need to insert any SF into
      the nSFP. Such extended nSFFs would then be responsible
      for forwarding a packet in the SFC domain as per the definition
      of the (extended) nSFP.<a class="pilcrow" href="#section-5.4-1">¶</a></p>
<p id="section-5.4-2">  
        In our example realization for an extended SFF, the solution
        described in this document uses HTTP as the protocol of forwarding SFC
        packets to the next (name-based) hop in the nSFP.

 The URI in the HTTP transaction is the name in our nSFP information,
 which will be used for name-based forwarding.<a class="pilcrow" href="#section-5.4-2">¶</a></p>
<p id="section-5.4-3">   
        Following our reasoning so far, HTTP requests (and more specifically,
        the plaintext-encoded requests above) are the equivalent of packets
        that enter the SFC domain. In the existing SFC framework, an
        IP payload is typically assumed to be a packet entering the SFC domain. This
        packet is forwarded to destination nodes using the L2
        encapsulation. Any layer 2 network can be used as an underlay
        network. This notion is now extended to packets being possibly part of
        an entire higher-layer application such as HTTP requests. The handling
        of any intermediate layers, such as TCP and IP, is left to the realization
        of the (extended) SFF operations towards the next (named) hop. For
        this, we will first outline the general lifecycle of an SFC packet in
        the following subsection, followed by two examples for determining
        next-hop information in <a class="xref" href="#localfwd">Section 6.2.3</a>, finished up by a layered view on
        the realization of the nSFF in <a class="xref" href="#httpresp">Section 6.2.4</a>.<a class="pilcrow" href="#section-5.4-3">¶</a></p>
</section>
</div>
<div id="arch">
<section id="section-5.5">
        <h3 id="name-high-level-architecture">
<a class="section-number selfRef" href="#section-5.5">5.5. </a><a class="section-name selfRef" href="#name-high-level-architecture">High-Level Architecture</a>
        </h3>
<span id="name-high-level-architecture-2"></span><div id="fig-sfc-5">
<figure id="figure-3">
          <div class="artwork art-text alignCenter" id="section-5.5-1.1">
<pre>+----------+
| SF1      |                 +--------+                  +------+ 
| instance |\                |   NR   |                  | SF2  | 
+----------+ \               +--------+                  +------+ 
              \                  ||                         ||
+------------+ \ +-------+   +---------+   +---------+   +-------+
| Classifier |---| nSFF1 |---|Forwarder|---|Forwarder|---| nSFF2 |    
+------------+   +-------+   +---------+   +---------+   +-------+
                                                            ||
                                                        +----------+ 
                                                        | Boundary |
                                                        |  node    |
                                                        +----------+</pre>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-high-level-architecture-2">High-Level Architecture</a>
          </figcaption></figure>
</div>
<p id="section-5.5-2">
     The high-level architecture for name-based operation shown in
     <a class="xref" href="#fig-sfc-5">Figure 3</a> is very similar to the
     SFC architecture as described in <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span>. Two new functions are introduced, as shown in
     the above diagram: namely, the nSFF and the Name Resolver (NR).<a class="pilcrow" href="#section-5.5-2">¶</a></p>
<p id="section-5.5-3">
 The nSFF is an extension of the existing SFF and is capable of
 processing SFC packets based on nNLM information, determining
 the next SF where the packet should be forwarded, and the
 required transport encapsulation (TE). Like standard SFF operation,
 it adds TE to the SFC packet and forwards
 it.<a class="pilcrow" href="#section-5.5-3">¶</a></p>
<p id="section-5.5-4">
 The NR is a new functional component, capable of
 identifying the execution endpoints, where a "named SF" is
 running, triggered by suitable resolution requests sent by the
 nSFF. Though this is similar to DNS function, it is not
 same. It does not use DNS protocols or data records. A new
 procedure to determine the suitable routing/forwarding
 information towards the nSFF serving the next
 hop of the SFP is used. The details are
 described later.<a class="pilcrow" href="#section-5.5-4">¶</a></p>
<p id="section-5.5-5">
        The other functional components, such as classifier and SF, are the same as
        described in SFC architecture, as defined in <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span>, while the Forwarders shown in the above diagram are traditional
        Layer 2 switches.<a class="pilcrow" href="#section-5.5-5">¶</a></p>
</section>
</div>
<div id="steps">
<section id="section-5.6">
        <h3 id="name-operational-steps">
<a class="section-number selfRef" href="#section-5.6">5.6. </a><a class="section-name selfRef" href="#name-operational-steps">Operational Steps</a>
        </h3>
<p id="section-5.6-1">
  In the proposed solution, the operations are realized by the
  name-based SFF, called "nSFF". We utilize the high-level
  architecture in <a class="xref" href="#fig-sfc-5">Figure 3</a>
  to describe the traversal between two SF
  instances of an nSFP-based transaction in an example chain
  of: 192.0.x.x -&gt; SF1 (www.example.com) -&gt; SF2
  (www.example2.com) -&gt; SF3 -&gt; ...<a class="pilcrow" href="#section-5.6-1">¶</a></p>
<p id="section-5.6-2">Service Function 3 (SF3) is assumed to be a classical SF;
hence, existing SFC mechanisms can be used to reach it and will not be
considered in this example.<a class="pilcrow" href="#section-5.6-2">¶</a></p>
<p id="section-5.6-3">
         According to the SFC lifecycle, as defined in <span>[<a class="xref" href="#RFC7665">RFC7665</a>]</span>, based on our example chain above, the traffic
         originates from a classifier or another SFF on the left. The traffic
         is processed by the incoming nSFF1 (on the left side) through the
         following steps. The traffic exits at nSFF2.<a class="pilcrow" href="#section-5.6-3">¶</a></p>
<dl class="olPercent" id="section-5.6-4">
          <dt>Step 1:</dt>
<div id="step1">
<dd id="section-5.6-4.1" style="margin-left: 4.5em">
            
      At nSFF1, the following nNLM is assumed:<a class="pilcrow" href="#section-5.6-4.1">¶</a>
</dd>
</div>
</dl>
<span id="name-nnlm-at-nsff1"></span><div id="fig-sfc-6">
<table class="center" id="table-3">
          <caption>
<a class="selfRef" href="#table-3">Table 3</a>:
<a class="selfRef" href="#name-nnlm-at-nsff1">nNLM at nSFF1</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">SPI</th>
              <th class="text-left" colspan="1" rowspan="1">SI</th>
              <th class="text-left" colspan="1" rowspan="1">Next Hop(s)</th>
              <th class="text-left" colspan="1" rowspan="1">Transport Encapsulation (TE)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">255</td>
              <td class="text-left" colspan="1" rowspan="1">192.0.2.1</td>
              <td class="text-left" colspan="1" rowspan="1">VXLAN-gpe</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">254</td>
              <td class="text-left" colspan="1" rowspan="1">198.51.100.10</td>
              <td class="text-left" colspan="1" rowspan="1">GRE</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">253</td>
              <td class="text-left" colspan="1" rowspan="1">www.example.com</td>
              <td class="text-left" colspan="1" rowspan="1">HTTP</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">252</td>
              <td class="text-left" colspan="1" rowspan="1">www.example2.com</td>
              <td class="text-left" colspan="1" rowspan="1">HTTP</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">40</td>
              <td class="text-left" colspan="1" rowspan="1">251</td>
              <td class="text-left" colspan="1" rowspan="1">198.51.100.15</td>
              <td class="text-left" colspan="1" rowspan="1">GRE</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">50</td>
              <td class="text-left" colspan="1" rowspan="1">200</td>
              <td class="text-left" colspan="1" rowspan="1">01:23:45:67:89:ab </td>
              <td class="text-left" colspan="1" rowspan="1">Ethernet</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">15</td>
              <td class="text-left" colspan="1" rowspan="1">212</td>
              <td class="text-left" colspan="1" rowspan="1">Null (end of path)</td>
              <td class="text-left" colspan="1" rowspan="1">None</td>
            </tr>
          </tbody>
        </table>
</div>
<dl class="olPercent" id="section-5.6-6">
          <dt>Step 2:</dt>
<div id="step2">
<dd id="section-5.6-6.1" style="margin-left: 4.5em">nSFF1 removes the previous transport
    encapsulation (TE) for any traffic originating from another
    SFF or classifier (traffic from an SF instance does not
    carry any TE and is therefore directly processed at the
    nSFF).<a class="pilcrow" href="#section-5.6-6.1">¶</a>
</dd>
</div>
<dt>Step 3:</dt>
<div id="step3">
<dd id="section-5.6-6.2" style="margin-left: 4.5em">
     nSFF1 then processes the Network Service Header (NSH)
     information, as defined in <span>[<a class="xref" href="#RFC8300">RFC8300</a>]</span>, to identify the next SF at the nSFP
     level by mapping the NSH information to the appropriate
     entry in its nNLM (see <a class="xref" href="#fig-sfc-6">Table 3</a>) based on the provided SPI/SI
     information in the NSH (see <a class="xref" href="#Bkgnd">Section 4</a>) in order to determine the name-based
     identifier of the next-hop SF. With such nNLM in mind, the
     nSFF searches the map for SPI = 10 and SI = 253. It
     identifies the next hop as = www.example.com and HTTP as
     the protocol to be used. Given that the next hop resides
     locally, the SFC packet is forwarded to the SF1 instance
     of www.example.com. Note that the next hop could also be
     identified from the provided HTTP request, if the next-hop
     information was identified as a generic HTTP service, as
     defined in <a class="xref" href="#nnlm">Section 5.3</a>.<a class="pilcrow" href="#section-5.6-6.2">¶</a>
</dd>
</div>
<dt>Step 4:</dt>
<div id="step4">
<dd id="section-5.6-6.3" style="margin-left: 4.5em">
             The SF1 instance then processes the received SFC packet
             according to its service semantics and modifies the NSH by
             setting SPI = 10 and SI = 252 for forwarding the packet along the
             SFP. It then forwards the SFC packet to its local nSFF, i.e.,
             nSFF1.<a class="pilcrow" href="#section-5.6-6.3">¶</a>
</dd>
</div>
<dt>Step 5:</dt>
<div id="step5">
<dd id="section-5.6-6.4" style="margin-left: 4.5em">nSFF1 processes the NSH of the SFC packet again,
    now with the NSH modified (SPI = 10, SI = 252) by the SF1
    instance. It retrieves the next-hop information from its
    nNLM in <a class="xref" href="#fig-sfc-6">Table 3</a> to be www.example2.com. Due to this SF
    not being locally available, the nSFF consults any locally
    available information regarding routing/forwarding towards
    a suitable nSFF that can serve this next hop.<a class="pilcrow" href="#section-5.6-6.4">¶</a>
</dd>
</div>
<dt>Step 6:</dt>
<div id="step6">
<dd id="section-5.6-6.5" style="margin-left: 4.5em">If such information exists, the Packet (plus the
         NSH information) is marked to be sent towards the nSFF serving the
         next hop based on such information in <a class="xref" href="#step8">Step 8</a>.<a class="pilcrow" href="#section-5.6-6.5">¶</a>
</dd>
</div>
<dt>Step 7:</dt>
<div id="step7">
<dd id="section-5.6-6.6" style="margin-left: 4.5em">If such information does not exist, nSFF1
          consults the NR to determine the suitable routing/forwarding
          information towards the identified nSFF serving the next hop of the
          SFP.  For future SFC packets towards this next hop, such resolved
          information may be locally cached, avoiding contacting the NR for
          every SFC packet forwarding. The packet is now marked to be sent via
          the network in <a class="xref" href="#step8">Step 8</a>.<a class="pilcrow" href="#section-5.6-6.6">¶</a>
</dd>
</div>
<dt>Step 8:</dt>
<div id="step8">
<dd id="section-5.6-6.7" style="margin-left: 4.5em">Utilizing the forwarding information
    determined in Steps <a class="xref" href="#step6">6</a> or <a class="xref" href="#step7">7</a>, nSFF1 adds the suitable TE for
           the SFC packet before forwarding via the forwarders in the network
           towards the next nSFF22.<a class="pilcrow" href="#section-5.6-6.7">¶</a>
</dd>
</div>
<dt>Step 9:</dt>
<div id="step9">
<dd id="section-5.6-6.8" style="margin-left: 4.5em">
            When the Packet (+NSH+TE) arrives at the outgoing nSFF2, i.e., the
            nSFF serving the identified next hop of the SFP, it removes the TE
            and processes the NSH to identify the next-hop information. At
            nSFF2 the nNLM in <a class="xref" href="#fig-sfc-7">Table 4</a> is
            assumed. Based on this nNLM and NSH information where SPI = 10 and
            SI = 252, nSFF2 identifies the next SF as www.example2.com.<a class="pilcrow" href="#section-5.6-6.8">¶</a>
</dd>
</div>
</dl>
<span id="name-nnlm-at-sff2"></span><div id="fig-sfc-7">
<table class="center" id="table-4">
          <caption>
<a class="selfRef" href="#table-4">Table 4</a>:
<a class="selfRef" href="#name-nnlm-at-sff2">nNLM at SFF2</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">SPI</th>
              <th class="text-left" colspan="1" rowspan="1">SI</th>
              <th class="text-left" colspan="1" rowspan="1">Next Hop(s)</th>
              <th class="text-left" colspan="1" rowspan="1">Transport Encapsulation (TE)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">10</td>
              <td class="text-left" colspan="1" rowspan="1">252</td>
              <td class="text-left" colspan="1" rowspan="1">www.example2.com</td>
              <td class="text-left" colspan="1" rowspan="1">HTTP</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">40</td>
              <td class="text-left" colspan="1" rowspan="1">251</td>
              <td class="text-left" colspan="1" rowspan="1">198.51.100.15</td>
              <td class="text-left" colspan="1" rowspan="1">GRE</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">50</td>
              <td class="text-left" colspan="1" rowspan="1">200</td>
              <td class="text-left" colspan="1" rowspan="1">01:23:45:67:89:ab</td>
              <td class="text-left" colspan="1" rowspan="1">Ethernet</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">15</td>
              <td class="text-left" colspan="1" rowspan="1">212</td>
              <td class="text-left" colspan="1" rowspan="1">Null (end of path)</td>
              <td class="text-left" colspan="1" rowspan="1">None</td>
            </tr>
          </tbody>
        </table>
</div>
<dl class="olPercent" id="section-5.6-8">
          <dt>Step 10:</dt>
<div id="step10">
<dd id="section-5.6-8.1" style="margin-left: 4.5em">If the next hop is locally registered at the
    nSFF, it forwards the packet (+NSH) to the SF
    instance using suitable IP/MAC methods for doing so.<a class="pilcrow" href="#section-5.6-8.1">¶</a>
</dd>
</div>
<dt>Step 11:</dt>
<div id="step11">
<dd id="section-5.6-8.2" style="margin-left: 4.5em">If the next hop is not locally registered at the nSFF,
           the outgoing nSFF adds new TE information to the packet and
           forwards the packet (+NSH+TE) to the next SFF or boundary node, as
           shown in <a class="xref" href="#fig-sfc-7">Table 4</a>.<a class="pilcrow" href="#section-5.6-8.2">¶</a>
</dd>
</div>
</dl>
</section>
</div>
</section>
</div>
<div id="nsfffwd">
<section id="section-6">
      <h2 id="name-nsff-forwarding-operations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-nsff-forwarding-operations">nSFF Forwarding Operations</a>
      </h2>
<p id="section-6-1">
  This section outlines the realization of various nSFF
  forwarding operations in <a class="xref" href="#steps">Section 5.6</a>. Although the
  operations in <a class="xref" href="#nop">Section 5</a> utilize the notion of
  name-based transactions in general, we exemplify the
  operations here in <a class="xref" href="#nop">Section 5</a> specifically for
  HTTP-based transactions to ground our description into a
  specific protocol for such name-based transaction. We will
  refer to the various steps in each of the following
  subsections.<a class="pilcrow" href="#section-6-1">¶</a></p>
<div id="proto">
<section id="section-6.1">
        <h3 id="name-nsff-protocol-layers">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-nsff-protocol-layers">nSFF Protocol Layers</a>
        </h3>
<p id="section-6.1-1"><a class="xref" href="#fig-sfc-8">Figure 4</a> shows the protocol layers based
 on the high-level architecture in <a class="xref" href="#fig-sfc-5">Figure 3</a>.<a class="pilcrow" href="#section-6.1-1">¶</a></p>
<span id="name-protocol-layers"></span><div id="fig-sfc-8">
<figure id="figure-4">
          <div class="artwork art-text alignCenter" id="section-6.1-2.1">
<pre>+-------+  +------+----+                              +----+-----+
|App    |  |      |    |   +--------+                 |    |     |
|HTTP   |  |--------&gt;  |   |  NR    |                 |nSFF-----&gt;|--
|TCP    |-&gt;| TCP  |nSFF|   +---/\---+                 |    | TCP | |
|IP     |  | IP   |    |       ||                     |    | IP  | |
+-------+  +------+----+  +---------+   +---------+   +----------+ |
|   L2  |  |      L2   |-&gt;|Forwarder|--&gt;|Forwarder|--&gt;|   L2     | | 
+-------+  +------+----+  +---------+   +---------+   +----------+ | 
  SF1           nSFF1                                     nSFF2    |                             
                                              +-------+            |
                                              | App   |/           |
                                              | HTTP  | -----------+
                                              | TCP   |\
                                              | IP    |
                                              | L2    |
                                              +-------+
                                                SF2</pre>
</div>
<figcaption><a class="selfRef" href="#figure-4">Figure 4</a>:
<a class="selfRef" href="#name-protocol-layers">Protocol Layers</a>
          </figcaption></figure>
</div>
<p id="section-6.1-3">
      The nSFF component here is shown as implementing a full
      incoming/outgoing TCP/IP protocol stack towards the local SFs,
      while implementing the nSFF-NR and nSFF-nSFF protocols based on
      the descriptions in <a class="xref" href="#localfwd">Section 6.2.3</a>.<a class="pilcrow" href="#section-6.1-3">¶</a></p>
<p id="section-6.1-4">   
  For the exchange of HTTP-based SF transactions,
  the nSFF terminates incoming TCP connections as well as
  outgoing TCP connections to local SFs, e.g., the TCP
  connection from SF1 terminates at nSFF1, and nSFF1 may store
  the connection information such as socket information. It
  also maintains the mapping information for the HTTP request
  such as originating SF, destination SF, and socket ID. nSFF1
  may implement sending keep-alive messages over the socket to
  maintain the connection to SF1. Upon arrival of an HTTP
  request from SF1, nSFF1 extracts the HTTP Request and
  forwards it towards the next node as outlined in <a class="xref" href="#nsffoperation">Section 6.2</a>. Any returning response is mapped onto the suitable open
  socket (for the original request) and sent towards SF1.<a class="pilcrow" href="#section-6.1-4">¶</a></p>
<p id="section-6.1-5">
      At the outgoing nSFF2, the destination SF2/Host is identified
      from the HTTP request message. If no TCP connection exists to the
      SF2, a new TCP connection is opened towards the destination SF2
      and the HTTP request is sent over said TCP connection. The nSFF2
      may also save the TCP connection information (such as socket
      information) and maintain the mapping of the socket information
      to the destination SF2. When an HTTP response is received from
      SF2 over the TCP connection, nSFF2 extracts the HTTP response,
      which is forwarded to the next node. nSFF2 may maintain the TCP
      connection through keep-alive messages.<a class="pilcrow" href="#section-6.1-5">¶</a></p>
</section>
</div>
<div id="nsffoperation">
<section id="section-6.2">
        <h3 id="name-nsff-operations">
<a class="section-number selfRef" href="#section-6.2">6.2. </a><a class="section-name selfRef" href="#name-nsff-operations">nSFF Operations</a>
        </h3>
<p id="section-6.2-1">
          In this section, we present three key aspects of operations for the
          realization of the steps in <a class="xref" href="#steps">Section 5.6</a>, namely, (i) the registration
          of local SFs (for <a class="xref" href="#step3">Step 3</a> in <a class="xref" href="#steps">Section 5.6</a>), (ii) the forwarding of SFC
          packets to and from local SFs (for Steps <a class="xref" href="#step3">3</a>,  <a class="xref" href="#step4">4</a>, and <a class="xref" href="#step10">10</a> in
          <a class="xref" href="#steps">Section 5.6</a>), (iii) the
   forwarding to a remote SF (for Steps <a class="xref" href="#step5">5</a>, <a class="xref" href="#step6">6</a>, and <a class="xref" href="#step7">7</a> in <a class="xref" href="#steps">Section 5.6</a>) and to the NR as well as (iv) for the lookup
          of a suitable remote SF (for <a class="xref" href="#step7">Step 7</a> in <a class="xref" href="#steps">Section 5.6</a>). We also cover
          aspects of maintaining local lookup information for reducing lookup
          latency and other issues.<a class="pilcrow" href="#section-6.2-1">¶</a></p>
<div id="nsfnr">
<section id="section-6.2.1">
          <h4 id="name-forwarding-between-nsffs-an">
<a class="section-number selfRef" href="#section-6.2.1">6.2.1. </a><a class="section-name selfRef" href="#name-forwarding-between-nsffs-an">Forwarding between nSFFs and nSFF-NRs</a>
          </h4>
<p id="section-6.2.1-1">
          Forwarding between the distributed nSFFs as well as between nSFFs and
          NRs is realized over the operator network via a path-based
          approach. A path-based approach utilizes path information provided
          by the source of the packet for forwarding said packet in the
          network. This is similar to segment routing albeit differing in the
          type of information provided for such source-based forwarding as
          described in this section. In this approach, the forwarding
          information to a remote nSFF or the NR is defined as a "path
          identifier" (pathID) of a defined length where said length field
          indicates the full pathID length. The payload of the packet is
          defined by the various operations outlined in the following
          subsections, resulting in an overall packet being transmitted. With
          this, the generic forwarding format (GFF) for transport over the
          operator network is defined in <a class="xref" href="#fig-sfc-9">Figure 5</a> with the length field
          defining the length of the pathID provided.<a class="pilcrow" href="#section-6.2.1-1">¶</a></p>
<span id="name-generic-forwarding-format-g"></span><div id="fig-sfc-9">
<figure id="figure-5">
            <div class="artwork art-text alignCenter" id="section-6.2.1-2.1">
<pre>+---------+-----------------+------------------------//------------+
|         |                 |                       //             |
| Length  | Path ID         |  Payload             //              |
|(12 bits)|                 |                     //               |
+---------+-----------------+--------------------//----------------+</pre>
</div>
<figcaption><a class="selfRef" href="#figure-5">Figure 5</a>:
<a class="selfRef" href="#name-generic-forwarding-format-g">Generic Forwarding Format (GFF)</a>
            </figcaption></figure>
</div>
<ul>
<li id="section-6.2.1-3.1">
            Length (12 bits): Defines the length of the pathID, i.e., up to 4096 bits<a class="pilcrow" href="#section-6.2.1-3.1">¶</a>
</li>
            <li id="section-6.2.1-3.2">
    Path ID: Variable-length bit field derived from
    IPv6 source and destination address<a class="pilcrow" href="#section-6.2.1-3.2">¶</a>
</li>
          </ul>
<p id="section-6.2.1-4">
   For the pathID information, solutions such as those in <span>[<a class="xref" href="#Reed2016">Reed2016</a>]</span> can be used. Here, the
   IPv6 source and destination addresses are used to realize a
   so-called path-based forwarding from the incoming to the
   outgoing nSFF or the NR. The forwarders in <a class="xref" href="#fig-sfc-8">Figure 4</a> are realized via SDN
   (software-defined networking) switches, implementing an
   AND/CMP operation based on arbitrary wildcard matching over
   the IPv6 source and destination addresses as outlined in
   <span>[<a class="xref" href="#Reed2016">Reed2016</a>]</span>. Note that in the
   case of using IPv6 address information for path-based
   forwarding, the step of removing the TE
   at the outgoing nSFF in <a class="xref" href="#fig-sfc-8">Figure 4</a> is realized by utilizing the provided
   (existing) IP header (which was used for the purpose of the
   path-based forwarding in <span>[<a class="xref" href="#Reed2016">Reed2016</a>]</span>) for the purpose of next-hop forwarding
   such as that of IP-based routing. As described in <a class="xref" href="#step8">Step 8</a> of the extended
   nSFF operations, this forwarding information is used as
   traffic encapsulation. With the forwarding information
   utilizing existing IPv6 information, IP headers are utilized
   as TE in this case.

   The next-hop nSFF (see <a class="xref" href="#fig-sfc-8">Figure 4</a>) will restore the IP header of the packet
   with the relevant IP information used to forward the SFC
   packet to SF2, or it will create suitable TE information to
   forward the information to another nSFF or boundary
   node. Forwarding operations at the intermediary forwarders,
   i.e., SDN switches, examine the pathID information through a
   flow-matching rule in which a specific switch-local output
   port is represented through the specific assigned bit
   position in the pathID. Upon a positive match in said rule,
   the packet is forwarded on said output port.<a class="pilcrow" href="#section-6.2.1-4">¶</a></p>
<p id="section-6.2.1-5">
   Alternatively, the solution in <span>[<a class="xref" href="#I-D.ietf-bier-multicast-http-response">BIER-MULTICAST</a>]</span> suggests using a so-called BIER
   (Binary Indexed Explicit Replication) underlay. Here, the
   nSFF would be realized at the ingress to the BIER underlay,
   injecting the SFC packet header (plus the Network Service
   Header (NSH)) with BIER-based traffic encapsulation into the
   BIER underlay with each of the forwarders in <a class="xref" href="#fig-sfc-8">Figure 4</a> being realized as a so-called
   Bit-Forwarding Router (BFR) <span>[<a class="xref" href="#RFC8279">RFC8279</a>]</span>.<a class="pilcrow" href="#section-6.2.1-5">¶</a></p>
<div id="transport">
<section id="section-6.2.1.1">
            <h5 id="name-transport-protocol-consider">
<a class="section-number selfRef" href="#section-6.2.1.1">6.2.1.1. </a><a class="section-name selfRef" href="#name-transport-protocol-consider">Transport Protocol Considerations</a>
            </h5>
<p id="section-6.2.1.1-1">
   Given that the proposed solution operates at the
   "named-transaction" level, particularly for HTTP
   transactions, forwarding between nSFFs and/or NRs
   <span class="bcp14">SHOULD</span> be implemented via a transport
   protocol between nSFFs and/or NRs in order to provide
   reliability, segmentation of large GFF packets, and flow
   control, with the GFF in <a class="xref" href="#fig-sfc-9">Figure 5</a> being the basic forwarding format for
   this.<a class="pilcrow" href="#section-6.2.1.1-1">¶</a></p>
<p id="section-6.2.1.1-2">
   Note that the nSFFs act as TCP proxies at ingress and
   egress, thus terminating incoming and initiating outgoing
   HTTP sessions to SFs.<a class="pilcrow" href="#section-6.2.1.1-2">¶</a></p>
<p id="section-6.2.1.1-3"><a class="xref" href="#fig-sfc-10">Figure 6</a> shows the packet format being
   used for the transmission of data, being adapted from the
   TCP header. Segmentation of large transactions into single
   transport protocol packets is realized through maintaining a
   "Sequence number". A "Checksum" is calculated over a single
   data packet with the ones-complement TCP checksum
   calculation being used. The "Window Size" field indicates
   the current maximum number of transport packets that are
   allowed in-flight by the egress nSFF. A data packet is sent
   without a "Data" field to indicate the end of the (e.g., HTTP)
   transaction.<a class="pilcrow" href="#section-6.2.1.1-3">¶</a></p>
<p id="section-6.2.1.1-4">
           Note that, in order to support future named transactions based on
           other application protocols, such as Constrained Application
           Protocol (CoAP), future versions of the transport protocol
           <span class="bcp14">MAY</span> introduce a "Type" field that indicates the type
           of application protocol being used between SF and nSFF with "Type"
           0x01 proposed for HTTP. This is being left for future study.<a class="pilcrow" href="#section-6.2.1.1-4">¶</a></p>
<span id="name-transport-protocol-data-pac"></span><div id="fig-sfc-10">
<figure id="figure-6">
              <div class="artwork art-text alignCenter" id="section-6.2.1.1-5.1">
<pre>    +----------------------------------------------+
    |         16 bits       |        16 bits       |
    +----------------------------------------------+
    |              Sequence number                 |
    +----------------------------------------------+
    |       Checksum        |      Window Size     |
    +----------------------------------------------+
    |                      ...                     |
    |                Data (Optional)               |
    +----------------------------------------------+</pre>
</div>
<figcaption><a class="selfRef" href="#figure-6">Figure 6</a>:
<a class="selfRef" href="#name-transport-protocol-data-pac">Transport Protocol Data Packet Format</a>
              </figcaption></figure>
</div>
<p id="section-6.2.1.1-6">
   Given the path-based forwarding being used between nSFFs,
   the transport protocol between nSFFs utilizes negative
   acknowledgements from the egress nSFF towards the ingress
   nSFF. The transport protocol negative Acknowledgment
   (NACK) packet carries the number
   of NACKs as well as the specific sequence numbers being
   indicated as lost in the "NACK number" field(s) as shown in
   <a class="xref" href="#fig-sfc-11">Figure 7</a>.<a class="pilcrow" href="#section-6.2.1.1-6">¶</a></p>
<span id="name-transport-protocol-nack-pac"></span><div id="fig-sfc-11">
<figure id="figure-7">
              <div class="artwork art-text alignCenter" id="section-6.2.1.1-7.1">
<pre>    +-----------------------+----------------------+
    |         16 bits       |        16 bits       |
    +----------------------------------------------+
    |    Number of NACKs    |                      +
    +----------------------------------------------+
    |                   NACK number                |
    +----------------------------------------------+
    +                ... NACK number               +
    +----------------------------------------------+</pre>
</div>
<figcaption><a class="selfRef" href="#figure-7">Figure 7</a>:
<a class="selfRef" href="#name-transport-protocol-nack-pac">Transport Protocol NACK Packet Format</a>
              </figcaption></figure>
</div>
<p id="section-6.2.1.1-8">
        If the indicated number of NACKs in a received NACK packet is
        nonzero, the ingress nSFF will retransmit all sequence numbers
        signaled in the packet while decreasing its congestion window size
        for future transmissions.<a class="pilcrow" href="#section-6.2.1.1-8">¶</a></p>
<p id="section-6.2.1.1-9">
        If the indicated number of NACKs in a received NACK packet is zero, it
        will indicate the current congestion window as being successfully (and
        completely) being transmitted, increasing the congestion window size
        if smaller than the advertised "Window Size" in <a class="xref" href="#fig-sfc-10">Figure 6</a>.<a class="pilcrow" href="#section-6.2.1.1-9">¶</a></p>
<p id="section-6.2.1.1-10">
        The maintenance of the congestion window is subject to realization at
        the ingress nSFF and left for further study in nSFF realizations.<a class="pilcrow" href="#section-6.2.1.1-10">¶</a></p>
</section>
</div>
</section>
</div>
<div id="registration">
<section id="section-6.2.2">
          <h4 id="name-sf-registration">
<a class="section-number selfRef" href="#section-6.2.2">6.2.2. </a><a class="section-name selfRef" href="#name-sf-registration">SF Registration</a>
          </h4>
<p id="section-6.2.2-1">
    As outlined in Steps <a class="xref" href="#step3">3</a> and <a class="xref" href="#step10">10</a> of <a class="xref" href="#steps">Section 5.6</a>,
    the nSFF needs to determine if the SF derived from the
    Name-Based Network Locator (nNLM) is locally reachable or
    whether the packet needs to be forwarded to a remote SFF. For
    this, a registration mechanism is provided for such local
    SF with the local nSFF. Two mechanisms can be used for
    this:<a class="pilcrow" href="#section-6.2.2-1">¶</a></p>
<ol class="normal" id="section-6.2.2-2" start="1" type="1">
            <li id="section-6.2.2-2.1" style="margin-left: 2.0em">
            SF-initiated: We assume that the SF registers its Fully Qualified
            Domain Name (FQDN) to the local nSFF. As local mechanisms, we
            foresee that either a Representational State Transfer (REST-based) interface over the link-local
            link or configuration of the nSFF (through configuration files or
            management consoles) can be utilized.  Such local registration
            events lead to the nSFF registering the given FQDN with the NR in
            combination with a system-unique nSFF identifier that is being
            used for path-computation purposes in the NR.  For the
            registration, the packet format in <a class="xref" href="#fig-sfc-12">Figure 8</a> is used (inserted as the payload in the GFF of
            <a class="xref" href="#fig-sfc-9">Figure 5</a> with the pathID
            towards the NR).<a class="pilcrow" href="#section-6.2.2-2.1">¶</a>
</li>
          </ol>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-6.2.2-3.1">
              <ul class="ulEmpty">
<li class="ulEmpty" id="section-6.2.2-3.1.1.1">
                  <ul class="ulEmpty">
<li class="ulEmpty" id="section-6.2.2-3.1.1.1.1.1">
                      <span id="name-registration-packet-format"></span><div id="fig-sfc-12">
<figure id="figure-8">
                        <div class="artwork art-text alignCenter" id="section-6.2.2-3.1.1.1.1.1.1.1">
<pre>+---------+------------------+----------------+
|         |                  |                |
|   R/D   |    hash(FQDN)    |    nSFF_ID     |
| (1 bit) |    (16 bits)     |    (8 bits)    |
+---------+------------------+----------------+</pre>
</div>
<figcaption><a class="selfRef" href="#figure-8">Figure 8</a>:
<a class="selfRef" href="#name-registration-packet-format">Registration Packet Format</a>
                        </figcaption></figure>
</div>
<ul>
<li id="section-6.2.2-3.1.1.1.1.1.2.1">
               R/D: 1-bit length (0 for Register, 1 for Deregister)<a class="pilcrow" href="#section-6.2.2-3.1.1.1.1.1.2.1">¶</a>
</li>
                        <li id="section-6.2.2-3.1.1.1.1.1.2.2">
        hash(FQDN): 16-bit length for a hash over the FQDN of the SF<a class="pilcrow" href="#section-6.2.2-3.1.1.1.1.1.2.2">¶</a>
</li>
                        <li id="section-6.2.2-3.1.1.1.1.1.2.3">
        nSFF_ID: 8-bit length for a system-unique identifier for the SFF related to the SF<a class="pilcrow" href="#section-6.2.2-3.1.1.1.1.1.2.3">¶</a>
</li>
                      </ul>
</li>
                  </ul>
</li>
                <li class="ulEmpty" id="section-6.2.2-3.1.1.2">
                  <ul class="ulEmpty">
<li class="ulEmpty" id="section-6.2.2-3.1.1.2.1.1">
We assume that the pathID towards the NR is known to the nSFF through configuration means.<a class="pilcrow" href="#section-6.2.2-3.1.1.2.1.1">¶</a>
</li>
                    <li class="ulEmpty" id="section-6.2.2-3.1.1.2.1.2">          
The NR maintains an internal table that associates the hash(FQDN), the nSFF_id
information, as well as the pathID information being used for communication
between nSFFs and NRs. The nSFF locally maintains a mapping of registered FQDNs
to IP addresses for the latter using link-local private IP addresses.<a class="pilcrow" href="#section-6.2.2-3.1.1.2.1.2">¶</a>
</li>
                  </ul>
</li>
              </ul>
</li>
          </ul>
<ol class="normal" id="section-6.2.2-4" start="2" type="1">
            <li id="section-6.2.2-4.1" style="margin-left: 2.0em">
     Orchestration-based: In this mechanism, we assume that SFC
     to be orchestrated and the chain to be provided through an
     orchestration template with FQDN information associated to
     a compute/storage resource that is being deployed by the
     orchestrator. We also assume knowledge at the orchestrator
     of the resource topology. Based on this, the orchestrator
     can now use the same REST-based protocol defined in option
     1 to instruct the NR to register the given FQDN, as
     provided in the template, at the nSFF it has identified as
     being the locally servicing nSFF, provided as the
     system-unique nSFF identifier.<a class="pilcrow" href="#section-6.2.2-4.1">¶</a>
</li>
          </ol>
</section>
</div>
<div id="localfwd">
<section id="section-6.2.3">
          <h4 id="name-local-sf-forwarding">
<a class="section-number selfRef" href="#section-6.2.3">6.2.3. </a><a class="section-name selfRef" href="#name-local-sf-forwarding">Local SF Forwarding</a>
          </h4>
<p id="section-6.2.3-1">
    There are two cases of local SF forwarding, namely, the SF
    sending an SFC packet to the local nSFF (incoming requests)
    or the nSFF sending a packet to the SF (outgoing requests)
    as part of Steps <a class="xref" href="#step3">3</a> and <a class="xref" href="#step10">10</a> in <a class="xref" href="#steps">Section 5.6</a>. In the following,
    we outline the operation for HTTP as an example-named
    transaction.<a class="pilcrow" href="#section-6.2.3-1">¶</a></p>
<p id="section-6.2.3-2">
            As shown in <a class="xref" href="#fig-sfc-8">Figure 4</a>, incoming HTTP requests from SFs are
            extracted by terminating the incoming TCP connection at their
            local nSFFs at the TCP level. The nSFF <span class="bcp14">MUST</span> maintain a mapping of
            open TCP sockets to HTTP requests (utilizing the URI of the
            request) for HTTP response association.<a class="pilcrow" href="#section-6.2.3-2">¶</a></p>
<p id="section-6.2.3-3">
     For outgoing HTTP requests, the nSFF utilizes the
     maintained mapping of locally registered FQDNs to
     link-local IP addresses (see <a class="xref" href="#registration">Section 6.2.2</a>, option
     1). Hence, upon receiving an SFC packet from a remote nSFF
     (in <a class="xref" href="#step9">Step 9</a> of <a class="xref" href="#steps">Section 5.6</a>), the nSFF determines the local
     existence of the SF through the registration mechanisms in
     <a class="xref" href="#registration">Section 6.2.2</a>. If said SF does exist locally, the HTTP
     (+NSH) packet, after stripping the TE, is sent to the
     local SF as <a class="xref" href="#step10">Step 10</a> in <a class="xref" href="#steps">Section 5.6</a> via a TCP-level
     connection. Outgoing nSFFs <span class="bcp14">SHOULD</span> keep TCP connections open
     to local SFs for improving SFC packet delivery in
     subsequent transactions.<a class="pilcrow" href="#section-6.2.3-3">¶</a></p>
</section>
</div>
<div id="httpresp">
<section id="section-6.2.4">
          <h4 id="name-handling-of-http-responses">
<a class="section-number selfRef" href="#section-6.2.4">6.2.4. </a><a class="section-name selfRef" href="#name-handling-of-http-responses">Handling of HTTP Responses</a>
          </h4>
<p id="section-6.2.4-1">
    When executing Steps <a class="xref" href="#step3">3</a> and <a class="xref" href="#step10">10</a> in <a class="xref" href="#steps">Section 5.6</a>, the SFC packet
    will be delivered to the locally registered next hop. As
    part of the HTTP protocol, responses to the HTTP request
    will need to be delivered on the return path to the
    originating nSFF (i.e., the previous hop). For this, the
    nSFF maintains a list of link-local connection information,
    e.g., sockets to the local SF and the pathID on which the
    request was received. Once receiving the response, nSFF
    consults the table to determine the pathID of the original
    request, forming a suitable GFF-based packet to be returned
    to the previous nSFF.<a class="pilcrow" href="#section-6.2.4-1">¶</a></p>
<p id="section-6.2.4-2">
            When receiving the HTTP response at the previous nSFF, the nSFF
            consults the table of (locally) open sockets to determine the
            suitable local SF connection, mapping the received HTTP response
            URI to the stored request URI. Utilizing the found socket, the
            HTTP response is forwarded to the locally registered SF.<a class="pilcrow" href="#section-6.2.4-2">¶</a></p>
</section>
</div>
<div id="remotefwd">
<section id="section-6.2.5">
          <h4 id="name-remote-sf-forwarding">
<a class="section-number selfRef" href="#section-6.2.5">6.2.5. </a><a class="section-name selfRef" href="#name-remote-sf-forwarding">Remote SF Forwarding</a>
          </h4>
<p id="section-6.2.5-1">
    In Steps <a class="xref" href="#step5">5</a>, <a class="xref" href="#step6">6</a>, <a class="xref" href="#step7">7</a>, and <a class="xref" href="#step8">8</a> of <a class="xref" href="#steps">Section 5.6</a>, an SFC
    packet is forwarded to a remote nSFF based on the nNLM
    information for the next hop of the nSFP. <a class="xref" href="#remotedisc">Section 6.2.5.1</a> handles the case of suitable
    forwarding information to the remote nSFF not existing,
    therefore consulting the NR to obtain suitable information.
    <a class="xref" href="#maintain">Section 6.2.5.2</a> describes the maintenance
    of forwarding information at the local nSFF.  <a class="xref" href="#update">Section 6.2.5.3</a> describes the update of stale forwarding
    information. Note that the forwarding described in <a class="xref" href="#nsfnr">Section 6.2.1</a> is used for the actual forwarding to the
    various nSFF components.  Ultimately, <a class="xref" href="#fwd">Section 6.2.5.4</a>
    describes the forwarding to the remote nSFF via the
    forwarder network.<a class="pilcrow" href="#section-6.2.5-1">¶</a></p>
<div id="remotedisc">
<section id="section-6.2.5.1">
            <h5 id="name-remote-sf-discovery">
<a class="section-number selfRef" href="#section-6.2.5.1">6.2.5.1. </a><a class="section-name selfRef" href="#name-remote-sf-discovery">Remote SF Discovery</a>
            </h5>
<p id="section-6.2.5.1-1">
     The nSFF communicates with the NR for two purposes: namely,
     the registration and discovery of FQDNs. The packet format
     for the former was shown in <a class="xref" href="#fig-sfc-12">Figure 8</a> in
     <a class="xref" href="#registration">Section 6.2.2</a>,
     while <a class="xref" href="#fig-sfc-13">Figure 9</a> outlines the packet format for the
     discovery request.<a class="pilcrow" href="#section-6.2.5.1-1">¶</a></p>
<span id="name-discovery-packet-format"></span><div id="fig-sfc-13">
<figure id="figure-9">
              <div class="artwork art-text alignCenter" id="section-6.2.5.1-2.1">
<pre>+--------------+-------------+ +--------+-----------------//--------+
|              |             | |        |                //         |
|   hash(FQDN) |  nSFF_ID    | | Length | pathID        //          |
|   (16 bits)  |  (8 bits)   | |(4 bits)|              //           |     
+--------------+-------------+ +--------+-------------//------------+
        Path Request                     Path Response</pre>
</div>
<figcaption><a class="selfRef" href="#figure-9">Figure 9</a>:
<a class="selfRef" href="#name-discovery-packet-format">Discovery Packet Format</a>
              </figcaption></figure>
</div>
<p id="section-6.2.5.1-3">
           For Path Request:<a class="pilcrow" href="#section-6.2.5.1-3">¶</a></p>
<ul>
<li id="section-6.2.5.1-4.1">
               hash(FQDN): 16-bit length for a hash over the FQDN of the SF<a class="pilcrow" href="#section-6.2.5.1-4.1">¶</a>
</li>
              <li id="section-6.2.5.1-4.2">
        nSFF_ID: 8-bit length for a system-unique identifier for the SFF related to the SF<a class="pilcrow" href="#section-6.2.5.1-4.2">¶</a>
</li>
            </ul>
<p id="section-6.2.5.1-5">
           For Path Response:<a class="pilcrow" href="#section-6.2.5.1-5">¶</a></p>
<ul>
<li id="section-6.2.5.1-6.1">
               Length: 4-bit length that defines the length of the pathID<a class="pilcrow" href="#section-6.2.5.1-6.1">¶</a>
</li>
              <li id="section-6.2.5.1-6.2">
        Path ID: Variable-length bit field derived from IPv6 source
        and destination address<a class="pilcrow" href="#section-6.2.5.1-6.2">¶</a>
</li>
            </ul>
<p id="section-6.2.5.1-7">
           A path to a specific FQDN is requested by sending a hash of the
           FQDN to the NR together with its nSFF_id, receiving as a response a
           pathID with a length identifier. The NR <span class="bcp14">SHOULD</span> maintain a table of
           discovery requests that map discovered (hash of) FQDN to the
           nSFF_id that requested it and the pathID that is being calculated
           as a result of the discovery request.<a class="pilcrow" href="#section-6.2.5.1-7">¶</a></p>
<p id="section-6.2.5.1-8">
            The discovery request for an FQDN that has not previously been
            served at the nSFF (or for an FQDN whose pathID information has
            been flushed as a result of the update operations in <a class="xref" href="#update">Section 6.2.5.3</a>) results in an initial latency
            incurred by this discovery through the NR, while any SFC packet
            sent over the same SFP in a subsequent transaction will utilize
            the nSFF-local mapping table. Such initial latency can be avoided
            by prepopulating the FQDN-pathID mapping proactively as part of
            the overall orchestration procedure, e.g., alongside the
            distribution of the nNLM information to the nSFF.<a class="pilcrow" href="#section-6.2.5.1-8">¶</a></p>
</section>
</div>
<div id="maintain">
<section id="section-6.2.5.2">
            <h5 id="name-maintaining-forwarding-info">
<a class="section-number selfRef" href="#section-6.2.5.2">6.2.5.2. </a><a class="section-name selfRef" href="#name-maintaining-forwarding-info">Maintaining Forwarding Information at Local nSFF</a>
            </h5>
<p id="section-6.2.5.2-1">
     Each nSFF <span class="bcp14">MUST</span> maintain an internal table
     that maps the (hash of the) FQDN information to a suitable
     pathID. As outlined in <a class="xref" href="#step7">Step 7</a> of <a class="xref" href="#steps">Section 5.6</a>, if a suitable entry does not exist for
     a given FQDN, the pathID information is requested with the
     operations in <a class="xref" href="#remotedisc">Section 6.2.5.1</a>
     and the suitable entry is locally created upon receiving a
     reply with the forwarding operation being executed as
     described in <a class="xref" href="#nsfnr">Section 6.2.1</a>.<a class="pilcrow" href="#section-6.2.5.2-1">¶</a></p>
<p id="section-6.2.5.2-2">
            If such an entry does exist (i.e., <a class="xref" href="#step6">Step 6</a> of <a class="xref" href="#steps">Section 5.6</a>), the pathID
            is locally retrieved and used for the forwarding operation in
            <a class="xref" href="#nsfnr">Section 6.2.1</a>.<a class="pilcrow" href="#section-6.2.5.2-2">¶</a></p>
</section>
</div>
<div id="update">
<section id="section-6.2.5.3">
            <h5 id="name-updating-forwarding-informa">
<a class="section-number selfRef" href="#section-6.2.5.3">6.2.5.3. </a><a class="section-name selfRef" href="#name-updating-forwarding-informa">Updating Forwarding Information at nSFF</a>
            </h5>
<p id="section-6.2.5.3-1">
         The forwarding information maintained at each nSFF (see
         <a class="xref" href="#maintain">Section 6.2.5.2</a>) might need to be updated for three reasons:<a class="pilcrow" href="#section-6.2.5.3-1">¶</a></p>
<ol class="normal" id="section-6.2.5.3-2" start="1" type="1">
              <li id="section-6.2.5.3-2.1" style="margin-left: 2.0em">
   An existing SF is no longer reachable: In this case,
   the nSFF with which the SF is locally registered
   deregisters the SF explicitly at the NR by sending
   the packet in <a class="xref" href="#fig-sfc-10">Figure 6</a> with the hashed FQDN and the R/D
   bit set to 1 (for deregister).<a class="pilcrow" href="#section-6.2.5.3-2.1">¶</a>
</li>
              <li id="section-6.2.5.3-2.2" style="margin-left: 2.0em">
  Another SF instance has become reachable in the
  network (and, therefore, might provide a better
  alternative to the existing SF): In this case, the NR
  has received another packet with a format defined in
  <a class="xref" href="#fig-sfc-11">Figure 7</a> but a different nSFF_id value.<a class="pilcrow" href="#section-6.2.5.3-2.2">¶</a>
</li>
              <li id="section-6.2.5.3-2.3" style="margin-left: 2.0em">
   Links along paths might no longer be reachable: The
   NR might use a suitable southbound interface to
   transport networks to detect link failures, which it
   associates to the appropriate pathID bit position.<a class="pilcrow" href="#section-6.2.5.3-2.3">¶</a>
</li>
            </ol>
<p id="section-6.2.5.3-3">
            For this purpose, the packet format in <a class="xref" href="#fig-sfc-14">Figure 10</a> is sent from the
            NR to all affected nSFFs, using the generic format in <a class="xref" href="#fig-sfc-9">Figure 5</a>.<a class="pilcrow" href="#section-6.2.5.3-3">¶</a></p>
<span id="name-path-update-format"></span><div id="fig-sfc-14">
<figure id="figure-10">
              <div class="artwork art-text alignCenter" id="section-6.2.5.3-4.1">
<pre>+---------+-----------------+--------------//----+
|         |                 |             //     |
|   Type  |     #IDs        |  IDs       //      |
| (1 bit) |    (8 bits)     |           //       |
+---------+-----------------+----------//--------+</pre>
</div>
<figcaption><a class="selfRef" href="#figure-10">Figure 10</a>:
<a class="selfRef" href="#name-path-update-format">Path Update Format</a>
              </figcaption></figure>
</div>
<ul>
<li id="section-6.2.5.3-5.1">
               Type: 1-bit length (0 for Nsff ID, 1 for Link ID)<a class="pilcrow" href="#section-6.2.5.3-5.1">¶</a>
</li>
              <li id="section-6.2.5.3-5.2">
        #IDs: 8-bit length for number of IDs in the list<a class="pilcrow" href="#section-6.2.5.3-5.2">¶</a>
</li>
              <li id="section-6.2.5.3-5.3">
   IDs: List of IDs (Nsff ID or Link ID)<a class="pilcrow" href="#section-6.2.5.3-5.3">¶</a>
</li>
            </ul>
<p id="section-6.2.5.3-6">
 The pathID to the affected nSFFs is computed as the
 binary OR over all pathIDs to those nSFF_ids affected
 where the pathID information to the affected nSFF_id
 values is determined from the NR-local table
 maintained in the registration/deregistration
 operation of <a class="xref" href="#registration">Section 6.2.2</a>.<a class="pilcrow" href="#section-6.2.5.3-6">¶</a></p>
<p id="section-6.2.5.3-7">
            The pathID may include the type of information being updated
            (e.g., node identifiers of leaf nodes or link identifiers for
            removed links). The node identifier itself may be a special
            identifier to signal "ALL NODES" as being affected.  The node
            identifier may signal changes to the network that are substantial
            (e.g., parallel link failures).  The node identifier may trigger
            (e.g., recommend) purging of the entire path table (e.g., rather
            than the selective removal of a few nodes only).<a class="pilcrow" href="#section-6.2.5.3-7">¶</a></p>
<p id="section-6.2.5.3-8">
           It will include the information according to the type.  The
           included information may also be related to the type and length
           information for the number of identifiers being provided.<a class="pilcrow" href="#section-6.2.5.3-8">¶</a></p>
<p id="section-6.2.5.3-9">
            In cases 1 and 2, the Type bit is set to 1 (type nSFF_id) and the
            affected nSFFs are determined by those nSFFs that have previously
            sent SF discovery requests, utilizing the optional table mapping
            previously registered FQDNs to nSFF_id values. If no table mapping
            the (hash of) FQDN to nSFF_id is maintained, the update is sent to
            all nSFFs.  Upon receiving the path update at the affected nSFF,
            all appropriate nSFF-local mapping entries to pathIDs for the
            hash(FQDN) identifiers provided will be removed, leading to a new
            NR discovery request at the next remote nSFF forwarding to the
            appropriate FQDN.<a class="pilcrow" href="#section-6.2.5.3-9">¶</a></p>
<p id="section-6.2.5.3-10">
            In case 3, the Type bit is set to 0 (type linkID) and the affected
            nSFFs are determined by those nSFFs whose discovery requests have
            previously resulted in pathIDs that include the affected link,
            utilizing the optional table mapping previously registered FQDNs
            to pathID values (see <a class="xref" href="#remotedisc">Section 6.2.5.1</a>). Upon receiving the node
            identifier information in the path update, the affected nSFF will
            check its internal table that maps FQDNs to pathIDs to determine
            those pathIDs affected by the link problems and remove path
            information that includes the received node identifier(s). For
            this, the pathID entries of said table are checked against the
            linkID values provided in the ID entry of the path update through
            a binary AND/CMP operation to check the inclusion of the link in
            the pathIDs to the FQDNs. If any pathID is affected, the
            FQDN-pathID entry is removed, leading to a new NR discovery
            request at the next remote nSFF forwarding to the appropriate
            FQDN.<a class="pilcrow" href="#section-6.2.5.3-10">¶</a></p>
</section>
</div>
<div id="fwd">
<section id="section-6.2.5.4">
            <h5 id="name-forwarding-to-remote-nsff">
<a class="section-number selfRef" href="#section-6.2.5.4">6.2.5.4. </a><a class="section-name selfRef" href="#name-forwarding-to-remote-nsff">Forwarding to Remote nSFF</a>
            </h5>
<p id="section-6.2.5.4-1">
     Once Steps <a class="xref" href="#step5">5</a>, <a class="xref" href="#step6">6</a>, and <a class="xref" href="#step7">7</a> in <a class="xref" href="#steps">Section 5.6</a> are being executed,
     <a class="xref" href="#step8">Step 8</a> finally sends the SFC packet to the remote nSFF,
     utilizing the pathID returned in the discovery request
     (<a class="xref" href="#remotedisc">Section 6.2.5.1</a>) or retrieved from the local pathID
     mapping table. The SFC packet is placed in the payload of
     the generic forwarding format in <a class="xref" href="#fig-sfc-9">Figure 5</a> together with
     the pathID, and the nSFF eventually executes the forwarding
     operations in <a class="xref" href="#nsfnr">Section 6.2.1</a>.<a class="pilcrow" href="#section-6.2.5.4-1">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="IANA">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-7-1">This document has no IANA actions.<a class="pilcrow" href="#section-7-1">¶</a></p>
</section>
</div>
<div id="Security">
<section id="section-8">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-8-1">Sections <a class="xref" href="#nop">5</a> and <a class="xref" href="#nsfffwd">6</a> describe the forwarding of SFC
      packets between named SFs based on URIs exchanged in HTTP messages.
      Security is needed to protect the communications between originating
      node and Ssff, between one Nsff and the next Nsff, and between Nsff and
      destination. TLS is sufficient for this and <span class="bcp14">SHOULD</span> be used. The TLS
      handshake allows to determine the FQDN, which, in turn, is enough for the
      service routing decision. Supporting TLS also allows the possibility of
      HTTPS-based transactions.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2"> It should be noted (per <span>[<a class="xref" href="#RFC3986">RFC3986</a>]</span>) that what a URI resolves to is not
necessarily stable.  This can allow flexibility in deployment, as described in
this document, but may also result in unexpected behavior and could provide an
attack vector as the resolution of a URI could be "hijacked" resulting in
packets being steered to the wrong place.  This could be particularly
important if the SFC is intended to send packets for processing at security
functions.  Such hijacking is a new attack surface introduced by using a
separate NR.<a class="pilcrow" href="#section-8-2">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span><span class="refAuthor">, Fielding, R.</span><span class="refAuthor">, and L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dt id="RFC7665">[RFC7665]</dt>
        <dd>
<span class="refAuthor">Halpern, J., Ed.</span><span class="refAuthor"> and C. Pignataro, Ed.</span>, <span class="refTitle">"Service Function Chaining (SFC) Architecture"</span>, <span class="seriesInfo">RFC 7665</span>, <span class="seriesInfo">DOI 10.17487/RFC7665</span>, <time datetime="2015-10">October 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7665">https://www.rfc-editor.org/info/rfc7665</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dt id="RFC8279">[RFC8279]</dt>
        <dd>
<span class="refAuthor">Wijnands, IJ., Ed.</span><span class="refAuthor">, Rosen, E., Ed.</span><span class="refAuthor">, Dolganow, A.</span><span class="refAuthor">, Przygienda, T.</span><span class="refAuthor">, and S. Aldrin</span>, <span class="refTitle">"Multicast Using Bit Index Explicit Replication (BIER)"</span>, <span class="seriesInfo">RFC 8279</span>, <span class="seriesInfo">DOI 10.17487/RFC8279</span>, <time datetime="2017-11">November 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8279">https://www.rfc-editor.org/info/rfc8279</a>&gt;</span>. </dd>
<dt id="RFC8300">[RFC8300]</dt>
      <dd>
<span class="refAuthor">Quinn, P., Ed.</span><span class="refAuthor">, Elzur, U., Ed.</span><span class="refAuthor">, and C. Pignataro, Ed.</span>, <span class="refTitle">"Network Service Header (NSH)"</span>, <span class="seriesInfo">RFC 8300</span>, <span class="seriesInfo">DOI 10.17487/RFC8300</span>, <time datetime="2018-01">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8300">https://www.rfc-editor.org/info/rfc8300</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-bier-multicast-http-response">[BIER-MULTICAST]</dt>
        <dd>
<span class="refAuthor">Trossen, D.</span><span class="refAuthor">, Rahman, A.</span><span class="refAuthor">, Wang, C.</span><span class="refAuthor">, and T. Eckert</span>, <span class="refTitle">"Applicability of BIER Multicast Overlay for Adaptive Streaming Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bier-multicast-http-response-01</span>, <time datetime="2019-06-28">28 June 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-bier-multicast-http-response-01">https://tools.ietf.org/html/draft-ietf-bier-multicast-http-response-01</a>&gt;</span>. </dd>
<dt id="Reed2016">[Reed2016]</dt>
        <dd>
<span class="refAuthor">Reed, M.J.</span><span class="refAuthor">, Al-Naday, M.</span><span class="refAuthor">, Thomas, N.</span><span class="refAuthor">, Trossen, D.</span><span class="refAuthor">, Petropoulos, G.</span><span class="refAuthor">, and S. Spirou</span>, <span class="refTitle">"Stateless multicast switching in software defined networks"</span>, <span class="refContent">IEEE ICC 2016</span>, <span class="seriesInfo">DOI 10.1109/ICC.2016.7511036</span>, <time datetime="2016-05">May 2016</time>, <span>&lt;<a href="https://ieeexplore.ieee.org/document/7511036">https://ieeexplore.ieee.org/document/7511036</a>&gt;</span>. </dd>
<dt id="Schlinker2017">[Schlinker2017]</dt>
        <dd>
<span class="refAuthor">Schlinker, B.</span><span class="refAuthor">, Kim, H.</span><span class="refAuthor">, Cui, T.</span><span class="refAuthor">, Katz-Bassett, E.</span><span class="refAuthor">, Madhyastha, H.</span><span class="refAuthor">, Cunha, I.</span><span class="refAuthor">, Quinn, J.</span><span class="refAuthor">, Hassan, S.</span><span class="refAuthor">, Lapukhov, P.</span><span class="refAuthor">, and H. Zeng</span>, <span class="refTitle">"Engineering Egress with Edge Fabric, Steering Oceans of Content to the World"</span>, <span class="refContent">ACM SIGCOMM 2017</span>, <time datetime="2017-08">August 2017</time>, <span>&lt;<a href="https://research.fb.com/wp-content/uploads/2017/08/sigcomm17-final177-2billion.pdf">https://research.fb.com/wp-content/uploads/2017/08/sigcomm17-final177-2billion.pdf</a>&gt;</span>. </dd>
<dt id="SDO-3GPP-SBA">[SDO-3GPP-SBA]</dt>
        <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"Technical Realization of Service Based Architecture"</span>, <span class="seriesInfo">3GPP TS 29.500 V15.5.0</span>, <time datetime="2019-09">September 2019</time>, <span>&lt;<a href="https://www.3gpp.org/ftp/Specs/html-info/29500.htm">https://www.3gpp.org/ftp/Specs/html-info/29500.htm</a>&gt;</span>. </dd>
<dt id="SDO-3GPP-SBA-ENHANCEMENT">[SDO-3GPP-SBA-ENHANCEMENT]</dt>
      <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"New SID for Enhancements to the Service-Based 5G System Architecture"</span>, <span class="seriesInfo">3GPP S2-182904</span>, <time datetime="2018-02">February 2018</time>, <span>&lt;<a href="https://www.3gpp.org/ftp/tsg_sa/WG2_Arch/TSGS2_126_Montreal/Docs/S2-182904.zip">https://www.3gpp.org/ftp/tsg_sa/WG2_Arch/TSGS2_126_Montreal/Docs/S2-182904.zip</a>&gt;</span>. </dd>
</dl>
</section>
</section>
<div id="Ack">
<section id="section-appendix.a">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="section-appendix.a-1">
    The authors would like to thank Dirk von Hugo and Andrew Malis for
    their reviews and valuable comments.  We would also like to thank
    Joel Halpern, the chair of the SFC WG, and Adrian Farrel for
    guiding us through the Independent Submission Editor (ISE)
    path.<a class="pilcrow" href="#section-appendix.a-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.b">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Dirk Trossen</span></div>
<div class="left" dir="auto"><span class="org">InterDigital Europe, Ltd</span></div>
<div class="left" dir="auto"><span class="street-address">64 Great Eastern Street, 1st Floor</span></div>
<div class="left" dir="auto"><span class="locality">London</span></div>
<div class="left" dir="auto"><span class="postal-code">EC2A 3QR</span></div>
<div class="left" dir="auto"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:Dirk.Trossen@InterDigital.com">Dirk.Trossen@InterDigital.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Debashish Purkayastha</span></div>
<div class="left" dir="auto"><span class="org">InterDigital Communications, LLC</span></div>
<div class="left" dir="auto"><span class="street-address">1001 E Hector St</span></div>
<div class="left" dir="auto">
<span class="locality">Conshohocken</span>, <span class="region">PA</span> </div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:Debashish.Purkayastha@InterDigital.com">Debashish.Purkayastha@InterDigital.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Akbar Rahman</span></div>
<div class="left" dir="auto"><span class="org">InterDigital Communications, LLC</span></div>
<div class="left" dir="auto"><span class="street-address">1000 Sherbrooke Street West</span></div>
<div class="left" dir="auto">
<span class="locality">Montreal</span>  </div>
<div class="left" dir="auto"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:Akbar.Rahman@InterDigital.com">Akbar.Rahman@InterDigital.com</a>
</div>
</address>
</section>
</div>
<script>var toc = document.getElementById("toc");
var tocToggle = toc.querySelector("h2");
var tocNav = toc.querySelector("nav");

// mobile menu toggle
tocToggle.onclick = function(event) {
    if (window.innerWidth < 1024) {
 var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
 if (tocNavDisplay == "none") {
     tocNav.style.display = "block";
 } else {
     tocNav.style.display = "none";
 }
    }
}

// toc anchor scroll to anchor
tocNav.addEventListener("click", function (event) {
    event.preventDefault();
    if (event.target.nodeName == 'A') {
 if (window.innerWidth < 1024) {
     tocNav.style.display = "none";
 }
 var href = event.target.getAttribute("href");
 var anchorId = href.substr(1);
 var anchor =  document.getElementById(anchorId);
 anchor.scrollIntoView(true);
 window.history.pushState("","",href);
    }
});

// switch toc mode when window resized
window.onresize = function () {
    if (window.innerWidth < 1024) {
 tocNav.style.display = "none";
    } else {
 tocNav.style.display = "block";
    }
}
</script>


</body></html>