<html><head></head><body><pre>Internet Engineering Task Force (IETF)                         A. Newton
Request for Comments: 7480                                          ARIN
Category: Standards Track                                    B. Ellacott
ISSN: 2070-1721                                                    APNIC
                                                                 N. Kong
                                                                   CNNIC
                                                              March 2015


       <span class="h1">HTTP Usage in the Registration Data Access Protocol (RDAP)</span>

Abstract

   This document is one of a collection that together describes the
   Registration Data Access Protocol (RDAP).  It describes how RDAP is
   transported using the Hypertext Transfer Protocol (HTTP).  RDAP is a
   successor protocol to the very old WHOIS protocol.  The purpose of
   this document is to clarify the use of standard HTTP mechanisms for
   this application.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc5741#section-2">SectionÂ 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7480">http://www.rfc-editor.org/info/rfc7480</a>.

Copyright Notice

   Copyright (c) 2015 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



<span class="grey">Newton, et al.               Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  Design Intents  . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-4">4</a>.  Queries . . . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-4.1">4.1</a>.  HTTP Methods  . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-4.2">4.2</a>.  Accept Header . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-4.3">4.3</a>.  Query Parameters  . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-5">5</a>.  Types of HTTP Response  . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-5.1">5.1</a>.  Positive Answers  . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-5.2">5.2</a>.  Redirects . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
     <a href="#section-5.3">5.3</a>.  Negative Answers  . . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-5.4">5.4</a>.  Malformed Queries . . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-5.5">5.5</a>.  Rate Limits . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-5.6">5.6</a>.  Cross-Origin Resource Sharing (CORS)  . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-6">6</a>.  Extensibility . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-7">7</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
   <a href="#section-8">8</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
     <a href="#section-8.1">8.1</a>.  RDAP Extensions Registry  . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
   <a href="#section-9">9</a>.  Internationalization Considerations . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-9.1">9.1</a>.  URIs and IRIs . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-9.2">9.2</a>.  Language Identifiers in Queries and Responses . . . . . .  <a href="#page-10">10</a>
     <a href="#section-9.3">9.3</a>.  Language Identifiers in HTTP Headers  . . . . . . . . . .  <a href="#page-10">10</a>
   <a href="#section-10">10</a>. References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-10.1">10.1</a>.  Normative References . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-10.2">10.2</a>.  Informative References . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
   <a href="#appendix-A">Appendix A</a>.  Protocol Example . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
   <a href="#appendix-B">Appendix B</a>.  Cache Busting  . . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
   <a href="#appendix-C">Appendix C</a>.  Bootstrapping and Redirection  . . . . . . . . . . .  <a href="#page-14">14</a>
   Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>



















<span class="grey">Newton, et al.               Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   This document describes the usage of the Hypertext Transfer Protocol
   (HTTP) [<a href="./rfc7230" title='"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"'>RFC7230</a>] for the Registration Data Access Protocol (RDAP).
   The goal of this document is to tie together usage patterns of HTTP
   into a common profile applicable to the various types of directory
   services serving registration data using practices informed by the
   Representational State Transfer (REST) [<a href="#ref-REST" title='"Principled Design of the Modern Web Architecture"'>REST</a>] architectural style.
   By giving the various directory services common behavior, a single
   client is better able to retrieve data from directory services
   adhering to this behavior.

   Registration data expected to be presented by this service is
   Internet resource registration data -- registration of domain names
   and Internet number resources.  This data is typically provided by
   WHOIS [<a href="./rfc3912" title='"WHOIS Protocol Specification"'>RFC3912</a>] services, but the WHOIS protocol is insufficient to
   modern registration data service requirements.  A replacement
   protocol is expected to retain the simple transactional nature of
   WHOIS, while providing a specification for queries and responses,
   redirection to authoritative sources, support for Internationalized
   Domain Names (IDNs) [<a href="./rfc5890" title='"Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework"'>RFC5890</a>], and support for localized registration
   data such as addresses and organization or person names.

   In designing these common usage patterns, this document introduces
   considerations for a simple use of HTTP.  Where complexity may
   reside, it is the goal of this document to place it upon the server
   and to keep the client as simple as possible.  A client
   implementation should be possible using common operating system
   scripting tools (e.g., bash and wget).

   This is the basic usage pattern for this protocol:

   1.  A client determines an appropriate server to query along with the
       appropriate base Uniform Resource Locator (URL) to use in such
       queries.  [<a href="./rfc7484" title='"Finding the Authoritative Registration Data (RDAP) Service"'>RFC7484</a>] describes one method to determine the server
       and the base URL.  See <a href="#appendix-C">Appendix C</a> for more information.

   2.  A client issues an HTTP (or HTTPS) query using GET [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>].  As
       an example, a query URL for the network registration 192.0.2.0
       might be

          http://example.com/rdap/ip/192.0.2.0

       [<a id="ref-RFC7482">RFC7482</a>] details the various queries used in RDAP.







<span class="grey">Newton, et al.               Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   3.  If the receiving server has the information for the query, it
       examines the Accept header field of the query and returns a 200
       response with a response entity appropriate for the requested
       format.  [<a href="./rfc7483" title='"JSON Responses for the Registration Data Access Protocol (RDAP)"'>RFC7483</a>] details a response in JavaScript Object
       Notation (JSON).

   4.  If the receiving server does not have the information for the
       query but does have knowledge of where the information can be
       found, it will return a redirection response (3xx) with the
       Location header field containing an HTTP(S) URL pointing to the
       information or another server known to have knowledge of the
       location of the information.  The client is expected to requery
       using that HTTP URL.

   5.  If the receiving server does not have the information being
       requested and does not have knowledge of where the information
       can be found, it returns a 404 response.

   6.  If the receiving server will not answer a request for policy
       reasons, it will return an error response (4xx) indicating the
       reason for giving no answer.

   It is not the intent of this document to redefine the meaning and
   semantics of HTTP.  The purpose of this document is to clarify the
   use of standard HTTP mechanisms for this application.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   As is noted in "Security and Stability Advisory Committee (SSAC)
   Report on WHOIS Terminology and Structure" [<a href="#ref-SAC-051" title='"SSAC Report on Domain Name WHOIS Terminology and Structure"'>SAC-051</a>], the term
   "WHOIS" is overloaded, often referring to a protocol, a service, and
   data.  In accordance with [<a href="#ref-SAC-051" title='"SSAC Report on Domain Name WHOIS Terminology and Structure"'>SAC-051</a>], this document describes the base
   behavior for an RDAP.  [<a href="#ref-SAC-051" title='"SSAC Report on Domain Name WHOIS Terminology and Structure"'>SAC-051</a>] describes a protocol profile of RDAP
   for Domain Name Registries (DNRs), the Domain Name Registration Data
   Access Protocol (DNRD-AP).

   In this document, an RDAP client is an HTTP user agent performing an
   RDAP query, and an RDAP server is an HTTP server providing an RDAP
   response.  RDAP query and response formats are described in [<a href="./rfc7482" title='"Registration Data Access Protocol (RDAP) Query Format"'>RFC7482</a>]
   and [<a href="./rfc7483" title='"JSON Responses for the Registration Data Access Protocol (RDAP)"'>RFC7483</a>], while this document describes how RDAP clients and
   servers use HTTP to exchange queries and responses.  [<a href="./rfc7481" title='"Security Services for the Registration Data Access Protocol (RDAP)"'>RFC7481</a>]
   describes security considerations for RDAP.





<span class="grey">Newton, et al.               Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Design%20Intents"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Design Intents</span>

   There are a few design criteria this document attempts to meet.

   First, each query is meant to require only one path of execution to
   obtain an answer.  A response may contain an answer, no answer, or a
   redirect, and clients are not expected to fork multiple paths of
   execution to make a query.

   Second, the semantics of the request/response allow for future and/or
   non-standard response formats.  In this document, only a JSON
   [<a href="./rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>] response media type is noted, with the response contents to
   be described separately (see [<a href="./rfc7483" title='"JSON Responses for the Registration Data Access Protocol (RDAP)"'>RFC7483</a>]).  This document only
   describes how RDAP is transported using HTTP with this format.

   Third, this protocol is intended to be able to make use of the range
   of mechanisms available for use with HTTP.  HTTP offers a number of
   mechanisms not described further in this document.  Operators are
   able to make use of these mechanisms according to their local policy,
   including cache control, authorization, compression, and redirection.
   HTTP also benefits from widespread investment in scalability,
   reliability, and performance, as well as widespread programmer
   understanding of client behaviors for web services styled after REST
   [<a href="#ref-REST" title='"Principled Design of the Modern Web Architecture"'>REST</a>], reducing the cost to deploy Registration Data Directory
   Services and clients.  This protocol is forward compatible with HTTP
   2.0.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Queries"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Queries</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20HTTP%20Methods"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  HTTP Methods</span>

   Clients use the GET method to retrieve a response body and use the
   HEAD method to determine existence of data on the server.  Clients
   SHOULD use either the HTTP GET or HEAD methods (see [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>]).
   Servers are under no obligation to support other HTTP methods;
   therefore, clients using other methods will likely not interoperate
   properly.

   Clients and servers MUST support HTTPS to support security services.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.2.%20%20Accept%20Header"></a><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Accept Header</span>

   To indicate to servers that an RDAP response is desired, clients
   include an Accept header field with an RDAP-specific JSON media type,
   the generic JSON media type, or both.  Servers receiving an RDAP
   request return an entity with a Content-Type header containing the
   RDAP-specific JSON media type.




<span class="grey">Newton, et al.               Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   This specification does not define the responses a server returns to
   a request with any other media types in the Accept header field, or
   with no Accept header field.  One possibility would be to return a
   response in a media type suitable for rendering in a web browser.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.3.%20%20Query%20Parameters"></a><a class="selflink" href="#section-4.3" id="section-4.3">4.3</a>.  Query Parameters</span>

   Servers MUST ignore unknown query parameters.  Use of unknown query
   parameters for cache busting is described in <a href="#appendix-B">Appendix B</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Types%20of%20HTTP%20Response"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Types of HTTP Response</span>

   This section describes the various types of responses a server may
   send to a client.  While no standard HTTP response code is forbidden
   in usage, this section defines the minimal set of response codes in
   common use by servers that a client will need to understand.  While
   some clients may be constructed with simple tooling that does not
   account for all of these response codes, a more robust client
   accounting for these codes will likely provide a better user
   experience.  It is expected that usage of response codes and types
   for this application not defined here will be described in subsequent
   documents.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20Positive%20Answers"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  Positive Answers</span>

   If a server has the information requested by the client and wishes to
   respond to the client with the information according to its policies,
   it returns that answer in the body of a 200 (OK) response (see
   [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>]).

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20Redirects"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  Redirects</span>

   If a server wishes to inform a client that the answer to a given
   query can be found elsewhere, it returns either a 301 (Moved
   Permanently) response code to indicate a permanent move or a 302
   (Found), 303 (See Other), or 307 (Temporary Redirect) response code
   to indicate a non-permanent redirection, and it includes an HTTP(S)
   URL in the Location header field (see [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>]).  The client is
   expected to issue a subsequent request to satisfy the original query
   using the given URL without any processing of the URL.  In other
   words, the server is to hand back a complete URL, and the client
   should not have to transform the URL to follow it.  Servers are under
   no obligation to return a URL conformant to [<a href="./rfc7482" title='"Registration Data Access Protocol (RDAP) Query Format"'>RFC7482</a>].

   For this application, such an example of a permanent move might be a
   Top-Level Domain (TLD) operator informing a client the information





<span class="grey">Newton, et al.               Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   being sought can be found with another TLD operator (i.e., a query
   for the domain bar in foo.example is found at
   http://foo.example/domain/bar).

   For example, if the client uses

      http://serv1.example.com/weirds/domain/example.com

   the server redirecting to

      https://serv2.example.net/weirds2/

   would set the Location: field to the value

      https://serv2.example.net/weirds2/domain/example.com

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.3.%20%20Negative%20Answers"></a><a class="selflink" href="#section-5.3" id="section-5.3">5.3</a>.  Negative Answers</span>

   If a server wishes to respond that it has an empty result set (that
   is, no data appropriately satisfying the query), it returns a 404
   (Not Found) response code.  Optionally, it MAY include additional
   information regarding the negative answer in the HTTP entity body.

   If a server wishes to inform the client that information about the
   query is available, but cannot include the information in the
   response to the client for policy reasons, the server MUST respond
   with an appropriate response code out of HTTP's 4xx range.  A client
   MAY retry the query if that is appropriate for the respective
   response code.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.4.%20%20Malformed%20Queries"></a><a class="selflink" href="#section-5.4" id="section-5.4">5.4</a>.  Malformed Queries</span>

   If a server receives a query that it cannot interpret as an RDAP
   query, it returns a 400 (Bad Request) response code.  Optionally, it
   MAY include additional information regarding this negative answer in
   the HTTP entity body.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.5.%20%20Rate%20Limits"></a><a class="selflink" href="#section-5.5" id="section-5.5">5.5</a>.  Rate Limits</span>

   Some servers apply rate limits to deter address scraping and other
   abuses.  When a server declines to answer a query due to rate limits,
   it returns a 429 (Too Many Requests) response code as described in
   [<a href="./rfc6585" title='"Additional HTTP Status Codes"'>RFC6585</a>].  A client that receives a 429 response SHOULD decrease its
   query rate and honor the Retry-After header field if one is present.
   Servers may place stricter limits upon clients that do not honor the
   Retry-After header.  Optionally, the server MAY include additional
   information regarding the rate limiting in the HTTP entity body.




<span class="grey">Newton, et al.               Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   Note that this is not a defense against denial-of-service (DoS)
   attacks, since a malicious client could ignore the code and continue
   to send queries at a high rate.  A server might use another response
   code if it did not wish to reveal to a client that rate limiting is
   the reason for the denial of a reply.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.6.%20%20Cross-Origin%20Resource%20Sharing%20%28CORS%29"></a><a class="selflink" href="#section-5.6" id="section-5.6">5.6</a>.  Cross-Origin Resource Sharing (CORS)</span>

   When responding to queries, it is RECOMMENDED that servers use the
   Access-Control-Allow-Origin header field, as specified by
   [<a href="#ref-W3C.REC-cors-20140116">W3C.REC-cors-20140116</a>].  A value of "*" is suitable when RDAP is
   used for public resources.

   This header (often called the CORS header) helps in-browser web
   applications by lifting the "same-origin" restriction (i.e., a
   browser may load RDAP client code from one web server but query
   others for RDAP data).

   By default, browsers do not send cookies when cross origin requests
   are allowed.  Setting the Access-Control-Allow-Credentials header
   field to "true" will send cookies.  Use of the
   Access-Control-Allow-Credentials header field is NOT RECOMMENDED.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Extensibility"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Extensibility</span>

   For extensibility purposes, this document defines an IANA registry
   for prefixes used in JSON [<a href="./rfc7159" title='"The JavaScript Object Notation (JSON) Data Interchange Format"'>RFC7159</a>] data serialization and URI path
   segments (see <a href="#section-8">Section 8</a>).

   Prefixes and identifiers SHOULD only consist of the alphabetic US-
   ASCII characters A through Z in both uppercase and lowercase, the
   numerical digits 0 through 9, and the underscore character, and they
   SHOULD NOT begin with an underscore character, numerical digit, or
   the characters "xml".  The following describes the production of JSON
   names in ABNF [<a href="./rfc5234" title='"Augmented BNF for Syntax Specifications: ABNF"'>RFC5234</a>].

     name = ALPHA *( ALPHA / DIGIT / "_" )

                       Figure 1: ABNF for JSON Names

   This restriction is a union of the Ruby programming language
   identifier syntax and the XML element name syntax and has two
   purposes.  First, client implementers using modern programming
   languages such as Ruby or Java can use libraries that automatically
   promote JSON names to first-order object attributes or members.
   Second, a clean mapping between JSON and XML is easy to accomplish
   using these rules.




<span class="grey">Newton, et al.               Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  Security Considerations</span>

   This document does not pose strong security requirements to the RDAP
   protocol.  However, it does not restrict against the use of security
   mechanisms offered by the HTTP protocol.  It does require that RDAP
   clients and servers MUST support HTTPS.

   This document makes recommendations for server implementations
   against DoS (<a href="#section-5.5">Section 5.5</a>) and interoperability with existing security
   mechanisms in HTTP clients (<a href="#section-5.6">Section 5.6</a>).

   Additional security considerations to the RDAP protocol are covered
   in [<a href="./rfc7481" title='"Security Services for the Registration Data Access Protocol (RDAP)"'>RFC7481</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  IANA Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.1.%20%20RDAP%20Extensions%20Registry"></a><a class="selflink" href="#section-8.1" id="section-8.1">8.1</a>.  RDAP Extensions Registry</span>

   IANA has created a new category in the protocol registries labeled
   "Registration Data Access Protocol (RDAP)", and within that category,
   has established a URL-referenceable, stand-alone registry labeled
   "RDAP Extensions".  The purpose of this registry is to ensure
   uniqueness of extension identifiers.  The extension identifier is
   used as a prefix in JSON names and as a prefix of path segments in
   RDAP URLs.

   The production rule for these identifiers is specified in <a href="#section-6">Section 6</a>.

   In accordance with [<a href="./rfc5226" title="">RFC5226</a>], the IANA policy for assigning new
   values, shall be Specification Required: values and their meanings
   must be documented in an RFC or in some other permanent and readily
   available reference, in sufficient detail that interoperability
   between independent implementations is possible.

   The following is a template for an RDAP extension registration:

      Extension identifier: the identifier of the extension

      Registry operator: the name of the registry operator

      Published specification: RFC number, bibliographical reference, or
      URL to a permanent and readily available specification

      Person &amp; email address to contact for further information: The
      names and email addresses of individuals to contact regarding this
      registry entry





<span class="grey">Newton, et al.               Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


      Intended usage: brief reasons for this registry entry (as defined
      by [<a href="./rfc5226" title="">RFC5226</a>]).

   The following is an example of a registration in the RDAP extension
   registry:

      Extension identifier: lunarNic

      Registry operator: The Registry of the Moon, LLC

      Published specification: http://www.example/moon_apis/rdap

      Person &amp; email address to contact for further information:
      Professor Bernardo de la Paz &lt;berny@moon.example&gt;

      Intended usage: COMMON

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.%20%20Internationalization%20Considerations"></a><a class="selflink" href="#section-9" id="section-9">9</a>.  Internationalization Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.1.%20%20URIs%20and%20IRIs"></a><a class="selflink" href="#section-9.1" id="section-9.1">9.1</a>.  URIs and IRIs</span>

   Clients can use Internationalized Resource Identifiers (IRIs)
   [<a href="./rfc3987" title='"Internationalized Resource Identifiers (IRIs)"'>RFC3987</a>] for internal use as they see fit but MUST transform them to
   URIs [<a href="./rfc3986" title='"Uniform Resource Identifier (URI): Generic Syntax"'>RFC3986</a>] for interaction with RDAP servers.  RDAP servers MUST
   use URIs in all responses, and again clients can transform these URIs
   to IRIs for internal use as they see fit.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.2.%20%20Language%20Identifiers%20in%20Queries%20and%20Responses"></a><a class="selflink" href="#section-9.2" id="section-9.2">9.2</a>.  Language Identifiers in Queries and Responses</span>

   Under most scenarios, clients requesting data will not signal that
   the data be returned in a particular language or script.  On the
   other hand, when servers return data and have knowledge that the data
   is in a language or script, the data SHOULD be annotated with
   language identifiers whenever they are available, thus allowing
   clients to process and display the data accordingly.

   [<a id="ref-RFC7483">RFC7483</a>] provides such a mechanism.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.3.%20%20Language%20Identifiers%20in%20HTTP%20Headers"></a><a class="selflink" href="#section-9.3" id="section-9.3">9.3</a>.  Language Identifiers in HTTP Headers</span>

   Given the description of the use of language identifiers in
   <a href="#section-9.2">Section 9.2</a>, unless otherwise specified, servers SHOULD ignore the
   HTTP [<a href="./rfc7231" title='"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"'>RFC7231</a>] Accept-Language header field when formulating HTTP
   entity responses, so that clients do not conflate the Accept-Language
   header with the 'lang' values in the entity body.






<span class="grey">Newton, et al.               Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   However, servers MAY return language identifiers in the Content-
   Language header field so as to inform clients of the intended
   language of HTTP layer messages.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.%20%20References"></a><a class="selflink" href="#section-10" id="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" id="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3986">RFC3986</a>]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform
              Resource Identifier (URI): Generic Syntax", STD 66, <a href="./rfc3986">RFC</a>
              <a href="./rfc3986">3986</a>, January 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a>&gt;.

   [<a id="ref-RFC3987">RFC3987</a>]  Duerst, M. and M. Suignard, "Internationalized Resource
              Identifiers (IRIs)", <a href="./rfc3987">RFC 3987</a>, January 2005,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3987">http://www.rfc-editor.org/info/rfc3987</a>&gt;.

   [<a id="ref-RFC5226">RFC5226</a>]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", <a href="https://www.rfc-editor.org/bcp/bcp26">BCP 26</a>, <a href="./rfc5226">RFC 5226</a>,
              May 2008, &lt;<a href="http://www.rfc-editor.org/info/rfc5226">http://www.rfc-editor.org/info/rfc5226</a>&gt;.

   [<a id="ref-RFC6585">RFC6585</a>]  Nottingham, M. and R. Fielding, "Additional HTTP Status
              Codes", <a href="./rfc6585">RFC 6585</a>, April 2012,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6585">http://www.rfc-editor.org/info/rfc6585</a>&gt;.

   [<a id="ref-RFC7230">RFC7230</a>]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Message Syntax and Routing", <a href="./rfc7230">RFC</a>
              <a href="./rfc7230">7230</a>, June 2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.

   [<a id="ref-RFC7231">RFC7231</a>]  Fielding, R., Ed. and J. Reschke, Ed., "Hypertext Transfer
              Protocol (HTTP/1.1): Semantics and Content", <a href="./rfc7231">RFC 7231</a>,
              June 2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7231">http://www.rfc-editor.org/info/rfc7231</a>&gt;.

   [<a id="ref-RFC7481">RFC7481</a>]  Hollenbeck, S. and N. Kong, "Security Services for the
              Registration Data Access Protocol (RDAP)", <a href="./rfc7481">RFC 7481</a>,
              February 2015, &lt;<a href="http://www.rfc-editor.org/info/rfc7481">http://www.rfc-editor.org/info/rfc7481</a>&gt;.

   [<a id="ref-RFC7482">RFC7482</a>]  Newton, A. and S. Hollenbeck, "Registration Data Access
              Protocol (RDAP) Query Format", <a href="./rfc7482">RFC 7482</a>, February 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7482">http://www.rfc-editor.org/info/rfc7482</a>&gt;.

   [<a id="ref-RFC7483">RFC7483</a>]  Newton, A. and S. Hollenbeck, "JSON Responses for the
              Registration Data Access Protocol (RDAP)", <a href="./rfc7483">RFC 7483</a>,
              February 2015, &lt;<a href="http://www.rfc-editor.org/info/rfc7483">http://www.rfc-editor.org/info/rfc7483</a>&gt;.



<span class="grey">Newton, et al.               Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   [<a id="ref-RFC7484">RFC7484</a>]  Blanchet, M., "Finding the Authoritative Registration Data
              (RDAP) Service", <a href="./rfc7484">RFC 7484</a>, February 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7484">http://www.rfc-editor.org/info/rfc7484</a>&gt;.

   [<a id="ref-W3C.REC-cors-20140116">W3C.REC-cors-20140116</a>]
              Kesteren, A., "Cross-Origin Resource Sharing", W3C
              Recommendation, REC-cors-20140116, January 2014,
              &lt;<a href="http://www.w3.org/TR/2014/REC-cors-20140116/">http://www.w3.org/TR/2014/REC-cors-20140116/</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" id="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-REST">REST</a>]     Fielding, R. and R. Taylor, "Principled Design of the
              Modern Web Architecture", ACM Transactions on Internet
              Technology, Vol. 2, No. 2, May 2002.

   [<a id="ref-RFC3912">RFC3912</a>]  Daigle, L., "WHOIS Protocol Specification", <a href="./rfc3912">RFC 3912</a>,
              September 2004, &lt;<a href="http://www.rfc-editor.org/info/rfc3912">http://www.rfc-editor.org/info/rfc3912</a>&gt;.

   [<a id="ref-RFC5234">RFC5234</a>]  Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax
              Specifications: ABNF", STD 68, <a href="./rfc5234">RFC 5234</a>, January 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5234">http://www.rfc-editor.org/info/rfc5234</a>&gt;.

   [<a id="ref-RFC5890">RFC5890</a>]  Klensin, J., "Internationalized Domain Names for
              Applications (IDNA): Definitions and Document Framework",
              <a href="./rfc5890">RFC 5890</a>, August 2010,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5890">http://www.rfc-editor.org/info/rfc5890</a>&gt;.

   [<a id="ref-RFC7159">RFC7159</a>]  Bray, T., Ed., "The JavaScript Object Notation (JSON) Data
              Interchange Format", <a href="./rfc7159">RFC 7159</a>, March 2014,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7159">http://www.rfc-editor.org/info/rfc7159</a>&gt;.

   [<a id="ref-SAC-051">SAC-051</a>]  Piscitello, D., Ed., "SSAC Report on Domain Name WHOIS
              Terminology and Structure", A report from the ICANN
              Security and Stability Advisory Committee (SSAC),
              September 2011.

   [<a id="ref-lacnic-joint-whois">lacnic-joint-whois</a>]
              LACNIC, "Joint Whois", December 2005,
              &lt;<a href="ftp://anonymous@ftp.registro.br/pub/gter/gter20/02-jwhois-lacnic.pdf">ftp://anonymous@ftp.registro.br/pub/gter/</a>
              <a href="ftp://anonymous@ftp.registro.br/pub/gter/gter20/02-jwhois-lacnic.pdf">gter20/02-jwhois-lacnic.pdf</a>&gt;.











<span class="grey">Newton, et al.               Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20A.%20%20Protocol%20Example"></a><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  Protocol Example</span>

   To demonstrate typical behavior of an RDAP client and server, the
   following is an example of an exchange, including a redirect.  The
   data in the response has been elided for brevity, as the data format
   is not described in this document.  The media type used here is
   described in [<a href="./rfc7483" title='"JSON Responses for the Registration Data Access Protocol (RDAP)"'>RFC7483</a>].

   An example of an RDAP client and server exchange:

     Client:
         &lt;TCP connect to rdap.example.com port 80&gt;
         GET /rdap/ip/203.0.113.0/24 HTTP/1.1
         Host: rdap.example.com
         Accept: application/rdap+json

     rdap.example.com:
         HTTP/1.1 301 Moved Permanently
         Location: http://rdap-ip.example.com/rdap/ip/203.0.113.0/24
         Content-Length: 0
         Content-Type: application/rdap+json
         &lt;TCP disconnect&gt;

     Client:
         &lt;TCP connect to rdap-ip.example.com port 80&gt;
         GET /rdap/ip/203.0.113.0/24 HTTP/1.1
         Host:  rdap-ip.example.com
         Accept: application/rdap+json

     rdap-ip.example.com:
         HTTP/1.1 200 OK
         Content-Type: application/rdap+json
         Content-Length: 9001

         { ... }
         &lt;TCP disconnect&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20B.%20%20Cache%20Busting"></a><a class="selflink" href="#appendix-B" id="appendix-B">Appendix B</a>.  Cache Busting</span>

   Some HTTP [<a href="./rfc7230" title='"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"'>RFC7230</a>] cache infrastructures do not adhere to caching
   standards adequately and could cache responses longer than is
   intended by the server.  To overcome these issues, clients can use an
   ad hoc and improbably used query parameter with a random value of
   their choosing.  As <a href="#section-4.3">Section 4.3</a> instructs servers to ignore unknown
   parameters, this is compatible with the RDAP definition.






<span class="grey">Newton, et al.               Standards Track                   [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   An example of using an unknown query parameter to bust caches:

     http://example.com/ip/192.0.2.0?__fuhgetaboutit=xyz123

   Use of an unknown parameter to overcome misbehaving caches is not
   part of any specification and is offered here for informational
   purposes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20C.%20%20Bootstrapping%20and%20Redirection"></a><a class="selflink" href="#appendix-C" id="appendix-C">Appendix C</a>.  Bootstrapping and Redirection</span>

   The traditional deployment model of WHOIS [<a href="./rfc3912" title='"WHOIS Protocol Specification"'>RFC3912</a>] does not provide
   a mechanism for determining the authoritative source for information.

   Some approaches have been implemented in the past, most notably the
   Joint WHOIS [<a href="#ref-lacnic-joint-whois">lacnic-joint-whois</a>] initiative.  However, among other
   shortcomings, Joint WHOIS is implemented using proxies and server-
   side referrals.

   These issues are solved in RDAP using HTTP redirects and
   bootstrapping.  Bootstrapping is discussed in [<a href="./rfc7484" title='"Finding the Authoritative Registration Data (RDAP) Service"'>RFC7484</a>].  In
   constrained environments, the processes outlined in [<a href="./rfc7484" title='"Finding the Authoritative Registration Data (RDAP) Service"'>RFC7484</a>] may not
   be viable, and there may be the need for servers acting as a
   "redirector".

   Redirector servers issue HTTP redirects to clients using a
   redirection table informed by [<a href="./rfc7484" title='"Finding the Authoritative Registration Data (RDAP) Service"'>RFC7484</a>].  Figure 2 diagrams a client
   using a redirector for bootstrapping.

                                      REDIRECTOR       ARIN
                                      RDAP             RDAP
                                        .               .
                                        |               |
        Q: 23.1.1.1? -----------------&gt; |               |
                                        |               |
           &lt;---------- HTTP 301 --------|               |
                  ('Try ARIN RDAP')     |               |
                                        |               |
                                                        |
          Q: 23.1.1.1? -------------------------------&gt; |
                                                        |
             &lt;---------- HTTP 200 --------------------- |
                    (JSON response is returned)         |
                                                        |
                                                        |
                                                        .

                 Figure 2: Querying RDAP Data for 23.1.1.1




<span class="grey">Newton, et al.               Standards Track                   [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   In some cases, particularly sub-delegations made between Regional
   Internet Registries (RIRs) known as "ERX space" and transfers of
   networks, multiple HTTP redirects will be issued.  Figure 3 shows
   such a scenario.

                          REDIRECTOR  LACNIC           ARIN
                          RDAP        RDAP             RDAP
                            .           .               .
        Q: 23.1.1.1? ----&gt;  |           |               |
                            |           |               |
          &lt;-- HTTP 301 ---  |           |               |
         ('Try LACNIC')     |           |               |
                            |           |               |
                            |           |               |
        Q: 23.1.1.1? -----------------&gt; |               |
                                        |               |
           &lt;---------- HTTP 301 --------|               |
                  ('Try ARIN RDAP')     |               |
                                        |               |
                                                        |
          Q: 23.1.1.1? -------------------------------&gt; |
                                                        |
             &lt;---------- HTTP 200 --------------------- |
                    (JSON response is returned)         |
                                                        |
                                                        |
                                                        .

      Figure 3: Querying RDAP Data for Data That Has Been Transferred

Acknowledgements

   John Levine provided text to tighten up the Accept header field usage
   and the text for the section on 429 responses.

   Marc Blanchet provided some clarifying text regarding the use of URLs
   with redirects, as well as very useful feedback during Working Group
   Last Call (WGLC).

   Normative language reviews were provided by Murray S. Kucherawy,
   Andrew Sullivan, Tom Harrison, Ed Lewis, and Alexander Mayrhofer.

   Jean-Phillipe Dionne provided text for the Security Considerations
   section.

   The concept of the redirector server informatively discussed in
   <a href="#appendix-C">Appendix C</a> was documented by Carlos M.  Martinez and Gerardo Rada of




<span class="grey">Newton, et al.               Standards Track                   [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc7480">RFC 7480</a>                     RDAP over HTTP                   March 2015</span>


   LACNIC and Linlin Zhou of CNNIC and subsequently incorporated into
   this document.

   This document is the work product of the IETF's WEIRDS working group,
   of which Olaf Kolkman and Murray Kucherawy were chairs.

Authors' Addresses

   Andrew Lee Newton
   American Registry for Internet Numbers
   3635 Concorde Parkway
   Chantilly, VA  20151
   United States

   EMail: andy@arin.net
   URI:   <a href="http://www.arin.net">http://www.arin.net</a>


   Byron J. Ellacott
   Asia Pacific Network Information Centre
   6 Cordelia Street
   South Brisbane  QLD 4101
   Australia

   EMail: bje@apnic.net
   URI:   <a href="http://www.apnic.net">http://www.apnic.net</a>


   Ning Kong
   China Internet Network Information Center
   4 South 4th Street, Zhongguancun, Haidian District
   Beijing  100190
   China

   Phone: +86 10 5881 3147
   EMail: nkong@cnnic.cn















Newton, et al.               Standards Track                   [Page 16]
</pre>
</body></html>