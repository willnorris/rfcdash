<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9131: Gratuitous Neighbor Discovery: Creating Neighbor Cache Entries on First‑Hop Routers</title>
<meta content="Jen Linkova" name="author"/>
<meta content="
       
                    Neighbor Discovery (RFC 4861) is used by IPv6 nodes to determine the link-layer addresses of neighboring nodes as well as to discover and maintain reachability information. This document updates RFC 4861 to allow routers to proactively create a Neighbor Cache entry when a new IPv6 address is assigned to a node. It also updates RFC 4861 and recommends that nodes send unsolicited Neighbor Advertisements upon assigning a new IPv6 address. These changes will minimize the delay and packet loss when a node initiates connections to an off-link destination from a new IPv6 address. 
       
    " name="description"/>
<meta content="xml2rfc 3.10.0" name="generator"/>
<meta content="IPv6" name="keyword"/>
<meta content="SLAAC" name="keyword"/>
<meta content="stateless address autoconfiguration" name="keyword"/>
<meta content="neighbor advertisement" name="keyword"/>
<meta content="9131" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.10
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.3.5
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.19.0
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.3.1
    requests 2.22.0
    setuptools 40.6.2
    six 1.14.0
    WeasyPrint 51
-->
<link href="rfc9131.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9131" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-6man-grand-07" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9131</td>
<td class="center">Gratuitous ND</td>
<td class="right">October 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Linkova</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9131">9131</a></dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc4861">4861</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2021-10">October 2021</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">J. Linkova</div>
<div class="org">Google</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9131</h1>
<h1 id="title">Gratuitous Neighbor Discovery: Creating Neighbor Cache Entries on First‑Hop Routers</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
                    Neighbor Discovery (RFC 4861) is used by IPv6 nodes to determine the link-layer addresses of neighboring nodes as well as to discover and maintain reachability information. This document updates RFC 4861 to allow routers to proactively create a Neighbor Cache entry when a new IPv6 address is assigned to a node. It also updates RFC 4861 and recommends that nodes send unsolicited Neighbor Advertisements upon assigning a new IPv6 address. These changes will minimize the delay and packet loss when a node initiates connections to an off-link destination from a new IPv6 address.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9131">https://www.rfc-editor.org/info/rfc9131</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="xref" href="#section-1.1">1.1</a>.  <a class="xref" href="#name-requirements-language">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p class="keepWithNext" id="section-toc.1-1.1.2.2.1"><a class="xref" href="#section-1.2">1.2</a>.  <a class="xref" href="#name-terminology">Terminology</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-problem-statement">Problem Statement</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-solution-requirements">Solution Requirements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-changes-to-neighbor-discove">Changes to Neighbor Discovery</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-nodes-sending-gratuitous-ne">Nodes Sending Gratuitous Neighbor Advertisements</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.  <a class="xref" href="#name-routers-creating-cache-entr">Routers Creating Cache Entries upon Receiving Unsolicited Neighbor Advertisements</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-avoiding-disruption">Avoiding Disruption</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.  <a class="xref" href="#name-neighbor-cache-entry-exists">Neighbor Cache Entry Exists in Any State Other Than INCOMPLETE</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="xref" href="#section-5.2">5.2</a>.  <a class="xref" href="#name-neighbor-cache-entry-is-in-">Neighbor Cache Entry Is in INCOMPLETE State</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="xref" href="#section-5.3">5.3</a>.  <a class="xref" href="#name-neighbor-cache-entry-does-n">Neighbor Cache Entry Does Not Exist</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a class="xref" href="#section-5.3.1">5.3.1</a>.  <a class="xref" href="#name-the-rightful-owner-is-not-s">The Rightful Owner Is Not Sending Packets from the Address</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.2">
                    <p id="section-toc.1-1.5.2.3.2.2.1"><a class="xref" href="#section-5.3.2">5.3.2</a>.  <a class="xref" href="#name-the-rightful-owner-has-star">The Rightful Owner Has Started Sending Packets from the Address</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-modifications-to-rfc-mandat">Modifications to RFC-Mandated Behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="xref" href="#section-6.1">6.1</a>.  <a class="xref" href="#name-modification-to-rfc-4861-ne">Modification to RFC 4861 (Neighbor Discovery for IP version 6 (IPv6))</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.1">
                    <p id="section-toc.1-1.6.2.1.2.1.1"><a class="xref" href="#section-6.1.1">6.1.1</a>.  <a class="xref" href="#name-modification-to-section-725">Modification to Section 7.2.5 of RFC 4861</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.2">
                    <p id="section-toc.1-1.6.2.1.2.2.1"><a class="xref" href="#section-6.1.2">6.1.2</a>.  <a class="xref" href="#name-modification-to-section-726">Modification to Section 7.2.6 of RFC 4861</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-solution-limitations">Solution Limitations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-solutions-considered-but-di">Solutions Considered but Discarded</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a class="xref" href="#section-8.1">8.1</a>.  <a class="xref" href="#name-do-nothing">Do Nothing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a class="xref" href="#section-8.2">8.2</a>.  <a class="xref" href="#name-change-to-the-registration-">Change to the Registration-Based Neighbor Discovery</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a class="xref" href="#section-8.3">8.3</a>.  <a class="xref" href="#name-host-sending-ns-to-the-rout">Host Sending NS to the Router Address from Its GUA</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a class="xref" href="#section-8.4">8.4</a>.  <a class="xref" href="#name-host-sending-router-solicit">Host Sending Router Solicitation from Its GUA</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.5">
                <p id="section-toc.1-1.8.2.5.1"><a class="xref" href="#section-8.5">8.5</a>.  <a class="xref" href="#name-routers-populating-their-ca">Routers Populating Their Caches by Gleaning from Neighbor Discovery Packets</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.6">
                <p id="section-toc.1-1.8.2.6.1"><a class="xref" href="#section-8.6">8.6</a>.  <a class="xref" href="#name-initiating-host-to-router-c">Initiating Host-to-Router Communication</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.7">
                <p id="section-toc.1-1.8.2.7.1"><a class="xref" href="#section-8.7">8.7</a>.  <a class="xref" href="#name-making-the-probing-logic-on">Making the Probing Logic on Hosts More Robust</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.8">
                <p id="section-toc.1-1.8.2.8.1"><a class="xref" href="#section-8.8">8.8</a>.  <a class="xref" href="#name-increasing-the-buffer-size-">Increasing the Buffer Size on Routers</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.9">
                <p id="section-toc.1-1.8.2.9.1"><a class="xref" href="#section-8.9">8.9</a>.  <a class="xref" href="#name-transit-data-plane-traffic-">Transit Data Plane Traffic from a New Address to Trigger Address Resolution</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-10">10</a>. <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-11">11</a>. <a class="xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a class="xref" href="#section-11.1">11.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a class="xref" href="#section-11.2">11.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="xref" href="#appendix-A"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="xref" href="#appendix-B"></a><a class="xref" href="#name-authors-address">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
                          The Neighbor Discovery state machine defined in  <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> assumes that communications between IPv6 nodes are, in most cases, bidirectional and if a node A is trying to communicate to its neighbor, node B, the return traffic flows could be expected.  So, when node A starts the address resolution process, the target node B would also create an entry containing A's IPv6 and link-layer addresses in its Neighbor Cache. That entry will be used for sending the return traffic to A.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">
                          In particular, <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.2.5">Section 7.2.5</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span> states:<a class="pilcrow" href="#section-1-2">¶</a></p>
<blockquote id="section-1-3">When a valid Neighbor Advertisement is received (either solicited or unsolicited), the Neighbor Cache is searched for the target's entry.
                          If no entry exists, the advertisement <span class="bcp14">SHOULD</span> be silently discarded.
   There is no need to create an entry if none exists, since the recipient has apparently not initiated any communication with the target.<a class="pilcrow" href="#section-1-3">¶</a>
</blockquote>
<p id="section-1-4">
                                  While this approach is perfectly suitable for host-to-host on-link communications, it does not work so well when a host sends traffic to off-link destinations.
                                  After joining the network and receiving a Router Advertisement, the host populates its Neighbor Cache with the default router IPv6 and link-layer addresses and is able to send traffic to off-link destinations.
                                  At the same time, the router does not have any cache entries for the host global addresses yet and only starts address resolution upon receiving the first packet of the return traffic flow.
                                  While waiting for the resolution to complete, routers only keep a very small number of packets in the queue, as recommended in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.2.2">Section 7.2.2</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>.
Any additional packets arriving before the resolution process finishes are likely to result in dropped packets.
                                          It can cause packet loss and performance degradation that can be visible to users.<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">
This document updates the Neighbor Discovery protocol <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> to avoid packet loss in the scenario described above.
<a class="xref" href="#changes">Section 4</a> discusses the changes and analyzes the potential impact, while normative changes to <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> are specified in <a class="xref" href="#RFC_UPD">Section 6</a>.<a class="pilcrow" href="#section-1-5">¶</a></p>
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-requirements-language">Requirements Language</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
       "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>",
       "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>",
       "<span class="bcp14">SHOULD NOT</span>",
       "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
       "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document
       are to be interpreted as described in BCP 14
       <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> when, and only
       when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
</section>
<section id="section-1.2">
        <h3 id="name-terminology">
<a class="section-number selfRef" href="#section-1.2">1.2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-1.2-1">
          <dt id="section-1.2-1.1">Node:</dt>
          <dd id="section-1.2-1.2" style="margin-left: 1.5em">A device that implements IP <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.3">Host:</dt>
          <dd id="section-1.2-1.4" style="margin-left: 1.5em">Any node that is not a router <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.5">ND:</dt>
          <dd id="section-1.2-1.6" style="margin-left: 1.5em">Neighbor Discovery <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.7">NC:</dt>
          <dd id="section-1.2-1.8" style="margin-left: 1.5em">Neighbor Cache <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>. The Neighbor Cache entry can be in one of five states, as described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.3.2">Section 7.3.2</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>: INCOMPLETE, REACHABLE, STALE, DELAY, or PROBE.<a class="pilcrow" href="#section-1.2-1.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.9">SLAAC:</dt>
          <dd id="section-1.2-1.10" style="margin-left: 1.5em">IPv6 Stateless Address Autoconfiguration <span>[<a class="xref" href="#RFC4862">RFC4862</a>]</span>.<a class="pilcrow" href="#section-1.2-1.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.11">NS:</dt>
          <dd id="section-1.2-1.12" style="margin-left: 1.5em">Neighbor Solicitation <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.12">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.13">NA:</dt>
          <dd id="section-1.2-1.14" style="margin-left: 1.5em">Neighbor Advertisement <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.14">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.15">RS:</dt>
          <dd id="section-1.2-1.16" style="margin-left: 1.5em">Router Solicitation <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.16">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.17">RA:</dt>
          <dd id="section-1.2-1.18" style="margin-left: 1.5em">Router Advertisement  <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.18">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.19">SLLAO:</dt>
          <dd id="section-1.2-1.20" style="margin-left: 1.5em">Source Link-Layer Address Option. An option in the ND packets containing the link-layer address of the sender of the packet <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.20">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.21">TLLAO:</dt>
          <dd id="section-1.2-1.22" style="margin-left: 1.5em">Target Link-Layer Address Option. An option in the ND packets containing the link-layer address of the target <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-1.2-1.22">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.23">GUA:</dt>
          <dd id="section-1.2-1.24" style="margin-left: 1.5em">Global Unicast Address <span>[<a class="xref" href="#RFC4291">RFC4291</a>]</span>.<a class="pilcrow" href="#section-1.2-1.24">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.25">DAD:</dt>
          <dd id="section-1.2-1.26" style="margin-left: 1.5em">Duplicate Address Detection <span>[<a class="xref" href="#RFC4862">RFC4862</a>]</span>.<a class="pilcrow" href="#section-1.2-1.26">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.27">Preferred Address:</dt>
          <dd id="section-1.2-1.28" style="margin-left: 1.5em">An address assigned to an interface whose uniqueness has been verified using DAD and whose use by upper-layer protocols is unrestricted <span>[<a class="xref" href="#RFC4862">RFC4862</a>]</span>. Preferred addresses may be used as the source address of packets sent from the interface.<a class="pilcrow" href="#section-1.2-1.28">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.29">Optimistic DAD:</dt>
          <dd id="section-1.2-1.30" style="margin-left: 1.5em">A modification of DAD <span>[<a class="xref" href="#RFC4429">RFC4429</a>]</span>.<a class="pilcrow" href="#section-1.2-1.30">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</section>
</div>
<section id="section-2">
      <h2 id="name-problem-statement">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-problem-statement">Problem Statement</a>
      </h2>
<p id="section-2-1">
                 The most typical scenario when the problem described in this document may arise is a host joining the network, forming a new address, and
 using that address for accessing the Internet:<a class="pilcrow" href="#section-2-1">¶</a></p>
<ol class="normal type-1" id="section-2-2" start="1" type="1">
<li id="section-2-2.1">
                                          A host joins the network and receives a Router Advertisement (RA) packet from the first-hop router (either a periodic unsolicited RA or a response to a Router Solicitation sent by the host).
                                                  The RA contains information the host needs to perform SLAAC and to configure its network stack.
                                                  The RA is sent from the router's link-local address to a link-local destination address and may contain the link-layer address of the router.
                                                  As a result, the host can populate its Neighbor Cache with the router's link-local and link-layer addresses.<a class="pilcrow" href="#section-2-2.1">¶</a>
</li>
        <li id="section-2-2.2">
                                          The host starts opening connections to off-link destinations.
                                          A very common use case is a mobile device sending probes to detect Internet connectivity
and/or the presence of a captive portal on the network.
                                                  To speed up that process, many implementations use Optimistic DAD, which allows them to send probes before the DAD process is completed.
                                                          At that moment, the device's Neighbor Cache contains all information required to send those probes (such as the default router link-local and link-layer addresses).
                                                  The router's Neighbor Cache, however, might contain an entry for the device's link-local
address (if the device has been performing address resolution for the router's link-local address), but there are no entries for any of the device's global addresses.<a class="pilcrow" href="#section-2-2.2">¶</a>
</li>
        <li id="section-2-2.3">
                                          Return traffic is received by the first-hop router.
                As the router does not have any cache entry for the host's global address yet, the router starts the Neighbor Discovery process by creating an INCOMPLETE cache entry and then sending a Neighbor Solicitation to the solicited-node multicast address (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.3.2">Section 7.3.2</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>).
                As per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.2.2">Section 7.2.2</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>,
 routers <span class="bcp14">MUST</span> buffer at least one data packet and <span class="bcp14">MAY</span> buffer more, while resolving the packet destination address.
                        However, most router implementations limit the buffer size to a few packets only, and some implementations are known to buffer just one packet.
So, any subsequent packets arriving before the address resolution process is completed cause packet loss by replacing older packets in the buffer.<a class="pilcrow" href="#section-2-2.3">¶</a>
</li>
        <li id="section-2-2.4">
                                        If the host sends multiple probes in parallel, in the worst case, it would consider all but one of them failed.
                                        That leads to user-visible delay in connecting to the network, especially if the host implements some form of backoff mechanism and does not retransmit the probes as soon as possible.<a class="pilcrow" href="#section-2-2.4">¶</a>
</li>
      </ol>
<p id="section-2-3">
                                  This scenario illustrates the problem occurring when the device connects to the network for the first time or after an inactivity period long enough for the device's address to be removed from the router's Neighbor Cache.
                                  However, the same sequence of events happens when the host starts using a new global address previously unseen by the router, such as a new privacy address <span>[<a class="xref" href="#RFC8981">RFC8981</a>]</span> or if the router's Neighbor Cache has been flushed.<a class="pilcrow" href="#section-2-3">¶</a></p>
<p id="section-2-4">
                          While in dual-stack networks this problem might be hidden by Happy Eyeballs <span>[<a class="xref" href="#RFC8305">RFC8305</a>]</span>, it manifests quite clearly in IPv6-only environments, especially wireless environments, leading to poor user experience and contributing to a negative perception of IPv6-only solutions as unstable and non-deployable.<a class="pilcrow" href="#section-2-4">¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-solution-requirements">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-solution-requirements">Solution Requirements</a>
      </h2>
<p id="section-3-1">
                It would be highly desirable to improve the Neighbor Discovery mechanics so routers have a usable cache entry for a host address by the time the router receives the first packet for that address.
                 In particular:<a class="pilcrow" href="#section-3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-2.1">
                                 If the router does not have a Neighbor Cache entry for the address, a STALE entry needs to be created proactively, prior to arrival of the first packet intended for that address.<a class="pilcrow" href="#section-3-2.1">¶</a>
</li>
        <li class="normal" id="section-3-2.2">
                                 The solution needs to work for Optimistic Addresses as well.
                                 Devices implementing Optimistic DAD usually attempt to minimize the delay in connecting to the network and therefore are more likely to be affected by the problem described in this document.<a class="pilcrow" href="#section-3-2.2">¶</a>
</li>
        <li class="normal" id="section-3-2.3">
                                 In the case of duplicate addresses present in the network, the solution should not override the existing entry.<a class="pilcrow" href="#section-3-2.3">¶</a>
</li>
        <li class="normal" id="section-3-2.4">
                                 In topologies with multiple first-hop routers, the cache needs to be updated on all of them, as traffic might be asymmetric: outgoing flows leaving the network via one router while the return traffic enters the segment via another one.<a class="pilcrow" href="#section-3-2.4">¶</a>
</li>
      </ul>
<p id="section-3-3">
                        In addition, the solution must not exacerbate issues described in <span>[<a class="xref" href="#RFC6583">RFC6583</a>]</span> and needs to be compatible with the recommendations provided in <span>[<a class="xref" href="#RFC6583">RFC6583</a>]</span>.<a class="pilcrow" href="#section-3-3">¶</a></p>
</section>
<div id="changes">
<section id="section-4">
      <h2 id="name-changes-to-neighbor-discove">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-changes-to-neighbor-discove">Changes to Neighbor Discovery</a>
      </h2>
<p id="section-4-1">
                      The following changes are required to minimize the delay in creating new entries in a router's Neighbor Cache:<a class="pilcrow" href="#section-4-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-2.1">
                                     A node sends unsolicited NAs upon assigning a new IPv6 address to its interface.<a class="pilcrow" href="#section-4-2.1">¶</a>
</li>
        <li class="normal" id="section-4-2.2">
                                     A router creates a new cache entry upon receiving an unsolicited NA from a host.<a class="pilcrow" href="#section-4-2.2">¶</a>
</li>
      </ul>
<p id="section-4-3">
                      The following sections discuss these changes in more detail.
    Normative changes are specified in <a class="xref" href="#RFC_UPD">Section 6</a>.<a class="pilcrow" href="#section-4-3">¶</a></p>
<div id="hosts">
<section id="section-4.1">
        <h3 id="name-nodes-sending-gratuitous-ne">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-nodes-sending-gratuitous-ne">Nodes Sending Gratuitous Neighbor Advertisements</a>
        </h3>
<p id="section-4.1-1">
                              <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.2.6">Section 7.2.6</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span> discusses using unsolicited Neighbor 
                              Advertisements to inform node neighbors of the new link-layer address quickly. 
                              The same mechanism could be used to notify the node neighbors about the new network-layer
                              address as well: the node can send unsolicited Neighbor Advertisements upon assigning a new IPv6 address to its interface.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">
                              To minimize potential disruption in the case of duplicate addresses, the node should not set the Override flag for a preferred address and must not set the Override flag if the address is in the Optimistic state <span>[<a class="xref" href="#RFC4429">RFC4429</a>]</span>.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<p id="section-4.1-3">
                              As the main purpose of sending unsolicited NAs upon configuring a new address is to proactively create a Neighbor Cache entry on the first-hop routers, the gratuitous NAs are sent to the all-routers multicast address (ff02::2). Limiting the recipients to routers only would help reduce the multicast noise level. 
                              If the link-layer devices are performing Multicast Listener Discovery (MLD) snooping <span>[<a class="xref" href="#RFC4541">RFC4541</a>]</span>, then those unsolicited NAs will only be sent to routers on the given network segment/link, instead of being flooded to all nodes.<a class="pilcrow" href="#section-4.1-3">¶</a></p>
<p id="section-4.1-4">
                              It should be noted that the mechanism discussed here does not cause any significant increase in multicast traffic.
                              The additional multicast unsolicited NAs would proactively create a STALE cache entry on the router, as discussed below.
                              When the router receives the return traffic flows, it does not need to send multicast NSes to the solicited-node multicast address but would send unicast NSes instead.
                              Therefore, this procedure would only produce an increase in the overall amount of multicast traffic if no return traffic arrives for the address that sent the unsolicited NA or if the router does not create a STALE entry upon receiving such an NA. The increase would be negligible, as that additional traffic is a few orders of magnitude less than the usual level of Neighbor Discovery multicast traffic.<a class="pilcrow" href="#section-4.1-4">¶</a></p>
</section>
</div>
<section id="section-4.2">
        <h3 id="name-routers-creating-cache-entr">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-routers-creating-cache-entr">Routers Creating Cache Entries upon Receiving Unsolicited Neighbor Advertisements</a>
        </h3>
<p id="section-4.2-1">
                              <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.2.5">Section 7.2.5</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span> states:<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<blockquote id="section-4.2-2">When a valid Neighbor Advertisement is received (either solicited or
   unsolicited), the Neighbor Cache is searched for the target's entry.
   If no entry exists, the advertisement <span class="bcp14">SHOULD</span> be silently discarded.
   There is no need to create an entry if none exists, since the
   recipient has apparently not initiated any communication with the
   target.<a class="pilcrow" href="#section-4.2-2">¶</a>
</blockquote>
<p id="section-4.2-3">
                              The reasoning behind dropping unsolicited Neighbor Advertisements ("the
   recipient has apparently not initiated any communication with the
   target") is valid for on-link host-to-host communication but, as discussed in <a class="xref" href="#Introduction">Section 1</a>, 
   it does not really apply to the scenario when the host is announcing its address to routers.
   Therefore, it would be beneficial to allow routers to create new entries upon receiving an unsolicited Neighbor Advertisement.<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<p id="section-4.2-4">
                                      This document updates <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> so that routers create a new Neighbor Cache entry upon receiving an unsolicited Neighbor Advertisement for an address that does not already have a Neighbor Cache entry.
                                              These changes do not modify the router behavior specified in <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> for the scenario when the corresponding Neighbor Cache entry already exists.<a class="pilcrow" href="#section-4.2-4">¶</a></p>
<p id="section-4.2-5">
The next section analyzes various scenarios of duplicate addresses and discusses the potential impact of creating a STALE entry for a duplicate IPv6 address.<a class="pilcrow" href="#section-4.2-5">¶</a></p>
</section>
</section>
</div>
<div id="avoid_dis">
<section id="section-5">
      <h2 id="name-avoiding-disruption">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-avoiding-disruption">Avoiding Disruption</a>
      </h2>
<p id="section-5-1">
                                    If nodes following the recommendations in this document are using the DAD mechanism defined in <span>[<a class="xref" href="#RFC4862">RFC4862</a>]</span>, they would send unsolicited NAs as soon as the address changes state from tentative to preferred (after its uniqueness has been verified).
                                            However, nodes willing to minimize network stack configuration delays might be using Optimistic Addresses, which means there is a possibility of the address not being unique on the link.
                                            <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4429#section-2.2">Section 2.2</a> of [<a class="xref" href="#RFC4429">RFC4429</a>]</span> discusses measures to ensure that ND packets from the Optimistic Address do not override any existing Neighbor Cache entries, as it would cause interruption of the rightful address owner's traffic in the case of an address conflict.
                                                    Nodes that are willing to speed up their network stack configuration are most likely to be affected by the problem outlined in this document; therefore, it seems reasonable for such hosts to advertise their Optimistic Addresses by sending unsolicited NAs. 
                                                    The main question to consider is the potential risk of overriding the cache entry for the rightful address owner if the Optimistic Address happens to be a duplicate.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">
                                    The following sections discuss the address collision scenario when a node sends an unsolicited NA for an address in the Optimistic state, while another node (the rightful owner) already has the same address assigned.
                                    This document uses the term "the rightful owner", as the same terminology is used in <span>[<a class="xref" href="#RFC4429">RFC4429</a>]</span>.
The analysis assumes that the host performs DAD, as <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4862#section-5.4">Section 5.4</a> of [<a class="xref" href="#RFC4862">RFC4862</a>]</span> requires that DAD <span class="bcp14">MUST</span> be performed on all unicast
   addresses prior to assigning them to an interface.<a class="pilcrow" href="#section-5-2">¶</a></p>
<div id="avoid_dis_exists">
<section id="section-5.1">
        <h3 id="name-neighbor-cache-entry-exists">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-neighbor-cache-entry-exists">Neighbor Cache Entry Exists in Any State Other Than INCOMPLETE</a>
        </h3>
<p id="section-5.1-1">
                            If the router's Neighbor Cache entry for the target address already exists in any state other than INCOMPLETE, then as per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.2.5">Section 7.2.5</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>, an unsolicited NA with the Override flag cleared would change the entry state from REACHABLE to STALE but would not update the entry in any other way. Therefore, even if the host sends an unsolicited NA from its Optimistic Address, the router's cache entry would not be updated with the new link-layer address, and no impact on the traffic for the rightful address owner is expected.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<p id="section-5.1-2">
The return traffic intended for the host with the Optimistic Address would be sent to the rightful owner. However, this is unavoidable with or without the unsolicited NA mechanism.<a class="pilcrow" href="#section-5.1-2">¶</a></p>
</section>
</div>
<div id="avoid_dis_inc">
<section id="section-5.2">
        <h3 id="name-neighbor-cache-entry-is-in-">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-neighbor-cache-entry-is-in-">Neighbor Cache Entry Is in INCOMPLETE State</a>
        </h3>
<p id="section-5.2-1">
                            Another corner case is the INCOMPLETE cache entry for the address.<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<ol class="normal type-1" id="section-5.2-2" start="1" type="1">
<li id="section-5.2-2.1">
The router receives a packet for the rightful owner of the address.<a class="pilcrow" href="#section-5.2-2.1">¶</a>
</li>
          <li id="section-5.2-2.2">
The router starts the address resolution process by creating an INCOMPLETE entry and sends the multicast NS.<a class="pilcrow" href="#section-5.2-2.2">¶</a>
</li>
          <li id="section-5.2-2.3">
More packets arrive at the router for the address in question.<a class="pilcrow" href="#section-5.2-2.3">¶</a>
</li>
          <li id="section-5.2-2.4">
The host configures an Optimistic Address and sends an unsolicited NA.<a class="pilcrow" href="#section-5.2-2.4">¶</a>
</li>
          <li id="section-5.2-2.5">
The router creates a STALE entry and sends the buffered packet(s) to the host (while at least some of those packets are actually intended for the rightful owner).<a class="pilcrow" href="#section-5.2-2.5">¶</a>
</li>
          <li id="section-5.2-2.6">
As the STALE entry was used to send packets, the router changes the entry state to DELAY and waits up to DELAY_FIRST_PROBE_TIME (5 seconds) <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> before sending a unicast NS.<a class="pilcrow" href="#section-5.2-2.6">¶</a>
</li>
          <li id="section-5.2-2.7">
The rightful owner responds to the multicast NS sent at Step 2 with a solicited NA with the Override flag set.<a class="pilcrow" href="#section-5.2-2.7">¶</a>
</li>
          <li id="section-5.2-2.8">
The router updates the entry with the TLLAO supplied (the rightful owner's link-layer address) and sets the entry state to REACHABLE (as the NA has the Solicited flag set).<a class="pilcrow" href="#section-5.2-2.8">¶</a>
</li>
        </ol>
<p id="section-5.2-3">
As a result, some packets (packets in the buffer at Step 6 and all packets arriving between Step 6 and Step 8) are delivered to the host with the Optimistic Address, while some of them, if not all, are intended for the rightful owner. 
Without the unsolicited NA, one or more packets that are in the buffer at Step 8 (usually just one packet, but some routers may buffer a few) would have been delivered to the rightful owner and the rest of the packets would have been dropped.
However, the probability of such a scenario is rather low, as it would require the following 
things to happen almost simultaneously (within tens of milliseconds in most cases):<a class="pilcrow" href="#section-5.2-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-4.1">
                                                                            One host starts using a new IPv6 address and sending traffic without sending an unsolicited NA first.<a class="pilcrow" href="#section-5.2-4.1">¶</a>
</li>
          <li class="normal" id="section-5.2-4.2">
                                                                            Another host configures the same IPv6 address in Optimistic mode before the router completes the address resolution process for the rightful owner.<a class="pilcrow" href="#section-5.2-4.2">¶</a>
</li>
        </ul>
<p id="section-5.2-5">
It should be noted that in this scenario the rightful owner does not send any unsolicited NAs before sending packets. If the rightful owner implements the functionality described in this document and sends unsolicited NAs upon configuring its address, then the router creates a STALE entry for the address, causing all packets to be delivered to the rightful owner (see <a class="xref" href="#avoid_dis_exists">Section 5.1</a>). The rightful owner would experience no disruption but might receive some packets intended for the host with an Optimistic Address.<a class="pilcrow" href="#section-5.2-5">¶</a></p>
<p id="section-5.2-6">
This section focuses on the scenario when the solicited NA from the rightful owner arrives after the unsolicited one sent from the Optimistic Address (Step 7 and Step 4, respectively).
If the solicited NA arrives first, it changes the NC entry state from INCOMPLETE to REACHABLE. As discussed in <a class="xref" href="#avoid_dis_exists">Section 5.1</a>, there will be no disruption for the rightful owner if the router already has a REACHABLE entry for the address when an unsolicited NA is received.<a class="pilcrow" href="#section-5.2-6">¶</a></p>
</section>
</div>
<div id="avoid_dis_nonexists">
<section id="section-5.3">
        <h3 id="name-neighbor-cache-entry-does-n">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-neighbor-cache-entry-does-n">Neighbor Cache Entry Does Not Exist</a>
        </h3>
<p id="section-5.3-1">
                                            There are two distinct scenarios that can lead to the situation when the router does not have an NC entry for the IPv6 address:<a class="pilcrow" href="#section-5.3-1">¶</a></p>
<ol class="normal type-1" id="section-5.3-2" start="1" type="1">
<li id="section-5.3-2.1">
                                                            The rightful owner of the address has not been using it for off-link communication recently or has never used it at all.<a class="pilcrow" href="#section-5.3-2.1">¶</a>
</li>
          <li id="section-5.3-2.2">
                                                            The rightful owner just started sending packets from that address, but the router has not received any return traffic yet.<a class="pilcrow" href="#section-5.3-2.2">¶</a>
</li>
        </ol>
<p id="section-5.3-3">
                                            The impact on the rightful owner's traffic flows would be different in those cases.<a class="pilcrow" href="#section-5.3-3">¶</a></p>
<section id="section-5.3.1">
          <h4 id="name-the-rightful-owner-is-not-s">
<a class="section-number selfRef" href="#section-5.3.1">5.3.1. </a><a class="section-name selfRef" href="#name-the-rightful-owner-is-not-s">The Rightful Owner Is Not Sending Packets from the Address</a>
          </h4>
<p id="section-5.3.1-1">
                                                    In this scenario, the following events are expected to happen:<a class="pilcrow" href="#section-5.3.1-1">¶</a></p>
<ol class="normal type-1" id="section-5.3.1-2" start="1" type="1">
<li id="section-5.3.1-2.1">
                                                                    The host configures the address and sets its state to Optimistic.<a class="pilcrow" href="#section-5.3.1-2.1">¶</a>
</li>
            <li id="section-5.3.1-2.2">
                                                                    The host sends an unsolicited NA with the Override flag set to zero and starts sending traffic from the Optimistic Address.<a class="pilcrow" href="#section-5.3.1-2.2">¶</a>
</li>
            <li id="section-5.3.1-2.3">
                                                                    The router creates a STALE entry for the address and the host link-layer address.<a class="pilcrow" href="#section-5.3.1-2.3">¶</a>
</li>
            <li id="section-5.3.1-2.4">
                                                                    The host starts DAD and detects the address duplication.<a class="pilcrow" href="#section-5.3.1-2.4">¶</a>
</li>
            <li id="section-5.3.1-2.5">
                                                                    The router receives the return traffic for the duplicate address. As the NC entry is STALE, it sends traffic using that entry, changes it to DELAY, and waits up to DELAY_FIRST_PROBE_TIME seconds <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-5.3.1-2.5">¶</a>
</li>
            <li id="section-5.3.1-2.6">
                                                                            The router changes the NC entry state to PROBE and sends up to MAX_UNICAST_SOLICIT unicast NSes <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> separated by RetransTimer milliseconds <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> to the host link-layer address.<a class="pilcrow" href="#section-5.3.1-2.6">¶</a>
</li>
            <li id="section-5.3.1-2.7">
                                                                    As the host has already detected the address conflict, it does not respond to the unicast NSes. (It is unlikely that the host has not completed the DAD process at this stage, as DELAY_FIRST_PROBE_TIME (5 seconds) is much higher than the DAD duration (DupAddrDetectTransmits*RetransTimer*1000 + MAX_RTR_SOLICITATION_DELAY seconds) (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4862#section-5.4">Section 5.4</a> of [<a class="xref" href="#RFC4862">RFC4862</a>]</span>).) The default value for the DAD process would be 1*1*1000 + 1 = 2 seconds <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>. 
If the host has completed DAD but did not detect the address conflict, then there are two hosts with the same address in the preferred state and disruption is inevitable anyway.<a class="pilcrow" href="#section-5.3.1-2.7">¶</a>
</li>
            <li id="section-5.3.1-2.8">
                                                                   As the router receives no response for the unicast NSes, it deletes the NC entry.<a class="pilcrow" href="#section-5.3.1-2.8">¶</a>
</li>
            <li id="section-5.3.1-2.9">
                                                                    If return packets for communication initiated at Step 2 are still arriving, the router buffers a small number of those packets and starts the address resolution process again by sending a multicast NS to the solicited-node multicast address. The rightful owner responds, and the router's NC entry is updated with the rightful owner's link-local address. The buffered packet or packets are sent to that address. Any packets still arriving after the address resolution process has completed are sent to the rightful address owner as well.<a class="pilcrow" href="#section-5.3.1-2.9">¶</a>
</li>
          </ol>
<p id="section-5.3.1-3">
                                                    The rightful owner is not experiencing any disruption, as it does not send any traffic.
It would only start receiving packets intended for another host after Step 8 is completed and only if return packets for the communication initiated at Step 2 are still arriving.<a class="pilcrow" href="#section-5.3.1-3">¶</a></p>
<p id="section-5.3.1-4">

                                                    However, the same behavior would be observed if the changes specified in this document are not implemented.
                                                    If the host starts sending packets from its Optimistic Address but then detects that the address is a duplicate, the first return packet would trigger the address resolution process and would be buffered until the resolution is completed.

The buffered packet(s) and any packets still arriving after the address is resolved would be forwarded to the rightful owner of the address.
So, the rightful owner might still receive one or more packets from the flows intended for another host.
Therefore, it's safe to conclude that the changes specified in this document do not introduce any disruption for the rightful owner of the duplicated address.<a class="pilcrow" href="#section-5.3.1-4">¶</a></p>
</section>
<div id="dis_start">
<section id="section-5.3.2">
          <h4 id="name-the-rightful-owner-has-star">
<a class="section-number selfRef" href="#section-5.3.2">5.3.2. </a><a class="section-name selfRef" href="#name-the-rightful-owner-has-star">The Rightful Owner Has Started Sending Packets from the Address</a>
          </h4>
<p id="section-5.3.2-1">
                                            In this scenario, the following events are happening:<a class="pilcrow" href="#section-5.3.2-1">¶</a></p>
<ol class="normal type-1" id="section-5.3.2-2" start="1" type="1">
<li id="section-5.3.2-2.1">
                                                            The rightful owner starts sending traffic from the address (e.g., the address has just been configured or has not been recently used).<a class="pilcrow" href="#section-5.3.2-2.1">¶</a>
</li>
            <li id="section-5.3.2-2.2">
                                                                    The host configures the address and sets its state to Optimistic.<a class="pilcrow" href="#section-5.3.2-2.2">¶</a>
</li>
            <li id="section-5.3.2-2.3">
                                                                    The host sends an unsolicited NA with the Override flag set to zero and starts sending traffic from the Optimistic Address.<a class="pilcrow" href="#section-5.3.2-2.3">¶</a>
</li>
            <li id="section-5.3.2-2.4">
                                                                    The router creates a STALE entry for the address and the host link-layer address.<a class="pilcrow" href="#section-5.3.2-2.4">¶</a>
</li>
            <li id="section-5.3.2-2.5">
                                                                    The host starts DAD and detects the address duplication.<a class="pilcrow" href="#section-5.3.2-2.5">¶</a>
</li>
            <li id="section-5.3.2-2.6">
                                                                    The router receives the return traffic for the IPv6 address in question. Some flows are intended for the rightful owner of the duplicate address, while some are for the new host. As the NC entry is STALE, it sends traffic using that entry, changes it to DELAY, and waits up to DELAY_FIRST_PROBE_TIME seconds <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span>.<a class="pilcrow" href="#section-5.3.2-2.6">¶</a>
</li>
            <li id="section-5.3.2-2.7">
                                                                            The router changes the NC entry state to PROBE and sends up to MAX_UNICAST_SOLICIT unicast NSes <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> separated by RetransTimer milliseconds <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> to the host link-layer address.<a class="pilcrow" href="#section-5.3.2-2.7">¶</a>
</li>
            <li id="section-5.3.2-2.8">
                                                                    As the host has already detected the address conflict, it does not respond to the unicast NSes.<a class="pilcrow" href="#section-5.3.2-2.8">¶</a>
</li>
            <li id="section-5.3.2-2.9">
                                                                   As the router receives no response for the unicast NSes, it deletes the NC entry.<a class="pilcrow" href="#section-5.3.2-2.9">¶</a>
</li>
            <li id="section-5.3.2-2.10">
                                                                    The next packet recreates the entry and triggers the resolution process. The router buffers the packet and sends a multicast NS to the solicited-node multicast address. The rightful owner responds, and the router's NC entry is updated with the rightful owner's link-local address.<a class="pilcrow" href="#section-5.3.2-2.10">¶</a>
</li>
          </ol>
<p id="section-5.3.2-3">
                                                    As a result, the traffic for the address of the rightful owner would be sent to the host with the duplicate address instead.  The duration of the disruption can be estimated as DELAY_FIRST_PROBE_TIME*1000 + (MAX_UNICAST_SOLICIT - 1)*RetransTimer milliseconds.
                                                    As per the constants defined in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-10">Section 10</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>, this interval is equal to 5*1000 + (3 - 1)*1000 = 7000 milliseconds, or 7 seconds.<a class="pilcrow" href="#section-5.3.2-3">¶</a></p>
<p id="section-5.3.2-4">
                                                            However, it should be noted that the probability of such a scenario is rather low. Similar to the scenario discussed in <a class="xref" href="#avoid_dis_inc">Section 5.2</a>, it would require the following things to happen almost simultaneously (within tens of milliseconds in most cases):<a class="pilcrow" href="#section-5.3.2-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3.2-5.1">
                                                                            One host starts using a new IPv6 address and sending traffic without sending an unsolicited NA first.<a class="pilcrow" href="#section-5.3.2-5.1">¶</a>
</li>
            <li class="normal" id="section-5.3.2-5.2">
                                                                            Another host configures the same IPv6 address in Optimistic mode before the router receives the return traffic for the first host.<a class="pilcrow" href="#section-5.3.2-5.2">¶</a>
</li>
          </ul>
<p id="section-5.3.2-6">
As discussed in <a class="xref" href="#avoid_dis_inc">Section 5.2</a>, the disruption for the rightful owner can easily be prevented if that node implements the mechanism described in this document. Sending unsolicited NAs before initiating off-link communication would create a STALE entry in the router's NC and prevent any traffic to that address from being sent to the host with the Optimistic Address (see <a class="xref" href="#avoid_dis_exists">Section 5.1</a>).<a class="pilcrow" href="#section-5.3.2-6">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="RFC_UPD">
<section id="section-6">
      <h2 id="name-modifications-to-rfc-mandat">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-modifications-to-rfc-mandat">Modifications to RFC-Mandated Behavior</a>
      </h2>
<p id="section-6-1">
                            All normative text in this memo is contained in this section.<a class="pilcrow" href="#section-6-1">¶</a></p>
<section id="section-6.1">
        <h3 id="name-modification-to-rfc-4861-ne">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-modification-to-rfc-4861-ne">Modification to RFC 4861 (Neighbor Discovery for IP version 6 (IPv6))</a>
        </h3>
<section id="section-6.1.1">
          <h4 id="name-modification-to-section-725">
<a class="section-number selfRef" href="#section-6.1.1">6.1.1. </a><a class="section-name selfRef" href="#name-modification-to-section-725">Modification to Section 7.2.5 of RFC 4861</a>
          </h4>
<p id="section-6.1.1-1">
                              This document makes the following changes to <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.2.5">Section 7.2.5</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>:<a class="pilcrow" href="#section-6.1.1-1">¶</a></p>
<p id="section-6.1.1-2">The text in RFC 4861 is as follows:<a class="pilcrow" href="#section-6.1.1-2">¶</a></p>
<blockquote id="section-6.1.1-3">When a valid Neighbor Advertisement is received (either solicited or
   unsolicited), the Neighbor Cache is searched for the target's entry.
   If no entry exists, the advertisement <span class="bcp14">SHOULD</span> be silently discarded.
   There is no need to create an entry if none exists, since the
   recipient has apparently not initiated any communication with the
   target.<a class="pilcrow" href="#section-6.1.1-3">¶</a>
</blockquote>
<p id="section-6.1.1-4">This document updates the text as follows:<a class="pilcrow" href="#section-6.1.1-4">¶</a></p>
<blockquote id="section-6.1.1-5">
            <p id="section-6.1.1-5.1">When a valid Neighbor Advertisement is received (either solicited or
   unsolicited), the Neighbor Cache is searched for the target's entry.
   If no entry exists:<a class="pilcrow" href="#section-6.1.1-5.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1.1-5.2.1"> Hosts <span class="bcp14">SHOULD</span>  silently discard the advertisement.
   There is no need to create an entry if none exists, since the
   recipient has apparently not initiated any communication with the target.<a class="pilcrow" href="#section-6.1.1-5.2.1">¶</a>
</li>
              <li class="normal" id="section-6.1.1-5.2.2"> Routers <span class="bcp14">SHOULD</span> create a new entry for the target address with the link-layer address set to the Target Link-Layer Address Option (if supplied). The entry's reachability state <span class="bcp14">MUST</span> be set to STALE. If the received Neighbor Advertisement does not contain the Target Link-Layer Address Option, the advertisement <span class="bcp14">SHOULD</span> be silently discarded.<a class="pilcrow" href="#section-6.1.1-5.2.2">¶</a>
</li>
            </ul>
</blockquote>
</section>
<div id="UPD726">
<section id="section-6.1.2">
          <h4 id="name-modification-to-section-726">
<a class="section-number selfRef" href="#section-6.1.2">6.1.2. </a><a class="section-name selfRef" href="#name-modification-to-section-726">Modification to Section 7.2.6 of RFC 4861</a>
          </h4>
<p id="section-6.1.2-1">
                              This document makes the following changes to <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-7.2.6">Section 7.2.6</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>:<a class="pilcrow" href="#section-6.1.2-1">¶</a></p>
<p id="section-6.1.2-2">The text in RFC 4861 is as follows:<a class="pilcrow" href="#section-6.1.2-2">¶</a></p>
<blockquote id="section-6.1.2-3">Also, a node belonging to an anycast address <span class="bcp14">MAY</span> multicast
   unsolicited Neighbor Advertisements for the anycast address when the
   node's link-layer address changes.<a class="pilcrow" href="#section-6.1.2-3">¶</a>
</blockquote>
<p id="section-6.1.2-4">This document updates the text as follows:<a class="pilcrow" href="#section-6.1.2-4">¶</a></p>
<blockquote id="section-6.1.2-5">
            <p id="section-6.1.2-5.1">Also, a node belonging to an anycast address <span class="bcp14">MAY</span> multicast
   unsolicited Neighbor Advertisements for the anycast address when the
   node's link-layer address changes.<a class="pilcrow" href="#section-6.1.2-5.1">¶</a></p>
<p id="section-6.1.2-5.2">A node may also wish to notify its first-hop routers when it configures a new global IPv6 address so the routers can proactively populate their Neighbor Caches with the corresponding entries. In such cases, a node <span class="bcp14">SHOULD</span> send up to MAX_NEIGHBOR_ADVERTISEMENT
   Neighbor Advertisement messages. If the address is preferred, then the Override flag <span class="bcp14">SHOULD NOT</span> be set. If the address is in the Optimistic state, then the  Override flag <span class="bcp14">MUST NOT</span> be set. The destination address <span class="bcp14">SHOULD</span> be set to the all-routers multicast address. These advertisements <span class="bcp14">MUST</span> be separated by at
   least RetransTimer seconds. The first advertisement <span class="bcp14">SHOULD</span> be sent as soon as one of the
      following events happens:<a class="pilcrow" href="#section-6.1.2-5.2">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6.1.2-5.3">
              <dt id="section-6.1.2-5.3.1">If Optimistic DAD <span>[<a class="xref" href="#RFC4429">RFC4429</a>]</span> is used:</dt>
              <dd id="section-6.1.2-5.3.2" style="margin-left: 1.5em">A new Optimistic Address is assigned
                                              to the node interface.<a class="pilcrow" href="#section-6.1.2-5.3.2">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-6.1.2-5.3.3">If Optimistic DAD is not used:</dt>
              <dd id="section-6.1.2-5.3.4" style="margin-left: 1.5em">An address changes the state from
         tentative to preferred.<a class="pilcrow" href="#section-6.1.2-5.3.4">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</blockquote>
</section>
</div>
</section>
</section>
</div>
<section id="section-7">
      <h2 id="name-solution-limitations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-solution-limitations">Solution Limitations</a>
      </h2>
<p id="section-7-1">
                              The solution described in this document provides some improvement for a node configuring a new IPv6 address and starting to send traffic from it.
                              However, that approach does not completely eliminate the scenario when a router receives some transit traffic for an address without the corresponding Neighbor Cache entry.
                              For example:<a class="pilcrow" href="#section-7-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7-2.1">If the host starts using an already-configured IPv6 address after a long period of inactivity, the router might not have the NC entry for that address anymore, as old/expired entries are deleted.<a class="pilcrow" href="#section-7-2.1">¶</a>
</li>
        <li class="normal" id="section-7-2.2">Clearing the router's Neighbor Cache would trigger packet loss for all actively used addresses removed from the cache.<a class="pilcrow" href="#section-7-2.2">¶</a>
</li>
      </ul>
</section>
<div id="others">
<section id="section-8">
      <h2 id="name-solutions-considered-but-di">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-solutions-considered-but-di">Solutions Considered but Discarded</a>
      </h2>
<p id="section-8-1">
                      There are other possible approaches to address the problem. For example:<a class="pilcrow" href="#section-8-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-2.1">
                                      Just do nothing.<a class="pilcrow" href="#section-8-2.1">¶</a>
</li>
        <li class="normal" id="section-8-2.2">
                                      Migrate from the "reactive" Neighbor Discovery <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> to the registration-based mechanisms <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>.<a class="pilcrow" href="#section-8-2.2">¶</a>
</li>
        <li class="normal" id="section-8-2.3">
                                     Create new entries in the router's Neighbor Cache by gleaning from Neighbor Discovery DAD messages.<a class="pilcrow" href="#section-8-2.3">¶</a>
</li>
        <li class="normal" id="section-8-2.4">
                                      Initiate bidirectional communication from the host to the router using the host GUA.<a class="pilcrow" href="#section-8-2.4">¶</a>
</li>
        <li class="normal" id="section-8-2.5">
                                      Make the probing logic on hosts more robust.<a class="pilcrow" href="#section-8-2.5">¶</a>
</li>
        <li class="normal" id="section-8-2.6">
                                      Increase the buffer size on routers.<a class="pilcrow" href="#section-8-2.6">¶</a>
</li>
        <li class="normal" id="section-8-2.7">
                                      Transit data plane traffic from an unknown address (an address without the corresponding Neighbor Cache entry) to trigger an address resolution process on the router.<a class="pilcrow" href="#section-8-2.7">¶</a>
</li>
      </ul>
<p id="section-8-3">
                      It should be noted that some of those options are already implemented by some vendors. The following sections discuss those approaches and the reasons they were discarded.<a class="pilcrow" href="#section-8-3">¶</a></p>
<section id="section-8.1">
        <h3 id="name-do-nothing">
<a class="section-number selfRef" href="#section-8.1">8.1. </a><a class="section-name selfRef" href="#name-do-nothing">Do Nothing</a>
        </h3>
<p id="section-8.1-1">
                              One of the possible approaches might be to declare that everything is working as intended and let the upper-layer protocols deal with packet loss. The obvious drawbacks include:<a class="pilcrow" href="#section-8.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.1-2.1">
                                                      Unhappy users.<a class="pilcrow" href="#section-8.1-2.1">¶</a>
</li>
          <li class="normal" id="section-8.1-2.2">
                                                      Many support tickets.<a class="pilcrow" href="#section-8.1-2.2">¶</a>
</li>
          <li class="normal" id="section-8.1-2.3">
                                                      More resistance to deploying IPv6 and IPv6-only networks.<a class="pilcrow" href="#section-8.1-2.3">¶</a>
</li>
        </ul>
</section>
<section id="section-8.2">
        <h3 id="name-change-to-the-registration-">
<a class="section-number selfRef" href="#section-8.2">8.2. </a><a class="section-name selfRef" href="#name-change-to-the-registration-">Change to the Registration-Based Neighbor Discovery</a>
        </h3>
<p id="section-8.2-1">
                                      The most radical approach would be to move away from the reactive ND as defined in <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> and expand the registration-based ND <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span> <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span> used in IPv6 over Low-Power Wireless Personal Area Networks (6LoWPANs) to the rest of the IPv6 deployments.
                                              This option requires some investigation and discussion.
                                              However, significant changes to the existing IPv6 implementations would be needed, so an unclear adoption timeline makes this approach less preferable than the approach specified in this document.<a class="pilcrow" href="#section-8.2-1">¶</a></p>
</section>
<section id="section-8.3">
        <h3 id="name-host-sending-ns-to-the-rout">
<a class="section-number selfRef" href="#section-8.3">8.3. </a><a class="section-name selfRef" href="#name-host-sending-ns-to-the-rout">Host Sending NS to the Router Address from Its GUA</a>
        </h3>
<p id="section-8.3-1">
                              The host could force the creation of a STALE entry for its GUA in the router's Neighbor Cache by sending the following Neighbor Solicitation message:<a class="pilcrow" href="#section-8.3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.3-2.1">
                                              The NS source address is the host GUA.<a class="pilcrow" href="#section-8.3-2.1">¶</a>
</li>
          <li class="normal" id="section-8.3-2.2">
                                                      The destination address is the default router IPv6 address.<a class="pilcrow" href="#section-8.3-2.2">¶</a>
</li>
          <li class="normal" id="section-8.3-2.3">
                                              The Source Link-Layer Address Option contains the host link-layer address.<a class="pilcrow" href="#section-8.3-2.3">¶</a>
</li>
          <li class="normal" id="section-8.3-2.4">
                                              The target address is the host's default router address (the default router address the host received in the RA).<a class="pilcrow" href="#section-8.3-2.4">¶</a>
</li>
        </ul>
<p id="section-8.3-3">
                              The main disadvantages of this approach are as follows:<a class="pilcrow" href="#section-8.3-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.3-4.1">
                                              It would not work for Optimistic Addresses, as <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4429#section-2.2">Section 2.2</a> of [<a class="xref" href="#RFC4429">RFC4429</a>]</span> explicitly prohibits sending Neighbor Solicitations from an Optimistic Address.<a class="pilcrow" href="#section-8.3-4.1">¶</a>
</li>
          <li class="normal" id="section-8.3-4.2">
                                              If first-hop redundancy is deployed in the network, the NS would reach the active router only, so all backup routers (or all active routers except one) would not get their Neighbor Cache updated.<a class="pilcrow" href="#section-8.3-4.2">¶</a>
</li>
          <li class="normal" id="section-8.3-4.3">
                                                      Some wireless devices are known to alter ND packets and perform various nonobvious forms of ND proxy actions.
                                                     In some cases, unsolicited NAs might not even reach the routers.<a class="pilcrow" href="#section-8.3-4.3">¶</a>
</li>
        </ul>
</section>
<section id="section-8.4">
        <h3 id="name-host-sending-router-solicit">
<a class="section-number selfRef" href="#section-8.4">8.4. </a><a class="section-name selfRef" href="#name-host-sending-router-solicit">Host Sending Router Solicitation from Its GUA</a>
        </h3>
<p id="section-8.4-1">
                                      The host could send a Router Solicitation message to the all-routers multicast address, using its GUA as a source.
                                      If the host link-layer address is included in the Source Link-Layer Address Option, the router would create a STALE entry for the host GUA as per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4861#section-6.2.6">Section 6.2.6</a> of [<a class="xref" href="#RFC4861">RFC4861</a>]</span>.
                                      However, this approach cannot be used if the GUA is in the Optimistic state: <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4429#section-2.2">Section 2.2</a> of [<a class="xref" href="#RFC4429">RFC4429</a>]</span>  explicitly prohibits using an Optimistic Address as the source address of a Router Solicitation with a SLLAO, as it might cause disruption for the rightful owner of the address in the case of a collision.
                                      So, for the Optimistic Addresses, the host can send an RS without a SLLAO included.
                                      In that case, the router may respond with either a multicast or unicast RA (only the latter would create a cache entry).<a class="pilcrow" href="#section-8.4-1">¶</a></p>
<p id="section-8.4-2">
                              This approach has the following drawbacks:<a class="pilcrow" href="#section-8.4-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.4-3.1">
                                                      If the address is in the Optimistic state, the RS cannot contain a SLLAO. As a result, the router would only create a cache entry if solicited RAs are sent as unicast.
                                                      Routers sending solicited RAs as multicast would not create a new cache entry, as they do not need to send a unicast packet back to the host.<a class="pilcrow" href="#section-8.4-3.1">¶</a>
</li>
          <li class="normal" id="section-8.4-3.2">
                                                      There might be a random delay between receiving an RS and sending a unicast RA back (and creating a cache entry), which might undermine the idea of creating the cache entry proactively.<a class="pilcrow" href="#section-8.4-3.2">¶</a>
</li>
          <li class="normal" id="section-8.4-3.3">
                                                      Some wireless devices are known to intercept ND packets and perform various nonobvious forms of ND proxy actions. In some cases, the RS might not even reach the routers.<a class="pilcrow" href="#section-8.4-3.3">¶</a>
</li>
        </ul>
</section>
<section id="section-8.5">
        <h3 id="name-routers-populating-their-ca">
<a class="section-number selfRef" href="#section-8.5">8.5. </a><a class="section-name selfRef" href="#name-routers-populating-their-ca">Routers Populating Their Caches by Gleaning from Neighbor Discovery Packets</a>
        </h3>
<p id="section-8.5-1">
                               Routers may be able to learn about new addresses by gleaning from the DAD Neighbor Solicitation messages.
                               The router could listen to all solicited-node multicast address groups and, upon receiving a Neighbor Solicitation from the unspecified address, search its Neighbor Cache for the solicitation's target address.
                               If no entry exists, the router may create an entry, set its reachability state to INCOMPLETE, and start the address resolution process for that entry.<a class="pilcrow" href="#section-8.5-1">¶</a></p>
<p id="section-8.5-2">
                              The same solution was proposed in <span>[<a class="xref" href="#I-D.halpern-6man-nd-pre-resolve-addr">ND-ADDR-RES</a>]</span>. Some routing vendors already support such optimization. However, this approach has a number of drawbacks and therefore should not be used as the only solution:<a class="pilcrow" href="#section-8.5-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.5-3.1">
                                                      Routers need to receive all multicast Neighbor Discovery packets; this might negatively impact a router's CPU.<a class="pilcrow" href="#section-8.5-3.1">¶</a>
</li>
          <li class="normal" id="section-8.5-3.2">
                                                      If the router starts the address resolution process as soon as it receives the DAD Neighbor Solicitation, the host might still be performing DAD and the target address might be tentative.
                                                      In that case, the host <span class="bcp14">SHOULD</span> silently ignore the received Neighbor Solicitation from the router as per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4862#section-5.4.3">Section 5.4.3</a> of [<a class="xref" href="#RFC4862">RFC4862</a>]</span>. 
                                                      As a result, the router might not be able to complete the address resolution process before the return traffic arrives.<a class="pilcrow" href="#section-8.5-3.2">¶</a>
</li>
        </ul>
</section>
<section id="section-8.6">
        <h3 id="name-initiating-host-to-router-c">
<a class="section-number selfRef" href="#section-8.6">8.6. </a><a class="section-name selfRef" href="#name-initiating-host-to-router-c">Initiating Host-to-Router Communication</a>
        </h3>
<p id="section-8.6-1">
                              The host may force the router to start address resolution by sending a data packet such as ping or traceroute to its default router link-local address, using the GUA as a source address.  
                              As the RTT to the default router is lower than the RTT to any off-link destinations, it's quite likely that the router would start the Neighbor Discovery process for the host GUA before the first packet of the returning traffic arrives.<a class="pilcrow" href="#section-8.6-1">¶</a></p>
<p id="section-8.6-2"> This approach has the following drawbacks:<a class="pilcrow" href="#section-8.6-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.6-3.1">
                                                      Data packets to the router's link-local address could be blocked by a security policy or control plane protection mechanism.<a class="pilcrow" href="#section-8.6-3.1">¶</a>
</li>
          <li class="normal" id="section-8.6-3.2">
                                                      It introduces an additional overhead for the router's control plane (in addition to processing ND packets, the data packet needs to be processed as well).<a class="pilcrow" href="#section-8.6-3.2">¶</a>
</li>
          <li class="normal" id="section-8.6-3.3">
                                                      Unless the data packet is sent to the all-routers ff02::2 multicast address, if the network provides a first-hop redundancy, then only the active router would create a new cache entry.<a class="pilcrow" href="#section-8.6-3.3">¶</a>
</li>
        </ul>
</section>
<section id="section-8.7">
        <h3 id="name-making-the-probing-logic-on">
<a class="section-number selfRef" href="#section-8.7">8.7. </a><a class="section-name selfRef" href="#name-making-the-probing-logic-on">Making the Probing Logic on Hosts More Robust</a>
        </h3>
<p id="section-8.7-1">
                                      Theoretically, the probing logic on hosts might be modified to better deal with initial packet loss. For example, only one probe can be sent, or probe retransmit intervals can be reduced. However, this approach has a number of drawbacks:<a class="pilcrow" href="#section-8.7-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.7-2.1">It would require updating all possible applications that perform probing, while the solution described in this document is implemented at the operating-system level.<a class="pilcrow" href="#section-8.7-2.1">¶</a>
</li>
          <li class="normal" id="section-8.7-2.2">
            <p id="section-8.7-2.2.1">Some implementations need to send multiple probes. Examples include but are not limited to:<a class="pilcrow" href="#section-8.7-2.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.7-2.2.2.1">Sending AAAA and A record DNS probes in parallel.<a class="pilcrow" href="#section-8.7-2.2.2.1">¶</a>
</li>
              <li class="normal" id="section-8.7-2.2.2.2">Detecting captive portals, which often requires sending multiple packets.<a class="pilcrow" href="#section-8.7-2.2.2.2">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-8.7-2.3">
            <p id="section-8.7-2.3.1">While it would increase the probability that the probing will complete successfully, there are multiple cases when packet loss would still occur:<a class="pilcrow" href="#section-8.7-2.3.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.7-2.3.2.1"> The probe response consists of multiple packets, so all but the first one are dropped.<a class="pilcrow" href="#section-8.7-2.3.2.1">¶</a>
</li>
              <li class="normal" id="section-8.7-2.3.2.2"> There are multiple applications on the same host sending traffic, and return packets arrive simultaneously.<a class="pilcrow" href="#section-8.7-2.3.2.2">¶</a>
</li>
              <li class="normal" id="section-8.7-2.3.2.3"> There are multiple first-hop routers in the network. The first probe packet creates the NC entry on one of them. The subsequent return traffic flows might cross other routers and still experience the issue.<a class="pilcrow" href="#section-8.7-2.3.2.3">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-8.7-2.4">
                                    Reducing the probe retransmit interval unnecessarily increases network utilization and might cause network congestion.<a class="pilcrow" href="#section-8.7-2.4">¶</a>
</li>
        </ul>
</section>
<section id="section-8.8">
        <h3 id="name-increasing-the-buffer-size-">
<a class="section-number selfRef" href="#section-8.8">8.8. </a><a class="section-name selfRef" href="#name-increasing-the-buffer-size-">Increasing the Buffer Size on Routers</a>
        </h3>
<p id="section-8.8-1">
                                              Increasing the buffer size and buffering more packets would exacerbate issues described in <span>[<a class="xref" href="#RFC6583">RFC6583</a>]</span> and make the router more vulnerable to ND-based denial-of-service attacks.<a class="pilcrow" href="#section-8.8-1">¶</a></p>
</section>
<section id="section-8.9">
        <h3 id="name-transit-data-plane-traffic-">
<a class="section-number selfRef" href="#section-8.9">8.9. </a><a class="section-name selfRef" href="#name-transit-data-plane-traffic-">Transit Data Plane Traffic from a New Address to Trigger Address Resolution</a>
        </h3>
<p id="section-8.9-1">
                              When a router receives a transit packet sourced by an on-link neighbor node, it might check for the presence of a Neighbor Cache entry for the packet source address and, if the entry does not exist, start the address resolution process.
                              This approach does ensure that a Neighbor Cache entry is proactively created every time a new, previously unseen GUA is used for sending off-link traffic.
However, this approach has a number of limitations. In particular:<a class="pilcrow" href="#section-8.9-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.9-2.1">If traffic flows are asymmetrical, the return traffic might not transit the same router as the original traffic that triggered the address resolution process.
So, the Neighbor Cache entry is created on the "wrong" router, not the one that actually needs the Neighbor Cache entry for the host address.<a class="pilcrow" href="#section-8.9-2.1">¶</a>
</li>
          <li class="normal" id="section-8.9-2.2">
        The functionality needs to be limited to explicitly configured networks/interfaces, as the router needs to distinguish between on-link addresses (addresses for which the router needs to have Neighbor Cache entries) and the rest of the address space. 
        The proactive address resolution process must only be triggered by packets from the prefixes known to be on-link. Otherwise, traffic from spoofed source addresses or any transit traffic could lead to Neighbor Cache exhaustion.<a class="pilcrow" href="#section-8.9-2.2">¶</a>
</li>
          <li class="normal" id="section-8.9-2.3">
Implementing such functionality is much more complicated than all other solutions, as it would involve complex interactions between the data plane and the control plane.<a class="pilcrow" href="#section-8.9-2.3">¶</a>
</li>
        </ul>
</section>
</section>
</div>
<div id="IANA">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-9-1">
      This document has no IANA actions.<a class="pilcrow" href="#section-9-1">¶</a></p>
</section>
</div>
<div id="Security">
<section id="section-10">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-10-1">
                    One of the potential attack vectors to consider is cache spoofing, where the attacker might try to install a cache entry for the victim's IPv6 address and the attacker's link-layer address. However, it should be noted that this document does not propose any changes for the scenario when the Neighbor Cache for a given IPv6 address already exists.
                    Therefore, there are no new vectors for an attacker to override an existing cache entry.<a class="pilcrow" href="#section-10-1">¶</a></p>
<p id="section-10-2">
<a class="xref" href="#avoid_dis">Section 5</a> describes some corner cases when a host with a duplicate Optimistic Address might get some packets intended for the rightful owner of the address. However, such scenarios do not introduce any new attack vectors: even without the changes discussed in this document, an attacker can easily override the router's Neighbor Cache and redirect the traffic by sending NAs with the Solicited flag set.
As discussed in <a class="xref" href="#dis_start">Section 5.3.2</a>, the worst-case scenario might cause a disruption for up to 7 seconds. Because this scenario is highly unlikely, this risk of disruption is considered acceptable. More importantly, for all cases described in <a class="xref" href="#avoid_dis">Section 5</a>, the rightful owner can prevent disruption caused by an accidental address duplication just by implementing the mechanism described in this document. If the rightful owner sends unsolicited NAs before using the address, the STALE entry would be created on the router's NC, and any subsequent unsolicited NAs sent from the host with an Optimistic Address would not override the NC entry.<a class="pilcrow" href="#section-10-2">¶</a></p>
<p id="section-10-3">
                    A malicious host could attempt to exhaust the Neighbor Cache on the router by creating a large number of STALE entries. However, this attack vector is not new, and the mechanism specified in this document does not increase the risk of such an attack: the attacker could do it, for example, by sending an NS or RS packet with a SLLAO included. All recommendations from <span>[<a class="xref" href="#RFC6583">RFC6583</a>]</span> still apply.<a class="pilcrow" href="#section-10-3">¶</a></p>
<p id="section-10-4">
                    Announcing a new address to the all-routers multicast address may inform an on-link attacker about IPv6 addresses assigned to the host. However, hiding information about the specific IPv6 address should not be considered a security measure, as such information is usually disclosed via DAD to all nodes anyway if MLD snooping is not enabled. Network administrators can also mitigate this issue by enabling MLD snooping on the link-layer devices to prevent IPv6 link-local multicast packets from being flooded to all on-link nodes. 
                            If peer-to-peer on-link communications are not desirable for a given network segment, they should be prevented by proper Layer 2 security mechanisms. Therefore, the risk of allowing hosts to send unsolicited Neighbor Advertisements to the all-routers multicast address is low.<a class="pilcrow" href="#section-10-4">¶</a></p>
<p id="section-10-5">
                    It should be noted that the mechanism discussed in this document allows hosts to proactively inform their routers about global IPv6 addresses existing on-link. Routers could use that information to distinguish between used and unused addresses to mitigate Neighbor Cache exhaustion DoS attacks as described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc3756#section-4.3.2">Section 4.3.2</a> of [<a class="xref" href="#RFC3756">RFC3756</a>]</span> and in <span>[<a class="xref" href="#RFC6583">RFC6583</a>]</span>.<a class="pilcrow" href="#section-10-5">¶</a></p>
</section>
</div>
<section id="section-11">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-11">11. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-11.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-11.1">11.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4291">[RFC4291]</dt>
        <dd>
<span class="refAuthor">Hinden, R.</span> and <span class="refAuthor">S. Deering</span>, <span class="refTitle">"IP Version 6 Addressing Architecture"</span>, <span class="seriesInfo">RFC 4291</span>, <span class="seriesInfo">DOI 10.17487/RFC4291</span>, <time class="refDate" datetime="2006-02">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4291">https://www.rfc-editor.org/info/rfc4291</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4429">[RFC4429]</dt>
        <dd>
<span class="refAuthor">Moore, N.</span>, <span class="refTitle">"Optimistic Duplicate Address Detection (DAD) for IPv6"</span>, <span class="seriesInfo">RFC 4429</span>, <span class="seriesInfo">DOI 10.17487/RFC4429</span>, <time class="refDate" datetime="2006-04">April 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4429">https://www.rfc-editor.org/info/rfc4429</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4861">[RFC4861]</dt>
        <dd>
<span class="refAuthor">Narten, T.</span>, <span class="refAuthor">Nordmark, E.</span>, <span class="refAuthor">Simpson, W.</span>, and <span class="refAuthor">H. Soliman</span>, <span class="refTitle">"Neighbor Discovery for IP version 6 (IPv6)"</span>, <span class="seriesInfo">RFC 4861</span>, <span class="seriesInfo">DOI 10.17487/RFC4861</span>, <time class="refDate" datetime="2007-09">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4861">https://www.rfc-editor.org/info/rfc4861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4862">[RFC4862]</dt>
        <dd>
<span class="refAuthor">Thomson, S.</span>, <span class="refAuthor">Narten, T.</span>, and <span class="refAuthor">T. Jinmei</span>, <span class="refTitle">"IPv6 Stateless Address Autoconfiguration"</span>, <span class="seriesInfo">RFC 4862</span>, <span class="seriesInfo">DOI 10.17487/RFC4862</span>, <time class="refDate" datetime="2007-09">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4862">https://www.rfc-editor.org/info/rfc4862</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-11.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-11.2">11.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.halpern-6man-nd-pre-resolve-addr">[ND-ADDR-RES]</dt>
        <dd>
<span class="refAuthor">Chen, I.</span> and <span class="refAuthor">J. Halpern</span>, <span class="refTitle">"Triggering ND Address Resolution on Receiving DAD-NS"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-halpern-6man-nd-pre-resolve-addr-00</span>, <time class="refDate" datetime="2014-01-10">10 January 2014</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-halpern-6man-nd-pre-resolve-addr-00">https://datatracker.ietf.org/doc/html/draft-halpern-6man-nd-pre-resolve-addr-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3756">[RFC3756]</dt>
        <dd>
<span class="refAuthor">Nikander, P., Ed.</span>, <span class="refAuthor">Kempf, J.</span>, and <span class="refAuthor">E. Nordmark</span>, <span class="refTitle">"IPv6 Neighbor Discovery (ND) Trust Models and Threats"</span>, <span class="seriesInfo">RFC 3756</span>, <span class="seriesInfo">DOI 10.17487/RFC3756</span>, <time class="refDate" datetime="2004-05">May 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3756">https://www.rfc-editor.org/info/rfc3756</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4541">[RFC4541]</dt>
        <dd>
<span class="refAuthor">Christensen, M.</span>, <span class="refAuthor">Kimball, K.</span>, and <span class="refAuthor">F. Solensky</span>, <span class="refTitle">"Considerations for Internet Group Management Protocol (IGMP) and Multicast Listener Discovery (MLD) Snooping Switches"</span>, <span class="seriesInfo">RFC 4541</span>, <span class="seriesInfo">DOI 10.17487/RFC4541</span>, <time class="refDate" datetime="2006-05">May 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4541">https://www.rfc-editor.org/info/rfc4541</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6583">[RFC6583]</dt>
        <dd>
<span class="refAuthor">Gashinsky, I.</span>, <span class="refAuthor">Jaeggli, J.</span>, and <span class="refAuthor">W. Kumari</span>, <span class="refTitle">"Operational Neighbor Discovery Problems"</span>, <span class="seriesInfo">RFC 6583</span>, <span class="seriesInfo">DOI 10.17487/RFC6583</span>, <time class="refDate" datetime="2012-03">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6583">https://www.rfc-editor.org/info/rfc6583</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6775">[RFC6775]</dt>
        <dd>
<span class="refAuthor">Shelby, Z., Ed.</span>, <span class="refAuthor">Chakrabarti, S.</span>, <span class="refAuthor">Nordmark, E.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"Neighbor Discovery Optimization for IPv6 over Low-Power Wireless Personal Area Networks (6LoWPANs)"</span>, <span class="seriesInfo">RFC 6775</span>, <span class="seriesInfo">DOI 10.17487/RFC6775</span>, <time class="refDate" datetime="2012-11">November 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6775">https://www.rfc-editor.org/info/rfc6775</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8305">[RFC8305]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span> and <span class="refAuthor">T. Pauly</span>, <span class="refTitle">"Happy Eyeballs Version 2: Better Connectivity Using Concurrency"</span>, <span class="seriesInfo">RFC 8305</span>, <span class="seriesInfo">DOI 10.17487/RFC8305</span>, <time class="refDate" datetime="2017-12">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8305">https://www.rfc-editor.org/info/rfc8305</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8505">[RFC8505]</dt>
        <dd>
<span class="refAuthor">Thubert, P., Ed.</span>, <span class="refAuthor">Nordmark, E.</span>, <span class="refAuthor">Chakrabarti, S.</span>, and <span class="refAuthor">C. Perkins</span>, <span class="refTitle">"Registration Extensions for IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Neighbor Discovery"</span>, <span class="seriesInfo">RFC 8505</span>, <span class="seriesInfo">DOI 10.17487/RFC8505</span>, <time class="refDate" datetime="2018-11">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8505">https://www.rfc-editor.org/info/rfc8505</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8981">[RFC8981]</dt>
      <dd>
<span class="refAuthor">Gont, F.</span>, <span class="refAuthor">Krishnan, S.</span>, <span class="refAuthor">Narten, T.</span>, and <span class="refAuthor">R. Draves</span>, <span class="refTitle">"Temporary Address Extensions for Stateless Address Autoconfiguration in IPv6"</span>, <span class="seriesInfo">RFC 8981</span>, <span class="seriesInfo">DOI 10.17487/RFC8981</span>, <time class="refDate" datetime="2021-02">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8981">https://www.rfc-editor.org/info/rfc8981</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">
                    Thanks to the following people (in alphabetical order) for their
                            comments, review, and feedback: <span class="contact-name">Mikael Abrahamsson</span>, <span class="contact-name">Stewart Bryant</span>, <span class="contact-name">Lorenzo Colitti</span>, <span class="contact-name">Roman Danyliw</span>, <span class="contact-name">Owen DeLong</span>, <span class="contact-name">Martin Duke</span>, <span class="contact-name">Igor Gashinsky</span>, <span class="contact-name">Carles Gomez</span>, <span class="contact-name">Fernando Gont</span>, <span class="contact-name">Tatuya Jinmei</span>, <span class="contact-name">Benjamin Kaduk</span>, <span class="contact-name">Scott Kelly</span>, <span class="contact-name">Erik Kline</span>, <span class="contact-name">Warren Kumari</span>, <span class="contact-name">Barry Leiba</span>, <span class="contact-name">Jordi Palet Martinez</span>, <span class="contact-name">Erik Nordmark</span>, <span class="contact-name">Michael Richardson</span>, <span class="contact-name">Dan Romascanu</span>, <span class="contact-name">Zaheduzzaman Sarker</span>, <span class="contact-name">Michael Scharf</span>, <span class="contact-name">John Scudder</span>, <span class="contact-name">Mark Smith</span>, <span class="contact-name">Dave Thaler</span>, <span class="contact-name">Pascal Thubert</span>, <span class="contact-name">Loganaden Velvindron</span>, and <span class="contact-name">Éric Vyncke</span>.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a class="section-name selfRef" href="#name-authors-address">Author's Address</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Jen Linkova</span></div>
<div class="left" dir="auto"><span class="org">Google</span></div>
<div class="left" dir="auto"><span class="street-address">1 Darling Island Rd</span></div>
<div class="left" dir="auto">
<span class="locality">Pyrmont</span> <span class="region">NSW</span> <span class="postal-code">2009</span>
</div>
<div class="left" dir="auto"><span class="country-name">Australia</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:furry@google.com">furry@google.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>