<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9441: Static Context Header Compression (SCHC) Compound Acknowledgement (ACK)</title>
<meta content="Juan Carlos Zúñiga" name="author"/>
<meta content="Carles Gomez" name="author"/>
<meta content="Sergio Aguilar" name="author"/>
<meta content="Laurent Toutain" name="author"/>
<meta content="Sandra Céspedes" name="author"/>
<meta content="Diego Wistuba" name="author"/>
<meta content="
       This document updates the Static Context Header Compression (SCHC) and fragmentation protocol (RFC 8724) and the corresponding YANG module (RFC 9363). It defines a SCHC Compound Acknowledgement (ACK) message
format and procedure, which are intended to reduce the number of response transmissions (i.e., SCHC ACKs) in the ACK-on-Error Mode, by accumulating bitmaps of several windows in a single SCHC message
(i.e., the SCHC Compound ACK).  
       Both the message format and procedure are generic, so they can be used, for instance, by any of the four Low-Power Wide Area Network (LPWAN) technologies defined in RFC 8376, which are Sigfox, Long Range Wide Area Network (LoRaWAN), Narrowband Internet of Things (NB-IoT), and IEEE 802.15.4w.


 
    " name="description"/>
<meta content="xml2rfc 3.17.4" name="generator"/>
<meta content="SCHC" name="keyword"/>
<meta content="LPWAN" name="keyword"/>
<meta content="IoT" name="keyword"/>
<meta content="Fragmentation" name="keyword"/>
<meta content="Reliable Delivery" name="keyword"/>
<meta content="Link Layer Protocols" name="keyword"/>
<meta content="Cross-Layer Protocols" name="keyword"/>
<meta content="Adaptation Layer" name="keyword"/>
<meta content="Acknowledgment" name="keyword"/>
<meta content="Sigfox" name="keyword"/>
<meta content="LoRaWAN" name="keyword"/>
<meta content="NB-IoT" name="keyword"/>
<meta content="Compound ACK" name="keyword"/>
<meta content="9441" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.17.4
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 56.1
-->
<link href="rfc9441.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef,
.iref + a[href].internal {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9441" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-lpwan-schc-compound-ack-17" rel="prev"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9441</td>
<td class="center">SCHC Compound ACK</td>
<td class="right">July 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Zúñiga, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9441">9441</a></dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc8724">8724</a>, <a class="eref" href="https://www.rfc-editor.org/rfc/rfc9363">9363</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2023-07">July 2023</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">JC. Zúñiga</div>
<div class="org">Cisco</div>
</div>
<div class="author">
      <div class="author-name">C. Gomez</div>
<div class="org">Universitat Politècnica de Catalunya</div>
</div>
<div class="author">
      <div class="author-name">S. Aguilar</div>
<div class="org">Universitat Politècnica de Catalunya</div>
</div>
<div class="author">
      <div class="author-name">L. Toutain</div>
<div class="org">IMT-Atlantique</div>
</div>
<div class="author">
      <div class="author-name">S. Céspedes</div>
<div class="org">Concordia University</div>
</div>
<div class="author">
      <div class="author-name">D. Wistuba</div>
<div class="org">NIC Labs, Universidad de Chile</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9441</h1>
<h1 id="title">Static Context Header Compression (SCHC) Compound Acknowledgement (ACK)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document updates the Static Context Header Compression (SCHC) and fragmentation protocol (RFC 8724) and the corresponding YANG module (RFC 9363). It defines a SCHC Compound Acknowledgement (ACK) message
format and procedure, which are intended to reduce the number of response transmissions (i.e., SCHC ACKs) in the ACK-on-Error Mode, by accumulating bitmaps of several windows in a single SCHC message
(i.e., the SCHC Compound ACK).<a class="pilcrow" href="#section-abstract-1">¶</a></p>
<p id="section-abstract-2">Both the message format and procedure are generic, so they can be used, for instance, by any of the four Low-Power Wide Area Network (LPWAN) technologies defined in RFC 8376, which are Sigfox, Long Range Wide Area Network (LoRaWAN), Narrowband Internet of Things (NB-IoT), and IEEE 802.15.4w.<a class="pilcrow" href="#section-abstract-2">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9441">https://www.rfc-editor.org/info/rfc9441</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-terminology">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-schc-compound-ack">SCHC Compound ACK</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p class="keepWithNext" id="section-toc.1-1.3.2.1.1"><a class="auto internal xref" href="#section-3.1">3.1</a>.  <a class="internal xref" href="#name-schc-compound-ack-message-f">SCHC Compound ACK Message Format</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="auto internal xref" href="#section-3.2">3.2</a>.  <a class="internal xref" href="#name-schc-compound-ack-behavior">SCHC Compound ACK Behavior</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a class="auto internal xref" href="#section-3.2.1">3.2.1</a>.  <a class="internal xref" href="#name-ack-on-error-mode-replaces-">ACK-on-Error Mode (Replaces Section 8.4.3, RFC 8724)</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-schc-compound-ack-example">SCHC Compound ACK Example</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-schc-compound-ack-yang-data">SCHC Compound ACK YANG Data Model</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="auto internal xref" href="#section-5.1">5.1</a>.  <a class="internal xref" href="#name-schc-yang-data-model-extens">SCHC YANG Data Model Extension</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="auto internal xref" href="#section-5.2">5.2</a>.  <a class="internal xref" href="#name-schc-yang-tree-extension">SCHC YANG Tree Extension</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-schc-compound-ack-parameter">SCHC Compound ACK Parameters</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a class="auto internal xref" href="#section-8.1">8.1</a>.  <a class="internal xref" href="#name-uri-registration">URI Registration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a class="auto internal xref" href="#section-8.2">8.2</a>.  <a class="internal xref" href="#name-yang-module-name-registrati">YANG Module Name Registration</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#section-9">9</a>.  <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="auto internal xref" href="#section-9.1">9.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="auto internal xref" href="#section-9.2">9.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#appendix-A"></a><a class="internal xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">The Generic Framework for Static Context Header Compression (SCHC) and Fragmentation specification <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span> describes two mechanisms:
i) a protocol header compression scheme and ii) a frame fragmentation and loss recovery functionality. Either can be used on top of radio technologies, such as the four Low-Power Wide Area Networks (LPWANs) listed in <span>[<a class="cite xref" href="#RFC8376">RFC8376</a>]</span>, which are Sigfox, LoRaWAN, NB-IoT, and IEEE 802.15.4w. These LPWANs have similar characteristics, such as star-oriented topologies, network architecture, and
connected devices with built-in applications.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">SCHC offers a great level of flexibility to accommodate all these LPWAN technologies. Even though there are a number of similarities between
them, some differences exist with respect to the transmission characteristics, payload sizes, etc. Hence, there are optimal parameters and modes of operation
that can be used when SCHC is used on top of a specific LPWAN technology.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">
   In ACK-on-Error mode in <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>, the SCHC Packet is fragmented into pieces called tiles, where all tiles are the same size except for the last one, which can be smaller. Successive tiles are grouped in windows of fixed size.
    A SCHC Fragment carries one or several contiguous tiles, which may span multiple windows. When sending all tiles from all windows, the last tile is sent in an All-1 SCHC Fragment. The SCHC receiver will send a SCHC ACK reporting on the reception of exactly one window of tiles after receiving the All-1 SCHC Fragment. In case of SCHC Fragment losses, a bitmap is added to the failure SCHC ACK, where each bit in the bitmap corresponds to a tile in the window. If SCHC Fragment losses span multiple windows, the SCHC receiver will send one failure SCHC ACK per window with losses.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">This document updates the SCHC protocol for frame fragmentation and loss recovery. It defines a SCHC Compound ACK format and procedure, which
are intended to reduce the number of response transmissions (i.e., SCHC ACKs) in the ACK-on-Error mode of SCHC. The SCHC Compound ACK extends the failure SCHC ACK message
format so that it can contain several bitmaps, with each bitmap being identified by its corresponding window number.
The SCHC Compound ACK is backwards compatible with the SCHC ACK as defined in <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>, and introduces flexibility, as the receiver has the capability to respond to the All-0 SCHC Fragment, providing more Downlink opportunities and therefore adjusting to the delay requirements of the application.<a class="pilcrow" href="#section-1-4">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<p id="section-2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">It is assumed that the reader is familiar with the terms and mechanisms defined in <span>[<a class="cite xref" href="#RFC8376">RFC8376</a>]</span> and <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>.<a class="pilcrow" href="#section-2-2">¶</a></p>
</section>
</div>
<div id="schc-compound-ack">
<section id="section-3">
      <h2 id="name-schc-compound-ack">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-schc-compound-ack">SCHC Compound ACK</a>
      </h2>
<p id="section-3-1">The SCHC Compound ACK is a failure SCHC ACK message that can contain several bitmaps, with each bitmap being identified by its
corresponding window number.
    In <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>, the failure SCHC ACK message only contains one bitmap corresponding to one window.
    The SCHC Compound ACK extends this format, allowing more windows to be acknowledged in a single ACK and reducing the total number of failure SCHC ACK messages, especially when fragment losses are present in intermediate windows.<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2">The SCHC Compound ACK <span class="bcp14">MAY</span> be used in fragmentation modes that use windows and that allow
reporting the bitmaps of multiple windows at the same time; otherwise, the SCHC Compound ACK <span class="bcp14">MUST NOT</span> be used.<a class="pilcrow" href="#section-3-2">¶</a></p>
<p id="section-3-3">The SCHC Compound ACK:<a class="pilcrow" href="#section-3-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-4.1">provides feedback only for windows with fragment losses,<a class="pilcrow" href="#section-3-4.1">¶</a>
</li>
        <li class="normal" id="section-3-4.2">has a variable size that depends on the number of windows with fragment losses being reported in the single SCHC Compound ACK,<a class="pilcrow" href="#section-3-4.2">¶</a>
</li>
        <li class="normal" id="section-3-4.3">includes the window number (i.e., W) of each bitmap,<a class="pilcrow" href="#section-3-4.3">¶</a>
</li>
        <li class="normal" id="section-3-4.4">might not cover all windows with fragment losses of a SCHC Packet, and<a class="pilcrow" href="#section-3-4.4">¶</a>
</li>
        <li class="normal" id="section-3-4.5">is distinguishable from the SCHC Receiver-Abort.<a class="pilcrow" href="#section-3-4.5">¶</a>
</li>
      </ul>
<div id="schc-ack-format-1B">
<section id="section-3.1">
        <h3 id="name-schc-compound-ack-message-f">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-schc-compound-ack-message-f">SCHC Compound ACK Message Format</a>
        </h3>
<p id="section-3.1-1"><a class="auto internal xref" href="#success-ack-1byte">Figure 1</a> shows the success SCHC ACK format, i.e., when all fragments have been correctly received (C=1), as defined in <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>.<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<span id="name-schc-success-ack-message-fo"></span><div id="success-ack-1byte">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-3.1-2.1">
<pre>               |--- SCHC ACK Header ---|
               |        |--T-|--M--| 1 |
               +--------+----+-----+---+~~~~~~~~~~~~~~~~~~
               | RuleID |DTag|  W  |C=1| padding as needed
               +--------+----+-----+---+~~~~~~~~~~~~~~~~~~
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-schc-success-ack-message-fo">SCHC Success ACK Message Format, as Defined in RFC 8724</a>
          </figcaption></figure>
</div>
<p id="section-3.1-3">In case SCHC Fragment losses are found in any of the windows of the SCHC Packet, the SCHC Compound ACK <span class="bcp14">MAY</span> be used.
The SCHC Compound ACK message format is shown in Figures <a class="auto internal xref" href="#compound-ack-1byte">2</a> and <a class="auto internal xref" href="#compound-ack-less-M-padding">3</a>.<a class="pilcrow" href="#section-3.1-3">¶</a></p>
<span id="name-schc-compound-ack-message-fo"></span><div id="compound-ack-1byte">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-3.1-4.1">
<pre>  |--- SCHC ACK Header --|- W=w1 -|...|---- W=wi -----|
         |--T-|---M--|-1-|        |...|---M--|        |---M--|
  +------+----+------+---+--------+...+------+--------+------+~~~~~+
  |RuleID|DTag| W=w1 |C=0| Bitmap |...| W=wi | Bitmap |00..00| pad |
  +------+----+------+---+--------+...+------+--------+------+~~~~~+
                            next L2 Word boundary -&gt;|&lt;-- L2 Word -&gt;|
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-schc-compound-ack-message-fo">SCHC Compound ACK Message Format. Losses are found in windows W = w1,...,wi, where w1 &lt; w2 &lt;...&lt; wi.</a>
          </figcaption></figure>
</div>
<p id="section-3.1-5">The SCHC Compound ACK groups the window number (W) with its corresponding bitmap.
Window numbers do not need to be contiguous. However, the window numbers and their corresponding bitmaps included in the SCHC Compound ACK message <span class="bcp14">MUST</span> be ordered from the lowest-numbered to the highest-numbered window.
Hence, if the bitmap of window number zero is present in the SCHC Compound ACK message, it <span class="bcp14">MUST</span> always be the first one in order and its window number <span class="bcp14">MUST</span> be placed in the SCHC ACK Header.<a class="pilcrow" href="#section-3.1-5">¶</a></p>
<p id="section-3.1-6">If M or more padding bits would be needed after the last bitmap in the message to fill the last layer two (L2) Word, M bits at 0 <span class="bcp14">MUST</span> be appended after the last bitmap, and then padding is applied as needed (see <a class="auto internal xref" href="#compound-ack-1byte">Figure 2</a>).
Since window number 0 (if present in the message) is placed as w1, the M bits set to zero can't be confused with window number 0; 
therefore, they signal the end of the SCHC Compound ACK message.<a class="pilcrow" href="#section-3.1-6">¶</a></p>
<p id="section-3.1-7"> <a class="auto internal xref" href="#compound-ack-less-M-padding">Figure 3</a> shows the case when the required padding bits are strictly less than M bits.
    In this case, the L2 Maximum Transmission Unit (MTU) does not leave room for any extra window value, let alone any bitmap,
 thereby signaling the end of the SCHC Compound ACK message.<a class="pilcrow" href="#section-3.1-7">¶</a></p>
<span id="name-schc-compound-ack-message-for"></span><div id="compound-ack-less-M-padding">
<figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-3.1-8.1">
<pre>  |--- SCHC ACK Header --|- W=w1 -|...|---- W=wi -----|
         |--T-|---M--|-1-|        |...|---M--|        |---M--|
  +------+----+------+---+--------+...+------+--------+~~~+
  |RuleID|DTag| W=w1 |C=0| Bitmap |...| W=wi | Bitmap |pad|
  +------+----+------+---+--------+...+------+--------+~~~+
                                  next L2 Word boundary -&gt;|
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-schc-compound-ack-message-for">SCHC Compound ACK Message Format with Less than M Padding Bits. Losses are found in windows W = w1,...,wi, where w1  &lt; w2  &lt;...&lt; wi.</a>
          </figcaption></figure>
</div>
<p id="section-3.1-9">The SCHC Compound ACK <span class="bcp14">MUST NOT</span> use the Compressed Bitmap format for intermediate windows/bitmaps (i.e., bitmaps that are not the last one of the SCHC Compound ACK message); therefore, intermediate bitmap fields <span class="bcp14">MUST</span> be of size WINDOW_SIZE.
Hence, the SCHC Compound ACK <span class="bcp14">MAY</span> use a Compressed Bitmap format only for the last bitmap in the message.
The optional usage of this Compressed Bitmap for the last bitmap <span class="bcp14">MUST</span> be specified by the technology-specific SCHC Profile.<a class="pilcrow" href="#section-3.1-9">¶</a></p>
<p id="section-3.1-10"> The case where the last bitmap is effectively compressed corresponds to <a class="auto internal xref" href="#compound-ack-less-M-padding">Figure 3</a>,
    with the last bitmap ending (by construction) on an L2 Word boundary, therefore resulting in no padding at all.<a class="pilcrow" href="#section-3.1-10">¶</a></p>
<p id="section-3.1-11"><a class="auto internal xref" href="#compound-ack-compressed-bitmap-1">Figure 4</a> illustrates a bitmap compression example of a SCHC Compound ACK,
    where the bitmap of the last window (wi) indicates that the first tile has not been correctly
    received.
    Because the compression algorithm resulted in effective compression, no padding is needed.<a class="pilcrow" href="#section-3.1-11">¶</a></p>
<span id="name-schc-compound-ack-message-form"></span><div id="compound-ack-compressed-bitmap-1">
<figure id="figure-4">
          <div class="alignLeft art-text artwork" id="section-3.1-12.1">
<pre>  |--- SCHC ACK Header --|- W=w1 -|...|-------- W=wi -------|
         |--T-|---M--|-1-|        |...|---M--|
  +------+----+------+---+--------+...+------+--------------+
  |RuleID|DTag| W=w1 |C=0| Bitmap |...| W=wi |0 1 1 1 1 1 1 |
  +------+----+------+---+--------+...+------+--------------+
                         next L2 Word boundary -&gt;|

                 SCHC Compound ACK with Uncompressed Bitmap

  |--- SCHC ACK Header --|- W=w1 -|...|-- W=wi --|
         |--T-|---M--|-1-|        |...|---M--|
  +------+----+------+---+--------+...+------+---+
  |RuleID|DTag| W=w1 |C=0| Bitmap |...| W=wi |0 1|
  +------+----+------+---+--------+...+------+---+
                         next L2 Word boundary -&gt;|

        Transmitted SCHC Compound ACK with Compressed Bitmap
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-4">Figure 4</a>:
<a class="selfRef" href="#name-schc-compound-ack-message-form">SCHC Compound ACK Message Format with Compressed Bitmap and No Padding Added. Losses are found in windows W = w1,...,wi, where w1 &lt; w2 &lt;...&lt; wi.</a>
          </figcaption></figure>
</div>
<p id="section-3.1-13"><a class="auto internal xref" href="#compound-ack-compressed-bitmap">Figure 5</a> illustrates another bitmap compression example of a SCHC Compound ACK,
    where the bitmap of the last window (wi) indicates that the second and the fourth tiles have not been correctly
    received.
    In this example, the compression algorithm does not result in effective compression of the last bitmap.
    Besides, because more than M bits of padding would be needed to fill the last L2 Word, M bits at 0 are appended to the message before padding is applied.<a class="pilcrow" href="#section-3.1-13">¶</a></p>
<span id="name-schc-compound-ack-message-forma"></span><div id="compound-ack-compressed-bitmap">
<figure id="figure-5">
          <div class="alignLeft art-text artwork" id="section-3.1-14.1">
<pre> |--- SCHC ACK Header --|-W=w1-|...|-------- W=wi -------|
        |--T-|---M--|-1-|      |...|---M--|
 +------+----+------+---+------+...+------+--------------+
 |RuleID|DTag| W=w1 |C=0|Bitmap|...| W=wi |1 0 1 0 1 1 1 |
 +------+----+------+---+------+...+------+--------------+
                    next L2 Word boundary -&gt;|

                 SCHC Compound ACK with Uncompressed Bitmap

 |--- SCHC ACK Header --|-W=w1-|...|-------- W=wi -------|
        |--T-|---M--|-1-|      |...|---M--|              |---M--|
 +------+----+------+---+------+...+------+--------------+------+~~~+
 |RuleID|DTag| W=w1 |C=0|Bitmap|...| W=wi |1 0 1 0 1 1 1 |00..00|pad|
 +------+----+------+---+------+...+------+--------------+------+~~~+
                    next L2 Word boundary -&gt;|&lt;------ L2 Word ------&gt;|

                  Transmitted SCHC Compound ACK
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-5">Figure 5</a>:
<a class="selfRef" href="#name-schc-compound-ack-message-forma">SCHC Compound ACK Message Format with Compressed Bitmap and Padding Added to Reach the L2 Boundary. Losses are found in windows W = w1,...,wi, where w1 &lt; w2 &lt;...&lt;wi.</a>
          </figcaption></figure>
</div>
<p id="section-3.1-15">If a SCHC sender gets a SCHC Compound ACK with invalid window numbers, such as duplicate W values or W values not sent yet, it <span class="bcp14">MUST</span> discard the whole
 SCHC Compound ACK message.<a class="pilcrow" href="#section-3.1-15">¶</a></p>
<aside id="section-3.1-16">
          <p id="section-3.1-16.1">Note that SCHC Compound ACKs are distinguishable from the Receiver-Abort message in the same way that regular SCHC ACKs are distinguishable, since the Receiver-Abort pattern never occurs in a legitimate SCHC Compound ACK <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>.<a class="pilcrow" href="#section-3.1-16.1">¶</a></p>
</aside>
</section>
</div>
<div id="schc-compound-ack-behavior">
<section id="section-3.2">
        <h3 id="name-schc-compound-ack-behavior">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-schc-compound-ack-behavior">SCHC Compound ACK Behavior</a>
        </h3>
<p id="section-3.2-1">The SCHC ACK-on-Error behavior is described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8724#section-8.4.3">Section 8.4.3</a> of [<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>. The present document slightly modifies this behavior.  In the baseline SCHC specification, a SCHC ACK reports only one bitmap for the reception of exactly one window of tiles. The present SCHC
Compound ACK specification extends the SCHC ACK message format so that it can contain several bitmaps, with each bitmap being identified by its corresponding
window number.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<p id="section-3.2-2">As presented in <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>, the SCHC ACK format can be considered a special SCHC Compound ACK case in which it reports only the tiles of one window. Therefore, the SCHC Compound ACK is backwards compatible with the SCHC ACK format presented in <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>.
The receiver can assume that the sender does not support the SCHC Compound ACK if, although the SCHC Compound ACK sent by the receiver reports losses in more than one window, the sender does not resend any tiles from windows other than the first window reported in the SCHC Compound ACK. In that case, the receiver can send SCHC Compound ACKs with only one window of tiles.<a class="pilcrow" href="#section-3.2-2">¶</a></p>
<p id="section-3.2-3">Also, some flexibility is introduced with respect to <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span> in that the receiver has the capability to respond (or not) to the All-0 with a SCHC Compound ACK, depending on certain parameters, like network conditions, sender buffer/cache size, and supported application delay. Note that even though the protocol allows for such flexibility, the
actual decision criteria is not specified in this document. The application <span class="bcp14">MUST</span> set expiration timer values according to when the feedback is expected to be received, e.g., after the All-0 or after the All-1.<a class="pilcrow" href="#section-3.2-3">¶</a></p>
<p id="section-3.2-4"><a class="auto internal xref" href="#ACK-on-Error-subsection">Section 3.2.1</a> (and its subsections) replaces the complete Section <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8724#section-8.4.3">8.4.3</a> (and its subsections) of <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>.<a class="pilcrow" href="#section-3.2-4">¶</a></p>
<div id="ACK-on-Error-subsection">
<section id="section-3.2.1">
          <h4 id="name-ack-on-error-mode-replaces-">
<a class="section-number selfRef" href="#section-3.2.1">3.2.1. </a><a class="section-name selfRef" href="#name-ack-on-error-mode-replaces-">ACK-on-Error Mode (Replaces Section 8.4.3, RFC 8724)</a>
          </h4>
<p id="section-3.2.1-1">The ACK-on-Error mode supports L2 technologies that have variable MTU and out-of-order delivery.
It requires an L2 that provides a feedback path from the reassembler to the fragmenter.
See Appendix <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8724#appendix-F">F</a> for a discussion on using ACK-on-Error mode on quasi-bidirectional links.<a class="pilcrow" href="#section-3.2.1-1">¶</a></p>
<p id="section-3.2.1-2">In ACK-on-Error mode, windows are used.<a class="pilcrow" href="#section-3.2.1-2">¶</a></p>
<p id="section-3.2.1-3">All tiles except the last one and the penultimate one <span class="bcp14">MUST</span> be of equal size, hereafter called "regular".
The size of the last tile <span class="bcp14">MUST</span> be smaller than or equal to the regular tile size.
Regarding the penultimate tile, a Profile <span class="bcp14">MUST</span> pick one of the following two options:<a class="pilcrow" href="#section-3.2.1-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1-4.1">The penultimate tile size <span class="bcp14">MUST</span> be the regular tile size, or<a class="pilcrow" href="#section-3.2.1-4.1">¶</a>
</li>
            <li class="normal" id="section-3.2.1-4.2">the penultimate tile size <span class="bcp14">MUST</span> be either the regular tile size or the regular tile size minus one L2 Word.<a class="pilcrow" href="#section-3.2.1-4.2">¶</a>
</li>
          </ul>
<p id="section-3.2.1-5">A SCHC Fragment message carries one or several contiguous tiles, which may span multiple windows.
            A SCHC Compound ACK reports on the reception of one window of tiles or several windows of tiles, each one identified by its window number.<a class="pilcrow" href="#section-3.2.1-5">¶</a></p>
<p id="section-3.2.1-6">See <a class="auto internal xref" href="#Fig-TilesACKonError">Figure 6</a> (see <a href="https://www.rfc-editor.org/rfc/rfc8724.html#figure-23">Figure 23 of RFC 8724</a>) for an example.<a class="pilcrow" href="#section-3.2.1-6">¶</a></p>
<span id="name-schc-packet-fragmented-in-t"></span><div id="Fig-TilesACKonError">
<figure id="figure-6">
            <div class="alignLeft art-text artwork" id="section-3.2.1-7.1">
<pre>        +---------------------------------------------...-----------+
        |                       SCHC Packet                         |
        +---------------------------------------------...-----------+

Tile#   | 4 | 3 | 2 | 1 | 0 | 4 | 3 | 2 | 1 | 0 | 4 |     | 0 | 4 |3|
Window# |-------- 0 --------|-------- 1 --------|- 2  ... 27 -|- 28-|


SCHC Fragment msg   |-----------|
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-6">Figure 6</a>:
<a class="selfRef" href="#name-schc-packet-fragmented-in-t">SCHC Packet Fragmented in Tiles, ACK-on-Error Mode (Figure 23 in RFC 8724)</a>
            </figcaption></figure>
</div>
<p id="section-3.2.1-8">The W field is wide enough that it unambiguously represents an absolute window number.
The fragment receiver sends SCHC Compound ACKs to the fragment sender about windows for which tiles are missing.
No SCHC Compound ACK is sent by the fragment receiver for windows that it knows have been fully received.<a class="pilcrow" href="#section-3.2.1-8">¶</a></p>
<p id="section-3.2.1-9">The fragment sender retransmits SCHC Fragments for tiles that are reported missing.
It can advance to next windows even before it has ascertained that all tiles belonging to previous windows have been correctly received,
and it can still later retransmit SCHC Fragments with tiles belonging to previous windows.
Therefore, the sender and the receiver may operate in a decoupled fashion.
The fragmented SCHC Packet transmission concludes when:<a class="pilcrow" href="#section-3.2.1-9">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1-10.1">integrity checking shows that the fragmented SCHC Packet has been correctly reassembled at the receive end,
and this information has been conveyed back to the sender,<a class="pilcrow" href="#section-3.2.1-10.1">¶</a>
</li>
            <li class="normal" id="section-3.2.1-10.2">too many retransmission attempts have been made, or<a class="pilcrow" href="#section-3.2.1-10.2">¶</a>
</li>
            <li class="normal" id="section-3.2.1-10.3">the receiver determines that the transmission of this fragmented SCHC Packet has been inactive for too long.<a class="pilcrow" href="#section-3.2.1-10.3">¶</a>
</li>
          </ul>
<p id="section-3.2.1-11">Each Profile <span class="bcp14">MUST</span> specify which RuleID value(s) corresponds to SCHC F/R messages operating in this mode.<a class="pilcrow" href="#section-3.2.1-11">¶</a></p>
<p id="section-3.2.1-12">The W field <span class="bcp14">MUST</span> be present in the SCHC F/R messages.<a class="pilcrow" href="#section-3.2.1-12">¶</a></p>
<p id="section-3.2.1-13">Each Profile, for each RuleID value, <span class="bcp14">MUST</span> define:<a class="pilcrow" href="#section-3.2.1-13">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1-14.1">the tile size (a tile does not need to be a duplicate of an L2 Word, but it <span class="bcp14">MUST</span> be at least the size of an L2 Word),<a class="pilcrow" href="#section-3.2.1-14.1">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.2">the value of M,<a class="pilcrow" href="#section-3.2.1-14.2">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.3">the value of N,<a class="pilcrow" href="#section-3.2.1-14.3">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.4">the value of WINDOW_SIZE, which <span class="bcp14">MUST</span> be strictly less than 2<sup>N</sup>,<a class="pilcrow" href="#section-3.2.1-14.4">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.5">the size and algorithm for the RCS field,<a class="pilcrow" href="#section-3.2.1-14.5">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.6">the value of T,<a class="pilcrow" href="#section-3.2.1-14.6">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.7">the value of MAX_ACK_REQUESTS,<a class="pilcrow" href="#section-3.2.1-14.7">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.8">the expiration time of the Retransmission Timer,<a class="pilcrow" href="#section-3.2.1-14.8">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.9">the expiration time of the Inactivity Timer,<a class="pilcrow" href="#section-3.2.1-14.9">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.10">if the last tile is carried in a Regular SCHC Fragment or an All-1 SCHC Fragment (see <a class="auto internal xref" href="#ACK-on-Error-sender">Section 3.2.1.1</a> (Section <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8724#section-8.4.3.1">8.4.3.1</a> in <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>),<a class="pilcrow" href="#section-3.2.1-14.10">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.11">if the penultimate tile <span class="bcp14">MAY</span> be one L2 Word smaller than the regular tile size (in this case, the regular tile size <span class="bcp14">MUST</span> be at least twice the L2 Word size),<a class="pilcrow" href="#section-3.2.1-14.11">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.12">usage or not of the SCHC Compound ACK message, and<a class="pilcrow" href="#section-3.2.1-14.12">¶</a>
</li>
            <li class="normal" id="section-3.2.1-14.13">usage or not of the Compressed Bitmap format in the last window of the SCHC Compound ACK message.<a class="pilcrow" href="#section-3.2.1-14.13">¶</a>
</li>
          </ul>
<p id="section-3.2.1-15">For each active pair of RuleID and DTag values, the sender <span class="bcp14">MUST</span> maintain:<a class="pilcrow" href="#section-3.2.1-15">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1-16.1">one Attempts counter and<a class="pilcrow" href="#section-3.2.1-16.1">¶</a>
</li>
            <li class="normal" id="section-3.2.1-16.2">one Retransmission Timer.<a class="pilcrow" href="#section-3.2.1-16.2">¶</a>
</li>
          </ul>
<p id="section-3.2.1-17">For each active pair of RuleID and DTag values, the receiver <span class="bcp14">MUST</span> maintain:<a class="pilcrow" href="#section-3.2.1-17">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1-18.1">one Attempts counter and<a class="pilcrow" href="#section-3.2.1-18.1">¶</a>
</li>
            <li class="normal" id="section-3.2.1-18.2">one Inactivity Timer.<a class="pilcrow" href="#section-3.2.1-18.2">¶</a>
</li>
          </ul>
<div id="ACK-on-Error-sender">
<section id="section-3.2.1.1">
            <h5 id="name-sender-behavior-replaces-se">
<a class="section-number selfRef" href="#section-3.2.1.1">3.2.1.1. </a><a class="section-name selfRef" href="#name-sender-behavior-replaces-se">Sender Behavior (Replaces Section 8.4.3.1, RFC 8724)</a>
            </h5>
<p id="section-3.2.1.1-1">At the beginning of the fragmentation of a new SCHC Packet:<a class="pilcrow" href="#section-3.2.1.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-2.1">the fragment sender <span class="bcp14">MUST</span> select a RuleID and DTag value pair for this SCHC Packet.
A Rule <span class="bcp14">MUST NOT</span> be selected if the values of M and WINDOW_SIZE for that Rule are such that the SCHC Packet cannot be fragmented in (2<sup>M</sup>) * WINDOW_SIZE tiles or less.<a class="pilcrow" href="#section-3.2.1.1-2.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.1-2.2">the fragment sender <span class="bcp14">MUST</span> initialize the Attempts counter to 0 for that RuleID and DTag value pair.<a class="pilcrow" href="#section-3.2.1.1-2.2">¶</a>
</li>
            </ul>
<p id="section-3.2.1.1-3">A Regular SCHC Fragment message carries in its payload one or more tiles.
If more than one tile is carried in one Regular SCHC Fragment:<a class="pilcrow" href="#section-3.2.1.1-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-4.1">the selected tiles <span class="bcp14">MUST</span> be contiguous in the original SCHC Packet, and<a class="pilcrow" href="#section-3.2.1.1-4.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.1-4.2">they <span class="bcp14">MUST</span> be placed in the SCHC Fragment Payload adjacent to one another, in the order they appear in the SCHC Packet, from the start of the SCHC Packet toward its end.<a class="pilcrow" href="#section-3.2.1.1-4.2">¶</a>
</li>
            </ul>
<p id="section-3.2.1.1-5">Tiles that are not the last one <span class="bcp14">MUST</span> be sent in Regular SCHC Fragments as specified in Section <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8724#section-8.3.1.1">8.3.1.1</a>.
The FCN field <span class="bcp14">MUST</span> contain the tile index of the first tile sent in that SCHC Fragment.<a class="pilcrow" href="#section-3.2.1.1-5">¶</a></p>
<p id="section-3.2.1.1-6">In a Regular SCHC Fragment message, the sender <span class="bcp14">MUST</span> fill the W field with the window number of the first tile sent in that SCHC Fragment.<a class="pilcrow" href="#section-3.2.1.1-6">¶</a></p>
<p id="section-3.2.1.1-7">A Profile <span class="bcp14">MUST</span> define if the last tile of a SCHC Packet is sent:<a class="pilcrow" href="#section-3.2.1.1-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-8.1">in a Regular SCHC Fragment, alone or as part of a multi-tiles Payload,<a class="pilcrow" href="#section-3.2.1.1-8.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.1-8.2">alone in an All-1 SCHC Fragment, or<a class="pilcrow" href="#section-3.2.1.1-8.2">¶</a>
</li>
              <li class="normal" id="section-3.2.1.1-8.3">with either one of the above two methods.<a class="pilcrow" href="#section-3.2.1.1-8.3">¶</a>
</li>
            </ul>
<p id="section-3.2.1.1-9">In an All-1 SCHC Fragment message, the sender <span class="bcp14">MUST</span> fill the W field with the window number of the last tile of the SCHC Packet.<a class="pilcrow" href="#section-3.2.1.1-9">¶</a></p>
<p id="section-3.2.1.1-10">The fragment sender <span class="bcp14">MUST</span> send SCHC Fragments such that, all together, they contain all the tiles of the fragmented SCHC Packet.<a class="pilcrow" href="#section-3.2.1.1-10">¶</a></p>
<p id="section-3.2.1.1-11">The fragment sender <span class="bcp14">MUST</span> send at least one All-1 SCHC Fragment.<a class="pilcrow" href="#section-3.2.1.1-11">¶</a></p>
<p id="section-3.2.1.1-12">In doing the two items above, the sender <span class="bcp14">MUST</span> ascertain that the receiver will not receive the last tile through both a Regular SCHC Fragment and an All-1 SCHC Fragment.<a class="pilcrow" href="#section-3.2.1.1-12">¶</a></p>
<p id="section-3.2.1.1-13">The fragment sender <span class="bcp14">MUST</span> listen for SCHC Compound ACK messages after having sent:<a class="pilcrow" href="#section-3.2.1.1-13">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-14.1">an All-1 SCHC Fragment or<a class="pilcrow" href="#section-3.2.1.1-14.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.1-14.2">a SCHC ACK REQ.<a class="pilcrow" href="#section-3.2.1.1-14.2">¶</a>
</li>
            </ul>
<p id="section-3.2.1.1-15">A Profile <span class="bcp14">MAY</span> specify other times at which the fragment sender <span class="bcp14">MUST</span> listen for SCHC Compound ACK messages.
For example, this could be after sending a complete window of tiles.<a class="pilcrow" href="#section-3.2.1.1-15">¶</a></p>
<p id="section-3.2.1.1-16">Each time a fragment sender sends an All-1 SCHC Fragment or a SCHC ACK REQ:<a class="pilcrow" href="#section-3.2.1.1-16">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-17.1">it <span class="bcp14">MUST</span> increment the Attempts counter, and<a class="pilcrow" href="#section-3.2.1.1-17.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.1-17.2">it <span class="bcp14">MUST</span> reset the Retransmission Timer.<a class="pilcrow" href="#section-3.2.1.1-17.2">¶</a>
</li>
            </ul>
<p id="section-3.2.1.1-18">On Retransmission Timer expiration:<a class="pilcrow" href="#section-3.2.1.1-18">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-19.1">if the Attempts counter is strictly less than MAX_ACK_REQUESTS,
the fragment sender <span class="bcp14">MUST</span> send
either the All-1 SCHC Fragment or
a SCHC ACK REQ with the W field corresponding to the last window,<a class="pilcrow" href="#section-3.2.1.1-19.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.1-19.2">otherwise, the fragment sender <span class="bcp14">MUST</span> send a SCHC Sender-Abort, and
it <span class="bcp14">MAY</span> exit with an error condition.<a class="pilcrow" href="#section-3.2.1.1-19.2">¶</a>
</li>
            </ul>
<p id="section-3.2.1.1-20">All message receptions being discussed in the rest of this section are to be understood as
"matching the RuleID and DTag pair being processed", even if not spelled out, for brevity.<a class="pilcrow" href="#section-3.2.1.1-20">¶</a></p>
<p id="section-3.2.1.1-21">On receiving a SCHC Compound ACK:<a class="pilcrow" href="#section-3.2.1.1-21">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.1">
                <p id="section-3.2.1.1-22.1.1">if one of the W fields in the SCHC Compound ACK corresponds to the last window of the SCHC Packet:<a class="pilcrow" href="#section-3.2.1.1-22.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.1.2.1">if the C bit is set, the sender <span class="bcp14">MAY</span> exit successfully.<a class="pilcrow" href="#section-3.2.1.1-22.1.2.1">¶</a>
</li>
                  <li class="normal" id="section-3.2.1.1-22.1.2.2">
                    <p id="section-3.2.1.1-22.1.2.2.1">otherwise:<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.1.2.2.2.1">
                        <p id="section-3.2.1.1-22.1.2.2.2.1.1">if the Profile mandates that the last tile be sent in an All-1 SCHC Fragment:<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.1.2.2.2.1.2.1">
                            <p id="section-3.2.1.1-22.1.2.2.2.1.2.1.1">if the SCHC Compound ACK shows no missing tile at the receiver, the sender:<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.1.2.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.1.2.2.2.1.2.1.2.1">
                                <span class="bcp14">MUST</span> send a SCHC Sender-Abort and<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.1.2.1.2.1">¶</a>
</li>
                              <li class="normal" id="section-3.2.1.1-22.1.2.2.2.1.2.1.2.2">
                                <span class="bcp14">MAY</span> exit with an error condition.<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.1.2.1.2.2">¶</a>
</li>
                            </ul>
</li>
                          <li class="normal" id="section-3.2.1.1-22.1.2.2.2.1.2.2">
                            <p id="section-3.2.1.1-22.1.2.2.2.1.2.2.1">otherwise:<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.1.2.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.1.2.2.2.1.2.2.2.1">the fragment sender <span class="bcp14">MUST</span> send SCHC Fragment messages containing all the tiles of all the windows that are reported missing in the SCHC Compound ACK.<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.1.2.2.2.1">¶</a>
</li>
                              <li class="normal" id="section-3.2.1.1-22.1.2.2.2.1.2.2.2.2">if the last of these SCHC Fragment messages is not an All-1 SCHC Fragment, then the fragment sender <span class="bcp14">MAY</span> either send, in addition, a SCHC ACK REQ with the W field corresponding to the last window or repeat the All-1 SCHC Fragment to ask the receiver to confirm that all tiles have been correctly received.<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.1.2.2.2.2">¶</a>
</li>
                              <li class="normal" id="section-3.2.1.1-22.1.2.2.2.1.2.2.2.3">in doing the two items above, the sender <span class="bcp14">MUST</span> ascertain that the receiver will not receive the last tile through both a Regular SCHC Fragment and an All-1 SCHC Fragment.<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.1.2.2.2.3">¶</a>
</li>
                            </ul>
</li>
                        </ul>
</li>
                      <li class="normal" id="section-3.2.1.1-22.1.2.2.2.2">
                        <p id="section-3.2.1.1-22.1.2.2.2.2.1">otherwise:<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.1.2.2.2.2.2.1">if the SCHC Compound ACK shows no missing tile at the receiver, the sender
<span class="bcp14">MUST</span> send the All-1 SCHC Fragment<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.2.2.1">¶</a>
</li>
                          <li class="normal" id="section-3.2.1.1-22.1.2.2.2.2.2.2">
                            <p id="section-3.2.1.1-22.1.2.2.2.2.2.2.1">otherwise:<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.2.2.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.1.2.2.2.2.2.2.2.1">the fragment sender <span class="bcp14">MUST</span> send SCHC Fragment messages containing all the tiles that are reported missing in the SCHC Compound ACK.<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.2.2.2.2.1">¶</a>
</li>
                              <li class="normal" id="section-3.2.1.1-22.1.2.2.2.2.2.2.2.2">the fragment sender <span class="bcp14">MUST</span> then send
either the All-1 SCHC Fragment or
a SCHC ACK REQ with the W field corresponding to the last window.<a class="pilcrow" href="#section-3.2.1.1-22.1.2.2.2.2.2.2.2.2">¶</a>
</li>
                            </ul>
</li>
                        </ul>
</li>
                    </ul>
</li>
                </ul>
</li>
              <li class="normal" id="section-3.2.1.1-22.2">
                <p id="section-3.2.1.1-22.2.1">otherwise, the fragment sender:<a class="pilcrow" href="#section-3.2.1.1-22.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.1-22.2.2.1">
                    <span class="bcp14">MUST</span> send SCHC Fragment messages containing the tiles that are reported missing in the SCHC Compound ACK.<a class="pilcrow" href="#section-3.2.1.1-22.2.2.1">¶</a>
</li>
                  <li class="normal" id="section-3.2.1.1-22.2.2.2">then, it <span class="bcp14">MAY</span> send a SCHC ACK REQ with the W field corresponding to the last window.<a class="pilcrow" href="#section-3.2.1.1-22.2.2.2">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-3.2.1.1-23">See <a href="https://www.rfc-editor.org/rfc/rfc8724.html#figure-43">Figure 43</a> for one among several possible examples of a Finite State Machine implementing a sender behavior obeying this specification.<a class="pilcrow" href="#section-3.2.1.1-23">¶</a></p>
</section>
</div>
<div id="ACK-on-Error-receiver">
<section id="section-3.2.1.2">
            <h5 id="name-receiver-behavior-replaces-">
<a class="section-number selfRef" href="#section-3.2.1.2">3.2.1.2. </a><a class="section-name selfRef" href="#name-receiver-behavior-replaces-">Receiver Behavior (Replaces Section 8.4.3.2, RFC 8724)</a>
            </h5>
<p id="section-3.2.1.2-1">On receiving a SCHC Fragment with a RuleID and DTag pair not being processed at that time:<a class="pilcrow" href="#section-3.2.1.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-2.1">the receiver <span class="bcp14">SHOULD</span> check that the DTag value has not recently been used for that RuleID value,
thereby ensuring that the received SCHC Fragment is not a remnant of a prior fragmented SCHC Packet transmission.
The initial value of the Inactivity Timer is the <span class="bcp14">RECOMMENDED</span> lifetime for the DTag value at the receiver.
If the SCHC Fragment is determined to be such a remnant, the receiver <span class="bcp14">MAY</span> silently ignore it and discard it.<a class="pilcrow" href="#section-3.2.1.2-2.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.2-2.2">the receiver <span class="bcp14">MUST</span> start a process to assemble a new SCHC Packet with that RuleID and DTag value pair.
The receiver <span class="bcp14">MUST</span> start an Inactivity Timer for that RuleID and DTag value pair.
It <span class="bcp14">MUST</span> initialize an Attempts counter to 0 for that RuleID and DTag value pair.
If the receiver is under-resourced to do this, it <span class="bcp14">MUST</span> respond to the sender with a SCHC Receiver-Abort.<a class="pilcrow" href="#section-3.2.1.2-2.2">¶</a>
</li>
            </ul>
<p id="section-3.2.1.2-3">On reception of any SCHC F/R message for the RuleID and DTag pair being processed, the receiver <span class="bcp14">MUST</span> reset the Inactivity Timer pertaining to that RuleID and DTag pair.<a class="pilcrow" href="#section-3.2.1.2-3">¶</a></p>
<p id="section-3.2.1.2-4">All message receptions being discussed in the rest of this section are to be understood as
"matching the RuleID and DTag pair being processed", even if not spelled out, for brevity.<a class="pilcrow" href="#section-3.2.1.2-4">¶</a></p>
<p id="section-3.2.1.2-5">On receiving a SCHC Fragment message,
the receiver determines what tiles were received, based on the payload length and on the W and FCN fields of the SCHC Fragment.<a class="pilcrow" href="#section-3.2.1.2-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-6.1">if the FCN is All-1 and if a Payload is present, the full SCHC Fragment Payload <span class="bcp14">MUST</span> be assembled including the padding bits.
This is because the size of the last tile is not known by the receiver;
therefore, padding bits are indistinguishable from the tile data bits, at this stage.
They will be removed by the SCHC C/D sublayer.
If the size of the SCHC Fragment Payload exceeds or equals
the size of one regular tile plus the size of an L2 Word, this <span class="bcp14">SHOULD</span> raise an error flag.<a class="pilcrow" href="#section-3.2.1.2-6.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.2-6.2">
                <p id="section-3.2.1.2-6.2.1">otherwise, tiles <span class="bcp14">MUST</span> be assembled based on the a priori known tile size.<a class="pilcrow" href="#section-3.2.1.2-6.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-6.2.2.1">If allowed by the Profile, the end of the payload <span class="bcp14">MAY</span> contain the last tile, which may be shorter. Padding bits are indistinguishable from the tile data bits, at this stage.<a class="pilcrow" href="#section-3.2.1.2-6.2.2.1">¶</a>
</li>
                  <li class="normal" id="section-3.2.1.2-6.2.2.2">The payload may contain the penultimate tile that, if allowed by the Profile, <span class="bcp14">MAY</span> be exactly one L2 Word shorter than the regular tile size.<a class="pilcrow" href="#section-3.2.1.2-6.2.2.2">¶</a>
</li>
                  <li class="normal" id="section-3.2.1.2-6.2.2.3">
                    <p id="section-3.2.1.2-6.2.2.3.1">Otherwise, padding bits <span class="bcp14">MUST</span> be discarded.
This is possible because:<a class="pilcrow" href="#section-3.2.1.2-6.2.2.3.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-6.2.2.3.2.1">the size of the tiles is known a priori,<a class="pilcrow" href="#section-3.2.1.2-6.2.2.3.2.1">¶</a>
</li>
                      <li class="normal" id="section-3.2.1.2-6.2.2.3.2.2">tiles are larger than an L2 Word, and<a class="pilcrow" href="#section-3.2.1.2-6.2.2.3.2.2">¶</a>
</li>
                      <li class="normal" id="section-3.2.1.2-6.2.2.3.2.3">padding bits are always strictly less than an L2 Word.<a class="pilcrow" href="#section-3.2.1.2-6.2.2.3.2.3">¶</a>
</li>
                    </ul>
</li>
                </ul>
</li>
            </ul>
<p id="section-3.2.1.2-7">On receiving a SCHC All-0 SCHC Fragment:<a class="pilcrow" href="#section-3.2.1.2-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-8.1">if the receiver knows of any windows with missing tiles for the packet being reassembled (and depending on certain parameters, like network conditions, sender buffer/cache size, and supported application delay, among others), it <span class="bcp14">MAY</span> return a SCHC Compound ACK for the missing tiles, starting from the lowest-numbered window.<a class="pilcrow" href="#section-3.2.1.2-8.1">¶</a>
</li>
            </ul>
<p id="section-3.2.1.2-9">On receiving a SCHC ACK REQ or an All-1 SCHC Fragment:<a class="pilcrow" href="#section-3.2.1.2-9">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-10.1">if the receiver knows of any windows with missing tiles for the packet being reassembled, it
<span class="bcp14">MUST</span> return a SCHC Compound ACK for the missing tiles, starting from the lowest-numbered window.<a class="pilcrow" href="#section-3.2.1.2-10.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.2-10.2">
                <p id="section-3.2.1.2-10.2.1">otherwise:<a class="pilcrow" href="#section-3.2.1.2-10.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-10.2.2.1">if it has received at least one tile, it <span class="bcp14">MUST</span> return a SCHC Compound ACK for the highest-numbered window it currently has tiles for,<a class="pilcrow" href="#section-3.2.1.2-10.2.2.1">¶</a>
</li>
                  <li class="normal" id="section-3.2.1.2-10.2.2.2">otherwise, it <span class="bcp14">MUST</span> return a SCHC Compound ACK for window number 0.<a class="pilcrow" href="#section-3.2.1.2-10.2.2.2">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-3.2.1.2-11">A Profile <span class="bcp14">MAY</span> specify other times and circumstances at which
a receiver sends a SCHC Compound ACK
and which window the SCHC Compound ACK reports about in these circumstances.<a class="pilcrow" href="#section-3.2.1.2-11">¶</a></p>
<p id="section-3.2.1.2-12">Upon sending a SCHC Compound ACK, the receiver <span class="bcp14">MUST</span> increase the Attempts counter.<a class="pilcrow" href="#section-3.2.1.2-12">¶</a></p>
<p id="section-3.2.1.2-13">After receiving an All-1 SCHC Fragment,
a receiver <span class="bcp14">MUST</span> check the integrity of the reassembled SCHC Packet at least every time
it prepares to send a SCHC Compound ACK for the last window.<a class="pilcrow" href="#section-3.2.1.2-13">¶</a></p>
<p id="section-3.2.1.2-14">Upon receiving a SCHC Sender-Abort,
the receiver <span class="bcp14">MAY</span> exit with an error condition.<a class="pilcrow" href="#section-3.2.1.2-14">¶</a></p>
<p id="section-3.2.1.2-15">Upon expiration of the Inactivity Timer,
the receiver <span class="bcp14">MUST</span> send a SCHC Receiver-Abort,
and it <span class="bcp14">MAY</span> exit with an error condition.<a class="pilcrow" href="#section-3.2.1.2-15">¶</a></p>
<p id="section-3.2.1.2-16">On the Attempts counter exceeding MAX_ACK_REQUESTS,
the receiver <span class="bcp14">MUST</span> send a SCHC Receiver-Abort,
and it <span class="bcp14">MAY</span> exit with an error condition.<a class="pilcrow" href="#section-3.2.1.2-16">¶</a></p>
<p id="section-3.2.1.2-17">Reassembly of the SCHC Packet concludes when:<a class="pilcrow" href="#section-3.2.1.2-17">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-18.1">a Sender-Abort has been received,<a class="pilcrow" href="#section-3.2.1.2-18.1">¶</a>
</li>
              <li class="normal" id="section-3.2.1.2-18.2">the Inactivity Timer has expired,<a class="pilcrow" href="#section-3.2.1.2-18.2">¶</a>
</li>
              <li class="normal" id="section-3.2.1.2-18.3">the Attempts counter has exceeded MAX_ACK_REQUESTS, or<a class="pilcrow" href="#section-3.2.1.2-18.3">¶</a>
</li>
              <li class="normal" id="section-3.2.1.2-18.4">at least an All-1 SCHC Fragment has been received and integrity checking of the reassembled SCHC Packet is successful.<a class="pilcrow" href="#section-3.2.1.2-18.4">¶</a>
</li>
            </ul>
<p id="section-3.2.1.2-19">See <a href="https://www.rfc-editor.org/rfc/rfc8724.html#figure-44">Figure 44</a> for one among several possible examples of a Finite State Machine implementing a receiver behavior obeying this specification. The example provided is meant to match the sender Finite State Machine of <a href="https://www.rfc-editor.org/rfc/rfc8724.html#figure-43">Figure 43</a>.<a class="pilcrow" href="#section-3.2.1.2-19">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="schc-compound-ack-examples">
<section id="section-4">
      <h2 id="name-schc-compound-ack-example">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-schc-compound-ack-example">SCHC Compound ACK Example</a>
      </h2>
<p id="section-4-1"><a class="auto internal xref" href="#compound-ack-ex-ex">Figure 7</a> shows an example transmission of a SCHC Packet in ACK-on-Error mode using the SCHC Compound ACK.
In the example, the SCHC Packet is fragmented in 14 tiles, with N=3, WINDOW_SIZE=7, M=2, and two lost SCHC fragments.
Only 1 SCHC Compound ACK is generated.<a class="pilcrow" href="#section-4-1">¶</a></p>
<span id="name-schc-compound-ack-message-s"></span><div id="compound-ack-ex-ex">
<figure id="figure-7">
        <div class="alignLeft art-text artwork" id="section-4-2.1">
<pre>        Sender                Receiver
          |-----W=0, FCN=6 -----&gt;|
          |-----W=0, FCN=5 -----&gt;|
          |-----W=0, FCN=4 -----&gt;|
          |-----W=0, FCN=3 -----&gt;|
          |-----W=0, FCN=2 --X   |
          |-----W=0, FCN=1 -----&gt;|
          |-----W=0, FCN=0 -----&gt;| Bitmap: 1111011
      (no ACK)
          |-----W=1, FCN=6 -----&gt;|
          |-----W=1, FCN=5 -----&gt;|
          |-----W=1, FCN=4 -----&gt;|
          |-----W=1, FCN=3 -----&gt;|
          |-----W=1, FCN=2 -----&gt;|
          |-----W=1, FCN=1 --X   |
          |-- W=1, FCN=7 + RCS -&gt;| Integrity check: failure
          |&lt;--- Compound ACK ----| [C=0, W=0 - Bitmap:1111011,
          |-----W=0, FCN=2 -----&gt;|        W=1 - Bitmap:1111101]
          |-----W=1, FCN=1 -----&gt;| Integrity check: success
          |&lt;--- ACK, W=1, C=1 ---| C=1
        (End)
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-7">Figure 7</a>:
<a class="selfRef" href="#name-schc-compound-ack-message-s">SCHC Compound ACK Message Sequence Example</a>
        </figcaption></figure>
</div>
<span id="name-schc-compound-ack-message-format"></span><div id="compound-ack-fmt-ex">
<figure id="figure-8">
        <div class="alignLeft art-text artwork" id="section-4-3.1">
<pre> |--- SCHC ACK Header --|- W=00 --|----- W=01 -----|
        |--T-|---M--|-1-|         |---M--|         |---M--|
 +------+----+------+---+---------+------+---------+------+-----+
 |RuleID|DTag| W=00 |C=0| 1111011 | W=01 | 1111101 |  00  | pad |
 +------+----+------+---+---------+------+---------+------+-----+
                         next L2 Word boundary -&gt;|&lt;-- L2 Word -&gt;|
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-8">Figure 8</a>:
<a class="selfRef" href="#name-schc-compound-ack-message-format">SCHC Compound ACK Message Format Example: Losses are Found in Windows 00 and 01</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="schc-compound-ack-yang-model">
<section id="section-5">
      <h2 id="name-schc-compound-ack-yang-data">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-schc-compound-ack-yang-data">SCHC Compound ACK YANG Data Model</a>
      </h2>
<p id="section-5-1">This document also extends the SCHC YANG data model defined in <span>[<a class="cite xref" href="#RFC9363">RFC9363</a>]</span> by including
a new leaf in the Ack-on-Error fragmentation mode to describe both the option to use the SCHC Compound ACK, as well as its bitmap format.<a class="pilcrow" href="#section-5-1">¶</a></p>
<div id="yang-model">
<section id="section-5.1">
        <h3 id="name-schc-yang-data-model-extens">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-schc-yang-data-model-extens">SCHC YANG Data Model Extension</a>
        </h3>
<span id="name-schc-yang-data-model-compou"></span><div id="schc-data-model">
<figure id="figure-9">
          <div class="breakable lang-yang sourcecode" id="section-5.1-1.1">
<pre>&lt;CODE BEGINS&gt; file "ietf-schc-compound-ack@2023-07-26.yang"

module ietf-schc-compound-ack {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-schc-compound-ack";
  prefix schc-compound-ack;

  import ietf-schc {
    prefix schc;
  }

  organization
    "IETF IPv6 over Low Power Wide-Area Networks (lpwan)
     Working Group";
  contact
    "WG Web:   &lt;https://datatracker.ietf.org/wg/lpwan/about/&gt;
     WG List:  &lt;mailto:lp-wan@ietf.org&gt;
     Editor:   Laurent Toutain
       &lt;mailto:laurent.toutain@imt-atlantique.fr&gt;
     Editor:   Juan Carlos Zuniga
       &lt;mailto:j.c.zuniga@ieee.org&gt;
     Editor:   Sergio Aguilar
       &lt;mailto:sergio.aguilar.romero@upc.edu&gt;";
  description
    "Copyright (c) 2023 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.
     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Revised BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).
     This version of this YANG module is part of RFC 9363
     (https://www.rfc-editor.org/info/rfc9363); see the RFC itself
     for full legal notices.
     ***************************************************************
     Generic data model for the Static Context Header Compression
     Rule for SCHC, based on RFCs 8724 and 8824.  Including
     compression, no-compression, and fragmentation Rules.";

  revision 2023-07-26 {
    description
      "Initial version for RFC 9441.";
    reference
      "RFC 9441 Static Context Header Compression (SCHC) Compound
                Acknowledgement (ACK)";
  }

  identity bitmap-format-base-type {
    description
      "Define how the bitmap is formed in ACK messages.";
  }

  identity bitmap-RFC8724 {
    base bitmap-format-base-type;
    description
      "Bitmap by default as defined in RFC 8724.";
    reference
      "RFC 8724 SCHC: Generic Framework for Static Context Header
                Compression and Fragmentation";
  }

  identity bitmap-compound-ack {
    base bitmap-format-base-type;
    description
      "Compound ACK allows several bitmaps in an ACK message.";
  }

  typedef bitmap-format-type {
    type identityref {
      base bitmap-format-base-type;
    }
    description
      "Type of bitmap used in Rules.";
  }

  augment "/schc:schc/schc:rule/schc:nature/"
        + "schc:fragmentation/schc:mode/schc:ack-on-error" {
    leaf bitmap-format {
      when "derived-from-or-self(../schc:fragmentation-mode,
                        'schc:fragmentation-mode-ack-on-error')";
      type schc-compound-ack:bitmap-format-type;
      default "schc-compound-ack:bitmap-RFC8724";
      description
        "How the bitmaps are included in the SCHC ACK message.";
    }
    leaf last-bitmap-compression {
      when "derived-from-or-self(../schc:fragmentation-mode,
                        'schc:fragmentation-mode-ack-on-error')";
      type boolean;
      default "true";
      description
        "When true, the ultimate bitmap in the SCHC ACK message
         can be compressed.  Default behavior from RFC 8724.";
      reference
        "RFC 8724 SCHC: Generic Framework for Static Context Header
                  Compression and Fragmentation";
    }
    description
      "Augment the SCHC Rules to manage Compound ACK.";
  }
}

&lt;CODE ENDS&gt;</pre>
</div>
<figcaption><a class="selfRef" href="#figure-9">Figure 9</a>:
<a class="selfRef" href="#name-schc-yang-data-model-compou">SCHC YANG Data Model - Compound ACK Extension</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="yang-tree">
<section id="section-5.2">
        <h3 id="name-schc-yang-tree-extension">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-schc-yang-tree-extension">SCHC YANG Tree Extension</a>
        </h3>
<span id="name-tree-diagram-compound-ack-e"></span><div id="schc-data-tree">
<figure id="figure-10">
          <div class="lang-yangtree sourcecode" id="section-5.2-1.1">
<pre>module: ietf-schc-compound-ack
  augment /schc:schc/schc:rule/schc:nature/schc:fragmentation/
        schc:mode/schc:ack-on-error:
    +--rw bitmap-format?        schc-compound-ack:bitmap-format-type
    +--rw last-bitmap-compression?   boolean
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-10">Figure 10</a>:
<a class="selfRef" href="#name-tree-diagram-compound-ack-e">Tree Diagram - Compound ACK Extension</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="schc-compound-ack-parameters">
<section id="section-6">
      <h2 id="name-schc-compound-ack-parameter">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-schc-compound-ack-parameter">SCHC Compound ACK Parameters</a>
      </h2>
<p id="section-6-1">This section lists the parameters related to the SCHC Compound ACK usage that need to be defined in the Profile.
    This list <span class="bcp14">MUST</span> be appended to the list of SCHC parameters under "Decision to use SCHC fragmentation mechanism or not. If yes, the document must describe:" as defined in Appendix <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8724#appendix-D">D</a> of <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>.<a class="pilcrow" href="#section-6-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-2.1">whether the SCHC Compound ACK message is used or not, and<a class="pilcrow" href="#section-6-2.1">¶</a>
</li>
        <li class="normal" id="section-6-2.2">whether the compressed bitmap format in the last window of the SCHC Compound ACK message is used or not.<a class="pilcrow" href="#section-6-2.2">¶</a>
</li>
      </ul>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-7-1">This document specifies a message format extension for SCHC.
    Hence, the same security considerations defined in <span>[<a class="cite xref" href="#RFC8724">RFC8724</a>]</span>
      and <span>[<a class="cite xref" href="#RFC9363">RFC9363</a>]</span> apply.<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">The YANG module specified in this document defines a schema for data that is designed to be accessed via network management protocols such as NETCONF <span>[<a class="cite xref" href="#RFC6241">RFC6241</a>]</span> or RESTCONF <span>[<a class="cite xref" href="#RFC8040">RFC8040</a>]</span>. The lowest NETCONF layer is the secure transport layer, and the mandatory-to-implement secure transport is Secure Shell (SSH) <span>[<a class="cite xref" href="#RFC6242">RFC6242</a>]</span>. The lowest RESTCONF layer is HTTPS, and the mandatory-to-implement secure transport is TLS <span>[<a class="cite xref" href="#RFC8446">RFC8446</a>]</span>.<a class="pilcrow" href="#section-7-2">¶</a></p>
<p id="section-7-3">The Network Configuration Access Control Model (NACM) <span>[<a class="cite xref" href="#RFC8341">RFC8341</a>]</span> provides the means to restrict access for particular NETCONF or RESTCONF users to a preconfigured subset of all available NETCONF or RESTCONF protocol operations and content.<a class="pilcrow" href="#section-7-3">¶</a></p>
<p id="section-7-4">There are a number of data nodes defined in this YANG module that are
   writable/creatable/deletable (i.e., config true, which is the
   default).  These data nodes may be considered sensitive or vulnerable
   in some network environments.  Write operations (e.g., edit-config)
   to these data nodes without proper protection can have a negative
   effect on network operations.  These are the subtrees and data nodes
      and their sensitivity/vulnerability:<a class="pilcrow" href="#section-7-4">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7-5">
        <dt id="section-7-5.1">/schc:schc/schc:rule/schc:nature/schc:fragmentation/schc:mode/schc:ack-on-error:</dt>
        <dd id="section-7-5.2" style="margin-left: 1.5em">All the data nodes may be modified. The Rule contains sensitive information, such
    as the SCHC F/R mode configuration and usage and SCHC Compound ACK configuration.
    An attacker may try to modify other devices' Rules by changing the F/R mode or the
    usage of the SCHC Compound ACK and may block communication or create extra ACKs.
     Therefore, a device must be allowed to modify only
      its own Rules on the remote SCHC instance.  The identity of the
      requester must be validated.  This can be done through
  certificates or access lists.<a class="pilcrow" href="#section-7-5.2">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-7-6">Some of the readable data nodes in this YANG module may be considered
   sensitive or vulnerable in some network environments.  It is thus
   important to control read access (e.g., via get, get-config, or
   notification) to these data nodes.  These are the subtrees and data
   nodes and their sensitivity/vulnerability:<a class="pilcrow" href="#section-7-6">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7-7">
        <dt id="section-7-7.1">/schc:schc/schc:rule/schc:nature/schc:fragmentation/schc:mode/schc:ack-on-error:</dt>
        <dd id="section-7-7.2" style="margin-left: 1.5em">By reading this module, an attacker may learn the F/R mode used by the device,
    how the device manages the bitmap creation, the buffer sizes, and when the device will request an ACK.<a class="pilcrow" href="#section-7-7.2">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="ianaconsiderations">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-8-1"> This document registers one URI and one YANG data model.<a class="pilcrow" href="#section-8-1">¶</a></p>
<div id="uri_registration">
<section id="section-8.1">
        <h3 id="name-uri-registration">
<a class="section-number selfRef" href="#section-8.1">8.1. </a><a class="section-name selfRef" href="#name-uri-registration">URI Registration</a>
        </h3>
<p id="section-8.1-1">
       IANA registered the following URI in the "IETF XML Registry"
        <span>[<a class="cite xref" href="#RFC3688">RFC3688</a>]</span>:<a class="pilcrow" href="#section-8.1-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.1-2">
          <dt id="section-8.1-2.1">URI:</dt>
          <dd id="section-8.1-2.2" style="margin-left: 1.5em">urn:ietf:params:xml:ns:yang:ietf-schc-compound-ack<a class="pilcrow" href="#section-8.1-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-2.3">Registrant Contact:</dt>
          <dd id="section-8.1-2.4" style="margin-left: 1.5em">The IESG.<a class="pilcrow" href="#section-8.1-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-2.5">XML:</dt>
          <dd id="section-8.1-2.6" style="margin-left: 1.5em">N/A; the requested URI is an XML namespace.<a class="pilcrow" href="#section-8.1-2.6">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="module_name_registration">
<section id="section-8.2">
        <h3 id="name-yang-module-name-registrati">
<a class="section-number selfRef" href="#section-8.2">8.2. </a><a class="section-name selfRef" href="#name-yang-module-name-registrati">YANG Module Name Registration</a>
        </h3>
<p id="section-8.2-1"> IANA has registered the following YANG data model in the "YANG Module
   Names" registry <span>[<a class="cite xref" href="#RFC6020">RFC6020</a>]</span>.<a class="pilcrow" href="#section-8.2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.2-2">
          <dt id="section-8.2-2.1">name:</dt>
          <dd id="section-8.2-2.2" style="margin-left: 1.5em">ietf-schc-compound-ack<a class="pilcrow" href="#section-8.2-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.2-2.3">namespace:</dt>
          <dd id="section-8.2-2.4" style="margin-left: 1.5em">urn:ietf:params:xml:ns:yang:ietf-schc-compound-ack<a class="pilcrow" href="#section-8.2-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.2-2.5">prefix:</dt>
          <dd id="section-8.2-2.6" style="margin-left: 1.5em">schc-compound-ack<a class="pilcrow" href="#section-8.2-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.2-2.7">reference:</dt>
          <dd id="section-8.2-2.8" style="margin-left: 1.5em">RFC 9441<a class="pilcrow" href="#section-8.2-2.8">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3688">[RFC3688]</dt>
        <dd>
<span class="refAuthor">Mealling, M.</span>, <span class="refTitle">"The IETF XML Registry"</span>, <span class="seriesInfo">BCP 81</span>, <span class="seriesInfo">RFC 3688</span>, <span class="seriesInfo">DOI 10.17487/RFC3688</span>, <time class="refDate" datetime="2004-01">January 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3688">https://www.rfc-editor.org/info/rfc3688</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6020">[RFC6020]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refTitle">"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"</span>, <span class="seriesInfo">RFC 6020</span>, <span class="seriesInfo">DOI 10.17487/RFC6020</span>, <time class="refDate" datetime="2010-10">October 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6020">https://www.rfc-editor.org/info/rfc6020</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6241">[RFC6241]</dt>
        <dd>
<span class="refAuthor">Enns, R., Ed.</span>, <span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refAuthor">Schoenwaelder, J., Ed.</span>, and <span class="refAuthor">A. Bierman, Ed.</span>, <span class="refTitle">"Network Configuration Protocol (NETCONF)"</span>, <span class="seriesInfo">RFC 6241</span>, <span class="seriesInfo">DOI 10.17487/RFC6241</span>, <time class="refDate" datetime="2011-06">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6241">https://www.rfc-editor.org/info/rfc6241</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6242">[RFC6242]</dt>
        <dd>
<span class="refAuthor">Wasserman, M.</span>, <span class="refTitle">"Using the NETCONF Protocol over Secure Shell (SSH)"</span>, <span class="seriesInfo">RFC 6242</span>, <span class="seriesInfo">DOI 10.17487/RFC6242</span>, <time class="refDate" datetime="2011-06">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6242">https://www.rfc-editor.org/info/rfc6242</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8040">[RFC8040]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Bjorklund, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"RESTCONF Protocol"</span>, <span class="seriesInfo">RFC 8040</span>, <span class="seriesInfo">DOI 10.17487/RFC8040</span>, <time class="refDate" datetime="2017-01">January 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8040">https://www.rfc-editor.org/info/rfc8040</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8341">[RFC8341]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span> and <span class="refAuthor">M. Bjorklund</span>, <span class="refTitle">"Network Configuration Access Control Model"</span>, <span class="seriesInfo">STD 91</span>, <span class="seriesInfo">RFC 8341</span>, <span class="seriesInfo">DOI 10.17487/RFC8341</span>, <time class="refDate" datetime="2018-03">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8341">https://www.rfc-editor.org/info/rfc8341</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time class="refDate" datetime="2018-08">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8724">[RFC8724]</dt>
        <dd>
<span class="refAuthor">Minaburo, A.</span>, <span class="refAuthor">Toutain, L.</span>, <span class="refAuthor">Gomez, C.</span>, <span class="refAuthor">Barthel, D.</span>, and <span class="refAuthor">JC. Zuniga</span>, <span class="refTitle">"SCHC: Generic Framework for Static Context Header Compression and Fragmentation"</span>, <span class="seriesInfo">RFC 8724</span>, <span class="seriesInfo">DOI 10.17487/RFC8724</span>, <time class="refDate" datetime="2020-04">April 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8724">https://www.rfc-editor.org/info/rfc8724</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9363">[RFC9363]</dt>
      <dd>
<span class="refAuthor">Minaburo, A.</span> and <span class="refAuthor">L. Toutain</span>, <span class="refTitle">"A YANG Data Model for Static Context Header Compression (SCHC)"</span>, <span class="seriesInfo">RFC 9363</span>, <span class="seriesInfo">DOI 10.17487/RFC9363</span>, <time class="refDate" datetime="2023-03">March 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9363">https://www.rfc-editor.org/info/rfc9363</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC8376">[RFC8376]</dt>
      <dd>
<span class="refAuthor">Farrell, S., Ed.</span>, <span class="refTitle">"Low-Power Wide Area Network (LPWAN) Overview"</span>, <span class="seriesInfo">RFC 8376</span>, <span class="seriesInfo">DOI 10.17487/RFC8376</span>, <time class="refDate" datetime="2018-05">May 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8376">https://www.rfc-editor.org/info/rfc8376</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1"><span class="contact-name">Carles Gomez</span> has been funded in part by the Spanish Government
   through the TEC2016-79988-P grant and the PID2019-106808RA-I00 grant
   (funded by MCIN / AEI / 10.13039/501100011033) and by Secretaria
   d'Universitats i Recerca del Departament d'Empresa i Coneixement de
   la Generalitat de Catalunya through 2017 grant SGR 376 and 2021 grant SGR 00330.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<p id="appendix-A-2"><span class="contact-name">Sergio Aguilar</span> has been funded by the ERDF and the Spanish Government through project TEC2016-79988-P and project PID2019-106808RA-I00,
AEI/FEDER, EU (funded by MCIN / AEI / 10.13039/501100011033).<a class="pilcrow" href="#appendix-A-2">¶</a></p>
<p id="appendix-A-3"><span class="contact-name">Sandra Cespedes</span> has been funded in part by the ANID Chile Project FONDECYT Regular 1201893 and Basal Project FB0008.<a class="pilcrow" href="#appendix-A-3">¶</a></p>
<p id="appendix-A-4"><span class="contact-name">Diego Wistuba</span> has been funded by the ANID Chile Project FONDECYT Regular 1201893.<a class="pilcrow" href="#appendix-A-4">¶</a></p>
<p id="appendix-A-5">The authors would like to thank <span class="contact-name">Rafael Vidal</span>, <span class="contact-name">Julien Boite</span>, <span class="contact-name">Renaud Marty</span>, <span class="contact-name">Antonis Platis</span>, <span class="contact-name">Dominique Barthel</span>, and <span class="contact-name">Pascal Thubert</span> for their
very useful comments, reviews, and implementation design considerations.<a class="pilcrow" href="#appendix-A-5">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Juan Carlos Zúñiga</span></div>
<div class="left" dir="auto"><span class="org">Cisco</span></div>
<div class="left" dir="auto">
<span class="locality">Montreal</span>  <span class="postal-code">QC</span>
</div>
<div class="left" dir="auto"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:juzuniga@cisco.com">juzuniga@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Carles Gomez</span></div>
<div class="left" dir="auto"><span class="org">Universitat Politècnica de Catalunya</span></div>
<div class="left" dir="auto"><span class="street-address">C/Esteve Terradas, 7<br/>08860 Castelldefels</span></div>
<div class="left" dir="auto"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:carles.gomez@upc.edu">carles.gomez@upc.edu</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Sergio Aguilar</span></div>
<div class="left" dir="auto"><span class="org">Universitat Politècnica de Catalunya</span></div>
<div class="left" dir="auto"><span class="street-address">C/Esteve Terradas, 7<br/>08860 Castelldefels</span></div>
<div class="left" dir="auto"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:sergio.aguilar.romero@upc.edu">sergio.aguilar.romero@upc.edu</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Laurent Toutain</span></div>
<div class="left" dir="auto"><span class="org">IMT-Atlantique</span></div>
<div class="left" dir="auto"><span class="street-address">2 rue de la Chataigneraie<br/>CS 17607</span></div>
<div class="left" dir="auto"><span class="locality">35576 Cesson-Sevigne Cedex</span></div>
<div class="left" dir="auto"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:Laurent.Toutain@imt-atlantique.fr">Laurent.Toutain@imt-atlantique.fr</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Sandra Céspedes</span></div>
<div class="left" dir="auto"><span class="org">Concordia University</span></div>
<div class="left" dir="auto"><span class="street-address">1455 De Maisonneuve Blvd. W.</span></div>
<div class="left" dir="auto">
<span class="locality">Montreal QC, H3G 1M8</span>  </div>
<div class="left" dir="auto"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:sandra.cespedes@concordia.ca">sandra.cespedes@concordia.ca</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Diego Wistuba</span></div>
<div class="left" dir="auto"><span class="org">NIC Labs, Universidad de Chile</span></div>
<div class="left" dir="auto"><span class="street-address">Av. Almte. Blanco Encalada 1975<br/>Santiago</span></div>
<div class="left" dir="auto"><span class="country-name">Chile</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:research@witu.cl">research@witu.cl</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>