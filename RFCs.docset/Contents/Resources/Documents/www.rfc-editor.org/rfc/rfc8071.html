<html><head></head><body><pre>Internet Engineering Task Force (IETF)                         K. Watsen
Request for Comments: 8071                              Juniper Networks
Category: Standards Track                                  February 2017
ISSN: 2070-1721


                <span class="h1">NETCONF Call Home and RESTCONF Call Home</span>

Abstract

   This RFC presents NETCONF Call Home and RESTCONF Call Home, which
   enable a NETCONF or RESTCONF server to initiate a secure connection
   to a NETCONF or RESTCONF client, respectively.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc7841#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc8071">http://www.rfc-editor.org/info/rfc8071</a>.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.









<span class="grey">Watsen                       Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
     <a href="#section-1.1">1.1</a>.  Motivation  . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-1.2">1.2</a>.  Requirements Terminology  . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-1.3">1.3</a>.  Applicability Statement . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-1.4">1.4</a>.  Relation to <a href="./rfc4253">RFC 4253</a>  . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-1.5">1.5</a>.  The NETCONF/RESTCONF Convention . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-2">2</a>.  Solution Overview . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-3">3</a>.  The NETCONF or RESTCONF Client  . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.1">3.1</a>.  Client Protocol Operation . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-3.2">3.2</a>.  Client Configuration Data Model . . . . . . . . . . . . .   <a href="#page-7">7</a>
   <a href="#section-4">4</a>.  The NETCONF or RESTCONF Server  . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-4.1">4.1</a>.  Server Protocol Operation . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-4.2">4.2</a>.  Server Configuration Data Model . . . . . . . . . . . . .   <a href="#page-8">8</a>
   <a href="#section-5">5</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="#page-9">9</a>
   <a href="#section-6">6</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <a href="#page-10">10</a>
   <a href="#section-7">7</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-7.1">7.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
     <a href="#section-7.2">7.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   This RFC presents NETCONF Call Home and RESTCONF Call Home, which
   enable a NETCONF or RESTCONF server to initiate a secure connection
   to a NETCONF or RESTCONF client, respectively.

   NETCONF Call Home supports both of the secure transports used by the
   Network Configuration Protocol (NETCONF) [<a href="./rfc6241" title='"Network Configuration Protocol (NETCONF)"'>RFC6241</a>], Secure Shell
   (SSH), and Transport Layer Security (TLS).  The NETCONF protocol's
   binding to SSH is defined in [<a href="./rfc6242" title='"Using the NETCONF Protocol over Secure Shell (SSH)"'>RFC6242</a>].  The NETCONF protocol's
   binding to TLS is defined in [<a href="./rfc7589" title='"Using the NETCONF Protocol over Transport Layer Security (TLS) with Mutual X.509 Authentication"'>RFC7589</a>].

   RESTCONF Call Home only supports TLS, the same as the RESTCONF
   protocol [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>].  The RESTCONF protocol's binding to TLS is
   defined in [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>].

   The SSH protocol is defined in [<a href="./rfc4253" title='"The Secure Shell (SSH) Transport Layer Protocol"'>RFC4253</a>].  The TLS protocol is
   defined in [<a href="./rfc5246" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>].  Both the SSH and TLS protocols are layered on
   top of the TCP protocol, which is defined in [<a href="./rfc793" title='"Transmission Control Protocol"'>RFC793</a>].

   Both NETCONF Call Home and RESTCONF Call Home preserve all but one of
   the client/server roles in their respective protocol stacks, as
   compared to client-initiated NETCONF and RESTCONF connections.  The
   one and only role reversal that occurs is at the TCP layer; that is,
   which peer is the TCP client and which is the TCP server.



<span class="grey">Watsen                       Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


   For example, a network element is traditionally the TCP server.
   However, when calling home, the network element initially assumes the
   role of the TCP client.  The network element's secure transport-layer
   roles (SSH server, TLS server) and its application-layer roles
   (NETCONF server, RESTCONF server) all remain the same.

   Having consistency in both the secure transport-layer (SSH, TLS) and
   application-layer (NETCONF, RESTCONF) roles conveniently enables
   deployed network management infrastructure to support call home also.
   For instance, existing certificate chains and user authentication
   mechanisms are unaffected by call home.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.1.%20%20Motivation"></a><a class="selflink" href="#section-1.1" id="section-1.1">1.1</a>.  Motivation</span>

   Call home is generally useful for both the initial deployment and
   ongoing management of networking elements.  Here are some scenarios
   enabled by call home:

   o  The network element may proactively "call home" after being
      powered on for the first time in order to register itself with its
      management system.

   o  The network element may access the network in a way that
      dynamically assigns it an IP address, but does not register its
      assigned IP address to a mapping service (e.g., dynamic DNS).

   o  The network element may be deployed behind a firewall that
      implements Network Address Translation (NAT) for all internal
      network IP addresses.

   o  The network element may be deployed behind a firewall that does
      not allow any management access to the internal network.

   o  The network element may be configured in "stealth mode", and thus
      does not have any open ports for the management system to connect
      to.

   o  The operator may prefer to have network elements initiate
      management connections, believing it is easier to secure one open
      port in the data center than to have an open port on each network
      element in the network.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.2.%20%20Requirements%20Terminology"></a><a class="selflink" href="#section-1.2" id="section-1.2">1.2</a>.  Requirements Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="./rfc2119">RFC 2119</a> [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].




<span class="grey">Watsen                       Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.3.%20%20Applicability%20Statement"></a><a class="selflink" href="#section-1.3" id="section-1.3">1.3</a>.  Applicability Statement</span>

   The techniques described in this document are suitable for network
   management scenarios such as the ones described in <a href="#section-1.1">Section 1.1</a>.
   However, these techniques are only defined for NETCONF Call Home and
   RESTCONF Call Home, as described in this document.

   The reason for this restriction is that different protocols have
   different security assumptions.  The NETCONF and RESTCONF protocols
   require clients and servers to verify the identity of the other
   party.  This requirement is specified for the NETCONF protocol in
   <a href="./rfc6241#section-2.2">Section 2.2 of [RFC6241]</a>, and is specified for the RESTCONF protocol
   in Sections <a href="#section-2.4">2.4</a> and <a href="#section-2.5">2.5</a> of [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>].

   This contrasts with the base SSH and TLS protocols, which do not
   require programmatic verification of the other party (<a href="./rfc4251#section-9.3.4">Section 9.3.4
   of [RFC4251]</a>, <a href="./rfc4252#section-4">Section 4 of [RFC4252]</a>, and <a href="./rfc5246#section-7.3">Section 7.3 of [RFC5246]</a>).
   In such circumstances, allowing the SSH/TLS server to contact the
   SSH/TLS client would open new vulnerabilities.  Any use of call home
   with SSH/TLS for purposes other than NETCONF or RESTCONF will need a
   thorough contextual risk assessment.  A risk assessment for this RFC
   is in the Security Considerations section (<a href="#section-5">Section 5</a>).

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.4.%20%20Relation%20to%20RFC%204253"></a><a class="selflink" href="#section-1.4" id="section-1.4">1.4</a>.  Relation to <a href="./rfc4253">RFC 4253</a></span>

   This document uses the SSH Transport Layer Protocol [<a href="./rfc4253" title='"The Secure Shell (SSH) Transport Layer Protocol"'>RFC4253</a>] with
   the exception that the statement "The client initiates the
   connection" made in <a href="./rfc4253#section-4">Section 4 of RFC 4253</a> does not apply.  Assuming
   the reference to the client means "SSH client" and the reference to
   the connection means "TCP connection", this statement doesn't hold
   true in call home, where the network element is the SSH server and
   yet still initiates the TCP connection.  Security implications
   related to this change are discussed in <a href="#section-5">Section 5</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.5.%20%20The%20NETCONF%2FRESTCONF%20Convention"></a><a class="selflink" href="#section-1.5" id="section-1.5">1.5</a>.  The NETCONF/RESTCONF Convention</span>

   Throughout the remainder of this document, the term "NETCONF/
   RESTCONF" is used as an abbreviation in place of the text "the
   NETCONF or the RESTCONF".  The NETCONF/RESTCONF abbreviation is not
   intended to require or to imply that a client or server must
   implement both the NETCONF standard and the RESTCONF standard.










<span class="grey">Watsen                       Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Solution%20Overview"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Solution Overview</span>

   The diagram below illustrates call home from a protocol-layering
   perspective:

          NETCONF/RESTCONF                    NETCONF/RESTCONF
               Server                              Client
                 |                                    |
                 |         1. TCP                     |
                 |-----------------------------------&gt;|
                 |                                    |
                 |                                    |
                 |         2. SSH/TLS                 |
                 |&lt;-----------------------------------|
                 |                                    |
                 |                                    |
                 |         3. NETCONF/RESTCONF        |
                 |&lt;-----------------------------------|
                 |                                    |
                Note: Arrows point from the "client" to
                  the "server" at each protocol layer.

                   Figure 1: Call Home Sequence Diagram

   This diagram makes the following points:

   1.  The NETCONF/RESTCONF server begins by initiating a TCP connection
       to the NETCONF/RESTCONF client.

   2.  Using this TCP connection, the NETCONF/RESTCONF client initiates
       an SSH/TLS session to the NETCONF/RESTCONF server.

   3.  Using this SSH/TLS session, the NETCONF/RESTCONF client initiates
       a NETCONF/RESTCONF session to the NETCONF/RESTCONF server.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20The%20NETCONF%20or%20RESTCONF%20Client"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  The NETCONF or RESTCONF Client</span>

   The term "client" is defined in <a href="./rfc6241#section-1.1">[RFC6241], Section 1.1</a>.  In the
   context of network management, the NETCONF/RESTCONF client might be a
   network management system.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20Client%20Protocol%20Operation"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Client Protocol Operation</span>

   C1  The NETCONF/RESTCONF client listens for TCP connection requests
       from NETCONF/RESTCONF servers.  The client MUST support accepting
       TCP connections on the IANA-assigned ports defined in <a href="#section-6">Section 6</a>,
       but MAY be configured to listen to a different port.




<span class="grey">Watsen                       Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


   C2  The NETCONF/RESTCONF client accepts an incoming TCP connection
       request and a TCP connection is established.

   C3  Using this TCP connection, the NETCONF/RESTCONF client starts
       either the SSH client [<a href="./rfc4253" title='"The Secure Shell (SSH) Transport Layer Protocol"'>RFC4253</a>] or the TLS client [<a href="./rfc5246" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>]
       protocol.  For example, assuming the use of the IANA-assigned
       ports, the SSH client protocol is started when the connection is
       accepted on port 4334 and the TLS client protocol is started when
       the connection is accepted on either port 4335 or port 4336.

   C4  When using TLS, the NETCONF/RESTCONF client MUST advertise
       "peer_allowed_to_send", as defined by [<a href="./rfc6520" title='"Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS) Heartbeat Extension"'>RFC6520</a>].  This is
       required so that NETCONF/RESTCONF servers can depend on it being
       there for call home connections, when keep-alives are needed the
       most.

   C5  As part of establishing an SSH or TLS connection, the NETCONF/
       RESTCONF client MUST validate the server's presented host key or
       certificate.  This validation MAY be accomplished by certificate
       path validation or by comparing the host key or certificate to a
       previously trusted or "pinned" value.  If a certificate is
       presented and it contains revocation-checking information, the
       NETCONF/RESTCONF client SHOULD check the revocation status of the
       certificate.  If it is determined that a certificate has been
       revoked, the client MUST immediately close the connection.

   C6  If certificate path validation is used, the NETCONF/RESTCONF
       client MUST ensure that the presented certificate has a valid
       chain of trust to a preconfigured issuer certificate, and that
       the presented certificate encodes an "identifier" [<a href="./rfc6125" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>] that
       the client was aware of before the connection attempt.  How
       identifiers are encoded in certificates MAY be determined by a
       policy associated with the certificate's issuer.  For instance, a
       given issuer may be known to only sign IDevID certificates
       [<a href="#ref-Std-802.1AR-2009">Std-802.1AR-2009</a>] having a unique identifier (e.g., a serial
       number) in the X.509 certificate's "CommonName" field.

   C7  After the server's host key or certificate is validated, the SSH
       or TLS protocol proceeds as normal to establish an SSH or TLS
       connection.  When performing client authentication with the
       NETCONF/RESTCONF server, the NETCONF/RESTCONF client MUST only
       use credentials that it had previously associated for the
       NETCONF/RESTCONF server's presented host key or server
       certificate.







<span class="grey">Watsen                       Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


   C8  Once the SSH or TLS connection is established, the NETCONF/
       RESTCONF client starts either the NETCONF client [<a href="./rfc6241" title='"Network Configuration Protocol (NETCONF)"'>RFC6241</a>] or
       RESTCONF client [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>] protocol.  Assuming the use of the
       IANA-assigned ports, the NETCONF client protocol is started when
       the connection is accepted on either port 4334 or port 4335 and
       the RESTCONF client protocol is started when the connection is
       accepted on port 4336.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20Client%20Configuration%20Data%20Model"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  Client Configuration Data Model</span>

   How a NETCONF or RESTCONF client is configured is outside the scope
   of this document.  For instance, such a configuration might be used
   to enable listening for call home connections, configuring trusted
   certificate issuers, or configuring identifiers for expected
   connections.  That said, YANG [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>] data modules for configuring
   NETCONF and RESTCONF clients, including call home, are provided in
   [<a href="#ref-NETCONF-MODELS">NETCONF-MODELS</a>] and [<a href="#ref-RESTCONF-MODELS">RESTCONF-MODELS</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20The%20NETCONF%20or%20RESTCONF%20Server"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  The NETCONF or RESTCONF Server</span>

   The term "server" is defined in <a href="./rfc6241#section-1.1">[RFC6241], Section 1.1</a>.  In the
   context of network management, the NETCONF/RESTCONF server might be a
   network element or a device.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Server%20Protocol%20Operation"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Server Protocol Operation</span>

   S1  The NETCONF/RESTCONF server initiates a TCP connection request to
       the NETCONF/RESTCONF client.  The source port may be per local
       policy or randomly assigned by the operating system.  The server
       MUST support connecting to one of the IANA-assigned ports defined
       in <a href="#section-6">Section 6</a>, but MAY be configured to connect to a different
       port.  Using the IANA-assigned ports, the server connects to port
       4334 for NETCONF over SSH, port 4335 for NETCONF over TLS, and
       port 4336 for RESTCONF over TLS.

   S2  The TCP connection request is accepted and a TCP connection is
       established.

   S3  Using this TCP connection, the NETCONF/RESTCONF server starts
       either the SSH server [<a href="./rfc4253" title='"The Secure Shell (SSH) Transport Layer Protocol"'>RFC4253</a>] or the TLS server [<a href="./rfc5246" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>]
       protocol, depending on how it is configured.  For example,
       assuming the use of the IANA-assigned ports, the SSH server
       protocol is used after connecting to the remote port 4334 and the
       TLS server protocol is used after connecting to either remote
       port 4335 or remote port 4336.






<span class="grey">Watsen                       Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


   S4  As part of establishing the SSH or TLS connection, the NETCONF/
       RESTCONF server will send its host key or certificate to the
       client.  If a certificate is sent, the server MUST also send all
       intermediate certificates leading up to a well-known and trusted
       issuer.  How to send a list of certificates is defined for SSH in
       <a href="./rfc6187#section-2.1">[RFC6187], Section 2.1</a>, and for TLS in <a href="./rfc5246#section-7.4.2">[RFC5246], Section 7.4.2</a>.

   S5  Establishing an SSH or TLS session requires server authentication
       of client credentials in all cases except with RESTCONF, where
       some client authentication schemes occur after the secure
       transport connection (TLS) has been established.  If transport-
       level (SSH or TLS) client authentication is required, and the
       client is unable to successfully authenticate itself to the
       server in an amount of time defined by local policy, the server
       MUST close the connection.

   S6  Once the SSH or TLS connection is established, the NETCONF/
       RESTCONF server starts either the NETCONF server [<a href="./rfc6241" title='"Network Configuration Protocol (NETCONF)"'>RFC6241</a>] or
       RESTCONF server [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>] protocol, depending on how it is
       configured.  Assuming the use of the IANA-assigned ports, the
       NETCONF server protocol is used after connecting to remote port
       4334 or remote port 4335, and the RESTCONF server protocol is
       used after connecting to remote port 4336.

   S7  If a persistent connection is desired, the NETCONF/RESTCONF
       server, as the connection initiator, SHOULD actively test the
       aliveness of the connection using a keep-alive mechanism.  For
       TLS-based connections, the NETCONF/RESTCONF server SHOULD send
       HeartbeatRequest messages, as defined by [<a href="./rfc6520" title='"Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS) Heartbeat Extension"'>RFC6520</a>].  For SSH-
       based connections, per <a href="./rfc4254#section-4">Section 4 of [RFC4254]</a>, the server SHOULD
       send an SSH_MSG_GLOBAL_REQUEST message with a purposely
       nonexistent "request name" value (e.g., keepalive@ietf.org) and
       the "want reply" value set to '1'.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.2.%20%20Server%20Configuration%20Data%20Model"></a><a class="selflink" href="#section-4.2" id="section-4.2">4.2</a>.  Server Configuration Data Model</span>

   How a NETCONF or RESTCONF server is configured is outside the scope
   of this document.  This includes configuration that might be used to
   specify hostnames, IP addresses, ports, algorithms, or other relevant
   parameters.  That said, YANG [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>] data modules for configuring
   NETCONF and RESTCONF servers, including call home, are provided in
   [<a href="#ref-NETCONF-MODELS">NETCONF-MODELS</a>] and [<a href="#ref-RESTCONF-MODELS">RESTCONF-MODELS</a>].









<span class="grey">Watsen                       Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Security%20Considerations"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Security Considerations</span>

   The security considerations described in [<a href="./rfc6242" title='"Using the NETCONF Protocol over Secure Shell (SSH)"'>RFC6242</a>] and [<a href="./rfc7589" title='"Using the NETCONF Protocol over Transport Layer Security (TLS) with Mutual X.509 Authentication"'>RFC7589</a>], and
   by extension [<a href="./rfc4253" title='"The Secure Shell (SSH) Transport Layer Protocol"'>RFC4253</a>], [<a href="./rfc5246" title='"The Transport Layer Security (TLS) Protocol Version 1.2"'>RFC5246</a>], and [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>] apply here as well.

   This RFC deviates from standard SSH and TLS usage by having the SSH/
   TLS server initiate the underlying TCP connection.  This reversal is
   incongruous with [<a href="./rfc4253" title='"The Secure Shell (SSH) Transport Layer Protocol"'>RFC4253</a>], which says "the client initiates the
   connection" and also [<a href="./rfc6125" title='"Representation and Verification of Domain-Based Application Service Identity within Internet Public Key Infrastructure Using X.509 (PKIX) Certificates in the Context of Transport Layer Security (TLS)"'>RFC6125</a>], which says "the client MUST construct
   a list of acceptable reference identifiers, and MUST do so
   independently of the identifiers presented by the service."

   Risks associated with these variances are centered around server
   authentication and the inability for clients to compare an
   independently constructed reference identifier to one presented by
   the server.  To mitigate against these risks, this RFC requires that
   the NETCONF/RESTCONF client validate the server's SSH host key or
   certificate, by certificate path validation to a preconfigured issuer
   certificate, or by comparing the host key or certificate to a
   previously trusted or "pinned" value.  Furthermore, when a
   certificate is used, this RFC requires that the client be able to
   match an identifier encoded in the presented certificate with an
   identifier the client was preconfigured to expect (e.g., a serial
   number).

   For cases when the NETCONF/RESTCONF server presents an X.509
   certificate, NETCONF/RESTCONF clients should ensure that the
   preconfigured issuer certificate used for certificate path validation
   is unique to the manufacturer of the server.  That is, the
   certificate should not belong to a third-party certificate authority
   that might issue certificates for more than one manufacturer.  This
   is especially important when a client authentication mechanism
   passing a shared secret (e.g., a password) to the server is used.
   Not doing so could otherwise lead to a case where the client sends
   the shared secret to another server that happens to have the same
   identity (e.g., a serial number) as the server the client was
   configured to expect.

   Considerations not associated with server authentication follow next.

   Internet-facing hosts running NETCONF Call Home or RESTCONF Call Home
   will be fingerprinted via scanning tools such as "zmap" [<a href="#ref-zmap" title='"ZMap: Fast Internet-Wide Scanning and its Security Applications"'>zmap</a>].  Both
   SSH and TLS provide many ways in which a host can be fingerprinted.
   SSH and TLS servers are fairly mature and able to withstand attacks,
   but SSH and TLS clients may not be as robust.  Implementers and
   deployments need to ensure that software update mechanisms are
   provided so that vulnerabilities can be fixed in a timely fashion.




<span class="grey">Watsen                       Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


   An attacker could launch a denial-of-service (DoS) attack on the
   NETCONF/RESTCONF client by having it perform computationally
   expensive operations, before deducing that the attacker doesn't
   possess a valid key.  For instance, in TLS 1.3 [<a href="#ref-TLS1.3" title='"The Transport Layer Security (TLS) Protocol Version 1.3"'>TLS1.3</a>], the
   ClientHello message contains a Key Share value based on an expensive
   asymmetric key operation.  Common precautions mitigating DoS attacks
   are recommended, such as temporarily blacklisting the source address
   after a set number of unsuccessful login attempts.

   When using call home with the RESTCONF protocol, special care is
   required when using some HTTP authentication schemes, especially the
   Basic [<a href="./rfc7617" title="&quot;The 'Basic' HTTP Authentication Scheme&quot;">RFC7617</a>] and Digest [<a href="./rfc7616" title='"HTTP Digest Access Authentication"'>RFC7616</a>] schemes, which convey a shared
   secret (e.g., a password).  Implementers and deployments should be
   sure to review the Security Considerations section in the RFC for any
   HTTP client authentication scheme used.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  IANA Considerations</span>

   IANA has assigned three TCP port numbers in the "User Ports" range
   with the service names "netconf-ch-ssh", "netconf-ch-tls", and
   "restconf-ch-tls".  These ports will be the default ports for NETCONF
   Call Home and RESTCONF Call Home protocols.  Below is the
   registration template following the rules in [<a href="./rfc6335" title='"Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry"'>RFC6335</a>].

   Service Name:           netconf-ch-ssh
   Port Number:            4334
   Transport Protocol(s):  TCP
   Description:            NETCONF Call Home (SSH)
   Assignee:               IESG &lt;iesg@ietf.org&gt;
   Contact:                IETF Chair &lt;chair@ietf.org&gt;
   Reference:              <a href="./rfc8071">RFC 8071</a>

   Service Name:           netconf-ch-tls
   Port Number:            4335
   Transport Protocol(s):  TCP
   Description:            NETCONF Call Home (TLS)
   Assignee:               IESG &lt;iesg@ietf.org&gt;
   Contact:                IETF Chair &lt;chair@ietf.org&gt;
   Reference:              <a href="./rfc8071">RFC 8071</a>

   Service Name:           restconf-ch-tls
   Port Number:            4336
   Transport Protocol(s):  TCP
   Description:            RESTCONF Call Home (TLS)
   Assignee:               IESG &lt;iesg@ietf.org&gt;
   Contact:                IETF Chair &lt;chair@ietf.org&gt;
   Reference:              <a href="./rfc8071">RFC 8071</a>




<span class="grey">Watsen                       Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20References"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.1.%20%20Normative%20References"></a><a class="selflink" href="#section-7.1" id="section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC793">RFC793</a>]   Postel, J., "Transmission Control Protocol", STD 7,
              <a href="./rfc793">RFC 793</a>, DOI 10.17487/RFC0793, September 1981,
              &lt;<a href="http://www.rfc-editor.org/info/rfc793">http://www.rfc-editor.org/info/rfc793</a>&gt;.

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC4251">RFC4251</a>]  Ylonen, T. and C. Lonvick, Ed., "The Secure Shell (SSH)
              Protocol Architecture", <a href="./rfc4251">RFC 4251</a>, DOI 10.17487/RFC4251,
              January 2006, &lt;<a href="http://www.rfc-editor.org/info/rfc4251">http://www.rfc-editor.org/info/rfc4251</a>&gt;.

   [<a id="ref-RFC4252">RFC4252</a>]  Ylonen, T. and C. Lonvick, Ed., "The Secure Shell (SSH)
              Authentication Protocol", <a href="./rfc4252">RFC 4252</a>, DOI 10.17487/RFC4252,
              January 2006, &lt;<a href="http://www.rfc-editor.org/info/rfc4252">http://www.rfc-editor.org/info/rfc4252</a>&gt;.

   [<a id="ref-RFC4253">RFC4253</a>]  Ylonen, T. and C. Lonvick, Ed., "The Secure Shell (SSH)
              Transport Layer Protocol", <a href="./rfc4253">RFC 4253</a>, DOI 10.17487/RFC4253,
              January 2006, &lt;<a href="http://www.rfc-editor.org/info/rfc4253">http://www.rfc-editor.org/info/rfc4253</a>&gt;.

   [<a id="ref-RFC4254">RFC4254</a>]  Ylonen, T. and C. Lonvick, Ed., "The Secure Shell (SSH)
              Connection Protocol", <a href="./rfc4254">RFC 4254</a>, DOI 10.17487/RFC4254,
              January 2006, &lt;<a href="http://www.rfc-editor.org/info/rfc4254">http://www.rfc-editor.org/info/rfc4254</a>&gt;.

   [<a id="ref-RFC5246">RFC5246</a>]  Dierks, T. and E. Rescorla, "The Transport Layer Security
              (TLS) Protocol Version 1.2", <a href="./rfc5246">RFC 5246</a>,
              DOI 10.17487/RFC5246, August 2008,
              &lt;<a href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.

   [<a id="ref-RFC6125">RFC6125</a>]  Saint-Andre, P. and J. Hodges, "Representation and
              Verification of Domain-Based Application Service Identity
              within Internet Public Key Infrastructure Using X.509
              (PKIX) Certificates in the Context of Transport Layer
              Security (TLS)", <a href="./rfc6125">RFC 6125</a>, DOI 10.17487/RFC6125, March
              2011, &lt;<a href="http://www.rfc-editor.org/info/rfc6125">http://www.rfc-editor.org/info/rfc6125</a>&gt;.

   [<a id="ref-RFC6187">RFC6187</a>]  Igoe, K. and D. Stebila, "X.509v3 Certificates for Secure
              Shell Authentication", <a href="./rfc6187">RFC 6187</a>, DOI 10.17487/RFC6187,
              March 2011, &lt;<a href="http://www.rfc-editor.org/info/rfc6187">http://www.rfc-editor.org/info/rfc6187</a>&gt;.







<span class="grey">Watsen                       Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


   [<a id="ref-RFC6241">RFC6241</a>]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", <a href="./rfc6241">RFC 6241</a>, DOI 10.17487/RFC6241, June 2011,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6241">http://www.rfc-editor.org/info/rfc6241</a>&gt;.

   [<a id="ref-RFC6242">RFC6242</a>]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", <a href="./rfc6242">RFC 6242</a>, DOI 10.17487/RFC6242, June 2011,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6242">http://www.rfc-editor.org/info/rfc6242</a>&gt;.

   [<a id="ref-RFC6335">RFC6335</a>]  Cotton, M., Eggert, L., Touch, J., Westerlund, M., and S.
              Cheshire, "Internet Assigned Numbers Authority (IANA)
              Procedures for the Management of the Service Name and
              Transport Protocol Port Number Registry", <a href="https://www.rfc-editor.org/bcp/bcp165">BCP 165</a>,
              <a href="./rfc6335">RFC 6335</a>, DOI 10.17487/RFC6335, August 2011,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6335">http://www.rfc-editor.org/info/rfc6335</a>&gt;.

   [<a id="ref-RFC6520">RFC6520</a>]  Seggelmann, R., Tuexen, M., and M. Williams, "Transport
              Layer Security (TLS) and Datagram Transport Layer Security
              (DTLS) Heartbeat Extension", <a href="./rfc6520">RFC 6520</a>,
              DOI 10.17487/RFC6520, February 2012,
              &lt;<a href="http://www.rfc-editor.org/info/rfc6520">http://www.rfc-editor.org/info/rfc6520</a>&gt;.

   [<a id="ref-RFC7589">RFC7589</a>]  Badra, M., Luchuk, A., and J. Schoenwaelder, "Using the
              NETCONF Protocol over Transport Layer Security (TLS) with
              Mutual X.509 Authentication", <a href="./rfc7589">RFC 7589</a>,
              DOI 10.17487/RFC7589, June 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7589">http://www.rfc-editor.org/info/rfc7589</a>&gt;.

   [<a id="ref-RFC8040">RFC8040</a>]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", <a href="./rfc8040">RFC 8040</a>, DOI 10.17487/RFC8040, January 2017,
              &lt;<a href="http://www.rfc-editor.org/info/rfc8040">http://www.rfc-editor.org/info/rfc8040</a>&gt;.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.2.%20%20Informative%20References"></a><a class="selflink" href="#section-7.2" id="section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-NETCONF-MODELS">NETCONF-MODELS</a>]
              Watsen, K., Wu, G., and J. Schoenwaelder, "NETCONF Client
              and Server Models", Work in Progress, <a href="./draft-ietf-netconf-netconf-client-server-01">draft-ietf-netconf-</a>
              <a href="./draft-ietf-netconf-netconf-client-server-01">netconf-client-server-01</a>, November 2016.

   [<a id="ref-RESTCONF-MODELS">RESTCONF-MODELS</a>]
              Watsen, K. and J. Schoenwaelder, "RESTCONF Client and
              Server Models", Work in Progress <a href="./draft-ietf-netconf-restconf-client-server-01">draft-ietf-netconf-</a>
              <a href="./draft-ietf-netconf-restconf-client-server-01">restconf-client-server-01</a>, November 2016.

   [<a id="ref-RFC7616">RFC7616</a>]  Shekh-Yusef, R., Ed., Ahrens, D., and S. Bremer, "HTTP
              Digest Access Authentication", <a href="./rfc7616">RFC 7616</a>,
              DOI 10.17487/RFC7616, September 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7616">http://www.rfc-editor.org/info/rfc7616</a>&gt;.



<span class="grey">Watsen                       Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc8071">RFC 8071</a>        NETCONF Call Home and RESTCONF Call Home   February 2017</span>


   [<a id="ref-RFC7617">RFC7617</a>]  Reschke, J., "The 'Basic' HTTP Authentication Scheme",
              <a href="./rfc7617">RFC 7617</a>, DOI 10.17487/RFC7617, September 2015,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7617">http://www.rfc-editor.org/info/rfc7617</a>&gt;.

   [<a id="ref-RFC7950">RFC7950</a>]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              <a href="./rfc7950">RFC 7950</a>, DOI 10.17487/RFC7950, August 2016,
              &lt;<a href="http://www.rfc-editor.org/info/rfc7950">http://www.rfc-editor.org/info/rfc7950</a>&gt;.

   [<a id="ref-Std-802.1AR-2009">Std-802.1AR-2009</a>]
              IEEE, "IEEE Standard for Local and metropolitan area
              networks - Secure Device Identity", IEEE Std 802.1AR-2009,
              DOI 10.1109/IEEESTD.2009.5367679, December 2009,
              &lt;<a href="http://standards.ieee.org/findstds/standard/802.1AR-2009.html">http://standards.ieee.org/findstds/</a>
              <a href="http://standards.ieee.org/findstds/standard/802.1AR-2009.html">standard/802.1AR-2009.html</a>&gt;.

   [<a id="ref-TLS1.3">TLS1.3</a>]   Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", Work in Progress, <a href="./draft-ietf-tls-tls13-18">draft-ietf-tls-tls13-18</a>,
              October 2016.

   [<a id="ref-zmap">zmap</a>]     Durumeric, Z., Wustrow, E., and J. Halderman, "ZMap: Fast
              Internet-Wide Scanning and its Security Applications",
              22nd Usenix Security Symposium, August 2013,
              &lt;<a href="https://zmap.io/paper.html">https://zmap.io/paper.html</a>&gt;.

Acknowledgements

   The author would like to thank the following (ordered by last name)
   for lively discussions on the mailing list and in the halls: Jari
   Arkko, Andy Bierman, Martin Bjorklund, Ben Campbell, Spencer Dawkins,
   Mehmet Ersue, Stephen Farrell, Wes Hardaker, Stephen Hanna, David
   Harrington, Jeffrey Hutzelman, Simon Josefsson, Radek Krejci, Suresh
   Krishnan, Barry Leiba, Alan Luchuk, Kathleen Moriarty, Mouse, Russ
   Mundy, Tom Petch, Peter Saint-Andre, Joseph Salowey, Juergen
   Schoenwaelder, Martin Stiemerling, Joe Touch, Hannes Tschofenig, Sean
   Turner, and Bert Wijnen.

Author's Address

   Kent Watsen
   Juniper Networks

   Email: kwatsen@juniper.net









Watsen                       Standards Track                   [Page 13]
</pre>
</body></html>