<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9300: The Locator/ID Separation Protocol (LISP)</title>
<meta content="Dino Farinacci" name="author"/>
<meta content="Vince Fuller" name="author"/>
<meta content="Dave Meyer" name="author"/>
<meta content="Darrel Lewis" name="author"/>
<meta content="Albert Cabellos" name="author"/>
<meta content="
       This document describes the data plane protocol for the
      Locator/ID Separation Protocol (LISP). LISP defines two
      namespaces: Endpoint Identifiers (EIDs), which identify end hosts;
      and Routing Locators (RLOCs), which identify network attachment
      points. With this, LISP effectively separates control from data
      and allows routers to create overlay networks. LISP-capable
      routers exchange encapsulated packets according to EID-to-RLOC
      mappings stored in a local Map-Cache. 
       LISP requires no change to either host protocol stacks or
      underlay routers and offers Traffic Engineering (TE),
      multihoming, and mobility, among other features. 
       This document obsoletes RFC 6830. 
    " name="description"/>
<meta content="xml2rfc 3.15.1" name="generator"/>
<meta content="LISP data plane" name="keyword"/>
<meta content="9300" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.15.1
    Python 3.9.13
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.1
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    kitchen 1.2.6
    lxml 4.9.0
    MarkupSafe 2.1.1
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    weasyprint 56.1
-->
<link href="rfc9300.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  pre.breakable {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9300" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-lisp-rfc6830bis-38" rel="prev"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9300</td>
<td class="center">LISP</td>
<td class="right">October 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Farinacci, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9300">9300</a></dd>
<dt class="label-obsoletes">Obsoletes:</dt>
<dd class="obsoletes">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc6830">6830</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2022-10">October 2022</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">D. Farinacci</div>
<div class="org">lispers.net</div>
</div>
<div class="author">
      <div class="author-name">V. Fuller</div>
<div class="org">vaf.net Internet Consulting</div>
</div>
<div class="author">
      <div class="author-name">D. Meyer</div>
<div class="org">1-4-5.net</div>
</div>
<div class="author">
      <div class="author-name">D. Lewis</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">A. Cabellos, <span class="editor">Ed.</span>
</div>
<div class="org">Universitat Politecnica de Catalunya</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9300</h1>
<h1 id="title">The Locator/ID Separation Protocol (LISP)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document describes the data plane protocol for the
      Locator/ID Separation Protocol (LISP). LISP defines two
      namespaces: Endpoint Identifiers (EIDs), which identify end hosts;
      and Routing Locators (RLOCs), which identify network attachment
      points. With this, LISP effectively separates control from data
      and allows routers to create overlay networks. LISP-capable
      routers exchange encapsulated packets according to EID-to-RLOC
      mappings stored in a local Map-Cache.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
<p id="section-abstract-2">LISP requires no change to either host protocol stacks or
      underlay routers and offers Traffic Engineering (TE),
      multihoming, and mobility, among other features.<a class="pilcrow" href="#section-abstract-2">¶</a></p>
<p id="section-abstract-3">This document obsoletes RFC 6830.<a class="pilcrow" href="#section-abstract-3">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9300">https://www.rfc-editor.org/info/rfc9300</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="auto internal xref" href="#section-1.1">1.1</a>.  <a class="internal xref" href="#name-scope-of-applicability">Scope of Applicability</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-requirements-notation">Requirements Notation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-definitions-of-terms">Definitions of Terms</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-basic-overview">Basic Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="auto internal xref" href="#section-4.1">4.1</a>.  <a class="internal xref" href="#name-deployment-on-the-public-in">Deployment on the Public Internet</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="auto internal xref" href="#section-4.2">4.2</a>.  <a class="internal xref" href="#name-packet-flow-sequence">Packet Flow Sequence</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-lisp-encapsulation-details">LISP Encapsulation Details</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="auto internal xref" href="#section-5.1">5.1</a>.  <a class="internal xref" href="#name-lisp-ipv4-in-ipv4-header-fo">LISP IPv4-in-IPv4 Header Format</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="auto internal xref" href="#section-5.2">5.2</a>.  <a class="internal xref" href="#name-lisp-ipv6-in-ipv6-header-fo">LISP IPv6-in-IPv6 Header Format</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="auto internal xref" href="#section-5.3">5.3</a>.  <a class="internal xref" href="#name-tunnel-header-field-descrip">Tunnel Header Field Descriptions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-lisp-eid-to-rloc-map-cache">LISP EID-to-RLOC Map-Cache</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-dealing-with-large-encapsul">Dealing with Large Encapsulated Packets</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="auto internal xref" href="#section-7.1">7.1</a>.  <a class="internal xref" href="#name-a-stateless-solution-to-mtu">A Stateless Solution to MTU Handling</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="auto internal xref" href="#section-7.2">7.2</a>.  <a class="internal xref" href="#name-a-stateful-solution-to-mtu-">A Stateful Solution to MTU Handling</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-using-virtualization-and-se">Using Virtualization and Segmentation with LISP</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#section-9">9</a>.  <a class="internal xref" href="#name-routing-locator-selection">Routing Locator Selection</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#section-10">10</a>. <a class="internal xref" href="#name-routing-locator-reachabilit">Routing Locator Reachability</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="auto internal xref" href="#section-10.1">10.1</a>.  <a class="internal xref" href="#name-echo-nonce-algorithm">Echo-Nonce Algorithm</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="auto internal xref" href="#section-11">11</a>. <a class="internal xref" href="#name-eid-reachability-within-a-l">EID Reachability within a LISP Site</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="auto internal xref" href="#section-12">12</a>. <a class="internal xref" href="#name-routing-locator-hashing">Routing Locator Hashing</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="auto internal xref" href="#section-13">13</a>. <a class="internal xref" href="#name-changing-the-contents-of-ei">Changing the Contents of EID-to-RLOC Mappings</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a class="auto internal xref" href="#section-13.1">13.1</a>.  <a class="internal xref" href="#name-locator-status-bits">Locator-Status-Bits</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a class="auto internal xref" href="#section-13.2">13.2</a>.  <a class="internal xref" href="#name-database-map-versioning">Database Map-Versioning</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a class="auto internal xref" href="#section-14">14</a>. <a class="internal xref" href="#name-multicast-considerations">Multicast Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a class="auto internal xref" href="#section-15">15</a>. <a class="internal xref" href="#name-router-performance-consider">Router Performance Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a class="auto internal xref" href="#section-16">16</a>. <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a class="auto internal xref" href="#section-17">17</a>. <a class="internal xref" href="#name-network-management-consider">Network Management Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a class="auto internal xref" href="#section-18">18</a>. <a class="internal xref" href="#name-changes-since-rfc-6830">Changes since RFC 6830</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a class="auto internal xref" href="#section-19">19</a>. <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.1">
                <p id="section-toc.1-1.19.2.1.1"><a class="auto internal xref" href="#section-19.1">19.1</a>.  <a class="internal xref" href="#name-lisp-udp-port-numbers">LISP UDP Port Numbers</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a class="auto internal xref" href="#section-20">20</a>. <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20.2.1">
                <p id="section-toc.1-1.20.2.1.1"><a class="auto internal xref" href="#section-20.1">20.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20.2.2">
                <p id="section-toc.1-1.20.2.2.1"><a class="auto internal xref" href="#section-20.2">20.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a class="auto internal xref" href="#appendix-A"></a><a class="internal xref" href="#name-acknowledgments">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22">
            <p id="section-toc.1-1.22.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">This document describes the Locator/ID Separation
  Protocol (LISP). LISP is an encapsulation protocol built around the
  fundamental idea of separating the topological location of a network
  attachment point from the node's identity <span>[<a class="cite xref" href="#CHIAPPA">CHIAPPA</a>]</span>. As a result, LISP creates two namespaces: Endpoint Identifiers
  (EIDs), which are used to identify end hosts (e.g., nodes or Virtual
  Machines); and routable Routing Locators (RLOCs), which are used to identify
  network attachment points.  LISP then defines functions for mapping
  between the two namespaces and for encapsulating traffic
  originated by devices using non-routable EIDs for transport across a
  network infrastructure that routes and forwards using RLOCs. LISP
  encapsulation uses a dynamic form of tunneling where no static provisioning
  is required or necessary.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">LISP is an overlay protocol that separates control from data; this
  document specifies the data plane as well as how LISP-capable
  routers (Tunnel Routers) exchange packets by encapsulating them to
  the appropriate location. Tunnel Routers are equipped with a cache,
  called the Map-Cache, that contains EID-to-RLOC mappings.  The Map-Cache
  is populated using the LISP control plane protocol <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">LISP does not require changes to either the host protocol stack or
  underlay routers. By separating the EID from the RLOC space, LISP
  offers native Traffic Engineering (TE), multihoming, and mobility, among
  other features.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">Creation of LISP was initially motivated by discussions during
  the IAB-sponsored Routing and Addressing Workshop held in Amsterdam
  in October 2006 (see <span>[<a class="cite xref" href="#RFC4984">RFC4984</a>]</span>).<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">This document specifies the LISP data plane encapsulation and
  other LISP forwarding node functionality while <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span> specifies the LISP control
  plane. LISP deployment guidelines can be found in <span>[<a class="cite xref" href="#RFC7215">RFC7215</a>]</span>, and <span>[<a class="cite xref" href="#RFC6835">RFC6835</a>]</span> describes
  considerations for network operational management.  Finally, <span>[<a class="cite xref" href="#RFC9299">RFC9299</a>]</span> describes the LISP architecture.<a class="pilcrow" href="#section-1-5">¶</a></p>
<p id="section-1-6">This document obsoletes RFC 6830.<a class="pilcrow" href="#section-1-6">¶</a></p>
<div id="soa">
<section id="section-1.1">
        <h3 id="name-scope-of-applicability">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-scope-of-applicability">Scope of Applicability</a>
        </h3>
<p id="section-1.1-1">LISP was originally developed to address the Internet-wide
    route scaling problem <span>[<a class="cite xref" href="#RFC4984">RFC4984</a>]</span>.
     While there are a number of approaches of
     interest for that problem, as LISP has been developed and refined, a
     large number of other ways to use LISP have been found and are being
     implemented. As such, the design and development of
    LISP have changed so as to focus on these use cases. The common
    property of these uses is a large set of cooperating entities
    seeking to communicate over the public Internet or other large
    underlay IP infrastructures while keeping the addressing and
    topology of the cooperating entities separate from the underlay
    and Internet topology, routing, and addressing.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
</section>
</div>
</section>
<section id="section-2">
      <h2 id="name-requirements-notation">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-requirements-notation">Requirements Notation</a>
      </h2>
<p id="section-2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-2-1">¶</a></p>
</section>
<div id="DEFINITIONS">
<section id="section-3">
      <h2 id="name-definitions-of-terms">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-definitions-of-terms">Definitions of Terms</a>
      </h2>
<span class="break"></span><dl class="dlParallel" id="section-3-1">
        <dt id="section-3-1.1">Address Family Identifier (AFI): </dt>
        <dd id="section-3-1.2" style="margin-left: 1.5em">"AFI" is a term used
 to describe an address encoding in a packet. An address family is an address
 format found in data plane packet headers,
 for example, an IPv4 address or an IPv6 address. See <span>[<a class="cite xref" href="#AFN">AFN</a>]</span>, <span>[<a class="cite xref" href="#RFC2453">RFC2453</a>]</span>, <span>[<a class="cite xref" href="#RFC2677">RFC2677</a>]</span>, and <span>[<a class="cite xref" href="#RFC4760">RFC4760</a>]</span> for details. An AFI
    value of 0 used in this specification indicates an unspecified
    encoded address where the length of the address is 0 octets
    following the 16-bit AFI value of 0.<a class="pilcrow" href="#section-3-1.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.3">Anycast Address:</dt>
        <dd id="section-3-1.4" style="margin-left: 1.5em">"Anycast address" refers to the same
      IPv4 or IPv6 address configured
    and used on multiple systems at the same time. An EID or RLOC can
    be an anycast address in each of their own address spaces.<a class="pilcrow" href="#section-3-1.4">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.5">Client-side:</dt>
        <dd id="section-3-1.6" style="margin-left: 1.5em">"Client-side" is a term used in this
    document to indicate a connection initiation attempt by an end-system
    represented by an EID.<a class="pilcrow" href="#section-3-1.6">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.7">Egress Tunnel Router (ETR): </dt>
        <dd id="section-3-1.8" style="margin-left: 1.5em">An ETR is a router that
    accepts an IP packet where the destination address in the "outer"
    IP header is one of its own RLOCs. The router strips the "outer"
    header and forwards the packet based on the next IP header
    found. In general, an ETR receives LISP-encapsulated IP packets
    from the Internet on one side and sends decapsulated IP packets to
    site end-systems on the other side. ETR functionality does not
    have to be limited to a router device.  A server host can be the
    endpoint of a LISP tunnel as well.<a class="pilcrow" href="#section-3-1.8">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.9">EID-to-RLOC Database: </dt>
        <dd id="section-3-1.10" style="margin-left: 1.5em">The EID-to-RLOC Database is a
    distributed database that contains all known EID-Prefix-to-RLOC
    mappings.  Each potential ETR typically contains a small piece of
    the database: the EID-to-RLOC mappings for the EID-Prefixes
    "behind" the router. These map to one of the router's own IP
    addresses that are routable on the underlay.

    Note that there <span class="bcp14">MAY</span> be transient conditions when the EID-Prefix
    for the LISP site and Locator-Set for each EID-Prefix may not be the
    same on all ETRs. This has no negative implications, since a
    partial set of Locators can be used.<a class="pilcrow" href="#section-3-1.10">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.11">EID-to-RLOC Map-Cache: </dt>
        <dd id="section-3-1.12" style="margin-left: 1.5em">The EID-to-RLOC Map-Cache is a
    generally short-lived, on-demand table in an Ingress Tunnel Router (ITR) that stores, tracks, and
    is responsible for timing out and otherwise validating EID-to-RLOC
    mappings. This cache is distinct from the full "database" of
    EID-to-RLOC mappings; it is dynamic, local to the ITR(s), and
    relatively small, while the database is distributed, relatively
    static, and much more widely scoped to LISP nodes.<a class="pilcrow" href="#section-3-1.12">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.13">EID-Prefix: </dt>
        <dd id="section-3-1.14" style="margin-left: 1.5em">An EID-Prefix is a power-of-two block
    of EIDs that are allocated to a site by an address allocation
    authority.  EID-Prefixes are associated with a set of RLOC
    addresses. EID-Prefix allocations can be broken up into smaller
    blocks when an RLOC-Set is to be associated with the larger
    EID-Prefix block.<a class="pilcrow" href="#section-3-1.14">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.15">End-System: </dt>
        <dd id="section-3-1.16" style="margin-left: 1.5em">An end-system is an IPv4 or IPv6 device
    that originates packets with a single IPv4 or IPv6 header. The
    end-system supplies an EID value for the destination address field
    of the IP header when communicating outside of its routing domain.
    An end-system can be a host computer, a switch or router device,
    or any network appliance.<a class="pilcrow" href="#section-3-1.16">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.17">Endpoint ID (EID): </dt>
        <dd id="section-3-1.18" style="margin-left: 1.5em">An EID is a 32-bit (for IPv4) or
    128-bit (for IPv6) value that identifies a host. EIDs are generally
    only found in the source and destination
    address fields of the first (innermost) LISP header of a
    packet. The host obtains a destination
    EID through a Domain Name System (DNS)  <span>[<a class="cite xref" href="#RFC1034">RFC1034</a>]</span>
    lookup or Session Initiation Protocol (SIP) <span>[<a class="cite xref" href="#RFC3261">RFC3261</a>]</span> exchange. This
    behavior does not change when LISP is in use. The
    source EID is obtained via existing mechanisms used to set a
    host's "local" IP address. An EID used on the public Internet <span class="bcp14">MUST</span>
    have the same properties as any other IP address used in that
    manner; this means, among other things, that it <span class="bcp14">MUST</span> be
    unique. An EID is allocated to a host from an EID-Prefix block
    associated with the site where the host is located.  An EID can be
    used by a host to refer to other hosts. Note that EID blocks <span class="bcp14">MAY</span>
    be assigned in a hierarchical manner, independent of the network
    topology, to facilitate scaling of the mapping database. In
    addition, an EID block assigned to a site <span class="bcp14">MAY</span> have site-local
    structure (subnetting) for routing within the site; this structure
    is not visible to the underlay routing system. In theory, the bit
    string that represents an EID for one device can represent an RLOC
    for a different device. When discussing other Locator/ID separation proposals, any
    references to an EID in this document will refer to a LISP EID.<a class="pilcrow" href="#section-3-1.18">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.19">Ingress Tunnel Router (ITR): </dt>
        <dd id="section-3-1.20" style="margin-left: 1.5em">An ITR is a router
    that resides in a LISP site. Packets sent by sources inside of the
    LISP site to destinations outside of the site are candidates for
    encapsulation by the ITR. The ITR treats the IP destination
    address as an EID and performs an EID-to-RLOC mapping lookup. The
    router then prepends an "outer" IP header with one of its routable
    RLOCs (in the RLOC space) in the source address field and the
    result of the mapping lookup in the destination address field.
    Note that this destination RLOC may be an intermediate, proxy
    device that has better knowledge of the EID-to-RLOC mapping closer
    to the destination EID. In general, an ITR receives IP packets
    from site end-systems on one side and sends LISP-encapsulated IP
    packets toward the Internet on the other side.<a class="pilcrow" href="#section-3-1.20">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.21">LISP Header: </dt>
        <dd id="section-3-1.22" style="margin-left: 1.5em">"LISP header" is a term used in this document to refer
    to the outer IPv4 or IPv6 header, a UDP header, and a LISP-
    specific 8-octet header, all of which follow the UDP header.  An
    ITR prepends LISP headers on packets, and an ETR strips them.<a class="pilcrow" href="#section-3-1.22">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.23">LISP Router: </dt>
        <dd id="section-3-1.24" style="margin-left: 1.5em">A LISP router is a router that
    performs the functions of any or all of the following: ITRs, ETRs, Re-encapsulating Tunneling Routers (RTRs),
    Proxy-ITRs (PITRs), or Proxy-ETRs (PETRs).<a class="pilcrow" href="#section-3-1.24">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.25">LISP Site:</dt>
        <dd id="section-3-1.26" style="margin-left: 1.5em">A LISP site is a set of routers in an edge
    network that are under a single technical administration. LISP
    routers that reside in the edge network are the demarcation points
    to separate the edge network from the core network.<a class="pilcrow" href="#section-3-1.26">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.27">Locator-Status-Bits (LSBs):</dt>
        <dd id="section-3-1.28" style="margin-left: 1.5em"> Locator-Status-Bits are
    present in the LISP header. They are used by ITRs to inform ETRs
    about the up/down status of all ETRs at the local site. These bits
    are used as a hint to convey up/down router status and not path
    reachability status. The LSBs can be verified by use of one of the
    Locator reachability algorithms described in <a class="auto internal xref" href="#loc-reach">Section 10</a>. An ETR <span class="bcp14">MUST</span> rate limit the action it takes
    when it detects changes in the Locator-Status-Bits.<a class="pilcrow" href="#section-3-1.28">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.29">Proxy-ETR (PETR): </dt>
        <dd id="section-3-1.30" style="margin-left: 1.5em">A PETR is defined and described
    in <span>[<a class="cite xref" href="#RFC6832">RFC6832</a>]</span>. A PETR acts like an ETR but does so
    on behalf of LISP sites that send packets to destinations at
    non-LISP sites.<a class="pilcrow" href="#section-3-1.30">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.31">Proxy-ITR (PITR): </dt>
        <dd id="section-3-1.32" style="margin-left: 1.5em">A PITR is defined and described
    in <span>[<a class="cite xref" href="#RFC6832">RFC6832</a>]</span>. A PITR acts like an ITR but does so
    on behalf of non-LISP sites that send packets to destinations at
    LISP sites.<a class="pilcrow" href="#section-3-1.32">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.33">Recursive Tunneling: </dt>
        <dd id="section-3-1.34" style="margin-left: 1.5em">Recursive Tunneling occurs
    when a packet has more than one LISP IP header. Additional layers
    of tunneling <span class="bcp14">MAY</span> be employed to implement Traffic Engineering or
    other rerouting as needed. When this is done, an additional
    "outer" LISP header is added, and the original RLOCs are preserved
    in the "inner" header.<a class="pilcrow" href="#section-3-1.34">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.35">Re-encapsulating Tunneling Router (RTR): </dt>
        <dd id="section-3-1.36" style="margin-left: 1.5em">
    An RTR acts like an ETR to remove a LISP header, then acts as an
    ITR to prepend a new LISP header. This is known as
    Re-encapsulating Tunneling. Doing this allows a packet to be
    rerouted by the RTR without adding the overhead of additional
    tunnel headers. When using multiple mapping database systems, care
    must be taken to not create re-encapsulation loops through
    misconfiguration.<a class="pilcrow" href="#section-3-1.36">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.37">Route-Returnability:</dt>
        <dd id="section-3-1.38" style="margin-left: 1.5em">Route-returnability is an
    assumption that the underlying routing system will deliver packets
    to the destination. When combined with a nonce that is provided by
    a sender and returned by a receiver, this limits off-path data
    insertion. A route-returnability check is verified when a message
    is sent with a nonce, another message is returned with the same
    nonce, and the destination of the original message appears as the
    source of the returned message.<a class="pilcrow" href="#section-3-1.38">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.39">Routing Locator (RLOC): </dt>
        <dd id="section-3-1.40" style="margin-left: 1.5em">An RLOC is an IPv4 address <span>[<a class="cite xref" href="#RFC0791">RFC0791</a>]</span> or IPv6 address <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span> of
    an Egress Tunnel Router (ETR). An RLOC is the output of an
    EID-to-RLOC mapping lookup. An EID maps to zero or more
    RLOCs. Typically, RLOCs are numbered from blocks that
    are assigned to a site at each point to which it attaches to the
    underlay network, where the topology is defined by the connectivity
    of provider networks. Multiple RLOCs can be assigned to the same
    ETR device or to multiple ETR devices at a site.<a class="pilcrow" href="#section-3-1.40">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.41">Server-side:</dt>
        <dd id="section-3-1.42" style="margin-left: 1.5em">"Server-side" is a term used in this
    document to indicate that a connection initiation attempt is being
    accepted for a destination EID.<a class="pilcrow" href="#section-3-1.42">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-1.43">xTR: </dt>
        <dd id="section-3-1.44" style="margin-left: 1.5em">An xTR is a reference to an ITR or ETR when
    direction of data flow is not part of the context description.
    "xTR" refers to the router that is the tunnel endpoint and is used
    synonymously with the term "Tunnel Router". For example, "An xTR
    can be located at the Customer Edge (CE) router" indicates both
    ITR and ETR functionality at the CE router.<a class="pilcrow" href="#section-3-1.44">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="OVERVIEW">
<section id="section-4">
      <h2 id="name-basic-overview">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-basic-overview">Basic Overview</a>
      </h2>
<p id="section-4-1">One key concept of LISP is that end-systems operate the same way
      when LISP is not in use as well as when LISP is in use. The IP addresses that
      hosts use for tracking sockets
  and connections, and for sending and receiving packets, do not
  change. In LISP terminology, these IP addresses are called Endpoint
  Identifiers (EIDs).<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2">Routers continue to forward packets based on IP destination
  addresses. When a packet is LISP encapsulated, these addresses are
  referred to as RLOCs. Most routers along a path
  between two hosts will not change; they continue to perform
  routing/forwarding lookups on the destination addresses. For routers
  between the source host and the ITR as well as routers from the ETR
  to the destination host, the destination address is an EID. For the
  routers between the ITR and the ETR, the destination address is an
  RLOC.<a class="pilcrow" href="#section-4-2">¶</a></p>
<p id="section-4-3">Another key LISP concept is the "Tunnel Router". A Tunnel Router
  prepends LISP headers on host-originated packets and strips them
  prior to final delivery to their destination. The IP addresses in
  this "outer header" are RLOCs. During end-to-end packet
  exchange between two Internet hosts, an ITR prepends a new LISP
  header to each packet, and an ETR strips the new header. The ITR
  performs EID-to-RLOC lookups to determine the routing path to the
  ETR, which has the RLOC as one of its IP addresses.<a class="pilcrow" href="#section-4-3">¶</a></p>
<p id="section-4-4">Some basic rules governing LISP are:<a class="pilcrow" href="#section-4-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-5.1">End-systems only send to addresses that are EIDs.  EIDs are
      typically IP addresses assigned to hosts (other types of EIDs are
      supported by LISP; see <span>[<a class="cite xref" href="#RFC8060">RFC8060</a>]</span> for further
      information). End-systems don't know that addresses are EIDs
      versus RLOCs but assume that packets get to their intended
      destinations.  In a system where LISP is deployed, LISP routers
      intercept EID-addressed packets and assist in delivering them
      across the network core where EIDs cannot be routed.  The
      procedure a host uses to send IP packets does not change.<a class="pilcrow" href="#section-4-5.1">¶</a>
</li>
        <li class="normal" id="section-4-5.2">LISP routers prepend and strip outer headers with RLOC addresses. See  <a class="auto internal xref" href="#MOSTLY">Section 4.2</a> for details.<a class="pilcrow" href="#section-4-5.2">¶</a>
</li>
        <li class="normal" id="section-4-5.3">RLOCs are always IP addresses assigned to routers, preferably
      topologically oriented addresses from provider Classless
      Inter-Domain Routing (CIDR) blocks.<a class="pilcrow" href="#section-4-5.3">¶</a>
</li>
        <li class="normal" id="section-4-5.4">When a router originates packets, it <span class="bcp14">MAY</span> use as a source
      address either an EID or RLOC. When acting as a host (e.g., when
      terminating a transport session such as Secure Shell (SSH),
      TELNET, or the Simple Network Management Protocol (SNMP)), it
      <span class="bcp14">MAY</span> use an EID that is explicitly assigned for that purpose. An
      EID that identifies the router as a host <span class="bcp14">MUST NOT</span> be used as an
      RLOC; an EID is only routable within the scope of a site.  A
      typical BGP configuration might demonstrate this "hybrid"
      EID/RLOC usage where a router could use its "host-like" EID to
      terminate internal BGP (iBGP) sessions to other routers in a site while at the
      same time using RLOCs to terminate external BGP (eBGP) sessions to routers
      outside the site.<a class="pilcrow" href="#section-4-5.4">¶</a>
</li>
        <li class="normal" id="section-4-5.5">Packets with EIDs in them are not expected to be delivered
      end to end in the absence of an EID-to-RLOC mapping
      operation. They are expected to be used locally for intra-site
      communication or to be encapsulated for inter-site
      communication.<a class="pilcrow" href="#section-4-5.5">¶</a>
</li>
        <li class="normal" id="section-4-5.6">EIDs <span class="bcp14">MAY</span> also be structured (subnetted) in a manner suitable
      for local routing within an Autonomous System (AS).<a class="pilcrow" href="#section-4-5.6">¶</a>
</li>
      </ul>
<p id="section-4-6">An additional LISP header <span class="bcp14">MAY</span> be prepended to packets by a
    TE-ITR when rerouting of the path for a packet is desired. A
    potential use case for this would be an ISP router that needs to
    perform Traffic Engineering for packets flowing through its
    network. In such a situation, termed "Recursive Tunneling", an ISP
    transit acts as an additional ITR, and the destination RLOC it
    uses for the new prepended header would be either a TE-ETR within
    the ISP (along an intra-ISP traffic-engineered path) or a TE-ETR
    within another ISP (an inter-ISP traffic-engineered path, where an
      agreement to build such a path exists).<a class="pilcrow" href="#section-4-6">¶</a></p>
<p id="section-4-7">In order to avoid excessive packet overhead as well as possible
    encapsulation loops, it is  <span class="bcp14">RECOMMENDED</span> that a maximum of two
    LISP headers can be prepended to a packet. For initial LISP
    deployments, it is assumed that two headers is sufficient, where
    the first prepended header is used at a site for separation of location and identity and the second prepended header is used inside a
    service provider for Traffic Engineering purposes.<a class="pilcrow" href="#section-4-7">¶</a></p>
<p id="section-4-8">Tunnel Routers can be placed fairly flexibly in a multi-AS
    topology. For example, the ITR for a particular end-to-end packet
    exchange might be the first-hop or default router within a site
    for the source host. Similarly, the ETR might be the last-hop
    router directly connected to the destination host. As another
    example, perhaps for a VPN service outsourced to an ISP by a site,
    the ITR could be the site's border router at the service
    provider attachment point. Mixing and matching of site-operated,
    ISP-operated, and other Tunnel Routers is allowed for maximum
    flexibility.<a class="pilcrow" href="#section-4-8">¶</a></p>
<div id="DPI">
<section id="section-4.1">
        <h3 id="name-deployment-on-the-public-in">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-deployment-on-the-public-in">Deployment on the Public Internet</a>
        </h3>
<p id="section-4.1-1">Several of the mechanisms in this document are intended for deployment in controlled,
           trusted environments and are insecure for use over the public Internet.
           In particular, on the public Internet, xTRs:<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-2.1">
            <span class="bcp14">MUST</span> set the N-, L-, E-, and V-bits in the LISP header (<a class="auto internal xref" href="#header">Section 5.1</a>) to zero.<a class="pilcrow" href="#section-4.1-2.1">¶</a>
</li>
          <li class="normal" id="section-4.1-2.2">
            <span class="bcp14">MUST NOT</span> use Locator-Status-Bits and Echo-Nonce, as described in <a class="auto internal xref" href="#loc-reach">Section 10</a>, for RLOC reachability.
             Instead, they <span class="bcp14">MUST</span> rely solely on control plane methods.<a class="pilcrow" href="#section-4.1-2.2">¶</a>
</li>
          <li class="normal" id="section-4.1-2.3">
            <span class="bcp14">MUST NOT</span> use gleaning or Locator-Status-Bits and Map-Versioning, as described in <a class="auto internal xref" href="#update_mapping">Section 13</a>, to update the EID-to-RLOC mappings.
               Instead, they <span class="bcp14">MUST</span> rely solely on control plane methods.<a class="pilcrow" href="#section-4.1-2.3">¶</a>
</li>
        </ul>
</section>
</div>
<div id="MOSTLY">
<section id="section-4.2">
        <h3 id="name-packet-flow-sequence">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-packet-flow-sequence">Packet Flow Sequence</a>
        </h3>
<p id="section-4.2-1">This section provides an example of the unicast packet flow,
      also including control plane information as specified in <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>.  The example also assumes
      the following conditions:<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-2.1">Source host "host1.abc.example.com" is sending a
        packet to "host2.xyz.example.com", exactly as it would if the site was
        not using LISP.<a class="pilcrow" href="#section-4.2-2.1">¶</a>
</li>
          <li class="normal" id="section-4.2-2.2">Each site is multihomed, so each Tunnel Router has an
        address (RLOC) assigned from the service provider address
        block for each provider to which that particular Tunnel Router
        is attached.<a class="pilcrow" href="#section-4.2-2.2">¶</a>
</li>
          <li class="normal" id="section-4.2-2.3">The ITR(s) and ETR(s) are directly connected to the source
        and destination, respectively, but the source and destination
        can be located anywhere in the LISP site.<a class="pilcrow" href="#section-4.2-2.3">¶</a>
</li>
          <li class="normal" id="section-4.2-2.4">A Map-Request is sent for an external destination when the
        destination is not found in the forwarding table or matches a
        default route. Map-Requests are sent to the mapping database
        system by using the LISP control plane protocol documented in
        <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>.<a class="pilcrow" href="#section-4.2-2.4">¶</a>
</li>
          <li class="normal" id="section-4.2-2.5">Map-Replies are sent on the underlying routing system
        topology, using the
        control plane protocol <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>.<a class="pilcrow" href="#section-4.2-2.5">¶</a>
</li>
        </ul>
<p id="section-4.2-3">Client host1.abc.example.com wants to communicate with
       server host2.xyz.example.com:<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<ol class="normal type-1" id="section-4.2-4" start="1" type="1">
   <li id="section-4.2-4.1">host1.abc.example.com wants to open a TCP connection to
         host2.xyz.example.com. It does a DNS lookup on
         host2.xyz.example.com. An A/AAAA record is returned. This
         address is the destination EID. The locally assigned address
         of host1.abc.example.com is used as the source EID. An IPv4
         or IPv6 packet is built and forwarded through the LISP site
         as a normal IP packet until it reaches a LISP ITR.<a class="pilcrow" href="#section-4.2-4.1">¶</a>
</li>
          <li id="section-4.2-4.2">The LISP ITR must be able to map the destination EID to an
         RLOC of one of the ETRs at the destination site. A method
         for doing this is to send a LISP Map-Request, as specified in
         <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>.<a class="pilcrow" href="#section-4.2-4.2">¶</a>
</li>
          <li id="section-4.2-4.3">The Mapping System helps forward the Map-Request to the
         corresponding ETR. When the Map-Request arrives at one of the
         ETRs at the destination site, it will process the packet as a
         control message.<a class="pilcrow" href="#section-4.2-4.3">¶</a>
</li>
          <li id="section-4.2-4.4">The ETR looks at the destination EID of the Map-Request
         and matches it against the prefixes in the ETR's configured
         EID-to-RLOC mapping database.  This is the list of
         EID-Prefixes the ETR is supporting for the site it resides
         in. If there is no match, the Map-Request is
         dropped. Otherwise, a LISP Map-Reply is returned to the
         ITR.<a class="pilcrow" href="#section-4.2-4.4">¶</a>
</li>
          <li id="section-4.2-4.5">The ITR receives the Map-Reply message, parses the message,
  and stores the mapping information from the packet. This information
  is stored in the ITR's EID-to-RLOC Map-Cache.  Note that the
         Map-Cache is an on-demand cache. An ITR will manage its
         Map-Cache in such a way that optimizes for its resource
         constraints.<a class="pilcrow" href="#section-4.2-4.5">¶</a>
</li>
          <li id="section-4.2-4.6">Subsequent packets from host1.abc.example.com to
         host2.xyz.example.com will have a LISP header prepended by
         the ITR using the appropriate RLOC as the LISP header
         destination address learned from the ETR. Note that the
         packet <span class="bcp14">MAY</span> be sent to a different ETR than the one that
         returned the Map-Reply due to the source site's hashing
         policy or the destination site's Locator-Set policy.<a class="pilcrow" href="#section-4.2-4.6">¶</a>
</li>
          <li id="section-4.2-4.7">The ETR receives these packets directly (since the
         destination address is one of its assigned IP addresses),
         checks the validity of the addresses, strips the LISP header,
         and forwards packets to the attached destination host.<a class="pilcrow" href="#section-4.2-4.7">¶</a>
</li>
          <li id="section-4.2-4.8">In order to defer the need for a mapping lookup in the
          reverse direction, it is <span class="bcp14">OPTIONAL</span> for an ETR to
   create a cache entry
         that maps the source EID (inner-header source IP address) to
         the source RLOC (outer-header source IP address) in a
         received LISP packet. Such a cache entry is termed a
         "glean mapping" and only contains a single RLOC for the EID
         in question.  More complete information about additional
         RLOCs <span class="bcp14">SHOULD</span> be verified by sending a LISP Map-Request for
         that EID. Both the ITR and the ETR <span class="bcp14">MAY</span> also influence the
         decision the other makes in selecting an RLOC.<a class="pilcrow" href="#section-4.2-4.8">¶</a>
</li>
        </ol>
</section>
</div>
</section>
</div>
<section id="section-5">
      <h2 id="name-lisp-encapsulation-details">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-lisp-encapsulation-details">LISP Encapsulation Details</a>
      </h2>
<p id="section-5-1">Since additional tunnel headers are prepended, the packet
    becomes larger and can exceed the MTU of any link traversed from
    the ITR to the ETR.  It is <span class="bcp14">RECOMMENDED</span> in IPv4 that packets do not
    get fragmented as they are encapsulated by the ITR. Instead, the
    packet is dropped and an ICMPv4 Unreachable / Fragmentation Needed
    message is returned to the source.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">In the case when fragmentation is needed, it is
    <span class="bcp14">RECOMMENDED</span> that implementations provide support for one of the
    proposed fragmentation and reassembly schemes. Two existing
    schemes are detailed in <a class="auto internal xref" href="#fragment">Section 7</a>.<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3">Since IPv4 or IPv6 addresses can be either EIDs or RLOCs, the
    LISP architecture supports IPv4 EIDs with IPv6 RLOCs (where the
    inner header is in IPv4 packet format and the outer header is in
    IPv6 packet format) or IPv6 EIDs with IPv4 RLOCs (where the inner
    header is in IPv6 packet format and the outer header is in IPv4
    packet format). The next sub-sections illustrate packet formats
    for the homogeneous case (IPv4-in-IPv4 and IPv6-in-IPv6), but all
    4 combinations <span class="bcp14">MUST</span> be supported. Additional types of EIDs are
    defined in <span>[<a class="cite xref" href="#RFC8060">RFC8060</a>]</span>.<a class="pilcrow" href="#section-5-3">¶</a></p>
<p id="section-5-4">As LISP uses UDP encapsulation to carry traffic between xTRs
    across the Internet, implementors should be aware of the
    provisions of <span>[<a class="cite xref" href="#RFC8085">RFC8085</a>]</span>, especially those given in its
    Section <a class="relref" href="https://www.rfc-editor.org/rfc/rfc8085#section-3.1.11">3.1.11</a> on congestion control for UDP tunneling.<a class="pilcrow" href="#section-5-4">¶</a></p>
<p id="section-5-5">Implementors are encouraged to consider UDP checksum usage
    guidelines in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8085#section-3.4">Section 3.4</a> of [<a class="cite xref" href="#RFC8085">RFC8085</a>]</span> when it is
    desirable to protect UDP and LISP headers against corruption.<a class="pilcrow" href="#section-5-5">¶</a></p>
<div id="header">
<section id="section-5.1">
        <h3 id="name-lisp-ipv4-in-ipv4-header-fo">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-lisp-ipv4-in-ipv4-header-fo">LISP IPv4-in-IPv4 Header Format</a>
        </h3>
<div class="alignLeft art-text artwork" id="section-5.1-1">
<pre>     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  / |Version|  IHL  |    DSCP   |ECN|          Total Length         |
 /  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   |         Identification        |Flags|      Fragment Offset    |
|   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
OH  |  Time to Live | Protocol = 17 |         Header Checksum       |
|   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   |                    Source Routing Locator                     |
 \  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  \ |                 Destination Routing Locator                   |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  / |       Source Port = xxxx      |       Dest Port = 4341        |
UDP +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  \ |           UDP Length          |        UDP Checksum           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
L   |N|L|E|V|I|R|K|K|            Nonce/Map-Version                  |
I \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
S / |                 Instance ID/Locator-Status-Bits               |
P   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  / |Version|  IHL  |    DSCP   |ECN|          Total Length         |
 /  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   |         Identification        |Flags|      Fragment Offset    |
|   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
IH  |  Time to Live |    Protocol   |         Header Checksum       |
|   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   |                           Source EID                          |
 \  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  \ |                         Destination EID                       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    IHL = IP-Header-Length
</pre><a class="pilcrow" href="#section-5.1-1">¶</a>
</div>
</section>
</div>
<section id="section-5.2">
        <h3 id="name-lisp-ipv6-in-ipv6-header-fo">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-lisp-ipv6-in-ipv6-header-fo">LISP IPv6-in-IPv6 Header Format</a>
        </h3>
<div class="alignLeft art-text artwork" id="section-5.2-1">
<pre>     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  / |Version|    DSCP   |ECN|           Flow Label                  |
 /  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   |         Payload Length        | Next Header=17|   Hop Limit   |
v   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
O   +                                                               +
u   |                                                               |
t   +                     Source Routing Locator                    +
e   |                                                               |
r   +                                                               +
    |                                                               |
H   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
d   |                                                               |
r   +                                                               +
    |                                                               |
^   +                  Destination Routing Locator                  +
|   |                                                               |
 \  +                                                               +
  \ |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  / |       Source Port = xxxx      |       Dest Port = 4341        |
UDP +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  \ |           UDP Length          |        UDP Checksum           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
L   |N|L|E|V|I|R|K|K|            Nonce/Map-Version                  |
I \ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
S / |                 Instance ID/Locator-Status-Bits               |
P   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  / |Version|    DSCP   |ECN|           Flow Label                  |
 /  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
/   |         Payload Length        |  Next Header  |   Hop Limit   |
v   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
I   +                                                               +
n   |                                                               |
n   +                          Source EID                           +
e   |                                                               |
r   +                                                               +
    |                                                               |
H   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
d   |                                                               |
r   +                                                               +
    |                                                               |
^   +                        Destination EID                        +
\   |                                                               |
 \  +                                                               +
  \ |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-5.2-1">¶</a>
</div>
</section>
<div id="LRB">
<section id="section-5.3">
        <h3 id="name-tunnel-header-field-descrip">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-tunnel-header-field-descrip">Tunnel Header Field Descriptions</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-5.3-1">
          <dt id="section-5.3-1.1">Inner Header (IH):</dt>
          <dd id="section-5.3-1.2" style="margin-left: 1.5em">The inner header is the header on the datagram
          received from the originating host <span>[<a class="cite xref" href="#RFC0791">RFC0791</a>]</span>
            <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span> <span>[<a class="cite xref" href="#RFC2474">RFC2474</a>]</span>. The
          source and destination IP addresses are EIDs.<a class="pilcrow" href="#section-5.3-1.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.3">Outer Header (OH):</dt>
          <dd id="section-5.3-1.4" style="margin-left: 1.5em">The outer header is a new
          header prepended by an ITR. The address fields contain RLOCs
          obtained from the ingress router's EID-to-RLOC Map-Cache. The IP
          protocol number is "UDP (17)" from <span>[<a class="cite xref" href="#RFC0768">RFC0768</a>]</span>.  The setting of the Don't Fragment (DF)
          bit 'Flags' field is according to rules listed in Sections
          <a class="auto internal xref" href="#MTU-STATELESS">7.1</a> and <a class="auto internal xref" href="#MTU-STATEFUL">7.2</a>.<a class="pilcrow" href="#section-5.3-1.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.5">UDP Header:</dt>
          <dd id="section-5.3-1.6" style="margin-left: 1.5em">The UDP header contains an ITR-selected source port when encapsulating a packet. See <a class="auto internal xref" href="#loc-hash">Section 12</a> for details on the hash algorithm used
          to select a source port based on the 5-tuple of the inner
          header. The destination port <span class="bcp14">MUST</span> be set to the well-known
          IANA-assigned port value 4341.<a class="pilcrow" href="#section-5.3-1.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.7">UDP Checksum:</dt>
          <dd id="section-5.3-1.8" style="margin-left: 1.5em">The 'UDP Checksum' field <span class="bcp14">SHOULD</span>
          be transmitted as zero by an ITR for either IPv4 <span>[<a class="cite xref" href="#RFC0768">RFC0768</a>]</span> or IPv6 encapsulation <span>[<a class="cite xref" href="#RFC6935">RFC6935</a>]</span> <span>[<a class="cite xref" href="#RFC6936">RFC6936</a>]</span>.  When a
          packet with a zero UDP checksum is received by an ETR, the
          ETR <span class="bcp14">MUST</span> accept the packet for decapsulation.  When an ITR
          transmits a non-zero value for the UDP checksum, it <span class="bcp14">MUST</span>
          send a correctly computed value in this field.  When an ETR
          receives a packet with a non-zero UDP checksum, it <span class="bcp14">MAY</span>
          choose to verify the checksum value.  If it chooses to
          perform such verification and the verification fails, the
          packet <span class="bcp14">MUST</span> be silently dropped.  If the ETR either chooses not to
          perform the verification or performs the verification
          successfully, the packet <span class="bcp14">MUST</span> be accepted for
          decapsulation. The handling of UDP zero checksums over IPv6
          for all tunneling protocols, including LISP, is subject to
          the applicability statement in <span>[<a class="cite xref" href="#RFC6936">RFC6936</a>]</span>.<a class="pilcrow" href="#section-5.3-1.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.9">UDP Length:</dt>
          <dd id="section-5.3-1.10" style="margin-left: 1.5em">The 'UDP Length' field is set for
          an IPv4-encapsulated packet to be the sum of the
          inner-header IPv4 Total Length plus the UDP and LISP header
          lengths.  For an IPv6-encapsulated packet, the 'UDP Length'
          field is the sum of the inner-header IPv6 Payload Length,
          the size of the IPv6 header (40 octets), and the size of the
          UDP and LISP headers.<a class="pilcrow" href="#section-5.3-1.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.11">N:</dt>
          <dd id="section-5.3-1.12" style="margin-left: 1.5em">The N-bit is the nonce-present bit. When
          this bit is set to 1, the low-order 24 bits of the first 32
          bits of the LISP header contain a nonce. See <a class="auto internal xref" href="#echo-nonce">Section 10.1</a> for details. Both N- and V-bits <span class="bcp14">MUST NOT</span> be set in the same packet. If they are, a decapsulating
          ETR <span class="bcp14">MUST</span> treat the 'Nonce/Map-Version' field as having a
          nonce value present.<a class="pilcrow" href="#section-5.3-1.12">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-1.13">L:</dt>
          <dd id="section-5.3-1.14" style="margin-left: 1.5em">The L-bit is the 'Locator-Status-Bits'
          field enabled bit.  When this bit is set to 1, the
          Locator-Status-Bits in the second 32 bits of the LISP
          header are in use.<a class="pilcrow" href="#section-5.3-1.14">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<div class="alignLeft art-text artwork" id="section-5.3-2">
<pre> x 1 x x 0 x x x
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|N|L|E|V|I|R|K|K|            Nonce/Map-Version                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Locator-Status-Bits                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-5.3-2">¶</a>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.3-3">
          <dt id="section-5.3-3.1">E:</dt>
          <dd id="section-5.3-3.2" style="margin-left: 1.5em">The E-bit is the Echo-Nonce-request bit.
          This bit <span class="bcp14">MUST</span> be ignored and has no meaning when the N-bit
          is set to 0.  When the N-bit is set to 1 and this bit is set
          to 1, an ITR is requesting that the nonce value in the
          'Nonce' field be echoed back in LISP-encapsulated packets
          when the ITR is also an ETR. See <a class="auto internal xref" href="#echo-nonce">Section 10.1</a>
          for details.<a class="pilcrow" href="#section-5.3-3.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-3.3">V:</dt>
          <dd id="section-5.3-3.4" style="margin-left: 1.5em">The V-bit is the Map-Version present
          bit. When this bit is set to 1, the N-bit <span class="bcp14">MUST</span> be 0. Refer
          to <span>[<a class="cite xref" href="#RFC9302">RFC9302</a>]</span> for more details on Database Map-Versioning. This
          bit indicates that the LISP header is encoded in this
          case as:<a class="pilcrow" href="#section-5.3-3.4">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<div class="alignLeft art-text artwork" id="section-5.3-4">
<pre> 0 x 0 1 x x x x
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|N|L|E|V|I|R|K|K|  Source Map-Version   |   Dest Map-Version    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 Instance ID/Locator-Status-Bits               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-5.3-4">¶</a>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.3-5">
          <dt id="section-5.3-5.1">I:</dt>
          <dd id="section-5.3-5.2" style="margin-left: 1.5em">The I-bit is the Instance ID bit. See <a class="auto internal xref" href="#instance">Section 8</a> for more details. When this bit is set
          to 1, the 'Locator-Status-Bits' field is reduced to 8 bits
          and the high-order 24 bits are used as an Instance ID.  If
          the L-bit is set to 0, then the low-order 8 bits are
          transmitted as zero and ignored on receipt. The format of
          the LISP header would look like this:<a class="pilcrow" href="#section-5.3-5.2">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<div class="alignLeft art-text artwork" id="section-5.3-6">
<pre> x x x x 1 x x x
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|N|L|E|V|I|R|K|K|            Nonce/Map-Version                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 Instance ID                   |     LSBs      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-5.3-6">¶</a>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.3-7">
          <dt id="section-5.3-7.1">R:</dt>
          <dd id="section-5.3-7.2" style="margin-left: 1.5em">The R-bit is a reserved and unassigned bit
          for future use. It <span class="bcp14">MUST</span> be set to 0 on transmit and <span class="bcp14">MUST</span> be
          ignored on receipt.<a class="pilcrow" href="#section-5.3-7.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-7.3">KK:</dt>
          <dd id="section-5.3-7.4" style="margin-left: 1.5em">The KK-bits are a 2-bit field used when
          encapsulated packets are encrypted.  The field is set to 00
          when the packet is not encrypted.  See <span>[<a class="cite xref" href="#RFC8061">RFC8061</a>]</span> for further information.<a class="pilcrow" href="#section-5.3-7.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-7.5">LISP Nonce:</dt>
          <dd id="section-5.3-7.6" style="margin-left: 1.5em">The LISP 'Nonce' field is a 24-bit
          value that is randomly generated by an ITR when the N-bit is
          set to 1. Nonce generation algorithms are an implementation
          matter but are required to generate different nonces when
          sending to different RLOCs.  The nonce is also used when the E-bit is set to
          request the nonce value to be echoed by the other side when
          packets are returned. When the E-bit is clear but the N-bit
          is set, a remote ITR is either echoing a previously
          requested Echo-Nonce or providing a random nonce. See <a class="auto internal xref" href="#echo-nonce">Section 10.1</a> for more details. Finally, when
          both the N- and V-bits are not set (N=0, V=0), then both the 'Nonce'
          and 'Map-Version' fields are set to 0 and ignored on receipt.<a class="pilcrow" href="#section-5.3-7.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-7.7">LISP Locator-Status-Bits (LSBs):</dt>
          <dd id="section-5.3-7.8" style="margin-left: 1.5em">When the
          L-bit is also set, the 'Locator-Status-Bits' field in the
          LISP header is set by an ITR to indicate to an ETR the
          up/down status of the Locators in the source site. Each RLOC
          in a Map-Reply is assigned an ordinal value from 0 to n-1
          (when there are n RLOCs in a mapping entry). The
          Locator-Status-Bits are numbered from 0 to n-1 from the
          least significant bit of the field.  The field is 32 bits
          when the I-bit is set to 0 and is 8 bits when the I-bit is
          set to 1. When a Locator-Status-Bit is set to 1, the ITR is
          indicating to the ETR that the RLOC associated with the bit
          ordinal has up status. See <a class="auto internal xref" href="#loc-reach">Section 10</a> for
          details on how an ITR can determine the status of the ETRs
          at the same site.  When a site has multiple EID-Prefixes
          that result in multiple mappings (where each could have a
          different Locator-Set), the Locator-Status-Bits setting in
          an encapsulated packet <span class="bcp14">MUST</span> reflect the mapping for the
          EID-Prefix that the inner-header source EID address
          matches (longest-match). If the LSB for an anycast Locator is set to 1, then
          there is at least one RLOC with that address, and the ETR is
          considered 'up'.<a class="pilcrow" href="#section-5.3-7.8">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-5.3-8">When doing ITR/PITR encapsulation:<a class="pilcrow" href="#section-5.3-8">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-9.1">The outer-header 'Time to Live' field (or 'Hop Limit'
           field, in the case of IPv6) <span class="bcp14">SHOULD</span> be copied from the
           inner-header 'Time to Live' field.<a class="pilcrow" href="#section-5.3-9.1">¶</a>
</li>
          <li class="normal" id="section-5.3-9.2">The outer-header IPv4 'Differentiated Services Code Point
        (DSCP)' field (or 'Traffic Class' field, in the case of
        IPv6) <span class="bcp14">SHOULD</span> be copied from the inner-header IPv4 'DSCP' field (or
        'Traffic Class' field, in the case of IPv6) to the
        outer header. Guidelines for this can be found in <span>[<a class="cite xref" href="#RFC2983">RFC2983</a>]</span>.<a class="pilcrow" href="#section-5.3-9.2">¶</a>
</li>
          <li class="normal" id="section-5.3-9.3">The IPv4 'Explicit Congestion Notification (ECN)' field and bits
           6 and 7 of the IPv6 'Traffic Class' field require special
           treatment in order to avoid discarding indications of
           congestion as specified in <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>.<a class="pilcrow" href="#section-5.3-9.3">¶</a>
</li>
        </ul>
<p id="section-5.3-10">When doing ETR/PETR decapsulation:<a class="pilcrow" href="#section-5.3-10">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-11.1">The inner-header IPv4 'Time to Live' field (or 'Hop Limit'
       field, in the case of IPv6) <span class="bcp14">MUST</span> be copied from the
       outer-header 'Time to Live'/'Hop Limit' field when the Time to Live / Hop Limit
       value of the outer header is less than the Time to Live / Hop Limit
       value of the inner header.  Failing to perform this check
       can cause the Time to Live / Hop Limit of the inner header to increment
       across encapsulation/decapsulation cycles.  This check is
       also performed when doing initial encapsulation, when a
       packet comes to an ITR or PITR destined for a LISP site.<a class="pilcrow" href="#section-5.3-11.1">¶</a>
</li>
          <li class="normal" id="section-5.3-11.2">The outer-header IPv4 'Differentiated Services Code Point
       (DSCP)' field (or 'Traffic Class' field, in the case of
       IPv6) <span class="bcp14">SHOULD</span> be copied from the outer-header 'IPv4 DSCP' field (or
       'Traffic Class' field, in the case of IPv6) to the
       inner header. Guidelines for this can be found in <span>[<a class="cite xref" href="#RFC2983">RFC2983</a>]</span>.<a class="pilcrow" href="#section-5.3-11.2">¶</a>
</li>
          <li class="normal" id="section-5.3-11.3">The IPv4 'Explicit Congestion Notification (ECN)' field and bits
          6 and 7 of the IPv6 'Traffic Class' field require special
          treatment in order to avoid discarding indications of
          congestion as specified in <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>.  Note
          that implementations exist that copy the 'ECN' field from
          the outer header to the inner header, even though <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> does not recommend this behavior.  It is
          <span class="bcp14">RECOMMENDED</span> that implementations change to support the
          behavior discussed in <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>.<a class="pilcrow" href="#section-5.3-11.3">¶</a>
</li>
        </ul>
<p id="section-5.3-12">Note that if an ETR/PETR is also an ITR/PITR and chooses to
        re-encapsulate after decapsulating, the net effect of this
        is that the new outer header will carry the same Time to
        Live as the old outer header minus 1.<a class="pilcrow" href="#section-5.3-12">¶</a></p>
<p id="section-5.3-13">Copying the Time to Live serves two purposes:
        first, it preserves the distance the host intended the packet to
        travel; second, and more importantly, it provides for
        suppression of looping packets in the event there is a loop of
        concatenated tunnels due to misconfiguration.<a class="pilcrow" href="#section-5.3-13">¶</a></p>
<p id="section-5.3-14"> Some xTRs, PETRs, and PITRs perform re-encapsulation operations and
 need to treat ECN functions in a special way. Because the re-encapsulation
 operation is a
        sequence of two operations, namely a decapsulation followed by
        an encapsulation, the ECN bits <span class="bcp14">MUST</span> be treated as described
        above for these two operations.<a class="pilcrow" href="#section-5.3-14">¶</a></p>
<p id="section-5.3-15">
 The LISP data plane protocol is not backwards compatible with
 <span>[<a class="cite xref" href="#RFC6830">RFC6830</a>]</span> and does not have explicit support for introducing
 future protocol changes (e.g., an explicit version field). However,
 the LISP control plane <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span> allows an ETR to register
 data plane capabilities by means of new LISP Canonical Address Format (LCAF) types <span>[<a class="cite xref" href="#RFC8060">RFC8060</a>]</span>.
 In this way, an ITR can be made aware of the data plane capabilities
 of an ETR and encapsulate accordingly. The specification of the new
 LCAF types, the new LCAF mechanisms, and their use are out of the
 scope of this document.<a class="pilcrow" href="#section-5.3-15">¶</a></p>
</section>
</div>
</section>
<div id="Map-Cache">
<section id="section-6">
      <h2 id="name-lisp-eid-to-rloc-map-cache">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-lisp-eid-to-rloc-map-cache">LISP EID-to-RLOC Map-Cache</a>
      </h2>
<p id="section-6-1">ITRs and PITRs maintain an on-demand cache, referred to as the LISP
     EID-to-RLOC Map-Cache, that contains mappings from EID-Prefixes
     to Locator-Sets. The cache is used to encapsulate packets from
     the EID space to the corresponding RLOC network attachment point.<a class="pilcrow" href="#section-6-1">¶</a></p>
<p id="section-6-2">When an ITR/PITR receives a packet from inside of the LISP
     site to destinations outside of the site, a longest-prefix match
     lookup of the EID is done to the Map-Cache.<a class="pilcrow" href="#section-6-2">¶</a></p>
<p id="section-6-3">When the lookup succeeds, the Locator-Set retrieved from the
     Map-Cache is used to send the packet to the EID's topological
     location.<a class="pilcrow" href="#section-6-3">¶</a></p>
<p id="section-6-4">If the lookup fails, the ITR/PITR needs to retrieve the
     mapping using the LISP control plane protocol <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>. While the mapping is being retrieved,
  the ITR/PITR can either drop or buffer the packets. This document does not have specific
  recommendations about the action to be taken.
  It is up to the deployer to consider whether or not it is desirable to buffer packets
  and deploy a LISP implementation that offers the desired behavior. Once the mapping is resolved,
  it is then stored in the local Map-Cache to forward subsequent packets addressed to
     the same EID-Prefix.<a class="pilcrow" href="#section-6-4">¶</a></p>
<p id="section-6-5">The Map-Cache is a local cache of mappings; entries are
     expired based on the associated Time to Live. In addition,
     entries can be updated with more current information; see <a class="auto internal xref" href="#update_mapping">Section 13</a> for further information on
     this. Finally, the Map-Cache also contains reachability
     information about EIDs and RLOCs and uses LISP reachability
     information mechanisms to determine the reachability of RLOCs;
     see <a class="auto internal xref" href="#loc-reach">Section 10</a> for the specific mechanisms.<a class="pilcrow" href="#section-6-5">¶</a></p>
</section>
</div>
<div id="fragment">
<section id="section-7">
      <h2 id="name-dealing-with-large-encapsul">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-dealing-with-large-encapsul">Dealing with Large Encapsulated Packets</a>
      </h2>
<p id="section-7-1">This section proposes two mechanisms to deal with
    packets that exceed the Path MTU (PMTU) between the ITR and ETR.<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">It is left to the implementor to decide if the stateless or
    stateful mechanism <span class="bcp14">SHOULD</span> be implemented. Both or neither can be
    used, since it is a local decision in the ITR regarding how
    to deal with MTU issues, and sites can interoperate with differing
    mechanisms.<a class="pilcrow" href="#section-7-2">¶</a></p>
<p id="section-7-3">Both stateless and stateful mechanisms also apply to
    Re-encapsulating and Recursive Tunneling, so any actions
    below referring to an ITR also apply to a TE-ITR.<a class="pilcrow" href="#section-7-3">¶</a></p>
<div id="MTU-STATELESS">
<section id="section-7.1">
        <h3 id="name-a-stateless-solution-to-mtu">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-a-stateless-solution-to-mtu">A Stateless Solution to MTU Handling</a>
        </h3>
<p id="section-7.1-1">An ITR stateless solution to handle MTU issues is described as
    follows:<a class="pilcrow" href="#section-7.1-1">¶</a></p>
<ol class="normal type-1" id="section-7.1-2" start="1" type="1">
   <li id="section-7.1-2.1">Define H to be the size, in octets, of the outer header an ITR
    prepends to a packet. This includes the UDP and LISP header lengths.<a class="pilcrow" href="#section-7.1-2.1">¶</a>
</li>
          <li id="section-7.1-2.2">Define L to be the size, in octets, of the maximum-sized packet
    an ITR can send to an ETR without the need for the ITR or any
    intermediate routers to fragment the packet.
 The network administrator of the LISP deployment has to determine
 what the suitable value of L is, so as to make sure that no MTU issues arise.<a class="pilcrow" href="#section-7.1-2.2">¶</a>
</li>
          <li id="section-7.1-2.3">Define an architectural constant S for the maximum size of a
    packet, in octets, an ITR <span class="bcp14">MUST</span> receive from the source so the
    effective MTU can be met. That is, L = S + H.<a class="pilcrow" href="#section-7.1-2.3">¶</a>
</li>
        </ol>
<p id="section-7.1-3">When an ITR receives a packet from a site-facing interface and
    adds H octets worth of encapsulation to yield a packet size
    greater than L octets (meaning the received packet size was
    greater than S octets from the source), it resolves the MTU issue
    by first splitting the original packet into 2 equal-sized
    fragments.  A LISP header is then prepended to each fragment. The
    size of the encapsulated fragments is then (S/2 + H), which is
    less than the ITR's estimate of the PMTU between the ITR and
    its correspondent ETR.<a class="pilcrow" href="#section-7.1-3">¶</a></p>
<p id="section-7.1-4">When an ETR receives encapsulated fragments, it treats them
    as two individually encapsulated packets. It strips the LISP
    headers and then forwards each fragment to the destination host of
    the destination site.  The two fragments are reassembled at
    the destination host into the single IP datagram that was
    originated by the source host. Note that reassembly can happen
    at the ETR if the encapsulated packet was fragmented at or after the
    ITR.<a class="pilcrow" href="#section-7.1-4">¶</a></p>
<p id="section-7.1-5">This behavior <span class="bcp14">MUST</span> be implemented by the ITR only when the source
    host originates a packet with the 'DF' field of the IP header set
    to 0.  When the 'DF' field of the IP header is set to 1 or the
    packet is an IPv6 packet originated by the source host, the ITR
    will drop the packet when the size (adding in the size of the
    encapsulation header) is greater than L and send an ICMPv4
    Unreachable / Fragmentation Needed or ICMPv6 Packet Too Big (PTB)
    message to the source with a value of S, where S is (L - H).<a class="pilcrow" href="#section-7.1-5">¶</a></p>
<p id="section-7.1-6">When the outer-header encapsulation uses an IPv4 header, an
    implementation <span class="bcp14">SHOULD</span> set the DF bit to 1 so ETR fragment
    reassembly can be avoided. An implementation <span class="bcp14">MAY</span> set the DF
    bit in such headers to 0 if it has good reason to believe
    there are unresolvable PMTU issues between the sending ITR
    and the receiving ETR.<a class="pilcrow" href="#section-7.1-6">¶</a></p>
<p id="section-7.1-7">It is <span class="bcp14">RECOMMENDED</span> that L be defined as 1500.
    Additional information about in-network MTU and fragmentation issues can be found in <span>[<a class="cite xref" href="#RFC4459">RFC4459</a>]</span>.<a class="pilcrow" href="#section-7.1-7">¶</a></p>
</section>
</div>
<div id="MTU-STATEFUL">
<section id="section-7.2">
        <h3 id="name-a-stateful-solution-to-mtu-">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-a-stateful-solution-to-mtu-">A Stateful Solution to MTU Handling</a>
        </h3>
<p id="section-7.2-1">An ITR stateful solution to handle MTU issues is described as
    follows:<a class="pilcrow" href="#section-7.2-1">¶</a></p>
<ol class="normal type-1" id="section-7.2-2" start="1" type="1">
   <li id="section-7.2-2.1">The ITR will keep state of the effective MTU for each Locator
        per Map-Cache entry. The effective MTU is what the core network
        can deliver along the path between the ITR and ETR.<a class="pilcrow" href="#section-7.2-2.1">¶</a>
</li>
          <li id="section-7.2-2.2">When an IPv4-encapsulated packet with the DF bit set to 1 exceeds what the core network
        can deliver, one of the intermediate routers on the path will
        send an ICMPv4
        Unreachable / Fragmentation Needed message to the ITR. The
        ITR will parse the ICMP message to determine which Locator is
        affected by the effective MTU change and then record the new
        effective MTU value in the Map-Cache entry.<a class="pilcrow" href="#section-7.2-2.2">¶</a>
</li>
          <li id="section-7.2-2.3">When a packet is received by the ITR from a source inside
        of the site and the size of the packet is greater than the
        effective MTU stored with the Map-Cache entry associated with
        the destination EID the packet is for, the ITR will send an
        ICMPv4 Unreachable / Fragmentation Needed message back to the source. The packet size
        advertised by the ITR in the ICMP message is the effective
        MTU minus the LISP encapsulation length.<a class="pilcrow" href="#section-7.2-2.3">¶</a>
</li>
        </ol>
<p id="section-7.2-3">Even though this mechanism is stateful, it has advantages over
    the stateless IP fragmentation mechanism, by not involving the
    destination host with reassembly of ITR fragmented packets.<a class="pilcrow" href="#section-7.2-3">¶</a></p>
<p id="section-7.2-4">Please note that using ICMP packets for PMTU discovery, as described
in <span>[<a class="cite xref" href="#RFC1191">RFC1191</a>]</span> and <span>[<a class="cite xref" href="#RFC8201">RFC8201</a>]</span>, can result in suboptimal behavior in the
presence of ICMP packet losses or off-path attackers that spoof ICMP. 
      Possible mitigations include ITRs and ETRs cooperating on MTU probe
      packets <span>[<a class="cite xref" href="#RFC4821">RFC4821</a>]</span> <span>[<a class="cite xref" href="#RFC8899">RFC8899</a>]</span> or ITRs
      storing the beginning of large packets to verify that they match
      the echoed packet in an ICMP Fragmentation Needed / PTB message.<a class="pilcrow" href="#section-7.2-4">¶</a></p>
</section>
</div>
</section>
</div>
<div id="instance">
<section id="section-8">
      <h2 id="name-using-virtualization-and-se">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-using-virtualization-and-se">Using Virtualization and Segmentation with LISP</a>
      </h2>
<p id="section-8-1">There are several cases where segregation is needed at the
 EID level.  For instance, this is the case for deployments
 containing overlapping addresses, traffic isolation policies,
 or multi-tenant virtualization.  For these and other scenarios
 where segregation is needed, Instance IDs are used.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2">An Instance ID can be carried in a LISP-encapsulated
        packet.  An ITR that prepends a LISP header will copy a
        24-bit value used by the LISP router to uniquely identify
        the address space. The value is copied to the 'Instance ID'
        field of the LISP header, and the I-bit is set to 1.<a class="pilcrow" href="#section-8-2">¶</a></p>
<p id="section-8-3">When an ETR decapsulates a packet, the Instance ID from the
        LISP header is used as a table identifier to locate the
        forwarding table to use for the inner destination EID
        lookup.<a class="pilcrow" href="#section-8-3">¶</a></p>
<p id="section-8-4">For example, an 802.1Q VLAN tag or VPN identifier could be
        used as a 24-bit Instance ID. See <span>[<a class="cite xref" href="#I-D.ietf-lisp-vpn">LISP-VPN</a>]</span>
        for details regarding LISP VPN use cases. Please note that the Instance ID
        is not protected; an on-path attacker can modify the tags and, for instance,
        allow communications between logically isolated VLANs.<a class="pilcrow" href="#section-8-4">¶</a></p>
<p id="section-8-5">Participants within a LISP deployment must agree
          on the meaning of Instance ID values. The source and destination EIDs
          <span class="bcp14">MUST</span> belong to the same Instance ID.<a class="pilcrow" href="#section-8-5">¶</a></p>
<p id="section-8-6">The Instance ID <span class="bcp14">SHOULD NOT</span> be used with overlapping IPv6 EID addresses.<a class="pilcrow" href="#section-8-6">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-routing-locator-selection">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-routing-locator-selection">Routing Locator Selection</a>
      </h2>
<p id="section-9-1">The Map-Cache contains the state used by ITRs and PITRs to
 encapsulate packets.  When an ITR/PITR receives a packet from
 inside the LISP site to a destination outside of the site, a
 longest-prefix match lookup of the EID is done to the
 Map-Cache (see <a class="auto internal xref" href="#Map-Cache">Section 6</a>). The lookup
 returns a single Locator-Set containing a list of RLOCs
 corresponding to the EID's topological location.  Each RLOC in
 the Locator-Set is associated with a Priority and Weight;
 this information is used to select the RLOC to
 encapsulate.<a class="pilcrow" href="#section-9-1">¶</a></p>
<p id="section-9-2">The RLOC with the lowest Priority is selected. An RLOC
 with Priority 255 means that it <span class="bcp14">MUST NOT</span> be used for
 forwarding. When multiple RLOCs have the same Priority, then
 the Weight states how to load-balance traffic among them.
 The value of the Weight represents the relative weight of
 the total packets that match the mapping entry.<a class="pilcrow" href="#section-9-2">¶</a></p>
<p id="section-9-3">The following are different scenarios for choosing
        RLOCs and the controls that are available:<a class="pilcrow" href="#section-9-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9-4.1">The server-side returns one RLOC. The client-side can only
        use one RLOC. The server-side has complete control of the
        selection.<a class="pilcrow" href="#section-9-4.1">¶</a>
</li>
        <li class="normal" id="section-9-4.2">The server-side returns a list of RLOCs where a subset
        of the list has the same best Priority. The client can only use
        the subset list according to the
        weighting assigned by the server-side. In this case, the
        server-side controls both the subset list and load splitting
        across its members. The client-side can use RLOCs outside
        of the subset list if it determines that the subset
        list is unreachable (unless RLOCs are set to a Priority of 255).
        Some sharing of control exists: the server-side determines
        the destination RLOC list and load distribution while the
        client-side has the option of using alternatives to this list if
        RLOCs in the list are unreachable.<a class="pilcrow" href="#section-9-4.2">¶</a>
</li>
        <li class="normal" id="section-9-4.3">The server-side sets a Weight of zero for the RLOC subset
        list. In this case, the client-side can choose how the traffic
        load is spread across the subset list. See <a class="auto internal xref" href="#loc-hash">Section 12</a> for details on load-sharing mechanisms.
        Control is shared by the server-side determining the list and
        the client-side determining load distribution. Again, the
        client can use alternative RLOCs if the server-provided list
        of RLOCs is unreachable.<a class="pilcrow" href="#section-9-4.3">¶</a>
</li>
        <li class="normal" id="section-9-4.4">Either side (more likely the server-side ETR) decides to "glean"
        the RLOCs. For example, if the server-side ETR gleans RLOCs, then
 the client-side ITR gives the server-side ETR responsibility for
 bidirectional RLOC reachability and preferability.  Server-side
          ETR gleaning of the client-side ITR RLOC is done by caching the
          inner-header source EID and the outer-header source RLOC of
          received packets. The client-side ITR controls how traffic is
   returned and can, as an alternative, use an outer-header source
   RLOC, which then can be added to the list the server-side ETR uses
   to return traffic.  Since no Priority or Weights are provided
          using this method, the server-side ETR <span class="bcp14">MUST</span> assume that each
          client-side ITR RLOC uses the same best Priority with a Weight
          of zero.  In addition, since EID-Prefix encoding cannot be conveyed
          in data packets, the EID-to-RLOC Map-Cache on Tunnel Routers can grow
          very large. Gleaning has several important considerations.
          A "gleaned" Map-Cache entry is only stored and used for a <span class="bcp14">RECOMMENDED</span> period of 3 seconds,
          pending verification.  Verification <span class="bcp14">MUST</span> be performed by
          sending a Map-Request to the source EID (the inner-header IP source
          address) of the received encapsulated packet.  A reply to this
          "verifying Map-Request" is used to fully populate the Map-Cache entry
          for the "gleaned" EID and is stored and used for the time indicated
          in the 'Time to Live' field of a received Map-Reply.  When a verified Map-Cache entry is stored, data gleaning no longer occurs for subsequent
          packets that have a source EID that matches the EID-Prefix of the
          verified entry.  This "gleaning" mechanism <span class="bcp14">MUST NOT</span> be used over
          the public Internet and <span class="bcp14">SHOULD</span> only be used in trusted and closed
          deployments.  Refer to <a class="auto internal xref" href="#SECURITY">Section 16</a> for security issues regarding this
          mechanism.<a class="pilcrow" href="#section-9-4.4">¶</a>
</li>
      </ul>
<p id="section-9-5">RLOCs that appear in EID-to-RLOC Map-Reply messages are
        assumed to be reachable when the R-bit <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span> for the Locator record is set
        to 1.  When the R-bit is set to 0, an ITR or PITR <span class="bcp14">MUST NOT</span>
        encapsulate to the RLOC. Neither the information contained in
        a Map-Reply nor that stored in the mapping database system
        provides reachability information for RLOCs. Note that
        reachability is not part of the Mapping System and is
        determined using one or more of the RLOC
        reachability algorithms described in the next section.<a class="pilcrow" href="#section-9-5">¶</a></p>
</section>
<div id="loc-reach">
<section id="section-10">
      <h2 id="name-routing-locator-reachabilit">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-routing-locator-reachabilit">Routing Locator Reachability</a>
      </h2>
<p id="section-10-1">Several data plane mechanisms for determining RLOC
        reachability are currently defined. Please note that
        additional reachability mechanisms based on the control plane are
        defined in <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>.<a class="pilcrow" href="#section-10-1">¶</a></p>
<ol class="normal type-1" id="section-10-2" start="1" type="1">
 <li id="section-10-2.1">An ETR <span class="bcp14">MAY</span> examine the Locator-Status-Bits in the LISP
            header of an encapsulated data packet received from an
            ITR. If the ETR is also acting as an ITR and has
            traffic to return to the original ITR site, it can use
            this status information to help select an RLOC.<a class="pilcrow" href="#section-10-2.1">¶</a>
</li>
        <li id="section-10-2.2">When an ETR receives an encapsulated packet from an ITR,
            the source RLOC from the outer header of the packet is likely
            to be reachable. Please note that in some scenarios the
            RLOC from the outer header can be a spoofable field.<a class="pilcrow" href="#section-10-2.2">¶</a>
</li>
        <li id="section-10-2.3">An ITR/ETR pair can use the Echo-Noncing Locator
            reachability algorithms described in this section.<a class="pilcrow" href="#section-10-2.3">¶</a>
</li>
      </ol>
<p id="section-10-3">When determining Locator up/down reachability by
        examining the Locator-Status-Bits from the LISP-encapsulated
        data packet, an ETR will receive an up-to-date status from an
        encapsulating ITR about reachability for all ETRs at the
        site.  CE-based ITRs at the source site can determine
        reachability relative to each other using the site IGP as
        follows:<a class="pilcrow" href="#section-10-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10-4.1">Under normal circumstances, each ITR will advertise
            a default route into the site IGP.<a class="pilcrow" href="#section-10-4.1">¶</a>
</li>
        <li class="normal" id="section-10-4.2">If an ITR fails or if the upstream link to its Provider Edge
            fails, its default route will either time out or be
            withdrawn.<a class="pilcrow" href="#section-10-4.2">¶</a>
</li>
      </ul>
<p id="section-10-5">Each ITR can thus observe the presence or lack of a
        default route originated by the others to determine the
        Locator-Status-Bits it sets for them.<a class="pilcrow" href="#section-10-5">¶</a></p>
<p id="section-10-6">When ITRs at the site are not deployed in CE routers, the IGP
        can still be used to determine the reachability of Locators,
        provided they are injected into the IGP. This is
        typically done when a /32 address is configured on a loopback
        interface.<a class="pilcrow" href="#section-10-6">¶</a></p>
<p id="section-10-7"> RLOCs listed in a Map-Reply are numbered with ordinals
        0 to n-1.  The Locator-Status-Bits in a LISP-encapsulated
        packet are numbered from 0 to n-1 starting with the least
        significant bit. For example, if an RLOC listed in the 3rd
        position of the Map-Reply goes down (ordinal value 2),
        then all ITRs at the site will clear the 3rd least
        significant bit (xxxx x0xx) of the 'Locator-Status-Bits'
        field for the packets they encapsulate.<a class="pilcrow" href="#section-10-7">¶</a></p>
<p id="section-10-8">When an xTR decides to use Locator-Status-Bits
          to affect reachability information, it acts as follows:
          ETRs decapsulating a packet will check for any change in
          the 'Locator-Status-Bits' field.  When a bit goes from 1 to 0, the
          ETR, if also acting as an ITR, will refrain from encapsulating
          packets to an RLOC that is indicated as down. It will only resume
          using that RLOC if the corresponding Locator-Status-Bit
          returns to a value of 1. Locator-Status-Bits are associated with a Locator-Set
          per EID-Prefix. Therefore, when a Locator becomes unreachable, the
          Locator-Status-Bit that corresponds to that Locator's position in the
          list returned by the last Map-Reply will be set to zero for that
          particular EID-Prefix.<a class="pilcrow" href="#section-10-8">¶</a></p>
<p id="section-10-9">Locator-Status-Bits <span class="bcp14">MUST NOT</span> be used
 over the public Internet and <span class="bcp14">SHOULD</span> only be used  in trusted
 and closed deployments. In addition, Locator-Status-Bits
 <span class="bcp14">SHOULD</span> be coupled with Map-Versioning <span>[<a class="cite xref" href="#RFC9302">RFC9302</a>]</span>
    to prevent race conditions where Locator-Status-Bits are interpreted as
    referring to different RLOCs than intended. Refer to <a class="auto internal xref" href="#SECURITY">Section 16</a>
 for security issues regarding this mechanism.<a class="pilcrow" href="#section-10-9">¶</a></p>
<p id="section-10-10">If an ITR encapsulates a packet to an ETR and the packet is
        received and decapsulated by the ETR, it is implied, but not
        confirmed by the ITR, that the ETR's RLOC is reachable.  In
        most cases, the ETR can also reach the ITR but cannot assume
        this to be true, due to the possibility of path asymmetry. In
        the presence of unidirectional traffic flow from an ITR to an
        ETR, the ITR <span class="bcp14">SHOULD NOT</span> use the lack of return traffic as an
        indication that the ETR is unreachable. Instead, it <span class="bcp14">MUST</span> use
        an alternate mechanism to determine reachability.<a class="pilcrow" href="#section-10-10">¶</a></p>
<p id="section-10-11">The security considerations of <a class="auto internal xref" href="#SECURITY">Section 16</a>
        related to data plane reachability apply to the data plane
        RLOC reachability mechanisms described in this section.<a class="pilcrow" href="#section-10-11">¶</a></p>
<div id="echo-nonce">
<section id="section-10.1">
        <h3 id="name-echo-nonce-algorithm">
<a class="section-number selfRef" href="#section-10.1">10.1. </a><a class="section-name selfRef" href="#name-echo-nonce-algorithm">Echo-Nonce Algorithm</a>
        </h3>
<p id="section-10.1-1">When data flows bidirectionally between Locators from
         different sites, a data plane mechanism called "nonce
         echoing" can be used to determine reachability between an ITR
         and ETR.  When an ITR wants to solicit a nonce echo, it sets
         the N- and E-bits and places a 24-bit nonce <span>[<a class="cite xref" href="#RFC4086">RFC4086</a>]</span> in the LISP header of the next
         encapsulated data packet.<a class="pilcrow" href="#section-10.1-1">¶</a></p>
<p id="section-10.1-2">When this packet is received by the ETR, the encapsulated
         packet is forwarded as normal. When the ETR is an xTR
         (co-located as an ITR), it then sends a data packet to the
         ITR (when it is an xTR co-located as an ETR) and includes the
         nonce received earlier with the N-bit set and E-bit
         cleared. The ITR sees this "echoed nonce" and knows that the
         path to and from the ETR is up.<a class="pilcrow" href="#section-10.1-2">¶</a></p>
<p id="section-10.1-3">The ITR will set the E-bit and N-bit for every packet it
         sends while in the Echo-Nonce-request state.  The time the
         ITR waits to process the echoed nonce before it determines that
         the path is unreachable is variable and is a choice left for
         the implementation.<a class="pilcrow" href="#section-10.1-3">¶</a></p>
<p id="section-10.1-4">If the ITR is receiving packets from the ETR but does not
         see the nonce echoed while being in the Echo-Nonce-request
         state, then the path to the ETR is unreachable. This decision
         <span class="bcp14">MAY</span> be overridden by other Locator reachability
         algorithms. Once the ITR determines that the path to the ETR
         is down, it can switch to another Locator for that
         EID-Prefix.<a class="pilcrow" href="#section-10.1-4">¶</a></p>
<p id="section-10.1-5">Note that "ITR" and "ETR" are relative terms here. Both
         devices <span class="bcp14">MUST</span> be implementing both ITR and ETR functionality
         for the Echo-Nonce mechanism to operate.<a class="pilcrow" href="#section-10.1-5">¶</a></p>
<p id="section-10.1-6">The ITR and ETR <span class="bcp14">MAY</span> both go into the Echo-Nonce-request
         state at the same time. The number of packets sent or the
         time during which Echo-Nonce request packets are sent is an
         implementation-specific setting. In this case, an xTR
         receiving the Echo-Nonce request packets will suspend
         the Echo-Nonce state and set up an 'Echo-Nonce-request-state' timer.
         After the 'Echo-Nonce-request-state' timer expires, it will resume
         the Echo-Nonce state.<a class="pilcrow" href="#section-10.1-6">¶</a></p>
<p id="section-10.1-7">This mechanism does not completely solve the forward path
         reachability problem, as traffic may be unidirectional. That
         is, the ETR receiving traffic at a site <span class="bcp14">MAY</span> not be the same
         device as an ITR that transmits traffic from that site, or
         the site-to-site traffic is unidirectional so there is no ITR
         returning traffic.<a class="pilcrow" href="#section-10.1-7">¶</a></p>
<p id="section-10.1-8">The Echo-Nonce algorithm is bilateral. That is, if one
         side sets the E-bit and the other side is not enabled for
         Echo-Noncing, then the echoing of the nonce does not occur
         and the requesting side may erroneously consider the Locator
         unreachable. An ITR <span class="bcp14">SHOULD</span> set the E-bit in an
         encapsulated data packet when it knows the ETR is enabled for
         Echo-Noncing. This is conveyed by the E-bit in the
         Map-Reply message.<a class="pilcrow" href="#section-10.1-8">¶</a></p>
<p id="section-10.1-9">Many implementations default to not advertising that they are
         Echo-Nonce capable in Map-Reply messages, and so RLOC-Probing tends
         to be used for RLOC reachability.<a class="pilcrow" href="#section-10.1-9">¶</a></p>
<p id="section-10.1-10">The Echo-Nonce mechanism <span class="bcp14">MUST NOT</span> be used
 over the public Internet and <span class="bcp14">MUST</span> only be used in trusted
 and closed deployments. Refer to <a class="auto internal xref" href="#SECURITY">Section 16</a> for
 security issues regarding this mechanism.<a class="pilcrow" href="#section-10.1-10">¶</a></p>
</section>
</div>
</section>
</div>
<div id="eid-reach">
<section id="section-11">
      <h2 id="name-eid-reachability-within-a-l">
<a class="section-number selfRef" href="#section-11">11. </a><a class="section-name selfRef" href="#name-eid-reachability-within-a-l">EID Reachability within a LISP Site</a>
      </h2>
<p id="section-11-1">A site <span class="bcp14">MAY</span> be multihomed using two or more ETRs.  The hosts
        and infrastructure within a site will be addressed using one
        or more EID-Prefixes that are mapped to the RLOCs of the
        relevant ETRs in the Mapping System.  One possible failure
        mode is for an ETR to lose reachability to one or more of the
        EID-Prefixes within its own site. When this occurs when the
        ETR sends Map-Replies, it can clear the R-bit associated with
        its own Locator. And when the ETR is also an ITR, it can clear
        its Locator-Status-Bit in the encapsulation data header.<a class="pilcrow" href="#section-11-1">¶</a></p>
<p id="section-11-2">It is recognized that there are no simple solutions to the
        site partitioning problem because it is hard to know which
        part of the EID-Prefix range is partitioned and which Locators
        can reach any sub-ranges of the EID-Prefixes. Note that this
        is not a new problem introduced by the LISP architecture. At the time of
        this writing, this problem exists when a multihomed site uses BGP to
        advertise its reachability upstream.<a class="pilcrow" href="#section-11-2">¶</a></p>
</section>
</div>
<div id="loc-hash">
<section id="section-12">
      <h2 id="name-routing-locator-hashing">
<a class="section-number selfRef" href="#section-12">12. </a><a class="section-name selfRef" href="#name-routing-locator-hashing">Routing Locator Hashing</a>
      </h2>
<p id="section-12-1">When an ETR provides an EID-to-RLOC mapping in a
          Map-Reply message that is stored in the Map-Cache of a
          requesting ITR, the Locator-Set for the EID-Prefix <span class="bcp14">MAY</span>
          contain different Priority and Weight values for each
          Routing Locator Address.  When more than one best Priority Locator
          exists, the ITR can decide how to load-share traffic against
          the corresponding Locators.<a class="pilcrow" href="#section-12-1">¶</a></p>
<p id="section-12-2">The following hash algorithm <span class="bcp14">MAY</span> be used by an ITR to
          select a Locator for a packet destined to an EID for the
          EID-to-RLOC mapping:<a class="pilcrow" href="#section-12-2">¶</a></p>
<ol class="normal type-1" id="section-12-3" start="1" type="1">
 <li id="section-12-3.1">Either a source and destination address hash or the
            commonly used 5-tuple hash can be used.  The commonly used
            5-tuple hash includes the source and destination
            addresses; source and destination TCP, UDP, or Stream
            Control Transmission Protocol (SCTP) port numbers; and the
            IP protocol number field or IPv6 next-protocol fields of a
            packet that a host originates from within a LISP
            site. When a packet is not a TCP, UDP, or SCTP packet, the
            source and destination addresses only from the header are
            used to compute the hash.<a class="pilcrow" href="#section-12-3.1">¶</a>
</li>
        <li id="section-12-3.2">Take the hash value and divide it by the number of
            Locators stored in the Locator-Set for the EID-to-RLOC
            mapping.<a class="pilcrow" href="#section-12-3.2">¶</a>
</li>
        <li id="section-12-3.3">The remainder will yield a value of 0 to "number of
            Locators minus 1". Use the remainder to select the Locator
            in the Locator-Set.<a class="pilcrow" href="#section-12-3.3">¶</a>
</li>
      </ol>
<p id="section-12-4">The specific hash algorithm the ITR uses for load-sharing
        is out of scope for this document and does not prevent
        interoperability.<a class="pilcrow" href="#section-12-4">¶</a></p>
<p id="section-12-5">The source port <span class="bcp14">SHOULD</span> be the same for all packets belonging to the
 same flow. Also note that when a packet is LISP encapsulated, the source
        port number in the outer UDP header needs to be set. Selecting
        a hashed value allows core routers that are attached to Link
        Aggregation Groups (LAGs) to load-split the encapsulated
        packets across member links of such LAGs. Otherwise, core
        routers would see a single flow, since packets have a source
        address of the ITR, for packets that are originated by
        different EIDs at the source site. A suggested setting for the
        source port number computed by an ITR is a 5-tuple hash
        function on the inner header, as described above. The source
        port <span class="bcp14">SHOULD</span> be the same for all packets belonging to the same
        flow.<a class="pilcrow" href="#section-12-5">¶</a></p>
<p id="section-12-6">Many core router implementations use a 5-tuple hash to decide
        how to balance packet load across members of a LAG. The 5-tuple
        hash includes the source and destination addresses of the packet
        and the source and destination ports when the protocol number in
        the packet is TCP or UDP. For this reason, UDP encoding is
        used for LISP encapsulation. In this scenario, when the outer header is IPv6, the flow label <span class="bcp14">MAY</span> also be
          set following the procedures specified in <span>[<a class="cite xref" href="#RFC6438">RFC6438</a>]</span>. When the inner header
          is IPv6 and the flow label is not zero, it <span class="bcp14">MAY</span> be used to compute the hash.<a class="pilcrow" href="#section-12-6">¶</a></p>
</section>
</div>
<div id="update_mapping">
<section id="section-13">
      <h2 id="name-changing-the-contents-of-ei">
<a class="section-number selfRef" href="#section-13">13. </a><a class="section-name selfRef" href="#name-changing-the-contents-of-ei">Changing the Contents of EID-to-RLOC Mappings</a>
      </h2>
<p id="section-13-1">Since the LISP architecture uses a caching scheme to
    retrieve and store EID-to-RLOC mappings, the only way an ITR
    can get a more up-to-date mapping is to re-request the
    mapping. However, the ITRs do not know when the mappings
    change, and the ETRs do not keep track of which ITRs
    requested their mappings. For scalability reasons, it is
    desirable to maintain this approach, but implementors need to provide a
    way for ETRs to change their mappings and inform the sites
    that are currently communicating with the ETR site using
    such mappings.<a class="pilcrow" href="#section-13-1">¶</a></p>
<p id="section-13-2">This section defines two data plane mechanism for updating
  EID-to-RLOC mappings. Additionally, the Solicit-Map-Request
  (SMR) control plane updating mechanism is specified in <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>.<a class="pilcrow" href="#section-13-2">¶</a></p>
<div id="lsb-changing">
<section id="section-13.1">
        <h3 id="name-locator-status-bits">
<a class="section-number selfRef" href="#section-13.1">13.1. </a><a class="section-name selfRef" href="#name-locator-status-bits">Locator-Status-Bits</a>
        </h3>
<p id="section-13.1-1">Locator-Status-Bits (LSBs) can also be used to keep track of the
  Locator status (up or down) when EID-to-RLOC mappings are changing. When LSBs are used in a LISP deployment, all LISP Tunnel Routers <span class="bcp14">MUST</span> implement both ITR and ETR capabilities (therefore, all Tunnel Routers are effectively xTRs). In this section, the term "source xTR" is used to refer to the xTR setting the LSB and "destination xTR" is used to refer to the xTR receiving the LSB. The procedure is as follows:<a class="pilcrow" href="#section-13.1-1">¶</a></p>
<ol class="normal type-1" id="section-13.1-2" start="1" type="1">
        <li id="section-13.1-2.1">When a Locator record is added or removed from the Locator-Set, the source xTR
  will signal this by sending an SMR control plane message <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span> to the destination xTR. At this point, the source xTR <span class="bcp14">MUST NOT</span> use the LSB field, when the L-bit is 0,
since the destination xTR site has outdated information.
The source xTR will set up a 'use-LSB' timer.<a class="pilcrow" href="#section-13.1-2.1">¶</a>
</li>
          <li id="section-13.1-2.2">As defined in <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>,
upon reception of the SMR message, the destination xTR will retrieve the updated
EID-to-RLOC mappings by sending a Map-Request.<a class="pilcrow" href="#section-13.1-2.2">¶</a>
</li>
          <li id="section-13.1-2.3">When the 'use-LSB' timer expires, the source xTR can use the LSB again with the destination xTR to signal the Locator status (up or down).
  The specific value for the 'use-LSB' timer depends on the LISP deployment; the 'use-LSB' timer needs to be large enough
for the destination xTR to retrieve the updated EID-to-RLOC mappings. A <span class="bcp14">RECOMMENDED</span> value for the 'use-LSB' timer is 5 minutes.<a class="pilcrow" href="#section-13.1-2.3">¶</a>
</li>
        </ol>
</section>
</div>
<div id="map-versioning">
<section id="section-13.2">
        <h3 id="name-database-map-versioning">
<a class="section-number selfRef" href="#section-13.2">13.2. </a><a class="section-name selfRef" href="#name-database-map-versioning">Database Map-Versioning</a>
        </h3>
<p id="section-13.2-1">When there is unidirectional packet flow between an ITR and
    ETR, and the EID-to-RLOC mappings change on the ETR, it needs to
    inform the ITR so encapsulation to a removed Locator can stop
    and can instead be started to a new Locator in the
    Locator-Set.<a class="pilcrow" href="#section-13.2-1">¶</a></p>
<p id="section-13.2-2">An ETR can send Map-Reply messages carrying a Map-Version Number <span>[<a class="cite xref" href="#RFC9302">RFC9302</a>]</span> in
   an EID-Record.  This is known as the Destination Map-Version Number.
   ITRs include the Destination Map-Version Number in packets they
   encapsulate to the site.<a class="pilcrow" href="#section-13.2-2">¶</a></p>
<p id="section-13.2-3">An ITR, when it encapsulates packets to ETRs, can convey its own Map-
   Version Number.  This is known as the Source Map-Version Number.<a class="pilcrow" href="#section-13.2-3">¶</a></p>
<p id="section-13.2-4">When presented in EID-Records of Map-Register messages <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>, a Map-Version
   Number is a good way for the Map-Server <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span> to assure that all ETRs for a
   site registering to it are synchronized according to the Map-Version
   Number.<a class="pilcrow" href="#section-13.2-4">¶</a></p>
<p id="section-13.2-5">See <span>[<a class="cite xref" href="#RFC9302">RFC9302</a>]</span> for a more
    detailed analysis and description of Database
    Map-Versioning.<a class="pilcrow" href="#section-13.2-5">¶</a></p>
</section>
</div>
</section>
</div>
<div id="multicast">
<section id="section-14">
      <h2 id="name-multicast-considerations">
<a class="section-number selfRef" href="#section-14">14. </a><a class="section-name selfRef" href="#name-multicast-considerations">Multicast Considerations</a>
      </h2>
<p id="section-14-1">A multicast group address, as defined in the original Internet
       architecture, is an identifier of a grouping of topologically
       independent receiver host locations.  The address encoding itself
       does not determine the location of the receiver(s).  The multicast
       routing protocol and the network-based state the protocol creates
       determine where the receivers are located.<a class="pilcrow" href="#section-14-1">¶</a></p>
<p id="section-14-2">In the context of LISP, a multicast group address is both an
       EID and an RLOC.  Therefore, no specific semantic or
       action needs to be taken for a destination address, as it would
       appear in an IP header.  Therefore, a group address that
       appears in an inner IP header built by a source host will be
       used as the destination EID.  The outer IP header (the
       destination RLOC address), prepended by a LISP
       router, can use the same group address as the destination
       RLOC, use a multicast or unicast RLOC
       obtained from a Mapping System lookup, or use other means to
       determine the group address mapping.<a class="pilcrow" href="#section-14-2">¶</a></p>
<p id="section-14-3">With respect to the source RLOC address, the ITR
       prepends its own IP address as the source address of the outer
       IP header, just like it would if the destination EID was a
       unicast address. This source RLOC address, like any
       other RLOC address, <span class="bcp14">MUST</span> be routable on the underlay.<a class="pilcrow" href="#section-14-3">¶</a></p>
<p id="section-14-4">There are two approaches for LISP-Multicast <span>[<a class="cite xref" href="#RFC6831">RFC6831</a>]</span>: one that uses
       native multicast routing in the underlay with no support from
       the Mapping System and another that uses only unicast routing
       in the underlay with support from the Mapping System. See <span>[<a class="cite xref" href="#RFC6831">RFC6831</a>]</span> and <span>[<a class="cite xref" href="#RFC8378">RFC8378</a>]</span>, respectively,
       for details. Details for LISP-Multicast and interworking with
       non-LISP sites are described in <span>[<a class="cite xref" href="#RFC6831">RFC6831</a>]</span> and
       <span>[<a class="cite xref" href="#RFC6832">RFC6832</a>]</span>, respectively.<a class="pilcrow" href="#section-14-4">¶</a></p>
</section>
</div>
<div id="PUNT">
<section id="section-15">
      <h2 id="name-router-performance-consider">
<a class="section-number selfRef" href="#section-15">15. </a><a class="section-name selfRef" href="#name-router-performance-consider">Router Performance Considerations</a>
      </h2>
<p id="section-15-1">LISP is designed to be very "hardware based and forwarding
        friendly". A few implementation techniques can be used to
        incrementally implement LISP:<a class="pilcrow" href="#section-15-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-15-2.1">When a tunnel-encapsulated packet is received by an
            ETR, the outer destination address may not be the address
            of the router. This makes it challenging for the control
            plane to get packets from the hardware. This may be
            mitigated by creating special Forwarding Information Base
            (FIB) entries for the EID-Prefixes of EIDs served by the
            ETR (those for which the router provides an RLOC
            translation).  These FIB entries are marked with a flag
            indicating that control plane processing <span class="bcp14">SHOULD</span> be
            performed. The forwarding logic of testing for particular
            IP protocol number values is not necessary. There are a
            few proven cases where no changes to existing deployed
            hardware were needed to support the LISP data plane.<a class="pilcrow" href="#section-15-2.1">¶</a>
</li>
        <li class="normal" id="section-15-2.2">On an ITR, prepending a new IP header consists of adding
            more octets to a Message Authentication Code (MAC) rewrite string and prepending the
            string as part of the outgoing encapsulation
            procedure.  Routers that support Generic Routing Encapsulation
            (GRE) tunneling <span>[<a class="cite xref" href="#RFC2784">RFC2784</a>]</span> or 6to4 tunneling
            <span>[<a class="cite xref" href="#RFC3056">RFC3056</a>]</span> may already support this
            action.<a class="pilcrow" href="#section-15-2.2">¶</a>
</li>
        <li class="normal" id="section-15-2.3">A packet's source address or the interface on which the
            packet was received can be used to select
            Virtual Routing and Forwarding (VRF). The VRF system's routing table
            can be used to find EID-to-RLOC mappings.<a class="pilcrow" href="#section-15-2.3">¶</a>
</li>
      </ul>
<p id="section-15-3">For performance issues related to Map-Cache management, see
        <a class="auto internal xref" href="#SECURITY">Section 16</a>.<a class="pilcrow" href="#section-15-3">¶</a></p>
</section>
</div>
<div id="SECURITY">
<section id="section-16">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-16">16. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-16-1">In what follows, we highlight security
  considerations that apply when LISP is deployed in environments such
  as those specified in <a class="auto internal xref" href="#soa">Section 1.1</a>.<a class="pilcrow" href="#section-16-1">¶</a></p>
<p id="section-16-2">The optional gleaning mechanism is offered to directly obtain
  a mapping from the LISP-encapsulated packets. Specifically, an xTR
  can learn the EID-to-RLOC mapping by inspecting the source RLOC and
  source EID of an encapsulated packet and insert this new mapping
  into its Map-Cache. An off-path attacker can spoof the source EID
  address to divert the traffic sent to the victim's spoofed EID. If
  the attacker spoofs the source RLOC, it can mount a DoS attack by
  redirecting traffic to the spoofed victim's RLOC, potentially
  overloading it.<a class="pilcrow" href="#section-16-2">¶</a></p>
<p id="section-16-3">The LISP data plane defines several mechanisms to monitor RLOC
  data plane reachability; in this context, Locator-Status-Bits,
  nonce-present bits, and Echo-Nonce bits of the LISP encapsulation header
  can be manipulated by an attacker to mount a DoS attack. An off-path
  attacker able to spoof the RLOC and/or nonce of a victim's xTR can
  manipulate such mechanisms to declare false information about the
  RLOC's reachability status.<a class="pilcrow" href="#section-16-3">¶</a></p>
<p id="section-16-4">An example of such attacks is when an off-path attacker can exploit the
  Echo-Nonce mechanism by sending data packets to an ITR with a random
  nonce from an ETR's spoofed RLOC. Note that the attacker only has a small window
  of time within which to guess a valid nonce that the ITR is requesting to be echoed. The goal is to convince the ITR that the ETR's RLOC is
  reachable even when it may not be reachable. If the attack is
  successful, the ITR believes the wrong reachability status of the
  ETR's RLOC until RLOC-Probing detects the correct status. This time
  frame is on the order of tens of seconds.  This specific attack can
  be mitigated by preventing RLOC spoofing in the network by deploying
  Unicast Reverse Path Forwarding (uRPF) per <span><a class="internal xref" href="#RFC8704">BCP 84</a> [<a class="cite xref" href="#RFC8704">RFC8704</a>]</span>. In order to exploit
  this vulnerability, the off-path attacker must also send Echo-Nonce
  packets at a high rate. If the nonces have never been requested by the
  ITR, it can protect itself from erroneous reachability attacks.<a class="pilcrow" href="#section-16-4">¶</a></p>
<p id="section-16-5">A LISP-specific uRPF check is also possible. When decapsulating,
    an ETR can check that the source EID and RLOC are valid EID-to-RLOC
    mappings by checking the Mapping System.<a class="pilcrow" href="#section-16-5">¶</a></p>
<p id="section-16-6">Map-Versioning is a data plane mechanism used to signal to a peering
  xTR that a local EID-to-RLOC mapping has been updated so that the
  peering xTR uses a LISP control plane signaling message to retrieve a
  fresh mapping.  This can be used by an attacker to forge the
  'Map-Version' field of a LISP-encapsulated header and force an
  excessive amount of signaling between xTRs that may overload them.
  Further security considerations on Map-Versioning can be found  in
      <span>[<a class="cite xref" href="#RFC9302">RFC9302</a>]</span>.<a class="pilcrow" href="#section-16-6">¶</a></p>
<p id="section-16-7">Locator-Status-Bits, the Echo-Nonce mechanism, and Map-Versioning <span class="bcp14">MUST NOT</span> be used
  over the public Internet and <span class="bcp14">SHOULD</span> only be used  in trusted
  and closed deployments. In addition, Locator-Status-Bits
  <span class="bcp14">SHOULD</span> be coupled with Map-Versioning to prevent race conditions
  where Locator-Status-Bits are interpreted as referring to different RLOCs than intended.<a class="pilcrow" href="#section-16-7">¶</a></p>
<p id="section-16-8">LISP implementations and deployments that permit outer header fragments
  of IPv6 LISP-encapsulated packets as a means of dealing with MTU issues
  should also use implementation techniques in ETRs to prevent this
  from being a DoS attack vector. Limits on the number of fragments
  awaiting reassembly at an ETR, RTR, or PETR, and the rate of admitting
  such fragments, may be used.<a class="pilcrow" href="#section-16-8">¶</a></p>
</section>
</div>
<section id="section-17">
      <h2 id="name-network-management-consider">
<a class="section-number selfRef" href="#section-17">17. </a><a class="section-name selfRef" href="#name-network-management-consider">Network Management Considerations</a>
      </h2>
<p id="section-17-1">Considerations for network management tools exist so the LISP
  protocol suite can be operationally managed.  These mechanisms can
  be found in <span>[<a class="cite xref" href="#RFC7052">RFC7052</a>]</span> and <span>[<a class="cite xref" href="#RFC6835">RFC6835</a>]</span>.<a class="pilcrow" href="#section-17-1">¶</a></p>
</section>
<section id="section-18">
      <h2 id="name-changes-since-rfc-6830">
<a class="section-number selfRef" href="#section-18">18. </a><a class="section-name selfRef" href="#name-changes-since-rfc-6830">Changes since RFC 6830</a>
      </h2>
<p id="section-18-1">For implementation considerations, the following changes have been made
  to this document since <span>[<a class="cite xref" href="#RFC6830">RFC6830</a>]</span> was published:<a class="pilcrow" href="#section-18-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-18-2.1">It is no longer mandated that a maximum number of 2 LISP
    headers be prepended to a packet. If there is an application need
    for more than 2 LISP headers, an implementation can support
    more. However, it is <span class="bcp14">RECOMMENDED</span> that a maximum of 2 LISP
    headers can be prepended to a packet.<a class="pilcrow" href="#section-18-2.1">¶</a>
</li>
        <li class="normal" id="section-18-2.2">The 3 reserved flag bits in the LISP header have been allocated
    for <span>[<a class="cite xref" href="#RFC8061">RFC8061</a>]</span>. The low-order 2 bits of the 3-bit
    field (now named the KK-bits) are used as a key identifier. The 1
    remaining bit is still documented as reserved and unassigned.<a class="pilcrow" href="#section-18-2.2">¶</a>
</li>
        <li class="normal" id="section-18-2.3">Data plane gleaning for creating Map-Cache entries has been
    made optional. Any ITR implementations that depend on or assume that the
    remote ETR is gleaning should not do so. This does not create any
    interoperability problems, since the control plane Map-Cache
    population procedures are unilateral and are the typical method
    for populating the Map-Cache.<a class="pilcrow" href="#section-18-2.3">¶</a>
</li>
        <li class="normal" id="section-18-2.4">Most of the changes to this document, which reduce its
    length, are due to moving the LISP control plane messaging and
    procedures to <span>[<a class="cite xref" href="#RFC9301">RFC9301</a>]</span>.<a class="pilcrow" href="#section-18-2.4">¶</a>
</li>
      </ul>
</section>
<div id="IANA">
<section id="section-19">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-19">19. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-19-1">This section provides guidance to the Internet Assigned Numbers
  Authority (IANA) regarding registration of values related to this
  data plane LISP specification, in accordance with <span><a class="internal xref" href="#RFC8126">BCP 26</a> [<a class="cite xref" href="#RFC8126">RFC8126</a>]</span>.<a class="pilcrow" href="#section-19-1">¶</a></p>
<section id="section-19.1">
        <h3 id="name-lisp-udp-port-numbers">
<a class="section-number selfRef" href="#section-19.1">19.1. </a><a class="section-name selfRef" href="#name-lisp-udp-port-numbers">LISP UDP Port Numbers</a>
        </h3>
<p id="section-19.1-1">IANA has allocated UDP port number 4341 for the
    LISP data plane. IANA has updated the description for UDP port
    4341 as follows:<a class="pilcrow" href="#section-19.1-1">¶</a></p>
<div id="iana-port-number">
<table class="center" id="table-1">
          <caption><a class="selfRef" href="#table-1">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">Service Name</th>
              <th class="text-left" colspan="1" rowspan="1">Port Number</th>
              <th class="text-left" colspan="1" rowspan="1">Transport Protocol</th>
              <th class="text-left" colspan="1" rowspan="1">Description</th>
              <th class="text-left" colspan="1" rowspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">lisp-data</td>
              <td class="text-left" colspan="1" rowspan="1">4341</td>
              <td class="text-left" colspan="1" rowspan="1">udp</td>
              <td class="text-left" colspan="1" rowspan="1">LISP Data Packets</td>
              <td class="text-left" colspan="1" rowspan="1">RFC 9300</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</section>
</div>
<section id="section-20">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-20">20. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-20.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-20.1">20.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC0768">[RFC0768]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"User Datagram Protocol"</span>, <span class="seriesInfo">STD 6</span>, <span class="seriesInfo">RFC 768</span>, <span class="seriesInfo">DOI 10.17487/RFC0768</span>, <time class="refDate" datetime="1980-08">August 1980</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc768">https://www.rfc-editor.org/info/rfc768</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC0791">[RFC0791]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Internet Protocol"</span>, <span class="seriesInfo">STD 5</span>, <span class="seriesInfo">RFC 791</span>, <span class="seriesInfo">DOI 10.17487/RFC0791</span>, <time class="refDate" datetime="1981-09">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc791">https://www.rfc-editor.org/info/rfc791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2474">[RFC2474]</dt>
        <dd>
<span class="refAuthor">Nichols, K.</span>, <span class="refAuthor">Blake, S.</span>, <span class="refAuthor">Baker, F.</span>, and <span class="refAuthor">D. Black</span>, <span class="refTitle">"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers"</span>, <span class="seriesInfo">RFC 2474</span>, <span class="seriesInfo">DOI 10.17487/RFC2474</span>, <time class="refDate" datetime="1998-12">December 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2474">https://www.rfc-editor.org/info/rfc2474</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2983">[RFC2983]</dt>
        <dd>
<span class="refAuthor">Black, D.</span>, <span class="refTitle">"Differentiated Services and Tunnels"</span>, <span class="seriesInfo">RFC 2983</span>, <span class="seriesInfo">DOI 10.17487/RFC2983</span>, <time class="refDate" datetime="2000-10">October 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2983">https://www.rfc-editor.org/info/rfc2983</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6040">[RFC6040]</dt>
        <dd>
<span class="refAuthor">Briscoe, B.</span>, <span class="refTitle">"Tunnelling of Explicit Congestion Notification"</span>, <span class="seriesInfo">RFC 6040</span>, <span class="seriesInfo">DOI 10.17487/RFC6040</span>, <time class="refDate" datetime="2010-11">November 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6040">https://www.rfc-editor.org/info/rfc6040</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6438">[RFC6438]</dt>
        <dd>
<span class="refAuthor">Carpenter, B.</span> and <span class="refAuthor">S. Amante</span>, <span class="refTitle">"Using the IPv6 Flow Label for Equal Cost Multipath Routing and Link Aggregation in Tunnels"</span>, <span class="seriesInfo">RFC 6438</span>, <span class="seriesInfo">DOI 10.17487/RFC6438</span>, <time class="refDate" datetime="2011-11">November 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6438">https://www.rfc-editor.org/info/rfc6438</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6830">[RFC6830]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Fuller, V.</span>, <span class="refAuthor">Meyer, D.</span>, and <span class="refAuthor">D. Lewis</span>, <span class="refTitle">"The Locator/ID Separation Protocol (LISP)"</span>, <span class="seriesInfo">RFC 6830</span>, <span class="seriesInfo">DOI 10.17487/RFC6830</span>, <time class="refDate" datetime="2013-01">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6830">https://www.rfc-editor.org/info/rfc6830</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6831">[RFC6831]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Meyer, D.</span>, <span class="refAuthor">Zwiebel, J.</span>, and <span class="refAuthor">S. Venaas</span>, <span class="refTitle">"The Locator/ID Separation Protocol (LISP) for Multicast Environments"</span>, <span class="seriesInfo">RFC 6831</span>, <span class="seriesInfo">DOI 10.17487/RFC6831</span>, <time class="refDate" datetime="2013-01">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6831">https://www.rfc-editor.org/info/rfc6831</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time class="refDate" datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8200">[RFC8200]</dt>
        <dd>
<span class="refAuthor">Deering, S.</span> and <span class="refAuthor">R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time class="refDate" datetime="2017-07">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8200">https://www.rfc-editor.org/info/rfc8200</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8378">[RFC8378]</dt>
        <dd>
<span class="refAuthor">Moreno, V.</span> and <span class="refAuthor">D. Farinacci</span>, <span class="refTitle">"Signal-Free Locator/ID Separation Protocol (LISP) Multicast"</span>, <span class="seriesInfo">RFC 8378</span>, <span class="seriesInfo">DOI 10.17487/RFC8378</span>, <time class="refDate" datetime="2018-05">May 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8378">https://www.rfc-editor.org/info/rfc8378</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8704">[RFC8704]</dt>
        <dd>
<span class="refAuthor">Sriram, K.</span>, <span class="refAuthor">Montgomery, D.</span>, and <span class="refAuthor">J. Haas</span>, <span class="refTitle">"Enhanced Feasible-Path Unicast Reverse Path Forwarding"</span>, <span class="seriesInfo">BCP 84</span>, <span class="seriesInfo">RFC 8704</span>, <span class="seriesInfo">DOI 10.17487/RFC8704</span>, <time class="refDate" datetime="2020-02">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8704">https://www.rfc-editor.org/info/rfc8704</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9301">[RFC9301]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Maino, F.</span>, <span class="refAuthor">Fuller, V.</span>, and <span class="refAuthor">A. Cabellos, Ed.</span>, <span class="refTitle">"Locator/ID Separation Protocol (LISP) Control Plane"</span>, <span class="seriesInfo">RFC 9301</span>, <span class="seriesInfo">DOI 10.17487/RFC9301</span>, <time class="refDate" datetime="2022-10">October 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9301">https://www.rfc-editor.org/info/rfc9301</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9302">[RFC9302]</dt>
      <dd>
<span class="refAuthor">Iannone, L.</span>, <span class="refAuthor">Saucez, D.</span>, and <span class="refAuthor">O. Bonaventure</span>, <span class="refTitle">"Locator/ID Separation Protocol (LISP) Map-Versioning"</span>, <span class="seriesInfo">RFC 9302</span>, <span class="seriesInfo">DOI 10.17487/RFC9302</span>, <time class="refDate" datetime="2022-10">October 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9302">https://www.rfc-editor.org/info/rfc9302</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-20.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-20.2">20.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="AFN">[AFN]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"Address Family Numbers"</span>, <span>&lt;<a href="http://www.iana.org/assignments/address-family-numbers">http://www.iana.org/assignments/address-family-numbers</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="CHIAPPA">[CHIAPPA]</dt>
        <dd>
<span class="refAuthor">Chiappa, J.</span>, <span class="refTitle">"Endpoints and Endpoint Names: A Proposed Enhancement to the Internet Architecture"</span>, <time class="refDate" datetime="1999">1999</time>, <span>&lt;<a href="http://mercury.lcs.mit.edu/~jnc/tech/endpoints.txt">http://mercury.lcs.mit.edu/~jnc/tech/endpoints.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-lisp-vpn">[LISP-VPN]</dt>
        <dd>
<span class="refAuthor">Moreno, V.</span> and <span class="refAuthor">D. Farinacci</span>, <span class="refTitle">"LISP Virtual Private Networks (VPNs)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lisp-vpn-10</span>, <time class="refDate" datetime="2022-10-03">3 October 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-lisp-vpn-10">https://datatracker.ietf.org/doc/html/draft-ietf-lisp-vpn-10</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1034">[RFC1034]</dt>
        <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - concepts and facilities"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1034</span>, <span class="seriesInfo">DOI 10.17487/RFC1034</span>, <time class="refDate" datetime="1987-11">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1034">https://www.rfc-editor.org/info/rfc1034</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1191">[RFC1191]</dt>
        <dd>
<span class="refAuthor">Mogul, J.</span> and <span class="refAuthor">S. Deering</span>, <span class="refTitle">"Path MTU discovery"</span>, <span class="seriesInfo">RFC 1191</span>, <span class="seriesInfo">DOI 10.17487/RFC1191</span>, <time class="refDate" datetime="1990-11">November 1990</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1191">https://www.rfc-editor.org/info/rfc1191</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2453">[RFC2453]</dt>
        <dd>
<span class="refAuthor">Malkin, G.</span>, <span class="refTitle">"RIP Version 2"</span>, <span class="seriesInfo">STD 56</span>, <span class="seriesInfo">RFC 2453</span>, <span class="seriesInfo">DOI 10.17487/RFC2453</span>, <time class="refDate" datetime="1998-11">November 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2453">https://www.rfc-editor.org/info/rfc2453</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2677">[RFC2677]</dt>
        <dd>
<span class="refAuthor">Greene, M.</span>, <span class="refAuthor">Cucchiara, J.</span>, and <span class="refAuthor">J. Luciani</span>, <span class="refTitle">"Definitions of Managed Objects for the NBMA Next Hop Resolution Protocol (NHRP)"</span>, <span class="seriesInfo">RFC 2677</span>, <span class="seriesInfo">DOI 10.17487/RFC2677</span>, <time class="refDate" datetime="1999-08">August 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2677">https://www.rfc-editor.org/info/rfc2677</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2784">[RFC2784]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Li, T.</span>, <span class="refAuthor">Hanks, S.</span>, <span class="refAuthor">Meyer, D.</span>, and <span class="refAuthor">P. Traina</span>, <span class="refTitle">"Generic Routing Encapsulation (GRE)"</span>, <span class="seriesInfo">RFC 2784</span>, <span class="seriesInfo">DOI 10.17487/RFC2784</span>, <time class="refDate" datetime="2000-03">March 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2784">https://www.rfc-editor.org/info/rfc2784</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3056">[RFC3056]</dt>
        <dd>
<span class="refAuthor">Carpenter, B.</span> and <span class="refAuthor">K. Moore</span>, <span class="refTitle">"Connection of IPv6 Domains via IPv4 Clouds"</span>, <span class="seriesInfo">RFC 3056</span>, <span class="seriesInfo">DOI 10.17487/RFC3056</span>, <time class="refDate" datetime="2001-02">February 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3056">https://www.rfc-editor.org/info/rfc3056</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3261">[RFC3261]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span>, <span class="refAuthor">Schulzrinne, H.</span>, <span class="refAuthor">Camarillo, G.</span>, <span class="refAuthor">Johnston, A.</span>, <span class="refAuthor">Peterson, J.</span>, <span class="refAuthor">Sparks, R.</span>, <span class="refAuthor">Handley, M.</span>, and <span class="refAuthor">E. Schooler</span>, <span class="refTitle">"SIP: Session Initiation Protocol"</span>, <span class="seriesInfo">RFC 3261</span>, <span class="seriesInfo">DOI 10.17487/RFC3261</span>, <time class="refDate" datetime="2002-06">June 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3261">https://www.rfc-editor.org/info/rfc3261</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4086">[RFC4086]</dt>
        <dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Schiller, J.</span>, and <span class="refAuthor">S. Crocker</span>, <span class="refTitle">"Randomness Requirements for Security"</span>, <span class="seriesInfo">BCP 106</span>, <span class="seriesInfo">RFC 4086</span>, <span class="seriesInfo">DOI 10.17487/RFC4086</span>, <time class="refDate" datetime="2005-06">June 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4086">https://www.rfc-editor.org/info/rfc4086</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4459">[RFC4459]</dt>
        <dd>
<span class="refAuthor">Savola, P.</span>, <span class="refTitle">"MTU and Fragmentation Issues with In-the-Network Tunneling"</span>, <span class="seriesInfo">RFC 4459</span>, <span class="seriesInfo">DOI 10.17487/RFC4459</span>, <time class="refDate" datetime="2006-04">April 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4459">https://www.rfc-editor.org/info/rfc4459</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4760">[RFC4760]</dt>
        <dd>
<span class="refAuthor">Bates, T.</span>, <span class="refAuthor">Chandra, R.</span>, <span class="refAuthor">Katz, D.</span>, and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"Multiprotocol Extensions for BGP-4"</span>, <span class="seriesInfo">RFC 4760</span>, <span class="seriesInfo">DOI 10.17487/RFC4760</span>, <time class="refDate" datetime="2007-01">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4760">https://www.rfc-editor.org/info/rfc4760</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4821">[RFC4821]</dt>
        <dd>
<span class="refAuthor">Mathis, M.</span> and <span class="refAuthor">J. Heffner</span>, <span class="refTitle">"Packetization Layer Path MTU Discovery"</span>, <span class="seriesInfo">RFC 4821</span>, <span class="seriesInfo">DOI 10.17487/RFC4821</span>, <time class="refDate" datetime="2007-03">March 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4821">https://www.rfc-editor.org/info/rfc4821</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4984">[RFC4984]</dt>
        <dd>
<span class="refAuthor">Meyer, D., Ed.</span>, <span class="refAuthor">Zhang, L., Ed.</span>, and <span class="refAuthor">K. Fall, Ed.</span>, <span class="refTitle">"Report from the IAB Workshop on Routing and Addressing"</span>, <span class="seriesInfo">RFC 4984</span>, <span class="seriesInfo">DOI 10.17487/RFC4984</span>, <time class="refDate" datetime="2007-09">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4984">https://www.rfc-editor.org/info/rfc4984</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6832">[RFC6832]</dt>
        <dd>
<span class="refAuthor">Lewis, D.</span>, <span class="refAuthor">Meyer, D.</span>, <span class="refAuthor">Farinacci, D.</span>, and <span class="refAuthor">V. Fuller</span>, <span class="refTitle">"Interworking between Locator/ID Separation Protocol (LISP) and Non-LISP Sites"</span>, <span class="seriesInfo">RFC 6832</span>, <span class="seriesInfo">DOI 10.17487/RFC6832</span>, <time class="refDate" datetime="2013-01">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6832">https://www.rfc-editor.org/info/rfc6832</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6835">[RFC6835]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span> and <span class="refAuthor">D. Meyer</span>, <span class="refTitle">"The Locator/ID Separation Protocol Internet Groper (LIG)"</span>, <span class="seriesInfo">RFC 6835</span>, <span class="seriesInfo">DOI 10.17487/RFC6835</span>, <time class="refDate" datetime="2013-01">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6835">https://www.rfc-editor.org/info/rfc6835</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6935">[RFC6935]</dt>
        <dd>
<span class="refAuthor">Eubanks, M.</span>, <span class="refAuthor">Chimento, P.</span>, and <span class="refAuthor">M. Westerlund</span>, <span class="refTitle">"IPv6 and UDP Checksums for Tunneled Packets"</span>, <span class="seriesInfo">RFC 6935</span>, <span class="seriesInfo">DOI 10.17487/RFC6935</span>, <time class="refDate" datetime="2013-04">April 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6935">https://www.rfc-editor.org/info/rfc6935</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6936">[RFC6936]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G.</span> and <span class="refAuthor">M. Westerlund</span>, <span class="refTitle">"Applicability Statement for the Use of IPv6 UDP Datagrams with Zero Checksums"</span>, <span class="seriesInfo">RFC 6936</span>, <span class="seriesInfo">DOI 10.17487/RFC6936</span>, <time class="refDate" datetime="2013-04">April 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6936">https://www.rfc-editor.org/info/rfc6936</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7052">[RFC7052]</dt>
        <dd>
<span class="refAuthor">Schudel, G.</span>, <span class="refAuthor">Jain, A.</span>, and <span class="refAuthor">V. Moreno</span>, <span class="refTitle">"Locator/ID Separation Protocol (LISP) MIB"</span>, <span class="seriesInfo">RFC 7052</span>, <span class="seriesInfo">DOI 10.17487/RFC7052</span>, <time class="refDate" datetime="2013-10">October 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7052">https://www.rfc-editor.org/info/rfc7052</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7215">[RFC7215]</dt>
        <dd>
<span class="refAuthor">Jakab, L.</span>, <span class="refAuthor">Cabellos-Aparicio, A.</span>, <span class="refAuthor">Coras, F.</span>, <span class="refAuthor">Domingo-Pascual, J.</span>, and <span class="refAuthor">D. Lewis</span>, <span class="refTitle">"Locator/Identifier Separation Protocol (LISP) Network Element Deployment Considerations"</span>, <span class="seriesInfo">RFC 7215</span>, <span class="seriesInfo">DOI 10.17487/RFC7215</span>, <time class="refDate" datetime="2014-04">April 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7215">https://www.rfc-editor.org/info/rfc7215</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8060">[RFC8060]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Meyer, D.</span>, and <span class="refAuthor">J. Snijders</span>, <span class="refTitle">"LISP Canonical Address Format (LCAF)"</span>, <span class="seriesInfo">RFC 8060</span>, <span class="seriesInfo">DOI 10.17487/RFC8060</span>, <time class="refDate" datetime="2017-02">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8060">https://www.rfc-editor.org/info/rfc8060</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8061">[RFC8061]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span> and <span class="refAuthor">B. Weis</span>, <span class="refTitle">"Locator/ID Separation Protocol (LISP) Data-Plane Confidentiality"</span>, <span class="seriesInfo">RFC 8061</span>, <span class="seriesInfo">DOI 10.17487/RFC8061</span>, <time class="refDate" datetime="2017-02">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8061">https://www.rfc-editor.org/info/rfc8061</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8085">[RFC8085]</dt>
        <dd>
<span class="refAuthor">Eggert, L.</span>, <span class="refAuthor">Fairhurst, G.</span>, and <span class="refAuthor">G. Shepherd</span>, <span class="refTitle">"UDP Usage Guidelines"</span>, <span class="seriesInfo">BCP 145</span>, <span class="seriesInfo">RFC 8085</span>, <span class="seriesInfo">DOI 10.17487/RFC8085</span>, <time class="refDate" datetime="2017-03">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8085">https://www.rfc-editor.org/info/rfc8085</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8201">[RFC8201]</dt>
        <dd>
<span class="refAuthor">McCann, J.</span>, <span class="refAuthor">Deering, S.</span>, <span class="refAuthor">Mogul, J.</span>, and <span class="refAuthor">R. Hinden, Ed.</span>, <span class="refTitle">"Path MTU Discovery for IP version 6"</span>, <span class="seriesInfo">STD 87</span>, <span class="seriesInfo">RFC 8201</span>, <span class="seriesInfo">DOI 10.17487/RFC8201</span>, <time class="refDate" datetime="2017-07">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8201">https://www.rfc-editor.org/info/rfc8201</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8899">[RFC8899]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G.</span>, <span class="refAuthor">Jones, T.</span>, <span class="refAuthor">Tüxen, M.</span>, <span class="refAuthor">Rüngeler, I.</span>, and <span class="refAuthor">T. Völker</span>, <span class="refTitle">"Packetization Layer Path MTU Discovery for Datagram Transports"</span>, <span class="seriesInfo">RFC 8899</span>, <span class="seriesInfo">DOI 10.17487/RFC8899</span>, <time class="refDate" datetime="2020-09">September 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8899">https://www.rfc-editor.org/info/rfc8899</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9299">[RFC9299]</dt>
      <dd>
<span class="refAuthor">Cabellos, A.</span> and <span class="refAuthor">D. Saucez, Ed.</span>, <span class="refTitle">"An Architectural Introduction to the Locator/ID Separation Protocol (LISP)"</span>, <span class="seriesInfo">RFC 9299</span>, <span class="seriesInfo">DOI 10.17487/RFC9299</span>, <time class="refDate" datetime="2022-10">October 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9299">https://www.rfc-editor.org/info/rfc9299</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a class="section-name selfRef" href="#name-acknowledgments">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">An initial thank you goes to <span class="contact-name">Dave Oran</span> for planting the seeds for
  the initial ideas for LISP. His consultation continues to provide
  value to the LISP authors.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<p id="appendix-A-2">A special and appreciative thank you goes to <span class="contact-name">Noel Chiappa</span> for
  providing architectural impetus over the past decades on separation
  of location and identity, as well as detailed reviews of the LISP
  architecture and documents, coupled with enthusiasm for making LISP
  a practical and incremental transition for the Internet.<a class="pilcrow" href="#appendix-A-2">¶</a></p>
<p id="appendix-A-3">The original authors would like to gratefully acknowledge many people who
  have contributed discussions and ideas to the making of this
  proposal.  They include <span class="contact-name">Scott Brim</span>, <span class="contact-name">Andrew Partan</span>, <span class="contact-name">John Zwiebel</span>,
  <span class="contact-name">Jason Schiller</span>, <span class="contact-name">Lixia Zhang</span>, <span class="contact-name">Dorian Kim</span>, <span class="contact-name">Peter Schoenmaker</span>, <span class="contact-name">Vijay   Gill</span>, <span class="contact-name">Geoff Huston</span>, <span class="contact-name">David Conrad</span>, <span class="contact-name">Mark Handley</span>, <span class="contact-name">Ron Bonica</span>, <span class="contact-name">Ted   Seely</span>, <span class="contact-name">Mark Townsley</span>, <span class="contact-name">Chris Morrow</span>, <span class="contact-name">Brian Weis</span>, <span class="contact-name">Dave McGrew</span>, <span class="contact-name">Peter   Lothberg</span>, <span class="contact-name">Dave Thaler</span>, <span class="contact-name">Eliot Lear</span>, <span class="contact-name">Shane Amante</span>, <span class="contact-name">Ved Kafle</span>, <span class="contact-name">Olivier   Bonaventure</span>, <span class="contact-name">Luigi Iannone</span>, <span class="contact-name">Robin Whittle</span>, <span class="contact-name">Brian Carpenter</span>, <span class="contact-name">Joel   Halpern</span>, <span class="contact-name">Terry Manderson</span>, <span class="contact-name">Roger Jorgensen</span>, <span class="contact-name">Ran Atkinson</span>, <span class="contact-name">Stig   Venaas</span>, <span class="contact-name">Iljitsch van Beijnum</span>, <span class="contact-name">Roland Bless</span>, <span class="contact-name">Dana Blair</span>, <span class="contact-name">Bill Lynch</span>,
  <span class="contact-name">Marc Woolward</span>, <span class="contact-name">Damien Saucez</span>, <span class="contact-name">Damian Lezama</span>, <span class="contact-name">Attilla De Groot</span>,
  <span class="contact-name">Parantap Lahiri</span>, <span class="contact-name">David Black</span>, <span class="contact-name">Roque Gagliano</span>, <span class="contact-name">Isidor Kouvelas</span>,
  <span class="contact-name">Jesper Skriver</span>, <span class="contact-name">Fred Templin</span>, <span class="contact-name">Margaret Wasserman</span>, <span class="contact-name">Sam Hartman</span>,
  <span class="contact-name">Michael Hofling</span>, <span class="contact-name">Pedro Marques</span>, <span class="contact-name">Jari Arkko</span>, <span class="contact-name">Gregg Schudel</span>, <span class="contact-name">Srinivas   Subramanian</span>, <span class="contact-name">Amit Jain</span>, <span class="contact-name">Xu Xiaohu</span>, <span class="contact-name">Dhirendra Trivedi</span>, <span class="contact-name">Yakov Rekhter</span>,
  <span class="contact-name">John Scudder</span>, <span class="contact-name">John Drake</span>, <span class="contact-name">Dimitri Papadimitriou</span>, <span class="contact-name">Ross Callon</span>, <span class="contact-name">Selina   Heimlich</span>, <span class="contact-name">Job Snijders</span>, <span class="contact-name">Vina Ermagan</span>, <span class="contact-name">Fabio Maino</span>, <span class="contact-name">Victor Moreno</span>,
  <span class="contact-name">Chris White</span>, <span class="contact-name">Clarence Filsfils</span>, <span class="contact-name">Alia Atlas</span>, <span class="contact-name">Florin Coras</span>, and <span class="contact-name">Alberto   Rodriguez</span>.<a class="pilcrow" href="#appendix-A-3">¶</a></p>
<p id="appendix-A-4">This work originated in the Routing Research Group (RRG) of the
  IRTF. An individual submission was converted into the IETF LISP
  Working Group document that became this RFC.<a class="pilcrow" href="#appendix-A-4">¶</a></p>
<p id="appendix-A-5">The LISP Working Group would like to give a special thanks to
  <span class="contact-name">Jari Arkko</span>, the Internet Area AD at the time that the set of LISP
  documents was being prepared for IESG Last Call, for his
  meticulous reviews and detailed commentaries on the 7 Working Group
  Last Call documents progressing toward Standards Track RFCs.<a class="pilcrow" href="#appendix-A-5">¶</a></p>
<p id="appendix-A-6">The current authors would like to give a sincere thank you to the
  people who helped put LISP on the Standards Track in the IETF.  They
  include <span class="contact-name">Joel Halpern</span>, <span class="contact-name">Luigi Iannone</span>, <span class="contact-name">Deborah Brungard</span>, <span class="contact-name">Fabio Maino</span>,
  <span class="contact-name">Scott Bradner</span>, <span class="contact-name">Kyle Rose</span>, <span class="contact-name">Takeshi Takahashi</span>, <span class="contact-name">Sarah Banks</span>, <span class="contact-name">Pete Resnick</span>,
  <span class="contact-name">Colin Perkins</span>, <span class="contact-name">Mirja Kühlewind</span>, <span class="contact-name">Francis Dupont</span>, <span class="contact-name">Benjamin Kaduk</span>, <span class="contact-name">Eric   Rescorla</span>, <span class="contact-name">Alvaro Retana</span>, <span class="contact-name">Alexey Melnikov</span>, <span class="contact-name">Alissa Cooper</span>, <span class="contact-name">Suresh   Krishnan</span>, <span class="contact-name">Alberto Rodriguez-Natal</span>, <span class="contact-name">Vina Ermagan</span>, <span class="contact-name">Mohamed Boucadair</span>,
  <span class="contact-name">Brian Trammell</span>, <span class="contact-name">Sabrina Tanamal</span>, and <span class="contact-name">John Drake</span>. The contributions
  they offered greatly added to the security, scale, and robustness of
  the LISP architecture and protocols.<a class="pilcrow" href="#appendix-A-6">¶</a></p>
</section>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Dino Farinacci</span></div>
<div class="left" dir="auto"><span class="org">lispers.net</span></div>
<div class="left" dir="auto">
<span class="locality">San Jose</span>, <span class="region">CA</span> </div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:farinacci@gmail.com">farinacci@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Vince Fuller</span></div>
<div class="left" dir="auto"><span class="org">vaf.net Internet Consulting</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:vince.fuller@gmail.com">vince.fuller@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Dave Meyer</span></div>
<div class="left" dir="auto"><span class="org">1-4-5.net</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:dmm@1-4-5.net">dmm@1-4-5.net</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Darrel Lewis</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems</span></div>
<div class="left" dir="auto">
<span class="locality">San Jose</span>, <span class="region">CA</span> </div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:darlewis@cisco.com">darlewis@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Albert Cabellos (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Universitat Politecnica de Catalunya</span></div>
<div class="left" dir="auto"><span class="street-address">c/ Jordi Girona s/n</span></div>
<div class="left" dir="auto">
<span class="postal-code">08034</span> <span class="locality">Barcelona</span> </div>
<div class="left" dir="auto"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:acabello@ac.upc.edu">acabello@ac.upc.edu</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>