<!DOCTYPE html>
<html class="BCP RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9599: Guidelines for Adding Congestion Notification to Protocols that Encapsulate IP</title>
<meta content="Bob Briscoe" name="author"/>
<meta content="John Kaippallimalil" name="author"/>
<meta content="
       The purpose of this document is to guide the design of congestion
      notification in any lower-layer or tunnelling protocol that encapsulates
      IP. The aim is for explicit congestion signals to propagate consistently
      from lower-layer protocols into IP. 
Then, the IP internetwork layer can act as a portability layer to carry
congestion notification from non-IP-aware congested nodes up to the transport
layer (L4). Specifications that follow these guidelines, whether produced by the
IETF or other standards bodies,  should assure interworking among IP-layer
and lower-layer congestion notification mechanisms.
This document is included in BCP 89 and updates the
single paragraph of advice to subnetwork designers about Explicit Congestion
Notification (ECN) in Section 13 of RFC 3819 by replacing it with a reference
to this document. 
    " name="description"/>
<meta content="xml2rfc 3.23.0" name="generator"/>
<meta content="Congestion Control and Management" name="keyword"/>
<meta content="Congestion Notification" name="keyword"/>
<meta content="Information Security" name="keyword"/>
<meta content="Tunnelling" name="keyword"/>
<meta content="Encapsulation" name="keyword"/>
<meta content="Decapsulation" name="keyword"/>
<meta content="Protocol" name="keyword"/>
<meta content="ECN" name="keyword"/>
<meta content="Layering" name="keyword"/>
<meta content="9599" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.23.0
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    platformdirs 3.8.0
    pycountry 22.3.5
    pydyf 0.10.0
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    wcwidth 0.2.5
    weasyprint 62.3
-->
<link href="rfc9599.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://datatracker.ietf.org/doc/draft-ietf-tsvwg-ecn-encap-guidelines-22" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9599" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9599</td>
<td class="center">ECN Encapsulation Guidelines</td>
<td class="right">August 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Briscoe &amp; Kaippallimalil</td>
<td class="center">Best Current Practice</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9599">9599</a></dd>
<dt class="label-bcp">BCP:</dt>
<dd class="bcp">89</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc3819">3819</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Best Current Practice</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2024-08">August 2024</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. Briscoe</div>
<div class="org">Independent</div>
</div>
<div class="author">
      <div class="author-name">J. Kaippallimalil</div>
<div class="org">Futurewei</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9599</h1>
<h1 id="title">Guidelines for Adding Congestion Notification to Protocols that Encapsulate IP</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">The purpose of this document is to guide the design of congestion
      notification in any lower-layer or tunnelling protocol that encapsulates
      IP. The aim is for explicit congestion signals to propagate consistently
      from lower-layer protocols into IP. 
Then, the IP internetwork layer can act as a portability layer to carry
congestion notification from non-IP-aware congested nodes up to the transport
layer (L4). Specifications that follow these guidelines, whether produced by the
IETF or other standards bodies,  should assure interworking among IP-layer
and lower-layer congestion notification mechanisms.
This document is included in BCP 89 and updates the
single paragraph of advice to subnetwork designers about Explicit Congestion
Notification (ECN) in Section 13 of RFC 3819 by replacing it with a reference
to this document.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This memo documents an Internet Best Current Practice.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further information
            on BCPs is available in Section 2 of RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9599">https://www.rfc-editor.org/info/rfc9599</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="auto internal xref" href="#section-1.1">1.1</a>.  <a class="internal xref" href="#name-update-to-rfc-3819">Update to RFC 3819</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p class="keepWithNext" id="section-toc.1-1.1.2.2.1"><a class="auto internal xref" href="#section-1.2">1.2</a>.  <a class="internal xref" href="#name-scope">Scope</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-terminology">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-modes-of-operation">Modes of Operation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="auto internal xref" href="#section-3.1">3.1</a>.  <a class="internal xref" href="#name-feed-forward-and-up-mode">Feed-Forward-and-Up Mode</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="auto internal xref" href="#section-3.2">3.2</a>.  <a class="internal xref" href="#name-feed-up-and-forward-mode">Feed-Up-and-Forward Mode</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="auto internal xref" href="#section-3.3">3.3</a>.  <a class="internal xref" href="#name-feed-backward-mode">Feed-Backward Mode</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a class="auto internal xref" href="#section-3.4">3.4</a>.  <a class="internal xref" href="#name-null-mode">Null Mode</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-feed-forward-and-up-mode-gu">Feed-Forward-and-Up Mode: Guidelines for Adding Congestion Notification</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="auto internal xref" href="#section-4.1">4.1</a>.  <a class="internal xref" href="#name-ip-in-ip-tunnels-with-shim-">IP-in-IP Tunnels with Shim Headers</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="auto internal xref" href="#section-4.2">4.2</a>.  <a class="internal xref" href="#name-wire-protocol-design-indica">Wire Protocol Design: Indication of ECN Support</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="auto internal xref" href="#section-4.3">4.3</a>.  <a class="internal xref" href="#name-encapsulation-guidelines">Encapsulation Guidelines</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a class="auto internal xref" href="#section-4.4">4.4</a>.  <a class="internal xref" href="#name-decapsulation-guidelines">Decapsulation Guidelines</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a class="auto internal xref" href="#section-4.5">4.5</a>.  <a class="internal xref" href="#name-sequences-of-similar-tunnel">Sequences of Similar Tunnels or Subnets</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a class="auto internal xref" href="#section-4.6">4.6</a>.  <a class="internal xref" href="#name-reframing-and-congestion-ma">Reframing and Congestion Markings</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-feed-up-and-forward-mode-gu">Feed-Up-and-Forward Mode: Guidelines for Adding Congestion Notification</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-feed-backward-mode-guidelin">Feed-Backward Mode: Guidelines for Adding Congestion Notification</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#section-9">9</a>.  <a class="internal xref" href="#name-conclusions">Conclusions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#section-10">10</a>. <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="auto internal xref" href="#section-10.1">10.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a class="auto internal xref" href="#section-10.2">10.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="auto internal xref" href="#appendix-A"></a><a class="internal xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-contributors">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="auto internal xref" href="#appendix-C"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="ecnencap_Introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">In certain networks, it might be possible for traffic to congest non-IP-aware nodes.
      In such networks, the benefits of Explicit Congestion Notification (ECN) described in
      <span>[<a class="cite xref" href="#RFC8087">RFC8087</a>]</span> and summarized below can only be fully realized
      if support for congestion notification is added to the relevant subnetwork technology, as
      well as to IP. When a lower-layer buffer implicitly notifies congestion by dropping a packet, it obviously 
      does not just drop at that layer; the packet disappears from all layers.
      In contrast, when active queue management (AQM) at a lower layer buffer explicitly notifies congestion
      by marking a frame header, the marking needs to be explicitly propagated up the
      layers. The same is true if AQM marks the outer header of a packet that
      encapsulates inner tunnelled headers. Forwarding ECN is not as
      straightforward as other headers because it has to be assumed ECN may be
      only partially deployed. If a lower-layer header that contains
      congestion indications is stripped off by a subnet egress that is not
      ECN-aware, or if the ultimate receiver or sender is not ECN-aware,
      congestion needs to be indicated by dropping the packet, not marking
      it.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">The purpose of this document is to guide the addition of congestion
      notification to any subnet technology or tunnelling protocol so that
      lower-layer AQM algorithms can signal congestion explicitly and that signal will
      propagate consistently into encapsulated (higher-layer) headers.
      Otherwise, the signals will not reach their ultimate destination.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">ECN is defined in the IP header (IPv4 and IPv6) <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>
      to allow a resource to notify the onset of queue buildup without having
      to drop packets by explicitly marking a proportion of packets with the
      congestion experienced (CE) codepoint.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">Given a suitable marking scheme, ECN removes nearly all congestion
      loss and it cuts delays for two main reasons:<a class="pilcrow" href="#section-1-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-5.1">It avoids the delay when recovering from congestion losses, which
          particularly benefits small flows or real-time flows, making their
          delivery time predictably short <span>[<a class="cite xref" href="#RFC2884">RFC2884</a>]</span>.<a class="pilcrow" href="#section-1-5.1">¶</a>
</li>
        <li class="normal" id="section-1-5.2">As ECN is used more widely by end systems, it will gradually
          remove the need to configure a degree of delay into buffers before
          they start to notify congestion (the cause of bufferbloat). 

This is
          because drop involves a trade-off between sending a timely signal
          and trying to avoid impairment, whereas ECN is solely a signal and not
          an impairment, so there is no harm triggering it earlier.<a class="pilcrow" href="#section-1-5.2">¶</a>
</li>
      </ul>
<p id="section-1-6">Some lower-layer technologies (e.g., MPLS, Ethernet) are used to form
      subnetworks with IP-aware nodes only at the edges. These networks are
      often sized so that it is rare for interior queues to overflow. However,
      until recently, this was more due to the inability of TCP to saturate the
      links. For many years, fixes such as window scaling <span>[<a class="cite xref" href="#RFC7323">RFC7323</a>]</span> proved hard to deploy and the Reno variant of TCP
      remained in widespread use despite its inability to scale to high
      flow rates. However, now that modern operating systems are finally
      capable of saturating interior links, even the buffers of
      well-provisioned interior switches will need to signal episodes of
      queuing.<a class="pilcrow" href="#section-1-6">¶</a></p>
<p id="section-1-7">Propagation of ECN is defined for MPLS <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span> and TRILL <span>[<a class="cite xref" href="#RFC7780">RFC7780</a>]</span> <span>[<a class="cite xref" href="#RFC9600">RFC9600</a>]</span>, but it has yet to be defined for
      a number of other subnetwork technologies.<a class="pilcrow" href="#section-1-7">¶</a></p>
<p id="section-1-8">Similarly, ECN propagation is yet to be defined for many tunnelling
      protocols. <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> defines how ECN
      should be propagated for IP-in-IPv4 <span>[<a class="cite xref" href="#RFC2003">RFC2003</a>]</span>, IP-in-IPv6 <span>[<a class="cite xref" href="#RFC2473">RFC2473</a>]</span>, and IPsec <span>[<a class="cite xref" href="#RFC4301">RFC4301</a>]</span>
      tunnels, but there are numerous other tunnelling protocols with a shim
      and/or a Layer 2 (L2) header between two IP headers (IPv4 or IPv6). Some
      address ECN propagation between the IP headers, but many do not. This
      document gives guidance on how to address ECN propagation for future
      tunnelling protocols, and a companion Standards Track specification
      <span>[<a class="cite xref" href="#RFC9601">RFC9601</a>]</span> updates existing tunnelling
      protocols with a shim between IP headers that are under IETF change
      control and still widely used.<a class="pilcrow" href="#section-1-8">¶</a></p>
<p id="section-1-9">Incremental deployment is the most delicate aspect when adding
      support for ECN. The original ECN protocol in IP <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span> was carefully designed so that a congested buffer
      would not mark a packet (rather than drop it) unless both source and
      destination hosts were ECN-capable. Otherwise, its congestion markings
      would never be detected and congestion would just build up further.
      However, to support congestion marking below the IP layer or within
      tunnels, it is not sufficient to only check that the two layer 4 
      transport endpoints support ECN; correct operation also depends on the
      decapsulator at each subnet or tunnel egress faithfully propagating
      congestion notification to the higher layer. 
Otherwise, a legacy decapsulator might silently fail to propagate any congestion
signals from the outer header to the forwarded header. Then, the lost signals would
never be detected and congestion would build up further. The guidelines given
later require protocol designers to carefully consider incremental deployment
and suggest various safe approaches for different circumstances.<a class="pilcrow" href="#section-1-9">¶</a></p>
<p id="section-1-10">Of
course, the IETF does not have standards authority over every link-layer
protocol; thus, this document gives guidelines for designing propagation of
congestion notification across the interface between IP and protocols that may
encapsulate IP (i.e., that can be layered beneath IP). Each lower-layer
technology will exhibit different issues and compromises, so the IETF or the
relevant standards body must be free to define the specifics of each lower-layer congestion notification scheme.  Nonetheless, if the guidelines are
followed, congestion notification should interwork between different
technologies using IP in its role as a 'portability layer'.<a class="pilcrow" href="#section-1-10">¶</a></p>
<p id="section-1-11">Therefore, the capitalized terms '<span class="bcp14">SHOULD</span>' or '<span class="bcp14">SHOULD NOT</span>' are often
      used in preference to '<span class="bcp14">MUST</span>' or '<span class="bcp14">MUST NOT</span>' because it is difficult to
      know the compromises that will be necessary in each protocol design. If
      a particular protocol design chooses not to follow a '<span class="bcp14">SHOULD</span>' or '<span class="bcp14">SHOULD NOT</span>'
      given in the advice below, it <span class="bcp14">MUST</span> include a sound justification.<a class="pilcrow" href="#section-1-11">¶</a></p>
<p id="section-1-12">It has not been possible to give common guidelines for all
      lower-layer technologies because they do not all fit a common pattern.
Instead, they have been divided into a few distinct modes of
      operation: feed-forward-and-up, feed-up-and-forward,
      feed-backward, and null mode. These modes are described in <a class="auto internal xref" href="#ecnencap_Modes">Section 3</a>, and separate guidelines are
      given for each mode in subsequent sections.<a class="pilcrow" href="#section-1-12">¶</a></p>
<section id="section-1.1">
        <h3 id="name-update-to-rfc-3819">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-update-to-rfc-3819">Update to RFC 3819</a>
        </h3>
<p id="section-1.1-1">This document updates the brief advice to subnetwork designers
        about ECN in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc3819#section-13">Section 13</a> of [<a class="cite xref" href="#RFC3819">RFC3819</a>]</span> by adding this document (RFC 9599) as an informative reference and replacing the
        last two paragraphs with the following sentence:<a class="pilcrow" href="#section-1.1-1">¶</a></p>
<blockquote id="section-1.1-2">
            By following the guidelines in [RFC9599], subnetwork
            designers can enable a layer-2 protocol to participate in
            congestion control without dropping packets via propagation of
            Explicit Congestion Notification (ECN) <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span> to
            receivers.<a class="pilcrow" href="#section-1.1-2">¶</a>
</blockquote>
</section>
<div id="ecnencap_Scope">
<section id="section-1.2">
        <h3 id="name-scope">
<a class="section-number selfRef" href="#section-1.2">1.2. </a><a class="section-name selfRef" href="#name-scope">Scope</a>
        </h3>
<p id="section-1.2-1">This document only concerns wire protocol processing of explicit
        notification of congestion. It makes no changes or recommendations
        concerning algorithms for congestion marking or congestion
        response because algorithm issues should be independent of the layer
        that the algorithm operates in.<a class="pilcrow" href="#section-1.2-1">¶</a></p>
<p id="section-1.2-2">The default ECN semantics are described in <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>
        and updated by <span>[<a class="cite xref" href="#RFC8311">RFC8311</a>]</span>. Also, the guidelines for AQM
        designers <span>[<a class="cite xref" href="#RFC7567">RFC7567</a>]</span> clarify the semantics of both drop
        and ECN signals from AQM algorithms. <span>[<a class="cite xref" href="#RFC4774">RFC4774</a>]</span> is the
        appropriate best current practice specification of how algorithms with
        alternative semantics for the ECN field can be partitioned from
        Internet traffic that uses the default ECN semantics. There are two
        main examples for how alternative ECN semantics have been defined in
        practice:<a class="pilcrow" href="#section-1.2-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-3.1">
            <span>[<a class="cite xref" href="#RFC4774">RFC4774</a>]</span> suggests using the ECN field in combination with a
            Diffserv codepoint, such as in Pre-Congestion Notification (PCN) <span>[<a class="cite xref" href="#RFC6660">RFC6660</a>]</span>, Voice
            over 3G <span>[<a class="cite xref" href="#UTRAN">UTRAN</a>]</span>, or Voice over LTE (VoLTE) <span>[<a class="cite xref" href="#LTE-RA">LTE-RA</a>]</span>.<a class="pilcrow" href="#section-1.2-3.1">¶</a>
</li>
          <li class="normal" id="section-1.2-3.2">
            <span>[<a class="cite xref" href="#RFC8311">RFC8311</a>]</span> suggests using the ECT(1) codepoint of the ECN field
            to indicate alternative semantics, such as for the experimental Low
            Latency, Low Loss, and Scalable throughput (L4S) service <span>[<a class="cite xref" href="#RFC9331">RFC9331</a>]</span>.<a class="pilcrow" href="#section-1.2-3.2">¶</a>
</li>
        </ul>
<p id="section-1.2-4">The aim is that the default rules for encapsulating and
        decapsulating the ECN field are sufficiently generic that tunnels and
        subnets will encapsulate and decapsulate packets without regard to how
        algorithms elsewhere are setting or interpreting the semantics of the
        ECN field. <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> updates <span>[<a class="cite xref" href="#RFC4774">RFC4774</a>]</span> to allow
        alternative encapsulation and decapsulation behaviours to be defined
        for alternative ECN semantics. However, it reinforces the same point --
        it is far preferable to try to fit within the common ECN
        encapsulation and decapsulation behaviours because expecting all
        lower-layer technologies and tunnels to be updated is likely to be
        completely impractical.<a class="pilcrow" href="#section-1.2-4">¶</a></p>
<p id="section-1.2-5">Alternative semantics for the ECN field can be defined to depend on
        the traffic class indicated by the Differentiated Services Code Point (DSCP). Therefore, correct propagation
        of congestion signals could depend on correct propagation of the DSCP
        between the layers and along the path. For instance, if the meaning of
        the ECN field depends on the DSCP (as in PCN or VoLTE) and the
        outer DSCP is stripped on descapsulation, as in the pipe model of
        <span>[<a class="cite xref" href="#RFC2983">RFC2983</a>]</span>, the special semantics of the ECN field would
        be lost. Similarly, if the DSCP is changed at the boundary between
        Diffserv domains, the special ECN semantics would also be lost. This
        is an important implication of the localized scope of most Diffserv
        arrangements. In this document, correct propagation of traffic class
        information is assumed while the meaning of 'correct' and how it is
        achieved is covered elsewhere (e.g., <span>[<a class="cite xref" href="#RFC2983">RFC2983</a>]</span>) and is outside the scope
        of this document.<a class="pilcrow" href="#section-1.2-5">¶</a></p>
<p id="section-1.2-6">The guidelines in this document do ensure that common encapsulation
        and decapsulation rules are sufficiently generic to cover cases where
        ECT(1) is used instead of ECT(0) to identify alternative ECN semantics
        (as in L4S <span>[<a class="cite xref" href="#RFC9331">RFC9331</a>]</span>) and where ECN-marking algorithms
        use ECT(1) to encode three severity levels into the ECN field (e.g., PCN
        <span>[<a class="cite xref" href="#RFC6660">RFC6660</a>]</span>) rather than the default of two. All these
        different semantics for the ECN field work because it has been
        possible to define common default decapsulation rules that allow for
        all cases <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>.<a class="pilcrow" href="#section-1.2-6">¶</a></p>
<p id="section-1.2-7">Note that the guidelines in this document do not necessarily
        require the subnet wire protocol to be changed to add support for
        congestion notification. For instance, the feed-up-and-forward mode
        (<a class="auto internal xref" href="#ecnencap_Up">Section 3.2</a>) and the null mode (<a class="auto internal xref" href="#ecnencap_Null">Section 3.4</a>) do not. Another way to add congestion
        notification without consuming header space in the subnet protocol
        might be to use a parallel control plane protocol.<a class="pilcrow" href="#section-1.2-7">¶</a></p>
<p id="section-1.2-8">This document focuses on the congestion notification interface
        between IP and lower-layer or tunnel protocols that can encapsulate
        IP, where the term 'IP' includes IPv4 or IPv6, unicast, multicast, or
        anycast. 
However, it is likely that the guidelines will also be useful
        when a lower-layer protocol or tunnel encapsulates itself, e.g.,
        Ethernet Media Access Control (MAC) in MAC (<span>[<a class="cite xref" href="#IEEE802.1Q">IEEE802.1Q</a>]</span>; previously 802.1ah),
        or when it encapsulates other protocols. In the feed-backward mode,
        propagation of congestion signals for multicast and anycast packets is
        out of scope (because the complexity would make it unlikely to be
        attempted).<a class="pilcrow" href="#section-1.2-8">¶</a></p>
</section>
</div>
</section>
</div>
<div id="ecnencap_Reqs_Language">
<section id="section-2">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>",
      "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>", "<span class="bcp14">MAY</span>", and
      "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as described in
      BCP 14 <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span>
        <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> when, and only when, they
      appear in all capitals, as shown here.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">Further terminology used within this document:<a class="pilcrow" href="#section-2-2">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-3">
        <dt id="section-2-3.1">Protocol data unit (PDU):</dt>
        <dd id="section-2-3.2" style="margin-left: 1.5em">Information that is
          delivered as a unit among peer entities of a layered network
          consisting of protocol control information (typically a header) and
          possibly user data (payload) of that layer. The scope of this
          document includes Layer 2 and Layer 3 networks, where the PDU is
          respectively termed a frame or a packet (or a cell in ATM). PDU is a
          general term for any of these. This definition also includes a
          payload with a shim header lying somewhere between layer 2 and
          3.<a class="pilcrow" href="#section-2-3.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.3">Transport:</dt>
        <dd id="section-2-3.4" style="margin-left: 1.5em">The end-to-end transmission control function, conventionally
        considered at layer 4 in the OSI reference model. Given the audience
        for this document will often use the word transport to mean low-level
        bit carriage, the term will be qualified whenever it is used,
        e.g., 'L4 transport'.<a class="pilcrow" href="#section-2-3.4">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.5">Encapsulator:</dt>
        <dd id="section-2-3.6" style="margin-left: 1.5em">The link or tunnel endpoint function
          that adds an outer header to a PDU (also termed the 'link ingress',
          the 'subnet ingress', the 'ingress tunnel endpoint', or just the
          'ingress' where the context is clear).<a class="pilcrow" href="#section-2-3.6">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.7">Decapsulator:</dt>
        <dd id="section-2-3.8" style="margin-left: 1.5em">The link or tunnel endpoint function
          that removes an outer header from a PDU (also termed the 'link
          egress', the 'subnet egress', the 'egress tunnel endpoint', or just
          the 'egress' where the context is clear).<a class="pilcrow" href="#section-2-3.8">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.9">Incoming header:</dt>
        <dd id="section-2-3.10" style="margin-left: 1.5em">The header of an arriving PDU before
          encapsulation.<a class="pilcrow" href="#section-2-3.10">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.11">Outer header:</dt>
        <dd id="section-2-3.12" style="margin-left: 1.5em">The header added to encapsulate a
          PDU.<a class="pilcrow" href="#section-2-3.12">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.13">Inner header:</dt>
        <dd id="section-2-3.14" style="margin-left: 1.5em">The header encapsulated by the outer
          header.<a class="pilcrow" href="#section-2-3.14">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.15">Outgoing header:</dt>
        <dd id="section-2-3.16" style="margin-left: 1.5em">The header forwarded by the
          decapsulator.<a class="pilcrow" href="#section-2-3.16">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.17">CE:</dt>
        <dd id="section-2-3.18" style="margin-left: 1.5em">Congestion Experienced <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span><a class="pilcrow" href="#section-2-3.18">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.19">ECT:</dt>
        <dd id="section-2-3.20" style="margin-left: 1.5em">ECN-Capable (L4) Transport <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span><a class="pilcrow" href="#section-2-3.20">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.21">Not-ECT:</dt>
        <dd id="section-2-3.22" style="margin-left: 1.5em">Not ECN-Capable (L4) Transport <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span><a class="pilcrow" href="#section-2-3.22">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.23">Load Regulator:</dt>
        <dd id="section-2-3.24" style="margin-left: 1.5em">For each flow of PDUs, the transport function that is capable of
        controlling the data rate. Typically located at the data source, but
        in-path nodes can regulate load in some congestion control
        arrangements (e.g., admission control, policing nodes, or transport
        circuit-breakers <span>[<a class="cite xref" href="#RFC8084">RFC8084</a>]</span>). Note that
        "a function capable of controlling the load" deliberately
        includes a transport that does not actually control the load
        responsively, but ideally it ought to (e.g., a sending application
        without congestion control that uses UDP).<a class="pilcrow" href="#section-2-3.24">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.25">ECN-PDU:</dt>
        <dd id="section-2-3.26" style="margin-left: 1.5em">A PDU at the IP layer or below with a
          capacity to signal congestion that is part of a congestion control
          feedback loop within which all the nodes necessary to propagate the
          signal back to the Load Regulator are capable of doing that
          propagation. An IP packet with a non-zero ECN field implies that the
          endpoints are ECN-capable, so this would be an ECN-PDU. However,
          ECN-PDU is intended to be a general term for a PDU at lower layers,
          as well as at the IP layer.<a class="pilcrow" href="#section-2-3.26">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-3.27">Not-ECN-PDU:</dt>
        <dd id="section-2-3.28" style="margin-left: 1.5em">A PDU at the IP layer or below that is
          part of a congestion control feedback loop that is not capable of
          propagating ECN signals back to the Load
          Regulator because at least one of the nodes necessary to propagate
          the signals is incapable of doing that propagation. Note that this
          definition is a property of the feedback loop, not necessarily of the
          PDU itself; certainly the PDU will self-describe the
          property in some protocols, but in others, the property might be carried in a separate
          control plane context (which is somehow bound to the PDU).<a class="pilcrow" href="#section-2-3.28">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="ecnencap_Modes">
<section id="section-3">
      <h2 id="name-modes-of-operation">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-modes-of-operation">Modes of Operation</a>
      </h2>
<p id="section-3-1">This section sets down the different modes by which congestion
      information is passed between the lower layer and the higher one. It
      acts as a reference framework for the subsequent sections that give
      normative guidelines for designers of congestion notification protocols, taking each mode in
      turn:<a class="pilcrow" href="#section-3-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3-2">
        <dt id="section-3-2.1">Feed-Forward-and-Up:</dt>
        <dd id="section-3-2.2" style="margin-left: 1.5em">
          <p id="section-3-2.2.1">Nodes feed forward congestion
          notification towards the egress within the lower layer, then up and
          along the layers towards the end-to-end destination at the transport
          layer. The following local optimization is possible:<a class="pilcrow" href="#section-3-2.2.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3-2.2.2">
            <dt id="section-3-2.2.2.1">Feed-Up-and-Forward:</dt>
            <dd id="section-3-2.2.2.2" style="margin-left: 1.5em">A lower-layer switch feeds up
              congestion notification directly into the higher layer (e.g.,
              into the ECN field in the IP header), irrespective of whether
              the node is at the egress of a subnet.<a class="pilcrow" href="#section-3-2.2.2.2">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</dd>
        <dd class="break"></dd>
<dt id="section-3-2.3">Feed-Backward:</dt>
        <dd id="section-3-2.4" style="margin-left: 1.5em">Nodes feed back congestion signals
          towards the ingress of the lower layer and (optionally) attempt to
          control congestion within their own layer.<a class="pilcrow" href="#section-3-2.4">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-3-2.5">Null:</dt>
        <dd id="section-3-2.6" style="margin-left: 1.5em">Nodes cannot experience congestion at the lower
          layer except at the ingress nodes of the subnet (which are IP-aware or equivalently
          higher-layer-aware).<a class="pilcrow" href="#section-3-2.6">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<div id="ecnencap_Forward">
<section id="section-3.1">
        <h3 id="name-feed-forward-and-up-mode">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-feed-forward-and-up-mode">Feed-Forward-and-Up Mode</a>
        </h3>
<p id="section-3.1-1">Like IP and MPLS, many subnet technologies are based on
        self-contained PDUs or frames sent unreliably.
        They provide no feedback channel at the subnetwork layer, instead
        relying on higher layers (e.g., TCP) to feed back loss signals.<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<p id="section-3.1-2">In these cases, ECN may best be supported by standardising explicit
        notification of congestion into the lower-layer protocol that carries
        the data forwards. Then, a specification is needed for how the egress
        of the lower-layer subnet propagates this explicit signal into the
        forwarded upper-layer (IP) header. This signal continues forwards
        until it finally reaches the destination transport (at L4). 
        Typically, the destination will feed this congestion notification back
        to the source transport using an end-to-end protocol (e.g., TCP). This
        is the arrangement that has already been used to add ECN to IP-in-IP
        tunnels <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>, IP-in-MPLS, and MPLS-in-MPLS <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span>.<a class="pilcrow" href="#section-3.1-2">¶</a></p>
<p id="section-3.1-3">This mode is illustrated in <a class="auto internal xref" href="#ecnencap_Fig_Feed-Forward-and-Up">Figure 1</a>. Along the middle of the
        figure, layers 2, 3, and 4 of the protocol stack are shown. One
        packet is shown along the bottom as it progresses across the network
        from source to destination, crossing two subnets connected by a
        router and crossing two switches on the path across each subnet.
        Congestion at the output of the first switch (shown as *) leads to a
        congestion marking in the L2 header (shown as C in the illustration of
        the packet). The chevrons show the progress of the resulting
        congestion indication. It is propagated from link to link across the
        subnet in the L2 header. Then, when the router removes the marked L2
        header, it propagates the marking up into the L3 (IP) header. The
        router forwards the marked L3 header into subnet B. The L2 protocol used
        in subnet B does not support congestion notification, but the signal proceeds across it in
        the L3 header.<a class="pilcrow" href="#section-3.1-3">¶</a></p>
<p id="section-3.1-4">Note that there is no implication that each 'C' marking is encoded
        the same; a different encoding might be used for the 'C' marking in
        each protocol.<a class="pilcrow" href="#section-3.1-4">¶</a></p>
<p id="section-3.1-5">Finally, for completeness, we show the L3 marking arriving at the
        destination, where the host transport protocol (e.g., TCP) feeds it
        back to the source in the L4 acknowledgement (the 'C' at L4 in the
        packet at the top of the diagram).<a class="pilcrow" href="#section-3.1-5">¶</a></p>
<span id="name-feed-forward-and-up-mode-2"></span><div id="ecnencap_Fig_Feed-Forward-and-Up">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-3.1-6.1">
<pre>                    _ _ _
         /_______  | | |C|  ACK Packet (V)
         \         |_|_|_|
+---+        layer: 2 3 4 header                            +---+
|  &lt;|&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Packet V &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;|&lt;&lt; |L4
|   |                         +---+                         | ^ |
|   | . . . . . . Packet U. . | &gt;&gt;|&gt;&gt;&gt; Packet U &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;|&gt;^ |L3
|   |     +---+     +---+     | ^ |     +---+     +---+     |   |
|   |     |  *|&gt;&gt;&gt;&gt;&gt;|&gt;&gt;&gt;|&gt;&gt;&gt;&gt;&gt;|&gt;^ |     |   |     |   |     |   |L2
|___|_____|___|_____|___|_____|___|_____|___|_____|___|_____|___|
source          subnet A      router       subnet B         dest
   __ _ _ _|   __ _ _ _|  __ _ _|       __ _ _ _|
  |  | | | |  |  | | |C| |  | |C|      |  | |C| |    Data________\
  |__|_|_|_|  |__|_|_|_| |__|_|_|      |__|_|_|_|    Packet (U)  /
layer:4 3 2A      4 3 2A     4 3           4 3 2B
header
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-feed-forward-and-up-mode-2">Feed-Forward-and-Up Mode</a>
          </figcaption></figure>
</div>
<p id="section-3.1-7">Of course, modern networks are rarely as simple as this textbook
        example, often involving multiple nested layers. For example, a Third
        Generation Partnership Project (3GPP) mobile network may have two
        IP-in-IP GTP <span>[<a class="cite xref" href="#GTPv1">GTPv1</a>]</span> tunnels in
        series and an MPLS backhaul between the base station and the first
        router. Nonetheless, the example illustrates the general idea of
        feeding congestion notification forward then upward whenever a header
        is removed at the egress of a subnet.<a class="pilcrow" href="#section-3.1-7">¶</a></p>
<p id="section-3.1-8">Note that the Forward Explicit Congestion Notification (FECN) bit in Frame Relay <span>[<a class="cite xref" href="#Buck00">Buck00</a>]</span> and the Explicit Forward Congestion Indication (EFCI)
        <span>[<a class="cite xref" href="#ITU-T.I.371">ITU-T.I.371</a>]</span> bit in ATM user data cells follow a
        feed-forward pattern. 
However, in ATM, this arrangement is only part
        of a feed-forward-and-backward pattern at the lower layer, not
        feed-forward-and-up out of the lower layer -- the intention was
        never to interface with IP-ECN at the subnet egress.
To our knowledge,
        Frame Relay FECN is solely used by network operators to detect where they 
        should provision more capacity.<a class="pilcrow" href="#section-3.1-8">¶</a></p>
</section>
</div>
<div id="ecnencap_Up">
<section id="section-3.2">
        <h3 id="name-feed-up-and-forward-mode">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-feed-up-and-forward-mode">Feed-Up-and-Forward Mode</a>
        </h3>
<p id="section-3.2-1">Ethernet is particularly difficult to extend incrementally to
        support congestion notification. One way is to use so-called
        'Layer 3 switches'. These are Ethernet switches that dig into the
        Ethernet payload to find an IP header and manipulate or act on certain
        IP fields (specifically Diffserv and ECN). For instance, in Data
        Center TCP <span>[<a class="cite xref" href="#RFC8257">RFC8257</a>]</span>, Layer 3 switches
        are configured to mark the ECN field of the IP header within the
        Ethernet payload when their output buffer becomes congested. With
        respect to switching, a Layer 3 switch acts solely on the addresses in
        the Ethernet header; it does not use IP addresses and it does not
        decrement the TTL field in the IP header.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<span id="name-feed-up-and-forward-mode-2"></span><div id="ecnencap_Fig_Feed-Up">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-3.2-2.1">
<pre>                    _ _ _
         /_______  | | |C|  ACK packet (V)
         \         |_|_|_|
+---+        layer: 2 3 4 header                            +---+
|  &lt;|&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Packet V &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;|&lt;&lt; |L4
|   |                         +---+                         | ^ |
|   | . . .  &gt;&gt;&gt;&gt; Packet U &gt;&gt;&gt;|&gt;&gt;&gt;|&gt;&gt;&gt; Packet U &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;|&gt;^ |L3
|   |     +--^+     +---+     |  v|     +---+     +---+     | ^ |
|   |     |  *|     |   |     |  &gt;|&gt;&gt;&gt;&gt;&gt;|&gt;&gt;&gt;|&gt;&gt;&gt;&gt;&gt;|&gt;&gt;&gt;|&gt;&gt;&gt;&gt;&gt;|&gt;^ |L2
|___|_____|___|_____|___|_____|___|_____|___|_____|___|_____|___|
source          subnet E      router       subnet F         dest
   __ _ _ _|   __ _ _ _|  __ _ _|       __ _ _ _|
  |  | | | |  |  | |C| | |  | |C|      |  | |C|C|    Data________\
  |__|_|_|_|  |__|_|_|_| |__|_|_|      |__|_|_|_|    Packet (U)  /
layer:4 3 2       4 3 2      4 3           4 3 2
header
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-feed-up-and-forward-mode-2">Feed-Up-and-Forward Mode</a>
          </figcaption></figure>
</div>
<p id="section-3.2-3">By comparing <a class="auto internal xref" href="#ecnencap_Fig_Feed-Up">Figure 2</a>
        with <a class="auto internal xref" href="#ecnencap_Fig_Feed-Forward-and-Up">Figure 1</a>, it can be seen that subnet E (perhaps a subnet of
        Layer 3 Ethernet switches) works in feed-up-and-forward mode by
        notifying congestion directly into L3 at the point of congestion, even
        though the congested switch does not otherwise act at L3. 
In this example, the technology in subnet F (e.g., MPLS) does support ECN.
   So, when the router adds the Layer 2 header, it copies the ECN marking
from L3 to L2 as well, as shown by the 'C's in both layers.<a class="pilcrow" href="#section-3.2-3">¶</a></p>
</section>
</div>
<div id="ecnencap_Backward">
<section id="section-3.3">
        <h3 id="name-feed-backward-mode">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-feed-backward-mode">Feed-Backward Mode</a>
        </h3>
<p id="section-3.3-1">In some Layer 2 technologies, congestion notification has
        been defined for use internally within the subnet with its own
        feedback and load regulation but the interface with IP for
        ECN has not been defined.<a class="pilcrow" href="#section-3.3-1">¶</a></p>
<p id="section-3.3-2">For instance, the relative rate mechanism was one of the more popular ways
to manage traffic for the Available Bit Rate (ABR) service in ATM, and it
tended to supersede earlier designs. In this approach, ATM switches send
special resource management (RM) cells in both the forward and backward
directions to control the ingress rate of user data into a virtual circuit. If
a switch buffer is approaching congestion or is congested, it sends an RM cell
back towards the ingress with respectively the No Increase (NI) or Congestion
Indication (CI) bit set in its message type field <span>[<a class="cite xref" href="#ATM-TM-ABR">ATM-TM-ABR</a>]</span>.  The ingress then holds or decreases its sending bit rate
accordingly.<a class="pilcrow" href="#section-3.3-2">¶</a></p>
<span id="name-feed-backward-mode-2"></span><div id="ecnencap_Fig_Feed-Backward">
<figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-3.3-3.1">
<pre>                     _ _ _
          /_______  | | |C|  ACK packet (X)
          \         |_|_|_|
 +---+        layer: 2 3 4 header                            +---+
 |  &lt;|&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Packet X &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;|&lt;&lt; |L4
 |   |                         +---+                         | ^ |
 |   |                         |  *|&gt;&gt;&gt; Packet W &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;|&gt;^ |L3
 |   |     +---+     +---+     |   |     +---+     +---+     |   |
 |   |     |   |     |   |     |  &lt;|&lt;&lt;&lt;&lt;&lt;|&lt;&lt;&lt;|&lt;(V)&lt;|&lt;&lt;&lt;|     |   |L2
 |   | . . | . |Packet U | . . | . | . . | . | . . | .*| . . |   |L2
 |___|_____|___|_____|___|_____|___|_____|___|_____|___|_____|___|
 source          subnet G      router       subnet H         dest
     __ _ _ _    __ _ _ _    __ _ _        __ _ _ _   later
    |  | | | |  |  | | | |  |  | | |      |  | |C| |  data________\
    |__|_|_|_|  |__|_|_|_|  |__|_|_|      |__|_|_|_|  packet (W)  /
        4 3 2       4 3 2       4 3           4 3 2
                                        _
                                  /__  |C|  Feedback control
                                  \    |_|  cell/frame (V)
                                        2
     __ _ _ _    __ _ _ _    __ _ _        __ _ _ _   earlier
    |  | | | |  |  | | | |  |  | | |      |  | | | |  data________\
    |__|_|_|_|  |__|_|_|_|  |__|_|_|      |__|_|_|_|  packet (U)  /
layer:  4 3 2       4 3 2       4 3           4 3 2
header
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-feed-backward-mode-2">Feed-Backward Mode</a>
          </figcaption></figure>
</div>
<p id="section-3.3-4">ATM's feed-backward approach does not fit well when layered beneath
        IP's feed-forward approach unless the initial data source is
        the same node as the ATM ingress.
          <a class="auto internal xref" href="#ecnencap_Fig_Feed-Backward">Figure 3</a> shows the feed-backward approach
        being used in subnet H. 
If the final switch on the path is congested
        (*), it does not feed forward any congestion indications on the packet
        (U). Instead, it sends a control cell (V) back to the router at the ATM
        ingress.<a class="pilcrow" href="#section-3.3-4">¶</a></p>
<p id="section-3.3-5">However, the backward feedback does not reach the original data
        source directly because IP does not support backward feedback (and
        subnet G is independent of subnet H). Instead, the router in the
        middle throttles down its sending rate, but the original data sources
        don't reduce their rates. 

The resulting rate mismatch causes the
        middle router's buffer at layer 3 to back up until it becomes
        congested, which it signals forwards on later data packets at layer 3
        (e.g., packet W). Note that the forward signal from the middle router
        is not triggered directly by the backward signal. Rather, it is
        triggered by congestion resulting from the middle router's mismatched
        rate response to the backward signal.<a class="pilcrow" href="#section-3.3-5">¶</a></p>
<p id="section-3.3-6">In response to this later forward signalling, end-to-end feedback
        at layer 4 finally completes the tortuous path of congestion
        indications back to the origin data source as before.<a class="pilcrow" href="#section-3.3-6">¶</a></p>
<p id="section-3.3-7">Quantized Congestion Notification (QCN) <span>[<a class="cite xref" href="#IEEE802.1Q">IEEE802.1Q</a>]</span>
        would suffer from similar problems if extended to multiple subnets.
        However, QCN was clearly characterized as solely
        applicable to a single subnet from the start (see <a class="auto internal xref" href="#ecnencap_Guidelines_Backward">Section 6</a>).<a class="pilcrow" href="#section-3.3-7">¶</a></p>
</section>
</div>
<div id="ecnencap_Null">
<section id="section-3.4">
        <h3 id="name-null-mode">
<a class="section-number selfRef" href="#section-3.4">3.4. </a><a class="section-name selfRef" href="#name-null-mode">Null Mode</a>
        </h3>
<p id="section-3.4-1">Link- and physical-layer resources are often 'non-blocking' by
        design. Congestion notification may be implemented in these cases, but
        it does not need to be deployed at the lower layer; ECN in IP would be
        sufficient.<a class="pilcrow" href="#section-3.4-1">¶</a></p>
<p id="section-3.4-2">A degenerate example is a point-to-point Ethernet link. Excess
        loading of the link merely causes the queue from the higher layer to
        back up, while the lower layer remains immune to congestion. Even a
        whole meshed subnetwork can be made immune to interior congestion by
        limiting ingress capacity and sufficient sizing of interior links,
        e.g., a non-blocking fat-tree network <span>[<a class="cite xref" href="#Leiserson85">Leiserson85</a>]</span>. An
        alternative to fat links near the root is numerous thin links with
        multi-path routing to ensure even worst-case patterns of load cannot
        congest any link, e.g., a Clos network <span>[<a class="cite xref" href="#Clos53">Clos53</a>]</span>.<a class="pilcrow" href="#section-3.4-2">¶</a></p>
</section>
</div>
</section>
</div>
<div id="ecnencap_Guidelines_Forward">
<section id="section-4">
      <h2 id="name-feed-forward-and-up-mode-gu">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-feed-forward-and-up-mode-gu">Feed-Forward-and-Up Mode: Guidelines for Adding Congestion Notification</a>
      </h2>
<p id="section-4-1">Feed-forward-and-up is the mode already used for signalling ECN up
      the layers through MPLS into IP <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span> and through
      IP-in-IP tunnels <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>, whether encapsulating with
      IPv4 <span>[<a class="cite xref" href="#RFC2003">RFC2003</a>]</span>, IPv6 <span>[<a class="cite xref" href="#RFC2473">RFC2473</a>]</span>, or IPsec
      <span>[<a class="cite xref" href="#RFC4301">RFC4301</a>]</span>. These RFCs take a consistent approach and the
      following guidelines are designed to ensure this consistency continues
      as ECN support is added to other protocols that encapsulate IP. The
      guidelines are also designed to ensure compliance with the more general
      best current practice for the design of alternate ECN schemes given in
      <span>[<a class="cite xref" href="#RFC4774">RFC4774</a>]</span> and extended by <span>[<a class="cite xref" href="#RFC8311">RFC8311</a>]</span>.<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2">The rest of this section is structured as follows:<a class="pilcrow" href="#section-4-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-3.1">
          <a class="auto internal xref" href="#ecnencap_IP-IP_Coupled_Shim_Tunnels">Section 4.1</a> addresses
          the most straightforward cases, where <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> can
          be applied directly to add ECN to tunnels that are effectively
          IP-in-IP tunnels, but with a shim header(s) between the IP
          headers.<a class="pilcrow" href="#section-4-3.1">¶</a>
</li>
        <li class="normal" id="section-4-3.2">
          <p id="section-4-3.2.1">The subsequent sections give guidelines for adding congestion notification to a
          subnet technology that uses feed-forward-and-up mode like IP, but it
          is not so similar to IP that <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> rules can be
          applied directly. Specifically:<a class="pilcrow" href="#section-4-3.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-3.2.2.1">Sections <a class="auto internal xref" href="#ecnencap_WireProtocolECNSupport">4.2</a>, <a class="auto internal xref" href="#ecnencap_EncapGuidelines">4.3</a>, and <a class="auto internal xref" href="#ecnencap_DecapGuidelines">4.4</a> address how to add ECN support
            to the wire protocol and to the encapsulators and decapsulators at
            the ingress and egress of the subnet, respectively.<a class="pilcrow" href="#section-4-3.2.2.1">¶</a>
</li>
            <li class="normal" id="section-4-3.2.2.2">
              <a class="auto internal xref" href="#ecnencap_Sequences">Section 4.5</a> deals with the special
              but common case of sequences of tunnels or subnets that all use
              the same technology.<a class="pilcrow" href="#section-4-3.2.2.2">¶</a>
</li>
            <li class="normal" id="section-4-3.2.2.3">
              <a class="auto internal xref" href="#ecnencap_Reframing">Section 4.6</a> deals with the question
              of reframing when IP packets do not map 1:1 into lower-layer
              frames.<a class="pilcrow" href="#section-4-3.2.2.3">¶</a>
</li>
          </ul>
</li>
      </ul>
<div id="ecnencap_IP-IP_Coupled_Shim_Tunnels">
<section id="section-4.1">
        <h3 id="name-ip-in-ip-tunnels-with-shim-">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-ip-in-ip-tunnels-with-shim-">IP-in-IP Tunnels with Shim Headers</a>
        </h3>
<p id="section-4.1-1">A common pattern for many tunnelling protocols is to encapsulate an
        inner IP header with a shim header(s) then an outer IP header. A shim
        header is defined as one that is not sufficient alone to forward the
        packet as an outer header. Another common pattern is for a shim to
        encapsulate an L2 header, which in turn encapsulates (or
        might encapsulate) an IP header. <span>[<a class="cite xref" href="#RFC9601">RFC9601</a>]</span> clarifies that <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>
        is just as applicable when there are shims and even an L2 header
        between two IP headers.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">However, it is not always feasible or necessary to propagate ECN
        between IP headers when separated by a shim. For instance, it might be
        too costly to dig to arbitrary depths to find an inner IP header,
        there may be little or no congestion within the tunnel by design (see
        null mode in <a class="auto internal xref" href="#ecnencap_Null">Section 3.4</a> above), or a legacy
        implementation might not support ECN. In cases where a tunnel does not
        support ECN, it is important that the ingress does not copy the ECN
        field from an inner IP header to an outer. Therefore <span><a class="relref" href="https://rfc-editor.org/rfc/rfc9601#section-4">Section 4</a> of [<a class="cite xref" href="#RFC9601">RFC9601</a>]</span> requires network
        operators to configure the ingress of a tunnel that does not support
        ECN so that it zeros the ECN field in the outer IP header.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<p id="section-4.1-3">Nonetheless, in many cases it is feasible to propagate the ECN
        field between IP headers separated by shim headers and/or an L2
        header. Particularly in the typical case when the outer IP header and
        the shim(s) are added (or removed) as part of the same procedure. Even
        if a shim encapsulates an L2 header, it is often possible to find
        an inner IP header within the L2 PDU and propagate ECN between that
        and the outer IP header. This can be thought of as a special case of
        the feed-up-and-forward mode (<a class="auto internal xref" href="#ecnencap_Up">Section 3.2</a>), so the
        guidelines for this mode apply (<a class="auto internal xref" href="#ecnencap_Guidelines_Up">Section 5</a>).<a class="pilcrow" href="#section-4.1-3">¶</a></p>
<p id="section-4.1-4">Numerous shim protocols have been defined for IP tunnelling. More
        recent ones, e.g., Geneve <span>[<a class="cite xref" href="#RFC8926">RFC8926</a>]</span> and Generic UDP
        Encapsulation (GUE) <span>[<a class="cite xref" href="#I-D.ietf-intarea-gue">INTAREA-GUE</a>]</span> cite and
        follow <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>. Some earlier ones, e.g., CAPWAP <span>[<a class="cite xref" href="#RFC5415">RFC5415</a>]</span> and LISP <span>[<a class="cite xref" href="#RFC9300">RFC9300</a>]</span>, cite <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>,
        which is compatible with <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>.<a class="pilcrow" href="#section-4.1-4">¶</a></p>
<p id="section-4.1-5">However, as <span><a class="relref" href="https://rfc-editor.org/rfc/rfc3168#section-9.3">Section 9.3</a> of [<a class="cite xref" href="#RFC3168">RFC3168</a>]</span> pointed out, ECN
        support needs to be defined for many earlier shim-based tunnelling
        protocols, e.g., L2TPv2 <span>[<a class="cite xref" href="#RFC2661">RFC2661</a>]</span>, L2TPv3 <span>[<a class="cite xref" href="#RFC3931">RFC3931</a>]</span>, GRE <span>[<a class="cite xref" href="#RFC2784">RFC2784</a>]</span>, PPTP <span>[<a class="cite xref" href="#RFC2637">RFC2637</a>]</span>, GTP <span>[<a class="cite xref" href="#GTPv1">GTPv1</a>]</span> <span>[<a class="cite xref" href="#GTPv1-U">GTPv1-U</a>]</span> <span>[<a class="cite xref" href="#GTPv2-C">GTPv2-C</a>]</span>, and Teredo <span>[<a class="cite xref" href="#RFC4380">RFC4380</a>]</span>, as well as some recent ones, e.g., VXLAN <span>[<a class="cite xref" href="#RFC7348">RFC7348</a>]</span>, NVGRE <span>[<a class="cite xref" href="#RFC7637">RFC7637</a>]</span>, and NSH <span>[<a class="cite xref" href="#RFC8300">RFC8300</a>]</span>.<a class="pilcrow" href="#section-4.1-5">¶</a></p>
<p id="section-4.1-6">All these IP-based encapsulations can be updated in one shot by
        simple reference to <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>. However, it would not be appropriate to
        update all these protocols from within the present guidance document.
        Instead, a companion specification <span>[<a class="cite xref" href="#RFC9601">RFC9601</a>]</span> 
        has the appropriate Standards Track status to update Standards Track
        protocols. For those that are not under IETF change control <span>[<a class="cite xref" href="#RFC9601">RFC9601</a>]</span> can only recommend that
        the relevant body updates them.<a class="pilcrow" href="#section-4.1-6">¶</a></p>
</section>
</div>
<div id="ecnencap_WireProtocolECNSupport">
<section id="section-4.2">
        <h3 id="name-wire-protocol-design-indica">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-wire-protocol-design-indica">Wire Protocol Design: Indication of ECN Support</a>
        </h3>
<p id="section-4.2-1">This section is intended to guide the redesign of any lower-layer
        protocol that encapsulates IP to add built-in congestion notification support at the lower
        layer using feed-forward-and-up mode. It reflects the approaches used in <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> and
        in <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span>. Therefore, IP-in-IP tunnels or IP-in-MPLS
        or MPLS-in-MPLS encapsulations that already comply with <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> or <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span> will already satisfy
        this guidance.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<p id="section-4.2-2">A lower-layer (or subnet) congestion notification system:<a class="pilcrow" href="#section-4.2-2">¶</a></p>
<ol class="normal type-1" id="section-4.2-3" start="1" type="1">
<li id="section-4.2-3.1">
            <span class="bcp14">SHOULD NOT</span> apply explicit congestion notifications to PDUs that
            are destined for legacy layer-4 transport implementations that
            will not understand ECN; and<a class="pilcrow" href="#section-4.2-3.1">¶</a>
</li>
          <li id="section-4.2-3.2">
<div id="ecnencap_Egress_Check">
            <p id="section-4.2-3.2.1"><span class="bcp14">SHOULD NOT</span> apply explicit congestion notifications to PDUs if the egress of the subnet might
            not propagate congestion notification onward into the higher
            layer.<a class="pilcrow" href="#section-4.2-3.2.1">¶</a></p>
<p id="section-4.2-3.2.2">We use the term ECN-PDU for a PDU
            on a feedback loop that will propagate congestion notification
            properly because it meets both the above criteria. Additionally, a
            Not-ECN-PDU is a PDU on a feedback loop that does not meet at
            least one of the criteria, and therefore will not propagate
            congestion notification properly. A corollary of the above is that
            a lower-layer congestion notification protocol:<a class="pilcrow" href="#section-4.2-3.2.2">¶</a></p>
</div>
          </li>
<li id="section-4.2-3.3">
            <span class="bcp14">SHOULD</span> be able to distinguish ECN-PDUs from Not-ECN-PDUs.<a class="pilcrow" href="#section-4.2-3.3">¶</a>
</li>
        </ol>
<p id="section-4.2-4">Note that there is no need for all interior nodes within a subnet
        to be able to mark congestion explicitly. A mix of drop and explicit congestion
        signals from different nodes is fine. However, if <em>any</em>
        interior nodes might generate congestion markings, Guideline <a class="auto internal xref" href="#ecnencap_Egress_Check">2</a> above says that all
        relevant egress nodes <span class="bcp14">SHOULD</span> be able to propagate those markings up
        to the higher layer.<a class="pilcrow" href="#section-4.2-4">¶</a></p>
<p id="section-4.2-5">In IP, if the ECN field in each PDU is cleared to the Not ECN-Capable Transport (Not-ECT) codepoint, it indicates that the L4 transport
        will not understand congestion markings. A congested buffer must not
        mark these Not-ECT PDUs; therefore, it has to signal congestion by
        increasingly applying drop instead.<a class="pilcrow" href="#section-4.2-5">¶</a></p>
<p id="section-4.2-6">The mechanism a lower layer uses to distinguish the ECN capability
        of PDUs need not mimic that of IP. The above guidelines merely say
        that the lower-layer system as a whole should achieve the same
        outcome. For instance, ECN-capable feedback loops might use PDUs that
        are identified by a particular set of labels or tags. Alternatively,
        logical-link protocols that use flow state might determine whether a
        PDU can be congestion marked by checking for ECN support in the flow
        state. Other protocols might depend on out-of-band control
        signals.<a class="pilcrow" href="#section-4.2-6">¶</a></p>
<p id="section-4.2-7">The per-domain checking of ECN support in MPLS <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span> is a good example of a way to avoid sending
        congestion markings to L4 transports that will not understand them
        without using any header space in the subnet protocol.<a class="pilcrow" href="#section-4.2-7">¶</a></p>
<p id="section-4.2-8">In MPLS, header space is extremely limited; therefore, <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span> does
        not provide a field in the MPLS header to indicate whether the PDU is
        an ECN-PDU or a Not-ECN-PDU. Instead, interior nodes in a domain are
        allowed to set explicit congestion indications without checking
        whether the PDU is destined for a L4 transport that will understand
        them. Nonetheless, this is made safe by requiring that the network
        operator upgrades all decapsulating edges of a whole domain at once
        as soon as even one switch within the domain is configured to mark
        rather than drop some PDUs during congestion. Therefore, any edge node that
        might decapsulate a packet will be capable of checking whether the
        higher-layer transport is ECN-capable. 

When decapsulating a CE-marked
        packet, if the decapsulator discovers that the higher layer (inner
        header) indicates the transport is not ECN-capable, it drops the
        packet -- effectively on behalf of the earlier congested node
        (see Decapsulation Guideline <a class="auto internal xref" href="#ecnencap_dropNot-ECTinnerCEouter">1</a> in <a class="auto internal xref" href="#ecnencap_DecapGuidelines">Section 4.4</a>).<a class="pilcrow" href="#section-4.2-8">¶</a></p>
<p id="section-4.2-9">It was only appropriate to define such an incremental deployment
        strategy because MPLS is targeted solely at professional operators
        who can be expected to ensure that a whole subnetwork is consistently
        configured. This strategy might not be appropriate for other link
        technologies targeted at zero-configuration deployment or deployment
        by the general public (e.g., Ethernet). For such 'plug-and-play'
        environments, it will be necessary to invent a fail-safe approach that
        ensures congestion markings will never fall into black holes, no
        matter how inconsistently a system is put together. 

Alternatively,
        congestion notification relying on correct system configuration could
        be confined to flavours of Ethernet intended only for professional
        network operators, such as Provider Backbone Bridges (PBB) (<span>[<a class="cite xref" href="#IEEE802.1Q">IEEE802.1Q</a>]</span>; previously 802.1ah).<a class="pilcrow" href="#section-4.2-9">¶</a></p>
<p id="section-4.2-10">ECN support in TRansparent Interconnection of Lots of Links (TRILL) <span>[<a class="cite xref" href="#RFC9600">RFC9600</a>]</span>
        provides a good example of how to add congestion notification to a lower-layer protocol
        without relying on careful and consistent operator configuration.
        TRILL provides an extension header word with space for flags of
        different categories depending on whether logic to understand the
        extension is critical. The congestion-experienced marking has been
        defined as a 'critical ingress-to-egress' flag. So, if a transit
        RBridge sets this flag on a frame and an egress RBridge does not have any logic
        to process it, the egress RBridge will drop the frame, which is the desired default action
        anyway. Therefore, TRILL RBridges can be updated with support for congestion notification
        in no particular order and, at the egress of the TRILL campus,
        congestion notification will be propagated to IP as ECN whenever ECN
        logic has been implemented at the egress, or as drop otherwise.<a class="pilcrow" href="#section-4.2-10">¶</a></p>
<p id="section-4.2-11">QCN <span>[<a class="cite xref" href="#IEEE802.1Q">IEEE802.1Q</a>]</span> is not intended to
        extend beyond a single subnet or interoperate with
        IP-ECN. Nonetheless, the way QCN indicates to lower-layer devices that
        the endpoints will not understand QCN provides another example that a
        lower-layer protocol designer might be able to mimic for their
        scenario. An operator can define certain Priority Code Points (PCPs
        <span>[<a class="cite xref" href="#IEEE802.1Q">IEEE802.1Q</a>]</span>; previously 802.1p) to
        indicate non-QCN frames. Then an ingress bridge has to map each
        arriving not-QCN-capable IP packet to one of these non-QCN PCPs.<a class="pilcrow" href="#section-4.2-11">¶</a></p>
<p id="section-4.2-12">When drop for non-ECN traffic is deferred to the egress of a subnet,
        it cannot necessarily be assumed that one congestion mark is equivalent to one
        drop, as was originally required by <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>.
        <span>[<a class="cite xref" href="#RFC8311">RFC8311</a>]</span> updated <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span> to allow
        experimentation with congestion markings that are not equivalent to drop,
        particularly for L4S <span>[<a class="cite xref" href="#RFC9331">RFC9331</a>]</span>. ECN
        support in TRILL <span>[<a class="cite xref" href="#RFC9600">RFC9600</a>]</span>
        is a good example of a way to defer drop to the egress of a subnet both
        when marks are equivalent to drops (as in <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>) and when they
        are not (as in L4S). The ECN scheme for MPLS <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span>
        was defined before L4S, so it only currently supports deferred drop that
        is equivalent to ECN marking. Nonetheless, in principle, MPLS
        (and potentially future L2 protocols) could support L4S marking by copying TRILL's approach for determining the
        drop level of any non-ECN traffic at the subnet egress.<a class="pilcrow" href="#section-4.2-12">¶</a></p>
</section>
</div>
<div id="ecnencap_EncapGuidelines">
<section id="section-4.3">
        <h3 id="name-encapsulation-guidelines">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-encapsulation-guidelines">Encapsulation Guidelines</a>
        </h3>
<p id="section-4.3-1">This section is intended to guide the redesign of any node that
        encapsulates IP with a lower-layer header when adding built-in congestion notification
        support to the lower-layer protocol using feed-forward-and-up mode. It reflects the approaches used
        in <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> and <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span>. Therefore,
        IP-in-IP tunnels or IP-in-MPLS or MPLS-in-MPLS encapsulations that
        already comply with <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> or <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span> will already satisfy this guidance.<a class="pilcrow" href="#section-4.3-1">¶</a></p>
<ol class="normal type-1" id="section-4.3-2" start="1" type="1">
<li id="section-4.3-2.1">
            <p id="section-4.3-2.1.1">Egress Capability Check: A subnet ingress needs to be sure that
            the corresponding egress of a subnet will propagate any congestion
            notification added to the outer header across the subnet. This is
            necessary in addition to checking that an incoming PDU indicates
            an ECN-capable (L4) transport. Examples of how this guarantee
            might be provided include:<a class="pilcrow" href="#section-4.3-2.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3-2.1.2.1">by configuration (e.g., if any label switch in a domain
                supports congestion marking, <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span> requires all
                egress nodes to have been configured to propagate ECN).<a class="pilcrow" href="#section-4.3-2.1.2.1">¶</a>
</li>
              <li class="normal" id="section-4.3-2.1.2.2">by the ingress explicitly checking that the egress
                propagates ECN (e.g., an early attempt to add ECN support to
                TRILL used IS-IS to check path capabilities before adding ECN
                extension flags to each frame <span>[<a class="cite xref" href="#RFC7780">RFC7780</a>]</span>).<a class="pilcrow" href="#section-4.3-2.1.2.2">¶</a>
</li>
              <li class="normal" id="section-4.3-2.1.2.3">by inherent design of the protocol (e.g., by encoding congestion
                marking on the outer header in such a way that a legacy egress
                that does not understand ECN will consider the PDU corrupt or
                invalid and discard it; thus, at least propagating a form of
                congestion signal).<a class="pilcrow" href="#section-4.3-2.1.2.3">¶</a>
</li>
            </ul>
</li>
          <li id="section-4.3-2.2">Egress Fails Capability Check: If the ingress cannot guarantee
            that the egress will propagate congestion notification, the
            ingress <span class="bcp14">SHOULD</span> disable congestion notification at the lower layer when it forwards the
            PDU. An example of how the ingress might disable congestion notification at the lower
            layer would be by setting the outer header of the PDU to identify
            it as a Not-ECN-PDU, assuming the subnet technology supports such
            a concept.<a class="pilcrow" href="#section-4.3-2.2">¶</a>
</li>
          <li id="section-4.3-2.3">
<div id="ecnencap_Encap_Copy">
            <p id="section-4.3-2.3.1">Standard Congestion Monitoring
            Baseline: Once the ingress to a subnet has established that the
            egress will correctly propagate ECN, on encapsulation, it <span class="bcp14">SHOULD</span>
            encode the same level of congestion in outer headers as is
            arriving in incoming headers. For example, it might copy any
            incoming congestion notifications into the outer header of the
            lower-layer protocol.<a class="pilcrow" href="#section-4.3-2.3.1">¶</a></p>
<p id="section-4.3-2.3.2">This ensures that
            bulk congestion monitoring of outer headers (e.g., by a network
            management node monitoring congestion markings in passing frames) will measure
            congestion accumulated along the whole upstream path, starting from the
            Load Regulator and not just starting from the ingress of the subnet. 
A node
            that is not the Load Regulator <span class="bcp14">SHOULD NOT</span> re-initialize the level
            of CE markings in the outer header to zero.<a class="pilcrow" href="#section-4.3-2.3.2">¶</a></p>
<p id="section-4.3-2.3.3">It
            would still also be possible to measure congestion introduced
            across one subnet (or tunnel) by subtracting the level of CE
            markings on inner headers from that on outer headers (see <span><a class="relref" href="https://rfc-editor.org/rfc/rfc6040#appendix-C">Appendix C</a> of [<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>). For example:<a class="pilcrow" href="#section-4.3-2.3.3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3-2.3.4.1">If this guideline has been followed and if the level of CE
                markings is 0.4% on the outer header and 0.1% on the inner header, 0.4%
                congestion has been introduced across all the networks since
                the Load Regulator, and 0.3% (= 0.4% - 0.1%) has been
                introduced since the ingress to the current subnet (or
                tunnel).<a class="pilcrow" href="#section-4.3-2.3.4.1">¶</a>
</li>
              <li class="normal" id="section-4.3-2.3.4.2">Without this guideline, if the subnet ingress had
                re-initialized the outer congestion level to zero, the outer
                and inner headers would measure 0.1% and 0.3%. It would still be
                possible to infer that the congestion introduced since the
                Load Regulator was 0.4% (= 0.1% + 0.3%), but only if the
                monitoring system somehow knows whether the subnet ingress
                re-initialized the congestion level.<a class="pilcrow" href="#section-4.3-2.3.4.2">¶</a>
</li>
            </ul>
<p id="section-4.3-2.3.5">As long as subnet and tunnel technologies use the
            standard congestion monitoring baseline in this guideline,
            monitoring systems will know to use the former approach rather
            than having to 'somehow know' which approach to use.<a class="pilcrow" href="#section-4.3-2.3.5">¶</a></p>
</div>
        </li>
</ol>
</section>
</div>
<div id="ecnencap_DecapGuidelines">
<section id="section-4.4">
        <h3 id="name-decapsulation-guidelines">
<a class="section-number selfRef" href="#section-4.4">4.4. </a><a class="section-name selfRef" href="#name-decapsulation-guidelines">Decapsulation Guidelines</a>
        </h3>
<p id="section-4.4-1">This section is intended to guide the redesign of any node that
        decapsulates IP from within a lower-layer header when adding built-in
        congestion notification support to the lower-layer protocol using feed-forward-and-up mode. It reflects the approaches
        used in <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> and in <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span>.
        Therefore, IP-in-IP tunnels or IP-in-MPLS or MPLS-in-MPLS
        encapsulations that already comply with <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> or
        <span>[<a class="cite xref" href="#RFC5129">RFC5129</a>]</span> will already satisfy this guidance.<a class="pilcrow" href="#section-4.4-1">¶</a></p>
<p id="section-4.4-2">A subnet egress <span class="bcp14">SHOULD NOT</span> simply copy congestion notifications from
        outer headers to the forwarded header. It <span class="bcp14">SHOULD</span> calculate the
        outgoing congestion notification field from the inner and outer
        headers using the following guidelines. If there is any conflict,
        rules earlier in the list take precedence over rules later in the
        list.<a class="pilcrow" href="#section-4.4-2">¶</a></p>
<ol class="normal type-1" id="section-4.4-3" start="1" type="1">
<li id="section-4.4-3.1">
<div id="ecnencap_dropNot-ECTinnerCEouter">
            <p id="section-4.4-3.1.1">If the arriving inner
            header is a Not-ECN-PDU, it implies the L4 transport will not
            understand explicit congestion markings. Then:<a class="pilcrow" href="#section-4.4-3.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4-3.1.2.1">If the outer header carries an explicit congestion marking,
                it is likely that a protocol error has occurred, so drop is the only indication of congestion that the L4
                transport will understand. 
If the outer congestion marking is the
                most severe possible, the packet <span class="bcp14">MUST</span> be dropped. 

However, if congestion can be marked with multiple levels of severity and the
packet's outer marking is not the most severe, this requirement can be relaxed to:
the packet <span class="bcp14">SHOULD</span> be dropped.<a class="pilcrow" href="#section-4.4-3.1.2.1">¶</a>
</li>
              <li class="normal" id="section-4.4-3.1.2.2">If the outer is an ECN-PDU that carries no indication of
                congestion or a Not-ECN-PDU the PDU <span class="bcp14">SHOULD</span> be forwarded, but
                still as a Not-ECN-PDU.<a class="pilcrow" href="#section-4.4-3.1.2.2">¶</a>
</li>
            </ul>
</div>
          </li>
<li id="section-4.4-3.2">If the outer header does not support congestion notification (a Not-ECN-PDU), but the inner header does (an
            ECN-PDU), the inner header <span class="bcp14">SHOULD</span> be forwarded unchanged.<a class="pilcrow" href="#section-4.4-3.2">¶</a>
</li>
          <li id="section-4.4-3.3">In some lower-layer protocols, congestion may be signalled as a
            numerical level, such as in the control frames of QCN <span>[<a class="cite xref" href="#IEEE802.1Q">IEEE802.1Q</a>]</span>. If such
            a multi-bit encoding encapsulates an ECN-capable IP data packet, a
            function will be needed to convert the quantized congestion level
            into the frequency of congestion markings in outgoing IP
            packets.<a class="pilcrow" href="#section-4.4-3.3">¶</a>
</li>
          <li id="section-4.4-3.4">
            <p id="section-4.4-3.4.1">Congestion indications might be encoded by a severity level.
            For instance, increasing levels of congestion might be encoded by
            numerically increasing indications, e.g., PCN can be encoded in each PDU at three severity
            levels in IP or MPLS <span>[<a class="cite xref" href="#RFC6660">RFC6660</a>]</span> and the default
            encapsulation and decapsulation rules <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> are
            compatible with this interpretation of the ECN field.<a class="pilcrow" href="#section-4.4-3.4.1">¶</a></p>
<p id="section-4.4-3.4.2">If the arriving inner header is an ECN-PDU, where
            the inner and outer headers carry indications of congestion of
            different severity, the more severe indication <span class="bcp14">SHOULD</span> be forwarded
            in preference to the less severe.<a class="pilcrow" href="#section-4.4-3.4.2">¶</a></p>
</li>
          <li id="section-4.4-3.5">
            <p id="section-4.4-3.5.1">The inner and outer headers might carry a combination of
            congestion notification fields that should not be possible given
            any currently used protocol transitions. For instance, if
            Encapsulation Guideline <a class="auto internal xref" href="#ecnencap_Encap_Copy">3</a> in <a class="auto internal xref" href="#ecnencap_EncapGuidelines">Section 4.3</a> had been followed, it should
            not be possible to have a less severe indication of congestion in
            the outer header than in the inner header. It <span class="bcp14">MAY</span> be appropriate to log
            unexpected combinations of headers and possibly raise an alarm.<a class="pilcrow" href="#section-4.4-3.5.1">¶</a></p>
<p id="section-4.4-3.5.2">If a safe outgoing codepoint can be
            defined for such a PDU, the PDU <span class="bcp14">SHOULD</span> be forwarded rather than
            dropped. Some implementers discard PDUs with currently unused
            combinations of headers just in case they represent an attack.
            However, an approach using alarms and policy-mediated drop is
            preferable to hard-coded drop so that operators can keep track of
            possible attacks, but currently unused combinations are not
            precluded from future use through new standards actions.<a class="pilcrow" href="#section-4.4-3.5.2">¶</a></p>
</li>
        </ol>
</section>
</div>
<div id="ecnencap_Sequences">
<section id="section-4.5">
        <h3 id="name-sequences-of-similar-tunnel">
<a class="section-number selfRef" href="#section-4.5">4.5. </a><a class="section-name selfRef" href="#name-sequences-of-similar-tunnel">Sequences of Similar Tunnels or Subnets</a>
        </h3>
<p id="section-4.5-1">In some deployments, particularly in 3GPP networks, an IP packet
        may traverse two or more IP-in-IP tunnels in sequence that all use
        identical technology (e.g., GTP).<a class="pilcrow" href="#section-4.5-1">¶</a></p>
<p id="section-4.5-2">In such cases, it would be sufficient for every encapsulation and
        decapsulation in the chain to comply with <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>. 
Alternatively, as an optimization, a node that
        decapsulates a packet and immediately re-encapsulates it for the next
        tunnel <span class="bcp14">MAY</span> copy the incoming outer ECN field directly
        to the outgoing outer header and the incoming inner ECN field directly to the
        outgoing inner header. Then, the overall behaviour across the sequence of
        tunnel segments would still be consistent with <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>.<a class="pilcrow" href="#section-4.5-2">¶</a></p>
<p id="section-4.5-3"><span><a class="relref" href="https://rfc-editor.org/rfc/rfc6040#appendix-C">Appendix C</a> of [<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> describes how a tunnel egress can monitor how
        much congestion has been introduced within a tunnel. A network
        operator might want to monitor how much congestion had been introduced
        within a whole sequence of tunnels. Using the technique in 
        <span><a class="relref" href="https://rfc-editor.org/rfc/rfc6040#appendix-C">Appendix C</a> of [<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> at the final egress, the operator could monitor the whole
        sequence of tunnels, but only if the above optimization were used
        consistently along the sequence of tunnels, in order to make it appear
        as a single tunnel. Therefore, tunnel endpoint implementations <span class="bcp14">SHOULD</span>
        allow the operator to configure whether this optimization is
        enabled.<a class="pilcrow" href="#section-4.5-3">¶</a></p>
<p id="section-4.5-4">When congestion notification support is added to a subnet technology, consideration
        <span class="bcp14">SHOULD</span> be given to a similar optimization between subnets in sequence
        if they all use the same technology.<a class="pilcrow" href="#section-4.5-4">¶</a></p>
</section>
</div>
<div id="ecnencap_Reframing">
<section id="section-4.6">
        <h3 id="name-reframing-and-congestion-ma">
<a class="section-number selfRef" href="#section-4.6">4.6. </a><a class="section-name selfRef" href="#name-reframing-and-congestion-ma">Reframing and Congestion Markings</a>
        </h3>
<p id="section-4.6-1">The guidance in this section is worded in terms of framing
        boundaries, but it applies equally whether the PDUs are
        frames, cells, or packets.<a class="pilcrow" href="#section-4.6-1">¶</a></p>
<p id="section-4.6-2">Where an AQM marks the ECN field of IP packets as they queue into a
        Layer 2 link, there will be no problem with framing boundaries
        because the ECN markings would be applied directly to IP packets. The
        guidance in this section is only applicable where a congestion notification capability is
        being added to a Layer 2 protocol so that Layer 2 frames can be
        marked by an AQM at layer 2. This would only be necessary where
        AQM will be applied at pure Layer 2 nodes (without IP awareness).<a class="pilcrow" href="#section-4.6-2">¶</a></p>
<p id="section-4.6-3">Where congestion marking has had to be applied at non-IP-aware nodes and
        framing boundaries do not necessarily align with packet boundaries,
        the decapsulating IP forwarding node <span class="bcp14">SHOULD</span> propagate congestion markings
        from Layer 2 frame headers to IP packets that may have different
        boundaries as a consequence of reframing.<a class="pilcrow" href="#section-4.6-3">¶</a></p>
<p id="section-4.6-4">Two possible design goals for propagating congestion indications,
        described in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc3168#section-5.3">Section 5.3</a> of [<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>
        and <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7141#section-2.4">Section 2.4</a> of [<a class="cite xref" href="#RFC7141">RFC7141</a>]</span>, are:<a class="pilcrow" href="#section-4.6-4">¶</a></p>
<ol class="normal type-1" id="section-4.6-5" start="1" type="1">
<li id="section-4.6-5.1">
<div id="ecnencap_reframing_goal_presence">approximate preservation of
        the presence (and therefore timing) of congestion marks on the L2
        frames used to construct an IP packet;<a class="pilcrow" href="#ecnencap_reframing_goal_presence">¶</a>
</div>
          </li>
<li id="section-4.6-5.2">
<div id="ecnencap_reframing_goal_proportion">
            <ol class="normal type-a" id="section-4.6-5.2.1" start="1" type="a">
<li id="section-4.6-5.2.1.1">
                <p id="section-4.6-5.2.1.1.1">at high frequency of congestion
            marking, approximate preservation of the proportion of congestion
            marks arriving and departing;<a class="pilcrow" href="#section-4.6-5.2.1.1.1">¶</a></p>
</li>
              <li id="section-4.6-5.2.1.2">
                <p id="section-4.6-5.2.1.2.1">at low frequency of congestion
              marking, approximate preservation of the timing of congestion
              marks arriving and departing.<a class="pilcrow" href="#section-4.6-5.2.1.2.1">¶</a></p>
</li>
            </ol>
</div>
        </li>
</ol>
<p id="section-4.6-6">In either case, an implementation <span class="bcp14">SHOULD</span> ensure that
        any new incoming congestion indication is propagated immediately; not
        held awaiting the possibility of further congestion indications to be
        sufficient to indicate congestion on an outgoing PDU <span>[<a class="cite xref" href="#RFC7141">RFC7141</a>]</span>. Nonetheless, to facilitate
        pipelined implementation, it would be acceptable for congestion marks
        to propagate to a slightly later IP packet.<a class="pilcrow" href="#section-4.6-6">¶</a></p>
<p id="section-4.6-7">
   At decapsulation in either case:<a class="pilcrow" href="#section-4.6-7">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.6-8.1">ECN-marking propagation logically occurs
   before application of Decapsulation Guideline <a class="auto internal xref" href="#ecnencap_dropNot-ECTinnerCEouter">1</a> in <a class="auto internal xref" href="#ecnencap_DecapGuidelines">Section 4.4</a>.
For instance, if ECN-marking
            propagation would cause an ECN congestion indication to be applied
            to an IP packet that is a Not-ECN-PDU, then that IP packet is
            dropped in accordance with Guideline <a class="auto internal xref" href="#ecnencap_dropNot-ECTinnerCEouter">1</a>.<a class="pilcrow" href="#section-4.6-8.1">¶</a>
</li>
          <li class="normal" id="section-4.6-8.2">Where a mix of ECN-PDUs and non-ECN-PDUs arrives to construct the same
            IP packet, the decapsulation specification <span class="bcp14">SHOULD</span> require that packet to
            be discarded.<a class="pilcrow" href="#section-4.6-8.2">¶</a>
</li>
          <li class="normal" id="section-4.6-8.3">Where a mix of different types of ECN-PDUs arrives to construct the
            same IP packet, e.g., a mix of frames that map to ECT(0) and ECT(1) IP packets,
            the decapsulation specification might consider this a protocol error. But, if
            the lower-layer protocol has defined such a mix of types of ECN-PDU as valid, it <span class="bcp14">SHOULD</span>
            require the resulting IP packet to be set to either ECT(0) or ECT(1).
            In this case, it <span class="bcp14">SHOULD</span> take into account that the RFC Series has so
            far allowed ECT(0) and ECT(1) to be considered
            equivalent <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>; or ECT(1) can
            provide a less severe congestion marking
            than CE <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>; or ECT(1) can
            indicate an unmarked but ECN-capable packet that is subject to a
            different marking algorithm to ECT(0) packets, e.g., L4S
            <span>[<a class="cite xref" href="#RFC8311">RFC8311</a>]</span> <span>[<a class="cite xref" href="#RFC9331">RFC9331</a>]</span>.<a class="pilcrow" href="#section-4.6-8.3">¶</a>
</li>
        </ul>
<p id="section-4.6-9">The following are two ways that goal <a class="auto internal xref" href="#ecnencap_reframing_goal_presence">1</a> might be achieved, but
        they are not intended to be the only ways:<a class="pilcrow" href="#section-4.6-9">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.6-10.1">Every IP PDU that is constructed, in whole or in part, from an
            L2 frame that is marked with a congestion signal has that signal
            propagated to it.<a class="pilcrow" href="#section-4.6-10.1">¶</a>
</li>
          <li class="normal" id="section-4.6-10.2">Every L2 frame that is marked with a congestion signal
            propagates that signal to one IP PDU that is constructed from it in
            whole or in part. If multiple IP PDUs meet this
            description, the choice can be made arbitrarily but ought to be
            consistent.<a class="pilcrow" href="#section-4.6-10.2">¶</a>
</li>
        </ul>
<p id="section-4.6-11">The following gives one way that goal <a class="auto internal xref" href="#ecnencap_reframing_goal_proportion">2</a> might be achieved, but
        it is not intended to be the only way:<a class="pilcrow" href="#section-4.6-11">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.6-12.1">For each of the streams of frames that encapsulate the IP packets of
            each IP-ECN codepoint and follow the same path through the subnet,
            a counter ('in') tracks octets arriving
            within the payload of marked L2 frames and another ('out') tracks
            octets departing in marked IP packets. While 'in' exceeds 'out',
            forwarded IP packets are ECN-marked. If 'out' exceeds 'in' for
            longer than a timeout, both counters are zeroed to ensure that
            the start of the next congestion episode propagates immediately.
            The 'out' counter includes octets in reconstructed IP packets that
            would have been marked, but had to be dropped because they were
            Not-ECN-PDUs (by Decapsulation Guideline <a class="auto internal xref" href="#ecnencap_dropNot-ECTinnerCEouter">1</a> in <a class="auto internal xref" href="#ecnencap_DecapGuidelines">Section 4.4</a>).<a class="pilcrow" href="#section-4.6-12.1">¶</a>
</li>
        </ul>
<p id="section-4.6-13">Generally, relative to the number of IP PDUs, the number of L2 frames may be higher (e.g., ATM),
        roughly the same, or lower (e.g., 802.11 aggregation at an L2-only station).
        This distinction may influence the choice of mechanism.<a class="pilcrow" href="#section-4.6-13">¶</a></p>
</section>
</div>
</section>
</div>
<div id="ecnencap_Guidelines_Up">
<section id="section-5">
      <h2 id="name-feed-up-and-forward-mode-gu">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-feed-up-and-forward-mode-gu">Feed-Up-and-Forward Mode: Guidelines for Adding Congestion Notification</a>
      </h2>
<p id="section-5-1">The guidance in this section is applicable, for example, when IP
      packets:<a class="pilcrow" href="#section-5-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-2.1">are encapsulated in Ethernet headers, which have no support for
          congestion notification;<a class="pilcrow" href="#section-5-2.1">¶</a>
</li>
        <li class="normal" id="section-5-2.2">are forwarded by the eNode-B (base station) of a 3GPP radio access
        network, which is required to apply ECN marking during congestion
        <span>[<a class="cite xref" href="#LTE-RA">LTE-RA</a>]</span> <span>[<a class="cite xref" href="#UTRAN">UTRAN</a>]</span>, but the Packet Data Convergence Protocol (PDCP)
        that encapsulates the IP header over the radio access has no support
        for ECN.<a class="pilcrow" href="#section-5-2.2">¶</a>
</li>
      </ul>
<p id="section-5-3">This guidance also generalizes to encapsulation
        by other subnet technologies with no built-in support for congestion notification at the
        lower layer, but with support for finding and processing an IP
        header. It is unlikely to be applicable or necessary for IP-in-IP
        encapsulation, where feed-forward-and-up mode based on <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span> would be more appropriate.<a class="pilcrow" href="#section-5-3">¶</a></p>
<p id="section-5-4">Marking the IP header while switching at layer 2 (by using a Layer 3
      switch) or while forwarding in a radio access network seems to represent
      a layering violation. However, it can be considered as a benign
      optimization if the guidelines below are followed. Feed-up-and-forward
      is certainly not a general alternative to implementing feed-forward
      congestion notification in the lower layer, because:<a class="pilcrow" href="#section-5-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-5.1">IPv4 and IPv6 are not the only Layer 3 protocols that might be
          encapsulated by lower-layer protocols.<a class="pilcrow" href="#section-5-5.1">¶</a>
</li>
        <li class="normal" id="section-5-5.2">Link-layer encryption might be in use, making the Layer 2 payload
          inaccessible.<a class="pilcrow" href="#section-5-5.2">¶</a>
</li>
        <li class="normal" id="section-5-5.3">Many Ethernet switches do not have 'Layer 3 switch' capabilities,
          so the ability to read or modify an IP payload cannot be assumed.<a class="pilcrow" href="#section-5-5.3">¶</a>
</li>
        <li class="normal" id="section-5-5.4">It might be costly to find an IP header (IPv4 or IPv6) when it may be
          encapsulated by more than one lower-layer header, e.g., Ethernet MAC
          in MAC (<span>[<a class="cite xref" href="#IEEE802.1Q">IEEE802.1Q</a>]</span>; previously 802.1ah).<a class="pilcrow" href="#section-5-5.4">¶</a>
</li>
      </ul>
<p id="section-5-6">Nonetheless, configuring lower-layer equipment to look for an ECN
      field in an encapsulated IP header is a useful optimization. If the
      implementation follows the guidelines below, this optimization does not
      have to be confined to a controlled environment, e.g., within a data
      centre; it could usefully be applied in any network -- even if the
      operator is not sure whether the above issues will never apply:<a class="pilcrow" href="#section-5-6">¶</a></p>
<ol class="normal type-1" id="section-5-7" start="1" type="1">
<li id="section-5-7.1">If a built-in lower-layer congestion notification mechanism exists
          for a subnet technology, it is safe to mix feed-up-and-forward with
          feed-forward-and-up on other switches in the same subnet. However,
          it will generally be more efficient to use the built-in mechanism.<a class="pilcrow" href="#section-5-7.1">¶</a>
</li>
        <li id="section-5-7.2">The depth of the search for an IP header <span class="bcp14">SHOULD</span> be limited. If an
          IP header is not found soon enough, or an unrecognized or unreadable
          header is encountered, the switch <span class="bcp14">SHOULD</span> resort to an alternative
          means of signalling congestion (e.g., drop or the built-in lower-layer
          mechanism if available).<a class="pilcrow" href="#section-5-7.2">¶</a>
</li>
        <li id="section-5-7.3">It is sufficient to use the first IP header found in the stack;
          the egress of the relevant tunnel can propagate congestion
          notification upwards to any more deeply encapsulated IP headers
          later.<a class="pilcrow" href="#section-5-7.3">¶</a>
</li>
      </ol>
</section>
</div>
<div id="ecnencap_Guidelines_Backward">
<section id="section-6">
      <h2 id="name-feed-backward-mode-guidelin">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-feed-backward-mode-guidelin">Feed-Backward Mode: Guidelines for Adding Congestion Notification</a>
      </h2>
<p id="section-6-1">It can be seen from <a class="auto internal xref" href="#ecnencap_Backward">Section 3.3</a> that
      congestion notification in a subnet using feed-backward mode has
      generally not been designed to be directly coupled with IP-layer
      congestion notification. The subnet attempts to minimize congestion
      internally, and if the incoming load at the ingress exceeds the capacity
      somewhere through the subnet, the Layer 3 buffer into the ingress backs
      up. Thus, a feed-backward mode subnet is in some sense similar to a null
      mode subnet, in that there is no need for any direct interaction between
      the subnet and higher-layer congestion notification. Therefore, no
      detailed protocol design guidelines are appropriate. Nonetheless, a more
      general guideline is appropriate:<a class="pilcrow" href="#section-6-1">¶</a></p>
<blockquote id="section-6-2">A subnetwork technology intended to eventually interface
        to IP <span class="bcp14">SHOULD NOT</span> be designed using only the
        feed-backward mode, which is certainly best for a stand-alone subnet,
        but would need to be modified to work efficiently as part of the wider
        Internet because IP uses feed-forward-and-up mode.<a class="pilcrow" href="#section-6-2">¶</a>
</blockquote>
<p id="section-6-3">The feed-backward approach at least works beneath IP, where the term
      'works' is used only in a narrow functional sense because feed-backward
      can result in very inefficient and sluggish congestion control --
      except if it is confined to the subnet directly connected to the
      original data source when it is faster than feed-forward. It would be
      valid to design a protocol that could work in feed-backward mode for
      paths that only cross one subnet, and in feed-forward-and-up mode for
      paths that cross subnets.<a class="pilcrow" href="#section-6-3">¶</a></p>
<p id="section-6-4">In the early days of TCP/IP, a similar feed-backward approach was
      tried for explicit congestion signalling using source-quench (SQ) ICMP
      control packets. However, SQ fell out of favour and is now formally
      deprecated <span>[<a class="cite xref" href="#RFC6633">RFC6633</a>]</span>. The main problem was that it is
      hard for a data source to tell the difference between a spoofed SQ
      message and a quench request from a genuine buffer on the path. It is
      also hard for a lower-layer buffer to address an SQ message to the
      original source port number, which may be buried within many layers of
      headers and possibly encrypted.<a class="pilcrow" href="#section-6-4">¶</a></p>
<p id="section-6-5">QCN (also known as Backward Congestion Notification (BCN); see
      Sections 30-33 of <span>[<a class="cite xref" href="#IEEE802.1Q">IEEE802.1Q</a>]</span>, previously known as
      802.1Qau) uses a feed-backward mode that is structurally similar to ATM's
      relative rate mechanism. However, QCN confines its applicability to
      scenarios such as some data centres where all endpoints are directly
      attached by the same Ethernet technology. If a QCN subnet were later
      connected into a wider IP-based internetwork (e.g., when attempting to
      interconnect multiple data centres) it would suffer the inefficiency
      shown in <a class="auto internal xref" href="#ecnencap_Fig_Feed-Backward">Figure 3</a>.<a class="pilcrow" href="#section-6-5">¶</a></p>
</section>
</div>
<div id="ecnencap_IANA_Considerations">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-7-1">This document has no IANA actions.<a class="pilcrow" href="#section-7-1">¶</a></p>
</section>
</div>
<div id="ecnencap_Security_Considerations">
<section id="section-8">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-8-1">If a lower-layer wire protocol is redesigned to include explicit
      congestion signalling in-band in the protocol header, care <span class="bcp14">SHOULD</span> be
      taken to ensure that the field used is specified as mutable during
      transit. Otherwise, interior nodes signalling congestion would invalidate
      any authentication protocol applied to the lower-layer header -- by
      altering a header field that had been assumed as immutable.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2">The redesign of protocols that encapsulate IP in order to propagate
      congestion signals between layers raises potential signal integrity
      concerns. Experimental or proposed approaches exist for assuring the
      end-to-end integrity of in-band congestion signals, such as:<a class="pilcrow" href="#section-8-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-3.1">
          <p id="section-8-3.1.1">Congestion Exposure (ConEx) for networks:<a class="pilcrow" href="#section-8-3.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-3.1.2.1">to audit that their
          congestion signals are not being suppressed by other networks or by
          receivers; and<a class="pilcrow" href="#section-8-3.1.2.1">¶</a>
</li>
            <li class="normal" id="section-8-3.1.2.2">to police that senders are responding
          sufficiently to the signals, irrespective of the L4 transport
          protocol used <span>[<a class="cite xref" href="#RFC7713">RFC7713</a>]</span>.<a class="pilcrow" href="#section-8-3.1.2.2">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-8-3.2">A test for a sender to detect whether a network or the receiver
          is suppressing congestion signals (for example, see the second paragraph of <span><a class="relref" href="https://rfc-editor.org/rfc/rfc3168#section-20.2">Section 20.2</a> of [<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>).<a class="pilcrow" href="#section-8-3.2">¶</a>
</li>
      </ul>
<p id="section-8-4">Given these end-to-end approaches are already being specified,
      it would make little sense to attempt to design hop-by-hop congestion
      signal integrity into a new lower-layer protocol because end-to-end
      integrity inherently achieves hop-by-hop integrity.<a class="pilcrow" href="#section-8-4">¶</a></p>
<p id="section-8-5"><a class="auto internal xref" href="#ecnencap_Guidelines_Backward">Section 6</a> gives vulnerability to
      spoofing as one of the reasons for deprecating feed-backward mode.<a class="pilcrow" href="#section-8-5">¶</a></p>
</section>
</div>
<div id="ecnencap_Conclusions">
<section id="section-9">
      <h2 id="name-conclusions">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-conclusions">Conclusions</a>
      </h2>
<p id="section-9-1">Following the guidance in this document enables ECN support to be
      extended consistently to numerous protocols that encapsulate IP (IPv4 and
      IPv6) so that IP continues to fulfil its role as an end-to-end
      interoperability layer. This includes:<a class="pilcrow" href="#section-9-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9-2.1">A wide range of tunnelling protocols, including those with various
          forms of shim header between two IP headers, possibly also separated
          by an L2 header;<a class="pilcrow" href="#section-9-2.1">¶</a>
</li>
        <li class="normal" id="section-9-2.2">A wide range of subnet technologies, particularly those that work
          in the same 'feed-forward-and-up' mode that is used to support ECN
          in IP and MPLS.<a class="pilcrow" href="#section-9-2.2">¶</a>
</li>
      </ul>
<p id="section-9-3">Guidelines have been defined for supporting propagation of ECN
      between Ethernet and IP on so-called Layer 3 Ethernet switches using a
      'feed-up-and-forward' mode. This approach could enable other subnet
      technologies to pass ECN signals into the IP layer, even if the
      lower-layer protocol does not support ECN.<a class="pilcrow" href="#section-9-3">¶</a></p>
<p id="section-9-4">Finally, attempting to add congestion notification to a subnet technology in
      feed-backward mode is deprecated except in special cases due to its
      likely sluggish response to congestion.<a class="pilcrow" href="#section-9-4">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-10.1">10.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3168">[RFC3168]</dt>
        <dd>
<span class="refAuthor">Ramakrishnan, K.</span>, <span class="refAuthor">Floyd, S.</span>, and <span class="refAuthor">D. Black</span>, <span class="refTitle">"The Addition of Explicit Congestion Notification (ECN) to IP"</span>, <span class="seriesInfo">RFC 3168</span>, <span class="seriesInfo">DOI 10.17487/RFC3168</span>, <time class="refDate" datetime="2001-09">September 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3168">https://www.rfc-editor.org/info/rfc3168</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3819">[RFC3819]</dt>
        <dd>
<span class="refAuthor">Karn, P., Ed.</span>, <span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Fairhurst, G.</span>, <span class="refAuthor">Grossman, D.</span>, <span class="refAuthor">Ludwig, R.</span>, <span class="refAuthor">Mahdavi, J.</span>, <span class="refAuthor">Montenegro, G.</span>, <span class="refAuthor">Touch, J.</span>, and <span class="refAuthor">L. Wood</span>, <span class="refTitle">"Advice for Internet Subnetwork Designers"</span>, <span class="seriesInfo">BCP 89</span>, <span class="seriesInfo">RFC 3819</span>, <span class="seriesInfo">DOI 10.17487/RFC3819</span>, <time class="refDate" datetime="2004-07">July 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3819">https://www.rfc-editor.org/info/rfc3819</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4774">[RFC4774]</dt>
        <dd>
<span class="refAuthor">Floyd, S.</span>, <span class="refTitle">"Specifying Alternate Semantics for the Explicit Congestion Notification (ECN) Field"</span>, <span class="seriesInfo">BCP 124</span>, <span class="seriesInfo">RFC 4774</span>, <span class="seriesInfo">DOI 10.17487/RFC4774</span>, <time class="refDate" datetime="2006-11">November 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4774">https://www.rfc-editor.org/info/rfc4774</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5129">[RFC5129]</dt>
        <dd>
<span class="refAuthor">Davie, B.</span>, <span class="refAuthor">Briscoe, B.</span>, and <span class="refAuthor">J. Tay</span>, <span class="refTitle">"Explicit Congestion Marking in MPLS"</span>, <span class="seriesInfo">RFC 5129</span>, <span class="seriesInfo">DOI 10.17487/RFC5129</span>, <time class="refDate" datetime="2008-01">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5129">https://www.rfc-editor.org/info/rfc5129</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6040">[RFC6040]</dt>
        <dd>
<span class="refAuthor">Briscoe, B.</span>, <span class="refTitle">"Tunnelling of Explicit Congestion Notification"</span>, <span class="seriesInfo">RFC 6040</span>, <span class="seriesInfo">DOI 10.17487/RFC6040</span>, <time class="refDate" datetime="2010-11">November 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6040">https://www.rfc-editor.org/info/rfc6040</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7141">[RFC7141]</dt>
        <dd>
<span class="refAuthor">Briscoe, B.</span> and <span class="refAuthor">J. Manner</span>, <span class="refTitle">"Byte and Packet Congestion Notification"</span>, <span class="seriesInfo">BCP 41</span>, <span class="seriesInfo">RFC 7141</span>, <span class="seriesInfo">DOI 10.17487/RFC7141</span>, <time class="refDate" datetime="2014-02">February 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7141">https://www.rfc-editor.org/info/rfc7141</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9600">[RFC9600]</dt>
      <dd>
<span class="refAuthor">Eastlake 3rd, D.</span> and <span class="refAuthor">B. Briscoe</span>, <span class="refTitle">"TRansparent Interconnection of Lots of Links (TRILL): Explicit Congestion Notification (ECN) Support"</span>, <span class="seriesInfo">RFC 9600</span>, <span class="seriesInfo">DOI 10.17487/RFC9600</span>, <time class="refDate" datetime="2024-08">August 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9600">https://www.rfc-editor.org/info/rfc9600</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-10.2">10.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="ATM-TM-ABR">[ATM-TM-ABR]</dt>
        <dd>
<span class="refAuthor">Cisco</span>, <span class="refTitle">"Understanding the Available Bit Rate (ABR) Service Category for ATM VCs"</span>, <span class="seriesInfo">Design Technote 10415</span>, <time class="refDate" datetime="2005-06">June 2005</time>, <span>&lt;<a href="https://www.cisco.com/c/en/us/support/docs/asynchronous-transfer-mode-atm/atm-traffic-management/10415-atmabr.html">https://www.cisco.com/c/en/us/support/docs/asynchronous-transfer-mode-atm/atm-traffic-management/10415-atmabr.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Buck00">[Buck00]</dt>
        <dd>
<span class="refAuthor">Buckwalter, J.T.</span>, <span class="refTitle">"Frame Relay: Technology and Practice"</span>, <span class="refContent">Addison-Wesley Professional</span>, <span class="seriesInfo">ISBN-13 978-0201485240</span>, <time class="refDate" datetime="2000">2000</time>. </dd>
<dd class="break"></dd>
<dt id="Clos53">[Clos53]</dt>
        <dd>
<span class="refAuthor">Clos, C.</span>, <span class="refTitle">"A Study of Non-Blocking Switching Networks"</span>, <span class="refContent">The Bell System Technical Journal, Vol. 32, Issue 2</span>, <span class="seriesInfo">DOI 10.1002/j.1538-7305.1953.tb01433.x</span>, <time class="refDate" datetime="1953-03">March 1953</time>, <span>&lt;<a href="https://doi.org/10.1002/j.1538-7305.1953.tb01433.x">https://doi.org/10.1002/j.1538-7305.1953.tb01433.x</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="GTPv1">[GTPv1]</dt>
        <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"General Packet Radio Service (GPRS); GPRS Tunnelling Protocol (GTP) across the Gn and Gp interface"</span>, <span class="seriesInfo">Technical Specification 29.060</span>. </dd>
<dd class="break"></dd>
<dt id="GTPv1-U">[GTPv1-U]</dt>
        <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"General Packet Radio System (GPRS) Tunnelling Protocol User Plane (GTPv1-U)"</span>, <span class="seriesInfo">Technical Specification 29.281</span>. </dd>
<dd class="break"></dd>
<dt id="GTPv2-C">[GTPv2-C]</dt>
        <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"3GPP Evolved Packet System (EPS); Evolved General Packet Radio Service (GPRS) Tunnelling Protocol for Control plane (GTPv2-C); Stage 3"</span>, <span class="seriesInfo">Technical Specification 29.274</span>. </dd>
<dd class="break"></dd>
<dt id="IEEE802.1Q">[IEEE802.1Q]</dt>
        <dd>
<span class="refAuthor">IEEE</span>, <span class="refTitle">"IEEE Standard for Local and Metropolitan Area Network--Bridges and Bridged Networks"</span>, <span class="seriesInfo">IEEE Std 802.1Q-2022</span>, <span class="seriesInfo">DOI 10.1109/IEEESTD.2022.10004498</span>, <time class="refDate" datetime="2022-12">December 2022</time>, <span>&lt;<a href="https://doi.org/10.1109/IEEESTD.2022.10004498">https://doi.org/10.1109/IEEESTD.2022.10004498</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-intarea-gue">[INTAREA-GUE]</dt>
        <dd>
<span class="refAuthor">Herbert, T.</span>, <span class="refAuthor">Yong, L.</span>, and <span class="refAuthor">O. Zia</span>, <span class="refTitle">"Generic UDP Encapsulation"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-intarea-gue-09</span>, <time class="refDate" datetime="2019-10-26">26 October 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-intarea-gue-09">https://datatracker.ietf.org/doc/html/draft-ietf-intarea-gue-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="ITU-T.I.371">[ITU-T.I.371]</dt>
        <dd>
<span class="refAuthor">ITU-T</span>, <span class="refTitle">"Traffic control and congestion control in B-ISDN"</span>, <span class="seriesInfo">ITU-T Recommendation I.371</span>, <time class="refDate" datetime="2004-03">March 2004</time>, <span>&lt;<a href="https://www.itu.int/rec/T-REC-I.371-200403-I/en">https://www.itu.int/rec/T-REC-I.371-200403-I/en</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Leiserson85">[Leiserson85]</dt>
        <dd>
<span class="refAuthor">Leiserson, C.E.</span>, <span class="refTitle">"Fat-trees: Universal networks for hardware-efficient supercomputing"</span>, <span class="refContent">IEEE Transactions on Computers, Vol. C-34, Issue 10</span>, <span class="seriesInfo">DOI 10.1109/TC.1985.6312192</span>, <time class="refDate" datetime="1985-10">October 1985</time>, <span>&lt;<a href="https://doi.org/10.1109/TC.1985.6312192">https://doi.org/10.1109/TC.1985.6312192</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="LTE-RA">[LTE-RA]</dt>
        <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access Network (E-UTRAN); Overall description; Stage 2"</span>, <span class="seriesInfo">Technical Specification 36.300</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2003">[RFC2003]</dt>
        <dd>
<span class="refAuthor">Perkins, C.</span>, <span class="refTitle">"IP Encapsulation within IP"</span>, <span class="seriesInfo">RFC 2003</span>, <span class="seriesInfo">DOI 10.17487/RFC2003</span>, <time class="refDate" datetime="1996-10">October 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2003">https://www.rfc-editor.org/info/rfc2003</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2473">[RFC2473]</dt>
        <dd>
<span class="refAuthor">Conta, A.</span> and <span class="refAuthor">S. Deering</span>, <span class="refTitle">"Generic Packet Tunneling in IPv6 Specification"</span>, <span class="seriesInfo">RFC 2473</span>, <span class="seriesInfo">DOI 10.17487/RFC2473</span>, <time class="refDate" datetime="1998-12">December 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2473">https://www.rfc-editor.org/info/rfc2473</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2637">[RFC2637]</dt>
        <dd>
<span class="refAuthor">Hamzeh, K.</span>, <span class="refAuthor">Pall, G.</span>, <span class="refAuthor">Verthein, W.</span>, <span class="refAuthor">Taarud, J.</span>, <span class="refAuthor">Little, W.</span>, and <span class="refAuthor">G. Zorn</span>, <span class="refTitle">"Point-to-Point Tunneling Protocol (PPTP)"</span>, <span class="seriesInfo">RFC 2637</span>, <span class="seriesInfo">DOI 10.17487/RFC2637</span>, <time class="refDate" datetime="1999-07">July 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2637">https://www.rfc-editor.org/info/rfc2637</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2661">[RFC2661]</dt>
        <dd>
<span class="refAuthor">Townsley, W.</span>, <span class="refAuthor">Valencia, A.</span>, <span class="refAuthor">Rubens, A.</span>, <span class="refAuthor">Pall, G.</span>, <span class="refAuthor">Zorn, G.</span>, and <span class="refAuthor">B. Palter</span>, <span class="refTitle">"Layer Two Tunneling Protocol "L2TP""</span>, <span class="seriesInfo">RFC 2661</span>, <span class="seriesInfo">DOI 10.17487/RFC2661</span>, <time class="refDate" datetime="1999-08">August 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2661">https://www.rfc-editor.org/info/rfc2661</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2784">[RFC2784]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Li, T.</span>, <span class="refAuthor">Hanks, S.</span>, <span class="refAuthor">Meyer, D.</span>, and <span class="refAuthor">P. Traina</span>, <span class="refTitle">"Generic Routing Encapsulation (GRE)"</span>, <span class="seriesInfo">RFC 2784</span>, <span class="seriesInfo">DOI 10.17487/RFC2784</span>, <time class="refDate" datetime="2000-03">March 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2784">https://www.rfc-editor.org/info/rfc2784</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2884">[RFC2884]</dt>
        <dd>
<span class="refAuthor">Hadi Salim, J.</span> and <span class="refAuthor">U. Ahmed</span>, <span class="refTitle">"Performance Evaluation of Explicit Congestion Notification (ECN) in IP Networks"</span>, <span class="seriesInfo">RFC 2884</span>, <span class="seriesInfo">DOI 10.17487/RFC2884</span>, <time class="refDate" datetime="2000-07">July 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2884">https://www.rfc-editor.org/info/rfc2884</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2983">[RFC2983]</dt>
        <dd>
<span class="refAuthor">Black, D.</span>, <span class="refTitle">"Differentiated Services and Tunnels"</span>, <span class="seriesInfo">RFC 2983</span>, <span class="seriesInfo">DOI 10.17487/RFC2983</span>, <time class="refDate" datetime="2000-10">October 2000</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2983">https://www.rfc-editor.org/info/rfc2983</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3931">[RFC3931]</dt>
        <dd>
<span class="refAuthor">Lau, J., Ed.</span>, <span class="refAuthor">Townsley, M., Ed.</span>, and <span class="refAuthor">I. Goyret, Ed.</span>, <span class="refTitle">"Layer Two Tunneling Protocol - Version 3 (L2TPv3)"</span>, <span class="seriesInfo">RFC 3931</span>, <span class="seriesInfo">DOI 10.17487/RFC3931</span>, <time class="refDate" datetime="2005-03">March 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3931">https://www.rfc-editor.org/info/rfc3931</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4301">[RFC4301]</dt>
        <dd>
<span class="refAuthor">Kent, S.</span> and <span class="refAuthor">K. Seo</span>, <span class="refTitle">"Security Architecture for the Internet Protocol"</span>, <span class="seriesInfo">RFC 4301</span>, <span class="seriesInfo">DOI 10.17487/RFC4301</span>, <time class="refDate" datetime="2005-12">December 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4301">https://www.rfc-editor.org/info/rfc4301</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4380">[RFC4380]</dt>
        <dd>
<span class="refAuthor">Huitema, C.</span>, <span class="refTitle">"Teredo: Tunneling IPv6 over UDP through Network Address Translations (NATs)"</span>, <span class="seriesInfo">RFC 4380</span>, <span class="seriesInfo">DOI 10.17487/RFC4380</span>, <time class="refDate" datetime="2006-02">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4380">https://www.rfc-editor.org/info/rfc4380</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5415">[RFC5415]</dt>
        <dd>
<span class="refAuthor">Calhoun, P., Ed.</span>, <span class="refAuthor">Montemurro, M., Ed.</span>, and <span class="refAuthor">D. Stanley, Ed.</span>, <span class="refTitle">"Control And Provisioning of Wireless Access Points (CAPWAP) Protocol Specification"</span>, <span class="seriesInfo">RFC 5415</span>, <span class="seriesInfo">DOI 10.17487/RFC5415</span>, <time class="refDate" datetime="2009-03">March 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5415">https://www.rfc-editor.org/info/rfc5415</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6633">[RFC6633]</dt>
        <dd>
<span class="refAuthor">Gont, F.</span>, <span class="refTitle">"Deprecation of ICMP Source Quench Messages"</span>, <span class="seriesInfo">RFC 6633</span>, <span class="seriesInfo">DOI 10.17487/RFC6633</span>, <time class="refDate" datetime="2012-05">May 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6633">https://www.rfc-editor.org/info/rfc6633</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6660">[RFC6660]</dt>
        <dd>
<span class="refAuthor">Briscoe, B.</span>, <span class="refAuthor">Moncaster, T.</span>, and <span class="refAuthor">M. Menth</span>, <span class="refTitle">"Encoding Three Pre-Congestion Notification (PCN) States in the IP Header Using a Single Diffserv Codepoint (DSCP)"</span>, <span class="seriesInfo">RFC 6660</span>, <span class="seriesInfo">DOI 10.17487/RFC6660</span>, <time class="refDate" datetime="2012-07">July 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6660">https://www.rfc-editor.org/info/rfc6660</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7323">[RFC7323]</dt>
        <dd>
<span class="refAuthor">Borman, D.</span>, <span class="refAuthor">Braden, B.</span>, <span class="refAuthor">Jacobson, V.</span>, and <span class="refAuthor">R. Scheffenegger, Ed.</span>, <span class="refTitle">"TCP Extensions for High Performance"</span>, <span class="seriesInfo">RFC 7323</span>, <span class="seriesInfo">DOI 10.17487/RFC7323</span>, <time class="refDate" datetime="2014-09">September 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7323">https://www.rfc-editor.org/info/rfc7323</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7348">[RFC7348]</dt>
        <dd>
<span class="refAuthor">Mahalingam, M.</span>, <span class="refAuthor">Dutt, D.</span>, <span class="refAuthor">Duda, K.</span>, <span class="refAuthor">Agarwal, P.</span>, <span class="refAuthor">Kreeger, L.</span>, <span class="refAuthor">Sridhar, T.</span>, <span class="refAuthor">Bursell, M.</span>, and <span class="refAuthor">C. Wright</span>, <span class="refTitle">"Virtual eXtensible Local Area Network (VXLAN): A Framework for Overlaying Virtualized Layer 2 Networks over Layer 3 Networks"</span>, <span class="seriesInfo">RFC 7348</span>, <span class="seriesInfo">DOI 10.17487/RFC7348</span>, <time class="refDate" datetime="2014-08">August 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7348">https://www.rfc-editor.org/info/rfc7348</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7567">[RFC7567]</dt>
        <dd>
<span class="refAuthor">Baker, F., Ed.</span> and <span class="refAuthor">G. Fairhurst, Ed.</span>, <span class="refTitle">"IETF Recommendations Regarding Active Queue Management"</span>, <span class="seriesInfo">BCP 197</span>, <span class="seriesInfo">RFC 7567</span>, <span class="seriesInfo">DOI 10.17487/RFC7567</span>, <time class="refDate" datetime="2015-07">July 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7567">https://www.rfc-editor.org/info/rfc7567</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7637">[RFC7637]</dt>
        <dd>
<span class="refAuthor">Garg, P., Ed.</span> and <span class="refAuthor">Y. Wang, Ed.</span>, <span class="refTitle">"NVGRE: Network Virtualization Using Generic Routing Encapsulation"</span>, <span class="seriesInfo">RFC 7637</span>, <span class="seriesInfo">DOI 10.17487/RFC7637</span>, <time class="refDate" datetime="2015-09">September 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7637">https://www.rfc-editor.org/info/rfc7637</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7713">[RFC7713]</dt>
        <dd>
<span class="refAuthor">Mathis, M.</span> and <span class="refAuthor">B. Briscoe</span>, <span class="refTitle">"Congestion Exposure (ConEx) Concepts, Abstract Mechanism, and Requirements"</span>, <span class="seriesInfo">RFC 7713</span>, <span class="seriesInfo">DOI 10.17487/RFC7713</span>, <time class="refDate" datetime="2015-12">December 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7713">https://www.rfc-editor.org/info/rfc7713</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7780">[RFC7780]</dt>
        <dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Zhang, M.</span>, <span class="refAuthor">Perlman, R.</span>, <span class="refAuthor">Banerjee, A.</span>, <span class="refAuthor">Ghanwani, A.</span>, and <span class="refAuthor">S. Gupta</span>, <span class="refTitle">"Transparent Interconnection of Lots of Links (TRILL): Clarifications, Corrections, and Updates"</span>, <span class="seriesInfo">RFC 7780</span>, <span class="seriesInfo">DOI 10.17487/RFC7780</span>, <time class="refDate" datetime="2016-02">February 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7780">https://www.rfc-editor.org/info/rfc7780</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8084">[RFC8084]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G.</span>, <span class="refTitle">"Network Transport Circuit Breakers"</span>, <span class="seriesInfo">BCP 208</span>, <span class="seriesInfo">RFC 8084</span>, <span class="seriesInfo">DOI 10.17487/RFC8084</span>, <time class="refDate" datetime="2017-03">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8084">https://www.rfc-editor.org/info/rfc8084</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8087">[RFC8087]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G.</span> and <span class="refAuthor">M. Welzl</span>, <span class="refTitle">"The Benefits of Using Explicit Congestion Notification (ECN)"</span>, <span class="seriesInfo">RFC 8087</span>, <span class="seriesInfo">DOI 10.17487/RFC8087</span>, <time class="refDate" datetime="2017-03">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8087">https://www.rfc-editor.org/info/rfc8087</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8257">[RFC8257]</dt>
        <dd>
<span class="refAuthor">Bensley, S.</span>, <span class="refAuthor">Thaler, D.</span>, <span class="refAuthor">Balasubramanian, P.</span>, <span class="refAuthor">Eggert, L.</span>, and <span class="refAuthor">G. Judd</span>, <span class="refTitle">"Data Center TCP (DCTCP): TCP Congestion Control for Data Centers"</span>, <span class="seriesInfo">RFC 8257</span>, <span class="seriesInfo">DOI 10.17487/RFC8257</span>, <time class="refDate" datetime="2017-10">October 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8257">https://www.rfc-editor.org/info/rfc8257</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8300">[RFC8300]</dt>
        <dd>
<span class="refAuthor">Quinn, P., Ed.</span>, <span class="refAuthor">Elzur, U., Ed.</span>, and <span class="refAuthor">C. Pignataro, Ed.</span>, <span class="refTitle">"Network Service Header (NSH)"</span>, <span class="seriesInfo">RFC 8300</span>, <span class="seriesInfo">DOI 10.17487/RFC8300</span>, <time class="refDate" datetime="2018-01">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8300">https://www.rfc-editor.org/info/rfc8300</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8311">[RFC8311]</dt>
        <dd>
<span class="refAuthor">Black, D.</span>, <span class="refTitle">"Relaxing Restrictions on Explicit Congestion Notification (ECN) Experimentation"</span>, <span class="seriesInfo">RFC 8311</span>, <span class="seriesInfo">DOI 10.17487/RFC8311</span>, <time class="refDate" datetime="2018-01">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8311">https://www.rfc-editor.org/info/rfc8311</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8926">[RFC8926]</dt>
        <dd>
<span class="refAuthor">Gross, J., Ed.</span>, <span class="refAuthor">Ganga, I., Ed.</span>, and <span class="refAuthor">T. Sridhar, Ed.</span>, <span class="refTitle">"Geneve: Generic Network Virtualization Encapsulation"</span>, <span class="seriesInfo">RFC 8926</span>, <span class="seriesInfo">DOI 10.17487/RFC8926</span>, <time class="refDate" datetime="2020-11">November 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8926">https://www.rfc-editor.org/info/rfc8926</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9300">[RFC9300]</dt>
        <dd>
<span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Fuller, V.</span>, <span class="refAuthor">Meyer, D.</span>, <span class="refAuthor">Lewis, D.</span>, and <span class="refAuthor">A. Cabellos, Ed.</span>, <span class="refTitle">"The Locator/ID Separation Protocol (LISP)"</span>, <span class="seriesInfo">RFC 9300</span>, <span class="seriesInfo">DOI 10.17487/RFC9300</span>, <time class="refDate" datetime="2022-10">October 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9300">https://www.rfc-editor.org/info/rfc9300</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9331">[RFC9331]</dt>
        <dd>
<span class="refAuthor">De Schepper, K.</span> and <span class="refAuthor">B. Briscoe, Ed.</span>, <span class="refTitle">"The Explicit Congestion Notification (ECN) Protocol for Low Latency, Low Loss, and Scalable Throughput (L4S)"</span>, <span class="seriesInfo">RFC 9331</span>, <span class="seriesInfo">DOI 10.17487/RFC9331</span>, <time class="refDate" datetime="2023-01">January 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9331">https://www.rfc-editor.org/info/rfc9331</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9601">[RFC9601]</dt>
        <dd>
<span class="refAuthor">Briscoe, B.</span>, <span class="refTitle">"Propagating Explicit Congestion Notification across IP Tunnel Headers Separated by a Shim"</span>, <span class="seriesInfo">RFC 9601</span>, <span class="seriesInfo">DOI 10.17487/RFC9601</span>, <time class="refDate" datetime="2024-08">August 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9601">https://www.rfc-editor.org/info/rfc9601</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="UTRAN">[UTRAN]</dt>
      <dd>
<span class="refAuthor">3GPP</span>, <span class="refTitle">"UTRAN overall description"</span>, <span class="seriesInfo">Technical Specification 25.401</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="ecnencap_Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">Thanks to <span class="contact-name">Gorry Fairhurst</span> and <span class="contact-name">David Black</span> for extensive reviews.  Thanks also to the
      following reviewers: <span class="contact-name">Joe Touch</span>, <span class="contact-name">Andrew McGregor</span>, <span class="contact-name">Richard       Scheffenegger</span>, <span class="contact-name">Ingemar Johansson</span>, <span class="contact-name">Piers O'Hanlon</span>, <span class="contact-name">Donald Eastlake 3rd</span>,
      <span class="contact-name">Jonathan Morton</span>, <span class="contact-name">Markku       Kojo</span>, <span class="contact-name">Sebastian Möller</span>, <span class="contact-name">Martin Duke</span>, and <span class="contact-name">Michael Welzl</span>, who
      pointed out that lower-layer congestion notification signals may have
      different semantics to those in IP. Thanks are also due to the Transport and Services Working Group (tsvwg)
      chairs, TSV ADs and IETF liaison people such as <span class="contact-name">Eric       Gray</span>, <span class="contact-name">Dan Romascanu</span> and <span class="contact-name">Gonzalo Camarillo</span> for helping with the liaisons with the
      IEEE and 3GPP. And thanks to <span class="contact-name">Georg Mayer</span> and
      particularly to <span class="contact-name">Erik Guttman</span> for the extensive
      search and categorization of any 3GPP specifications that cite ECN
      specifications. Thanks also to the Area Reviewers <span class="contact-name">Dan       Harkins</span>, <span class="contact-name">Paul Kyzivat</span>, <span class="contact-name">Sue       Hares</span>, and <span class="contact-name">Dale Worley</span>.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<p id="appendix-A-2"><span class="contact-name">Bob Briscoe</span> was part-funded by the European
      Community under its Seventh Framework Programme through the Trilogy
      project (ICT-216372) for initial drafts then through the Reducing Internet Transport Latency (RITE)
      project (ICT-317700), and for final drafts (from -18) he was funded by Apple Inc. The
      views expressed here are solely those of the authors.<a class="pilcrow" href="#appendix-A-2">¶</a></p>
</section>
</div>
<section id="appendix-B">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Pat Thaler</span></div>
<div class="left" dir="auto"><span class="org">Broadcom Corporation (retired)</span></div>
<div class="left" dir="auto">
<span class="region">CA</span> </div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
</address>
<p id="appendix-B-1">Pat was a coauthor of this document, but retired before its
      publication.<a class="pilcrow" href="#appendix-B-1">¶</a></p>
</section>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Bob Briscoe</span></div>
<div class="left" dir="auto"><span class="org">Independent</span></div>
<div class="left" dir="auto"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:ietf@bobbriscoe.net">ietf@bobbriscoe.net</a>
</div>
<div class="url">
<span>URI:</span>
<a class="url" href="https://bobbriscoe.net/">https://bobbriscoe.net/</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">John Kaippallimalil</span></div>
<div class="left" dir="auto"><span class="org">Futurewei</span></div>
<div class="left" dir="auto"><span class="street-address">5700 Tennyson Parkway, Suite 600</span></div>
<div class="left" dir="auto">
<span class="locality">Plano</span>, <span class="region">Texas</span> <span class="postal-code">75024</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:kjohn@futurewei.com">kjohn@futurewei.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>