<html><head></head><body><pre>Internet Engineering Task Force (IETF)                      M. Bjorklund
Request for Comments: 8528                                Tail-f Systems
Category: Standards Track                                      L. Lhotka
ISSN: 2070-1721                                                   CZ.NIC
                                                              March 2019


                           <span class="h1">YANG Schema Mount</span>

Abstract

   This document defines a mechanism that adds the schema trees defined
   by a set of YANG modules onto a mount point defined in the schema
   tree in another YANG module.

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc7841#section-2">Section 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8528">https://www.rfc-editor.org/info/rfc8528</a>.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.








<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Terminology and Notation ........................................<a href="#page-6">6</a>
      <a href="#section-2.1">2.1</a>. Tree Diagrams ..............................................<a href="#page-7">7</a>
      <a href="#section-2.2">2.2</a>. Namespace Prefixes .........................................<a href="#page-7">7</a>
   <a href="#section-3">3</a>. Schema Mount ....................................................<a href="#page-8">8</a>
      <a href="#section-3.1">3.1</a>. Mount Point Definition .....................................<a href="#page-8">8</a>
      <a href="#section-3.2">3.2</a>. Data Model .................................................<a href="#page-9">9</a>
      <a href="#section-3.3">3.3</a>. Specification of the Mounted Schema ........................<a href="#page-9">9</a>
      <a href="#section-3.4">3.4</a>. Multiple Levels of Schema Mount ...........................<a href="#page-10">10</a>
   <a href="#section-4">4</a>. Referring to Data Nodes in the Parent Schema ...................<a href="#page-10">10</a>
   <a href="#section-5">5</a>. RPC Operations and Notifications ...............................<a href="#page-11">11</a>
   <a href="#section-6">6</a>. NMDA Considerations ............................................<a href="#page-12">12</a>
   <a href="#section-7">7</a>. Interaction with NACM ..........................................<a href="#page-12">12</a>
   <a href="#section-8">8</a>. Implementation Notes ...........................................<a href="#page-13">13</a>
   <a href="#section-9">9</a>. Schema Mount YANG Module .......................................<a href="#page-13">13</a>
   <a href="#section-10">10</a>. IANA Considerations ...........................................<a href="#page-18">18</a>
   <a href="#section-11">11</a>. Security Considerations .......................................<a href="#page-18">18</a>
   <a href="#section-12">12</a>. References ....................................................<a href="#page-19">19</a>
      <a href="#section-12.1">12.1</a>. Normative References .....................................<a href="#page-19">19</a>
      <a href="#section-12.2">12.2</a>. Informative References ...................................<a href="#page-21">21</a>
   <a href="#appendix-A">Appendix A</a>.  Example: Device Model with LNEs and NIs ..............<a href="#page-22">22</a>
     <a href="#appendix-A.1">A.1</a>.  Physical Device ...........................................<a href="#page-22">22</a>
     <a href="#appendix-A.2">A.2</a>.  Logical Network Elements ..................................<a href="#page-24">24</a>
     <a href="#appendix-A.3">A.3</a>.  Network Instances .........................................<a href="#page-27">27</a>
     <a href="#appendix-A.4">A.4</a>.  Invoking an RPC Operation .................................<a href="#page-28">28</a>
   Contributors ......................................................<a href="#page-28">28</a>
   Authors' Addresses ................................................<a href="#page-28">28</a>






















<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   Modularity and extensibility are among the leading design principles
   of the YANG data modeling language.  As a result, the same YANG
   module can be combined with various sets of other modules to form a
   data model that is tailored to meet the requirements of a specific
   use case.  Server implementors are only required to specify all YANG
   modules comprising the data model (together with their revisions and
   other optional choices) in the YANG library data ([<a href="./rfc7895" title='"YANG Module Library"'>RFC7895</a>],
   [<a href="./rfc8525" title='"YANG Library"'>RFC8525</a>], and <a href="./rfc7950#section-5.6.4">Section 5.6.4 of [RFC7950]</a>) implemented by the server.
   Such YANG modules appear in the data model "side by side", i.e., top-
   level data nodes of each module (if there are any) are also top-level
   nodes of the overall data model.

   YANG has two mechanisms for contributing a schema hierarchy defined
   elsewhere to the contents of an internal node of the schema tree.
   These mechanisms are realized through the following YANG statements:

   o  The "uses" statement explicitly incorporates the contents of a
      grouping defined in the same or another module.  See <a href="./rfc7950#section-4.2.6">Section 4.2.6
      of [RFC7950]</a> for more details.

   o  The "augment" statement explicitly adds contents to a target node
      defined in the same or another module.  See <a href="./rfc7950#section-4.2.8">Section 4.2.8 of
      [RFC7950]</a> for more details.

   With both mechanisms, the YANG module with the "uses" or "augment"
   statement explicitly defines the exact location in the schema tree
   where the new nodes are placed.

   In some cases, these mechanisms are not sufficient; it is sometimes
   necessary for an existing module (or a set of modules) to be added to
   the data model starting at locations other than the root.  For
   example, YANG modules such as "ietf-interfaces" [<a href="./rfc8343" title='"A YANG Data Model for Interface Management"'>RFC8343</a>] are defined
   so as to be used in a data model of a physical device.  Now suppose
   we want to model a device that supports multiple logical devices
   [<a href="./rfc8530" title='"YANG Model for Logical Network Elements"'>RFC8530</a>], each of which has its own instantiation of
   "ietf-interfaces", and possibly other modules; at the same time, we
   want to be able to manage all these logical devices from the master
   device.  Hence, we would like to have a schema tree like this:











<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


     +--rw interfaces
     |  +--rw interface* [name]
     |     ...
     +--rw logical-network-element* [name]
        +--rw name
        |   ...
        +--rw interfaces
          +--rw interface* [name]
             ...

   With the "uses" approach, the complete schema tree of
   "ietf-interfaces" would have to be wrapped in a grouping, and then
   this grouping would have to be used at the top level (for the master
   device) and then also in the "logical-network-element" list (for the
   logical devices).  This approach has several disadvantages:

   o  It is not scalable because every time there is a new YANG module
      that needs to be added to the logical device model, we have to
      update the model for logical devices with another "uses" statement
      pulling in contents of the new module.

   o  Absolute references to nodes defined inside a grouping may break
      if the grouping is used in different locations.

   o  Nodes defined inside a grouping belong to the namespace of the
      module where it is used, which makes references to such nodes from
      other modules difficult or even impossible.

   o  It would be difficult for vendors to add proprietary modules when
      the "uses" statements are defined in a standard module.

   With the "augment" approach, "ietf-interfaces" would have to augment
   the "logical-network-element" list with all its nodes and, at the
   same time, define all its nodes at the top level.  The same hierarchy
   of nodes would thus have to be defined twice, which is clearly not
   scalable either.

   This document introduces a new mechanism, denoted as "schema mount",
   that allows for mounting one data model consisting of any number of
   YANG modules at a specified location of another (parent) schema.
   Unlike the "uses" and "augment" approaches discussed above, the
   mounted modules needn't be specially prepared for mounting;
   consequently, existing modules such as "ietf-interfaces" can be
   mounted without any modifications.







<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


   The basic idea of schema mount is to label a data node in the parent
   schema as the mount point and then define a complete data model to be
   attached to the mount point so that the labeled data node effectively
   becomes the root node of the mounted data model.

   In principle, the mounted schema can be specified at three different
   phases of the data model life cycle:

   1.  Design time: The mounted schema is defined along with the mount
       point in the parent YANG module.  In this case, the mounted
       schema has to be the same for every implementation of the parent
       module.

   2.  Implementation time: The mounted schema is defined by a server
       implementor and is as stable as the YANG library information of
       the server.

   3.  Run time: The mounted schema is defined by instance data that is
       part of the mounted data model.  If there are multiple instances
       of the same mount point (e.g., in multiple entries of a list),
       the mounted data model may be different for each instance.

   The schema mount mechanism defined in this document provides support
   only for the latter two cases.  Design-time mounts are outside the
   scope of this document and could be possibly dealt with in a future
   revision of the YANG data modeling language.

   Schema mount applies to the data model and specifically does not
   assume anything about the source of instance data for the mounted
   schemas.  It may be implemented using the same instrumentation as the
   rest of the system, or it may be implemented by querying some other
   system.  Future specifications may define mechanisms to control or
   monitor the implementation of specific mount points.

   How and when specific mount points are instantiated by the server is
   out of scope for this document.  Such mechanisms may be defined in
   future specifications.

   This document allows mounting of complete data models only.  Other
   specifications may extend this model by defining additional
   mechanisms such as mounting sub-hierarchies of a module.

   The YANG modules in this document conform to the Network Management
   Datastore Architecture (NMDA) [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>].







<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Terminology%20and%20Notation"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Terminology and Notation</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a> [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="./rfc8174" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

   The following terms are defined in [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>] and are not redefined
   here:

   o  action

   o  container

   o  data node

   o  list

   o  RPC operation

   o  schema node

   o  schema tree

   The following terms are defined in [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>] and are not redefined
   here:

   o  client

   o  notification

   o  operational state

   o  server

   The following term is defined in [<a href="./rfc8343" title='"A YANG Data Model for Interface Management"'>RFC8343</a>] and is not redefined here:

   o  system-controlled interface

   The following term is defined in [<a href="./rfc8525" title='"YANG Library"'>RFC8525</a>] and is not redefined here:

   o  YANG library content identifier








<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


   The following additional terms are used in this document:

   o  mount point: A container or a list node whose definition contains
      the "mount-point" extension statement.  The argument of the
      "mount-point" extension statement defines a label for the mount
      point.

   o  schema: A collection of schema trees with a common root.

   o  top-level schema: A schema rooted at the root node.

   o  mounted schema: A schema rooted at a mount point.

   o  parent schema (of a mounted schema): A schema containing the mount
      point.

   o  schema mount: The mechanism to combine data models defined in this
      document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.%20%20Tree%20Diagrams"></a><a class="selflink" href="#section-2.1" id="section-2.1">2.1</a>.  Tree Diagrams</span>

   Tree diagrams used in this document follow the notation defined in
   [<a href="./rfc8340" title='"YANG Tree Diagrams"'>RFC8340</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.%20%20Namespace%20Prefixes"></a><a class="selflink" href="#section-2.2" id="section-2.2">2.2</a>.  Namespace Prefixes</span>

   In this document, names of data nodes, YANG extensions, actions, and
   other data model objects are often used without a prefix when the
   YANG module in which they are defined is clear from the context.
   Otherwise, names are prefixed using the standard prefix associated
   with the corresponding YANG module, as shown in Table 1.

        +---------+------------------------+----------------------+
        | Prefix  | YANG module            | Reference            |
        +---------+------------------------+----------------------+
        | yangmnt | ietf-yang-schema-mount | <a href="#section-9">Section 9</a>            |
        | inet    | ietf-inet-types        | [<a href="./rfc6991" title='"Common YANG Data Types"'>RFC6991</a>]            |
        | yang    | ietf-yang-types        | [<a href="./rfc6991" title='"Common YANG Data Types"'>RFC6991</a>]            |
        | yanglib | ietf-yang-library      | [<a href="./rfc7895" title='"YANG Module Library"'>RFC7895</a>], [<a href="./rfc8525" title='"YANG Library"'>RFC8525</a>] |
        +---------+------------------------+----------------------+

                        Table 1: Namespace Prefixes









<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Schema%20Mount"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Schema Mount</span>

   The schema mount mechanism defined in this document provides a new
   extensibility mechanism for use with YANG 1.1 [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>].  In contrast
   to the existing mechanisms described in <a href="#section-1">Section 1</a>, schema mount
   defines the relationship between the source and target YANG modules
   outside these modules.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20Mount%20Point%20Definition"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Mount Point Definition</span>

   A container or list node becomes a mount point if the "mount-point"
   extension statement (defined in the "ietf-yang-schema-mount" module)
   is used in its definition.  This extension can appear only as a
   substatement of "container" and "list" statements.

   The argument of the "mount-point" extension statement is a YANG
   identifier that defines a label for the mount point.  A module MAY
   contain multiple "mount-point" extension statements having the same
   argument.

   It is therefore up to the designer of the parent schema to decide
   about the placement of mount points.  A mount point can also be made
   conditional by placing "if-feature" and/or "when" as substatements of
   the "container" or "list" statement that represents the mount point.

   The "mount-point" extension statement MUST NOT be used in a YANG
   version 1 module [<a href="./rfc6020" title='"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"'>RFC6020</a>].  If used in a YANG version 1 module, it
   would not be possible to invoke mounted RPC operations and receive
   mounted notifications.  See <a href="#section-5">Section 5</a> for details.  Note, however,
   that modules written in any YANG version, including version 1, can be
   mounted under a mount point.

   Note that the "mount-point" extension statement does not define a new
   data node.

















<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20Data%20Model"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  Data Model</span>

   This document defines the YANG 1.1 module [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>]
   "ietf-yang-schema-mount", which has the following structure:

   module: ietf-yang-schema-mount
     +--ro schema-mounts
        +--ro namespace* [prefix]
        |  +--ro prefix    yang:yang-identifier
        |  +--ro uri?      inet:uri
        +--ro mount-point* [module label]
           +--ro module                 yang:yang-identifier
           +--ro label                  yang:yang-identifier
           +--ro config?                boolean
           +--ro (schema-ref)
              +--:(inline)
              |  +--ro inline!
              +--:(shared-schema)
                 +--ro shared-schema!
                    +--ro parent-reference*   yang:xpath1.0

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.3.%20%20Specification%20of%20the%20Mounted%20Schema"></a><a class="selflink" href="#section-3.3" id="section-3.3">3.3</a>.  Specification of the Mounted Schema</span>

   Mounted schemas for all mount points in the parent schema are
   determined from state data in the "/schema-mounts" container.

   Generally, the modules that are mounted under a mount point have no
   relation to the modules in the parent schema; specifically, if a
   module is mounted, it may or may not be present in the parent schema;
   if present, its data will generally have no relationship to the data
   of the parent.  Exceptions are possible and need to be defined in the
   model itself.  For example, [<a href="./rfc8530" title='"YANG Model for Logical Network Elements"'>RFC8530</a>] defines a mechanism to bind
   interfaces to mounted logical network elements.

   The "/schema-mounts" container has the "mount-point" list as one of
   its children.  Every entry of this list refers (through its key) to a
   mount point and specifies the mounted schema.

   If a mount point is defined in the parent schema but does not have an
   entry in the "mount-point" list, then the mounted schema is void,
   i.e., instances of that mount point MUST NOT contain any data except
   those that are defined in the parent schema.

   If multiple mount points with the same name are defined in the same
   module -- either directly or because the mount point is defined in a
   grouping and the grouping is used multiple times -- then the
   corresponding "mount-point" entry applies equally to all such mount
   points.



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


   The "config" property of mounted schema nodes is overridden and all
   nodes in the mounted schema are read-only ("config false") if at
   least one of the following conditions is satisfied for a mount point:

   o  The mount point is itself defined as "config false".

   o  The "config" leaf in the corresponding entry of the "mount-point"
      list is set to "false".

   An entry of the "mount-point" list can specify the mounted schema in
   two different ways: "inline" or "shared-schema".

   The mounted schema is determined at run time: every instance of the
   mount point that exists in the operational state MUST contain a copy
   of YANG library data that defines the mounted schema in exactly the
   same way as a top-level schema.  A client is expected to retrieve
   this data from the instance tree.  In the "inline" case, instances of
   the same mount point MAY use different mounted schemas, whereas in
   the "shared-schema" case, all instances MUST use the same mounted
   schema.  This means that in the "shared-schema" case, all instances
   of the same mount point MUST have the same YANG library content
   identifier.  In the "inline" case, if two instances have the same
   YANG library content identifier, it is not guaranteed that the YANG
   library contents are equal for these instances.

   Examples of "inline" and "shared-schema" can be found in <a href="#appendix-A.2">Appendix A.2</a>
   and <a href="#appendix-A.3">Appendix A.3</a>, respectively.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.4.%20%20Multiple%20Levels%20of%20Schema%20Mount"></a><a class="selflink" href="#section-3.4" id="section-3.4">3.4</a>.  Multiple Levels of Schema Mount</span>

   YANG modules in a mounted schema MAY again contain mount points under
   which other schemas can be mounted.  Consequently, it is possible to
   construct data models with an arbitrary number of mounted schemas.  A
   schema for a mount point contained in a mounted module can be
   specified by implementing the "ietf-yang-library" and
   "ietf-yang-schema-mount" modules in the mounted schema and specifying
   the schemas in exactly the same way as the top-level schema.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Referring%20to%20Data%20Nodes%20in%20the%20Parent%20Schema"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Referring to Data Nodes in the Parent Schema</span>

   A fundamental design principle of schema mount is that the mounted
   schema works exactly as a top-level schema, i.e., it is confined to
   the "mount jail".  This means that all paths in the mounted schema
   (in leafrefs, instance-identifiers, XPath [<a href="#ref-XPATH" title='"XML Path Language (XPath) Version 1.0"'>XPATH</a>] expressions, and
   target nodes of "augment" statements) are interpreted with the mount
   point as the root node.  YANG modules of the mounted schema as well
   as corresponding instance data thus cannot refer to schema nodes or
   instance data outside the "mount jail".



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


   However, this restriction is sometimes too severe.  A typical example
   is network instances (NIs) [<a href="./rfc8529" title='"YANG Data Model for Network Instances"'>RFC8529</a>] in which each NI has its own
   routing engine but the list of interfaces is global and shared by all
   NIs.  If we want to model this organization with the NI schema
   mounted using schema mount, the overall schema tree would look
   schematically as follows:

     +--rw interfaces
     |  +--rw interface* [name]
     |     ...
     +--rw network-instances
        +--rw network-instance* [name]
           +--rw name
           +--mp root
              +--rw routing
                 ...

   Here, the "root" container is the mount point for the NI schema.
   Routing configuration inside an NI often needs to refer to interfaces
   (at least those that are assigned to the NI), which is impossible
   unless such a reference can point to a node in the parent schema
   (interface name).

   Therefore, schema mount also allows for such references.  For every
   mount point in the "shared-schema" case, it is possible to specify a
   leaf-list named "parent-reference" that contains zero or more XPath
   1.0 expressions.  Each expression is evaluated with the node in the
   parent data tree where the mount point is defined as the context
   node.  The result of this evaluation MUST be a node-set (see the
   description of the "parent-reference" node for a complete definition
   of the evaluation context).  For the purposes of evaluating XPath
   expressions within the mounted data tree, the union of all such node-
   sets is added to the accessible data tree.

   It is worth emphasizing that the nodes specified in the
   "parent-reference" leaf-list are available in the mounted schema only
   for XPath evaluations.  In particular, they cannot be accessed in the
   mounted schema via network management protocols such as NETCONF
   [<a href="./rfc6241" title='"Network Configuration Protocol (NETCONF)"'>RFC6241</a>] or RESTCONF [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20RPC%20Operations%20and%20Notifications"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  RPC Operations and Notifications</span>

   If a mounted YANG module defines an RPC operation, clients can invoke
   this operation as if it were defined as an action for the
   corresponding mount point; see <a href="./rfc7950#section-7.15">Section 7.15 of [RFC7950]</a>.  An example
   of this is given in <a href="#appendix-A.4">Appendix A.4</a>.





<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


   Similarly, if the server emits a notification defined at the top
   level of any mounted module, it MUST be represented as if the
   notification was connected to the mount point; see <a href="./rfc7950#section-7.16">Section 7.16 of
   [RFC7950]</a>.

   Note that inline actions and notifications will not work when they
   are contained within a list node without a "key" statement (see
   Sections <a href="#section-7.15">7.15</a> and <a href="#section-7.16">7.16</a> of [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>]).  Therefore, to be useful, mount
   points that contain modules with RPCs, actions, and notifications
   SHOULD NOT have any ancestor node that is a list node without a "key"
   statement.  This requirement applies to the definition of modules
   using the "mount-point" extension statement.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20NMDA%20Considerations"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  NMDA Considerations</span>

   The schema mount solution presented in this document is designed to
   work with both servers that implement the NMDA [<a href="./rfc8342" title='"Network Management Datastore Architecture (NMDA)"'>RFC8342</a>] and old
   servers that don't implement the NMDA.

   Specifically, a server that doesn't support the NMDA MAY implement
   revision 2016-06-21 of "ietf-yang-library" [<a href="./rfc7895" title='"YANG Module Library"'>RFC7895</a>] under a mount
   point.  A server that supports the NMDA MUST implement at least
   revision 2019-01-04 of "ietf-yang-library" [<a href="./rfc8525" title='"YANG Library"'>RFC8525</a>] under a mount
   point.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20Interaction%20with%20NACM"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  Interaction with NACM</span>

   If the Network Configuration Access Control Model (NACM) [<a href="./rfc8341" title='"Network Configuration Access Control Model"'>RFC8341</a>] is
   implemented on a server, it is used to control access to nodes
   defined by the mounted schema in the same way as for nodes defined by
   the top-level schema.

   For example, suppose the module "ietf-interfaces" is mounted in the
   "root" container in the "logical-network-element" list defined in
   [<a href="./rfc8530" title='"YANG Model for Logical Network Elements"'>RFC8530</a>].  Then, the following NACM path can be used to control
   access to the "interfaces" container (where the character '\' is used
   where a line break has been inserted for formatting reasons):

     &lt;path xmlns:lne=
             "urn:ietf:params:xml:ns:yang:ietf-logical-network-element"
           xmlns:if="urn:ietf:params:xml:ns:yang:ietf-interfaces"&gt;
       /lne:logical-network-elements\
         /lne:logical-network-element/lne:root/if:interfaces
     &lt;/path&gt;







<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20Implementation%20Notes"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  Implementation Notes</span>

   Network management of devices that use a data model with schema mount
   can be implemented in different ways.  However, the following
   implementation options are envisioned as typical:

   o  shared management: Instance data of both parent and mounted
      schemas are accessible within the same management session.

   o  split management: One (master) management session has access to
      instance data of both parent and mounted schemas; in addition, an
      extra session that has access only to the mounted data tree exists
      for every instance of the mount point.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.%20%20Schema%20Mount%20YANG%20Module"></a><a class="selflink" href="#section-9" id="section-9">9</a>.  Schema Mount YANG Module</span>

   This module references [<a href="./rfc6991" title='"Common YANG Data Types"'>RFC6991</a>] and [<a href="./rfc7950" title='"The YANG 1.1 Data Modeling Language"'>RFC7950</a>].

   &lt;CODE BEGINS&gt; file "ietf-yang-schema-mount@2019-01-14.yang"

   module ietf-yang-schema-mount {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-yang-schema-mount";
     prefix yangmnt;

     import ietf-inet-types {
       prefix inet;
       reference
         "<a href="./rfc6991">RFC 6991</a>: Common YANG Data Types";
     }

     import ietf-yang-types {
       prefix yang;
       reference
         "<a href="./rfc6991">RFC 6991</a>: Common YANG Data Types";
     }

     organization
       "IETF NETMOD (NETCONF Data Modeling Language) Working Group";

     contact
       "WG Web:   &lt;<a href="https://datatracker.ietf.org/wg/netmod/">https://datatracker.ietf.org/wg/netmod/</a>&gt;
        WG List:  &lt;mailto:netmod@ietf.org&gt;

        Editor:   Martin Bjorklund
                  &lt;mailto:mbj@tail-f.com&gt;





<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


        Editor:   Ladislav Lhotka
                  &lt;mailto:lhotka@nic.cz&gt;";

     description
       "This module defines a YANG extension statement that can be used
        to incorporate data models defined in other YANG modules in a
        module.  It also defines operational state data that specify the
        overall structure of the data model.

        The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
        NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
        'MAY', and 'OPTIONAL' in this document are to be interpreted as
        described in <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a> (<a href="./rfc2119">RFC 2119</a>) (<a href="./rfc8174">RFC 8174</a>) when, and only when,
        they appear in all capitals, as shown here.

        Copyright (c) 2019 IETF Trust and the persons identified as
        authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject to
        the license terms contained in, the Simplified BSD License set
        forth in <a href="#section-4">Section 4</a>.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>).

        This version of this YANG module is part of <a href="./rfc8528">RFC 8528</a>;
        see the RFC itself for full legal notices.";

     revision 2019-01-14 {
       description
         "Initial revision.";
       reference
         "<a href="./rfc8528">RFC 8528</a>: YANG Schema Mount";
     }

     /*
      * Extensions
      */

     extension mount-point {
       argument label;
       description
         "The argument 'label' is a YANG identifier, i.e., it is of the
          type 'yang:yang-identifier'.

          The 'mount-point' statement MUST NOT be used in a YANG
          version 1 module, neither explicitly nor via a 'uses'
          statement.



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


          The 'mount-point' statement MAY be present as a substatement
          of 'container' and 'list' and MUST NOT be present elsewhere.
          There MUST NOT be more than one 'mount-point' statement in a
          given 'container' or 'list' statement.

          If a mount point is defined within a grouping, its label is
          bound to the module where the grouping is used.

          A mount point defines a place in the node hierarchy where
          other data models may be attached.  A server that implements a
          module with a mount point populates the
          '/schema-mounts/mount-point' list with detailed information on
          which data models are mounted at each mount point.

          Note that the 'mount-point' statement does not define a new
          data node.";
     }

     /*
      * State data nodes
      */

     container schema-mounts {
       config false;
       description
         "Contains information about the structure of the overall
          mounted data model implemented in the server.";
       list namespace {
         key "prefix";
         description
           "This list provides a mapping of namespace prefixes that are
            used in XPath expressions of 'parent-reference' leafs to the
            corresponding namespace URI references.";
         leaf prefix {
           type yang:yang-identifier;
           description
             "Namespace prefix.";
         }
         leaf uri {
           type inet:uri;
           description
             "Namespace URI reference.";
         }
       }
       list mount-point {
         key "module label";





<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


         description
           "Each entry of this list specifies a schema for a particular
            mount point.

            Each mount point MUST be defined using the 'mount-point'
            extension in one of the modules listed in the server's
            YANG library instance with conformance type 'implement'.";
         leaf module {
           type yang:yang-identifier;
           description
             "Name of a module containing the mount point.";
         }
         leaf label {
           type yang:yang-identifier;
           description
             "Label of the mount point defined using the 'mount-point'
              extension.";
         }
         leaf config {
           type boolean;
           default "true";
           description
             "If this leaf is set to 'false', then all data nodes in the
              mounted schema are read-only ('config false'), regardless
              of their 'config' property.";
         }
         choice schema-ref {
           mandatory true;
           description
             "Alternatives for specifying the schema.";
           container inline {
             presence
               "A complete self-contained schema is mounted at the
                mount point.";
             description
               "This node indicates that the server has mounted at least
                the module 'ietf-yang-library' at the mount point, and
                its instantiation provides the information about the
                mounted schema.

                Different instances of the mount point may have
                different schemas mounted.";
           }
           container shared-schema {
             presence
               "The mounted schema together with the 'parent-reference'
                make up the schema for this mount point.";




<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


             description
               "This node indicates that the server has mounted at least
                the module 'ietf-yang-library' at the mount point, and
                its instantiation provides the information about the
                mounted schema.  When XPath expressions in the mounted
                schema are evaluated, the 'parent-reference' leaf-list
                is taken into account.

                Different instances of the mount point MUST have the
                same schema mounted.";
             leaf-list parent-reference {
               type yang:xpath1.0;
               description
                 "Entries of this leaf-list are XPath 1.0 expressions
                  that are evaluated in the following context:

                  - The context node is the node in the parent data tree
                    where the mount-point is defined.

                  - The accessible tree is the parent data tree
                    *without* any nodes defined in modules that are
                    mounted inside the parent schema.

                  - The context position and context size are both equal
                    to 1.

                  - The set of variable bindings is empty.

                  - The function library is the core function library
                    defined in the W3C XPath 1.0 document
                    (<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">http://www.w3.org/TR/1999/REC-xpath-19991116</a>) and
                    the functions defined in <a href="./rfc7950#section-10">Section 10 of RFC 7950</a>.

                  - The set of namespace declarations is defined by the
                    'namespace' list under 'schema-mounts'.

                  Each XPath expression MUST evaluate to a node-set
                  (possibly empty).  For the purposes of evaluating
                  XPath expressions whose context nodes are defined in
                  the mounted schema, the union of all these node-sets
                  together with ancestor nodes are added to the
                  accessible data tree.

                  Note that in the case 'ietf-yang-schema-mount' is
                  itself mounted, a 'parent-reference' in the mounted
                  module may refer to nodes that were brought into the
                  accessible tree through a 'parent-reference' in the
                  parent schema.";



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 17]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-18"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


             }
           }
         }
       }
     }
   }

   &lt;CODE ENDS&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-10" id="section-10">10</a>.  IANA Considerations</span>

   This document registers a URI in the "IETF XML Registry" [<a href="./rfc3688" title='"The IETF XML Registry"'>RFC3688</a>].

        URI: urn:ietf:params:xml:ns:yang:ietf-yang-schema-mount
        Registrant Contact: The IESG.
        XML: N/A, the requested URI is an XML namespace.

   This document registers a YANG module in the "YANG Module Names"
   registry [<a href="./rfc6020" title='"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"'>RFC6020</a>].

     name:        ietf-yang-schema-mount
     namespace:   urn:ietf:params:xml:ns:yang:ietf-yang-schema-mount
     prefix:      yangmnt
     reference:   <a href="./rfc8528">RFC 8528</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/11.%20%20Security%20Considerations"></a><a class="selflink" href="#section-11" id="section-11">11</a>.  Security Considerations</span>

   The YANG module specified in this document defines a schema for data
   that is designed to be accessed via network management protocols such
   as NETCONF [<a href="./rfc6241" title='"Network Configuration Protocol (NETCONF)"'>RFC6241</a>] or RESTCONF [<a href="./rfc8040" title='"RESTCONF Protocol"'>RFC8040</a>].  The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure
   transport is Secure Shell (SSH) [<a href="./rfc6242" title='"Using the NETCONF Protocol over Secure Shell (SSH)"'>RFC6242</a>].  The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   [<a href="./rfc8446" title='"The Transport Layer Security (TLS) Protocol Version 1.3"'>RFC8446</a>].

   The Network Configuration Access Control Model (NACM) [<a href="./rfc8341" title='"Network Configuration Access Control Model"'>RFC8341</a>]
   provides the means to restrict access for particular NETCONF or
   RESTCONF users to a preconfigured subset of all available NETCONF or
   RESTCONF protocol operations and content.

   Some of the readable data nodes in this YANG module may be considered
   sensitive or vulnerable in some network environments.  It is thus
   important to control read access (e.g., via get, get-config, or
   notification) to these data nodes.  These are the subtrees and data
   nodes and their sensitivity/vulnerability:






<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 18]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-19"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


   o  /schema-mounts: The schema defined by this state data provides
      detailed information about a server implementation that may help
      an attacker identify the server capabilities and server
      implementations with known bugs.  Server vulnerabilities may be
      specific to particular modules included in the schema, module
      revisions, module features, or even module deviations.  For
      example, if a particular operation on a particular data node is
      known to cause a server to crash or significantly degrade device
      performance, then the schema information will help an attacker
      identify server implementations with such a defect, in order to
      launch a denial-of-service attack on the device.

   It is important to take into account the security considerations for
   all nodes in the mounted schemas and to control access to these nodes
   by using the mechanism described in <a href="#section-7">Section 7</a>.

   Care must be taken when the "parent-reference" XPath expressions are
   constructed, since the result of the evaluation of these expressions
   is added to the accessible tree for any XPath expression found in the
   mounted schema.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/12.%20%20References"></a><a class="selflink" href="#section-12" id="section-12">12</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/12.1.%20%20Normative%20References"></a><a class="selflink" href="#section-12.1" id="section-12.1">12.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3688">RFC3688</a>]  Mealling, M., "The IETF XML Registry", <a href="https://www.rfc-editor.org/bcp/bcp81">BCP 81</a>, <a href="./rfc3688">RFC 3688</a>,
              DOI 10.17487/RFC3688, January 2004,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3688">https://www.rfc-editor.org/info/rfc3688</a>&gt;.

   [<a id="ref-RFC6020">RFC6020</a>]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", <a href="./rfc6020">RFC 6020</a>,
              DOI 10.17487/RFC6020, October 2010,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6020">https://www.rfc-editor.org/info/rfc6020</a>&gt;.

   [<a id="ref-RFC6241">RFC6241</a>]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", <a href="./rfc6241">RFC 6241</a>, DOI 10.17487/RFC6241, June 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6241">https://www.rfc-editor.org/info/rfc6241</a>&gt;.

   [<a id="ref-RFC6242">RFC6242</a>]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", <a href="./rfc6242">RFC 6242</a>, DOI 10.17487/RFC6242, June 2011,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6242">https://www.rfc-editor.org/info/rfc6242</a>&gt;.




<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 19]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-20"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


   [<a id="ref-RFC6991">RFC6991</a>]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              <a href="./rfc6991">RFC 6991</a>, DOI 10.17487/RFC6991, July 2013,
              &lt;<a href="https://www.rfc-editor.org/info/rfc6991">https://www.rfc-editor.org/info/rfc6991</a>&gt;.

   [<a id="ref-RFC7895">RFC7895</a>]  Bierman, A., Bjorklund, M., and K. Watsen, "YANG Module
              Library", <a href="./rfc7895">RFC 7895</a>, DOI 10.17487/RFC7895, June 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7895">https://www.rfc-editor.org/info/rfc7895</a>&gt;.

   [<a id="ref-RFC7950">RFC7950</a>]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              <a href="./rfc7950">RFC 7950</a>, DOI 10.17487/RFC7950, August 2016,
              &lt;<a href="https://www.rfc-editor.org/info/rfc7950">https://www.rfc-editor.org/info/rfc7950</a>&gt;.

   [<a id="ref-RFC8040">RFC8040</a>]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", <a href="./rfc8040">RFC 8040</a>, DOI 10.17487/RFC8040, January 2017,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8040">https://www.rfc-editor.org/info/rfc8040</a>&gt;.

   [<a id="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="./rfc2119">RFC</a>
              <a href="./rfc2119">2119</a> Key Words", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc8174">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.

   [<a id="ref-RFC8341">RFC8341</a>]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, <a href="./rfc8341">RFC 8341</a>,
              DOI 10.17487/RFC8341, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8341">https://www.rfc-editor.org/info/rfc8341</a>&gt;.

   [<a id="ref-RFC8342">RFC8342</a>]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", <a href="./rfc8342">RFC 8342</a>, DOI 10.17487/RFC8342, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8342">https://www.rfc-editor.org/info/rfc8342</a>&gt;.

   [<a id="ref-RFC8446">RFC8446</a>]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", <a href="./rfc8446">RFC 8446</a>, DOI 10.17487/RFC8446, August 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;.

   [<a id="ref-RFC8525">RFC8525</a>]  Bierman, A., Bjorklund, M., Schoenwaelder, J., Watsen, K.,
              and R. Wilton, "YANG Library", <a href="./rfc8525">RFC 8525</a>,
              DOI 10.17487/RFC8525, March 2019,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8525">https://www.rfc-editor.org/info/rfc8525</a>&gt;.

   [<a id="ref-XPATH">XPATH</a>]    Clark, J. and S. DeRose, "XML Path Language (XPath)
              Version 1.0", World Wide Web Consortium Recommendation
              REC-xpath-19991116, November 1999,
              &lt;<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">http://www.w3.org/TR/1999/REC-xpath-19991116</a>&gt;.








<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 20]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-21"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/12.2.%20%20Informative%20References"></a><a class="selflink" href="#section-12.2" id="section-12.2">12.2</a>.  Informative References</span>

   [<a id="ref-DEVICE-YANG">DEVICE-YANG</a>]
              Lindem, A., Ed., Berger, L., Ed., Bogdanovic, D., and C.
              Hopps, "Network Device YANG Logical Organization", Work in
              Progress, <a href="./draft-ietf-rtgwg-device-model-02">draft-ietf-rtgwg-device-model-02</a>, March 2017.

   [<a id="ref-IS-IS-YANG">IS-IS-YANG</a>]
              Litkowski, S., Yeung, D., Lindem, A., Zhang, J., and L.
              Lhotka, "YANG Data Model for IS-IS protocol", Work in
              Progress, <a href="./draft-ietf-isis-yang-isis-cfg-34">draft-ietf-isis-yang-isis-cfg-34</a>, January 2019.

   [<a id="ref-RFC8340">RFC8340</a>]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              <a href="https://www.rfc-editor.org/bcp/bcp215">BCP 215</a>, <a href="./rfc8340">RFC 8340</a>, DOI 10.17487/RFC8340, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8340">https://www.rfc-editor.org/info/rfc8340</a>&gt;.

   [<a id="ref-RFC8343">RFC8343</a>]  Bjorklund, M., "A YANG Data Model for Interface
              Management", <a href="./rfc8343">RFC 8343</a>, DOI 10.17487/RFC8343, March 2018,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8343">https://www.rfc-editor.org/info/rfc8343</a>&gt;.

   [<a id="ref-RFC8529">RFC8529</a>]  Berger, L., Hopps, C., Lindem, A., Bogdanovic, D., and
              X. Liu, "YANG Data Model for Network Instances", <a href="./rfc8529">RFC 8529</a>,
              DOI 10.17487/RFC8529, March 2019,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8529">https://www.rfc-editor.org/info/rfc8529</a>&gt;.

   [<a id="ref-RFC8530">RFC8530</a>]  Berger, L., Hopps, C., Lindem, A., Bogdanovic, D., and
              X. Liu, "YANG Model for Logical Network Elements",
              <a href="./rfc8530">RFC 8530</a>, DOI 10.17487/RFC8530, March 2019,
              &lt;<a href="https://www.rfc-editor.org/info/rfc8530">https://www.rfc-editor.org/info/rfc8530</a>&gt;.

   [<a id="ref-YANG-MOUNT">YANG-MOUNT</a>]
              Clemm, A., Voit, E., and J. Medved, "Mounting YANG-Defined
              Information from Remote Datastores", Work in Progress,
              <a href="./draft-clemm-netmod-mount-06">draft-clemm-netmod-mount-06</a>, March 2017.

















<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 21]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-22"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/Appendix%20A.%20%20Example%3A%20Device%20Model%20with%20LNEs%20and%20NIs"></a><a class="selflink" href="#appendix-A" id="appendix-A">Appendix A</a>.  Example: Device Model with LNEs and NIs</span>

   This non-normative example demonstrates an implementation of the
   device model as specified in Section 2 of [<a href="#ref-DEVICE-YANG">DEVICE-YANG</a>], using both
   logical network elements (LNEs) and network instances (NIs).

   In these examples, the character '\' is used where a line break has
   been inserted for formatting reasons.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/A.1.%20%20Physical%20Device"></a><a class="selflink" href="#appendix-A.1" id="appendix-A.1">A.1</a>.  Physical Device</span>

   The data model for the physical device may be described by this YANG
   library content, assuming the server supports the NMDA:

   {
      "ietf-yang-library:yang-library": {
        "content-id": "14e2ab5dc325f6d86f743e8d3ade233f1a61a899",
        "module-set": [
          {
            "name": "physical-device-modules",
            "module": [
              {
                "name": "ietf-datastores",
                "revision": "2018-02-14",
                "namespace":
                  "urn:ietf:params:xml:ns:yang:ietf-datastores"
              },
              {
                "name": "iana-if-type",
                "revision": "2015-06-12",
                "namespace": "urn:ietf:params:xml:ns:yang:iana-if-type"
              },
              {
                "name": "ietf-interfaces",
                "revision": "2018-02-20",
                "feature": ["arbitrary-names", "pre-provisioning" ],
                "namespace":
                  "urn:ietf:params:xml:ns:yang:ietf-interfaces"
              },
              {
                "name": "ietf-ip",
                "revision": "2018-02-22",
                "namespace": "urn:ietf:params:xml:ns:yang:ietf-ip"
              },
              {
                "name": "ietf-logical-network-element",
                "revision": "2018-03-20",
                "feature": [ "bind-lne-name" ],



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 22]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-23"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


                "namespace":
                  "urn:ietf:params:xml:ns:yang:\
                  ietf-logical-network-element"
              },
              {
                "name": "ietf-yang-library",
                "revision": "2019-01-04",
                "namespace":
                  "urn:ietf:params:xml:ns:yang:ietf-yang-library"
              },
              {
                "name": "ietf-yang-schema-mount",
                "revision": "2019-01-14",
                "namespace":
                  "urn:ietf:params:xml:ns:yang:ietf-yang-schema-mount"
              }
            ],
            "import-only-module": [
              {
                "name": "ietf-inet-types",
                "revision": "2013-07-15",
                "namespace":
                  "urn:ietf:params:xml:ns:yang:ietf-inet-types"
              },
              {
                "name": "ietf-yang-types",
                "revision": "2013-07-15",
                "namespace":
                  "urn:ietf:params:xml:ns:yang:ietf-yang-types"
              }
            ]
          }
        ],
        "schema": [
          {
            "name": "physical-device-schema",
            "module-set": [ "physical-device-modules" ]
          }
        ],
        "datastore": [
          {
            "name": "ietf-datastores:running",
            "schema": "physical-device-schema"
          },
          {
            "name": "ietf-datastores:operational",
            "schema": "physical-device-schema"
          }



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 23]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-24"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


        ]
      }
   }

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/A.2.%20%20Logical%20Network%20Elements"></a><a class="selflink" href="#appendix-A.2" id="appendix-A.2">A.2</a>.  Logical Network Elements</span>

   Each LNE can have a specific data model that is determined at run
   time, so it is appropriate to mount it using the "inline" method.
   Hence, the following "schema-mounts" data is used:

   {
     "ietf-yang-schema-mount:schema-mounts": {
       "mount-point": [
         {
           "module": "ietf-logical-network-element",
           "label": "root",
           "inline": {}
         }
       ]
     }
   }

   An administrator of the host device has to configure an entry for
   each LNE instance, for example:

   {
     "ietf-interfaces:interfaces": {
       "interface": [
         {
           "name": "eth0",
           "type": "iana-if-type:ethernetCsmacd",
           "enabled": true,
           "ietf-logical-network-element:bind-lne-name": "eth0"
         }
       ]
     },
     "ietf-logical-network-element:logical-network-elements": {
       "logical-network-element": [
         {
           "name": "lne-1",
           "managed": true,
           "description": "LNE with NIs",
           "root": {
             ...
           }
         }
         ...
       ]



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 24]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-25"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


     }
   }

   and then also place necessary state data as the contents of the
   "root" instance, which should include at least:

   o  YANG library data specifying the LNE's data model, for example,
      assuming the server does not implement the NMDA:

   {
     "ietf-yang-library:modules-state": {
       "module-set-id": "9358e11874068c8be06562089e94a89e0a392019",
       "module": [
         {
           "name": "iana-if-type",
           "revision": "2014-05-08",
           "namespace": "urn:ietf:params:xml:ns:yang:iana-if-type",
           "conformance-type": "implement"
         },
         {
           "name": "ietf-inet-types",
           "revision": "2013-07-15",
           "namespace": "urn:ietf:params:xml:ns:yang:ietf-inet-types",
           "conformance-type": "import"
         },
         {
           "name": "ietf-interfaces",
           "revision": "2014-05-08",
           "feature": [
             "arbitrary-names",
             "pre-provisioning"
           ],
           "namespace": "urn:ietf:params:xml:ns:yang:ietf-interfaces",
           "conformance-type": "implement"
         },
         {
           "name": "ietf-ip",
           "revision": "2014-06-16",
           "feature": [
             "ipv6-privacy-autoconf"
           ],
           "namespace": "urn:ietf:params:xml:ns:yang:ietf-ip",
           "conformance-type": "implement"
         },
         {
           "name": "ietf-network-instance",
           "revision": "2018-03-20",
           "feature": [



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 25]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-26"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


             "bind-network-instance-name"
           ],
           "namespace":
             "urn:ietf:params:xml:ns:yang:ietf-network-instance",
           "conformance-type": "implement"
         },
         {
           "name": "ietf-yang-library",
           "revision": "2016-06-21",
           "namespace": "urn:ietf:params:xml:ns:yang:ietf-yang-library",
           "conformance-type": "implement"
         },
         {
           "name": "ietf-yang-schema-mount",
           "revision": "2019-01-14",
           "namespace":
             "urn:ietf:params:xml:ns:yang:ietf-yang-schema-mount",
           "conformance-type": "implement"
         },
         {
           "name": "ietf-yang-types",
           "revision": "2013-07-15",
           "namespace": "urn:ietf:params:xml:ns:yang:ietf-yang-types",
           "conformance-type": "import"
         }
       ]
     }
   }

   o  state data for interfaces assigned to the LNE instance (that
      effectively become system-controlled interfaces for the LNE), for
      example:

   {
     "ietf-interfaces:interfaces": {
       "interface": [
         {
           "name": "eth0",
           "type": "iana-if-type:ethernetCsmacd",
           "oper-status": "up",
           "statistics": {
             "discontinuity-time": "2016-12-16T17:11:27+02:00"
           },
           "ietf-ip:ipv6": {
             "address": [
               {
                 "ip": "fe80::42a8:f0ff:fea8:24fe",
                 "origin": "link-layer",



<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 26]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-27"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


                 "prefix-length": 64
               }
             ]
           }
         }
       ]
     }
   }

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/A.3.%20%20Network%20Instances"></a><a class="selflink" href="#appendix-A.3" id="appendix-A.3">A.3</a>.  Network Instances</span>

   Assuming that network instances share the same data model, it can be
   mounted using the "shared-schema" method as follows:

   {
     "ietf-yang-schema-mount:schema-mounts": {
       "namespace": [
         {
             "prefix": "if",
             "uri": "urn:ietf:params:xml:ns:yang:ietf-interfaces"
         },
         {
             "prefix": "ni",
             "uri": "urn:ietf:params:xml:ns:yang:ietf-network-instance"
         }
       ],
       "mount-point": [
         {
           "module": "ietf-network-instance",
           "label": "root",
             "shared-schema": {
               "parent-reference": [
                 "/if:interfaces/if:interface[\
                 ni:bind-network-instance-name = current()/../ni:name]"
               ]
             }
         }
       ]
     }
   }

   Note also that the "ietf-interfaces" module appears in the
   "parent-reference" leaf-list for the mounted NI schema.  This means
   that references to LNE interfaces, such as "outgoing-interface" in
   static routes, are valid despite the fact that "ietf-interfaces"
   isn't part of the NI schema.





<span class="grey">Bjorklund &amp; Lhotka           Standards Track                   [Page 27]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-28"></span>
<span class="grey"><a href="./rfc8528">RFC 8528</a>                    YANG Schema Mount                 March 2019</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/A.4.%20%20Invoking%20an%20RPC%20Operation"></a><a class="selflink" href="#appendix-A.4" id="appendix-A.4">A.4</a>.  Invoking an RPC Operation</span>

   Assume that the mounted NI data model also implements the "ietf-isis"
   module [<a href="#ref-IS-IS-YANG">IS-IS-YANG</a>].  An RPC operation defined in this module, such
   as "clear-adjacency", can be invoked by a client session of an LNE's
   RESTCONF server as an action tied to the mount point of a particular
   network instance using a request URI like this (all on one line):

     POST /restconf/data/ietf-network-instance:network-instances/
         network-instance=rtrA/root/ietf-isis:clear-adjacency HTTP/1.1

Contributors

   The idea of having some way to combine schemas from different YANG
   modules into one has been proposed independently by others:

   o  Authors of [<a href="#ref-YANG-MOUNT">YANG-MOUNT</a>]:

      *  Lou Berger, LabN Consulting, L.L.C., &lt;lberger@labn.net&gt;

      *  Alexander Clemm, Huawei, &lt;alexander.clemm@huawei.com&gt;

      *  Christian Hopps, Deutsche Telekom, &lt;chopps@chopps.org&gt;

   o  Jan Medved, Cisco, &lt;jmedved@cisco.com&gt;

   o  Eric Voit, Cisco, &lt;evoit@cisco.com&gt;

Authors' Addresses

   Martin Bjorklund
   Tail-f Systems

   Email: mbj@tail-f.com


   Ladislav Lhotka
   CZ.NIC

   Email: lhotka@nic.cz











Bjorklund &amp; Lhotka           Standards Track                   [Page 28]
</pre>
</body></html>