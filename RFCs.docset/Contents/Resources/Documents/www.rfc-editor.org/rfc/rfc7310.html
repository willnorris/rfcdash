<html><head></head><body><pre>Internet Engineering Task Force (IETF)                        J. Lindsay
Request for Comments: 7310                                   H. Foerster
Category: Standards Track                                        APT Ltd
ISSN: 2070-1721                                                July 2014


    <span class="h1">RTP Payload Format for Standard apt-X and Enhanced apt-X Codecs</span>

Abstract

   This document specifies a scheme for packetizing Standard apt-X or
   Enhanced apt-X encoded audio data into Real-time Transport Protocol
   (RTP) packets.  The document describes a payload format that permits
   transmission of multiple related audio channels in a single RTP
   payload and a means of establishing Standard apt-X and Enhanced apt-X
   connections through the Session Description Protocol (SDP).

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc5741#section-2">Section 2 of RFC 5741</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7310">http://www.rfc-editor.org/info/rfc7310</a>.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.






<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-2">2</a>
   <a href="#section-2">2</a>. Conventions .....................................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Standard apt-X and Enhanced apt-X Codecs ........................<a href="#page-3">3</a>
   <a href="#section-4">4</a>. Payload Format Capabilities .....................................<a href="#page-5">5</a>
      <a href="#section-4.1">4.1</a>. Use of Forward Error Correction (FEC) ......................<a href="#page-5">5</a>
   <a href="#section-5">5</a>. Payload Format ..................................................<a href="#page-5">5</a>
      <a href="#section-5.1">5.1</a>. RTP Header Usage ...........................................<a href="#page-5">5</a>
      <a href="#section-5.2">5.2</a>. Payload Structure ..........................................<a href="#page-6">6</a>
      <a href="#section-5.3">5.3</a>. Default Packetization Interval .............................<a href="#page-7">7</a>
      <a href="#section-5.4">5.4</a>. Implementation Considerations ..............................<a href="#page-8">8</a>
      <a href="#section-5.5">5.5</a>. Payload Example ............................................<a href="#page-8">8</a>
   <a href="#section-6">6</a>. Payload Format Parameters ......................................<a href="#page-10">10</a>
      <a href="#section-6.1">6.1</a>. Media Type Definition .....................................<a href="#page-10">10</a>
      <a href="#section-6.2">6.2</a>. Mapping to SDP ............................................<a href="#page-12">12</a>
           <a href="#section-6.2.1">6.2.1</a>. SDP Usage Examples .................................<a href="#page-13">13</a>
           <a href="#section-6.2.2">6.2.2</a>. Offer/Answer Considerations ........................<a href="#page-14">14</a>
   <a href="#section-7">7</a>. IANA Considerations ............................................<a href="#page-14">14</a>
   <a href="#section-8">8</a>. Security Considerations ........................................<a href="#page-14">14</a>
   <a href="#section-9">9</a>. Acknowledgements ...............................................<a href="#page-14">14</a>
   <a href="#section-10">10</a>. References ....................................................<a href="#page-15">15</a>
      <a href="#section-10.1">10.1</a>. Normative References .....................................<a href="#page-15">15</a>
      <a href="#section-10.2">10.2</a>. Informative References ...................................<a href="#page-15">15</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   This document specifies the payload format for packetization of audio
   data encoded with the Standard apt-X or Enhanced apt-X audio coding
   algorithms into the Real-time Transport Protocol (RTP) [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   The document outlines some conventions, a brief description of the
   operating principles of the audio codecs, and the payload format
   capabilities.  The RTP payload format is detailed, and a relevant
   example of the format is provided.  The media type, its mappings to
   SDP [<a href="./rfc4566" title='"SDP: Session Description Protocol"'>RFC4566</a>], and its usage in the SDP offer/answer model are also
   specified.  Finally, some security considerations are outlined.

   This document registers a media type (audio/aptx) for the RTP payload
   format for the Standard apt-X and Enhanced apt-X audio codecs.











<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Conventions"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Conventions</span>

   This document uses the normal IETF bit-order representation.  Bit
   fields in figures are read left to right and then down.  The leftmost
   bit in each field is the most significant.  The numbering starts from
   0 and ascends, where bit 0 will be the most significant.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a href="./rfc2119">RFC 2119</a> [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Standard%20apt-X%20and%20Enhanced%20apt-X%20Codecs"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Standard apt-X and Enhanced apt-X Codecs</span>

   Standard apt-X and Enhanced apt-X are proprietary audio coding
   algorithms, which can be licensed from CSR plc. and are widely
   deployed in a variety of audio processing equipment.  For commercial
   reasons, the detailed internal operations of these algorithms are not
   described in standards or reference documents.  However, the data
   interfaces to implementations of these algorithms are very simple and
   allow easy RTP packetization of data coded with the algorithms
   without detailed knowledge of the actual coded audio stream syntax.

   Both the Standard apt-X and Enhanced apt-X coding algorithms are
   based on Adaptive Differential Pulse Code Modulation principles.
   They produce a constant coded bit rate that is scaled according to
   the sample frequency of the uncoded audio.  This constant rate is 1/4
   of the bit rate of the uncoded audio, irrespective of the resolution
   (number of bits) used to represent an uncoded audio sample.  For
   example, a 1.536-Mbit/s stereo audio stream composed of two channels
   of 16-bit Pulse Code Modulated (PCM) audio that is sampled at a
   frequency of 48 kHz is encoded at 384 kbit/s.

   Standard apt-X and Enhanced apt-X do not enforce a coded frame
   structure, and the coded data forms a continuous coded sample stream
   with each coded sample capable of regenerating four PCM samples when
   decoded.  The Standard apt-X algorithm encodes four successive 16-bit
   PCM samples from each audio channel into a single 16-bit coded sample
   per audio channel.  The Enhanced apt-X algorithm encodes four
   successive 16-bit or 24-bit PCM samples from each audio channel and
   respectively produces a single 16-bit or 24-bit coded sample per
   channel.  The same RTP packetization rules apply for each of these
   algorithmic variations.

   Standard apt-X and Enhanced apt-X coded data streams can optionally
   carry synchronization information and an auxiliary data channel
   within the coded audio data without additional overhead.  These
   mechanisms can, for instance, be used when the IP system is cascaded
   with another transportation system and the decoder is acting as a



<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


   simple bridge between the two systems.  Since auxiliary data channel
   and synchronization information are carried within the coded audio
   data without additional overhead, RTP payload format rules do not
   change if they are present.  Out-of-band signaling is required,
   however, to notify the receiver end when autosync and auxiliary data
   have been embedded in the apt-X stream.

   Embedded auxiliary data is typically used to transport non-audio data
   and timecode information for synchronization with video.  The bit
   rate of the auxiliary data channel is 1/4 of the sample frequency.
   For example, with a single audio channel encoded at Fs = 48 kHz, an
   auxiliary data bit rate of 12 kbit/s can be embedded.

   apt-X further provides a means of stereo-pairing apt-X channels so
   that the embedded autosync and auxiliary data channel can be shared
   across the channel pair.  In the case of a 1.536-Mbit/s stereo audio
   stream composed of two channels of 16-bit PCM audio that is sampled
   at 48 kHz, a byte of auxiliary data would typically be fed into the
   Standard apt-X or Enhanced apt-X encoder once every 32 uncoded left
   channel samples.  By default, apt-X channel-pairing is not enabled.
   Out-of-band signaling is required to notify the receiver when the
   option is being used.

   Standard apt-X and Enhanced apt-X decoders that have not been set up
   with the correct embedded autosync, auxiliary data, and
   stereo-pairing information will play out uncoded PCM samples with a
   loss of decoding quality.  In the case of Standard apt-X, the loss of
   quality can be significant.

   Further details on the algorithm operation can be obtained from
   CSR plc.

      Corporate HQ
      Churchill House
      Cambridge Business Park
      Cowley Road
      Cambridge
      CB4 0WZ
      UK
      Tel: +44 1223 692000
      Fax: +44 1223 692001
      &lt;<a href="http://www.csr.com">http://www.csr.com</a>&gt;









<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Payload%20Format%20Capabilities"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Payload Format Capabilities</span>

   This RTP payload format carries an integer number of Standard apt-X
   or Enhanced apt-X coded audio samples.  When multiple related audio
   channels are being conveyed within the payload, each channel
   contributes the same integer number of apt-X coded audio samples to
   the total carried by the payload.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Use%20of%20Forward%20Error%20Correction%20%28FEC%29"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Use of Forward Error Correction (FEC)</span>

   Standard apt-X and Enhanced apt-X do not inherently provide any
   mechanism for adding redundancy or error-control coding into the
   coded audio stream.  Generic schemes for RTP, such as forward error
   correction as described in <a href="./rfc5109">RFC 5109</a> [<a href="./rfc5109" title='"RTP Payload Format for Generic Forward Error Correction"'>RFC5109</a>] and <a href="./rfc2733">RFC 2733</a> [<a href="./rfc2733" title='"An RTP Payload Format for Generic Forward Error Correction"'>RFC2733</a>],
   can be used to add redundant information to Standard apt-X and
   Enhanced apt-X RTP packet streams, making them more resilient to
   packet losses at the expense of a higher bit rate.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Payload%20Format"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Payload Format</span>

   The Standard apt-X and Enhanced apt-X algorithms encode four
   successive PCM samples from each audio channel and produce a single
   compressed sample for each audio channel.  The encoder MUST be
   presented with an integer number S of input audio samples, where S is
   an arbitrary multiple of 4.  The encoder will produce exactly S/4
   coded audio samples.  Since each coded audio sample is either 16 or
   24 bits, the amount of coded audio data produced upon each invocation
   of the encoding process will be an integer number of bytes.  RTP
   packetization of the encoded data SHALL be on a byte-by-byte basis.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20RTP%20Header%20Usage"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  RTP Header Usage</span>

   Utilization of the Standard apt-X and Enhanced apt-X coding
   algorithms does not create any special requirements with respect to
   the contents of the RTP packet header.  Other RTP packet header
   fields are defined as follows.

   o  V - As per [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>]

   o  P - As per [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>]

   o  X - As per [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>]

   o  CC - As per [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>]

   o  M - As per [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and <a href="./rfc3551#section-4.1">[RFC3551] Section 4.1</a>





<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


   o  PT - A dynamic payload type; MUST be used [<a href="./rfc3551" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>]

   o  SN (sequence number) - As per [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>]

   o  Timestamp - As per [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].  The RTP timestamp reflects the
      instant at which the first audio sample in the packet was sampled,
      that is, the oldest information in the packet.

   Header field abbreviations are defined as follows.

   o  V - Version Number

   o  P - Padding

   o  X - Extensions

   o  CC - Count of contributing sources

   o  M - Marker

   o  PT - Payload Type

   o  PS - Payload Structure

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20Payload%20Structure"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  Payload Structure</span>

   The RTP payload data for Standard apt-X and Enhanced apt-X MUST be
   structured as follows.

   Standard apt-X and Enhanced apt-X coded samples are packed
   contiguously into payload octets in "network byte order", also known
   as big-endian order, and starting with the most significant bit.
   Coded samples are packed into the packet in time sequence, beginning
   with the oldest coded sample.  An integer number of coded samples
   MUST be within the same packet.

   When multiple channels of Standard apt-X and Enhanced apt-X coded
   audio, such as in a stereo program, are multiplexed into a single RTP
   stream, the coded samples from each channel, at a single sampling
   instant, are interleaved into a coded sample block according to the
   following standard audio channel ordering [<a href="./rfc3551" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>].  Coded sample
   blocks are then packed into the packet in time sequence beginning
   with the oldest coded sample block.








<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


      l left
      r right
      c center
      S surround
      F front
      R rear

      channels   description     channel
                                 1   2   3   4   5   6
      ___________________________________________________
      2          stereo          l   r
      3                          l   r   c
      4                          l   c   r   S
      5                          Fl  Fr  Fc  Sl  Sr
      6                          l   lc  c   r   rc  S

   For the two-channel encoding example, the sample sequence is (left
   channel, first sample), (right channel, first sample), (left channel,
   second sample), (right channel, second sample).  Coded samples for
   all channels, belonging to a single coded sampling instant, MUST be
   contained in the same packet.  All channels in the same RTP stream
   MUST be sampled at the same frequency.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.3.%20%20Default%20Packetization%20Interval"></a><a class="selflink" href="#section-5.3" id="section-5.3">5.3</a>.  Default Packetization Interval</span>

   The default packetization interval MUST have a duration of
   4 milliseconds.  When an integer number of coded samples per channel
   cannot be contained within this 4-millisecond interval, the default
   packet interval MUST be rounded down to the nearest packet interval
   that can contain a complete integer set of coded samples.  For
   example, when encoding audio with either Standard apt-X or Enhanced
   apt-X, sampled at 11025 Hz, 22050 Hz, or 44100 Hz, the packetization
   interval MUST be rounded down to 3.99 milliseconds.

   The packetization interval sets limits on the end-to-end delay;
   shorter packets minimize the audio delay through a system at the
   expense of increased bandwidth, while longer packets introduce less
   header overhead but increase delay and make packet loss more
   noticeable.  A default packet interval of 4 milliseconds maintains an
   acceptable ratio of payload to header bytes and minimizes the
   end-to-end delay to allow viable interactive applications based on
   apt-X.  All implementations MUST support this default packetization
   interval.








<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.4.%20%20Implementation%20Considerations"></a><a class="selflink" href="#section-5.4" id="section-5.4">5.4</a>.  Implementation Considerations</span>

   An application implementing this payload format MUST understand all
   the payload parameters that are defined in this specification.  Any
   mapping of these parameters to a signaling protocol MUST support all
   parameters.  Implementations can always decide whether they are
   capable of communicating based on the entities defined in this
   specification.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.5.%20%20Payload%20Example"></a><a class="selflink" href="#section-5.5" id="section-5.5">5.5</a>.  Payload Example</span>

   As an example payload format, consider the transmission of an
   arbitrary 5.1 audio signal consisting of six channels of 24-bit PCM
   data, sampled at a rate of 48 kHz and packetized on an RTP packet
   interval of 4 milliseconds.  The total bit rate before audio coding
   is 6 * 24 * 48000 = 6.912 Mbit/s.  Applying Enhanced apt-X coding
   with a coded sample size of 24 bits results in a transmitted coded
   bit rate of 1/4 of the uncoded bit rate, i.e., 1.728 Mbit/s.  On
   packet intervals of 4 milliseconds, packets contain 864 bytes of
   encoded data that contain 48 Enhanced apt-X coded samples per
   channel.

   For the example format, the diagram below shows how coded samples
   from each channel are packed into a sample block and how sample
   blocks 1, 2, and 48 are subsequently packed into the RTP packet.

      C:
      Channel index: Left (l) = 1, left center (lc) = 2,
      center (c) = 3, right (r) = 4, right center (rc) = 5,
      and surround (S) = 6.

      T:
      Sample Block time index: The first sample block is 1; the final
      sample is 48.

      S(C)(T):
      The Tth sample from channel C.














<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    S(1)(1)                    |    S(2)(1)    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    S(2)(1)    |            S(3)(1)            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    S(3)(1)    |                   S(4)(1)                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    S(5)(1)                    |    S(6)(1)    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    S(6)(1)    |            S(1)(2)            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    S(2)(2)    |                   S(3)(2)                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    S(4)(2)                    |    S(5)(2)    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    S(5)(2)    |            S(6)(2)            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    S(6)(2)    |                   S(1)(3)                     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |            S(6)(47)           |            S(1)(48)           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    S(1)(48)   |                   S(2)(48)                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    S(3)(48)                   |    S(4)(48)   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                   S(4)(48)    |           S(5)(48)            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    S(5)(48)   |                   S(6)(48)                    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   For the example format, the diagram below indicates the order that
   coded bytes are packed into the packet payload in terms of sample
   byte significance.  The following abbreviations are used.

      MSB:
      Most Significant Byte of a 24-bit coded sample

      MB:
      Middle Byte of a 24-bit coded sample

      LSB:
      Least Significant Byte of a 24-bit coded sample




<span class="grey">Lindsay &amp; Foerster           Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MSB      |       MB      |      LSB      |               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Payload%20Format%20Parameters"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Payload Format Parameters</span>

   This RTP payload format is identified using the media type
   audio/aptx, which is registered in accordance with <a href="./rfc4855">RFC 4855</a> [<a href="./rfc4855" title='"Media Type Registration of RTP Payload Formats"'>RFC4855</a>]
   and using the template of <a href="./rfc6838">RFC 6838</a> [<a href="./rfc6838" title='"Media Type Specifications and Registration Procedures"'>RFC6838</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.1.%20%20Media%20Type%20Definition"></a><a class="selflink" href="#section-6.1" id="section-6.1">6.1</a>.  Media Type Definition</span>

   Type name: audio

   Subtype name: aptx

   Required parameters:

      rate:
      RTP timestamp clock rate, which is equal to the sampling rate
      in Hz.  RECOMMENDED values for rate are 8000, 11025, 16000,
      22050, 24000, 32000, 44100, and 48000 samples per second.  Other
      values are permissible.

      channels:
      The number of logical audio channels that are present in the
      audio stream.

      variant:
      The variant of apt-X (i.e., Standard or Enhanced) that is being
      used.  The following variants can be signaled:

         variant=standard
         variant=enhanced

      bitresolution:
      The number of bits used by the algorithm to encode four PCM
      samples.  This value MAY only be set to 16 for Standard apt-X
      and 16 or 24 for Enhanced apt-X.










<span class="grey">Lindsay &amp; Foerster           Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


   Optional parameters:

      ptime:
      The recommended length of time (in milliseconds) represented by
      the media in a packet.  Defaults to 4 milliseconds.
      See <a href="./rfc4566#section-6">Section 6 of [RFC4566]</a>.

      maxptime:
      The maximum amount of media that can be encapsulated in each
      packet, expressed as time in milliseconds.  See <a href="./rfc4566#section-6">Section 6 of
      [RFC4566]</a>.

      stereo-channel-pairs:
      Defines audio channels that are stereo paired in the stream.
      See <a href="#section-3">Section 3</a>.  Each pair of audio channels is defined as two
      comma-separated values that correspond to channel numbers in
      the range 1..channels.  Each stereo channel pair is preceded
      by a '{' and followed by a '}'.  Pairs of audio channels are
      separated by a comma.  A channel MUST NOT be paired with more
      than one other channel.  The absence of this parameter signals
      that each channel has been independently encoded.

      embedded-autosync-channels:
      Defines channels that carry embedded autosync.
      Embedded-autosync-channels is defined as a list of
      comma-separated values that correspond to channel numbers in
      the range 1..channels.  When a channel is stereo paired, embedded
      autosync is shared across channels in the pair.  The first channel
      as defined in stereo-channel-pairs MUST be specified in the
      embedded-autosync-channels list.

      embedded-aux-channels:
      Defines channels that carry embedded auxiliary data.
      Embedded-aux-channels is defined as a list of comma-separated
      values that correspond to channel numbers in the range
      1..channels.  When a channel is stereo paired, embedded auxiliary
      data is shared across channels in the pair.  The second channel
      as defined in stereo-channel-pairs MUST be specified in the
      embedded-aux-channels list.

   Encoding considerations: This media type is framed in RTP and
      contains binary data; see <a href="./rfc6838#section-4.8">Section 4.8 of [RFC6838]</a>.

   Security considerations: See <a href="./rfc4855#section-5">Section 5 of [RFC4855]</a> and <a href="./rfc4856#section-4">Section 4
      of [RFC4856]</a>.

   Interoperability considerations: none




<span class="grey">Lindsay &amp; Foerster           Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


   Published specification: <a href="./rfc7310">RFC 7310</a>

   Applications which use this media type: Audio streaming

   Fragment identifier considerations: None

   Additional information: none

   Person &amp; email address to contact for further information:
      John Lindsay &lt;Lindsay@worldcastsystems.com&gt;

   Intended usage: COMMON

   Restrictions on usage: This media type depends on RTP framing,
      and hence is only defined for transfer via RTP [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>].

   Author/Change controller: IETF Payload Working Group delegated
      from the IESG.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.%20%20Mapping%20to%20SDP"></a><a class="selflink" href="#section-6.2" id="section-6.2">6.2</a>.  Mapping to SDP</span>

   The information carried in the media type specification has a
   specific mapping to fields in the Session Description Protocol (SDP)
   [<a href="./rfc4566" title='"SDP: Session Description Protocol"'>RFC4566</a>] that is commonly used to describe RTP sessions.  When SDP
   is used to describe sessions, the media type mappings are as follows.

   o  The type name ("audio") goes in SDP "m=" as the media name.

   o  The subtype name ("aptx") goes in SDP "a=rtpmap" as the encoding
      name.

   o  The parameter "rate" also goes in "a=rtpmap" as the clock rate.

   o  The parameter "channels" also goes in "a=rtpmap" as the channel
      count.

   o  The parameter "maxptime", when present, MUST be included in the
      SDP "a=maxptime" attribute.

   o  The required parameters "variant" and "bitresolution" MUST be
      included in the SDP "a=fmtp" attribute.

   o  The optional parameters "stereo-channel-pairs",
      "embedded-autosync-channels", and "embedded-aux-channels", when
      present, MUST be included in the SDP "a=fmtp" attribute.






<span class="grey">Lindsay &amp; Foerster           Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


   o  The parameter "ptime", when present, goes in a separate SDP
      attribute field and is signaled as "a=ptime:&lt;value&gt;", where
      &lt;value&gt; is the number of milliseconds of audio represented by
      one RTP packet.  See <a href="./rfc4566#section-6">Section 6 of [RFC4566]</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.1.%20%20SDP%20Usage%20Examples"></a><a class="selflink" href="#section-6.2.1" id="section-6.2.1">6.2.1</a>.  SDP Usage Examples</span>

   Some example SDP session descriptions utilizing apt-X encodings
   follow.  In these examples, long "a=fmtp" lines are folded to meet
   the column width constraints of this document.

   Example 1: A Standard apt-X stream that encodes two independent
   44.1-kHz 16-bit PCM channels into a 4-millisecond RTP packet.

      m=audio 5004 RTP/AVP 98
      a=rtpmap:98 aptx/44100/2
      a=fmtp:98 variant=standard; bitresolution=16;
      a=ptime:4

   Example 2: An Enhanced apt-X stream that encodes two 48-kHz 24-bit
   stereo channels into a 4-millisecond RTP packet and carries both an
   embedded autosync and auxiliary data channel.

      m=audio 5004 RTP/AVP 98
      a=rtpmap:98 aptx/48000/2
      a=fmtp:98 variant=enhanced; bitresolution=24;
      stereo-channel-pairs={1,2}; embedded-autosync-channels=1;
      embedded-aux-channels=2
      a=ptime:4

   Example 3: An Enhanced apt-X stream that encodes six 44.1-kHz 24-bit
   channels into a 6-millisecond RTP packet.  Channels 1,2 and 3,4 are
   stereo pairs.  Both stereo pairs carry both an embedded autosync and
   auxiliary data channel.

      m=audio 5004 RTP/AVP 98
      a=rtpmap:98 aptx/44100/6
      a=fmtp:98 variant=enhanced; bitresolution=24;
      stereo-channel-pairs={1,2},{3,4}; embedded-autosync-channels=1,3;
      embedded-aux-channels=2,4
      a=ptime:6










<span class="grey">Lindsay &amp; Foerster           Standards Track                   [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.2.%20%20Offer%2FAnswer%20Considerations"></a><a class="selflink" href="#section-6.2.2" id="section-6.2.2">6.2.2</a>.  Offer/Answer Considerations</span>

   The only negotiable parameter is the delivery method.  All other
   parameters are declarative.  The offer, as described in [<a href="./rfc3264" title='"An Offer/Answer Model with Session Description Protocol (SDP)"'>RFC3264</a>],
   may contain a large number of delivery methods per single fmtp
   attribute.  The answerer MUST remove every delivery method and
   configuration URI that is not supported.  Apart from this exceptional
   case, all parameters MUST NOT be altered on answer.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  IANA Considerations</span>

   One media type (audio/aptx) has been registered in the "Media Types"
   registry.  See <a href="#section-6.1">Section 6.1</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  Security Considerations</span>

   RTP packets using the payload format defined in this specification
   are subject to the security considerations discussed in the RTP
   specification [<a href="./rfc3550" title='"RTP: A Transport Protocol for Real-Time Applications"'>RFC3550</a>] and any appropriate RTP profile (for example,
   [<a href="./rfc3551" title='"RTP Profile for Audio and Video Conferences with Minimal Control"'>RFC3551</a>]).  This implies that confidentiality of the media streams
   is achieved by encryption.  Because the audio coding used with this
   payload format is applied end to end, encryption may be performed
   after audio coding so there is no conflict between the two
   operations.  A potential denial-of-service threat exists for audio
   coding techniques that have non-uniform receiver-end computational
   load.  The attacker can inject pathological datagrams into the stream
   that are complex to decode and cause the receiver to be overloaded.
   However, the Standard apt-X and Enhanced apt-X audio coding
   algorithms do not exhibit any significant non-uniformity.  As with
   any IP-based protocol, in some circumstances a receiver may be
   overloaded simply by the receipt of too many packets, either desired
   or undesired.  Network-layer authentication may be used to discard
   packets from undesired sources, but the processing cost of the
   authentication itself may be too high.  In a multicast environment,
   pruning of specific sources may be implemented in future versions of
   IGMP [<a href="./rfc3376" title='"Internet Group Management Protocol, Version 3"'>RFC3376</a>] and in multicast routing protocols to allow a receiver
   to select which sources are allowed to reach it.  [<a href="./rfc6562" title='"Guidelines for the Use of Variable Bit Rate Audio with Secure RTP"'>RFC6562</a>] has
   highlighted potential security vulnerabilities of Variable Bit Rate
   (VBR) codecs using Secure RTP transmission methods.  As the Standard
   apt-X and Enhanced apt-X codecs are Constant Bit Rate (CBR) codecs,
   this security vulnerability is therefore not applicable.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.%20%20Acknowledgements"></a><a class="selflink" href="#section-9" id="section-9">9</a>.  Acknowledgements</span>

   This specification was facilitated by earlier documents produced by
   Greg Massey, David Trainer, James Hunter, and Derrick Rea, along with
   practical tests carried out by Paul McCambridge of APT Ltd.




<span class="grey">Lindsay &amp; Foerster           Standards Track                   [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.%20%20References"></a><a class="selflink" href="#section-10" id="section-10">10</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.1.%20%20Normative%20References"></a><a class="selflink" href="#section-10.1" id="section-10.1">10.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC3264">RFC3264</a>]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model
              with Session Description Protocol (SDP)", <a href="./rfc3264">RFC 3264</a>,
              June 2002.

   [<a id="ref-RFC3550">RFC3550</a>]  Schulzrinne, H., Casner, S., Frederick, R., and V.
              Jacobson, "RTP: A Transport Protocol for Real-Time
              Applications", STD 64, <a href="./rfc3550">RFC 3550</a>, July 2003.

   [<a id="ref-RFC3551">RFC3551</a>]  Schulzrinne, H. and S. Casner, "RTP Profile for Audio and
              Video Conferences with Minimal Control", STD 65, <a href="./rfc3551">RFC 3551</a>,
              July 2003.

   [<a id="ref-RFC4566">RFC4566</a>]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
              Description Protocol", <a href="./rfc4566">RFC 4566</a>, July 2006.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.2.%20%20Informative%20References"></a><a class="selflink" href="#section-10.2" id="section-10.2">10.2</a>.  Informative References</span>

   [<a id="ref-RFC2733">RFC2733</a>]  Rosenberg, J. and H. Schulzrinne, "An RTP Payload Format
              for Generic Forward Error Correction", <a href="./rfc2733">RFC 2733</a>,
              December 1999.

   [<a id="ref-RFC3376">RFC3376</a>]  Cain, B., Deering, S., Kouvelas, I., Fenner, B., and A.
              Thyagarajan, "Internet Group Management Protocol,
              Version 3", <a href="./rfc3376">RFC 3376</a>, October 2002.

   [<a id="ref-RFC4855">RFC4855</a>]  Casner, S., "Media Type Registration of RTP Payload
              Formats", <a href="./rfc4855">RFC 4855</a>, February 2007.

   [<a id="ref-RFC4856">RFC4856</a>]  Casner, S., "Media Type Registration of Payload Formats in
              the RTP Profile for Audio and Video Conferences",
              <a href="./rfc4856">RFC 4856</a>, February 2007.

   [<a id="ref-RFC5109">RFC5109</a>]  Li, A., Ed., "RTP Payload Format for Generic Forward Error
              Correction", <a href="./rfc5109">RFC 5109</a>, December 2007.










<span class="grey">Lindsay &amp; Foerster           Standards Track                   [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc7310">RFC 7310</a>                    apt-X RTP Format                   July 2014</span>


   [<a id="ref-RFC6562">RFC6562</a>]  Perkins, C. and JM. Valin, "Guidelines for the Use of
              Variable Bit Rate Audio with Secure RTP", <a href="./rfc6562">RFC 6562</a>,
              March 2012.

   [<a id="ref-RFC6838">RFC6838</a>]  Freed, N., Klensin, J., and T. Hansen, "Media Type
              Specifications and Registration Procedures", <a href="https://www.rfc-editor.org/bcp/bcp13">BCP 13</a>,
              <a href="./rfc6838">RFC 6838</a>, January 2013.

Authors' Addresses

   John Lindsay
   APT Ltd
   729 Springfield Road
   Belfast
   Northern Ireland
   BT12 7FP
   UK

   Phone: +44 2890 677200
   EMail: Lindsay@worldcastsystems.com


   Hartmut Foerster
   APT Ltd
   729 Springfield Road
   Belfast
   Northern Ireland
   BT12 7FP
   UK

   Phone: +44 2890 677200
   EMail: Foerster@worldcastsystems.com



















Lindsay &amp; Foerster           Standards Track                   [Page 16]
</pre>
</body></html>