<html><head></head><body><pre>Network Working Group                                        S. Chisholm
Request for Comments: 5277                                        Nortel
Category: Standards Track                                     H. Trevino
                                                                   Cisco
                                                               July 2008


                      <span class="h1">NETCONF Event Notifications</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Abstract

   This document defines mechanisms that provide an asynchronous message
   notification delivery service for the Network Configuration protocol
   (NETCONF).  This is an optional capability built on top of the base
   NETCONF definition.  This document defines the capabilities and
   operations necessary to support this service.



























<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-1.1">1.1</a>.  Definition of Terms  . . . . . . . . . . . . . . . . . . .  <a href="#page-3">3</a>
     <a href="#section-1.2">1.2</a>.  Motivation . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-4">4</a>
     <a href="#section-1.3">1.3</a>.  Event Notifications in NETCONF . . . . . . . . . . . . . .  <a href="#page-5">5</a>
   <a href="#section-2">2</a>.  Notification-Related Operations  . . . . . . . . . . . . . . .  <a href="#page-5">5</a>
     <a href="#section-2.1">2.1</a>.  Subscribing to Receive Event Notifications . . . . . . . .  <a href="#page-5">5</a>
       <a href="#section-2.1.1">2.1.1</a>.  &lt;create-subscription&gt;  . . . . . . . . . . . . . . . .  <a href="#page-6">6</a>
     <a href="#section-2.2">2.2</a>.  Sending Event Notifications  . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
       <a href="#section-2.2.1">2.2.1</a>.  &lt;notification&gt; . . . . . . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
     <a href="#section-2.3">2.3</a>.  Terminating the Subscription . . . . . . . . . . . . . . .  <a href="#page-9">9</a>
   <a href="#section-3">3</a>.  Supporting Concepts  . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-3.1">3.1</a>.  Capabilities Exchange  . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
       <a href="#section-3.1.1">3.1.1</a>.  Capability Identifier  . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
       <a href="#section-3.1.2">3.1.2</a>.  Capability Example . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
     <a href="#section-3.2">3.2</a>.  Event Streams  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-10">10</a>
       <a href="#section-3.2.1">3.2.1</a>.  Event Stream Definition  . . . . . . . . . . . . . . . <a href="#page-12">12</a>
       <a href="#section-3.2.2">3.2.2</a>.  Event Stream Content Format  . . . . . . . . . . . . . <a href="#page-12">12</a>
       <a href="#section-3.2.3">3.2.3</a>.  Default Event Stream . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
       <a href="#section-3.2.4">3.2.4</a>.  Event Stream Sources . . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
       <a href="#section-3.2.5">3.2.5</a>.  Event Stream Discovery . . . . . . . . . . . . . . . . <a href="#page-12">12</a>
     <a href="#section-3.3">3.3</a>.  Notification Replay  . . . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
       <a href="#section-3.3.1">3.3.1</a>.  Overview . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-15">15</a>
       <a href="#section-3.3.2">3.3.2</a>.  Creating a Subscription with Replay  . . . . . . . . . <a href="#page-16">16</a>
     <a href="#section-3.4">3.4</a>.  Notification Management Schema . . . . . . . . . . . . . . <a href="#page-16">16</a>
     <a href="#section-3.5">3.5</a>.  Subscriptions Data . . . . . . . . . . . . . . . . . . . . <a href="#page-20">20</a>
     <a href="#section-3.6">3.6</a>.  Filter Mechanics . . . . . . . . . . . . . . . . . . . . . <a href="#page-20">20</a>
       <a href="#section-3.6.1">3.6.1</a>.  Filtering  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-20">20</a>
     <a href="#section-3.7">3.7</a>.  Message Flow . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-20">20</a>
   <a href="#section-4">4</a>.  XML Schema for Event Notifications . . . . . . . . . . . . . . <a href="#page-22">22</a>
   <a href="#section-5">5</a>.  Filtering Examples . . . . . . . . . . . . . . . . . . . . . . <a href="#page-26">26</a>
     <a href="#section-5.1">5.1</a>.  Subtree Filtering  . . . . . . . . . . . . . . . . . . . . <a href="#page-28">28</a>
     <a href="#section-5.2">5.2</a>.  XPATH Filters  . . . . . . . . . . . . . . . . . . . . . . <a href="#page-29">29</a>
   <a href="#section-6">6</a>.  Interleave Capability  . . . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>
     <a href="#section-6.1">6.1</a>.  Description  . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>
     <a href="#section-6.2">6.2</a>.  Dependencies . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>
     <a href="#section-6.3">6.3</a>.  Capability Identifier  . . . . . . . . . . . . . . . . . . <a href="#page-30">30</a>
     <a href="#section-6.4">6.4</a>.  New Operations . . . . . . . . . . . . . . . . . . . . . . <a href="#page-31">31</a>
     <a href="#section-6.5">6.5</a>.  Modifications to Existing Operations . . . . . . . . . . . <a href="#page-31">31</a>
   <a href="#section-7">7</a>.  Security Considerations  . . . . . . . . . . . . . . . . . . . <a href="#page-31">31</a>
   <a href="#section-8">8</a>.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . <a href="#page-32">32</a>
   <a href="#section-9">9</a>.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . <a href="#page-33">33</a>
   <a href="#section-10">10</a>. Normative References . . . . . . . . . . . . . . . . . . . . . <a href="#page-33">33</a>







<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   [<a id="ref-NETCONF">NETCONF</a>] can be conceptually partitioned into four layers:

        Layer                            Example
    +-------------+      +-------------------------------------------+
    |   Content   |      |     Configuration data                    |
    +-------------+      +-------------------------------------------+
              |                           |
    +-------------+      +-------------------------------------------+
    | Operations  |      |&lt;get-config&gt;, &lt;edit-config&gt;, &lt;notification&gt;|
    +-------------+      +-------------------------------------------+
              |                           |                    |
    +-------------+      +-----------------------------+       |
    |     RPC     |      |    &lt;rpc&gt;, &lt;rpc-reply&gt;       |       |
    +-------------+      +-----------------------------+       |
              |                           |                    |
    +-------------+      +-------------------------------------------+
    |  Transport  |      |   BEEP, SSH, SSL, console                 |
    |  Protocol   |      |                                           |
    +-------------+      +-------------------------------------------+

                                 Figure 1

   This document defines mechanisms that provide an asynchronous message
   notification delivery service for the [<a href="#ref-NETCONF" title='"NETCONF Configuration Protocol"'>NETCONF</a>] protocol.  This is an
   optional capability built on top of the base NETCONF definition.
   This memo defines the capabilities and operations necessary to
   support this service.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.1.%20%20Definition%20of%20Terms"></a><a class="selflink" href="#section-1.1" id="section-1.1">1.1</a>.  Definition of Terms</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   Element:  An [<a href="#ref-XML" title='"Extensible Markup Language (XML) 1.0"'>XML</a>] Element.

   Subscription:  An agreement and method to receive event notifications
      over a NETCONF session.  A concept related to the delivery of
      notifications (if there are any to send) involving destination and
      selection of notifications.  It is bound to the lifetime of a
      session.








<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   Operation:  This term is used to refer to NETCONF protocol operations
      [<a href="#ref-NETCONF" title='"NETCONF Configuration Protocol"'>NETCONF</a>].  Within this document, operation refers to NETCONF
      protocol operations defined in support of NETCONF notifications.

   Event:  An event is something that happens that may be of interest -
      a configuration change, a fault, a change in status, crossing a
      threshold, or an external input to the system, for example.
      Often, this results in an asynchronous message, sometimes referred
      to as a notification or event notification, being sent to
      interested parties to notify them that this event has occurred.

   Replay:  The ability to send/re-send previously logged notifications
      upon request.  These notifications are sent asynchronously.  This
      feature is implemented by the NETCONF server and invoked by the
      NETCONF client.

   Stream:  An event stream is a set of event notifications matching
      some forwarding criteria and available to NETCONF clients for
      subscription.

   Filter:  A parameter that indicates which subset of all possible
      events are of interest.  A filter is defined as one or more filter
      elements [<a href="#ref-NETCONF" title='"NETCONF Configuration Protocol"'>NETCONF</a>], each of which identifies a portion of the
      overall filter.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.2.%20%20Motivation"></a><a class="selflink" href="#section-1.2" id="section-1.2">1.2</a>.  Motivation</span>

   The motivation for this work is to enable the sending of asynchronous
   messages that are consistent with the data model (content) and
   security model used within a NETCONF implementation.

   The scope of the work aims at meeting the following operational
   needs:

   o  Initial release should ensure it supports notifications in support
      of configuration operations.

   o  It should be possible to use the same data model for notifications
      as for configuration operations.

   o  The solution should support a reasonable message size limit (i.e.,
      not too short).

   o  The notifications should be carried over a connection-oriented
      delivery mechanism.






<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   o  A subscription mechanism for notifications should be provided.
      This takes into account that a NETCONF server does not send
      notifications before being asked to do so, and that it is the
      NETCONF client who initiates the flow of notifications.

   o  A filtering mechanism for sending notifications should be put in
      place within the NETCONF server.

   o  The information contained in a notification should be sufficient
      so that it can be analyzed independent of the transport mechanism.
      In other words, the data content fully describes a notification;
      protocol information is not needed to understand a notification.

   o  The server should have the capability to replay locally logged
      notifications.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.3.%20%20Event%20Notifications%20in%20NETCONF"></a><a class="selflink" href="#section-1.3" id="section-1.3">1.3</a>.  Event Notifications in NETCONF</span>

   This memo defines a mechanism whereby the NETCONF client indicates
   interest in receiving event notifications from a NETCONF server by
   creating a subscription to receive event notifications.  The NETCONF
   server replies to indicate whether the subscription request was
   successful and, if it was successful, begins sending the event
   notifications to the NETCONF client as the events occur within the
   system.  These event notifications will continue to be sent until
   either the NETCONF session is terminated or the subscription
   terminates for some other reason.  The event notification
   subscription allows a number of options to enable the NETCONF client
   to specify which events are of interest.  These are specified when
   the subscription is created.  Note that a subscription cannot be
   modified once created.

   The NETCONF server MUST accept and process the &lt;close-session&gt;
   operation, even while the notification subscription is active.  The
   NETCONF server MAY accept and process other commands; otherwise, they
   will be rejected and the server MUST send a 'resource-denied' error.
   A NETCONF server advertises support of the ability to process other
   commands via the :interleave capability.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Notification-Related%20Operations"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Notification-Related Operations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.%20%20Subscribing%20to%20Receive%20Event%20Notifications"></a><a class="selflink" href="#section-2.1" id="section-2.1">2.1</a>.  Subscribing to Receive Event Notifications</span>

   The event notification subscription is initiated by the NETCONF
   client and responded to by the NETCONF server.  A subscription is
   bound to a single stream for the lifetime of the subscription.  When
   the event notification subscription is created, the events of
   interest are specified.



<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   Content for an event notification subscription can be selected by
   applying user-specified filters.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.1.%20%20%3Ccreate-subscription%3E"></a><a class="selflink" href="#section-2.1.1" id="section-2.1.1">2.1.1</a>.  &lt;create-subscription&gt;</span>

   Description:

      This operation initiates an event notification subscription that
      will send asynchronous event notifications to the initiator of the
      command until the subscription terminates.

   Parameters:

      Stream:

         An optional parameter, &lt;stream&gt;, that indicates which stream of
         events is of interest.  If not present, events in the default
         NETCONF stream will be sent.

      Filter:

         An optional parameter, &lt;filter&gt;, that indicates which subset of
         all possible events is of interest.  The format of this
         parameter is the same as that of the filter parameter in the
         NETCONF protocol operations.  If not present, all events not
         precluded by other parameters will be sent.  See <a href="#section-3.6">section 3.6</a>
         for more information on filters.

      Start Time:

         A parameter, &lt;startTime&gt;, used to trigger the replay feature
         and indicate that the replay should start at the time
         specified.  If &lt;startTime&gt; is not present, this is not a replay
         subscription.  It is not valid to specify start times that are
         later than the current time.  If the &lt;startTime&gt; specified is
         earlier than the log can support, the replay will begin with
         the earliest available notification.  This parameter is of type
         dateTime and compliant to [<a href="./rfc3339" title='"Date and Time on the Internet: Timestamps"'>RFC3339</a>].  Implementations must
         support time zones.












<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


      Stop Time:

         An optional parameter, &lt;stopTime&gt;, used with the optional
         replay feature to indicate the newest notifications of
         interest.  If &lt;stopTime&gt; is not present, the notifications will
         continue until the subscription is terminated.  Must be used
         with and be later than &lt;startTime&gt;.  Values of &lt;stopTime&gt; in
         the future are valid.  This parameter is of type dateTime and
         compliant to [<a href="./rfc3339" title='"Date and Time on the Internet: Timestamps"'>RFC3339</a>].  Implementations must support time
         zones.

   Positive Response:

      If the NETCONF server can satisfy the request, the server sends an
      &lt;ok&gt; element.

   Negative Response:

      An &lt;rpc-error&gt; element is included within the &lt;rpc-reply&gt; if the
      request cannot be completed for any reason.  Subscription requests
      will fail if a filter with invalid syntax is provided or if the
      name of a non-existent stream is provided.

      If a &lt;stopTime&gt; is specified in a request without having specified
      a &lt;startTime&gt;, the following error is returned:

         Tag: missing-element

         Error-type: protocol

         Severity: error

         Error-info: &lt;bad-element&gt;: startTime

         Description: An expected element is missing.

      If the optional replay feature is requested but it is not
      supported by the NETCONF server, the following error is returned:

         Tag: operation-failed

         Error-type: protocol

         Severity: error

         Error-info: none





<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


         Description: Request could not be completed because the
         requested operation failed for some reason not covered by any
         other error condition.

      If a &lt;stopTime&gt; is requested that is earlier than the specified
      &lt;startTime&gt;, the following error is returned:

         Tag: bad-element

         Error-type: protocol

         Severity: error

         Error-info: &lt;bad-element&gt;: stopTime

         Description: An element value is not correct; e.g., wrong type,
         out of range, pattern mismatch.

      If a &lt;startTime&gt; is requested that is later than the current time,
      the following error is returned:

         Tag: bad-element

         Error-type: protocol

         Severity: error

         Error-info: &lt;bad-element&gt;: startTime

         Description: An element value is not correct; e.g., wrong type,
         out of range, pattern mismatch.

<span class="h5"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.1.1.%20%20Usage%20Example"></a><a class="selflink" href="#section-2.1.1.1" id="section-2.1.1.1">2.1.1.1</a>.  Usage Example</span>

   The following demonstrates creating a simple subscription.  More
   complex examples can be found in <a href="#section-5">section 5</a>.

   &lt;netconf:rpc message-id="101"
         xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
       &lt;create-subscription
           xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
       &lt;/create-subscription&gt;
   &lt;/netconf:rpc&gt;








<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.%20%20Sending%20Event%20Notifications"></a><a class="selflink" href="#section-2.2" id="section-2.2">2.2</a>.  Sending Event Notifications</span>

   Once the subscription has been set up, the NETCONF server sends the
   event notifications asynchronously over the connection.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.1.%20%20%3Cnotification%3E"></a><a class="selflink" href="#section-2.2.1" id="section-2.2.1">2.2.1</a>.  &lt;notification&gt;</span>

   Description:

      An event notification is sent to the client who initiated a
      &lt;create-subscription&gt; command asynchronously when an event of
      interest (i.e., meeting the specified filtering criteria) has
      occurred.  An event notification is a complete and well-formed XML
      document.  Note that &lt;notification&gt; is not a Remote Procedure Call
      (RPC) method but rather the top-level element identifying the one-
      way message as a notification.

   Parameters:

      eventTime

         The time the event was generated by the event source.  This
         parameter is of type dateTime and compliant to [<a href="./rfc3339" title='"Date and Time on the Internet: Timestamps"'>RFC3339</a>].
         Implementations must support time zones.

      Also contains notification-specific tagged content, if any.  With
      the exception of &lt;eventTime&gt;, the content of the notification is
      beyond the scope of this document.

   Response:

      No response.  Not applicable.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.3.%20%20Terminating%20the%20Subscription"></a><a class="selflink" href="#section-2.3" id="section-2.3">2.3</a>.  Terminating the Subscription</span>

   Closing of the event notification subscription can be done by using
   the &lt;close-session&gt; operation from the subscriptions session or
   terminating the NETCONF session ( &lt;kill-session&gt; ) or the underlying
   transport session from another session.  If a stop time is provided
   when the subscription is created, the subscription will terminate
   after the stop time is reached.  In this case, the NETCONF session
   will still be an active session.









<span class="grey">Chisholm &amp; Trevino          Standards Track                     [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Supporting%20Concepts"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Supporting Concepts</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20Capabilities%20Exchange"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  Capabilities Exchange</span>

   The ability to process and send event notifications is advertised
   during the capability exchange between the NETCONF client and server.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.1.%20%20Capability%20Identifier"></a><a class="selflink" href="#section-3.1.1" id="section-3.1.1">3.1.1</a>.  Capability Identifier</span>

   "urn:ietf:params:netconf:capability:notification:1.0"

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.2.%20%20Capability%20Example"></a><a class="selflink" href="#section-3.1.2" id="section-3.1.2">3.1.2</a>.  Capability Example</span>

   &lt;hello xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
     &lt;capabilities&gt;
        &lt;capability&gt;
            urn:ietf:params:xml:ns:netconf:base:1.0
          &lt;/capability&gt;
          &lt;capability&gt;
            urn:ietf:params:netconf:capability:startup:1.0
          &lt;/capability&gt;
          &lt;capability&gt;
            urn:ietf:params:netconf:capability:notification:1.0
          &lt;/capability&gt;
       &lt;/capabilities&gt;
     &lt;session-id&gt;4&lt;/session-id&gt;
   &lt;/hello&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20Event%20Streams"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  Event Streams</span>

   An event stream is defined as a set of event notifications matching
   some forwarding criteria.

   Figure 2 illustrates the notification flow and concepts identified in
   this document.  It does not mandate and/or preclude an
   implementation.  The following is observed from the diagram below:
   System components (c1..cn) generate event notifications that are
   passed to a central component for classification and distribution.
   The central component inspects each event notification and matches
   the event notification against the set of stream definitions.  When a
   match occurs, the event notification is considered to be a member of
   that event stream (stream 1..stream n).  An event notification may be
   part of multiple event streams.








<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   At some point after the NETCONF server receives the internal event
   from a stream, it is converted to an appropriate XML encoding by the
   server, and a &lt;notification&gt; element is ready to send to all NETCONF
   sessions subscribed to that stream.

   After generation of the &lt;notification&gt; element, access control is
   applied by the server.  If a session does not have permission to
   receive the &lt;notification&gt;, then it is discarded for that session,
   and processing of the internal event is completed for that session.

   When a NETCONF client subscribes to a given event stream, user-
   defined filter elements, if applicable, are applied to the event
   stream and matching event notifications are forwarded to the NETCONF
   server for distribution to subscribed NETCONF clients.  A filter is
   transferred from the client to the server during the &lt;create-
   subscription&gt; operation and applied against each &lt;notification&gt;
   element generated by the stream.  For more information on filtering,
   see <a href="#section-3.6">Section 3.6</a>.

   A notification-logging service may also be available, in which case,
   the central component logs notifications.  The NETCONF server may
   later retrieve logged notifications via the optional replay feature.
   For more information on replay, see <a href="#section-3.3">section 3.3</a>.

   +----+
   | c1 |----+             available streams
   +----+    |    +---------+
   +----+    |    |central  |-&gt; stream 1
   | c2 |    +---&gt;|event    |-&gt; stream 2     filter  +-------+
   +----+    |    |processor|-&gt; NETCONF stream -----&gt;|NETCONF|
    ...      |    |         |-&gt; stream n             |server |
   System    |    +---------+                        +-------+
   Components|        |                                 /\
    ...      |        |                                 ||
   +----+    |        |       (------------)            ||
   | cn |----+        |       (notification)            ||
   +----+             +-----&gt; (  logging   )            ||
                              (  service   )            ||
                              (------------)            ||
                                                        ||
                                                        ||
                                                        \/
                                                    +-------+
                                                    |NETCONF|
                                                    |client |
                                                    +-------+

                                 Figure 2



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.1.%20%20Event%20Stream%20Definition"></a><a class="selflink" href="#section-3.2.1" id="section-3.2.1">3.2.1</a>.  Event Stream Definition</span>

   Event streams are predefined on the managed device.  The
   configuration of event streams is outside the scope of this document.
   However, it is envisioned that event streams are either pre-
   established by the vendor (pre-configured), user configurable (e.g.,
   part of the device's configuration), or both.  Device vendors may
   allow event stream configuration via the NETCONF protocol (i.e.,
   &lt;edit-config&gt; operation).

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.2.%20%20Event%20Stream%20Content%20Format"></a><a class="selflink" href="#section-3.2.2" id="section-3.2.2">3.2.2</a>.  Event Stream Content Format</span>

   The contents of all event streams made available to a NETCONF client
   (i.e., the notification sent by the NETCONF server) MUST be encoded
   in XML.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.3.%20%20Default%20Event%20Stream"></a><a class="selflink" href="#section-3.2.3" id="section-3.2.3">3.2.3</a>.  Default Event Stream</span>

   A NETCONF server implementation supporting the notification
   capability MUST support the "NETCONF" notification event stream.
   This stream contains all NETCONF XML event notifications supported by
   the NETCONF server.  The exact string "NETCONF" is used during the
   advertisement of stream support during the &lt;get&gt; operation on
   &lt;streams&gt; and during the &lt;create-subscription&gt; operation.  Definition
   of the event notifications and their contents, beyond the inclusion
   of &lt;eventTime&gt;, for this event stream is outside the scope of this
   document.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.4.%20%20Event%20Stream%20Sources"></a><a class="selflink" href="#section-3.2.4" id="section-3.2.4">3.2.4</a>.  Event Stream Sources</span>

   With the exception of the default event stream (NETCONF),
   specification of additional event stream sources (e.g., Simple
   Network Management Protocol (SNMP), syslog) is outside the scope of
   this document.  NETCONF server implementations may leverage any
   desired event stream source in the creation of supported event
   streams.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.5.%20%20Event%20Stream%20Discovery"></a><a class="selflink" href="#section-3.2.5" id="section-3.2.5">3.2.5</a>.  Event Stream Discovery</span>

   A NETCONF client retrieves the list of supported event streams from a
   NETCONF server using the &lt;get&gt; operation.

<span class="h5"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.5.1.%20%20Name%20Retrieval%20Using%20%3Cget%3E%20Operation"></a><a class="selflink" href="#section-3.2.5.1" id="section-3.2.5.1">3.2.5.1</a>.  Name Retrieval Using &lt;get&gt; Operation</span>

   The list of available event streams is retrieved by requesting the
   &lt;streams&gt; subtree via a &lt;get&gt; operation.  Available event streams for
   the requesting session are returned in the reply containing the
   &lt;name&gt; and &lt;description&gt; elements, where the &lt;name&gt; element is



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   mandatory, and its value is unique within the scope of a NETCONF
   server.  An empty reply is returned if there are no available event
   streams, due to user-specified filters on the &lt;get&gt; operation.

   Additional information available about a stream includes whether
   notification replay is available and, if so, the timestamp of the
   earliest possible notification to replay.

   The following example shows retrieving the list of available event
   stream list using the &lt;get&gt; operation.

   &lt;rpc message-id="101"
      xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
     &lt;get&gt;
      &lt;filter type="subtree"&gt;
        &lt;netconf xmlns="urn:ietf:params:xml:ns:netmod:notification"&gt;
           &lt;streams/&gt;
         &lt;/netconf&gt;
      &lt;/filter&gt;
     &lt;/get&gt;
   &lt;/rpc&gt;






























<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   The NETCONF server returns a list of event streams available for
   subscription: NETCONF, SNMP, and syslog-critical in this example.

   &lt;rpc-reply message-id="101"
                    xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
     &lt;data&gt;
       &lt;netconf  xmlns="urn:ietf:params:xml:ns:netmod:notification"&gt;
        &lt;streams&gt;
           &lt;stream&gt;
              &lt;name&gt;NETCONF&lt;/name&gt;
              &lt;description&gt;default NETCONF event stream
              &lt;/description&gt;
              &lt;replaySupport&gt;true&lt;/replaySupport&gt;
              &lt;replayLogCreationTime&gt;
                2007-07-08T00:00:00Z
              &lt;/replayLogCreationTime&gt;
           &lt;/stream&gt;
           &lt;stream&gt;
              &lt;name&gt;SNMP&lt;/name&gt;
              &lt;description&gt;SNMP notifications&lt;/description&gt;
              &lt;replaySupport&gt;false&lt;/replaySupport&gt;
           &lt;/stream&gt;
           &lt;stream&gt;
             &lt;name&gt;syslog-critical&lt;/name&gt;
             &lt;description&gt;Critical and higher severity
             &lt;/description&gt;
             &lt;replaySupport&gt;true&lt;/replaySupport&gt;
             &lt;replayLogCreationTime&gt;
               2007-07-01T00:00:00Z
             &lt;/replayLogCreationTime&gt;
            &lt;/stream&gt;
           &lt;/streams&gt;
         &lt;/netconf&gt;
     &lt;/data&gt;
   &lt;/rpc-reply&gt;

<span class="h5"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.5.2.%20%20Event%20Stream%20Subscription"></a><a class="selflink" href="#section-3.2.5.2" id="section-3.2.5.2">3.2.5.2</a>.  Event Stream Subscription</span>

   A NETCONF client may request from the NETCONF server the list of
   event streams available to this session and then issue a &lt;create-
   subscription&gt; request with the desired event stream name.  Omitting
   the event stream name from the &lt;create-subscription&gt; request results
   in subscription to the default NETCONF event stream.








<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


<span class="h6"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.5.2.1.%20%20Filtering%20Event%20Stream%20Contents"></a><a class="selflink" href="#section-3.2.5.2.1" id="section-3.2.5.2.1">3.2.5.2.1</a>.  Filtering Event Stream Contents</span>

   The set of event notifications delivered in an event stream may be
   further refined by applying a user-specified filter supplied at
   subscription creation time ( &lt;create-subscription&gt; ).  This is a
   transient filter associated with the event notification subscription
   and does not modify the event stream configuration.  The filter
   element is applied against the contents of the &lt;notification&gt; wrapper
   and not the wrapper itself.  See <a href="#section-5">section 5</a> for examples.  Either
   subtree or XPATH filtering can be used.

   XPATH support for the Notification capability is advertised as part
   of the normal XPATH capability advertisement.  If XPATH support is
   advertised via the XPATH capability, then XPATH is supported for
   notification filtering.  If this capability is not advertised, XPATH
   is not supported for notification filtering.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.3.%20%20%20Notification%20Replay"></a><a class="selflink" href="#section-3.3" id="section-3.3">3.3</a>.   Notification Replay</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.3.1.%20%20Overview"></a><a class="selflink" href="#section-3.3.1" id="section-3.3.1">3.3.1</a>.  Overview</span>

   Replay is the ability to create an event subscription that will
   resend recently generated notifications, or in some cases send them
   for the first time to a particular NETCONF client.  These
   notifications are sent the same way as normal notifications.

   A replay of notifications is specified by including the optional
   &lt;startTime&gt; parameter to the subscription command, which indicates
   the start time of the replay.  The end time is specified using the
   optional &lt;stopTime&gt; parameter.  If not present, notifications will
   continue to be sent until the subscription is terminated.

   A notification stream that supports replay is not expected to have an
   unlimited supply of saved notifications available to accommodate any
   replay request.  Clients can query &lt;replayLogCreationTime&gt; and
   &lt;replayLogAgedTime&gt; to learn about the availability of notifications
   for replay.

   The actual number of stored notifications available for retrieval at
   any given time is a NETCONF server implementation-specific matter.
   Control parameters for this aspect of the feature are outside the
   scope of this document.

   Replay is dependent on a notification stream supporting some form of
   notification logging, although it puts no restrictions on the size or
   form of the log, or where it resides within the device.  Whether or
   not a stream supports replay can be discovered by doing a &lt;get&gt;
   operation on the &lt;streams&gt; element of the Notification Management



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   Schema and looking at the value of the &lt;replaySupport&gt; object.  This
   schema also provides the &lt;replayLogCreationTime&gt; element to indicate
   the earliest available logged notification.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.3.2.%20%20Creating%20a%20Subscription%20with%20Replay"></a><a class="selflink" href="#section-3.3.2" id="section-3.3.2">3.3.2</a>.  Creating a Subscription with Replay</span>

   This feature uses optional parameters to the &lt;create-subscription&gt;
   command called &lt;startTime&gt; and &lt;stopTime&gt;. &lt;startTime&gt; identifies the
   earliest date and time of interest for event notifications being
   replayed and also indicates that a subscription will be providing
   replay of notifications.  Events generated before this time are not
   matched. &lt;stopTime&gt; specifies the latest date and time of interest
   for event notifications being replayed.  If it is not present, then
   notifications will continue to be sent until the subscription is
   terminated.

   Note that &lt;startTime&gt; and &lt;stopTime&gt; are associated with the time an
   event was generated by the event source.

   A &lt;replayComplete&gt; notification is sent to indicate that all of the
   replay notifications have been sent and must not be sent for any
   other reason.  If this subscription has a stop time, then this
   session becomes a normal NETCONF session again.  The NETCONF server
   will then accept &lt;rpc&gt; operations even if the server did not
   previously accept such operations due to lack of interleave support.
   In the case of a subscription without a stop time, after the
   &lt;replayComplete&gt; notification has been sent, it can be expected that
   any notifications generated since the start of the subscription
   creation will be sent, followed by notifications as they arise
   naturally within the system.

   The &lt;replayComplete&gt; and &lt;notificationComplete&gt; notifications cannot
   be filtered out.  They will always be sent on a replay subscription
   that specified a &lt;startTime&gt; and &lt;stopTime&gt;, respectively.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.4.%20%20Notification%20Management%20Schema"></a><a class="selflink" href="#section-3.4" id="section-3.4">3.4</a>.  Notification Management Schema</span>

   This Schema is used to learn about the event streams supported on the
   system.  It also contains the definition of the &lt;replayComplete&gt; and
   &lt;notificationComplete&gt; notifications, which are sent to indicate that
   an event replay has sent all applicable notifications and that the
   subscription has terminated, respectively.









<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


 &lt;?xml version="1.0" encoding="UTF-8"?&gt;
 &lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"
     xmlns:ncEvent="urn:ietf:params:xml:ns:netconf:notification:1.0"
     xmlns:manageEvent="urn:ietf:params:xml:ns:netmod:notification"
     targetNamespace="urn:ietf:params:xml:ns:netmod:notification"
     elementFormDefault="qualified"
     attributeFormDefault="unqualified"
     xml:lang="en" version="1.0"&gt;
     &lt;xs:annotation&gt;
         &lt;xs:documentation xml:lang="en"&gt;
             A schema that can be used to learn about current
             event streams.  It also contains the replayComplete
             and notificationComplete notification.
         &lt;/xs:documentation&gt;
     &lt;/xs:annotation&gt;

 &lt;xs:import namespace="http://www.w3.org/XML/1998/namespace"
         schemaLocation="http://www.w3.org/2001/xml.xsd"/&gt;
 &lt;xs:import namespace="urn:ietf:params:xml:ns:netconf:base:1.0"
     schemaLocation="netconf.xsd"/&gt;
 &lt;xs:import namespace=
     "urn:ietf:params:xml:ns:netconf:notification:1.0"
       schemaLocation="notification.xsd"/&gt;

 &lt;xs:element name="netconf" type="manageEvent:Netconf"/&gt;

 &lt;xs:complexType name="Netconf"&gt;
   &lt;xs:sequence&gt;
       &lt;xs:element name="streams" &gt;
         &lt;xs:annotation&gt;
            &lt;xs:documentation&gt;
              The list of event streams supported by the
              system.  When a query is issued, the returned
              set of streams is determined based on user
              privileges.
            &lt;/xs:documentation&gt;
          &lt;/xs:annotation&gt;
          &lt;xs:complexType&gt;
            &lt;xs:sequence minOccurs="1" maxOccurs="unbounded"&gt;
              &lt;xs:element name="stream"&gt;
                 &lt;xs:annotation&gt;
                   &lt;xs:documentation&gt;
                     Stream name, description, and other information.
                   &lt;/xs:documentation&gt;
                 &lt;/xs:annotation&gt;
                 &lt;xs:complexType&gt;
                   &lt;xs:sequence&gt;



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 17]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-18"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


                     &lt;xs:element name="name"
                             type="ncEvent:streamNameType"&gt;
                        &lt;xs:annotation&gt;
                          &lt;xs:documentation&gt;
                            The name of the event stream.  If this is
                            the default NETCONF stream, this must have
                            the value "NETCONF".
                          &lt;/xs:documentation&gt;
                        &lt;/xs:annotation&gt;
                     &lt;/xs:element&gt;
                     &lt;xs:element name="description"
                                         type="xs:string"&gt;
                        &lt;xs:annotation&gt;
                          &lt;xs:documentation&gt;
                            A description of the event stream, including
                            such information as the type of events that
                            are sent over this stream.
                          &lt;/xs:documentation&gt;
                        &lt;/xs:annotation&gt;
                     &lt;/xs:element&gt;
                     &lt;xs:element name="replaySupport"
                                         type="xs:boolean"&gt;
                      &lt;xs:annotation&gt;
                          &lt;xs:documentation&gt;
                            An indication of whether or not event replay
                            is available on this stream.
                          &lt;/xs:documentation&gt;
                        &lt;/xs:annotation&gt;
                     &lt;/xs:element&gt;
                     &lt;xs:element name="replayLogCreationTime"
                                    type="xs:dateTime" minOccurs="0"&gt;
                       &lt;xs:annotation&gt;
                         &lt;xs:documentation&gt;
                        The timestamp of the creation of the log
                        used to support the replay function on
                        this stream.
                        Note that this might be earlier then
                        the earliest available
                        notification in the log.  This object
                        is updated if the log resets
                        for some reason.  This
                        object MUST be present if replay is
                        supported.
                          &lt;/xs:documentation&gt;
                        &lt;/xs:annotation&gt;
                      &lt;/xs:element&gt;
                      &lt;xs:element name="replayLogAgedTime"
                             type="xs:dateTime" minOccurs="0"&gt;



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 18]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-19"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


                        &lt;xs:annotation&gt;
                          &lt;xs:documentation&gt;
                            The timestamp of the last notification
                            aged out of the log. This
                            object MUST be present if replay is
                            supported and any notifications
                            have been aged out of the log.
                          &lt;/xs:documentation&gt;
                        &lt;/xs:annotation&gt;
                      &lt;/xs:element&gt;
                    &lt;/xs:sequence&gt;
                  &lt;/xs:complexType&gt;
                &lt;/xs:element&gt;
              &lt;/xs:sequence&gt;
            &lt;/xs:complexType&gt;
          &lt;/xs:element&gt;
     &lt;/xs:sequence&gt;
     &lt;/xs:complexType&gt;

     &lt;xs:complexType name="ReplayCompleteNotificationType"&gt;
         &lt;xs:complexContent&gt;
             &lt;xs:extension base="ncEvent:NotificationContentType"/&gt;
         &lt;/xs:complexContent&gt;
     &lt;/xs:complexType&gt;

     &lt;xs:element name="replayComplete"
         type="manageEvent:ReplayCompleteNotificationType"
         substitutionGroup="ncEvent:notificationContent"&gt;
                 &lt;xs:annotation&gt;
           &lt;xs:documentation&gt;
             This notification is sent to signal the end of a replay
             portion of a subscription.
           &lt;/xs:documentation&gt;
         &lt;/xs:annotation&gt;
         &lt;/xs:element&gt;

     &lt;xs:complexType name="NotificationCompleteNotificationType"&gt;
         &lt;xs:complexContent&gt;
             &lt;xs:extension base="ncEvent:NotificationContentType"/&gt;
         &lt;/xs:complexContent&gt;
     &lt;/xs:complexType&gt;

     &lt;xs:element name="notificationComplete"
         type="manageEvent:NotificationCompleteNotificationType"
         substitutionGroup="ncEvent:notificationContent"&gt;
                 &lt;xs:annotation&gt;
           &lt;xs:documentation&gt;
             This notification is sent to signal the end of a



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 19]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-20"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


             notification subscription.  It is sent in the case
             that stopTime was specified during the creation of
             the subscription.
           &lt;/xs:documentation&gt;
         &lt;/xs:annotation&gt;
         &lt;/xs:element&gt;

 &lt;/xs:schema&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.5.%20%20Subscriptions%20Data"></a><a class="selflink" href="#section-3.5" id="section-3.5">3.5</a>.  Subscriptions Data</span>

   Subscriptions are non-persistent state information, and their
   lifetime is defined by their session or by the &lt;stopTime&gt; parameter.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.6.%20%20Filter%20Mechanics"></a><a class="selflink" href="#section-3.6" id="section-3.6">3.6</a>.  Filter Mechanics</span>

   If a filter element is specified to look for data of a particular
   value, and the data item is not present within a particular event
   notification for its value to be checked against, the notification
   will be filtered out.  For example, if one were to check for
   'severity=critical' in a configuration event notification where this
   field was not supported, then the notification would be filtered out.

   For subtree filtering, a non-empty node set means that the filter
   matches.  For XPath filtering, the mechanisms defined in [<a href="#ref-XPATH" title='"XML Path Language (XPath) Version 1.0"'>XPATH</a>]
   should be used to convert the returned value to boolean.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.6.1.%20%20Filtering"></a><a class="selflink" href="#section-3.6.1" id="section-3.6.1">3.6.1</a>.  Filtering</span>

   Filtering is explicitly stated when the event notification
   subscription is created.  This is specified via the 'filter'
   parameter.  A Filter only exists as a parameter to the subscription.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.7.%20%20Message%20Flow"></a><a class="selflink" href="#section-3.7" id="section-3.7">3.7</a>.  Message Flow</span>

   The following figure depicts message flow between a NETCONF client
   (C) and NETCONF server (S) in order to create a subscription and
   begin the flow of notifications.  This subscription specifies a
   &lt;startTime&gt;, so the server starts by replaying logged notifications.
   It is possible that many rpc/rpc-reply sequences occur before the
   subscription is created, but this is not depicted in the figure.










<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 20]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-21"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


                        C                           S
                        |                           |
                        |  capability exchange      |
                        |--------------------------&gt;|
                        |&lt;-------------------------&gt;|
                        |                           |
                        |  &lt;create-subscription&gt;    | (startTime)
                        |--------------------------&gt;|
                        |&lt;--------------------------|
                        |     &lt;rpc-reply&gt;           |
                        |                           |
                        |     &lt;notification&gt;        |
                        |&lt;--------------------------|
                        |                           |
                        |     &lt;notification&gt;        |
                        |&lt;--------------------------|
                        |      &lt;notification&gt;       | (replayComplete)
                        |&lt;--------------------------|
                        |                           |
                        |                           |
                        |                           |
                        |     &lt;notification&gt;        |
                        |&lt;--------------------------|
                        |                           |
                        |                           |
                        |     &lt;notification&gt;        |
                        |&lt;--------------------------|
                        |                           |
                        |                           |

                                 Figure 3

   The following figure depicts message flow between a NETCONF client
   (C) and NETCONF server (S) in order to create a subscription and
   begin the flow of notifications.  This subscription specified a
   &lt;startTime&gt; and &lt;stopTime&gt; so it starts by replaying logged
   notifications and then returns to be a normal command-response
   NETCONF session after the &lt;replayComplete&gt; and &lt;notificationComplete&gt;
   notifications are sent and it is available to process &lt;rpc&gt; requests.
   It is possible that many rpc/rpc-reply sequences occur before the
   subscription is created, but this is not depicted in the figure.










<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 21]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-22"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


                     C                           S
                     |                           |
                     |  capability exchange      |
                     |--------------------------&gt;|
                     |&lt;-------------------------&gt;|
                     |                           |
                     |  &lt;create-subscription&gt;    | (startTime,
                     |--------------------------&gt;|  stopTime)
                     |&lt;--------------------------|
                     |     &lt;rpc-reply&gt;           |
                     |                           |
                     |     &lt;notification&gt;        |
                     |&lt;--------------------------|
                     |                           |
                     |     &lt;notification&gt;        |
                     |&lt;--------------------------|
                     |      &lt;notification&gt;       | (replayComplete)
                     |&lt;--------------------------|
                     |      &lt;notification&gt;       |(notificationComplete)
                     |&lt;--------------------------|
                     |                           |
                     |                           |
                     |                           |
                     |          &lt;rpc&gt;            |
                     |--------------------------&gt;|
                     |&lt;--------------------------|
                     |       &lt;rpc-reply&gt;         |
                     |                           |


                                 Figure 4

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20XML%20Schema%20for%20Event%20Notifications"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  XML Schema for Event Notifications</span>

   The following [<a href="#ref-XMLSchema" title='"XML Schema Part 1: Structures Second Edition"'>XMLSchema</a>] defines NETCONF Event Notifications.

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"
     xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"
     targetNamespace=
        "urn:ietf:params:xml:ns:netconf:notification:1.0"
     elementFormDefault="qualified"
     attributeFormDefault="unqualified"
       xml:lang="en"&gt;






<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 22]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-23"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


    &lt;!-- import standard XML definitions --&gt;

     &lt;xs:import namespace="http://www.w3.org/XML/1998/namespace"
                schemaLocation="http://www.w3.org/2001/xml.xsd"&gt;
       &lt;xs:annotation&gt;
         &lt;xs:documentation&gt;
           This import accesses the xml: attribute groups for the
           xml:lang as declared on the error-message element.
         &lt;/xs:documentation&gt;
       &lt;/xs:annotation&gt;
     &lt;/xs:import&gt;

     &lt;!-- import base netconf definitions --&gt;
     &lt;xs:import namespace="urn:ietf:params:xml:ns:netconf:base:1.0"
       schemaLocation="netconf.xsd"/&gt;

&lt;!-- ************** Symmetrical Operations  ********************--&gt;

     &lt;!-- &lt;create-subscription&gt; operation --&gt;

    &lt;xs:complexType name="createSubscriptionType"&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base="netconf:rpcOperationType"&gt;
                &lt;xs:sequence&gt;
                    &lt;xs:element name="stream"
                        type="streamNameType" minOccurs="0"&gt;
                        &lt;xs:annotation&gt;
                            &lt;xs:documentation&gt;
                               An optional parameter that indicates
                               which stream of events is of interest.
                               If not present, then events in the
                               default NETCONF stream will be sent.
                            &lt;/xs:documentation&gt;
                        &lt;/xs:annotation&gt;
                    &lt;/xs:element&gt;
                        &lt;xs:element name="filter"
                            type="netconf:filterInlineType"
                            minOccurs="0"&gt;
                            &lt;xs:annotation&gt;
                                &lt;xs:documentation&gt;
                                    An optional parameter that indicates
                                    which subset of all possible events
                                    is of interest.  The format of this
                                    parameter is the same as that of the
                                    filter parameter in the NETCONF
                                    protocol operations.  If not
                                    present, all events not precluded
                                    by other parameters will be sent.



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 23]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-24"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


                                &lt;/xs:documentation&gt;
                            &lt;/xs:annotation&gt;
                        &lt;/xs:element&gt;
                    &lt;xs:element name="startTime" type="xs:dateTime"
                        minOccurs="0" &gt;
                        &lt;xs:annotation&gt;
                            &lt;xs:documentation&gt;
                                A parameter used to trigger the replay
                                feature indicating that the replay
                                should start at the time specified.  If
                                start time is not present, this is not a
                                replay subscription.
                            &lt;/xs:documentation&gt;
                        &lt;/xs:annotation&gt;
                    &lt;/xs:element&gt;
                    &lt;xs:element name="stopTime" type="xs:dateTime"
                        minOccurs="0" &gt;
                        &lt;xs:annotation&gt;
                            &lt;xs:documentation&gt;
                                An optional parameter used with the
                                optional replay feature to indicate the
                                newest notifications of interest.  If
                                stop time is not present, the
                                notifications will continue until the
                                subscription is terminated.  Must be
                                used with startTime.
                            &lt;/xs:documentation&gt;
                        &lt;/xs:annotation&gt;
                    &lt;/xs:element&gt;
                &lt;/xs:sequence&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
    &lt;xs:simpleType name="streamNameType"&gt;
        &lt;xs:annotation&gt;
            &lt;xs:documentation&gt;
                The name of an event stream.
            &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
        &lt;xs:restriction base="xs:string"/&gt;
    &lt;/xs:simpleType&gt;










<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 24]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-25"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


    &lt;xs:element name="create-subscription"
        type="createSubscriptionType"
        substitutionGroup="netconf:rpcOperation"&gt;
        &lt;xs:annotation&gt;
            &lt;xs:documentation&gt;
                The command to create a notification subscription.  It
                takes as argument the name of the notification stream
                and filter.  Both of those options
                limit the content of the subscription.  In addition,
                there are two time-related parameters, startTime and
                stopTime, which can be used to select the time interval
                of interest to the notification replay feature.
            &lt;/xs:documentation&gt;
        &lt;/xs:annotation&gt;
    &lt;/xs:element&gt;

&lt;!-- ************** One-way Operations  ******************--&gt;

     &lt;!-- &lt;Notification&gt; operation --&gt;
     &lt;xs:complexType name="NotificationContentType"/&gt;

    &lt;xs:element name="notificationContent"
        type="NotificationContentType" abstract="true"/&gt;

    &lt;xs:complexType name="NotificationType"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name="eventTime" type="xs:dateTime"&gt;
              &lt;xs:annotation&gt;
                &lt;xs:documentation&gt;
                The time the event was generated by the event source.
                &lt;/xs:documentation&gt;
              &lt;/xs:annotation&gt;
            &lt;/xs:element&gt;
            &lt;xs:element ref="notificationContent"/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:element name="notification" type="NotificationType"/&gt;
  &lt;/xs:schema&gt;












<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 25]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-26"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Filtering%20Examples"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Filtering Examples</span>

   The following section provides examples to illustrate the various
   methods of filtering content on an event notification subscription.

   In order to illustrate the use of filter expressions, it is necessary
   to assume some of the event notification content.  The examples below
   assume that the event notification schema definition has an &lt;event&gt;
   element at the top level consisting of the event class (e.g., fault,
   state, config), reporting entity, and either severity or operational
   state.

   Examples in this section are generated from the following fictional
   Schema.

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;xs:schema targetNamespace="http://example.com/event/1.0"
       xmlns="http://example.com/event/1.0"
       elementFormDefault="qualified"
       xmlns:xs="http://www.w3.org/2001/XMLSchema"
       xmlns:ncEvent="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;

       &lt;xs:import namespace=
           "urn:ietf:params:xml:ns:netconf:notification:1.0"
           schemaLocation="notification.xsd"/&gt;

       &lt;xs:complexType name="eventType"&gt;
           &lt;xs:complexContent&gt;
               &lt;xs:extension base="ncEvent:NotificationContentType"&gt;
                   &lt;xs:sequence&gt;
                       &lt;xs:element name="eventClass" /&gt;
                       &lt;xs:element name="reportingEntity"&gt;
                           &lt;xs:complexType&gt;
                               &lt;xs:sequence&gt;
                                   &lt;xs:any namespace="##any"
                                   processContents="lax"/&gt;
                               &lt;/xs:sequence&gt;
                           &lt;/xs:complexType&gt;
                       &lt;/xs:element&gt;
                       &lt;xs:choice&gt;
                           &lt;xs:element name="severity"/&gt;
                           &lt;xs:element name="operState"/&gt;
                       &lt;/xs:choice&gt;
                   &lt;/xs:sequence&gt;
               &lt;/xs:extension&gt;
           &lt;/xs:complexContent&gt;
       &lt;/xs:complexType&gt;




<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 26]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-27"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


       &lt;xs:element name="event"
           type="eventType"
           substitutionGroup="ncEvent:notificationContent"/&gt;

   &lt;/xs:schema&gt;

   The above fictional notification definition could result in the
   following sample notification list, which is used in the examples in
   this section.

   &lt;notification
      xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
      &lt;eventTime&gt;2007-07-08T00:01:00Z&lt;/eventTime&gt;
      &lt;event xmlns="http://example.com/event/1.0"&gt;
         &lt;eventClass&gt;fault&lt;/eventClass&gt;
         &lt;reportingEntity&gt;
             &lt;card&gt;Ethernet0&lt;/card&gt;
         &lt;/reportingEntity&gt;
         &lt;severity&gt;major&lt;/severity&gt;
       &lt;/event&gt;
   &lt;/notification&gt;

   &lt;notification
     xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
      &lt;eventTime&gt;2007-07-08T00:02:00Z&lt;/eventTime&gt;
      &lt;event xmlns="http://example.com/event/1.0"&gt;
          &lt;eventClass&gt;fault&lt;/eventClass&gt;
          &lt;reportingEntity&gt;
              &lt;card&gt;Ethernet2&lt;/card&gt;
          &lt;/reportingEntity&gt;
          &lt;severity&gt;critical&lt;/severity&gt;
       &lt;/event&gt;
   &lt;/notification&gt;

   &lt;notification
     xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
      &lt;eventTime&gt;2007-07-08T00:04:00Z&lt;/eventTime&gt;
      &lt;event xmlns="http://example.com/event/1.0"&gt;
          &lt;eventClass&gt;fault&lt;/eventClass&gt;
          &lt;reportingEntity&gt;
               &lt;card&gt;ATM1&lt;/card&gt;
           &lt;/reportingEntity&gt;
           &lt;severity&gt;minor&lt;/severity&gt;
      &lt;/event&gt;
   &lt;/notification&gt;






<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 27]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-28"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   &lt;notification
     xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
     &lt;eventTime&gt;2007-07-08T00:10:00Z&lt;/eventTime&gt;
     &lt;event xmlns="http://example.com/event/1.0"&gt;
         &lt;eventClass&gt;state&lt;/eventClass&gt;
         &lt;reportingEntity&gt;
             &lt;card&gt;Ethernet0&lt;/card&gt;
         &lt;/reportingEntity&gt;
         &lt;operState&gt;enabled&lt;/operState&gt;
      &lt;/event&gt;
   &lt;/notification&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20Subtree%20Filtering"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  Subtree Filtering</span>

   XML subtree filtering is not well-suited for creating elaborate
   filter definitions given that it only supports equality comparisons
   and application of the logical OR operators (e.g., in an event
   subtree, give me all event notifications that have severity=critical,
   severity=major, or severity=minor).  Nevertheless, it may be used for
   defining simple event notification forwarding filters as shown below.

   The following example illustrates how to select fault events which
   have severities of critical, major, or minor.  The filtering criteria
   evaluation is as follows:

   ((fault &amp; severity=critical) | (fault &amp; severity=major) | (fault &amp;
   severity=minor))

        &lt;netconf:rpc netconf:message-id="101"
                xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
          &lt;create-subscription
              xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
            &lt;filter netconf:type="subtree"&gt;
              &lt;event xmlns="http://example.com/event/1.0"&gt;
                &lt;eventClass&gt;fault&lt;/eventClass&gt;
                &lt;severity&gt;critical&lt;/severity&gt;
              &lt;/event&gt;
              &lt;event xmlns="http://example.com/event/1.0"&gt;
                &lt;eventClass&gt;fault&lt;/eventClass&gt;
                &lt;severity&gt;major&lt;/severity&gt;
              &lt;/event&gt;
              &lt;event xmlns="http://example.com/event/1.0"&gt;
                &lt;eventClass&gt;fault&lt;/eventClass&gt;
                &lt;severity&gt;minor&lt;/severity&gt;
              &lt;/event&gt;
            &lt;/filter&gt;
          &lt;/create-subscription&gt;
        &lt;/netconf:rpc&gt;



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 28]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-29"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   The following example illustrates how to select state or config
   EventClasses or fault events that are related to card Ethernet0.  The
   filtering criteria evaluation is as follows:

   ( state | config | ( fault &amp; ( card=Ethernet0)))

&lt;netconf:rpc netconf:message-id="101"
                xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
      &lt;create-subscription
          xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
        &lt;filter netconf:type="subtree"&gt;
          &lt;event xmlns="http://example.com/event/1.0"&gt;
            &lt;eventClass&gt;state&lt;/eventClass&gt;
          &lt;/event&gt;
          &lt;event xmlns="http://example.com/event/1.0"&gt;
            &lt;eventClass&gt;config&lt;/eventClass&gt;
          &lt;/event&gt;
          &lt;event xmlns="http://example.com/event/1.0"&gt;
            &lt;eventClass&gt;fault&lt;/eventClass&gt;
            &lt;reportingEntity&gt;
              &lt;card&gt;Ethernet0&lt;/card&gt;
            &lt;/reportingEntity&gt;
          &lt;/event&gt;
        &lt;/filter&gt;
      &lt;/create-subscription&gt;
&lt;/netconf:rpc&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20XPATH%20Filters"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  XPATH Filters</span>

   The following [<a href="#ref-XPATH" title='"XML Path Language (XPath) Version 1.0"'>XPATH</a>] example illustrates how to select fault
   EventClass notifications that have severities of critical, major, or
   minor.  The filtering criteria evaluation is as follows:

   ((fault) &amp; ((severity=critical) | (severity=major) | (severity =
   minor)))

      &lt;netconf:rpc netconf:message-id="101"
                xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
        &lt;create-subscription
              xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
          &lt;filter netconf:type="xpath"
                  xmlns:ex="http://example.com/event/1.0"
             select="/ex:event[ex:eventClass='fault' and
                  (ex:severity='minor' or ex:severity='major'
                       or ex:severity='critical')]"/&gt;
        &lt;/create-subscription&gt;
      &lt;/netconf:rpc&gt;




<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 29]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-30"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   The following example illustrates how to select state and config
   EventClasses or fault events of any severity that come from card
   Ethernet0.  The filtering criteria evaluation is as follows:

   ( state | config | (fault &amp; card=Ethernet0))

     &lt;netconf:rpc message-id="101"
              xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
        &lt;create-subscription
           xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
             &lt;filter netconf:type="xpath"
                     xmlns:ex="http://example.com/event/1.0"
                select="/ex:event[
                   (ex:eventClass='state' or ex:eventClass='config') or
                   ((ex:eventClass='fault' and ex:card='Ethernet0'))]"/&gt;
       &lt;/create-subscription&gt;
     &lt;/netconf:rpc&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Interleave%20Capability"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Interleave Capability</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.1.%20%20Description"></a><a class="selflink" href="#section-6.1" id="section-6.1">6.1</a>.  Description</span>

   The :interleave capability indicates that the NETCONF peer supports
   the ability to interleave other NETCONF operations within a
   notification subscription.  This means the NETCONF server MUST
   receive, process, and respond to NETCONF requests on a session with
   an active notification subscription.  This capability helps
   scalability by reducing the total number of NETCONF sessions required
   by a given operator or management application.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.%20%20Dependencies"></a><a class="selflink" href="#section-6.2" id="section-6.2">6.2</a>.  Dependencies</span>

   This capability is dependent on the notification capability being
   supported.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.3.%20%20Capability%20Identifier"></a><a class="selflink" href="#section-6.3" id="section-6.3">6.3</a>.  Capability Identifier</span>

   The :interleave capability is identified by the following capability
   string:

   urn:ietf:params:netconf:capability:interleave:1.0










<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 30]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-31"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.4.%20%20New%20Operations"></a><a class="selflink" href="#section-6.4" id="section-6.4">6.4</a>.  New Operations</span>

   None.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.5.%20%20Modifications%20to%20Existing%20Operations"></a><a class="selflink" href="#section-6.5" id="section-6.5">6.5</a>.  Modifications to Existing Operations</span>

   When a &lt;create-subscription&gt; is sent while another subscription is
   active on that session, the following error will be returned:

      Tag: operation-failed

      Error-type: protocol

      Severity: error

      Error-info: none

      Description: Request could not be completed because the requested
      operation failed for some reason not covered by any other error
      condition.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20Security%20Considerations"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  Security Considerations</span>

   The security considerations from the base [<a href="#ref-NETCONF" title='"NETCONF Configuration Protocol"'>NETCONF</a>] document also
   apply to the Notification capability.

   The access control framework and the choice of transport will have a
   major impact on the security of the solution.

   The &lt;notification&gt; elements are never sent before the transport layer
   and the NETCONF layer, including capabilities exchange, have been
   established and the manager has been identified and authenticated.

   It is recommended that care be taken to secure execution:

   o  &lt;create-subscription&gt; invocation

   o  &lt;get&gt; on read-only data models

   o  &lt;notification&gt; content

   Secure execution means ensuring that a secure transport is used as
   well as ensuring that the user has sufficient authorization to
   perform the function they are requesting against the specific subset
   of NETCONF content involved.  When a &lt;get&gt; is received that refers to
   the content defined in this memo, clients should only be able to view
   the content for which they have sufficient privileges.  A create
   &lt;create-subscription&gt; operation can be considered like a deferred



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 31]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-32"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   &lt;get&gt;, and the content that different users can access may vary.
   This different access is reflected in the &lt;notification&gt; that
   different users are able to subscribe to.

   One potential security issue is the transport of data from non-
   NETCONF streams, such as syslog and SNMP.  This data may be more
   vulnerable (or less vulnerable) when being transported over NETCONF
   than when being transported using the protocol normally used for
   transporting it, depending on the security credentials of the two
   subsystems.  The NETCONF server is responsible for applying access
   control to stream content.

   The contents of notifications, as well as the names of event streams,
   may contain sensitive information and care should be taken to ensure
   that they are viewed only by authorized users.  The NETCONF server
   MUST NOT include any content in a notification that the user is not
   authorized to view.

   If a subscription is created with a &lt;stopTime&gt;, the NETCONF session
   will return to being a normal command-response NETCONF session when
   the replay is completed.  It is the responsibility of the NETCONF
   client to close this session when it is no longer of use.

   If a malicious or buggy NETCONF client sends a number of &lt;create-
   subscription&gt; requests, then these subscriptions accumulate and may
   use up system resources.  In such a situation, subscriptions can be
   terminated by terminating the suspect underlying NETCONF sessions
   using the &lt;kill-session&gt; operation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  IANA Considerations</span>

   This document registers three URIs for the NETCONF XML namespace in
   the IETF XML registry [<a href="./rfc3688" title='"The IETF XML Registry"'>RFC3688</a>].

   Following the format in <a href="./rfc3688">RFC 3688</a>, IANA has made the following
   registration.  Note that the capability URNs are also compliant to
   section 10.3 of [<a href="#ref-NETCONF" title='"NETCONF Configuration Protocol"'>NETCONF</a>].

   +--------------------+----------------------------------------------+
   | Index              | Capability Identifier                        |
   +--------------------+----------------------------------------------+
   | :notification      | urn:ietf:params:netconf:capability:          |
   |                    | notification:1.0                             |
   |                    |                                              |
   | :interleave        | urn:ietf:params:netconf:capability:          |
   |                    | interleave:1.0                               |
   +--------------------+----------------------------------------------+




<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 32]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-33"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   URI: urn:ietf:params:xml:ns:netmod:notification

   URI: urn:ietf:params:xml:ns:netconf:notification:1.0

   Registrant Contact: The IESG.

   XML: N/A, the requested URI is an XML namespace.

   In addition, IANA registered the XML Schema defined in <a href="#section-4">Section 4</a>.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.%20%20Acknowledgements"></a><a class="selflink" href="#section-9" id="section-9">9</a>.  Acknowledgements</span>

   Thanks to Gilbert Gagnon, Greg Wilbur, and Kim Curran for providing
   their input into the early work on this document.  In addition, the
   editors would like to acknowledge input at the Vancouver editing
   session from the following people: Orly Nicklass, James Balestriere,
   Yoshifumi Atarashi, Glenn Waters, Alexander Clemm, Dave Harrington,
   Dave Partain, Ray Atarashi, David Perkins, and the following
   additional people from the Montreal editing session: Balazs Lengyel,
   Phil Shafer, Rob Enns, Andy Bierman, Dan Romascanu, Bert Wijnen,
   Simon Leinen, Juergen Schoenwaelder, Hideki Okita, Vincent Cridlig,
   Martin Bjorklund, Olivier Festor, Radu State, Brian Trammell, and
   William Chow.  We would also like to thank Li Yan for his numerous
   reviews, as well as Suresh Krishnan for his gen-art review of the
   document.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.%20%20Normative%20References"></a><a class="selflink" href="#section-10" id="section-10">10</a>.  Normative References</span>

   [<a id="ref-NETCONF">NETCONF</a>]    Enns, R., Ed., "NETCONF Configuration Protocol",
                <a href="./rfc4741">RFC 4741</a>, December 2006.

   [<a id="ref-RFC2119">RFC2119</a>]    Bradner, S., "Key words for use in RFCs to Indicate
                Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC3339">RFC3339</a>]    Klyne, G., Ed. and C. Newman, "Date and Time on the
                Internet: Timestamps", <a href="./rfc3339">RFC 3339</a>, July 2002.

   [<a id="ref-RFC3688">RFC3688</a>]    Mealling, M., "The IETF XML Registry", <a href="https://www.rfc-editor.org/bcp/bcp81">BCP 81</a>, <a href="./rfc3688">RFC 3688</a>,
                January  2004.

   [<a id="ref-XML">XML</a>]        World Wide Web Consortium, "Extensible Markup Language
                (XML) 1.0", W3C XML, February 1998,
                &lt;<a href="http://www.w3.org/TR/1998/REC-xml-19980210">http://www.w3.org/TR/1998/REC-xml-19980210</a>&gt;.

   [<a id="ref-XMLSchema">XMLSchema</a>]  Thompson, H., Beech, D., Maloney, M., and N. Mendelsohn,
                "XML Schema Part 1: Structures Second Edition", W3C http
                ://www.w3.org/TR/2004/REC-xmlschema-1-20041028/
                structures.html, October 2004.



<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 33]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-34"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


   [<a id="ref-XPATH">XPATH</a>]      Clark, J. and S. DeRose, "XML Path Language (XPath)
                Version 1.0",
                W3C <a href="http://www.w3.org/TR/1999/REC-xpath-19991116">http://www.w3.org/TR/1999/REC-xpath-19991116</a>,
                November 1999.

Authors' Addresses

   Sharon Chisholm
   Nortel
   3500 Carling Ave
   Nepean, Ontario  K2H 8E9
   Canada

   EMail: schishol@nortel.com


   Hector Trevino
   Cisco
   Suite 400
   9155 E. Nichols Ave
   Englewood, CO  80112
   USA

   EMail: htrevino@cisco.com



























<span class="grey">Chisholm &amp; Trevino          Standards Track                    [Page 34]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-35"></span>
<span class="grey"><a href="./rfc5277">RFC 5277</a>              NETCONF Event Notifications              July 2008</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and <a href="https://www.rfc-editor.org/bcp/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.












Chisholm &amp; Trevino          Standards Track                    [Page 35]
</pre>
</body></html>