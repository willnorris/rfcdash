<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 8839: Session Description Protocol (SDP) Offer/Answer Procedures for Interactive Connectivity Establishment (ICE)</title>
<meta content="Marc Petit-Huguenin" name="author"/>
<meta content="Suhas Nandakumar" name="author"/>
<meta content="Christer Holmberg" name="author"/>
<meta content="Ari KerÃ¤nen" name="author"/>
<meta content="Roman Shpount" name="author"/>
<meta content="
       
This document describes Session Description Protocol (SDP) Offer/Answer
procedures for carrying out Interactive Connectivity Establishment (ICE)
between the agents.
 
       
This document obsoletes RFCs 5245 and 6336.
 
    " name="description"/>
<meta content="xml2rfc 3.5.0" name="generator"/>
<meta content="SIP" name="keyword"/>
<meta content="Session Initial Protocol" name="keyword"/>
<meta content="8839" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.5.0
    Python 3.6.10
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.3.5
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.19.0
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.3.1
    requests 2.22.0
    setuptools 40.6.2
    six 1.14.0
    WeasyPrint 51
-->
<link href="rfc8839.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc8839" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-mmusic-ice-sip-sdp-39" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 8839</td>
<td class="center">ICE SDP Usage</td>
<td class="right">January 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Petit-Huguenin, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc8839">8839</a></dd>
<dt class="label-obsoletes">Obsoletes:</dt>
<dd class="obsoletes">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc5245">5245</a>, <a class="eref" href="https://www.rfc-editor.org/rfc/rfc6336">6336</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2021-01">January 2021</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Petit-Huguenin</div>
<div class="org">Impedance Mismatch</div>
</div>
<div class="author">
      <div class="author-name">S. Nandakumar</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">C. Holmberg</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">A. KerÃ¤nen</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">R. Shpount</div>
<div class="org">TurboBridge</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 8839</h1>
<h1 id="title">Session Description Protocol (SDP) Offer/Answer Procedures for Interactive Connectivity Establishment (ICE)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
This document describes Session Description Protocol (SDP) Offer/Answer
procedures for carrying out Interactive Connectivity Establishment (ICE)
between the agents.<a class="pilcrow" href="#section-abstract-1">Â¶</a></p>
<p id="section-abstract-2">
This document obsoletes RFCs 5245 and 6336.<a class="pilcrow" href="#section-abstract-2">Â¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">Â¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">Â¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc8839">https://www.rfc-editor.org/info/rfc8839</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">Â¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">Â¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">Â¶</a></p>
<p id="section-boilerplate.2-3">
            This document may contain material from IETF Documents or IETF
            Contributions published or made publicly available before November
            10, 2008. The person(s) controlling the copyright in some of this
            material may not have granted the IETF Trust the right to allow
            modifications of such material outside the IETF Standards Process.
            Without obtaining an adequate license from the person(s)
            controlling the copyright in such materials, this document may not
            be modified outside the IETF Standards Process, and derivative
            works of it may not be created outside the IETF Standards Process,
            except to format it for publication as an RFC or to translate it
            into languages other than English.<a class="pilcrow" href="#section-boilerplate.2-3">Â¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">â²</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.Â Â <a class="xref" href="#name-introduction">Introduction</a><a class="pilcrow" href="#section-toc.1-1.1.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.Â Â <a class="xref" href="#name-conventions">Conventions</a><a class="pilcrow" href="#section-toc.1-1.2.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.3">
            <p class="keepWithNext" id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.Â Â <a class="xref" href="#name-terminology">Terminology</a><a class="pilcrow" href="#section-toc.1-1.3.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.Â Â <a class="xref" href="#name-sdp-offer-answer-procedures">SDP Offer/Answer Procedures</a><a class="pilcrow" href="#section-toc.1-1.4.1">Â¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.Â Â <a class="xref" href="#name-introduction-2">Introduction</a><a class="pilcrow" href="#section-toc.1-1.4.2.1.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="xref" href="#section-4.2">4.2</a>.Â Â <a class="xref" href="#name-generic-procedures">Generic Procedures</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.1">Â¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a class="xref" href="#section-4.2.1">4.2.1</a>.Â Â <a class="xref" href="#name-encoding">Encoding</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.1.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a class="xref" href="#section-4.2.2">4.2.2</a>.Â Â <a class="xref" href="#name-rtp-rtcp-considerations">RTP/RTCP Considerations</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.2.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a class="xref" href="#section-4.2.3">4.2.3</a>.Â Â <a class="xref" href="#name-determining-role">Determining Role</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.3.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2.2.4">
                    <p id="section-toc.1-1.4.2.2.2.4.1"><a class="xref" href="#section-4.2.4">4.2.4</a>.Â Â <a class="xref" href="#name-stun-considerations">STUN Considerations</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.4.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2.2.5">
                    <p id="section-toc.1-1.4.2.2.2.5.1"><a class="xref" href="#section-4.2.5">4.2.5</a>.Â Â <a class="xref" href="#name-verifying-ice-support-proce">Verifying ICE Support Procedures</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.5.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2.2.6">
                    <p id="section-toc.1-1.4.2.2.2.6.1"><a class="xref" href="#section-4.2.6">4.2.6</a>.Â Â <a class="xref" href="#name-sdp-example">SDP Example</a><a class="pilcrow" href="#section-toc.1-1.4.2.2.2.6.1">Â¶</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="xref" href="#section-4.3">4.3</a>.Â Â <a class="xref" href="#name-initial-offer-answer-exchan">Initial Offer/Answer Exchange</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.1">Â¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a class="xref" href="#section-4.3.1">4.3.1</a>.Â Â <a class="xref" href="#name-sending-the-initial-offer">Sending the Initial Offer</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.2.1.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a class="xref" href="#section-4.3.2">4.3.2</a>.Â Â <a class="xref" href="#name-sending-the-initial-answer">Sending the Initial Answer</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.2.2.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.3.2.3">
                    <p id="section-toc.1-1.4.2.3.2.3.1"><a class="xref" href="#section-4.3.3">4.3.3</a>.Â Â <a class="xref" href="#name-receiving-the-initial-answe">Receiving the Initial Answer</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.2.3.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.3.2.4">
                    <p id="section-toc.1-1.4.2.3.2.4.1"><a class="xref" href="#section-4.3.4">4.3.4</a>.Â Â <a class="xref" href="#name-concluding-ice">Concluding ICE</a><a class="pilcrow" href="#section-toc.1-1.4.2.3.2.4.1">Â¶</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a class="xref" href="#section-4.4">4.4</a>.Â Â <a class="xref" href="#name-subsequent-offer-answer-exc">Subsequent Offer/Answer Exchanges</a><a class="pilcrow" href="#section-toc.1-1.4.2.4.1">Â¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.4.2.4.2.1">
                    <p id="section-toc.1-1.4.2.4.2.1.1"><a class="xref" href="#section-4.4.1">4.4.1</a>.Â Â <a class="xref" href="#name-sending-subsequent-offer">Sending Subsequent Offer</a><a class="pilcrow" href="#section-toc.1-1.4.2.4.2.1.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.4.2.2">
                    <p id="section-toc.1-1.4.2.4.2.2.1"><a class="xref" href="#section-4.4.2">4.4.2</a>.Â Â <a class="xref" href="#name-sending-subsequent-answer">Sending Subsequent Answer</a><a class="pilcrow" href="#section-toc.1-1.4.2.4.2.2.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.4.2.3">
                    <p id="section-toc.1-1.4.2.4.2.3.1"><a class="xref" href="#section-4.4.3">4.4.3</a>.Â Â <a class="xref" href="#name-receiving-answer-for-a-subs">Receiving Answer for a Subsequent Offer</a><a class="pilcrow" href="#section-toc.1-1.4.2.4.2.3.1">Â¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.Â Â <a class="xref" href="#name-grammar">Grammar</a><a class="pilcrow" href="#section-toc.1-1.5.1">Â¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.Â Â <a class="xref" href="#name-candidate-attribute">"candidate" Attribute</a><a class="pilcrow" href="#section-toc.1-1.5.2.1.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="xref" href="#section-5.2">5.2</a>.Â Â <a class="xref" href="#name-remote-candidates-attribute">"remote-candidates" Attribute</a><a class="pilcrow" href="#section-toc.1-1.5.2.2.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="xref" href="#section-5.3">5.3</a>.Â Â <a class="xref" href="#name-ice-lite-and-ice-mismatch-a">"ice-lite" and "ice-mismatch" Attributes</a><a class="pilcrow" href="#section-toc.1-1.5.2.3.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a class="xref" href="#section-5.4">5.4</a>.Â Â <a class="xref" href="#name-ice-ufrag-and-ice-pwd-attri">"ice-ufrag" and "ice-pwd" Attributes</a><a class="pilcrow" href="#section-toc.1-1.5.2.4.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a class="xref" href="#section-5.5">5.5</a>.Â Â <a class="xref" href="#name-ice-pacing-attribute">"ice-pacing" Attribute</a><a class="pilcrow" href="#section-toc.1-1.5.2.5.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.5.2.6">
                <p id="section-toc.1-1.5.2.6.1"><a class="xref" href="#section-5.6">5.6</a>.Â Â <a class="xref" href="#name-ice-options-attribute">"ice-options" Attribute</a><a class="pilcrow" href="#section-toc.1-1.5.2.6.1">Â¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.Â Â <a class="xref" href="#name-keepalives">Keepalives</a><a class="pilcrow" href="#section-toc.1-1.6.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.Â Â <a class="xref" href="#name-sip-considerations">SIP Considerations</a><a class="pilcrow" href="#section-toc.1-1.7.1">Â¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="xref" href="#section-7.1">7.1</a>.Â Â <a class="xref" href="#name-latency-guidelines">Latency Guidelines</a><a class="pilcrow" href="#section-toc.1-1.7.2.1.1">Â¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.7.2.1.2.1">
                    <p id="section-toc.1-1.7.2.1.2.1.1"><a class="xref" href="#section-7.1.1">7.1.1</a>.Â Â <a class="xref" href="#name-offer-in-invite">Offer in INVITE</a><a class="pilcrow" href="#section-toc.1-1.7.2.1.2.1.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.7.2.1.2.2">
                    <p id="section-toc.1-1.7.2.1.2.2.1"><a class="xref" href="#section-7.1.2">7.1.2</a>.Â Â <a class="xref" href="#name-offer-in-response">Offer in Response</a><a class="pilcrow" href="#section-toc.1-1.7.2.1.2.2.1">Â¶</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="xref" href="#section-7.2">7.2</a>.Â Â <a class="xref" href="#name-sip-option-tags-and-media-f">SIP Option Tags and Media Feature Tags</a><a class="pilcrow" href="#section-toc.1-1.7.2.2.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a class="xref" href="#section-7.3">7.3</a>.Â Â <a class="xref" href="#name-interactions-with-forking">Interactions with Forking</a><a class="pilcrow" href="#section-toc.1-1.7.2.3.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a class="xref" href="#section-7.4">7.4</a>.Â Â <a class="xref" href="#name-interactions-with-precondit">Interactions with Preconditions</a><a class="pilcrow" href="#section-toc.1-1.7.2.4.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a class="xref" href="#section-7.5">7.5</a>.Â Â <a class="xref" href="#name-interactions-with-third-par">Interactions with Third Party Call Control</a><a class="pilcrow" href="#section-toc.1-1.7.2.5.1">Â¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.Â Â <a class="xref" href="#name-interactions-with-applicati">Interactions with Application Layer Gateways and SIP</a><a class="pilcrow" href="#section-toc.1-1.8.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.Â Â <a class="xref" href="#name-security-considerations">Security Considerations</a><a class="pilcrow" href="#section-toc.1-1.9.1">Â¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="xref" href="#section-9.1">9.1</a>.Â Â <a class="xref" href="#name-ip-address-privacy">IP Address Privacy</a><a class="pilcrow" href="#section-toc.1-1.9.2.1.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="xref" href="#section-9.2">9.2</a>.Â Â <a class="xref" href="#name-attacks-on-the-offer-answer">Attacks on the Offer/Answer Exchanges</a><a class="pilcrow" href="#section-toc.1-1.9.2.2.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a class="xref" href="#section-9.3">9.3</a>.Â Â <a class="xref" href="#name-the-voice-hammer-attack">The Voice Hammer Attack</a><a class="pilcrow" href="#section-toc.1-1.9.2.3.1">Â¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-10">10</a>.Â <a class="xref" href="#name-iana-considerations">IANA Considerations</a><a class="pilcrow" href="#section-toc.1-1.10.1">Â¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="xref" href="#section-10.1">10.1</a>.Â Â <a class="xref" href="#name-sdp-attributes">SDP Attributes</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.1">Â¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1.2.1">
                    <p id="section-toc.1-1.10.2.1.2.1.1"><a class="xref" href="#section-10.1.1">10.1.1</a>.Â Â <a class="xref" href="#name-candidate-attribute-2">"candidate" Attribute</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.2.1.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1.2.2">
                    <p id="section-toc.1-1.10.2.1.2.2.1"><a class="xref" href="#section-10.1.2">10.1.2</a>.Â Â <a class="xref" href="#name-remote-candidates-attribute-2">"remote-candidates" Attribute</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.2.2.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1.2.3">
                    <p id="section-toc.1-1.10.2.1.2.3.1"><a class="xref" href="#section-10.1.3">10.1.3</a>.Â Â <a class="xref" href="#name-ice-lite-attribute">"ice-lite" Attribute</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.2.3.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1.2.4">
                    <p id="section-toc.1-1.10.2.1.2.4.1"><a class="xref" href="#section-10.1.4">10.1.4</a>.Â Â <a class="xref" href="#name-ice-mismatch-attribute">"ice-mismatch" Attribute</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.2.4.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1.2.5">
                    <p id="section-toc.1-1.10.2.1.2.5.1"><a class="xref" href="#section-10.1.5">10.1.5</a>.Â Â <a class="xref" href="#name-ice-pwd-attribute">"ice-pwd" Attribute</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.2.5.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1.2.6">
                    <p id="section-toc.1-1.10.2.1.2.6.1"><a class="xref" href="#section-10.1.6">10.1.6</a>.Â Â <a class="xref" href="#name-ice-ufrag-attribute">"ice-ufrag" Attribute</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.2.6.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1.2.7">
                    <p id="section-toc.1-1.10.2.1.2.7.1"><a class="xref" href="#section-10.1.7">10.1.7</a>.Â Â <a class="xref" href="#name-ice-options-attribute-2">"ice-options" Attribute</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.2.7.1">Â¶</a></p>
</li>
                  <li class="compact ulEmpty toc" id="section-toc.1-1.10.2.1.2.8">
                    <p id="section-toc.1-1.10.2.1.2.8.1"><a class="xref" href="#section-10.1.8">10.1.8</a>.Â Â <a class="xref" href="#name-ice-pacing-attribute-2">"ice-pacing" Attribute</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.2.8.1">Â¶</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a class="xref" href="#section-10.2">10.2</a>.Â Â <a class="xref" href="#name-interactive-connectivity-es">Interactive Connectivity Establishment (ICE) Options Registry</a><a class="pilcrow" href="#section-toc.1-1.10.2.2.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a class="xref" href="#section-10.3">10.3</a>.Â Â <a class="xref" href="#name-candidate-attribute-extensi">Candidate Attribute Extension Subregistry Establishment</a><a class="pilcrow" href="#section-toc.1-1.10.2.3.1">Â¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-11">11</a>.Â <a class="xref" href="#name-changes-from-rfc-5245">Changes from RFC 5245</a><a class="pilcrow" href="#section-toc.1-1.11.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="xref" href="#section-12">12</a>.Â <a class="xref" href="#name-references">References</a><a class="pilcrow" href="#section-toc.1-1.12.1">Â¶</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a class="xref" href="#section-12.1">12.1</a>.Â Â <a class="xref" href="#name-normative-references">Normative References</a><a class="pilcrow" href="#section-toc.1-1.12.2.1.1">Â¶</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a class="xref" href="#section-12.2">12.2</a>.Â Â <a class="xref" href="#name-informative-references">Informative References</a><a class="pilcrow" href="#section-toc.1-1.12.2.2.1">Â¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="xref" href="#section-appendix.a">Appendix A</a>.Â Â <a class="xref" href="#name-examples">Examples</a><a class="pilcrow" href="#section-toc.1-1.13.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a class="xref" href="#section-appendix.b">Appendix B</a>.Â Â <a class="xref" href="#name-the-remote-candidates-attri">The "remote-candidates" Attribute</a><a class="pilcrow" href="#section-toc.1-1.14.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a class="xref" href="#section-appendix.c">Appendix C</a>.Â Â <a class="xref" href="#name-why-is-the-conflict-resolut">Why Is the Conflict Resolution Mechanism Needed?</a><a class="pilcrow" href="#section-toc.1-1.15.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a class="xref" href="#section-appendix.d">Appendix D</a>.Â Â <a class="xref" href="#name-why-send-an-updated-offer">Why Send an Updated Offer?</a><a class="pilcrow" href="#section-toc.1-1.16.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a class="xref" href="#section-appendix.e"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a><a class="pilcrow" href="#section-toc.1-1.17.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a class="xref" href="#section-appendix.f"></a><a class="xref" href="#name-contributors">Contributors</a><a class="pilcrow" href="#section-toc.1-1.18.1">Â¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a class="xref" href="#section-appendix.g"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a><a class="pilcrow" href="#section-toc.1-1.19.1">Â¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
This document describes how Interactive Connectivity Establishment (ICE) is
used with Session Description Protocol (SDP) offer/answer <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span>. The ICE specification <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> describes procedures that are common to
all usages of ICE, and this document gives the additional details needed to
use ICE with SDP offer/answer.<a class="pilcrow" href="#section-1-1">Â¶</a></p>
<p id="section-1-2">This document obsoletes RFCs 5245 and 6336.<a class="pilcrow" href="#section-1-2">Â¶</a></p>
<p id="section-1-3">
NOTE: Previously both the common ICE procedures, and the SDP offer/answer
specific details, were described in <span>[<a class="xref" href="#RFC5245">RFC5245</a>]</span>. <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> obsoleted <span>[<a class="xref" href="#RFC5245">RFC5245</a>]</span>, and the SDP offer/answer-specific details
were removed from the document. <a class="xref" href="#sec.5245">Section 11</a>
describes the changes to the SDP offer/answer-specific details specified in
this document.<a class="pilcrow" href="#section-1-3">Â¶</a></p>
</section>
</div>
<section id="section-2">
      <h2 id="name-conventions">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-conventions">Conventions</a>
      </h2>
<p id="section-2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
    "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>",
    "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are
    to be interpreted as described in BCPÂ 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span>
        <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> when, and only when, they appear in all capitals,
    as shown here.<a class="pilcrow" href="#section-2-1">Â¶</a></p>
</section>
<section id="section-3">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<p id="section-3-1">
Readers should be familiar with the terminology defined in <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span>, in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>, and the following:<a class="pilcrow" href="#section-3-1">Â¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3-2">
        <dt id="section-3-2.1">Default Destination/Candidate:</dt>
        <dd id="section-3-2.2" style="margin-left: 1.5em">
The default destination for a component of a data stream is the transport
address that would be used by an agent that is not ICE aware. A default
candidate for a component is one whose transport address matches the default
destination for that component. For the RTP component, the default connection
address is in the "c=" line of the SDP, and the port and transport protocol
are in the "m=" line. For the RTP Control Protocol (RTCP) component, the
address and port are indicated using the "rtcp" attribute defined in <span>[<a class="xref" href="#RFC3605">RFC3605</a>]</span>, if present; otherwise, the RTCP component
address is the same as the address of the RTP component, and its port is one
greater than the port of the RTP component.<a class="pilcrow" href="#section-3-2.2">Â¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
<section id="section-4">
      <h2 id="name-sdp-offer-answer-procedures">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-sdp-offer-answer-procedures">SDP Offer/Answer Procedures</a>
      </h2>
<section id="section-4.1">
        <h3 id="name-introduction-2">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-introduction-2">Introduction</a>
        </h3>
<p id="section-4.1-1"><span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> defines ICE candidate
        exchange as the process for ICE agents (initiator and responder) to
        exchange their candidate information required for ICE processing at
        the agents. For the purposes of this specification, the candidate
        exchange process corresponds to the Offer/Answer protocol <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span>, and the terms "offerer" and
        "answerer" correspond to the initiator and responder roles from <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> respectively.<a class="pilcrow" href="#section-4.1-1">Â¶</a></p>
<p id="section-4.1-2">
Once the initiating agent has gathered, pruned, and prioritized its set of
candidates <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>, the candidate exchange
with the peer agent begins.<a class="pilcrow" href="#section-4.1-2">Â¶</a></p>
</section>
<section id="section-4.2">
        <h3 id="name-generic-procedures">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-generic-procedures">Generic Procedures</a>
        </h3>
<div id="sec-encoding">
<section id="section-4.2.1">
          <h4 id="name-encoding">
<a class="section-number selfRef" href="#section-4.2.1">4.2.1. </a><a class="section-name selfRef" href="#name-encoding">Encoding</a>
          </h4>
<p id="section-4.2.1-1"><a class="xref" href="#sec-grammar">Section 5</a> provides detailed
          rules for constructing various SDP attributes defined in this
          specification.<a class="pilcrow" href="#section-4.2.1-1">Â¶</a></p>
<section id="section-4.2.1.1">
            <h5 id="name-data-streams">
<a class="section-number selfRef" href="#section-4.2.1.1">4.2.1.1. </a><a class="section-name selfRef" href="#name-data-streams">Data Streams</a>
            </h5>
<p id="section-4.2.1.1-1">
Each data stream <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> is represented by
an SDP media description ("m=" section).<a class="pilcrow" href="#section-4.2.1.1-1">Â¶</a></p>
</section>
<section id="section-4.2.1.2">
            <h5 id="name-candidates">
<a class="section-number selfRef" href="#section-4.2.1.2">4.2.1.2. </a><a class="section-name selfRef" href="#name-candidates">Candidates</a>
            </h5>
<p id="section-4.2.1.2-1">
Within an "m=" section, each candidate (including the default candidate) associated
with the data stream is represented by an SDP "candidate" attribute.<a class="pilcrow" href="#section-4.2.1.2-1">Â¶</a></p>
<p id="section-4.2.1.2-2">
Prior to nomination, the "c=" line associated with an "m=" section contains
the connection address of the default candidate, while the "m=" line contains the port
and transport protocol of the default candidate for that "m=" section.<a class="pilcrow" href="#section-4.2.1.2-2">Â¶</a></p>
<p id="section-4.2.1.2-3">
After nomination, the "c=" line for a given "m=" section contains the
connection address of the nominated candidate (the local candidate of the
nominated candidate pair), and the "m=" line contains the port and
transport protocol corresponding to the nominated candidate for that
"m=" section.<a class="pilcrow" href="#section-4.2.1.2-3">Â¶</a></p>
</section>
<section id="section-4.2.1.3">
            <h5 id="name-username-and-password">
<a class="section-number selfRef" href="#section-4.2.1.3">4.2.1.3. </a><a class="section-name selfRef" href="#name-username-and-password">Username and Password</a>
            </h5>
<p id="section-4.2.1.3-1">
The ICE username is represented by an SDP "ice-ufrag" attribute, and the ICE
password is represented by an SDP "ice-pwd" attribute.<a class="pilcrow" href="#section-4.2.1.3-1">Â¶</a></p>
</section>
<section id="section-4.2.1.4">
            <h5 id="name-lite-implementations">
<a class="section-number selfRef" href="#section-4.2.1.4">4.2.1.4. </a><a class="section-name selfRef" href="#name-lite-implementations">Lite Implementations</a>
            </h5>
<p id="section-4.2.1.4-1">
An ICE-lite implementation <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> <span class="bcp14">MUST</span> include an SDP "ice-lite" attribute.
A full implementation <span class="bcp14">MUST NOT</span> include that attribute.<a class="pilcrow" href="#section-4.2.1.4-1">Â¶</a></p>
</section>
<section id="section-4.2.1.5">
            <h5 id="name-ice-extensions">
<a class="section-number selfRef" href="#section-4.2.1.5">4.2.1.5. </a><a class="section-name selfRef" href="#name-ice-extensions">ICE Extensions</a>
            </h5>
<p id="section-4.2.1.5-1">
An agent uses the SDP "ice-options" attribute to indicate support of ICE
extensions.<a class="pilcrow" href="#section-4.2.1.5-1">Â¶</a></p>
<p id="section-4.2.1.5-2">
An agent compliant with this specification <span class="bcp14">MUST</span> include an SDP "ice-options"
attribute with an "ice2" attribute value <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>. If an agent receives an SDP offer
or answer that indicates ICE support, but that does not contain an SDP "ice-options" attribute with an "ice2" attribute value,
the agent can assume that the peer is compliant to <span>[<a class="xref" href="#RFC5245">RFC5245</a>]</span>.<a class="pilcrow" href="#section-4.2.1.5-2">Â¶</a></p>
</section>
<section id="section-4.2.1.6">
            <h5 id="name-inactive-and-disabled-data-">
<a class="section-number selfRef" href="#section-4.2.1.6">4.2.1.6. </a><a class="section-name selfRef" href="#name-inactive-and-disabled-data-">Inactive and Disabled Data Streams</a>
            </h5>
<p id="section-4.2.1.6-1">
If an "m=" section is marked as inactive <span>[<a class="xref" href="#RFC4566">RFC4566</a>]</span>, or has a bandwidth
value of zero <span>[<a class="xref" href="#RFC4566">RFC4566</a>]</span>, the agent <span class="bcp14">MUST</span> still include ICE-related SDP
attributes.<a class="pilcrow" href="#section-4.2.1.6-1">Â¶</a></p>
<p id="section-4.2.1.6-2">
If the port value associated with an "m=" section is set to zero (implying a
disabled stream) as defined in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc3264#section-8.2">Section 8.2</a> of [<a class="xref" href="#RFC3264">RFC3264</a>]</span>, the agent <span class="bcp14">SHOULD NOT</span>
include ICE-related SDP "candidate" attributes in that "m=" section, unless an
SDP extension specifying otherwise is used.<a class="pilcrow" href="#section-4.2.1.6-2">Â¶</a></p>
</section>
</section>
</div>
<section id="section-4.2.2">
          <h4 id="name-rtp-rtcp-considerations">
<a class="section-number selfRef" href="#section-4.2.2">4.2.2. </a><a class="section-name selfRef" href="#name-rtp-rtcp-considerations">RTP/RTCP Considerations</a>
          </h4>
<p id="section-4.2.2-1">
If an agent utilizes both RTP and RTCP, and separate ports
are used for RTP and RTCP, the agent <span class="bcp14">MUST</span> include SDP "candidate"
attributes for both the RTP and RTCP components.<a class="pilcrow" href="#section-4.2.2-1">Â¶</a></p>
<p id="section-4.2.2-2">
The agent includes an SDP "rtcp" attribute following the procedures
in <span>[<a class="xref" href="#RFC3605">RFC3605</a>]</span>. Hence, in the cases where the RTCP
port value is one higher than the RTP port value and the RTCP component
address the same as the address of the RTP component, the SDP "rtcp" attribute
might be omitted.<a class="pilcrow" href="#section-4.2.2-2">Â¶</a></p>
<p id="section-4.2.2-3">
NOTE: <span>[<a class="xref" href="#RFC5245">RFC5245</a>]</span> required that an agent always includes the 
SDP "rtcp" attribute, even if the RTCP port value was one higher than the
RTP port value. This specification aligns the "rtcp" attribute procedures
with <span>[<a class="xref" href="#RFC3605">RFC3605</a>]</span>.<a class="pilcrow" href="#section-4.2.2-3">Â¶</a></p>
<p id="section-4.2.2-4">
If the agent does not utilize RTCP, it indicates that by including "RS:0"
and "RR:0" SDP attributes as described in <span>[<a class="xref" href="#RFC3556">RFC3556</a>]</span>.<a class="pilcrow" href="#section-4.2.2-4">Â¶</a></p>
</section>
<section id="section-4.2.3">
          <h4 id="name-determining-role">
<a class="section-number selfRef" href="#section-4.2.3">4.2.3. </a><a class="section-name selfRef" href="#name-determining-role">Determining Role</a>
          </h4>
<p id="section-4.2.3-1">
The offerer acts as the initiating agent. The answerer acts as the
responding agent. The ICE roles (controlling and controlled) are determined
using the procedures in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>.<a class="pilcrow" href="#section-4.2.3-1">Â¶</a></p>
</section>
<section id="section-4.2.4">
          <h4 id="name-stun-considerations">
<a class="section-number selfRef" href="#section-4.2.4">4.2.4. </a><a class="section-name selfRef" href="#name-stun-considerations">STUN Considerations</a>
          </h4>
<p id="section-4.2.4-1">
Once an agent has provided its local candidates to its peer in an SDP
offer or answer, the agent <span class="bcp14">MUST</span> be prepared to receive STUN
(Session Traversal Utilities for NAT, <span>[<a class="xref" href="#RFC5389">RFC5389</a>]</span>) connectivity
check Binding requests on those candidates.<a class="pilcrow" href="#section-4.2.4-1">Â¶</a></p>
</section>
<div id="sec-ice-mismatch">
<section id="section-4.2.5">
          <h4 id="name-verifying-ice-support-proce">
<a class="section-number selfRef" href="#section-4.2.5">4.2.5. </a><a class="section-name selfRef" href="#name-verifying-ice-support-proce">Verifying ICE Support Procedures</a>
          </h4>
<p id="section-4.2.5-1">
            An ICE agent indicates support of ICE by including
            at least the SDP "ice-pwd" and "ice-ufrag" attributes in an offer or answer.
            An ICE agent compliant with this specification <span class="bcp14">MUST</span> also include an 
            SDP "ice-options" attribute with an "ice2" attribute value.<a class="pilcrow" href="#section-4.2.5-1">Â¶</a></p>
<p id="section-4.2.5-2">
The agents will proceed with the ICE procedures defined in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> and
this specification if, for each data stream in the SDP it received, the
default destination for each component of that data stream appears in
a "candidate" attribute. For example, in the case of RTP, the
connection address, port, and transport protocol in the
"c=" and "m=" lines, respectively, appear in a "candidate"
attribute, and the value in the "rtcp" attribute appears in a "candidate"
attribute.<a class="pilcrow" href="#section-4.2.5-2">Â¶</a></p>
<p id="section-4.2.5-3">
This specification provides no guidance on how an agent should proceed
in the cases where the above condition is not met with the few
exceptions noted below:<a class="pilcrow" href="#section-4.2.5-3">Â¶</a></p>
<ol class="normal type-1" id="section-4.2.5-4" start="1" type="1">
            <li id="section-4.2.5-4.1">
The presence of certain Application Layer Gateways might modify
the transport address information as described in <a class="xref" href="#sec-alg-sip">Section 8</a>.
The behavior of the responding agent in such a situation is
implementation dependent. Informally, the responding agent might
consider the mismatched transport address information as a
plausible new candidate learned from the peer and continue its
ICE processing with that transport address included.
Alternatively, the responding agent <span class="bcp14">MAY</span> include an "ice-mismatch"
attribute in its answer for such data streams.  If an agent chooses to
include an "ice-mismatch" attribute in its answer for a data stream,
then it <span class="bcp14">MUST</span> also omit "candidate" attributes, <span class="bcp14">MUST</span> terminate
the usage of ICE procedures, and <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span> 
procedures <span class="bcp14">MUST</span> be used instead for this data stream.<a class="pilcrow" href="#section-4.2.5-4.1">Â¶</a>
</li>
            <li id="section-4.2.5-4.2">
The transport address from the peer for the default destination
is set to IPv4/IPv6 address values "0.0.0.0"/"::" and port value of "9".
This <span class="bcp14">MUST NOT</span> be considered as an ICE failure by the peer agent, and
the ICE processing <span class="bcp14">MUST</span> continue as usual.<a class="pilcrow" href="#section-4.2.5-4.2">Â¶</a>
</li>
            <li id="section-4.2.5-4.3">
In some cases, the controlling/initiator agent may receive an SDP answer
that may omit "candidate" attributes for the data stream, and instead
include a media-level "ice-mismatch" attribute.  This signals to the
offerer that the answerer supports ICE, but that ICE processing was not
used for this data stream. In this case, ICE processing <span class="bcp14">MUST</span> be terminated
for this data stream, and <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span> procedures <span class="bcp14">MUST</span> be followed instead.<a class="pilcrow" href="#section-4.2.5-4.3">Â¶</a>
</li>
            <li id="section-4.2.5-4.4">
The transport address from the peer for the default destination is
an FQDN. Regardless of the procedures used to resolve FQDN or the
resolution result, this <span class="bcp14">MUST NOT</span> be considered as an ICE failure by
the peer agent, and the ICE processing <span class="bcp14">MUST</span> continue as usual.<a class="pilcrow" href="#section-4.2.5-4.4">Â¶</a>
</li>
          </ol>
</section>
</div>
<section id="section-4.2.6">
          <h4 id="name-sdp-example">
<a class="section-number selfRef" href="#section-4.2.6">4.2.6. </a><a class="section-name selfRef" href="#name-sdp-example">SDP Example</a>
          </h4>
<p id="section-4.2.6-1">
The following is an example SDP message that includes ICE attributes
(lines folded for readability):<a class="pilcrow" href="#section-4.2.6-1">Â¶</a></p>
<div id="section-4.2.6-2">
<pre class="sourcecode lang-sdp">v=0
o=jdoe 2890844526 2890842807 IN IP4 203.0.113.141
s=
c=IN IP4 192.0.2.3
t=0 0
a=ice-options:ice2
a=ice-pacing:50
a=ice-pwd:asd88fgpdd777uzjYhagZg
a=ice-ufrag:8hhY
m=audio 45664 RTP/AVP 0
b=RS:0
b=RR:0
a=rtpmap:0 PCMU/8000
a=candidate:1 1 UDP 2130706431 203.0.113.141 8998 typ host
a=candidate:2 1 UDP 1694498815 192.0.2.3 45664 typ srflx raddr
 203.0.113.141 rport 8998
</pre><a class="pilcrow" href="#section-4.2.6-2">Â¶</a>
</div>
</section>
</section>
<section id="section-4.3">
        <h3 id="name-initial-offer-answer-exchan">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-initial-offer-answer-exchan">Initial Offer/Answer Exchange</a>
        </h3>
<section id="section-4.3.1">
          <h4 id="name-sending-the-initial-offer">
<a class="section-number selfRef" href="#section-4.3.1">4.3.1. </a><a class="section-name selfRef" href="#name-sending-the-initial-offer">Sending the Initial Offer</a>
          </h4>
<p id="section-4.3.1-1">
When an offerer generates the initial offer, in each "m=" section it <span class="bcp14">MUST</span>
include SDP "candidate" attributes for each available candidate associated
with the "m=" section. In addition, the offerer <span class="bcp14">MUST</span> include an SDP "ice-ufrag"
attribute, an SDP "ice-pwd" attribute, and an SDP "ice-options" attribute with
an "ice2" attribute value in the offer. If the offerer is a full ICE implementation,
it <span class="bcp14">SHOULD</span> include an "ice-pacing" attribute in the offer (if not included, the
default value will apply). A lite ICE implementation <span class="bcp14">MUST NOT</span> include the "ice-pacing"
attribute in the offer (as it will not perform connectivity checks).<a class="pilcrow" href="#section-4.3.1-1">Â¶</a></p>
<p id="section-4.3.1-2">
It is valid for an offer "m=" line to include no SDP "candidate" attributes
and have the default destination set to the IP address values
"0.0.0.0"/"::" and the port value to "9". 
This implies that the offering agent is only going to use peer-reflexive
candidates or will provide additional candidates in subsequent signaling
messages.<a class="pilcrow" href="#section-4.3.1-2">Â¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.3.1-3">
            <dt id="section-4.3.1-3.1">Note:</dt>
            <dd id="section-4.3.1-3.2" style="margin-left: 1.5em">
Within the scope of this document, "initial offer" refers to the first
SDP offer that is sent in order to negotiate usage of ICE. It might, or
might not, be the initial SDP offer of the SDP session.<a class="pilcrow" href="#section-4.3.1-3.2">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlParallel" id="section-4.3.1-4">
            <dt id="section-4.3.1-4.1">Note:</dt>
            <dd id="section-4.3.1-4.2" style="margin-left: 1.5em">
The procedures in this document only consider "m=" sections associated
with data streams where ICE is used.<a class="pilcrow" href="#section-4.3.1-4.2">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-4.3.2">
          <h4 id="name-sending-the-initial-answer">
<a class="section-number selfRef" href="#section-4.3.2">4.3.2. </a><a class="section-name selfRef" href="#name-sending-the-initial-answer">Sending the Initial Answer</a>
          </h4>
<p id="section-4.3.2-1">
When an answerer receives an initial offer indicating
that the offerer supports ICE, and if the answerer accepts
the offer and the usage of ICE, the answerer <span class="bcp14">MUST</span> include 
in each "m=" section within the answer the SDP "candidate" 
attributes for each available candidate associated with 
the "m=" section.
In addition, the answerer <span class="bcp14">MUST</span> include an SDP "ice-ufrag"
attribute, an SDP "ice-pwd" attribute, and an SDP "ice-options"
attribute with an "ice2" attribute value in the answer. If the
answerer is a full ICE implementation, it <span class="bcp14">SHOULD</span> include an
"ice-pacing" attribute in the answer (if not included, the
default value will apply). A lite ICE implementation <span class="bcp14">MUST NOT</span>
include the "ice-pacing" attribute in the answer (as it will
not perform connectivity checks).<a class="pilcrow" href="#section-4.3.2-1">Â¶</a></p>
<p id="section-4.3.2-2">
In each "m=" line, the answerer <span class="bcp14">MUST</span> use the same transport
protocol as was used in the offer "m=" line. If none of
the candidates in the "m=" line in the answer uses the same
transport protocol as indicated in the offer "m=" line,
then, in order to avoid ICE mismatch, the default destination
<span class="bcp14">MUST</span> be set to IP address values "0.0.0.0"/"::" and
port value of "9".<a class="pilcrow" href="#section-4.3.2-2">Â¶</a></p>
<p id="section-4.3.2-3">
It is also valid for an answer "m=" line to include no SDP
"candidate" attributes and have the default destination set
to the IP address values "0.0.0.0"/"::" and the port value to "9".
This implies that the answering agent is only going to use 
peer-reflexive candidates or that additional candidates would be
provided in subsequent signaling messages.<a class="pilcrow" href="#section-4.3.2-3">Â¶</a></p>
<p id="section-4.3.2-4">
Once the answerer has sent the answer, it can start performing
connectivity checks towards the peer candidates that were provided
in the offer.<a class="pilcrow" href="#section-4.3.2-4">Â¶</a></p>
<p id="section-4.3.2-5">
If the offer does not indicate support of ICE (<a class="xref" href="#sec-ice-mismatch">Section 4.2.5</a>), the answerer
<span class="bcp14">MUST NOT</span> accept the usage of ICE. If the answerer still accepts
the offer, the answerer <span class="bcp14">MUST NOT</span> include any ICE-related SDP
attributes in the answer. Instead, the answerer will generate
the answer according to normal offer/answer procedures <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span>.<a class="pilcrow" href="#section-4.3.2-5">Â¶</a></p>
<p id="section-4.3.2-6">
If the answerer detects a possibility of an ICE mismatch,
procedures described in <a class="xref" href="#sec-ice-mismatch">Section 4.2.5</a> are followed.<a class="pilcrow" href="#section-4.3.2-6">Â¶</a></p>
</section>
<section id="section-4.3.3">
          <h4 id="name-receiving-the-initial-answe">
<a class="section-number selfRef" href="#section-4.3.3">4.3.3. </a><a class="section-name selfRef" href="#name-receiving-the-initial-answe">Receiving the Initial Answer</a>
          </h4>
<p id="section-4.3.3-1">
When an offerer receives an initial answer that indicates
that the answerer supports ICE, it can start performing
connectivity checks towards the peer candidates that were
provided in the answer.<a class="pilcrow" href="#section-4.3.3-1">Â¶</a></p>
<p id="section-4.3.3-2">
If the answer does not indicate that the answerer supports ICE, or if the
answerer included "ice-mismatch" attributes for all the active data streams
in the answer, the offerer <span class="bcp14">MUST</span> terminate the usage of ICE for
the entire session, and <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span> procedures
<span class="bcp14">MUST</span> be followed instead.<a class="pilcrow" href="#section-4.3.3-2">Â¶</a></p>
<p id="section-4.3.3-3">
On the other hand, if the answer indicates support for
ICE but includes "ice-mismatch" in certain active data
streams, then the offerer <span class="bcp14">MUST</span> terminate the usage of ICE
procedures, and <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span> procedures
<span class="bcp14">MUST</span> be used instead for only these data streams. Also, ICE
procedures <span class="bcp14">MUST</span> be used for data streams where an "ice-mismatch"
attribute was not included.<a class="pilcrow" href="#section-4.3.3-3">Â¶</a></p>
<p id="section-4.3.3-4">
If the offerer detects an ICE mismatch for one or more data streams in the
answer, as described in <a class="xref" href="#sec-ice-mismatch">Section 4.2.5</a>,
the offerer <span class="bcp14">MUST</span> terminate the usage of ICE for the entire
session.  The subsequent actions taken by the offerer are implementation
dependent and are out of the scope of this specification.<a class="pilcrow" href="#section-4.3.3-4">Â¶</a></p>
</section>
<section id="section-4.3.4">
          <h4 id="name-concluding-ice">
<a class="section-number selfRef" href="#section-4.3.4">4.3.4. </a><a class="section-name selfRef" href="#name-concluding-ice">Concluding ICE</a>
          </h4>
<p id="section-4.3.4-1">
Once the agent has successfully nominated a pair <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>, the state of the checklist associated with the pair is set
to Completed. Once the state of each checklist is set to either Completed or
Failed, for each Completed checklist, the agent checks whether the nominated
pair matches the default candidate pair. If there are one or more pairs that
do not match, and the peer did not indicate support for the 'ice2' ice-option,
the controlling agent <span class="bcp14">MUST</span> generate a subsequent offer in which
the connection address, port, and transport protocol in the "c=" and "m="
lines associated with each data stream match the corresponding local
information of the nominated pair for that data stream (<a class="xref" href="#sec-send-subsequent-offer-after-nom">Section 4.4.1.2.2</a>).  If the peer
did indicate support for the 'ice2' ice-option, the controlling agent does not
immediately need to generate an updated offer in order to align a connection
address, port, and protocol with a nominated pair. However, later in the
session, whenever the controlling agent does send a subsequent offer, it
<span class="bcp14">MUST</span> do the alignment as described above.<a class="pilcrow" href="#section-4.3.4-1">Â¶</a></p>
<p id="section-4.3.4-2">
If there are one or more checklists with the state set to Failed, the
controlling agent <span class="bcp14">MUST</span> generate a subsequent offer in order to
remove the associated data streams by setting the port value of the data
streams to zero (<a class="xref" href="#sec-send-subsequent-offer-remove">Section 4.4.1.1.2</a>), even if the peer did indicate support for the 'ice2'
ice-option. If needed, such offer is used to align the connection address,
port, and transport protocol, as described above.<a class="pilcrow" href="#section-4.3.4-2">Â¶</a></p>
<p id="section-4.3.4-3">
As described in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>, once the controlling agent has nominated
a candidate pair for a checklist, the agent <span class="bcp14">MUST NOT</span> nominate another pair
for that checklist during the lifetime of the ICE session (i.e., until
ICE is restarted).<a class="pilcrow" href="#section-4.3.4-3">Â¶</a></p>
<p id="section-4.3.4-4">
  <span>[<a class="xref" href="#RFC8863">RFC8863</a>]</span> provides a mechanism for
  allowing the ICE process to run long enough in order to find working candidate pairs,
  by waiting for potential peer-reflexive candidates, even though no candidate pairs were
  received from the peer or all current candidate pairs associated with a checklist have
  either failed or been discarded.<a class="pilcrow" href="#section-4.3.4-4">Â¶</a></p>
</section>
</section>
<section id="section-4.4">
        <h3 id="name-subsequent-offer-answer-exc">
<a class="section-number selfRef" href="#section-4.4">4.4. </a><a class="section-name selfRef" href="#name-subsequent-offer-answer-exc">Subsequent Offer/Answer Exchanges</a>
        </h3>
<p id="section-4.4-1">
Either agent <span class="bcp14">MAY</span> generate a subsequent offer at any time allowed by
<span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span>. This section defines rules for construction of subsequent
offers and answers.<a class="pilcrow" href="#section-4.4-1">Â¶</a></p>
<p id="section-4.4-2">
Should a subsequent offer fail, ICE processing continues as if the
subsequent offer had never been made.<a class="pilcrow" href="#section-4.4-2">Â¶</a></p>
<div id="sec-send-subsequent-offer">
<section id="section-4.4.1">
          <h4 id="name-sending-subsequent-offer">
<a class="section-number selfRef" href="#section-4.4.1">4.4.1. </a><a class="section-name selfRef" href="#name-sending-subsequent-offer">Sending Subsequent Offer</a>
          </h4>
<section id="section-4.4.1.1">
            <h5 id="name-procedures-for-all-implemen">
<a class="section-number selfRef" href="#section-4.4.1.1">4.4.1.1. </a><a class="section-name selfRef" href="#name-procedures-for-all-implemen">Procedures for All Implementations</a>
            </h5>
<div id="sec-suboffer-restarts">
<section id="section-4.4.1.1.1">
              <h6 id="name-ice-restart">
<a class="section-number selfRef" href="#section-4.4.1.1.1">4.4.1.1.1. </a><a class="section-name selfRef" href="#name-ice-restart">ICE Restart</a>
              </h6>
<p id="section-4.4.1.1.1-1">
An agent <span class="bcp14">MAY</span> restart ICE processing for an existing data stream <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>.<a class="pilcrow" href="#section-4.4.1.1.1-1">Â¶</a></p>
<p id="section-4.4.1.1.1-2">
The rules governing the ICE restart imply that setting the connection address
in the "c=" line to "0.0.0.0" (for IPv4)/ "::" (for IPv6) will cause an ICE restart.
Consequently, ICE implementations <span class="bcp14">MUST NOT</span> utilize this mechanism for call hold,
and instead <span class="bcp14">MUST</span> use "inactive" and "sendonly" as described in 
<span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span>.<a class="pilcrow" href="#section-4.4.1.1.1-2">Â¶</a></p>
<p id="section-4.4.1.1.1-3">
To restart ICE, an agent <span class="bcp14">MUST</span> change both the "ice-pwd" and the "ice-ufrag" for
the data stream in an offer. However, it is permissible to use a session-level
attribute in one offer, but to provide the same "ice-pwd" or "ice-ufrag" as a
media-level attribute in a subsequent offer. This <span class="bcp14">MUST NOT</span> be considered
as ICE restart.<a class="pilcrow" href="#section-4.4.1.1.1-3">Â¶</a></p>
<p id="section-4.4.1.1.1-4">
An agent sets the rest of the ICE-related fields in the SDP for this data stream as it
would in an initial offer of this data stream (<a class="xref" href="#sec-encoding">Section 4.2.1</a>).
Consequently, the set of candidates <span class="bcp14">MAY</span> include some, none, or all of the
previous candidates for that data stream and <span class="bcp14">MAY</span> include a totally new set of
candidates. The agent <span class="bcp14">MAY</span> modify the attribute values of the SDP "ice-options" and
SDP "ice-pacing" attributes, and it <span class="bcp14">MAY</span> change its role using the SDP "ice-lite" attribute.
The agent <span class="bcp14">MUST NOT</span> modify the SDP "ice-options", "ice-pacing", and "ice-lite" attributes in a
subsequent offer unless the offer is sent in order to request an ICE restart.<a class="pilcrow" href="#section-4.4.1.1.1-4">Â¶</a></p>
</section>
</div>
<div id="sec-send-subsequent-offer-remove">
<section id="section-4.4.1.1.2">
              <h6 id="name-removing-a-data-stream">
<a class="section-number selfRef" href="#section-4.4.1.1.2">4.4.1.1.2. </a><a class="section-name selfRef" href="#name-removing-a-data-stream">Removing a Data Stream</a>
              </h6>
<p id="section-4.4.1.1.2-1">
If an agent removes a data stream by setting its port to zero, it <span class="bcp14">MUST NOT</span>
include any "candidate" attributes for that data stream and <span class="bcp14">SHOULD NOT</span> include
any other ICE-related attributes defined in <a class="xref" href="#sec-grammar">Section 5</a> for that data stream.<a class="pilcrow" href="#section-4.4.1.1.2-1">Â¶</a></p>
</section>
</div>
<section id="section-4.4.1.1.3">
              <h6 id="name-adding-a-data-stream">
<a class="section-number selfRef" href="#section-4.4.1.1.3">4.4.1.1.3. </a><a class="section-name selfRef" href="#name-adding-a-data-stream">Adding a Data Stream</a>
              </h6>
<p id="section-4.4.1.1.3-1">
If an agent wishes to add a new data stream, it sets the fields in the SDP for
this data stream as if this were an initial offer for that data stream
(<a class="xref" href="#sec-encoding">Section 4.2.1</a>). This will cause ICE processing to begin for this data stream.<a class="pilcrow" href="#section-4.4.1.1.3-1">Â¶</a></p>
</section>
</section>
<section id="section-4.4.1.2">
            <h5 id="name-procedures-for-full-impleme">
<a class="section-number selfRef" href="#section-4.4.1.2">4.4.1.2. </a><a class="section-name selfRef" href="#name-procedures-for-full-impleme">Procedures for Full Implementations</a>
            </h5>
<p id="section-4.4.1.2-1">
This section describes additional procedures for full implementations,
covering existing data streams.<a class="pilcrow" href="#section-4.4.1.2-1">Â¶</a></p>
<section id="section-4.4.1.2.1">
              <h6 id="name-before-nomination">
<a class="section-number selfRef" href="#section-4.4.1.2.1">4.4.1.2.1. </a><a class="section-name selfRef" href="#name-before-nomination">Before Nomination</a>
              </h6>
<p id="section-4.4.1.2.1-1">
When an offerer sends a subsequent offer; in each "m=" section for which a
candidate pair has not yet been nominated, the offer <span class="bcp14">MUST</span> include the
same set of ICE-related information that the offerer included in the
previous offer or answer. The agent <span class="bcp14">MAY</span> include additional candidates
it did not offer previously, but which it has gathered since the last
offer/answer exchange, including peer-reflexive candidates.<a class="pilcrow" href="#section-4.4.1.2.1-1">Â¶</a></p>
<p id="section-4.4.1.2.1-2">
The agent <span class="bcp14">MAY</span> change the default destination for media. As with initial
offers, there <span class="bcp14">MUST</span> be a set of "candidate" attributes in the offer matching
this default destination.<a class="pilcrow" href="#section-4.4.1.2.1-2">Â¶</a></p>
</section>
<div id="sec-send-subsequent-offer-after-nom">
<section id="section-4.4.1.2.2">
              <h6 id="name-after-nomination">
<a class="section-number selfRef" href="#section-4.4.1.2.2">4.4.1.2.2. </a><a class="section-name selfRef" href="#name-after-nomination">After Nomination</a>
              </h6>
<p id="section-4.4.1.2.2-1">
Once a candidate pair has been nominated for a data stream, the connection address,
port, and transport protocol in each "c=" and "m=" line associated with that data
stream <span class="bcp14">MUST</span> match the data associated with the nominated pair for that
data stream. In addition, the offerer only includes SDP "candidate" attributes
(one per component) representing the local candidates of the nominated candidate pair. 
The offerer <span class="bcp14">MUST NOT</span> include any other SDP "candidate" attributes in the
subsequent offer.<a class="pilcrow" href="#section-4.4.1.2.2-1">Â¶</a></p>
<p id="section-4.4.1.2.2-2">
In addition, if the agent is controlling, it <span class="bcp14">MUST</span> include the
"remote-candidates" attribute for each data stream whose checklist
is in the Completed state. The attribute contains the remote candidates
corresponding to the nominated pair in the valid list for each
component of that data stream. It is needed to avoid a race condition
whereby the controlling agent chooses its pairs, but the updated offer
beats the connectivity checks to the controlled agent, which doesn't
even know these pairs are valid, let alone selected. See <a class="xref" href="#sec-why-remote">Appendix B</a>
for elaboration on this race condition.<a class="pilcrow" href="#section-4.4.1.2.2-2">Â¶</a></p>
</section>
</div>
</section>
<section id="section-4.4.1.3">
            <h5 id="name-procedures-for-lite-impleme">
<a class="section-number selfRef" href="#section-4.4.1.3">4.4.1.3. </a><a class="section-name selfRef" href="#name-procedures-for-lite-impleme">Procedures for Lite Implementations</a>
            </h5>
<p id="section-4.4.1.3-1">
If the ICE state is Running, a lite implementation <span class="bcp14">MUST</span> include all of
its candidates for each component of each data stream in "candidate"
attributes in any subsequent offer. The candidates are formed identically
to the procedures for initial offers.<a class="pilcrow" href="#section-4.4.1.3-1">Â¶</a></p>
<p id="section-4.4.1.3-2">
A lite implementation <span class="bcp14">MUST NOT</span> add additional host candidates in a
subsequent offer, and <span class="bcp14">MUST NOT</span> modify the username fragments and
passwords. If an agent needs to offer additional candidates, or 
to modify the username fragments and passwords, it <span class="bcp14">MUST</span> request an 
ICE restart (<a class="xref" href="#sec-suboffer-restarts">Section 4.4.1.1.1</a>) for that data stream.<a class="pilcrow" href="#section-4.4.1.3-2">Â¶</a></p>
<p id="section-4.4.1.3-3">
If ICE has completed for a data stream, and if the agent is controlled,
the default destination for that data stream <span class="bcp14">MUST</span> be set to the
remote candidate of the candidate pair for that component in the valid list.
For a lite implementation, there is always just a single candidate pair in
the valid list for each component of a data stream. Additionally, the agent
<span class="bcp14">MUST</span> include a "candidate" attribute for each default destination.<a class="pilcrow" href="#section-4.4.1.3-3">Â¶</a></p>
<p id="section-4.4.1.3-4">
If the ICE state is Completed, and if the agent is controlling (which only
happens when both agents are lite), the agent <span class="bcp14">MUST</span> include the
"remote-candidates" attribute for each data stream.  The attribute
contains the remote candidates from the candidate pairs in the
valid list (one pair for each component of each data stream).<a class="pilcrow" href="#section-4.4.1.3-4">Â¶</a></p>
</section>
</section>
</div>
<div id="sec-subsequent-answer">
<section id="section-4.4.2">
          <h4 id="name-sending-subsequent-answer">
<a class="section-number selfRef" href="#section-4.4.2">4.4.2. </a><a class="section-name selfRef" href="#name-sending-subsequent-answer">Sending Subsequent Answer</a>
          </h4>
<p id="section-4.4.2-1">
If ICE is Completed for a data stream, and the offer for that data
stream lacked the "remote-candidates" attribute, the rules for
construction of the answer are identical to those for the offerer,
except that the answerer <span class="bcp14">MUST NOT</span> include the "remote-candidates"
attribute in the answer.<a class="pilcrow" href="#section-4.4.2-1">Â¶</a></p>
<p id="section-4.4.2-2">
A controlled agent will receive an offer with the "remote-candidates"
attribute for a data stream when its peer has concluded ICE processing
for that data stream. This attribute is present in the
offer to deal with a race condition between the receipt of the offer,
and the receipt of the Binding response that tells the answerer the
candidate that will be selected by ICE. See <a class="xref" href="#sec-why-remote">Appendix B</a> for an
explanation of this race condition. Consequently, processing of an
offer with this attribute depends on the winner of the race.<a class="pilcrow" href="#section-4.4.2-2">Â¶</a></p>
<p id="section-4.4.2-3">
The agent forms a candidate pair for each component of the data stream by:<a class="pilcrow" href="#section-4.4.2-3">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.2-4.1">
Setting the remote candidate equal to the offerer's default
destination for that component (i.e., the contents of the "m=" and
"c=" lines for RTP, and the "rtcp" attribute for RTCP)<a class="pilcrow" href="#section-4.4.2-4.1">Â¶</a>
</li>
            <li class="normal" id="section-4.4.2-4.2">
Setting the local candidate equal to the transport address for
that same component in the "remote-candidates" attribute in the
offer.<a class="pilcrow" href="#section-4.4.2-4.2">Â¶</a>
</li>
          </ul>
<p id="section-4.4.2-5">
The agent then sees if each of these candidate pairs is present
in the valid list.  If a particular pair is not in the valid list,
the check has "lost" the race.  Call such a pair a "losing pair".<a class="pilcrow" href="#section-4.4.2-5">Â¶</a></p>
<p id="section-4.4.2-6">
The agent finds all the pairs in the checklist whose remote
candidates equal the remote candidate in the losing pair:<a class="pilcrow" href="#section-4.4.2-6">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.2-7.1">
If none of the pairs is In-Progress, and at least one is Failed,
it is most likely that a network failure, such as a network
partition or serious packet loss, has occurred.  The agent <span class="bcp14">SHOULD</span>
generate an answer for this data stream as if the "remote-
candidates" attribute had not been present, and then restart ICE
for this stream.<a class="pilcrow" href="#section-4.4.2-7.1">Â¶</a>
</li>
            <li class="normal" id="section-4.4.2-7.2">
If at least one of the pairs is In-Progress, the agent <span class="bcp14">SHOULD</span> wait
for those checks to complete, and as each completes, redo the
processing in this section until there are no losing pairs.<a class="pilcrow" href="#section-4.4.2-7.2">Â¶</a>
</li>
          </ul>
<p id="section-4.4.2-8">
Once there are no losing pairs, the agent can generate the answer.
It <span class="bcp14">MUST</span> set the default destination for media to the candidates in
the "remote-candidates" attribute from the offer (each of which will
now be the local candidate of a candidate pair in the valid list).
It <span class="bcp14">MUST</span> include a "candidate" attribute in the answer for each
candidate in the "remote-candidates" attribute in the offer.<a class="pilcrow" href="#section-4.4.2-8">Â¶</a></p>
<section id="section-4.4.2.1">
            <h5 id="name-ice-restart-2">
<a class="section-number selfRef" href="#section-4.4.2.1">4.4.2.1. </a><a class="section-name selfRef" href="#name-ice-restart-2">ICE Restart</a>
            </h5>
<p id="section-4.4.2.1-1">
If the offerer in a subsequent offer requested an ICE restart (<a class="xref" href="#sec-suboffer-restarts">Section 4.4.1.1.1</a>)
for a data stream, and if the answerer accepts the offer, the
answerer follows the procedures for generating an initial answer.<a class="pilcrow" href="#section-4.4.2.1-1">Â¶</a></p>
<p id="section-4.4.2.1-2">
For a given data stream, the answerer <span class="bcp14">MAY</span> include the same
candidates that were used in the previous ICE session, but
it <span class="bcp14">MUST</span> change the SDP "ice-pwd" and "ice-ufrag" attribute
values.<a class="pilcrow" href="#section-4.4.2.1-2">Â¶</a></p>
<p id="section-4.4.2.1-3">
The answerer <span class="bcp14">MAY</span> modify the attribute values of the SDP "ice-options" and
SDP "ice-pacing" attributes, and it <span class="bcp14">MAY</span> change its role using the SDP "ice-lite" attribute.
The answerer <span class="bcp14">MUST NOT</span> modify the SDP "ice-options", "ice-pacing", and "ice-lite" attributes in a
subsequent answer unless the answer is sent for an offer that was used to request an ICE restart
(<a class="xref" href="#sec-suboffer-restarts">Section 4.4.1.1.1</a>). If any of the SDP attributes have been modified in
a subsequent offer that is not used to request an ICE restart, the answerer <span class="bcp14">MUST</span> reject the
offer.<a class="pilcrow" href="#section-4.4.2.1-3">Â¶</a></p>
</section>
<section id="section-4.4.2.2">
            <h5 id="name-lite-implementation-specifi">
<a class="section-number selfRef" href="#section-4.4.2.2">4.4.2.2. </a><a class="section-name selfRef" href="#name-lite-implementation-specifi">Lite Implementation Specific Procedures</a>
            </h5>
<p id="section-4.4.2.2-1">
If the received offer contains the "remote-candidates" attribute for a
data stream, the agent forms a candidate pair for each component of the
data stream by:<a class="pilcrow" href="#section-4.4.2.2-1">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.2.2-2.1">
Setting the remote candidate equal to the offerer's default destination
for that component (i.e., the contents of the "m=" and "c=" lines for RTP,
and the "rtcp" attribute for RTCP).<a class="pilcrow" href="#section-4.4.2.2-2.1">Â¶</a>
</li>
              <li class="normal" id="section-4.4.2.2-2.2">
Setting the local candidate equal to the transport address for that same
component in the "remote-candidates" attribute in the offer.<a class="pilcrow" href="#section-4.4.2.2-2.2">Â¶</a>
</li>
            </ul>
<p id="section-4.4.2.2-3">
The state of the checklist associated with that data stream is set to Completed.<a class="pilcrow" href="#section-4.4.2.2-3">Â¶</a></p>
<p id="section-4.4.2.2-4">
Furthermore, if the agent believed it was controlling, but the offer contained
the "remote-candidates" attribute, both agents believe they are controlling.
In this case, both would have sent updated offers around the same time.<a class="pilcrow" href="#section-4.4.2.2-4">Â¶</a></p>
<p id="section-4.4.2.2-5">
However, the signaling protocol carrying the offer/answer exchanges
will have resolved this glare condition, so that one agent is always
the 'winner' by having its offer received before its peer has sent
an offer. The winner takes the role of controlling, so that the
loser (the answerer under consideration in this section) <span class="bcp14">MUST</span>
change its role to controlled.<a class="pilcrow" href="#section-4.4.2.2-5">Â¶</a></p>
<p id="section-4.4.2.2-6">
   Consequently, if the agent was controlling based on the rules 
   in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-8.2">Section 8.2</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span>
   and was going to send an updated offer, it no longer needs to.<a class="pilcrow" href="#section-4.4.2.2-6">Â¶</a></p>
<p id="section-4.4.2.2-7">
Besides the potential role change, change in the valid list, and
state changes, the construction of the answer is performed identically
to the construction of an offer.<a class="pilcrow" href="#section-4.4.2.2-7">Â¶</a></p>
</section>
</section>
</div>
<section id="section-4.4.3">
          <h4 id="name-receiving-answer-for-a-subs">
<a class="section-number selfRef" href="#section-4.4.3">4.4.3. </a><a class="section-name selfRef" href="#name-receiving-answer-for-a-subs">Receiving Answer for a Subsequent Offer</a>
          </h4>
<section id="section-4.4.3.1">
            <h5 id="name-procedures-for-full-implemen">
<a class="section-number selfRef" href="#section-4.4.3.1">4.4.3.1. </a><a class="section-name selfRef" href="#name-procedures-for-full-implemen">Procedures for Full Implementations</a>
            </h5>
<p id="section-4.4.3.1-1">
There may be certain situations where the offerer receives
an SDP answer that lacks ICE candidates although the initial answer
included them. One example of such an "unexpected" answer might 
happen when an ICE-unaware Back-to-Back User Agent (B2BUA)
introduces a media server during call hold using third party
call control procedures <span>[<a class="xref" href="#RFC3725">RFC3725</a>]</span>. 
Omitting further details on how this is done, this could
result in an answer that was constructed by the B2BUA 
being received at the holding UA. With the B2BUA being
ICE-unaware, that answer would not include ICE candidates.<a class="pilcrow" href="#section-4.4.3.1-1">Â¶</a></p>
<p id="section-4.4.3.1-2">
Receiving an answer without ICE attributes in this situation might be
unexpected, but would not necessarily impair the user experience.<a class="pilcrow" href="#section-4.4.3.1-2">Â¶</a></p>
<p id="section-4.4.3.1-3">
When the offerer receives an answer indicating support for ICE, the
offer performs one of the following actions:<a class="pilcrow" href="#section-4.4.3.1-3">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.4.3.1-4.1">
If the offer was a restart, the agent <span class="bcp14">MUST</span> perform ICE restart
procedures as specified in <a class="xref" href="#sec-restart-subsequent">Section 4.4.3.1.1</a>.<a class="pilcrow" href="#section-4.4.3.1-4.1">Â¶</a>
</li>
              <li class="normal" id="section-4.4.3.1-4.2">
If the offer/answer exchange removed a data stream, or an
answer rejected an offered data stream, an agent <span class="bcp14">MUST</span> flush the
valid list for that data stream. It <span class="bcp14">MUST</span> also terminate any
STUN transactions in progress for that data stream.<a class="pilcrow" href="#section-4.4.3.1-4.2">Â¶</a>
</li>
              <li class="normal" id="section-4.4.3.1-4.3">
If the offer/answer exchange added a new data stream, the agent
<span class="bcp14">MUST</span> create a new checklist for it (and an empty valid list to
start of course), which in turn triggers the candidate
processing procedures <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>.<a class="pilcrow" href="#section-4.4.3.1-4.3">Â¶</a>
</li>
              <li class="normal" id="section-4.4.3.1-4.4">
If the checklist state associated with a data stream is Running, the agent
recomputes the checklist. If a pair on the new checklist was
also on the previous checklist, its candidate pair state is copied over.
  Otherwise, its candidate pair state is set to Frozen. If none of the checklists
  are active (meaning that the candidate pair states in each checklist
  are Frozen), appropriate procedures in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>
  are performed to move candidate pair(s) to the Waiting state to
  further continue ICE processing.<a class="pilcrow" href="#section-4.4.3.1-4.4">Â¶</a>
</li>
              <li class="normal" id="section-4.4.3.1-4.5">
If the ICE state is Completed, and the SDP answer conforms to
<a class="xref" href="#sec-subsequent-answer">Section 4.4.2</a>, the agent <span class="bcp14">MUST</span> remain in the 
Completed ICE state.<a class="pilcrow" href="#section-4.4.3.1-4.5">Â¶</a>
</li>
            </ul>
<p id="section-4.4.3.1-5">
However, if the ICE support is no longer indicated in the SDP answer,
the agent <span class="bcp14">MUST</span> fall back to <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span> 
procedures and <span class="bcp14">SHOULD NOT</span> drop the dialog because of the 
missing ICE support or unexpected answer.
When the agent sends a new offer, it <span class="bcp14">MUST</span> perform an ICE restart.<a class="pilcrow" href="#section-4.4.3.1-5">Â¶</a></p>
<div id="sec-restart-subsequent">
<section id="section-4.4.3.1.1">
              <h6 id="name-ice-restarts">
<a class="section-number selfRef" href="#section-4.4.3.1.1">4.4.3.1.1. </a><a class="section-name selfRef" href="#name-ice-restarts">ICE Restarts</a>
              </h6>
<p id="section-4.4.3.1.1-1">
The agent <span class="bcp14">MUST</span> remember the nominated pair in the valid list for each
component of the data stream, called the "previous selected pair", prior
to the restart. The agent will continue to send media using this pair,
as described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-12">Section 12</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span>. Once these destinations are
noted, the agent <span class="bcp14">MUST</span> flush the valid lists and checklists, and then recompute
the checklist and its states, thus triggering the candidate processing
procedures <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>.<a class="pilcrow" href="#section-4.4.3.1.1-1">Â¶</a></p>
</section>
</div>
</section>
<section id="section-4.4.3.2">
            <h5 id="name-procedures-for-lite-implemen">
<a class="section-number selfRef" href="#section-4.4.3.2">4.4.3.2. </a><a class="section-name selfRef" href="#name-procedures-for-lite-implemen">Procedures for Lite Implementations</a>
            </h5>
<p id="section-4.4.3.2-1">
If ICE is restarting for a data stream, the agent <span class="bcp14">MUST</span> create a new
valid list for that data stream. It <span class="bcp14">MUST</span> remember the nominated pair in the
previous valid list for each component of the data stream, called
the "previous selected pairs", and continue to send media there as
described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-12">Section 12</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span>. The state of each
checklist for each data stream <span class="bcp14">MUST</span> change to Running, and the ICE state
<span class="bcp14">MUST</span> be set to Running.<a class="pilcrow" href="#section-4.4.3.2-1">Â¶</a></p>
</section>
</section>
</section>
</section>
<div id="sec-grammar">
<section id="section-5">
      <h2 id="name-grammar">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-grammar">Grammar</a>
      </h2>
<p id="section-5-1">
This specification defines eight new SDP attributes -- the "candidate",
"remote-candidates", "ice-lite", "ice-mismatch", "ice-ufrag", "ice-pwd", "ice-pacing",
and "ice-options" attributes.<a class="pilcrow" href="#section-5-1">Â¶</a></p>
<p id="section-5-2">
This section also provides non-normative examples of the attributes defined.<a class="pilcrow" href="#section-5-2">Â¶</a></p>
<p id="section-5-3">
The syntax for the attributes follow Augmented BNF as defined in <span>[<a class="xref" href="#RFC5234">RFC5234</a>]</span>.<a class="pilcrow" href="#section-5-3">Â¶</a></p>
<section id="section-5.1">
        <h3 id="name-candidate-attribute">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-candidate-attribute">"candidate" Attribute</a>
        </h3>
<p id="section-5.1-1">
The "candidate" attribute is a media-level attribute only.
It contains a transport address for a candidate that can be used for connectivity checks.<a class="pilcrow" href="#section-5.1-1">Â¶</a></p>
<div id="section-5.1-2">
<pre class="sourcecode lang-abnf">candidate-attribute   = "candidate" ":" foundation SP component-id SP
                        transport SP
                        priority SP
                        connection-address SP     ;from RFC 4566
                        port         ;port from RFC 4566
                        SP cand-type
                        [SP rel-addr]
                        [SP rel-port]
                        *(SP cand-extension)

foundation            = 1*32ice-char
component-id          = 1*3DIGIT
transport             = "UDP" / transport-extension
transport-extension   = token              ; from RFC 3261
priority              = 1*10DIGIT
cand-type             = "typ" SP candidate-types
candidate-types       = "host" / "srflx" / "prflx" / "relay" / token
rel-addr              = "raddr" SP connection-address
rel-port              = "rport" SP port
cand-extension        = extension-att-name SP extension-att-value
extension-att-name    = token
extension-att-value   = *VCHAR
ice-char              = ALPHA / DIGIT / "+" / "/"
</pre><a class="pilcrow" href="#section-5.1-2">Â¶</a>
</div>
<p id="section-5.1-3">
This grammar encodes the primary information about a candidate: its IP address,
port and transport protocol, and its properties: the foundation, component ID, priority,
type, and related transport address:<a class="pilcrow" href="#section-5.1-3">Â¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.1-4">
          <dt id="section-5.1-4.1">&lt;connection-address&gt;:</dt>
          <dd id="section-5.1-4.2" style="margin-left: 1.5em">
is taken from RFC 4566 <span>[<a class="xref" href="#RFC4566">RFC4566</a>]</span>.
It is the IP address of the candidate, allowing for
IPv4 addresses, IPv6 addresses, and fully qualified domain names (FQDNs).
When parsing this field, an agent can differentiate an IPv4 address
and an IPv6 address by presence of a colon in its value -
the presence of a colon indicates IPv6.  An agent generating
local candidates <span class="bcp14">MUST NOT</span> use FQDN addresses. An agent processing remote
candidates <span class="bcp14">MUST</span> ignore "candidate" lines that include candidates with
FQDNs or IP address versions that are not supported or recognized.
The procedures for generation and handling of FQDN candidates, as well as,
how agents indicate support for such procedures, need to be specified in an
extension specification.<a class="pilcrow" href="#section-5.1-4.2">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-4.3">&lt;port&gt;:</dt>
          <dd id="section-5.1-4.4" style="margin-left: 1.5em">
is also taken from RFC 4566 <span>[<a class="xref" href="#RFC4566">RFC4566</a>]</span>.
It is the port of the candidate.<a class="pilcrow" href="#section-5.1-4.4">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-4.5">&lt;transport&gt;:</dt>
          <dd id="section-5.1-4.6" style="margin-left: 1.5em">
indicates the transport protocol for the candidate.
This specification only defines UDP. However, extensibility is provided to allow for
future transport protocols to be used with ICE by extending the subregistry
"ICE Transport Protocols" under the "Interactive Connectivity Establishment (ICE)" registry.<a class="pilcrow" href="#section-5.1-4.6">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-4.7">&lt;foundation&gt;:</dt>
          <dd id="section-5.1-4.8" style="margin-left: 1.5em">
is composed of 1 to 32 &lt;ice-char&gt;s.
It is an identifier that is equivalent for two candidates that are of the same type,
share the same base, and come from the same STUN server.
The foundation is used to optimize ICE performance in the Frozen algorithm as
described in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>.<a class="pilcrow" href="#section-5.1-4.8">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-4.9">&lt;component-id&gt;:</dt>
          <dd id="section-5.1-4.10" style="margin-left: 1.5em">
is a positive integer between 1 and 256 (inclusive) that
identifies the specific component of the data stream for which this is a candidate.
It <span class="bcp14">MUST</span> start at 1 and <span class="bcp14">MUST</span> increment by 1 for each component of a particular candidate.
For data streams based on RTP, candidates for the actual RTP media <span class="bcp14">MUST</span> have a component
ID of 1, and candidates for RTCP <span class="bcp14">MUST</span> have a component ID of 2.
See <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-13">Section 13</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span> for additional discussion on extending ICE to new data streams.<a class="pilcrow" href="#section-5.1-4.10">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-4.11">&lt;priority&gt;:</dt>
          <dd id="section-5.1-4.12" style="margin-left: 1.5em">
is a positive integer between 1 and (2**31 - 1) inclusive. The procedures
for computing a candidate's priority are described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-5.1.2">Section 5.1.2</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span>.<a class="pilcrow" href="#section-5.1-4.12">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-4.13">&lt;cand-type&gt;:</dt>
          <dd id="section-5.1-4.14" style="margin-left: 1.5em">
encodes the type of candidate.
This specification defines the values "host", "srflx", "prflx", and "relay" for host,
server-reflexive, peer-reflexive, and relayed candidates, respectively.
Specifications for new candidate types <span class="bcp14">MUST</span> define how, if at all, various steps in the ICE
processing differ from the ones defined by this specification.<a class="pilcrow" href="#section-5.1-4.14">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-4.15">&lt;rel-addr&gt; and &lt;rel-port&gt;:</dt>
          <dd id="section-5.1-4.16" style="margin-left: 1.5em">
convey transport addresses related to the candidate, useful for diagnostics 
and other purposes. &lt;rel-addr&gt; and &lt;rel-port&gt; <span class="bcp14">MUST</span> be present for 
server-reflexive, peer-reflexive, and relayed candidates. 
If a candidate is server-reflexive or peer-reflexive, &lt;rel-addr&gt; and &lt;rel-port&gt; 
are equal to the base for that server-reflexive or  peer-reflexive candidate. 
If the candidate is relayed, &lt;rel-addr&gt; and &lt;rel-port&gt; are equal to 
the mapped address in the Allocate response that provided the client with 
that relayed candidate (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc5766#section-6.3">Section 6.3</a> of [<a class="xref" href="#RFC5766">RFC5766</a>]</span>). 
If the candidate is a host candidate, &lt;rel-addr&gt; and &lt;rel-port&gt; MUST be omitted.<a class="pilcrow" href="#section-5.1-4.16">Â¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-4.17"></dt>
          <dd id="section-5.1-4.18" style="margin-left: 1.5em">
In some cases, e.g., for privacy reasons, an agent may not want to reveal the related
address and port. In this case the address <span class="bcp14">MUST</span> be set to "0.0.0.0" (for IPv4 candidates)
or "::" (for IPv6 candidates) and the port to "9".<a class="pilcrow" href="#section-5.1-4.18">Â¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-5.1-5">
The "candidate" attribute can itself be extended. The grammar allows for new name/value pairs
to be added at the end of the attribute. Such extensions <span class="bcp14">MUST</span> be made through IETF Review or
IESG Approval <span>[<a class="xref" href="#RFC8126">RFC8126</a>]</span>, and the assignments <span class="bcp14">MUST</span> contain the specific extension and a
reference to the document defining the usage of the extension.<a class="pilcrow" href="#section-5.1-5">Â¶</a></p>
<p id="section-5.1-6">
An implementation <span class="bcp14">MUST</span> ignore any name/value pairs it doesn't understand.<a class="pilcrow" href="#section-5.1-6">Â¶</a></p>
<p id="section-5.1-7">
The following is an example SDP line for a UDP server-reflexive "candidate" attribute for
the RTP component:<a class="pilcrow" href="#section-5.1-7">Â¶</a></p>
<div id="section-5.1-8">
<pre class="sourcecode lang-sdp">a=candidate:2 1 UDP 1694498815 192.0.2.3 45664 typ srflx raddr
203.0.113.141 rport 8998
</pre><a class="pilcrow" href="#section-5.1-8">Â¶</a>
</div>
</section>
<section id="section-5.2">
        <h3 id="name-remote-candidates-attribute">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-remote-candidates-attribute">"remote-candidates" Attribute</a>
        </h3>
<p id="section-5.2-1">
The syntax of the "remote-candidates" attribute is defined using Augmented BNF
as defined in <span>[<a class="xref" href="#RFC5234">RFC5234</a>]</span>.
The "remote-candidates" attribute is a media-level attribute only.<a class="pilcrow" href="#section-5.2-1">Â¶</a></p>
<div id="section-5.2-2">
<pre class="sourcecode lang-abnf">remote-candidate-att = "remote-candidates:" remote-candidate
                         0*(SP remote-candidate)
remote-candidate = component-id SP connection-address SP port
</pre><a class="pilcrow" href="#section-5.2-2">Â¶</a>
</div>
<p id="section-5.2-3">
The attribute contains a connection-address and port for each component. The ordering
of components is irrelevant. However, a value <span class="bcp14">MUST</span> be present for each component of a
data stream. This attribute <span class="bcp14">MUST</span> be included in an offer by a controlling agent for
a data stream that is Completed, and <span class="bcp14">MUST NOT</span> be included in any other case.<a class="pilcrow" href="#section-5.2-3">Â¶</a></p>
<p id="section-5.2-4">
The following is an example of "remote-candidates" SDP lines for the RTP and RTCP components:<a class="pilcrow" href="#section-5.2-4">Â¶</a></p>
<div id="section-5.2-5">
<pre class="sourcecode lang-sdp">a=remote-candidates:1 192.0.2.3 45664
a=remote-candidates:2 192.0.2.3 45665
</pre><a class="pilcrow" href="#section-5.2-5">Â¶</a>
</div>
</section>
<section id="section-5.3">
        <h3 id="name-ice-lite-and-ice-mismatch-a">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-ice-lite-and-ice-mismatch-a">"ice-lite" and "ice-mismatch" Attributes</a>
        </h3>
<p id="section-5.3-1">
The syntax of the "ice-lite" and "ice-mismatch" attributes, both of which are flags, is:<a class="pilcrow" href="#section-5.3-1">Â¶</a></p>
<div id="section-5.3-2">
<pre class="sourcecode lang-abnf">ice-lite               = "ice-lite"
ice-mismatch           = "ice-mismatch"
</pre><a class="pilcrow" href="#section-5.3-2">Â¶</a>
</div>
<p id="section-5.3-3">
"ice-lite" is a session-level attribute only, and indicates that an agent is a
lite implementation. "ice-mismatch" is a media-level attribute and only
reported in the answer. It indicates that the offer arrived with a default
destination for a media component that didn't have a corresponding "candidate"
attribute. Inclusion of "ice-mismatch" attribute for a given data stream implies
that even though both agents support ICE, ICE procedures <span class="bcp14">MUST NOT</span> be used for this data
stream, and <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span> procedures <span class="bcp14">MUST</span> be used instead.<a class="pilcrow" href="#section-5.3-3">Â¶</a></p>
</section>
<section id="section-5.4">
        <h3 id="name-ice-ufrag-and-ice-pwd-attri">
<a class="section-number selfRef" href="#section-5.4">5.4. </a><a class="section-name selfRef" href="#name-ice-ufrag-and-ice-pwd-attri">"ice-ufrag" and "ice-pwd" Attributes</a>
        </h3>
<p id="section-5.4-1">
The "ice-ufrag" and "ice-pwd" attributes convey the username fragment and password used by ICE for message integrity.
Their syntax is:<a class="pilcrow" href="#section-5.4-1">Â¶</a></p>
<div id="section-5.4-2">
<pre class="sourcecode lang-abnf">ice-pwd-att           = "ice-pwd:" password
ice-ufrag-att         = "ice-ufrag:" ufrag
password              = 22*256ice-char
ufrag                 = 4*256ice-char
</pre><a class="pilcrow" href="#section-5.4-2">Â¶</a>
</div>
<p id="section-5.4-3">
The "ice-pwd" and "ice-ufrag" attributes can appear at either the session-level
or media-level. When present in both, the value in the media-level takes precedence.
Thus, the value at the session-level is effectively a default that applies to all
data streams, unless overridden by a media-level value. Whether present at the session
or media-level, there <span class="bcp14">MUST</span> be an "ice-pwd" and "ice-ufrag" attribute for each data stream.
If two data streams have identical "ice-ufrag"s, they <span class="bcp14">MUST</span> have identical "ice-pwd"s.<a class="pilcrow" href="#section-5.4-3">Â¶</a></p>
<p id="section-5.4-4">
The "ice-ufrag" and "ice-pwd" attributes <span class="bcp14">MUST</span> be chosen randomly at the beginning of
a session (the same applies when ICE is restarting for an agent).<a class="pilcrow" href="#section-5.4-4">Â¶</a></p>
<p id="section-5.4-5"><span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> requires the "ice-ufrag" attribute to contain at least 24 bits of
randomness, and the "ice-pwd" attribute to contain at least 128 bits of
randomness. This means that the "ice-ufrag"
attribute will be at least 4 characters long, and the "ice-pwd" at least 22 characters long,
since the grammar for these attributes allows for 6 bits of information per character.
The attributes <span class="bcp14">MAY</span> be longer than 4 and 22 characters, respectively, of course, up to
256 characters. The upper limit allows for buffer sizing in implementations.
Its large upper limit allows for increased amounts of randomness to be added over time.
For compatibility with the 512-character limitation for the STUN username attribute value
and for bandwidth conservation considerations, the "ice-ufrag" attribute <span class="bcp14">MUST NOT</span> be longer
than 32 characters when sending, but an implementation  <span class="bcp14">MUST</span> accept up to 256 characters
when receiving.<a class="pilcrow" href="#section-5.4-5">Â¶</a></p>
<p id="section-5.4-6">
The following example shows sample "ice-ufrag" and "ice-pwd" SDP lines:<a class="pilcrow" href="#section-5.4-6">Â¶</a></p>
<div id="section-5.4-7">
<pre class="sourcecode lang-sdp">a=ice-pwd:asd88fgpdd777uzjYhagZg
a=ice-ufrag:8hhY
</pre><a class="pilcrow" href="#section-5.4-7">Â¶</a>
</div>
</section>
<section id="section-5.5">
        <h3 id="name-ice-pacing-attribute">
<a class="section-number selfRef" href="#section-5.5">5.5. </a><a class="section-name selfRef" href="#name-ice-pacing-attribute">"ice-pacing" Attribute</a>
        </h3>
<p id="section-5.5-1">
The "ice-pacing" is a session-level attribute that indicates the desired connectivity-check pacing (Ta interval), in milliseconds, that the sender wishes to use. See
<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-14.2">Section 14.2</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span> for more information regarding selecting a pacing value.
The syntax is:<a class="pilcrow" href="#section-5.5-1">Â¶</a></p>
<div id="section-5.5-2">
<pre class="sourcecode lang-abnf">ice-pacing-att            = "ice-pacing:" pacing-value
pacing-value              = 1*10DIGIT
</pre><a class="pilcrow" href="#section-5.5-2">Â¶</a>
</div>
<p id="section-5.5-3">
If absent in an offer or answer, the default value of the attribute is 50 ms,
which is the recommended value specified in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>.<a class="pilcrow" href="#section-5.5-3">Â¶</a></p>
<p id="section-5.5-4">
As defined in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>, regardless of the Ta value
chosen for each agent, the combination of all transactions from all agents (if a given
implementation runs several concurrent agents) will not be sent more often than
once every 5 ms.<a class="pilcrow" href="#section-5.5-4">Â¶</a></p>
<p id="section-5.5-5">
As defined in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>, once both agents have 
indicated the pacing value they want to use, both agents will use the larger of the 
indicated values.<a class="pilcrow" href="#section-5.5-5">Â¶</a></p>
<p id="section-5.5-6">
The following example shows an "ice-pacing" SDP line with value '50':<a class="pilcrow" href="#section-5.5-6">Â¶</a></p>
<div id="section-5.5-7">
<pre class="sourcecode lang-sdp">a=ice-pacing:50
</pre><a class="pilcrow" href="#section-5.5-7">Â¶</a>
</div>
</section>
<div id="sec-ice-options">
<section id="section-5.6">
        <h3 id="name-ice-options-attribute">
<a class="section-number selfRef" href="#section-5.6">5.6. </a><a class="section-name selfRef" href="#name-ice-options-attribute">"ice-options" Attribute</a>
        </h3>
<p id="section-5.6-1">
The "ice-options" attribute is a session-level and media-level attribute.
It contains a series of tokens that identify the options supported by the agent.
Its grammar is:<a class="pilcrow" href="#section-5.6-1">Â¶</a></p>
<div id="section-5.6-2">
<pre class="sourcecode lang-abnf">ice-options           = "ice-options:" ice-option-tag
                          *(SP ice-option-tag)
ice-option-tag        = 1*ice-char
</pre><a class="pilcrow" href="#section-5.6-2">Â¶</a>
</div>
<p id="section-5.6-3">
The existence of an "ice-options" in an offer indicates that a certain extension
is supported by the agent, and it is willing to use it if the peer agent also includes
the same extension in the answer. There might be further extension-specific
negotiation needed between the agents that determine how the extension gets used
in a given session. The details of the negotiation procedures, if present, <span class="bcp14">MUST</span> be
defined by the specification defining the extension (<a class="xref" href="#sec-iana-ice-options">Section 10.2</a>).<a class="pilcrow" href="#section-5.6-3">Â¶</a></p>
<p id="section-5.6-4">The following example shows an "ice-options" SDP line with 'ice2' and 
'rtp+ecn' <span>[<a class="xref" href="#RFC6679">RFC6679</a>]</span> values.<a class="pilcrow" href="#section-5.6-4">Â¶</a></p>
<div id="section-5.6-5">
<pre class="sourcecode lang-sdp">a=ice-options:ice2 rtp+ecn
</pre><a class="pilcrow" href="#section-5.6-5">Â¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="sec-keepalive">
<section id="section-6">
      <h2 id="name-keepalives">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-keepalives">Keepalives</a>
      </h2>
<p id="section-6-1">
All the ICE agents <span class="bcp14">MUST</span> follow the procedures defined in
 <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-11">Section 11</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span>
for sending keepalives.  As defined in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>,
the keepalives will be sent regardless of whether the data stream is currently 
inactive, sendonly, recvonly, or sendrecv, and regardless
of the presence or value of the bandwidth attribute. An agent can determine that its
peer supports ICE by the presence of "candidate" attributes for each media session.<a class="pilcrow" href="#section-6-1">Â¶</a></p>
</section>
</div>
<section id="section-7">
      <h2 id="name-sip-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-sip-considerations">SIP Considerations</a>
      </h2>
<p id="section-7-1">
Note that ICE is not intended for NAT traversal for SIP signaling, which is assumed to be
provided via another mechanism <span>[<a class="xref" href="#RFC5626">RFC5626</a>]</span>.<a class="pilcrow" href="#section-7-1">Â¶</a></p>
<p id="section-7-2">
When ICE is used with SIP, forking may result in a single offer generating a
multiplicity of answers. In that case, ICE proceeds completely in parallel and
independently for each answer, treating the combination of its offer and
each answer as an independent offer/answer exchange, with its own set of local
candidates, pairs, checklists, states, and so on.<a class="pilcrow" href="#section-7-2">Â¶</a></p>
<div id="sec-latency">
<section id="section-7.1">
        <h3 id="name-latency-guidelines">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-latency-guidelines">Latency Guidelines</a>
        </h3>
<p id="section-7.1-1">
ICE requires a series of STUN-based connectivity checks to take place between
endpoints. These checks start from the answerer on generation of its answer,
and start from the offerer when it receives the answer.
These checks can take time to complete, and as such, the selection of
messages to use with offers and answers can affect perceived user latency.
Two latency figures are of particular interest. These are the post-pickup delay
and the post-dial delay. The post-pickup delay refers to the time between when
a user "answers the phone" and when any speech they utter can be delivered to
the caller. The post-dial delay refers to the time between when a user enters
the destination address for the user and ringback begins as a consequence of
having successfully started alerting the called user agent.<a class="pilcrow" href="#section-7.1-1">Â¶</a></p>
<p id="section-7.1-2">
Two cases can be considered -- one where the offer is present in the initial
INVITE and one where it is in a response.<a class="pilcrow" href="#section-7.1-2">Â¶</a></p>
<section id="section-7.1.1">
          <h4 id="name-offer-in-invite">
<a class="section-number selfRef" href="#section-7.1.1">7.1.1. </a><a class="section-name selfRef" href="#name-offer-in-invite">Offer in INVITE</a>
          </h4>
<p id="section-7.1.1-1">
To reduce post-dial delays, it is <span class="bcp14">RECOMMENDED</span> that the caller begin gathering
candidates prior to actually sending its initial INVITE, so that the candidates
can be provided in the INVITE. This can be started upon
user interface cues that a call is pending, such as activity on a keypad or
the phone going off-hook.<a class="pilcrow" href="#section-7.1.1-1">Â¶</a></p>
<p id="section-7.1.1-2">
On the receipt of the offer, the answerer <span class="bcp14">SHOULD</span> generate an answer in a
provisional response as soon as it has completed gathering
the candidates. ICE requires that a provisional response with an SDP be
transmitted reliably. This can be done through the existing
Provisional Response Acknowledgment (PRACK)
mechanism <span>[<a class="xref" href="#RFC3262">RFC3262</a>]</span> or through an ICE-specific optimization, wherein,
the agent retransmits the provisional response with the exponential backoff
timers described in <span>[<a class="xref" href="#RFC3262">RFC3262</a>]</span>. Such retransmissions <span class="bcp14">MUST</span> cease on receipt
of a STUN Binding request with the transport address matching the candidate address
for one of the data streams signaled in that SDP or on transmission of the answer
in a 2xx response. If no Binding request is received prior to the last retransmit,
the agent does not consider the session terminated. For the ICE-lite peers, the 
agent <span class="bcp14">MUST</span> cease retransmitting the 18x response after
sending it four times since there will be no Binding request sent, and
the number four is arbitrarily chosen to limit the number of 18x retransmits.<a class="pilcrow" href="#section-7.1.1-2">Â¶</a></p>
<p id="section-7.1.1-3">
Once the answer has been sent, the agent <span class="bcp14">SHOULD</span> begin its connectivity checks.
Once candidate pairs for each component of a data stream enter the valid list,
the answerer can begin sending media on that data stream.<a class="pilcrow" href="#section-7.1.1-3">Â¶</a></p>
<p id="section-7.1.1-4">
However, prior to this point, any media that needs to be sent towards the
caller (such as SIP early media <span>[<a class="xref" href="#RFC3960">RFC3960</a>]</span>) <span class="bcp14">MUST NOT</span> be transmitted. For this
reason, implementations <span class="bcp14">SHOULD</span> delay alerting the called party until candidates
for each component of each data stream have entered the valid list.
In the case of a PSTN gateway, this would mean that the setup message into the
PSTN is delayed until this point. Doing this increases the post-dial delay, but
has the effect of eliminating 'ghost rings'.
Ghost rings are cases where the called party hears the phone ring, picks up, but
hears nothing and cannot be heard. This technique works without requiring support
for, or usage of, preconditions <span>[<a class="xref" href="#RFC3312">RFC3312</a>]</span>. It also has the benefit of guaranteeing
that not a single packet of media will get clipped, so that post-pickup delay is zero.
If an agent chooses to delay local alerting in this way, it <span class="bcp14">SHOULD</span> generate a 180
response once alerting begins.<a class="pilcrow" href="#section-7.1.1-4">Â¶</a></p>
</section>
<section id="section-7.1.2">
          <h4 id="name-offer-in-response">
<a class="section-number selfRef" href="#section-7.1.2">7.1.2. </a><a class="section-name selfRef" href="#name-offer-in-response">Offer in Response</a>
          </h4>
<p id="section-7.1.2-1">
In addition to uses where the offer is in an INVITE, and the answer is in the
provisional and/or 200 OK response, ICE works with cases where the offer appears
in the response.
In such cases, which are common in third party call control <span>[<a class="xref" href="#RFC3725">RFC3725</a>]</span>, ICE
agents <span class="bcp14">SHOULD</span> generate their offers in a reliable provisional response
(which <span class="bcp14">MUST</span> utilize <span>[<a class="xref" href="#RFC3262">RFC3262</a>]</span>), and not alert the user on receipt of the INVITE.
The answer will arrive in a PRACK.
This allows for ICE processing to take place prior to alerting, so that there is no
post-pickup delay, at the expense of increased call setup delays.
Once ICE completes, the callee can alert the user and then generate a 200 OK
when they answer.
The 200 OK would contain no SDP, since the offer/answer exchange has completed.<a class="pilcrow" href="#section-7.1.2-1">Â¶</a></p>
<p id="section-7.1.2-2">
Alternatively, agents <span class="bcp14">MAY</span> place the offer in a 2xx instead (in which case the
answer comes in the ACK).
When this happens, the callee will alert the user on receipt of the INVITE,
and the ICE exchanges will take place only after the user answers.
This has the effect of reducing call-setup delay, but can cause substantial
post-pickup delays and media clipping.<a class="pilcrow" href="#section-7.1.2-2">Â¶</a></p>
</section>
</section>
</div>
<section id="section-7.2">
        <h3 id="name-sip-option-tags-and-media-f">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-sip-option-tags-and-media-f">SIP Option Tags and Media Feature Tags</a>
        </h3>
<p id="section-7.2-1"><span>[<a class="xref" href="#RFC5768">RFC5768</a>]</span> specifies a SIP option tag and media feature tag for usage with ICE.
ICE implementations using SIP <span class="bcp14">SHOULD</span> support this specification, which uses a
feature tag in registrations to facilitate interoperability through signaling
intermediaries.<a class="pilcrow" href="#section-7.2-1">Â¶</a></p>
</section>
<section id="section-7.3">
        <h3 id="name-interactions-with-forking">
<a class="section-number selfRef" href="#section-7.3">7.3. </a><a class="section-name selfRef" href="#name-interactions-with-forking">Interactions with Forking</a>
        </h3>
<p id="section-7.3-1">
ICE interacts very well with forking.
Indeed, ICE fixes some of the problems associated with forking.
Without ICE, when a call forks and the caller receives multiple incoming
data streams, it cannot determine which data stream corresponds to
which callee.<a class="pilcrow" href="#section-7.3-1">Â¶</a></p>
<p id="section-7.3-2">
With ICE, this problem is resolved.
The connectivity checks which occur prior to transmission of media carry
username fragments which in turn are correlated to a specific callee.
Subsequent media packets that arrive on the same candidate pair as the
connectivity check will be associated with that same callee.
Thus, the caller can perform this correlation as long as it has received an answer.<a class="pilcrow" href="#section-7.3-2">Â¶</a></p>
</section>
<section id="section-7.4">
        <h3 id="name-interactions-with-precondit">
<a class="section-number selfRef" href="#section-7.4">7.4. </a><a class="section-name selfRef" href="#name-interactions-with-precondit">Interactions with Preconditions</a>
        </h3>
<p id="section-7.4-1">
Quality of Service (QoS) preconditions, which are defined in <span>[<a class="xref" href="#RFC3312">RFC3312</a>]</span>
and <span>[<a class="xref" href="#RFC4032">RFC4032</a>]</span>, apply only to the transport addresses listed as the default
targets for media in an offer/answer.
If ICE changes the transport address where media is received, this change
is reflected in an updated offer that changes the default destination for
media to match ICE's selection. As such, it appears like any other re-INVITE would,
and is fully treated in RFCs 3312 and 4032, which apply without regard to the fact
that the destination for media is changing due to ICE negotiations occurring
"in the background".<a class="pilcrow" href="#section-7.4-1">Â¶</a></p>
<p id="section-7.4-2">
Indeed, an agent <span class="bcp14">SHOULD NOT</span> indicate that QoS preconditions have been met
until the checks have completed and selected the candidate pairs to be used for media.<a class="pilcrow" href="#section-7.4-2">Â¶</a></p>
<p id="section-7.4-3">
ICE also has interactions with connectivity preconditions <span>[<a class="xref" href="#RFC5898">RFC5898</a>]</span>.
Those interactions are described there.
 Note that the procedures described in <a class="xref" href="#sec-latency">Section 7.1</a> describe their own type of "preconditions", albeit with less functionality than those provided by the explicit preconditions in <span>[<a class="xref" href="#RFC5898">RFC5898</a>]</span>.<a class="pilcrow" href="#section-7.4-3">Â¶</a></p>
</section>
<section id="section-7.5">
        <h3 id="name-interactions-with-third-par">
<a class="section-number selfRef" href="#section-7.5">7.5. </a><a class="section-name selfRef" href="#name-interactions-with-third-par">Interactions with Third Party Call Control</a>
        </h3>
<p id="section-7.5-1">
ICE works with Flows I, III, and IV as described in <span>[<a class="xref" href="#RFC3725">RFC3725</a>]</span>.
Flow I works without the controller supporting or being aware of ICE.
Flow IV will work as long as the controller passes along the ICE attributes without alteration.
Flow II is fundamentally incompatible with ICE; each agent will believe itself to be the answerer and thus never generate a re-INVITE.<a class="pilcrow" href="#section-7.5-1">Â¶</a></p>
<p id="section-7.5-2">
The flows for continued operation, as described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc3725#section-7">Section 7</a> of [<a class="xref" href="#RFC3725">RFC3725</a>]</span>, 
require additional behavior of ICE implementations to support.
In particular, if an agent receives a mid-dialog re-INVITE that contains no offer, it <span class="bcp14">MUST</span> restart ICE for each data stream and go through the process of gathering new candidates.
Furthermore, that list of candidates <span class="bcp14">SHOULD</span> include the ones currently being used for media.<a class="pilcrow" href="#section-7.5-2">Â¶</a></p>
</section>
</section>
<div id="sec-alg-sip">
<section id="section-8">
      <h2 id="name-interactions-with-applicati">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-interactions-with-applicati">Interactions with Application Layer Gateways and SIP</a>
      </h2>
<p id="section-8-1">
        Application Layer Gateways (ALGs) are functions present in a Network Address Translation (NAT)
        device that inspect the contents of packets and modify them, in order to facilitate NAT traversal
        for application protocols. Session Border Controllers (SBCs) are close cousins of ALGs, but are
        less transparent since they actually exist as application-layer SIP intermediaries. ICE has
        interactions with SBCs and ALGs.<a class="pilcrow" href="#section-8-1">Â¶</a></p>
<p id="section-8-2">
        If an ALG is SIP aware but not ICE aware, ICE will work through it as long as the ALG correctly
        modifies the SDP. A correct ALG implementation behaves as follows:<a class="pilcrow" href="#section-8-2">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-3.1">
            The ALG does not modify the "m=" and "c=" lines or the "rtcp" attribute if they contain
            external addresses.<a class="pilcrow" href="#section-8-3.1">Â¶</a>
</li>
        <li class="normal" id="section-8-3.2">
          <p id="section-8-3.2.1">
            If the "m=" and "c=" lines contain internal addresses, the modification depends on the state of the ALG:<a class="pilcrow" href="#section-8-3.2.1">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-3.2.2.1">
                If the ALG already has a binding established that maps an external port to an internal connection
                address and port matching the values in the "m=" and "c=" lines or "rtcp" attribute, the ALG uses that
                binding instead of creating a new one.<a class="pilcrow" href="#section-8-3.2.2.1">Â¶</a>
</li>
            <li class="normal" id="section-8-3.2.2.2">
                If the ALG does not already have a binding, it creates a new one and modifies the SDP, rewriting
                the "m=" and "c=" lines and "rtcp" attribute.<a class="pilcrow" href="#section-8-3.2.2.2">Â¶</a>
</li>
          </ul>
</li>
      </ul>
<p id="section-8-4">
        Unfortunately, many ALGs are known to work poorly in these corner cases.
        ICE does not try to work around broken ALGs, as this is outside the scope of its functionality.
        ICE can help diagnose these conditions, which often show up as a mismatch between the set of candidates and
        the "m=" and "c=" lines and "rtcp" attributes. The "ice-mismatch" attribute is used for this purpose.<a class="pilcrow" href="#section-8-4">Â¶</a></p>
<p id="section-8-5">
        ICE works best through ALGs when the signaling is run over TLS.
        This prevents the ALG from manipulating the SDP messages and interfering with ICE operation.
        Implementations that are expected to be deployed behind ALGs <span class="bcp14">SHOULD</span> provide for TLS transport of the SDP.<a class="pilcrow" href="#section-8-5">Â¶</a></p>
<p id="section-8-6">
        If an SBC is SIP aware but not ICE aware, the result depends on the behavior of the SBC.
        If it is acting as a proper Back-to-Back User Agent (B2BUA), the SBC will remove any SDP attributes
        it doesn't understand, including the ICE attributes. Consequently, the call will appear to both
        endpoints as if the other side doesn't support ICE. This will result in ICE being disabled, and
        media flowing through the SBC, if the SBC has requested it. If, however, the SBC passes the ICE attributes
        without modification, yet modifies the default destination for media (contained in the "m=" and "c=" lines
        and "rtcp" attribute), this will be detected as an ICE mismatch, and ICE processing is aborted for the call.
        It is outside of the scope of ICE for it to act as a tool for "working around" SBCs.
        If one is present, ICE will not be used and the SBC techniques take precedence.<a class="pilcrow" href="#section-8-6">Â¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-9-1">
        The generic ICE security considerations are defined in <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span>, and the 
        generic SDP offer/answer security considerations are defined in <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span>. These 
        security considerations also apply to implementations of this document.<a class="pilcrow" href="#section-9-1">Â¶</a></p>
<section id="section-9.1">
        <h3 id="name-ip-address-privacy">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-ip-address-privacy">IP Address Privacy</a>
        </h3>
<p id="section-9.1-1">
          In some cases, e.g., for privacy reasons, an agent may not want to reveal the related
          address and port. In this case the address <span class="bcp14">MUST</span> be set to "0.0.0.0" (for IPv4 candidates)
          or "::" (for IPv6 candidates) and the port to '9'.<a class="pilcrow" href="#section-9.1-1">Â¶</a></p>
</section>
<section id="section-9.2">
        <h3 id="name-attacks-on-the-offer-answer">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-attacks-on-the-offer-answer">Attacks on the Offer/Answer Exchanges</a>
        </h3>
<p id="section-9.2-1">
          An attacker that can modify or disrupt the offer/answer exchanges themselves can readily
          launch a variety of attacks with ICE. They could direct media to a target of a DoS attack,
          they could insert themselves into the data stream, and so on. These are similar to the general
          security considerations for offer/answer exchanges, and the security considerations in
          <span>[<a class="xref" href="#RFC3264">RFC3264</a>]</span> apply. These require techniques for message integrity and encryption
          for offers and answers, which are satisfied by the TLS mechanism <span>[<a class="xref" href="#RFC3261">RFC3261</a>]</span> when
          SIP is used. As such, the usage of TLS with ICE is <span class="bcp14">RECOMMENDED</span>.<a class="pilcrow" href="#section-9.2-1">Â¶</a></p>
</section>
<div id="sec-voice-hammer">
<section id="section-9.3">
        <h3 id="name-the-voice-hammer-attack">
<a class="section-number selfRef" href="#section-9.3">9.3. </a><a class="section-name selfRef" href="#name-the-voice-hammer-attack">The Voice Hammer Attack</a>
        </h3>
<p id="section-9.3-1">
          The voice hammer attack is an amplification attack, and can be triggered even if the attacker
          is an authenticated and valid participant in a session.
          In this attack, the attacker initiates sessions to other agents, and maliciously includes
          the connection address and port of a DoS target as the destination for media traffic
          signaled in the SDP. This causes substantial amplification; a single offer/answer exchange
          can create a continuing flood of media packets, possibly at high rates (consider video sources).
          The use of ICE can help to prevent against this attack.<a class="pilcrow" href="#section-9.3-1">Â¶</a></p>
<p id="section-9.3-2">
          Specifically, if ICE is used, the agent receiving the malicious SDP will first perform connectivity
          checks to the target of media before sending media there. If this target is a third-party host, the
          checks will not succeed, and media is never sent.  The ICE extension defined in <span>[<a class="xref" href="#RFC7675">RFC7675</a>]</span>
          can be used to further protect against voice hammer attacks.<a class="pilcrow" href="#section-9.3-2">Â¶</a></p>
<p id="section-9.3-3">
          Unfortunately, ICE doesn't help if it's not used, in which case an attacker could simply
          send the offer without the ICE parameters. However, in environments where the set of clients is known,
          and is limited to ones that support ICE, the server can reject any offers or answers that don't
          indicate ICE support.<a class="pilcrow" href="#section-9.3-3">Â¶</a></p>
<p id="section-9.3-4">
          SIP user agents (UA) <span>[<a class="xref" href="#RFC3261">RFC3261</a>]</span> that are not willing to receive non-ICE answers <span class="bcp14">MUST</span> include
          an "ice" option tag <span>[<a class="xref" href="#RFC5768">RFC5768</a>]</span> in the SIP Require header field in their offer. UAs that
          reject non-ICE offers will generally use a 421 response code, together with an option tag "ice" in the
          Require header field in the response.<a class="pilcrow" href="#section-9.3-4">Â¶</a></p>
</section>
</div>
</section>
<div id="iana">
<section id="section-10">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-sdp-attributes">
<a class="section-number selfRef" href="#section-10.1">10.1. </a><a class="section-name selfRef" href="#name-sdp-attributes">SDP Attributes</a>
        </h3>
<p id="section-10.1-1">
The original ICE specification defined seven new SDP attributes per the procedures of
<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc4566#section-8.2.4">Section 8.2.4</a> of [<a class="xref" href="#RFC4566">RFC4566</a>]</span>. 
The registration information from the original specification
is included here with modifications to include Mux Category <span>[<a class="xref" href="#RFC8859">RFC8859</a>]</span> 
and also defines a new SDP attribute "ice-pacing".<a class="pilcrow" href="#section-10.1-1">Â¶</a></p>
<section id="section-10.1.1">
          <h4 id="name-candidate-attribute-2">
<a class="section-number selfRef" href="#section-10.1.1">10.1.1. </a><a class="section-name selfRef" href="#name-candidate-attribute-2">"candidate" Attribute</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-10.1.1-1">
            <dt id="section-10.1.1-1.1">Attribute Name:</dt>
            <dd id="section-10.1.1-1.2" style="margin-left: 1.5em">
candidate<a class="pilcrow" href="#section-10.1.1-1.2">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.1-1.3">Type of Attribute:</dt>
            <dd id="section-10.1.1-1.4" style="margin-left: 1.5em">
media-level<a class="pilcrow" href="#section-10.1.1-1.4">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.1-1.5">Subject to charset:</dt>
            <dd id="section-10.1.1-1.6" style="margin-left: 1.5em">
No<a class="pilcrow" href="#section-10.1.1-1.6">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.1-1.7">Purpose:</dt>
            <dd id="section-10.1.1-1.8" style="margin-left: 1.5em">
This attribute is used with Interactive Connectivity Establishment (ICE),
and provides one of many possible candidate addresses for communication.
These addresses are validated with an end-to-end connectivity check using Session
Traversal Utilities for NAT (STUN).<a class="pilcrow" href="#section-10.1.1-1.8">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.1-1.9">Appropriate Values:</dt>
            <dd id="section-10.1.1-1.10" style="margin-left: 1.5em">
See <a class="xref" href="#sec-grammar">Section 5</a> of RFC 8839.<a class="pilcrow" href="#section-10.1.1-1.10">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.1-1.11">Contact Name:</dt>
            <dd id="section-10.1.1-1.12" style="margin-left: 1.5em">
IESG<a class="pilcrow" href="#section-10.1.1-1.12">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.1-1.13">Contact Email:</dt>
            <dd id="section-10.1.1-1.14" style="margin-left: 1.5em">
                iesg@ietf.org<a class="pilcrow" href="#section-10.1.1-1.14">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.1-1.15">Reference:</dt>
            <dd id="section-10.1.1-1.16" style="margin-left: 1.5em">
RFC 8839<a class="pilcrow" href="#section-10.1.1-1.16">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.1-1.17">Mux Category:</dt>
            <dd id="section-10.1.1-1.18" style="margin-left: 1.5em">
TRANSPORT<a class="pilcrow" href="#section-10.1.1-1.18">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-10.1.2">
          <h4 id="name-remote-candidates-attribute-2">
<a class="section-number selfRef" href="#section-10.1.2">10.1.2. </a><a class="section-name selfRef" href="#name-remote-candidates-attribute-2">"remote-candidates" Attribute</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-10.1.2-1">
            <dt id="section-10.1.2-1.1">Attribute Name:</dt>
            <dd id="section-10.1.2-1.2" style="margin-left: 1.5em">
remote-candidates<a class="pilcrow" href="#section-10.1.2-1.2">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-1.3">Type of Attribute:</dt>
            <dd id="section-10.1.2-1.4" style="margin-left: 1.5em">
media-level<a class="pilcrow" href="#section-10.1.2-1.4">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-1.5">Subject to charset:</dt>
            <dd id="section-10.1.2-1.6" style="margin-left: 1.5em">
No<a class="pilcrow" href="#section-10.1.2-1.6">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-1.7">Purpose:</dt>
            <dd id="section-10.1.2-1.8" style="margin-left: 1.5em">
This attribute is used with Interactive Connectivity Establishment (ICE),
and provides the identity of the remote candidates that the offerer wishes the answerer
to use in its answer.<a class="pilcrow" href="#section-10.1.2-1.8">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-1.9">Appropriate Values:</dt>
            <dd id="section-10.1.2-1.10" style="margin-left: 1.5em">
See <a class="xref" href="#sec-grammar">Section 5</a> of RFC 8839.<a class="pilcrow" href="#section-10.1.2-1.10">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-1.11">Contact Name:</dt>
            <dd id="section-10.1.2-1.12" style="margin-left: 1.5em">
IESG<a class="pilcrow" href="#section-10.1.2-1.12">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-1.13">Contact Email:</dt>
            <dd id="section-10.1.2-1.14" style="margin-left: 1.5em">
                iesg@ietf.org<a class="pilcrow" href="#section-10.1.2-1.14">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-1.15">Reference:</dt>
            <dd id="section-10.1.2-1.16" style="margin-left: 1.5em">
RFC 8839<a class="pilcrow" href="#section-10.1.2-1.16">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.2-1.17">Mux Category:</dt>
            <dd id="section-10.1.2-1.18" style="margin-left: 1.5em">
TRANSPORT<a class="pilcrow" href="#section-10.1.2-1.18">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-10.1.3">
          <h4 id="name-ice-lite-attribute">
<a class="section-number selfRef" href="#section-10.1.3">10.1.3. </a><a class="section-name selfRef" href="#name-ice-lite-attribute">"ice-lite" Attribute</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-10.1.3-1">
            <dt id="section-10.1.3-1.1">Attribute Name:</dt>
            <dd id="section-10.1.3-1.2" style="margin-left: 1.5em">
ice-lite<a class="pilcrow" href="#section-10.1.3-1.2">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.3-1.3">Type of Attribute:</dt>
            <dd id="section-10.1.3-1.4" style="margin-left: 1.5em">
session-level<a class="pilcrow" href="#section-10.1.3-1.4">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.3-1.5">Subject to charset:</dt>
            <dd id="section-10.1.3-1.6" style="margin-left: 1.5em">
No<a class="pilcrow" href="#section-10.1.3-1.6">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.3-1.7">Purpose:</dt>
            <dd id="section-10.1.3-1.8" style="margin-left: 1.5em">
This attribute is used with Interactive Connectivity Establishment (ICE),
and indicates that an agent has the minimum functionality required to support ICE
inter-operation with a peer that has a full implementation.<a class="pilcrow" href="#section-10.1.3-1.8">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.3-1.9">Appropriate Values:</dt>
            <dd id="section-10.1.3-1.10" style="margin-left: 1.5em">
See <a class="xref" href="#sec-grammar">Section 5</a> of RFC 8839.<a class="pilcrow" href="#section-10.1.3-1.10">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.3-1.11">Contact Name:</dt>
            <dd id="section-10.1.3-1.12" style="margin-left: 1.5em">
IESG<a class="pilcrow" href="#section-10.1.3-1.12">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.3-1.13">Contact Email:</dt>
            <dd id="section-10.1.3-1.14" style="margin-left: 1.5em">
                iesg@ietf.org<a class="pilcrow" href="#section-10.1.3-1.14">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.3-1.15">Reference:</dt>
            <dd id="section-10.1.3-1.16" style="margin-left: 1.5em">
RFC 8839<a class="pilcrow" href="#section-10.1.3-1.16">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.3-1.17">Mux Category:</dt>
            <dd id="section-10.1.3-1.18" style="margin-left: 1.5em">
NORMAL<a class="pilcrow" href="#section-10.1.3-1.18">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-10.1.4">
          <h4 id="name-ice-mismatch-attribute">
<a class="section-number selfRef" href="#section-10.1.4">10.1.4. </a><a class="section-name selfRef" href="#name-ice-mismatch-attribute">"ice-mismatch" Attribute</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-10.1.4-1">
            <dt id="section-10.1.4-1.1">Attribute Name:</dt>
            <dd id="section-10.1.4-1.2" style="margin-left: 1.5em">
ice-mismatch<a class="pilcrow" href="#section-10.1.4-1.2">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.4-1.3">Type of Attribute:</dt>
            <dd id="section-10.1.4-1.4" style="margin-left: 1.5em">
media-level<a class="pilcrow" href="#section-10.1.4-1.4">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.4-1.5">Subject to charset:</dt>
            <dd id="section-10.1.4-1.6" style="margin-left: 1.5em">
No<a class="pilcrow" href="#section-10.1.4-1.6">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.4-1.7">Purpose:</dt>
            <dd id="section-10.1.4-1.8" style="margin-left: 1.5em">
This attribute is used with Interactive Connectivity Establishment (ICE), and indicates that an agent is ICE capable, but did not proceed with ICE due to a mismatch of candidates with the default destination for media signaled in the SDP.<a class="pilcrow" href="#section-10.1.4-1.8">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.4-1.9">Appropriate Values:</dt>
            <dd id="section-10.1.4-1.10" style="margin-left: 1.5em">
See <a class="xref" href="#sec-grammar">Section 5</a> of RFC 8839.<a class="pilcrow" href="#section-10.1.4-1.10">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.4-1.11">Contact Name:</dt>
            <dd id="section-10.1.4-1.12" style="margin-left: 1.5em">
IESG<a class="pilcrow" href="#section-10.1.4-1.12">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.4-1.13">Contact e-mail:</dt>
            <dd id="section-10.1.4-1.14" style="margin-left: 1.5em">
                iesg@ietf.org<a class="pilcrow" href="#section-10.1.4-1.14">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.4-1.15">Reference:</dt>
            <dd id="section-10.1.4-1.16" style="margin-left: 1.5em">
RFC 8839<a class="pilcrow" href="#section-10.1.4-1.16">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.4-1.17">Mux Category:</dt>
            <dd id="section-10.1.4-1.18" style="margin-left: 1.5em">
NORMAL<a class="pilcrow" href="#section-10.1.4-1.18">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-10.1.5">
          <h4 id="name-ice-pwd-attribute">
<a class="section-number selfRef" href="#section-10.1.5">10.1.5. </a><a class="section-name selfRef" href="#name-ice-pwd-attribute">"ice-pwd" Attribute</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-10.1.5-1">
            <dt id="section-10.1.5-1.1">Attribute Name:</dt>
            <dd id="section-10.1.5-1.2" style="margin-left: 1.5em">
ice-pwd<a class="pilcrow" href="#section-10.1.5-1.2">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.5-1.3">Type of Attribute:</dt>
            <dd id="section-10.1.5-1.4" style="margin-left: 1.5em">
session- or media-level<a class="pilcrow" href="#section-10.1.5-1.4">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.5-1.5">Subject to charset:</dt>
            <dd id="section-10.1.5-1.6" style="margin-left: 1.5em">
No<a class="pilcrow" href="#section-10.1.5-1.6">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.5-1.7">Purpose:</dt>
            <dd id="section-10.1.5-1.8" style="margin-left: 1.5em">
This attribute is used with Interactive Connectivity Establishment (ICE),
and provides the password used to protect STUN connectivity checks.<a class="pilcrow" href="#section-10.1.5-1.8">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.5-1.9">Appropriate Values:</dt>
            <dd id="section-10.1.5-1.10" style="margin-left: 1.5em">
See <a class="xref" href="#sec-grammar">Section 5</a> of RFC 8839.<a class="pilcrow" href="#section-10.1.5-1.10">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.5-1.11">Contact Name:</dt>
            <dd id="section-10.1.5-1.12" style="margin-left: 1.5em">
IESG<a class="pilcrow" href="#section-10.1.5-1.12">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.5-1.13">Contact e-mail:</dt>
            <dd id="section-10.1.5-1.14" style="margin-left: 1.5em">
                iesg@ietf.org<a class="pilcrow" href="#section-10.1.5-1.14">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.5-1.15">Reference:</dt>
            <dd id="section-10.1.5-1.16" style="margin-left: 1.5em">
RFC 8839<a class="pilcrow" href="#section-10.1.5-1.16">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.5-1.17">Mux Category:</dt>
            <dd id="section-10.1.5-1.18" style="margin-left: 1.5em">
TRANSPORT<a class="pilcrow" href="#section-10.1.5-1.18">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-10.1.6">
          <h4 id="name-ice-ufrag-attribute">
<a class="section-number selfRef" href="#section-10.1.6">10.1.6. </a><a class="section-name selfRef" href="#name-ice-ufrag-attribute">"ice-ufrag" Attribute</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-10.1.6-1">
            <dt id="section-10.1.6-1.1">Attribute Name:</dt>
            <dd id="section-10.1.6-1.2" style="margin-left: 1.5em">
ice-ufrag<a class="pilcrow" href="#section-10.1.6-1.2">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.6-1.3">Type of Attribute:</dt>
            <dd id="section-10.1.6-1.4" style="margin-left: 1.5em">
session- or media-level<a class="pilcrow" href="#section-10.1.6-1.4">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.6-1.5">Subject to charset:</dt>
            <dd id="section-10.1.6-1.6" style="margin-left: 1.5em">
No<a class="pilcrow" href="#section-10.1.6-1.6">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.6-1.7">Purpose:</dt>
            <dd id="section-10.1.6-1.8" style="margin-left: 1.5em">
This attribute is used with Interactive Connectivity Establishment (ICE),
and provides the fragments used to construct the username in STUN connectivity checks.<a class="pilcrow" href="#section-10.1.6-1.8">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.6-1.9">Appropriate Values:</dt>
            <dd id="section-10.1.6-1.10" style="margin-left: 1.5em">
See <a class="xref" href="#sec-grammar">Section 5</a> of RFC 8839.<a class="pilcrow" href="#section-10.1.6-1.10">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.6-1.11">Contact Name:</dt>
            <dd id="section-10.1.6-1.12" style="margin-left: 1.5em">
IESG<a class="pilcrow" href="#section-10.1.6-1.12">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.6-1.13">Contact e-mail:</dt>
            <dd id="section-10.1.6-1.14" style="margin-left: 1.5em">
                iesg@ietf.org<a class="pilcrow" href="#section-10.1.6-1.14">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.6-1.15">Reference:</dt>
            <dd id="section-10.1.6-1.16" style="margin-left: 1.5em">
RFC 8839<a class="pilcrow" href="#section-10.1.6-1.16">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.6-1.17">Mux Category:</dt>
            <dd id="section-10.1.6-1.18" style="margin-left: 1.5em">
TRANSPORT<a class="pilcrow" href="#section-10.1.6-1.18">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-10.1.7">
          <h4 id="name-ice-options-attribute-2">
<a class="section-number selfRef" href="#section-10.1.7">10.1.7. </a><a class="section-name selfRef" href="#name-ice-options-attribute-2">"ice-options" Attribute</a>
          </h4>
<span class="break"></span><dl class="dlParallel" id="section-10.1.7-1">
            <dt id="section-10.1.7-1.1">Attribute Name:</dt>
            <dd id="section-10.1.7-1.2" style="margin-left: 1.5em">
ice-options<a class="pilcrow" href="#section-10.1.7-1.2">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.3">Long Form:</dt>
            <dd id="section-10.1.7-1.4" style="margin-left: 1.5em">
ice-options<a class="pilcrow" href="#section-10.1.7-1.4">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.5">Type of Attribute:</dt>
            <dd id="section-10.1.7-1.6" style="margin-left: 1.5em">
session-level<a class="pilcrow" href="#section-10.1.7-1.6">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.7">Subject to charset:</dt>
            <dd id="section-10.1.7-1.8" style="margin-left: 1.5em">
No<a class="pilcrow" href="#section-10.1.7-1.8">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.9">Purpose:</dt>
            <dd id="section-10.1.7-1.10" style="margin-left: 1.5em">
This attribute is used with Interactive Connectivity Establishment (ICE),
and indicates the ICE options or extensions used by the agent.<a class="pilcrow" href="#section-10.1.7-1.10">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.11">Appropriate Values:</dt>
            <dd id="section-10.1.7-1.12" style="margin-left: 1.5em">
See <a class="xref" href="#sec-grammar">Section 5</a> of RFC 8839.<a class="pilcrow" href="#section-10.1.7-1.12">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.13">Contact Name:</dt>
            <dd id="section-10.1.7-1.14" style="margin-left: 1.5em">
IESG<a class="pilcrow" href="#section-10.1.7-1.14">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.15">Contact e-mail:</dt>
            <dd id="section-10.1.7-1.16" style="margin-left: 1.5em">
                iesg@ietf.org<a class="pilcrow" href="#section-10.1.7-1.16">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.17">Reference:</dt>
            <dd id="section-10.1.7-1.18" style="margin-left: 1.5em">
RFC 8839<a class="pilcrow" href="#section-10.1.7-1.18">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.7-1.19">Mux Category:</dt>
            <dd id="section-10.1.7-1.20" style="margin-left: 1.5em">
NORMAL<a class="pilcrow" href="#section-10.1.7-1.20">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
<section id="section-10.1.8">
          <h4 id="name-ice-pacing-attribute-2">
<a class="section-number selfRef" href="#section-10.1.8">10.1.8. </a><a class="section-name selfRef" href="#name-ice-pacing-attribute-2">"ice-pacing" Attribute</a>
          </h4>
<p id="section-10.1.8-1">
This specification also defines a new SDP attribute, "ice-pacing", according
to the following data:<a class="pilcrow" href="#section-10.1.8-1">Â¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-10.1.8-2">
            <dt id="section-10.1.8-2.1">Attribute Name:</dt>
            <dd id="section-10.1.8-2.2" style="margin-left: 1.5em">
ice-pacing<a class="pilcrow" href="#section-10.1.8-2.2">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.8-2.3">Type of Attribute:</dt>
            <dd id="section-10.1.8-2.4" style="margin-left: 1.5em">
session-level<a class="pilcrow" href="#section-10.1.8-2.4">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.8-2.5">Subject to charset:</dt>
            <dd id="section-10.1.8-2.6" style="margin-left: 1.5em">
No<a class="pilcrow" href="#section-10.1.8-2.6">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.8-2.7">Purpose:</dt>
            <dd id="section-10.1.8-2.8" style="margin-left: 1.5em">
This attribute is used with Interactive Connectivity Establishment (ICE)
to indicate desired connectivity check pacing values.<a class="pilcrow" href="#section-10.1.8-2.8">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.8-2.9">Appropriate Values:</dt>
            <dd id="section-10.1.8-2.10" style="margin-left: 1.5em">
See <a class="xref" href="#sec-grammar">Section 5</a> of RFC 8839.<a class="pilcrow" href="#section-10.1.8-2.10">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.8-2.11">Contact Name:</dt>
            <dd id="section-10.1.8-2.12" style="margin-left: 1.5em">
IESG<a class="pilcrow" href="#section-10.1.8-2.12">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.8-2.13">Contact e-mail:</dt>
            <dd id="section-10.1.8-2.14" style="margin-left: 1.5em">
                iesg@ietf.org<a class="pilcrow" href="#section-10.1.8-2.14">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.8-2.15">Reference:</dt>
            <dd id="section-10.1.8-2.16" style="margin-left: 1.5em">
RFC 8839<a class="pilcrow" href="#section-10.1.8-2.16">Â¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-10.1.8-2.17">Mux Category:</dt>
            <dd id="section-10.1.8-2.18" style="margin-left: 1.5em">
NORMAL<a class="pilcrow" href="#section-10.1.8-2.18">Â¶</a>
</dd>
          <dd class="break"></dd>
</dl>
</section>
</section>
<div id="sec-iana-ice-options">
<section id="section-10.2">
        <h3 id="name-interactive-connectivity-es">
<a class="section-number selfRef" href="#section-10.2">10.2. </a><a class="section-name selfRef" href="#name-interactive-connectivity-es">Interactive Connectivity Establishment (ICE) Options Registry</a>
        </h3>
<p id="section-10.2-1">
IANA maintains a registry for "ice-options" identifiers under the Specification
Required policy as defined in "Guidelines for Writing an IANA Considerations
Section in RFCs" <span>[<a class="xref" href="#RFC8126">RFC8126</a>]</span>.<a class="pilcrow" href="#section-10.2-1">Â¶</a></p>
<p id="section-10.2-2">
ICE options are of unlimited length according to the syntax in
<a class="xref" href="#sec-ice-options">Section 5.6</a>; however, they are <span class="bcp14">RECOMMENDED</span> to be no longer
than 20 characters. This is to reduce message sizes and allow for
efficient parsing. ICE options are defined at the session level.<a class="pilcrow" href="#section-10.2-2">Â¶</a></p>
<p id="section-10.2-3">
A registration request <span class="bcp14">MUST</span> include the following information:<a class="pilcrow" href="#section-10.2-3">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.2-4.1">
The ICE option identifier to be registered<a class="pilcrow" href="#section-10.2-4.1">Â¶</a>
</li>
          <li class="normal" id="section-10.2-4.2">
Name and email address of organization or individuals having change control<a class="pilcrow" href="#section-10.2-4.2">Â¶</a>
</li>
          <li class="normal" id="section-10.2-4.3">
Short description of the ICE extension to which the option relates<a class="pilcrow" href="#section-10.2-4.3">Â¶</a>
</li>
          <li class="normal" id="section-10.2-4.4">
Reference(s) to the specification defining the ICE option and the related extensions<a class="pilcrow" href="#section-10.2-4.4">Â¶</a>
</li>
        </ul>
</section>
</div>
<div id="sec-iana-cand-ext">
<section id="section-10.3">
        <h3 id="name-candidate-attribute-extensi">
<a class="section-number selfRef" href="#section-10.3">10.3. </a><a class="section-name selfRef" href="#name-candidate-attribute-extensi">Candidate Attribute Extension Subregistry Establishment</a>
        </h3>
<p id="section-10.3-1">
          This section creates a new subregistry, "Candidate Attribute
   Extensions", under the SDP Parameters
          registry: <span><a href="http://www.iana.org/assignments/sdp-parameters">http://www.iana.org/assignments/sdp-parameters</a></span>.<a class="pilcrow" href="#section-10.3-1">Â¶</a></p>
<p id="section-10.3-2">
          The purpose of the subregistry is to register SDP "candidate" attribute extensions.<a class="pilcrow" href="#section-10.3-2">Â¶</a></p>
<p id="section-10.3-3">
          When a "candidate" extension is registered in the subregistry, it needs to meet the "Specification Required"
          policies defined in <span>[<a class="xref" href="#RFC8126">RFC8126</a>]</span>.<a class="pilcrow" href="#section-10.3-3">Â¶</a></p>
<p id="section-10.3-4">
          "candidate" attribute extensions <span class="bcp14">MUST</span> follow the 'cand-extension' syntax. The attribute extension
          name <span class="bcp14">MUST</span> follow the 'extension-att-name' syntax, and the attribute extension value <span class="bcp14">MUST</span> follow the
          'extension-att-value' syntax.<a class="pilcrow" href="#section-10.3-4">Â¶</a></p>
<p id="section-10.3-5">
          A registration request <span class="bcp14">MUST</span> include the following information:<a class="pilcrow" href="#section-10.3-5">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.3-6.1">
              The name of the attribute extension.<a class="pilcrow" href="#section-10.3-6.1">Â¶</a>
</li>
          <li class="normal" id="section-10.3-6.2">
Name and email address of organization or individuals having change control<a class="pilcrow" href="#section-10.3-6.2">Â¶</a>
</li>
          <li class="normal" id="section-10.3-6.3">
              A short description of the attribute extension.<a class="pilcrow" href="#section-10.3-6.3">Â¶</a>
</li>
          <li class="normal" id="section-10.3-6.4">
              A reference to a specification that describes the semantics, usage and possible
              values of the attribute extension.<a class="pilcrow" href="#section-10.3-6.4">Â¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sec.5245">
<section id="section-11">
      <h2 id="name-changes-from-rfc-5245">
<a class="section-number selfRef" href="#section-11">11. </a><a class="section-name selfRef" href="#name-changes-from-rfc-5245">Changes from RFC 5245</a>
      </h2>
<p id="section-11-1">
      <span>[<a class="xref" href="#RFC8445">RFC8445</a>]</span> describes the changes made to the
      common SIP procedures, including removal of aggressive nomination,
      modifying the procedures for calculating candidate pair states, 
      scheduling connectivity checks, and the calculation of timer values.<a class="pilcrow" href="#section-11-1">Â¶</a></p>
<p id="section-11-2">
      This document defines the following SDP offer/answer specific changes:<a class="pilcrow" href="#section-11-2">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-11-3.1">SDP offer/answer realization and usage of 'ice2' option.<a class="pilcrow" href="#section-11-3.1">Â¶</a>
</li>
        <li class="normal" id="section-11-3.2">Definition and usage of SDP "ice-pacing" attribute.<a class="pilcrow" href="#section-11-3.2">Â¶</a>
</li>
        <li class="normal" id="section-11-3.3">Explicit text that an ICE agent must not generate candidates with FQDNs, and 
        must discard such candidates if received from the peer agent.<a class="pilcrow" href="#section-11-3.3">Â¶</a>
</li>
        <li class="normal" id="section-11-3.4">Relax requirement to include SDP "rtcp" attribute.<a class="pilcrow" href="#section-11-3.4">Â¶</a>
</li>
        <li class="normal" id="section-11-3.5">Generic clarifications of SDP offer/answer procedures.<a class="pilcrow" href="#section-11-3.5">Â¶</a>
</li>
        <li class="normal" id="section-11-3.6">ICE mismatch is now optional, and an agent has an option to not
            trigger mismatch and instead treat the default candidate as an
            additional candidate.<a class="pilcrow" href="#section-11-3.6">Â¶</a>
</li>
        <li class="normal" id="section-11-3.7">FQDNs and "0.0.0.0"/"::" IP addresses with port "9" default
            candidates do not trigger ICE mismatch.<a class="pilcrow" href="#section-11-3.7">Â¶</a>
</li>
      </ul>
</section>
</div>
<section id="section-12">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-12">12. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-12.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-12.1">12.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3261">[RFC3261]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span><span class="refAuthor">, Schulzrinne, H.</span><span class="refAuthor">, Camarillo, G.</span><span class="refAuthor">, Johnston, A.</span><span class="refAuthor">, Peterson, J.</span><span class="refAuthor">, Sparks, R.</span><span class="refAuthor">, Handley, M.</span><span class="refAuthor">, and E. Schooler</span>, <span class="refTitle">"SIP: Session Initiation Protocol"</span>, <span class="seriesInfo">RFC 3261</span>, <span class="seriesInfo">DOI 10.17487/RFC3261</span>, <time class="refDate" datetime="2002-06">June 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3261">https://www.rfc-editor.org/info/rfc3261</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3262">[RFC3262]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span><span class="refAuthor"> and H. Schulzrinne</span>, <span class="refTitle">"Reliability of Provisional Responses in Session Initiation Protocol (SIP)"</span>, <span class="seriesInfo">RFC 3262</span>, <span class="seriesInfo">DOI 10.17487/RFC3262</span>, <time class="refDate" datetime="2002-06">June 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3262">https://www.rfc-editor.org/info/rfc3262</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3264">[RFC3264]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span><span class="refAuthor"> and H. Schulzrinne</span>, <span class="refTitle">"An Offer/Answer Model with Session Description Protocol (SDP)"</span>, <span class="seriesInfo">RFC 3264</span>, <span class="seriesInfo">DOI 10.17487/RFC3264</span>, <time class="refDate" datetime="2002-06">June 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3264">https://www.rfc-editor.org/info/rfc3264</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3312">[RFC3312]</dt>
        <dd>
<span class="refAuthor">Camarillo, G., Ed.</span><span class="refAuthor">, Marshall, W., Ed.</span><span class="refAuthor">, and J. Rosenberg</span>, <span class="refTitle">"Integration of Resource Management and Session Initiation Protocol (SIP)"</span>, <span class="seriesInfo">RFC 3312</span>, <span class="seriesInfo">DOI 10.17487/RFC3312</span>, <time class="refDate" datetime="2002-10">October 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3312">https://www.rfc-editor.org/info/rfc3312</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3556">[RFC3556]</dt>
        <dd>
<span class="refAuthor">Casner, S.</span>, <span class="refTitle">"Session Description Protocol (SDP) Bandwidth Modifiers for RTP Control Protocol (RTCP) Bandwidth"</span>, <span class="seriesInfo">RFC 3556</span>, <span class="seriesInfo">DOI 10.17487/RFC3556</span>, <time class="refDate" datetime="2003-07">July 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3556">https://www.rfc-editor.org/info/rfc3556</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3605">[RFC3605]</dt>
        <dd>
<span class="refAuthor">Huitema, C.</span>, <span class="refTitle">"Real Time Control Protocol (RTCP) attribute in Session Description Protocol (SDP)"</span>, <span class="seriesInfo">RFC 3605</span>, <span class="seriesInfo">DOI 10.17487/RFC3605</span>, <time class="refDate" datetime="2003-10">October 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3605">https://www.rfc-editor.org/info/rfc3605</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4032">[RFC4032]</dt>
        <dd>
<span class="refAuthor">Camarillo, G.</span><span class="refAuthor"> and P. Kyzivat</span>, <span class="refTitle">"Update to the Session Initiation Protocol (SIP) Preconditions Framework"</span>, <span class="seriesInfo">RFC 4032</span>, <span class="seriesInfo">DOI 10.17487/RFC4032</span>, <time class="refDate" datetime="2005-03">March 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4032">https://www.rfc-editor.org/info/rfc4032</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4566">[RFC4566]</dt>
        <dd>
<span class="refAuthor">Handley, M.</span><span class="refAuthor">, Jacobson, V.</span><span class="refAuthor">, and C. Perkins</span>, <span class="refTitle">"SDP: Session Description Protocol"</span>, <span class="seriesInfo">RFC 4566</span>, <span class="seriesInfo">DOI 10.17487/RFC4566</span>, <time class="refDate" datetime="2006-07">July 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4566">https://www.rfc-editor.org/info/rfc4566</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5234">[RFC5234]</dt>
        <dd>
<span class="refAuthor">Crocker, D., Ed.</span><span class="refAuthor"> and P. Overell</span>, <span class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span class="seriesInfo">STD 68</span>, <span class="seriesInfo">RFC 5234</span>, <span class="seriesInfo">DOI 10.17487/RFC5234</span>, <time class="refDate" datetime="2008-01">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5234">https://www.rfc-editor.org/info/rfc5234</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5389">[RFC5389]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span><span class="refAuthor">, Mahy, R.</span><span class="refAuthor">, Matthews, P.</span><span class="refAuthor">, and D. Wing</span>, <span class="refTitle">"Session Traversal Utilities for NAT (STUN)"</span>, <span class="seriesInfo">RFC 5389</span>, <span class="seriesInfo">DOI 10.17487/RFC5389</span>, <time class="refDate" datetime="2008-10">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5389">https://www.rfc-editor.org/info/rfc5389</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5766">[RFC5766]</dt>
        <dd>
<span class="refAuthor">Mahy, R.</span><span class="refAuthor">, Matthews, P.</span><span class="refAuthor">, and J. Rosenberg</span>, <span class="refTitle">"Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)"</span>, <span class="seriesInfo">RFC 5766</span>, <span class="seriesInfo">DOI 10.17487/RFC5766</span>, <time class="refDate" datetime="2010-04">April 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5766">https://www.rfc-editor.org/info/rfc5766</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5768">[RFC5768]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span>, <span class="refTitle">"Indicating Support for Interactive Connectivity Establishment (ICE) in the Session Initiation Protocol (SIP)"</span>, <span class="seriesInfo">RFC 5768</span>, <span class="seriesInfo">DOI 10.17487/RFC5768</span>, <time class="refDate" datetime="2010-04">April 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5768">https://www.rfc-editor.org/info/rfc5768</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6336">[RFC6336]</dt>
        <dd>
<span class="refAuthor">Westerlund, M.</span><span class="refAuthor"> and C. Perkins</span>, <span class="refTitle">"IANA Registry for Interactive Connectivity Establishment (ICE) Options"</span>, <span class="seriesInfo">RFC 6336</span>, <span class="seriesInfo">DOI 10.17487/RFC6336</span>, <time class="refDate" datetime="2011-07">July 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6336">https://www.rfc-editor.org/info/rfc6336</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8445">[RFC8445]</dt>
      <dd>
<span class="refAuthor">Keranen, A.</span><span class="refAuthor">, Holmberg, C.</span><span class="refAuthor">, and J. Rosenberg</span>, <span class="refTitle">"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal"</span>, <span class="seriesInfo">RFC 8445</span>, <span class="seriesInfo">DOI 10.17487/RFC8445</span>, <time class="refDate" datetime="2018-07">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8445">https://www.rfc-editor.org/info/rfc8445</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-12.2">12.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC3725">[RFC3725]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span><span class="refAuthor">, Peterson, J.</span><span class="refAuthor">, Schulzrinne, H.</span><span class="refAuthor">, and G. Camarillo</span>, <span class="refTitle">"Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP)"</span>, <span class="seriesInfo">BCP 85</span>, <span class="seriesInfo">RFC 3725</span>, <span class="seriesInfo">DOI 10.17487/RFC3725</span>, <time class="refDate" datetime="2004-04">April 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3725">https://www.rfc-editor.org/info/rfc3725</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3960">[RFC3960]</dt>
        <dd>
<span class="refAuthor">Camarillo, G.</span><span class="refAuthor"> and H. Schulzrinne</span>, <span class="refTitle">"Early Media and Ringing Tone Generation in the Session Initiation Protocol (SIP)"</span>, <span class="seriesInfo">RFC 3960</span>, <span class="seriesInfo">DOI 10.17487/RFC3960</span>, <time class="refDate" datetime="2004-12">December 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3960">https://www.rfc-editor.org/info/rfc3960</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5245">[RFC5245]</dt>
        <dd>
<span class="refAuthor">Rosenberg, J.</span>, <span class="refTitle">"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols"</span>, <span class="seriesInfo">RFC 5245</span>, <span class="seriesInfo">DOI 10.17487/RFC5245</span>, <time class="refDate" datetime="2010-04">April 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5245">https://www.rfc-editor.org/info/rfc5245</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5626">[RFC5626]</dt>
        <dd>
<span class="refAuthor">Jennings, C., Ed.</span><span class="refAuthor">, Mahy, R., Ed.</span><span class="refAuthor">, and F. Audet, Ed.</span>, <span class="refTitle">"Managing Client-Initiated Connections in the Session Initiation Protocol (SIP)"</span>, <span class="seriesInfo">RFC 5626</span>, <span class="seriesInfo">DOI 10.17487/RFC5626</span>, <time class="refDate" datetime="2009-10">October 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5626">https://www.rfc-editor.org/info/rfc5626</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5898">[RFC5898]</dt>
        <dd>
<span class="refAuthor">Andreasen, F.</span><span class="refAuthor">, Camarillo, G.</span><span class="refAuthor">, Oran, D.</span><span class="refAuthor">, and D. Wing</span>, <span class="refTitle">"Connectivity Preconditions for Session Description Protocol (SDP) Media Streams"</span>, <span class="seriesInfo">RFC 5898</span>, <span class="seriesInfo">DOI 10.17487/RFC5898</span>, <time class="refDate" datetime="2010-07">July 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5898">https://www.rfc-editor.org/info/rfc5898</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6679">[RFC6679]</dt>
        <dd>
<span class="refAuthor">Westerlund, M.</span><span class="refAuthor">, Johansson, I.</span><span class="refAuthor">, Perkins, C.</span><span class="refAuthor">, O'Hanlon, P.</span><span class="refAuthor">, and K. Carlberg</span>, <span class="refTitle">"Explicit Congestion Notification (ECN) for RTP over UDP"</span>, <span class="seriesInfo">RFC 6679</span>, <span class="seriesInfo">DOI 10.17487/RFC6679</span>, <time class="refDate" datetime="2012-08">August 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6679">https://www.rfc-editor.org/info/rfc6679</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7675">[RFC7675]</dt>
        <dd>
<span class="refAuthor">Perumal, M.</span><span class="refAuthor">, Wing, D.</span><span class="refAuthor">, Ravindranath, R.</span><span class="refAuthor">, Reddy, T.</span><span class="refAuthor">, and M. Thomson</span>, <span class="refTitle">"Session Traversal Utilities for NAT (STUN) Usage for Consent Freshness"</span>, <span class="seriesInfo">RFC 7675</span>, <span class="seriesInfo">DOI 10.17487/RFC7675</span>, <time class="refDate" datetime="2015-10">October 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7675">https://www.rfc-editor.org/info/rfc7675</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span><span class="refAuthor">, Leiba, B.</span><span class="refAuthor">, and T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time class="refDate" datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8859">[RFC8859]</dt>
        <dd>
<span class="refAuthor">Nandakumar, S.</span>, <span class="refTitle">"A Framework for Session Description Protocol (SDP) Attributes When Multiplexing"</span>, <span class="seriesInfo">RFC 8859</span>, <span class="seriesInfo">DOI 10.17487/RFC8859</span>, <time class="refDate" datetime="2021-01">January 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8859">https://www.rfc-editor.org/info/rfc8859</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8863">[RFC8863]</dt>
      <dd>
<span class="refAuthor">Holmberg, C.</span><span class="refAuthor"> and J. Uberti</span>, <span class="refTitle">"Interactive Connectivity Establishment Patiently Awaiting Connectivity (ICE PAC)"</span>, <span class="seriesInfo">RFC 8863</span>, <span class="seriesInfo">DOI 10.17487/RFC8863</span>, <time class="refDate" datetime="2021-01">January 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8863">https://www.rfc-editor.org/info/rfc8863</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="sec-example">
<section id="section-appendix.a">
      <h2 id="name-examples">
<a class="section-number selfRef" href="#section-appendix.a">Appendix A. </a><a class="section-name selfRef" href="#name-examples">Examples</a>
      </h2>
<p id="section-appendix.a-1">
For the example shown in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-15">Section 15</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span>, 
the resulting offer (message 5) encoded in SDP looks like (lines folded for clarity):<a class="pilcrow" href="#section-appendix.a-1">Â¶</a></p>
<div id="section-appendix.a-2">
<pre class="sourcecode lang-sdp">v=0
o=jdoe 2890844526 2890842807 IN IP6 $L-PRIV-1.IP
s=
c=IN IP6 $NAT-PUB-1.IP
t=0 0
a=ice-options:ice2
a=ice-pacing:50
a=ice-pwd:asd88fgpdd777uzjYhagZg
a=ice-ufrag:8hhY
m=audio $NAT-PUB-1.PORT RTP/AVP 0
b=RS:0
b=RR:0
a=rtpmap:0 PCMU/8000
a=candidate:1 1 UDP 2130706431 $L-PRIV-1.IP $L-PRIV-1.PORT typ host
a=candidate:2 1 UDP 1694498815 $NAT-PUB-1.IP $NAT-PUB-1.PORT typ
 srflx raddr $L-PRIV-1.IP rport $L-PRIV-1.PORT
</pre><a class="pilcrow" href="#section-appendix.a-2">Â¶</a>
</div>
<p id="section-appendix.a-3">
The offer, with the variables replaced with their values, will look like (lines folded for clarity):<a class="pilcrow" href="#section-appendix.a-3">Â¶</a></p>
<div id="section-appendix.a-4">
<pre class="sourcecode lang-sdp">v=0
o=jdoe 2890844526 2890842807 IN IP6 fe80::6676:baff:fe9c:ee4a
s=
c=IN IP6 2001:db8:8101:3a55:4858:a2a9:22ff:99b9
t=0 0
a=ice-options:ice2
a=ice-pacing:50
a=ice-pwd:asd88fgpdd777uzjYhagZg
a=ice-ufrag:8hhY
m=audio 45664 RTP/AVP 0
b=RS:0
b=RR:0
a=rtpmap:0 PCMU/8000
a=candidate:1 1 UDP 2130706431 fe80::6676:baff:fe9c:ee4a 8998
 typ host
a=candidate:2 1 UDP 1694498815 2001:db8:8101:3a55:4858:a2a9:22ff:99b9
 45664 typ srflx raddr fe80::6676:baff:fe9c:ee4a rport 8998
</pre><a class="pilcrow" href="#section-appendix.a-4">Â¶</a>
</div>
<p id="section-appendix.a-5">
The resulting answer looks like:<a class="pilcrow" href="#section-appendix.a-5">Â¶</a></p>
<div id="section-appendix.a-6">
<pre class="sourcecode lang-sdp">v=0
o=bob 2808844564 2808844564 IN IP4 $R-PUB-1.IP
s=
c=IN IP4 $R-PUB-1.IP
t=0 0
a=ice-options:ice2
a=ice-pacing:50
a=ice-pwd:YH75Fviy6338Vbrhrlp8Yh
a=ice-ufrag:9uB6
m=audio $R-PUB-1.PORT RTP/AVP 0
b=RS:0
b=RR:0
a=rtpmap:0 PCMU/8000
a=candidate:1 1 UDP 2130706431 $R-PUB-1.IP $R-PUB-1.PORT typ host
</pre><a class="pilcrow" href="#section-appendix.a-6">Â¶</a>
</div>
<p id="section-appendix.a-7">
With the variables filled in:<a class="pilcrow" href="#section-appendix.a-7">Â¶</a></p>
<div id="section-appendix.a-8">
<pre class="sourcecode lang-sdp">v=0
o=bob 2808844564 2808844564 IN IP4 192.0.2.1
s=
c=IN IP4 192.0.2.1
t=0 0
a=ice-options:ice2
a=ice-pacing:50
a=ice-pwd:YH75Fviy6338Vbrhrlp8Yh
a=ice-ufrag:9uB6
m=audio 3478 RTP/AVP 0
b=RS:0
b=RR:0
a=rtpmap:0 PCMU/8000
a=candidate:1 1 UDP 2130706431 192.0.2.1 3478 typ host
</pre><a class="pilcrow" href="#section-appendix.a-8">Â¶</a>
</div>
</section>
</div>
<div id="sec-why-remote">
<section id="section-appendix.b">
      <h2 id="name-the-remote-candidates-attri">
<a class="section-number selfRef" href="#section-appendix.b">Appendix B. </a><a class="section-name selfRef" href="#name-the-remote-candidates-attri">The "remote-candidates" Attribute</a>
      </h2>
<p id="section-appendix.b-1">
The "remote-candidates" attribute exists to eliminate a race condition between the updated offer and the response to the STUN Binding request that moved a candidate into the valid list.
This race condition is shown in <a class="xref" href="#fig-race-flow">Figure 1</a>.
On receipt of message 4, agent L adds a candidate pair to the valid list.
If there was only a single data stream with a single component, agent L could now send an updated offer.
   However, the check from agent R has not yet 
   received a response, and agent R receives the updated offer 
   (message 7) before getting the response (message 9).  
Thus, it does not yet know that this particular pair is valid.
To eliminate this condition, the actual candidates at R that were selected by the offerer (the remote candidates) are included in the offer itself, and the answerer delays its answer until those pairs validate.<a class="pilcrow" href="#section-appendix.b-1">Â¶</a></p>
<span id="name-race-condition-flow"></span><div id="fig-race-flow">
<figure id="figure-1">
        <div class="artwork art-text alignLeft" id="section-appendix.b-2.1">
<pre>Agent L               Network               Agent R
   |(1) Offer            |                     |
   |------------------------------------------&gt;|
   |(2) Answer           |                     |
   |&lt;------------------------------------------|
   |(3) STUN Req.        |                     |
   |------------------------------------------&gt;|
   |(4) STUN Res.        |                     |
   |&lt;------------------------------------------|
   |(5) STUN Req.        |                     |
   |&lt;------------------------------------------|
   |(6) STUN Res.        |                     |
   |--------------------&gt;|                     |
   |                     |Lost                 |
   |(7) Offer            |                     |
   |------------------------------------------&gt;|
   |(8) STUN Req.        |                     |
   |&lt;------------------------------------------|
   |(9) STUN Res.        |                     |
   |------------------------------------------&gt;|
   |(10) Answer          |                     |
   |&lt;------------------------------------------|
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-race-condition-flow">Race Condition Flow</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="sec-glare">
<section id="section-appendix.c">
      <h2 id="name-why-is-the-conflict-resolut">
<a class="section-number selfRef" href="#section-appendix.c">Appendix C. </a><a class="section-name selfRef" href="#name-why-is-the-conflict-resolut">Why Is the Conflict Resolution Mechanism Needed?</a>
      </h2>
<p id="section-appendix.c-1">
When ICE runs between two peers, one agent acts as controlled, and the other as controlling.
Rules are defined as a function of implementation type and offerer/answerer to determine who is controlling and who is controlled.
However, the specification mentions that, in some cases, both sides might believe they are controlling, or both sides might believe they are controlled.
How can this happen?<a class="pilcrow" href="#section-appendix.c-1">Â¶</a></p>
<p id="section-appendix.c-2">
The condition when both agents believe they are controlled shows up in third party call control cases.
Consider the following flow:<a class="pilcrow" href="#section-appendix.c-2">Â¶</a></p>
<span id="name-role-conflict-flow"></span><div id="fig-conflict">
<figure id="figure-2">
        <div class="artwork art-text alignLeft" id="section-appendix.c-3.1">
<pre>          A         Controller          B
          |(1) INV()     |              |
          |&lt;-------------|              |
          |(2) 200(SDP1) |              |
          |-------------&gt;|              |
          |              |(3) INV()     |
          |              |-------------&gt;|
          |              |(4) 200(SDP2) |
          |              |&lt;-------------|
          |(5) ACK(SDP2) |              |
          |&lt;-------------|              |
          |              |(6) ACK(SDP1) |
          |              |-------------&gt;|
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-role-conflict-flow">Role Conflict Flow</a>
        </figcaption></figure>
</div>
<p id="section-appendix.c-4">
This flow is a variation on flow III of RFC 3725 <span>[<a class="xref" href="#RFC3725">RFC3725</a>]</span>.
In fact, it works better than flow III since it produces fewer messages.
In this flow, the controller sends an offerless INVITE to agent A, which responds with its offer, SDP1.
The agent then sends an offerless INVITE to agent B, which it responds to with its offer, SDP2.
The controller then uses the offer from each agent to generate the answers.
When this flow is used, ICE will run between agents A and B, but both will believe they are in the controlling role.
With the role conflict resolution procedures, this flow will function properly when ICE is used.<a class="pilcrow" href="#section-appendix.c-4">Â¶</a></p>
<p id="section-appendix.c-5">
At this time, there are no documented flows that can result in the case where both agents believe they are controlled.
However, the conflict resolution procedures allow for this case, should a flow arise that would fit into this category.<a class="pilcrow" href="#section-appendix.c-5">Â¶</a></p>
</section>
</div>
<section id="section-appendix.d">
      <h2 id="name-why-send-an-updated-offer">
<a class="section-number selfRef" href="#section-appendix.d">Appendix D. </a><a class="section-name selfRef" href="#name-why-send-an-updated-offer">Why Send an Updated Offer?</a>
      </h2>
<p id="section-appendix.d-1">
<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8445#section-12.1">Section 12.1</a> of [<a class="xref" href="#RFC8445">RFC8445</a>]</span> 
describes rules for sending media.
Both agents can send media once ICE checks complete, without waiting for an updated offer.
Indeed, the only purpose of the updated offer is to "correct" the SDP so that the default destination for media matches where media is being sent based on ICE procedures (which will be the highest-priority nominated candidate pair).<a class="pilcrow" href="#section-appendix.d-1">Â¶</a></p>
<p id="section-appendix.d-2">
This raises the question -- why is the updated offer/answer exchange needed at all?
Indeed, in a pure offer/answer environment, it would not be.
The offerer and answerer will agree on the candidates to use through ICE, and then can begin using them.
As far as the agents themselves are concerned, the updated offer/answer provides no new information.
However, in practice, numerous components along the signaling path look at the SDP information.
These include entities performing off-path QoS reservations, NAT traversal components such as ALGs and Session Border Controllers (SBCs), and diagnostic tools that passively monitor the network.
For these tools to continue to function without change, the core property of SDP -- that the existing, pre-ICE definitions of the addresses used for media -- the "m=" and "c=" lines and the "rtcp" attribute -- must be retained.
For this reason, an updated offer must be sent.<a class="pilcrow" href="#section-appendix.d-2">Â¶</a></p>
</section>
<section id="section-appendix.e">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="section-appendix.e-1">
A large part of the text in this document was taken from <span>[<a class="xref" href="#RFC5245">RFC5245</a>]</span>, authored by <span class="contact-name">Jonathan Rosenberg</span>.<a class="pilcrow" href="#section-appendix.e-1">Â¶</a></p>
<p id="section-appendix.e-2">
Some of the text in this document was taken from <span>[<a class="xref" href="#RFC6336">RFC6336</a>]</span>, 
authored by <span class="contact-name">Magnus Westerlund</span> and <span class="contact-name">Colin Perkins</span>.<a class="pilcrow" href="#section-appendix.e-2">Â¶</a></p>
<p id="section-appendix.e-3">
Many thanks to <span class="contact-name">Flemming Andreasen</span> for shepherd review feedback.<a class="pilcrow" href="#section-appendix.e-3">Â¶</a></p>
<p id="section-appendix.e-4">
Thanks to following experts for their reviews and constructive feedback: 
<span class="contact-name">Thomas Stach</span>, <span class="contact-name">Adam Roach</span>, 
<span class="contact-name">Peter Saint-Andre</span>, <span class="contact-name">Roman Danyliw</span>, 
<span class="contact-name">Alissa Cooper</span>, <span class="contact-name">Benjamin Kaduk</span>, 
<span class="contact-name">Mirja KÃ¼hlewind</span>, <span class="contact-name">Alexey Melnikov</span>, and 
<span class="contact-name">Ãric Vyncke</span> for their detailed reviews.<a class="pilcrow" href="#section-appendix.e-4">Â¶</a></p>
</section>
<section id="section-appendix.f">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<p id="section-appendix.f-1">
The following experts have contributed textual and structural improvements for this work:<a class="pilcrow" href="#section-appendix.f-1">Â¶</a></p>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Thomas Stach</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:thomass.stach@gmail.com">thomass.stach@gmail.com</a>
</div>
</address>
</section>
<div id="authors-addresses">
<section id="section-appendix.g">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Marc Petit-Huguenin</span></div>
<div class="left" dir="auto"><span class="org">Impedance Mismatch</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:marc@petit-huguenin.org">marc@petit-huguenin.org</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Suhas Nandakumar</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems</span></div>
<div class="left" dir="auto"><span class="street-address">707 Tasman Dr</span></div>
<div class="left" dir="auto">
<span class="locality">Milpitas</span>, <span class="region">CA</span> <span class="postal-code">95035</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:snandaku@cisco.com">snandaku@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Christer Holmberg</span></div>
<div class="left" dir="auto"><span class="org">Ericsson</span></div>
<div class="left" dir="auto"><span class="street-address">Hirsalantie 11</span></div>
<div class="left" dir="auto">FI-<span class="postal-code">02420</span> <span class="locality">Jorvas</span>
</div>
<div class="left" dir="auto"><span class="country-name">Finland</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:christer.holmberg@ericsson.com">christer.holmberg@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Ari KerÃ¤nen</span></div>
<div class="left" dir="auto"><span class="org">Ericsson</span></div>
<div class="left" dir="auto">FI-<span class="postal-code">02420</span> <span class="locality">Jorvas</span>
</div>
<div class="left" dir="auto"><span class="country-name">Finland</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:ari.keranen@ericsson.com">ari.keranen@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Roman Shpount</span></div>
<div class="left" dir="auto"><span class="org">TurboBridge</span></div>
<div class="left" dir="auto"><span class="street-address">4905 Del Ray Avenue, Suite 300</span></div>
<div class="left" dir="auto">
<span class="locality">Bethesda</span>, <span class="region">MD</span> <span class="postal-code">20814</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:rshpount@turbobridge.com">rshpount@turbobridge.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>