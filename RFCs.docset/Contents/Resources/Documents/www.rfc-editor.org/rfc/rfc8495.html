<html><head></head><body><pre>Internet Engineering Task Force (IETF)                          J. Gould
Request for Comments: 8495                                VeriSign, Inc.
Category: Standards Track                                       K. Feher
ISSN: 2070-1721                                                  Neustar
                                                           November 2018


                       <span class="h1">Allocation Token Extension</span>
             <span class="h1">for the Extensible Provisioning Protocol (EPP)</span>

Abstract

   This document describes an Extensible Provisioning Protocol (EPP)
   extension for including an Allocation Token in "query" and
   "transform" commands.  The Allocation Token is used as a credential
   that authorizes a client to request the allocation of a specific
   object from the server using one of the EPP transform commands,
   including "create" and "transfer".

Status of This Memo

   This is an Internet Standards Track document.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Further information on
   Internet Standards is available in <a href="./rfc7841#section-2">SectionÂ 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="https://www.rfc-editor.org/info/rfc8495">https://www.rfc-editor.org/info/rfc8495</a>.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




<span class="grey">Gould &amp; Feher                Standards Track                    [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
     <a href="#section-1.1">1.1</a>.  Conventions Used in This Document . . . . . . . . . . . .   <a href="#page-3">3</a>
   <a href="#section-2">2</a>.  Object Attributes . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.1">2.1</a>.  Allocation Token  . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-3">3</a>.  EPP Command Mapping . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
     <a href="#section-3.1">3.1</a>.  EPP Query Commands  . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-3.1.1">3.1.1</a>.  EPP &lt;check&gt; Command . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-3.1.2">3.1.2</a>.  EPP &lt;info&gt; Command  . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
       <a href="#section-3.1.3">3.1.3</a>.  EPP &lt;transfer&gt; Query Command  . . . . . . . . . . . .  <a href="#page-10">10</a>
     <a href="#section-3.2">3.2</a>.  EPP Transform Commands  . . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
       <a href="#section-3.2.1">3.2.1</a>.  EPP &lt;create&gt; Command  . . . . . . . . . . . . . . . .  <a href="#page-11">11</a>
       <a href="#section-3.2.2">3.2.2</a>.  EPP &lt;delete&gt; Command  . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
       <a href="#section-3.2.3">3.2.3</a>.  EPP &lt;renew&gt; Command . . . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
       <a href="#section-3.2.4">3.2.4</a>.  EPP &lt;transfer&gt; Command  . . . . . . . . . . . . . . .  <a href="#page-12">12</a>
       <a href="#section-3.2.5">3.2.5</a>.  EPP &lt;update&gt; Command  . . . . . . . . . . . . . . . .  <a href="#page-13">13</a>
   <a href="#section-4">4</a>.  Formal Syntax . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-14">14</a>
     <a href="#section-4.1">4.1</a>.  Allocation Token Extension Schema . . . . . . . . . . . .  <a href="#page-14">14</a>
   <a href="#section-5">5</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-5.1">5.1</a>.  XML Namespace . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
     <a href="#section-5.2">5.2</a>.  EPP Extension Registry  . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
   <a href="#section-6">6</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .  <a href="#page-15">15</a>
   <a href="#section-7">7</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
     <a href="#section-7.1">7.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .  <a href="#page-16">16</a>
     <a href="#section-7.2">7.2</a>.  Informative References  . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <a href="#page-17">17</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   This document describes an extension mapping for version 1.0 of the
   Extensible Provisioning Protocol (EPP) [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].  This mapping,
   which is an extension to EPP object mappings similar to the EPP
   domain name mapping [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>], supports passing an Allocation Token
   as a credential that authorizes a client to request the allocation of
   a specific object from the server using one of the EPP transform
   commands, including "create" and "transfer".

   Allocation is when a server assigns the sponsoring client of an
   object based on the use of an Allocation Token credential.  Examples
   include allocating a registration based on a pre-eligibility
   Allocation Token, allocating a premium domain name registration based
   on an auction Allocation Token, allocating a registration based on a
   founders Allocation Token, and allocating an existing domain name
   held by the server or by a different sponsoring client based on an
   Allocation Token that is passed with a transfer command.




<span class="grey">Gould &amp; Feher                Standards Track                    [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   Clients pass an Allocation Token to the server for validation, and
   the server determines if the supplied Allocation Token is one
   supported by the server.  It is up to server policy which EPP
   transform commands and which objects require the Allocation Token.
   The Allocation Token MAY be returned to an authorized client for
   passing out-of-band to a client that uses it with an EPP transform
   command.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.1.%20%20Conventions%20Used%20in%20This%20Document"></a><a class="selflink" href="#section-1.1" id="section-1.1">1.1</a>.  Conventions Used in This Document</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a> [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>] [<a href="./rfc8174" title='"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"'>RFC8174</a>] when, and only when, they appear in all
   capitals, as shown here.

   XML is case sensitive.  Unless stated otherwise, XML specifications
   and examples provided in this document MUST be interpreted in the
   character case presented in order to develop a conforming
   implementation.

   In examples, "C:" represents lines sent by a protocol client and "S:"
   represents lines returned by a protocol server.  Indentation and
   white space in the examples are provided only to illustrate element
   relationships and are not REQUIRED in the protocol.

   The XML namespace prefix "allocationToken" is used for the namespace
   "urn:ietf:params:xml:ns:allocationToken-1.0", but implementations
   MUST NOT depend on it and instead employ a proper namespace-aware XML
   parser and serializer to interpret and output the XML documents.

   The "abc123" token value is used as a placeholder value in the
   examples.  The server MUST support token values that follow the
   Security Considerations (<a href="#section-6">Section 6</a>).

   The domain-object attribute values, including the "2fooBAR"
   &lt;domain:pw&gt; value, in the examples are provided for illustration
   purposes only.  Refer to [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>] for details on the domain-object
   attributes.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Object%20Attributes"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Object Attributes</span>

   This extension adds additional elements to EPP object mappings
   similar to the EPP domain name mapping [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>].  Only those new
   elements are described here.






<span class="grey">Gould &amp; Feher                Standards Track                    [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.%20%20Allocation%20Token"></a><a class="selflink" href="#section-2.1" id="section-2.1">2.1</a>.  Allocation Token</span>

   The Allocation Token is a simple XML "token" type.  The exact format
   of the Allocation Token is up to server policy.  The server MAY have
   the Allocation Token for each object to match against the Allocation
   Token passed by the client to authorize the allocation of the object.
   The &lt;allocationToken:allocationToken&gt; element is used for all of the
   supported EPP commands as well as the info response.  If the supplied
   Allocation Token passed to the server does not apply to the object,
   the server MUST return an EPP error result code of 2201.

   Authorization information, similar to what is defined in the EPP
   domain name mapping [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>], is associated with objects to
   facilitate transfer operations.  The authorization information is
   assigned when an object is created.  The Allocation Token and the
   authorization information are both credentials but are used for
   different purposes and in different ways.  The Allocation Token is
   used to facilitate the allocation of an object instead of
   transferring the sponsorship of the object.  The Allocation Token is
   not managed by the client but is validated by the server to authorize
   assigning the initial sponsoring client of the object.

   An example &lt;allocationToken:allocationToken&gt; element with value of
   "abc123":

   &lt;allocationToken:allocationToken xmlns:allocationToken=
             "urn:ietf:params:xml:ns:allocationToken-1.0"&gt;
     abc123
   &lt;/allocationToken:allocationToken&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20EPP%20Command%20Mapping"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  EPP Command Mapping</span>

   A detailed description of the EPP syntax and semantics can be found
   in the EPP core protocol specification [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.%20%20EPP%20Query%20Commands"></a><a class="selflink" href="#section-3.1" id="section-3.1">3.1</a>.  EPP Query Commands</span>

   EPP provides three commands to retrieve object information: &lt;check&gt;
   to determine if an object can be provisioned, &lt;info&gt; to retrieve
   information associated with an object, and &lt;transfer&gt; to retrieve
   object-transfer status information.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.1.%20%20EPP%20%3Ccheck%3E%20Command"></a><a class="selflink" href="#section-3.1.1" id="section-3.1.1">3.1.1</a>.  EPP &lt;check&gt; Command</span>

   This extension defines additional elements to extend the EPP &lt;check&gt;
   command of an object mapping similar to the mapping specified in
   [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>].




<span class="grey">Gould &amp; Feher                Standards Track                    [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   This extension allows clients to check the availability of an object
   with an Allocation Token, as described in <a href="#section-2.1">Section 2.1</a>.  Clients can
   check if an object can be created using the Allocation Token.  The
   Allocation Token is applied to all object names included in the EPP
   &lt;check&gt; command.

   The following is an example &lt;check&gt; command for the
   allocation.example domain name using the
   &lt;allocationToken:allocationToken&gt; extension with the allocation token
   of 'abc123':

   C:&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
   C:&lt;epp xmlns="urn:ietf:params:xml:ns:epp-1.0"&gt;
   C:  &lt;command&gt;
   C:    &lt;check&gt;
   C:      &lt;domain:check
   C:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"&gt;
   C:        &lt;domain:name&gt;allocation.example&lt;/domain:name&gt;
   C:      &lt;/domain:check&gt;
   C:    &lt;/check&gt;
   C:    &lt;extension&gt;
   C:      &lt;allocationToken:allocationToken
   C:        xmlns:allocationToken=
   C:          "urn:ietf:params:xml:ns:allocationToken-1.0"&gt;
   C:        abc123
   C:      &lt;/allocationToken:allocationToken&gt;
   C:    &lt;/extension&gt;
   C:    &lt;clTRID&gt;ABC-12345&lt;/clTRID&gt;
   C:  &lt;/command&gt;
   C:&lt;/epp&gt;

   If the query was successful, the server replies with a &lt;check&gt;
   response providing the availability status of the queried object
   based on the following Allocation Token cases where the object is
   otherwise available:

   1.  If an object requires an Allocation Token and the Allocation
       Token does apply to the object, then the server MUST return the
       availability status as available (e.g., the "avail" attribute is
       "1" or "true").
   2.  If an object requires an Allocation Token and the Allocation
       Token does not apply to the object, then the server SHOULD return
       the availability status as unavailable (e.g., the "avail"
       attribute is "0" or "false").
   3.  If an object does not require an Allocation Token, the server MAY
       return the availability status as available (e.g., the "avail"
       attribute is "1" or "true").




<span class="grey">Gould &amp; Feher                Standards Track                    [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   The following is an example &lt;check&gt; domain response for a &lt;check&gt;
   command using the &lt;allocationToken:allocationToken&gt; extension:

   S:&lt;?xml version="1.0" encoding="UTF-8"?&gt;
   S:&lt;epp xmlns="urn:ietf:params:xml:ns:epp-1.0"&gt;
   S: &lt;response&gt;
   S:  &lt;result code="1000"&gt;
   S:   &lt;msg lang="en-US"&gt;Command completed successfully&lt;/msg&gt;
   S:  &lt;/result&gt;
   S:  &lt;resData&gt;
   S:   &lt;domain:chkData
   S:     xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"&gt;
   S:    &lt;domain:cd&gt;
   S:     &lt;domain:name avail="1"&gt;allocation.example&lt;/domain:name&gt;
   S:    &lt;/domain:cd&gt;
   S:   &lt;/domain:chkData&gt;
   S:  &lt;/resData&gt;
   S:  &lt;trID&gt;
   S:   &lt;clTRID&gt;ABC-DEF-12345&lt;/clTRID&gt;
   S:   &lt;svTRID&gt;54321-XYZ&lt;/svTRID&gt;
   S:  &lt;/trID&gt;
   S: &lt;/response&gt;
   S:&lt;/epp&gt;




























<span class="grey">Gould &amp; Feher                Standards Track                    [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   The following is an example &lt;check&gt; command with the
   &lt;allocationToken:allocationToken&gt; extension for the
   allocation.example and allocation2.example domain names.
   Availability of allocation.example and allocation2.example domain
   names are based on the Allocation Token 'abc123':

   C:&lt;?xml version="1.0" encoding="UTF-8"?&gt;
   C:&lt;epp xmlns="urn:ietf:params:xml:ns:epp-1.0"&gt;
   C: &lt;command&gt;
   C:  &lt;check&gt;
   C:   &lt;domain:check
   C:     xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"&gt;
   C:    &lt;domain:name&gt;allocation.example&lt;/domain:name&gt;
   C:    &lt;domain:name&gt;allocation2.example&lt;/domain:name&gt;
   C:   &lt;/domain:check&gt;
   C:  &lt;/check&gt;
   C:  &lt;extension&gt;
   C:   &lt;allocationToken:allocationToken
   C:     xmlns:allocationToken=
   C:       "urn:ietf:params:xml:ns:allocationToken-1.0"&gt;
   C:     abc123
   C:   &lt;/allocationToken:allocationToken&gt;
   C:  &lt;/extension&gt;
   C:  &lt;clTRID&gt;ABC-DEF-12345&lt;/clTRID&gt;
   C: &lt;/command&gt;
   C:&lt;/epp&gt;

























<span class="grey">Gould &amp; Feher                Standards Track                    [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   The following is an example &lt;check&gt; domain response for multiple
   domain names in the &lt;check&gt; command using the
   &lt;allocationToken:allocationToken&gt; extension, where the Allocation
   Token 'abc123' matches allocation.example but does not match
   allocation2.example:

   S:&lt;?xml version="1.0" encoding="UTF-8"?&gt;
   S:&lt;epp xmlns="urn:ietf:params:xml:ns:epp-1.0"&gt;
   S: &lt;response&gt;
   S:  &lt;result code="1000"&gt;
   S:   &lt;msg lang="en-US"&gt;Command completed successfully&lt;/msg&gt;
   S:  &lt;/result&gt;
   S:  &lt;resData&gt;
   S:   &lt;domain:chkData
   S:     xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"&gt;
   S:    &lt;domain:cd&gt;
   S:     &lt;domain:name avail="1"&gt;allocation.example&lt;/domain:name&gt;
   S:    &lt;/domain:cd&gt;
   S:    &lt;domain:cd&gt;
   S:     &lt;domain:name avail="0"&gt;allocation2.example&lt;/domain:name&gt;
   S:     &lt;domain:reason&gt;Allocation Token mismatch&lt;/domain:reason&gt;
   S:    &lt;/domain:cd&gt;
   S:   &lt;/domain:chkData&gt;
   S:  &lt;/resData&gt;
   S:  &lt;trID&gt;
   S:   &lt;clTRID&gt;ABC-DEF-12345&lt;/clTRID&gt;
   S:   &lt;svTRID&gt;54321-XYZ&lt;/svTRID&gt;
   S:  &lt;/trID&gt;
   S: &lt;/response&gt;
   S:&lt;/epp&gt;

   This extension does not add any elements to the EPP &lt;check&gt; response
   described in [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.2.%20%20EPP%20%3Cinfo%3E%20Command"></a><a class="selflink" href="#section-3.1.2" id="section-3.1.2">3.1.2</a>.  EPP &lt;info&gt; Command</span>

   This extension defines additional elements to extend the EPP &lt;info&gt;
   command of an object mapping similar to the mapping specified in
   [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>].

   The EPP &lt;info&gt; command allows a client to request information
   associated with an existing object.  Authorized clients MAY retrieve
   the Allocation Token (<a href="#section-2.1">Section 2.1</a>) along with the other object
   information by supplying the &lt;allocationToken:info&gt; element in the
   command.  The &lt;allocationToken:info&gt; element is an empty element that
   serves as a marker to the server to return the
   &lt;allocationToken:allocationToken&gt; element in the info response.  If
   the client is not authorized to receive the Allocation Token, the



<span class="grey">Gould &amp; Feher                Standards Track                    [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   server MUST return an EPP error result code of 2201.  If the client
   is authorized to receive the Allocation Token, but there is no
   Allocation Token associated with the object, the server MUST return
   an EPP error result code of 2303.  The authorization is subject to
   server policy.

   The following is an example &lt;info&gt; command with the
   allocationToken:info extension for the allocation.example domain
   name:

   C:&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
   C:&lt;epp xmlns="urn:ietf:params:xml:ns:epp-1.0"&gt;
   C:  &lt;command&gt;
   C:   &lt;info&gt;
   C:    &lt;domain:info
   C:      xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"&gt;
   C:      &lt;domain:name&gt;allocation.example&lt;/domain:name&gt;
   C:    &lt;/domain:info&gt;
   C:   &lt;/info&gt;
   C:   &lt;extension&gt;
   C:      &lt;allocationToken:info
   C:        xmlns:allocationToken=
   C:          "urn:ietf:params:xml:ns:allocationToken-1.0"/&gt;
   C:   &lt;/extension&gt;
   C:   &lt;clTRID&gt;ABC-12345&lt;/clTRID&gt;
   C:  &lt;/command&gt;
   C:&lt;/epp&gt;

   If the query was successful, the server replies with an
   &lt;allocationToken:allocationToken&gt; element along with the regular EPP
   &lt;resData&gt;.  The &lt;allocationToken:allocationToken&gt; element is
   described in <a href="#section-2.1">Section 2.1</a>.



















<span class="grey">Gould &amp; Feher                Standards Track                    [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   The following is an example &lt;info&gt; domain response using the
   &lt;allocationToken:allocationToken&gt; extension:

   S:&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
   S:&lt;epp xmlns="urn:ietf:params:xml:ns:epp-1.0"&gt;
   S:  &lt;response&gt;
   S:    &lt;result code="1000"&gt;
   S:      &lt;msg&gt;Command completed successfully&lt;/msg&gt;
   S:    &lt;/result&gt;
   S:    &lt;resData&gt;
   S:      &lt;domain:infData
   S:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"&gt;
   S:        &lt;domain:name&gt;allocation.example&lt;/domain:name&gt;
   S:        &lt;domain:roid&gt;EXAMPLE1-REP&lt;/domain:roid&gt;
   S:        &lt;domain:status s="pendingCreate"/&gt;
   S:        &lt;domain:registrant&gt;jd1234&lt;/domain:registrant&gt;
   S:        &lt;domain:contact type="admin"&gt;sh8013&lt;/domain:contact&gt;
   S:        &lt;domain:contact type="tech"&gt;sh8013&lt;/domain:contact&gt;
   S:        &lt;domain:clID&gt;ClientX&lt;/domain:clID&gt;
   S:        &lt;domain:crID&gt;ClientY&lt;/domain:crID&gt;
   S:        &lt;domain:crDate&gt;2012-04-03T22:00:00.0Z&lt;/domain:crDate&gt;
   S:        &lt;domain:authInfo&gt;
   S:          &lt;domain:pw&gt;2fooBAR&lt;/domain:pw&gt;
   S:        &lt;/domain:authInfo&gt;
   S:      &lt;/domain:infData&gt;
   S:    &lt;/resData&gt;
   S:    &lt;extension&gt;
   S:      &lt;allocationToken:allocationToken
   S:        xmlns:allocationToken=
   S:          "urn:ietf:params:xml:ns:allocationToken-1.0"&gt;
   S:        abc123
   S:      &lt;/allocationToken:allocationToken&gt;
   S:    &lt;/extension&gt;
   S:    &lt;trID&gt;
   S:      &lt;clTRID&gt;ABC-12345&lt;/clTRID&gt;
   S:      &lt;svTRID&gt;54321-XYZ&lt;/svTRID&gt;
   S:    &lt;/trID&gt;
   S:  &lt;/response&gt;
   S:&lt;/epp&gt;

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.1.3.%20%20EPP%20%3Ctransfer%3E%20Query%20Command"></a><a class="selflink" href="#section-3.1.3" id="section-3.1.3">3.1.3</a>.  EPP &lt;transfer&gt; Query Command</span>

   This extension does not add any elements to the EPP &lt;transfer&gt; query
   command or &lt;transfer&gt; query response described in [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].







<span class="grey">Gould &amp; Feher                Standards Track                   [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.%20%20EPP%20Transform%20Commands"></a><a class="selflink" href="#section-3.2" id="section-3.2">3.2</a>.  EPP Transform Commands</span>

   EPP provides five commands to transform objects: &lt;create&gt; to create
   an instance of an object, &lt;delete&gt; to delete an instance of an
   object, &lt;renew&gt; to extend the validity period of an object,
   &lt;transfer&gt; to manage object sponsorship changes, and &lt;update&gt; to
   change information associated with an object.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.1.%20%20EPP%20%3Ccreate%3E%20Command"></a><a class="selflink" href="#section-3.2.1" id="section-3.2.1">3.2.1</a>.  EPP &lt;create&gt; Command</span>

   This extension defines additional elements to extend the EPP &lt;create&gt;
   command of an object mapping similar to the mapping specified in
   [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>].

   The EPP &lt;create&gt; command provides a transform operation that allows a
   client to create an instance of an object.  In addition to the EPP
   command elements described in an object mapping similar to the
   mapping specified in [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>], the command MUST contain a child
   &lt;allocationToken:allocationToken&gt; element for the client to be
   authorized to create and allocate the object.  If the Allocation
   Token does not apply to the object, the server MUST return an EPP
   error result code of 2201.





























<span class="grey">Gould &amp; Feher                Standards Track                   [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   The following is an example &lt;create&gt; command to create a domain
   object with an Allocation Token:

   C:&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
   C:&lt;epp xmlns="urn:ietf:params:xml:ns:epp-1.0"&gt;
   C:  &lt;command&gt;
   C:    &lt;create&gt;
   C:      &lt;domain:create
   C:       xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"&gt;
   C:        &lt;domain:name&gt;allocation.example&lt;/domain:name&gt;
   C:        &lt;domain:registrant&gt;jd1234&lt;/domain:registrant&gt;
   C:        &lt;domain:contact type="admin"&gt;sh8013&lt;/domain:contact&gt;
   C:        &lt;domain:contact type="tech"&gt;sh8013&lt;/domain:contact&gt;
   C:        &lt;domain:authInfo&gt;
   C:          &lt;domain:pw&gt;2fooBAR&lt;/domain:pw&gt;
   C:        &lt;/domain:authInfo&gt;
   C:      &lt;/domain:create&gt;
   C:    &lt;/create&gt;
   C:    &lt;extension&gt;
   C:      &lt;allocationToken:allocationToken
   C:        xmlns:allocationToken=
   C:          "urn:ietf:params:xml:ns:allocationToken-1.0"&gt;
   C:        abc123
   C:      &lt;/allocationToken:allocationToken&gt;
   C:    &lt;/extension&gt;
   C:    &lt;clTRID&gt;ABC-12345&lt;/clTRID&gt;
   C:  &lt;/command&gt;
   C:&lt;/epp&gt;

   This extension does not add any elements to the EPP &lt;create&gt; response
   described in [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.2.%20%20EPP%20%3Cdelete%3E%20Command"></a><a class="selflink" href="#section-3.2.2" id="section-3.2.2">3.2.2</a>.  EPP &lt;delete&gt; Command</span>

   This extension does not add any elements to the EPP &lt;delete&gt; command
   or &lt;delete&gt; response described in [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.3.%20%20EPP%20%3Crenew%3E%20Command"></a><a class="selflink" href="#section-3.2.3" id="section-3.2.3">3.2.3</a>.  EPP &lt;renew&gt; Command</span>

   This extension does not add any elements to the EPP &lt;renew&gt; command
   or &lt;renew&gt; response described in [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.4.%20%20EPP%20%3Ctransfer%3E%20Command"></a><a class="selflink" href="#section-3.2.4" id="section-3.2.4">3.2.4</a>.  EPP &lt;transfer&gt; Command</span>

   This extension defines additional elements to extend the EPP
   &lt;transfer&gt; command of an object mapping similar to the mapping
   specified in [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>].




<span class="grey">Gould &amp; Feher                Standards Track                   [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   The EPP &lt;transfer&gt; command provides a transform operation that allows
   a client to request the transfer of an object.  In addition to the
   EPP command elements described in an object mapping similar to the
   mapping specified in [<a href="./rfc5731" title='"Extensible Provisioning Protocol (EPP) Domain Name Mapping"'>RFC5731</a>], the command MUST contain a child
   &lt;allocationToken:allocationToken&gt; element for the client to be
   authorized to transfer and allocate the object.  The authorization
   associated with the Allocation Token is in addition to, and does not
   replace, the authorization mechanism defined for the object's
   &lt;transfer&gt; command.  If the Allocation Token is invalid or not
   required for the object, the server MUST return an EPP error result
   code of 2201.

   The following is an example &lt;transfer&gt; command to allocate the domain
   object with the Allocation Token:

   C:&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
   C:&lt;epp xmlns="urn:ietf:params:xml:ns:epp-1.0"&gt;
   C:  &lt;command&gt;
   C:    &lt;transfer op="request"&gt;
   C:      &lt;domain:transfer
   C:        xmlns:domain="urn:ietf:params:xml:ns:domain-1.0"&gt;
   C:        &lt;domain:name&gt;example1.tld&lt;/domain:name&gt;
   C:        &lt;domain:period unit="y"&gt;1&lt;/domain:period&gt;
   C:        &lt;domain:authInfo&gt;
   C:          &lt;domain:pw&gt;2fooBAR&lt;/domain:pw&gt;
   C:        &lt;/domain:authInfo&gt;
   C:      &lt;/domain:transfer&gt;
   C:    &lt;/transfer&gt;
   C:    &lt;extension&gt;
   C:      &lt;allocationToken:allocationToken
   C:        xmlns:allocationToken=
   C:          "urn:ietf:params:xml:ns:allocationToken-1.0"&gt;
   C:        abc123
   C:      &lt;/allocationToken:allocationToken&gt;
   C:    &lt;/extension&gt;
   C:    &lt;clTRID&gt;ABC-12345&lt;/clTRID&gt;
   C:  &lt;/command&gt;
   C:&lt;/epp&gt;

   This extension does not add any elements to the EPP &lt;transfer&gt;
   response described in [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.2.5.%20%20EPP%20%3Cupdate%3E%20Command"></a><a class="selflink" href="#section-3.2.5" id="section-3.2.5">3.2.5</a>.  EPP &lt;update&gt; Command</span>

   This extension does not add any elements to the EPP &lt;update&gt; command
   or &lt;update&gt; response described in [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>].





<span class="grey">Gould &amp; Feher                Standards Track                   [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Formal%20Syntax"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Formal Syntax</span>

   One schema is presented here: the EPP Allocation Token Extension
   schema.

   The formal syntax presented here is a complete schema representation
   of the object mapping suitable for automated validation of EPP XML
   instances.  The BEGIN and END tags are not part of the schema; they
   are used to note the beginning and ending of the schema for URI
   registration purposes.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.1.%20%20Allocation%20Token%20Extension%20Schema"></a><a class="selflink" href="#section-4.1" id="section-4.1">4.1</a>.  Allocation Token Extension Schema</span>

   BEGIN
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;schema xmlns="http://www.w3.org/2001/XMLSchema"
     xmlns:allocationToken="urn:ietf:params:xml:ns:allocationToken-1.0"
     targetNamespace="urn:ietf:params:xml:ns:allocationToken-1.0"
     elementFormDefault="qualified"&gt;
     &lt;annotation&gt;
       &lt;documentation&gt;
         Extensible Provisioning Protocol v1.0
         Allocation Token Extension
       &lt;/documentation&gt;
     &lt;/annotation&gt;

     &lt;!-- Element used in info command to get allocation token. --&gt;
     &lt;element name="info"&gt;
       &lt;complexType&gt;
         &lt;complexContent&gt;
           &lt;restriction base="anyType" /&gt;
         &lt;/complexContent&gt;
       &lt;/complexType&gt;
     &lt;/element&gt;

     &lt;!-- Allocation Token used in transform
       commands and info response --&gt;
     &lt;element name="allocationToken"
       type="allocationToken:allocationTokenType" /&gt;
     &lt;simpleType name="allocationTokenType"&gt;
       &lt;restriction base="token"&gt;
         &lt;minLength value="1" /&gt;
       &lt;/restriction&gt;
     &lt;/simpleType&gt;

   &lt;!-- End of schema. --&gt;
   &lt;/schema&gt;
   END



<span class="grey">Gould &amp; Feher                Standards Track                   [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  IANA Considerations</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20XML%20Namespace"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  XML Namespace</span>

   This document uses URNs to describe XML namespaces and XML schemas
   conforming to a registry mechanism described in [<a href="./rfc3688" title='"The IETF XML Registry"'>RFC3688</a>].

   The allocationToken namespace has been registered as follows.

      URI: urn:ietf:params:xml:ns:allocationToken-1.0
      Registrant Contact: IESG
      XML: None.  Namespace URIs do not represent an XML specification.

   The allocationToken XML schema has been registered as follows.

      URI: urn:ietf:params:xml:schema:allocationToken-1.0
      Registrant Contact: IESG
      XML: See the "Formal Syntax" section of this document.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20EPP%20Extension%20Registry"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  EPP Extension Registry</span>

   The following entry has been added to the Extensions for the
   Extensible Provisioning Protocol (EPP) registry, as described in
   [<a href="./rfc7451" title='"Extension Registry for the Extensible Provisioning Protocol"'>RFC7451</a>].

   Name of Extension: Allocation Token Extension for the Extensible
   Provisioning Protocol (EPP)

   Document Status: Standards Track

   Reference: <a href="./rfc8495">RFC 8495</a>

   Registrant: IESG &lt;iesg@ietf.org&gt;

   TLDs: Any

   IPR Disclosure: None

   Status: Active

   Notes: None

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Security%20Considerations"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Security Considerations</span>

   The mapping described in this document does not provide any security
   services beyond those described by EPP [<a href="./rfc5730" title='"Extensible Provisioning Protocol (EPP)"'>RFC5730</a>] and protocol layers
   used by EPP.  The security considerations described in these other
   specifications apply to this specification as well.



<span class="grey">Gould &amp; Feher                Standards Track                   [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


   The mapping acts as a conduit for the passing of Allocation Tokens
   between a client and a server.  The definition of the Allocation
   Token SHOULD be defined outside of this mapping.  The following are
   security considerations in the definition and use of an Allocation
   Token:

   1.  An Allocation Token should be considered secret information by
       the client; it SHOULD be protected at rest and MUST be protected
       in transit.
   2.  An Allocation Token should be single use, meaning it should be
       unique per object and per allocation operation.
   3.  An Allocation Token should have a limited life with some form of
       expiry in the Allocation Token, if generated by a trusted third
       party, or with a server-side expiry, if generated by the server.
   4.  An Allocation Token should use a strong random value if it is
       based on an unsigned code.
   5.  An Allocation Token should leverage digital signatures to confirm
       its authenticity if generated by a trusted third party.
   6.  An Allocation Token that is signed XML should be encoded (e.g.,
       base64 [<a href="./rfc4648" title='"The Base16, Base32, and Base64 Data Encodings"'>RFC4648</a>]) to mitigate server validation issues.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20References"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.1.%20%20Normative%20References"></a><a class="selflink" href="#section-7.1" id="section-7.1">7.1</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>,
              DOI 10.17487/RFC2119, March 1997,
              &lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.

   [<a id="ref-RFC3688">RFC3688</a>]  Mealling, M., "The IETF XML Registry", <a href="https://www.rfc-editor.org/bcp/bcp81">BCP 81</a>, <a href="./rfc3688">RFC 3688</a>,
              DOI 10.17487/RFC3688, January 2004,
              &lt;<a href="https://www.rfc-editor.org/info/rfc3688">https://www.rfc-editor.org/info/rfc3688</a>&gt;.

   [<a id="ref-RFC5730">RFC5730</a>]  Hollenbeck, S., "Extensible Provisioning Protocol (EPP)",
              STD 69, <a href="./rfc5730">RFC 5730</a>, DOI 10.17487/RFC5730, August 2009,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5730">https://www.rfc-editor.org/info/rfc5730</a>&gt;.

   [<a id="ref-RFC5731">RFC5731</a>]  Hollenbeck, S., "Extensible Provisioning Protocol (EPP)
              Domain Name Mapping", STD 69, <a href="./rfc5731">RFC 5731</a>,
              DOI 10.17487/RFC5731, August 2009,
              &lt;<a href="https://www.rfc-editor.org/info/rfc5731">https://www.rfc-editor.org/info/rfc5731</a>&gt;.

   [<a id="ref-RFC8174">RFC8174</a>]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in <a href="./rfc2119">RFC</a>
              <a href="./rfc2119">2119</a> Key Words", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc8174">RFC 8174</a>, DOI 10.17487/RFC8174,
              May 2017, &lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.





<span class="grey">Gould &amp; Feher                Standards Track                   [Page 16]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-17"></span>
<span class="grey"><a href="./rfc8495">RFC 8495</a>                    Allocation Token               November 2018</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.2.%20%20Informative%20References"></a><a class="selflink" href="#section-7.2" id="section-7.2">7.2</a>.  Informative References</span>

   [<a id="ref-RFC4648">RFC4648</a>]  Josefsson, S., "The Base16, Base32, and Base64 Data
              Encodings", <a href="./rfc4648">RFC 4648</a>, DOI 10.17487/RFC4648, October 2006,
              &lt;<a href="https://www.rfc-editor.org/info/rfc4648">https://www.rfc-editor.org/info/rfc4648</a>&gt;.

   [<a id="ref-RFC7451">RFC7451</a>]  Hollenbeck, S., "Extension Registry for the Extensible
              Provisioning Protocol", <a href="./rfc7451">RFC 7451</a>, DOI 10.17487/RFC7451,
              February 2015, &lt;<a href="https://www.rfc-editor.org/info/rfc7451">https://www.rfc-editor.org/info/rfc7451</a>&gt;.

Acknowledgements

   The authors wish to acknowledge the original concept for this
   document and the efforts in the initial draft versions of this
   document by Trung Tran and Sharon Wodjenski.

   Special suggestions that have been incorporated into this document
   were provided by Ben Campbell, Scott Hollenbeck, Benjamin Kaduk,
   Mirja Kuehlewind, Rubens Kuhl, Alexander Mayrhofer, Patrick Mevzek,
   Eric Rescoria, and Adam Roach.

Authors' Addresses

   James Gould
   VeriSign, Inc.
   12061 Bluemont Way
   Reston, VA  20190
   United States of America

   Email: jgould@verisign.com
   URI:   <a href="http://www.verisign.com">http://www.verisign.com</a>


   Kal Feher
   Neustar
   lvl 8/10 Queens Road
   Melbourne, VIC  3004
   Australia

   Email: ietf@feherfamily.org
   URI:   <a href="http://www.neustar.biz">http://www.neustar.biz</a>










Gould &amp; Feher                Standards Track                   [Page 17]
</pre>
</body></html>