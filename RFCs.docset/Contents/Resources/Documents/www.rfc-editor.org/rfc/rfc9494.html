<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9494: Long-Lived Graceful Restart for BGP</title>
<meta content="James Uttaro" name="author"/>
<meta content="Enke Chen" name="author"/>
<meta content="Bruno Decraene" name="author"/>
<meta content="John G. Scudder" name="author"/>
<meta content='
       
This document introduces a BGP capability called the "Long-Lived
Graceful Restart Capability" (or "LLGR Capability").  The benefit of this capability is that stale routes can be retained for a
longer time upon session failure than is provided for by BGP Graceful Restart (as described in RFC 4724). A well-known BGP community called
"LLGR_STALE" is introduced for marking stale routes retained for a
longer time. A second well-known BGP community called "NO_LLGR" is introduced
for marking routes for which these procedures should not be applied.
We also specify that such long-lived stale routes be treated as
the least preferred and that their advertisements be limited to BGP speakers
that have advertised the capability. Use of this extension is not
advisable in all cases, and we provide guidelines to help determine if it
is.
       
       
This memo updates RFC 6368 by specifying that the LLGR_STALE community must be 
propagated into, or out of, the path attributes exchanged between the Provider Edge (PE) and Customer Edge (CE) routers.
       
    ' name="description"/>
<meta content="xml2rfc 3.18.2" name="generator"/>
<meta content="9494" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.18.2
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 56.1
-->
<link href="rfc9494.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef,
.iref + a[href].internal {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://datatracker.ietf.org/doc/draft-ietf-idr-long-lived-gr-06" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9494" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9494</td>
<td class="center">Long-Lived Graceful Restart</td>
<td class="right">November 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Uttaro, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9494">9494</a></dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc6368">6368</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2023-11">November 2023</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">J. Uttaro</div>
<div class="org">Independent Contributor</div>
</div>
<div class="author">
      <div class="author-name">E. Chen</div>
<div class="org">Palo Alto Networks</div>
</div>
<div class="author">
      <div class="author-name">B. Decraene</div>
<div class="org">Orange</div>
</div>
<div class="author">
      <div class="author-name">J. Scudder</div>
<div class="org">Juniper Networks</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9494</h1>
<h1 id="title">Long-Lived Graceful Restart for BGP</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
This document introduces a BGP capability called the "Long-Lived
Graceful Restart Capability" (or "LLGR Capability").  The benefit of this capability is that stale routes can be retained for a
longer time upon session failure than is provided for by BGP Graceful Restart (as described in RFC 4724). A well-known BGP community called
"LLGR_STALE" is introduced for marking stale routes retained for a
longer time. A second well-known BGP community called "NO_LLGR" is introduced
for marking routes for which these procedures should not be applied.
We also specify that such long-lived stale routes be treated as
the least preferred and that their advertisements be limited to BGP speakers
that have advertised the capability. Use of this extension is not
advisable in all cases, and we provide guidelines to help determine if it
is.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
<p id="section-abstract-2">
This memo updates RFC 6368 by specifying that the LLGR_STALE community must be 
propagated into, or out of, the path attributes exchanged between the Provider Edge (PE) and Customer Edge (CE) routers.<a class="pilcrow" href="#section-abstract-2">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9494">https://www.rfc-editor.org/info/rfc9494</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-terminology">Terminology</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p class="keepWithNext" id="section-toc.1-1.2.2.1.1"><a class="auto internal xref" href="#section-2.1">2.1</a>.  <a class="internal xref" href="#name-definitions">Definitions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p class="keepWithNext" id="section-toc.1-1.2.2.2.1"><a class="auto internal xref" href="#section-2.2">2.2</a>.  <a class="internal xref" href="#name-abbreviations">Abbreviations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a class="auto internal xref" href="#section-2.3">2.3</a>.  <a class="internal xref" href="#name-requirements-language">Requirements Language</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-protocol-extensions">Protocol Extensions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="auto internal xref" href="#section-3.1">3.1</a>.  <a class="internal xref" href="#name-long-lived-graceful-restart">Long-Lived Graceful Restart Capability</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="auto internal xref" href="#section-3.2">3.2</a>.  <a class="internal xref" href="#name-llgr_stale-community">LLGR_STALE Community</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="auto internal xref" href="#section-3.3">3.3</a>.  <a class="internal xref" href="#name-no_llgr-community">NO_LLGR Community</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-theory-of-operation">Theory of Operation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="auto internal xref" href="#section-4.1">4.1</a>.  <a class="internal xref" href="#name-use-of-the-graceful-restart">Use of the Graceful Restart Capability</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="auto internal xref" href="#section-4.2">4.2</a>.  <a class="internal xref" href="#name-session-resets">Session Resets</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="auto internal xref" href="#section-4.3">4.3</a>.  <a class="internal xref" href="#name-processing-llgr_stale-route">Processing LLGR_STALE Routes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a class="auto internal xref" href="#section-4.4">4.4</a>.  <a class="internal xref" href="#name-route-selection">Route Selection</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a class="auto internal xref" href="#section-4.5">4.5</a>.  <a class="internal xref" href="#name-errors">Errors</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a class="auto internal xref" href="#section-4.6">4.6</a>.  <a class="internal xref" href="#name-optional-partial-deployment">Optional Partial Deployment Procedure</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.7">
                <p id="section-toc.1-1.4.2.7.1"><a class="auto internal xref" href="#section-4.7">4.7</a>.  <a class="internal xref" href="#name-procedures-when-bgp-is-the-">Procedures When BGP Is the PE-CE Protocol in a VPN</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.7.2.1">
                    <p id="section-toc.1-1.4.2.7.2.1.1"><a class="auto internal xref" href="#section-4.7.1">4.7.1</a>.  <a class="internal xref" href="#name-procedures-when-ebgp-is-the">Procedures When EBGP Is the PE-CE Protocol in a VPN</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.7.2.2">
                    <p id="section-toc.1-1.4.2.7.2.2.1"><a class="auto internal xref" href="#section-4.7.2">4.7.2</a>.  <a class="internal xref" href="#name-procedures-when-ibgp-is-the">Procedures When IBGP Is the PE-CE Protocol in a VPN</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-deployment-considerations">Deployment Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="auto internal xref" href="#section-5.1">5.1</a>.  <a class="internal xref" href="#name-when-bgp-is-the-pe-ce-proto">When BGP Is the PE-CE Protocol in a VPN</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="auto internal xref" href="#section-5.2">5.2</a>.  <a class="internal xref" href="#name-risks-of-depreferencing-rou">Risks of Depreferencing Routes</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-examples-of-operation">Examples of Operation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#section-9">9</a>.  <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="auto internal xref" href="#section-9.1">9.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="auto internal xref" href="#section-9.2">9.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#appendix-A"></a><a class="internal xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-contributors">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="auto internal xref" href="#appendix-C"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
Routing protocols in general, and BGP in particular, have historically been
designed with a focus on "correctness", where a key part of correctness is
for each network element's forwarding state to converge to the current
state of the network as quickly as possible. For this reason, the protocol
was designed to remove state advertised by routers that went down (from a
BGP perspective) as quickly as possible. Over time, this has been relaxed
somewhat, notably by BGP Graceful Restart (GR) <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>; 
however, the paradigm
has remained one of attempting to rapidly remove stale state from the 
network.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">
Over time, two phenomena have arisen that call into question the underlying
      assumptions of this paradigm.<a class="pilcrow" href="#section-1-2">¶</a></p>
<ol class="normal type-1" id="section-1-3" start="1" type="1">
<li id="section-1-3.1">The widespread adoption of 
tunneled forwarding infrastructures (for example, MPLS). Such infrastructures
eliminate the risk of some types of forwarding loops that can arise in 
hop-by-hop forwarding; thus, they reduce one of the motivations for strong 
consistency between forwarding elements.<a class="pilcrow" href="#section-1-3.1">¶</a>
</li>
        <li id="section-1-3.2">The increasing use
of BGP as a transport for data that is less closely associated with packet forwarding
than was originally the case. Examples include the use of BGP for 
auto-discovery (<span><a class="internal xref" href="#RFC4761">Virtual Private LAN Service (VPLS)</a> [<a class="cite xref" href="#RFC4761">RFC4761</a>]</span>) and filter programming 
(<span><a class="internal xref" href="#RFC8955">Flow Specification (FLOWSPEC)</a> [<a class="cite xref" href="#RFC8955">RFC8955</a>]</span>). In these cases, 
BGP data takes on a character more akin to configuration than to conventional
routing.<a class="pilcrow" href="#section-1-3.2">¶</a>
</li>
      </ol>
<p id="section-1-4">
The observations above motivate a desire to offer network operators the 
ability to choose to retain BGP data for a longer period than has hitherto 
been possible when the BGP control plane fails for some reason. Although
the semantics of BGP Graceful Restart <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> are close to those desired,
several gaps exist, most notably in the maximum time for which stale information
can be retained: Graceful Restart imposes a 4095-second upper bound.<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">
In this document, we introduce a BGP capability called the "Long-Lived Graceful
Restart Capability". The goal of this capability is that stale information can be retained for a longer time 
      across a session reset. We also introduce two BGP well-known communities:<a class="pilcrow" href="#section-1-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-6.1">LLGR_STALE to mark such information, and<a class="pilcrow" href="#section-1-6.1">¶</a>
</li>
        <li class="normal" id="section-1-6.2">NO_LLGR to indicate that these procedures should not
      be applied to the marked route.<a class="pilcrow" href="#section-1-6.2">¶</a>
</li>
      </ul>
<p id="section-1-7">Long-lived stale information is to be treated as least preferred, 
and its advertisement limited to BGP speakers that support the
capability. Where possible, we reference the semantics of BGP Graceful
Restart <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> rather than specifying similar semantics in this document.<a class="pilcrow" href="#section-1-7">¶</a></p>
<p id="section-1-8">
The expected deployment model for this extension is that it will only be invoked
for certain address families. This is discussed in more detail in <a class="auto internal xref" href="#deploy">Section 5</a>.


The use of this extension may be combined with that of conventional
Graceful Restart; in such a case, it is invoked after the conventional
Graceful Restart interval has elapsed.  When not combined, LLGR is invoked immediately.

Apart from the potential to greatly extend the timer, the most
obvious difference between LLGR and conventional Graceful Restart is that
in LLGR, routes are "depreferenced"; that is, they are treated as least preferred.  Contrarily, in conventional GR, route preference is not affected.
The design choice to treat long-lived stale routes as least preferred was informed by
the expectation that they might be retained for (potentially) an almost
unbounded period of time; whereas, in the conventional Graceful Restart
case, stale routes are retained for only a brief interval. In the case of Graceful Restart, the 
trade-off between advertising new route status (at the cost of routing churn) 
and not advertising it (at the cost of suboptimal or incorrect route selection)
is resolved in favor of not advertising. In the case of LLGR, it is resolved in 
favor of advertising new state, using stale information only as a last resort.<a class="pilcrow" href="#section-1-8">¶</a></p>
<p id="section-1-9">
<a class="auto internal xref" href="#examples">Section 7</a> provides some simple examples illustrating the 
operation of this extension.<a class="pilcrow" href="#section-1-9">¶</a></p>
</section>
</div>
<section id="section-2">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<section id="section-2.1">
        <h3 id="name-definitions">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-definitions">Definitions</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-2.1-1">
          <dt id="section-2.1-1.1">Depreference:</dt>
          <dd id="section-2.1-1.2" style="margin-left: 1.0em">
A route is said to be depreferenced if
it has its route selection preference reduced in reaction to some
event.<a class="pilcrow" href="#section-2.1-1.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.3">Helper:</dt>
          <dd id="section-2.1-1.4" style="margin-left: 1.0em">
Sometimes referred to as "helper router". During Graceful Restart or Long-Lived
Graceful Restart, the router that detects a session failure and
applies the listed procedures. <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> refers to this as the
"receiving speaker".<a class="pilcrow" href="#section-2.1-1.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.1-1.5">Route:</dt>
          <dd id="section-2.1-1.6" style="margin-left: 1.0em">
In this document, "route" means any information encoded as BGP Network Layer Reachability Information (NLRI) and a
set of path attributes. As discussed above, the connection between such
routes and the installation of forwarding state may be quite remote.<a class="pilcrow" href="#section-2.1-1.6">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.1-2">Further note that, for brevity, in this document when we reference conventional Graceful 
Restart, we cite its base specification, <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>. That specification has been updated by <span>[<a class="cite xref" href="#RFC8538">RFC8538</a>]</span>. The citation to <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>
 is not intended to be limiting.<a class="pilcrow" href="#section-2.1-2">¶</a></p>
</section>
<section id="section-2.2">
        <h3 id="name-abbreviations">
<a class="section-number selfRef" href="#section-2.2">2.2. </a><a class="section-name selfRef" href="#name-abbreviations">Abbreviations</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-2.2-1">
          <dt id="section-2.2-1.1">CE:</dt>
          <dd id="section-2.2-1.2" style="margin-left: 1.0em">Customer Edge (See <span>[<a class="cite xref" href="#RFC4364">RFC4364</a>]</span> for more information on Customer Edge routers.)<a class="pilcrow" href="#section-2.2-1.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.3">EoR:</dt>
          <dd id="section-2.2-1.4" style="margin-left: 1.0em">
End-of-RIB (See <span><a class="relref" href="https://rfc-editor.org/rfc/rfc4724#section-2">Section 2</a> of [<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> for more information on End-of-RIB markers.)<a class="pilcrow" href="#section-2.2-1.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.5">GR:</dt>
          <dd id="section-2.2-1.6" style="margin-left: 1.0em">
Graceful Restart (See <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> for more information on GR.)  This term is also sometimes
referred to herein as "conventional Graceful Restart" or
"conventional GR" to distinguish it from the "Long-Lived Graceful
Restart" or "LLGR" defined by this document.<a class="pilcrow" href="#section-2.2-1.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.7">LLGR:</dt>
          <dd id="section-2.2-1.8" style="margin-left: 1.0em">
Long-Lived Graceful Restart<a class="pilcrow" href="#section-2.2-1.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.9">LLST:</dt>
          <dd id="section-2.2-1.10" style="margin-left: 1.0em">
Long-Lived Stale Time<a class="pilcrow" href="#section-2.2-1.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.11">PE:</dt>
          <dd id="section-2.2-1.12" style="margin-left: 1.0em">
Provider Edge (See <span>[<a class="cite xref" href="#RFC4364">RFC4364</a>]</span> for more information on Provider Edge routers.)<a class="pilcrow" href="#section-2.2-1.12">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-1.13">VRF:</dt>
          <dd id="section-2.2-1.14" style="margin-left: 1.0em">
 VPN Routing and Forwarding (See <span>[<a class="cite xref" href="#RFC4364">RFC4364</a>]</span> for more information on VRF tables.)<a class="pilcrow" href="#section-2.2-1.14">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
<section id="section-2.3">
        <h3 id="name-requirements-language">
<a class="section-number selfRef" href="#section-2.3">2.3. </a><a class="section-name selfRef" href="#name-requirements-language">Requirements Language</a>
        </h3>
<p id="section-2.3-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-2.3-1">¶</a></p>
</section>
</section>
<section id="section-3">
      <h2 id="name-protocol-extensions">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-protocol-extensions">Protocol Extensions</a>
      </h2>
<p id="section-3-1">
A BGP capability and two BGP communities are introduced in the subsections that follow.<a class="pilcrow" href="#section-3-1">¶</a></p>
<div id="llgr_cap">
<section id="section-3.1">
        <h3 id="name-long-lived-graceful-restart">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-long-lived-graceful-restart">Long-Lived Graceful Restart Capability</a>
        </h3>
<p id="section-3.1-1">
The "Long-Lived Graceful Restart Capability", or "LLGR Capability",
(value: 71) is a BGP capability <span>[<a class="cite xref" href="#RFC5492">RFC5492</a>]</span>
that can be used by a BGP speaker to indicate its ability to preserve
its state according to the procedures of this document.  If the LLGR capability is advertised, the Graceful Restart capability  <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>
          <span class="bcp14">MUST</span> also be advertised; see <a class="auto internal xref" href="#use_of_gr">Section 4.1</a>.<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<p id="section-3.1-2">
   
The capability value consists of zero or more tuples &lt;AFI, SAFI,
Flags, LLST&gt; as follows:<a class="pilcrow" href="#section-3.1-2">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1-3">
<pre>+--------------------------------------------------+
| Address Family Identifier (16 bits)              |
+--------------------------------------------------+
| Subsequent Address Family Identifier (8 bits)    |
+--------------------------------------------------+
| Flags for Address Family (8 bits)                |
+--------------------------------------------------+
| Long-Lived Stale Time (24 bits)                  |
+--------------------------------------------------+
| ...                                              |
+--------------------------------------------------+
| Address Family Identifier (16 bits)              |
+--------------------------------------------------+
| Subsequent Address Family Identifier (8 bits)    |
+--------------------------------------------------+
| Flags for Address Family (8 bits)                |
+--------------------------------------------------+
| Long-Lived Stale Time (24 bits)                  |
+--------------------------------------------------+
</pre><a class="pilcrow" href="#section-3.1-3">¶</a>
</div>
<p id="section-3.1-4">
The meaning of the fields are as follows:<a class="pilcrow" href="#section-3.1-4">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-3.1-5">
          <dt id="section-3.1-5.1">
      Address Family Identifier (AFI), Subsequent Address Family
         Identifier (SAFI):
          </dt>
          <dd id="section-3.1-5.2" style="margin-left: 1.5em">
            <p id="section-3.1-5.2.1">
      The AFI and SAFI, taken in combination, indicate that the BGP
      speaker has the ability to preserve its forwarding state for
      the address family during a subsequent BGP restart. Routes may
      be either:<a class="pilcrow" href="#section-3.1-5.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-5.2.2.1">explicitly associated with a particular AFI and SAFI if using
      the encoding described in <span>[<a class="cite xref" href="#RFC4760">RFC4760</a>]</span>, or<a class="pilcrow" href="#section-3.1-5.2.2.1">¶</a>
</li>
              <li class="normal" id="section-3.1-5.2.2.2">implicitly associated with
      &lt;AFI=IPv4, SAFI=Unicast&gt; if using the encoding described in <span>[<a class="cite xref" href="#RFC4271">RFC4271</a>]</span>.<a class="pilcrow" href="#section-3.1-5.2.2.2">¶</a>
</li>
            </ul>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-5.3">
      Flags for Address Family:</dt>
          <dd id="section-3.1-5.4" style="margin-left: 1.5em">
         This field contains bit flags relating to routes that were
         advertised with the given AFI and SAFI.<a class="pilcrow" href="#section-3.1-5.4">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<div class="alignCenter art-text artwork" id="section-3.1-6">
<pre> 0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+
|F|   Reserved  |
+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-3.1-6">¶</a>
</div>
<ul class="compact ulEmpty">
<li class="compact ulEmpty" id="section-3.1-7.1">
      The most significant bit is used to indicate whether the
      state for routes that were advertised with the given AFI and
      SAFI has indeed been preserved during the previous BGP restart. 
      When set (value 1), the bit indicates that the state has been
      preserved. This bit is called the "F bit" since it was
      historically used to indicate the preservation of forwarding state. 
      Use of the F bit is detailed in <a class="auto internal xref" href="#session_resets">Section 4.2</a>.
      The remaining bits are reserved and <span class="bcp14">MUST</span> be set to zero by the
      sender and ignored by the receiver.<a class="pilcrow" href="#section-3.1-7.1">¶</a>
</li>
        </ul>
<span class="break"></span><dl class="dlNewline" id="section-3.1-8">
          <dt id="section-3.1-8.1">
Long-Lived Stale Time:</dt>
          <dd id="section-3.1-8.2" style="margin-left: 1.5em">
      This time (in seconds) specifies how long stale information
      (for this AFI/SAFI) may be retained by the receiver (in addition
      to the period specified by the "Restart Time" in the
      Graceful Restart Capability). Because the potential use cases for
      this extension vary widely, there is no suggested default
      value for the LLST.<a class="pilcrow" href="#section-3.1-8.2">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<section id="section-3.2">
        <h3 id="name-llgr_stale-community">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-llgr_stale-community">LLGR_STALE Community</a>
        </h3>
<p id="section-3.2-1">
The well-known BGP community LLGR_STALE (value: 0xFFFF0006) can be used to mark stale routes
retained for a longer period of time (see <span>[<a class="cite xref" href="#RFC1997">RFC1997</a>]</span> for more information on BGP communities). Such long-lived stale routes are to
be handled according to the procedures specified in <a class="auto internal xref" href="#operation">Section 4</a>.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<p id="section-3.2-2">
An implementation <span class="bcp14">MAY</span> allow users to configure policies that accept,
reject, or modify routes based on the presence or absence of this community.<a class="pilcrow" href="#section-3.2-2">¶</a></p>
</section>
<section id="section-3.3">
        <h3 id="name-no_llgr-community">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-no_llgr-community">NO_LLGR Community</a>
        </h3>
<p id="section-3.3-1">
The well-known BGP community NO_LLGR (value: 0xFFFF0007) can be
used to mark routes that a BGP speaker does not want to be treated according to 
these procedures, as detailed in <a class="auto internal xref" href="#operation">Section 4</a>.<a class="pilcrow" href="#section-3.3-1">¶</a></p>
<p id="section-3.3-2">
An implementation <span class="bcp14">MAY</span> allow users to configure policies that accept,
reject, or modify routes based on the presence or absence of this community.<a class="pilcrow" href="#section-3.3-2">¶</a></p>
</section>
</section>
<div id="operation">
<section id="section-4">
      <h2 id="name-theory-of-operation">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-theory-of-operation">Theory of Operation</a>
      </h2>
<p id="section-4-1">
If a BGP speaker is configured to support the procedures of this
document, it <span class="bcp14">MUST</span> use <span><a class="internal xref" href="#RFC5492">BGP Capabilities
Advertisement</a> [<a class="cite xref" href="#RFC5492">RFC5492</a>]</span> to advertise the Long-Lived Graceful Restart
Capability. The setting of the parameters for an AFI/SAFI depends on
the properties of the BGP speaker, network scale, and local
configuration.<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2">
In the presence of the Long-Lived Graceful Restart Capability, the
procedures specified in <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> continue to apply
unless explicitly revised by this document.<a class="pilcrow" href="#section-4-2">¶</a></p>
<div id="use_of_gr">
<section id="section-4.1">
        <h3 id="name-use-of-the-graceful-restart">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-use-of-the-graceful-restart">Use of the Graceful Restart Capability</a>
        </h3>
<p id="section-4.1-1">
 If the LLGR Capability is advertised, the Graceful Restart capability <span class="bcp14">MUST</span> also be advertised. If it is not so advertised, the LLGR 
Capability <span class="bcp14">MUST</span> be disregarded. The purpose for mandating this
  is to enable the reuse of certain base
  mechanisms that are common to both "flavors" notably: origination,
  collection, and processing of EoR as well as the finite-state-machine modifications and connection-reset logic introduced by GR.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">
We observe that, if support for conventional Graceful Restart is not desired
for the session, the conventional GR phase can be skipped by omitting all
AFIs/SAFIs from the GR Capability, advertising a Restart Time of zero, or
both. <a class="auto internal xref" href="#session_resets">Section 4.2</a>
discusses the interaction of conventional and LLGR.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
</section>
</div>
<div id="session_resets">
<section id="section-4.2">
        <h3 id="name-session-resets">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-session-resets">Session Resets</a>
        </h3>
<p id="section-4.2-1">
<span><a class="internal xref" href="#RFC4724">BGP Graceful Restart</a> [<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> defines conditions
under which a BGP session can reset and have its associated routes
retained. If such a reset occurs for a session in which the LLGR 
Capability has also been exchanged, the following procedures apply:<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-2.1">
If the Graceful Restart Capability that was received does not list all
AFIs/SAFIs supported by the session, then the GR Restart Time shall be deemed zero for those AFIs/SAFIs that are not listed.<a class="pilcrow" href="#section-4.2-2.1">¶</a>
</li>
          <li class="normal" id="section-4.2-2.2">Similarly, if the received LLGR
Capability does not list all AFIs/SAFIs supported by the session, then the Long-Lived Stale Time shall be deemed zero for those AFIs/SAFIs that are not listed.<a class="pilcrow" href="#section-4.2-2.2">¶</a>
</li>
        </ul>
<p id="section-4.2-3">
The following text in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc4724#section-4.2">Section 4.2</a> of [<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> no longer applies:<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<blockquote id="section-4.2-4">
   If the session does not get re-established within the "Restart
   Time" that the peer advertised previously, the Receiving Speaker
   <span class="bcp14">MUST</span> delete all the stale routes from the peer that it is
   retaining.<a class="pilcrow" href="#section-4.2-4">¶</a>
</blockquote>
<p id="section-4.2-5">
and the following procedures are specified instead:<a class="pilcrow" href="#section-4.2-5">¶</a></p>
<p id="section-4.2-6">
After the session goes down, and before the session is re-established,
the stale routes for an AFI/SAFI <span class="bcp14">MUST</span> be retained. The interval for
which they are retained is
limited by the sum of the Restart Time in the received Graceful Restart Capability
and the Long-Lived Stale Time in the received Long-Lived Graceful
Restart Capability. The timers received in the Long-Lived Graceful Restart 
Capability <span class="bcp14">SHOULD</span> be modifiable by local configuration, which may impose an upper bound, a lower bound, or both on their respective values.<a class="pilcrow" href="#section-4.2-6">¶</a></p>
<p id="section-4.2-7">
If the value of the Restart Time or the Long-Lived Stale Time is zero,
the duration of the corresponding period would be zero seconds. For
example, if the Restart Time is zero and the Long-Lived Stale Time is
nonzero, only the procedures particular to LLGR would apply. Conversely, if
the Long-Lived Stale Time is zero and the Restart Time is nonzero, only
the procedures of GR would apply. If both are zero, none of these procedures
would apply, only those of the base BGP specification <span>[<a class="cite xref" href="#RFC4271">RFC4271</a>]</span> (although EoR would
still be used as detailed in <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>). And finally, if both
are nonzero, then the procedures would be applied serially: first those of 
GR and then those of LLGR.  During the first interval, we observe that, while the 
procedures of GR are in effect, route preference would not be affected. 
During the second interval, while LLGR procedures are in effect, routes
would be treated as least preferred as specified elsewhere in this document.<a class="pilcrow" href="#section-4.2-7">¶</a></p>
<p id="section-4.2-8">
Once the Restart Time period ends (including the case in which the Restart
Time is zero), the LLGR period is said to have begun and the following 
procedures <span class="bcp14">MUST</span> be performed:<a class="pilcrow" href="#section-4.2-8">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-9.1">
     For each AFI/SAFI for which it has received a nonzero Long-Lived
     Stale Time, the helper router <span class="bcp14">MUST</span> start a timer for that
     Long-Lived Stale Time. If the timer for the Long-Lived Stale
     Time for a given AFI/SAFI expires before the session is
     re-established, the helper <span class="bcp14">MUST</span> delete all stale routes of that
     AFI/SAFI from the neighbor that it is retaining.<a class="pilcrow" href="#section-4.2-9.1">¶</a>
</li>
          <li class="normal" id="section-4.2-9.2">
     The helper router <span class="bcp14">MUST</span> attach the LLGR_STALE community
     to the stale routes being retained. Note that this requirement
     implies that the routes would need to be readvertised in order to 
     disseminate the modified community.<a class="pilcrow" href="#section-4.2-9.2">¶</a>
</li>
          <li class="normal" id="section-4.2-9.3">   
     If any of the routes from the peer have been marked with 
     the NO_LLGR community, either as sent by the peer
     or as the result of a configured policy, they
     <span class="bcp14">MUST NOT</span> be retained and <span class="bcp14">MUST</span> be removed as per the
     normal operation of <span>[<a class="cite xref" href="#RFC4271">RFC4271</a>]</span>.<a class="pilcrow" href="#section-4.2-9.3">¶</a>
</li>
          <li class="normal" id="section-4.2-9.4">
     The helper router <span class="bcp14">MUST</span> perform the procedures listed in
     <a class="auto internal xref" href="#processing_lls">Section 4.3</a>.<a class="pilcrow" href="#section-4.2-9.4">¶</a>
</li>
        </ul>
<p id="section-4.2-10">
Once the session is re-established, the procedures specified in <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>
apply for the stale routes irrespective of whether the stale routes are
retained during the Restart Time period or the Long-Lived Stale Time period.
However, in the case of consecutive restarts, the previously marked stale routes <span class="bcp14">MUST NOT</span>
be deleted before the timer for the Long-Lived Stale Time expires.<a class="pilcrow" href="#section-4.2-10">¶</a></p>
<p id="section-4.2-11">
Similar to <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>, once the LLGR Period begins, the
   Helper <span class="bcp14">MUST</span> immediately remove all the stale routes from the peer
   that it is retaining for that address family if any of the
   following occur:<a class="pilcrow" href="#section-4.2-11">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-12.1">the F bit
for a specific address family is not set in the newly received LLGR
     Capability, or<a class="pilcrow" href="#section-4.2-12.1">¶</a>
</li>
          <li class="normal" id="section-4.2-12.2">a specific address family is not included in the newly
     received LLGR Capability, or<a class="pilcrow" href="#section-4.2-12.2">¶</a>
</li>
          <li class="normal" id="section-4.2-12.3">the LLGR and accompanying GR Capability are
not received in the re-established session at all.<a class="pilcrow" href="#section-4.2-12.3">¶</a>
</li>
        </ul>
<p id="section-4.2-13">
If a Long-Lived Stale Time timer is running for routes with a given
AFI/SAFI received from a peer, it <span class="bcp14">MUST NOT</span> be updated (other than by
manual operator intervention) until the peer has established and
synchronized a new session. The session is termed "synchronized" for a
given AFI/SAFI once the EoR for that AFI/SAFI has been received from the
peer or once the Selection_Deferral_Timer discussed in <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> expires.<a class="pilcrow" href="#section-4.2-13">¶</a></p>
<p id="section-4.2-14">
The value of a Long-Lived Stale Time in the capability received
from a neighbor <span class="bcp14">MAY</span> be reduced by local configuration.<a class="pilcrow" href="#section-4.2-14">¶</a></p>
<p id="section-4.2-15">

   
While the session is down, the expiration of a Long-Lived Stale Time
timer is treated analogously to the expiration of the Restart Time
timer in <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>, other than applying only to the AFI/SAFI it
accompanies. However, the timer continues to run once the session has
re-established. The timer is neither stopped nor updated until the EoR marker is
received for the relevant AFI/SAFI from the peer. If the timer expires
during synchronization with the peer, any stale routes that the peer has
not refreshed are removed. If the session subsequently resets prior to
becoming synchronized, any remaining routes (for the AFI/SAFI whose LLST
timer expired) <span class="bcp14">MUST</span> be removed immediately.<a class="pilcrow" href="#section-4.2-15">¶</a></p>
</section>
</div>
<div id="processing_lls">
<section id="section-4.3">
        <h3 id="name-processing-llgr_stale-route">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-processing-llgr_stale-route">Processing LLGR_STALE Routes</a>
        </h3>
<p id="section-4.3-1">
A BGP speaker that has advertised the Long-Lived Graceful Restart
Capability to a neighbor <span class="bcp14">MUST</span> perform the following upon
receiving a route from that neighbor with the LLGR_STALE community
or upon attaching the LLGR_STALE community itself per 
<a class="auto internal xref" href="#session_resets">Section 4.2</a>:<a class="pilcrow" href="#section-4.3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3-2.1">
     Treat the route as the least preferred in route selection (see below).
     See <a class="auto internal xref" href="#depref">Section 5.2</a> for a discussion of potential risks inherent in doing
     this.<a class="pilcrow" href="#section-4.3-2.1">¶</a>
</li>
          <li class="normal" id="section-4.3-2.2">
     The route <span class="bcp14">SHOULD NOT</span> be advertised to any neighbor from which the
     Long-Lived Graceful Restart Capability has not been received. The
     exception is described in <a class="auto internal xref" href="#partial_deploy">Section 4.6</a>. Note that this
     requirement implies that such routes should be withdrawn from any such
     neighbor.<a class="pilcrow" href="#section-4.3-2.2">¶</a>
</li>
          <li class="normal" id="section-4.3-2.3">
     The LLGR_STALE community <span class="bcp14">MUST NOT</span> be removed when 
     the route is further advertised.<a class="pilcrow" href="#section-4.3-2.3">¶</a>
</li>
        </ul>
</section>
</div>
<section id="section-4.4">
        <h3 id="name-route-selection">
<a class="section-number selfRef" href="#section-4.4">4.4. </a><a class="section-name selfRef" href="#name-route-selection">Route Selection</a>
        </h3>
<p id="section-4.4-1">
A least preferred route <span class="bcp14">MUST</span> be treated as less preferred than any other route that is not also least preferred. When performing route selection between two routes when both
are least preferred, normal tiebreaking applies. Note that this
would only be expected to happen if the only routes available for selection
were least preferred; in all other cases, such routes would have been
eliminated from consideration.<a class="pilcrow" href="#section-4.4-1">¶</a></p>
</section>
<section id="section-4.5">
        <h3 id="name-errors">
<a class="section-number selfRef" href="#section-4.5">4.5. </a><a class="section-name selfRef" href="#name-errors">Errors</a>
        </h3>
<p id="section-4.5-1">
If the LLGR Capability is received without an accompanying GR Capability,
the LLGR Capability <span class="bcp14">MUST</span> be ignored, that is, the implementation <span class="bcp14">MUST</span> behave
as though no LLGR Capability has been received.<a class="pilcrow" href="#section-4.5-1">¶</a></p>
</section>
<div id="partial_deploy">
<section id="section-4.6">
        <h3 id="name-optional-partial-deployment">
<a class="section-number selfRef" href="#section-4.6">4.6. </a><a class="section-name selfRef" href="#name-optional-partial-deployment">Optional Partial Deployment Procedure</a>
        </h3>
<p id="section-4.6-1">
Ideally, all routers in an Autonomous System (AS) would support this
specification before it were enabled. However, to facilitate incremental
deployment, stale routes <span class="bcp14">MAY</span> be advertised to neighbors that have not
advertised the Long-Lived Graceful Restart Capability under the following
conditions:<a class="pilcrow" href="#section-4.6-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.6-2.1">
     The neighbors <span class="bcp14">MUST</span> be internal (Internal BGP (IBGP) or Confederation) 
     neighbors.<a class="pilcrow" href="#section-4.6-2.1">¶</a>
</li>
          <li class="normal" id="section-4.6-2.2">   
     The NO_EXPORT community <span>[<a class="cite xref" href="#RFC1997">RFC1997</a>]</span> <span class="bcp14">MUST</span> be attached to the stale 
     routes.<a class="pilcrow" href="#section-4.6-2.2">¶</a>
</li>
          <li class="normal" id="section-4.6-2.3">     
     The stale routes <span class="bcp14">MUST</span> have their LOCAL_PREF set to zero. See <a class="auto internal xref" href="#depref">Section 5.2</a> for a
     discussion of potential risks inherent in doing this.<a class="pilcrow" href="#section-4.6-2.3">¶</a>
</li>
        </ul>
<p id="section-4.6-3">
If this strategy for partial deployment is used, the network operator should
set the LOCAL_PREF to zero for all long-lived stale routes throughout the Autonomous System.
This trades off a small reduction in flexibility (ordering may not be
preserved between competing long-lived stale routes) for consistency between routers
that do, and do not, support this specification. Since the consistency of route
selection can be important for preventing forwarding loops, the latter
consideration dominates.<a class="pilcrow" href="#section-4.6-3">¶</a></p>
</section>
</div>
<div id="pe_ce">
<section id="section-4.7">
        <h3 id="name-procedures-when-bgp-is-the-">
<a class="section-number selfRef" href="#section-4.7">4.7. </a><a class="section-name selfRef" href="#name-procedures-when-bgp-is-the-">Procedures When BGP Is the PE-CE Protocol in a VPN</a>
        </h3>
<section id="section-4.7.1">
          <h4 id="name-procedures-when-ebgp-is-the">
<a class="section-number selfRef" href="#section-4.7.1">4.7.1. </a><a class="section-name selfRef" href="#name-procedures-when-ebgp-is-the">Procedures When EBGP Is the PE-CE Protocol in a VPN</a>
          </h4>
<p id="section-4.7.1-1">

     
In VPN deployments (for example, <span>[<a class="cite xref" href="#RFC4364">RFC4364</a>]</span>), External BGP (EBGP) is
often used as a PE-CE protocol. It may be a practical necessity in such
deployments to accommodate interoperation with peer routers that cannot easily be
upgraded to support specifications such as this one. This leads to a problem: the procedures defined elsewhere in this 
document generally prevent LLGR stale routes from being sent across
EBGP sessions that don't support LLGR, but this could prevent the
VPN routes from being used for their intended purpose.<a class="pilcrow" href="#section-4.7.1-1">¶</a></p>
<p id="section-4.7.1-2">
We observe that the principal motivation for restricting the propagation of
"stale" routing information is the desire to prevent it from spreading
without limit once it exits the "safe" perimeter. We further observe that
VPN deployments are typically topologically constrained, making this
concern moot. For this reason, an implementation <span class="bcp14">MAY</span> advertise stale routes
over a PE-CE session, when explicitly configured to do so. That is, the
second rule listed in <a class="auto internal xref" href="#processing_lls">Section 4.3</a> <span class="bcp14">MAY</span> be
disregarded in such cases. All other rules continue to apply. Finally,
if this exception is used, the implementation <span class="bcp14">SHOULD</span>, by default, attach
the NO_EXPORT community to the routes in question, as an additional 
protection against stale routes spreading without limit. Attachment of
the NO_EXPORT community <span class="bcp14">MAY</span> be disabled by explicit configuration in order to 
accommodate exceptional cases.<a class="pilcrow" href="#section-4.7.1-2">¶</a></p>
<p id="section-4.7.1-3">
See further discussion of using an explicitly configured policy to
mitigate this issue in <a class="auto internal xref" href="#deploy_pe_ce">Section 5.1</a>.<a class="pilcrow" href="#section-4.7.1-3">¶</a></p>
</section>
<section id="section-4.7.2">
          <h4 id="name-procedures-when-ibgp-is-the">
<a class="section-number selfRef" href="#section-4.7.2">4.7.2. </a><a class="section-name selfRef" href="#name-procedures-when-ibgp-is-the">Procedures When IBGP Is the PE-CE Protocol in a VPN</a>
          </h4>
<p id="section-4.7.2-1">
If IBGP is used as the PE-CE protocol, following the procedures of
<span>[<a class="cite xref" href="#RFC6368">RFC6368</a>]</span>, then when a PE router imports a VPN
route that contains the ATTR_SET attribute into a destination VRF and
subsequently advertises that route to a CE router:<a class="pilcrow" href="#section-4.7.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.7.2-2.1">
              <p id="section-4.7.2-2.1.1">If the CE router supports the procedures of this document (in
   other words, if the CE router has advertised the LLGR Capability):<a class="pilcrow" href="#section-4.7.2-2.1.1">¶</a></p>
<p id="section-4.7.2-2.1.2" style="margin-left: 1.5em">In
addition to including the path attributes
derived from the ATTR_SET attribute in the advertised route as per <span>[<a class="cite xref" href="#RFC6368">RFC6368</a>]</span>, the
PE router <span class="bcp14">MUST</span> also include the LLGR_STALE community if it is present
in the path attributes of the imported route, even if it is not
present in the ATTR_SET attribute.<a class="pilcrow" href="#section-4.7.2-2.1.2">¶</a></p>
</li>
            <li class="normal" id="section-4.7.2-2.2">
              <p id="section-4.7.2-2.2.1">If the CE router does not support the
     procedures of this document:<a class="pilcrow" href="#section-4.7.2-2.2.1">¶</a></p>
<p id="section-4.7.2-2.2.2" style="margin-left: 1.5em">Then the optional procedures of <a class="auto internal xref" href="#partial_deploy">Section 4.6</a> <span class="bcp14">MAY</span> be followed, attaching the NO_EXPORT
community and setting the value of LOCAL_PREF to zero, overriding the
value found in the ATTR_SET.<a class="pilcrow" href="#section-4.7.2-2.2.2">¶</a></p>
</li>
          </ul>
<p id="section-4.7.2-3">
Similarly, when a PE router receives a route from a CE into its VRF
and subsequently exports that route to a VPN address family:<a class="pilcrow" href="#section-4.7.2-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.7.2-4.1">
              <p id="section-4.7.2-4.1.1">If the PE router supports the procedures of this document (in
other words, if the PE router has advertised the LLGR Capability):<a class="pilcrow" href="#section-4.7.2-4.1.1">¶</a></p>
<p id="section-4.7.2-4.1.2" style="margin-left: 1.5em">In addition to including in the VPN route the ATTR_SET derived from
the path attributes as per <span>[<a class="cite xref" href="#RFC6368">RFC6368</a>]</span>, the PE router
<span class="bcp14">MUST</span> also include the LLGR_STALE community in the VPN route if it is
present in the path attributes of the route as received from the CE.<a class="pilcrow" href="#section-4.7.2-4.1.2">¶</a></p>
</li>
            <li class="normal" id="section-4.7.2-4.2">
              <p id="section-4.7.2-4.2.1">If the PE router does not support the procedures of this document:<a class="pilcrow" href="#section-4.7.2-4.2.1">¶</a></p>
<p id="section-4.7.2-4.2.2" style="margin-left: 1.5em">There exists no ideal solution. The CE could advertise a route with
LLGR_STALE, with the understanding that the LLGR_STALE marking will
only be honored by the provider network if appropriate policy
configuration exists on the PE (see <a class="auto internal xref" href="#deploy_pe_ce">Section 5.1</a>).
It is at least guaranteed that LLGR_STALE will be propagated when
the route is propagated beyond the provider network, or the CE
could refrain from advertising the LLGR_STALE route to the incapable
PE.<a class="pilcrow" href="#section-4.7.2-4.2.2">¶</a></p>
</li>
          </ul>
</section>
</section>
</div>
</section>
</div>
<div id="deploy">
<section id="section-5">
      <h2 id="name-deployment-considerations">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-deployment-considerations">Deployment Considerations</a>
      </h2>
<p id="section-5-1"> 
The deployment considerations discussed in <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span> apply to this
document. In addition, network operators are cautioned to carefully
consider the potential disadvantages of deploying these procedures for a
given AFI/SAFI. Most notably, if used for an AFI/SAFI that conveys
conventional reachability information, the use of a long-lived stale route could
result in a loss of connectivity for the covered prefix. This specification
takes pains to mitigate this risk where possible by making such routes
least preferred and by restricting the scope of such routes to routers that
support these procedures (or, optionally, a single Autonomous System, see
<a class="auto internal xref" href="#partial_deploy">Section 4.6</a>).  However, if a stale route is chosen as best for a given prefix,
then according to the normal rules of IP forwarding, that route will
be used for matching destinations, even if a non-stale less specific 
matching route is also available.  Networks in which the deployment of these procedures
would be especially concerning include those that do not use "tunneled"
forwarding (in other words, those using conventional hop-by-hop forwarding).<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">
Implementations <span class="bcp14">MUST NOT</span> enable these procedures by default. They <span class="bcp14">MUST</span>
require affirmative configuration per AFI/SAFI in order to enable them.<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3">
The procedures of this document do not alter the route resolvability
requirement of <span><a class="relref" href="https://rfc-editor.org/rfc/rfc4271#section-9.1.2.1">Section 9.1.2.1</a> of [<a class="cite xref" href="#RFC4271">RFC4271</a>]</span>. Because of this, it will commonly be
the case that "stale" IBGP routes will only continue to be used if the
router depicted in the next hop remains resolvable, even if its BGP
component is down. Details of IGP
fault-tolerance strategies are beyond the scope of this document. In
addition to the foregoing, it may be advisable to check the viability of
the next hop through other means, for example, 
<span><a class="internal xref" href="#RFC5880">Bidirectional Forwarding Detection (BFD)</a> [<a class="cite xref" href="#RFC5880">RFC5880</a>]</span>. This may be especially
useful in cases where the next hop is known directly at the network layer,
notably EBGP.<a class="pilcrow" href="#section-5-3">¶</a></p>
<p id="section-5-4">
As discussed in this document, after a BGP session goes down and before the
session is re-established, stale routes may be retained for up to two
consecutive periods, controlled by the Restart Time and the Long-Lived
Stale Time, respectively:<a class="pilcrow" href="#section-5-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-5.1">During the first period, routing churn would be
prevented, but with potential persistent packet loss.<a class="pilcrow" href="#section-5-5.1">¶</a>
</li>
        <li class="normal" id="section-5-5.2">During the second
period, potential persistent packet loss may be reduced, but routing churn
would be visible throughout the network.<a class="pilcrow" href="#section-5-5.2">¶</a>
</li>
      </ul>
<p id="section-5-6">The setting of the relevant parameters for a particular application should take into account 
trade-offs, network dynamics, and potential failure scenarios. If needed,
the first period can be bypassed either by local configuration or by setting
the Restart Time in the Graceful Restart Capability to zero and/or not
listing the AFI/SAFI in that capability.<a class="pilcrow" href="#section-5-6">¶</a></p>
<p id="section-5-7">
The setting of the F bit (and the Forwarding State bit of the
accompanying GR Capability) depends, in part, on deployment considerations.
The F bit can be understood as an indication that the Helper should flush
associated routes (if the bit is left clear). As discussed in <a class="auto internal xref" href="#intro">Section 1</a>, an important use case for LLGR is for routes that are more
akin to configuration than to conventional routing. For such routes, it may
make sense to always set the F bit, regardless of other considerations.  Likewise, for control-plane-only entities, such as dedicated route
reflectors that do not participate in the forwarding plane, it makes
sense to always set the F bit.  Overall, the rule of thumb is that if loss of
state on the restarting router can reasonably be expected to cause a
forwarding loop or persistent packet loss, the F bit should be set scrupulously
according to whether state has been retained. Specifics of whether or not the F bit
is set are implementation dependent and may also be controlled
by configuration. Also, for every AFI/SAFI represented in the LLGR Capability
that is also represented in the GR Capability, there will be two corresponding
F bits: the LLGR F bit and the GR F bit. If the LLGR F bit is set, the 
corresponding GR F bit should also be set, since to do otherwise would cause
the state to be cleared on the Receiving Router per the normal rules of GR,
violating the intent of the set LLGR bit.<a class="pilcrow" href="#section-5-7">¶</a></p>
<div id="deploy_pe_ce">
<section id="section-5.1">
        <h3 id="name-when-bgp-is-the-pe-ce-proto">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-when-bgp-is-the-pe-ce-proto">When BGP Is the PE-CE Protocol in a VPN</a>
        </h3>
<p id="section-5.1-1">
As discussed in <a class="auto internal xref" href="#pe_ce">Section 4.7</a>, it may be necessary for a PE to
advertise stale routes to a CE in some VPN deployments, even if the CE
does not support this specification. In that case, the operator
configuring their PE to advertise such routes should notify the operator
of the CE receiving the routes, and the CE should be configured to
depreference the routes.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<p id="section-5.1-2">
Similarly, it may be necessary for a CE to advertise stale routes to a
PE, even if the PE does not support this specification. In that case,
the operator configuring their CE to advertise such routes should notify
the operator of the PE receiving the routes, and the PE should be
configured to depreference the routes.<a class="pilcrow" href="#section-5.1-2">¶</a></p>
<p id="section-5.1-3">
Typical BGP implementations will be able to be configured to
depreference routes by matching on the LLGR_STALE community and setting
the LOCAL_PREF for matching routes to zero, similar to the procedure
described in <a class="auto internal xref" href="#partial_deploy">Section 4.6</a>.<a class="pilcrow" href="#section-5.1-3">¶</a></p>
</section>
</div>
<div id="depref">
<section id="section-5.2">
        <h3 id="name-risks-of-depreferencing-rou">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-risks-of-depreferencing-rou">Risks of Depreferencing Routes</a>
        </h3>
<p id="section-5.2-1">
Depreferencing EBGP routes is considered safe, no different from the 
common practice of applying a routing policy to an EBGP session. 
However, the same is not always true of IBGP.<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<p id="section-5.2-2">
Consistent route selection is a fundamental tenet of IBGP correctness and
safe operation in hop-by-hop routed networks. When routers within an AS apply different criteria in
selecting routes, they can arrive at inconsistent route selections. 
This can lead to the formation of forwarding loops unless some
form of tunneled forwarding is used to prevent "core" routers from 
making a (potentially inconsistent) forwarding decision based on the
IP header.<a class="pilcrow" href="#section-5.2-2">¶</a></p>
<p id="section-5.2-3">
This specification uses the state of a peering session as an input
to the selection criteria, depreferencing routes that are associated
with a session that has gone down but that have not yet aged out. Since
different routers within an AS might have different notions as to 
whether their respective sessions with a given peer are up or down, they might 
apply different selection criteria to routes from that peer. This 
could result in a forwarding loop forming between such routers.<a class="pilcrow" href="#section-5.2-3">¶</a></p>
<p id="section-5.2-4">
For an example of such a forwarding loop, consider the following 
simple topology:<a class="pilcrow" href="#section-5.2-4">¶</a></p>
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-5.2-5.1">
<pre>
A ---- B ---- C ------------------------- D
^                                         ^
|                                         |
R1                                        R2
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a></figcaption></figure>
<p id="section-5.2-6">
In this example, A - D are routers with a full mesh of IBGP sessions
between them (the sessions are not shown). 
The short links have unit cost, the long link has cost 5.
Routers A and D are AS border routers, each advertising some route, R, with the same LOCAL_PREF into
the AS: denoted R1 and R2 in the diagram. In ordinary
operation, it can be seen that routers B and C will select R1 for
forwarding and will forward toward A.<a class="pilcrow" href="#section-5.2-6">¶</a></p>
<p id="section-5.2-7">
Suppose that the session between A and B goes down for some reason, and
it stays down long enough for LLGR processing to be invoked on B. Then, on B,
route R1 will be depreferenced, leading to the selection of R2 by B.
However, C will continue to prefer R1. In this case, it can be seen that a
forwarding loop for packets destined to R would form between B and C. (We
note that other forwarding loop scenarios can be constructed for
conventional GR, but these are generally considered less severe since GR can
remain in effect for a much more limited interval.)<a class="pilcrow" href="#section-5.2-7">¶</a></p>
<p id="section-5.2-8">
The potential benefits of this specification can outweigh the 
risks discussed above, as long as care is exercised in deployment. 
The cardinal rule to be followed is that if a given set of routes is
being used within an AS for hop-by-hop forwarding, enabling LLGR procedures is  not
recommended. If tunneled forwarding (such
as MPLS) is used within the AS, or if routes are being used for 
purposes other than hop-by-hop forwarding, less caution is needed;
however, the operator should still carefully consider the consequences
of enabling LLGR.<a class="pilcrow" href="#section-5.2-8">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-6">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-6-1">
The security implications of the LLGR mechanism defined 
in this document are akin to those incurred by the maintenance of
stale routing information within a network.  However, since the
retention time may be much longer, the window during
which certain attacks are feasible may substantially increase.   
This is particularly
relevant when considering the maintenance of routing information that
is used for service segregation, such as MPLS label entries.<a class="pilcrow" href="#section-6-1">¶</a></p>
<p id="section-6-2">
For MPLS VPN services, the effectiveness of the traffic isolation
between VPNs relies on the correctness of the MPLS labels between
ingress and egress PEs.  In particular, when an egress PE withdraws a
label L1 allocated to a VPN1 route, this label must not be assigned
to a VPN route of a different VPN until all ingress PEs stop using
the old VPN1 route using L1.<a class="pilcrow" href="#section-6-2">¶</a></p>
<p id="section-6-3">
Such a corner case may happen today if the propagation of VPN routes
by BGP messages between PEs takes more time than the label reallocation 
delay on a PE.  Given that we can generally bound the worst-case 
BGP propagation time to a few minutes (for example, 2-5 minutes), the security
breach will not occur if PEs are designed to not reallocate a
previously used and withdrawn label before a few minutes.<a class="pilcrow" href="#section-6-3">¶</a></p>
<p id="section-6-4">
The problem is made worse with BGP GR between PEs because VPN routes can
be stalled for a longer period of time (for example, 20 minutes).<a class="pilcrow" href="#section-6-4">¶</a></p>
<p id="section-6-5">
This is further aggravated by the LLGR extension specified
in this document because VPN routes can be stalled for a much longer
period of time (for example, 2 hours, 1 day).<a class="pilcrow" href="#section-6-5">¶</a></p>
<p id="section-6-6">
In order to exploit the vulnerability described above, an attacker
needs to engineer a specific LLGR state between two PE devices and
also cause the label reallocation to occur such that the two
topologies overlap.  To avoid the potential for a VPN breach, the
operator should ensure that the lower bound for label reuse is greater
than the upper bound on the LLST before enabling LLGR for a VPN
address family.  <a class="auto internal xref" href="#session_resets">Section 4.2</a> discusses the
provision of an upper bound on LLST. Details of features for setting
a lower bound on label reuse time are beyond the scope of this document;
however, factors that might need to be taken into account when setting
this value include:<a class="pilcrow" href="#section-6-6">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-7.1">
      The load of the BGP route churn on a PE (in terms of the number 
      of VPN labels advertised and the churn rate).<a class="pilcrow" href="#section-6-7.1">¶</a>
</li>
        <li class="normal" id="section-6-7.2">The label allocation policy on the PE, which possibly depends upon
      the size of the pool of the VPN labels (which can be restricted by
      hardware considerations or other MPLS usages), the label
      allocation scheme (for example, per route or per VRF/CE), and the
      reallocation policy (for example, least recently used label).<a class="pilcrow" href="#section-6-7.2">¶</a>
</li>
      </ul>
<p id="section-6-8">
Note that <span>[<a class="cite xref" href="#RFC4781">RFC4781</a>]</span>, which defines the Graceful Restart Mechanism
for BGP with MPLS, is also applicable to LLGR.<a class="pilcrow" href="#section-6-8">¶</a></p>
</section>
<div id="examples">
<section id="section-7">
      <h2 id="name-examples-of-operation">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-examples-of-operation">Examples of Operation</a>
      </h2>
<p id="section-7-1">
For illustrative purposes, we present a few examples of how this
specification might be used in practice. These examples are neither
exhaustive nor normative.<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">
Consider the following scenario: A border router, ASBR1, has an IBGP peering with
a route reflector, RR1, from which it learns routes. It has an EBGP peering
with an external peer, EXT, to which it advertises those routes. The external peer
has advertised the GR and LLGR Capabilities to ASBR1. ASBR1 is configured
to support GR and LLGR on its sessions with RR1 and EXT. RR1 advertises a GR Restart Time
of 1 (second) and an LLST of 3600 (seconds):<a class="pilcrow" href="#section-7-2">¶</a></p>
<table class="center" id="table-1">
        <caption><a class="selfRef" href="#table-1">Table 1</a></caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Time</th>
            <th class="text-left" colspan="1" rowspan="1">Event</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t</td>
            <td class="text-left" colspan="1" rowspan="1">ASBR1's IBGP session with RR fails. ASBR1 
          retains RR's routes according to the rules
          of GR <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>.</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t+1</td>
            <td class="text-left" colspan="1" rowspan="1">GR Restart Time expires. ASBR1 transitions
          RR's routes to long-lived stale routes by attaching
          the LLGR_STALE community and depreferencing
          them. However, since it has no backup
          routes, it continues to make use of them. It
          re-announces them to EXT with the 
          LLGR_STALE community attached.</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t+1+3600</td>
            <td class="text-left" colspan="1" rowspan="1">LLST expires. ASBR1 removes RR's stale 
                          routes from its own RIB and sends BGP updates
                          to withdraw them from EXT.</td>
          </tr>
        </tbody>
      </table>
<p id="section-7-4">
Next, imagine the same scenario, but suppose RR1 advertised a GR Restart 
Time of zero, effectively disabling GR. Equally, ASBR1 could have used
a local configuration to override RR1's offered Restart Time, setting it to
a locally configured value of zero:<a class="pilcrow" href="#section-7-4">¶</a></p>
<table class="center" id="table-2">
        <caption><a class="selfRef" href="#table-2">Table 2</a></caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Time</th>
            <th class="text-left" colspan="1" rowspan="1">Event</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t</td>
            <td class="text-left" colspan="1" rowspan="1">ASBR1's IBGP session with RR fails. ASBR1 transitions
          RR's routes to long-lived stale routes by attaching
          the LLGR_STALE community and depreferencing
          them. However, since it has no backup
          routes, it continues to make use of them. It
          re-announces them to EXT with the 
          LLGR_STALE community attached.</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t+0+3600</td>
            <td class="text-left" colspan="1" rowspan="1">LLST expires. ASBR1 removes RR's stale 
                          routes from its own RIB and sends BGP updates
                          to withdraw them from EXT.</td>
          </tr>
        </tbody>
      </table>
<p id="section-7-6">
Next, imagine the original scenario, but consider that the ASBR1-RR1
session comes back up and becomes synchronized 180 seconds after the failure was
detected:<a class="pilcrow" href="#section-7-6">¶</a></p>
<table class="center" id="table-3">
        <caption><a class="selfRef" href="#table-3">Table 3</a></caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Time</th>
            <th class="text-left" colspan="1" rowspan="1">Event</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t</td>
            <td class="text-left" colspan="1" rowspan="1">ASBR1's IBGP session with RR fails. ASBR1 
          retains RR's routes according to the rules
          of GR <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>.</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t+1</td>
            <td class="text-left" colspan="1" rowspan="1">GR Restart Time expires. ASBR1 transitions
          RR's routes to long-lived stale routes by attaching
          the LLGR_STALE community and depreferencing
          them. However, since it has no backup
          routes, it continues to make use of them. It
          re-announces them to EXT with the 
          LLGR_STALE community attached.</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t+1+179</td>
            <td class="text-left" colspan="1" rowspan="1">Session is re-established and resynchronized. ASBR1
          removes the LLGR_STALE community from
          RR1's routes and re-announces them to EXT with
          the LLGR_STALE community removed.</td>
          </tr>
        </tbody>
      </table>
<p id="section-7-8">
Finally, imagine the original scenario, but consider that EXT has not 
advertised the LLGR Capability to ASBR1:<a class="pilcrow" href="#section-7-8">¶</a></p>
<table class="center" id="table-4">
        <caption><a class="selfRef" href="#table-4">Table 4</a></caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Time</th>
            <th class="text-left" colspan="1" rowspan="1">Event</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t</td>
            <td class="text-left" colspan="1" rowspan="1">ASBR1's IBGP session with RR fails. ASBR1 
          retains RR's routes according to the rules
          of GR <span>[<a class="cite xref" href="#RFC4724">RFC4724</a>]</span>.</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t+1</td>
            <td class="text-left" colspan="1" rowspan="1">GR Restart Time expires. ASBR1 transitions
          RR's routes to long-lived stale routes by attaching
          the LLGR_STALE community and depreferencing
          them. However, since it has no backup
          routes, it continues to make use of them. It
          withdraws them from EXT.</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">t+1+3600</td>
            <td class="text-left" colspan="1" rowspan="1">LLST expires. ASBR1 removes RR's stale 
                          routes from its own RIB.</td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<div id="IANA">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-8-1">
This document defines a BGP capability called the "Long-Lived Graceful Restart
Capability". IANA has assigned a value of 71 from the "Capability Codes"
registry.<a class="pilcrow" href="#section-8-1">¶</a></p>
<p id="section-8-2">
 This document introduces two BGP well-known communities:<a class="pilcrow" href="#section-8-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-3.1"> the first called "LLGR_STALE" for marking
 long-lived stale routes, and<a class="pilcrow" href="#section-8-3.1">¶</a>
</li>
        <li class="normal" id="section-8-3.2">the second called "NO_LLGR" for 
 marking routes that should not be retained if stale.<a class="pilcrow" href="#section-8-3.2">¶</a>
</li>
      </ul>
<p id="section-8-4">IANA has assigned these
well-known community values 0xFFFF0006 and 0xFFFF0007, respectively, from the
"BGP Well-known Communities" registry.<a class="pilcrow" href="#section-8-4">¶</a></p>
<p id="section-8-5">
IANA has established a registry called the "Long-Lived Graceful
Restart Flags for Address Family" registry under the 
"Border Gateway Protocol (BGP) Parameters" group. The registration 
procedures are Standards Action (see <span>[<a class="cite xref" href="#RFC8126">RFC8126</a>]</span>). The registry is initially populated as follows:<a class="pilcrow" href="#section-8-5">¶</a></p>
<table class="center" id="table-5">
        <caption><a class="selfRef" href="#table-5">Table 5</a></caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Bit Position</th>
            <th class="text-left" colspan="1" rowspan="1">Name</th>
            <th class="text-left" colspan="1" rowspan="1">Short Name</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">0</td>
            <td class="text-left" colspan="1" rowspan="1">Preservation of state</td>
            <td class="text-left" colspan="1" rowspan="1">F</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9494</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">1-7</td>
            <td class="text-left" colspan="1" rowspan="1">Unassigned</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1"></td>
          </tr>
        </tbody>
      </table>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC1997">[RFC1997]</dt>
        <dd>
<span class="refAuthor">Chandra, R.</span>, <span class="refAuthor">Traina, P.</span>, and <span class="refAuthor">T. Li</span>, <span class="refTitle">"BGP Communities Attribute"</span>, <span class="seriesInfo">RFC 1997</span>, <span class="seriesInfo">DOI 10.17487/RFC1997</span>, <time class="refDate" datetime="1996-08">August 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1997">https://www.rfc-editor.org/info/rfc1997</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4271">[RFC4271]</dt>
        <dd>
<span class="refAuthor">Rekhter, Y., Ed.</span>, <span class="refAuthor">Li, T., Ed.</span>, and <span class="refAuthor">S. Hares, Ed.</span>, <span class="refTitle">"A Border Gateway Protocol 4 (BGP-4)"</span>, <span class="seriesInfo">RFC 4271</span>, <span class="seriesInfo">DOI 10.17487/RFC4271</span>, <time class="refDate" datetime="2006-01">January 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4271">https://www.rfc-editor.org/info/rfc4271</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4724">[RFC4724]</dt>
        <dd>
<span class="refAuthor">Sangli, S.</span>, <span class="refAuthor">Chen, E.</span>, <span class="refAuthor">Fernando, R.</span>, <span class="refAuthor">Scudder, J.</span>, and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"Graceful Restart Mechanism for BGP"</span>, <span class="seriesInfo">RFC 4724</span>, <span class="seriesInfo">DOI 10.17487/RFC4724</span>, <time class="refDate" datetime="2007-01">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4724">https://www.rfc-editor.org/info/rfc4724</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4760">[RFC4760]</dt>
        <dd>
<span class="refAuthor">Bates, T.</span>, <span class="refAuthor">Chandra, R.</span>, <span class="refAuthor">Katz, D.</span>, and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"Multiprotocol Extensions for BGP-4"</span>, <span class="seriesInfo">RFC 4760</span>, <span class="seriesInfo">DOI 10.17487/RFC4760</span>, <time class="refDate" datetime="2007-01">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4760">https://www.rfc-editor.org/info/rfc4760</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5492">[RFC5492]</dt>
        <dd>
<span class="refAuthor">Scudder, J.</span> and <span class="refAuthor">R. Chandra</span>, <span class="refTitle">"Capabilities Advertisement with BGP-4"</span>, <span class="seriesInfo">RFC 5492</span>, <span class="seriesInfo">DOI 10.17487/RFC5492</span>, <time class="refDate" datetime="2009-02">February 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5492">https://www.rfc-editor.org/info/rfc5492</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6368">[RFC6368]</dt>
        <dd>
<span class="refAuthor">Marques, P.</span>, <span class="refAuthor">Raszuk, R.</span>, <span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Kumaki, K.</span>, and <span class="refAuthor">T. Yamagata</span>, <span class="refTitle">"Internal BGP as the Provider/Customer Edge Protocol for BGP/MPLS IP Virtual Private Networks (VPNs)"</span>, <span class="seriesInfo">RFC 6368</span>, <span class="seriesInfo">DOI 10.17487/RFC6368</span>, <time class="refDate" datetime="2011-09">September 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6368">https://www.rfc-editor.org/info/rfc6368</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8538">[RFC8538]</dt>
      <dd>
<span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Fernando, R.</span>, <span class="refAuthor">Scudder, J.</span>, and <span class="refAuthor">J. Haas</span>, <span class="refTitle">"Notification Message Support for BGP Graceful Restart"</span>, <span class="seriesInfo">RFC 8538</span>, <span class="seriesInfo">DOI 10.17487/RFC8538</span>, <time class="refDate" datetime="2019-03">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8538">https://www.rfc-editor.org/info/rfc8538</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC4364">[RFC4364]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span> and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"BGP/MPLS IP Virtual Private Networks (VPNs)"</span>, <span class="seriesInfo">RFC 4364</span>, <span class="seriesInfo">DOI 10.17487/RFC4364</span>, <time class="refDate" datetime="2006-02">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4364">https://www.rfc-editor.org/info/rfc4364</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4761">[RFC4761]</dt>
        <dd>
<span class="refAuthor">Kompella, K., Ed.</span> and <span class="refAuthor">Y. Rekhter, Ed.</span>, <span class="refTitle">"Virtual Private LAN Service (VPLS) Using BGP for Auto-Discovery and Signaling"</span>, <span class="seriesInfo">RFC 4761</span>, <span class="seriesInfo">DOI 10.17487/RFC4761</span>, <time class="refDate" datetime="2007-01">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4761">https://www.rfc-editor.org/info/rfc4761</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4781">[RFC4781]</dt>
        <dd>
<span class="refAuthor">Rekhter, Y.</span> and <span class="refAuthor">R. Aggarwal</span>, <span class="refTitle">"Graceful Restart Mechanism for BGP with MPLS"</span>, <span class="seriesInfo">RFC 4781</span>, <span class="seriesInfo">DOI 10.17487/RFC4781</span>, <time class="refDate" datetime="2007-01">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4781">https://www.rfc-editor.org/info/rfc4781</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5880">[RFC5880]</dt>
        <dd>
<span class="refAuthor">Katz, D.</span> and <span class="refAuthor">D. Ward</span>, <span class="refTitle">"Bidirectional Forwarding Detection (BFD)"</span>, <span class="seriesInfo">RFC 5880</span>, <span class="seriesInfo">DOI 10.17487/RFC5880</span>, <time class="refDate" datetime="2010-06">June 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5880">https://www.rfc-editor.org/info/rfc5880</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time class="refDate" datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8955">[RFC8955]</dt>
      <dd>
<span class="refAuthor">Loibl, C.</span>, <span class="refAuthor">Hares, S.</span>, <span class="refAuthor">Raszuk, R.</span>, <span class="refAuthor">McPherson, D.</span>, and <span class="refAuthor">M. Bacher</span>, <span class="refTitle">"Dissemination of Flow Specification Rules"</span>, <span class="seriesInfo">RFC 8955</span>, <span class="seriesInfo">DOI 10.17487/RFC8955</span>, <time class="refDate" datetime="2020-12">December 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8955">https://www.rfc-editor.org/info/rfc8955</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">
We would like to thank <span class="contact-name">Nabil Bitar</span>, <span class="contact-name">Martin Djernaes</span>, <span class="contact-name">Roberto Fragassi</span>, <span class="contact-name">Jeffrey Haas</span>, <span class="contact-name">Jakob Heitz</span>, <span class="contact-name">Daniam Henriques</span>, <span class="contact-name">Nicolai Leymann</span>, <span class="contact-name">Mike McBride</span>, <span class="contact-name">Paul Mattes</span>, <span class="contact-name">John Medamana</span>, <span class="contact-name">Pranav Mehta</span>, <span class="contact-name">Han Nguyen</span>, <span class="contact-name">Saikat Ray</span>, <span class="contact-name">Valery Smyslov</span>, and <span class="contact-name">Bo Wu</span> for their
valuable input and contributions to the discussion and solution.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
</section>
</div>
<section id="appendix-B">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Clarence Filsfils</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems</span></div>
<div class="left" dir="auto">
<span class="postal-code">1150</span> <span class="locality">Brussels</span>
</div>
<div class="left" dir="auto"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:cf@cisco.com">cf@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Pradosh Mohapatra</span></div>
<div class="left" dir="auto"><span class="org">Sproute Networks</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:mpradosh@yahoo.com">mpradosh@yahoo.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Yakov Rekhter</span></div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Eric Rosen</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:erosen52@gmail.com">erosen52@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Rob Shakir</span></div>
<div class="left" dir="auto"><span class="org">Google, Inc.</span></div>
<div class="left" dir="auto"><span class="street-address">1600 Amphitheatre Parkway</span></div>
<div class="left" dir="auto">
<span class="locality">Mountain View</span>, <span class="region">CA</span> <span class="postal-code">94043</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:robjs@google.com">robjs@google.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Adam Simpson</span></div>
<div class="left" dir="auto"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:adam.1.simpson@nokia.com">adam.1.simpson@nokia.com</a>
</div>
</address>
</section>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">James Uttaro</span></div>
<div class="left" dir="auto"><span class="org">Independent Contributor</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:juttaro@ieee.org">juttaro@ieee.org</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Enke Chen</span></div>
<div class="left" dir="auto"><span class="org">Palo Alto Networks</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:enchen@paloaltonetworks.com">enchen@paloaltonetworks.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Bruno Decraene</span></div>
<div class="left" dir="auto"><span class="org">Orange</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:bruno.decraene@orange.com">bruno.decraene@orange.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">John G. Scudder</span></div>
<div class="left" dir="auto"><span class="org">Juniper Networks</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:jgs@juniper.net">jgs@juniper.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>