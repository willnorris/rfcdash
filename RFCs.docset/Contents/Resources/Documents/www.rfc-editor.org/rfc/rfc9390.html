<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9390: Diameter Group Signaling</title>
<meta content="Mark Jones" name="author"/>
<meta content="Marco Liebsch" name="author"/>
<meta content="Lionel Morand" name="author"/>
<meta content="
       
   In large network deployments, a single Diameter node can support over
   a million concurrent Diameter sessions.  In some use cases, Diameter
   nodes need to apply the same operation to a large group of Diameter
   sessions concurrently.  The Diameter base protocol commands operate
   on a single session so these use cases can result in many thousands
   of command exchanges enforcing the same operation on each session in
   the group.  In order to reduce signaling, it is desirable to
   enable bulk operations on all (or part of) the sessions managed by a
   Diameter node using a single or a few command exchanges.  This
   document specifies the Diameter protocol extensions to achieve this
   signaling optimization. 
    " name="description"/>
<meta content="xml2rfc 3.17.1" name="generator"/>
<meta content="9390" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.17.1
    Python 3.9.15
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 56.1
-->
<link href="rfc9390.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef,
.iref + a[href].internal {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9390" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-dime-group-signaling-14" rel="prev"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9390</td>
<td class="center">Diameter Group Signaling</td>
<td class="right">April 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Jones, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9390">9390</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2023-04">April 2023</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Jones</div>
<div class="org">Individual</div>
</div>
<div class="author">
      <div class="author-name">M. Liebsch</div>
<div class="org">NEC</div>
</div>
<div class="author">
      <div class="author-name">L. Morand</div>
<div class="org">Orange</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9390</h1>
<h1 id="title">Diameter Group Signaling</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
   In large network deployments, a single Diameter node can support over
   a million concurrent Diameter sessions.  In some use cases, Diameter
   nodes need to apply the same operation to a large group of Diameter
   sessions concurrently.  The Diameter base protocol commands operate
   on a single session so these use cases can result in many thousands
   of command exchanges enforcing the same operation on each session in
   the group.  In order to reduce signaling, it is desirable to
   enable bulk operations on all (or part of) the sessions managed by a
   Diameter node using a single or a few command exchanges.  This
   document specifies the Diameter protocol extensions to achieve this
   signaling optimization.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9390">https://www.rfc-editor.org/info/rfc9390</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-terminology">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-protocol-overview">Protocol Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p class="keepWithNext" id="section-toc.1-1.3.2.1.1"><a class="auto internal xref" href="#section-3.1">3.1</a>.  <a class="internal xref" href="#name-building-and-modifying-sess">Building and Modifying Session Groups</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="auto internal xref" href="#section-3.2">3.2</a>.  <a class="internal xref" href="#name-issuing-group-commands">Issuing Group Commands</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="auto internal xref" href="#section-3.3">3.3</a>.  <a class="internal xref" href="#name-permission-considerations">Permission Considerations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-protocol-description">Protocol Description</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="auto internal xref" href="#section-4.1">4.1</a>.  <a class="internal xref" href="#name-session-grouping-capability">Session Grouping Capability Discovery</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a class="auto internal xref" href="#section-4.1.1">4.1.1</a>.  <a class="internal xref" href="#name-capability-discovery-based-">Capability Discovery Based on the Application Id</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a class="auto internal xref" href="#section-4.1.2">4.1.2</a>.  <a class="internal xref" href="#name-capability-discovery-based-o">Capability Discovery Based on AVP Presence</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="auto internal xref" href="#section-4.2">4.2</a>.  <a class="internal xref" href="#name-session-grouping">Session Grouping</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a class="auto internal xref" href="#section-4.2.1">4.2.1</a>.  <a class="internal xref" href="#name-group-assignment-at-session">Group Assignment at Session Initiation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a class="auto internal xref" href="#section-4.2.2">4.2.2</a>.  <a class="internal xref" href="#name-removing-a-session-from-a-s">Removing a Session from a Session Group</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a class="auto internal xref" href="#section-4.2.3">4.2.3</a>.  <a class="internal xref" href="#name-mid-session-group-assignmen">Mid-session Group Assignment Modifications</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a class="auto internal xref" href="#section-4.3">4.3</a>.  <a class="internal xref" href="#name-deleting-a-session-group">Deleting a Session Group</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a class="auto internal xref" href="#section-4.4">4.4</a>.  <a class="internal xref" href="#name-performing-group-operations">Performing Group Operations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.1">
                    <p id="section-toc.1-1.4.2.4.2.1.1"><a class="auto internal xref" href="#section-4.4.1">4.4.1</a>.  <a class="internal xref" href="#name-sending-group-commands">Sending Group Commands</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.2">
                    <p id="section-toc.1-1.4.2.4.2.2.1"><a class="auto internal xref" href="#section-4.4.2">4.4.2</a>.  <a class="internal xref" href="#name-receiving-group-commands">Receiving Group Commands</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.3">
                    <p id="section-toc.1-1.4.2.4.2.3.1"><a class="auto internal xref" href="#section-4.4.3">4.4.3</a>.  <a class="internal xref" href="#name-error-handling-for-group-co">Error Handling for Group Commands</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.4">
                    <p id="section-toc.1-1.4.2.4.2.4.1"><a class="auto internal xref" href="#section-4.4.4">4.4.4</a>.  <a class="internal xref" href="#name-single-session-fallback">Single-Session Fallback</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-operation-with-proxy-agents">Operation with Proxy Agents</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-commands-formatting">Commands Formatting</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="auto internal xref" href="#section-6.1">6.1</a>.  <a class="internal xref" href="#name-formatting-example-group-re">Formatting Example: Group Re-Auth-Request</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-attribute-value-pairs-avps">Attribute-Value Pairs (AVPs)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="auto internal xref" href="#section-7.1">7.1</a>.  <a class="internal xref" href="#name-session-group-info-avp">Session-Group-Info AVP</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="auto internal xref" href="#section-7.2">7.2</a>.  <a class="internal xref" href="#name-session-group-control-vecto">Session-Group-Control-Vector AVP</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a class="auto internal xref" href="#section-7.3">7.3</a>.  <a class="internal xref" href="#name-session-group-id-avp">Session-Group-Id AVP</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a class="auto internal xref" href="#section-7.4">7.4</a>.  <a class="internal xref" href="#name-group-response-action-avp">Group-Response-Action AVP</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a class="auto internal xref" href="#section-7.5">7.5</a>.  <a class="internal xref" href="#name-session-group-capability-ve">Session-Group-Capability-Vector AVP</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-result-code-avp-values">Result-Code AVP Values</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#section-9">9</a>.  <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a class="auto internal xref" href="#section-9.1">9.1</a>.  <a class="internal xref" href="#name-avp-codes">AVP Codes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a class="auto internal xref" href="#section-9.2">9.2</a>.  <a class="internal xref" href="#name-new-registries">New Registries</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#section-10">10</a>. <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="auto internal xref" href="#section-11">11</a>. <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="auto internal xref" href="#appendix-A">Appendix A</a>.  <a class="internal xref" href="#name-session-management-exemplar">Session Management -- Exemplary Session State Machine</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a class="auto internal xref" href="#appendix-A.1">A.1</a>.  <a class="internal xref" href="#name-use-of-groups-for-the-autho">Use of Groups for the Authorization Session State Machine</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-acknowledgments">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a class="auto internal xref" href="#appendix-C"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-1">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
   In large network deployments, a single Diameter node can support over
   a million concurrent Diameter sessions.  In some use cases, Diameter
   nodes need to apply the same operation to a large group of Diameter
   sessions concurrently.  For example, a policy decision point may need
   to modify the authorized quality of service for all active users
   having the same type of subscription.  The Diameter base protocol
   commands operate on a single session so these use cases can result
   in many thousands of command exchanges enforcing the same operation
   on each session in the group.  In order to reduce signaling, it is
   desirable to enable bulk operations on all (or part of) the
   sessions managed by a Diameter node using a single or a few command
   exchanges.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">
   This document describes mechanisms for grouping Diameter sessions and
   applying Diameter commands, such as performing re-authentication,
   re-authorization, termination, and abortion of sessions to a group of
   sessions.  This document does not define a new Diameter application.
   Instead, it defines mechanisms, commands, and Attribute-Value Pairs (AVPs) that may be used by any
   Diameter application that requires management of groups of sessions.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">
   These mechanisms take the following design goals and features into
   account:<a class="pilcrow" href="#section-1-3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-4.1">minimal impact to existing applications<a class="pilcrow" href="#section-1-4.1">¶</a>
</li>
        <li class="normal" id="section-1-4.2">extension of existing commands' Command Code Format (CCF) with
     optional AVPs to enable grouping and group operations<a class="pilcrow" href="#section-1-4.2">¶</a>
</li>
        <li class="normal" id="section-1-4.3">fallback to single-session operation<a class="pilcrow" href="#section-1-4.3">¶</a>
</li>
        <li class="normal" id="section-1-4.4">implicit discovery of capability to support grouping and group
     operations in case no external mechanism is available to discover a
     Diameter peer's capability to support session grouping and session group
     operations<a class="pilcrow" href="#section-1-4.4">¶</a>
</li>
      </ul>
</section>
</div>
<div id="sect-2">
<section id="section-2">
      <h2 id="name-terminology">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
      </h2>
<p id="section-2-1">
   The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>",
   "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>", "<span class="bcp14">MAY</span>", and
   "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as described in BCP
   14 <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> when, and only when, they appear in all
   capitals, as shown here.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">
   This document uses terminology defined in <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.<a class="pilcrow" href="#section-2-2">¶</a></p>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-protocol-overview">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-protocol-overview">Protocol Overview</a>
      </h2>
<div id="sect-3.1">
<section id="section-3.1">
        <h3 id="name-building-and-modifying-sess">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-building-and-modifying-sess">Building and Modifying Session Groups</a>
        </h3>
<p id="section-3.1-1">
   In order to accommodate bulk operations on Diameter sessions, the
   concept of session groups is introduced.  Once sessions are added to
   a group, a command acting on the group will affect all the member
   sessions.<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<p id="section-3.1-2">
   The client and the server can assign a new Diameter session to a group, e.g.,
   in case the subscription profile of the associated user has similar
   characteristics as the profile of other users whose Diameter session
   has been assigned to one or multiple groups.  A single command can be
   issued and applied to all sessions associated with one or more such groups,
   e.g., to adjust common profile or policy settings.<a class="pilcrow" href="#section-3.1-2">¶</a></p>
<p id="section-3.1-3">
   The assignment of a Diameter session to a group can be changed during
   an ongoing session (mid-session).  For example, if a user's
   subscription profile changes mid-session, a Diameter server may
   remove a session from an existing group and assign this session to a
   different group that is more appropriate for the new subscription
   profile.<a class="pilcrow" href="#section-3.1-3">¶</a></p>
<p id="section-3.1-4">
   In the case of mobile users, the user's session may get transferred
   mid-session to a new Diameter client during handover and assigned to
   a different group, which is maintained at the new Diameter client.<a class="pilcrow" href="#section-3.1-4">¶</a></p>
<p id="section-3.1-5">
   It may be required to delete a session group, e.g., at the expiry of a
   promotional period that applied to multiple subscriber profiles.
   Deletion of such group requires subsequent individual treatment of
   each of the assigned sessions.  A node may decide to assign some of
   these sessions to any other existing or new group.<a class="pilcrow" href="#section-3.1-5">¶</a></p>
</section>
</div>
<div id="sect-3.2">
<section id="section-3.2">
        <h3 id="name-issuing-group-commands">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-issuing-group-commands">Issuing Group Commands</a>
        </h3>
<p id="section-3.2-1">
   Changes in the network condition may result in the Diameter server's
   decision to close all sessions in a given group.  For example, the
   server issues a single Session Termination Request (STR) command,
   including the identifier of the group of sessions that are to be
   terminated.  The Diameter client treats the STR as a group command and
   initiates the termination of all sessions associated with the
   identified group.  Subsequently, the client confirms the successful
   termination of these sessions to the server by sending a single
   Session Termination Answer (STA) command, which includes the
   identifier of the group.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
</section>
</div>
<div id="sect-3.3">
<section id="section-3.3">
        <h3 id="name-permission-considerations">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-permission-considerations">Permission Considerations</a>
        </h3>
<p id="section-3.3-1">
   Permission considerations in the context of this document apply to the
   permission of Diameter nodes to build new session groups, to assign/remove
   a session to/from a session group, and to delete an existing
   session group.<a class="pilcrow" href="#section-3.3-1">¶</a></p>
<p id="section-3.3-2">
   When a client or server decides to create a new session group,
   e.g., to group all sessions that share certain characteristics, this
   node builds a session group identifier according to the rules
   described in <a class="auto internal xref" href="#sect-7.3">Section 7.3</a> and becomes the owner of the group.<a class="pilcrow" href="#section-3.3-2">¶</a></p>
<p id="section-3.3-3">
   After the creation of a session group, a session can be added to this
   session group by either the client or the server.  However, a session
   can only be removed from a session group by the Diameter node (client
   or server) that has assigned this session to the session group.<a class="pilcrow" href="#section-3.3-3">¶</a></p>
<p id="section-3.3-4">
   A session group can only be deleted by the owner of the session
   group, resulting in individual treatment of the sessions that were
   assigned to this session group.<a class="pilcrow" href="#section-3.3-4">¶</a></p>
<p id="section-3.3-5">
   Diameter applications with implicit support for session groups <span class="bcp14">MAY</span>
   define a more constrained permission model.  For example, a more
   constrained model could require that a client not remove a
   session from a group that is owned by the server.  Details about
   enforcing a more constrained permission model are out of scope of
   this specification.<a class="pilcrow" href="#section-3.3-5">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4">
<section id="section-4">
      <h2 id="name-protocol-description">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-protocol-description">Protocol Description</a>
      </h2>
<div id="sect-4.1">
<section id="section-4.1">
        <h3 id="name-session-grouping-capability">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-session-grouping-capability">Session Grouping Capability Discovery</a>
        </h3>
<p id="section-4.1-1">
   Diameter nodes <span class="bcp14">SHOULD NOT</span> perform group operations with peer nodes
   unless the node has advertised support for session grouping and group
   operations.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<div id="sect-4.1.1">
<section id="section-4.1.1">
          <h4 id="name-capability-discovery-based-">
<a class="section-number selfRef" href="#section-4.1.1">4.1.1. </a><a class="section-name selfRef" href="#name-capability-discovery-based-">Capability Discovery Based on the Application Id</a>
          </h4>
<p id="section-4.1.1-1">
   Newly defined Diameter applications may intrinsically support Diameter
   session grouping and group operations. In these cases, there is no need 
  of a specific discovery mechanism for the support of session grouping 
  capability besides the discovery of the Application Id assigned to the 
  application advertised during the capability exchange phase described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6733#section-5.3">Section 5.3</a> of [<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.<a class="pilcrow" href="#section-4.1.1-1">¶</a></p>
<p id="section-4.1.1-2">
   System-specific and deployment-specific means, as well as out-of-band
   mechanisms for capability discovery, can be used to announce nodes'
   support for session grouping and session group operations.  In such
   case, the optional Session-Group-Capability-Vector AVP, as described
   in <a class="auto internal xref" href="#sect-4.1.2">Section 4.1.2</a>, can be omitted in Diameter messages being exchanged
   between nodes.<a class="pilcrow" href="#section-4.1.1-2">¶</a></p>
</section>
</div>
<div id="sect-4.1.2">
<section id="section-4.1.2">
          <h4 id="name-capability-discovery-based-o">
<a class="section-number selfRef" href="#section-4.1.2">4.1.2. </a><a class="section-name selfRef" href="#name-capability-discovery-based-o">Capability Discovery Based on AVP Presence</a>
          </h4>
<p id="section-4.1.2-1">
   If no other mechanism for capability discovery is deployed to enable
   Diameter nodes to learn about nodes' capability to support session grouping
   and group commands for a given application, a Diameter node <span class="bcp14">SHOULD</span> append
   the Session-Group-Capability-Vector AVP to any Diameter application
   messages exchanged with the other Diameter nodes to announce its capability
   to support session grouping and session group operations for the advertised
   application.  Implementations following the specification as per this
   document <span class="bcp14">MUST</span> set the BASE_SESSION_GROUP_CAPABILITY flag of the
   Session-Group-Capability-Vector AVP.<a class="pilcrow" href="#section-4.1.2-1">¶</a></p>
<p id="section-4.1.2-2">
   When a Diameter node receives at least one Session-Group-Capability-Vector
   AVP from a node with the BASE_SESSION_GROUP_CAPABILITY flag set, the
   receiving Diameter node discovers the supported session grouping capability
   of the sending Diameter node for the advertised application and <span class="bcp14">MUST</span> cache
   this information for the lifetime of the routing table entry associated
   with the peer identity / Application Id pair (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6733#section-2.7">Section 2.7</a> of [<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>).<a class="pilcrow" href="#section-4.1.2-2">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4.2">
<section id="section-4.2">
        <h3 id="name-session-grouping">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-session-grouping">Session Grouping</a>
        </h3>
<p id="section-4.2-1">
   This specification does not limit the number of session groups to
   which a single session is assigned.  It is left to the implementation
   of an application to determine such limitations.  If an application
   facilitates a session to belong to multiple session groups, the
   application <span class="bcp14">MUST</span> maintain consistency of associated application
   session states for these multiple session groups.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
<p id="section-4.2-2">
   Either Diameter node (client or server) can initiate the assignment
   of a session to a single or multiple session groups.  Modification of
   a group by removing or adding a single or multiple user sessions can
   be initiated and performed mid-session by either Diameter node
   responsible for the session assignment to this group.  Although 
   Diameter is a peer-to-peer protocol, Diameter Authentication, Authorization, and Accounting (AAA) applications
   typically assign the role of a "Diameter client" to the Diameter node
   initiating the Diameter session and the role of "Diameter server" to
   the node authorizing the Diameter session.  This specification does
   not restrict group creation, assignment, or deletion actions to a
   specific role.  In the following sections, "Diameter node" is used to
   refer to either role.  <a class="auto internal xref" href="#sect-5">Section 5</a> describes particularities about
   session grouping and performing group commands when relay agents or
   proxies are deployed.<a class="pilcrow" href="#section-4.2-2">¶</a></p>
<p id="section-4.2-3">
   Any Diameter node that has advertised support of session grouping and
   group operations <span class="bcp14">MUST</span> store and maintain the group assignment as part
   of the session's state.  A list of all known session groups is
   locally maintained on each node, with each group pointing to individual
   sessions being assigned to the group.  Each Diameter node <span class="bcp14">MUST</span> also
   keep a record about sessions that it has assigned to a session group.<a class="pilcrow" href="#section-4.2-3">¶</a></p>
<div id="sect-4.2.1">
<section id="section-4.2.1">
          <h4 id="name-group-assignment-at-session">
<a class="section-number selfRef" href="#section-4.2.1">4.2.1. </a><a class="section-name selfRef" href="#name-group-assignment-at-session">Group Assignment at Session Initiation</a>
          </h4>
<p id="section-4.2.1-1">
   To assign a session to a group at session initiation, a Diameter
   client sends a service-specific request, e.g., Network Access Server Requirements (NASREQ) AA-Request
   <span>[<a class="cite xref" href="#RFC7155">RFC7155</a>]</span>, containing one or more session group identifiers.  Each of
   these groups <span class="bcp14">MUST</span> be identified by a unique Session-Group-Id
   contained in a separate Session-Group-Info AVP, as specified in
   <a class="auto internal xref" href="#sect-7">Section 7</a>.<a class="pilcrow" href="#section-4.2.1-1">¶</a></p>
<p id="section-4.2.1-2">
   The client may choose one or multiple session groups from a list of
   existing session groups.  Alternatively, the client may decide to
   create a new group to which the session is assigned and identify
   itself in the &lt;DiameterIdentity&gt; portion of the Session-Group-Id AVP,
   as per <a class="auto internal xref" href="#sect-7.3">Section 7.3</a>.  For all assignments of a session to an active
   session group made by the client or the server, the
   SESSION_GROUP_STATUS flag in the Session-Group-Info AVP, which
   identifies the session group, <span class="bcp14">MUST</span> be set.  A set
   SESSION_GROUP_STATUS flag indicates that the identified session group
   has just been created or is still active.<a class="pilcrow" href="#section-4.2.1-2">¶</a></p>
<p id="section-4.2.1-3">
   The client <span class="bcp14">MUST</span> set the SESSION_GROUP_ALLOCATION_ACTION flag of the
   Session-Group-Control-Vector AVP in each appended Session-Group-Info
   AVP to indicate that the session contained in the request should be
   assigned to the identified session group.<a class="pilcrow" href="#section-4.2.1-3">¶</a></p>
<p id="section-4.2.1-4">
   The client may also indicate in the request that it supports
   assignment of the session to one or more groups by the server.  In
   such case, the client <span class="bcp14">MUST</span> include the Session-Group-Info AVP in
   the request, including the Session-Group-Control-Vector AVP with the
   SESSION_GROUP_ALLOCATION_ACTION flag set but no Session-Group-Id AVP.<a class="pilcrow" href="#section-4.2.1-4">¶</a></p>
<p id="section-4.2.1-5">
   If the Diameter server receives a command request from a Diameter client
   and the command includes at least one Session-Group-Info AVP with the
   SESSION_GROUP_ALLOCATION_ACTION flag in the Session-Group-Control-Vector
   AVP set, the server can accept or reject the request for group assignment.
   Reasons for rejection may be, e.g., lack of resources for managing
   additional groups.  When rejected, the session <span class="bcp14">MUST NOT</span> be assigned to any
   session group.<a class="pilcrow" href="#section-4.2.1-5">¶</a></p>
<p id="section-4.2.1-6">
   If the Diameter server accepts the client's request for a group
   assignment, the server <span class="bcp14">MUST</span> assign the new session to each (one or more)
   of the identified session groups when present in the Session-
   Group-Info AVP. If
   one or multiple identified session groups are not already stored by the
   server, the server <span class="bcp14">MUST</span> store the one or more newly identified groups to its local
   list of known session groups.
   When sending the response to the client,
   e.g., a service-specific authorization response, as per NASREQ AA-Answer <span>[<a class="cite xref" href="#RFC7155">RFC7155</a>]</span>,
   the server <span class="bcp14">MUST</span> include all Session-Group-Info AVPs received in the
   client's request.<a class="pilcrow" href="#section-4.2.1-6">¶</a></p>
<p id="section-4.2.1-7">
   In addition to the one or multiple session groups identified in the
   client's request, the server may decide to assign the new session to
   one or multiple additional groups.  In such case, the server <span class="bcp14">MUST</span>
   add to the response the additional Session-Group-Info AVPs, each
   identifying a session group to which the new session is assigned by
   the server.  Each of the Session-Group-Info AVPs added by the server
   <span class="bcp14">MUST</span> have the SESSION_GROUP_ALLOCATION_ACTION flag set in the
   Session-Group-Control-Vector AVP.<a class="pilcrow" href="#section-4.2.1-7">¶</a></p>
<p id="section-4.2.1-8">
   If the Diameter server rejects the client's request for a group
   assignment, the server sends the response to the client, e.g., a
   service-specific authorization response, as per NASREQ AA-Answer <span>[<a class="cite xref" href="#RFC7155">RFC7155</a>]</span>, and
   <span class="bcp14">MUST</span> include all Session-Group-Info AVPs received in the client's
   request (if any) while clearing the SESSION_GROUP_ALLOCATION_ACTION
   flag of the Session-Group-Control-Vector AVP.  The server <span class="bcp14">MAY</span> still
   accept the client's request for the identified session to proceed
   despite rejecting the group assignment.  The response sent to the
   client will then indicate success in the result code.  In this case,
   the session is treated as a single session without assignment to any
   session group by the Diameter nodes.<a class="pilcrow" href="#section-4.2.1-8">¶</a></p>
<p id="section-4.2.1-9">
   If the assignment of the session to one or some of the multiple identified
   session groups fails, the session group assignment is treated as a failure.
   In such case, the session is treated as a single session without assignment to
   any session group by the Diameter nodes.  The server sends the response to
   the client and <span class="bcp14">MAY</span> include those Session-Group-Info AVPs for which the
   group assignment failed.  The SESSION_GROUP_ALLOCATION_ACTION flag of
   included Session-Group-Info AVPs <span class="bcp14">MUST</span> be cleared.<a class="pilcrow" href="#section-4.2.1-9">¶</a></p>
<p id="section-4.2.1-10">
   If the Diameter server receives a command request from a Diameter client
   and the command includes a Session-Group-Info AVP that does not include a
   Session-Group-Id AVP, the server <span class="bcp14">MAY</span> decide to assign the session to one or
   multiple session groups.  For each session group to which the server
   assigns the new session, the server includes a Session-Group-Info AVP with
   the Session-Group-Id AVP, identifying a session group in the response sent
   to the client.  Each of the Session-Group-Info AVPs included by the server
   <span class="bcp14">MUST</span> have the SESSION_GROUP_ALLOCATION_ACTION flag of the
   Session-Group-Control-Vector AVP set.<a class="pilcrow" href="#section-4.2.1-10">¶</a></p>
<p id="section-4.2.1-11">
   If the Diameter server receives a command request from a Diameter
   client and the command does not contain any Session-Group-Info AVPs,
   the server <span class="bcp14">MUST NOT</span> assign the new session to any session group but
   treat the request the same as for a single session.  The server <span class="bcp14">MUST NOT</span>
   return any Session-Group-Info AVP in the command response.<a class="pilcrow" href="#section-4.2.1-11">¶</a></p>
<p id="section-4.2.1-12">
   If the Diameter client receives a response to its previously issued
   request from the server and the response includes at least one
   Session-Group-Info AVP with the SESSION_GROUP_ALLOCATION_ACTION
   flag of the associated Session-Group-Control-Vector AVP set, the
   client <span class="bcp14">MUST</span> add the new session to all session groups as identified
   in one or multiple Session-Group-Info AVPs.  If the Diameter
   client fails to add the session to one or more session groups as
   identified in one or multiple Session-Group-Info AVPs, the client
   <span class="bcp14">MUST</span> terminate the session.  The client <span class="bcp14">MAY</span> send a subsequent request
   for session initiation to the server without requesting the
   assignment of the session to a session group.<a class="pilcrow" href="#section-4.2.1-12">¶</a></p>
<p id="section-4.2.1-13">
   If the Diameter client receives a response to its previously issued
   request from the server and one or more Session-Group-Info AVPs
   have the SESSION_GROUP_ALLOCATION_ACTION flag of the associated
   Session-Group-Control-Vector AVP cleared, the client <span class="bcp14">MUST</span> terminate
   the assignment of the session to one or multiple groups.  If the
   response from the server indicates success in the result code but
   only the assignment of the session to a session group has been
   rejected by the server, the client treats the session as a single
   session without group assignment.<a class="pilcrow" href="#section-4.2.1-13">¶</a></p>
<p id="section-4.2.1-14">
   If a Diameter client sends a request for session initiation
   containing one or more Session-Group-Info AVPs but the response from
   the Diameter server does not contain a Session-Group-Info AVP, the
   Diameter client <span class="bcp14">MUST</span> proceed as if the request was processed without
   group assignments.  The Diameter client <span class="bcp14">MUST NOT</span> retry to request
   group assignment for this session but <span class="bcp14">MAY</span> try to request group
   assignment for other new sessions.<a class="pilcrow" href="#section-4.2.1-14">¶</a></p>
</section>
</div>
<div id="sect-4.2.2">
<section id="section-4.2.2">
          <h4 id="name-removing-a-session-from-a-s">
<a class="section-number selfRef" href="#section-4.2.2">4.2.2. </a><a class="section-name selfRef" href="#name-removing-a-session-from-a-s">Removing a Session from a Session Group</a>
          </h4>
<p id="section-4.2.2-1">
   When a Diameter client decides to remove a session from a particular
   session group, the client sends a service-specific re-authorization request
   to the server and adds one Session-Group-Info AVP to the request for each
   session group from which the client wants to remove the session.  The
   session that is to be removed from a group is identified in the Session-Id
   AVP of the command request.  The SESSION_GROUP_ALLOCATION_ACTION flag of
   the Session-Group-Control-Vector AVP in each Session-Group-Info AVP <span class="bcp14">MUST</span> be
   cleared to indicate removal of the session from the session group
   identified in the associated Session-Group-Id AVP.<a class="pilcrow" href="#section-4.2.2-1">¶</a></p>
<p id="section-4.2.2-2">
   When a Diameter client decides to remove a session from all session
   groups to which the session has been previously assigned, the client
   sends a service-specific re-authorization request to the server and
   adds a single Session-Group-Info AVP to the request that has the
   SESSION_GROUP_ALLOCATION_ACTION flag cleared and the Session-Group-Id
   AVP omitted.  The Session-Id AVP in the re-authorization request
   identifies the session that is to be removed from all groups to which
   it had been previously assigned.<a class="pilcrow" href="#section-4.2.2-2">¶</a></p>
<p id="section-4.2.2-3">
   If the Diameter server receives a request from the client that has at
   least one Session-Group-Info AVP appended with the
   SESSION_GROUP_ALLOCATION_ACTION flag cleared, the server <span class="bcp14">MUST</span> remove the
   session from the session group identified in the associated
   Session-Group-Id AVP.  If the request includes at least one
   Session-Group-Info AVP with the SESSION_GROUP_ALLOCATION_ACTION flag
   cleared and no Session-Id AVP present, the server <span class="bcp14">MUST</span> remove the session
   from all session groups to which the session has been previously assigned.
   The server <span class="bcp14">MUST</span> include in its response to the requesting client all
   Session-Group-Id AVPs received in the request.<a class="pilcrow" href="#section-4.2.2-3">¶</a></p>
<p id="section-4.2.2-4">
     When the Diameter server decides to remove a session from one or
     multiple particular session groups or from all session groups to
     which the session has been assigned beforehand, the server sends a
     Re-Auth-Request (RAR) or a service-specific server-initiated
     request to the client, indicating the session in the Session-Id AVP
     of the request. The client sends a Re-Auth-Answer (RAA) or
     a service-specific answer to respond to the server's request.  The
   client subsequently sends a service-specific re-authorization request
   containing one or multiple Session-Group-Info AVPs, each indicating a
   session group to which the session had been previously assigned.  To
   indicate removal of the indicated session from one or multiple
   session groups, the server sends a service-specific authorization response to
   the client, containing a list of Session-Group-Info AVPs with the
   SESSION_GROUP_ALLOCATION_ACTION flag cleared and the Session-Group-Id
   AVP identifying the session group from which the session should be
   removed.  The server <span class="bcp14">MAY</span> include with the service-specific authorization
   response a list of Session-Group-Info AVPs with the
   SESSION_GROUP_ALLOCATION_ACTION flag set and the Session-Group-Id AVP
   identifying session groups to which the session remains subscribed.
   If the server decides to remove the identified session from all
   session groups to which the session has been previously assigned,
   the server includes in the service-specific authorization response at least
   one Session-Group-Info AVP with the SESSION_GROUP_ALLOCATION_ACTION
   flag cleared and Session-Group-Id AVP absent.<a class="pilcrow" href="#section-4.2.2-4">¶</a></p>
</section>
</div>
<div id="sect-4.2.3">
<section id="section-4.2.3">
          <h4 id="name-mid-session-group-assignmen">
<a class="section-number selfRef" href="#section-4.2.3">4.2.3. </a><a class="section-name selfRef" href="#name-mid-session-group-assignmen">Mid-session Group Assignment Modifications</a>
          </h4>
<p id="section-4.2.3-1">
   Either Diameter node (client or server) can modify the group
   membership of an active Diameter session according to the specified
   permission considerations.<a class="pilcrow" href="#section-4.2.3-1">¶</a></p>
<p id="section-4.2.3-2">
   To update an assigned group mid-session, a Diameter client sends a
   service-specific re-authorization request to the server, containing one or
   multiple Session-Group-Info AVPs with the SESSION_GROUP_ALLOCATION_ACTION
   flag set and the Session-Group-Id AVP present, identifying the session
   group to which the session should be assigned.  With the same message, the
   client <span class="bcp14">MAY</span> send one or multiple Session-Group-Info AVPs with the
   SESSION_GROUP_ALLOCATION_ACTION flag cleared and the Session-Group-Id AVP
   identifying the session group from which the identified session is to be
   removed.  To remove the session from all previously assigned session
   groups, the client includes at least one Session-Group-Info AVP with the
   SESSION_GROUP_ALLOCATION_ACTION flag cleared and no Session-Group-Id AVP
   present.  When the server received the service-specific re-authorization
   request, it <span class="bcp14">MUST</span> update its locally maintained view of the session groups
   for the identified session according to the appended Session-Group-Info
   AVPs.  The server sends a service-specific authorization response to the client
   containing one or multiple Session-Group-Info AVPs with the
   SESSION_GROUP_ALLOCATION_ACTION flag set and the Session-Group-Id AVP
   identifying the new session group to which the identified session has been
   assigned.<a class="pilcrow" href="#section-4.2.3-2">¶</a></p>
<p id="section-4.2.3-3">
     When a Diameter server decides to update assigned groups mid-session, it
     sends a Re-Auth-Request (RAR) message or a service-specific
     request to the client identifying the session for which the session group
     lists are to be updated. The client responds with a Re-Auth-Answer (RAA)
     message or a service-specific answer.  The client subsequently
   sends a service-specific re-authorization request containing one or
   multiple Session-Group-Info AVPs with the SESSION_GROUP_ALLOCATION_ACTION
   flag set and the Session-Group-Id AVP identifying the session group to
   which the session had been previously assigned.  The server responds with a
   service-specific authorization response and includes one or multiple
   Session-Group-Info AVPs with the SESSION_GROUP_ALLOCATION_ACTION flag set
   and the Session-Group-Id AVP identifying the session group to which the
   identified session is to be assigned.  With the same response message, the
   server <span class="bcp14">MAY</span> send one or multiple Session-Group-Info AVPs with the
   SESSION_GROUP_ALLOCATION_ACTION flag cleared and the Session-Group-Id AVP
   identifying the session groups from which the identified session is to be
   removed.  When a server wants to remove the session from all previously
   assigned session groups, it sends at least one Session- Group-Info AVP with
   the response having the SESSION_GROUP_ALLOCATION_ACTION flag cleared and no
   Session-Group-Id AVP present.<a class="pilcrow" href="#section-4.2.3-3">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4.3">
<section id="section-4.3">
        <h3 id="name-deleting-a-session-group">
<a class="section-number selfRef" href="#section-4.3">4.3. </a><a class="section-name selfRef" href="#name-deleting-a-session-group">Deleting a Session Group</a>
        </h3>
<p id="section-4.3-1">
   To explicitly delete a session group and release the associated
   Session-Group-Id value, the owner of a session group appends a single
   Session-Group-Info AVP with the SESSION_GROUP_STATUS flag cleared
   and the Session-Group-Id AVP identifying the session group that is
   to be deleted.  The SESSION_GROUP_ALLOCATION_ACTION flag of the
   associated Session-Group-Control-Vector AVP <span class="bcp14">MUST</span> be cleared.<a class="pilcrow" href="#section-4.3-1">¶</a></p>
<p id="section-4.3-2">
   A session group is implicitly deleted and its identifier is released
   after the last session has been removed from this session group.<a class="pilcrow" href="#section-4.3-2">¶</a></p>
</section>
</div>
<div id="sect-4.4">
<section id="section-4.4">
        <h3 id="name-performing-group-operations">
<a class="section-number selfRef" href="#section-4.4">4.4. </a><a class="section-name selfRef" href="#name-performing-group-operations">Performing Group Operations</a>
        </h3>
<div id="sect-4.4.1">
<section id="section-4.4.1">
          <h4 id="name-sending-group-commands">
<a class="section-number selfRef" href="#section-4.4.1">4.4.1. </a><a class="section-name selfRef" href="#name-sending-group-commands">Sending Group Commands</a>
          </h4>
<p id="section-4.4.1-1">
   Either Diameter node (client or server) can request the recipient of a
   request to process an associated command for all sessions assigned to one
   or multiple groups by identifying these groups in the request.  The sender
   of the request appends for each group to which the command applies a
   Session-Group-Info AVP including the Session-Group-Id AVP to identify the
   associated session group.  Both the SESSION_GROUP_ALLOCATION_ACTION flag
   and the SESSION_GROUP_STATUS flag <span class="bcp14">MUST</span> be set.<a class="pilcrow" href="#section-4.4.1-1">¶</a></p>
<p id="section-4.4.1-2">
   If the Command Code Format (CCF) of the request mandates a Session-Id
   AVP, the Session-Id AVP <span class="bcp14">MUST</span> identify one of the single sessions
   that is assigned to at least one of the groups being identified in
   the appended Session-Group-Id AVPs.<a class="pilcrow" href="#section-4.4.1-2">¶</a></p>
<p id="section-4.4.1-3">
   The sender of the request <span class="bcp14">MUST</span> indicate to the receiver how multiple
   resulting transactions associated with a group command are to be treated by
   appending a single instance of a Group-Response-Action AVP.
   For example, when a server sends a Re-Auth-Request (RAR) or a service-specific
   server-initiated request to the client, it indicates to the client to
   follow the request according to one of three possible procedures.  When the
   server sets the Group-Response-Action AVP to ALL_GROUPS (1), the client
   sends a single RAR message for all identified groups.  When the server sets
   the Group-Response-Action AVP to PER_GROUP (2), the client sends a single
   RAR message for each identified group individually.  When the server sets
   the Group-Response-Action AVP to PER_SESSION (3), the client follows up
   with a single RAR message per impacted session.  If a session is included
   in more than one of the identified session groups, the client sends only
   one RAR message for that session.<a class="pilcrow" href="#section-4.4.1-3">¶</a></p>
<p id="section-4.4.1-4">
   If the sender sends a request including the Group-Response-Action AVP set
   to ALL_GROUPS (1) or PER_GROUP (2), it has to expect some delay before
   receiving one or more corresponding answers, as the answers will only be sent
   back when the request is processed for all the sessions or all the sessions
   of a session group.  If the processing of the request is delay sensitive,
   the sender <span class="bcp14">SHOULD NOT</span> set the Group-Response-Action AVP to ALL_GROUPS (1)
   or PER_GROUP (2).  If the answer can be sent before the complete process of
   the request for all the sessions or if the request timeout timer is high
   enough, the sender <span class="bcp14">MAY</span> set the Group-Response-Action AVP to ALL_GROUPS (1)
   or PER_GROUP (2).<a class="pilcrow" href="#section-4.4.1-4">¶</a></p>
<p id="section-4.4.1-5">
   If the sender wants the receiver of the request to process the
   associated command for a single session, the sender does not
   append any group identifier; it identifies only the relevant session in
   the Session-Id AVP.<a class="pilcrow" href="#section-4.4.1-5">¶</a></p>
</section>
</div>
<div id="sect-4.4.2">
<section id="section-4.4.2">
          <h4 id="name-receiving-group-commands">
<a class="section-number selfRef" href="#section-4.4.2">4.4.2. </a><a class="section-name selfRef" href="#name-receiving-group-commands">Receiving Group Commands</a>
          </h4>
<p id="section-4.4.2-1">
   A Diameter node receiving a request to process a command for a group
   of sessions identifies the relevant groups according to the included
   Session-Group-Id AVP in the Session-Group-Info AVP and processes the
   group command according to the included Group-Response-Action AVP.
   If the received request identifies multiple groups in multiple,
   included Session-Group-Id AVPs, the receiver <span class="bcp14">SHOULD</span> process the
   associated command for each of these groups.  If a session has been
   assigned to more than one of the identified groups, the receiver <span class="bcp14">MUST</span>
   process the associated command only once per session.<a class="pilcrow" href="#section-4.4.2-1">¶</a></p>
</section>
</div>
<div id="sect-4.4.3">
<section id="section-4.4.3">
          <h4 id="name-error-handling-for-group-co">
<a class="section-number selfRef" href="#section-4.4.3">4.4.3. </a><a class="section-name selfRef" href="#name-error-handling-for-group-co">Error Handling for Group Commands</a>
          </h4>
<p id="section-4.4.3-1">
   When a Diameter node receives a request to process a command for one
   or more session groups and the result of processing the command is an
   error that applies to all sessions in the identified groups, an
   associated protocol error <span class="bcp14">MUST</span> be returned to the source of the
   request.  In such case, the sender of the request <span class="bcp14">MUST</span> fall back to
   single-session processing and the session groups, which have been
   identified in the group command, <span class="bcp14">MUST</span> be deleted according to the
   procedure described in <a class="auto internal xref" href="#sect-4.3">Section 4.3</a>.<a class="pilcrow" href="#section-4.4.3-1">¶</a></p>
<p id="section-4.4.3-2">
   When a Diameter node receives a request to process a command for one
   or more session groups and the result of processing the command
   succeeds for some sessions identified in one or multiple session
   groups but fails for one or more sessions, the Result-Code AVP in
   the response message <span class="bcp14">SHOULD</span> indicate DIAMETER_LIMITED_SUCCESS, as per
   <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6733#section-7.1.2">Section 7.1.2</a> of [<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.<a class="pilcrow" href="#section-4.4.3-2">¶</a></p>
<p id="section-4.4.3-3">
   In the case of limited success, the sessions for which the
   processing of the group command failed <span class="bcp14">MUST</span> be identified by
   including their Session-Id AVP in the Failed-AVP AVP, as per
   <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6733#section-7.5">Section 7.5</a> of [<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.  The sender of the request <span class="bcp14">MUST</span> fall back
   to single-session operation for each of the identified sessions for
   which the group command failed.  In addition, each of these sessions
   <span class="bcp14">MUST</span> be removed from all session groups to which the group command
   applied.  To remove sessions from a session group, the Diameter
   client performs the procedure described in <a class="auto internal xref" href="#sect-4.2.2">Section 4.2.2</a>.<a class="pilcrow" href="#section-4.4.3-3">¶</a></p>
</section>
</div>
<div id="sect-4.4.4">
<section id="section-4.4.4">
          <h4 id="name-single-session-fallback">
<a class="section-number selfRef" href="#section-4.4.4">4.4.4. </a><a class="section-name selfRef" href="#name-single-session-fallback">Single-Session Fallback</a>
          </h4>
<p id="section-4.4.4-1">
   Either Diameter node can fall back to single-session operation by
   ignoring and omitting the optional group-session-specific AVPs.
   Fallback to single-session operation is performed by processing the
   Diameter command solely for the session identified in the mandatory
   Session-Id AVP.  In such case, the response to the group command <span class="bcp14">MUST NOT</span>
    include any group identifier but only the Session-Id identifying the session for
   which the command has been processed.<a class="pilcrow" href="#section-4.4.4-1">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-5">
<section id="section-5">
      <h2 id="name-operation-with-proxy-agents">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-operation-with-proxy-agents">Operation with Proxy Agents</a>
      </h2>
<p id="section-5-1">
   In the case of a present stateful Proxy Agent between a Diameter
   client and a Diameter server, the Proxy Agent <span class="bcp14">MUST</span> perform the same
   mechanisms per this specification to advertise session grouping and
   group operation capabilities towards the client and the server,
   respectively.  The Proxy Agent <span class="bcp14">MUST</span> update and maintain consistency of its
   local session states as per the result of the group commands that
   are operated between a Diameter client and a server.  In such case,
   the Proxy Agent <span class="bcp14">MUST</span> act as a Diameter server in front of the
   Diameter client and <span class="bcp14">MUST</span> act as a Diameter client in front of the
   Diameter server.  Therefore, the client and the server behavior described
   in <a class="auto internal xref" href="#sect-4">Section 4</a> applies respectively to the stateful Proxy Agent.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">
   If a stateful Proxy Agent manipulates session groups, it <span class="bcp14">MUST</span>
   maintain consistency of session groups between a client and a server.
   This applies to a deployment where the Proxy Agent utilizes session
   grouping and performs group operations with, for example, a Diameter
   server, whereas the Diameter client is not aware of session groups.
   In such case, the Proxy Agent must reflect the states associated with
   the session groups as individual session operations towards the
   client and ensure the client has a consistent view of each session.
   The same applies to a deployment where all nodes, the Diameter client
   and server, as well as the Proxy Agent are group aware, but the Proxy
   Agent manipulates groups, e.g., to adopt different administrative
   policies that apply to the client's domain and the server's domain.<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3">
   Stateless Proxy Agents do not maintain any session states (only transaction
   states are maintained).  Consequently, the notion of a session group is
   transparent for any stateless Proxy Agent present between a Diameter client
   and a Diameter server handling session groups.  Session-group-related AVPs
   being defined as an optional AVP are ignored by stateless Proxy Agents and
   should not be removed from the Diameter commands.  If they are removed by
   the Proxy Agent for any reason, the Diameter client and Diameter server
   will discover the absence of the session-group-related AVPs and will fall back
   to single-session processing, as described in <a class="auto internal xref" href="#sect-4">Section 4</a>.<a class="pilcrow" href="#section-5-3">¶</a></p>
</section>
</div>
<div id="sect-6">
<section id="section-6">
      <h2 id="name-commands-formatting">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-commands-formatting">Commands Formatting</a>
      </h2>
<p id="section-6-1">
   This document does not specify new Diameter commands to enable group
   operations but relies on command extensibility and capability provided
   by the Diameter Base protocol.  This section provides the guidelines
   to extend the CCF of existing Diameter commands with optional AVPs to
   enable the recipient of the command to apply the command to all
   sessions associated with the identified group or groups.<a class="pilcrow" href="#section-6-1">¶</a></p>
<div id="sect-6.1">
<section id="section-6.1">
        <h3 id="name-formatting-example-group-re">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-formatting-example-group-re">Formatting Example: Group Re-Auth-Request</a>
        </h3>
<p id="section-6.1-1">
   A request for re-authentication of one or more groups of users is issued by
   appending one or multiple Session-Group-Id AVPs, as well as appending a single
   instance of a Group-Response-Action AVP to the Re-Auth-Request (RAR).
   One or multiple Session-Group-Id AVPs identify one or more associated groups
   for which group re-authentication has been requested.  The
   Group-Response-Action AVP identifies the expected means to perform and
   respond to the group command.  The recipient of the group command initiates
   re-authentication for all users associated with the identified group or groups.
   Furthermore, the sender of the group re-authentication request appends a
   Group-Response-Action AVP to provide more information to the receiver of
   the command about how to accomplish the group operation.<a class="pilcrow" href="#section-6.1-1">¶</a></p>
<p id="section-6.1-2">
   The value of the mandatory Session-Id AVP <span class="bcp14">MUST</span> identify a session
   associated with a single user, which is assigned to at least one of
 the groups being identified in the appended Session-Group-Id AVPs.<a class="pilcrow" href="#section-6.1-2">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1-3">
<pre>      &lt;RAR&gt;  ::= &lt; Diameter Header: 258, REQ, PXY &gt;
                 &lt; Session-Id &gt;
                 { Origin-Host }
                 { Origin-Realm }
                 { Destination-Realm }
                 { Destination-Host }
                 { Auth-Application-Id }
                 { Re-Auth-Request-Type }
                 [ User-Name ]
                 [ Origin-State-Id ]
               * [ Proxy-Info ]
               * [ Route-Record ]
                 [ Session-Group-Capability-Vector ]
               * [ Session-Group-Info ]
                 [ Group-Response-Action ]
               * [ AVP ]
</pre><a class="pilcrow" href="#section-6.1-3">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="sect-7">
<section id="section-7">
      <h2 id="name-attribute-value-pairs-avps">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-attribute-value-pairs-avps">Attribute-Value Pairs (AVPs)</a>
      </h2>
<span id="name-avps-for-the-diameter-group"></span><table class="center" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-avps-for-the-diameter-group">AVPs for the Diameter Group Signaling</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Attribute Name</th>
            <th class="text-left" colspan="1" rowspan="2">AVP Code Value Type</th>
            <th class="text-left" colspan="4" rowspan="1">AVP Flag rules</th>
          </tr>
          <tr>
            <th class="text-left" colspan="1" rowspan="1"></th>
            <th class="text-left" colspan="1" rowspan="1">
              <span class="bcp14">MUST</span>
</th>
            <th class="text-left" colspan="1" rowspan="1">
              <span class="bcp14">MAY</span>
</th>
            <th class="text-left" colspan="1" rowspan="1">
              <span class="bcp14">SHOULD NOT</span>
</th>
            <th class="text-left" colspan="1" rowspan="1">
              <span class="bcp14">MUST NOT</span>
</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">Session-Group-Info</td>
            <td class="text-left" colspan="1" rowspan="1">671 Grouped</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">P</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">V</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">Session-Group-Control-Vector</td>
            <td class="text-left" colspan="1" rowspan="1">672 Unsigned32</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">P</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">V</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">Session-Group-Id</td>
            <td class="text-left" colspan="1" rowspan="1">673 UTF8String</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">P</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">V</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">Group-Response-Action</td>
            <td class="text-left" colspan="1" rowspan="1">674 Unsigned32</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">P</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">V</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">Session-Group-Capability-Vector</td>
            <td class="text-left" colspan="1" rowspan="1">675 Unsigned32</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">P</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
            <td class="text-left" colspan="1" rowspan="1">V</td>
          </tr>
        </tbody>
      </table>
<div id="sect-7.1">
<section id="section-7.1">
        <h3 id="name-session-group-info-avp">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-session-group-info-avp">Session-Group-Info AVP</a>
        </h3>
<p id="section-7.1-1">
   The Session-Group-Info AVP (AVP Code 671) is of type Grouped.  It
   contains the identifier of the session group, as well as an indication
   of the node responsible for session group identifier assignment.<a class="pilcrow" href="#section-7.1-1">¶</a></p>
<div class="alignLeft art-text artwork" id="section-7.1-2">
<pre>   Session-Group-Info ::= &lt; AVP Header: 671 &gt;
                          &lt; Session-Group-Control-Vector &gt;
                          [ Session-Group-Id ]
                        * [ AVP ]
</pre><a class="pilcrow" href="#section-7.1-2">¶</a>
</div>
</section>
</div>
<div id="sect-7.2">
<section id="section-7.2">
        <h3 id="name-session-group-control-vecto">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-session-group-control-vecto">Session-Group-Control-Vector AVP</a>
        </h3>
<p id="section-7.2-1">
   The Session-Group-Control-Vector AVP (AVP Code 672) is of type
   Unsigned32 and contains a 32-bit flag field to control the group
   assignment at session-group-aware nodes.  For defined flags, only
   numeric values that are 2<sup>x</sup> (power of two, where 0&lt;=x&lt;32) are allowed.<a class="pilcrow" href="#section-7.2-1">¶</a></p>
<p id="section-7.2-2">
   The following control flags are defined in this document:<a class="pilcrow" href="#section-7.2-2">¶</a></p>
<p id="section-7.2-3">SESSION_GROUP_ALLOCATION_ACTION (0x00000001)<a class="pilcrow" href="#section-7.2-3">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-7.2-4.1">
 This flag indicates the action to be performed for the identified
      session.  When this flag is set, it indicates that the identified
      Diameter session is to be assigned to the session group
      identified by the Session-Group-Id AVP or the session's assignment
      to the session group identified in the Session-Group-Id AVP is
      still valid.  When the flag is cleared, the identified Diameter
      session is to be removed from at least one session group.  When
      the flag is cleared and the Session-Group-Info AVP identifies a
      particular session group in the associated Session-Group-Id AVP,
      the session is to be removed solely from the identified session
      group.  When the flag is cleared and the Session-Group-Info AVP
      does not identify a particular session group (Session-Group-Id AVP
      is absent), the identified Diameter session is to be removed from
      all session groups to which it has been previously assigned.<a class="pilcrow" href="#section-7.2-4.1">¶</a>
</li>
        </ul>
<p id="section-7.2-5">SESSION_GROUP_STATUS (0x00000010)<a class="pilcrow" href="#section-7.2-5">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-7.2-6.1">
 This flag indicates the status of the session group identified in the
      associated Session-Group-Id AVP.  The flag is set when the identified
      session group has just been created or is still active.  If the flag is
      cleared, the identified session group is deleted and the associated
      Session-Group-Id is released.  If the Session-Group-Info AVP does not
      include a Session-Group-Id AVP, this flag is meaningless and <span class="bcp14">MUST</span> be
      ignored by the receiver.<a class="pilcrow" href="#section-7.2-6.1">¶</a>
</li>
        </ul>
</section>
</div>
<div id="sect-7.3">
<section id="section-7.3">
        <h3 id="name-session-group-id-avp">
<a class="section-number selfRef" href="#section-7.3">7.3. </a><a class="section-name selfRef" href="#name-session-group-id-avp">Session-Group-Id AVP</a>
        </h3>
<p id="section-7.3-1">
   The Session-Group-Id AVP (AVP Code 673) is of type UTF8String and
   identifies a group of Diameter sessions.<a class="pilcrow" href="#section-7.3-1">¶</a></p>
<p id="section-7.3-2">
   The Session-Group-Id <span class="bcp14">MUST</span> be globally unique.  The Session-Group-Id
   includes a mandatory portion and an implementation-defined portion
   delimited by the ";" character.  The Session-Group-Id <span class="bcp14">MUST</span> begin with
   the identity of the Diameter node that owns the session group.  The
   remainder of the Session-Group-Id is implementation defined and <span class="bcp14">MAY</span>
   follow the format recommended for the implementation-defined portion
   of the Session-Id AVP in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6733#section-8.8">Section 8.8</a> of [<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.<a class="pilcrow" href="#section-7.3-2">¶</a></p>
</section>
</div>
<div id="sect-7.4">
<section id="section-7.4">
        <h3 id="name-group-response-action-avp">
<a class="section-number selfRef" href="#section-7.4">7.4. </a><a class="section-name selfRef" href="#name-group-response-action-avp">Group-Response-Action AVP</a>
        </h3>
<p id="section-7.4-1">
   The Group-Response-Action AVP (AVP Code 674) is of type Unsigned32
   and contains a 32-bit address space representing values indicating
   how the node <span class="bcp14">SHOULD</span> issue follow-up exchanges in response to a
   command that impacts multiple sessions.  The following values are
 defined by this document:<a class="pilcrow" href="#section-7.4-1">¶</a></p>
<span class="break"></span><dl class="dlNewline" id="section-7.4-2">
          <dt id="section-7.4-2.1">ALL_GROUPS (1)</dt>
          <dd id="section-7.4-2.2" style="margin-left: 1.5em">Follow-up message exchanges associated with a group command should
      be performed with a single message exchange for all impacted
      groups.<a class="pilcrow" href="#section-7.4-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.4-2.3">PER_GROUP (2)</dt>
          <dd id="section-7.4-2.4" style="margin-left: 1.5em">Follow-up message exchanges associated with a group command should
      be performed with a separate message exchange for each impacted
      group.<a class="pilcrow" href="#section-7.4-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-7.4-2.5">PER_SESSION (3)</dt>
          <dd id="section-7.4-2.6" style="margin-left: 1.5em">Follow-up message exchanges associated with a group command should
      be performed with a separate message exchange for each impacted
      session.<a class="pilcrow" href="#section-7.4-2.6">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="sect-7.5">
<section id="section-7.5">
        <h3 id="name-session-group-capability-ve">
<a class="section-number selfRef" href="#section-7.5">7.5. </a><a class="section-name selfRef" href="#name-session-group-capability-ve">Session-Group-Capability-Vector AVP</a>
        </h3>
<p id="section-7.5-1">
   The Session-Group-Capability-Vector AVP (AVP Code 675) is of type
   Unsigned32 and contains a 32-bit flag field to indicate capabilities
   in the context of session-group assignment and group operations.  For
   defined flags, only numeric values that are 2<sup>x</sup> (power of two, where
   0&lt;=x&lt;32) are allowed.  The value of (0) is reserved.<a class="pilcrow" href="#section-7.5-1">¶</a></p>
<p id="section-7.5-2">
   The following capability is defined in this document:<a class="pilcrow" href="#section-7.5-2">¶</a></p>
<p id="section-7.5-3">BASE_SESSION_GROUP_CAPABILITY (0x00000001)<a class="pilcrow" href="#section-7.5-3">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-7.5-4.1">This flag indicates the capability to support session grouping and
      session group operations according to this specification.<a class="pilcrow" href="#section-7.5-4.1">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sect-8">
<section id="section-8">
      <h2 id="name-result-code-avp-values">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-result-code-avp-values">Result-Code AVP Values</a>
      </h2>
<p id="section-8-1">
   This document does not define new Result-Code <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span> values for
   existing applications, which are extended to support group commands.
   Documents specifying new applications, which will have
   intrinsic support for group commands, may specify new Result-Codes.<a class="pilcrow" href="#section-8-1">¶</a></p>
</section>
</div>
<div id="sect-9">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-9-1">
   This section contains the namespaces that have either been created in
   this specification or had their values assigned to existing
   namespaces managed by IANA.<a class="pilcrow" href="#section-9-1">¶</a></p>
<div id="sect-9.1">
<section id="section-9.1">
        <h3 id="name-avp-codes">
<a class="section-number selfRef" href="#section-9.1">9.1. </a><a class="section-name selfRef" href="#name-avp-codes">AVP Codes</a>
        </h3>
<p id="section-9.1-1">
   IANA has registered the following new AVPs
   from the "AVP Codes" registry defined in <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.    The AVPs are defined in <a class="auto internal xref" href="#sect-7">Section 7</a>.<a class="pilcrow" href="#section-9.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.1-2.1">Session-Group-Info<a class="pilcrow" href="#section-9.1-2.1">¶</a>
</li>
          <li class="normal" id="section-9.1-2.2">Session-Group-Control-Vector<a class="pilcrow" href="#section-9.1-2.2">¶</a>
</li>
          <li class="normal" id="section-9.1-2.3">Session-Group-Id<a class="pilcrow" href="#section-9.1-2.3">¶</a>
</li>
          <li class="normal" id="section-9.1-2.4">Group-Response-Action<a class="pilcrow" href="#section-9.1-2.4">¶</a>
</li>
          <li class="normal" id="section-9.1-2.5">Session-Group-Capability-Vector<a class="pilcrow" href="#section-9.1-2.5">¶</a>
</li>
        </ul>
</section>
</div>
<div id="sect-9.2">
<section id="section-9.2">
        <h3 id="name-new-registries">
<a class="section-number selfRef" href="#section-9.2">9.2. </a><a class="section-name selfRef" href="#name-new-registries">New Registries</a>
        </h3>
<p id="section-9.2-1">
   IANA has created the following two new registries.<a class="pilcrow" href="#section-9.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.2-2.1">The "Session-Group-Control-Vector AVP Values (code 672)" registry for control bits. Two initial assignments are described in <a class="auto internal xref" href="#sect-7.2">Section 7.2</a>.  The registration assignment policy is 
      Specification Required.<a class="pilcrow" href="#section-9.2-2.1">¶</a>
</li>
          <li class="normal" id="section-9.2-2.2">The "Session-Group-Capability-Vector AVP Values (code 675)" registry. One initial assignment is described in <a class="auto internal xref" href="#sect-7.5">Section 7.5</a>.  The registration
      assignment policy is Standards Action.<a class="pilcrow" href="#section-9.2-2.2">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sect-10">
<section id="section-10">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-10-1">
   The security considerations of the Diameter protocol itself are discussed
   in <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.  Use of the AVPs defined in this document <span class="bcp14">MUST</span> take into
   consideration the security issues and requirements of the Diameter base
   protocol.  In particular, the Session-Group-Info AVP (including the
   Session-Group-Control-Vector and the Session-Group-Id AVPs) should be
   considered as a security-sensitive AVP in the same manner as the
   Session-Id AVP in the Diameter base protocol <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.<a class="pilcrow" href="#section-10-1">¶</a></p>
<p id="section-10-2">
   The management of session groups relies upon the existing trust
   relationship between the Diameter client and the Diameter server
   managing the groups of sessions.  This document defines a mechanism
   that allows a client or a server to act on multiple sessions at the
   same time using only one command.  If the Diameter client or server
   is compromised, an attacker could launch DoS attacks by terminating
   or applying change operations to a large number of sessions with a
   limited set of commands using the session group management concept.<a class="pilcrow" href="#section-10-2">¶</a></p>
<p id="section-10-3">
   According to the Diameter base protocol <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>, transport
   connections between Diameter peers are protected by TLS/TCP, DTLS / 
   Stream Control Transmission Protocol (SCTP), or alternative security mechanisms that are independent of
   Diameter, such as IPsec.  However, the lack of end-to-end security
   features makes it difficult to establish trust in the session-group-related
   information received from non-adjacent nodes.  Any Diameter
   agent in the message path can potentially modify the content of the
   message and therefore the information sent by the Diameter client or
   the server.  There is ongoing work on the specification of end-to-end
   security features for Diameter.  Such features would enable the
   establishment of a trust relationship between non-adjacent nodes, and
   the security required for session group management would normally
   rely on this end-to-end security.  However, there is no assumption in
   this document that such end-to-end security mechanism will be
   available.  It is only assumed that the solution defined on this
   document relies on the security framework provided by the Diameter-based protocol.<a class="pilcrow" href="#section-10-3">¶</a></p>
<p id="section-10-4">
   In some cases, a Diameter Proxy Agent can act on behalf of a client
   or a server.  In such case, the security requirements that normally
   apply to a client (or a server) apply equally to the Proxy Agent.<a class="pilcrow" href="#section-10-4">¶</a></p>
</section>
</div>
<section id="section-11">
      <h2 id="name-normative-references">
<a class="section-number selfRef" href="#section-11">11. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6733">[RFC6733]</dt>
      <dd>
<span class="refAuthor">Fajardo, V., Ed.</span>, <span class="refAuthor">Arkko, J.</span>, <span class="refAuthor">Loughney, J.</span>, and <span class="refAuthor">G. Zorn, Ed.</span>, <span class="refTitle">"Diameter Base Protocol"</span>, <span class="seriesInfo">RFC 6733</span>, <span class="seriesInfo">DOI 10.17487/RFC6733</span>, <time class="refDate" datetime="2012-10">October 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6733">https://www.rfc-editor.org/info/rfc6733</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7155">[RFC7155]</dt>
      <dd>
<span class="refAuthor">Zorn, G., Ed.</span>, <span class="refTitle">"Diameter Network Access Server Application"</span>, <span class="seriesInfo">RFC 7155</span>, <span class="seriesInfo">DOI 10.17487/RFC7155</span>, <time class="refDate" datetime="2014-04">April 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7155">https://www.rfc-editor.org/info/rfc7155</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
    <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="sect-a">
<section id="appendix-A">
      <h2 id="name-session-management-exemplar">
<a class="section-number selfRef" href="#appendix-A">Appendix A. </a><a class="section-name selfRef" href="#name-session-management-exemplar">Session Management -- Exemplary Session State Machine</a>
      </h2>
<div id="sect-a.1">
<section id="appendix-A.1">
        <h3 id="name-use-of-groups-for-the-autho">
<a class="section-number selfRef" href="#appendix-A.1">A.1. </a><a class="section-name selfRef" href="#name-use-of-groups-for-the-autho">Use of Groups for the Authorization Session State Machine</a>
        </h3>
<p id="appendix-A.1-1">
   <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6733#section-8.1">Section 8.1</a> of [<a class="cite xref" href="#RFC6733">RFC6733</a>]</span> defines a set of finite state machines that
   represent the life cycle of Diameter sessions, which must be
   observed by all Diameter implementations that make use of the
   authentication and/or authorization portion of a Diameter
   application.  This section defines, for example, additional state
   transitions related to the processing of the group commands that may
   impact multiple sessions.<a class="pilcrow" href="#appendix-A.1-1">¶</a></p>
<p id="appendix-A.1-2">
   The group membership is a session state, and therefore only those state
   machines from <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span> in which the server is maintaining session
   state are relevant in this document.
   As in <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>, the term
   'service-specific' below refers to a message defined in a Diameter
   application (e.g., Mobile IPv4 or NASREQ).<a class="pilcrow" href="#appendix-A.1-2">¶</a></p>
<p id="appendix-A.1-3">
   The following state machine is observed by a client when the state is
   maintained on the server.  State transitions that are unmodified
   from <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span> are not repeated here.<a class="pilcrow" href="#appendix-A.1-3">¶</a></p>
<p id="appendix-A.1-4">
   The Diameter group command in the following tables is differentiated
   from a single-session-related command by a preceding 'G' (Group).  A
   Group Re-Auth Request, which applies to one or multiple session
   groups, has been exemplarily described in <a class="auto internal xref" href="#sect-6.1">Section 6.1</a>.  Such Group
   RAR command is denoted as 'GRAR' in the following table.  The same
 notation applies to other commands, as per <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span>.<a class="pilcrow" href="#appendix-A.1-4">¶</a></p>
<p id="appendix-A.1-5">Additionally, the following acronyms are used in the tables below.<a class="pilcrow" href="#appendix-A.1-5">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="appendix-A.1-6">
          <dt id="appendix-A.1-6.1">GASR:</dt>
          <dd id="appendix-A.1-6.2" style="margin-left: 1.5em">Group-Abort-Session-Request<a class="pilcrow" href="#appendix-A.1-6.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="appendix-A.1-6.3">GASA:</dt>
          <dd id="appendix-A.1-6.4" style="margin-left: 1.5em">Group-Abort-Session-Answer<a class="pilcrow" href="#appendix-A.1-6.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="appendix-A.1-6.5">GSTA:</dt>
          <dd id="appendix-A.1-6.6" style="margin-left: 1.5em">Group-Session-Termination-Answer<a class="pilcrow" href="#appendix-A.1-6.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="appendix-A.1-6.7">GSTR:</dt>
          <dd id="appendix-A.1-6.8" style="margin-left: 1.5em">Group-Session-Termination-Request<a class="pilcrow" href="#appendix-A.1-6.8">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<span id="name-group-authorization-session"></span><table class="center" id="table-2">
          <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-group-authorization-session">Group Authorization Session State Machine for Stateful Client</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="4" rowspan="1">CLIENT, STATEFUL</th>
            </tr>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">State</th>
              <th class="text-left" colspan="1" rowspan="1">Event</th>
              <th class="text-left" colspan="1" rowspan="1">Action</th>
              <th class="text-left" colspan="1" rowspan="1">New State</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
              <td class="text-left" colspan="1" rowspan="1">Client or Device Requests access</td>
              <td class="text-left" colspan="1" rowspan="1"> Send         
service-specific
authorization req
optionally
including
groups</td>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">GASR received with             
Group-Response-Action         
= ALL_GROUPS,                  
session is assigned to        
received group(s) and         
client will comply with
request to end the session</td>
              <td class="text-left" colspan="1" rowspan="1">Send GASA    
Result-Code
= SUCCESS,
Send GSTR</td>
              <td class="text-left" colspan="1" rowspan="1">Discon</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">GASR received with                
Group-Response-Action          
= PER_GROUPS,                  
session is assigned to         
received group(s) and          
client will comply with        
request to end the session</td>
              <td class="text-left" colspan="1" rowspan="1">Send GASA 
with 
Result-Code
= SUCCESS,
Send GSTR
per group</td>
              <td class="text-left" colspan="1" rowspan="1">Discon</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1"> GASR received with               
Group-Response-Action          
= PER_SESSION,                 
session is assigned to         
received group(s) and          
client will comply with        
request to end the session</td>
              <td class="text-left" colspan="1" rowspan="1">Send GASA
with
Result-Code
= SUCCESS,
Send STR
per session</td>
              <td class="text-left" colspan="1" rowspan="1">Discon</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">GASR received,                     
 client will not comply with               
 request to end all sessions
 in received group(s)</td>
              <td class="text-left" colspan="1" rowspan="1">Send GASA
with
Result-Code
!= SUCCESS</td>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Discon</td>
              <td class="text-left" colspan="1" rowspan="1">GSTA received</td>
              <td class="text-left" colspan="1" rowspan="1">Discon.
user/device</td>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">GRAR received with                
Group-Response-Action          
= ALL_GROUPS,                  
session is assigned to         
received group(s) and          
client will perform            
subsequent re-auth</td>
              <td class="text-left" colspan="1" rowspan="1">Send GRAA,
Send
service-specific
group
re-auth req</td>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">GRAR received with                
Group-Response-Action          
= PER_GROUP,                   
session is assigned to         
received group(s) and          
client will perform            
subsequent re-auth </td>
              <td class="text-left" colspan="1" rowspan="1">Send GRAA,
Send
service-specific
group
re-auth req
per group</td>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">GRAR received with                
Group-Response-Action          
= PER_SESSION,                 
session is assigned to         
received group(s) and          
client will perform            
subsequent re-auth</td>
              <td class="text-left" colspan="1" rowspan="1">Send GRAA,
Send
service-specific
re-auth req
per session</td>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">GRAR received and client will            
not perform subsequent                     
re-auth</td>
              <td class="text-left" colspan="1" rowspan="1">Send GRAA  
with  
Result-Code
!= SUCCESS,
Discon.
user/device</td>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
              <td class="text-left" colspan="1" rowspan="1">Successful service-specific         
group re-authorization answer  
received</td>
              <td class="text-left" colspan="1" rowspan="1">Provide
service</td>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
              <td class="text-left" colspan="1" rowspan="1">Failed service-specific              
group re-authorization answer  
received</td>
              <td class="text-left" colspan="1" rowspan="1">Discon.
user/device</td>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
            </tr>
          </tbody>
        </table>
<p id="appendix-A.1-8">
   The following state machine is observed by a server when it is
   maintaining the state for the session.  State transitions that are
   unmodified from <span>[<a class="cite xref" href="#RFC6733">RFC6733</a>]</span> are not repeated here.<a class="pilcrow" href="#appendix-A.1-8">¶</a></p>
<span id="name-group-authorization-session-"></span><table class="center" id="table-3">
          <caption>
<a class="selfRef" href="#table-3">Table 3</a>:
<a class="selfRef" href="#name-group-authorization-session-">Group Authorization Session State Machine for Stateful Server</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" colspan="4" rowspan="1">SERVER, STATEFUL</th>
            </tr>
            <tr>
              <th class="text-left" colspan="1" rowspan="1">State</th>
              <th class="text-left" colspan="1" rowspan="1">Event</th>
              <th class="text-left" colspan="1" rowspan="1">Action</th>
              <th class="text-left" colspan="1" rowspan="1">New State</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
              <td class="text-left" colspan="1" rowspan="1">Service-specific authorization                    
request received, and user                  
is authorized</td>
              <td class="text-left" colspan="1" rowspan="1">Send
successful 
service-specific
answer
optionally
including
groups</td>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">Server wants to terminate                          
group(s)</td>
              <td class="text-left" colspan="1" rowspan="1">Send GASR</td>
              <td class="text-left" colspan="1" rowspan="1">Discon</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Discon</td>
              <td class="text-left" colspan="1" rowspan="1">GASA received</td>
              <td class="text-left" colspan="1" rowspan="1">Cleanup</td>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Any</td>
              <td class="text-left" colspan="1" rowspan="1">GSTR received</td>
              <td class="text-left" colspan="1" rowspan="1">Send GSTA, Cleanup</td>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">Server wants to reauth             
group(s)</td>
              <td class="text-left" colspan="1" rowspan="1">Send GRAR</td>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
              <td class="text-left" colspan="1" rowspan="1">GRAA received with Result-Code        
= SUCCESS</td>
              <td class="text-left" colspan="1" rowspan="1">Update session(s)</td>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Pending</td>
              <td class="text-left" colspan="1" rowspan="1">GRAA received with Result-Code      
!= SUCCESS</td>
              <td class="text-left" colspan="1" rowspan="1">Cleanup session(s)</td>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">Service-specific group                              
re-authorization request                 
received and user is                    
authorized</td>
              <td class="text-left" colspan="1" rowspan="1">Send
successful
service-specific  
group                                          
re-auth                                            
answer</td>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
            </tr>
            <tr>
              <td class="text-left" colspan="1" rowspan="1">Open</td>
              <td class="text-left" colspan="1" rowspan="1">Service-specific group                   
re-authorization request             
received and user is                 
not authorized</td>
              <td class="text-left" colspan="1" rowspan="1">Send
failed 
service-specific
group                                       
re-auth
answer, 
Cleanup</td>
              <td class="text-left" colspan="1" rowspan="1">Idle</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
</section>
</div>
<div id="sect-11">
<section id="appendix-B">
      <h2 id="name-acknowledgments">
<a class="section-name selfRef" href="#name-acknowledgments">Acknowledgments</a>
      </h2>
<p id="appendix-B-1">
   The authors of this document want to thank <span class="contact-name">Ben Campbell</span> and <span class="contact-name">Eric    McMurry</span> for their valuable comments to early draft versions of this document.
   Furthermore, the authors thank <span class="contact-name">Steve Donovan</span> and <span class="contact-name">Mark Bales</span> for the
   thorough review and comments on advanced versions of the WG document,
   which helped a lot to improve this specification.<a class="pilcrow" href="#appendix-B-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Mark Jones</span></div>
<div class="left" dir="auto"><span class="org">Individual</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:mark@azu.ca">mark@azu.ca</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Marco Liebsch</span></div>
<div class="left" dir="auto"><span class="org">NEC Laboratories Europe GmbH</span></div>
<div class="left" dir="auto"><span class="street-address">Kurfuersten-Anlage 36</span></div>
<div class="left" dir="auto">
<span class="postal-code">D-69115</span> <span class="locality">Heidelberg</span>
</div>
<div class="left" dir="auto"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:marco.liebsch@neclab.eu">marco.liebsch@neclab.eu</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Lionel Morand</span></div>
<div class="left" dir="auto"><span class="org">Orange Labs</span></div>
<div class="left" dir="auto"><span class="street-address">38/40 rue du General Leclerc</span></div>
<div class="left" dir="auto">
<span class="postal-code">92794</span> <span class="locality">Issy-Les-Moulineaux Cedex 9</span>
</div>
<div class="left" dir="auto"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:lionel.morand@orange.com">lionel.morand@orange.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>