<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9600: TRansparent Interconnection of Lots of Links (TRILL): Explicit Congestion Notification (ECN) Support</title>
<meta content="Donald E. Eastlake, 3rd" name="author"/>
<meta content="Bob Briscoe" name="author"/>
<meta content="
       
   Explicit Congestion Notification (ECN) allows a forwarding element to
   notify downstream devices, including the destination, of the onset of
   congestion without having to drop packets. This can improve network
   efficiency through better congestion control without packet drops.
   This document extends ECN to TRansparent Interconnection of
   Lots of Links (TRILL) switches, including integration with IP ECN, and
   provides for ECN marking in the TRILL header extension flags word
   (RFC 7179). 
    " name="description"/>
<meta content="xml2rfc 3.23.0" name="generator"/>
<meta content="example" name="keyword"/>
<meta content="9600" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.23.0
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    platformdirs 3.8.0
    pycountry 22.3.5
    pydyf 0.10.0
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    wcwidth 0.2.5
    weasyprint 62.3
-->
<link href="rfc9600.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://datatracker.ietf.org/doc/draft-ietf-trill-ecn-support-07" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9600" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9600</td>
<td class="center">TRILL ECN Support</td>
<td class="right">August 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Eastlake 3rd &amp; Briscoe</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9600">9600</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2024-08">August 2024</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">D. Eastlake 3rd</div>
<div class="org">Independent</div>
</div>
<div class="author">
      <div class="author-name">B. Briscoe</div>
<div class="org">Independent</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9600</h1>
<h1 id="title">TRansparent Interconnection of Lots of Links (TRILL): Explicit Congestion Notification (ECN) Support</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
   Explicit Congestion Notification (ECN) allows a forwarding element to
   notify downstream devices, including the destination, of the onset of
   congestion without having to drop packets. This can improve network
   efficiency through better congestion control without packet drops.
   This document extends ECN to TRansparent Interconnection of
   Lots of Links (TRILL) switches, including integration with IP ECN, and
   provides for ECN marking in the TRILL header extension flags word
   (RFC 7179).<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9600">https://www.rfc-editor.org/info/rfc9600</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="auto internal xref" href="#section-1.1">1.1</a>.  <a class="internal xref" href="#name-conventions-used-in-this-do">Conventions Used in This Document</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-the-ecn-specific-extended-h">The ECN-Specific Extended Header Flags</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-ecn-support">ECN Support</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="auto internal xref" href="#section-3.1">3.1</a>.  <a class="internal xref" href="#name-ingress-ecn-support">Ingress ECN Support</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="auto internal xref" href="#section-3.2">3.2</a>.  <a class="internal xref" href="#name-transit-ecn-support">Transit ECN Support</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="auto internal xref" href="#section-3.3">3.3</a>.  <a class="internal xref" href="#name-egress-ecn-support">Egress ECN Support</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a class="auto internal xref" href="#section-3.3.1">3.3.1</a>.  <a class="internal xref" href="#name-non-ecn-egress-rbridges">Non-ECN Egress RBridges</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a class="auto internal xref" href="#section-3.3.2">3.3.2</a>.  <a class="internal xref" href="#name-ecn-egress-rbridges">ECN Egress RBridges</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-trill-support-for-ecn-varia">TRILL Support for ECN Variants</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="auto internal xref" href="#section-4.1">4.1</a>.  <a class="internal xref" href="#name-pre-congestion-notification">Pre-Congestion Notification (PCN)</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a class="auto internal xref" href="#section-4.2">4.2</a>.  <a class="internal xref" href="#name-low-latency-low-loss-and-sc">Low Latency, Low Loss, and Scalable Throughput (L4S)</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a class="auto internal xref" href="#section-7.1">7.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a class="auto internal xref" href="#section-7.2">7.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#appendix-A">Appendix A</a>.  <a class="internal xref" href="#name-trill-transit-rbridge-behav">TRILL Transit RBridge Behavior to Support L4S</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#appendix-C"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-1">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
   Explicit Congestion Notification (ECN) <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span> <span>[<a class="cite xref" href="#RFC8311">RFC8311</a>]</span> allows a
   forwarding element (such as a router) to
   notify downstream devices, including the destination, of the onset of
   congestion without having to drop packets. This can improve network
   efficiency through better congestion control without packet drops. The
   forwarding element can explicitly mark a proportion of packets in an ECN
   field instead of dropping packets. For example, a 2-bit field is
   available for ECN marking in IP headers.<a class="pilcrow" href="#section-1-1">¶</a></p>
<span id="name-example-path-forwarding-nod"></span><div id="fig-1">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-1-2.1">
<pre>                  .............................
                  .                           .
              +---------+                     .
 +------+     | Ingress |                     .
 |Source|  +-&gt;| RBridge |                     .   +----------+
 +---+--+  |  |   RB1   |                     .   |Forwarding|
     |     |  +------+--+  +----------+       .   | Element  |
     v     |      .  |     | Transit  |       .   |    Y     |
   +-------+--+   .  +----&gt;| RBridges |       .   +--------+-+
   |Forwarding|   .        |   RBn    |       .      ^     |
   | Element  |   .        +-------+--+  +---------+ |     v
   |    X     |   .                |     | Egress  | |  +-----------+
   +----------+   .                +----&gt;| RBridge +-+  |Destination|
                  .                      |   RB9   |    +-----------+
                  .  TRILL               +---------+
                  .  campus                   .
                  .............................
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-example-path-forwarding-nod">Example Path-Forwarding Nodes</a>
        </figcaption></figure>
</div>
<p id="section-1-3">
   In <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>, it was recognized that tunnels and lower-layer
   protocols would need to support ECN, and ECN markings would need to
   be propagated, as headers were encapsulated and decapsulated.
   <span>[<a class="cite xref" href="#RFC9599">RFC9599</a>]</span> gives guidelines on the addition of ECN to protocols
   like TRILL that often
   encapsulate IP packets, including propagation of ECN from and to IP.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">
   In <a class="auto internal xref" href="#fig-1">Figure 1</a>, assuming IP traffic, RB1 is an encapsulator and
   RB9 is a decapsulator. Traffic from Source to RB1 might or might not get
   marked as having experienced congestion in forwarding elements, such
   as X, before being encapsulated at ingress RB1. Any such ECN marking
   is encapsulated with a TRILL header <span>[<a class="cite xref" href="#RFC6325">RFC6325</a>]</span>.<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">
   This document specifies how ECN marking in traffic at the ingress is
   copied into the TRILL extension header flags word and requires such
   copying for IP traffic. It also enables congestion marking by a
   congested RBridge (such as RBn or RB1 above) in the TRILL header
   extension flags word <span>[<a class="cite xref" href="#RFC7179">RFC7179</a>]</span>.<a class="pilcrow" href="#section-1-5">¶</a></p>
<p id="section-1-6">
   At RB9, the TRILL egress, it specifies how any ECN markings in the
   TRILL header flags word and in the encapsulated traffic are combined
   so that subsequent forwarding elements, such as Y and the
   Destination, can see if congestion was experienced at any previous
   point in the path from the Source.<a class="pilcrow" href="#section-1-6">¶</a></p>
<p id="section-1-7">
   A large part of the guidelines for adding ECN to lower-layer
   protocols <span>[<a class="cite xref" href="#RFC9599">RFC9599</a>]</span> concerns safe propagation of congestion
   notifications in scenarios where some of the nodes do not support or
   understand ECN. Such ECN ignorance is not a major problem with
   RBridges using this specification, because the method specified
   assures that, if an egress RBridge is ECN ignorant (so it cannot
   further propagate ECN) and congestion has been encountered, the
   egress RBridge will at least drop the packet, and this drop will
   itself indicate congestion to end stations.<a class="pilcrow" href="#section-1-7">¶</a></p>
<div id="sect-1.1">
<section id="section-1.1">
        <h3 id="name-conventions-used-in-this-do">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-conventions-used-in-this-do">Conventions Used in This Document</a>
        </h3>
<p id="section-1.1-1">
   The terminology and acronyms defined in <span>[<a class="cite xref" href="#RFC6325">RFC6325</a>]</span> are used herein with the same meaning.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
<p id="section-1.1-2">
   In this documents, "IP" refers to both IPv4 and IPv6.<a class="pilcrow" href="#section-1.1-2">¶</a></p>
<p id="section-1.1-3">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.1-3">¶</a></p>
<p id="section-1.1-4">Abbreviations:<a class="pilcrow" href="#section-1.1-4">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-5">
          <dt id="section-1.1-5.1">AQM:</dt>
          <dd id="section-1.1-5.2" style="margin-left: 1.5em">Active Queue Management<a class="pilcrow" href="#section-1.1-5.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.3">CCE:</dt>
          <dd id="section-1.1-5.4" style="margin-left: 1.5em">Critical Congestion Experienced<a class="pilcrow" href="#section-1.1-5.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.5">CE:</dt>
          <dd id="section-1.1-5.6" style="margin-left: 1.5em">Congestion Experienced<a class="pilcrow" href="#section-1.1-5.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.7">CItE:</dt>
          <dd id="section-1.1-5.8" style="margin-left: 1.5em">Critical Ingress-to-Egress<a class="pilcrow" href="#section-1.1-5.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.9">ECN:</dt>
          <dd id="section-1.1-5.10" style="margin-left: 1.5em">Explicit Congestion Notification<a class="pilcrow" href="#section-1.1-5.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.11">ECT:</dt>
          <dd id="section-1.1-5.12" style="margin-left: 1.5em">ECN-Capable Transport<a class="pilcrow" href="#section-1.1-5.12">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.13">L4S:</dt>
          <dd id="section-1.1-5.14" style="margin-left: 1.5em">Low Latency, Low Loss, and Scalable throughput<a class="pilcrow" href="#section-1.1-5.14">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.15">NCHbH:</dt>
          <dd id="section-1.1-5.16" style="margin-left: 1.5em">Non-Critical Hop-by-Hop<a class="pilcrow" href="#section-1.1-5.16">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.17">NCCE:</dt>
          <dd id="section-1.1-5.18" style="margin-left: 1.5em">Non-Critical Congestion Experienced<a class="pilcrow" href="#section-1.1-5.18">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.19">Not-ECT:</dt>
          <dd id="section-1.1-5.20" style="margin-left: 1.5em">Not ECN-Capable Transport<a class="pilcrow" href="#section-1.1-5.20">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-5.21">PCN:</dt>
          <dd id="section-1.1-5.22" style="margin-left: 1.5em">Pre-Congestion Notification<a class="pilcrow" href="#section-1.1-5.22">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="sect-2">
<section id="section-2">
      <h2 id="name-the-ecn-specific-extended-h">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-the-ecn-specific-extended-h">The ECN-Specific Extended Header Flags</a>
      </h2>
<p id="section-2-1">
   The extension header fields for ECN in TRILL are defined as a 2-bit TRILL-ECN field and a one-bit CCE field in the 32-bit TRILL
   header extension flags word <span>[<a class="cite xref" href="#RFC7780">RFC7780</a>]</span>.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">
   These fields are shown in <a class="auto internal xref" href="#fig-2">Figure 2</a> as "ECN" and "CCE". The
   TRILL-ECN field consists of bits 12 and 13, which are in the range reserved
   for NCHbH bits. The CCE field consists of bit 26,
   which is in the range reserved for CItE bits. The CRItE bit is the critical
   Ingress-to-Egress summary bit and will be one if, and only if, any of the
   bits in the CItE range (21-26) are one or there is a critical feature
   invoked in some further extension of the TRILL header after the extension
   flags word.  The other bits and fields shown in <a class="auto internal xref" href="#fig-2">Figure 2</a> are
   not relevant to ECN.  See <span>[<a class="cite xref" href="#RFC7780">RFC7780</a>]</span>, <span>[<a class="cite xref" href="#RFC7179">RFC7179</a>]</span>, and <span>[<a class="cite xref" href="#IANAthFlags">IANAthFlags</a>]</span> for the meaning of these other bits and fields.<a class="pilcrow" href="#section-2-2">¶</a></p>
<span id="name-the-trill-ecn-and-cce-trill"></span><div id="fig-2">
<figure id="figure-2">
        <div class="alignLeft art-text artwork" id="section-2-3.1">
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Crit.|  CHbH   |   NCHbH   |CRSV | NCRSV |   CItE    |  NCItE  |
|.....|.........|...........|.....|.......|...........|.........|
|C|C|C|       |C|N|     |   |     |       |         | |   |     |
|R|R|R|       |R|C|     |ECN| Ext |       |         |C|Ext|     |
|H|I|R|       |C|C|     |   | Hop |       |         |C|Clr|     |
|b|t|s|       |A|A|     |   | Cnt |       |         |E|   |     |
|H|E|v|       |F|F|     |   |     |       |         | |   |     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-the-trill-ecn-and-cce-trill">The TRILL-ECN and CCE TRILL Header Extension Flags Word Fields</a>
        </figcaption></figure>
</div>
<p id="section-2-4">
   <a class="auto internal xref" href="#codepoints">Table 1</a> shows the meaning of the codepoints in the
   TRILL-ECN field.  The first three have the same meaning as the
   corresponding ECN field codepoints in the IP header, as defined in <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>. However, codepoint 0b11 is called NCEE to distinguish
   it from CE in IP.<a class="pilcrow" href="#section-2-4">¶</a></p>
<span id="name-trill-ecn-field-codepoints"></span><div id="codepoints">
<table class="center" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-trill-ecn-field-codepoints">TRILL-ECN Field Codepoints</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Binary</th>
            <th class="text-left" colspan="1" rowspan="1">Name</th>
            <th class="text-left" colspan="1" rowspan="1">Meaning</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-center" colspan="1" rowspan="1">00</td>
            <td class="text-left" colspan="1" rowspan="1">Not-ECT</td>
            <td class="text-left" colspan="1" rowspan="1">Not ECN-Capable Transport </td>
          </tr>
          <tr>
            <td class="text-center" colspan="1" rowspan="1">01</td>
            <td class="text-left" colspan="1" rowspan="1">ECT(1)</td>
            <td class="text-left" colspan="1" rowspan="1">ECN-Capable Transport (1)</td>
          </tr>
          <tr>
            <td class="text-center" colspan="1" rowspan="1">10</td>
            <td class="text-left" colspan="1" rowspan="1">ECT(0)</td>
            <td class="text-left" colspan="1" rowspan="1">ECN-Capable Transport (0)</td>
          </tr>
          <tr>
            <td class="text-center" colspan="1" rowspan="1">11</td>
            <td class="text-left" colspan="1" rowspan="1">NCCE</td>
            <td class="text-left" colspan="1" rowspan="1">Non-Critical Congestion Experienced</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-ecn-support">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-ecn-support">ECN Support</a>
      </h2>
<p id="section-3-1">
   This section specifies interworking between TRILL and the original
   standardized form of ECN in IP <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>.<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2">
   The subsections below describe the required behavior to support ECN
   at TRILL ingress, transit, and egress. The ingress behavior occurs as
   a native frame is encapsulated with a TRILL header to produce a TRILL
   Data packet. The transit behavior occurs in all RBridges where TRILL
   Data packets are queued, usually at the output port (including the output port of the TRILL ingress).  The egress
   behavior occurs where a TRILL Data packet is decapsulated and output
   as a native frame through an RBridge port.<a class="pilcrow" href="#section-3-2">¶</a></p>
<p id="section-3-3">
   An RBridge that supports ECN <span class="bcp14">MUST</span> behave as described in the relevant
   subsections below, which correspond to the recommended provisions in
   <a class="auto internal xref" href="#sect-3">Section 3</a> of this document and Sections <a class="relref" href="https://rfc-editor.org/rfc/rfc9599#section-4.2">4.2</a> through <a class="relref" href="https://rfc-editor.org/rfc/rfc9599#section-4.4">4.4</a> of <span>[<a class="cite xref" href="#RFC9599">RFC9599</a>]</span>. Nonetheless, the
   scheme is designed to safely propagate some form of congestion
   notification even if some RBridges in the path followed by a TRILL
   Data packet support ECN and others do not.<a class="pilcrow" href="#section-3-3">¶</a></p>
<div id="sect-3.1">
<section id="section-3.1">
        <h3 id="name-ingress-ecn-support">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-ingress-ecn-support">Ingress ECN Support</a>
        </h3>
<p id="section-3.1-1">
   The behavior at an ingress RBridge is as follows:<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.1">
            <p id="section-3.1-2.1.1">When encapsulating an IP frame, the ingress RBridge <span class="bcp14">MUST</span>:<a class="pilcrow" href="#section-3.1-2.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.1.2.1">set the F flag in the main TRILL header <span>[<a class="cite xref" href="#RFC7780">RFC7780</a>]</span>;<a class="pilcrow" href="#section-3.1-2.1.2.1">¶</a>
</li>
              <li class="normal" id="section-3.1-2.1.2.2">create a flags word as part of the TRILL header;<a class="pilcrow" href="#section-3.1-2.1.2.2">¶</a>
</li>
              <li class="normal" id="section-3.1-2.1.2.3">copy the two ECN bits from the IP header into the TRILL-ECN
         field (flags word bits 12 and 13); and<a class="pilcrow" href="#section-3.1-2.1.2.3">¶</a>
</li>
              <li class="normal" id="section-3.1-2.1.2.4">ensure the CCE flag is set to zero (flags word bit 26).<a class="pilcrow" href="#section-3.1-2.1.2.4">¶</a>
</li>
            </ul>
</li>
          <li class="normal" id="section-3.1-2.2">When encapsulating a frame for a non-IP protocol (where that
          protocol has a means of indicating that ECN is understood by the
          ingress RBridge), the ingress RBridge <span class="bcp14">MUST</span> follow the guidelines in
          <span><a class="relref" href="https://rfc-editor.org/rfc/rfc9599#section-4.3">Section 4.3</a> of [<a class="cite xref" href="#RFC9599">RFC9599</a>]</span> to add a
          flags word to the TRILL header. For a non-IP protocol with an ECN
          field similar to IP, this would be achieved by copying into the
          TRILL-ECN field from the encapsulated native frame.<a class="pilcrow" href="#section-3.1-2.2">¶</a>
</li>
        </ul>
</section>
</div>
<div id="sect-3.2">
<section id="section-3.2">
        <h3 id="name-transit-ecn-support">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-transit-ecn-support">Transit ECN Support</a>
        </h3>
<p id="section-3.2-1">
   The transit behavior, shown below, is required at all RBridges where
   TRILL Data packets are queued, usually at the output port.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-2.1">An RBridge that supports ECN <span class="bcp14">MUST</span> implement some form of AQM according to the guidelines of <span>[<a class="cite xref" href="#RFC7567">RFC7567</a>]</span>.
      The RBridge detects congestion either by monitoring its own queue
      depth or by participating in a link-specific protocol.<a class="pilcrow" href="#section-3.2-2.1">¶</a>
</li>
          <li class="normal" id="section-3.2-2.2">If the TRILL header flags word is present, whenever the AQM
      algorithm decides to indicate critical congestion on a TRILL Data packet, it
      <span class="bcp14">MUST</span> set the CCE flag (flags word bit 26). Note that Classic ECN marking <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span> only uses critical congestion indications, but the two variants in <a class="auto internal xref" href="#sect-4.1">Section 4.1</a> use a combination of critical and non-critical congestion indications.<a class="pilcrow" href="#section-3.2-2.2">¶</a>
</li>
          <li class="normal" id="section-3.2-2.3">
            <p id="section-3.2-2.3.1">If the TRILL header flags word is not present, the RBridge will
            either drop the packet or it <span class="bcp14">MAY</span> do all of the
            following instead to indicate congestion:<a class="pilcrow" href="#section-3.2-2.3.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-2.3.2.1">set the F flag in the main TRILL header;<a class="pilcrow" href="#section-3.2-2.3.2.1">¶</a>
</li>
              <li class="normal" id="section-3.2-2.3.2.2">add a flags word to the TRILL header;<a class="pilcrow" href="#section-3.2-2.3.2.2">¶</a>
</li>
              <li class="normal" id="section-3.2-2.3.2.3">set the TRILL-ECN field to Not-ECT (00); and<a class="pilcrow" href="#section-3.2-2.3.2.3">¶</a>
</li>
              <li class="normal" id="section-3.2-2.3.2.4">set the CCE flag and the critical Ingress-to-Egress summary bit (CRItE).<a class="pilcrow" href="#section-3.2-2.3.2.4">¶</a>
</li>
            </ul>
</li>
        </ul>
<p id="section-3.2-3">
   Note that a transit RBridge that supports ECN does not refer to the
   TRILL-ECN field before signaling CCE in a packet. It signals CCE
   irrespective of whether the packet indicates that the transport is ECN
   capable. The egress/decapsulation behavior ensures that a CCE indication is
   converted to a drop if the transport is not ECN capable.<a class="pilcrow" href="#section-3.2-3">¶</a></p>
</section>
</div>
<div id="sect-3.3">
<section id="section-3.3">
        <h3 id="name-egress-ecn-support">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-egress-ecn-support">Egress ECN Support</a>
        </h3>
<div id="sect-3.3.1">
<section id="section-3.3.1">
          <h4 id="name-non-ecn-egress-rbridges">
<a class="section-number selfRef" href="#section-3.3.1">3.3.1. </a><a class="section-name selfRef" href="#name-non-ecn-egress-rbridges">Non-ECN Egress RBridges</a>
          </h4>
<p id="section-3.3.1-1">
   If the egress RBridge does not support ECN, that RBridge will ignore
   bits 12 and 13 of any flags word that is present because it does not
   contain any special ECN logic. Nonetheless, if a transit RBridge has
   set the CCE flag, the egress will drop the packet. This is because
   drop is the default behavior for an RBridge decapsulating a CItE flag when it has no specific logic to understand
   it. 
Drop is the intended behavior for such a packet, as required by
   <span><a class="relref" href="https://rfc-editor.org/rfc/rfc9599#section-4.4">Section 4.4</a> of [<a class="cite xref" href="#RFC9599">RFC9599</a>]</span>.<a class="pilcrow" href="#section-3.3.1-1">¶</a></p>
</section>
</div>
<div id="sect-3.3.2">
<section id="section-3.3.2">
          <h4 id="name-ecn-egress-rbridges">
<a class="section-number selfRef" href="#section-3.3.2">3.3.2. </a><a class="section-name selfRef" href="#name-ecn-egress-rbridges">ECN Egress RBridges</a>
          </h4>
<p id="section-3.3.2-1">
   If an RBridge supports ECN, for the two cases of an IP and a non-IP
   inner packet, the egress behavior is as follows:<a class="pilcrow" href="#section-3.3.2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.3.2-2">
            <dt id="section-3.3.2-2.1">Decapsulating an inner IP packet:</dt>
            <dd id="section-3.3.2-2.2" style="margin-left: 1.5em">
              <p id="section-3.3.2-2.2.1">The RBridge sets the
      ECN field of the outgoing native IP packet using <a class="auto internal xref" href="#egress-ecn">Table 3</a>. It <span class="bcp14">MUST</span> set
      the ECN field of the outgoing IP packet to the codepoint at the
      intersection of the row for the arriving encapsulated IP packet and the
      column for 3-bit ECN codepoint in the arriving outer TRILL Data packet
      TRILL header. If no TRILL header extension flags word is present, the
      3-bit ECN codepoint is assumed to be all zero bits.<a class="pilcrow" href="#section-3.3.2-2.2.1">¶</a></p>
<p id="section-3.3.2-2.2.2">The name of the TRILL 3-bit ECN codepoint used in <a class="auto internal xref" href="#egress-ecn">Table 3</a> is defined using the
      combination of the TRILL-ECN and CCE fields in <a class="auto internal xref" href="#mapping">Table 2</a>.  Specifically,
      the TRILL 3-bit ECN codepoint is called CE if either NCCE or CCE is set
      in the TRILL header extension flags word. Otherwise, it has the same name
      as the 2-bit TRILL-ECN codepoint.<a class="pilcrow" href="#section-3.3.2-2.2.2">¶</a></p>
<p id="section-3.3.2-2.2.3">
            In the case where the TRILL 3-bit ECN codepoint indicates CE but
            the encapsulated native IP frame indicates a Not-ECT, it can be
            seen that the RBridge <span class="bcp14">MUST</span> drop the packet.  Such
            packet dropping is necessary because a transport above the IP
            layer that is not ECN capable will have no ECN logic, so it will
            only understand dropped packets as an indication of
            congestion.<a class="pilcrow" href="#section-3.3.2-2.2.3">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<span class="break"></span><dl class="dlParallel" id="section-3.3.2-3">
            <dt id="section-3.3.2-3.1">Decapsulating a non-IP protocol frame:</dt>
            <dd id="section-3.3.2-3.2" style="margin-left: 1.5em">If the frame has
 a means of indicating ECN that is understood by the RBridge, it <span class="bcp14">MUST</span>
 follow the guidelines in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc9599#section-4.4">Section 4.4</a> of [<a class="cite xref" href="#RFC9599">RFC9599</a>]</span> when
 setting the ECN
 information in the decapsulated native frame.  For a non-IP protocol
 with an ECN field similar to IP, this would be achieved by combining
 the information in the TRILL header flags word with the encapsulated
 non-IP native frame, as specified in <a class="auto internal xref" href="#egress-ecn">Table 3</a>.<a class="pilcrow" href="#section-3.3.2-3.2">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<span id="name-mapping-of-trill-ecn-and-cc"></span><div id="mapping">
<table class="center" id="table-2">
            <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-mapping-of-trill-ecn-and-cc">Mapping of TRILL-ECN and CCE Fields to the TRILL 3-Bit ECN Codepoint Name</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" colspan="2" rowspan="1">TRILL-ECN</th>
                <th class="text-left" colspan="1" rowspan="2">CCE</th>
                <th class="text-left" colspan="1" rowspan="2">Arriving TRILL 3-Bit ECN Codepoint Name</th>
              </tr>
              <tr>
                <th class="text-left" colspan="1" rowspan="1">Name</th>
                <th class="text-left" colspan="1" rowspan="1">Bits</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">Not-ECT</td>
                <td class="text-center" colspan="1" rowspan="1">00</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-left" colspan="1" rowspan="1">Not-ECT</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">ECT(1)</td>
                <td class="text-center" colspan="1" rowspan="1">01</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-left" colspan="1" rowspan="1">ECT(1)</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">ECT(0)</td>
                <td class="text-center" colspan="1" rowspan="1">10</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-left" colspan="1" rowspan="1">ECT(0)</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">NCCE</td>
                <td class="text-center" colspan="1" rowspan="1">11</td>
                <td class="text-center" colspan="1" rowspan="1">0</td>
                <td class="text-left" colspan="1" rowspan="1">CE</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">Not-ECT</td>
                <td class="text-center" colspan="1" rowspan="1">00</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-left" colspan="1" rowspan="1">CE</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">ECT(1)</td>
                <td class="text-center" colspan="1" rowspan="1">01</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-left" colspan="1" rowspan="1">CE</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">ECT(0)</td>
                <td class="text-center" colspan="1" rowspan="1">10</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-left" colspan="1" rowspan="1">CE</td>
              </tr>
              <tr>
                <td class="text-left" colspan="1" rowspan="1">NCCE</td>
                <td class="text-center" colspan="1" rowspan="1"> 11</td>
                <td class="text-center" colspan="1" rowspan="1">1</td>
                <td class="text-left" colspan="1" rowspan="1">CE</td>
              </tr>
            </tbody>
          </table>
</div>
<span id="name-egress-ecn-behavior"></span><div id="egress-ecn">
<table class="center" id="table-3">
            <caption>
<a class="selfRef" href="#table-3">Table 3</a>:
<a class="selfRef" href="#name-egress-ecn-behavior">Egress ECN Behavior</a>
            </caption>
<thead>
              <tr>
                <th class="text-center" colspan="1" rowspan="2">Inner Native Header</th>
                <th class="text-center" colspan="4" rowspan="1">Arriving TRILL 3-Bit ECN Codepoint Name</th>
              </tr>
              <tr>
                <th class="text-center" colspan="1" rowspan="1">Not-ECT</th>
                <th class="text-center" colspan="1" rowspan="1">ECT(0)</th>
                <th class="text-center" colspan="1" rowspan="1">ECT(1)</th>
                <th class="text-center" colspan="1" rowspan="1">CE</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">Not-ECT</td>
                <td class="text-center" colspan="1" rowspan="1">Not-ECT</td>
                <td class="text-center" colspan="1" rowspan="1">Not-ECT(*)</td>
                <td class="text-center" colspan="1" rowspan="1">Not-ECT(*)</td>
                <td class="text-center" colspan="1" rowspan="1">&lt;drop&gt;</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">ECT(0)</td>
                <td class="text-center" colspan="1" rowspan="1">ECT(0)</td>
                <td class="text-center" colspan="1" rowspan="1">ECT(0)</td>
                <td class="text-center" colspan="1" rowspan="1">ECT(1)</td>
                <td class="text-center" colspan="1" rowspan="1">CE</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">ECT(1)</td>
                <td class="text-center" colspan="1" rowspan="1">ECT(1)</td>
                <td class="text-center" colspan="1" rowspan="1">ECT(1)(*)</td>
                <td class="text-center" colspan="1" rowspan="1">ECT(1)</td>
                <td class="text-center" colspan="1" rowspan="1">CE</td>
              </tr>
              <tr>
                <td class="text-center" colspan="1" rowspan="1">CE</td>
                <td class="text-center" colspan="1" rowspan="1">CE</td>
                <td class="text-center" colspan="1" rowspan="1">CE</td>
                <td class="text-center" colspan="1" rowspan="1">CE(*)</td>
                <td class="text-center" colspan="1" rowspan="1">CE</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-3.3.2-6">
   An asterisk in <a class="auto internal xref" href="#egress-ecn">Table 3</a> indicates a combination that is
   currently unused in all variants of ECN marking (see <a class="auto internal xref" href="#sect-4">Section 4</a>) and
   therefore <span class="bcp14">SHOULD</span> be logged.<a class="pilcrow" href="#section-3.3.2-6">¶</a></p>
<p id="section-3.3.2-7">
   With one exception, the mappings in <a class="auto internal xref" href="#egress-ecn">Table 3</a> are consistent with those for
   IP-in-IP tunnels <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>, which ensures backward
   compatibility with all current and past variants of ECN marking (see <a class="auto internal xref" href="#sect-4">Section 4</a>). It also ensures forward compatibility with any future
   form of ECN marking that complies with the guidelines in <span>[<a class="cite xref" href="#RFC9599">RFC9599</a>]</span>, including cases where
   ECT(1) represents a second level of marking severity below CE.<a class="pilcrow" href="#section-3.3.2-7">¶</a></p>
<p id="section-3.3.2-8">
   The one exception is that the drop condition in <a class="auto internal xref" href="#egress-ecn">Table 3</a> need not be
   logged because, with TRILL, it is the result of a valid combination
   of events.<a class="pilcrow" href="#section-3.3.2-8">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-4">
<section id="section-4">
      <h2 id="name-trill-support-for-ecn-varia">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-trill-support-for-ecn-varia">TRILL Support for ECN Variants</a>
      </h2>
<p id="section-4-1">
   This section is informative, not normative; it discusses interworking
   between TRILL and variants of the standardized form of ECN in IP
   <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>. See also <span>[<a class="cite xref" href="#RFC8311">RFC8311</a>]</span>.<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2">
   The ECN wire protocol for TRILL (<a class="auto internal xref" href="#sect-2">Section 2</a>)
   and the ingress (<a class="auto internal xref" href="#sect-3.1">Section 3.1</a>) and egress
   (<a class="auto internal xref" href="#sect-3.3">Section 3.3</a>) ECN behaviors have been
   designed to
   support the other known variants of ECN as detailed below. New
   variants of ECN will have to comply with the guidelines for defining
   alternative ECN semantics <span>[<a class="cite xref" href="#RFC4774">RFC4774</a>]</span>. It is expected that the TRILL
   ECN wire protocol is generic enough to support such potential future
   variants.<a class="pilcrow" href="#section-4-2">¶</a></p>
<div id="sect-4.1">
<section id="section-4.1">
        <h3 id="name-pre-congestion-notification">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-pre-congestion-notification">Pre-Congestion Notification (PCN)</a>
        </h3>
<p id="section-4.1-1">
   The PCN wire protocol <span>[<a class="cite xref" href="#RFC6660">RFC6660</a>]</span> is
   recognized by the use of a
   PCN-compatible Diffserv codepoint in the IP header and a nonzero IP-ECN
   field. For TRILL or any lower-layer protocol, equivalent
   traffic-classification codepoints would have to be defined, but that is
   outside the
   scope of this document.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">
   The PCN wire protocol is similar to ECN, except it indicates
   congestion with two levels of severity. It uses:<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-3.1">11 (CE) as the most severe, termed the Excess-Traffic-Marked (ETM)
     codepoint<a class="pilcrow" href="#section-4.1-3.1">¶</a>
</li>
          <li class="normal" id="section-4.1-3.2">01 ECT(1) as a lesser severity level, termed the Threshold-Marked
     (ThM) codepoint. This difference between ECT(1) and ECT(0) only
     applies to PCN, not to the classic ECN support specified for TRILL
     in this document before <a class="auto internal xref" href="#sect-4">Section 4</a>.<a class="pilcrow" href="#section-4.1-3.2">¶</a>
</li>
        </ul>
<p id="section-4.1-4">
   To implement PCN on a transit RBridge would require a detailed
   specification. In brief:<a class="pilcrow" href="#section-4.1-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-5.1">the TRILL CCE flag would be used
     for the Excess-Traffic-Marked (ETM) codepoint;<a class="pilcrow" href="#section-4.1-5.1">¶</a>
</li>
          <li class="normal" id="section-4.1-5.2">ECT(1) in the TRILL-ECN field would be used for the Threshold-Marked
     codepoint.<a class="pilcrow" href="#section-4.1-5.2">¶</a>
</li>
        </ul>
<p id="section-4.1-6">
   Then, the ingress and egress behaviors defined in <a class="auto internal xref" href="#sect-3">Section 3</a> would not
   need to be altered to ensure support for PCN as well as ECN.<a class="pilcrow" href="#section-4.1-6">¶</a></p>
</section>
</div>
<div id="sect-4.2">
<section id="section-4.2">
        <h3 id="name-low-latency-low-loss-and-sc">
<a class="section-number selfRef" href="#section-4.2">4.2. </a><a class="section-name selfRef" href="#name-low-latency-low-loss-and-sc">Low Latency, Low Loss, and Scalable Throughput (L4S)</a>
        </h3>
<p id="section-4.2-1">
   L4S is currently on the IETF's experimental track. An outline of how
   a transit TRILL RBridge would support L4S <span>[<a class="cite xref" href="#RFC9331">RFC9331</a>]</span> is given in
   <a class="auto internal xref" href="#sect-a">Appendix A</a>.<a class="pilcrow" href="#section-4.2-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-5">
<section id="section-5">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-5-1">
   IANA has updated the "TRILL Extended Header Flags" registry
   by replacing the lines for bits 9-13 and 21-26 with the
   following:<a class="pilcrow" href="#section-5-1">¶</a></p>
<span id="name-updated-trill-extended-head"></span><div id="iana">
<table class="center" id="table-4">
        <caption>
<a class="selfRef" href="#table-4">Table 4</a>:
<a class="selfRef" href="#name-updated-trill-extended-head">Updated "TRILL Extended Header Flags" Registry</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Bits</th>
            <th class="text-left" colspan="1" rowspan="1">Purpose</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">9-11</td>
            <td class="text-left" colspan="1" rowspan="1">available non-critical hop-by-hop flags</td>
            <td class="text-left" colspan="1" rowspan="1">
              <span>[<a class="cite xref" href="#RFC7179">RFC7179</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">12-13</td>
            <td class="text-left" colspan="1" rowspan="1">TRILL-ECN (Explicit Congestion Notification)</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9600</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">21-25</td>
            <td class="text-left" colspan="1" rowspan="1">available critical ingress-to-egress flags</td>
            <td class="text-left" colspan="1" rowspan="1">
              <span>[<a class="cite xref" href="#RFC7179">RFC7179</a>]</span>
</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">26</td>
            <td class="text-left" colspan="1" rowspan="1">Critical Congestion Experienced (CCE)</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9600</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="sect-6">
<section id="section-6">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-6-1">
   TRILL support of ECN is a straightforward combination of previously
   specified ECN and TRILL with no significant new security
   considerations.<a class="pilcrow" href="#section-6-1">¶</a></p>
<p id="section-6-2">
For general security considerations regarding adding ECN to lower layer protocols, see <span>[<a class="cite xref" href="#RFC9599">RFC9599</a>]</span> and <span>[<a class="cite xref" href="#RFC6040">RFC6040</a>]</span>.<a class="pilcrow" href="#section-6-2">¶</a></p>
<p id="section-6-3">
For general TRILL protocol security considerations, see <span>[<a class="cite xref" href="#RFC6325">RFC6325</a>]</span>.<a class="pilcrow" href="#section-6-3">¶</a></p>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-7.1">7.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3168">[RFC3168]</dt>
        <dd>
<span class="refAuthor">Ramakrishnan, K.</span>, <span class="refAuthor">Floyd, S.</span>, and <span class="refAuthor">D. Black</span>, <span class="refTitle">"The Addition of Explicit Congestion Notification (ECN) to IP"</span>, <span class="seriesInfo">RFC 3168</span>, <span class="seriesInfo">DOI 10.17487/RFC3168</span>, <time class="refDate" datetime="2001-09">September 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3168">https://www.rfc-editor.org/info/rfc3168</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4774">[RFC4774]</dt>
        <dd>
<span class="refAuthor">Floyd, S.</span>, <span class="refTitle">"Specifying Alternate Semantics for the Explicit Congestion Notification (ECN) Field"</span>, <span class="seriesInfo">BCP 124</span>, <span class="seriesInfo">RFC 4774</span>, <span class="seriesInfo">DOI 10.17487/RFC4774</span>, <time class="refDate" datetime="2006-11">November 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4774">https://www.rfc-editor.org/info/rfc4774</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6325">[RFC6325]</dt>
        <dd>
<span class="refAuthor">Perlman, R.</span>, <span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Dutt, D.</span>, <span class="refAuthor">Gai, S.</span>, and <span class="refAuthor">A. Ghanwani</span>, <span class="refTitle">"Routing Bridges (RBridges): Base Protocol Specification"</span>, <span class="seriesInfo">RFC 6325</span>, <span class="seriesInfo">DOI 10.17487/RFC6325</span>, <time class="refDate" datetime="2011-07">July 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6325">https://www.rfc-editor.org/info/rfc6325</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7179">[RFC7179]</dt>
        <dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Ghanwani, A.</span>, <span class="refAuthor">Manral, V.</span>, <span class="refAuthor">Li, Y.</span>, and <span class="refAuthor">C. Bestler</span>, <span class="refTitle">"Transparent Interconnection of Lots of Links (TRILL): Header Extension"</span>, <span class="seriesInfo">RFC 7179</span>, <span class="seriesInfo">DOI 10.17487/RFC7179</span>, <time class="refDate" datetime="2014-05">May 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7179">https://www.rfc-editor.org/info/rfc7179</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7567">[RFC7567]</dt>
        <dd>
<span class="refAuthor">Baker, F., Ed.</span> and <span class="refAuthor">G. Fairhurst, Ed.</span>, <span class="refTitle">"IETF Recommendations Regarding Active Queue Management"</span>, <span class="seriesInfo">BCP 197</span>, <span class="seriesInfo">RFC 7567</span>, <span class="seriesInfo">DOI 10.17487/RFC7567</span>, <time class="refDate" datetime="2015-07">July 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7567">https://www.rfc-editor.org/info/rfc7567</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7780">[RFC7780]</dt>
        <dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Zhang, M.</span>, <span class="refAuthor">Perlman, R.</span>, <span class="refAuthor">Banerjee, A.</span>, <span class="refAuthor">Ghanwani, A.</span>, and <span class="refAuthor">S. Gupta</span>, <span class="refTitle">"Transparent Interconnection of Lots of Links (TRILL): Clarifications, Corrections, and Updates"</span>, <span class="seriesInfo">RFC 7780</span>, <span class="seriesInfo">DOI 10.17487/RFC7780</span>, <time class="refDate" datetime="2016-02">February 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7780">https://www.rfc-editor.org/info/rfc7780</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8311">[RFC8311]</dt>
        <dd>
<span class="refAuthor">Black, D.</span>, <span class="refTitle">"Relaxing Restrictions on Explicit Congestion Notification (ECN) Experimentation"</span>, <span class="seriesInfo">RFC 8311</span>, <span class="seriesInfo">DOI 10.17487/RFC8311</span>, <time class="refDate" datetime="2018-01">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8311">https://www.rfc-editor.org/info/rfc8311</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9599">[RFC9599]</dt>
      <dd>
<span class="refAuthor">Briscoe, B.</span> and <span class="refAuthor">J. Kaippallimalil</span>, <span class="refTitle">"Guidelines for Adding Congestion Notification to Protocols that Encapsulate IP"</span>, <span class="seriesInfo">RFC 9599</span>, <span class="seriesInfo">DOI 10.17487/RFC9599</span>, <time class="refDate" datetime="2024-08">August 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9599">https://www.rfc-editor.org/info/rfc9599</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-7.2">7.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="IANAthFlags">[IANAthFlags]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"TRILL Extended Header Flags"</span>, <span>&lt;<a href="http://www.iana.org/assignments/trill-parameters/">http://www.iana.org/assignments/trill-parameters/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6040">[RFC6040]</dt>
        <dd>
<span class="refAuthor">Briscoe, B.</span>, <span class="refTitle">"Tunnelling of Explicit Congestion Notification"</span>, <span class="seriesInfo">RFC 6040</span>, <span class="seriesInfo">DOI 10.17487/RFC6040</span>, <time class="refDate" datetime="2010-11">November 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6040">https://www.rfc-editor.org/info/rfc6040</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6660">[RFC6660]</dt>
        <dd>
<span class="refAuthor">Briscoe, B.</span>, <span class="refAuthor">Moncaster, T.</span>, and <span class="refAuthor">M. Menth</span>, <span class="refTitle">"Encoding Three Pre-Congestion Notification (PCN) States in the IP Header Using a Single Diffserv Codepoint (DSCP)"</span>, <span class="seriesInfo">RFC 6660</span>, <span class="seriesInfo">DOI 10.17487/RFC6660</span>, <time class="refDate" datetime="2012-07">July 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6660">https://www.rfc-editor.org/info/rfc6660</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9331">[RFC9331]</dt>
      <dd>
<span class="refAuthor">De Schepper, K.</span> and <span class="refAuthor">B. Briscoe, Ed.</span>, <span class="refTitle">"The Explicit Congestion Notification (ECN) Protocol for Low Latency, Low Loss, and Scalable Throughput (L4S)"</span>, <span class="seriesInfo">RFC 9331</span>, <span class="seriesInfo">DOI 10.17487/RFC9331</span>, <time class="refDate" datetime="2023-01">January 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9331">https://www.rfc-editor.org/info/rfc9331</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="sect-a">
<section id="appendix-A">
      <h2 id="name-trill-transit-rbridge-behav">
<a class="section-number selfRef" href="#appendix-A">Appendix A. </a><a class="section-name selfRef" href="#name-trill-transit-rbridge-behav">TRILL Transit RBridge Behavior to Support L4S</a>
      </h2>
<p id="appendix-A-1">
   The specification of the Low Latency, Low Loss, and Scalable throughput (L4S) wire protocol for IP is given in <span>[<a class="cite xref" href="#RFC9331">RFC9331</a>]</span>. L4S is one example
   of the ways TRILL ECN handling may evolve <span>[<a class="cite xref" href="#RFC8311">RFC8311</a>]</span>. It is similar to
   the original ECN wire protocol for IP <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>, except:<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-2.1">An AQM that supports L4S classifies packets with ECT(1) or CE in
     the IP header into an L4S queue and a "Classic" queue otherwise.<a class="pilcrow" href="#appendix-A-2.1">¶</a>
</li>
        <li class="normal" id="appendix-A-2.2">The meaning of CE markings applied by an L4S queue is not the same
     as the meaning of a drop by a "Classic" queue (contrary to the
     original requirement for ECN <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span>). Instead, the likelihood
     that the Classic queue drops packets is defined as the square of
     the likelihood that the L4S queue marks packets -- e.g., when there
     is a drop probability of 0.0009 (0.09%), the L4S marking
     probability will be 0.03 (3%).<a class="pilcrow" href="#appendix-A-2.2">¶</a>
</li>
      </ul>
<p id="appendix-A-3">
   This seems to present a problem for the way that a transit TRILL RBridge
   defers the choice between marking and dropping to the egress.  Nonetheless,
   the following pseudocode outlines how a transit TRILL RBridge can implement
   L4S marking in such a way that the egress behavior already described in
   <a class="auto internal xref" href="#sect-3.3">Section 3.3</a> for Classic ECN <span>[<a class="cite xref" href="#RFC3168">RFC3168</a>]</span> will
   produce the desired outcome.<a class="pilcrow" href="#appendix-A-3">¶</a></p>
<div class="lang-pseudocode sourcecode" id="appendix-A-4">
<pre>   /* p is an internal variable calculated by any L4S AQM
    *  dependent on the delay being experienced in the Classic queue.
    * bit13 is the least significant bit of the TRILL-ECN field
    */

   % On TRILL transit
   if (bit13 == 0 ) {
         % Classic Queue
         if (p &gt; max(random(), random()) )
            mark(CCE)                         % likelihood: p^2

   } else {
         % L4S Queue
         if (p &gt; random() ) {
            if (p &gt; random() )
               mark(CCE)                      % likelihood: p^2
            else
               mark(NCCE)                     % likelihood: p - p^2
         }
   }
</pre><a class="pilcrow" href="#appendix-A-4">¶</a>
</div>
<p id="appendix-A-5">
   With the above transit behavior, an egress that supports ECN (<a class="auto internal xref" href="#sect-3.3">Section 3.3</a>) will drop packets or propagate their ECN markings
   depending on whether the arriving inner header is from an ECN-capable or not ECN-capable transport.<a class="pilcrow" href="#appendix-A-5">¶</a></p>
<p id="appendix-A-6">
   Even if an egress has no L4S-specific logic of its own, it will drop
   packets with the square of the probability that an egress would if it
   did support ECN, for the following reasons:<a class="pilcrow" href="#appendix-A-6">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-7.1">
          <p id="appendix-A-7.1.1">Egress with ECN support:<a class="pilcrow" href="#appendix-A-7.1.1">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-7.1.2.1">
              <p id="appendix-A-7.1.2.1.1">L4S: Propagates both the Critical and Non-Critical CE marks
        (CCE and NCCE) as a CE mark.<a class="pilcrow" href="#appendix-A-7.1.2.1.1">¶</a></p>
<p id="appendix-A-7.1.2.1.2">
 Likelihood: p<sup>2</sup> + p - p<sup>2</sup> = p<a class="pilcrow" href="#appendix-A-7.1.2.1.2">¶</a></p>
</li>
            <li class="normal" id="appendix-A-7.1.2.2">
              <p id="appendix-A-7.1.2.2.1">Classic: Propagates CCE marks as CE or drop, depending on
        the inner header.<a class="pilcrow" href="#appendix-A-7.1.2.2.1">¶</a></p>
<p id="appendix-A-7.1.2.2.2">
 Likelihood: p<sup>2</sup><a class="pilcrow" href="#appendix-A-7.1.2.2.2">¶</a></p>
</li>
          </ul>
</li>
        <li class="normal" id="appendix-A-7.2">
          <p id="appendix-A-7.2.1">Egress without ECN support:<a class="pilcrow" href="#appendix-A-7.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-7.2.2.1">
              <p id="appendix-A-7.2.2.1.1">L4S: Does not propagate NCCE as a CE mark, but drops CCE marks.<a class="pilcrow" href="#appendix-A-7.2.2.1.1">¶</a></p>
<p id="appendix-A-7.2.2.1.2">
 Likelihood: p<sup>2</sup><a class="pilcrow" href="#appendix-A-7.2.2.1.2">¶</a></p>
</li>
            <li class="normal" id="appendix-A-7.2.2.2">
              <p id="appendix-A-7.2.2.2.1">Classic: Drops CCE marks.<a class="pilcrow" href="#appendix-A-7.2.2.2.1">¶</a></p>
<p id="appendix-A-7.2.2.2.2">
 Likelihood: p<sup>2</sup><a class="pilcrow" href="#appendix-A-7.2.2.2.2">¶</a></p>
</li>
          </ul>
</li>
      </ul>
</section>
</div>
<div id="sect-7">
<section id="appendix-B">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-B-1">
   The helpful comments of <span class="contact-name">Loa Andersson</span> and <span class="contact-name">Adam Roach</span> are hereby
   acknowledged.<a class="pilcrow" href="#appendix-B-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Donald E. Eastlake, 3rd</span></div>
<div class="left" dir="auto"><span class="org">Independent</span></div>
<div class="left" dir="auto"><span class="street-address">2386 Panoramic Circle</span></div>
<div class="left" dir="auto">
<span class="locality">Apopka</span>, <span class="region">FL</span> <span class="postal-code">32703</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="tel">
<span>Phone:</span>
<a class="tel" href="tel:+1-508-333-2270">+1-508-333-2270</a>
</div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:d3e3e3@gmail.com">d3e3e3@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Bob Briscoe</span></div>
<div class="left" dir="auto"><span class="org">Independent</span></div>
<div class="left" dir="auto"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:ietf@bobbriscoe.net">ietf@bobbriscoe.net</a>
</div>
<div class="url">
<span>URI:</span>
<a class="url" href="http://bobbriscoe.net/">http://bobbriscoe.net/</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>