<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9572: Updates to EVPN Broadcast, Unknown Unicast, or Multicast (BUM) Procedures</title>
<meta content="Zhaohui Zhang" name="author"/>
<meta content="Wen Lin" name="author"/>
<meta content="Jorge Rabadan" name="author"/>
<meta content="Keyur Patel" name="author"/>
<meta content="Ali Sajassi" name="author"/>
<meta content="
       This document specifies updated procedures for handling
         Broadcast, Unknown Unicast, or Multicast (BUM) traffic in
         Ethernet VPNs (EVPNs), including selective multicast
         and segmentation of provider tunnels. This document updates RFC 7432.
       
    " name="description"/>
<meta content="xml2rfc 3.21.0" name="generator"/>
<meta content="per-region I-PMSI" name="keyword"/>
<meta content="selective multicast forwarding" name="keyword"/>
<meta content="tunnel segmentation" name="keyword"/>
<meta content="inter-AS segmentation" name="keyword"/>
<meta content="inter-region segmentation" name="keyword"/>
<meta content="9572" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.21.0
    Python 3.9.15
    ConfigArgParse 1.5.3
    google-i18n-address 3.0.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    platformdirs 3.8.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 56.1
-->
<link href="rfc9572.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://datatracker.ietf.org/doc/draft-ietf-bess-evpn-bum-procedure-updates-14" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9572" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9572</td>
<td class="center">EVPN BUM Procedures: Updates</td>
<td class="right">May 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Zhang, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9572">9572</a></dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a class="eref" href="https://www.rfc-editor.org/rfc/rfc7432">7432</a> </dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2024-05">May 2024</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">Z. Zhang</div>
<div class="org">Juniper Networks</div>
</div>
<div class="author">
      <div class="author-name">W. Lin</div>
<div class="org">Juniper Networks</div>
</div>
<div class="author">
      <div class="author-name">J. Rabadan</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">K. Patel</div>
<div class="org">Arrcus</div>
</div>
<div class="author">
      <div class="author-name">A. Sajassi</div>
<div class="org">Cisco Systems</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9572</h1>
<h1 id="title">Updates to EVPN Broadcast, Unknown Unicast, or Multicast (BUM) Procedures</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document specifies updated procedures for handling
         Broadcast, Unknown Unicast, or Multicast (BUM) traffic in
         Ethernet VPNs (EVPNs), including selective multicast
         and segmentation of provider tunnels. This document updates RFC 7432.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9572">https://www.rfc-editor.org/info/rfc9572</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="auto internal xref" href="#section-1.1">1.1</a>.  <a class="internal xref" href="#name-requirements-language">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p class="keepWithNext" id="section-toc.1-1.1.2.2.1"><a class="auto internal xref" href="#section-1.2">1.2</a>.  <a class="internal xref" href="#name-terminology">Terminology</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-tunnel-segmentation">Tunnel Segmentation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a class="auto internal xref" href="#section-2.1">2.1</a>.  <a class="internal xref" href="#name-reasons-for-tunnel-segmenta">Reasons for Tunnel Segmentation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-additional-route-types-of-e">Additional Route Types of EVPN NLRI</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="auto internal xref" href="#section-3.1">3.1</a>.  <a class="internal xref" href="#name-per-region-i-pmsi-a-d-route">Per-Region I-PMSI A-D Route</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="auto internal xref" href="#section-3.2">3.2</a>.  <a class="internal xref" href="#name-s-pmsi-a-d-route">S-PMSI A-D Route</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="auto internal xref" href="#section-3.3">3.3</a>.  <a class="internal xref" href="#name-leaf-a-d-route">Leaf A-D Route</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-selective-multicast">Selective Multicast</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-inter-as-segmentation">Inter-AS Segmentation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="auto internal xref" href="#section-5.1">5.1</a>.  <a class="internal xref" href="#name-differences-from-section-72">Differences from Section 7.2.2 of RFC 7117 when Applied to EVPNs</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="auto internal xref" href="#section-5.2">5.2</a>.  <a class="internal xref" href="#name-i-pmsi-leaf-tracking">I-PMSI Leaf Tracking</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="auto internal xref" href="#section-5.3">5.3</a>.  <a class="internal xref" href="#name-backward-compatibility">Backward Compatibility</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a class="auto internal xref" href="#section-5.3.1">5.3.1</a>.  <a class="internal xref" href="#name-designated-asbr-election">Designated ASBR Election</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-inter-region-segmentation">Inter-Region Segmentation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="auto internal xref" href="#section-6.1">6.1</a>.  <a class="internal xref" href="#name-area-as-vs-region">Area/AS vs. Region</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a class="auto internal xref" href="#section-6.2">6.2</a>.  <a class="internal xref" href="#name-per-region-aggregation">Per-Region Aggregation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a class="auto internal xref" href="#section-6.3">6.3</a>.  <a class="internal xref" href="#name-use-of-s-nh-ec">Use of S-NH-EC</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a class="auto internal xref" href="#section-6.4">6.4</a>.  <a class="internal xref" href="#name-ingress-pes-i-pmsi-leaf-tra">Ingress PE's I-PMSI Leaf Tracking</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-multihoming-support">Multihoming Support</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#section-9">9</a>.  <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#section-10">10</a>. <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="auto internal xref" href="#section-10.1">10.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a class="auto internal xref" href="#section-10.2">10.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="auto internal xref" href="#appendix-A"></a><a class="internal xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-contributors">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="auto internal xref" href="#appendix-C"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1"><span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> specifies procedures for multicast in the Virtual Private LAN
       Service (VPLS multicast), using both inclusive tunnels and
       selective tunnels with or without inter-AS segmentation, similar to the
       Multicast VPN (MVPN) procedures specified in <span>[<a class="cite xref" href="#RFC6513">RFC6513</a>]</span> and <span>[<a class="cite xref" href="#RFC6514">RFC6514</a>]</span>.
       <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span> specifies inter-area tunnel segmentation procedures for
    both VPLS multicast and MVPNs.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2"><span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span> specifies BGP MPLS-based Ethernet VPN (EVPN) procedures,
       including those handling Broadcast, Unknown Unicast, or Multicast
       (BUM) traffic. <span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span> refers to <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> for details but leaves a few feature gaps related to selective tunnel and tunnel segmentation (<a class="auto internal xref" href="#motivation">Section 2.1</a>).<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">This document aims to fill in those gaps by covering the use of selective
       and segmented tunnels in EVPNs. 
       In the same way that <span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span> refers to <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> for details, this document only specifies differences from relevant procedures provided in <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> and <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span>, rather than repeating the text from those documents.
       Note that these differences are applicable to EVPNs only
       and are not updates to <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> or <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span>.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">MVPN, VPLS, and EVPN technologies all need to discover other Provider Edges (PEs) in the
       same L3/L2 VPN and announce the inclusive tunnels. MVPN technology introduced
       the Inclusive P-Multicast Service Interface (I-PMSI) concept and uses I-PMSI Auto-Discovery (A-D) routes for that purpose.
       EVPN technology uses Inclusive Multicast Ethernet Tag (IMET) A-D routes,
       but VPLS technology just adds a PMSI Tunnel Attribute (PTA) to an existing
       VPLS A-D route for that purpose. For selective tunnels, they all
       do use the same term: Selective PMSI (S-PMSI) A-D routes.<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">This document often refers to the I-PMSI concept, which is
       the same for all three technologies. For consistency and convenience,
       an EVPN's IMET A-D route and a VPLS's VPLS A-D route carrying a PTA for BUM traffic
       purposes may each be referred to as an I-PMSI A-D route, depending on the
       context.<a class="pilcrow" href="#section-1-5">¶</a></p>
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-requirements-language">Requirements Language</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>",
       "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>",
       "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>",
       "<span class="bcp14">SHOULD NOT</span>",
       "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
       "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document
       are to be interpreted as described in BCP 14
       <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> when, and only
       when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
</section>
<section id="section-1.2">
        <h3 id="name-terminology">
<a class="section-number selfRef" href="#section-1.2">1.2. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
        </h3>
<p id="section-1.2-1">It is assumed that the reader is familiar with concepts and terminologies related to MVPN technology <span>[<a class="cite xref" href="#RFC6513">RFC6513</a>]</span> <span>[<a class="cite xref" href="#RFC6514">RFC6514</a>]</span>, VPLS multicast <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span>, and EVPN technology <span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span>. For convenience, the following terms are briefly
       explained.<a class="pilcrow" href="#section-1.2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.2-2">
          <dt id="section-1.2-2.1">AS:</dt>
          <dd id="section-1.2-2.2" style="margin-left: 1.5em">Autonomous System<a class="pilcrow" href="#section-1.2-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.3">PMSI <span>[<a class="cite xref" href="#RFC6513">RFC6513</a>]</span>:</dt>
          <dd id="section-1.2-2.4" style="margin-left: 1.5em">P-Multicast Service Interface. A conceptual interface for a PE
          to send customer multicast traffic to all or some PEs in the same
          VPN.<a class="pilcrow" href="#section-1.2-2.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.5">I-PMSI:</dt>
          <dd id="section-1.2-2.6" style="margin-left: 1.5em">Inclusive PMSI. Enables traffic to be sent to all PEs in the same VPN.<a class="pilcrow" href="#section-1.2-2.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.7">S-PMSI:</dt>
          <dd id="section-1.2-2.8" style="margin-left: 1.5em">Selective PMSI. Enables traffic to be sent to some of the PEs in the same VPN.<a class="pilcrow" href="#section-1.2-2.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.9">I/S-PMSI A-D Route:</dt>
          <dd id="section-1.2-2.10" style="margin-left: 1.5em">Auto-Discovery route used to announce the tunnels that instantiate an I/S-PMSI.<a class="pilcrow" href="#section-1.2-2.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.11">Leaf Auto-Discovery (A-D) Route <span>[<a class="cite xref" href="#RFC6513">RFC6513</a>]</span>:</dt>
          <dd id="section-1.2-2.12" style="margin-left: 1.5em">For explicit leaf-tracking purposes.
       Triggered by I/S-PMSI A-D routes and targeted at the triggering
    route's (re-)advertiser. Its Network Layer
   Reachability Information (NLRI) embeds the entire NLRI of the triggering PMSI A-D route.<a class="pilcrow" href="#section-1.2-2.12">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.13">IMET A-D Route <span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span>:</dt>
          <dd id="section-1.2-2.14" style="margin-left: 1.5em">Inclusive Multicast Ethernet Tag A-D route.
          The EVPN equivalent of an MVPN Intra-AS I-PMSI A-D route
   used to announce the tunnels that instantiate an I-PMSI.<a class="pilcrow" href="#section-1.2-2.14">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.15">SMET A-D Route <span>[<a class="cite xref" href="#RFC9251">RFC9251</a>]</span>:</dt>
          <dd id="section-1.2-2.16" style="margin-left: 1.5em">Selective Multicast Ethernet Tag A-D route. The EVPN
          equivalent of an MVPN Leaf A-D route, but unsolicited and untargeted.<a class="pilcrow" href="#section-1.2-2.16">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.17">PMSI Tunnel Attribute (PTA):</dt>
          <dd id="section-1.2-2.18" style="margin-left: 1.5em">An optional transitive BGP attribute
          that may be attached to PMSI/Leaf A-D routes to provide
          information for a PMSI tunnel.<a class="pilcrow" href="#section-1.2-2.18">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.19">IBGP:</dt>
          <dd id="section-1.2-2.20" style="margin-left: 1.5em">Internal BGP (BGP connection between internal peers).<a class="pilcrow" href="#section-1.2-2.20">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.21">EBGP:</dt>
          <dd id="section-1.2-2.22" style="margin-left: 1.5em">External BGP (BGP connection between external peers).<a class="pilcrow" href="#section-1.2-2.22">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-2.23">RT:</dt>
          <dd id="section-1.2-2.24" style="margin-left: 1.5em">Route Target. Controls route importation and propagation.<a class="pilcrow" href="#section-1.2-2.24">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</section>
<div id="segmentation">
<section id="section-2">
      <h2 id="name-tunnel-segmentation">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-tunnel-segmentation">Tunnel Segmentation</a>
      </h2>
<p id="section-2-1">MVPN provider tunnels and EVPN/VPLS BUM provider tunnels, which are
       referred to as MVPN/EVPN/VPLS provider tunnels in this document for
       simplicity, can be segmented for technical or administrative reasons,
       which are summarized in <a class="auto internal xref" href="#motivation">Section 2.1</a> of this document.
       <span>[<a class="cite xref" href="#RFC6513">RFC6513</a>]</span> and <span>[<a class="cite xref" href="#RFC6514">RFC6514</a>]</span> cover MVPN inter-AS segmentation,
       <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> covers
       VPLS multicast inter-AS segmentation, and <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span> (seamless MPLS
       multicast) covers inter-area segmentation for both MVPNs and VPLSs.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">With tunnel segmentation, different segments of an end-to-end tunnel
 may have different encapsulation overheads. However, the largest overhead
 of the tunnel caused by an encapsulation method on a particular segment
 is not different from the case of a non-segmented tunnel with that
 encapsulation method. This is similar to the case of a network
 with different link types.<a class="pilcrow" href="#section-2-2">¶</a></p>
<p id="section-2-3">There is a difference between MVPN and VPLS multicast inter-AS
       segmentation (the VPLS approach is briefly described in <a class="auto internal xref" href="#interaschanges">Section 5.1</a>). For simplicity, EVPNs will use the same procedures as those for
       MVPNs. All ASBRs can re-advertise
       their choice of the best route. Each can become the root of its
       intra-AS segment and inject traffic it receives from its upstream,
       while each downstream PE/ASBR will only pick one of the upstream ASBRs
       as its upstream. This is also the behavior even for VPLS in the case of
       inter-area segmentation.<a class="pilcrow" href="#section-2-3">¶</a></p>
<p id="section-2-4">For inter-area segmentation, <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span> requires the use of the Inter-Area
       Point-to-Multipoint (P2MP) Segmented Next-Hop Extended Community (S-NH-EC) and the setting
       of the Leaf Information Required (L) flag in the PTA in certain situations.
       In the EVPN case, the requirements around the S-NH-EC and the L flag in the PTA
       differ from <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span> to make the segmentation procedures transparent to
       ingress and egress PEs.<a class="pilcrow" href="#section-2-4">¶</a></p>
<p id="section-2-5"><span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span> assumes that segmentation happens at area borders.
       However, it could be at "regional" borders, where a region could be a
       sub-area, or even an entire AS plus its external links
       (<a class="auto internal xref" href="#region">Section 6.1</a>); this would
       allow for more flexible deployment scenarios (e.g., for single-area
       provider networks). This document extends the inter-area segmentation concept
       to inter-region segmentation for EVPNs.<a class="pilcrow" href="#section-2-5">¶</a></p>
<div id="motivation">
<section id="section-2.1">
        <h3 id="name-reasons-for-tunnel-segmenta">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-reasons-for-tunnel-segmenta">Reasons for Tunnel Segmentation</a>
        </h3>
<p id="section-2.1-1">Tunnel segmentation may be required and/or desired for
       administrative and/or technical reasons.<a class="pilcrow" href="#section-2.1-1">¶</a></p>
<p id="section-2.1-2">For example, an MVPN/VPLS/EVPN may span multiple providers,
       and the end-to-end provider
       tunnels have to be segmented at and stitched by the ASBRs.
       Different providers may use different tunnel technologies (e.g.,
       provider A uses ingress replication <span>[<a class="cite xref" href="#RFC7988">RFC7988</a>]</span>, provider B uses RSVP-TE
       P2MP <span>[<a class="cite xref" href="#RFC4875">RFC4875</a>]</span>, and provider C uses Multipoint LDP (mLDP) <span>[<a class="cite xref" href="#RFC6388">RFC6388</a>]</span>). Even if they use
       the same tunnel technology (e.g., RSVP-TE
       P2MP), it may be impractical to set up the tunnels across provider
       boundaries.<a class="pilcrow" href="#section-2.1-2">¶</a></p>
<p id="section-2.1-3">The same situations may apply between the ASes and/or areas of a
       single provider. For example, the backbone area may use RSVP-TE
       P2MP tunnels while non-backbone areas may use mLDP tunnels.<a class="pilcrow" href="#section-2.1-3">¶</a></p>
<p id="section-2.1-4">Segmentation can also be used to divide an AS/area into smaller regions,
       so that control plane state and/or forwarding plane state/burden can be
       limited to that of individual regions. For example, instead of
       ingress-replicating to 100 PEs in the entire AS, with inter-area segmentation
       <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span>, a PE only needs to replicate to local PEs and Area Border Routers (ABRs).
       The ABRs will further replicate to their downstream PEs and ABRs.
       This not only reduces the forwarding plane burden, but also reduces
       the leaf-tracking burden in the control plane.<a class="pilcrow" href="#section-2.1-4">¶</a></p>
<p id="section-2.1-5">In the case of tunnel aggregation, smaller regions provide the benefit of
       making it easier to find congruence among the segments of
       different constituent (service) tunnels and the resulting aggregation
       (base) tunnel in a region. This leads to better bandwidth efficiency,
       because the more congruent they are, the fewer leaves of the base
       tunnel need to discard traffic when a service tunnel's segment 
       does not need to receive the traffic (yet it is receiving the traffic
       due to aggregation).<a class="pilcrow" href="#section-2.1-5">¶</a></p>
<p id="section-2.1-6">Another advantage of the smaller region is smaller Bit Index
       Explicit Replication (BIER) subdomains <span>[<a class="cite xref" href="#RFC8279">RFC8279</a>]</span>.
       With BIER, packets carry a BitString,
       in which the bits correspond to edge routers that need to receive
       traffic. Smaller subdomains means that smaller BitStrings can be used
       without having to send multiple copies of the same packet.<a class="pilcrow" href="#section-2.1-6">¶</a></p>
</section>
</div>
</section>
</div>
<div id="routes">
<section id="section-3">
      <h2 id="name-additional-route-types-of-e">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-additional-route-types-of-e">Additional Route Types of EVPN NLRI</a>
      </h2>
<p id="section-3-1"><span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span> defines the format of EVPN NLRI as follows:<a class="pilcrow" href="#section-3-1">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3-2">
<pre>                 +-----------------------------------+
                 |    Route Type (1 octet)           |
                 +-----------------------------------+
                 |     Length (1 octet)              |
                 +-----------------------------------+
                 | Route Type specific (variable)    |
                 +-----------------------------------+
</pre><a class="pilcrow" href="#section-3-2">¶</a>
</div>
<p id="section-3-3">
        So far, eight route types have been defined in <span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span>,
        <span>[<a class="cite xref" href="#RFC9136">RFC9136</a>]</span>, and
        <span>[<a class="cite xref" href="#RFC9251">RFC9251</a>]</span>:<a class="pilcrow" href="#section-3-3">¶</a></p>
<span id="name-pre-existing-route-types"></span><div id="tab-0">
<table class="center" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-pre-existing-route-types">Pre-existing Route Types</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Value</th>
            <th class="text-left" colspan="1" rowspan="1">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">1</td>
            <td class="text-left" colspan="1" rowspan="1">Ethernet Auto-discovery</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">2</td>
            <td class="text-left" colspan="1" rowspan="1">MAC/IP Advertisement</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">3</td>
            <td class="text-left" colspan="1" rowspan="1">Inclusive Multicast Ethernet Tag</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">4</td>
            <td class="text-left" colspan="1" rowspan="1">Ethernet Segment</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">5</td>
            <td class="text-left" colspan="1" rowspan="1">IP Prefix</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">6</td>
            <td class="text-left" colspan="1" rowspan="1">Selective Multicast Ethernet Tag Route</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">7</td>
            <td class="text-left" colspan="1" rowspan="1">Multicast Membership Report Synch Route</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">8</td>
            <td class="text-left" colspan="1" rowspan="1">Multicast Leave Synch Route</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-3-5">
        This document defines three additional route types:<a class="pilcrow" href="#section-3-5">¶</a></p>
<span id="name-new-route-types"></span><div id="tab-0a">
<table class="center" id="table-2">
        <caption>
<a class="selfRef" href="#table-2">Table 2</a>:
<a class="selfRef" href="#name-new-route-types">New Route Types</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Value</th>
            <th class="text-left" colspan="1" rowspan="1">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">9</td>
            <td class="text-left" colspan="1" rowspan="1">Per-Region I-PMSI A-D route</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">10</td>
            <td class="text-left" colspan="1" rowspan="1">S-PMSI A-D route</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">11</td>
            <td class="text-left" colspan="1" rowspan="1">Leaf A-D route</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-3-7">
        The "Route Type specific" field of the Type 9 and Type 10 EVPN NLRIs
        starts with a Type 1 RD (Route Distinguisher), whose Administrator sub-field <span class="bcp14">MUST</span> match
        that of the RD in all current EVPN routes that are not Leaf A-D routes
        (<a class="auto internal xref" href="#leaf">Section 3.3</a>), i.e., non-Leaf A-D routes
        from the same advertising router for a given EVPN instance (EVI).<a class="pilcrow" href="#section-3-7">¶</a></p>
<div id="per-region">
<section id="section-3.1">
        <h3 id="name-per-region-i-pmsi-a-d-route">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-per-region-i-pmsi-a-d-route">Per-Region I-PMSI A-D Route</a>
        </h3>
<p id="section-3.1-1">The per-region I-PMSI A-D route has the following format. Its usage is
       discussed in <a class="auto internal xref" href="#aggregation">Section 6.2</a>.<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1-2">
<pre>                +-----------------------------------+
                |       RD (8 octets)               |
                +-----------------------------------+
                |  Ethernet Tag ID (4 octets)       |
                +-----------------------------------+
                |  Region ID (8 octets)             |
                +-----------------------------------+
</pre><a class="pilcrow" href="#section-3.1-2">¶</a>
</div>
<p id="section-3.1-3">
        The Region ID identifies the region and is encoded in the same way that an
        EC is encoded, as detailed in
        <a class="auto internal xref" href="#aggregation">Section 6.2</a>.<a class="pilcrow" href="#section-3.1-3">¶</a></p>
</section>
</div>
<section id="section-3.2">
        <h3 id="name-s-pmsi-a-d-route">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-s-pmsi-a-d-route">S-PMSI A-D Route</a>
        </h3>
<p id="section-3.2-1">The S-PMSI A-D route has the following format:<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2-2">
<pre>                +-----------------------------------+
                |       RD (8 octets)               |
                +-----------------------------------+
                |  Ethernet Tag ID (4 octets)       |
                +-----------------------------------+
                | Multicast Source Length (1 octet) |
                +-----------------------------------+
                |  Multicast Source (variable)      |
                +-----------------------------------+
                |  Multicast Group Length (1 octet) |
                +-----------------------------------+
                |  Multicast Group (variable)       |
                +-----------------------------------+
                |Originator's Addr Length (1 octet) |
                +-----------------------------------+
                |Originator's Addr (4 or 16 octets) |
                +-----------------------------------+
</pre><a class="pilcrow" href="#section-3.2-2">¶</a>
</div>
<p id="section-3.2-3">
        Other than the addition of the Ethernet Tag ID and Originator's Addr
        Length fields, it is identical
        to the S-PMSI A-D route as defined in <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span>. The procedures specified
        in <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> also apply (including wildcard functionality),
        except that the granularity level is per Ethernet Tag.<a class="pilcrow" href="#section-3.2-3">¶</a></p>
</section>
<div id="leaf">
<section id="section-3.3">
        <h3 id="name-leaf-a-d-route">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-leaf-a-d-route">Leaf A-D Route</a>
        </h3>
<p id="section-3.3-1">The Route Type specific field of a Leaf A-D route consists of
       the following:<a class="pilcrow" href="#section-3.3-1">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.3-2">
<pre>                +-----------------------------------+
                |      Route Key (variable)         |
                +-----------------------------------+
                |Originator's Addr Length (1 octet) |
                +-----------------------------------+
                |Originator's Addr (4 or 16 octets) |
                +-----------------------------------+
</pre><a class="pilcrow" href="#section-3.3-2">¶</a>
</div>
<p id="section-3.3-3">
        A Leaf A-D route is originated in response to a PMSI route,
        which could be an IMET A-D route, a per-region
        I-PMSI A-D route, an S-PMSI A-D route, or some other types of
        routes that may be defined in the future that trigger Leaf A-D
        routes. The Route Key is the NLRI of the
        route for which this Leaf A-D route is generated.<a class="pilcrow" href="#section-3.3-3">¶</a></p>
<p id="section-3.3-4">The general procedures for Leaf A-D routes were first specified in
       <span>[<a class="cite xref" href="#RFC6514">RFC6514</a>]</span> for MVPNs. The principles therein apply to VPLSs and EVPNs as well.
       <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> provides details regarding VPLS multicast, and this document points
       out some specifics for EVPNs, e.g., in <a class="auto internal xref" href="#inter-as">Section 5</a>.<a class="pilcrow" href="#section-3.3-4">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-4">
      <h2 id="name-selective-multicast">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-selective-multicast">Selective Multicast</a>
      </h2>
<p id="section-4-1"><span>[<a class="cite xref" href="#RFC9251">RFC9251</a>]</span> specifies
       procedures for EVPN selective forwarding of IP multicast traffic using SMET
       routes. It assumes that selective forwarding is always used with ingress replication
       for all flows (though the same signaling can also be used for an
    ingress PE to learn the set of egress PEs for selective
    forwarding with BIER).
    A Network Virtualization Edge (NVE) proxies the IGMP/MLD state ("MLD" stands for "Multicast Listener Discovery") that it learns on its
       Attachment Circuits (ACs) to (C-S,C-G) or (C-*,C-G) SMET routes that are advertised to other NVEs,
       and a receiving NVE converts the SMET routes back to IGMP/MLD messages
       and sends them out of its ACs. The receiving NVE also uses the SMET
       routes to identify which NVEs need to receive traffic for a particular
       (C-S,C-G) or (C-*,C-G) to achieve selective forwarding using ingress replication or
       BIER.<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2">With the above procedures, selective forwarding is done for all flows,
       and the SMET routes are advertised for all flows.
       It is possible that an operator may not want to track all those
       (C-S, C-G) or (C-*,C-G) states on the NVEs, and the multicast traffic
       pattern allows inclusive forwarding for most flows while selective
       forwarding is needed only for a few high-rate flows. For that reason,
       or for tunnel types other than ingress replication or BIER, S-PMSI/Leaf A-D procedures
       defined for selective multicast for VPLS in <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> are used. Other
       than the fact that different route types and formats are specified with an EVPN SAFI
       for S-PMSI A-D and Leaf A-D routes (<a class="auto internal xref" href="#routes">Section 3</a>), all
       procedures specified in <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> with respect to selective multicast apply to
       EVPNs as well, including wildcard procedures. In a nutshell, a source
       NVE advertises S-PMSI A-D routes to announce the tunnels used for
       certain flows, and receiving NVEs either join the announced PIM/mLDP
       tunnel or respond with Leaf A-D routes if the L
       flag is set in the S-PMSI A-D route's PTA (so that the source NVE can
       include them as tunnel leaves).<a class="pilcrow" href="#section-4-2">¶</a></p>
<p id="section-4-3">An optimization to the procedures provided in <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> may be applied.  Even if
   a source NVE sets the L flag to request Leaf A-D routes, an egress
   NVE <span class="bcp14">MAY</span> omit the Leaf A-D route if it has already advertised a
   corresponding SMET route, and the source NVE <span class="bcp14">MUST</span> use that in lieu of
   the Leaf A-D route.<a class="pilcrow" href="#section-4-3">¶</a></p>
<p id="section-4-4">The optional optimizations specified for MVPNs in
       <span>[<a class="cite xref" href="#RFC8534">RFC8534</a>]</span> are also applicable
       to EVPNs when the procedures for S-PMSI/Leaf A-D routes are used for EVPN
       selective multicast forwarding.<a class="pilcrow" href="#section-4-4">¶</a></p>
</section>
<div id="inter-as">
<section id="section-5">
      <h2 id="name-inter-as-segmentation">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-inter-as-segmentation">Inter-AS Segmentation</a>
      </h2>
<div id="interaschanges">
<section id="section-5.1">
        <h3 id="name-differences-from-section-72">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-differences-from-section-72">Differences from Section 7.2.2 of RFC 7117 when Applied to EVPNs</a>
        </h3>
<p id="section-5.1-1">The first paragraph of <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7117#section-7.2.2.2">Section 7.2.2.2</a> of [<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> says:<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<blockquote id="section-5.1-2">
   ... The best route procedures ensure that if multiple
   ASBRs, in an AS, receive the same Inter-AS A-D route from their EBGP
   neighbors, only one of these ASBRs propagates this route in Internal
   BGP (IBGP).  This ASBR becomes the root of the intra-AS segment of
   the inter-AS tree and ensures that this is the only ASBR that accepts
   traffic into this AS from the inter-AS tree.<a class="pilcrow" href="#section-5.1-2">¶</a>
</blockquote>
<p id="section-5.1-3">
       The above VPLS behavior requires complicated VPLS-specific procedures
       for the ASBRs to reach agreement. For EVPNs, a different approach
       is used; the above text from <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> is not applicable to EVPNs.<a class="pilcrow" href="#section-5.1-3">¶</a></p>
<p id="section-5.1-4">With the different approach for EVPNs/MVPNs, each ASBR will re-advertise
       its received Inter-AS A-D route to its IBGP peers and becomes the root
       of an intra-AS segment of the inter-AS tree. The intra-AS segment
       rooted at one ASBR is disjoint from another intra-AS segment rooted
       at another ASBR. This is the same as the procedures for S-PMSI routes
       in <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> itself.<a class="pilcrow" href="#section-5.1-4">¶</a></p>
<p id="section-5.1-5">The following bullet in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7117#section-7.2.2.2">Section 7.2.2.2</a> of [<a class="cite xref" href="#RFC7117">RFC7117</a>]</span> does not apply
 to EVPNs.<a class="pilcrow" href="#section-5.1-5">¶</a></p>
<blockquote id="section-5.1-6">
          <ul class="normal">
<li class="normal" id="section-5.1-6.1.1">If the ASBR uses ingress replication to instantiate the intra-AS
       segment of the inter-AS tunnel, the re-advertised route <span class="bcp14">MUST NOT</span>
       carry the PMSI Tunnel attribute.<a class="pilcrow" href="#section-5.1-6.1.1">¶</a>
</li>
          </ul>
</blockquote>
<p id="section-5.1-7">The following bullet in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7117#section-7.2.2.2">Section 7.2.2.2</a> of [<a class="cite xref" href="#RFC7117">RFC7117</a>]</span>:<a class="pilcrow" href="#section-5.1-7">¶</a></p>
<blockquote id="section-5.1-8">
          <ul class="normal">
<li class="normal" id="section-5.1-8.1.1">
       If the ASBR uses a P-multicast tree to instantiate the intra-AS
       segment of the inter-AS tunnel, the PMSI Tunnel attribute <span class="bcp14">MUST</span>
       contain the identity of the tree that is used to instantiate the
       segment (note that the ASBR could create the identity of the tree
       prior to the actual instantiation of the segment).  If, in order
       to instantiate the segment, the ASBR needs to know the leaves of
       the tree, then the ASBR obtains this information from the A-D
       routes received from other PEs/ASBRs in the ASBR's own AS.<a class="pilcrow" href="#section-5.1-8.1.1">¶</a>
</li>
          </ul>
</blockquote>
<p id="section-5.1-9">is changed to the following when applied to EVPNs:<a class="pilcrow" href="#section-5.1-9">¶</a></p>
<blockquote id="section-5.1-10">
          <ul class="normal">
<li class="normal" id="section-5.1-10.1.1">
      The PTA <span class="bcp14">MUST</span> specify the tunnel for the segment.
      If and only if, in order to establish the tunnel, the ASBR needs to
      know the leaves of the tree, then the ASBR <span class="bcp14">MUST</span> set the L flag to
      1 in the PTA to trigger Leaf A-D routes from egress PEs and
      downstream ASBRs. It <span class="bcp14">MUST</span> be (auto-)configured with an import RT,
      which controls acceptance of Leaf A-D routes by the ASBR.<a class="pilcrow" href="#section-5.1-10.1.1">¶</a>
</li>
          </ul>
</blockquote>
<p id="section-5.1-11">Accordingly, the following paragraph in <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7117#section-7.2.2.4">Section 7.2.2.4</a> of [<a class="cite xref" href="#RFC7117">RFC7117</a>]</span>:<a class="pilcrow" href="#section-5.1-11">¶</a></p>
<blockquote id="section-5.1-12">
   If the received Inter-AS A-D route carries the PMSI Tunnel attribute
   with the Tunnel Identifier set to RSVP-TE P2MP LSP, then the ASBR
   that originated the route <span class="bcp14">MUST</span> establish an RSVP-TE P2MP LSP with the
   local PE/ASBR as a leaf.  This LSP <span class="bcp14">MAY</span> have been established before
   the local PE/ASBR receives the route, or it <span class="bcp14">MAY</span> be established after
   the local PE receives the route.<a class="pilcrow" href="#section-5.1-12">¶</a>
</blockquote>
<p id="section-5.1-13">
        is changed to the following when applied to EVPNs:<a class="pilcrow" href="#section-5.1-13">¶</a></p>
<blockquote id="section-5.1-14">
 If the received Inter-AS A-D route has the L flag set in its PTA,
 then a receiving PE <span class="bcp14">MUST</span> originate a corresponding Leaf A-D route.
 A receiving ASBR <span class="bcp14">MUST</span> originate a corresponding Leaf A-D
 route if and only if one of the following conditions is met:
 (1) it received and imported one or more corresponding Leaf A-D
 routes from its downstream IBGP or EBGP peers or (2) it has
 non-null downstream forwarding state for the PIM/mLDP tunnel that
 instantiates its downstream intra-AS segment. The targeted ASBR for the Leaf A-D
 route, which (re-)advertised the Inter-AS A-D route, <span class="bcp14">MUST</span> establish a tunnel to the
 leaves discovered by the Leaf A-D routes.<a class="pilcrow" href="#section-5.1-14">¶</a>
</blockquote>
</section>
</div>
<div id="leaf-tracking">
<section id="section-5.2">
        <h3 id="name-i-pmsi-leaf-tracking">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-i-pmsi-leaf-tracking">I-PMSI Leaf Tracking</a>
        </h3>
<p id="section-5.2-1">An ingress PE does not set the L flag in its IMET A-D route's PTA,
       even with Ingress Replication tunnels or RSVP-TE P2MP tunnels.
       It does not rely on the Leaf A-D routes to discover leaves in
       its AS, and <span><a class="relref" href="https://rfc-editor.org/rfc/rfc7432#section-11.2">Section 11.2</a> of [<a class="cite xref" href="#RFC7432">RFC7432</a>]</span> explicitly states that the L
       flag must be set to 0.<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<p id="section-5.2-2">An implementation of <span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span> might have used the Originating
       Router's IP Address field of the IMET A-D
       routes to determine the leaves or might have used the Next Hop field
       instead. Within the same AS, both will lead to the same result.<a class="pilcrow" href="#section-5.2-2">¶</a></p>
<p id="section-5.2-3">With segmentation, an ingress PE <span class="bcp14">MUST</span> determine the leaves
       in its AS from the BGP next hops in all its received IMET A-D
       routes, so it does not have to set the L flag to request Leaf A-D
       routes. PEs within the same AS will all have different next hops
       in their IMET A-D routes (and hence will all be considered as leaves),
       and PEs from other ASes will have the next hop in their IMET A-D
       routes set to addresses of ASBRs in this local AS; hence, only those
       ASBRs will be considered as leaves (as proxies for those PEs in other
       ASes). Note that in the case of ingress replication, when an ASBR
       re-advertises IMET A-D routes to IBGP peers, it <span class="bcp14">MUST</span> advertise the
       same label for all those routes for the same Ethernet Tag ID and the same
       EVI. Otherwise, duplicated copies will be sent by the ingress PE
    and received by egress PEs in other regions. For the same reason,
    when an ingress PE builds its flooding list, if multiple routes
    have the same (nexthop, label) tuple, they <span class="bcp14">MUST</span> only be
    added as a single branch in the flooding list.<a class="pilcrow" href="#section-5.2-3">¶</a></p>
</section>
</div>
<div id="compatibility">
<section id="section-5.3">
        <h3 id="name-backward-compatibility">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-backward-compatibility">Backward Compatibility</a>
        </h3>
<p id="section-5.3-1">The above procedures assume that all PEs are upgraded to support
       the segmentation procedures:<a class="pilcrow" href="#section-5.3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-2.1">An ingress PE uses the Next Hop and not the Originating
             Router's IP Address to determine leaves for the I-PMSI tunnel.<a class="pilcrow" href="#section-5.3-2.1">¶</a>
</li>
          <li class="normal" id="section-5.3-2.2">An egress PE sends Leaf A-D routes in response to I-PMSI routes,
             if the PTA has the L flag set by the re-advertising ASBR.<a class="pilcrow" href="#section-5.3-2.2">¶</a>
</li>
          <li class="normal" id="section-5.3-2.3">In the case of ingress replication, when an ingress PE builds
   its flooding list, multiple I-PMSI routes may have the same (nexthop, label)
   tuple, and only a single branch for those routes will be added in the flooding
   list.<a class="pilcrow" href="#section-5.3-2.3">¶</a>
</li>
        </ul>
<p id="section-5.3-3">If a deployment has legacy PEs that do not support the above,
       then a legacy ingress PE would include all PEs (including those
       in remote ASes) as leaves of the inclusive tunnel and try to send
       traffic to them directly (no segmentation), which is either undesirable
       or impossible; a legacy egress PE would not send Leaf A-D routes
       so the ASBRs would not know to send external traffic to them.<a class="pilcrow" href="#section-5.3-3">¶</a></p>
<p id="section-5.3-4">If this backward-compatibility problem needs to be addressed, the
 following procedure <span class="bcp14">MUST</span> be used (see <a class="auto internal xref" href="#aggregation">Section 6.2</a>
 for per-PE/AS/region I-PMSI A-D routes):<a class="pilcrow" href="#section-5.3-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-5.1">An upgraded PE indicates in its per-PE I-PMSI A-D
             route that it supports the new procedures. This is done
             by setting a flag bit in the EVPN Multicast Flags Extended
             Community.<a class="pilcrow" href="#section-5.3-5.1">¶</a>
</li>
          <li class="normal" id="section-5.3-5.2">All per-PE I-PMSI A-D routes are restricted to the local AS
             and not propagated to external peers.<a class="pilcrow" href="#section-5.3-5.2">¶</a>
</li>
          <li class="normal" id="section-5.3-5.3">The ASBRs in an AS originate per-region I-PMSI A-D routes
             and advertise them to their external peers to specify tunnels
             used to carry traffic from the local AS to other ASes.
             Depending on the types of tunnels being used, the L flag
             in the PTA may be set, in which case the downstream ASBRs
             and upgraded PEs will send Leaf A-D routes to pull traffic
             from their upstream ASBRs. In a particular downstream AS,
             one of the ASBRs is elected, based on the per-region
             I-PMSI A-D routes for a particular source AS,
             to send traffic from that source AS to legacy PEs in the
             downstream AS.
             The traffic arrives at the elected ASBR on the tunnel
             announced in the best per-region I-PMSI A-D route for the source
             AS, as selected by the ASBR from all the routes that it received
             over EBGP or IBGP sessions. The election procedure is described in
             <a class="auto internal xref" href="#election">Section 5.3.1</a>.<a class="pilcrow" href="#section-5.3-5.3">¶</a>
</li>
          <li class="normal" id="section-5.3-5.4">In an ingress/upstream AS, if and only if an ASBR has active downstream
             receivers (PEs and ASBRs), which are learned either explicitly
             via Leaf A-D routes or implicitly via PIM Join or mLDP label
             mapping, the ASBR originates a per-PE I-PMSI A-D route (i.e., a
             regular IMET route) into the local
             AS and stitches incoming per-PE I-PMSI tunnels into its
             per-region I-PMSI tunnel. Via this process, it gets traffic from
             local PEs and sends the traffic to other ASes via the tunnel announced in
             its per-region I-PMSI A-D route.<a class="pilcrow" href="#section-5.3-5.4">¶</a>
</li>
        </ul>
<p id="section-5.3-6">Note that even if there are no backward-compatibility issues, the use of
       per-region I-PMSI A-D routes provides the benefit of keeping all per-PE I-PMSI A-D routes
       in their local ASes, greatly reducing the flooding of the routes and
       their corresponding Leaf A-D routes (when needed) and reducing the number of
       inter-AS tunnels.<a class="pilcrow" href="#section-5.3-6">¶</a></p>
<div id="election">
<section id="section-5.3.1">
          <h4 id="name-designated-asbr-election">
<a class="section-number selfRef" href="#section-5.3.1">5.3.1. </a><a class="section-name selfRef" href="#name-designated-asbr-election">Designated ASBR Election</a>
          </h4>
<p id="section-5.3.1-1">When an ASBR re-advertises a per-region I-PMSI A-D route into an AS
       in which a designated ASBR needs to be used to forward traffic
       to the legacy PEs in the AS, it <span class="bcp14">MUST</span> include a Designated Forwarder (DF) Election EC.
       The EC and its use are specified in <span>[<a class="cite xref" href="#RFC8584">RFC8584</a>]</span>.
       The AC-DF bit in the DF Election EC <span class="bcp14">MUST</span> be cleared.
       If it is known that no legacy PEs exist in the AS, the ASBR <span class="bcp14">MUST NOT</span>
       include the EC and <span class="bcp14">MUST</span> remove the DF Election EC if one is carried in
       the per-region I-PMSI A-D routes that it receives. Note that this is done
       for each set of per-region I-PMSI A-D routes with the same NLRI.<a class="pilcrow" href="#section-5.3.1-1">¶</a></p>
<p id="section-5.3.1-2">Based on the procedures specified in 
       <span>[<a class="cite xref" href="#RFC8584">RFC8584</a>]</span>, an election
       algorithm is determined according to the DF Election ECs carried in
       the set of per-region I-PMSI routes of the same NLRI re-advertised into the AS.
       The algorithm is then applied to a candidate list, which is the set of
       ASBRs that re-advertised the per-region I-PMSI routes of the same NLRI
       carrying the DF Election EC.<a class="pilcrow" href="#section-5.3.1-2">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="inter-region">
<section id="section-6">
      <h2 id="name-inter-region-segmentation">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-inter-region-segmentation">Inter-Region Segmentation</a>
      </h2>
<div id="region">
<section id="section-6.1">
        <h3 id="name-area-as-vs-region">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-area-as-vs-region">Area/AS vs. Region</a>
        </h3>
<p id="section-6.1-1"><span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span> addresses MVPN/VPLS inter-area segmentation and does not explicitly cover
       EVPNs. However, if "area" is replaced by "region" and "ABR" is replaced
       by "RBR" (Regional Border Router), then everything still works and
       can be applied to EVPNs as well.<a class="pilcrow" href="#section-6.1-1">¶</a></p>
<p id="section-6.1-2">A region can be a sub-area, or it can be an entire AS, including its
       external links. Instead of automatically defining a region based on
       IGP areas, a region would be defined as a BGP peer group. In fact,
       even with a region definition based on an IGP area, a BGP peer group
       listing the PEs and ABRs in an area is still needed.<a class="pilcrow" href="#section-6.1-2">¶</a></p>
<p id="section-6.1-3">Consider the following example diagram for inter-AS segmentation:<a class="pilcrow" href="#section-6.1-3">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1-4">
<pre>          ---------           ------             ---------
         /         \         /      \           /         \
        /           \       /        \         /           \
       | PE1 o    ASBR1 -- ASBR2    ASBR3 -- ASBR4    o PE2 |
        \           /       \        /         \           /
         \         /         \      /           \         /
          ---------           ------             ---------
          AS 100              AS 200              AS 300
       |-----------|--------|---------|--------|------------|
          segment1  segment2 segment3  segment4  segment5
</pre><a class="pilcrow" href="#section-6.1-4">¶</a>
</div>
<p id="section-6.1-5">
       The inter-AS segmentation procedures specified so far (<span>[<a class="cite xref" href="#RFC6513">RFC6513</a>]</span>, <span>[<a class="cite xref" href="#RFC6514">RFC6514</a>]</span>,
       <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span>, and <a class="auto internal xref" href="#inter-as">Section 5</a> of this document) require all
       ASBRs to be involved, and ingress replication is used between two ASBRs
       in different ASes.<a class="pilcrow" href="#section-6.1-5">¶</a></p>
<p id="section-6.1-6">
       In the above diagram, it's possible that ASBR1/4 does not support
       segmentation, and the provider tunnels in AS 100/300 can actually
       extend across the external link. In this case, the inter-region
       segmentation procedures can be used instead -- a region is the
       entire AS100 plus the ASBR1-ASBR2 link or the entire AS300 plus the
       ASBR3-ASBR4 link.
       ASBR2/3 would be the RBRs, and ASBR1/4 will just be a transit core
       router with respect to provider tunnels.<a class="pilcrow" href="#section-6.1-6">¶</a></p>
<p id="section-6.1-7">As illustrated in the diagram below, ASBR2/3 will establish a multihop
       EBGP session, either with a Route Reflector (RR) or directly with PEs in the neighboring
       AS. I/S-PMSI A-D routes from ingress PEs will not be processed by
       ASBR1/4. When ASBR2 re-advertises the routes into AS 200, it changes
       the next hop to its own address and changes its PTA to specify the tunnel
       type/identification in its own AS. When ASBR3 re-advertises
       I/S-PMSI A-D routes into the neighboring AS 300, it changes the
       next hop to its own address and changes its PTA to specify the tunnel
       type/identification in the neighboring region. Now, the segment is
       rooted at ASBR3 and extends across the external link to PEs.<a class="pilcrow" href="#section-6.1-7">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.1-8">
<pre>          ---------           ------             ---------
         /   RR....\.mh-ebpg /      \    mh-ebgp/....RR   \
        /    :      \    `. /        \ .'      /      :    \
       | PE1 o    ASBR1 -- ASBR2    ASBR3 -- ASBR4    o PE2 |
        \           /       \        /         \           /
         \         /         \      /           \         /
          ---------           ------             ---------
          AS 100              AS 200              AS 300
       |-------------------|----------|---------------------|
          segment 1          segment 2         segment 3
</pre><a class="pilcrow" href="#section-6.1-8">¶</a>
</div>
</section>
</div>
<div id="aggregation">
<section id="section-6.2">
        <h3 id="name-per-region-aggregation">
<a class="section-number selfRef" href="#section-6.2">6.2. </a><a class="section-name selfRef" href="#name-per-region-aggregation">Per-Region Aggregation</a>
        </h3>
<p id="section-6.2-1">Notice that every I/S-PMSI route from each PE will be propagated
       throughout all the ASes or regions. They may also trigger corresponding
       Leaf A-D routes, depending on the types of tunnels used in each region.
       This may result in too many routes and corresponding tunnels. To address
       this concern, the I-PMSI routes from all PEs in an AS/region can be
       aggregated into a single I-PMSI route originated from the RBRs,
       and traffic from all those individual I-PMSI tunnels
       will be switched into the single I-PMSI tunnel. This is like the
       MVPN Inter-AS I-PMSI route originated by ASBRs.<a class="pilcrow" href="#section-6.2-1">¶</a></p>
<p id="section-6.2-2">The MVPN Inter-AS I-PMSI A-D route can be better called a "per-AS I-PMSI
       A-D route", to be compared against the (per-PE) Intra-AS I-PMSI A-D routes
       originated by each PE. In this document, we will call it a "per-region
       I-PMSI A-D route" in cases where we want to apply aggregation at the regional
       level. The per-PE I-PMSI routes will not be propagated to other
       regions. If multiple RBRs are connected to a region, then each
       will advertise such a route, with the same Region ID and Ethernet Tag ID (<a class="auto internal xref" href="#per-region">Section 3.1</a>). Similar to the per-PE I-PMSI A-D
       routes, RBRs/PEs in a downstream region will each select the best route
       from all those re-advertised by the upstream RBRs and hence will only
       receive traffic injected by one of them.<a class="pilcrow" href="#section-6.2-2">¶</a></p>
<p id="section-6.2-3">MVPNs do not aggregate S-PMSI routes from all PEs in an AS like they
       do for I-PMSI routes, because the number of PEs that will advertise
       S-PMSI routes for the same (S,G) or (*,G) is small. This is also the
       case for EVPNs, i.e., there are no per-region S-PMSI routes.<a class="pilcrow" href="#section-6.2-3">¶</a></p>
<p id="section-6.2-4">Notice that per-region I-PMSI routes can also be used to address
       backward-compatibility issues, as discussed in
       <a class="auto internal xref" href="#compatibility">Section 5.3</a>.<a class="pilcrow" href="#section-6.2-4">¶</a></p>
<p id="section-6.2-5">The Region ID in the per-region I-PMSI route's NLRI is encoded like an
       EC. For example, the
       Region ID can encode an AS number or area ID in the following EC format:<a class="pilcrow" href="#section-6.2-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.2-6.1">For a two-octet AS number, a Transitive Two-Octet AS-specific
             EC of sub-type 0x09 (Source AS), with the Global Administrator
             sub-field set to the AS number and the Local Administrator
             sub-field set to 0.<a class="pilcrow" href="#section-6.2-6.1">¶</a>
</li>
          <li class="normal" id="section-6.2-6.2">For a four-octet AS number, a Transitive Four-Octet AS-specific
             EC of sub-type 0x09 (Source AS), with the Global Administrator
             sub-field set to the AS number and the Local Administrator
             sub-field set to 0.<a class="pilcrow" href="#section-6.2-6.2">¶</a>
</li>
          <li class="normal" id="section-6.2-6.3">For an area ID, a Transitive IPv4-Address-specific EC of any
             sub-type, with the Global Administrator
             sub-field set to the area ID and the Local Administrator
             sub-field set to 0.<a class="pilcrow" href="#section-6.2-6.3">¶</a>
</li>
        </ul>
<p id="section-6.2-7">
       The use of other EC encodings <span class="bcp14">MAY</span> be allowed as long as they uniquely
       identify the region and the RBRs for the same region use the
       same Region ID.<a class="pilcrow" href="#section-6.2-7">¶</a></p>
</section>
</div>
<section id="section-6.3">
        <h3 id="name-use-of-s-nh-ec">
<a class="section-number selfRef" href="#section-6.3">6.3. </a><a class="section-name selfRef" href="#name-use-of-s-nh-ec">Use of S-NH-EC</a>
        </h3>
<p id="section-6.3-1"><span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span> specifies the use of the S-NH-EC because it does not allow ABRs
       to change the BGP next hop when they re-advertise I/S-PMSI A-D routes
       to downstream areas. That behavior is only to be consistent with the MVPN
       Inter-AS I-PMSI A-D routes, whose next hop must not be changed
       when they're re-advertised by the segmenting ABRs for reasons specific
       to MVPNs. For EVPNs,
       it is perfectly fine to change the next hop when RBRs re-advertise
       the I/S-PMSI A-D routes, instead of relying on the S-NH-EC. As a result,
       this document specifies that RBRs change the BGP next hop when they
       re-advertise I/S-PMSI A-D routes and do not use the S-NH-EC. This provides
       the advantage that neither ingress PEs nor egress PEs need to
       understand/use the S-NH-EC, and a consistent procedure (based on BGP next
       hops) is used for both inter-AS and inter-region segmentation.<a class="pilcrow" href="#section-6.3-1">¶</a></p>
<p id="section-6.3-2">
 If a downstream PE/RBR needs to originate Leaf A-D routes, it constructs
       an IP-based Route Target Extended Community by
      placing the IP address carried in the Next Hop of the received
      I/S-PMSI A-D route in the Global Administrator field of the extended
      community, with the Local Administrator field of this extended community
      set to 0, and also setting the Extended Communities attribute of the
      Leaf A-D route to that extended community.<a class="pilcrow" href="#section-6.3-2">¶</a></p>
<p id="section-6.3-3">Similar to <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span>, the upstream RBR <span class="bcp14">MUST</span> (auto-)configure
 an RT with the Global Administrator field set to the Next Hop in
 the re-advertised I/S-PMSI A-D route and with the Local Administrator
 field set to 0. Using this technique, the mechanisms specified in <span>[<a class="cite xref" href="#RFC4684">RFC4684</a>]</span>
 for constrained BGP route
   distribution can be used along with this specification to ensure that
   only the needed PE/ABR will have to process a particular Leaf A-D route.<a class="pilcrow" href="#section-6.3-3">¶</a></p>
</section>
<section id="section-6.4">
        <h3 id="name-ingress-pes-i-pmsi-leaf-tra">
<a class="section-number selfRef" href="#section-6.4">6.4. </a><a class="section-name selfRef" href="#name-ingress-pes-i-pmsi-leaf-tra">Ingress PE's I-PMSI Leaf Tracking</a>
        </h3>
<p id="section-6.4-1"><span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span> specifies that when an ingress PE/ASBR (re-)advertises a
       VPLS I-PMSI A-D route, it sets the L flag to 1 in the route's PTA.
       Similar to the inter-AS case, this is actually not really needed
       for EVPNs. To be consistent with the inter-AS case, the ingress PE
       does not set the L flag in its originated I-PMSI A-D routes,
       and it determines the leaves based on the BGP next hops in its received
       I-PMSI A-D routes, as specified in <a class="auto internal xref" href="#leaf-tracking">Section 5.2</a>.<a class="pilcrow" href="#section-6.4-1">¶</a></p>
<p id="section-6.4-2">The same backward-compatibility issue exists, and the same solution
       as that for the inter-AS case applies, as specified in <a class="auto internal xref" href="#compatibility">Section 5.3</a>.<a class="pilcrow" href="#section-6.4-2">¶</a></p>
</section>
</section>
</div>
<section id="section-7">
      <h2 id="name-multihoming-support">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-multihoming-support">Multihoming Support</a>
      </h2>
<p id="section-7-1">To support multihoming with segmentation, Ethernet Segment Identifier (ESI) labels <span class="bcp14">SHOULD</span> be
 allocated from a "Domain-wide Common Block" (DCB)
 <span>[<a class="cite xref" href="#RFC9573">RFC9573</a>]</span> for all
 tunnel types, including Ingress Replication tunnels <span>[<a class="cite xref" href="#RFC7988">RFC7988</a>]</span>.
 Via means outside the scope of this document, PEs know that ESI labels
 are from a DCB, and existing multihoming procedures will then work "as is"
 (whether a multihomed Ethernet Segment spans segmentation
 regions or not).<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">Not using DCB-allocated ESI labels is outside the scope of this
 document.<a class="pilcrow" href="#section-7-2">¶</a></p>
</section>
<div id="IANA">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-8-1">IANA has assigned the following new EVPN route types in
   the "EVPN Route Types" registry:<a class="pilcrow" href="#section-8-1">¶</a></p>
<span id="name-new-route-types-2"></span><div id="tab-1">
<table class="center" id="table-3">
        <caption>
<a class="selfRef" href="#table-3">Table 3</a>:
<a class="selfRef" href="#name-new-route-types-2">New Route Types</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Value</th>
            <th class="text-left" colspan="1" rowspan="1">Description</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">9</td>
            <td class="text-left" colspan="1" rowspan="1">Per-Region I-PMSI A-D route</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9572</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">10</td>
            <td class="text-left" colspan="1" rowspan="1">S-PMSI A-D route</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9572</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">11</td>
            <td class="text-left" colspan="1" rowspan="1">Leaf A-D route</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9572</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-8-3">IANA has assigned one flag bit from the
         "Multicast Flags Extended Community" registry created by
         <span>[<a class="cite xref" href="#RFC9251">RFC9251</a>]</span>:<a class="pilcrow" href="#section-8-3">¶</a></p>
<span id="name-new-multicast-flag"></span><div id="tab-2">
<table class="center" id="table-4">
        <caption>
<a class="selfRef" href="#table-4">Table 4</a>:
<a class="selfRef" href="#name-new-multicast-flag">New Multicast Flag</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Bit</th>
            <th class="text-left" colspan="1" rowspan="1">Name</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
            <th class="text-left" colspan="1" rowspan="1">Change Controller</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">8</td>
            <td class="text-left" colspan="1" rowspan="1">Segmentation Support</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9572</td>
            <td class="text-left" colspan="1" rowspan="1">IETF</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="Security">
<section id="section-9">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-9-1">
   The procedures specified in this document for selective forwarding via S-PMSI/Leaf A-D routes
   are based on the same procedures as those used for MVPNs <span>[<a class="cite xref" href="#RFC6513">RFC6513</a>]</span> <span>[<a class="cite xref" href="#RFC6514">RFC6514</a>]</span>
   and VPLS multicast <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span>. The procedures for tunnel segmentation as specified
   in this document are based on similar procedures used for MVPN inter-AS tunnel segmentation <span>[<a class="cite xref" href="#RFC6514">RFC6514</a>]</span> and inter-area tunnel segmentation <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span>, as well as procedures
   for VPLS multicast inter-AS tunnel segmentation <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span>.
    When applied to EVPNs, they do not introduce new security concerns
    beyond those discussed in <span>[<a class="cite xref" href="#RFC6513">RFC6513</a>]</span>, <span>[<a class="cite xref" href="#RFC6514">RFC6514</a>]</span>, <span>[<a class="cite xref" href="#RFC7117">RFC7117</a>]</span>,
    and <span>[<a class="cite xref" href="#RFC7524">RFC7524</a>]</span>. They also do not introduce new security concerns
    compared to <span>[<a class="cite xref" href="#RFC7432">RFC7432</a>]</span>.<a class="pilcrow" href="#section-9-1">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-10.1">10.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6513">[RFC6513]</dt>
        <dd>
<span class="refAuthor">Rosen, E., Ed.</span> and <span class="refAuthor">R. Aggarwal, Ed.</span>, <span class="refTitle">"Multicast in MPLS/BGP IP VPNs"</span>, <span class="seriesInfo">RFC 6513</span>, <span class="seriesInfo">DOI 10.17487/RFC6513</span>, <time class="refDate" datetime="2012-02">February 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6513">https://www.rfc-editor.org/info/rfc6513</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6514">[RFC6514]</dt>
        <dd>
<span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Morin, T.</span>, and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"BGP Encodings and Procedures for Multicast in MPLS/BGP IP VPNs"</span>, <span class="seriesInfo">RFC 6514</span>, <span class="seriesInfo">DOI 10.17487/RFC6514</span>, <time class="refDate" datetime="2012-02">February 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6514">https://www.rfc-editor.org/info/rfc6514</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7117">[RFC7117]</dt>
        <dd>
<span class="refAuthor">Aggarwal, R., Ed.</span>, <span class="refAuthor">Kamite, Y.</span>, <span class="refAuthor">Fang, L.</span>, <span class="refAuthor">Rekhter, Y.</span>, and <span class="refAuthor">C. Kodeboniya</span>, <span class="refTitle">"Multicast in Virtual Private LAN Service (VPLS)"</span>, <span class="seriesInfo">RFC 7117</span>, <span class="seriesInfo">DOI 10.17487/RFC7117</span>, <time class="refDate" datetime="2014-02">February 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7117">https://www.rfc-editor.org/info/rfc7117</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7432">[RFC7432]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="seriesInfo">RFC 7432</span>, <span class="seriesInfo">DOI 10.17487/RFC7432</span>, <time class="refDate" datetime="2015-02">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7432">https://www.rfc-editor.org/info/rfc7432</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7524">[RFC7524]</dt>
        <dd>
<span class="refAuthor">Rekhter, Y.</span>, <span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Morin, T.</span>, <span class="refAuthor">Grosclaude, I.</span>, <span class="refAuthor">Leymann, N.</span>, and <span class="refAuthor">S. Saad</span>, <span class="refTitle">"Inter-Area Point-to-Multipoint (P2MP) Segmented Label Switched Paths (LSPs)"</span>, <span class="seriesInfo">RFC 7524</span>, <span class="seriesInfo">DOI 10.17487/RFC7524</span>, <time class="refDate" datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7524">https://www.rfc-editor.org/info/rfc7524</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8534">[RFC8534]</dt>
        <dd>
<span class="refAuthor">Dolganow, A.</span>, <span class="refAuthor">Kotalwar, J.</span>, <span class="refAuthor">Rosen, E., Ed.</span>, and <span class="refAuthor">Z. Zhang</span>, <span class="refTitle">"Explicit Tracking with Wildcard Routes in Multicast VPN"</span>, <span class="seriesInfo">RFC 8534</span>, <span class="seriesInfo">DOI 10.17487/RFC8534</span>, <time class="refDate" datetime="2019-02">February 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8534">https://www.rfc-editor.org/info/rfc8534</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8584">[RFC8584]</dt>
        <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Mohanty, S., Ed.</span>, <span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Nagaraj, K.</span>, and <span class="refAuthor">S. Sathappan</span>, <span class="refTitle">"Framework for Ethernet VPN Designated Forwarder Election Extensibility"</span>, <span class="seriesInfo">RFC 8584</span>, <span class="seriesInfo">DOI 10.17487/RFC8584</span>, <time class="refDate" datetime="2019-04">April 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8584">https://www.rfc-editor.org/info/rfc8584</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9251">[RFC9251]</dt>
        <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Thoria, S.</span>, <span class="refAuthor">Mishra, M.</span>, <span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Lin</span>, <span class="refTitle">"Internet Group Management Protocol (IGMP) and Multicast Listener Discovery (MLD) Proxies for Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9251</span>, <span class="seriesInfo">DOI 10.17487/RFC9251</span>, <time class="refDate" datetime="2022-06">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9251">https://www.rfc-editor.org/info/rfc9251</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9573">[RFC9573]</dt>
      <dd>
<span class="refAuthor">Zhang, Z.</span>, <span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Lin, W.</span>, <span class="refAuthor">Li, Z.</span>, and <span class="refAuthor">IJ. Wijnands</span>, <span class="refTitle">"MVPN/EVPN Tunnel Aggregation with Common Labels"</span>, <span class="seriesInfo">RFC 9573</span>, <span class="seriesInfo">DOI 10.17487/RFC9573</span>, <time class="refDate" datetime="2024-05">May 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9573">https://www.rfc-editor.org/info/rfc9573</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-10.2">10.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC4684">[RFC4684]</dt>
        <dd>
<span class="refAuthor">Marques, P.</span>, <span class="refAuthor">Bonica, R.</span>, <span class="refAuthor">Fang, L.</span>, <span class="refAuthor">Martini, L.</span>, <span class="refAuthor">Raszuk, R.</span>, <span class="refAuthor">Patel, K.</span>, and <span class="refAuthor">J. Guichard</span>, <span class="refTitle">"Constrained Route Distribution for Border Gateway Protocol/MultiProtocol Label Switching (BGP/MPLS) Internet Protocol (IP) Virtual Private Networks (VPNs)"</span>, <span class="seriesInfo">RFC 4684</span>, <span class="seriesInfo">DOI 10.17487/RFC4684</span>, <time class="refDate" datetime="2006-11">November 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4684">https://www.rfc-editor.org/info/rfc4684</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4875">[RFC4875]</dt>
        <dd>
<span class="refAuthor">Aggarwal, R., Ed.</span>, <span class="refAuthor">Papadimitriou, D., Ed.</span>, and <span class="refAuthor">S. Yasukawa, Ed.</span>, <span class="refTitle">"Extensions to Resource Reservation Protocol - Traffic Engineering (RSVP-TE) for Point-to-Multipoint TE Label Switched Paths (LSPs)"</span>, <span class="seriesInfo">RFC 4875</span>, <span class="seriesInfo">DOI 10.17487/RFC4875</span>, <time class="refDate" datetime="2007-05">May 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4875">https://www.rfc-editor.org/info/rfc4875</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6388">[RFC6388]</dt>
        <dd>
<span class="refAuthor">Wijnands, IJ., Ed.</span>, <span class="refAuthor">Minei, I., Ed.</span>, <span class="refAuthor">Kompella, K.</span>, and <span class="refAuthor">B. Thomas</span>, <span class="refTitle">"Label Distribution Protocol Extensions for Point-to-Multipoint and Multipoint-to-Multipoint Label Switched Paths"</span>, <span class="seriesInfo">RFC 6388</span>, <span class="seriesInfo">DOI 10.17487/RFC6388</span>, <time class="refDate" datetime="2011-11">November 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6388">https://www.rfc-editor.org/info/rfc6388</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7988">[RFC7988]</dt>
        <dd>
<span class="refAuthor">Rosen, E., Ed.</span>, <span class="refAuthor">Subramanian, K.</span>, and <span class="refAuthor">Z. Zhang</span>, <span class="refTitle">"Ingress Replication Tunnels in Multicast VPN"</span>, <span class="seriesInfo">RFC 7988</span>, <span class="seriesInfo">DOI 10.17487/RFC7988</span>, <time class="refDate" datetime="2016-10">October 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7988">https://www.rfc-editor.org/info/rfc7988</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8279">[RFC8279]</dt>
        <dd>
<span class="refAuthor">Wijnands, IJ., Ed.</span>, <span class="refAuthor">Rosen, E., Ed.</span>, <span class="refAuthor">Dolganow, A.</span>, <span class="refAuthor">Przygienda, T.</span>, and <span class="refAuthor">S. Aldrin</span>, <span class="refTitle">"Multicast Using Bit Index Explicit Replication (BIER)"</span>, <span class="seriesInfo">RFC 8279</span>, <span class="seriesInfo">DOI 10.17487/RFC8279</span>, <time class="refDate" datetime="2017-11">November 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8279">https://www.rfc-editor.org/info/rfc8279</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9136">[RFC9136]</dt>
      <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Henderickx, W.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Lin, W.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"IP Prefix Advertisement in Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9136</span>, <span class="seriesInfo">DOI 10.17487/RFC9136</span>, <time class="refDate" datetime="2021-10">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9136">https://www.rfc-editor.org/info/rfc9136</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">The authors thank <span class="contact-name">Eric Rosen</span>, <span class="contact-name">John Drake</span>, and <span class="contact-name">Ron Bonica</span> for their
         comments and suggestions.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
</section>
</div>
<section id="appendix-B">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<p id="appendix-B-1">The following people also contributed to this document through their earlier
       work in EVPN selective multicast.<a class="pilcrow" href="#appendix-B-1">¶</a></p>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Junlin Zhang</span></div>
<div class="left" dir="auto"><span class="org">Huawei Technologies</span></div>
<div class="left" dir="auto"><span class="street-address">Huawei Bld., No. 156 Beiqing Rd.</span></div>
<div class="left" dir="auto"><span class="locality">Beijing</span></div>
<div class="left" dir="auto"><span class="postal-code">100095</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:jackey.zhang@huawei.com">jackey.zhang@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Zhenbin Li</span></div>
<div class="left" dir="auto"><span class="org">Huawei Technologies</span></div>
<div class="left" dir="auto"><span class="street-address">Huawei Bld., No. 156 Beiqing Rd.</span></div>
<div class="left" dir="auto"><span class="locality">Beijing</span></div>
<div class="left" dir="auto"><span class="postal-code">100095</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:lizhenbin@huawei.com">lizhenbin@huawei.com</a>
</div>
</address>
</section>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Zhaohui Zhang</span></div>
<div class="left" dir="auto"><span class="org">Juniper Networks</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:zzhang@juniper.net">zzhang@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Wen Lin</span></div>
<div class="left" dir="auto"><span class="org">Juniper Networks</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:wlin@juniper.net">wlin@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Jorge Rabadan</span></div>
<div class="left" dir="auto"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:jorge.rabadan@nokia.com">jorge.rabadan@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Keyur Patel</span></div>
<div class="left" dir="auto"><span class="org">Arrcus</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:keyur@arrcus.com">keyur@arrcus.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Ali Sajassi</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:sajassi@cisco.com">sajassi@cisco.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>