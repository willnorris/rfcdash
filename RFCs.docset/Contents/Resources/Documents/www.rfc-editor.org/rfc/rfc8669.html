<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 8669: Segment Routing Prefix Segment Identifier Extensions for BGP</title>
<meta content="Stefano Previdi" name="author"/>
<meta content="Clarence Filsfils" name="author"/>
<meta content="Acee Lindem" name="author"/>
<meta content="Arjun Sreekantiah" name="author"/>
<meta content="Hannes Gredler" name="author"/>
<meta content='
       Segment Routing (SR) leverages the source-routing paradigm. A node
      steers a packet through an ordered list of instructions called
      "segments". A segment can represent any instruction, topological or
      service based. The ingress node prepends an SR header to a packet
      containing a set of segment identifiers (SIDs). Each SID represents a
      topological or service-based instruction. Per-flow state is maintained
      only on the ingress node of the SR domain. An "SR domain" is defined as a
      single administrative domain for global SID assignment. 
       This document defines an optional, transitive BGP attribute for
      announcing information about BGP Prefix Segment Identifiers (BGP Prefix-SIDs)
      and the specification for SR-MPLS SIDs. 
    ' name="description"/>
<meta content="xml2rfc 2.35.0" name="generator"/>
<meta content="SR" name="keyword"/>
<meta content="MPLS" name="keyword"/>
<meta content="BGP" name="keyword"/>
<meta content="Prefix-SID" name="keyword"/>
<meta content="Label-Index" name="keyword"/>
<meta content="SRGB" name="keyword"/>
<meta content="8669" name="rfc.number"/>
<link href="rfc8669.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .sourcecode {
    margin-bottom: 1em;
  }
}</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc8669" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-idr-bgp-prefix-sid-27" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 8669</td>
<td class="center">SR Prefix-SID Extensions for BGP</td>
<td class="right">December 2019</td>
</tr></thead>
<tfoot><tr>
<td class="left">Previdi, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc8669">8669</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2019-12">December 2019</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">S. Previdi</div>
<div class="org">Huawei Technologies</div>
</div>
<div class="author">
      <div class="author-name">C. Filsfils</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">A. Lindem, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">A. Sreekantiah</div>
</div>
<div class="author">
      <div class="author-name">H. Gredler</div>
<div class="org">RtBrick Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 8669</h1>
<h1 id="title">Segment Routing Prefix Segment Identifier Extensions for BGP</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">Segment Routing (SR) leverages the source-routing paradigm. A node
      steers a packet through an ordered list of instructions called
      "segments". A segment can represent any instruction, topological or
      service based. The ingress node prepends an SR header to a packet
      containing a set of segment identifiers (SIDs). Each SID represents a
      topological or service-based instruction. Per-flow state is maintained
      only on the ingress node of the SR domain. An "SR domain" is defined as a
      single administrative domain for global SID assignment.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
<p id="section-abstract-2">This document defines an optional, transitive BGP attribute for
      announcing information about BGP Prefix Segment Identifiers (BGP Prefix-SIDs)
      and the specification for SR-MPLS SIDs.<a class="pilcrow" href="#section-abstract-2">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc8669">https://www.rfc-editor.org/info/rfc8669</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2019 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a><a class="pilcrow" href="#section-toc.1-1.1.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-mpls-bgp-prefix-sid">MPLS BGP Prefix-SID</a><a class="pilcrow" href="#section-toc.1-1.2.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-bgp-prefix-sid-attribute">BGP Prefix-SID Attribute</a><a class="pilcrow" href="#section-toc.1-1.3.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="xref" href="#section-3.1">3.1</a>.  <a class="xref" href="#name-label-index-tlv">Label-Index TLV</a><a class="pilcrow" href="#section-toc.1-1.3.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="xref" href="#section-3.2">3.2</a>.  <a class="xref" href="#name-originator-srgb-tlv">Originator SRGB TLV</a><a class="pilcrow" href="#section-toc.1-1.3.2.2.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-receiving-bgp-prefix-sid-at">Receiving BGP Prefix-SID Attribute</a><a class="pilcrow" href="#section-toc.1-1.4.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a class="xref" href="#section-4.1">4.1</a>.  <a class="xref" href="#name-mpls-data-plane-labeled-uni">MPLS Data Plane: Labeled Unicast</a><a class="pilcrow" href="#section-toc.1-1.4.2.1.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-advertising-bgp-prefix-sid-">Advertising BGP Prefix-SID Attribute</a><a class="pilcrow" href="#section-toc.1-1.5.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.  <a class="xref" href="#name-mpls-data-plane-labeled-unic">MPLS Data Plane: Labeled Unicast</a><a class="pilcrow" href="#section-toc.1-1.5.2.1.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-error-handling-of-bgp-prefi">Error Handling of BGP Prefix-SID Attribute</a><a class="pilcrow" href="#section-toc.1-1.6.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-7">7</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a><a class="pilcrow" href="#section-toc.1-1.7.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#section-8">8</a>.  <a class="xref" href="#name-manageability-consideration">Manageability Considerations</a><a class="pilcrow" href="#section-toc.1-1.8.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#section-9">9</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a><a class="pilcrow" href="#section-toc.1-1.9.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#section-10">10</a>. <a class="xref" href="#name-references">References</a><a class="pilcrow" href="#section-toc.1-1.10.1">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a class="xref" href="#section-10.1">10.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a><a class="pilcrow" href="#section-toc.1-1.10.2.1.1">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a class="xref" href="#section-10.2">10.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a><a class="pilcrow" href="#section-toc.1-1.10.2.2.1">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#section-appendix.a"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a><a class="pilcrow" href="#section-toc.1-1.11.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a class="xref" href="#section-appendix.b"></a><a class="xref" href="#name-contributors">Contributors</a><a class="pilcrow" href="#section-toc.1-1.12.1">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a class="xref" href="#section-appendix.c"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a><a class="pilcrow" href="#section-toc.1-1.13.1">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">The Segment Routing (SR) architecture leverages the source-routing
      paradigm. A segment represents either a topological instruction, such as
      "go to prefix P following shortest path", or a service instruction.
      Other types of segments may be defined in the future.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">A segment is identified through a Segment Identifier (SID). 
      An "SR domain" is defined as a single administrative domain for
      global SID assignment. It may be comprised of a single Autonomous System (AS)
      or multiple ASes under consolidated global SID administration. Typically, the ingress
      node of the SR domain prepends an SR header containing SIDs to an incoming packet.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">As described in <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span>,
      when SR is applied to the MPLS data plane (<span>[<a class="xref" href="#RFC8660">RFC8660</a>]</span>), the SID consists of a
      label.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4"><span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span> also 
      describes how Segment Routing can be applied to an IPv6 data plane (SRv6) using
      an IPv6 routing header containing a stack of SR SIDs encoded as 
      IPv6 addresses <span>[<a class="xref" href="#I-D.ietf-6man-segment-routing-header">IPv6-SRH</a>]</span>.
      The applicability and support for Segment Routing over IPv6 is beyond the
      scope of this document.<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">A BGP Prefix Segment is a BGP prefix with a Prefix-SID attached.
      A BGP Prefix-SID is always a global SID (<span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span>) within the SR domain
      and identifies an instruction to forward
      the packet over the Equal-Cost Multipath (ECMP) best path 
      computed by BGP to the related
      prefix. The BGP Prefix-SID is the identifier of the BGP Prefix Segment.
      In this document, we always refer to the BGP Prefix Segment by the BGP
      Prefix-SID.<a class="pilcrow" href="#section-1-5">¶</a></p>
<p id="section-1-6">This document describes the BGP extensions to signal the BGP
      Prefix-SID. Specifically, this document defines a BGP attribute
      known as the "BGP Prefix-SID attribute" and specifies the rules to
      originate, receive, and handle error conditions for the attribute.<a class="pilcrow" href="#section-1-6">¶</a></p>
<p id="section-1-7">The BGP Prefix-SID attribute defined in this document can be attached
       to prefixes from Multiprotocol BGP IPv4/IPv6 Labeled 
       Unicast (<span>[<a class="xref" href="#RFC4760">RFC4760</a>]</span> <span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>).
       Usage of the BGP Prefix-SID attribute for other 
       Address Family Identifier (AFI) / Subsequent Address 
       Family Identifier (SAFI) combinations
       is not defined herein but may be specified in
       future specifications.<a class="pilcrow" href="#section-1-7">¶</a></p>
<p id="section-1-8"><span>[<a class="xref" href="#RFC8670">RFC8670</a>]</span> describes 
      example use cases where the BGP Prefix-SID is used for the above 
      AFI/SAFI combinations.<a class="pilcrow" href="#section-1-8">¶</a></p>
<p id="section-1-9">It should be noted that:<a class="pilcrow" href="#section-1-9">¶</a></p>
<ul>
<li id="section-1-10.1">A BGP Prefix-SID will be global across ASes when the
          interconnected ASes are part of the same SR domain.
          Alternatively, when interconnecting ASes, the ASBRs of each
          domain will have to handle the advertisement of unique SIDs. The
          mechanisms for such interconnection are outside the scope of the
          protocol extensions defined in this document.<a class="pilcrow" href="#section-1-10.1">¶</a>
</li>
        <li id="section-1-10.2">A BGP Prefix-SID <span class="bcp14">MAY</span> be attached to a BGP prefix.
          This implies that each prefix is advertised individually, reducing the
          ability to pack BGP advertisements (when sharing common
          attributes).<a class="pilcrow" href="#section-1-10.2">¶</a>
</li>
      </ul>
<p id="section-1-11">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1-11">¶</a></p>
</section>
</div>
<div id="MPLSPREFIXSID">
<section id="section-2">
      <h2 id="name-mpls-bgp-prefix-sid">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-mpls-bgp-prefix-sid">MPLS BGP Prefix-SID</a>
      </h2>
<p id="section-2-1">The BGP Prefix-SID is realized on the MPLS data plane (<span>[<a class="xref" href="#RFC8660">RFC8660</a>]</span>) in the following
      way:<a class="pilcrow" href="#section-2-1">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-2-2.1">The operator
            assigns a globally unique label index, L_I, to a locally originated
            prefix of a BGP speaker N, which is advertised to all other BGP
            speakers in the SR domain.<a class="pilcrow" href="#section-2-2.1">¶</a>
</li>
        <li class="ulEmpty" id="section-2-2.2">According to <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span>,
            each BGP speaker is configured with a label block called the
            Segment Routing Global Block (SRGB). While <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span> recommends using the
            same SRGB across all the nodes within the SR domain, the SRGB of a
            node is a local property and could be different on different
            speakers. The drawbacks of the use case where BGP speakers have
            different SRGBs are documented in <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span> and <span>[<a class="xref" href="#RFC8670">RFC8670</a>]</span>.<a class="pilcrow" href="#section-2-2.2">¶</a>
</li>
        <li class="ulEmpty" id="section-2-2.3">If traffic engineering within the SR domain is required, each
            node may also be required to advertise topological information and
            Peer SIDs for each of its links and peers. This information is
            required to perform the explicit path computation and to
            express an explicit path as a list of SIDs. The advertisement
            of topological information and peer segments (Peer SIDs) is done 
            through <span>[<a class="xref" href="#I-D.ietf-idr-bgpls-segment-routing-epe">BGPLS-SR-EPE</a>]</span>.<a class="pilcrow" href="#section-2-2.3">¶</a>
</li>
        <li class="ulEmpty" id="section-2-2.4">If a prefix segment is to be included in an MPLS label stack,
        e.g., for traffic-engineering purposes, knowledge of the prefix
        originator's SRGB is required in order to compute the local label used
        by the originator.<a class="pilcrow" href="#section-2-2.4">¶</a>
</li>
        <li class="ulEmpty" id="section-2-2.5">This document assumes that Border Gateway Protocol - Link State
     (BGP-LS) is the preferred method for a
            collecting both peer segments (Peer SIDs) and SRGB
            information through <span>[<a class="xref" href="#RFC7752">RFC7752</a>]</span>, <span>[<a class="xref" href="#I-D.ietf-idr-bgpls-segment-routing-epe">BGPLS-SR-EPE</a>]</span>, and <span>[<a class="xref" href="#I-D.ietf-idr-bgp-ls-segment-routing-ext">BGPLS-SR-EXT</a>]</span>. However, as an
            optional alternative for the advertisement of the local SRGB
            without the topology or the peer SIDs and, therefore, without
            applicability for TE, the Originator SRGB TLV of the BGP Prefix-SID
            attribute is specified in <a class="xref" href="#ORIGINSRGBTLV">Section 3.2</a> of this
            document.<a class="pilcrow" href="#section-2-2.5">¶</a>
</li>
        <li class="ulEmpty" id="section-2-2.6">A BGP speaker will derive its local MPLS label L from the 
               label index L_I and its local SRGB as 
               described in <span>[<a class="xref" href="#RFC8660">RFC8660</a>]</span>. The 
               BGP speaker then programs the MPLS label L in its MPLS data plane as
               its incoming/local label for the prefix.
               See <a class="xref" href="#RECMPLSLABEL">Section 4.1</a> for more details.<a class="pilcrow" href="#section-2-2.6">¶</a>
</li>
        <li class="ulEmpty" id="section-2-2.7">The outgoing label for the prefix is found in the 
            Network Layer Reachability Information (NLRI) of the
            Multiprotocol BGP IPv4/IPv6 Labeled Unicast prefix advertisement as
            defined in <span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>.
            The label index L_I is only used as a hint to derive the local/incoming
            label.<a class="pilcrow" href="#section-2-2.7">¶</a>
</li>
        <li class="ulEmpty" id="section-2-2.8">
          <a class="xref" href="#LABELINDEX">Section 3.1</a> of this document specifies the
            Label-Index TLV of the BGP Prefix-SID attribute; this TLV can be
            used to advertise the label index for a given prefix.<a class="pilcrow" href="#section-2-2.8">¶</a>
</li>
      </ul>
</section>
</div>
<div id="PREFIXSIDATTR">
<section id="section-3">
      <h2 id="name-bgp-prefix-sid-attribute">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-bgp-prefix-sid-attribute">BGP Prefix-SID Attribute</a>
      </h2>
<p id="section-3-1">The BGP Prefix-SID attribute is an optional, transitive BGP path
      attribute. The attribute type code 40 has been assigned by IANA (see
      <a class="xref" href="#IANA">Section 7</a>).<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2">The BGP Prefix-SID attribute is defined here to be a set of elements
      encoded as "Type/Length/Value" tuples (i.e., a set of TLVs). All BGP 
      Prefix-SID attribute TLVs will start with a 1-octet type and a 2-octet
      length. The following TLVs are defined in this 
      document:<a class="pilcrow" href="#section-3-2">¶</a></p>
<ul>
<li id="section-3-3.1">Label-Index TLV<a class="pilcrow" href="#section-3-3.1">¶</a>
</li>
        <li id="section-3-3.2">Originator SRGB TLV<a class="pilcrow" href="#section-3-3.2">¶</a>
</li>
      </ul>
<p id="section-3-4">The Label-Index and Originator SRGB TLVs are used only when SR is applied
      to the MPLS data plane.<a class="pilcrow" href="#section-3-4">¶</a></p>
<p id="section-3-5">For future extensibility, unknown TLVs <span class="bcp14">MUST</span> be ignored and propagated 
         unmodified.<a class="pilcrow" href="#section-3-5">¶</a></p>
<div id="LABELINDEX">
<section id="section-3.1">
        <h3 id="name-label-index-tlv">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-label-index-tlv">Label-Index TLV</a>
        </h3>
<p id="section-3.1-1">The Label-Index TLV <span class="bcp14">MUST</span> be present in the BGP Prefix-SID attribute
        attached to IPv4/IPv6 Labeled Unicast prefixes (<span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>). It <span class="bcp14">MUST</span> be ignored when received for other 
        BGP AFI/SAFI combinations. The Label-Index TLV has the 
        following format:<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.1-2">
<pre> 0                   1                   2                   3 
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       Type    |             Length            |   RESERVED    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            Flags              |       Label Index             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Label Index          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a class="pilcrow" href="#section-3.1-2">¶</a>
</div>
<p id="section-3.1-3">where:<a class="pilcrow" href="#section-3.1-3">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-3.1-4.1">
            <dl class="dlParallel" id="section-3.1-4.1.1">
              <dt id="section-3.1-4.1.1.1">Type:</dt>
              <dd id="section-3.1-4.1.1.2">1<a class="pilcrow" href="#section-3.1-4.1.1.2">¶</a>
</dd>
<dt id="section-3.1-4.1.1.3">Length:</dt>
              <dd id="section-3.1-4.1.1.4">7, the total length in octets of the value portion
               of the TLV.<a class="pilcrow" href="#section-3.1-4.1.1.4">¶</a>
</dd>
<dt id="section-3.1-4.1.1.5">RESERVED:</dt>
              <dd id="section-3.1-4.1.1.6">8-bit field. It <span class="bcp14">MUST</span> be clear on transmission and <span class="bcp14">MUST</span> be
            ignored on reception.<a class="pilcrow" href="#section-3.1-4.1.1.6">¶</a>
</dd>
<dt id="section-3.1-4.1.1.7">Flags:</dt>
              <dd id="section-3.1-4.1.1.8">16 bits of flags. None are defined by this document. The
            Flags field <span class="bcp14">MUST</span> be clear on transmission and <span class="bcp14">MUST</span> be ignored on
            reception.<a class="pilcrow" href="#section-3.1-4.1.1.8">¶</a>
</dd>
<dt id="section-3.1-4.1.1.9">Label Index:</dt>
              <dd id="section-3.1-4.1.1.10">32-bit value representing the index value in the
            SRGB space.<a class="pilcrow" href="#section-3.1-4.1.1.10">¶</a>
</dd>
</dl>
</li>
        </ul>
</section>
</div>
<div id="ORIGINSRGBTLV">
<section id="section-3.2">
        <h3 id="name-originator-srgb-tlv">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-originator-srgb-tlv">Originator SRGB TLV</a>
        </h3>
<p id="section-3.2-1">The Originator SRGB TLV is an optional TLV and has the following
        format:<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<div class="artwork art-text alignLeft" id="section-3.2-2">
<pre>  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |     Type      |          Length               |    Flags      |      
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  
 |     Flags     |     
 +-+-+-+-+-+-+-+-+
 
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |         SRGB 1 (6 octets)                                     |      
 |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |         SRGB n (6 octets)                                     |      
 |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre><a class="pilcrow" href="#section-3.2-2">¶</a>
</div>
<p id="section-3.2-3">where:<a class="pilcrow" href="#section-3.2-3">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-3.2-4.1">
            <dl class="dlParallel" id="section-3.2-4.1.1">
              <dt id="section-3.2-4.1.1.1">Type:</dt>
              <dd id="section-3.2-4.1.1.2">3<a class="pilcrow" href="#section-3.2-4.1.1.2">¶</a>
</dd>
<dt id="section-3.2-4.1.1.3">Length:</dt>
              <dd id="section-3.2-4.1.1.4">The total length in octets of the value portion of
            the TLV: 2 + (non-zero multiple of 6).<a class="pilcrow" href="#section-3.2-4.1.1.4">¶</a>
</dd>
<dt id="section-3.2-4.1.1.5">Flags:</dt>
              <dd id="section-3.2-4.1.1.6">16 bits of flags. None are defined in this document.
            The Flags field <span class="bcp14">MUST</span> be clear on transmission and <span class="bcp14">MUST</span> be ignored on
            reception.<a class="pilcrow" href="#section-3.2-4.1.1.6">¶</a>
</dd>
<dt id="section-3.2-4.1.1.7">SRGB:</dt>
              <dd id="section-3.2-4.1.1.8">3 octets specifying the first label in the range followed
            by 3 octets specifying the number of labels in the range. Note that
            the SRGB field <span class="bcp14">MAY</span> appear multiple times. If the SRGB field
            appears multiple times, the SRGB consists of multiple ranges
            that are concatenated.<a class="pilcrow" href="#section-3.2-4.1.1.8">¶</a>
</dd>
</dl>
</li>
        </ul>
<p id="section-3.2-5">The Originator SRGB TLV contains the SRGB of the node originating
        the prefix to which the BGP Prefix-SID is attached. The Originator
        SRGB TLV <span class="bcp14">MUST NOT</span> be changed during the propagation of the BGP
        update. It is used to build SR policies
        when different SRGBs are used in the fabric, for example, <span>[<a class="xref" href="#RFC8670">RFC8670</a>]</span>.<a class="pilcrow" href="#section-3.2-5">¶</a></p>
<p id="section-3.2-6">Examples of how the receiving routers concatenate the
          ranges and build their neighbor's Segment Routing Global Block (SRGB)
          are included in <span>[<a class="xref" href="#RFC8660">RFC8660</a>]</span>.<a class="pilcrow" href="#section-3.2-6">¶</a></p>
<p id="section-3.2-7">The Originator SRGB TLV may only appear in a BGP Prefix-SID attribute
        attached to IPv4/IPv6 Labeled Unicast prefixes (<span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>). It <span class="bcp14">MUST</span> be ignored when received for other 
        BGP AFI/SAFI combinations. Since the Label-Index TLV is required 
        for IPv4/IPv6 prefix applicability, the Originator SRGB TLV will be 
        ignored if it is not specified in a manner consistent with <a class="xref" href="#ERRORHANDLING">Section 6</a>.<a class="pilcrow" href="#section-3.2-7">¶</a></p>
<p id="section-3.2-8">If a BGP speaker receives a node's SRGB as an attribute of the BGP-LS
         Node NLRI and the BGP speaker also receives the same node's SRGB
         in a BGP Prefix-SID attribute, then the received values should be the
         same. If the values are different, the values advertised in the BGP-LS
         NLRI <span class="bcp14">SHOULD</span> be preferred, and an error should be logged.<a class="pilcrow" href="#section-3.2-8">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-4">
      <h2 id="name-receiving-bgp-prefix-sid-at">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-receiving-bgp-prefix-sid-at">Receiving BGP Prefix-SID Attribute</a>
      </h2>
<p id="section-4-1">A BGP speaker receiving a BGP Prefix-SID attribute from an External BGP (EBGP)
      neighbor residing outside the boundaries of the SR domain <span class="bcp14">MUST</span>
      discard the attribute unless it is configured to accept the attribute
      from the EBGP neighbor. A BGP speaker <span class="bcp14">SHOULD</span> log an error for further
      analysis when discarding an attribute.<a class="pilcrow" href="#section-4-1">¶</a></p>
<div id="RECMPLSLABEL">
<section id="section-4.1">
        <h3 id="name-mpls-data-plane-labeled-uni">
<a class="section-number selfRef" href="#section-4.1">4.1. </a><a class="section-name selfRef" href="#name-mpls-data-plane-labeled-uni">MPLS Data Plane: Labeled Unicast</a>
        </h3>
<p id="section-4.1-1">A BGP session supporting the Multiprotocol BGP Labeled IPv4 or IPv6 Unicast (<span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>) AFI/SAFI is required.<a class="pilcrow" href="#section-4.1-1">¶</a></p>
<p id="section-4.1-2">When the  BGP Prefix-SID attribute is attached to a BGP Labeled IPv4 or IPv6
          Unicast <span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span> AFI/SAFI, it <span class="bcp14">MUST</span> contain the Label-Index TLV
          and <span class="bcp14">MAY</span> contain the Originator SRGB TLV.  A BGP Prefix-SID attribute received
          without a Label-Index TLV <span class="bcp14">MUST</span> be considered to be "invalid" by the
          receiving speaker.<a class="pilcrow" href="#section-4.1-2">¶</a></p>
<p id="section-4.1-3">The label index provides guidance to the receiving BGP speaker as to 
          the incoming label that <span class="bcp14">SHOULD</span> be allocated to the prefix.<a class="pilcrow" href="#section-4.1-3">¶</a></p>
<p id="section-4.1-4">A BGP speaker may be locally configured with an SRGB=[SRGB_Start,
        SRGB_End]. The preferred method for deriving the SRGB is a matter of
        local node configuration.<a class="pilcrow" href="#section-4.1-4">¶</a></p>
<p id="section-4.1-5">The mechanisms through which a given label-index value is assigned
        to a given prefix are outside the scope of this document.<a class="pilcrow" href="#section-4.1-5">¶</a></p>
<p id="section-4.1-6">Given a label index L_I, we refer to (L = L_I + SRGB_Start) as the
        derived label. A BGP Prefix-SID attribute is designated "conflicting" for
        a speaker M if the derived label value L lies outside the SRGB
        configured on M. Otherwise, the Label-Index TLV is designated
        "acceptable" to speaker M.<a class="pilcrow" href="#section-4.1-6">¶</a></p>
<p id="section-4.1-7">If multiple different prefixes are received with the same label
           index, all of the different prefixes <span class="bcp14">MUST</span> have
           their BGP Prefix-SID attribute considered to be "conflicting".<a class="pilcrow" href="#section-4.1-7">¶</a></p>
<p id="section-4.1-8">If multiple valid paths for the same prefix are received from
          multiple BGP speakers or, in the case of <span>[<a class="xref" href="#RFC7911">RFC7911</a>]</span>, 
          from the same BGP speaker, and the BGP Prefix-SID attributes do
          not contain the same label index, then the label index from
          the best path BGP Prefix-SID attribute <span class="bcp14">SHOULD</span> be chosen with 
          a notable exception being when <span>[<a class="xref" href="#RFC5004">RFC5004</a>]</span> 
          is being used to dampen route changes.<a class="pilcrow" href="#section-4.1-8">¶</a></p>
<p id="section-4.1-9">When a BGP speaker receives a path from a neighbor with an
        "acceptable" BGP Prefix-SID attribute and that path is selected as 
        the best path, it <span class="bcp14">SHOULD</span> program the derived label
        as the label for the prefix in its local MPLS data plane.<a class="pilcrow" href="#section-4.1-9">¶</a></p>
<p id="section-4.1-10">When a BGP speaker receives a path from a neighbor with an
        "invalid" or "conflicting" BGP Prefix-SID attribute, or when a 
        BGP speaker receives a path from a neighbor with a BGP Prefix-SID
        attribute but is unable to process it (e.g., local policy disables 
        the functionality), it <span class="bcp14">MUST</span> ignore the
        BGP Prefix-SID attribute. For the purposes of label allocation, a
        BGP speaker <span class="bcp14">MUST</span> assign a local (also called dynamic) label (non-SRGB)
        for such a prefix as per classic Multiprotocol BGP IPv4/IPv6 Labeled
        Unicast (<span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>) operation.<a class="pilcrow" href="#section-4.1-10">¶</a></p>
<p id="section-4.1-11">In the case of an "invalid" BGP Prefix-SID attribute, a BGP speaker <span class="bcp14">MUST</span>
        follow the error-handling rules specified in <a class="xref" href="#ERRORHANDLING">Section 6</a>. 
        A BGP speaker <span class="bcp14">SHOULD</span> log an error for further analysis. In the case of a 
        "conflicting" BGP Prefix-SID attribute, a BGP speaker <span class="bcp14">SHOULD NOT</span> treat it 
        as an error and <span class="bcp14">SHOULD</span> propagate the attribute unchanged. A BGP speaker <span class="bcp14">SHOULD</span> 
        log a warning for further analysis, i.e., in the case the conflict is 
        not due to a label-index transition.<a class="pilcrow" href="#section-4.1-11">¶</a></p>
<p id="section-4.1-12">When a BGP Prefix-SID attribute changes and transitions from
           "conflicting" to "acceptable", the BGP Prefix-SID attributes for other
           prefixes may also transition to "acceptable" as well. Implementations <span class="bcp14">SHOULD</span>
           ensure all impacted prefixes revert to using the label indices 
           corresponding to these newly "acceptable" BGP Prefix-SID attributes.<a class="pilcrow" href="#section-4.1-12">¶</a></p>
<p id="section-4.1-13">The outgoing label is always programmed as per classic
        Multiprotocol BGP IPv4/IPv6 Labeled Unicast (<span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>)
        operation. Specifically, a BGP speaker receiving a prefix with a BGP Prefix-SID
        attribute and a label NLRI field of Implicit NULL 
        <span>[<a class="xref" href="#RFC3032">RFC3032</a>]</span> from a neighbor <span class="bcp14">MUST</span>
        adhere to standard behavior and program its MPLS data plane to pop the
        top label when forwarding traffic to the prefix. The label NLRI
        defines the outbound label that <span class="bcp14">MUST</span> be used by the receiving node.<a class="pilcrow" href="#section-4.1-13">¶</a></p>
</section>
</div>
</section>
<section id="section-5">
      <h2 id="name-advertising-bgp-prefix-sid-">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-advertising-bgp-prefix-sid-">Advertising BGP Prefix-SID Attribute</a>
      </h2>
<p id="section-5-1">The BGP Prefix-SID attribute <span class="bcp14">MAY</span> be attached to BGP IPv4/IPv6 Labeled Unicast prefixes
      <span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>. In order to prevent distribution of the BGP
      Prefix-SID attribute beyond its intended scope of applicability,
      attribute filtering <span class="bcp14">SHOULD</span> be deployed to remove the BGP 
      Prefix-SID attribute at the administrative boundary of the 
      SR domain.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">A BGP speaker that advertises a path received from one of its
        neighbors <span class="bcp14">SHOULD</span> advertise the BGP Prefix-SID received with the path
        without modification as long as the BGP Prefix-SID was acceptable.
        If the path did not come with a BGP Prefix-SID attribute, the
        speaker <span class="bcp14">MAY</span> attach a BGP Prefix-SID to the path if configured to do so.
        The content of the TLVs present in the BGP Prefix-SID is determined by the
        configuration.<a class="pilcrow" href="#section-5-2">¶</a></p>
<div id="ADVMPLSLABEL">
<section id="section-5.1">
        <h3 id="name-mpls-data-plane-labeled-unic">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-mpls-data-plane-labeled-unic">MPLS Data Plane: Labeled Unicast</a>
        </h3>
<p id="section-5.1-1">A BGP speaker that originates a prefix attaches the BGP Prefix-SID
        attribute when it advertises the prefix to its neighbors via
        Multiprotocol BGP IPv4/IPv6 Labeled Unicast (<span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>). The value of the label index in the Label-Index
        TLV is determined by configuration.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<p id="section-5.1-2">A BGP speaker that originates a BGP Prefix-SID attribute <span class="bcp14">MAY</span> optionally
        announce the Originator SRGB TLV along with the mandatory Label-Index TLV.
        The content of the Originator SRGB TLV is determined by
        configuration.<a class="pilcrow" href="#section-5.1-2">¶</a></p>
<p id="section-5.1-3">Since the label-index value must be unique within an SR domain, by
        default an implementation <span class="bcp14">SHOULD NOT</span> advertise the BGP Prefix-SID
        attribute outside an AS unless it is explicitly
        configured to do so.<a class="pilcrow" href="#section-5.1-3">¶</a></p>
<p id="section-5.1-4">In all cases, the Label field of the advertised NLRI (<span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span> <span>[<a class="xref" href="#RFC4364">RFC4364</a>]</span>) <span class="bcp14">MUST</span> be set to the
        local/incoming label programmed in the MPLS data plane for the given
        advertised prefix. If the prefix is associated with one of the BGP
        speaker's interfaces, this is the usual MPLS label (such as the
        Implicit or Explicit NULL label 
        <span>[<a class="xref" href="#RFC3032">RFC3032</a>]</span>).<a class="pilcrow" href="#section-5.1-4">¶</a></p>
</section>
</div>
</section>
<div id="ERRORHANDLING">
<section id="section-6">
      <h2 id="name-error-handling-of-bgp-prefi">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-error-handling-of-bgp-prefi">Error Handling of BGP Prefix-SID Attribute</a>
      </h2>
<p id="section-6-1">When a BGP speaker receives a BGP UPDATE message containing a
      malformed or invalid BGP Prefix-SID attribute attached to an
      IPv4/IPv6 Labeled Unicast prefix (<span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>), it <span class="bcp14">MUST</span>
      ignore the received BGP Prefix-SID attribute and not advertise it to
      other BGP peers. In this context, a malformed BGP Prefix-SID attribute
      is one that cannot be parsed due to not meeting the minimum attribute 
      length requirement, containing a TLV length that doesn't conform to the 
      length constraints for the TLV, or containing a TLV length that would
      extend beyond the end of the attribute (as defined by the attribute
      length). 
      This is equivalent to the "Attribute discard" 
      action specified in <span>[<a class="xref" href="#RFC7606">RFC7606</a>]</span>. When discarding an 
      attribute, a BGP speaker <span class="bcp14">SHOULD</span> log an error for further analysis.<a class="pilcrow" href="#section-6-1">¶</a></p>
<p id="section-6-2">As per <span>[<a class="xref" href="#RFC7606">RFC7606</a>]</span>, if the BGP
         Prefix-SID attribute appears more than once in an UPDATE
         message, all the occurrences of the attribute other than the
         first one <span class="bcp14">SHALL</span> be discarded and the UPDATE message will continue
         to be processed.
         Similarly, if a recognized TLV appears more than once in a BGP
         Prefix-SID attribute while the specification only allows for a single
         occurrence, then all the occurrences of the TLV other than the
         first one <span class="bcp14">SHALL</span> be discarded and the Prefix-SID attribute will continue
         to be processed.<a class="pilcrow" href="#section-6-2">¶</a></p>
<p id="section-6-3">For future extensibility, unknown TLVs <span class="bcp14">MUST</span> be ignored and 
         propagated unmodified.<a class="pilcrow" href="#section-6-3">¶</a></p>
</section>
</div>
<div id="IANA">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-7-1">This document defines a BGP path attribute known as the BGP
      Prefix-SID attribute.  IANA has assigned 
      attribute code type 40 to the BGP Prefix-SID
      attribute from the "BGP Path Attributes" registry.<a class="pilcrow" href="#section-7-1">¶</a></p>
<p id="section-7-2">This document defines two TLVs for the BGP Prefix-SID attribute. These
      TLVs have been registered with IANA. IANA has created a
      registry for BGP Prefix-SID Attribute TLVs as follows:<a class="pilcrow" href="#section-7-2">¶</a></p>
<p id="section-7-3">Under the "Border Gateway Protocol (BGP) Parameters" registry, the new registry titled "BGP
      Prefix-SID TLV Types" has been created and points to this
      document as the reference.<a class="pilcrow" href="#section-7-3">¶</a></p>
<p id="section-7-4">Registration Procedure(s):<a class="pilcrow" href="#section-7-4">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-7-5.1">Values 1-254, Expert Review as defined in 
      <span>[<a class="xref" href="#RFC8126">RFC8126</a>]</span><a class="pilcrow" href="#section-7-5.1">¶</a>
</li>
        <li class="ulEmpty" id="section-7-5.2">Values
      0 and 255, Reserved<a class="pilcrow" href="#section-7-5.2">¶</a>
</li>
      </ul>
<span id="name-bgp-prefix-sid-tlv-types"></span><div id="IANA1">
<table class="left" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-bgp-prefix-sid-tlv-types">BGP Prefix-SID TLV Types</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Value</th>
            <th class="text-left" colspan="1" rowspan="1">Type</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">0</td>
            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
            <td class="text-left" colspan="1" rowspan="1">This document</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">1</td>
            <td class="text-left" colspan="1" rowspan="1">Label-Index</td>
            <td class="text-left" colspan="1" rowspan="1">This document</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">2</td>
            <td class="text-left" colspan="1" rowspan="1">Deprecated</td>
            <td class="text-left" colspan="1" rowspan="1">This document</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">3</td>
            <td class="text-left" colspan="1" rowspan="1">Originator SRGB</td>
            <td class="text-left" colspan="1" rowspan="1">This document</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">4-254</td>
            <td class="text-left" colspan="1" rowspan="1">Unassigned</td>
            <td class="text-left" colspan="1" rowspan="1"></td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">255</td>
            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
            <td class="text-left" colspan="1" rowspan="1">This document</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-7-7">The value 2 previously corresponded to the IPv6 SID TLV, which was specified 
         in previous versions of this document. It was removed, and use of 
         the BGP Prefix-SID for Segment Routing over the IPv6 data plane 
         <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span> has been deferred to 
         future specifications.<a class="pilcrow" href="#section-7-7">¶</a></p>
<p id="section-7-8">IANA has also created the "BGP Prefix-SID Label-Index TLV Flags"
         registry under the  "Border Gateway Protocol (BGP) Parameters" registry,
         with a reference to this document. Initially, this 16-bit flags registry is
         empty. The registration policy for flag bits is Expert Review <span>[<a class="xref" href="#RFC8126">RFC8126</a>]</span>,
         consistent with the "BGP Prefix-SID TLV Types" registry.<a class="pilcrow" href="#section-7-8">¶</a></p>
<p id="section-7-9">Finally, IANA has created the "BGP Prefix-SID Originator SRGB TLV Flags"
         registry under the  "Border Gateway Protocol (BGP) Parameters" registry,
         with a reference to this document. Initially, this 16-bit flags registry is
         empty. The registration policy for flag bits is Expert Review <span>[<a class="xref" href="#RFC8126">RFC8126</a>]</span>
         consistent with the BGP Prefix-SID TLV Types registry.<a class="pilcrow" href="#section-7-9">¶</a></p>
<p id="section-7-10">The designated experts must be good and faithful stewards of the above registries, 
        ensuring that each request is legitimate and corresponds to a viable use case. Given 
        the limited number of bits in the flags registries and the applicability to a single TLV, 
        additional scrutiny should be afforded to requests for flag-bit allocation. In general, no 
        single use case should require more than one flag bit and, should the use case 
        require more, alternate encodings using new TLVs should be considered.<a class="pilcrow" href="#section-7-10">¶</a></p>
</section>
</div>
<div id="MANAGE">
<section id="section-8">
      <h2 id="name-manageability-consideration">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-manageability-consideration">Manageability Considerations</a>
      </h2>
<p id="section-8-1">This document defines a BGP attribute to address use
      cases such as the one described in 
      <span>[<a class="xref" href="#RFC8670">RFC8670</a>]</span>.
      It is assumed that advertisement of the BGP Prefix-SID attribute is
      controlled by the operator in order to:<a class="pilcrow" href="#section-8-1">¶</a></p>
<ul>
<li id="section-8-2.1">Prevent undesired origination/advertisement of the BGP Prefix-SID
          attribute. By default, a BGP Prefix-SID attribute <span class="bcp14">SHOULD NOT</span> be
          attached to a prefix and advertised. Hence, BGP Prefix-SID 
          Advertisement <span class="bcp14">SHOULD</span> require explicit enablement.<a class="pilcrow" href="#section-8-2.1">¶</a>
</li>
        <li id="section-8-2.2">Prevent any undesired propagation of the BGP Prefix-SID
          attribute. By default, the BGP Prefix-SID is not advertised outside
          the boundary of a single SR/administrative domain that may include
          one or more ASes. The propagation to other ASes <span class="bcp14">MUST</span> be
          explicitly configured.<a class="pilcrow" href="#section-8-2.2">¶</a>
</li>
      </ul>
<p id="section-8-3">The deployment model described in <span>[<a class="xref" href="#RFC8670">RFC8670</a>]</span> assumes multiple
      ASes under a common administrative domain. For this
      use case, the BGP  Prefix-SID Advertisement is applicable to the inter-AS 
      context, i.e., EBGP,  while it is confined to a single
      administrative domain.<a class="pilcrow" href="#section-8-3">¶</a></p>
</section>
</div>
<div id="Security">
<section id="section-9">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-9">9. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-9-1">This document introduces a BGP attribute (BGP Prefix-SID), which
      inherits the security considerations expressed in: <span>[<a class="xref" href="#RFC4271">RFC4271</a>]</span>, <span>[<a class="xref" href="#RFC8277">RFC8277</a>]</span>, and
      <span>[<a class="xref" href="#RFC8402">RFC8402</a>]</span>.<a class="pilcrow" href="#section-9-1">¶</a></p>
<p id="section-9-2">When advertised using BGPsec as described in <span>[<a class="xref" href="#RFC8205">RFC8205</a>]</span>,
     the BGP Prefix-SID attribute doesn't impose any unique
     security considerations. It should be noted that the BGP Prefix-SID
     attribute is not protected by the BGPsec signatures.<a class="pilcrow" href="#section-9-2">¶</a></p>
<p id="section-9-3">It should be noted that,
      as described in <a class="xref" href="#MANAGE">Section 8</a>, this document refers
      to a deployment model where all nodes are under the single administrative domain.
      In this context, we assume that the operator doesn't want to leak
      any information related to internal prefixes and topology outside of the 
      administrative domain.
      The internal information includes the BGP Prefix-SID. In order
      to prevent such leaking, the common BGP mechanisms (filters) are
      applied at the boundary of the SR/administrative domain.
      Local BGP-attribute-filtering policies 
      and mechanisms are not standardized and, consequently, are beyond the
      scope of this document.<a class="pilcrow" href="#section-9-3">¶</a></p>
<p id="section-9-4">To prevent a Denial-of-Service (DoS) or Distributed-Denial-of-Service 
      (DDoS) attack due to excessive BGP updates with an invalid or conflicting 
      BGP Prefix-SID attribute, error log message rate limiting as well as suppression of
      duplicate error log messages <span class="bcp14">SHOULD</span> be deployed.<a class="pilcrow" href="#section-9-4">¶</a></p>
<p id="section-9-5">Since BGP-LS is the preferred method for advertising SRGB information,
         the BGP speaker <span class="bcp14">SHOULD</span> log an error if a BGP Prefix-SID attribute
         is received with SRGB information different from that received as an attribute of
         the same node's BGP-LS Node NLRI.<a class="pilcrow" href="#section-9-5">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-10">10. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-10.1">10.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC4271">[RFC4271]</dt>
        <dd>
<span class="refAuthor">Rekhter, Y., Ed.</span><span class="refAuthor">, Li, T., Ed.</span><span class="refAuthor">, and S. Hares, Ed.</span>, <span class="refTitle">"A Border Gateway Protocol 4 (BGP-4)"</span>, <span class="seriesInfo">RFC 4271</span>, <span class="seriesInfo">DOI 10.17487/RFC4271</span>, <time datetime="2006-01">January 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4271">https://www.rfc-editor.org/info/rfc4271</a>&gt;</span>. </dd>
<dt id="RFC4364">[RFC4364]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span><span class="refAuthor"> and Y. Rekhter</span>, <span class="refTitle">"BGP/MPLS IP Virtual Private Networks (VPNs)"</span>, <span class="seriesInfo">RFC 4364</span>, <span class="seriesInfo">DOI 10.17487/RFC4364</span>, <time datetime="2006-02">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4364">https://www.rfc-editor.org/info/rfc4364</a>&gt;</span>. </dd>
<dt id="RFC4760">[RFC4760]</dt>
        <dd>
<span class="refAuthor">Bates, T.</span><span class="refAuthor">, Chandra, R.</span><span class="refAuthor">, Katz, D.</span><span class="refAuthor">, and Y. Rekhter</span>, <span class="refTitle">"Multiprotocol Extensions for BGP-4"</span>, <span class="seriesInfo">RFC 4760</span>, <span class="seriesInfo">DOI 10.17487/RFC4760</span>, <time datetime="2007-01">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4760">https://www.rfc-editor.org/info/rfc4760</a>&gt;</span>. </dd>
<dt id="RFC7606">[RFC7606]</dt>
        <dd>
<span class="refAuthor">Chen, E., Ed.</span><span class="refAuthor">, Scudder, J., Ed.</span><span class="refAuthor">, Mohapatra, P.</span><span class="refAuthor">, and K. Patel</span>, <span class="refTitle">"Revised Error Handling for BGP UPDATE Messages"</span>, <span class="seriesInfo">RFC 7606</span>, <span class="seriesInfo">DOI 10.17487/RFC7606</span>, <time datetime="2015-08">August 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7606">https://www.rfc-editor.org/info/rfc7606</a>&gt;</span>. </dd>
<dt id="RFC7911">[RFC7911]</dt>
        <dd>
<span class="refAuthor">Walton, D.</span><span class="refAuthor">, Retana, A.</span><span class="refAuthor">, Chen, E.</span><span class="refAuthor">, and J. Scudder</span>, <span class="refTitle">"Advertisement of Multiple Paths in BGP"</span>, <span class="seriesInfo">RFC 7911</span>, <span class="seriesInfo">DOI 10.17487/RFC7911</span>, <time datetime="2016-07">July 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7911">https://www.rfc-editor.org/info/rfc7911</a>&gt;</span>. </dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span><span class="refAuthor">, Leiba, B.</span><span class="refAuthor">, and T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dt id="RFC8205">[RFC8205]</dt>
        <dd>
<span class="refAuthor">Lepinski, M., Ed.</span><span class="refAuthor"> and K. Sriram, Ed.</span>, <span class="refTitle">"BGPsec Protocol Specification"</span>, <span class="seriesInfo">RFC 8205</span>, <span class="seriesInfo">DOI 10.17487/RFC8205</span>, <time datetime="2017-09">September 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8205">https://www.rfc-editor.org/info/rfc8205</a>&gt;</span>. </dd>
<dt id="RFC8277">[RFC8277]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span>, <span class="refTitle">"Using BGP to Bind MPLS Labels to Address Prefixes"</span>, <span class="seriesInfo">RFC 8277</span>, <span class="seriesInfo">DOI 10.17487/RFC8277</span>, <time datetime="2017-10">October 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8277">https://www.rfc-editor.org/info/rfc8277</a>&gt;</span>. </dd>
<dt id="RFC8402">[RFC8402]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span><span class="refAuthor">, Previdi, S., Ed.</span><span class="refAuthor">, Ginsberg, L.</span><span class="refAuthor">, Decraene, B.</span><span class="refAuthor">, Litkowski, S.</span><span class="refAuthor">, and R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time datetime="2018-07">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
<dt id="RFC8660">[RFC8660]</dt>
      <dd>
<span class="refAuthor">Bashandy, A., Ed.</span><span class="refAuthor">, Filsfils, C., Ed.</span><span class="refAuthor">, Previdi, S.</span><span class="refAuthor">, Decraene, B.</span><span class="refAuthor">, Litkowski, S.</span><span class="refAuthor">, and R. Shakir</span>, <span class="refTitle">"Segment Routing with the MPLS Data Plane"</span>, <span class="seriesInfo">RFC 8660</span>, <span class="seriesInfo">DOI 10.17487/RFC8660</span>, <time datetime="2019-12">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8660">https://www.rfc-editor.org/info/rfc8660</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-10.2">10.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-idr-bgpls-segment-routing-epe">[BGPLS-SR-EPE]</dt>
        <dd>
<span class="refAuthor">Previdi, S.</span><span class="refAuthor">, Talaulikar, K.</span><span class="refAuthor">, Filsfils, C.</span><span class="refAuthor">, Patel, K.</span><span class="refAuthor">, Ray, S.</span><span class="refAuthor">, and J. Dong</span>, <span class="refTitle">"BGP-LS extensions for Segment Routing BGP Egress Peer Engineering"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-idr-bgpls-segment-routing-epe-19</span>, <time datetime="2019-05-16">16 May 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-idr-bgpls-segment-routing-epe-19">https://tools.ietf.org/html/draft-ietf-idr-bgpls-segment-routing-epe-19</a>&gt;</span>. </dd>
<dt id="I-D.ietf-idr-bgp-ls-segment-routing-ext">[BGPLS-SR-EXT]</dt>
        <dd>
<span class="refAuthor">Previdi, S.</span><span class="refAuthor">, Talaulikar, K.</span><span class="refAuthor">, Filsfils, C.</span><span class="refAuthor">, Gredler, H.</span><span class="refAuthor">, and M. Chen</span>, <span class="refTitle">"BGP Link-State extensions for Segment Routing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-idr-bgp-ls-segment-routing-ext-16</span>, <time datetime="2019-06-27">27 June 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-idr-bgp-ls-segment-routing-ext-16">https://tools.ietf.org/html/draft-ietf-idr-bgp-ls-segment-routing-ext-16</a>&gt;</span>. </dd>
<dt id="I-D.ietf-6man-segment-routing-header">[IPv6-SRH]</dt>
        <dd>
<span class="refAuthor">Filsfils, C.</span><span class="refAuthor">, Dukes, D.</span><span class="refAuthor">, Previdi, S.</span><span class="refAuthor">, Leddy, J.</span><span class="refAuthor">, Matsushima, S.</span><span class="refAuthor">, and D. Voyer</span>, <span class="refTitle">"IPv6 Segment Routing Header (SRH)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6man-segment-routing-header-26</span>, <time datetime="2019-10-22">22 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-6man-segment-routing-header-26">https://tools.ietf.org/html/draft-ietf-6man-segment-routing-header-26</a>&gt;</span>. </dd>
<dt id="RFC3032">[RFC3032]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span><span class="refAuthor">, Tappan, D.</span><span class="refAuthor">, Fedorkow, G.</span><span class="refAuthor">, Rekhter, Y.</span><span class="refAuthor">, Farinacci, D.</span><span class="refAuthor">, Li, T.</span><span class="refAuthor">, and A. Conta</span>, <span class="refTitle">"MPLS Label Stack Encoding"</span>, <span class="seriesInfo">RFC 3032</span>, <span class="seriesInfo">DOI 10.17487/RFC3032</span>, <time datetime="2001-01">January 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3032">https://www.rfc-editor.org/info/rfc3032</a>&gt;</span>. </dd>
<dt id="RFC5004">[RFC5004]</dt>
        <dd>
<span class="refAuthor">Chen, E.</span><span class="refAuthor"> and S. Sangli</span>, <span class="refTitle">"Avoid BGP Best Path Transitions from One External to Another"</span>, <span class="seriesInfo">RFC 5004</span>, <span class="seriesInfo">DOI 10.17487/RFC5004</span>, <time datetime="2007-09">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5004">https://www.rfc-editor.org/info/rfc5004</a>&gt;</span>. </dd>
<dt id="RFC7752">[RFC7752]</dt>
        <dd>
<span class="refAuthor">Gredler, H., Ed.</span><span class="refAuthor">, Medved, J.</span><span class="refAuthor">, Previdi, S.</span><span class="refAuthor">, Farrel, A.</span><span class="refAuthor">, and S. Ray</span>, <span class="refTitle">"North-Bound Distribution of Link-State and Traffic Engineering (TE) Information Using BGP"</span>, <span class="seriesInfo">RFC 7752</span>, <span class="seriesInfo">DOI 10.17487/RFC7752</span>, <time datetime="2016-03">March 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7752">https://www.rfc-editor.org/info/rfc7752</a>&gt;</span>. </dd>
<dt id="RFC8670">[RFC8670]</dt>
      <dd>
<span class="refAuthor">Filsfils, C., Ed.</span><span class="refAuthor">, Previdi, S.</span><span class="refAuthor">, Dawra, G.</span><span class="refAuthor">, Aries, E.</span><span class="refAuthor">, and P. Lapukhov</span>, <span class="refTitle">"BGP Prefix Segment in Large-Scale Data Centers"</span>, <span class="seriesInfo">RFC 8670</span>, <span class="seriesInfo">DOI 10.17487/RFC8670</span>, <time datetime="2019-12">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8670">https://www.rfc-editor.org/info/rfc8670</a>&gt;</span>. </dd>
</dl>
</section>
</section>
<div id="Acknowledgements">
<section id="section-appendix.a">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="section-appendix.a-1">The authors would like to thank Satya Mohanty for his contribution
      to this document.<a class="pilcrow" href="#section-appendix.a-1">¶</a></p>
<p id="section-appendix.a-2">The authors would like to thank Alvaro Retana for substantive 
         comments as part of the Routing AD review.<a class="pilcrow" href="#section-appendix.a-2">¶</a></p>
<p id="section-appendix.a-3">The authors would like to thank Bruno Decraene for substantive 
         comments and suggested text as part of the Routing Directorate
         review.<a class="pilcrow" href="#section-appendix.a-3">¶</a></p>
<p id="section-appendix.a-4">The authors would like to thank Shyam Sethuram for comments and
         discussion of TLV processing and validation.<a class="pilcrow" href="#section-appendix.a-4">¶</a></p>
<p id="section-appendix.a-5">The authors would like to thank Robert Raszuk for comments and
         suggestions regarding the MPLS data-plane behavior.<a class="pilcrow" href="#section-appendix.a-5">¶</a></p>
<p id="section-appendix.a-6">The authors would like to thank Krishna Deevi, 
         Juan Alcaide, Howard Yang, and Jakob Heitz for discussions 
         on conflicting BGP Prefix-SID label indices and BGP add paths.<a class="pilcrow" href="#section-appendix.a-6">¶</a></p>
<p id="section-appendix.a-7">The authors would like to thank Peter Yee, Tony Przygienda,
         Mirja Kuhlewind, Alexey Melnikov, Eric Rescorla, Suresh
         Krishnan, Warren Kumari, Ben Campbell Sue Hares, and Martin
         Vigoureux for IDR Working Group last call, IETF Last Call,
         directorate, and IESG reviews.<a class="pilcrow" href="#section-appendix.a-7">¶</a></p>
</section>
</div>
<div id="Contributors">
<section id="section-appendix.b">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<div class="artwork art-text alignLeft" id="section-appendix.b-1">
<pre>Keyur Patel
Arrcus, Inc.
United States of America

Email: Keyur@arrcus.com</pre><a class="pilcrow" href="#section-appendix.b-1">¶</a>
</div>
<div class="artwork art-text alignLeft" id="section-appendix.b-2">
<pre>Saikat Ray
Unaffiliated
United States of America

Email: raysaikat@gmail.com</pre><a class="pilcrow" href="#section-appendix.b-2">¶</a>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.c">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Stefano Previdi</span></div>
<div class="left" dir="auto"><span class="org">Huawei Technologies</span></div>
<div class="left" dir="auto"><span class="country-name">Italy</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:stefano@previdi.net">stefano@previdi.net</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Clarence Filsfils</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems</span></div>
<div class="left" dir="auto"> <span class="locality">Brussels</span>
</div>
<div class="left" dir="auto"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:cfilsfil@cisco.com">cfilsfil@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Acee Lindem (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Cisco Systems</span></div>
<div class="left" dir="auto"><span class="street-address">301 Midenhall Way</span></div>
<div class="left" dir="auto">
<span class="locality">Cary, NC</span>,  <span class="postal-code">27513</span>
</div>
<div class="left" dir="auto"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:acee@cisco.com">acee@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Arjun Sreekantiah</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:arjunhrs@gmail.com">arjunhrs@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Hannes Gredler</span></div>
<div class="left" dir="auto"><span class="org">RtBrick Inc.</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:hannes@rtbrick.com">hannes@rtbrick.com</a>
</div>
</address>
</section>
</div>
<script>var toc = document.getElementById("toc");
var tocToggle = toc.querySelector("h2");
var tocNav = toc.querySelector("nav");

// mobile menu toggle
tocToggle.onclick = function(event) {
    if (window.innerWidth < 1024) {
 var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
 if (tocNavDisplay == "none") {
     tocNav.style.display = "block";
 } else {
     tocNav.style.display = "none";
 }
    }
}

// toc anchor scroll to anchor
tocNav.addEventListener("click", function (event) {
    event.preventDefault();
    if (event.target.nodeName == 'A') {
 if (window.innerWidth < 1024) {
     tocNav.style.display = "none";
 }
 var href = event.target.getAttribute("href");
 var anchorId = href.substr(1);
 var anchor =  document.getElementById(anchorId);
 anchor.scrollIntoView(true);
 window.history.pushState("","",href);
    }
});

// switch toc mode when window resized
window.onresize = function () {
    if (window.innerWidth < 1024) {
 tocNav.style.display = "none";
    } else {
 tocNav.style.display = "block";
    }
}
</script>


</body></html>