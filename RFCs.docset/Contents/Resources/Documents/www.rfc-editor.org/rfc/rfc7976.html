<html><head></head><body><pre>Internet Engineering Task Force (IETF)                       C. Holmberg
Request for Comments: 7976                                    N. Biondic
Updates: <a href="./rfc7315">7315</a>                                                   Ericsson
Category: Informational                                     G. Salgueiro
ISSN: 2070-1721                                                    Cisco
                                                          September 2016


          <span class="h1">Updates to Private Header (P-Header) Extension Usage</span>
      <span class="h1">in Session Initiation Protocol (SIP) Requests and Responses</span>

Abstract

   The Third Generation Partnership Project (3GPP) has identified cases
   where different SIP private header extensions referred to as "P-"
   header fields, and defined in <a href="./rfc7315">RFC 7315</a>, need to be included in SIP
   requests and responses currently not allowed according to <a href="./rfc7315">RFC 7315</a>.
   This document updates <a href="./rfc7315">RFC 7315</a>, in order to allow inclusion of the
   affected "P-" header fields in such requests and responses.

   This document also makes updates for <a href="./rfc7315">RFC 7315</a> in order to fix
   misalignments that occurred when <a href="./rfc3455">RFC 3455</a> was updated and obsoleted
   by <a href="./rfc7315">RFC 7315</a>.

Status of This Memo

   This document is not an Internet Standards Track specification; it is
   published for informational purposes.

   This document is a product of the Internet Engineering Task Force
   (IETF).  It represents the consensus of the IETF community.  It has
   received public review and has been approved for publication by the
   Internet Engineering Steering Group (IESG).  Not all documents
   approved by the IESG are a candidate for any level of Internet
   Standard; see <a href="./rfc7841#section-2">SectionÂ 2 of RFC 7841</a>.

   Information about the current status of this document, any errata,
   and how to provide feedback on it may be obtained at
   <a href="http://www.rfc-editor.org/info/rfc7976">http://www.rfc-editor.org/info/rfc7976</a>.












<span class="grey">Holmberg, et al.              Informational                     [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc7976">RFC 7976</a>                Updates to P-Header Usage         September 2016</span>


Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Misalignments and 3GPP Use Cases  . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.1">2.1</a>.  General . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.2">2.2</a>.  Misalignments . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.3">2.3</a>.  3GPP Use Cases  . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-2.3.1">2.3.1</a>.  General . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-2.3.2">2.3.2</a>.  P-Access-Network-Info . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
       <a href="#section-2.3.3">2.3.3</a>.  P-Charging-Vector . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-3">3</a>.  Updates to <a href="./rfc7315">RFC 7315</a> . . . . . . . . . . . . . . . . . . . . .   <a href="#page-6">6</a>
   <a href="#section-4">4</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
   <a href="#section-5">5</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-5.1">5.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .   <a href="#page-7">7</a>
     <a href="#section-5.2">5.2</a>.  Informative References  . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-8">8</a>

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   The Third Generation Partnership Project (3GPP) has identified cases
   where different Session Initiation Protocol (SIP) [<a href="./rfc3261" title='"SIP: Session Initiation Protocol"'>RFC3261</a>] private
   header extensions referred to as "P-" header fields, and defined in
   [<a href="./rfc7315" title='"Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3GPP"'>RFC7315</a>], need to be included in SIP requests and responses
   currently not allowed according to <a href="./rfc7315">RFC 7315</a>.  This document updates
   <a href="./rfc7315">RFC 7315</a>, in order to allow inclusion of the affected "P-" header
   fields in such requests and responses.

   This document also makes updates for <a href="./rfc7315">RFC 7315</a> in order to fix
   misalignments that occurred when <a href="./rfc3455">RFC 3455</a> [<a href="./rfc3455" title='"Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3rd-Generation Partnership Project (3GPP)"'>RFC3455</a>] was updated and
   obsoleted by <a href="./rfc7315">RFC 7315</a>.





<span class="grey">Holmberg, et al.              Informational                     [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc7976">RFC 7976</a>                Updates to P-Header Usage         September 2016</span>


   As the "P-" header fields are mainly used in (and in most cases, only
   defined for) networks defined by the 3GPP, where the updates defined
   in this document are already defined [<a href="#ref-TS.3GPP.24.229">TS.3GPP.24.229</a>], the updates
   are not seen to cause backward-compatibility concerns.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Misalignments%20and%203GPP%20Use%20Cases"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Misalignments and 3GPP Use Cases</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.1.%20%20General"></a><a class="selflink" href="#section-2.1" id="section-2.1">2.1</a>.  General</span>

   <a href="./rfc7315">RFC 7315</a> contains contradicting statements regarding the usage of SIP
   "P-" header fields in SIP requests and responses, which leave the
   presence of the SIP "P-" header fields in the SIP requests and
   responses open to interpretation and different implementations.
   Statements in <a href="#section-5.7">Section 5.7</a> of that RFC are not aligned with the
   definitions and usage of the SIP "P-" header fields specified in
   <a href="#section-4">Section 4</a>.  This section describes the misalignments that occurred
   when <a href="./rfc3455">RFC 3455</a> was updated and obsoleted by <a href="./rfc7315">RFC 7315</a>, and how they are
   fixed.

   NOTE: In the case of the P-Called-Party-ID header field, allowing it
   in PUBLISH requests was deliberately done in <a href="./rfc7315">RFC 7315</a>.  Therefore, it
   is not considered a misalignment.

   Since <a href="./rfc7315">RFC 7315</a> was published, 3GPP defined new use cases that require
   the RFC to be updated.  This section describes the 3GPP use cases
   behind the updates, and the updates needed to <a href="./rfc7315">RFC 7315</a> in order to
   support the use cases.

   <a href="#section-3">Section 3</a> updates <a href="./rfc7315">RFC 7315</a>, based on the misalignments and 3GPP use
   cases.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.2.%20%20Misalignments"></a><a class="selflink" href="#section-2.2" id="section-2.2">2.2</a>.  Misalignments</span>

   The following updates are needed in order to fix the misalignments
   between RFCs 7315 and 3455:

   o  P-Associated-URI: Remove the statement that the header field can
      appear in the SIP REGISTER method.

   o  P-Called-Party-ID: Delete the statement that the P-Called-Party-ID
      header field can appear in SIP responses.  Add a statement that
      the P-Called-Party-ID header field can appear in the SIP REFER
      method.

   o  P-Visited-Network-ID: Delete the statement that the P-Visited-
      Network-ID header field can appear in SIP responses.  Add a
      statement that the P-Visited-Network-ID header field cannot appear
      in the SIP NOTIFY, PRACK, INFO, and UPDATE methods.



<span class="grey">Holmberg, et al.              Informational                     [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc7976">RFC 7976</a>                Updates to P-Header Usage         September 2016</span>


   o  P-Access-Network-Info: Add a statement that the P-Access-Network-
      Info header field can appear in SIP responses.

   o  P-Charging-Vector: Add a statement that the P-Charging-Vector
      header field can appear in SIP responses.  Add a statement that
      the P-Charging-Vector header field cannot appear in the SIP ACK
      method.

   o  P-Charging-Function-Addresses: Add a statement that the
      P-Charging-Function-Addresses header field can appear in SIP
      responses.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.3.%20%203GPP%20Use%20Cases"></a><a class="selflink" href="#section-2.3" id="section-2.3">2.3</a>.  3GPP Use Cases</span>

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.3.1.%20%20General"></a><a class="selflink" href="#section-2.3.1" id="section-2.3.1">2.3.1</a>.  General</span>

   The following updates are needed in order to implement the 3GPP use
   cases:

   o  P-Access-Network-Info: Add statement that the P-Access-Network-
      Info header field can appear in the SIP ACK method when triggered
      by a SIP 2xx response.

   o  P-Charging-Vector: Add statement that the P-Charging-Vector header
      field can appear in the SIP ACK method when triggered by a SIP 2xx
      response.

   This following sections describe, for individual "P-" header fields,
   the 3GPP use cases that are the basis for the updates.  The use cases
   are based on the procedures defined in [<a href="#ref-TS.3GPP.24.229">TS.3GPP.24.229</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.3.2.%20%20P-Access-Network-Info"></a><a class="selflink" href="#section-2.3.2" id="section-2.3.2">2.3.2</a>.  P-Access-Network-Info</span>

   The P-Access-Network-Info header field may contain the Network
   Provided Location Information (NPLI).  The NPLI is described in
   [<a href="#ref-TS.3GPP.23.228">TS.3GPP.23.228</a>].

   A proxy in possession of appropriate information about the access
   technology might insert a P-Access-Network-Info header field with its
   own values.  Such values are identified by the string "network-
   provided" defined in <a href="./rfc7315">RFC 7315</a>.  Based on operator policy and/or
   roaming agreement, the local time of the visited network may be
   included.

   The Call Data Records (CDRs) generated within the IP Multimedia
   Subsystem (IMS) have to contain the NPLI in order to guarantee
   correct billing.  When an IMS session is modified, the NPLI also
   needs to be stored as the location of the user at the time when the



<span class="grey">Holmberg, et al.              Informational                     [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc7976">RFC 7976</a>                Updates to P-Header Usage         September 2016</span>


   session is modified may generate a charging event.  In case of a
   session modification event at IMS, the NPLI needs to be provided:

   o  when the bearer establishment is triggered, or

   o  at session release when the bearer deactivation is triggered, or

   o  when the bearer modification is triggered, e.g., a QoS
      modification for the use of a newly negotiated codec.

   In some scenarios, the bearer modification may be triggered by the
   proxy upon reception of a Session Description Protocol (SDP) answer
   within SIP 2xx response to the SIP INVITE request.  In such case, the
   NPLI needs to be provided within the SIP ACK request.  However, <a href="./rfc7315">RFC</a>
   <a href="./rfc7315">7315</a> does not allow the usage of the P-Access-Network-Info header
   field in SIP ACK request.

   Upon reception of the SDP answer within SIP 2xx response on the SIP
   INVITE request, a proxy may initiate procedures to obtain the NPLI
   and may include the P-Access-Network-Info header field with the NPLI
   in the SIP ACK request.

   The P-Access-Network-Info header field shall not be included in SIP
   ACK requests triggered by non-2xx responses.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.3.3.%20%20P-Charging-Vector"></a><a class="selflink" href="#section-2.3.3" id="section-2.3.3">2.3.3</a>.  P-Charging-Vector</span>

   <a href="./rfc7315">RFC 7315</a> defines an Inter Operator Identifier (IOI) to enable
   different operators involved in a SIP dialog or a transaction outside
   a dialog to identify each other by exchanging operator identification
   information within the P-Charging-Vector header field.

   In the interconnection scenarios in multi-operator environments,
   where one or more transit operators are between the originating and
   terminating operator, the identities of the involved transit
   operators are represented by a transit-ioi parameter of the
   P-Charging-Vector header field.

   Transit operators can be selected independently for each SIP method
   and direction of request.  A transit network will only have knowledge
   of an individual SIP request, and transit network selection will be
   an independent decision for each request and could be made based on
   load, cost, percentage, time of day, and other factors.  For this
   reason, it is necessary that the P-Charging-Vector header field,
   which carries the transit IOI information, is included in each SIP
   request and response.  However, <a href="./rfc7315">RFC 7315</a> does not allow the usage of
   the P-Charging-Vector header field in the SIP ACK request.




<span class="grey">Holmberg, et al.              Informational                     [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc7976">RFC 7976</a>                Updates to P-Header Usage         September 2016</span>


   A SIP proxy that supports this extension and receives the SIP ACK
   request may include a P-Charging-Vector header field in the SIP ACK
   request.

   The P-Charging-Vector header field shall not be included in SIP ACK
   requests triggered by SIP non-2xx responses.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Updates%20to%20RFC%207315"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Updates to <a href="./rfc7315">RFC 7315</a></span>

   This section implements the update to <a href="./rfc7315#section-5.7">SectionÂ 5.7 of RFC 7315</a>, in
   order to implement the misalignment fixes and the 3GPP requirements
   described in <a href="#section-2">Section 2</a>.

   Old text:

   The P-Associated-URI header field can appear in SIP REGISTER method
   and 2xx resonses [sic].  The P-Called-Party-ID header field can
   appear in SIP INVITE, OPTIONS, PUBLISH, SUBSCRIBE, and MESSAGE
   methods and all responses.  The P-Visited-Network-ID header field can
   appear in all SIP methods except ACK, BYE, and CANCEL and all
   responses.  The P-Access-Network-Info header field can appear in all
   SIP methods except ACK and CANCEL.  The P-Charging-Vector header
   field can appear in all SIP methods except CANCEL.  The
   P-Charging-Function-Addresses header field can appear in all SIP
   methods except ACK and CANCEL.

   New text:

   The P-Associated-URI header field can appear in SIP REGISTER 2xx
   responses.  The P-Called-Party-ID header field can appear in the SIP
   INVITE, OPTIONS, PUBLISH, REFER, SUBSCRIBE, and MESSAGE methods.  The
   P-Visited-Network-ID header field can appear in all SIP methods
   except ACK, BYE, CANCEL, NOTIFY, PRACK, INFO, and UPDATE.  The
   P-Access-Network-Info header field can appear in all SIP methods and
   non-100 responses, except in CANCEL methods, CANCEL responses, and
   ACK methods triggered by non-2xx responses.  The P-Charging-Vector
   header field can appear in all SIP methods and non-100 responses,
   except in CANCEL methods, CANCEL responses, and ACK methods triggered
   by non-2xx responses.  The P-Charging-Function-Addresses header field
   can appear in all SIP methods and non-100 responses, except in CANCEL
   methods, CANCEL responses, and ACK methods.










<span class="grey">Holmberg, et al.              Informational                     [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc7976">RFC 7976</a>                Updates to P-Header Usage         September 2016</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20Security%20Considerations"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  Security Considerations</span>

   The security considerations for these "P-" header fields are defined
   in [<a href="./rfc7315" title='"Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3GPP"'>RFC7315</a>].  This specification allows some header fields to be
   present in messages where they were previously not allowed, and the
   security considerations and assumptions described in [<a href="./rfc7315" title='"Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3GPP"'>RFC7315</a>] (e.g.,
   regarding only sending information to trusted entities) also apply to
   those messages.  In addition, this specification also disallows some
   header fields to be present in messages where they were previously
   allowed.  That does not cause any security issues, but implementors
   need to be aware that implementations may not have been updated
   according to this document, and take proper actions if a header field
   occurs, or does not occur, in a message where it should occur (or
   occurs in a message where it should not occur).  This document adds
   the ability to include P-Access-Network-Info in ACK requests.  As
   documented in [<a href="./rfc7315" title='"Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3GPP"'>RFC7315</a>], P-Access-Network-Info may include privacy
   sensitive information, including the user's location.  The security
   and privacy considerations for P-Access-Network-Info in ACK requests
   are similar to those for the other SIP requests discussed in
   [<a href="./rfc7315" title='"Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3GPP"'>RFC7315</a>].

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20References"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  References</span>

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20Normative%20References"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  Normative References</span>

   [<a id="ref-RFC3261">RFC3261</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", <a href="./rfc3261">RFC 3261</a>,
              DOI 10.17487/RFC3261, June 2002,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3261">http://www.rfc-editor.org/info/rfc3261</a>&gt;.

   [<a id="ref-RFC7315">RFC7315</a>]  Jesske, R., Drage, K., and C. Holmberg, "Private Header
              (P-Header) Extensions to the Session Initiation Protocol
              (SIP) for the 3GPP", <a href="./rfc7315">RFC 7315</a>, DOI 10.17487/RFC7315, July
              2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7315">http://www.rfc-editor.org/info/rfc7315</a>&gt;.

   [<a id="ref-TS.3GPP.23.228">TS.3GPP.23.228</a>]
              3GPP, "IP multimedia call control protocol based on
              Session Initiation Protocol (SIP) and Session Description
              Protocol (SDP); Stage 3", 3GPP TS 23.228 13.6.0, June
              2016, &lt;<a href="http://www.3gpp.org/ftp/Specs/html-info/23228.htm">http://www.3gpp.org/ftp/Specs/html-info/23228.htm</a>&gt;.

   [<a id="ref-TS.3GPP.24.229">TS.3GPP.24.229</a>]
              3GPP, "IP Multimedia Subsystem (IMS); Stage 2", 3GPP
              TS 24.229 13.6.0, June 2016,
              &lt;<a href="http://www.3gpp.org/ftp/Specs/html-info/24229.htm">http://www.3gpp.org/ftp/Specs/html-info/24229.htm</a>&gt;.





<span class="grey">Holmberg, et al.              Informational                     [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc7976">RFC 7976</a>                Updates to P-Header Usage         September 2016</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.2.%20%20Informative%20References"></a><a class="selflink" href="#section-5.2" id="section-5.2">5.2</a>.  Informative References</span>

   [<a id="ref-RFC3455">RFC3455</a>]  Garcia-Martin, M., Henrikson, E., and D. Mills, "Private
              Header (P-Header) Extensions to the Session Initiation
              Protocol (SIP) for the 3rd-Generation Partnership Project
              (3GPP)", <a href="./rfc3455">RFC 3455</a>, DOI 10.17487/RFC3455, January 2003,
              &lt;<a href="http://www.rfc-editor.org/info/rfc3455">http://www.rfc-editor.org/info/rfc3455</a>&gt;.

Acknowledgments

   Thanks to Paul Kyzivat, Jean Mahoney, Ben Campbell, and Adam Roach
   for providing comments on the document.

Authors' Addresses

   Christer Holmberg
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   Email: christer.holmberg@ericsson.com


   Nevenka Biondic
   Ericsson
   Krapinska 45
   Zagreb  10002
   Croatia

   Email: nevenka.biondic@ericsson.com


   Gonzalo Salgueiro
   Cisco Systems, Inc.
   7200-12 Kit Creek Road
   Research Triangle Park, NC  27709
   United States of America

   Email: gsalguei@cisco.com











Holmberg, et al.              Informational                     [Page 8]
</pre>
</body></html>