<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9159: IPv6 Mesh over BLUETOOTH(R) Low Energy Using the Internet Protocol Support Profile (IPSP)</title>
<meta content="Carles Gomez" name="author"/>
<meta content="Seyed Mahdi Darroudi" name="author"/>
<meta content="Teemu Savolainen" name="author"/>
<meta content="Michael Spoerk" name="author"/>
<meta content="
       
         RFC 7668 describes the adaptation of IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) techniques to enable IPv6 over Bluetooth Low Energy (Bluetooth LE) networks that follow the star topology. 
         However, recent Bluetooth specifications allow the formation of extended topologies as well. This document specifies mechanisms that are needed
         to enable IPv6 mesh over Bluetooth LE links established by using the Bluetooth Internet Protocol Support Profile (IPSP). 
         This document does not specify the routing protocol to be used in an IPv6 mesh over Bluetooth LE links.
       
    " name="description"/>
<meta content="xml2rfc 3.12.0" name="generator"/>
<meta content="Bluetooth Low Energy" name="keyword"/>
<meta content="mesh networks" name="keyword"/>
<meta content="6lowpan" name="keyword"/>
<meta content="IPv6" name="keyword"/>
<meta content="Low power" name="keyword"/>
<meta content="IoT" name="keyword"/>
<meta content="Internet of Things" name="keyword"/>
<meta content="9159" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.12.0
    Python 3.6.13
    appdirs 1.4.4
    ConfigArgParse 1.4.1
    google-i18n-address 2.4.0
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.15.1
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.4.1
    requests 2.24.0
    setuptools 40.5.0
    six 1.14.0
    WeasyPrint 52.5
-->
<link href="rfc9159.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9159" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-6lo-blemesh-10" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9159</td>
<td class="center">IPv6 Mesh over Bluetooth LE</td>
<td class="right">December 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Gomez, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9159">9159</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2021-12">December 2021</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. Gomez</div>
<div class="org">Universitat Politecnica de Catalunya</div>
</div>
<div class="author">
      <div class="author-name">S.M. Darroudi</div>
<div class="org">Universitat Politecnica de Catalunya</div>
</div>
<div class="author">
      <div class="author-name">T. Savolainen</div>
<div class="org">Unaffiliated</div>
</div>
<div class="author">
      <div class="author-name">M. Spoerk</div>
<div class="org">Graz University of Technology</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9159</h1>
<h1 id="title">IPv6 Mesh over BLUETOOTH(R) Low Energy Using the Internet Protocol Support Profile (IPSP)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">
         RFC 7668 describes the adaptation of IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) techniques to enable IPv6 over Bluetooth Low Energy (Bluetooth LE) networks that follow the star topology. 
         However, recent Bluetooth specifications allow the formation of extended topologies as well. This document specifies mechanisms that are needed
         to enable IPv6 mesh over Bluetooth LE links established by using the Bluetooth Internet Protocol Support Profile (IPSP). 
         This document does not specify the routing protocol to be used in an IPv6 mesh over Bluetooth LE links.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9159">https://www.rfc-editor.org/info/rfc9159</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="xref" href="#section-1.1">1.1</a>.  <a class="xref" href="#name-terminology-and-requirement">Terminology and Requirements Language</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p class="keepWithNext" id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-bluetooth-le-networks-and-t">Bluetooth LE Networks and the IPSP</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-specification-of-ipv6-mesh-">Specification of IPv6 Mesh over Bluetooth LE Links</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="xref" href="#section-3.1">3.1</a>.  <a class="xref" href="#name-protocol-stack">Protocol Stack</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a class="xref" href="#section-3.2">3.2</a>.  <a class="xref" href="#name-subnet-model">Subnet Model</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a class="xref" href="#section-3.3">3.3</a>.  <a class="xref" href="#name-link-model">Link Model</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a class="xref" href="#section-3.3.1">3.3.1</a>.  <a class="xref" href="#name-stateless-address-autoconfi">Stateless Address Autoconfiguration</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a class="xref" href="#section-3.3.2">3.3.2</a>.  <a class="xref" href="#name-neighbor-discovery">Neighbor Discovery</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.3">
                    <p id="section-toc.1-1.3.2.3.2.3.1"><a class="xref" href="#section-3.3.3">3.3.3</a>.  <a class="xref" href="#name-header-compression">Header Compression</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.4">
                    <p id="section-toc.1-1.3.2.3.2.4.1"><a class="xref" href="#section-3.3.4">3.3.4</a>.  <a class="xref" href="#name-unicast-and-multicast-mappi">Unicast and Multicast Mapping</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-6">6</a>.  <a class="xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="xref" href="#section-6.1">6.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a class="xref" href="#section-6.2">6.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#appendix-A">Appendix A</a>.  <a class="xref" href="#name-bluetooth-le-connection-est">Bluetooth LE Connection Establishment Example</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="xref" href="#appendix-B">Appendix B</a>.  <a class="xref" href="#name-node-joining-procedure">Node-Joining Procedure</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="xref" href="#appendix-C"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="xref" href="#appendix-D"></a><a class="xref" href="#name-contributors">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a class="xref" href="#appendix-E"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">
        Bluetooth Low Energy (hereinafter, Bluetooth LE) was first introduced
   in the Bluetooth 4.0 specification.  Bluetooth LE (which has been
   marketed as Bluetooth Smart) is a low-power wireless technology
   designed for short-range control and monitoring applications.
   Bluetooth LE is currently implemented in a wide range of consumer
   electronics devices, such as smartphones and wearable devices.  Given
   the high potential of this technology for the Internet of Things, the
   Bluetooth Special Interest Group (Bluetooth SIG) and the IETF have
   produced specifications in order to enable IPv6 over Bluetooth LE,
   such as the Internet Protocol Support Profile (IPSP) <span>[<a class="xref" href="#IPSP">IPSP</a>]</span> and <span><a class="xref" href="#RFC7668">RFC 7668</a> [<a class="xref" href="#RFC7668">RFC7668</a>]</span>, respectively.  
   Bluetooth 4.0 only supports Bluetooth LE
   networks that follow the star topology.  As a consequence, <span><a class="xref" href="#RFC7668">RFC 7668</a> [<a class="xref" href="#RFC7668">RFC7668</a>]</span> was
   specifically developed and optimized for that type of network
   topology.  However, the functionality described in <span><a class="xref" href="#RFC7668">RFC 7668</a> [<a class="xref" href="#RFC7668">RFC7668</a>]</span> is not
   sufficient and would fail to enable an IPv6 mesh over Bluetooth LE links.  This
   document specifies mechanisms that are needed to enable IPv6 mesh over Bluetooth LE links. 
   This document does not specify the routing protocol to be used in an
   IPv6 mesh over Bluetooth LE links.<a class="pilcrow" href="#section-1-1">¶</a></p>
<section id="section-1.1">
        <h3 id="name-terminology-and-requirement">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-terminology-and-requirement">Terminology and Requirements Language</a>
        </h3>
<p id="section-1.1-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
<p id="section-1.1-2">
    The terms "6LoWPAN Node" (6LN), "6LoWPAN Router" (6LR), and "6LoWPAN Border Router" (6LBR) are defined as in <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span>, with an addition that Bluetooth LE central and Bluetooth LE peripheral (see <a class="xref" href="#blue">Section 2</a>) can both be adopted by a 6LN, a 6LR, or a 6LBR.<a class="pilcrow" href="#section-1.1-2">¶</a></p>
</section>
</section>
<div id="blue">
<section id="section-2">
      <h2 id="name-bluetooth-le-networks-and-t">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-bluetooth-le-networks-and-t">Bluetooth LE Networks and the IPSP</a>
      </h2>
<p id="section-2-1">
        Bluetooth LE defines two Generic Access Profile (GAP) roles of relevance herein: the Bluetooth LE central role and the Bluetooth LE peripheral role.
In Bluetooth 4.0, a device in the central role, which is called "central" from now on, was able to manage multiple simultaneous connections with a number of devices in the peripheral role,
        called "peripherals" hereinafter. Bluetooth 4.1 (now deprecated) introduced the possibility for a peripheral to be connected to more than one central
        simultaneously, therefore allowing extended topologies beyond the star topology for a Bluetooth LE network <span>[<a class="xref" href="#BTCorev4.1">BTCorev4.1</a>]</span>. In addition, a device may simultaneously
        be a central in a set of link-layer connections, as well as a peripheral in others.<a class="pilcrow" href="#section-2-1">¶</a></p>
<p id="section-2-2">
        On the other hand, the IPSP enables discovery of IP-enabled devices 
        and the establishment of a link-layer connection for transporting IPv6 packets. The IPSP defines the Node and Router roles for devices that 
        consume/originate IPv6 packets and for devices that can route IPv6 packets, respectively.
   Consistent with Bluetooth 4.1, Bluetooth 4.2 <span>[<a class="xref" href="#BTCorev4.2">BTCorev4.2</a>]</span>, and subsequent Bluetooth versions, a device may implement both roles simultaneously.<a class="pilcrow" href="#section-2-2">¶</a></p>
<p id="section-2-3">
        This document assumes a mesh network composed of Bluetooth LE links, where link-layer
   connections are established between neighboring IPv6-enabled
   devices (see <a class="xref" href="#three-b">Section 3.3.2, item 3.b,</a> and an example in <a class="xref" href="#Appendix">Appendix A</a>).  The IPv6 forwarding devices of the mesh have to implement both IPSP Node and Router roles, while simpler leaf-only nodes can implement only the Node role. In an IPv6 mesh over Bluetooth LE links, a node is a
   neighbor of another node, and vice versa, if a link-layer connection
   has been established between both by using the IPSP functionality for
   discovery and link-layer connection establishment for IPv6 packet
   transport.<a class="pilcrow" href="#section-2-3">¶</a></p>
</section>
</div>
<div id="spec">
<section id="section-3">
      <h2 id="name-specification-of-ipv6-mesh-">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-specification-of-ipv6-mesh-">Specification of IPv6 Mesh over Bluetooth LE Links</a>
      </h2>
<section id="section-3.1">
        <h3 id="name-protocol-stack">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-protocol-stack">Protocol Stack</a>
        </h3>
<p id="section-3.1-1">
        <a class="xref" href="#fig_BLEMeshStack">Figure 1</a> illustrates the protocol stack for IPv6 mesh over Bluetooth LE
   links.  The core Bluetooth LE protocol stack comprises two main sections: the Controller and the Host. The former includes the Physical Layer
   and the Link Layer, whereas the latter is composed of the Logical Link Control and Adaptation Protocol (L2CAP), the Attribute Protocol (ATT), 
   and the Generic Attribute Profile (GATT). The Host and the Controller sections are connected by means of the Host-Controller Interface (HCI). 
   A device that supports the IPSP Node role instantiates one  Internet Protocol Support Service (IPSS), which runs atop GATT. 
   The protocol stack shown in <a class="xref" href="#fig_BLEMeshStack">Figure 1</a> shows two main differences with the IPv6 over
 Bluetooth LE stack in <span>[<a class="xref" href="#RFC7668">RFC7668</a>]</span>:<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<span class="break"></span><dl class="olPercent" id="section-3.1-2">
   <dt>a)</dt>
<dd id="section-3.1-2.1">the adaptation layer below IPv6
   (labeled as "6Lo for IPv6 mesh over Bluetooth LE") is now adapted for
   IPv6 mesh over Bluetooth LE links, and<a class="pilcrow" href="#section-3.1-2.1">¶</a>
</dd>
          <dd class="break"></dd>
<dt>b)</dt>
<dd id="section-3.1-2.2">the protocol stack for IPv6 
   mesh over Bluetooth LE links includes IPv6 routing functionality.<a class="pilcrow" href="#section-3.1-2.2">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<span id="name-protocol-stack-for-ipv6-mes"></span><div id="fig_BLEMeshStack">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-3.1-3.1">
<pre>                       +------------------------------------+
                       |             Application            |
          +---------+  +------------------------------------+
          |  IPSS   |  |            UDP/TCP/other           |
          +---------+  +------------------------------------+
          |  GATT   |  |             IPv6  |routing|        |
          +---------+  +------------------------------------+
          |  ATT    |  | 6Lo for IPv6 mesh over Bluetooth LE|
          +---------+--+------------------------------------+
          |                 Bluetooth LE L2CAP              |
  HCI - - +-------------------------------------------------+ - -
          |               Bluetooth LE Link Layer           |
          +-------------------------------------------------+
          |             Bluetooth LE Physical Layer         |
          +-------------------------------------------------+
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-protocol-stack-for-ipv6-mes">Protocol Stack for IPv6 Mesh over Bluetooth LE Links</a>
          </figcaption></figure>
</div>
<p id="section-3.1-4">Bluetooth 4.2 defines a default MTU for Bluetooth LE of 251 bytes.  Excluding the L2CAP header of 4 bytes, a protocol data unit (PDU)
   size of 247 bytes is available for the layer above L2CAP. (Note: Earlier Bluetooth LE versions offered a maximum amount of 23 bytes for the layer atop L2CAP.)
   The L2CAP provides a fragmentation and reassembly solution for transmitting or receiving larger PDUs. At each link, the IPSP defines means for 
   negotiating a link-layer connection that provides an MTU of 1280 octets or higher for the IPv6 layer <span>[<a class="xref" href="#IPSP">IPSP</a>]</span>.
   As per the present specification, the MTU size for IPv6 mesh over BLE links is 1280 octets.<a class="pilcrow" href="#section-3.1-4">¶</a></p>
<p id="section-3.1-5">
            Similarly to <span>[<a class="xref" href="#RFC7668">RFC7668</a>]</span>, fragmentation functionality from 6LoWPAN standards is
   not used for IPv6 mesh over Bluetooth LE links. Bluetooth LE's fragmentation support provided 
   by L2CAP is used.<a class="pilcrow" href="#section-3.1-5">¶</a></p>
</section>
<div id="llroles">
<section id="section-3.2">
        <h3 id="name-subnet-model">
<a class="section-number selfRef" href="#section-3.2">3.2. </a><a class="section-name selfRef" href="#name-subnet-model">Subnet Model</a>
        </h3>
<p id="section-3.2-1">
            For IPv6 mesh over Bluetooth LE links, a multilink model has been
   chosen, as further illustrated in <a class="xref" href="#fig_SubnetModel">Figure 2</a>.  As IPv6 over Bluetooth
   LE is intended for constrained nodes and for Internet of Things use
   cases and environments, the complexity of implementing a separate
   subnet on each peripheral-central link and routing between the
   subnets appears to be excessive.  In this specification, the benefits
   of treating the collection of point-to-point links between a central
   and its connected peripherals as a single multilink subnet rather
   than a multiplicity of separate subnets are considered to outweigh
   the multilink model's drawbacks as described in <span>[<a class="xref" href="#RFC4903">RFC4903</a>]</span>. 
   With the multilink subnet model, the routers have to take on the responsibility of tracking the multicast state and forwarding 
   multicast in a loop-free manner.
   Note that the route-over functionality defined in <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span>
   is essential to enabling the multilink subnet model for IPv6 mesh over Bluetooth LE links.<a class="pilcrow" href="#section-3.2-1">¶</a></p>
<span id="name-example-of-an-ipv6-mesh-ove"></span><div id="fig_SubnetModel">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-3.2-2.1">
<pre>                                                       /
                                                      /
         6LR           6LN        6LN                /
            \             \          \              /
             \             \          \            /
    6LN ----- 6LR --------- 6LR ------ 6LBR ----- |  Internet
     &lt;--Link--&gt; &lt;---Link---&gt;/&lt;--Link-&gt;/           |
                           /         /             \
               6LN ---- 6LR ----- 6LR               \
                                                     \
                                                      \

  &lt;------------ Subnet -----------------&gt;&lt;---- IPv6 connection --&gt;
                                               to the Internet
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-example-of-an-ipv6-mesh-ove">Example of an IPv6 Mesh over a Bluetooth LE Network Connected to the Internet</a>
          </figcaption></figure>
</div>
<p id="section-3.2-3">
        One or more 6LBRs are connected to the Internet. 6LNs are connected to the network through a 6LR or a 6LBR. 
        Note that in some scenarios and/or for some time intervals, a 6LR may remain at the edge of the network 
        (e.g., the top left node in <a class="xref" href="#fig_SubnetModel">Figure 2</a>). This may happen when a 6LR has no neighboring 6LNs.
        A single global unicast prefix is used on the whole subnet.<a class="pilcrow" href="#section-3.2-3">¶</a></p>
<p id="section-3.2-4">
        IPv6 mesh over Bluetooth LE links <span class="bcp14">MUST</span> follow a route-over
   approach.  This document does not specify the routing protocol to be
   used in an IPv6 mesh over Bluetooth LE links.<a class="pilcrow" href="#section-3.2-4">¶</a></p>
</section>
</div>
<div id="deviceaddressing">
<section id="section-3.3">
        <h3 id="name-link-model">
<a class="section-number selfRef" href="#section-3.3">3.3. </a><a class="section-name selfRef" href="#name-link-model">Link Model</a>
        </h3>
<section id="section-3.3.1">
          <h4 id="name-stateless-address-autoconfi">
<a class="section-number selfRef" href="#section-3.3.1">3.3.1. </a><a class="section-name selfRef" href="#name-stateless-address-autoconfi">Stateless Address Autoconfiguration</a>
          </h4>
<p id="section-3.3.1-1">
        6LN, 6LR, and 6LBR IPv6 addresses in an IPv6 mesh over Bluetooth LE links are
   configured as per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7668#section-3.2.2">Section 3.2.2</a> of [<a class="xref" href="#RFC7668">RFC7668</a>]</span>.<a class="pilcrow" href="#section-3.3.1-1">¶</a></p>
<p id="section-3.3.1-2">
        Multihop Duplicate Address Detection (DAD) functionality as defined in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-8.2">Section 8.2</a> of [<a class="xref" href="#RFC6775">RFC6775</a>]</span> and updated by <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>, or some substitute mechanism (see <a class="xref" href="#btlemtu">Section 3.3.2</a>), <span class="bcp14">MAY</span> be supported.<a class="pilcrow" href="#section-3.3.1-2">¶</a></p>
</section>
<div id="btlemtu">
<section id="section-3.3.2">
          <h4 id="name-neighbor-discovery">
<a class="section-number selfRef" href="#section-3.3.2">3.3.2. </a><a class="section-name selfRef" href="#name-neighbor-discovery">Neighbor Discovery</a>
          </h4>
<p id="section-3.3.2-1">
"<a class="xref" href="#RFC6775">Neighbor Discovery Optimization for IPv6 over Low-Power Wireless Personal Area Networks (6LoWPANs)</a>" <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span>, subsequently updated 
         by "<a class="xref" href="#RFC8505">Registration Extensions for IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Neighbor Discovery</a>" <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>,
         describes the neighbor discovery functionality adapted for use in several 6LoWPAN topologies, including the mesh topology. 
         The route-over functionality of <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span> and <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span> <span class="bcp14">MUST</span> be supported.<a class="pilcrow" href="#section-3.3.2-1">¶</a></p>
<p id="section-3.3.2-2">
        The following aspects of the Neighbor Discovery optimizations for 6LoWPAN <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span> <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span> are applicable to Bluetooth LE 6LNs:<a class="pilcrow" href="#section-3.3.2-2">¶</a></p>
<ol class="normal type-1" id="section-3.3.2-3" start="1" type="1">
     <li id="section-3.3.2-3.1">
              <p id="section-3.3.2-3.1.1">
        A Bluetooth LE 6LN <span class="bcp14">MUST</span> register its non-link-local addresses with
            its routers by sending a Neighbor Solicitation (NS) message with the Extended Address Registration Option (EARO) and process the
            Neighbor Advertisement (NA) accordingly.  
            The EARO option includes a Registration Ownership Verifier (ROVR) field <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>.  In the case of Bluetooth LE, by default, the ROVR field
            is filled with the 48-bit device address used by the Bluetooth LE node converted into 64-bit Modified EUI-64 format <span>[<a class="xref" href="#RFC4291">RFC4291</a>]</span>. 
            Optionally, a cryptographic ID (see <span><a class="xref" href="#RFC8928">RFC 8928</a> [<a class="xref" href="#RFC8928">RFC8928</a>]</span>) <span class="bcp14">MAY</span> be placed in the ROVR field. If a cryptographic ID is used,
            address registration and multihop DAD formats and procedures defined in <span>[<a class="xref" href="#RFC8928">RFC8928</a>]</span> <span class="bcp14">MUST</span> be used unless 
            an alternative mechanism offering equivalent protection is used.<a class="pilcrow" href="#section-3.3.2-3.1.1">¶</a></p>
<p id="section-3.3.2-3.1.2"> 
         As per <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>, a 6LN link-local address does not need to be unique in the multilink subnet. A link-local address only needs to be unique
         from the perspective of the two nodes that use it to communicate (e.g., the 6LN and the 6LR in an NS/NA exchange). Therefore, the exchange 
         of Extended Duplicate Address Request (EDAR) and Extended Duplicate Address Confirmation (EDAC) messages between the 6LR and a 6LBR, which ensures that an address is unique across the domain covered by the 6LBR, does not
         need to take place for link-local addresses.<a class="pilcrow" href="#section-3.3.2-3.1.2">¶</a></p>
<p id="section-3.3.2-3.1.3">
     If the 6LN registers multiple addresses that are not based on the
   Bluetooth device address using the same compression context, the
   header compression efficiency may decrease, since only the last registered address can be fully elided (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc7668#section-3.2.4">Section 3.2.4</a> of [<a class="xref" href="#RFC7668">RFC7668</a>]</span>).<a class="pilcrow" href="#section-3.3.2-3.1.3">¶</a></p>
</li>
            <li id="section-3.3.2-3.2">
              <p id="section-3.3.2-3.2.1">
     For sending Router Solicitations and processing Router Advertisements, the hosts that participate in an IPv6 mesh over BLE <span class="bcp14">MUST</span>, respectively, follow Sections <a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-5.3">5.3</a> and <a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-5.4">5.4</a>
         of <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span>, and <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8505#section-5.6">Section 5.6</a> of [<a class="xref" href="#RFC8505">RFC8505</a>]</span>.<a class="pilcrow" href="#section-3.3.2-3.2.1">¶</a></p>
</li>
            <li id="section-3.3.2-3.3">
              <p id="section-3.3.2-3.3.1">
     The router behavior for 6LRs and 6LBRs is described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-6">Section 6</a> of [<a class="xref" href="#RFC6775">RFC6775</a>]</span> and updated by <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>. However, as per this specification:<a class="pilcrow" href="#section-3.3.2-3.3.1">¶</a></p>
<ol class="normal type-a" id="section-3.3.2-3.3.2" start="1" type="a">
         <li id="section-3.3.2-3.3.2.1">Routers <span class="bcp14">SHALL NOT</span> use multicast NSs to discover other routers' link-layer addresses.<a class="pilcrow" href="#section-3.3.2-3.3.2.1">¶</a>
</li>
                <li id="section-3.3.2-3.3.2.2">
<div id="three-b">As per <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-6.2">Section 6.2</a> of [<a class="xref" href="#RFC6775">RFC6775</a>]</span>, in a dynamic configuration scenario, a 6LR comes up as a non-router and waits to receive a Router Advertisement 
           for configuring its own interface address first before setting its interfaces to advertising interfaces and turning into a router. 
           In order to support such an operation in an IPv6 mesh over Bluetooth LE links, a 6LR first uses the IPSP Node role only. Once the 6LR has established
           a connection with another node currently running as a router and receives a Router Advertisement from that router, the 6LR configures its own 
           interface address, turns into a router, and runs as an IPSP Router. In contrast with a 6LR, a 6LBR uses the IPSP Router role since the 6LBR
           is initialized; that is, the 6LBR uses both the IPSP Node and IPSP Router roles at all times.  See an example in <a class="xref" href="#Appendix_B">Appendix B</a>.<a class="pilcrow" href="#three-b">¶</a>
</div>
              </li>
</ol>
</li>
            <li id="section-3.3.2-3.4">
              <p id="section-3.3.2-3.4.1">
     Border router behavior is described in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-7">Section 7</a> of [<a class="xref" href="#RFC6775">RFC6775</a>]</span> and updated by <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>.<a class="pilcrow" href="#section-3.3.2-3.4.1">¶</a></p>
<p id="section-3.3.2-3.4.2">
       <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span> defines substitutable mechanisms for distributing prefixes and context information (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-8.1">Section 8.1</a> of [<a class="xref" href="#RFC6775">RFC6775</a>]</span>), as well as for
       duplicate address detection across a route-over 6LoWPAN (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-8.2">Section 8.2</a> of [<a class="xref" href="#RFC6775">RFC6775</a>]</span>). <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span> updates those mechanisms and the related message formats.
       Implementations of this specification <span class="bcp14">MUST</span> either support the features described in Sections <a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-8.1">8.1</a> and <a class="relref" href="https://www.rfc-editor.org/rfc/rfc6775#section-8.2">8.2</a> of <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span>, as updated by <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>
       or some alternative ("substitute") mechanism.<a class="pilcrow" href="#section-3.3.2-3.4.2">¶</a></p>
</li>
          </ol>
</section>
</div>
<div id="hc">
<section id="section-3.3.3">
          <h4 id="name-header-compression">
<a class="section-number selfRef" href="#section-3.3.3">3.3.3. </a><a class="section-name selfRef" href="#name-header-compression">Header Compression</a>
          </h4>
<p id="section-3.3.3-1">
        Header compression as defined in RFC 6282 <span>[<a class="xref" href="#RFC6282">RFC6282</a>]</span>, which specifies the compression format for IPv6 datagrams on top of IEEE 802.15.4, is <span class="bcp14">REQUIRED</span> as the basis for IPv6 header compression on top of Bluetooth LE. All headers <span class="bcp14">MUST</span> be compressed according to RFC 6282 <span>[<a class="xref" href="#RFC6282">RFC6282</a>]</span> encoding formats.<a class="pilcrow" href="#section-3.3.3-1">¶</a></p>
<p id="section-3.3.3-2">
        To enable efficient header compression, when the 6LBR sends a Router Advertisement, it <span class="bcp14">MAY</span> include a 6LoWPAN Context Option (6CO) <span>[<a class="xref" href="#RFC6775">RFC6775</a>]</span> 
        matching each address prefix advertised via a Prefix Information Option (PIO) <span>[<a class="xref" href="#RFC4861">RFC4861</a>]</span> for use in stateless address autoconfiguration.
        Note that 6CO is not needed for context-based compression when the context is pre-provisioned or provided by out-of-band means
        as, in these cases, the in-band indication (6CO) becomes superfluous.<a class="pilcrow" href="#section-3.3.3-2">¶</a></p>
<p id="section-3.3.3-3">
        The specific optimizations of <span>[<a class="xref" href="#RFC7668">RFC7668</a>]</span> for header compression, which
   exploited the star topology and Address Registration Option (ARO) (note that the latter has been updated by EARO as per <span>[<a class="xref" href="#RFC8505">RFC8505</a>]</span>), cannot be generalized in an IPv6
   mesh over Bluetooth LE links.  Still, a subset of those optimizations
   can be applied in some cases in such a network.  These cases comprise link-local interactions, non-link-local packet
   transmissions originated by a 6LN (i.e., the first hop from a 6LN), and non-link-local
   packets intended for a 6LN that are originated or forwarded by a neighbor
   of that 6LN (i.e., the last hop toward a 6LN).  For all other packet transmissions, context-based compression <span class="bcp14">MAY</span> be used.<a class="pilcrow" href="#section-3.3.3-3">¶</a></p>
<p id="section-3.3.3-4">
        When a device transmits a packet to a neighbor, the sender <span class="bcp14">MUST</span> fully elide the source Interface Identifier (IID) if the source IPv6 address is the link-local address based on the sender's Bluetooth device address (SAC=0, SAM=11). The sender also <span class="bcp14">MUST</span> fully elide the destination IPv6 address if it is the link-local address based on the neighbor's Bluetooth device address (DAC=0, DAM=11).<a class="pilcrow" href="#section-3.3.3-4">¶</a></p>
<p id="section-3.3.3-5">
        When a 6LN transmits a packet with a non-link-local source address
   that the 6LN has registered with EARO in the next-hop router for the
   indicated prefix, the source address <span class="bcp14">MUST</span> be fully elided if it is
   the latest address that the 6LN has registered for the indicated
   prefix (SAC=1, SAM=11).
   If the source non-link-local address is not
   the latest registered by the 6LN and the first 48 bits of the IID match
   the latest address are registered by the 6LN, then the last 16 bits of the IID
   <span class="bcp14">SHALL</span> be carried inline (SAC=1, SAM=10). Otherwise, if the first 48 bits of the IID do not match,
   then the 64 bits of the IID <span class="bcp14">SHALL</span> be fully carried inline (SAC=1, SAM=01).<a class="pilcrow" href="#section-3.3.3-5">¶</a></p>
<p id="section-3.3.3-6">
       When a router transmits a packet to a neighboring 6LN with a non-link-local destination address, the router <span class="bcp14">MUST</span> fully elide the
   destination IPv6 address if the destination address is the latest
   registered by the 6LN with EARO for the indicated context (DAC=1,
   DAM=11).  If the destination address is a non-link-local address and
   not the latest registered and if the first 48 bits of the IID match those of the latest registered address,
   then the last 16 bits of the IID <span class="bcp14">SHALL</span> be carried inline (DAC=1, DAM=10). Otherwise, if the first 48 bits of the IID do not match,
   then the 64 bits of the IID <span class="bcp14">SHALL</span> be fully carried in-line (DAC=1, DAM=01).<a class="pilcrow" href="#section-3.3.3-6">¶</a></p>
</section>
</div>
<section id="section-3.3.4">
          <h4 id="name-unicast-and-multicast-mappi">
<a class="section-number selfRef" href="#section-3.3.4">3.3.4. </a><a class="section-name selfRef" href="#name-unicast-and-multicast-mappi">Unicast and Multicast Mapping</a>
          </h4>
<p id="section-3.3.4-1">
     The Bluetooth LE Link Layer does not support multicast.  Hence,
   traffic is always unicast between two Bluetooth LE neighboring nodes.  
   If a node needs to send a multicast packet to several neighbors, it has 
   to replicate the packet and unicast it on each link.  However, this may 
   not be energy efficient, and particular care must be taken if the node 
   is battery powered.  A router (i.e., a 6LR or a 6LBR) <span class="bcp14">MUST</span> keep track
   of neighboring multicast listeners, and it <span class="bcp14">MUST NOT</span> forward multicast 
   packets to neighbors that have not registered as listeners for multicast groups to which the packets are destined.<a class="pilcrow" href="#section-3.3.4-1">¶</a></p>
</section>
</section>
</div>
</section>
</div>
<div id="IANA">
<section id="section-4">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-4-1">
      This document has no IANA actions.<a class="pilcrow" href="#section-4-1">¶</a></p>
</section>
</div>
<div id="Security">
<section id="section-5">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-5-1">
      The security considerations in <span>[<a class="xref" href="#RFC7668">RFC7668</a>]</span> apply.<a class="pilcrow" href="#section-5-1">¶</a></p>
<p id="section-5-2">
     IPv6 mesh over BLE requires a routing protocol to
   find end-to-end paths.  Unfortunately, the routing protocol may
   generate additional opportunities for threats and attacks to the
   network.<a class="pilcrow" href="#section-5-2">¶</a></p>
<p id="section-5-3">
     <span><a class="xref" href="#RFC7416">RFC 7416</a> [<a class="xref" href="#RFC7416">RFC7416</a>]</span> provides a systematic overview of threats and
   attacks on the IPv6 Routing Protocol for Low-Power and Lossy Networks
   (RPL), as well as countermeasures. In that document, described threats and attacks comprise threats due to failures to authenticate, threats due to failure to keep routing information, threats and attacks on integrity, and threats and attacks on availability. Reported countermeasures comprise
confidentiality attack, integrity attack, and availability attack countermeasures.<a class="pilcrow" href="#section-5-3">¶</a></p>
<p id="section-5-4">
     While this specification does not
   state the routing protocol to be used in IPv6 mesh over Bluetooth LE
   links, the guidance of <span>[<a class="xref" href="#RFC7416">RFC7416</a>]</span> is useful when RPL is used in
   such scenarios.  Furthermore, such guidance may partly apply for
   other routing protocols as well.<a class="pilcrow" href="#section-5-4">¶</a></p>
<p id="section-5-5">
     The ROVR can be derived from the Bluetooth device address.  However, such a ROVR can be
   spoofed; therefore, any node connected to the subnet and aware of
   a registered-address-to-ROVR mapping could perform address theft and
   impersonation attacks. Use of Address Protected Neighbor Discovery <span>[<a class="xref" href="#RFC8928">RFC8928</a>]</span> provides protection
   against such attacks.<a class="pilcrow" href="#section-5-5">¶</a></p>
</section>
</div>
<section id="section-6">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-6.1">6.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="BTCorev4.2">[BTCorev4.2]</dt>
        <dd>
<span class="refAuthor">Bluetooth</span>, <span class="refTitle">"Core Specification 4.2"</span>, <time class="refDate" datetime="2014-12-02">2 December 2014</time>, <span>&lt;<a href="https://www.bluetooth.com/specifications/specs/core-specification-4-2/">https://www.bluetooth.com/specifications/specs/core-specification-4-2/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IPSP">[IPSP]</dt>
        <dd>
<span class="refAuthor">Bluetooth</span>, <span class="refTitle">"Internet Protocol Support Profile 1.0"</span>, <time class="refDate" datetime="2014-12-16">16 December 2014</time>, <span>&lt;<a href="https://www.bluetooth.com/specifications/specs/internet-protocol-support-profile-1-0/">https://www.bluetooth.com/specifications/specs/internet-protocol-support-profile-1-0/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4291">[RFC4291]</dt>
        <dd>
<span class="refAuthor">Hinden, R.</span> and <span class="refAuthor">S. Deering</span>, <span class="refTitle">"IP Version 6 Addressing Architecture"</span>, <span class="seriesInfo">RFC 4291</span>, <span class="seriesInfo">DOI 10.17487/RFC4291</span>, <time class="refDate" datetime="2006-02">February 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4291">https://www.rfc-editor.org/info/rfc4291</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4861">[RFC4861]</dt>
        <dd>
<span class="refAuthor">Narten, T.</span>, <span class="refAuthor">Nordmark, E.</span>, <span class="refAuthor">Simpson, W.</span>, and <span class="refAuthor">H. Soliman</span>, <span class="refTitle">"Neighbor Discovery for IP version 6 (IPv6)"</span>, <span class="seriesInfo">RFC 4861</span>, <span class="seriesInfo">DOI 10.17487/RFC4861</span>, <time class="refDate" datetime="2007-09">September 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4861">https://www.rfc-editor.org/info/rfc4861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6282">[RFC6282]</dt>
        <dd>
<span class="refAuthor">Hui, J., Ed.</span> and <span class="refAuthor">P. Thubert</span>, <span class="refTitle">"Compression Format for IPv6 Datagrams over IEEE 802.15.4-Based Networks"</span>, <span class="seriesInfo">RFC 6282</span>, <span class="seriesInfo">DOI 10.17487/RFC6282</span>, <time class="refDate" datetime="2011-09">September 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6282">https://www.rfc-editor.org/info/rfc6282</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6775">[RFC6775]</dt>
        <dd>
<span class="refAuthor">Shelby, Z., Ed.</span>, <span class="refAuthor">Chakrabarti, S.</span>, <span class="refAuthor">Nordmark, E.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"Neighbor Discovery Optimization for IPv6 over Low-Power Wireless Personal Area Networks (6LoWPANs)"</span>, <span class="seriesInfo">RFC 6775</span>, <span class="seriesInfo">DOI 10.17487/RFC6775</span>, <time class="refDate" datetime="2012-11">November 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6775">https://www.rfc-editor.org/info/rfc6775</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7668">[RFC7668]</dt>
        <dd>
<span class="refAuthor">Nieminen, J.</span>, <span class="refAuthor">Savolainen, T.</span>, <span class="refAuthor">Isomaki, M.</span>, <span class="refAuthor">Patil, B.</span>, <span class="refAuthor">Shelby, Z.</span>, and <span class="refAuthor">C. Gomez</span>, <span class="refTitle">"IPv6 over BLUETOOTH(R) Low Energy"</span>, <span class="seriesInfo">RFC 7668</span>, <span class="seriesInfo">DOI 10.17487/RFC7668</span>, <time class="refDate" datetime="2015-10">October 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7668">https://www.rfc-editor.org/info/rfc7668</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8505">[RFC8505]</dt>
        <dd>
<span class="refAuthor">Thubert, P., Ed.</span>, <span class="refAuthor">Nordmark, E.</span>, <span class="refAuthor">Chakrabarti, S.</span>, and <span class="refAuthor">C. Perkins</span>, <span class="refTitle">"Registration Extensions for IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Neighbor Discovery"</span>, <span class="seriesInfo">RFC 8505</span>, <span class="seriesInfo">DOI 10.17487/RFC8505</span>, <time class="refDate" datetime="2018-11">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8505">https://www.rfc-editor.org/info/rfc8505</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8928">[RFC8928]</dt>
      <dd>
<span class="refAuthor">Thubert, P., Ed.</span>, <span class="refAuthor">Sarikaya, B.</span>, <span class="refAuthor">Sethi, M.</span>, and <span class="refAuthor">R. Struik</span>, <span class="refTitle">"Address-Protected Neighbor Discovery for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 8928</span>, <span class="seriesInfo">DOI 10.17487/RFC8928</span>, <time class="refDate" datetime="2020-11">November 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8928">https://www.rfc-editor.org/info/rfc8928</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-6.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-6.2">6.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="BTCorev4.1">[BTCorev4.1]</dt>
        <dd>
<span class="refAuthor">Bluetooth</span>, <span class="refTitle">"Core Specification 4.1"</span>, <time class="refDate" datetime="2013-12-03">3 December 2013</time>, <span>&lt;<a href="https://www.bluetooth.com/specifications/specs/core-specification-4-1/">https://www.bluetooth.com/specifications/specs/core-specification-4-1/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4903">[RFC4903]</dt>
        <dd>
<span class="refAuthor">Thaler, D.</span>, <span class="refTitle">"Multi-Link Subnet Issues"</span>, <span class="seriesInfo">RFC 4903</span>, <span class="seriesInfo">DOI 10.17487/RFC4903</span>, <time class="refDate" datetime="2007-06">June 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4903">https://www.rfc-editor.org/info/rfc4903</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7416">[RFC7416]</dt>
      <dd>
<span class="refAuthor">Tsao, T.</span>, <span class="refAuthor">Alexander, R.</span>, <span class="refAuthor">Dohler, M.</span>, <span class="refAuthor">Daza, V.</span>, <span class="refAuthor">Lozano, A.</span>, and <span class="refAuthor">M. Richardson, Ed.</span>, <span class="refTitle">"A Security Threat Analysis for the Routing Protocol for Low-Power and Lossy Networks (RPLs)"</span>, <span class="seriesInfo">RFC 7416</span>, <span class="seriesInfo">DOI 10.17487/RFC7416</span>, <time class="refDate" datetime="2015-01">January 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7416">https://www.rfc-editor.org/info/rfc7416</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Appendix">
<section id="appendix-A">
      <h2 id="name-bluetooth-le-connection-est">
<a class="section-number selfRef" href="#appendix-A">Appendix A. </a><a class="section-name selfRef" href="#name-bluetooth-le-connection-est">Bluetooth LE Connection Establishment Example</a>
      </h2>
<p id="appendix-A-1">
      This appendix provides an example of Bluetooth LE connection establishment and use of IPSP roles in an IPv6 mesh over BLE that uses dynamic configuration. The example follows text in <a class="xref" href="#three-b">Section 3.3.2, item 3.b</a>.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
<p id="appendix-A-2">
      The example assumes a network with one 6LBR, two 6LRs, and three 6LNs, as shown in <a class="xref" href="#fig_Appendix">Figure 3</a>. Connectivity between the 6LNs and the 6LBR is only possible via the 6LRs.<a class="pilcrow" href="#appendix-A-2">¶</a></p>
<p id="appendix-A-3">
      The following text describes the different steps in the example as time evolves. Note that other sequences of events that may lead to the same final scenario are also possible.<a class="pilcrow" href="#appendix-A-3">¶</a></p>
<p id="appendix-A-4">
      At the beginning, the 6LBR starts running as an IPSP router, whereas the rest of devices are not yet initialized (<a class="xref" href="#step1">Step 1</a>). Next, the 6LRs start running as IPSP nodes, i.e., they use Bluetooth LE advertisement packets to announce their presence and support of IPv6 capabilities (<a class="xref" href="#step2">Step 2</a>). 
      The 6LBR (already running as an IPSP router) discovers the presence of the 6LRs and establishes one Bluetooth LE connection with each 6LR (<a class="xref" href="#step3">Step 3</a>). After establishment of those link-layer connections (and after reception of Router Advertisements from the 6LBR),  
      the 6LRs start operating as routers and also initiate the IPSP Router role (<a class="xref" href="#step4">Step 4</a>). (Note: whether the IPSP Node role is kept running simultaneously is an implementation decision). Then, 6LNs start running the IPSP Node role (<a class="xref" href="#step5">Step 5</a>). 
      Finally, the 6LRs discover the presence of the 6LNs and establish connections with the latter (<a class="xref" href="#step6">Step 6</a>).<a class="pilcrow" href="#appendix-A-4">¶</a></p>
<span id="name-example-of-connection-estab"></span><div id="fig_Appendix">
<figure id="figure-3">
        <div id="step1">
<div class="alignLeft art-text artwork" id="appendix-A-5.1">
<pre>Step 1
******
                                     6LBR
                                (IPSP: Router)


                           6LR                 6LR
                   (not initialized)     (not initialized)



             6LN                 6LN                  6LN
    (not initialized)      (not initialized)     (not initialized)
</pre>
</div>
</div>
<div id="step2">
<div class="alignLeft art-text artwork" id="appendix-A-5.2">
<pre>Step 2
******
                                     6LBR
                                (IPSP: Router)


                           6LR                 6LR
                      (IPSP: Node)         (IPSP: Node)



             6LN                 6LN                  6LN
    (not initialized)      (not initialized)     (not initialized)

</pre>
</div>
</div>
<div id="step3">
<div class="alignLeft art-text artwork" id="appendix-A-5.3">
<pre>Step 3
******

                                     6LBR
                                (IPSP: Router)
  Bluetooth LE connection --&gt;   /            \
                               /              \
                           6LR                 6LR
                      (IPSP: Node)         (IPSP: Node)



             6LN                 6LN                  6LN
    (not initialized)      (not initialized)     (not initialized)

</pre>
</div>
</div>
<div id="step4">
<div class="alignLeft art-text artwork" id="appendix-A-5.4">
<pre>Step 4
******

                                     6LBR
                                (IPSP: Router)
                                /            \
                               /              \
                           6LR                 6LR
                      (IPSP: Router)      (IPSP: Router)



             6LN                 6LN                  6LN
    (not initialized)      (not initialized)     (not initialized)
</pre>
</div>
</div>
<div id="step5">
<div class="alignLeft art-text artwork" id="appendix-A-5.5">
<pre>Step 5
******

                                     6LBR
                                (IPSP: Router)
                                /            \
                               /              \
                           6LR                 6LR
                      (IPSP: Router)      (IPSP: Router)



             6LN                   6LN                6LN
         (IPSP: Node)         (IPSP: Node)        (IPSP: Node)
</pre>
</div>
</div>
<div id="step6">
<div class="alignLeft art-text artwork" id="appendix-A-5.6">
<pre>Step 6
******

                                     6LBR
                                (IPSP: Router)
                                /            \
                               /              \
                           6LR                 6LR
                     (IPSP: Router)       (IPSP: Router)
                      /           \       /            \
                     /             \     /              \
                    /               \   /                \
                 6LN                 6LN                  6LN
            (IPSP: Node)         (IPSP: Node)         (IPSP: Node)
</pre>
</div>
</div>
<figcaption><a class="selfRef" href="#figure-3">Figure 3</a>:
<a class="selfRef" href="#name-example-of-connection-estab">Example of Connection Establishment and Use of IPSP Roles in an IPv6 Mesh over Bluetooth LE Links</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="Appendix_B">
<section id="appendix-B">
      <h2 id="name-node-joining-procedure">
<a class="section-number selfRef" href="#appendix-B">Appendix B. </a><a class="section-name selfRef" href="#name-node-joining-procedure">Node-Joining Procedure</a>
      </h2>
<p id="appendix-B-1">
      This appendix provides a diagram that illustrates the node-joining procedure. First of all, the joining node advertises its presence in order to allow establishment of Bluetooth LE connections with neighbors that already belong to a network. The neighbors typically run as a 6LR or as a 6LBR. After Bluetooth LE connection establishment, the joining node starts acting as a 6LN.<a class="pilcrow" href="#appendix-B-1">¶</a></p>
<p id="appendix-B-2"><a class="xref" href="#fig_AppendixB">Figure 4</a> shows the sequence of messages that are exchanged by the 6LN and a neighboring 6LR that already belongs to the network after the establishment of a Bluetooth LE connection between both devices. Initially, the 6LN sends a Router Solicitation (RS) message (1). Then, the 6LR replies 
      with an RA, which includes the PIO (2). After discovering the non-link-local prefix in use in the network, the 6LN creates its non-link-local address and registers that address with EARO (3) in the 6LR, and then multihop DAD is performed (4).
      The next step is the transmission of the NA message sent by the 6LR in response to the NS previously sent by the 6LN (5). 
      If the non-link-local address of the 6LN has been successfully validated, the 6LN can operate as a member of the network it has joined.<a class="pilcrow" href="#appendix-B-2">¶</a></p>
<span id="name-message-exchange-diagram-fo"></span><div id="fig_AppendixB">
<figure id="figure-4">
        <div class="alignLeft art-text artwork" id="appendix-B-3.1">
<pre>            (1)                 6LN ----(RS)-------&gt; 6LR
            (2)                 6LN &lt;---(RA-PIO)---- 6LR
            (3)                 6LN ----(NS-EARO)--&gt; 6LR
            (4)                 [Multihop DAD procedure]
            (5)                 6LN &lt;---(NA)-------- 6LR
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-4">Figure 4</a>:
<a class="selfRef" href="#name-message-exchange-diagram-fo">Message Exchange Diagram for a Joining Node</a>
        </figcaption></figure>
</div>
</section>
</div>
<div id="Acknowledgements">
<section id="appendix-C">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-C-1">
      The Bluetooth, Bluetooth Smart, and Bluetooth Smart Ready marks are registered trademarks owned by Bluetooth SIG, Inc.<a class="pilcrow" href="#appendix-C-1">¶</a></p>
<p id="appendix-C-2">
      The authors of this document are grateful to all authors of <span>[<a class="xref" href="#RFC7668">RFC7668</a>]</span>, since this document borrows many concepts (albeit with necessary extensions) from <span>[<a class="xref" href="#RFC7668">RFC7668</a>]</span>.<a class="pilcrow" href="#appendix-C-2">¶</a></p>
<p id="appendix-C-3">
      The authors also thank  <span class="contact-name">Alain Michaud</span>,  <span class="contact-name">Mark Powell</span>,  <span class="contact-name">Martin Turon</span>,  <span class="contact-name">Bilhanan Silverajan</span>,  <span class="contact-name">Rahul Jadhav</span>,  <span class="contact-name">Pascal Thubert</span>,  <span class="contact-name">Acee Lindem</span>,  <span class="contact-name">Catherine Meadows</span>, 
      and  <span class="contact-name">Dominique Barthel</span> for their reviews and comments, which helped improve the document.<a class="pilcrow" href="#appendix-C-3">¶</a></p>
<p id="appendix-C-4">
       <span class="contact-name">Carles Gomez</span> has been supported in part by the Spanish Government Ministerio de Economia y Competitividad through projects TEC2012-32531, 
      TEC2016-79988-P, PID2019-106808RA-I00, and FEDER and Secretaria d'Universitats i Recerca del Departament d'Empresa i Coneixement de la Generalitat
      de Catalunya 2017 through grant SGR 376.<a class="pilcrow" href="#appendix-C-4">¶</a></p>
</section>
</div>
<div id="Contrib">
<section id="appendix-D">
      <h2 id="name-contributors">
<a class="section-name selfRef" href="#name-contributors">Contributors</a>
      </h2>
<p id="appendix-D-1">
      <span class="contact-name">Carlo Alberto Boano</span> (Graz University of Technology) contributed to the design and validation of this document.<a class="pilcrow" href="#appendix-D-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Carles Gomez</span></div>
<div class="left" dir="auto"><span class="org">Universitat Politecnica de Catalunya</span></div>
<div class="left" dir="auto"><span class="street-address">C/Esteve Terradas, 7</span></div>
<div class="left" dir="auto">
<span class="postal-code">08860</span> <span class="locality">Castelldefels</span> </div>
<div class="left" dir="auto"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:carlesgo@entel.upc.edu">carlesgo@entel.upc.edu</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Seyed Mahdi Darroudi</span></div>
<div class="left" dir="auto"><span class="org">Universitat Politecnica de Catalunya</span></div>
<div class="left" dir="auto"><span class="street-address">C/Esteve Terradas, 7</span></div>
<div class="left" dir="auto">
<span class="postal-code">08860</span> <span class="locality">Castelldefels</span> </div>
<div class="left" dir="auto"><span class="country-name">Spain</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:sm.darroudi@entel.upc.edu">sm.darroudi@entel.upc.edu</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Teemu Savolainen</span></div>
<div class="left" dir="auto"><span class="org">Unaffiliated</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:tsavo.stds@gmail.com">tsavo.stds@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Michael Spoerk</span></div>
<div class="left" dir="auto"><span class="org">Graz University of Technology</span></div>
<div class="left" dir="auto"><span class="street-address">Inffeldgasse 16/I</span></div>
<div class="left" dir="auto">
<span class="postal-code">8010</span> <span class="locality">Graz</span>
</div>
<div class="left" dir="auto"><span class="country-name">Austria</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:michael.spoerk@tugraz.at">michael.spoerk@tugraz.at</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>