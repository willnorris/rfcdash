<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 9343: IPv6 Application of the Alternate-Marking Method</title>
<meta content="Giuseppe Fioccola" name="author"/>
<meta content="Tianran Zhou" name="author"/>
<meta content="Mauro Cociglio" name="author"/>
<meta content="Fengwei Qin" name="author"/>
<meta content="Ran Pang" name="author"/>
<meta content="
       This document describes how the Alternate-Marking Method can be used
    as a passive performance measurement tool in an IPv6 domain. It defines an
    Extension Header Option to encode Alternate-Marking information in
    both the Hop-by-Hop Options Header and Destination Options Header. 
    " name="description"/>
<meta content="xml2rfc 3.15.3" name="generator"/>
<meta content="Extension" name="keyword"/>
<meta content="Header" name="keyword"/>
<meta content="Option" name="keyword"/>
<meta content="Destination" name="keyword"/>
<meta content="Hop-By-Hop" name="keyword"/>
<meta content="Performance" name="keyword"/>
<meta content="Measurement" name="keyword"/>
<meta content="Monitoring" name="keyword"/>
<meta content="Passive" name="keyword"/>
<meta content="Hybrid" name="keyword"/>
<meta content="Loss" name="keyword"/>
<meta content="Delay" name="keyword"/>
<meta content="Delay Variation" name="keyword"/>
<meta content="Multipoint" name="keyword"/>
<meta content="Cluster" name="keyword"/>
<meta content="Closed-Loop" name="keyword"/>
<meta content="9343" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.15.3
    Python 3.9.14
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.1
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.0
    MarkupSafe 2.1.1
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.0
    setuptools 44.1.1
    six 1.16.0
    wcwidth 0.2.5
    weasyprint 56.1
-->
<link href="rfc9343.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc9343" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-6man-ipv6-alt-mark-17" rel="prev"/>
  </head>
<body class="xml2rfc">
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 9343</td>
<td class="center">IPv6 Application of the Alternate-Markin</td>
<td class="right">December 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Fioccola, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc9343">9343</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Standards Track</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2022-12">December 2022</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">G. Fioccola</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">T. Zhou</div>
<div class="org">Huawei</div>
</div>
<div class="author">
      <div class="author-name">M. Cociglio</div>
<div class="org">Telecom Italia</div>
</div>
<div class="author">
      <div class="author-name">F. Qin</div>
<div class="org">China Mobile</div>
</div>
<div class="author">
      <div class="author-name">R. Pang</div>
<div class="org">China Unicom</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 9343</h1>
<h1 id="title">IPv6 Application of the Alternate-Marking Method</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document describes how the Alternate-Marking Method can be used
    as a passive performance measurement tool in an IPv6 domain. It defines an
    Extension Header Option to encode Alternate-Marking information in
    both the Hop-by-Hop Options Header and Destination Options Header.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This is an Internet Standards Track document.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc9343">https://www.rfc-editor.org/info/rfc9343</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="auto internal xref" href="#section-1">1</a>.  <a class="internal xref" href="#name-introduction">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p class="keepWithNext" id="section-toc.1-1.1.2.1.1"><a class="auto internal xref" href="#section-1.1">1.1</a>.  <a class="internal xref" href="#name-terminology">Terminology</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p class="keepWithNext" id="section-toc.1-1.1.2.2.1"><a class="auto internal xref" href="#section-1.2">1.2</a>.  <a class="internal xref" href="#name-requirements-language">Requirements Language</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="auto internal xref" href="#section-2">2</a>.  <a class="internal xref" href="#name-alternate-marking-applicati">Alternate-Marking Application to IPv6</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a class="auto internal xref" href="#section-2.1">2.1</a>.  <a class="internal xref" href="#name-controlled-domain">Controlled Domain</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a class="auto internal xref" href="#section-2.1.1">2.1.1</a>.  <a class="internal xref" href="#name-alternate-marking-measureme">Alternate-Marking Measurement Domain</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="auto internal xref" href="#section-3">3</a>.  <a class="internal xref" href="#name-definition-of-the-altmark-o">Definition of the AltMark Option</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a class="auto internal xref" href="#section-3.1">3.1</a>.  <a class="internal xref" href="#name-data-fields-format">Data Fields Format</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="auto internal xref" href="#section-4">4</a>.  <a class="internal xref" href="#name-use-of-the-altmark-option">Use of the AltMark Option</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="auto internal xref" href="#section-5">5</a>.  <a class="internal xref" href="#name-alternate-marking-method-op">Alternate-Marking Method Operation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="auto internal xref" href="#section-5.1">5.1</a>.  <a class="internal xref" href="#name-packet-loss-measurement">Packet Loss Measurement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="auto internal xref" href="#section-5.2">5.2</a>.  <a class="internal xref" href="#name-packet-delay-measurement">Packet Delay Measurement</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a class="auto internal xref" href="#section-5.3">5.3</a>.  <a class="internal xref" href="#name-flow-monitoring-identificat">Flow Monitoring Identification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a class="auto internal xref" href="#section-5.4">5.4</a>.  <a class="internal xref" href="#name-multipoint-and-clustered-al">Multipoint and Clustered Alternate Marking</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
                <p id="section-toc.1-1.5.2.5.1"><a class="auto internal xref" href="#section-5.5">5.5</a>.  <a class="internal xref" href="#name-data-collection-and-calcula">Data Collection and Calculation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="auto internal xref" href="#section-6">6</a>.  <a class="internal xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="auto internal xref" href="#section-7">7</a>.  <a class="internal xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a class="auto internal xref" href="#section-8">8</a>.  <a class="internal xref" href="#name-references">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a class="auto internal xref" href="#section-8.1">8.1</a>.  <a class="internal xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a class="auto internal xref" href="#section-8.2">8.2</a>.  <a class="internal xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a class="auto internal xref" href="#appendix-A"></a><a class="internal xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a class="auto internal xref" href="#appendix-B"></a><a class="internal xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1"><span>[<a class="cite xref" href="#RFC9341">RFC9341</a>]</span> and <span>[<a class="cite xref" href="#RFC9342">RFC9342</a>]</span>
 describe a passive performance measurement method, which can be used to measure packet loss, 
 latency, and jitter on live traffic. Since this method is based on marking consecutive 
 batches of packets, the method is often referred to as the Alternate-Marking Method.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">This document defines how the Alternate-Marking Method can be used to measure 
 performance metrics in IPv6. The rationale is to apply the Alternate-Marking methodology to IPv6 and
 therefore allow detailed packet loss, delay, and delay variation measurements both hop by hop and end to end
 to exactly locate the issues in an IPv6 network.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">Alternate Marking is an on-path telemetry technique and consists of synchronizing the measurements 
 in different points of a network by switching the value of a marking bit and therefore dividing the packet flow
 into batches. Each batch represents a measurable entity recognizable by all network nodes along the path. 
 By counting the number of packets in each batch and comparing the values measured by different nodes, 
 it is possible to precisely measure the packet loss. Similarly, the alternation of the values 
 of the marking bits can be used as a time reference to calculate the delay and delay variation.
 The Alternate-Marking operation is further described in <a class="auto internal xref" href="#operation">Section 5</a>.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">This document introduces a TLV (type-length-value) that can be encoded in the Options Headers 
 (Hop-by-Hop or Destination), according to <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span>, for the purpose of the
 Alternate-Marking Method application in an IPv6 domain.<a class="pilcrow" href="#section-1-4">¶</a></p>
<p id="section-1-5">The Alternate-Marking Method <span class="bcp14">MUST</span> be applied to IPv6 only in a controlled environment, as further described 
 in <a class="auto internal xref" href="#ctrldmn">Section 2.1</a>. <span>[<a class="cite xref" href="#RFC8799">RFC8799</a>]</span> provides further discussion of network behaviors
 that can be applied only within limited domains.<a class="pilcrow" href="#section-1-5">¶</a></p>
<p id="section-1-6">The threat model for the application of the Alternate-Marking Method in an IPv6 domain is reported in 
 <a class="auto internal xref" href="#security">Section 6</a>.<a class="pilcrow" href="#section-1-6">¶</a></p>
<section id="section-1.1">
        <h3 id="name-terminology">
<a class="section-number selfRef" href="#section-1.1">1.1. </a><a class="section-name selfRef" href="#name-terminology">Terminology</a>
        </h3>
<p id="section-1.1-1">This document uses the terms related to the Alternate-Marking Method 
 as defined in <span>[<a class="cite xref" href="#RFC9341">RFC9341</a>]</span> and <span>[<a class="cite xref" href="#RFC9342">RFC9342</a>]</span>.<a class="pilcrow" href="#section-1.1-1">¶</a></p>
</section>
<section id="section-1.2">
        <h3 id="name-requirements-language">
<a class="section-number selfRef" href="#section-1.2">1.2. </a><a class="section-name selfRef" href="#name-requirements-language">Requirements Language</a>
        </h3>
<p id="section-1.2-1">
    The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
    "<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
    described in BCP 14 <span>[<a class="cite xref" href="#RFC2119">RFC2119</a>]</span> <span>[<a class="cite xref" href="#RFC8174">RFC8174</a>]</span> 
    when, and only when, they appear in all capitals, as shown here.<a class="pilcrow" href="#section-1.2-1">¶</a></p>
</section>
</section>
<section id="section-2">
      <h2 id="name-alternate-marking-applicati">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-alternate-marking-applicati">Alternate-Marking Application to IPv6</a>
      </h2>
<p id="section-2-1">The Alternate-Marking Method requires a marking field. Several alternatives 
 could be considered such as IPv6 Extension Headers, IPv6 Address, and Flow Label.
 But, it is necessary to analyze the drawbacks for all the available possibilities, 
 more specifically:<a class="pilcrow" href="#section-2-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">reusing an existing Extension Header for Alternate Marking leads to a 
   non-optimized implementation;<a class="pilcrow" href="#section-2-2.1">¶</a>
</li>
        <li class="normal" id="section-2-2.2">using the IPv6 destination address to encode the Alternate-Marking processing 
   is very expensive; and<a class="pilcrow" href="#section-2-2.2">¶</a>
</li>
        <li class="normal" id="section-2-2.3">using the IPv6 Flow Label for Alternate Marking conflicts with the utilization 
 of the Flow Label for load distribution purposes <span>[<a class="cite xref" href="#RFC6438">RFC6438</a>]</span>.<a class="pilcrow" href="#section-2-2.3">¶</a>
</li>
      </ul>
<p id="section-2-3">In the end, a Hop-by-Hop or a Destination Option is the best choice.<a class="pilcrow" href="#section-2-3">¶</a></p>
<p id="section-2-4">The approach for the Alternate-Marking application to IPv6 specified in this memo
 is compliant with <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span>. It involves the following operations:<a class="pilcrow" href="#section-2-4">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-5.1">The source node is the only one that writes the Options Header to mark alternately 
   the flow (for both the Hop-by-Hop and Destination Option). The intermediate nodes and destination node 
 <span class="bcp14">MUST</span> only read the marking values of the Option without modifying the Options Header.<a class="pilcrow" href="#section-2-5.1">¶</a>
</li>
        <li class="normal" id="section-2-5.2">In case of a Hop-by-Hop Options Header carrying Alternate-Marking bits, the Options Header is not 
   inserted or deleted on the path, but it can be read by any node along the path. The intermediate nodes 
   may be configured to support this Option or not, and the measurement can be done only for 
   the nodes configured to read the Option. As further discussed in <a class="auto internal xref" href="#use">Section 4</a>,
   the presence of the Hop-by-Hop Option should not affect the traffic throughput both on nodes 
   that do not recognize this Option and on the nodes that support it. However, it is worth 
   mentioning that there is a difference between theory and practice. Indeed, in a real implementation, 
   it is possible for packets with a Hop-by-Hop Option to be skipped or processed in the slow path. 
   While some proposals are trying to address this problem and make Hop-by-Hop Options more practical 
   (see <span>[<a class="cite xref" href="#PROC-HBH-OPT-HEADER">PROC-HBH-OPT-HEADER</a>]</span> and <span>[<a class="cite xref" href="#HBH-OPTIONS-PROCESSING">HBH-OPTIONS-PROCESSING</a>]</span>), these aspects
   are out of the scope for this document.<a class="pilcrow" href="#section-2-5.2">¶</a>
</li>
        <li class="normal" id="section-2-5.3">In case of a Destination Options Header carrying Alternate-Marking bits, it is not 
   processed, inserted, or deleted by any node along the path until the packet reaches 
   the destination node. Note that, if there is also a Routing Header (RH), any visited 
   destination in the route list can process the Options Header.<a class="pilcrow" href="#section-2-5.3">¶</a>
</li>
      </ul>
<p id="section-2-6">A Hop-by-Hop Options Header is also useful to signal to routers on the path to process the 
      Alternate Marking. However, as said, routers will only examine this Option if properly configured.<a class="pilcrow" href="#section-2-6">¶</a></p>
<p id="section-2-7">The optimization of both implementation and the scaling of the Alternate-Marking Method is 
 also considered, and a way to identify flows is required. The Flow Monitoring Identification 
 (FlowMonID) field, as introduced in <a class="auto internal xref" href="#flowmonid">Section 5.3</a>, goes in this direction, and it is used to identify 
 a monitored flow.<a class="pilcrow" href="#section-2-7">¶</a></p>
<p id="section-2-8">The FlowMonID is different from the Flow Label field of the IPv6 header <span>[<a class="cite xref" href="#RFC6437">RFC6437</a>]</span>. 
 The Flow Label field in the IPv6 header is used by a source to label sequences of packets to be treated 
 in the network as a single flow and, as reported in <span>[<a class="cite xref" href="#RFC6438">RFC6438</a>]</span>, it can be used 
 for load balancing (LB) and equal-cost multipath (ECMP). The reuse of the Flow Label field for identifying monitored flows 
 is not considered because it may change the application intent and forwarding behavior. Also, the Flow Label 
 may be changed en route, and this may also invalidate the integrity of the measurement. Those reasons make the definition 
 of the FlowMonID necessary for IPv6. Indeed, the FlowMonID is designed and only used to identify the monitored flow.
 Flow Label and FlowMonID within the same packet are totally disjoint, have different scopes, 
 are used to identify flows based on different criteria, and are intended for different use cases.<a class="pilcrow" href="#section-2-8">¶</a></p>
<p id="section-2-9">The rationale for the FlowMonID is further discussed in <a class="auto internal xref" href="#flowmonid">Section 5.3</a>. This 20-bit field
 allows easy and flexible identification of the monitored flow and enables improved measurement correlation
 and finer granularity since it can be used in combination with the conventional TCP/IP 5-tuple to identify a flow.
 An important point that will be discussed in <a class="auto internal xref" href="#flowmonid">Section 5.3</a> is the uniqueness of the FlowMonID 
 and how to allow disambiguation of the FlowMonID in case of collision.<a class="pilcrow" href="#section-2-9">¶</a></p>
<p id="section-2-10">The following section highlights an important requirement for the application of the Alternate Marking to IPv6.
        The concept of the controlled domain is explained and is considered an essential precondition, as also highlighted
 in <a class="auto internal xref" href="#security">Section 6</a>.<a class="pilcrow" href="#section-2-10">¶</a></p>
<div id="ctrldmn">
<section id="section-2.1">
        <h3 id="name-controlled-domain">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-controlled-domain">Controlled Domain</a>
        </h3>
<p id="section-2.1-1">IPv6 has much more flexibility than IPv4 and innovative applications have been proposed, but
        for security and compatibility reasons, some of these applications are limited to a controlled environment.
 This is also the case of the Alternate-Marking application to IPv6 as assumed hereinafter.
 In this regard, <span>[<a class="cite xref" href="#RFC8799">RFC8799</a>]</span> reports further examples of specific limited domain solutions.<a class="pilcrow" href="#section-2.1-1">¶</a></p>
<p id="section-2.1-2">The IPv6 application of the Alternate-Marking Method <span class="bcp14">MUST</span> be deployed in a controlled domain.
 It is not common that the user traffic originates and terminates within the controlled domain, as also noted in
 <a class="auto internal xref" href="#altmarkmeasdmn">Section 2.1.1</a>. For this reason, it will typically only be applicable in an overlay network, 
 where user traffic is encapsulated at one domain border and decapsulated at the other domain border, and the encapsulation
 incorporates the relevant extension header for Alternate Marking. 
 This requirement also implies that an implementation <span class="bcp14">MUST</span> filter packets that carry Alternate-Marking 
 data and are entering or leaving the controlled domain.<a class="pilcrow" href="#section-2.1-2">¶</a></p>
<p id="section-2.1-3">A controlled domain is a managed network where it is required to select, monitor, and control the access to the network 
 by enforcing policies at the domain boundaries in order to discard undesired external packets entering the domain 
 and check the internal packets leaving the domain. It does not necessarily mean that a controlled domain is a single administrative domain 
 or a single organization. A controlled domain can correspond to a single administrative domain or can be composed by 
 multiple administrative domains under a defined network management. Indeed, some scenarios may imply that the Alternate-Marking Method 
 involves more than one domain, but in these cases, it is <span class="bcp14">RECOMMENDED</span> that the multiple domains create a whole controlled domain 
 while traversing the external domain by employing IPsec <span>[<a class="cite xref" href="#RFC4301">RFC4301</a>]</span> authentication and encryption or 
 other VPN technology that provides full packet confidentiality and integrity protection. In a few words, it must be possible 
 to control the domain boundaries and eventually use specific precautions if the traffic traverses the Internet.<a class="pilcrow" href="#section-2.1-3">¶</a></p>
<p id="section-2.1-4">The security considerations reported in <a class="auto internal xref" href="#security">Section 6</a> also highlight this requirement.<a class="pilcrow" href="#section-2.1-4">¶</a></p>
<div id="altmarkmeasdmn">
<section id="section-2.1.1">
          <h4 id="name-alternate-marking-measureme">
<a class="section-number selfRef" href="#section-2.1.1">2.1.1. </a><a class="section-name selfRef" href="#name-alternate-marking-measureme">Alternate-Marking Measurement Domain</a>
          </h4>
<p id="section-2.1.1-1">The Alternate-Marking measurement domain can overlap with the controlled domain or may be a subset 
 of the controlled domain. The typical scenarios for the application of the Alternate-Marking Method 
 depend on the controlled domain boundaries; in particular:<a class="pilcrow" href="#section-2.1.1-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1.1-2.1">The user equipment can be the starting or ending node only when/if it is fully managed and belongs 
   to the controlled domain. In this case, the user-generated IPv6 packets contain the Alternate-Marking data.
   But, in practice, this is not common due to the fact that the user equipment cannot be totally secured in the majority of cases.<a class="pilcrow" href="#section-2.1.1-2.1">¶</a>
</li>
            <li class="normal" id="section-2.1.1-2.2">The Customer Premises Equipment (CPE) or the Provider Edge (PE) routers are most likely to be the starting or 
   ending nodes since they can be border routers of the controlled domain. For instance, the CPE, which connects the user's premises 
   with the service provider's network, belongs to a controlled domain only if it is managed by the service provider and 
   if additional security measures are taken to keep it trustworthy.
   Typically, the CPE or the PE can encapsulate a received packet in an outer IPv6 header, which contains the Alternate-Marking data.
   They are also able to filter and drop packets from outside of the domain with inconsistent fields
   to make effective the relevant security rules at the domain boundaries; for example, a simple security check 
   can be to insert the Alternate-Marking data if and only if the destination is within the controlled domain.<a class="pilcrow" href="#section-2.1.1-2.2">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
</section>
<section id="section-3">
      <h2 id="name-definition-of-the-altmark-o">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-definition-of-the-altmark-o">Definition of the AltMark Option</a>
      </h2>
<p id="section-3-1">The definition of a TLV for the Extension Header Option,
    carrying the data fields dedicated to the Alternate-Marking Method, 
    is reported below.<a class="pilcrow" href="#section-3-1">¶</a></p>
<section id="section-3.1">
        <h3 id="name-data-fields-format">
<a class="section-number selfRef" href="#section-3.1">3.1. </a><a class="section-name selfRef" href="#name-data-fields-format">Data Fields Format</a>
        </h3>
<p id="section-3.1-1">The following figure shows the data fields format for enhanced
      Alternate-Marking TLV (AltMark). This AltMark data can be encapsulated in the IPv6 Options Headers 
   (Hop-by-Hop or Destination Option).<a class="pilcrow" href="#section-3.1-1">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1-2">
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                |  Option Type  |  Opt Data Len |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              FlowMonID                |L|D|     Reserved      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a class="pilcrow" href="#section-3.1-2">¶</a>
</div>
<p id="section-3.1-3">

 Where:<a class="pilcrow" href="#section-3.1-3">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-3.1-4">
          <dt id="section-3.1-4.1">Option Type:
          </dt>
          <dd id="section-3.1-4.2" style="margin-left: 1.5em">8-bit identifier of the type of Option that needs to be
   allocated. Unrecognized Types <span class="bcp14">MUST</span> be ignored
   on processing.  For the Hop-by-Hop Options Header or Destination
   Options Header, <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span>
   defines how to encode the three high-order bits of the
   Option Type field. The two high-order bits specify the
   action that must be taken if the processing IPv6 node does
   not recognize the Option Type; for AltMark, these two bits
   <span class="bcp14">MUST</span> be set to 00 (skip over this Option and
   continue processing the header).  The third-highest-order
   bit specifies whether the Option Data can change en route to
   the packet's final destination; for AltMark, the value of
   this bit <span class="bcp14">MUST</span> be set to 0 (Option Data does
   not change en route). In this way, since the three
   high-order bits of the AltMark Option are set to 000, it
   means that nodes can simply skip this Option if they do not
   recognize it and that the data of this Option does not change en
   route; indeed the source is the only one that can write it.<a class="pilcrow" href="#section-3.1-4.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.3">Opt Data Len:
          </dt>
          <dd id="section-3.1-4.4" style="margin-left: 1.5em">4. It is the length of the Option Data Fields of this
   Option in bytes.<a class="pilcrow" href="#section-3.1-4.4">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.5">FlowMonID:
          </dt>
          <dd id="section-3.1-4.6" style="margin-left: 1.5em">20-bit unsigned integer. The FlowMon identifier is
   described in <a class="auto internal xref" href="#flowmonid">Section 5.3</a>.
   As further discussed below, it has been picked as 20 bits
   since it is a reasonable value and a good compromise in
   relation to the chance of collision. It <span class="bcp14">MUST</span>
   be set pseudo-randomly by the source node or by a
   centralized controller.<a class="pilcrow" href="#section-3.1-4.6">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.7">L:
          </dt>
          <dd id="section-3.1-4.8" style="margin-left: 1.5em">Loss flag for Packet Loss Measurement as described in
   <a class="auto internal xref" href="#loss">Section 5.1</a>.<a class="pilcrow" href="#section-3.1-4.8">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.9">D:
          </dt>
          <dd id="section-3.1-4.10" style="margin-left: 1.5em">Delay flag for Single Packet Delay Measurement as
   described in <a class="auto internal xref" href="#delay">Section 5.2</a>.<a class="pilcrow" href="#section-3.1-4.10">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-3.1-4.11">Reserved:
          </dt>
          <dd id="section-3.1-4.12" style="margin-left: 1.5em">Reserved for future use. These bits
   <span class="bcp14">MUST</span> be set to zero on transmission and
   ignored on receipt.<a class="pilcrow" href="#section-3.1-4.12">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</section>
<div id="use">
<section id="section-4">
      <h2 id="name-use-of-the-altmark-option">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-use-of-the-altmark-option">Use of the AltMark Option</a>
      </h2>
<p id="section-4-1">The AltMark Option is the best way to implement the Alternate-Marking Method, and it is carried 
   by the Hop-by-Hop Options Header and the Destination Options Header.
   In case of Destination Option, it is processed only by the source and destination nodes: the source node inserts it
   and the destination node processes it. 
   In case of the Hop-by-Hop Option, it may be examined by any node along the path if explicitly configured to do so.<a class="pilcrow" href="#section-4-1">¶</a></p>
<p id="section-4-2">It is important to highlight that the Option Layout can be used both as the Destination Option and as the
   Hop-by-Hop Option depending on the use cases, and it is based on the chosen type of performance measurement. 
   In general, it is needed to perform both end-to-end and hop-by-hop measurements, and the Alternate-Marking 
   methodology allows, by definition, both performance measurements.
   In many cases, the end-to-end measurement 
   may not be enough, and the hop-by-hop measurement is required. To meet this need, the most complete choice is the
   Hop-by-Hop Options Header.<a class="pilcrow" href="#section-4-2">¶</a></p>
<p id="section-4-3">IPv6, as specified in <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span>, allows nodes to optionally process
   Hop-by-Hop headers. Specifically, the Hop-by-Hop Options Header is not inserted or deleted, but it may
      be examined or processed by any node along a packet's delivery path, until the packet reaches the node 
   (or each of the set of nodes in the case of multicast) identified in the Destination
      Address field of the IPv6 header. Also, it is expected that nodes along a packet's delivery path 
   only examine and process the Hop-by-Hop Options Header if explicitly configured to do so.<a class="pilcrow" href="#section-4-3">¶</a></p>
<p id="section-4-4">Another scenario is the presence of a Routing Header. 
   Both Hop-by-Hop Options and Destination Options Headers can be used when a Routing Header is present.
   Depending on where the Destination Options are situated in the header chain (before or after the Routing Header if any),
   Destination Options Headers can be processed by either intermediate routers specified in the Routing Header or the destination node.
   As an example, a type of Routing Header, referred to as a Segment Routing Header (SRH), has been defined in <span>[<a class="cite xref" href="#RFC8754">RFC8754</a>]</span> 
   for the Segment Routing over IPv6 (SRv6) data place, and more details about the SRv6 application can be found in 
   <span>[<a class="cite xref" href="#I-D.fz-spring-srv6-alt-mark">SRv6-AMM</a>]</span>.<a class="pilcrow" href="#section-4-4">¶</a></p>
<p id="section-4-5">In summary, using these tools, it is possible to control on which nodes measurement occurs:<a class="pilcrow" href="#section-4-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-6.1">Destination Option not preceding a Routing Header =&gt; measurement
      only by node in Destination Address<a class="pilcrow" href="#section-4-6.1">¶</a>
</li>
        <li class="normal" id="section-4-6.2">Hop-by-Hop Option =&gt; every router on the path with feature
      enabled<a class="pilcrow" href="#section-4-6.2">¶</a>
</li>
        <li class="normal" id="section-4-6.3">Destination Option preceding a Routing Header =&gt; every destination
      node in the route list<a class="pilcrow" href="#section-4-6.3">¶</a>
</li>
      </ul>
<p id="section-4-7">In general, Hop-by-Hop and Destination Options are the most suitable ways 
   to implement Alternate Marking.<a class="pilcrow" href="#section-4-7">¶</a></p>
<p id="section-4-8">It is worth mentioning that Hop-by-Hop Options are not strongly recommended in <span>[<a class="cite xref" href="#RFC7045">RFC7045</a>]</span> 
   and <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span>, unless there is a clear justification to standardize it, because nodes may be 
   configured to ignore the Options Header or drop or assign packets containing an Options Header to a slow processing path.
   In case of the AltMark Data Fields described in this document, the motivation to standardize a Hop-by-Hop Option 
   is that it is needed for Operations, Administration, and Maintenance (OAM). An intermediate node can read it or not, but
   this does not affect the packet behavior. The source node is the only one that writes the Hop-by-Hop Option to alternately mark
   the flow; therefore, the performance measurement can be done for those nodes configured to read this Option,
   while the others are simply not considered for the metrics.<a class="pilcrow" href="#section-4-8">¶</a></p>
<p id="section-4-9">The Hop-by-Hop Option defined in this document is designed to take advantage of the property of how Hop-by-Hop 
   Options are processed. Nodes that do not support this Option would be expected to ignore it if encountered, 
   according to the procedures of <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span>. This can mean that, in this case, the performance measurement
   does not account for all links and nodes along a path. The definition of the Hop-by-Hop Options in this document is also 
   designed to minimize throughput impact both on nodes that do not recognize the Option and on nodes that support it.
   Indeed, the three high-order bits of the Options Header defined in this document are 000 and, in theory, as per 
   <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span> and <span>[<a class="cite xref" href="#HBH-OPTIONS-PROCESSING">HBH-OPTIONS-PROCESSING</a>]</span>, this means "skip if not recognized and data does not change en route". <span>[<a class="cite xref" href="#RFC8200">RFC8200</a>]</span> also mentions that the nodes only examine and process the Hop-by-Hop Options Header if explicitly configured to do so. For these reasons, this Hop-by-Hop Option should not affect the throughput. 
   However, in practice, it is important to be aware that things may be different in the implementation, and it can happen that packets
   with Hop by Hop are forced onto the slow path, but this is a general issue, as also explained in <span>[<a class="cite xref" href="#HBH-OPTIONS-PROCESSING">HBH-OPTIONS-PROCESSING</a>]</span>.   
   It is also worth mentioning that the application to a controlled domain should avoid the risk of arbitrary nodes dropping packets 
   with Hop-by-Hop Options.<a class="pilcrow" href="#section-4-9">¶</a></p>
</section>
</div>
<div id="operation">
<section id="section-5">
      <h2 id="name-alternate-marking-method-op">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-alternate-marking-method-op">Alternate-Marking Method Operation</a>
      </h2>
<p id="section-5-1">This section describes how the method operates. <span>[<a class="cite xref" href="#RFC9341">RFC9341</a>]</span>
 introduces several applicable methods, which are reported below, and an additional field is introduced 
 to facilitate the deployment and improve the scalability.<a class="pilcrow" href="#section-5-1">¶</a></p>
<div id="loss">
<section id="section-5.1">
        <h3 id="name-packet-loss-measurement">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-packet-loss-measurement">Packet Loss Measurement</a>
        </h3>
<p id="section-5.1-1">The measurement of the packet loss is really straightforward in comparison to the existing mechanisms, 
 as detailed in <span>[<a class="cite xref" href="#RFC9341">RFC9341</a>]</span>.
 The packets of the flow are grouped into batches, and all the packets within a batch are marked by setting
 the L bit (Loss flag) to a same value. The source node can switch the value of the L bit between 0 and 1 
 after a fixed number of packets or according to a fixed timer, and this depends on the 
 implementation. The source node is the only one that marks the packets to create the batches, while 
 the intermediate nodes only read the marking values and identify the packet batches. 
 By counting the number of packets in each batch and comparing the values measured by 
 different network nodes along the path, it is possible to measure the packet loss that occurred
 in any single batch between any two nodes. Each batch represents a measurable entity  
 recognizable by all network nodes along the path.<a class="pilcrow" href="#section-5.1-1">¶</a></p>
<p id="section-5.1-2">Both fixed number of packets and a fixed timer can be used by the source node to create packet batches. 
 But, as also explained in <span>[<a class="cite xref" href="#RFC9341">RFC9341</a>]</span>, the timer-based batches are preferable because 
 they are more deterministic than the counter-based batches.

Unlike the timer-based batches, there is no definitive rule 
for counter-based batches, which are not considered in <span>[<a class="cite xref" href="#RFC9341">RFC9341</a>]</span>.

  Using a fixed timer for the switching offers 
 better control over the method; indeed, the length of the batches can be chosen large enough to simplify 
 the collection and the comparison of the measures taken by different network nodes. In the implementation, 
 the counters can be sent out by each node to the controller that is responsible for the calculation. 
 It is also possible to exchange this information by using other on-path techniques, but this is out of scope
 for this document.<a class="pilcrow" href="#section-5.1-2">¶</a></p>
<p id="section-5.1-3">Packets with different L values may get swapped at batch boundaries, and in this case, 
 it is required that each marked packet can be assigned to the right batch by each router.
 It is important to mention that for the application of this method, there are two elements 
 to consider: the clock error between network nodes and the network delay.
 These can create
 offsets between the batches and out-of-order packets.
 The mathematical formula 
 on timing aspects, explained in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc9341#section-5">Section 5</a> of [<a class="cite xref" href="#RFC9341">RFC9341</a>]</span>, must be satisfied, 
 and it takes into consideration the different causes of reordering such as clock error and network delay.
 The assumption is to define the available counting interval to get stable counters and to avoid these issues.
 Specifically, if the effects of network delay are ignored, the condition to implement the methodology is that
 the clocks in different nodes <span class="bcp14">MUST</span> be synchronized to the same clock reference with an accuracy of +/- B/2 time units, 
 where B is the fixed time duration of the batch. In this way, each marked packet can be assigned to the right batch by each node.
 Usually, the counters can be taken in the middle of the batch period to be sure to read quiescent counters. 
 In a few words, this implies that the length of the batches <span class="bcp14">MUST</span> be chosen large enough so that the method 
 is not affected by those factors. The length of the batches can be determined based on the specific deployment scenario.<a class="pilcrow" href="#section-5.1-3">¶</a></p>
<span id="name-packet-loss-measurement-and"></span><div id="Lbit">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-5.1-4.1">
<pre>L bit=1   ----------+           +-----------+           +----------
                    |           |           |           |
L bit=0             +-----------+           +-----------+
           Batch n        ...      Batch 3     Batch 2     Batch 1
         &lt;---------&gt; &lt;---------&gt; &lt;---------&gt; &lt;---------&gt; &lt;---------&gt;

                             Traffic Flow
         ===========================================================&gt;
L bit   ...1111111111 0000000000 11111111111 00000000000 111111111...
         ===========================================================&gt;
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-packet-loss-measurement-and">Packet Loss Measurement and Single-Marking Methodology Using L Bit</a>
          </figcaption></figure>
</div>
<p id="section-5.1-5">It is worth mentioning that the duration of the batches is considered stable over time in the previous figure. 
    In theory, it is possible to change the length of batches over time and among different flows for more flexibility. 
    But, in practice, it could complicate the correlation of the information.<a class="pilcrow" href="#section-5.1-5">¶</a></p>
</section>
</div>
<div id="delay">
<section id="section-5.2">
        <h3 id="name-packet-delay-measurement">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-packet-delay-measurement">Packet Delay Measurement</a>
        </h3>
<p id="section-5.2-1">The same principle used to measure packet loss can also be applied to
 one-way delay measurement. Delay metrics <span class="bcp14">MAY</span> be calculated using the following two 
 possibilities:<a class="pilcrow" href="#section-5.2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.2-2">
          <dt id="section-5.2-2.1">Single-Marking Methodology:</dt>
          <dd id="section-5.2-2.2" style="margin-left: 1.5em">This approach uses only the L bit to calculate both packet loss 
 and delay. In this case, the D flag <span class="bcp14">MUST</span> be set to zero on transmit and ignored by the
 monitoring points. The alternation of the values of the L bit can be used as a time reference to calculate 
 the delay. Whenever the L bit changes and a new batch starts, a network node can store the timestamp 
 of the first packet of the new batch; that timestamp can be compared with the timestamp of the 
 first packet of the same batch on a second node to compute packet delay. But, this measurement 
 is accurate only if no packet loss occurs and if there is no packet reordering at the edges 
 of the batches. A different approach can also be considered, and it is based on the concept of the 
 mean delay.  The mean delay for each batch is calculated by considering the average arrival time 
 of the packets for the relative batch. There are limitations also in this case indeed; each node needs 
 to collect all the timestamps and calculate the average timestamp for each batch. In addition, the 
 information is limited to a mean value.<a class="pilcrow" href="#section-5.2-2.2">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.3">Double-Marking Methodology:</dt>
          <dd id="section-5.2-2.4" style="margin-left: 1.5em">This approach is more complete and uses the L bit only to calculate
 packet loss, and the D bit (Delay flag) is fully dedicated to delay measurements. The idea is to use 
 the first marking with the L bit to create the alternate flow and, within the batches identified by the L bit, 
 a second marking is used to select the packets for measuring delay. The D bit creates a new set of marked packets 
 that are fully identified over the network so that a network node can store the timestamps of these packets; 
 these timestamps can be compared with the timestamps of the same packets on a second node to compute packet
 delay values for each packet. The most efficient and robust mode is to select a single double-marked packet 
 for each batch; in this way, there is no time gap to consider between the double-marked packets to avoid their reorder.
 Regarding the rule for the selection of the packet to be double-marked, the same considerations in <a class="auto internal xref" href="#loss">Section 5.1</a>
 also apply here, and the double-marked packet can be chosen within the available counting interval that
        is not affected by factors such as clock errors.  
 If a double-marked packet is lost, the delay measurement for the considered batch is simply discarded,
 but this is not a big problem because it is easy to recognize the problematic batch and skip the measurement 
 just for that one. So in order to have more information about the delay and to overcome out-of-order issues, 
 this method is preferred.<a class="pilcrow" href="#section-5.2-2.4">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-5.2-3">In summary, the approach with Double Marking is better than the approach with Single Marking. Moreover, 
 the two approaches provide slightly different pieces of information, and the data consumer can combine them 
 to have a more robust data set.<a class="pilcrow" href="#section-5.2-3">¶</a></p>
<p id="section-5.2-4">Similar to what is said in <a class="auto internal xref" href="#loss">Section 5.1</a> for the packet counters, in the implementation, the timestamps can be
 sent out to the controller that is responsible for the calculation or exchanged using other on-path techniques.
 But, this is out of scope for this document.<a class="pilcrow" href="#section-5.2-4">¶</a></p>
<span id="name-double-marking-methodology-"></span><div id="Dbit">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-5.2-5.1">
<pre>L bit=1   ----------+           +-----------+           +----------
                    |           |           |           |
L bit=0             +-----------+           +-----------+

D bit=1         +          +          +          +            +
                |          |          |          |            |
D bit=0   ------+----------+----------+----------+------------+-----

                             Traffic Flow
         ===========================================================&gt;
L bit   ...1111111111 0000000000 11111111111 00000000000 111111111...

D bit   ...0000010000 0000010000 00000100000 00001000000 000001000...
         ===========================================================&gt;
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-double-marking-methodology-">Double-Marking Methodology Using L Bit and D Bit</a>
          </figcaption></figure>
</div>
<p id="section-5.2-6">Likewise, to packet delay measurement (both for Single Marking and Double Marking), the method can also be used 
 to measure the inter-arrival jitter.<a class="pilcrow" href="#section-5.2-6">¶</a></p>
</section>
</div>
<div id="flowmonid">
<section id="section-5.3">
        <h3 id="name-flow-monitoring-identificat">
<a class="section-number selfRef" href="#section-5.3">5.3. </a><a class="section-name selfRef" href="#name-flow-monitoring-identificat">Flow Monitoring Identification</a>
        </h3>
<p id="section-5.3-1">The Flow Monitoring Identification (FlowMonID) identifies the flow to be measured and 
 is required for some general reasons:<a class="pilcrow" href="#section-5.3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-2.1">First, it helps to reduce the per-node configuration. Otherwise, each node needs to 
     configure an access control list (ACL) for each of the monitored flows. 
 Moreover, using a flow identifier allows a flexible granularity for the flow definition; 
 indeed, it can be used together with other identifiers (e.g., 5-tuple).<a class="pilcrow" href="#section-5.3-2.1">¶</a>
</li>
          <li class="normal" id="section-5.3-2.2">Second, it simplifies the counters handling. Hardware processing of flow tuples (and ACL matching) 
 is challenging and often incurs into performance issues, especially in tunnel interfaces.<a class="pilcrow" href="#section-5.3-2.2">¶</a>
</li>
          <li class="normal" id="section-5.3-2.3">Third, it eases the data export encapsulation and correlation for the collectors.<a class="pilcrow" href="#section-5.3-2.3">¶</a>
</li>
        </ul>
<p id="section-5.3-3">The FlowMonID <span class="bcp14">MUST</span> only be used as a monitored flow identifier in order to determine a monitored flow 
 within the measurement domain. This entails not only an easy identification but improved correlation as well.<a class="pilcrow" href="#section-5.3-3">¶</a></p>
<p id="section-5.3-4">The FlowMonID allocation procedure can be stateful or stateless. In case of a stateful approach, it is required that 
 the FlowMonID historic information can be stored and tracked in order to assign unique values within the domain.
 This may imply a complex procedure, and it is considered out of scope for this document. 
 The stateless approach is described hereinafter where FlowMonID values are pseudo-randomly generated.<a class="pilcrow" href="#section-5.3-4">¶</a></p>
<p id="section-5.3-5">The value of 20 bits has been selected for the FlowMonID since it is a good compromise and implies a low rate 
 of ambiguous FlowMonIDs that can be considered acceptable in most of the applications. The disambiguation issue 
 can be solved by tagging the pseudo-randomly generated FlowMonID with additional flow information. 
 In particular, it is <span class="bcp14">RECOMMENDED</span> to consider the 3-tuple FlowMonID, source, and destination addresses:<a class="pilcrow" href="#section-5.3-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-6.1">If the 20-bit FlowMonID is set independently and pseudo-randomly in a distributed way, there is a chance of collision. 
   Indeed, by using the well-known birthday problem in probability theory, if the 20-bit FlowMonID 
   is set independently and pseudo-randomly without any additional input entropy, there is a 50% chance of collision 
   for 1206 flows. So, for more entropy, FlowMonID is combined with source and destination addresses.
   Since there is a 1% chance of collision for 145 flows, it is possible to monitor 145 concurrent flows per host pairs
   with a 1% chance of collision.<a class="pilcrow" href="#section-5.3-6.1">¶</a>
</li>
          <li class="normal" id="section-5.3-6.2">If the 20-bit FlowMonID is set pseudo-randomly but in a centralized way, the controller can instruct the nodes properly 
   in order to guarantee the uniqueness of the FlowMonID. With 20 bits, the number of combinations is 1048576, and the controller 
   should ensure that all the FlowMonID values are used without any collision. Therefore, by considering source and destination addresses
   together with the FlowMonID, it is possible to monitor 1048576 concurrent flows per host pairs.<a class="pilcrow" href="#section-5.3-6.2">¶</a>
</li>
        </ul>
<p id="section-5.3-7">A consistent approach <span class="bcp14">MUST</span> be used in the Alternate-Marking deployment to avoid the mixture of different ways of identifying.
 All the nodes along the path and involved in the measurement <span class="bcp14">SHOULD</span> use the same mode for identification.
 As mentioned, it is <span class="bcp14">RECOMMENDED</span> to use the FlowMonID for identification purposes in combination with source and destination addresses
 to identify a flow. By considering source and destination addresses together with the FlowMonID, it is possible to monitor
 145 concurrent flows per host pairs with a 1% chance of collision in case of pseudo-randomly generated FlowMonID, or
 1048576 concurrent flows per host pairs in case of a centralized controller. It is worth mentioning that 
 the solution with the centralized control allows finer granularity and therefore adds even more flexibility to the flow identification.<a class="pilcrow" href="#section-5.3-7">¶</a></p>
<p id="section-5.3-8">The FlowMonID field is set at the source node, which is the ingress point of the measurement domain, and
 can be set in two ways:<a class="pilcrow" href="#section-5.3-8">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-9.1">It can be algorithmically generated by the source node, which can set it pseudo-randomly with some 
 chance of collision. This approach cannot guarantee the uniqueness of FlowMonID since conflicts and collisions are possible.
 But, considering the recommendation to use FlowMonID with source and destination addresses, the conflict probability is reduced due to 
 the FlowMonID space available for each endpoint pair (i.e., 145 flows with 1% chance of collision).<a class="pilcrow" href="#section-5.3-9.1">¶</a>
</li>
          <li class="normal" id="section-5.3-9.2">It can be assigned by the central controller. Since the controller knows the network topology, 
 it can allocate the value properly to avoid or minimize ambiguity and guarantee the uniqueness. In this regard, 
 the controller can verify that there is no ambiguity between different pseudo-randomly generated FlowMonIDs on the same path.
 The conflict probability is really small given that the FlowMonID is coupled with source and destination addresses,
        and up to 1048576 flows can be monitored for each endpoint pair. When all values in the FlowMonID space are consumed, 
 the centralized controller can keep track and reassign the values that are not used any more by old flows.<a class="pilcrow" href="#section-5.3-9.2">¶</a>
</li>
        </ul>
<p id="section-5.3-10">If the FlowMonID is set by the source node, the intermediate nodes can read the FlowMonIDs from the packets in flight 
 and act accordingly. If the FlowMonID is set by the controller, both possibilities are feasible for the intermediate nodes,
        which can learn by reading the packets or can be instructed by the controller.<a class="pilcrow" href="#section-5.3-10">¶</a></p>
<p id="section-5.3-11">The FlowMonID setting by the source node may seem faster and more scalable than the FlowMonID setting by the controller. But, 
 it is supposed that the controller does not slow the process since it can enable the Alternate-Marking Method and its parameters (like FlowMonID)
 together with the flow instantiation, as further described in <span>[<a class="cite xref" href="#I-D.ietf-idr-sr-policy-ifit">BGP-SR-POLICY-IFIT</a>]</span> and <span>[<a class="cite xref" href="#PCEP-IFIT">PCEP-IFIT</a>]</span>.<a class="pilcrow" href="#section-5.3-11">¶</a></p>
</section>
</div>
<section id="section-5.4">
        <h3 id="name-multipoint-and-clustered-al">
<a class="section-number selfRef" href="#section-5.4">5.4. </a><a class="section-name selfRef" href="#name-multipoint-and-clustered-al">Multipoint and Clustered Alternate Marking</a>
        </h3>
<p id="section-5.4-1">The Alternate-Marking Method can be extended to any kind of multipoint-to-multipoint paths. 
 <span>[<a class="cite xref" href="#RFC9341">RFC9341</a>]</span> only applies to point-to-point unicast flows, 
 while the Clustered Alternate-Marking Method, introduced in <span>[<a class="cite xref" href="#RFC9342">RFC9342</a>]</span>, 
 is valid for multipoint-to-multipoint unicast flows, anycast, and ECMP flows.<a class="pilcrow" href="#section-5.4-1">¶</a></p>
<p id="section-5.4-2"><span>[<a class="cite xref" href="#RFC9342">RFC9342</a>]</span> describes the network clustering approach, which
 allows a flexible and optimized performance measurement.
 A cluster is the smallest identifiable non-trivial subnetwork of the entire network graph
 that still satisfies the condition that the number of packets that goes in is the same number that goes out. 
 With network clustering, it is possible to partition the network into clusters 
 at different levels in order to perform the needed degree of detail.<a class="pilcrow" href="#section-5.4-2">¶</a></p>
<p id="section-5.4-3">For Multipoint Alternate Marking, FlowMonID can identify in general
 a multipoint-to-multipoint flow and not only a point-to-point flow.<a class="pilcrow" href="#section-5.4-3">¶</a></p>
</section>
<section id="section-5.5">
        <h3 id="name-data-collection-and-calcula">
<a class="section-number selfRef" href="#section-5.5">5.5. </a><a class="section-name selfRef" href="#name-data-collection-and-calcula">Data Collection and Calculation</a>
        </h3>
<p id="section-5.5-1">The nodes enabled to perform performance monitoring collect the value
 of the packet counters and timestamps. There are several alternatives to implement
 data collection and calculation, but this is not specified in this document.<a class="pilcrow" href="#section-5.5-1">¶</a></p>
<p id="section-5.5-2">There are documents on the control plane mechanisms of Alternate Marking, e.g., 
 <span>[<a class="cite xref" href="#I-D.ietf-idr-sr-policy-ifit">BGP-SR-POLICY-IFIT</a>]</span> and <span>[<a class="cite xref" href="#PCEP-IFIT">PCEP-IFIT</a>]</span>.<a class="pilcrow" href="#section-5.5-2">¶</a></p>
</section>
</section>
</div>
<div id="security">
<section id="section-6">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-6">6. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-6-1">This document aims to apply a method to the performance measurements that does
 not directly affect Internet security nor applications that run on
 the Internet. However, implementation of this method must be mindful
 of security and privacy concerns.<a class="pilcrow" href="#section-6-1">¶</a></p>
<p id="section-6-2">There are two types of security concerns: 
 potential harm caused by the measurements and potential harm to the measurements.<a class="pilcrow" href="#section-6-2">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6-3">
        <dt id="section-6-3.1">Harm caused by the measurement: 
        </dt>
        <dd id="section-6-3.2" style="margin-left: 1.5em">Alternate Marking implies the insertion of an Options Header to the IPv6
packets by the source node, but this must be performed in a way that does not
alter the quality of service experienced by the packets and that preserves
stability and performance of routers doing the measurements. As already
discussed in <a class="auto internal xref" href="#use">Section 4</a>, the design of the AltMark
Option has been chosen with throughput in mind, such that it can be
implemented without affecting the user experience.<a class="pilcrow" href="#section-6-3.2">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-6-3.3">Harm to the measurement:
</dt>
        <dd id="section-6-3.4" style="margin-left: 1.5em">Alternate-Marking measurements could be harmed by routers altering the
fields of the AltMark Option (e.g., marking of the packets or FlowMonID) or by a
malicious attacker adding the AltMark Option to the packets in order to consume
the resources of network devices and entities involved. As described above,
the source node is the only one that writes the Options Header while the
intermediate nodes and destination node only read it without modifying the
Options Header. But, for example, an on-path attacker can modify the flags,
whether intentionally or accidentally, or deliberately insert an Option to the
packet flow or delete the Option from the packet flow. The consequent effect
could be to give the appearance of loss or delay or to invalidate the measurement
by modifying Option identifiers, such as FlowMonID. The malicious implication
can be to cause actions from the network administrator where an intervention
is not necessary or to hide real issues in the network.  Since the measurement
itself may be affected by network nodes intentionally altering the bits of the
AltMark Option or injecting Options Headers as a means for Denial of Service
(DoS), the Alternate Marking <span class="bcp14">MUST</span> be applied in the context of
a controlled domain, where the network nodes are locally administered and this
type of attack can be avoided. For this reason, the implementation of the
method is not done on the end node if it is not fully managed and does not
belong to the controlled domain. Packets generated outside the controlled
domain may consume router resources by maliciously using the Hop-by-Hop Option, but
this can be mitigated by filtering these packets at the controlled domain
boundary. This can be done because if the end node does not belong to the
controlled domain, it is not supposed to add the AltMark Hop-by-Hop Option, and it
can be easily recognized.<a class="pilcrow" href="#section-6-3.4">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-6-4">An attacker that does not belong to the controlled domain can maliciously send packets with the AltMark Option. 
 But, if Alternate Marking is not supported in the controlled domain, no problem happens because the AltMark Option is treated
 as any other unrecognized Option and will not be considered by the nodes since they are not configured to deal with it; so,
 the only effect is the increased packet size (by 48 bits).
 If Alternate Marking is supported in the controlled domain, it is necessary to keep the measurements from being affected,
 and external packets with the AltMark Option <span class="bcp14">MUST</span> be filtered.
 As any other Hop-by-Hop Options or Destination Options, it is possible to filter AltMark Options entering or leaving the domain,
 e.g., by using ACL extensions for filtering.<a class="pilcrow" href="#section-6-4">¶</a></p>
<p id="section-6-5">The flow identifier (FlowMonID), together with the two marking bits (L and D), comprises the AltMark Option.

 As explained in <a class="auto internal xref" href="#flowmonid">Section 5.3</a>, there is a chance of collision if the FlowMonID 
 is set pseudo-randomly, but there is a solution for this issue. In general, this may not be a problem, and a low rate of
 ambiguous FlowMonIDs can be acceptable since this does not cause significant harm to the operators or 
 their clients, and this harm may not justify the complications of avoiding it. But, for large scale measurements, 
 a big number of flows could be monitored and the probability of a collision is higher; thus, the disambiguation 
 of the FlowMonID field can be considered.<a class="pilcrow" href="#section-6-5">¶</a></p>
<p id="section-6-6">The privacy concerns also need to be analyzed even if the method only relies on information contained 
 in the Options Header without any release of user data. Indeed, from a confidentiality perspective, 
 although the AltMark Option does not contain user data, the metadata can be used for network reconnaissance
 to compromise the privacy of users by allowing attackers to collect information about network performance and network paths.
 The AltMark Option contains two kinds of metadata: the marking bits (L and D) and the flow identifier (FlowMonID).<a class="pilcrow" href="#section-6-6">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-7.1">The marking bits are the small information that is exchanged between the network nodes. Therefore, due to this intrinsic 
    characteristic, network reconnaissance through passive eavesdropping on data plane traffic is difficult. 
    Indeed, an attacker cannot gain information about network performance from a single monitoring point. The only way for an attacker 
    can be to eavesdrop on multiple monitoring points at the same time, because they have to do the same kind of calculation 
    and aggregation as Alternate Marking requires.<a class="pilcrow" href="#section-6-7.1">¶</a>
</li>
        <li class="normal" id="section-6-7.2">The FlowMonID field is used in the AltMark Option as the identifier of the monitored flow. It represents more sensitive information 
    for network reconnaissance and may allow a flow tracking type of attack because an attacker could collect information 
    about network paths.<a class="pilcrow" href="#section-6-7.2">¶</a>
</li>
      </ul>
<p id="section-6-8">Furthermore, in a pervasive surveillance attack, the information that can be derived over time is more. 
 But, as further described hereinafter, the application of the Alternate Marking to a controlled domain 
 helps to mitigate all the above aspects of privacy concerns.<a class="pilcrow" href="#section-6-8">¶</a></p>
<p id="section-6-9">At the management plane, attacks can be set up by misconfiguring or by maliciously configuring the AltMark Option. 
 Thus, AltMark Option configuration <span class="bcp14">MUST</span> be secured in a way that authenticates authorized users and verifies the 
 integrity of configuration procedures. Solutions to ensure the integrity of the AltMark Option are outside the
 scope of this document. Also, attacks on the reporting of the statistics between the monitoring points and the
        network management system (e.g., centralized controller) can interfere with the proper functioning of the system. 
 Hence, the channels used to report back flow statistics <span class="bcp14">MUST</span> be secured.<a class="pilcrow" href="#section-6-9">¶</a></p>
<p id="section-6-10">As stated above, the precondition for the application of the Alternate Marking is that it <span class="bcp14">MUST</span> be applied 
 in specific controlled domains, thus confining the potential attack vectors within the network domain.
 A limited administrative domain provides the network administrator with the means to select, monitor, and 
 control the access to the network, making it a trusted domain. In this regard, it is expected to enforce policies
        at the domain boundaries to filter both external packets with the AltMark Option entering the domain and 
 internal packets with the AltMark Option leaving the domain. Therefore, the trusted domain is unlikely subject 
 to the hijacking of packets since packets with AltMark Option are processed and used only within the controlled domain.<a class="pilcrow" href="#section-6-10">¶</a></p>
<p id="section-6-11">As stated, the application to a controlled domain ensures control over the packets entering and leaving the domain, 
 but despite that, leakages may happen for different reasons such as a failure or a fault. In this case, nodes 
 outside the domain are expected to ignore packets with the AltMark Option since they are not configured to handle it and 
 should not process it.<a class="pilcrow" href="#section-6-11">¶</a></p>
<p id="section-6-12">Additionally, note that the AltMark Option is carried by the Options Header
 and it will have some impact on the packet sizes for the monitored flow and on the path MTU 
 since some packets might exceed the MTU. However, the relative small size (48 bits in total) 
 of these Options Headers and its application to a controlled domain help to mitigate the problem.<a class="pilcrow" href="#section-6-12">¶</a></p>
<p id="section-6-13">It is worth mentioning that the security concerns may change based on the specific deployment scenario
        and related threat analysis, which can lead to specific security solutions that are beyond the scope of this document. 
 As an example, the AltMark Option can be used as a Hop-by-Hop or Destination Option and, in case of a Destination Option, 
 multiple administrative domains may be traversed by the AltMark Option that is not confined to a single administrative domain. 
 In this case, the user, who is aware of the kind of risks, may still want to use Alternate Marking for telemetry and test purposes, but
        the controlled domain must be composed by more than one administrative domain. To this end, the inter-domain links need 
 to be secured (e.g., by IPsec or VPNs) in order to avoid external threats and realize the whole controlled domain.<a class="pilcrow" href="#section-6-13">¶</a></p>
<p id="section-6-14">It might be theoretically possible to modulate the marking or the other fields of the AltMark Option to serve as a covert channel
 to be used by an on-path observer. This may affect both the data and management plane, but, here too, the application to a 
 controlled domain helps to reduce the effects.<a class="pilcrow" href="#section-6-14">¶</a></p>
<p id="section-6-15">The Alternate-Marking application described in this document relies on a time synchronization 
 protocol. Thus, by attacking the time protocol, an attacker can potentially compromise the integrity 
 of the measurement. A detailed discussion about the threats against time protocols and 
 how to mitigate them is presented in <span>[<a class="cite xref" href="#RFC7384">RFC7384</a>]</span>. Network Time Security (NTS), 
 described in <span>[<a class="cite xref" href="#RFC8915">RFC8915</a>]</span>, is a mechanism that can be employed. Also, the time, 
 which is distributed to the network nodes through the time protocol, is centrally taken from an external accurate time source 
 such as an atomic clock or a GPS clock. By attacking the time source, it is possible to compromise the integrity 
 of the measurement as well. There are security measures that can be taken to mitigate the GPS spoofing attacks, and a 
 network administrator should certainly employ solutions to secure the network domain.<a class="pilcrow" href="#section-6-15">¶</a></p>
</section>
</div>
<div id="IANA">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-7">7. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-7-1">IANA has allocated the Option Type in
 the "Destination Options and Hop-by-Hop Options" subregistry of the
 "Internet Protocol Version 6 (IPv6) Parameters" registry (<span>&lt;<a href="https://www.iana.org/assignments/ipv6-parameters/">https://www.iana.org/assignments/ipv6-parameters/</a>&gt;</span>) as follows:<a class="pilcrow" href="#section-7-1">¶</a></p>
<span id="name-destination-options-and-hop"></span><div id="table_1">
<table class="center" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-destination-options-and-hop">Destination Options and Hop-by-Hop Options Registry</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Hex Value</th>
            <th class="text-left" colspan="3" rowspan="1">Binary Value</th>
            <th class="text-left" colspan="1" rowspan="1">Description</th>
            <th class="text-left" colspan="1" rowspan="1">Reference</th>
          </tr>
          <tr>
            <th class="text-left" colspan="1" rowspan="1"></th>
            <th class="text-left" colspan="1" rowspan="1">act</th>
            <th class="text-left" colspan="1" rowspan="1">chg</th>
            <th class="text-left" colspan="1" rowspan="1">rest</th>
            <th class="text-left" colspan="1" rowspan="1"></th>
            <th class="text-left" colspan="1" rowspan="1"></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">0x12</td>
            <td class="text-left" colspan="1" rowspan="1">00</td>
            <td class="text-left" colspan="1" rowspan="1">0</td>
            <td class="text-left" colspan="1" rowspan="1">10010</td>
            <td class="text-left" colspan="1" rowspan="1">AltMark</td>
            <td class="text-left" colspan="1" rowspan="1">RFC 9343</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<section id="section-8">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-8">8. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-8.1">8.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time class="refDate" datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time class="refDate" datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8200">[RFC8200]</dt>
        <dd>
<span class="refAuthor">Deering, S.</span> and <span class="refAuthor">R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time class="refDate" datetime="2017-07">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8200">https://www.rfc-editor.org/info/rfc8200</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9341">[RFC9341]</dt>
        <dd>
<span class="refAuthor">Fioccola, G., Ed.</span>, <span class="refAuthor">Cociglio, M.</span>, <span class="refAuthor">Mirsky, G.</span>, <span class="refAuthor">Mizrahi, T.</span>, and <span class="refAuthor">T. Zhou</span>, <span class="refTitle">"Alternate-Marking Method"</span>, <span class="seriesInfo">RFC 9341</span>, <span class="seriesInfo">DOI 10.17487/RFC9341</span>, <time class="refDate" datetime="2022-12">December 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9341">https://www.rfc-editor.org/info/rfc9341</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9342">[RFC9342]</dt>
      <dd>
<span class="refAuthor">Fioccola, G., Ed.</span>, <span class="refAuthor">Cociglio, M.</span>, <span class="refAuthor">Sapio, A.</span>, <span class="refAuthor">Sisto, R.</span>, and <span class="refAuthor">T. Zhou</span>, <span class="refTitle">"Clustered Alternate-Marking Method"</span>, <span class="seriesInfo">RFC 9342</span>, <span class="seriesInfo">DOI 10.17487/RFC9342</span>, <time class="refDate" datetime="2022-12">December 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9342">https://www.rfc-editor.org/info/rfc9342</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-8.2">8.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-idr-sr-policy-ifit">[BGP-SR-POLICY-IFIT]</dt>
        <dd>
<span class="refAuthor">Qin, F.</span>, <span class="refAuthor">Yuan, H.</span>, <span class="refAuthor">Yang, S.</span>, <span class="refAuthor">Zhou, T.</span>, and <span class="refAuthor">G. Fioccola</span>, <span class="refTitle">"BGP SR Policy Extensions to Enable IFIT"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-idr-sr-policy-ifit-05</span>, <time class="refDate" datetime="2022-10-24">24 October 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-idr-sr-policy-ifit-05">https://datatracker.ietf.org/doc/html/draft-ietf-idr-sr-policy-ifit-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HBH-OPTIONS-PROCESSING">[HBH-OPTIONS-PROCESSING]</dt>
        <dd>
<span class="refAuthor">Hinden, R.</span> and <span class="refAuthor">G. Fairhurst</span>, <span class="refTitle">"IPv6 Hop-by-Hop Options Processing Procedures"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-6man-hbh-processing-04</span>, <time class="refDate" datetime="2022-10-21">21 October 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-6man-hbh-processing-04">https://datatracker.ietf.org/doc/html/draft-ietf-6man-hbh-processing-04</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PCEP-IFIT">[PCEP-IFIT]</dt>
        <dd>
<span class="refAuthor">Yuan, H.</span>, <span class="refAuthor">Wang, X.</span>, <span class="refAuthor">Yang, P.</span>, <span class="refAuthor">Li, W.</span>, and <span class="refAuthor">G. Fioccola</span>, <span class="refTitle">"Path Computation Element Communication Protocol (PCEP) Extensions to Enable IFIT"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-pce-pcep-ifit-01</span>, <time class="refDate" datetime="2022-08-03">3 August 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-pce-pcep-ifit-01">https://datatracker.ietf.org/doc/html/draft-ietf-pce-pcep-ifit-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PROC-HBH-OPT-HEADER">[PROC-HBH-OPT-HEADER]</dt>
        <dd>
<span class="refAuthor">Peng, S.</span>, <span class="refAuthor">Li, Z.</span>, <span class="refAuthor">Xie, C.</span>, <span class="refAuthor">Qin, Z.</span>, and <span class="refAuthor">G. Mishra</span>, <span class="refTitle">"Operational Issues with Processing of the Hop-by-Hop Options Header"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-v6ops-hbh-02</span>, <time class="refDate" datetime="2022-10-21">21 October 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-v6ops-hbh-02">https://datatracker.ietf.org/doc/html/draft-ietf-v6ops-hbh-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4301">[RFC4301]</dt>
        <dd>
<span class="refAuthor">Kent, S.</span> and <span class="refAuthor">K. Seo</span>, <span class="refTitle">"Security Architecture for the Internet Protocol"</span>, <span class="seriesInfo">RFC 4301</span>, <span class="seriesInfo">DOI 10.17487/RFC4301</span>, <time class="refDate" datetime="2005-12">December 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4301">https://www.rfc-editor.org/info/rfc4301</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6437">[RFC6437]</dt>
        <dd>
<span class="refAuthor">Amante, S.</span>, <span class="refAuthor">Carpenter, B.</span>, <span class="refAuthor">Jiang, S.</span>, and <span class="refAuthor">J. Rajahalme</span>, <span class="refTitle">"IPv6 Flow Label Specification"</span>, <span class="seriesInfo">RFC 6437</span>, <span class="seriesInfo">DOI 10.17487/RFC6437</span>, <time class="refDate" datetime="2011-11">November 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6437">https://www.rfc-editor.org/info/rfc6437</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6438">[RFC6438]</dt>
        <dd>
<span class="refAuthor">Carpenter, B.</span> and <span class="refAuthor">S. Amante</span>, <span class="refTitle">"Using the IPv6 Flow Label for Equal Cost Multipath Routing and Link Aggregation in Tunnels"</span>, <span class="seriesInfo">RFC 6438</span>, <span class="seriesInfo">DOI 10.17487/RFC6438</span>, <time class="refDate" datetime="2011-11">November 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6438">https://www.rfc-editor.org/info/rfc6438</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7045">[RFC7045]</dt>
        <dd>
<span class="refAuthor">Carpenter, B.</span> and <span class="refAuthor">S. Jiang</span>, <span class="refTitle">"Transmission and Processing of IPv6 Extension Headers"</span>, <span class="seriesInfo">RFC 7045</span>, <span class="seriesInfo">DOI 10.17487/RFC7045</span>, <time class="refDate" datetime="2013-12">December 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7045">https://www.rfc-editor.org/info/rfc7045</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7384">[RFC7384]</dt>
        <dd>
<span class="refAuthor">Mizrahi, T.</span>, <span class="refTitle">"Security Requirements of Time Protocols in Packet Switched Networks"</span>, <span class="seriesInfo">RFC 7384</span>, <span class="seriesInfo">DOI 10.17487/RFC7384</span>, <time class="refDate" datetime="2014-10">October 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7384">https://www.rfc-editor.org/info/rfc7384</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8754">[RFC8754]</dt>
        <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Dukes, D., Ed.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Leddy, J.</span>, <span class="refAuthor">Matsushima, S.</span>, and <span class="refAuthor">D. Voyer</span>, <span class="refTitle">"IPv6 Segment Routing Header (SRH)"</span>, <span class="seriesInfo">RFC 8754</span>, <span class="seriesInfo">DOI 10.17487/RFC8754</span>, <time class="refDate" datetime="2020-03">March 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8754">https://www.rfc-editor.org/info/rfc8754</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8799">[RFC8799]</dt>
        <dd>
<span class="refAuthor">Carpenter, B.</span> and <span class="refAuthor">B. Liu</span>, <span class="refTitle">"Limited Domains and Internet Protocols"</span>, <span class="seriesInfo">RFC 8799</span>, <span class="seriesInfo">DOI 10.17487/RFC8799</span>, <time class="refDate" datetime="2020-07">July 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8799">https://www.rfc-editor.org/info/rfc8799</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8915">[RFC8915]</dt>
        <dd>
<span class="refAuthor">Franke, D.</span>, <span class="refAuthor">Sibold, D.</span>, <span class="refAuthor">Teichel, K.</span>, <span class="refAuthor">Dansarie, M.</span>, and <span class="refAuthor">R. Sundblad</span>, <span class="refTitle">"Network Time Security for the Network Time Protocol"</span>, <span class="seriesInfo">RFC 8915</span>, <span class="seriesInfo">DOI 10.17487/RFC8915</span>, <time class="refDate" datetime="2020-09">September 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8915">https://www.rfc-editor.org/info/rfc8915</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.fz-spring-srv6-alt-mark">[SRv6-AMM]</dt>
      <dd>
<span class="refAuthor">Fioccola, G.</span>, <span class="refAuthor">Zhou, T.</span>, and <span class="refAuthor">M. Cociglio</span>, <span class="refTitle">"Segment Routing Header encapsulation for Alternate Marking Method"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-fz-spring-srv6-alt-mark-03</span>, <time class="refDate" datetime="2022-08-05">5 August 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-fz-spring-srv6-alt-mark-03">https://datatracker.ietf.org/doc/html/draft-fz-spring-srv6-alt-mark-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">The authors would like to thank <span class="contact-name">Bob Hinden</span>, <span class="contact-name">Ole Troan</span>, <span class="contact-name">Martin Duke</span>, <span class="contact-name">Lars Eggert</span>, <span class="contact-name">Roman Danyliw</span>, 
 <span class="contact-name">Alvaro Retana</span>, <span class="contact-name">Eric Vyncke</span>, <span class="contact-name">Warren Kumari</span>, <span class="contact-name">Benjamin Kaduk</span>, <span class="contact-name">Stewart Bryant</span>, <span class="contact-name">C. A. Wood</span>, 
 <span class="contact-name">Yoshifumi Nishida</span>, <span class="contact-name">Tom Herbert</span>, <span class="contact-name">Stefano Previdi</span>, <span class="contact-name">Brian Carpenter</span>, <span class="contact-name">Greg Mirsky</span>, and <span class="contact-name">Ron Bonica</span>
 for their valuable comments and suggestions.<a class="pilcrow" href="#appendix-A-1">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Giuseppe Fioccola</span></div>
<div class="left" dir="auto"><span class="org">Huawei</span></div>
<div class="left" dir="auto"><span class="street-address">Riesstrasse, 25</span></div>
<div class="left" dir="auto">
<span class="postal-code">80992</span> <span class="locality">Munich</span>
</div>
<div class="left" dir="auto"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:giuseppe.fioccola@huawei.com">giuseppe.fioccola@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Tianran Zhou</span></div>
<div class="left" dir="auto"><span class="org">Huawei</span></div>
<div class="left" dir="auto"><span class="street-address">156 Beiqing Rd.</span></div>
<div class="left" dir="auto"><span class="locality">Beijing</span></div>
<div class="left" dir="auto"><span class="postal-code">100095</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:zhoutianran@huawei.com">zhoutianran@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Mauro Cociglio</span></div>
<div class="left" dir="auto"><span class="org">Telecom Italia</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:mauro.cociglio@outlook.com">mauro.cociglio@outlook.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Fengwei Qin</span></div>
<div class="left" dir="auto"><span class="org">China Mobile</span></div>
<div class="left" dir="auto"><span class="street-address">32 Xuanwumenxi Ave.</span></div>
<div class="left" dir="auto"><span class="locality">Beijing</span></div>
<div class="left" dir="auto"><span class="postal-code">100032</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:qinfengwei@chinamobile.com">qinfengwei@chinamobile.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Ran Pang</span></div>
<div class="left" dir="auto"><span class="org">China Unicom</span></div>
<div class="left" dir="auto"><span class="street-address">9 Shouti South Rd.</span></div>
<div class="left" dir="auto"><span class="locality">Beijing</span></div>
<div class="left" dir="auto"><span class="postal-code">100089</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:pangran@chinaunicom.cn">pangran@chinaunicom.cn</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>