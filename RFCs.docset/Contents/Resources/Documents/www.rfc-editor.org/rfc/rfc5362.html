<html><head></head><body><pre>Network Working Group                                       G. Camarillo
Request for Comments: 5362                                      Ericsson
Category: Standards Track                                   October 2008


 <span class="h1">The Session Initiation Protocol (SIP) Pending Additions Event Package</span>

Status of This Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Abstract

   This document defines the SIP Pending Additions event package.  This
   event package is used by SIP relays to inform user agents about the
   consent-related status of the entries to be added to a resource list.































<span class="grey">Camarillo                   Standards Track                     [Page 1]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-2"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


Table of Contents

   <a href="#section-1">1</a>. Introduction ....................................................<a href="#page-3">3</a>
   <a href="#section-2">2</a>. Terminology .....................................................<a href="#page-3">3</a>
   <a href="#section-3">3</a>. Overview of Operation ...........................................<a href="#page-3">3</a>
   <a href="#section-4">4</a>. XML Schema Definition ...........................................<a href="#page-3">3</a>
   <a href="#section-5">5</a>. Pending Additions Event Package Definition ......................<a href="#page-5">5</a>
      <a href="#section-5.1">5.1</a>. Event Package Name .........................................<a href="#page-5">5</a>
           <a href="#section-5.1.1">5.1.1</a>. Event Package Parameters ............................<a href="#page-5">5</a>
           <a href="#section-5.1.2">5.1.2</a>. SUBSCRIBE Bodies ....................................<a href="#page-5">5</a>
           <a href="#section-5.1.3">5.1.3</a>. Subscription Duration ...............................<a href="#page-5">5</a>
           <a href="#section-5.1.4">5.1.4</a>. NOTIFY Bodies .......................................<a href="#page-5">5</a>
           <a href="#section-5.1.5">5.1.5</a>. Notifier Processing of SUBSCRIBE Requests ...........<a href="#page-6">6</a>
           <a href="#section-5.1.6">5.1.6</a>. Notifier Generation of NOTIFY Requests ..............<a href="#page-6">6</a>
           <a href="#section-5.1.7">5.1.7</a>. Subscriber Processing of NOTIFY Requests ............<a href="#page-6">6</a>
           <a href="#section-5.1.8">5.1.8</a>. Handling of Forked Requests .........................<a href="#page-7">7</a>
           <a href="#section-5.1.9">5.1.9</a>. Rate of Notifications ...............................<a href="#page-7">7</a>
           <a href="#section-5.1.10">5.1.10</a>. State Agents .......................................<a href="#page-7">7</a>
           <a href="#section-5.1.11">5.1.11</a>. Example ............................................<a href="#page-7">7</a>
   <a href="#section-6">6</a>. Partial Notifications ...........................................<a href="#page-8">8</a>
      <a href="#section-6.1">6.1</a>. Generation of Partial Notifications ........................<a href="#page-8">8</a>
      <a href="#section-6.2">6.2</a>. Processing of Partial Notifications ........................<a href="#page-9">9</a>
      <a href="#section-6.3">6.3</a>. XML Schema for Partial Notifications .......................<a href="#page-9">9</a>
      <a href="#section-6.4">6.4</a>. Examples ..................................................<a href="#page-11">11</a>
   <a href="#section-7">7</a>. IANA Considerations ............................................<a href="#page-11">11</a>
      <a href="#section-7.1">7.1</a>. SIP Event Package Registration ............................<a href="#page-11">11</a>
      <a href="#section-7.2">7.2</a>. URN Sub-Namespace Registration: consent-status ............<a href="#page-12">12</a>
      <a href="#section-7.3">7.3</a>. XML Schema Registration: consent-status ...................<a href="#page-12">12</a>
      <a href="#section-7.4">7.4</a>. XML Schema Registration: resource-lists ...................<a href="#page-13">13</a>
      7.5. MIME Type Registration:
           application/resource-lists-diff+xml .......................<a href="#page-13">13</a>
   <a href="#section-8">8</a>. Security Considerations ........................................<a href="#page-14">14</a>
   <a href="#section-9">9</a>. Acknowledgments ................................................<a href="#page-14">14</a>
   <a href="#section-10">10</a>. Normative References ..........................................<a href="#page-14">14</a>

















<span class="grey">Camarillo                   Standards Track                     [Page 2]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-3"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/1.%20%20Introduction"></a><a class="selflink" href="#section-1" id="section-1">1</a>.  Introduction</span>

   The framework for consent-based communications in SIP [<a href="./rfc5360" title='"A Framework for Consent-Based Communications in the Session Initiation Protocol (SIP)"'>RFC5360</a>]
   identifies the need for users manipulating the translation logic at a
   relay (e.g., adding a new recipient) to be informed about the
   consent-related status of the recipients of a given translation.
   That is, the user manipulating the translation logic needs to know
   which recipients have given the relay permission to send them SIP
   requests.

   This document defines a SIP event package whereby user agents can
   subscribe to the consent-related state of the resources that are
   being added to a resource list that defines a translation.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/2.%20%20Terminology"></a><a class="selflink" href="#section-2" id="section-2">2</a>.  Terminology</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="./rfc2119" title='"Key words for use in RFCs to Indicate Requirement Levels"'>RFC2119</a>].

   Relay:  Any SIP server, be it a proxy, B2BUA (Back-to-Back User
      Agent), or some hybrid, that receives a request, translates its
      Request-URI into one or more next-hop URIs (i.e., recipient URIs),
      and delivers the request to those URIs.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/3.%20%20Overview%20of%20Operation"></a><a class="selflink" href="#section-3" id="section-3">3</a>.  Overview of Operation</span>

   A user agent subscribes to a relay using the Pending Additions event
   package.  NOTIFY requests within this event package can carry an XML
   document in the "application/resource-lists+xml" format [<a href="./rfc4826" title='"Extensible Markup Language (XML) Formats for Representing Resource Lists"'>RFC4826</a>] or
   in the "application/resource-lists-diff+xml" format, which is based
   on XML patch operations [<a href="./rfc5261" title='"An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML Path Language (XPath) Selectors"'>RFC5261</a>].

   A document in the "application/resource-lists+xml" format provides
   the user agent with the whole list of resources being added to a
   resource list along with the consent-related status of those
   resources.  A document in the "application/resource-lists-diff+xml"
   format provides the user agent with the changes the list of resources
   being added has experimented with since the last notification sent to
   the user agent.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/4.%20%20XML%20Schema%20Definition"></a><a class="selflink" href="#section-4" id="section-4">4</a>.  XML Schema Definition</span>

   This section defines the &lt;consent-status&gt; element, which provides
   consent-related information about a resource to be added to a relay's
   translation logic.





<span class="grey">Camarillo                   Standards Track                     [Page 3]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-4"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


   A consent-status document is an XML document that MUST be well-formed
   and SHOULD be valid.  Consent-status documents MUST be based on XML
   1.0 and MUST be encoded using UTF-8.  This specification makes use of
   XML namespaces for identifying consent-status documents.  The
   namespace URI for elements defined for this purpose is a URN, using
   the namespace identifier 'ietf'.  This URN is:

                   urn:ietf:params:xml:ns:consent-status

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;xs:schema targetNamespace="urn:ietf:params:xml:ns:consent-status"
     elementFormDefault="qualified"
     attributeFormDefault="unqualified"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns:tns="urn:ietf:params:xml:ns:consent-status"&gt;
      &lt;xs:element name="consent-status"&gt;
         &lt;xs:simpleType&gt;
           &lt;xs:restriction base="xs:string"&gt;
             &lt;xs:enumeration value="pending"/&gt;
             &lt;xs:enumeration value="waiting"/&gt;
             &lt;xs:enumeration value="error"/&gt;
             &lt;xs:enumeration value="denied"/&gt;
             &lt;xs:enumeration value="granted"/&gt;
           &lt;/xs:restriction&gt;
         &lt;/xs:simpleType&gt;
      &lt;/xs:element&gt;
   &lt;/xs:schema&gt;

   The &lt;consent-status&gt; element can take on the following values:

   Pending:  the relay has received a request to add a resource to its
      translation logic and will ask for permission to do so.

   Waiting:  the relay has requested permission to add the resource to
      its translation logic but has not gotten any answer from the
      resource yet.

   Error:  the relay has requested permission to add the resource to its
      translation logic and has received an error response (e.g., a SIP
      error response to the MESSAGE request sent to request permission).
      That is, the permission document requesting permission could not
      be delivered to the resource.

   Denied:  the resource has denied the relay permission to add the
      resource to the relay's translation logic.

   Granted:  the resource has granted the relay permission to add the
      resource to the relay's translation logic.



<span class="grey">Camarillo                   Standards Track                     [Page 4]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-5"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


   <a href="#section-5.1.11">Section 5.1.11</a> contains an example of an "application/resource-
   lists+xml" document that carries consent-related state information
   using &lt;consent-status&gt; elements.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.%20%20Pending%20Additions%20Event%20Package%20Definition"></a><a class="selflink" href="#section-5" id="section-5">5</a>.  Pending Additions Event Package Definition</span>

   This section provides the details for defining a SIP [<a href="./rfc3261" title='"SIP: Session Initiation Protocol"'>RFC3261</a>] event
   notification package, as specified by [<a href="./rfc3265" title='"Session Initiation Protocol (SIP)-Specific Event Notification"'>RFC3265</a>].  Support for this
   section (i.e., <a href="#section-5">Section 5</a>) is REQUIRED for implementations of this
   specification.  Support for partial notifications is optional, but if
   a subscriber signals support for partial notifications, <a href="#section-6">Section 6</a>
   MUST be implemented.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.%20%20Event%20Package%20Name"></a><a class="selflink" href="#section-5.1" id="section-5.1">5.1</a>.  Event Package Name</span>

   The name of this event package is "consent-pending-additions".  This
   package name is carried in the Event and Allow-Events header, as
   defined in [<a href="./rfc3265" title='"Session Initiation Protocol (SIP)-Specific Event Notification"'>RFC3265</a>].

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.1.%20%20Event%20Package%20Parameters"></a><a class="selflink" href="#section-5.1.1" id="section-5.1.1">5.1.1</a>.  Event Package Parameters</span>

   This package does not define any event package parameters.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.2.%20%20SUBSCRIBE%20Bodies"></a><a class="selflink" href="#section-5.1.2" id="section-5.1.2">5.1.2</a>.  SUBSCRIBE Bodies</span>

   A SUBSCRIBE for Pending Additions events MAY contain a body.  This
   body would serve the purpose of filtering the subscription.  Filter
   documents are not specified in this document and, at the time of
   writing, they are expected to be the subject of future
   standardization activity.

   A SUBSCRIBE for the Pending Additions event package MAY be sent
   without a body.  This implies that the default session policy
   filtering policy has been requested.  The default policy is that
   notifications are generated every time there is any change in the
   state of a resource in the list.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.3.%20%20Subscription%20Duration"></a><a class="selflink" href="#section-5.1.3" id="section-5.1.3">5.1.3</a>.  Subscription Duration</span>

   The default expiration time for a subscription is one hour (3600
   seconds).

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.4.%20%20NOTIFY%20Bodies"></a><a class="selflink" href="#section-5.1.4" id="section-5.1.4">5.1.4</a>.  NOTIFY Bodies</span>

   In this event package, the body of the notifications contains a
   resource list document.  This document describes the resources being
   added as recipients to a translation operation.  All subscribers and
   notifiers MUST support the "application/resource-lists+xml" data



<span class="grey">Camarillo                   Standards Track                     [Page 5]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-6"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


   format [<a href="./rfc4826" title='"Extensible Markup Language (XML) Formats for Representing Resource Lists"'>RFC4826</a>] and its extension to carry consent-related state
   information, which is specified in <a href="#section-4">Section 4</a>.  The SUBSCRIBE request
   MAY contain an Accept header field.  If no such header field is
   present, it has a default value of "application/resource-lists+xml".
   If the header field is present, it MUST include
   "application/resource-lists+xml", and MAY include any other types
   capable of representing consent-related state.

   Additionally, all subscribers and notifiers SHOULD support the
   "application/resource-lists-diff+xml" format.  <a href="#section-6">Section 6</a> discusses
   the usage of the Pending Additions event package with this format.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.5.%20%20Notifier%20Processing%20of%20SUBSCRIBE%20Requests"></a><a class="selflink" href="#section-5.1.5" id="section-5.1.5">5.1.5</a>.  Notifier Processing of SUBSCRIBE Requests</span>

   The state of the resources to be added to a relay's translation logic
   can reveal sensitive information.  Therefore, all subscriptions
   SHOULD be authenticated and then authorized before approval.
   Authorization policy is at the discretion of the administrator.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.6.%20%20Notifier%20Generation%20of%20NOTIFY%20Requests"></a><a class="selflink" href="#section-5.1.6" id="section-5.1.6">5.1.6</a>.  Notifier Generation of NOTIFY Requests</span>

   A notifier for the Pending Additions event package SHOULD include the
   &lt;consent-status&gt; element, which is defined in <a href="#section-4">Section 4</a>.  The
   &lt;consent-status&gt; element MUST be positioned as an instance of the
   &lt;any&gt; element within the &lt;entry&gt; element.

   Notifications SHOULD be generated for the Pending Additions package
   whenever there is a change in the consent-related state of a
   resource.  When a resource moves to the error, denied, or granted
   states, and once a NOTIFY request is sent, the resource is removed
   from further notifications.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.7.%20%20Subscriber%20Processing%20of%20NOTIFY%20Requests"></a><a class="selflink" href="#section-5.1.7" id="section-5.1.7">5.1.7</a>.  Subscriber Processing of NOTIFY Requests</span>

   As stated in <a href="#section-3">Section 3</a>, a document in the "application/resource-
   lists+xml" format provides the subscriber with the whole list of
   resources being added to a resource list along with the consent-
   related status of those resources.  On receiving a NOTIFY request
   with such a document, the subscriber SHOULD update its local
   information about the resources being added to the resource list with
   the information in the document.  NOTIFY requests contain full state.
   The subscriber does not need to perform any type of information
   aggregation.  <a href="#section-6">Section 6</a> discusses the use of the Pending Additions
   event package with partial notifications.







<span class="grey">Camarillo                   Standards Track                     [Page 6]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-7"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.8.%20%20Handling%20of%20Forked%20Requests"></a><a class="selflink" href="#section-5.1.8" id="section-5.1.8">5.1.8</a>.  Handling of Forked Requests</span>

   The state of a given resource list is normally handled by a server
   and stored in a repository.  Therefore, there is usually a single
   place where the resource-list state is resident.  This implies that a
   subscription for this information is readily handled by a single
   element with access to this repository.  There is, therefore, no
   compelling need for a subscription to pending additions information
   to fork.  As a result, a subscriber MUST NOT create multiple dialogs
   as a result of a single subscription request.  The required
   processing to guarantee that only a single dialog is established is
   described in <a href="./rfc3265#section-4.4.9">Section 4.4.9 of [RFC3265]</a>.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.9.%20%20Rate%20of%20Notifications"></a><a class="selflink" href="#section-5.1.9" id="section-5.1.9">5.1.9</a>.  Rate of Notifications</span>

   For reasons of congestion control, it is important that the rate of
   notifications not become excessive.  As a result, it is RECOMMENDED
   that the server does not generate notifications for a single
   subscriber at a rate faster than once every 5 seconds.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.10.%20%20State%20Agents"></a><a class="selflink" href="#section-5.1.10" id="section-5.1.10">5.1.10</a>.  State Agents</span>

   State agents have no role in the handling of this package.

<span class="h4"><a class="dashAnchor" name="//apple_ref/cpp/Section/5.1.11.%20%20Example"></a><a class="selflink" href="#section-5.1.11" id="section-5.1.11">5.1.11</a>.  Example</span>

   The following is an example of an "application/resource-lists+xml"
   document that carries consent-related state information using
   &lt;consent-status&gt; elements:

      &lt;?xml version="1.0" encoding="UTF-8"?&gt;
      &lt;resource-lists xmlns="urn:ietf:params:xml:ns:resource-lists"
       xmlns:cs="urn:ietf:params:xml:ns:consent-status"&gt;
       &lt;list&gt;
        &lt;entry uri="sip:bill@example.com"&gt;
         &lt;display-name&gt;Bill Doe&lt;/display-name&gt;
         &lt;cs:consent-status&gt;pending&lt;/cs:consent-status&gt;
        &lt;/entry&gt;
        &lt;entry uri="sip:joe@example.com"&gt;
         &lt;display-name&gt;Joe Smith&lt;/display-name&gt;
         &lt;cs:consent-status&gt;pending&lt;/cs:consent-status&gt;
        &lt;/entry&gt;
        &lt;entry uri="sip:nancy@example.com"&gt;
         &lt;display-name&gt;Nancy Gross&lt;/display-name&gt;
         &lt;cs:consent-status&gt;granted&lt;/cs:consent-status&gt;
        &lt;/entry&gt;
       &lt;/list&gt;
      &lt;/resource-lists&gt;



<span class="grey">Camarillo                   Standards Track                     [Page 7]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-8"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.%20%20Partial%20Notifications"></a><a class="selflink" href="#section-6" id="section-6">6</a>.  Partial Notifications</span>

   The lists of resources reported by this event package may contain
   many resources.  When the "application/resource-lists+xml" format is
   used and there is a change in the consent-related status of a
   resource, the server generates a notification with the whole list.
   Generating large notifications to report small changes does not meet
   the efficiency requirements of some bandwidth-constrained
   environments.  The partial notifications mechanism specified in this
   section is a more efficient way to report changes in the status of
   resources.

   Subscribers signal support for partial notifications by including the
   "application/resource-lists-diff+xml" format in the Accept header
   field of the SUBSCRIBE requests they generate.  If a client
   subscribing to the Pending Additions event package generates an
   Accept header field that includes the MIME type
   "application/resource-lists-diff+xml", the server has the option of
   returning documents in this format (instead of in the
   "application/resource-lists+xml" format).

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.1.%20%20Generation%20of%20Partial%20Notifications"></a><a class="selflink" href="#section-6.1" id="section-6.1">6.1</a>.  Generation of Partial Notifications</span>

   Once a subscription is accepted and installed, the server MUST
   deliver full state in its first notification.  To report full state,
   the server uses the regular format for resource lists.  Consequently,
   the server MUST set the Content-Type header field to the value
   'application/resource-lists+xml'.

   In order to deliver a partial notification, the server MUST set the
   Content-Type header field to the value 'application/resource-lists-
   diff+xml'.  When the server generates a partial notification, the
   server SHOULD only include the information that has changed since the
   previous notification.  It is up to the server's local policy to
   determine what is considered as a change to the previous state.

   The server MUST construct partial notifications according to the
   following logic: all information that has been added to the document
   is listed inside &lt;add&gt; elements, all information that has been
   removed from the document is listed inside &lt;remove&gt; elements, and all
   information that has been changed is listed under &lt;replace&gt; elements.

   The server MUST NOT send a new NOTIFY request with a partial
   notification until it has received a final response from the
   subscriber for the previous one or the previous NOTIFY request has
   timed out.





<span class="grey">Camarillo                   Standards Track                     [Page 8]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-9"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


   When the server receives a SUBSCRIBE request (refresh or termination)
   within the associated subscription, it SHOULD send a NOTIFY request
   containing the full document using the 'application/resource-
   lists+xml' content type.

   If the server has used a content type other than
   'application/resource-lists+xml' in notifications within the existing
   subscription and changes to deliver partial notifications, the server
   MUST deliver full state using the 'application/resource-lists+xml'
   content type before generating its first partial notification.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.2.%20%20Processing%20of%20Partial%20Notifications"></a><a class="selflink" href="#section-6.2" id="section-6.2">6.2</a>.  Processing of Partial Notifications</span>

   When a subscriber receives the first notification containing full
   state in a 'application/resource-lists+xml' MIME body, the subscriber
   MUST store the received full document as its local copy.

   When the subscriber receives a subsequent notification, the
   subscriber MUST modify its locally stored information according to
   the following logic:

   o  If the notification carries an %'application/resource-lists+xml'
      document, the subscriber MUST replace its local copy of the
      document with the document received in notification.

   o  If the notification carries an 'application/resource-lists-
      diff+xml' document, the subscriber MUST apply the changes
      indicated in the received 'application/resource-lists-diff+xml'
      document to its local copy of the full document.

   If a subscriber encounters a processing error while processing an
   'application/resource-lists-diff+xml' encoded document, the
   subscriber SHOULD renew its subscription.  A subscriber can fall back
   to normal operations by not including the 'application/resource-
   lists-diff+xml' format in a new SUBSCRIBE request.

   If the server changes the content type used in notifications within
   the existing subscription, the subscriber MUST discard all the
   previously received information and process the new content as
   specified for that content type.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.3.%20%20XML%20Schema%20for%20Partial%20Notifications"></a><a class="selflink" href="#section-6.3" id="section-6.3">6.3</a>.  XML Schema for Partial Notifications</span>

   This is the XML schema for the "application/resource-lists-diff+xml"
   data format.  The "urn:ietf:params:xml:schema:xml-patch-ops" schema
   is defined in [<a href="./rfc5261" title='"An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML Path Language (XPath) Selectors"'>RFC5261</a>].





<span class="grey">Camarillo                   Standards Track                     [Page 9]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-10"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
     &lt;xs:schema
            targetNamespace="urn:ietf:params:xml:ns:resource-lists"
            xmlns="urn:ietf:params:xml:ns:resource-lists"
            xmlns:xs="http://www.w3.org/2001/XMLSchema"
            elementFormDefault="qualified"&gt;

        &lt;!-- include patch-ops type definitions --&gt;
         &lt;xs:include
              schemaLocation="urn:ietf:params:xml:schema:patch-ops"/&gt;

        &lt;!-- partial updates --&gt;
      &lt;xs:element name="resource-lists-diff"&gt;
       &lt;xs:sequence minOccurs="0" maxOccurs="unbounded"&gt;
        &lt;xs:choice&gt;
         &lt;xs:element name="add"&gt;
          &lt;xs:complexType mixed="true"&gt;
           &lt;xs:complexContent&gt;
            &lt;xs:extension base="add"&gt;
             &lt;xs:anyAttribute processContents="lax"/&gt;
            &lt;/xs:extension&gt;
           &lt;/xs:complexContent&gt;
          &lt;/xs:complexType&gt;
         &lt;/xs:element&gt;
         &lt;xs:element name="remove"&gt;
          &lt;xs:complexType&gt;
           &lt;xs:complexContent&gt;
            &lt;xs:extension base="remove"&gt;
             &lt;xs:anyAttribute processContents="lax"/&gt;
            &lt;/xs:extension&gt;
           &lt;/xs:complexContent&gt;
          &lt;/xs:complexType&gt;
         &lt;/xs:element&gt;
         &lt;xs:element name="replace"&gt;
          &lt;xs:complexType mixed="true"&gt;
           &lt;xs:complexContent&gt;
            &lt;xs:extension base="replace"&gt;
             &lt;xs:anyAttribute processContents="lax"/&gt;
            &lt;/xs:extension&gt;
           &lt;/xs:complexContent&gt;
          &lt;/xs:complexType&gt;
         &lt;/xs:element&gt;
         &lt;xs:any namespace="##other" processContents="lax"/&gt;
        &lt;/xs:choice&gt;
       &lt;/xs:sequence&gt;
       &lt;xs:anyAttribute processContents="lax"/&gt;
      &lt;/xs:element&gt;
     &lt;/xs:schema&gt;



<span class="grey">Camarillo                   Standards Track                    [Page 10]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-11"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/6.4.%20%20Examples"></a><a class="selflink" href="#section-6.4" id="section-6.4">6.4</a>.  Examples</span>

   <a href="#section-5.1.11">Section 5.1.11</a> contains an example of an 'application/resource-
   lists+xml' document, which carries full state.  The following is an
   'application/resource-lists-diff+xml' partial update document:

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;resource-lists-diff xmlns="urn:ietf:params:xml:ns:resource-lists"
    xmlns:cs="urn:ietf:params:xml:ns:consent-status"&gt;

   &lt;replace
sel="*/list/entry[@uri='sip:bill@example.com']/cs:consent-status/text()"
   &gt;granted&lt;/replace&gt;

   &lt;/resource-lists-diff&gt;

   The following is the resulting 'application/resource-lists+xml'
   document after applying the partial update:

      &lt;?xml version="1.0" encoding="UTF-8"?&gt;
      &lt;resource-lists xmlns="urn:ietf:params:xml:ns:resource-lists"
       xmlns:cs="urn:ietf:params:xml:ns:consent-status"&gt;
       &lt;list&gt;
        &lt;entry uri="sip:bill@example.com"&gt;
         &lt;display-name&gt;Bill Doe&lt;/display-name&gt;
         &lt;cs:consent-status&gt;granted&lt;/cs:consent-status&gt;
        &lt;/entry&gt;
        &lt;entry uri="sip:joe@example.com"&gt;
         &lt;display-name&gt;Joe Smith&lt;/display-name&gt;
         &lt;cs:consent-status&gt;pending&lt;/cs:consent-status&gt;
        &lt;/entry&gt;
        &lt;entry uri="sip:nancy@example.com"&gt;
         &lt;display-name&gt;Nancy Gross&lt;/display-name&gt;
         &lt;cs:consent-status&gt;granted&lt;/cs:consent-status&gt;
        &lt;/entry&gt;
       &lt;/list&gt;
      &lt;/resource-lists&gt;

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.%20%20IANA%20Considerations"></a><a class="selflink" href="#section-7" id="section-7">7</a>.  IANA Considerations</span>

   There are five IANA considerations associated with this
   specification.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.1.%20%20SIP%20Event%20Package%20Registration"></a><a class="selflink" href="#section-7.1" id="section-7.1">7.1</a>.  SIP Event Package Registration</span>

   This specification registers a SIP event package per the procedures
   in [<a href="./rfc3265" title='"Session Initiation Protocol (SIP)-Specific Event Notification"'>RFC3265</a>].




<span class="grey">Camarillo                   Standards Track                    [Page 11]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-12"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


   Package name: consent-pending-additions

   Type: package

   Contact: Gonzalo Camarillo &lt;Gonzalo.Camarillo@ericsson.com&gt;

   Published Specification: <a href="./rfc5362">RFC 5362</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.2.%20%20URN%20Sub-Namespace%20Registration%3A%20consent-status"></a><a class="selflink" href="#section-7.2" id="section-7.2">7.2</a>.  URN Sub-Namespace Registration: consent-status</span>

   This section registers a new XML namespace per the procedures in
   [<a href="./rfc3688" title='"The IETF XML Registry"'>RFC3688</a>].

   URI: The URI for this namespace is
   urn:ietf:params:xml:ns:consent-status

   Registrant Contact: IETF SIPPING working group &lt;sipping@ietf.org&gt;,
   Gonzalo Camarillo &lt;Gonzalo.Camarillo@ericsson.com&gt;

   XML:

   &lt;?xml version="1.0"?&gt;
   &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
             "<a href="http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd</a>"&gt;
   &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
   &lt;head&gt;
     &lt;meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/&gt;
     &lt;title&gt;Pending Additions Extension Namespace&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
     &lt;h1&gt;Namespace for Consent-related Status Information Extension&lt;/h1&gt;
     &lt;h2&gt;urn:ietf:params:xml:ns:consent-status&lt;/h2&gt;
     &lt;p&gt;See &lt;a href="http://www.rfc-editor.org/rfc/rfc5362.txt"&gt;<a href="./rfc5362">RFC 5362</a>
       &lt;/a&gt;.&lt;/p&gt;
    &lt;/body&gt;
   &lt;/html&gt;

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.3.%20%20XML%20Schema%20Registration%3A%20consent-status"></a><a class="selflink" href="#section-7.3" id="section-7.3">7.3</a>.  XML Schema Registration: consent-status</span>

   This section registers an XML schema per the procedures in [<a href="./rfc3688" title='"The IETF XML Registry"'>RFC3688</a>].

   URI: urn:ietf:params:xml:schema:consent-status

   Registrant Contact: IETF SIPPING working group &lt;sipping@ietf.org&gt;,
   Gonzalo Camarillo &lt;Gonzalo.Camarillo@ericsson.com&gt;

   The XML for this schema can be found in <a href="#section-4">Section 4</a>.



<span class="grey">Camarillo                   Standards Track                    [Page 12]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-13"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.4.%20%20XML%20Schema%20Registration%3A%20resource-lists"></a><a class="selflink" href="#section-7.4" id="section-7.4">7.4</a>.  XML Schema Registration: resource-lists</span>

   This section registers an XML schema per the procedures in [<a href="./rfc3688" title='"The IETF XML Registry"'>RFC3688</a>].
   This XML schema is an extension to the XML schema (whose ID is
   resource-list) defined in [<a href="./rfc4826" title='"Extensible Markup Language (XML) Formats for Representing Resource Lists"'>RFC4826</a>].  The IANA has added a row in the
   XML schema registry with the following values:

      ID: resource-lists-diff
      URI: urn:ietf:params:xml:schema:resource-lists-diff
      Filename: resource-lists-diff
      Reference [<a href="./rfc5362">RFC5362</a>]

   Registrant Contact: IETF SIPPING working group &lt;sipping@ietf.org&gt;,
   Gonzalo Camarillo &lt;Gonzalo.Camarillo@ericsson.com&gt;

   The XML for this schema can be found in <a href="#section-6.3">Section 6.3</a>.

<span class="h3"><a class="dashAnchor" name="//apple_ref/cpp/Section/7.5.%20%20MIME%20Type%20Registration%3A%20application%2Fresource-lists-diff%2Bxml"></a><a class="selflink" href="#section-7.5" id="section-7.5">7.5</a>.  MIME Type Registration: application/resource-lists-diff+xml</span>

   This section registers the 'application/resource-lists-diff+xml' MIME
   type.

   MIME media type name:  application
   MIME subtype name:  resource-lists-diff+xml
   Mandatory parameters: none
      Optional parameters:  Same as charset parameter application/xml as
      specified in [<a href="./rfc3023" title='"XML Media Types"'>RFC3023</a>].
   Encoding considerations:  Same as encoding considerations of
      application/xml as specified in [<a href="./rfc3023" title='"XML Media Types"'>RFC3023</a>].
   Security considerations: See <a href="./rfc3023#section-10">Section 10 of [RFC3023]</a> and <a href="./rfc4826#section-7">Section 7 of
      [RFC4826]</a>.

   Interoperability considerations:  none
   Published specification:  <a href="./rfc5362">RFC 5362</a>
   Applications that use this media type:  This document type has been
      defined to support partial notifications in subscriptions to
      resource lists.

   Additional Information:

   Magic number:  none
   File extension:  .rld
   Macintosh file type code:  "TEXT"
   Personal and email address for further information:  Gonzalo
      Camarillo &lt;Gonzalo.Camarillo@ericsson.com&gt;
   Intended usage:  COMMON
   Author/Change controller:  The IETF




<span class="grey">Camarillo                   Standards Track                    [Page 13]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-14"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/8.%20%20Security%20Considerations"></a><a class="selflink" href="#section-8" id="section-8">8</a>.  Security Considerations</span>

   "A Framework for Consent-Based Communications in the Session
   Initiation Protocol (SIP)" [<a href="./rfc5360" title='"A Framework for Consent-Based Communications in the Session Initiation Protocol (SIP)"'>RFC5360</a>] discusses security-related
   issues that are related to this specification.

   Subscriptions to the Pending Additions event package can reveal
   sensitive information.  For this reason, it is RECOMMENDED that
   relays use strong means for authentication and information
   confidentiality.  Additionally, attackers may attempt to modify the
   contents of the notifications sent by a relay to its subscribers.
   Consequently, it is RECOMMENDED that relays use a strong means for
   information integrity protection.

   It is RECOMMENDED that relays authenticate subscribers using the
   normal SIP authentication mechanisms, such as Digest, as defined in
   [<a href="./rfc3261" title='"SIP: Session Initiation Protocol"'>RFC3261</a>].

   The mechanism used for conveying information to subscribers SHOULD
   ensure the integrity and confidentially of the information.  In order
   to achieve these, an end-to-end SIP encryption mechanism, such as
   S/MIME, as described in [<a href="./rfc3261" title='"SIP: Session Initiation Protocol"'>RFC3261</a>], SHOULD be used.

   If strong end-to-end security means (such as above) is not available,
   it is RECOMMENDED that hop-by-hop security based on TLS and SIPS
   URIs, as described in [<a href="./rfc3261" title='"SIP: Session Initiation Protocol"'>RFC3261</a>], is used.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/9.%20%20Acknowledgments"></a><a class="selflink" href="#section-9" id="section-9">9</a>.  Acknowledgments</span>

   Jonathan Rosenberg provided useful ideas on this document.  Ben
   Campbell and Mary Barnes performed a thorough review of this
   document.  Jari Urpalainen helped improve the partial notifications
   mechanism.

<span class="h2"><a class="dashAnchor" name="//apple_ref/cpp/Section/10.%20%20Normative%20References"></a><a class="selflink" href="#section-10" id="section-10">10</a>.  Normative References</span>

   [<a id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="https://www.rfc-editor.org/bcp/bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>, March 1997.

   [<a id="ref-RFC3023">RFC3023</a>]  Murata, M., St. Laurent, S., and D. Kohn, "XML Media
              Types", <a href="./rfc3023">RFC 3023</a>, January 2001.

   [<a id="ref-RFC3261">RFC3261</a>]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", <a href="./rfc3261">RFC 3261</a>,
              June 2002.





<span class="grey">Camarillo                   Standards Track                    [Page 14]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-15"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


   [<a id="ref-RFC3265">RFC3265</a>]  Roach, A.B., "Session Initiation Protocol (SIP)-Specific
              Event Notification", <a href="./rfc3265">RFC 3265</a>, June 2002.

   [<a id="ref-RFC3688">RFC3688</a>]  Mealling, M., "The IETF XML Registry", <a href="https://www.rfc-editor.org/bcp/bcp81">BCP 81</a>, <a href="./rfc3688">RFC 3688</a>,
              January 2004.

   [<a id="ref-RFC4826">RFC4826</a>]  Rosenberg, J., "Extensible Markup Language (XML) Formats
              for Representing Resource Lists", <a href="./rfc4826">RFC 4826</a>, May 2007.

   [<a id="ref-RFC5261">RFC5261</a>]  Urpalainen, J., "An Extensible Markup Language (XML) Patch
              Operations Framework Utilizing XML Path Language (XPath)
              Selectors", <a href="./rfc5261">RFC 5261</a>, September 2008.

   [<a id="ref-RFC5360">RFC5360</a>]  Rosenberg, J., Camarillo, G., and D. Willis, "A Framework
              for Consent-Based Communications in the Session Initiation
              Protocol (SIP)", <a href="./rfc5360">RFC 5360</a>, October 2008.

Author's Address

   Gonzalo Camarillo
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   EMail: Gonzalo.Camarillo@ericsson.com

























<span class="grey">Camarillo                   Standards Track                    [Page 15]</span></pre>
<hr class="noprint"/><!--NewPage--><pre class="newpage"><span id="page-16"></span>
<span class="grey"><a href="./rfc5362">RFC 5362</a>            Pending Additions Event Package         October 2008</span>


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a>, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in <a href="https://www.rfc-editor.org/bcp/bcp78">BCP 78</a> and <a href="https://www.rfc-editor.org/bcp/bcp79">BCP 79</a>.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   <a href="http://www.ietf.org/ipr">http://www.ietf.org/ipr</a>.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.












Camarillo                   Standards Track                    [Page 16]
</pre>
</body></html>