<!DOCTYPE html>
<html class="RFC" lang="en"><head>
<meta charset="utf-8"/>
<meta content="Common,Latin" name="scripts"/>
<meta content="initial-scale=1.0" name="viewport"/>
<title>RFC 8991: GeneRic Autonomic Signaling Protocol Application Program Interface (GRASP API)</title>
<meta content="Brian E. Carpenter" name="author"/>
<meta content="Bing Liu" name="author"/>
<meta content="Wendong Wang" name="author"/>
<meta content="Xiangyang Gong" name="author"/>
<meta content="
       This document is a conceptual outline of an Application
      Programming Interface (API) for the
      GeneRic Autonomic Signaling Protocol (GRASP). Such an API is needed for
      Autonomic Service Agents (ASAs) calling the GRASP protocol module to
      exchange Autonomic Network messages with other ASAs. Since GRASP is
      designed to support asynchronous operations, the API will need to
      be adapted according to the support for asynchronicity in various
      programming languages and operating systems. 
    " name="description"/>
<meta content="xml2rfc 3.8.0" name="generator"/>
<meta content="8991" name="rfc.number"/>
<!-- Generator version information:
  xml2rfc 3.8.0
    Python 3.6.10
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.3.5
    html5lib 1.0.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.4.2
    pycairo 1.19.0
    pycountry 19.8.18
    pyflakes 2.1.1
    PyYAML 5.3.1
    requests 2.22.0
    setuptools 40.6.2
    six 1.14.0
    WeasyPrint 51
-->
<link href="rfc8991.xml" rel="alternate" type="application/rfc+xml"/>
<link href="#copyright" rel="license"/>
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css"/>
<link href="https://dx.doi.org/10.17487/rfc8991" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <link href="https://datatracker.ietf.org/doc/draft-ietf-anima-grasp-api-10" rel="prev"/>
  </head>
<body>
<script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">RFC 8991</td>
<td class="center">GRASP API</td>
<td class="right">May 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Carpenter, et al.</td>
<td class="center">Informational</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information" id="external-metadata"></div>
<div class="document-information" id="internal-metadata">
<dl id="identifiers">
<dt class="label-stream">Stream:</dt>
<dd class="stream">Internet Engineering Task Force (IETF)</dd>
<dt class="label-rfc">RFC:</dt>
<dd class="rfc"><a class="eref" href="https://www.rfc-editor.org/rfc/rfc8991">8991</a></dd>
<dt class="label-category">Category:</dt>
<dd class="category">Informational</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time class="published" datetime="2021-05">May 2021</time>
    </dd>
<dt class="label-issn">ISSN:</dt>
<dd class="issn">2070-1721</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. Carpenter</div>
<div class="org">Univ. of Auckland</div>
</div>
<div class="author">
      <div class="author-name">B. Liu, <span class="editor">Ed.</span>
</div>
<div class="org">Huawei Technologies</div>
</div>
<div class="author">
      <div class="author-name">W. Wang</div>
<div class="org">BUPT University</div>
</div>
<div class="author">
      <div class="author-name">X. Gong</div>
<div class="org">BUPT University</div>
</div>
</dd>
</dl>
</div>
<h1 id="rfcnum">RFC 8991</h1>
<h1 id="title">GeneRic Autonomic Signaling Protocol Application Program Interface (GRASP API)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a class="selfRef" href="#abstract">Abstract</a></h2>
<p id="section-abstract-1">This document is a conceptual outline of an Application
      Programming Interface (API) for the
      GeneRic Autonomic Signaling Protocol (GRASP). Such an API is needed for
      Autonomic Service Agents (ASAs) calling the GRASP protocol module to
      exchange Autonomic Network messages with other ASAs. Since GRASP is
      designed to support asynchronous operations, the API will need to
      be adapted according to the support for asynchronicity in various
      programming languages and operating systems.<a class="pilcrow" href="#section-abstract-1">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a class="section-name selfRef" href="#name-status-of-this-memo">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
            This document is not an Internet Standards Track specification; it is
            published for informational purposes.<a class="pilcrow" href="#section-boilerplate.1-1">¶</a></p>
<p id="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by the
            Internet Engineering Steering Group (IESG).  Not all documents
            approved by the IESG are candidates for any level of Internet
            Standard; see Section 2 of RFC 7841.<a class="pilcrow" href="#section-boilerplate.1-2">¶</a></p>
<p id="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <span><a href="https://www.rfc-editor.org/info/rfc8991">https://www.rfc-editor.org/info/rfc8991</a></span>.<a class="pilcrow" href="#section-boilerplate.1-3">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a class="section-name selfRef" href="#name-copyright-notice">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a class="pilcrow" href="#section-boilerplate.2-1">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a class="pilcrow" href="#section-boilerplate.2-2">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a class="toplink" href="#" onclick="scroll(0,0)">▲</a><h2 id="name-table-of-contents">
<a class="section-name selfRef" href="#name-table-of-contents">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.1">
            <p class="keepWithNext" id="section-toc.1-1.1.1"><a class="xref" href="#section-1">1</a>.  <a class="xref" href="#name-introduction">Introduction</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a class="xref" href="#section-2">2</a>.  <a class="xref" href="#name-grasp-api-for-asa">GRASP API for ASA</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.2.2.1">
                <p class="keepWithNext" id="section-toc.1-1.2.2.1.1"><a class="xref" href="#section-2.1">2.1</a>.  <a class="xref" href="#name-design-assumptions">Design Assumptions</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a class="xref" href="#section-2.2">2.2</a>.  <a class="xref" href="#name-asynchronous-operations">Asynchronous Operations</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.1">
                    <p class="keepWithNext" id="section-toc.1-1.2.2.2.2.1.1"><a class="xref" href="#section-2.2.1">2.2.1</a>.  <a class="xref" href="#name-alternative-asynchronous-me">Alternative Asynchronous Mechanisms</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.2">
                    <p id="section-toc.1-1.2.2.2.2.2.1"><a class="xref" href="#section-2.2.2">2.2.2</a>.  <a class="xref" href="#name-multiple-negotiation-scenar">Multiple Negotiation Scenario</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.3">
                    <p id="section-toc.1-1.2.2.2.2.3.1"><a class="xref" href="#section-2.2.3">2.2.3</a>.  <a class="xref" href="#name-overlapping-sessions-and-op">Overlapping Sessions and Operations</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.2.2.4">
                    <p id="section-toc.1-1.2.2.2.2.4.1"><a class="xref" href="#section-2.2.4">2.2.4</a>.  <a class="xref" href="#name-session-termination">Session Termination</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a class="xref" href="#section-2.3">2.3</a>.  <a class="xref" href="#name-api-definition">API Definition</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3.2.1">
                    <p id="section-toc.1-1.2.2.3.2.1.1"><a class="xref" href="#section-2.3.1">2.3.1</a>.  <a class="xref" href="#name-overview-of-functions">Overview of Functions</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3.2.2">
                    <p id="section-toc.1-1.2.2.3.2.2.1"><a class="xref" href="#section-2.3.2">2.3.2</a>.  <a class="xref" href="#name-parameters-and-data-structu">Parameters and Data Structures</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3.2.3">
                    <p id="section-toc.1-1.2.2.3.2.3.1"><a class="xref" href="#section-2.3.3">2.3.3</a>.  <a class="xref" href="#name-registration">Registration</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3.2.4">
                    <p id="section-toc.1-1.2.2.3.2.4.1"><a class="xref" href="#section-2.3.4">2.3.4</a>.  <a class="xref" href="#name-discovery">Discovery</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3.2.5">
                    <p id="section-toc.1-1.2.2.3.2.5.1"><a class="xref" href="#section-2.3.5">2.3.5</a>.  <a class="xref" href="#name-negotiation">Negotiation</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3.2.6">
                    <p id="section-toc.1-1.2.2.3.2.6.1"><a class="xref" href="#section-2.3.6">2.3.6</a>.  <a class="xref" href="#name-synchronization-and-floodin">Synchronization and Flooding</a></p>
</li>
                  <li class="toc ulEmpty compact" id="section-toc.1-1.2.2.3.2.7">
                    <p id="section-toc.1-1.2.2.3.2.7.1"><a class="xref" href="#section-2.3.7">2.3.7</a>.  <a class="xref" href="#name-invalid-message-function">Invalid Message Function</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a class="xref" href="#section-3">3</a>.  <a class="xref" href="#name-security-considerations">Security Considerations</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a class="xref" href="#section-4">4</a>.  <a class="xref" href="#name-iana-considerations">IANA Considerations</a></p>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a class="xref" href="#section-5">5</a>.  <a class="xref" href="#name-references">References</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a class="xref" href="#section-5.1">5.1</a>.  <a class="xref" href="#name-normative-references">Normative References</a></p>
</li>
              <li class="toc ulEmpty compact" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a class="xref" href="#section-5.2">5.2</a>.  <a class="xref" href="#name-informative-references">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a class="xref" href="#section-appendix.a">Appendix A</a>.  <a class="xref" href="#name-error-codes">Error Codes</a></p>
<ul class="toc ulEmpty compact">
<li class="toc ulEmpty compact" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a class="xref" href="#section-a.1"></a><a class="xref" href="#name-acknowledgements">Acknowledgements</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty compact" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a class="xref" href="#section-appendix.b"></a><a class="xref" href="#name-authors-addresses">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a class="section-number selfRef" href="#section-1">1. </a><a class="section-name selfRef" href="#name-introduction">Introduction</a>
      </h2>
<p id="section-1-1">As defined in <span>[<a class="xref" href="#RFC8993">RFC8993</a>]</span>, the
      Autonomic Service Agent (ASA)
      is the atomic entity of an autonomic function, and it is instantiated
      on autonomic nodes. These nodes are members of a secure Autonomic Control Plane (ACP)
      such as defined by <span>[<a class="xref" href="#RFC8994">RFC8994</a>]</span>.<a class="pilcrow" href="#section-1-1">¶</a></p>
<p id="section-1-2">When ASAs communicate with each other, they should
      use the GeneRic Autonomic Signaling Protocol (GRASP) <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>.
      GRASP relies on the message confidentiality and integrity provided by the ACP; a 
      consequence of this is that all nodes in a
      given Autonomic Network share the same trust boundary, i.e., the boundary of the ACP.
      Nodes that have not successfully joined the ACP cannot send, receive, or intercept GRASP messages
      via the ACP and cannot usurp ACP addresses.
      An ASA runs in an ACP node and therefore benefits from the node's security properties when
      transmitting over the ACP, i.e.,
      message integrity, message confidentiality, and the fact that unauthorized nodes cannot join the ACP.
      All ASAs within a given Autonomic Network therefore trust each other's messages. For these reasons, the
      API defined in this document has no explicit security features.<a class="pilcrow" href="#section-1-2">¶</a></p>
<p id="section-1-3">An important feature of GRASP is the concept of a GRASP objective. This is a data structure
      encoded, like all GRASP messages, in Concise Binary Object Representation (CBOR) <span>[<a class="xref" href="#RFC8949">RFC8949</a>]</span>.
      Its main contents are a name and a value, explained at more length in the Terminology section
      of <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>. When an objective is passed
      from one ASA to another using GRASP, its value is either conveyed in one direction
      (by a process of synchronization or flooding) or negotiated bilaterally. The
      semantics of the value are opaque to GRASP and therefore to the API. Each objective
      must be accurately specified in a dedicated specification, as discussed in
      "Objective Options" (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8990#section-2.10">Section 2.10</a> of [<a class="xref" href="#RFC8990">RFC8990</a>]</span>).
      In particular, the specification will define the syntax and semantics of the
      value of the objective, whether and how it supports a negotiation process,
      whether it supports a dry-run mode, and any other details needed for interoperability.
      The use of CBOR, with Concise Data Definition Language (CDDL) <span>[<a class="xref" href="#RFC8610">RFC8610</a>]</span> as the data definition language,
      allows the value to be passed between ASAs regardless of the programming languages
      in use. Data storage
      and consistency during negotiation are the responsibility of the ASAs involved.
      Additionally, GRASP needs to cache the latest values of objectives that are
      received by flooding.<a class="pilcrow" href="#section-1-3">¶</a></p>
<p id="section-1-4">As <a class="xref" href="#sw">Figure 1</a> shows, a GRASP implementation could contain several
      sub-layers. The bottom layer is the GRASP base protocol module, which is only
      responsible for sending and receiving GRASP messages and maintaining
      shared data structures. Above that is the basic API described in this
      document. The upper layer contains
      some extended API functions based upon the GRASP basic protocol. For example,
      <span>[<a class="xref" href="#I-D.ietf-anima-grasp-distribution">GRASP-DISTRIB</a>]</span> describes a possible extended
      function.<a class="pilcrow" href="#section-1-4">¶</a></p>
<span id="name-software-layout"></span><div id="sw">
<figure id="figure-1">
        <div class="artwork art-text alignCenter" id="section-1-5.1">
<pre> +--------------+          +--------------+
 |     ASAs     |          |     ASAs     |
 +--------------+          +--------------+
   |          |                    |
   | +------------------+          |
   | | GRASP Extended   |          |
   | | Function API     |          |
   | +------------------+          |
   |          |                    |
+------------------------------------------+
|         Basic GRASP API Library          |
+------------------------------------------+
                    |
            IPC or system call
                    |
+------------------------------------------+
|  GRASP Core                              |
|  (functions, data structures, daemon(s)) |
+------------------------------------------+
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-1">Figure 1</a>:
<a class="selfRef" href="#name-software-layout">Software Layout</a>
        </figcaption></figure>
</div>
<p id="section-1-6">Multiple ASAs in a single node will share the same instance of GRASP, much as
      multiple applications share a single TCP/IP stack. This aspect is hidden from
      individual ASAs by the API and is not further discussed here.<a class="pilcrow" href="#section-1-6">¶</a></p>
<p id="section-1-7">It is desirable that ASAs be designed as portable user-space programs
      using a system-independent API. In many implementations, the GRASP code will therefore
      be split between user space and kernel space. In user space, library functions provide the API
      and communicate directly with ASAs. In kernel space, a daemon, or a set
      of sub-services, provides GRASP core functions that are
      independent of specific ASAs, such as multicast handling and relaying, and
      common data structures, such as the discovery cache. The GRASP API 
      library would need to communicate with the GRASP core via an interprocess
      communication (IPC) or a system call mechanism. The details of this are system-dependent.<a class="pilcrow" href="#section-1-7">¶</a></p>
<p id="section-1-8">Both the GRASP library and the extended function modules should
      be available to the ASAs.
      However, since the extended functions are expected to be added in an incremental
      manner, they will be the subject of future documents.
      This document only describes the basic GRASP API.<a class="pilcrow" href="#section-1-8">¶</a></p>
<p id="section-1-9">The functions provided by the API do not map one-to-one onto GRASP messages. Rather,
      they are intended to offer convenient support for message sequences (such as a discovery
      request followed by responses from several peers
      or a negotiation request followed by various possible responses).
      This choice was made to assist ASA programmers in writing
      code based on their application requirements rather than needing to
      understand protocol details.<a class="pilcrow" href="#section-1-9">¶</a></p>
<p id="section-1-10">
      In addition to containing the autonomic infrastructure components described in
      <span>[<a class="xref" href="#RFC8994">RFC8994</a>]</span>
      and <span>[<a class="xref" href="#RFC8995">RFC8995</a>]</span>, a simple autonomic node might contain very few ASAs.
      Such a node might directly integrate a GRASP protocol stack in
      its code and therefore not
      require this API to be installed. However, the programmer would need
      a deeper understanding of the GRASP protocol than what is needed to use the API.<a class="pilcrow" href="#section-1-10">¶</a></p>
<p id="section-1-11">This document gives a conceptual outline of the API. It is not a formal
      specification for any particular programming language or operating system,
      and it is expected that details will be clarified in individual implementations.<a class="pilcrow" href="#section-1-11">¶</a></p>
</section>
</div>
<section id="section-2">
      <h2 id="name-grasp-api-for-asa">
<a class="section-number selfRef" href="#section-2">2. </a><a class="section-name selfRef" href="#name-grasp-api-for-asa">GRASP API for ASA</a>
      </h2>
<section id="section-2.1">
        <h3 id="name-design-assumptions">
<a class="section-number selfRef" href="#section-2.1">2.1. </a><a class="section-name selfRef" href="#name-design-assumptions">Design Assumptions</a>
        </h3>
<p id="section-2.1-1">The design assumes that an 
        ASA needs to call a separate GRASP implementation. The latter handles protocol details
        (security, sending and listening for GRASP messages, waiting, caching
        discovery results, negotiation looping, sending and receiving
        synchronization data, etc.) but understands nothing about individual
        GRASP objectives (see <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8990#section-2.10">Section 2.10</a> of [<a class="xref" href="#RFC8990">RFC8990</a>]</span>). 
        The semantics of objectives are unknown to the GRASP
        protocol and are handled only by the ASAs. Thus, this is an
        abstract API for use by ASAs. Individual 
        language bindings should be defined in separate documents.<a class="pilcrow" href="#section-2.1-1">¶</a></p>
<p id="section-2.1-2">Different ASAs may utilize GRASP features differently, by using GRASP for:<a class="pilcrow" href="#section-2.1-2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1-3.1">discovery purposes only.<a class="pilcrow" href="#section-2.1-3.1">¶</a>
</li>
          <li class="normal" id="section-2.1-3.2">negotiation but only as an initiator (client).<a class="pilcrow" href="#section-2.1-3.2">¶</a>
</li>
          <li class="normal" id="section-2.1-3.3">negotiation but only as a responder.<a class="pilcrow" href="#section-2.1-3.3">¶</a>
</li>
          <li class="normal" id="section-2.1-3.4">negotiation as an initiator or responder.<a class="pilcrow" href="#section-2.1-3.4">¶</a>
</li>
          <li class="normal" id="section-2.1-3.5">synchronization but only as an initiator (recipient).<a class="pilcrow" href="#section-2.1-3.5">¶</a>
</li>
          <li class="normal" id="section-2.1-3.6">synchronization but only as a responder and/or flooder.<a class="pilcrow" href="#section-2.1-3.6">¶</a>
</li>
          <li class="normal" id="section-2.1-3.7">synchronization as an initiator, responder, and/or flooder.<a class="pilcrow" href="#section-2.1-3.7">¶</a>
</li>
        </ul>
<p id="section-2.1-4">
        The API also assumes that one ASA may support multiple objectives. Nothing prevents
        an ASA from supporting some objectives for synchronization and others for negotiation.<a class="pilcrow" href="#section-2.1-4">¶</a></p>
<p id="section-2.1-5">The API design assumes that the operating system and programming language
        provide a mechanism for simultaneous asynchronous operations. This is discussed
        in detail in <a class="xref" href="#asynchop">Section 2.2</a>.<a class="pilcrow" href="#section-2.1-5">¶</a></p>
<p id="section-2.1-6">A few items are out of scope in this version, since practical experience is required before including them:<a class="pilcrow" href="#section-2.1-6">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.1-7.1">Authorization of ASAs is not defined as part of GRASP and is a subject for future study.<a class="pilcrow" href="#section-2.1-7.1">¶</a>
</li>
          <li class="normal" id="section-2.1-7.2">User-supplied explicit locators for an objective are not supported. The GRASP core will
          supply the locator, using the IP address of the node concerned.<a class="pilcrow" href="#section-2.1-7.2">¶</a>
</li>
          <li class="normal" id="section-2.1-7.3">The rapid mode of GRASP (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8990#section-2.5.4">Section 2.5.4</a> of [<a class="xref" href="#RFC8990">RFC8990</a>]</span>)
          is not supported.<a class="pilcrow" href="#section-2.1-7.3">¶</a>
</li>
        </ul>
</section>
<div id="asynchop">
<section id="section-2.2">
        <h3 id="name-asynchronous-operations">
<a class="section-number selfRef" href="#section-2.2">2.2. </a><a class="section-name selfRef" href="#name-asynchronous-operations">Asynchronous Operations</a>
        </h3>
<p id="section-2.2-1">GRASP depends on asynchronous operations and wait states, and some of its messages
    are not idempotent, meaning that repeating a message may cause repeated changes
    of state in the recipient ASA. Many ASAs will
    need to support several concurrent operations; for example, an ASA might need
    to negotiate one objective with a peer while discovering and synchronizing
    a different objective with a different peer. Alternatively, an ASA that
    acts as a resource manager might need to run simultaneous negotiations
    for a given objective with multiple different peers. Such an ASA will probably 
    need to support uninterruptible atomic changes to its internal data structures,
    using a mechanism provided by the operating system and programming language in use.<a class="pilcrow" href="#section-2.2-1">¶</a></p>
<div id="asynchmech">
<section id="section-2.2.1">
          <h4 id="name-alternative-asynchronous-me">
<a class="section-number selfRef" href="#section-2.2.1">2.2.1. </a><a class="section-name selfRef" href="#name-alternative-asynchronous-me">Alternative Asynchronous Mechanisms</a>
          </h4>
<p id="section-2.2.1-1">Some ASAs need to support asynchronous operations; therefore,
    the GRASP core must do so. Depending on both the
    operating system and the programming language in use, there are various
    techniques for such parallel operations, three of which we
    consider here: multithreading, an event loop structure using polling,
    and an event loop structure using callback functions.<a class="pilcrow" href="#section-2.2.1-1">¶</a></p>
<ol class="normal type-1" id="section-2.2.1-2" start="1" type="1">
          <li id="section-2.2.1-2.1">In multithreading, the operating system and language will provide
    the necessary support for asynchronous operations, including creation
    of new threads, context switching between threads, queues, locks,
    and implicit wait states. In this case, API calls can be treated as simple
    synchronous function calls within their own thread, even if the function includes
    wait states, blocking, and queueing. Concurrent operations will each run
    in their own threads. For example, the discover() call may not return
    until discovery results have arrived or a timeout has occurred. If the ASA
    has other work to do, the discover() call must be in a thread of its own.<a class="pilcrow" href="#section-2.2.1-2.1">¶</a>
</li>
            <li id="section-2.2.1-2.2">In an event loop implementation with polling, blocking calls
    are not acceptable. Therefore, all calls must be non-blocking, and
    the main loop could support multiple GRASP sessions in parallel
    by repeatedly polling each one for a change of state. To facilitate this, the
    API implementation would provide non-blocking versions of all the functions that
    otherwise involve blocking and queueing. In these calls, a 'noReply' code
    will be returned by each call instead of blocking, until such time as the event
    for which it is waiting (or a failure) has occurred. Thus, for example, discover()
    would return 'noReply' instead of waiting until discovery has succeeded
    or timed out. The discover() call would be repeated in every cycle of the
    main loop until it completes. Effectively, it becomes a polling call.<a class="pilcrow" href="#section-2.2.1-2.2">¶</a>
</li>
            <li id="section-2.2.1-2.3">It was noted earlier that some GRASP messages are not idempotent; in particular,
          this applies to each step in a negotiation session -- sending the same message
          twice might produce unintended side effects. This is not affected by
          event loop polling: repeating a call after a 'noReply' does not
          repeat a message; it simply checks whether a reply has been received.<a class="pilcrow" href="#section-2.2.1-2.3">¶</a>
</li>
            <li id="section-2.2.1-2.4">In an event loop implementation with callbacks, the ASA programmer would
    provide a callback function for each asynchronous operation.
    This would be called asynchronously when a reply is received or a failure such as a
    timeout occurs.<a class="pilcrow" href="#section-2.2.1-2.4">¶</a>
</li>
          </ol>
</section>
</div>
<div id="multineg">
<section id="section-2.2.2">
          <h4 id="name-multiple-negotiation-scenar">
<a class="section-number selfRef" href="#section-2.2.2">2.2.2. </a><a class="section-name selfRef" href="#name-multiple-negotiation-scenar">Multiple Negotiation Scenario</a>
          </h4>
<p id="section-2.2.2-1">The design of GRASP allows the following scenario. Consider
    an ASA "A" that acts as a resource allocator for some objective. An ASA "B" launches
    a negotiation with "A" to obtain or release a quantity of the resource. While this negotiation
    is under way, "B" chooses to launch a second simultaneous negotiation with "A" for a different
    quantity of the same resource. "A" must therefore conduct two separate negotiation sessions
    at the same time with the same peer and must not mix them up.<a class="pilcrow" href="#section-2.2.2-1">¶</a></p>
<p id="section-2.2.2-2">Note that ASAs could be designed to avoid such a scenario, i.e., restricted to exactly one
    negotiation session at a time for a given objective, but this would be a voluntary
    restriction not required by the GRASP protocol. In fact, GRASP assumes
    that any ASA managing a resource may need to conduct multiple parallel negotiations,
    possibly with the same peer. Communication patterns could be very complex, with a group
    of ASAs overlapping negotiations among themselves, as described in 
    <span>[<a class="xref" href="#I-D.ciavaglia-anima-coordination">ANIMA-COORD</a>]</span>.
    Therefore, the API design allows for such scenarios.<a class="pilcrow" href="#section-2.2.2-2">¶</a></p>
<p id="section-2.2.2-3">In the callback model, for the scenario just described,
    the ASAs "A" and "B" will each provide two instances of the callback function, one for
    each session. For this reason, each ASA must be
    able to distinguish the two sessions, and the peer's IP address is not sufficient for this.  
    It is also not safe to rely on transport port numbers for this, since future variants of GRASP
    might use shared ports rather than a separate port per session. Hence, the GRASP design
    includes a Session ID. Thus, when necessary, a session handle (see the next section) is
    used in the API to distinguish simultaneous GRASP sessions from each other, so that any
    number of sessions may proceed asynchronously in parallel.<a class="pilcrow" href="#section-2.2.2-3">¶</a></p>
</section>
</div>
<div id="overlap">
<section id="section-2.2.3">
          <h4 id="name-overlapping-sessions-and-op">
<a class="section-number selfRef" href="#section-2.2.3">2.2.3. </a><a class="section-name selfRef" href="#name-overlapping-sessions-and-op">Overlapping Sessions and Operations</a>
          </h4>
<p id="section-2.2.3-1">A GRASP session consists of a finite sequence of messages (for discovery,
        synchronization, or negotiation) between two ASAs. It is uniquely identified
        on the wire
        by a pseudorandom Session ID plus the IP address
        of the initiator of the session. Further details are given in
        "Session Identifier (Session ID)" (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8990#section-2.7">Section 2.7</a> of [<a class="xref" href="#RFC8990">RFC8990</a>]</span>).<a class="pilcrow" href="#section-2.2.3-1">¶</a></p>
<p id="section-2.2.3-2">On the first call in a new GRASP session, the API returns a 'session_handle'
        handle that uniquely identifies the session within the API, so that multiple overlapping
        sessions can be distinguished. A likely implementation is to form the
        handle from the underlying GRASP Session ID and IP address.
        This handle must be used in all subsequent
        calls for the same session. Also see <a class="xref" href="#sessn">Section 2.3.2.8</a>.<a class="pilcrow" href="#section-2.2.3-2">¶</a></p>
<p id="section-2.2.3-3">An additional mechanism that might increase efficiency for polling
    implementations is to add a general call, say notify(), which would check the
    status of all outstanding operations for the calling ASA and return the session_handle values
    for all sessions that have changed state. This would eliminate the need for repeated calls
    to the individual functions returning a 'noReply'. This call is not described below
    as the details are likely to be implementation specific.<a class="pilcrow" href="#section-2.2.3-3">¶</a></p>
<p id="section-2.2.3-4">An implication of the above for all GRASP implementations is that the GRASP core
    must keep state for each GRASP operation in progress, most likely keyed by the GRASP
    Session ID and the GRASP source address of the session initiator. Even in a threaded
    implementation, the GRASP core will need such state internally. The session_handle
    parameter exposes this aspect of the implementation.<a class="pilcrow" href="#section-2.2.3-4">¶</a></p>
</section>
</div>
<div id="termin">
<section id="section-2.2.4">
          <h4 id="name-session-termination">
<a class="section-number selfRef" href="#section-2.2.4">2.2.4. </a><a class="section-name selfRef" href="#name-session-termination">Session Termination</a>
          </h4>
<p id="section-2.2.4-1">GRASP sessions may terminate for numerous reasons. 
        A session ends when discovery succeeds or times out, negotiation succeeds
        or fails, a synchronization result is delivered, the other end
        fails to respond before a timeout expires, a loop count expires, or
        a network socket error occurs. Note that a timeout at one end of
        a session might result in a timeout or a socket error at the other end,
        since GRASP does not send error messages in this case. In all cases, the API
        will return an appropriate code to the caller, which should then release any reserved
        resources. After failure cases, the GRASP specification recommends an exponential
        backoff before retrying.<a class="pilcrow" href="#section-2.2.4-1">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-2.3">
        <h3 id="name-api-definition">
<a class="section-number selfRef" href="#section-2.3">2.3. </a><a class="section-name selfRef" href="#name-api-definition">API Definition</a>
        </h3>
<section id="section-2.3.1">
          <h4 id="name-overview-of-functions">
<a class="section-number selfRef" href="#section-2.3.1">2.3.1. </a><a class="section-name selfRef" href="#name-overview-of-functions">Overview of Functions</a>
          </h4>
<p id="section-2.3.1-1">The functions provided by the API fall into several groups:<a class="pilcrow" href="#section-2.3.1-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.1-2">
            <dt id="section-2.3.1-2.1">Registration:</dt>
            <dd id="section-2.3.1-2.2" style="margin-left: 1.5em"> These functions allow an ASA to register itself
            with the GRASP core and allow a registered ASA to register the GRASP
            objectives that it will manipulate.<a class="pilcrow" href="#section-2.3.1-2.2">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.3.1-2.3">Discovery:</dt>
            <dd id="section-2.3.1-2.4" style="margin-left: 1.5em"> This function allows an ASA that needs to initiate
            negotiation or synchronization of a particular objective to discover
            a peer willing to respond.<a class="pilcrow" href="#section-2.3.1-2.4">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.3.1-2.5">Negotiation:</dt>
            <dd id="section-2.3.1-2.6" style="margin-left: 1.5em"> These functions allow an ASA to act as an initiator
            (requester) or responder (listener) for a GRASP negotiation session. 
            After initiation, negotiation is a symmetric process, so most of the
            functions can be used by either party.<a class="pilcrow" href="#section-2.3.1-2.6">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.3.1-2.7">Synchronization:</dt>
            <dd id="section-2.3.1-2.8" style="margin-left: 1.5em"> These functions allow an ASA to act as an initiator
            (requester) or responder (listener and data source) for a GRASP
            synchronization session.<a class="pilcrow" href="#section-2.3.1-2.8">¶</a>
</dd>
            <dd class="break"></dd>
<dt id="section-2.3.1-2.9">Flooding:</dt>
            <dd id="section-2.3.1-2.10" style="margin-left: 1.5em"> These functions allow an ASA to send and receive
            an objective that is flooded to all nodes of the ACP.<a class="pilcrow" href="#section-2.3.1-2.10">¶</a>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-2.3.1-3">Some example logic flows for a resource management ASA are given in 
          <span>[<a class="xref" href="#I-D.ietf-anima-asa-guidelines">ASA-GUIDE</a>]</span>, which may be of help
          in understanding the following descriptions.
          The next section describes parameters and data structures used in multiple API calls. 
          The following sections describe various groups of function APIs. Those APIs that
          do not list asynchronous mechanisms are implicitly synchronous in their behavior.<a class="pilcrow" href="#section-2.3.1-3">¶</a></p>
</section>
<section id="section-2.3.2">
          <h4 id="name-parameters-and-data-structu">
<a class="section-number selfRef" href="#section-2.3.2">2.3.2. </a><a class="section-name selfRef" href="#name-parameters-and-data-structu">Parameters and Data Structures</a>
          </h4>
<section id="section-2.3.2.1">
            <h5 id="name-integers">
<a class="section-number selfRef" href="#section-2.3.2.1">2.3.2.1. </a><a class="section-name selfRef" href="#name-integers">Integers</a>
            </h5>
<p id="section-2.3.2.1-1">In this API, integers are assumed to be 32-bit unsigned integers (uint32_t) unless otherwise indicated.<a class="pilcrow" href="#section-2.3.2.1-1">¶</a></p>
</section>
<section id="section-2.3.2.2">
            <h5 id="name-errorcode">
<a class="section-number selfRef" href="#section-2.3.2.2">2.3.2.2. </a><a class="section-name selfRef" href="#name-errorcode">Errorcode</a>
            </h5>
<p id="section-2.3.2.2-1">All functions in the API have an unsigned 'errorcode' integer as their return value (the first return value
       in languages that allow multiple return values). An errorcode of zero indicates success.
       Any other value indicates failure of some kind. The first three errorcodes have special importance:<a class="pilcrow" href="#section-2.3.2.2-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.2.2-2">
              <dt id="section-2.3.2.2-2.1">1 - Declined:</dt>
              <dd id="section-2.3.2.2-2.2" style="margin-left: 1.5em"> used to indicate that the other end has sent a GRASP Negotiation End message (M_END) with a Decline option (O_DECLINE).<a class="pilcrow" href="#section-2.3.2.2-2.2">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.2-2.3">2 - No reply:</dt>
              <dd id="section-2.3.2.2-2.4" style="margin-left: 1.5em"> used in non-blocking calls to indicate that the other end has sent no reply so far (see <a class="xref" href="#asynchop">Section 2.2</a>).<a class="pilcrow" href="#section-2.3.2.2-2.4">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.2-2.5">3 - Unspecified error:</dt>
              <dd id="section-2.3.2.2-2.6" style="margin-left: 1.5em"> used when no more specific error codes apply.<a class="pilcrow" href="#section-2.3.2.2-2.6">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-2.3.2.2-3"><a class="xref" href="#ErrAppx">Appendix A</a> gives a full list of currently suggested error codes, based on
       implementation experience. While there is no absolute requirement for all implementations
       to use the same error codes, this is highly recommended for portability of applications.<a class="pilcrow" href="#section-2.3.2.2-3">¶</a></p>
</section>
<div id="tout">
<section id="section-2.3.2.3">
            <h5 id="name-timeout">
<a class="section-number selfRef" href="#section-2.3.2.3">2.3.2.3. </a><a class="section-name selfRef" href="#name-timeout">Timeout</a>
            </h5>
<p id="section-2.3.2.3-1">Whenever a 'timeout' parameter appears, it is an unsigned integer expressed
       in milliseconds. If it is zero, the GRASP 
       default timeout (GRASP_DEF_TIMEOUT; see <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>) will apply.  An exception is the discover() function, which has a different interpretation of a zero timeout. If no response
       is received before the timeout expires, the call will fail unless otherwise noted.<a class="pilcrow" href="#section-2.3.2.3-1">¶</a></p>
</section>
</div>
<section id="section-2.3.2.4">
            <h5 id="name-objective">
<a class="section-number selfRef" href="#section-2.3.2.4">2.3.2.4. </a><a class="section-name selfRef" href="#name-objective">Objective</a>
            </h5>
<p id="section-2.3.2.4-1">An 'objective' parameter is a data structure with the following components:<a class="pilcrow" href="#section-2.3.2.4-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.2.4-2">
              <dt id="section-2.3.2.4-2.1">name (UTF-8 string):</dt>
              <dd id="section-2.3.2.4-2.2" style="margin-left: 1.5em">The objective's name<a class="pilcrow" href="#section-2.3.2.4-2.2">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.4-2.3">neg (Boolean flag):</dt>
              <dd id="section-2.3.2.4-2.4" style="margin-left: 1.5em">True if objective supports negotiation (default False)<a class="pilcrow" href="#section-2.3.2.4-2.4">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.4-2.5">synch (Boolean flag):</dt>
              <dd id="section-2.3.2.4-2.6" style="margin-left: 1.5em">True if objective supports synchronization (default False)<a class="pilcrow" href="#section-2.3.2.4-2.6">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.4-2.7">dry (Boolean flag):</dt>
              <dd id="section-2.3.2.4-2.8" style="margin-left: 1.5em">
                <p id="section-2.3.2.4-2.8.1">True if objective supports dry-run negotiation (default False)<a class="pilcrow" href="#section-2.3.2.4-2.8.1">¶</a></p>
<span class="break"></span><dl class="dlParallel dlCompact" id="section-2.3.2.4-2.8.2">
                  <dt id="section-2.3.2.4-2.8.2.1">Note 1:</dt>
                  <dd id="section-2.3.2.4-2.8.2.2" style="margin-left: 1.5em">Only one of 'synch' or 'neg' may be True.<a class="pilcrow" href="#section-2.3.2.4-2.8.2.2">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-2.3.2.4-2.8.2.3">Note 2:</dt>
                  <dd id="section-2.3.2.4-2.8.2.4" style="margin-left: 1.5em">'dry' must not be True unless 'neg' is also True.<a class="pilcrow" href="#section-2.3.2.4-2.8.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
<dt id="section-2.3.2.4-2.8.2.5">Note 3:</dt>
                  <dd id="section-2.3.2.4-2.8.2.6" style="margin-left: 1.5em"> In some programming languages, the preferred implementation
                  may be to represent the Boolean flags as bits in a single byte,
                  which is how they are encoded in GRASP messages.
                  In other languages, an enumeration might be preferable.<a class="pilcrow" href="#section-2.3.2.4-2.8.2.6">¶</a>
</dd>
                <dd class="break"></dd>
</dl>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.4-2.9">loop_count (unsigned integer, uint8_t):</dt>
              <dd id="section-2.3.2.4-2.10" style="margin-left: 1.5em">Limit on negotiation steps, etc. (default GRASP_DEF_LOOPCT;
        see <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>).
        The 'loop_count' is set to a suitable value by the initiator of a negotiation, to prevent
                indefinite loops. It is also used to limit the propagation of discovery and flood messages.<a class="pilcrow" href="#section-2.3.2.4-2.10">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.4-2.11">value:</dt>
              <dd id="section-2.3.2.4-2.12" style="margin-left: 1.5em">
                <p id="section-2.3.2.4-2.12.1">A specific data structure expressing the value of the objective. The
                format is language dependent, with the constraint that it can be validly
                represented in CBOR <span>[<a class="xref" href="#RFC8949">RFC8949</a>]</span>.<a class="pilcrow" href="#section-2.3.2.4-2.12.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.2.4-2.12.2.1">An important advantage of CBOR is that the value of an objective can be completely
                opaque to the GRASP core yet pass transparently through it to and from the ASA.
                Although the GRASP core must validate the format and syntax of GRASP messages,
                it cannot validate the value of an objective; all it can do is detect 
                malformed CBOR. The handling of decoding errors depends on the CBOR library
                in use, but a corresponding error code ('CBORfail') is defined in the API
                and will be returned to the ASA if a faulty message can be assigned
                to a current GRASP session. However, it is the responsibility of
                each ASA to validate the value of a received objective, as discussed
                in <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8949#section-5.3">Section 5.3</a> of [<a class="xref" href="#RFC8949">RFC8949</a>]</span>.
                If the programming language in use is suitably object-oriented, the GRASP API
                may deserialize the value and present it to the ASA as an object.
                If not, it will be presented as a CBOR data item. In all cases, the syntax
                and semantics of the objective value are the responsibility of the ASA.<a class="pilcrow" href="#section-2.3.2.4-2.12.2.1">¶</a>
</li>
                  <li class="ulEmpty normal" id="section-2.3.2.4-2.12.2.2">A requirement for all language mappings and all API implementations is
                that, regardless of what other options exist for a language-specific representation
                of the value, there is always an option to use a raw CBOR data item as the value.
                The API will then wrap this with CBOR Tag 24 as an encoded CBOR data item
                for transmission via GRASP, and unwrap it after reception. By this means,
                ASAs will be able to communicate regardless of programming language.<a class="pilcrow" href="#section-2.3.2.4-2.12.2.2">¶</a>
</li>
                </ul>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-2.3.2.4-3">The 'name' and 'value' fields are of variable length. GRASP does not set a maximum
                length for these fields, but only for the total length of a GRASP message. Implementations
                might impose length limits.<a class="pilcrow" href="#section-2.3.2.4-3">¶</a></p>
<p id="section-2.3.2.4-4">
           An example data structure definition for an objective in the C language,
           using at least the C99 version, and
           assuming the use of a particular CBOR library <span>[<a class="xref" href="#libcbor">libcbor</a>]</span>, is:<a class="pilcrow" href="#section-2.3.2.4-4">¶</a></p>
<div id="section-2.3.2.4-5">
<pre class="sourcecode lang-c"> typedef struct {
    unsigned char *name;
    uint8_t flags;            // flag bits as defined by GRASP
    uint8_t loop_count;
    uint32_t value_size;      // size of value in bytes
    cbor_mutable_data cbor_value;
                             // CBOR bytestring (libcbor/cbor/data.h)
                 } objective;
</pre><a class="pilcrow" href="#section-2.3.2.4-5">¶</a>
</div>
<p id="section-2.3.2.4-6">
           An example data structure definition for an objective in the Python language (version 3.4 or later) is:<a class="pilcrow" href="#section-2.3.2.4-6">¶</a></p>
<div id="section-2.3.2.4-7">
<pre class="sourcecode lang-python"> class objective:
    """A GRASP objective"""
    def __init__(self, name):
        self.name = name        #Unique name (string)
        self.negotiate = False  #True if negotiation supported
        self.dryrun = False     #True if dry-run supported
        self.synch = False      #True if synchronization supported
        self.loop_count = GRASP_DEF_LOOPCT  # Default starting value
        self.value = None       #Place holder; any Python object
</pre><a class="pilcrow" href="#section-2.3.2.4-7">¶</a>
</div>
</section>
<div id="asaL">
<section id="section-2.3.2.5">
            <h5 id="name-asa_locator">
<a class="section-number selfRef" href="#section-2.3.2.5">2.3.2.5. </a><a class="section-name selfRef" href="#name-asa_locator">asa_locator</a>
            </h5>
<p id="section-2.3.2.5-1">An 'asa_locator' parameter is a data structure with the following contents:<a class="pilcrow" href="#section-2.3.2.5-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.2.5-2">
              <dt id="section-2.3.2.5-2.1">locator:</dt>
              <dd id="section-2.3.2.5-2.2" style="margin-left: 1.5em">The actual locator, either an IP address or an ASCII string.<a class="pilcrow" href="#section-2.3.2.5-2.2">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.5-2.3">ifi (unsigned integer):</dt>
              <dd id="section-2.3.2.5-2.4" style="margin-left: 1.5em">The interface identifier index via which this was discovered (of limited
              use to most ASAs).<a class="pilcrow" href="#section-2.3.2.5-2.4">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.5-2.5">expire (system dependent type):</dt>
              <dd id="section-2.3.2.5-2.6" style="margin-left: 1.5em">The time on the local system clock when this locator will expire from the cache.<a class="pilcrow" href="#section-2.3.2.5-2.6">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.5-2.7">The following covers all locator types currently supported by GRASP:</dt>
              <dd id="section-2.3.2.5-2.8" style="margin-left: 1.5em">
                <ul class="normal">
<li class="normal" id="section-2.3.2.5-2.8.1.1">is_ipaddress (Boolean) - True if the locator is an IP address.<a class="pilcrow" href="#section-2.3.2.5-2.8.1.1">¶</a>
</li>
                  <li class="normal" id="section-2.3.2.5-2.8.1.2">is_fqdn (Boolean) -  True if the locator is a Fully Qualified Domain Name (FQDN).<a class="pilcrow" href="#section-2.3.2.5-2.8.1.2">¶</a>
</li>
                  <li class="normal" id="section-2.3.2.5-2.8.1.3">is_uri (Boolean) -  True if the locator is a URI.<a class="pilcrow" href="#section-2.3.2.5-2.8.1.3">¶</a>
</li>
                </ul>
<p id="section-2.3.2.5-2.8.2">These options are mutually exclusive. Depending on the programming language, they could
   be represented as a bit pattern or an enumeration.<a class="pilcrow" href="#section-2.3.2.5-2.8.2">¶</a></p>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.5-2.9">diverted (Boolean):</dt>
              <dd id="section-2.3.2.5-2.10" style="margin-left: 1.5em">True if the locator was discovered via a Divert option.<a class="pilcrow" href="#section-2.3.2.5-2.10">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.5-2.11">protocol (unsigned integer):</dt>
              <dd id="section-2.3.2.5-2.12" style="margin-left: 1.5em">Applicable transport protocol (IPPROTO_TCP or IPPROTO_UDP).
              These constants are defined in the CDDL specification of GRASP <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>.<a class="pilcrow" href="#section-2.3.2.5-2.12">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.5-2.13">port (unsigned integer):</dt>
              <dd id="section-2.3.2.5-2.14" style="margin-left: 1.5em">Applicable port number.<a class="pilcrow" href="#section-2.3.2.5-2.14">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
<p id="section-2.3.2.5-3">The 'locator' field is of variable length in the case of an FQDN or a URI. GRASP does not set a maximum
                length for this field, but only for the total length of a GRASP message. Implementations
                might impose length limits.<a class="pilcrow" href="#section-2.3.2.5-3">¶</a></p>
<p id="section-2.3.2.5-4">It should be noted that when one ASA discovers the asa_locator of another, there is no
            explicit authentication mechanism. In accordance with the trust model provided by the
            secure ACP, ASAs are presumed to provide correct locators in response to discovery.
            See "Locator Options" (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8990#section-2.9.5">Section 2.9.5</a> of [<a class="xref" href="#RFC8990">RFC8990</a>]</span>) for further details.<a class="pilcrow" href="#section-2.3.2.5-4">¶</a></p>
</section>
</div>
<section id="section-2.3.2.6">
            <h5 id="name-tagged_objective">
<a class="section-number selfRef" href="#section-2.3.2.6">2.3.2.6. </a><a class="section-name selfRef" href="#name-tagged_objective">Tagged_objective</a>
            </h5>
<p id="section-2.3.2.6-1">A 'tagged_objective' parameter is a data structure with the following contents:<a class="pilcrow" href="#section-2.3.2.6-1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.2.6-2">
              <dt id="section-2.3.2.6-2.1">objective:</dt>
              <dd id="section-2.3.2.6-2.2" style="margin-left: 1.5em">An objective.<a class="pilcrow" href="#section-2.3.2.6-2.2">¶</a>
</dd>
              <dd class="break"></dd>
<dt id="section-2.3.2.6-2.3">locator:</dt>
              <dd id="section-2.3.2.6-2.4" style="margin-left: 1.5em">The asa_locator associated with the objective, or a null value.<a class="pilcrow" href="#section-2.3.2.6-2.4">¶</a>
</dd>
            <dd class="break"></dd>
</dl>
</section>
<section id="section-2.3.2.7">
            <h5 id="name-asa_handle">
<a class="section-number selfRef" href="#section-2.3.2.7">2.3.2.7. </a><a class="section-name selfRef" href="#name-asa_handle">asa_handle</a>
            </h5>
<p id="section-2.3.2.7-1">Although an authentication and authorization scheme for ASAs has not been defined, the API
       provides a very simple hook for such a scheme. When an ASA starts up, it registers itself
       with the GRASP core, which provides it with an opaque handle that, although not cryptographically
       protected, would be difficult for a third party to predict. The ASA must present this handle
       in future calls. This mechanism will prevent some elementary errors or trivial attacks
       such as an ASA manipulating an objective it has not registered to use.<a class="pilcrow" href="#section-2.3.2.7-1">¶</a></p>
<p id="section-2.3.2.7-2">Thus, in most calls, an 'asa_handle' parameter is required. It is generated when an ASA
       first registers with GRASP, and the ASA must then store the asa_handle
       and use it in every subsequent GRASP call. Any call in which an invalid handle is presented will fail.
       It is an up to 32-bit opaque value (for example, represented as a uint32_t, depending on the language).
       Since it is only used locally, and not in GRASP messages, it is only required to be unique
       within the local GRASP instance. It is valid until the ASA terminates.
       It should be unpredictable; a possible implementation is to use the same mechanism that GRASP
       uses to generate Session IDs (see <a class="xref" href="#sessn">Section 2.3.2.8</a>).<a class="pilcrow" href="#section-2.3.2.7-2">¶</a></p>
</section>
<div id="sessn">
<section id="section-2.3.2.8">
            <h5 id="name-session_handle-and-callback">
<a class="section-number selfRef" href="#section-2.3.2.8">2.3.2.8. </a><a class="section-name selfRef" href="#name-session_handle-and-callback">Session_handle and Callbacks</a>
            </h5>
<p id="section-2.3.2.8-1">In some calls, a 'session_handle' parameter is required. This is an opaque data
       structure as far as the ASA is concerned,
       used to identify calls to the API as belonging to a specific GRASP session
       (see <a class="xref" href="#overlap">Section 2.2.3</a>). 
       It will be provided as a parameter in callback functions.
       As well as distinguishing calls from different sessions, it also allows GRASP
       to detect and ignore calls from non-existent or timed-out sessions.<a class="pilcrow" href="#section-2.3.2.8-1">¶</a></p>
<p id="section-2.3.2.8-2">In an event loop implementation, callback functions (<a class="xref" href="#asynchmech">Section 2.2.1</a>) may be
       supported for all API functions that involve waiting for a remote operation:<a class="pilcrow" href="#section-2.3.2.8-2">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.2.8-3.1">discover() whose callback would be discovery_received().<a class="pilcrow" href="#section-2.3.2.8-3.1">¶</a>
</li>
              <li class="ulEmpty normal" id="section-2.3.2.8-3.2">request_negotiate() whose callback would be negotiate_step_received().<a class="pilcrow" href="#section-2.3.2.8-3.2">¶</a>
</li>
              <li class="ulEmpty normal" id="section-2.3.2.8-3.3">negotiate_step() whose callback would be negotiate_step_received().<a class="pilcrow" href="#section-2.3.2.8-3.3">¶</a>
</li>
              <li class="ulEmpty normal" id="section-2.3.2.8-3.4">listen_negotiate() whose callback would be negotiate_step_received().<a class="pilcrow" href="#section-2.3.2.8-3.4">¶</a>
</li>
              <li class="ulEmpty normal" id="section-2.3.2.8-3.5">synchronize() whose callback would be synchronization_received().<a class="pilcrow" href="#section-2.3.2.8-3.5">¶</a>
</li>
            </ul>
<p id="section-2.3.2.8-4">Further details of callbacks are implementation dependent.<a class="pilcrow" href="#section-2.3.2.8-4">¶</a></p>
</section>
</div>
</section>
<div id="regi">
<section id="section-2.3.3">
          <h4 id="name-registration">
<a class="section-number selfRef" href="#section-2.3.3">2.3.3. </a><a class="section-name selfRef" href="#name-registration">Registration</a>
          </h4>
<p id="section-2.3.3-1">These functions are used to register an ASA, and the objectives that it modifies,
            with the GRASP module.  In the absence of an authorization
            model, these functions are very simple, but they will avoid multiple ASAs choosing the
            same name and will prevent multiple ASAs manipulating the same objective.
            If an authorization model is added to GRASP, these API calls would
            need to be modified accordingly.<a class="pilcrow" href="#section-2.3.3-1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.3-2.1">
              <p id="section-2.3.3-2.1.1">register_asa()<a class="pilcrow" href="#section-2.3.3-2.1.1">¶</a></p>
<p id="section-2.3.3-2.1.2">All ASAs must use this call before issuing any other API calls.<a class="pilcrow" href="#section-2.3.3-2.1.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.3-2.1.3.1">
                  <p id="section-2.3.3-2.1.3.1.1">Input parameter:<a class="pilcrow" href="#section-2.3.3-2.1.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.3-2.1.3.1.2.1">name of the ASA (UTF-8 string)<a class="pilcrow" href="#section-2.3.3-2.1.3.1.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.3-2.1.3.2">
                  <p id="section-2.3.3-2.1.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.3-2.1.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.3-2.1.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.3-2.1.3.2.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.3-2.1.3.2.2.2">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.3-2.1.3.2.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.3-2.1.3.3">This initializes the state in the GRASP module for the calling entity (the ASA).
               In the case of success, an 'asa_handle' is returned, which the ASA must present in
               all subsequent calls. 
               In the case of failure, the ASA has not been authorized and cannot operate.
               The 'asa_handle' value is undefined.<a class="pilcrow" href="#section-2.3.3-2.1.3.3">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.3-2.2">
              <p id="section-2.3.3-2.2.1">deregister_asa()<a class="pilcrow" href="#section-2.3.3-2.2.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.3-2.2.2.1">
                  <p id="section-2.3.3-2.2.2.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.3-2.2.2.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.3-2.2.2.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.3-2.2.2.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.3-2.2.2.1.2.2">name of the ASA (UTF-8 string)<a class="pilcrow" href="#section-2.3.3-2.2.2.1.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.3-2.2.2.2">
                  <p id="section-2.3.3-2.2.2.2.1">Return value:<a class="pilcrow" href="#section-2.3.3-2.2.2.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.3-2.2.2.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.3-2.2.2.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.3-2.2.2.3">This removes all state in the GRASP module for the calling entity (the ASA)
             and deregisters any objectives it has registered. Note that these actions must
             also happen automatically if an ASA exits.<a class="pilcrow" href="#section-2.3.3-2.2.2.3">¶</a>
</li>
                <li class="normal" id="section-2.3.3-2.2.2.4">Note -- the ASA name is, strictly speaking, redundant in this call but is present to
                detect and reject erroneous deregistrations.<a class="pilcrow" href="#section-2.3.3-2.2.2.4">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.3-2.3">
              <p id="section-2.3.3-2.3.1">register_objective()<a class="pilcrow" href="#section-2.3.3-2.3.1">¶</a></p>
<p id="section-2.3.3-2.3.2">ASAs must use this call for any objective whose value they need to transmit
              by negotiation, synchronization, or flooding.<a class="pilcrow" href="#section-2.3.3-2.3.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.3-2.3.3.1">
                  <p id="section-2.3.3-2.3.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.3-2.3.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.3-2.3.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.3-2.3.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.3-2.3.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.3-2.3.3.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.3-2.3.3.1.2.3">ttl (unsigned integer -- default GRASP_DEF_TIMEOUT)<a class="pilcrow" href="#section-2.3.3-2.3.3.1.2.3">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.3-2.3.3.1.2.4">discoverable (Boolean -- default False)<a class="pilcrow" href="#section-2.3.3-2.3.3.1.2.4">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.3-2.3.3.1.2.5">overlap (Boolean -- default False)<a class="pilcrow" href="#section-2.3.3-2.3.3.1.2.5">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.3-2.3.3.1.2.6">local (Boolean -- default False)<a class="pilcrow" href="#section-2.3.3-2.3.3.1.2.6">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.3-2.3.3.2">
                  <p id="section-2.3.3-2.3.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.3-2.3.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.3-2.3.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.3-2.3.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.3-2.3.3.3">This registers an objective that this ASA may modify
                and transmit to other ASAs by flooding or negotiation. It is not necessary to register
                an objective that is only received by GRASP synchronization or flooding.
                The 'objective' becomes a candidate for discovery. However, discovery
                responses should not be enabled until the ASA calls listen_negotiate() or
                listen_synchronize(), showing that it is able to act as a responder.
                The ASA may negotiate the objective or send synchronization or flood data.
                Registration is not needed for "read-only" operations, i.e., the ASA only wants
                to receive synchronization or flooded data for the objective concerned.<a class="pilcrow" href="#section-2.3.3-2.3.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.3-2.3.3.4">The 'ttl' parameter is the valid lifetime (time to live) in milliseconds of any
                discovery response generated for this objective. The default value should be the GRASP
                default timeout (GRASP_DEF_TIMEOUT; see <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>).<a class="pilcrow" href="#section-2.3.3-2.3.3.4">¶</a>
</li>
                <li class="normal" id="section-2.3.3-2.3.3.5">If the parameter 'discoverable' is True, the objective
                is immediately discoverable. This is
                intended for objectives that are only defined for GRASP discovery
                and that do not support negotiation or synchronization.<a class="pilcrow" href="#section-2.3.3-2.3.3.5">¶</a>
</li>
                <li class="normal" id="section-2.3.3-2.3.3.6">If the parameter 'overlap' is True, more than one ASA may register this objective
                in the same GRASP instance. This is of value for life cycle management
                of ASAs <span>[<a class="xref" href="#I-D.ietf-anima-asa-guidelines">ASA-GUIDE</a>]</span> and must be
                used consistently for a given objective (always True or always False).<a class="pilcrow" href="#section-2.3.3-2.3.3.6">¶</a>
</li>
                <li class="normal" id="section-2.3.3-2.3.3.7">If the parameter 'local' is True, discovery must return a link-local address.
                This feature is for objectives that must be restricted to the local link.<a class="pilcrow" href="#section-2.3.3-2.3.3.7">¶</a>
</li>
                <li class="normal" id="section-2.3.3-2.3.3.8">This call may be repeated for multiple objectives.<a class="pilcrow" href="#section-2.3.3-2.3.3.8">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.3-2.4">
              <p id="section-2.3.3-2.4.1">deregister_objective()<a class="pilcrow" href="#section-2.3.3-2.4.1">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.3-2.4.2.1">
                  <p id="section-2.3.3-2.4.2.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.3-2.4.2.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.3-2.4.2.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.3-2.4.2.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.3-2.4.2.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.3-2.4.2.1.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.3-2.4.2.2">
                  <p id="section-2.3.3-2.4.2.2.1">Return value:<a class="pilcrow" href="#section-2.3.3-2.4.2.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.3-2.4.2.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.3-2.4.2.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.3-2.4.2.3">The 'objective' must have been registered by the calling ASA; if not, this call fails. 
             Otherwise, it removes all state in the GRASP module for the given objective.<a class="pilcrow" href="#section-2.3.3-2.4.2.3">¶</a>
</li>
              </ul>
</li>
          </ul>
</section>
</div>
<section id="section-2.3.4">
          <h4 id="name-discovery">
<a class="section-number selfRef" href="#section-2.3.4">2.3.4. </a><a class="section-name selfRef" href="#name-discovery">Discovery</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-2.3.4-1.1">
              <p id="section-2.3.4-1.1.1">discover()<a class="pilcrow" href="#section-2.3.4-1.1.1">¶</a></p>
<p id="section-2.3.4-1.1.2">This function may be used by any ASA to discover peers handling a given objective.<a class="pilcrow" href="#section-2.3.4-1.1.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.4-1.1.3.1">
                  <p id="section-2.3.4-1.1.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.4-1.1.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.4-1.1.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.4-1.1.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.4-1.1.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.4-1.1.3.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.4-1.1.3.1.2.3">timeout (unsigned integer)<a class="pilcrow" href="#section-2.3.4-1.1.3.1.2.3">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.4-1.1.3.1.2.4">minimum_TTL (unsigned integer)<a class="pilcrow" href="#section-2.3.4-1.1.3.1.2.4">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.4-1.1.3.2">
                  <p id="section-2.3.4-1.1.3.2.1">Return values:<a class="pilcrow" href="#section-2.3.4-1.1.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.4-1.1.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.4-1.1.3.2.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.4-1.1.3.2.2.2">locator_list (structure)<a class="pilcrow" href="#section-2.3.4-1.1.3.2.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.4-1.1.3.3">This returns a list of discovered 'asa_locators' for the given objective.
                An empty list means that no locators were discovered within the timeout.
                Note that this structure includes all the fields described in <a class="xref" href="#asaL">Section 2.3.2.5</a>.<a class="pilcrow" href="#section-2.3.4-1.1.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.4-1.1.3.4">The parameter 'minimum_TTL' must be greater than or equal to
                    zero. Any locally cached locators for the objective whose
                    remaining time to live in milliseconds is less than or equal to
                    'minimum_TTL' are deleted first. Thus, 'minimum_TTL' = 0 will
                    flush all entries. Note that this will not affect sessions already
                    in progress using the deleted locators.<a class="pilcrow" href="#section-2.3.4-1.1.3.4">¶</a>
</li>
                <li class="normal" id="section-2.3.4-1.1.3.5">If the parameter 'timeout' is zero, any remaining locally cached locators for the
                objective are returned immediately, and no other action is taken. (Thus,
                a call with 'minimum_TTL' and 'timeout' both equal to zero is pointless.)<a class="pilcrow" href="#section-2.3.4-1.1.3.5">¶</a>
</li>
                <li class="normal" id="section-2.3.4-1.1.3.6">If the parameter 'timeout' is greater than zero,
                GRASP discovery is performed, and all results obtained before the timeout in milliseconds
                expires are returned. If no results are obtained, an empty list is returned after the timeout.
                That is not an error condition. GRASP discovery is not a deterministic process.
                If there are multiple nodes handling an objective, none, some, or all of them
                will be discovered before the timeout expires.<a class="pilcrow" href="#section-2.3.4-1.1.3.6">¶</a>
</li>
                <li class="normal" id="section-2.3.4-1.1.3.7">
                  <p id="section-2.3.4-1.1.3.7.1">Asynchronous Mechanisms:<a class="pilcrow" href="#section-2.3.4-1.1.3.7.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.4-1.1.3.7.2">
                    <dt id="section-2.3.4-1.1.3.7.2.1">Threaded implementation:</dt>
                    <dd id="section-2.3.4-1.1.3.7.2.2" style="margin-left: 1.5em">This should be called in a separate thread 
                if asynchronous operation is required.<a class="pilcrow" href="#section-2.3.4-1.1.3.7.2.2">¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-2.3.4-1.1.3.7.2.3">Event loop implementation:</dt>
                    <dd id="section-2.3.4-1.1.3.7.2.4" style="margin-left: 1.5em">An additional in/out 'session_handle' parameter is used.
                If the 'errorcode' parameter has the value 2 ('noReply'),
                no response has been received so far. The 'session_handle' parameter must be presented
                in subsequent calls.
                A callback may be used in the case of a non-zero timeout.<a class="pilcrow" href="#section-2.3.4-1.1.3.7.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</li>
              </ul>
</li>
          </ul>
</section>
<section id="section-2.3.5">
          <h4 id="name-negotiation">
<a class="section-number selfRef" href="#section-2.3.5">2.3.5. </a><a class="section-name selfRef" href="#name-negotiation">Negotiation</a>
          </h4>
<p id="section-2.3.5-1">Since the negotiation mechanism is different from a typical client/server
          exchange, <a class="xref" href="#negfig">Figure 2</a> illustrates the sequence of calls and GRASP
          messages in a negotiation. Note that after the first protocol exchange, the process
          is symmetrical, with negotiating steps strictly alternating between the two sides.
          Either side can end the negotiation. Also, the side that is due to respond
          next can insert a delay at any time, to extend the other side's timeout.
          This would be used, for example, if an ASA needed to negotiate with
          a third party before continuing with the current negotiation.<a class="pilcrow" href="#section-2.3.5-1">¶</a></p>
<p id="section-2.3.5-2">The loop count embedded in the objective that is the subject of
          negotiation is initialized by the ASA that starts a negotiation
          and is then decremented by the GRASP core at each step, prior to
          sending each M_NEGOTIATE message. If it reaches
          zero, the negotiation will fail, and each side will receive an error code.<a class="pilcrow" href="#section-2.3.5-2">¶</a></p>
<span id="name-negotiation-sequence"></span><div id="negfig">
<figure id="figure-2">
            <div class="artwork art-text alignCenter" id="section-2.3.5-3.1">
<pre>Initiator                         Responder
---------                         ---------

                                  listen_negotiate() \ Await request

request_negotiate()
          M_REQ_NEG      -&gt;       negotiate_step()   \ Open session,
                         &lt;-      M_NEGOTIATE         / start negotiation
negotiate_step()
        M_NEGOTIATE      -&gt;       negotiate_step()   \ Continue
                         &lt;-      M_NEGOTIATE         / negotiation
                         ...
negotiate_wait()                                     \ Insert
        M_WAIT           -&gt;                          / delay
negotiate_step()
        M_NEGOTIATE      -&gt;       negotiate_step()   \ Continue
                         &lt;-      M_NEGOTIATE         / negotiation
negotiate_step()
        M_NEGOTIATE      -&gt;       end_negotiate()    \ End
                         &lt;-      M_END               / negotiation

                                                     \ Process results
</pre>
</div>
<figcaption><a class="selfRef" href="#figure-2">Figure 2</a>:
<a class="selfRef" href="#name-negotiation-sequence">Negotiation Sequence</a>
            </figcaption></figure>
</div>
<p id="section-2.3.5-4">As the negotiation proceeds, each side will update the value of the objective in accordance with
        its particular semantics, defined in the specification of the objective. Although many objectives
        will have values that can be ordered, so that negotiation can be a simple bidding process, it
        is not a requirement.<a class="pilcrow" href="#section-2.3.5-4">¶</a></p>
<p id="section-2.3.5-5">Failure to agree, a timeout, or loop count exhaustion may all end a negotiation session, but none
        of these cases are protocol failures.<a class="pilcrow" href="#section-2.3.5-5">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.5-6.1">
              <p id="section-2.3.5-6.1.1">request_negotiate()<a class="pilcrow" href="#section-2.3.5-6.1.1">¶</a></p>
<p id="section-2.3.5-6.1.2">This function is used by any ASA to initiate negotiation of a GRASP objective as a requester (client).<a class="pilcrow" href="#section-2.3.5-6.1.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.5-6.1.3.1">
                  <p id="section-2.3.5-6.1.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.5-6.1.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.1.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.1.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.1.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.5-6.1.3.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.1.3.1.2.3">peer (asa_locator)<a class="pilcrow" href="#section-2.3.5-6.1.3.1.2.3">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.1.3.1.2.4">timeout (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.1.3.1.2.4">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.2">
                  <p id="section-2.3.5-6.1.3.2.1">Return values:<a class="pilcrow" href="#section-2.3.5-6.1.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.1.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.1.3.2.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.1.3.2.2.2">session_handle (structure) (undefined unless successful)<a class="pilcrow" href="#section-2.3.5-6.1.3.2.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.1.3.2.2.3">proffered_objective (structure) (undefined unless successful)<a class="pilcrow" href="#section-2.3.5-6.1.3.2.2.3">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.1.3.2.2.4">reason (string) (empty unless negotiation declined)<a class="pilcrow" href="#section-2.3.5-6.1.3.2.2.4">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.3">This function opens a negotiation session between two ASAs. Note that GRASP currently
                does not support multiparty negotiation, which would need to be added as an extended
                function.<a class="pilcrow" href="#section-2.3.5-6.1.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.4">The 'objective' parameter must
             include the requested value, and its loop count should be set to a
             suitable starting value by the ASA. If not, the GRASP default will apply.<a class="pilcrow" href="#section-2.3.5-6.1.3.4">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.5">Note that a given negotiation session may or may not be a dry-run negotiation;
             the two modes must not be mixed in a single session.<a class="pilcrow" href="#section-2.3.5-6.1.3.5">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.6">The 'peer' parameter is the target node; it must be an 'asa_locator' as returned
             by discover(). If 'peer' is null, GRASP discovery is automatically performed first to find
             a suitable peer (i.e., any node that supports the objective in question).<a class="pilcrow" href="#section-2.3.5-6.1.3.6">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.7">The 'timeout' parameter is described in <a class="xref" href="#tout">Section 2.3.2.3</a>.<a class="pilcrow" href="#section-2.3.5-6.1.3.7">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.8">
                  <p id="section-2.3.5-6.1.3.8.1">If the 'errorcode' return value is 0, the negotiation has successfully
             started. There are then two cases:<a class="pilcrow" href="#section-2.3.5-6.1.3.8.1">¶</a></p>
<ol class="normal type-1" id="section-2.3.5-6.1.3.8.2" start="1" type="1">
                    <li id="section-2.3.5-6.1.3.8.2.1">The 'session_handle' parameter is null. In this case, the negotiation
              has succeeded with one exchange of messages, and the peer has accepted the request. The returned
              'proffered_objective' contains the value accepted by the peer, which is
              therefore equal to the value in the requested 'objective'. For this reason,
              no session handle is needed, since the session has ended.<a class="pilcrow" href="#section-2.3.5-6.1.3.8.2.1">¶</a>
</li>
                    <li id="section-2.3.5-6.1.3.8.2.2">
                      <p id="section-2.3.5-6.1.3.8.2.2.1">The 'session_handle' parameter is not null. In this case, negotiation
              must continue. The 'session_handle' must be presented in all subsequent negotiation steps.
              The returned 'proffered_objective' contains the first value
              proffered by the negotiation peer in the first exchange of messages;
              in other words, it is a counter-offer.
              The contents of this instance of the objective
              must be used to prepare the next negotiation step (see negotiate_step() below) because
              it contains the updated loop count, sent by the negotiation peer.
              The GRASP code automatically decrements the loop count by 1 at each step
              and returns an error if it becomes zero. Since this terminates the
              negotiation, the other end will experience a timeout, which will
              terminate the other end of the session.<a class="pilcrow" href="#section-2.3.5-6.1.3.8.2.2.1">¶</a></p>
<p id="section-2.3.5-6.1.3.8.2.2.2">
              This function must be followed by calls to 'negotiate_step' and/or 'negotiate_wait'
              and/or 'end_negotiate' until the negotiation ends. 'request_negotiate' may then be called
              again to start a new negotiation.<a class="pilcrow" href="#section-2.3.5-6.1.3.8.2.2.2">¶</a></p>
</li>
                  </ol>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.9">If the 'errorcode' parameter has the value 1 ('declined'), the negotiation has been declined
             by the peer (M_END and O_DECLINE features of GRASP). The 'reason' string is then available for
             information and diagnostic use, but it may be a null string. For this and any other error code,
             an exponential backoff is recommended before any retry (see <a class="xref" href="#security">Section 3</a>).<a class="pilcrow" href="#section-2.3.5-6.1.3.9">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.10">
                  <p id="section-2.3.5-6.1.3.10.1">Asynchronous Mechanisms:<a class="pilcrow" href="#section-2.3.5-6.1.3.10.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.5-6.1.3.10.2">
                    <dt id="section-2.3.5-6.1.3.10.2.1">Threaded implementation:</dt>
                    <dd id="section-2.3.5-6.1.3.10.2.2" style="margin-left: 1.5em">This should be called in a separate thread
                if asynchronous operation is required.<a class="pilcrow" href="#section-2.3.5-6.1.3.10.2.2">¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-2.3.5-6.1.3.10.2.3">Event loop implementation:</dt>
                    <dd id="section-2.3.5-6.1.3.10.2.4" style="margin-left: 1.5em">The 'session_handle' parameter is used to distinguish
                multiple simultaneous sessions. If the 'errorcode' parameter has the value 2 ('noReply'),
                no response has been received so far. The 'session_handle' parameter must be presented
                in subsequent calls.<a class="pilcrow" href="#section-2.3.5-6.1.3.10.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.11">Use of dry-run mode must be consistent within a GRASP session. The state of the 'dry'
             flag in the initial request_negotiate() call must be the same in all subsequent negotiation
             steps of the same session. The semantics of the dry-run mode are built into the ASA; GRASP
             merely carries the flag bit.<a class="pilcrow" href="#section-2.3.5-6.1.3.11">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.1.3.12">Special note for the ACP infrastructure ASA: It is likely that this ASA will need to
             discover and negotiate with its peers in each of its on-link neighbors. It will therefore need to
             know not only the link-local IP address but also the physical interface and transport port for
             connecting to each neighbor. One implementation approach to this is to include these
             details in the 'session_handle' data structure, which is opaque to normal ASAs.<a class="pilcrow" href="#section-2.3.5-6.1.3.12">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.5-6.2">
              <p id="section-2.3.5-6.2.1">listen_negotiate()<a class="pilcrow" href="#section-2.3.5-6.2.1">¶</a></p>
<p id="section-2.3.5-6.2.2">This function is used by an ASA to start acting as a negotiation responder (listener)
              for a given GRASP objective.<a class="pilcrow" href="#section-2.3.5-6.2.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.5-6.2.3.1">
                  <p id="section-2.3.5-6.2.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.5-6.2.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.2.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.2.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.2.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.5-6.2.3.1.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.2.3.2">
                  <p id="section-2.3.5-6.2.3.2.1">Return values:<a class="pilcrow" href="#section-2.3.5-6.2.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.2.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.2.3.2.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.2.3.2.2.2">session_handle (structure) (undefined unless successful)<a class="pilcrow" href="#section-2.3.5-6.2.3.2.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.2.3.2.2.3">requested_objective (structure) (undefined unless successful)<a class="pilcrow" href="#section-2.3.5-6.2.3.2.2.3">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.2.3.3">This function instructs GRASP to listen for negotiation
             requests for the given 'objective'. It also enables discovery responses for the objective,
 as mentioned under register_objective() in <a class="xref" href="#regi">Section 2.3.3</a>.<a class="pilcrow" href="#section-2.3.5-6.2.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.2.3.4">
                  <p id="section-2.3.5-6.2.3.4.1">Asynchronous Mechanisms:<a class="pilcrow" href="#section-2.3.5-6.2.3.4.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.5-6.2.3.4.2">
                    <dt id="section-2.3.5-6.2.3.4.2.1">Threaded implementation:</dt>
                    <dd id="section-2.3.5-6.2.3.4.2.2" style="margin-left: 1.5em">It will block waiting for an incoming request, so
             it should be called in a separate thread if asynchronous operation is required.
             Unless there is an unexpected failure, this call only returns after an
             incoming negotiation request.
             If the ASA supports multiple simultaneous transactions, a new sub-thread must
             be spawned for each new session, so that listen_negotiate() can
             be called again immediately.<a class="pilcrow" href="#section-2.3.5-6.2.3.4.2.2">¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-2.3.5-6.2.3.4.2.3">Event loop implementation:</dt>
                    <dd id="section-2.3.5-6.2.3.4.2.4" style="margin-left: 1.5em">A 'session_handle' parameter is used
                to distinguish individual sessions.
             If the ASA supports multiple simultaneous transactions, a new event must be inserted
             in the event loop for each new session, so that listen_negotiate() can
 be reactivated immediately.<a class="pilcrow" href="#section-2.3.5-6.2.3.4.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</li>
                <li class="normal" id="section-2.3.5-6.2.3.5">This call only returns (threaded model) or triggers (event loop) after an
             incoming negotiation request. When this occurs,
             'requested_objective' contains the first value requested by
             the negotiation peer. The contents of this instance of the objective
              must be used in the subsequent negotiation call because
              it contains the loop count sent by the negotiation peer. The 'session_handle' must be
             presented in all subsequent negotiation steps.<a class="pilcrow" href="#section-2.3.5-6.2.3.5">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.2.3.6">This function must be followed by calls to 'negotiate_step' and/or 'negotiate_wait'
             and/or 'end_negotiate' until the negotiation ends.<a class="pilcrow" href="#section-2.3.5-6.2.3.6">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.2.3.7">If an ASA is capable of handling multiple negotiations simultaneously, it may
             call 'listen_negotiate' simultaneously from multiple threads, or insert multiple events.
             The API and GRASP implementation
             must support re-entrant use of the listening state and the negotiation calls. Simultaneous
             sessions will be distinguished by the threads or events themselves, 
             the GRASP session handles, and the underlying unicast transport sockets.<a class="pilcrow" href="#section-2.3.5-6.2.3.7">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.5-6.3">
              <p id="section-2.3.5-6.3.1">stop_listen_negotiate()<a class="pilcrow" href="#section-2.3.5-6.3.1">¶</a></p>
<p id="section-2.3.5-6.3.2">This function is used by an ASA to stop acting as a responder (listener) for a given GRASP objective.<a class="pilcrow" href="#section-2.3.5-6.3.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.5-6.3.3.1">
                  <p id="section-2.3.5-6.3.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.5-6.3.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.3.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.3.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.3.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.5-6.3.3.1.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.3.3.2">
                  <p id="section-2.3.5-6.3.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.5-6.3.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.3.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.3.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.3.3.3">Instructs GRASP to stop listening for negotiation
 requests for the given objective, i.e., cancels 'listen_negotiate'.<a class="pilcrow" href="#section-2.3.5-6.3.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.3.3.4">
                  <p id="section-2.3.5-6.3.3.4.1">Asynchronous Mechanisms:<a class="pilcrow" href="#section-2.3.5-6.3.3.4.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.5-6.3.3.4.2">
                    <dt id="section-2.3.5-6.3.3.4.2.1">Threaded implementation:</dt>
                    <dd id="section-2.3.5-6.3.3.4.2.2" style="margin-left: 1.5em">Must be called
             from a different thread than 'listen_negotiate'.<a class="pilcrow" href="#section-2.3.5-6.3.3.4.2.2">¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-2.3.5-6.3.3.4.2.3">Event loop implementation:</dt>
                    <dd id="section-2.3.5-6.3.3.4.2.4" style="margin-left: 1.5em">No special considerations.<a class="pilcrow" href="#section-2.3.5-6.3.3.4.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.5-6.4">
              <p id="section-2.3.5-6.4.1">negotiate_step()<a class="pilcrow" href="#section-2.3.5-6.4.1">¶</a></p>
<p id="section-2.3.5-6.4.2">This function is used by either ASA in a negotiation session to make the next step in negotiation.<a class="pilcrow" href="#section-2.3.5-6.4.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.5-6.4.3.1">
                  <p id="section-2.3.5-6.4.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.5-6.4.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.4.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.4.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.4.3.1.2.2">session_handle (structure)<a class="pilcrow" href="#section-2.3.5-6.4.3.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.4.3.1.2.3">objective (structure)<a class="pilcrow" href="#section-2.3.5-6.4.3.1.2.3">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.4.3.1.2.4">timeout (unsigned integer) as described in <a class="xref" href="#tout">Section 2.3.2.3</a><a class="pilcrow" href="#section-2.3.5-6.4.3.1.2.4">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.4.3.2">
                  <p id="section-2.3.5-6.4.3.2.1">Return values:<a class="pilcrow" href="#section-2.3.5-6.4.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.4.3.2.2.1">Exactly as for 'request_negotiate'<a class="pilcrow" href="#section-2.3.5-6.4.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.4.3.3">Executes the next negotiation step with the peer. The 'objective' parameter
                contains the next value being proffered by the ASA in this step. It must also
                contain the latest 'loop_count' value received from request_negotiate() 
                or negotiate_step().<a class="pilcrow" href="#section-2.3.5-6.4.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.4.3.4">
                  <p id="section-2.3.5-6.4.3.4.1">Asynchronous Mechanisms:<a class="pilcrow" href="#section-2.3.5-6.4.3.4.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.5-6.4.3.4.2">
                    <dt id="section-2.3.5-6.4.3.4.2.1">Threaded implementation:</dt>
                    <dd id="section-2.3.5-6.4.3.4.2.2" style="margin-left: 1.5em">Usually called in the same thread as the 
                preceding 'request_negotiate' or 'listen_negotiate',
                with the same value of 'session_handle'.<a class="pilcrow" href="#section-2.3.5-6.4.3.4.2.2">¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-2.3.5-6.4.3.4.2.3">Event loop implementation:</dt>
                    <dd id="section-2.3.5-6.4.3.4.2.4" style="margin-left: 1.5em">Must use the same value of 'session_handle' returned by the
             preceding 'request_negotiate' or 'listen_negotiate'.<a class="pilcrow" href="#section-2.3.5-6.4.3.4.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.5-6.5">
              <p id="section-2.3.5-6.5.1">negotiate_wait()<a class="pilcrow" href="#section-2.3.5-6.5.1">¶</a></p>
<p id="section-2.3.5-6.5.2">This function is used by either ASA in a negotiation session to delay the next step in negotiation.<a class="pilcrow" href="#section-2.3.5-6.5.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.5-6.5.3.1">
                  <p id="section-2.3.5-6.5.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.5-6.5.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.5.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.5.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.5.3.1.2.2">session_handle (structure)<a class="pilcrow" href="#section-2.3.5-6.5.3.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.5.3.1.2.3">timeout (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.5.3.1.2.3">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.5.3.2">
                  <p id="section-2.3.5-6.5.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.5-6.5.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.5.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.5.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.5.3.3">Requests the remote peer to delay the negotiation session by 'timeout' milliseconds,
                thereby extending the original timeout. This
                function simply triggers a GRASP Confirm Waiting message (see <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>
                for details).<a class="pilcrow" href="#section-2.3.5-6.5.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.5-6.5.3.4">
                  <p id="section-2.3.5-6.5.3.4.1">Asynchronous Mechanisms:<a class="pilcrow" href="#section-2.3.5-6.5.3.4.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.5-6.5.3.4.2">
                    <dt id="section-2.3.5-6.5.3.4.2.1">Threaded implementation:</dt>
                    <dd id="section-2.3.5-6.5.3.4.2.2" style="margin-left: 1.5em">Called in the same thread as the preceding 
                'request_negotiate' or 'listen_negotiate', with the same value of 'session_handle'.<a class="pilcrow" href="#section-2.3.5-6.5.3.4.2.2">¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-2.3.5-6.5.3.4.2.3">Event loop implementation:</dt>
                    <dd id="section-2.3.5-6.5.3.4.2.4" style="margin-left: 1.5em">Must use the same value of 'session_handle' returned by the
             preceding 'request_negotiate' or 'listen_negotiate'.<a class="pilcrow" href="#section-2.3.5-6.5.3.4.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.5-6.6">
              <p id="section-2.3.5-6.6.1">end_negotiate()<a class="pilcrow" href="#section-2.3.5-6.6.1">¶</a></p>
<p id="section-2.3.5-6.6.2">This function is used by either ASA in a negotiation session to end a negotiation.<a class="pilcrow" href="#section-2.3.5-6.6.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.5-6.6.3.1">
                  <p id="section-2.3.5-6.6.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.5-6.6.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.6.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.6.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.6.3.1.2.2">session_handle (structure)<a class="pilcrow" href="#section-2.3.5-6.6.3.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.6.3.1.2.3">result (Boolean)<a class="pilcrow" href="#section-2.3.5-6.6.3.1.2.3">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.5-6.6.3.1.2.4">reason (UTF-8 string)<a class="pilcrow" href="#section-2.3.5-6.6.3.1.2.4">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.6.3.2">
                  <p id="section-2.3.5-6.6.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.5-6.6.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.5-6.6.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.5-6.6.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.5-6.6.3.3">
                  <p id="section-2.3.5-6.6.3.3.1">End the negotiation session:<a class="pilcrow" href="#section-2.3.5-6.6.3.3.1">¶</a></p>
<p id="section-2.3.5-6.6.3.3.2">
             'result' = True for accept (successful negotiation), and False for decline (failed negotiation).<a class="pilcrow" href="#section-2.3.5-6.6.3.3.2">¶</a></p>
<p id="section-2.3.5-6.6.3.3.3">
             'reason' = string describing reason for decline (may be null; ignored if accept).<a class="pilcrow" href="#section-2.3.5-6.6.3.3.3">¶</a></p>
</li>
                <li class="normal" id="section-2.3.5-6.6.3.4">
                  <p id="section-2.3.5-6.6.3.4.1">Asynchronous Mechanisms:<a class="pilcrow" href="#section-2.3.5-6.6.3.4.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.5-6.6.3.4.2">
                    <dt id="section-2.3.5-6.6.3.4.2.1">Threaded implementation:</dt>
                    <dd id="section-2.3.5-6.6.3.4.2.2" style="margin-left: 1.5em">Called in the same thread as the preceding 'request_negotiate' or 'listen_negotiate',
             with the same value of 'session_handle'.<a class="pilcrow" href="#section-2.3.5-6.6.3.4.2.2">¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-2.3.5-6.6.3.4.2.3">Event loop implementation:</dt>
                    <dd id="section-2.3.5-6.6.3.4.2.4" style="margin-left: 1.5em">Must use the same value of 'session_handle' returned by the
             preceding 'request_negotiate' or 'listen_negotiate'.<a class="pilcrow" href="#section-2.3.5-6.6.3.4.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</li>
              </ul>
</li>
          </ul>
</section>
<section id="section-2.3.6">
          <h4 id="name-synchronization-and-floodin">
<a class="section-number selfRef" href="#section-2.3.6">2.3.6. </a><a class="section-name selfRef" href="#name-synchronization-and-floodin">Synchronization and Flooding</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-2.3.6-1.1">
              <p id="section-2.3.6-1.1.1">synchronize()<a class="pilcrow" href="#section-2.3.6-1.1.1">¶</a></p>
<p id="section-2.3.6-1.1.2">This function is used by any ASA to cause synchronization of a GRASP objective as a requester (client).<a class="pilcrow" href="#section-2.3.6-1.1.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.6-1.1.3.1">
                  <p id="section-2.3.6-1.1.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.6-1.1.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.1.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.1.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.1.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.6-1.1.3.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.1.3.1.2.3">peer (asa_locator)<a class="pilcrow" href="#section-2.3.6-1.1.3.1.2.3">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.1.3.1.2.4">timeout (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.1.3.1.2.4">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.2">
                  <p id="section-2.3.6-1.1.3.2.1">Return values:<a class="pilcrow" href="#section-2.3.6-1.1.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.1.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.1.3.2.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.1.3.2.2.2">result (structure) (undefined unless successful)<a class="pilcrow" href="#section-2.3.6-1.1.3.2.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.3">This call requests the synchronized value of the given 'objective'.<a class="pilcrow" href="#section-2.3.6-1.1.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.4">If the 'peer' parameter is null, and the objective is already
                available in the local cache, the flooded objective is returned immediately
                in the 'result' parameter. In this case, the 'timeout' is ignored.<a class="pilcrow" href="#section-2.3.6-1.1.3.4">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.5"> If the 'peer' parameter is not null, or a cached value
                is not available, synchronization with a discovered ASA is performed. 
                If successful, the retrieved objective is returned
                in the 'result' value.<a class="pilcrow" href="#section-2.3.6-1.1.3.5">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.6">The 'peer' parameter is an 'asa_locator' as returned by discover().
                If 'peer' is null, GRASP discovery is automatically performed first to find
                a suitable peer (i.e., any node that supports the objective in question).<a class="pilcrow" href="#section-2.3.6-1.1.3.6">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.7">The 'timeout' parameter is described in <a class="xref" href="#tout">Section 2.3.2.3</a>.<a class="pilcrow" href="#section-2.3.6-1.1.3.7">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.8">This call should be repeated whenever the latest value is needed.<a class="pilcrow" href="#section-2.3.6-1.1.3.8">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.9">
                  <p id="section-2.3.6-1.1.3.9.1">Asynchronous Mechanisms:<a class="pilcrow" href="#section-2.3.6-1.1.3.9.1">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.3.6-1.1.3.9.2">
                    <dt id="section-2.3.6-1.1.3.9.2.1">Threaded implementation:</dt>
                    <dd id="section-2.3.6-1.1.3.9.2.2" style="margin-left: 1.5em">Call in a separate thread if asynchronous operation is required.<a class="pilcrow" href="#section-2.3.6-1.1.3.9.2.2">¶</a>
</dd>
                    <dd class="break"></dd>
<dt id="section-2.3.6-1.1.3.9.2.3">Event loop implementation:</dt>
                    <dd id="section-2.3.6-1.1.3.9.2.4" style="margin-left: 1.5em">An additional in/out 'session_handle' parameter is used,
                as in request_negotiate(). If the 'errorcode' parameter has the value 2 ('noReply'),
                no response has been received so far. The 'session_handle' parameter must be presented
                in subsequent calls.<a class="pilcrow" href="#section-2.3.6-1.1.3.9.2.4">¶</a>
</dd>
                  <dd class="break"></dd>
</dl>
</li>
                <li class="normal" id="section-2.3.6-1.1.3.10">In the case of failure, an exponential backoff is recommended before
                retrying (<a class="xref" href="#security">Section 3</a>).<a class="pilcrow" href="#section-2.3.6-1.1.3.10">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.6-1.2">
              <p id="section-2.3.6-1.2.1">listen_synchronize()<a class="pilcrow" href="#section-2.3.6-1.2.1">¶</a></p>
<p id="section-2.3.6-1.2.2">This function is used by an ASA to start acting as a synchronization responder (listener)
              for a given GRASP objective.<a class="pilcrow" href="#section-2.3.6-1.2.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.6-1.2.3.1">
                  <p id="section-2.3.6-1.2.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.6-1.2.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.2.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.2.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.2.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.6-1.2.3.1.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.2.3.2">
                  <p id="section-2.3.6-1.2.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.6-1.2.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.2.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.2.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.2.3.3">This instructs GRASP to listen for synchronization
             requests for the given objective and to
             respond with the value given in the 'objective' parameter.
             It also enables discovery responses for the objective,
             as mentioned under register_objective() in <a class="xref" href="#regi">Section 2.3.3</a>.<a class="pilcrow" href="#section-2.3.6-1.2.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.2.3.4">This call is non-blocking and may be repeated whenever the value changes.<a class="pilcrow" href="#section-2.3.6-1.2.3.4">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.6-1.3">
              <p id="section-2.3.6-1.3.1">stop_listen_synchronize()<a class="pilcrow" href="#section-2.3.6-1.3.1">¶</a></p>
<p id="section-2.3.6-1.3.2">This function is used by an ASA to stop acting as a synchronization responder (listener)
              for a given GRASP objective.<a class="pilcrow" href="#section-2.3.6-1.3.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.6-1.3.3.1">
                  <p id="section-2.3.6-1.3.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.6-1.3.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.3.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.3.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.3.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.6-1.3.3.1.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.3.3.2">
                  <p id="section-2.3.6-1.3.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.6-1.3.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.3.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.3.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.3.3.3">This call instructs GRASP to stop listening for synchronization
             requests for the given 'objective', i.e., it cancels a previous listen_synchronize.<a class="pilcrow" href="#section-2.3.6-1.3.3.3">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.6-1.4">
              <p id="section-2.3.6-1.4.1">flood()<a class="pilcrow" href="#section-2.3.6-1.4.1">¶</a></p>
<p id="section-2.3.6-1.4.2">This function is used by an ASA to flood one or more GRASP objectives
              throughout the Autonomic Network.<a class="pilcrow" href="#section-2.3.6-1.4.2">¶</a></p>
<p id="section-2.3.6-1.4.3">Note that each GRASP node caches all flooded objectives that it receives, until
              each one's time to live expires. Cached objectives are tagged with their origin
              as well as an expiry time, so multiple
              copies of the same objective may be cached simultaneously. Further details
              are given in "Flood Synchronization Message" (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8990#section-2.8.11">Section 2.8.11</a> of [<a class="xref" href="#RFC8990">RFC8990</a>]</span>).<a class="pilcrow" href="#section-2.3.6-1.4.3">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.6-1.4.4.1">
                  <p id="section-2.3.6-1.4.4.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.6-1.4.4.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.4.4.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.4.4.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.4.4.1.2.2">ttl (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.4.4.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.4.4.1.2.3">tagged_objective_list (structure)<a class="pilcrow" href="#section-2.3.6-1.4.4.1.2.3">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.4.4.2">
                  <p id="section-2.3.6-1.4.4.2.1">Return value:<a class="pilcrow" href="#section-2.3.6-1.4.4.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.4.4.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.4.4.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.4.4.3">This call instructs GRASP to flood the given synchronization
             objective(s) and their value(s) and associated locator(s) to all GRASP nodes.<a class="pilcrow" href="#section-2.3.6-1.4.4.3">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.4.4.4">The 'ttl' parameter is the valid lifetime (time to live) of
             the flooded data in milliseconds (0 = infinity).<a class="pilcrow" href="#section-2.3.6-1.4.4.4">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.4.4.5">The 'tagged_objective_list' parameter is a list of one or more 'tagged_objective'
             couplets.
             The 'locator' parameter that tags each objective is normally null but may 
             be a valid 'asa_locator'.
             Infrastructure ASAs needing to flood an {address, protocol, port} 3-tuple
             with an objective create an asa_locator object to do so. If the IP address 
             in that locator is the unspecified address
             ('::'), it is replaced by the link-local address of the sending node in each
             copy of the flood multicast, which will be forced to have a loop count of 1.
             This feature is for objectives that must be restricted to the local link.<a class="pilcrow" href="#section-2.3.6-1.4.4.5">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.4.4.6">The function checks that the ASA registered each objective.<a class="pilcrow" href="#section-2.3.6-1.4.4.6">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.4.4.7">This call may be repeated whenever any value changes.<a class="pilcrow" href="#section-2.3.6-1.4.4.7">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.6-1.5">
              <p id="section-2.3.6-1.5.1">get_flood()<a class="pilcrow" href="#section-2.3.6-1.5.1">¶</a></p>
<p id="section-2.3.6-1.5.2">This function is used by any ASA to obtain the current value of a flooded GRASP objective.<a class="pilcrow" href="#section-2.3.6-1.5.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.6-1.5.3.1">
                  <p id="section-2.3.6-1.5.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.6-1.5.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.5.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.5.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.5.3.1.2.2">objective (structure)<a class="pilcrow" href="#section-2.3.6-1.5.3.1.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.5.3.2">
                  <p id="section-2.3.6-1.5.3.2.1">Return values:<a class="pilcrow" href="#section-2.3.6-1.5.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.5.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.5.3.2.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.5.3.2.2.2">tagged_objective_list (structure) (undefined unless successful)<a class="pilcrow" href="#section-2.3.6-1.5.3.2.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.5.3.3">This call instructs GRASP to return the given synchronization
             objective if it has been flooded and its lifetime has not expired.<a class="pilcrow" href="#section-2.3.6-1.5.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.5.3.4">The 'tagged_objective_list' parameter is a list of 'tagged_objective'
             couplets, each one being a copy of the flooded objective and a corresponding locator.
             Thus, if the same objective has been flooded by multiple ASAs, the recipient can distinguish
             the copies.<a class="pilcrow" href="#section-2.3.6-1.5.3.4">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.5.3.5">Note that this call is for advanced ASAs. In a simple case, an ASA can simply call
             synchronize() in order to get a valid flooded objective.<a class="pilcrow" href="#section-2.3.6-1.5.3.5">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-2.3.6-1.6">
              <p id="section-2.3.6-1.6.1">expire_flood()<a class="pilcrow" href="#section-2.3.6-1.6.1">¶</a></p>
<p id="section-2.3.6-1.6.2">This function may be used by an ASA to expire specific entries in the local GRASP flood cache.<a class="pilcrow" href="#section-2.3.6-1.6.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.6-1.6.3.1">
                  <p id="section-2.3.6-1.6.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.6-1.6.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.6.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.6.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.6-1.6.3.1.2.2">tagged_objective (structure)<a class="pilcrow" href="#section-2.3.6-1.6.3.1.2.2">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.6.3.2">
                  <p id="section-2.3.6-1.6.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.6-1.6.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.6-1.6.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.6-1.6.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.6-1.6.3.3">This is a call that can only be used after a preceding
             call to get_flood() by an ASA that is capable of deciding
             that the flooded value is stale or invalid. Use with care.<a class="pilcrow" href="#section-2.3.6-1.6.3.3">¶</a>
</li>
                <li class="normal" id="section-2.3.6-1.6.3.4">The 'tagged_objective' parameter is the one to be expired.<a class="pilcrow" href="#section-2.3.6-1.6.3.4">¶</a>
</li>
              </ul>
</li>
          </ul>
</section>
<section id="section-2.3.7">
          <h4 id="name-invalid-message-function">
<a class="section-number selfRef" href="#section-2.3.7">2.3.7. </a><a class="section-name selfRef" href="#name-invalid-message-function">Invalid Message Function</a>
          </h4>
<ul class="normal">
<li class="normal" id="section-2.3.7-1.1">
              <p id="section-2.3.7-1.1.1">send_invalid()<a class="pilcrow" href="#section-2.3.7-1.1.1">¶</a></p>
<p id="section-2.3.7-1.1.2">This function may be used by any ASA to stop an ongoing GRASP session.<a class="pilcrow" href="#section-2.3.7-1.1.2">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.7-1.1.3.1">
                  <p id="section-2.3.7-1.1.3.1.1">Input parameters:<a class="pilcrow" href="#section-2.3.7-1.1.3.1.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.7-1.1.3.1.2.1">asa_handle (unsigned integer)<a class="pilcrow" href="#section-2.3.7-1.1.3.1.2.1">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.7-1.1.3.1.2.2">session_handle (structure)<a class="pilcrow" href="#section-2.3.7-1.1.3.1.2.2">¶</a>
</li>
                    <li class="ulEmpty normal" id="section-2.3.7-1.1.3.1.2.3">info (bytes)<a class="pilcrow" href="#section-2.3.7-1.1.3.1.2.3">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.7-1.1.3.2">
                  <p id="section-2.3.7-1.1.3.2.1">Return value:<a class="pilcrow" href="#section-2.3.7-1.1.3.2.1">¶</a></p>
<ul class="ulEmpty normal">
<li class="ulEmpty normal" id="section-2.3.7-1.1.3.2.2.1">errorcode (unsigned integer)<a class="pilcrow" href="#section-2.3.7-1.1.3.2.2.1">¶</a>
</li>
                  </ul>
</li>
                <li class="normal" id="section-2.3.7-1.1.3.3">
                  <p id="section-2.3.7-1.1.3.3.1">Sends a GRASP Invalid message (M_INVALID), as described in
             <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>. It should not be used if end_negotiate() would be sufficient.
             Note that this message may be used in response to any unicast GRASP message that the receiver
             cannot interpret correctly. In most cases, this message will be generated internally by a
             GRASP implementation.<a class="pilcrow" href="#section-2.3.7-1.1.3.3.1">¶</a></p>
<p id="section-2.3.7-1.1.3.3.2">
             'info' = optional diagnostic data supplied by the ASA. It may be raw bytes from the invalid message.<a class="pilcrow" href="#section-2.3.7-1.1.3.3.2">¶</a></p>
</li>
              </ul>
</li>
          </ul>
</section>
</section>
</section>
<div id="security">
<section id="section-3">
      <h2 id="name-security-considerations">
<a class="section-number selfRef" href="#section-3">3. </a><a class="section-name selfRef" href="#name-security-considerations">Security Considerations</a>
      </h2>
<p id="section-3-1">Security considerations for the GRASP protocol are discussed in <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>.
      These include denial-of-service issues, even though these are considered a low risk in the ACP. In various
      places, GRASP recommends an exponential backoff. An ASA using the API should use exponential backoff
      after failed discover(), req_negotiate(), or synchronize() operations. The timescale for such backoffs
      depends on the semantics of the GRASP objective concerned. Additionally, a flood() operation should
      not be repeated at shorter intervals than is useful. The appropriate interval depends on the semantics
      of the GRASP objective concerned. These precautions are intended to assist the detection of
      denial-of-service attacks.<a class="pilcrow" href="#section-3-1">¶</a></p>
<p id="section-3-2">As a general precaution, all ASAs able to handle multiple negotiation or synchronization requests
      in parallel may protect themselves against a denial-of-service attack by limiting the number
      of requests they handle simultaneously and silently discarding excess requests. It might also
      be useful for the GRASP core to limit the number of objectives registered by a given ASA, the
      total number of ASAs registered, and the total number of simultaneous sessions,
      to protect system resources. During times of high autonomic activity, such as recovery
      from widespread faults, ASAs may experience many GRASP session failures. Guidance on
      making ASAs suitably robust is given in <span>[<a class="xref" href="#I-D.ietf-anima-asa-guidelines">ASA-GUIDE</a>]</span>.<a class="pilcrow" href="#section-3-2">¶</a></p>
<p id="section-3-3">As noted earlier, the trust model is that all ASAs in a given Autonomic Network communicate via a secure
      autonomic control plane; therefore, they trust each other's messages.
      Specific authorization of ASAs to use particular GRASP objectives is a subject for future study, also briefly
      discussed in <span>[<a class="xref" href="#RFC8990">RFC8990</a>]</span>.<a class="pilcrow" href="#section-3-3">¶</a></p>
<p id="section-3-4">The careful reader will observe that a malicious ASA could extend a negotiation session
      indefinitely by use of the negotiate_wait() function or by manipulating the loop count
      of an objective. A robustly implemented ASA could detect such behavior by a peer
      and break off negotiation.<a class="pilcrow" href="#section-3-4">¶</a></p>
<p id="section-3-5">The 'asa_handle' is used in the API as a first line of defense against a malware process attempting
      to imitate a legitimately registered ASA. The 'session_handle' is used in the API as a first line
      of defense against a malware process attempting to hijack a GRASP session. Both these handles
      are likely to be created using GRASP's 32-bit pseudorandom Session ID. By construction, GRASP avoids
      the risk of Session ID collisions (see "Session Identifier (Session ID)", <span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8990#section-2.7">Section 2.7</a> of [<a class="xref" href="#RFC8990">RFC8990</a>]</span>).
      There remains a finite probability that an attacker could guess a Session ID, session_handle, or asa_handle.
      However, this would only be of value to an attacker that had already penetrated the ACP, which would
      allow many other simpler forms of attack than hijacking GRASP sessions.<a class="pilcrow" href="#section-3-5">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-4">
      <h2 id="name-iana-considerations">
<a class="section-number selfRef" href="#section-4">4. </a><a class="section-name selfRef" href="#name-iana-considerations">IANA Considerations</a>
      </h2>
<p id="section-4-1">This document has no IANA actions.<a class="pilcrow" href="#section-4-1">¶</a></p>
</section>
</div>
<section id="section-5">
      <h2 id="name-references">
<a class="section-number selfRef" href="#section-5">5. </a><a class="section-name selfRef" href="#name-references">References</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-normative-references">
<a class="section-number selfRef" href="#section-5.1">5.1. </a><a class="section-name selfRef" href="#name-normative-references">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC8610">[RFC8610]</dt>
        <dd>
<span class="refAuthor">Birkholz, H.</span>, <span class="refAuthor">Vigano, C.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"Concise Data Definition Language (CDDL): A Notational Convention to Express Concise Binary Object Representation (CBOR) and JSON Data Structures"</span>, <span class="seriesInfo">RFC 8610</span>, <span class="seriesInfo">DOI 10.17487/RFC8610</span>, <time class="refDate" datetime="2019-06">June 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8610">https://www.rfc-editor.org/info/rfc8610</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8949">[RFC8949]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"Concise Binary Object Representation (CBOR)"</span>, <span class="seriesInfo">STD 94</span>, <span class="seriesInfo">RFC 8949</span>, <span class="seriesInfo">DOI 10.17487/RFC8949</span>, <time class="refDate" datetime="2020-12">December 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8949">https://www.rfc-editor.org/info/rfc8949</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8990">[RFC8990]</dt>
      <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Carpenter, B., Ed.</span>, and <span class="refAuthor">B. Liu, Ed.</span>, <span class="refTitle">"GeneRic Autonomic Signaling Protocol (GRASP)"</span>, <span class="seriesInfo">RFC 8990</span>, <span class="seriesInfo">DOI 10.17487/RFC8990</span>, <time class="refDate" datetime="2021-05">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8990">https://www.rfc-editor.org/info/rfc8990</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-5.2">
        <h3 id="name-informative-references">
<a class="section-number selfRef" href="#section-5.2">5.2. </a><a class="section-name selfRef" href="#name-informative-references">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ciavaglia-anima-coordination">[ANIMA-COORD]</dt>
        <dd>
<span class="refAuthor">Ciavaglia, L.</span> and <span class="refAuthor">P. Peloso</span>, <span class="refTitle">"Autonomic Functions Coordination"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ciavaglia-anima-coordination-01</span>, <time class="refDate" datetime="2016-03-21">21 March 2016</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ciavaglia-anima-coordination-01">https://tools.ietf.org/html/draft-ciavaglia-anima-coordination-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-anima-asa-guidelines">[ASA-GUIDE]</dt>
        <dd>
<span class="refAuthor">Carpenter, B.</span>, <span class="refAuthor">Ciavaglia, L.</span>, <span class="refAuthor">Jiang, S.</span>, and <span class="refAuthor">P. Peloso</span>, <span class="refTitle">"Guidelines for Autonomic Service Agents"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-anima-asa-guidelines-00</span>, <time class="refDate" datetime="2020-11-14">14 November 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-anima-asa-guidelines-00">https://tools.ietf.org/html/draft-ietf-anima-asa-guidelines-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-anima-grasp-distribution">[GRASP-DISTRIB]</dt>
        <dd>
<span class="refAuthor">Liu, B.</span>, <span class="refAuthor">Xiao, X.</span>, <span class="refAuthor">Hecker, A.</span>, <span class="refAuthor">Jiang, S.</span>, <span class="refAuthor">Despotovic, Z.</span>, and <span class="refAuthor">B. Carpenter</span>, <span class="refTitle">"Information Distribution over GRASP"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-anima-grasp-distribution-02</span>, <time class="refDate" datetime="2021-03-08">8 March 2021</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-anima-grasp-distribution-02">https://tools.ietf.org/html/draft-ietf-anima-grasp-distribution-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="libcbor">[libcbor]</dt>
        <dd>
<span class="refAuthor">Kalvoda, P.</span>, <span class="refTitle">"libcbor - libcbor 0.8.0 documentation"</span>, <time class="refDate" datetime="2021-04">April 2021</time>, <span>&lt;<a href="https://libcbor.readthedocs.io/">https://libcbor.readthedocs.io/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8993">[RFC8993]</dt>
        <dd>
<span class="refAuthor">Behringer, M., Ed.</span>, <span class="refAuthor">Carpenter, B.</span>, <span class="refAuthor">Eckert, T.</span>, <span class="refAuthor">Ciavaglia, L.</span>, and <span class="refAuthor">J. Nobre</span>, <span class="refTitle">"A Reference Model for Autonomic Networking"</span>, <span class="seriesInfo">RFC 8993</span>, <span class="seriesInfo">DOI 10.17487/RFC8993</span>, <time class="refDate" datetime="2021-05">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8993">https://www.rfc-editor.org/info/rfc8993</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8994">[RFC8994]</dt>
        <dd>
<span class="refAuthor">Eckert, T., Ed.</span>, <span class="refAuthor">Behringer, M., Ed.</span>, and <span class="refAuthor">S. Bjarnason</span>, <span class="refTitle">"An Autonomic Control Plane (ACP)"</span>, <span class="seriesInfo">RFC 8994</span>, <span class="seriesInfo">DOI 10.17487/RFC8994</span>, <time class="refDate" datetime="2021-05">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8994">https://www.rfc-editor.org/info/rfc8994</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8995">[RFC8995]</dt>
      <dd>
<span class="refAuthor">Pritikin, M.</span>, <span class="refAuthor">Richardson, M.</span>, <span class="refAuthor">Eckert, T.</span>, <span class="refAuthor">Behringer, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"Bootstrapping Remote Secure Key Infrastructure (BRSKI)"</span>, <span class="seriesInfo">RFC 8995</span>, <span class="seriesInfo">DOI 10.17487/RFC8995</span>, <time class="refDate" datetime="2021-05">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8995">https://www.rfc-editor.org/info/rfc8995</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="ErrAppx">
<section id="section-appendix.a">
      <h2 id="name-error-codes">
<a class="section-number selfRef" href="#section-appendix.a">Appendix A. </a><a class="section-name selfRef" href="#name-error-codes">Error Codes</a>
      </h2>
<p id="section-appendix.a-1">This appendix lists the error codes defined so far on the basis of
      implementation experience, with suggested symbolic names
      and corresponding descriptive strings in English. It is expected that complete API
      implementations will provide for localization of these descriptive strings,
      and that additional error codes will be needed according to implementation details.<a class="pilcrow" href="#section-appendix.a-1">¶</a></p>
<p id="section-appendix.a-2">The error codes that may only be returned by one or two functions
      are annotated accordingly, and the others may be returned by numerous
      functions. The 'noSecurity'
      error will be returned to most calls if GRASP is running in an insecure mode
      (i.e., with no secure substrate such as the ACP),
      except for the specific DULL usage mode described in
      "Discovery Unsolicited Link-Local (DULL) GRASP" (<span><a class="relref" href="https://www.rfc-editor.org/rfc/rfc8990#section-2.5.2">Section 2.5.2</a> of [<a class="xref" href="#RFC8990">RFC8990</a>]</span>.<a class="pilcrow" href="#section-appendix.a-2">¶</a></p>
<span id="name-error-codes-2"></span><div id="table1_error_codes">
<table class="center" id="table-1">
        <caption>
<a class="selfRef" href="#table-1">Table 1</a>:
<a class="selfRef" href="#name-error-codes-2">Error Codes</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" colspan="1" rowspan="1">Name</th>
            <th class="text-left" colspan="1" rowspan="1">Error Code</th>
            <th class="text-left" colspan="1" rowspan="1">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">ok</td>
            <td class="text-left" colspan="1" rowspan="1">0</td>
            <td class="text-left" colspan="1" rowspan="1">"OK"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">declined</td>
            <td class="text-left" colspan="1" rowspan="1">1</td>
            <td class="text-left" colspan="1" rowspan="1">"Declined" (req_negotiate, negotiate_step)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noReply</td>
            <td class="text-left" colspan="1" rowspan="1">2</td>
            <td class="text-left" colspan="1" rowspan="1">"No reply" (indicates waiting state in event loop calls)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">unspec</td>
            <td class="text-left" colspan="1" rowspan="1">3</td>
            <td class="text-left" colspan="1" rowspan="1">"Unspecified error"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">ASAfull</td>
            <td class="text-left" colspan="1" rowspan="1">4</td>
            <td class="text-left" colspan="1" rowspan="1">"ASA registry full" (register_asa)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">dupASA</td>
            <td class="text-left" colspan="1" rowspan="1">5</td>
            <td class="text-left" colspan="1" rowspan="1">"Duplicate ASA name" (register_asa)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noASA</td>
            <td class="text-left" colspan="1" rowspan="1">6</td>
            <td class="text-left" colspan="1" rowspan="1">"ASA not registered"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notYourASA</td>
            <td class="text-left" colspan="1" rowspan="1">7</td>
            <td class="text-left" colspan="1" rowspan="1">"ASA registered but not by you" (deregister_asa)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notBoth</td>
            <td class="text-left" colspan="1" rowspan="1">8</td>
            <td class="text-left" colspan="1" rowspan="1">"Objective cannot support both negotiation
          and synchronization" (register_obj)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notDry</td>
            <td class="text-left" colspan="1" rowspan="1">9</td>
            <td class="text-left" colspan="1" rowspan="1">"Dry-run allowed only with negotiation"
          (register_obj)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notOverlap</td>
            <td class="text-left" colspan="1" rowspan="1">10</td>
            <td class="text-left" colspan="1" rowspan="1">"Overlap not supported by this implementation"
          (register_obj)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">objFull</td>
            <td class="text-left" colspan="1" rowspan="1">11</td>
            <td class="text-left" colspan="1" rowspan="1">"Objective registry full" (register_obj)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">objReg</td>
            <td class="text-left" colspan="1" rowspan="1">12</td>
            <td class="text-left" colspan="1" rowspan="1">"Objective already registered" (register_obj)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notYourObj</td>
            <td class="text-left" colspan="1" rowspan="1">13</td>
            <td class="text-left" colspan="1" rowspan="1">"Objective not registered by this ASA"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notObj</td>
            <td class="text-left" colspan="1" rowspan="1">14</td>
            <td class="text-left" colspan="1" rowspan="1">"Objective not found"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notNeg</td>
            <td class="text-left" colspan="1" rowspan="1">15</td>
            <td class="text-left" colspan="1" rowspan="1">"Objective not negotiable" (req_negotiate, listen_negotiate)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noSecurity</td>
            <td class="text-left" colspan="1" rowspan="1">16</td>
            <td class="text-left" colspan="1" rowspan="1">"No security"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noDiscReply</td>
            <td class="text-left" colspan="1" rowspan="1">17</td>
            <td class="text-left" colspan="1" rowspan="1">"No reply to discovery" (req_negotiate)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">sockErrNegRq</td>
            <td class="text-left" colspan="1" rowspan="1">18</td>
            <td class="text-left" colspan="1" rowspan="1">"Socket error sending negotiation request" (req_negotiate)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noSession</td>
            <td class="text-left" colspan="1" rowspan="1">19</td>
            <td class="text-left" colspan="1" rowspan="1">"No session"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noSocket</td>
            <td class="text-left" colspan="1" rowspan="1">20</td>
            <td class="text-left" colspan="1" rowspan="1">"No socket"</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">loopExhausted</td>
            <td class="text-left" colspan="1" rowspan="1">21</td>
            <td class="text-left" colspan="1" rowspan="1">"Loop count exhausted" (negotiate_step)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">sockErrNegStep</td>
            <td class="text-left" colspan="1" rowspan="1">22</td>
            <td class="text-left" colspan="1" rowspan="1">"Socket error sending negotiation step" (negotiate_step)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noPeer</td>
            <td class="text-left" colspan="1" rowspan="1">23</td>
            <td class="text-left" colspan="1" rowspan="1"> "No negotiation peer" (req_negotiate, negotiate_step)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">CBORfail</td>
            <td class="text-left" colspan="1" rowspan="1">24</td>
            <td class="text-left" colspan="1" rowspan="1">"CBOR decode failure" (req_negotiate, negotiate_step, synchronize)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">invalidNeg</td>
            <td class="text-left" colspan="1" rowspan="1">25</td>
            <td class="text-left" colspan="1" rowspan="1">"Invalid Negotiate message" (req_negotiate, negotiate_step)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">invalidEnd</td>
            <td class="text-left" colspan="1" rowspan="1">26</td>
            <td class="text-left" colspan="1" rowspan="1">"Invalid end message" (req_negotiate, negotiate_step)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noNegReply</td>
            <td class="text-left" colspan="1" rowspan="1">27</td>
            <td class="text-left" colspan="1" rowspan="1">"No reply to negotiation step" (req_negotiate, negotiate_step)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noValidStep</td>
            <td class="text-left" colspan="1" rowspan="1">28</td>
            <td class="text-left" colspan="1" rowspan="1">"No valid reply to negotiation step" (req_negotiate, negotiate_step)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">sockErrWait</td>
            <td class="text-left" colspan="1" rowspan="1">29</td>
            <td class="text-left" colspan="1" rowspan="1">"Socket error sending wait message" (negotiate_wait)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">sockErrEnd</td>
            <td class="text-left" colspan="1" rowspan="1">30</td>
            <td class="text-left" colspan="1" rowspan="1">"Socket error sending end message" (end_negotiate, send_invalid)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">IDclash</td>
            <td class="text-left" colspan="1" rowspan="1">31</td>
            <td class="text-left" colspan="1" rowspan="1">"Incoming request Session ID clash" (listen_negotiate)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notSynch</td>
            <td class="text-left" colspan="1" rowspan="1">32</td>
            <td class="text-left" colspan="1" rowspan="1"> "Not a synchronization objective" (synchronize, get_flood)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">notFloodDisc</td>
            <td class="text-left" colspan="1" rowspan="1">33</td>
            <td class="text-left" colspan="1" rowspan="1">"Not flooded and no reply to discovery" (synchronize)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">sockErrSynRq</td>
            <td class="text-left" colspan="1" rowspan="1">34</td>
            <td class="text-left" colspan="1" rowspan="1">"Socket error sending synch request" (synchronize)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noListener</td>
            <td class="text-left" colspan="1" rowspan="1">35</td>
            <td class="text-left" colspan="1" rowspan="1">"No synch listener" (synchronize)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noSynchReply</td>
            <td class="text-left" colspan="1" rowspan="1">36</td>
            <td class="text-left" colspan="1" rowspan="1">"No reply to synchronization request" (synchronize)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">noValidSynch</td>
            <td class="text-left" colspan="1" rowspan="1">37</td>
            <td class="text-left" colspan="1" rowspan="1">"No valid reply to synchronization request" (synchronize)</td>
          </tr>
          <tr>
            <td class="text-left" colspan="1" rowspan="1">invalidLoc</td>
            <td class="text-left" colspan="1" rowspan="1">38</td>
            <td class="text-left" colspan="1" rowspan="1">"Invalid locator" (flood)</td>
          </tr>
        </tbody>
      </table>
</div>
<div id="ack">
<section id="section-a.1">
        <h2 id="name-acknowledgements">
<a class="section-name selfRef" href="#name-acknowledgements">Acknowledgements</a>
        </h2>
<p id="section-a.1-1">Excellent suggestions were made by
      <span class="contact-name">Ignas Bagdonas</span>,
      <span class="contact-name">Carsten Bormann</span>,
      <span class="contact-name">Laurent Ciavaglia</span>,
      <span class="contact-name">Roman Danyliw</span>,
      <span class="contact-name">Toerless Eckert</span>,
      <span class="contact-name">Benjamin Kaduk</span>,
      <span class="contact-name">Erik Kline</span>,
      <span class="contact-name">Murray Kucherawy</span>,
      <span class="contact-name">Paul Kyzivat</span>,
      <span class="contact-name">Guangpeng Li</span>,
      <span class="contact-name">Michael Richardson</span>,
      <span class="contact-name">Joseph Salowey</span>,
      <span class="contact-name">Éric Vyncke</span>,
      <span class="contact-name">Magnus Westerlund</span>,
      <span class="contact-name">Rob Wilton</span>,
      and other participants in the ANIMA WG and the IESG.<a class="pilcrow" href="#section-a.1-1">¶</a></p>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.b">
      <h2 id="name-authors-addresses">
<a class="section-name selfRef" href="#name-authors-addresses">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Brian E. Carpenter</span></div>
<div class="left" dir="auto"><span class="extended-address">School of Computer Science<br/>University of Auckland</span></div>
<div class="left" dir="auto"><span class="street-address">PB 92019</span></div>
<div class="left" dir="auto">
<span class="locality">Auckland</span> <span class="postal-code">1142</span>
</div>
<div class="left" dir="auto"><span class="country-name">New Zealand</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:brian.e.carpenter@gmail.com">brian.e.carpenter@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Bing Liu (<span class="role">editor</span>)</span></div>
<div class="left" dir="auto"><span class="org">Huawei Technologies</span></div>
<div class="left" dir="auto"><span class="extended-address">Q14, Huawei Campus</span></div>
<div class="left" dir="auto"><span class="street-address">No.156 Beiqing Road</span></div>
<div class="left" dir="auto"><span class="locality">Hai-Dian District, Beijing</span></div>
<div class="left" dir="auto"><span class="postal-code">100095</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:leo.liubing@huawei.com">leo.liubing@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Wendong Wang</span></div>
<div class="left" dir="auto"><span class="org">BUPT University</span></div>
<div class="left" dir="auto"><span class="extended-address">Beijing University of Posts &amp; Telecom.</span></div>
<div class="left" dir="auto"><span class="street-address">No.10 Xitucheng Road</span></div>
<div class="left" dir="auto"><span class="locality">Hai-Dian District, Beijing 100876</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:wdwang@bupt.edu.cn">wdwang@bupt.edu.cn</a>
</div>
</address>
<address class="vcard">
        <div class="left" dir="auto"><span class="fn nameRole">Xiangyang Gong</span></div>
<div class="left" dir="auto"><span class="org">BUPT University</span></div>
<div class="left" dir="auto"><span class="extended-address">Beijing University of Posts &amp; Telecom.</span></div>
<div class="left" dir="auto"><span class="street-address">No.10 Xitucheng Road</span></div>
<div class="left" dir="auto"><span class="locality">Hai-Dian District, Beijing 100876</span></div>
<div class="left" dir="auto"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a class="email" href="mailto:xygong@bupt.edu.cn">xygong@bupt.edu.cn</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>